const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-BPxLd4cS.js","assets/mixin-D3UDm--6.js","assets/hls-Bm3F2dIq.js","assets/react-Cn7WceYT.js","assets/index-DqyPSgXw.js","assets/dagre-6UL2VRFP-BK_pa8Be.js","assets/graph-B-wk6ujT.js","assets/_baseUniq-CxmzyHLH.js","assets/layout-BWkU07z9.js","assets/_basePickBy-B1IS2FQS.js","assets/clone-CODR-5yD.js","assets/cose-bilkent-S5V4N54A-DUkPHKgO.js","assets/cytoscape.esm-DtBltrT8.js","assets/c4Diagram-YG6GDRKO-DT9zgXG3.js","assets/chunk-TZMSLE5B-BQw77CeV.js","assets/flowDiagram-NV44I4VS-BCF2M5s_.js","assets/chunk-FMBD7UC4-DoQrCzPq.js","assets/chunk-55IACEB6-CQkmyE1Y.js","assets/chunk-QN33PNHL-B7UGcn4G.js","assets/channel-PHOljzFf.js","assets/erDiagram-Q2GNP2WA-CwC9LHzc.js","assets/gitGraphDiagram-NY62KEGX-C9GIJHmL.js","assets/chunk-4BX2VUAB-wBSyHjV2.js","assets/chunk-QZHKN3VN-BMf7zP37.js","assets/treemap-KMMF4GRG-DVWFAZMD.js","assets/ganttDiagram-LVOFAZNH-DeZFF1nQ.js","assets/linear-DnJRQc-2.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-F6ZHWCRC-C9vZWa8k.js","assets/pieDiagram-ADFJNKIX-D59_jzGD.js","assets/arc-DvpWoKUF.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-fpWcGZPB.js","assets/xychartDiagram-PRI3JC2R-DEZNjGCK.js","assets/requirementDiagram-UZGBJVZJ-C6ZdtVpQ.js","assets/sequenceDiagram-WL72ISMW-LYcbjfXE.js","assets/classDiagram-2ON5EDUG-Bsu3Fyb7.js","assets/chunk-B4BG7PRW-DbskDnQt.js","assets/classDiagram-v2-WZHVMYZB-Bsu3Fyb7.js","assets/stateDiagram-FKZM4ZOC-Fx9YKb2z.js","assets/chunk-DI55MBZ5-BcF_vqVf.js","assets/stateDiagram-v2-4FDKWEC3-CA1M7KjY.js","assets/journeyDiagram-XKPGCS4Q-BTTYC-Yn.js","assets/timeline-definition-IT6M3QCI-D61N9Av2.js","assets/mindmap-definition-VGOIOE7T-CMocUZOf.js","assets/kanban-definition-3W4ZIXB7-C3AKCorf.js","assets/sankeyDiagram-TZEHDZUN-CLJwtWMB.js","assets/diagram-S2PKOQOG-BBKFwDTj.js","assets/diagram-QEK2KX5R-Czl7vwEj.js","assets/blockDiagram-VD42YOAC-sFyD7x7Q.js","assets/architectureDiagram-VXUJARFQ-B7CJoxEj.js","assets/diagram-PSM6KHXK-C6K92s8v.js","assets/SettingsPage-CB8do9go.js","assets/tag-CLmgH5HA.js","assets/x-Dc7d7zkt.js","assets/SettingsPage-CYM99hmN.css","assets/SwagPage-CLOrO_GS.js","assets/snippetShareUtils-CEszrteV.js","assets/QuizCard-CTfb43kt.js","assets/extractImages-qKcjm2ka.js","assets/quizSync-DZRIRddW.js","assets/SwagPage-CctKRZTA.css","assets/QuizPage-CmhPJ89t.js","assets/trash-2-D8Sb336G.js","assets/FeedPage-CHYsr7Ld.js","assets/BillingPage-BjUS4TAy.js","assets/BillingPage-CLxBDKkQ.css","assets/SharedSnippetViewer-ld_h3nNM.js","assets/ImageEditorPage-CYzJz9bj.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function p3(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Dx={exports:{}},Sh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC;function aB(){if(RC)return Sh;RC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:s,ref:a!==void 0?a:null,props:i}}return Sh.Fragment=t,Sh.jsx=r,Sh.jsxs=r,Sh}var IC;function iB(){return IC||(IC=1,Dx.exports=aB()),Dx.exports}var d=iB(),Mx={exports:{}},Th={},Ox={exports:{}},jx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function sB(){return DC||(DC=1,(function(e){function t(I,G){var V=I.length;I.push(G);e:for(;0<V;){var oe=V-1>>>1,U=I[oe];if(0<a(U,G))I[oe]=G,I[V]=U,V=oe;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var G=I[0],V=I.pop();if(V!==G){I[0]=V;e:for(var oe=0,U=I.length,z=U>>>1;oe<z;){var ie=2*(oe+1)-1,H=I[ie],ue=ie+1,Z=I[ue];if(0>a(H,V))ue<U&&0>a(Z,H)?(I[oe]=Z,I[ue]=V,oe=ue):(I[oe]=H,I[ie]=V,oe=ie);else if(ue<U&&0>a(Z,V))I[oe]=Z,I[ue]=V,oe=ue;else break e}}return G}function a(I,G){var V=I.sortIndex-G.sortIndex;return V!==0?V:I.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],h=[],p=1,f=null,y=3,b=!1,x=!1,v=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var G=r(h);G!==null;){if(G.callback===null)n(h);else if(G.startTime<=I)n(h),G.sortIndex=G.expirationTime,t(u,G);else break;G=r(h)}}function M(I){if(v=!1,P(I),!x)if(r(u)!==null)x=!0,L||(L=!0,W());else{var G=r(h);G!==null&&$(M,G.startTime-I)}}var L=!1,D=-1,q=5,Q=-1;function F(){return T?!0:!(e.unstable_now()-Q<q)}function K(){if(T=!1,L){var I=e.unstable_now();Q=I;var G=!0;try{e:{x=!1,v&&(v=!1,C(D),D=-1),b=!0;var V=y;try{t:{for(P(I),f=r(u);f!==null&&!(f.expirationTime>I&&F());){var oe=f.callback;if(typeof oe=="function"){f.callback=null,y=f.priorityLevel;var U=oe(f.expirationTime<=I);if(I=e.unstable_now(),typeof U=="function"){f.callback=U,P(I),G=!0;break t}f===r(u)&&n(u),P(I)}else n(u);f=r(u)}if(f!==null)G=!0;else{var z=r(h);z!==null&&$(M,z.startTime-I),G=!1}}break e}finally{f=null,y=V,b=!1}G=void 0}}finally{G?W():L=!1}}}var W;if(typeof A=="function")W=function(){A(K)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,O=j.port2;j.port1.onmessage=K,W=function(){O.postMessage(null)}}else W=function(){k(K,0)};function $(I,G){D=k(function(){I(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(I){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var V=y;y=G;try{return I()}finally{y=V}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(I,G){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=y;y=I;try{return G()}finally{y=V}},e.unstable_scheduleCallback=function(I,G,V){var oe=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?oe+V:oe):V=oe,I){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=V+U,I={id:p++,callback:G,priorityLevel:I,startTime:V,expirationTime:U,sortIndex:-1},V>oe?(I.sortIndex=V,t(h,I),r(u)===null&&I===r(h)&&(v?(C(D),D=-1):v=!0,$(M,V-oe))):(I.sortIndex=U,t(u,I),x||b||(x=!0,L||(L=!0,W()))),I},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(I){var G=y;return function(){var V=y;y=G;try{return I.apply(this,arguments)}finally{y=V}}}})(jx)),jx}var MC;function oB(){return MC||(MC=1,Ox.exports=sB()),Ox.exports}var Bx={exports:{}},er={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function lB(){if(OC)return er;OC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),y=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,T={};function k(z,ie,H){this.props=z,this.context=ie,this.refs=T,this.updater=H||x}k.prototype.isReactComponent={},k.prototype.setState=function(z,ie){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ie,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function C(){}C.prototype=k.prototype;function A(z,ie,H){this.props=z,this.context=ie,this.refs=T,this.updater=H||x}var P=A.prototype=new C;P.constructor=A,v(P,k.prototype),P.isPureReactComponent=!0;var M=Array.isArray;function L(){}var D={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function Q(z,ie,H){var ue=H.ref;return{$$typeof:e,type:z,key:ie,ref:ue!==void 0?ue:null,props:H}}function F(z,ie){return Q(z.type,ie,z.props)}function K(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function W(z){var ie={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(H){return ie[H]})}var j=/\/+/g;function O(z,ie){return typeof z=="object"&&z!==null&&z.key!=null?W(""+z.key):ie.toString(36)}function $(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(L,L):(z.status="pending",z.then(function(ie){z.status==="pending"&&(z.status="fulfilled",z.value=ie)},function(ie){z.status==="pending"&&(z.status="rejected",z.reason=ie)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function I(z,ie,H,ue,Z){var ae=typeof z;(ae==="undefined"||ae==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case e:case t:pe=!0;break;case p:return pe=z._init,I(pe(z._payload),ie,H,ue,Z)}}if(pe)return Z=Z(z),pe=ue===""?"."+O(z,0):ue,M(Z)?(H="",pe!=null&&(H=pe.replace(j,"$&/")+"/"),I(Z,ie,H,"",function(de){return de})):Z!=null&&(K(Z)&&(Z=F(Z,H+(Z.key==null||z&&z.key===Z.key?"":(""+Z.key).replace(j,"$&/")+"/")+pe)),ie.push(Z)),1;pe=0;var ye=ue===""?".":ue+":";if(M(z))for(var _e=0;_e<z.length;_e++)ue=z[_e],ae=ye+O(ue,_e),pe+=I(ue,ie,H,ae,Z);else if(_e=b(z),typeof _e=="function")for(z=_e.call(z),_e=0;!(ue=z.next()).done;)ue=ue.value,ae=ye+O(ue,_e++),pe+=I(ue,ie,H,ae,Z);else if(ae==="object"){if(typeof z.then=="function")return I($(z),ie,H,ue,Z);throw ie=String(z),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return pe}function G(z,ie,H){if(z==null)return z;var ue=[],Z=0;return I(z,ue,"","",function(ae){return ie.call(H,ae,Z++)}),ue}function V(z){if(z._status===-1){var ie=z._result;ie=ie(),ie.then(function(H){(z._status===0||z._status===-1)&&(z._status=1,z._result=H)},function(H){(z._status===0||z._status===-1)&&(z._status=2,z._result=H)}),z._status===-1&&(z._status=0,z._result=ie)}if(z._status===1)return z._result.default;throw z._result}var oe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},U={map:G,forEach:function(z,ie,H){G(z,function(){ie.apply(this,arguments)},H)},count:function(z){var ie=0;return G(z,function(){ie++}),ie},toArray:function(z){return G(z,function(ie){return ie})||[]},only:function(z){if(!K(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return er.Activity=f,er.Children=U,er.Component=k,er.Fragment=r,er.Profiler=a,er.PureComponent=A,er.StrictMode=n,er.Suspense=u,er.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,er.__COMPILER_RUNTIME={__proto__:null,c:function(z){return D.H.useMemoCache(z)}},er.cache=function(z){return function(){return z.apply(null,arguments)}},er.cacheSignal=function(){return null},er.cloneElement=function(z,ie,H){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ue=v({},z.props),Z=z.key;if(ie!=null)for(ae in ie.key!==void 0&&(Z=""+ie.key),ie)!q.call(ie,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ie.ref===void 0||(ue[ae]=ie[ae]);var ae=arguments.length-2;if(ae===1)ue.children=H;else if(1<ae){for(var pe=Array(ae),ye=0;ye<ae;ye++)pe[ye]=arguments[ye+2];ue.children=pe}return Q(z.type,Z,ue)},er.createContext=function(z){return z={$$typeof:s,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:i,_context:z},z},er.createElement=function(z,ie,H){var ue,Z={},ae=null;if(ie!=null)for(ue in ie.key!==void 0&&(ae=""+ie.key),ie)q.call(ie,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Z[ue]=ie[ue]);var pe=arguments.length-2;if(pe===1)Z.children=H;else if(1<pe){for(var ye=Array(pe),_e=0;_e<pe;_e++)ye[_e]=arguments[_e+2];Z.children=ye}if(z&&z.defaultProps)for(ue in pe=z.defaultProps,pe)Z[ue]===void 0&&(Z[ue]=pe[ue]);return Q(z,ae,Z)},er.createRef=function(){return{current:null}},er.forwardRef=function(z){return{$$typeof:l,render:z}},er.isValidElement=K,er.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:V}},er.memo=function(z,ie){return{$$typeof:h,type:z,compare:ie===void 0?null:ie}},er.startTransition=function(z){var ie=D.T,H={};D.T=H;try{var ue=z(),Z=D.S;Z!==null&&Z(H,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(L,oe)}catch(ae){oe(ae)}finally{ie!==null&&H.types!==null&&(ie.types=H.types),D.T=ie}},er.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},er.use=function(z){return D.H.use(z)},er.useActionState=function(z,ie,H){return D.H.useActionState(z,ie,H)},er.useCallback=function(z,ie){return D.H.useCallback(z,ie)},er.useContext=function(z){return D.H.useContext(z)},er.useDebugValue=function(){},er.useDeferredValue=function(z,ie){return D.H.useDeferredValue(z,ie)},er.useEffect=function(z,ie){return D.H.useEffect(z,ie)},er.useEffectEvent=function(z){return D.H.useEffectEvent(z)},er.useId=function(){return D.H.useId()},er.useImperativeHandle=function(z,ie,H){return D.H.useImperativeHandle(z,ie,H)},er.useInsertionEffect=function(z,ie){return D.H.useInsertionEffect(z,ie)},er.useLayoutEffect=function(z,ie){return D.H.useLayoutEffect(z,ie)},er.useMemo=function(z,ie){return D.H.useMemo(z,ie)},er.useOptimistic=function(z,ie){return D.H.useOptimistic(z,ie)},er.useReducer=function(z,ie,H){return D.H.useReducer(z,ie,H)},er.useRef=function(z){return D.H.useRef(z)},er.useState=function(z){return D.H.useState(z)},er.useSyncExternalStore=function(z,ie,H){return D.H.useSyncExternalStore(z,ie,H)},er.useTransition=function(){return D.H.useTransition()},er.version="19.2.0",er}var jC;function eg(){return jC||(jC=1,Bx.exports=lB()),Bx.exports}var Fx={exports:{}},Na={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function cB(){if(BC)return Na;BC=1;var e=eg();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,h,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:u,containerInfo:h,implementation:p}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Na.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Na.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,p)},Na.flushSync=function(u){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,u)return u()}finally{s.T=h,n.p=p,n.d.f()}},Na.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},Na.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Na.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,f=l(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:y,fetchPriority:b}):p==="script"&&n.d.X(u,{crossOrigin:f,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Na.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},Na.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,f=l(p,h.crossOrigin);n.d.L(u,p,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Na.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=l(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},Na.requestFormReset=function(u){n.d.r(u)},Na.unstable_batchedUpdates=function(u,h){return u(h)},Na.useFormState=function(u,h,p){return s.H.useFormState(u,h,p)},Na.useFormStatus=function(){return s.H.useHostTransitionStatus()},Na.version="19.2.0",Na}var FC;function g3(){if(FC)return Fx.exports;FC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fx.exports=cB(),Fx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function uB(){if(zC)return Th;zC=1;var e=oB(),t=eg(),r=g3();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,g=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(g=c.return),o=c.return;while(o)}return c.tag===3?g:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(n(188))}function h(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(n(188));return c!==o?null:o}for(var g=o,m=c;;){var w=g.return;if(w===null)break;var S=w.alternate;if(S===null){if(m=w.return,m!==null){g=m;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===g)return u(w),o;if(S===m)return u(w),c;S=S.sibling}throw Error(n(188))}if(g.return!==m.return)g=w,m=S;else{for(var R=!1,Y=w.child;Y;){if(Y===g){R=!0,g=w,m=S;break}if(Y===m){R=!0,m=w,g=S;break}Y=Y.sibling}if(!R){for(Y=S.child;Y;){if(Y===g){R=!0,g=S,m=w;break}if(Y===m){R=!0,m=S,g=w;break}Y=Y.sibling}if(!R)throw Error(n(189))}}if(g.alternate!==m)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?o:c}function p(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=p(o),c!==null)return c;o=o.sibling}return null}var f=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function W(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var j=Symbol.for("react.client.reference");function O(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===j?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case v:return"Fragment";case k:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList";case Q:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case A:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case P:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return c=o.displayName||null,c!==null?c:O(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return O(o(c))}catch{}}return null}var $=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},oe=[],U=-1;function z(o){return{current:o}}function ie(o){0>U||(o.current=oe[U],oe[U]=null,U--)}function H(o,c){U++,oe[U]=o.current,o.current=c}var ue=z(null),Z=z(null),ae=z(null),pe=z(null);function ye(o,c){switch(H(ae,c),H(Z,o),H(ue,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?tC(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=tC(c),o=rC(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(ue),H(ue,o)}function _e(){ie(ue),ie(Z),ie(ae)}function de(o){o.memoizedState!==null&&H(pe,o);var c=ue.current,g=rC(c,o.type);c!==g&&(H(Z,o),H(ue,g))}function Ae(o){Z.current===o&&(ie(ue),ie(Z)),pe.current===o&&(ie(pe),bh._currentValue=V)}var Te,$e;function ot(o){if(Te===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Te=c&&c[1]||"",$e=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+o+$e}var Tt=!1;function je(o,c){if(!o||Tt)return"";Tt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Pe){var Ne=Pe}Reflect.construct(o,[],ze)}else{try{ze.call()}catch(Pe){Ne=Pe}o.call(ze.prototype)}}else{try{throw Error()}catch(Pe){Ne=Pe}(ze=o())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Pe){if(Pe&&Ne&&typeof Pe.stack=="string")return[Pe.stack,Ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),R=S[0],Y=S[1];if(R&&Y){var ce=R.split(`
`),Ce=Y.split(`
`);for(w=m=0;m<ce.length&&!ce[m].includes("DetermineComponentFrameRoot");)m++;for(;w<Ce.length&&!Ce[w].includes("DetermineComponentFrameRoot");)w++;if(m===ce.length||w===Ce.length)for(m=ce.length-1,w=Ce.length-1;1<=m&&0<=w&&ce[m]!==Ce[w];)w--;for(;1<=m&&0<=w;m--,w--)if(ce[m]!==Ce[w]){if(m!==1||w!==1)do if(m--,w--,0>w||ce[m]!==Ce[w]){var Oe=`
`+ce[m].replace(" at new "," at ");return o.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",o.displayName)),Oe}while(1<=m&&0<=w);break}}}finally{Tt=!1,Error.prepareStackTrace=g}return(g=o?o.displayName||o.name:"")?ot(g):""}function _t(o,c){switch(o.tag){case 26:case 27:case 5:return ot(o.type);case 16:return ot("Lazy");case 13:return o.child!==c&&c!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return je(o.type,!1);case 11:return je(o.type.render,!1);case 1:return je(o.type,!0);case 31:return ot("Activity");default:return""}}function Pt(o){try{var c="",g=null;do c+=_t(o,g),g=o,o=o.return;while(o);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Bt=Object.prototype.hasOwnProperty,kt=e.unstable_scheduleCallback,At=e.unstable_cancelCallback,ir=e.unstable_shouldYield,lr=e.unstable_requestPaint,ft=e.unstable_now,ur=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,we=e.unstable_UserBlockingPriority,Ze=e.unstable_NormalPriority,et=e.unstable_LowPriority,pt=e.unstable_IdlePriority,Ft=e.log,Rr=e.unstable_setDisableYieldValue,hr=null,cr=null;function Xt(o){if(typeof Ft=="function"&&Rr(o),cr&&typeof cr.setStrictMode=="function")try{cr.setStrictMode(hr,o)}catch{}}var tr=Math.clz32?Math.clz32:$o,sa=Math.log,fn=Math.LN2;function $o(o){return o>>>=0,o===0?32:31-(sa(o)/fn|0)|0}var za=256,Ua=262144,ha=4194304;function nn(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function le(o,c,g){var m=o.pendingLanes;if(m===0)return 0;var w=0,S=o.suspendedLanes,R=o.pingedLanes;o=o.warmLanes;var Y=m&134217727;return Y!==0?(m=Y&~S,m!==0?w=nn(m):(R&=Y,R!==0?w=nn(R):g||(g=Y&~o,g!==0&&(w=nn(g))))):(Y=m&~S,Y!==0?w=nn(Y):R!==0?w=nn(R):g||(g=m&~o,g!==0&&(w=nn(g)))),w===0?0:c!==0&&c!==w&&(c&S)===0&&(S=w&-w,g=c&-c,S>=g||S===32&&(g&4194048)!==0)?c:w}function De(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Qe(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var o=ha;return ha<<=1,(ha&62914560)===0&&(ha=4194304),o}function Or(o){for(var c=[],g=0;31>g;g++)c.push(o);return c}function Ar(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function dt(o,c,g,m,w,S){var R=o.pendingLanes;o.pendingLanes=g,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=g,o.entangledLanes&=g,o.errorRecoveryDisabledLanes&=g,o.shellSuspendCounter=0;var Y=o.entanglements,ce=o.expirationTimes,Ce=o.hiddenUpdates;for(g=R&~g;0<g;){var Oe=31-tr(g),ze=1<<Oe;Y[Oe]=0,ce[Oe]=-1;var Ne=Ce[Oe];if(Ne!==null)for(Ce[Oe]=null,Oe=0;Oe<Ne.length;Oe++){var Pe=Ne[Oe];Pe!==null&&(Pe.lane&=-536870913)}g&=~ze}m!==0&&ut(o,m,0),S!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=S&~(R&~c))}function ut(o,c,g){o.pendingLanes|=c,o.suspendedLanes&=~c;var m=31-tr(c);o.entangledLanes|=c,o.entanglements[m]=o.entanglements[m]|1073741824|g&261930}function Lt(o,c){var g=o.entangledLanes|=c;for(o=o.entanglements;g;){var m=31-tr(g),w=1<<m;w&c|o[m]&c&&(o[m]|=c),g&=~w}}function ln(o,c){var g=c&-c;return g=(g&42)!==0?1:rr(g),(g&(o.suspendedLanes|c))!==0?0:g}function rr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function jn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function fi(){var o=G.p;return o!==0?o:(o=window.event,o===void 0?32:EC(o.type))}function ei(o,c){var g=G.p;try{return G.p=o,c()}finally{G.p=g}}var Yn=Math.random().toString(36).slice(2),en="__reactFiber$"+Yn,Fr="__reactProps$"+Yn,$a="__reactContainer$"+Yn,is="__reactEvents$"+Yn,zt="__reactListeners$"+Yn,mi="__reactHandles$"+Yn,yi="__reactResources$"+Yn,gt="__reactMarker$"+Yn;function he(o){delete o[en],delete o[Fr],delete o[is],delete o[zt],delete o[mi]}function Ue(o){var c=o[en];if(c)return c;for(var g=o.parentNode;g;){if(c=g[$a]||g[en]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(o=cC(o);o!==null;){if(g=o[en])return g;o=cC(o)}return c}o=g,g=o.parentNode}return null}function ct(o){if(o=o[en]||o[$a]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function wr(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function jr(o){var c=o[yi];return c||(c=o[yi]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Jt(o){o[gt]=!0}var cn=new Set,Rn={};function oa(o,c){Ke(o,c),Ke(o+"Capture",c)}function Ke(o,c){for(Rn[o]=c,o=0;o<c.length;o++)cn.add(c[o])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zt={},Er={};function wn(o){return Bt.call(Er,o)?!0:Bt.call(Zt,o)?!1:st.test(o)?Er[o]=!0:(Zt[o]=!0,!1)}function la(o,c,g){if(wn(c))if(g===null)o.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+g)}}function Qn(o,c,g){if(g===null)o.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+g)}}function Cn(o,c,g,m){if(m===null)o.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(g);return}o.setAttributeNS(c,g,""+m)}}function $r(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function _a(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function jl(o,c,g){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,S=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(R){g=""+R,S.call(this,R)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function bi(o){if(!o._valueTracker){var c=_a(o)?"checked":"value";o._valueTracker=jl(o,c,""+o[c])}}function _s(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return o&&(m=_a(o)?o.checked?"true":"false":o.value),o=m,o!==g?(c.setValue(o),!0):!1}function qo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bl=/[\n"\\]/g;function pa(o){return o.replace(Bl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ro(o,c,g,m,w,S,R,Y){o.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?o.type=R:o.removeAttribute("type"),c!=null?R==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+$r(c)):o.value!==""+$r(c)&&(o.value=""+$r(c)):R!=="submit"&&R!=="reset"||o.removeAttribute("value"),c!=null?ss(o,R,$r(c)):g!=null?ss(o,R,$r(g)):m!=null&&o.removeAttribute("value"),w==null&&S!=null&&(o.defaultChecked=!!S),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.name=""+$r(Y):o.removeAttribute("name")}function _n(o,c,g,m,w,S,R,Y){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),c!=null||g!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){bi(o);return}g=g!=null?""+$r(g):"",c=c!=null?""+$r(c):g,Y||c===o.value||(o.value=c),o.defaultValue=c}m=m??w,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=Y?o.checked:!!m,o.defaultChecked=!!m,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(o.name=R),bi(o)}function ss(o,c,g){c==="number"&&qo(o.ownerDocument)===o||o.defaultValue===""+g||(o.defaultValue=""+g)}function Bn(o,c,g,m){if(o=o.options,c){c={};for(var w=0;w<g.length;w++)c["$"+g[w]]=!0;for(g=0;g<o.length;g++)w=c.hasOwnProperty("$"+o[g].value),o[g].selected!==w&&(o[g].selected=w),w&&m&&(o[g].defaultSelected=!0)}else{for(g=""+$r(g),c=null,w=0;w<o.length;w++){if(o[w].value===g){o[w].selected=!0,m&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function As(o,c,g){if(c!=null&&(c=""+$r(c),c!==o.value&&(o.value=c),g==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=g!=null?""+$r(g):""}function no(o,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(n(92));if($(m)){if(1<m.length)throw Error(n(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=$r(c),o.defaultValue=g,m=o.textContent,m===g&&m!==""&&m!==null&&(o.value=m),bi(o)}function Mt(o,c){if(c){var g=o.firstChild;if(g&&g===o.lastChild&&g.nodeType===3){g.nodeValue=c;return}}o.textContent=c}var Hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function un(o,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":m?o.setProperty(c,g):typeof g!="number"||g===0||Hc.has(c)?c==="float"?o.cssFloat=g:o[c]=(""+g).trim():o[c]=g+"px"}function Cr(o,c,g){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var w in c)m=c[w],c.hasOwnProperty(w)&&g[w]!==m&&un(o,w,m)}else for(var S in c)c.hasOwnProperty(S)&&un(o,S,c[S])}function Ns(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ho=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(o){return Ho.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function it(){}var mt=null;function Qt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var pr=null,an=null;function ga(o){var c=ct(o);if(c&&(o=c.stateNode)){var g=o[Fr]||null;e:switch(o=c.stateNode,c.type){case"input":if(ro(o,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=o;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+pa(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==o&&m.form===o.form){var w=m[Fr]||null;if(!w)throw Error(n(90));ro(m,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===o.form&&_s(m)}break e;case"textarea":As(o,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Bn(o,!!g.multiple,c,!1)}}}var ao=!1;function Fl(o,c,g){if(ao)return o(c,g);ao=!0;try{var m=o(c);return m}finally{if(ao=!1,(pr!==null||an!==null)&&(pf(),pr&&(c=pr,o=an,an=pr=null,ga(c),o)))for(c=0;c<o.length;c++)ga(o[c])}}function fa(o,c){var g=o.stateNode;if(g===null)return null;var m=g[Fr]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=!1;if(Kn)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{Bd=!1}var os=null,Gc=null,ls=null;function Wc(){if(ls)return ls;var o,c=Gc,g=c.length,m,w="value"in os?os.value:os.textContent,S=w.length;for(o=0;o<g&&c[o]===w[o];o++);var R=g-o;for(m=1;m<=R&&c[g-m]===w[S-m];m++);return ls=w.slice(o,1<m?1-m:void 0)}function io(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Vc(){return!0}function kg(){return!1}function Sr(o){function c(g,m,w,S,R){this._reactName=g,this._targetInst=w,this.type=m,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(g=o[Y],this[Y]=g?g(S):S[Y]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Vc:kg,this.isPropagationStopped=kg,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Vc)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Vc)},persist:function(){},isPersistent:Vc}),c}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yc=Sr(so),Go=f({},so,{view:0,detail:0}),Ay=Sr(Go),Qc,Kc,Oi,cs=f({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Oi&&(Oi&&o.type==="mousemove"?(Qc=o.screenX-Oi.screenX,Kc=o.screenY-Oi.screenY):Kc=Qc=0,Oi=o),Qc)},movementY:function(o){return"movementY"in o?o.movementY:Kc}}),Eg=Sr(cs),Ny=f({},cs,{dataTransfer:0}),Ly=Sr(Ny),Py=f({},Go,{relatedTarget:0}),Fd=Sr(Py),oo=f({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=Sr(oo),Ry=f({},so,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Iy=Sr(Ry),Dy=f({},so,{data:0}),_g=Sr(Dy),Ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},My={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oy(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=lo[o])?!!c[o]:!1}function zd(){return Oy}var jy=f({},Go,{key:function(o){if(o.key){var c=Ag[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=io(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?My[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?io(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?io(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),By=Sr(jy),Fy=f({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ng=Sr(Fy),zy=f({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Uy=Sr(zy),$y=f({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lg=Sr($y),qy=f({},cs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=Sr(qy),Gy=f({},so,{newState:0,oldState:0}),B=Sr(Gy),te=[9,13,27,32],Se=Kn&&"CompositionEvent"in window,Xe=null;Kn&&"documentMode"in document&&(Xe=document.documentMode);var Me=Kn&&"TextEvent"in window&&!Xe,J=Kn&&(!Se||Xe&&8<Xe&&11>=Xe),Ve=" ",Ee=!1;function Ie(o,c){switch(o){case"keyup":return te.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var He=!1;function We(o,c){switch(o){case"compositionend":return fe(c);case"keypress":return c.which!==32?null:(Ee=!0,Ve);case"textInput":return o=c.data,o===Ve&&Ee?null:o;default:return null}}function Le(o,c){if(He)return o==="compositionend"||!Se&&Ie(o,c)?(o=Wc(),ls=Gc=os=null,He=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return J&&c.locale!=="ko"?null:c.data;default:return null}}var tt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!tt[o.type]:c==="textarea"}function Sn(o,c,g,m){pr?an?an.push(m):an=[m]:pr=m,c=vf(c,"onChange"),0<c.length&&(g=new Yc("onChange","change",null,g,m),o.push({event:g,listeners:c}))}var ma=null,ya=null;function Xn(o){QE(o,0)}function ba(o){var c=wr(o);if(_s(c))return o}function Aa(o,c){if(o==="change")return c}var ji=!1;if(Kn){var qa;if(Kn){var xi="oninput"in document;if(!xi){var vi=document.createElement("div");vi.setAttribute("oninput","return;"),xi=typeof vi.oninput=="function"}qa=xi}else qa=!1;ji=qa&&(!document.documentMode||9<document.documentMode)}function Xc(){ma&&(ma.detachEvent("onpropertychange",Jc),ya=ma=null)}function Jc(o){if(o.propertyName==="value"&&ba(ya)){var c=[];Sn(c,ya,o,Qt(o)),Fl(Xn,c)}}function us(o,c,g){o==="focusin"?(Xc(),ma=c,ya=g,ma.attachEvent("onpropertychange",Jc)):o==="focusout"&&Xc()}function Ud(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ba(ya)}function Wy(o,c){if(o==="click")return ba(c)}function $d(o,c){if(o==="input"||o==="change")return ba(c)}function Wt(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var X=typeof Object.is=="function"?Object.is:Wt;function Fn(o,c){if(X(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var g=Object.keys(o),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var w=g[m];if(!Bt.call(c,w)||!X(o[w],c[w]))return!1}return!0}function Tn(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wo(o,c){var g=Tn(o);o=0;for(var m;g;){if(g.nodeType===3){if(m=o+g.textContent.length,o<=c&&m>=c)return{node:g,offset:c-o};o=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Tn(g)}}function Ul(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Ul(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function qd(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=qo(o.document);c instanceof o.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)o=c.contentWindow;else break;c=qo(o.document)}return c}function Zc(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Pg=Kn&&"documentMode"in document&&11>=document.documentMode,xa=null,eu=null,Ge=null,be=!1;function Be(o,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;be||xa==null||xa!==qo(m)||(m=xa,"selectionStart"in m&&Zc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ge&&Fn(Ge,m)||(Ge=m,m=vf(eu,"onSelect"),0<m.length&&(c=new Yc("onSelect","select",null,c,g),o.push({event:c,listeners:m}),c.target=xa)))}function bt(o,c){var g={};return g[o.toLowerCase()]=c.toLowerCase(),g["Webkit"+o]="webkit"+c,g["Moz"+o]="moz"+c,g}var Et={animationend:bt("Animation","AnimationEnd"),animationiteration:bt("Animation","AnimationIteration"),animationstart:bt("Animation","AnimationStart"),transitionrun:bt("Transition","TransitionRun"),transitionstart:bt("Transition","TransitionStart"),transitioncancel:bt("Transition","TransitionCancel"),transitionend:bt("Transition","TransitionEnd")},rt={},Nr={};Kn&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);function dn(o){if(rt[o])return rt[o];if(!Et[o])return o;var c=Et[o],g;for(g in c)if(c.hasOwnProperty(g)&&g in Nr)return rt[o]=c[g];return o}var mn=dn("animationend"),qr=dn("animationiteration"),Hr=dn("animationstart"),ds=dn("transitionrun"),Yr=dn("transitionstart"),Jn=dn("transitioncancel"),hs=dn("transitionend"),NT=new Map,Vy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vy.push("scrollEnd");function ps(o,c){NT.set(o,c),oa(c,[o])}var Rg=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Bi=[],tu=0,Yy=0;function Ig(){for(var o=tu,c=Yy=tu=0;c<o;){var g=Bi[c];Bi[c++]=null;var m=Bi[c];Bi[c++]=null;var w=Bi[c];Bi[c++]=null;var S=Bi[c];if(Bi[c++]=null,m!==null&&w!==null){var R=m.pending;R===null?w.next=w:(w.next=R.next,R.next=w),m.pending=w}S!==0&&LT(g,w,S)}}function Dg(o,c,g,m){Bi[tu++]=o,Bi[tu++]=c,Bi[tu++]=g,Bi[tu++]=m,Yy|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Qy(o,c,g,m){return Dg(o,c,g,m),Mg(o)}function $l(o,c){return Dg(o,null,null,c),Mg(o)}function LT(o,c,g){o.lanes|=g;var m=o.alternate;m!==null&&(m.lanes|=g);for(var w=!1,S=o.return;S!==null;)S.childLanes|=g,m=S.alternate,m!==null&&(m.childLanes|=g),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(w=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,w&&c!==null&&(w=31-tr(g),o=S.hiddenUpdates,m=o[w],m===null?o[w]=[c]:m.push(c),c.lane=g|536870912),S):null}function Mg(o){if(50<dh)throw dh=0,ax=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var ru={};function U5(o,c,g,m){this.tag=o,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(o,c,g,m){return new U5(o,c,g,m)}function Ky(o){return o=o.prototype,!(!o||!o.isReactComponent)}function co(o,c){var g=o.alternate;return g===null?(g=wi(o.tag,c,o.key,o.mode),g.elementType=o.elementType,g.type=o.type,g.stateNode=o.stateNode,g.alternate=o,o.alternate=g):(g.pendingProps=c,g.type=o.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=o.flags&65011712,g.childLanes=o.childLanes,g.lanes=o.lanes,g.child=o.child,g.memoizedProps=o.memoizedProps,g.memoizedState=o.memoizedState,g.updateQueue=o.updateQueue,c=o.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=o.sibling,g.index=o.index,g.ref=o.ref,g.refCleanup=o.refCleanup,g}function PT(o,c){o.flags&=65011714;var g=o.alternate;return g===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=g.childLanes,o.lanes=g.lanes,o.child=g.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=g.memoizedProps,o.memoizedState=g.memoizedState,o.updateQueue=g.updateQueue,o.type=g.type,c=g.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Og(o,c,g,m,w,S){var R=0;if(m=o,typeof o=="function")Ky(o)&&(R=1);else if(typeof o=="string")R=Wj(o,g,ue.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case Q:return o=wi(31,g,c,w),o.elementType=Q,o.lanes=S,o;case v:return ql(g.children,w,S,c);case T:R=8,w|=24;break;case k:return o=wi(12,g,c,w|2),o.elementType=k,o.lanes=S,o;case M:return o=wi(13,g,c,w),o.elementType=M,o.lanes=S,o;case L:return o=wi(19,g,c,w),o.elementType=L,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:R=10;break e;case C:R=9;break e;case P:R=11;break e;case D:R=14;break e;case q:R=16,m=null;break e}R=29,g=Error(n(130,o===null?"null":typeof o,"")),m=null}return c=wi(R,g,c,w),c.elementType=o,c.type=m,c.lanes=S,c}function ql(o,c,g,m){return o=wi(7,o,m,c),o.lanes=g,o}function Xy(o,c,g){return o=wi(6,o,null,c),o.lanes=g,o}function RT(o){var c=wi(18,null,null,0);return c.stateNode=o,c}function Jy(o,c,g){return c=wi(4,o.children!==null?o.children:[],o.key,c),c.lanes=g,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var IT=new WeakMap;function Fi(o,c){if(typeof o=="object"&&o!==null){var g=IT.get(o);return g!==void 0?g:(c={value:o,source:c,stack:Pt(c)},IT.set(o,c),c)}return{value:o,source:c,stack:Pt(c)}}var nu=[],au=0,jg=null,Hd=0,zi=[],Ui=0,Vo=null,Ps=1,Rs="";function uo(o,c){nu[au++]=Hd,nu[au++]=jg,jg=o,Hd=c}function DT(o,c,g){zi[Ui++]=Ps,zi[Ui++]=Rs,zi[Ui++]=Vo,Vo=o;var m=Ps;o=Rs;var w=32-tr(m)-1;m&=~(1<<w),g+=1;var S=32-tr(c)+w;if(30<S){var R=w-w%5;S=(m&(1<<R)-1).toString(32),m>>=R,w-=R,Ps=1<<32-tr(c)+w|g<<w|m,Rs=S+o}else Ps=1<<S|g<<w|m,Rs=o}function Zy(o){o.return!==null&&(uo(o,1),DT(o,1,0))}function eb(o){for(;o===jg;)jg=nu[--au],nu[au]=null,Hd=nu[--au],nu[au]=null;for(;o===Vo;)Vo=zi[--Ui],zi[Ui]=null,Rs=zi[--Ui],zi[Ui]=null,Ps=zi[--Ui],zi[Ui]=null}function MT(o,c){zi[Ui++]=Ps,zi[Ui++]=Rs,zi[Ui++]=Vo,Ps=c.id,Rs=c.overflow,Vo=o}var va=null,hn=null,_r=!1,Yo=null,$i=!1,tb=Error(n(519));function Qo(o){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gd(Fi(c,o)),tb}function OT(o){var c=o.stateNode,g=o.type,m=o.memoizedProps;switch(c[en]=o,c[Fr]=m,g){case"dialog":mr("cancel",c),mr("close",c);break;case"iframe":case"object":case"embed":mr("load",c);break;case"video":case"audio":for(g=0;g<ph.length;g++)mr(ph[g],c);break;case"source":mr("error",c);break;case"img":case"image":case"link":mr("error",c),mr("load",c);break;case"details":mr("toggle",c);break;case"input":mr("invalid",c),_n(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":mr("invalid",c);break;case"textarea":mr("invalid",c),no(c,m.value,m.defaultValue,m.children)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||ZE(c.textContent,g)?(m.popover!=null&&(mr("beforetoggle",c),mr("toggle",c)),m.onScroll!=null&&mr("scroll",c),m.onScrollEnd!=null&&mr("scrollend",c),m.onClick!=null&&(c.onclick=it),c=!0):c=!1,c||Qo(o,!0)}function jT(o){for(va=o.return;va;)switch(va.tag){case 5:case 31:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:va=va.return}}function iu(o){if(o!==va)return!1;if(!_r)return jT(o),_r=!0,!1;var c=o.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=o.type,g=!(g!=="form"&&g!=="button")||xx(o.type,o.memoizedProps)),g=!g),g&&hn&&Qo(o),jT(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));hn=lC(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));hn=lC(o)}else c===27?(c=hn,cl(o.type)?(o=kx,kx=null,hn=o):hn=c):hn=va?Hi(o.stateNode.nextSibling):null;return!0}function Hl(){hn=va=null,_r=!1}function rb(){var o=Yo;return o!==null&&(ai===null?ai=o:ai.push.apply(ai,o),Yo=null),o}function Gd(o){Yo===null?Yo=[o]:Yo.push(o)}var nb=z(null),Gl=null,ho=null;function Ko(o,c,g){H(nb,c._currentValue),c._currentValue=g}function po(o){o._currentValue=nb.current,ie(nb)}function ab(o,c,g){for(;o!==null;){var m=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),o===g)break;o=o.return}}function ib(o,c,g,m){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var S=w.dependencies;if(S!==null){var R=w.child;S=S.firstContext;e:for(;S!==null;){var Y=S;S=w;for(var ce=0;ce<c.length;ce++)if(Y.context===c[ce]){S.lanes|=g,Y=S.alternate,Y!==null&&(Y.lanes|=g),ab(S.return,g,o),m||(R=null);break e}S=Y.next}}else if(w.tag===18){if(R=w.return,R===null)throw Error(n(341));R.lanes|=g,S=R.alternate,S!==null&&(S.lanes|=g),ab(R,g,o),R=null}else R=w.child;if(R!==null)R.return=w;else for(R=w;R!==null;){if(R===o){R=null;break}if(w=R.sibling,w!==null){w.return=R.return,R=w;break}R=R.return}w=R}}function su(o,c,g,m){o=null;for(var w=c,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var R=w.alternate;if(R===null)throw Error(n(387));if(R=R.memoizedProps,R!==null){var Y=w.type;X(w.pendingProps.value,R.value)||(o!==null?o.push(Y):o=[Y])}}else if(w===pe.current){if(R=w.alternate,R===null)throw Error(n(387));R.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(bh):o=[bh])}w=w.return}o!==null&&ib(c,o,g,m),c.flags|=262144}function Bg(o){for(o=o.firstContext;o!==null;){if(!X(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Wl(o){Gl=o,ho=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function wa(o){return BT(Gl,o)}function Fg(o,c){return Gl===null&&Wl(o),BT(o,c)}function BT(o,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},ho===null){if(o===null)throw Error(n(308));ho=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else ho=ho.next=c;return g}var $5=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(g,m){o.push(m)}};this.abort=function(){c.aborted=!0,o.forEach(function(g){return g()})}},q5=e.unstable_scheduleCallback,H5=e.unstable_NormalPriority,zn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sb(){return{controller:new $5,data:new Map,refCount:0}}function Wd(o){o.refCount--,o.refCount===0&&q5(H5,function(){o.controller.abort()})}var Vd=null,ob=0,ou=0,lu=null;function G5(o,c){if(Vd===null){var g=Vd=[];ob=0,ou=ux(),lu={status:"pending",value:void 0,then:function(m){g.push(m)}}}return ob++,c.then(FT,FT),c}function FT(){if(--ob===0&&Vd!==null){lu!==null&&(lu.status="fulfilled");var o=Vd;Vd=null,ou=0,lu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function W5(o,c){var g=[],m={status:"pending",value:null,reason:null,then:function(w){g.push(w)}};return o.then(function(){m.status="fulfilled",m.value=c;for(var w=0;w<g.length;w++)(0,g[w])(c)},function(w){for(m.status="rejected",m.reason=w,w=0;w<g.length;w++)(0,g[w])(void 0)}),m}var zT=I.S;I.S=function(o,c){TE=ft(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&G5(o,c),zT!==null&&zT(o,c)};var Vl=z(null);function lb(){var o=Vl.current;return o!==null?o:tn.pooledCache}function zg(o,c){c===null?H(Vl,Vl.current):H(Vl,c.pool)}function UT(){var o=lb();return o===null?null:{parent:zn._currentValue,pool:o}}var cu=Error(n(460)),cb=Error(n(474)),Ug=Error(n(542)),$g={then:function(){}};function $T(o){return o=o.status,o==="fulfilled"||o==="rejected"}function qT(o,c,g){switch(g=o[g],g===void 0?o.push(c):g!==c&&(c.then(it,it),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,GT(o),o;default:if(typeof c.status=="string")c.then(it,it);else{if(o=tn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(m){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=m}},function(m){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,GT(o),o}throw Ql=c,cu}}function Yl(o){try{var c=o._init;return c(o._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Ql=g,cu):g}}var Ql=null;function HT(){if(Ql===null)throw Error(n(459));var o=Ql;return Ql=null,o}function GT(o){if(o===cu||o===Ug)throw Error(n(483))}var uu=null,Yd=0;function qg(o){var c=Yd;return Yd+=1,uu===null&&(uu=[]),qT(uu,o,c)}function Qd(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Hg(o,c){throw c.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function WT(o){function c(me,ge){if(o){var ke=me.deletions;ke===null?(me.deletions=[ge],me.flags|=16):ke.push(ge)}}function g(me,ge){if(!o)return null;for(;ge!==null;)c(me,ge),ge=ge.sibling;return null}function m(me){for(var ge=new Map;me!==null;)me.key!==null?ge.set(me.key,me):ge.set(me.index,me),me=me.sibling;return ge}function w(me,ge){return me=co(me,ge),me.index=0,me.sibling=null,me}function S(me,ge,ke){return me.index=ke,o?(ke=me.alternate,ke!==null?(ke=ke.index,ke<ge?(me.flags|=67108866,ge):ke):(me.flags|=67108866,ge)):(me.flags|=1048576,ge)}function R(me){return o&&me.alternate===null&&(me.flags|=67108866),me}function Y(me,ge,ke,Fe){return ge===null||ge.tag!==6?(ge=Xy(ke,me.mode,Fe),ge.return=me,ge):(ge=w(ge,ke),ge.return=me,ge)}function ce(me,ge,ke,Fe){var Ot=ke.type;return Ot===v?Oe(me,ge,ke.props.children,Fe,ke.key):ge!==null&&(ge.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===q&&Yl(Ot)===ge.type)?(ge=w(ge,ke.props),Qd(ge,ke),ge.return=me,ge):(ge=Og(ke.type,ke.key,ke.props,null,me.mode,Fe),Qd(ge,ke),ge.return=me,ge)}function Ce(me,ge,ke,Fe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==ke.containerInfo||ge.stateNode.implementation!==ke.implementation?(ge=Jy(ke,me.mode,Fe),ge.return=me,ge):(ge=w(ge,ke.children||[]),ge.return=me,ge)}function Oe(me,ge,ke,Fe,Ot){return ge===null||ge.tag!==7?(ge=ql(ke,me.mode,Fe,Ot),ge.return=me,ge):(ge=w(ge,ke),ge.return=me,ge)}function ze(me,ge,ke){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Xy(""+ge,me.mode,ke),ge.return=me,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ke=Og(ge.type,ge.key,ge.props,null,me.mode,ke),Qd(ke,ge),ke.return=me,ke;case x:return ge=Jy(ge,me.mode,ke),ge.return=me,ge;case q:return ge=Yl(ge),ze(me,ge,ke)}if($(ge)||W(ge))return ge=ql(ge,me.mode,ke,null),ge.return=me,ge;if(typeof ge.then=="function")return ze(me,qg(ge),ke);if(ge.$$typeof===A)return ze(me,Fg(me,ge),ke);Hg(me,ge)}return null}function Ne(me,ge,ke,Fe){var Ot=ge!==null?ge.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ot!==null?null:Y(me,ge,""+ke,Fe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case b:return ke.key===Ot?ce(me,ge,ke,Fe):null;case x:return ke.key===Ot?Ce(me,ge,ke,Fe):null;case q:return ke=Yl(ke),Ne(me,ge,ke,Fe)}if($(ke)||W(ke))return Ot!==null?null:Oe(me,ge,ke,Fe,null);if(typeof ke.then=="function")return Ne(me,ge,qg(ke),Fe);if(ke.$$typeof===A)return Ne(me,ge,Fg(me,ke),Fe);Hg(me,ke)}return null}function Pe(me,ge,ke,Fe,Ot){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return me=me.get(ke)||null,Y(ge,me,""+Fe,Ot);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case b:return me=me.get(Fe.key===null?ke:Fe.key)||null,ce(ge,me,Fe,Ot);case x:return me=me.get(Fe.key===null?ke:Fe.key)||null,Ce(ge,me,Fe,Ot);case q:return Fe=Yl(Fe),Pe(me,ge,ke,Fe,Ot)}if($(Fe)||W(Fe))return me=me.get(ke)||null,Oe(ge,me,Fe,Ot,null);if(typeof Fe.then=="function")return Pe(me,ge,ke,qg(Fe),Ot);if(Fe.$$typeof===A)return Pe(me,ge,ke,Fg(ge,Fe),Ot);Hg(ge,Fe)}return null}function yt(me,ge,ke,Fe){for(var Ot=null,Ir=null,Nt=ge,sr=ge=0,kr=null;Nt!==null&&sr<ke.length;sr++){Nt.index>sr?(kr=Nt,Nt=null):kr=Nt.sibling;var Dr=Ne(me,Nt,ke[sr],Fe);if(Dr===null){Nt===null&&(Nt=kr);break}o&&Nt&&Dr.alternate===null&&c(me,Nt),ge=S(Dr,ge,sr),Ir===null?Ot=Dr:Ir.sibling=Dr,Ir=Dr,Nt=kr}if(sr===ke.length)return g(me,Nt),_r&&uo(me,sr),Ot;if(Nt===null){for(;sr<ke.length;sr++)Nt=ze(me,ke[sr],Fe),Nt!==null&&(ge=S(Nt,ge,sr),Ir===null?Ot=Nt:Ir.sibling=Nt,Ir=Nt);return _r&&uo(me,sr),Ot}for(Nt=m(Nt);sr<ke.length;sr++)kr=Pe(Nt,me,sr,ke[sr],Fe),kr!==null&&(o&&kr.alternate!==null&&Nt.delete(kr.key===null?sr:kr.key),ge=S(kr,ge,sr),Ir===null?Ot=kr:Ir.sibling=kr,Ir=kr);return o&&Nt.forEach(function(gl){return c(me,gl)}),_r&&uo(me,sr),Ot}function qt(me,ge,ke,Fe){if(ke==null)throw Error(n(151));for(var Ot=null,Ir=null,Nt=ge,sr=ge=0,kr=null,Dr=ke.next();Nt!==null&&!Dr.done;sr++,Dr=ke.next()){Nt.index>sr?(kr=Nt,Nt=null):kr=Nt.sibling;var gl=Ne(me,Nt,Dr.value,Fe);if(gl===null){Nt===null&&(Nt=kr);break}o&&Nt&&gl.alternate===null&&c(me,Nt),ge=S(gl,ge,sr),Ir===null?Ot=gl:Ir.sibling=gl,Ir=gl,Nt=kr}if(Dr.done)return g(me,Nt),_r&&uo(me,sr),Ot;if(Nt===null){for(;!Dr.done;sr++,Dr=ke.next())Dr=ze(me,Dr.value,Fe),Dr!==null&&(ge=S(Dr,ge,sr),Ir===null?Ot=Dr:Ir.sibling=Dr,Ir=Dr);return _r&&uo(me,sr),Ot}for(Nt=m(Nt);!Dr.done;sr++,Dr=ke.next())Dr=Pe(Nt,me,sr,Dr.value,Fe),Dr!==null&&(o&&Dr.alternate!==null&&Nt.delete(Dr.key===null?sr:Dr.key),ge=S(Dr,ge,sr),Ir===null?Ot=Dr:Ir.sibling=Dr,Ir=Dr);return o&&Nt.forEach(function(nB){return c(me,nB)}),_r&&uo(me,sr),Ot}function Xr(me,ge,ke,Fe){if(typeof ke=="object"&&ke!==null&&ke.type===v&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case b:e:{for(var Ot=ke.key;ge!==null;){if(ge.key===Ot){if(Ot=ke.type,Ot===v){if(ge.tag===7){g(me,ge.sibling),Fe=w(ge,ke.props.children),Fe.return=me,me=Fe;break e}}else if(ge.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===q&&Yl(Ot)===ge.type){g(me,ge.sibling),Fe=w(ge,ke.props),Qd(Fe,ke),Fe.return=me,me=Fe;break e}g(me,ge);break}else c(me,ge);ge=ge.sibling}ke.type===v?(Fe=ql(ke.props.children,me.mode,Fe,ke.key),Fe.return=me,me=Fe):(Fe=Og(ke.type,ke.key,ke.props,null,me.mode,Fe),Qd(Fe,ke),Fe.return=me,me=Fe)}return R(me);case x:e:{for(Ot=ke.key;ge!==null;){if(ge.key===Ot)if(ge.tag===4&&ge.stateNode.containerInfo===ke.containerInfo&&ge.stateNode.implementation===ke.implementation){g(me,ge.sibling),Fe=w(ge,ke.children||[]),Fe.return=me,me=Fe;break e}else{g(me,ge);break}else c(me,ge);ge=ge.sibling}Fe=Jy(ke,me.mode,Fe),Fe.return=me,me=Fe}return R(me);case q:return ke=Yl(ke),Xr(me,ge,ke,Fe)}if($(ke))return yt(me,ge,ke,Fe);if(W(ke)){if(Ot=W(ke),typeof Ot!="function")throw Error(n(150));return ke=Ot.call(ke),qt(me,ge,ke,Fe)}if(typeof ke.then=="function")return Xr(me,ge,qg(ke),Fe);if(ke.$$typeof===A)return Xr(me,ge,Fg(me,ke),Fe);Hg(me,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,ge!==null&&ge.tag===6?(g(me,ge.sibling),Fe=w(ge,ke),Fe.return=me,me=Fe):(g(me,ge),Fe=Xy(ke,me.mode,Fe),Fe.return=me,me=Fe),R(me)):g(me,ge)}return function(me,ge,ke,Fe){try{Yd=0;var Ot=Xr(me,ge,ke,Fe);return uu=null,Ot}catch(Nt){if(Nt===cu||Nt===Ug)throw Nt;var Ir=wi(29,Nt,null,me.mode);return Ir.lanes=Fe,Ir.return=me,Ir}finally{}}}var Kl=WT(!0),VT=WT(!1),Xo=!1;function ub(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function db(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Jo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Zo(o,c,g){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Br&2)!==0){var w=m.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),m.pending=c,c=Mg(o),LT(o,null,g),c}return Dg(o,m,c,g),Mg(o)}function Kd(o,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=o.pendingLanes,g|=m,c.lanes=g,Lt(o,g)}}function hb(o,c){var g=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var w=null,S=null;if(g=g.firstBaseUpdate,g!==null){do{var R={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};S===null?w=S=R:S=S.next=R,g=g.next}while(g!==null);S===null?w=S=c:S=S.next=c}else w=S=c;g={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},o.updateQueue=g;return}o=g.lastBaseUpdate,o===null?g.firstBaseUpdate=c:o.next=c,g.lastBaseUpdate=c}var pb=!1;function Xd(){if(pb){var o=lu;if(o!==null)throw o}}function Jd(o,c,g,m){pb=!1;var w=o.updateQueue;Xo=!1;var S=w.firstBaseUpdate,R=w.lastBaseUpdate,Y=w.shared.pending;if(Y!==null){w.shared.pending=null;var ce=Y,Ce=ce.next;ce.next=null,R===null?S=Ce:R.next=Ce,R=ce;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,Y=Oe.lastBaseUpdate,Y!==R&&(Y===null?Oe.firstBaseUpdate=Ce:Y.next=Ce,Oe.lastBaseUpdate=ce))}if(S!==null){var ze=w.baseState;R=0,Oe=Ce=ce=null,Y=S;do{var Ne=Y.lane&-536870913,Pe=Ne!==Y.lane;if(Pe?(Tr&Ne)===Ne:(m&Ne)===Ne){Ne!==0&&Ne===ou&&(pb=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var yt=o,qt=Y;Ne=c;var Xr=g;switch(qt.tag){case 1:if(yt=qt.payload,typeof yt=="function"){ze=yt.call(Xr,ze,Ne);break e}ze=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=qt.payload,Ne=typeof yt=="function"?yt.call(Xr,ze,Ne):yt,Ne==null)break e;ze=f({},ze,Ne);break e;case 2:Xo=!0}}Ne=Y.callback,Ne!==null&&(o.flags|=64,Pe&&(o.flags|=8192),Pe=w.callbacks,Pe===null?w.callbacks=[Ne]:Pe.push(Ne))}else Pe={lane:Ne,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Oe===null?(Ce=Oe=Pe,ce=ze):Oe=Oe.next=Pe,R|=Ne;if(Y=Y.next,Y===null){if(Y=w.shared.pending,Y===null)break;Pe=Y,Y=Pe.next,Pe.next=null,w.lastBaseUpdate=Pe,w.shared.pending=null}}while(!0);Oe===null&&(ce=ze),w.baseState=ce,w.firstBaseUpdate=Ce,w.lastBaseUpdate=Oe,S===null&&(w.shared.lanes=0),al|=R,o.lanes=R,o.memoizedState=ze}}function YT(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function QT(o,c){var g=o.callbacks;if(g!==null)for(o.callbacks=null,o=0;o<g.length;o++)YT(g[o],c)}var du=z(null),Gg=z(0);function KT(o,c){o=So,H(Gg,o),H(du,c),So=o|c.baseLanes}function gb(){H(Gg,So),H(du,du.current)}function fb(){So=Gg.current,ie(du),ie(Gg)}var Si=z(null),qi=null;function el(o){var c=o.alternate;H(In,In.current&1),H(Si,o),qi===null&&(c===null||du.current!==null||c.memoizedState!==null)&&(qi=o)}function mb(o){H(In,In.current),H(Si,o),qi===null&&(qi=o)}function XT(o){o.tag===22?(H(In,In.current),H(Si,o),qi===null&&(qi=o)):tl()}function tl(){H(In,In.current),H(Si,Si.current)}function Ti(o){ie(Si),qi===o&&(qi=null),ie(In)}var In=z(0);function Wg(o){for(var c=o;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||Sx(g)||Tx(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var go=0,nr=null,Qr=null,Un=null,Vg=!1,hu=!1,Xl=!1,Yg=0,Zd=0,pu=null,V5=0;function An(){throw Error(n(321))}function yb(o,c){if(c===null)return!1;for(var g=0;g<c.length&&g<o.length;g++)if(!X(o[g],c[g]))return!1;return!0}function bb(o,c,g,m,w,S){return go=S,nr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=o===null||o.memoizedState===null?Dk:Ib,Xl=!1,S=g(m,w),Xl=!1,hu&&(S=ZT(c,g,m,w)),JT(o),S}function JT(o){I.H=rh;var c=Qr!==null&&Qr.next!==null;if(go=0,Un=Qr=nr=null,Vg=!1,Zd=0,pu=null,c)throw Error(n(300));o===null||$n||(o=o.dependencies,o!==null&&Bg(o)&&($n=!0))}function ZT(o,c,g,m){nr=o;var w=0;do{if(hu&&(pu=null),Zd=0,hu=!1,25<=w)throw Error(n(301));if(w+=1,Un=Qr=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}I.H=Mk,S=c(g,m)}while(hu);return S}function Y5(){var o=I.H,c=o.useState()[0];return c=typeof c.then=="function"?eh(c):c,o=o.useState()[0],(Qr!==null?Qr.memoizedState:null)!==o&&(nr.flags|=1024),c}function xb(){var o=Yg!==0;return Yg=0,o}function vb(o,c,g){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~g}function wb(o){if(Vg){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Vg=!1}go=0,Un=Qr=nr=null,hu=!1,Zd=Yg=0,pu=null}function Ha(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?nr.memoizedState=Un=o:Un=Un.next=o,Un}function Dn(){if(Qr===null){var o=nr.alternate;o=o!==null?o.memoizedState:null}else o=Qr.next;var c=Un===null?nr.memoizedState:Un.next;if(c!==null)Un=c,Qr=o;else{if(o===null)throw nr.alternate===null?Error(n(467)):Error(n(310));Qr=o,o={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},Un===null?nr.memoizedState=Un=o:Un=Un.next=o}return Un}function Qg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eh(o){var c=Zd;return Zd+=1,pu===null&&(pu=[]),o=qT(pu,o,c),c=nr,(Un===null?c.memoizedState:Un.next)===null&&(c=c.alternate,I.H=c===null||c.memoizedState===null?Dk:Ib),o}function Kg(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return eh(o);if(o.$$typeof===A)return wa(o)}throw Error(n(438,String(o)))}function Sb(o){var c=null,g=nr.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=nr.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Qg(),nr.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(o),m=0;m<o;m++)g[m]=F;return c.index++,g}function fo(o,c){return typeof c=="function"?c(o):c}function Xg(o){var c=Dn();return Tb(c,Qr,o)}function Tb(o,c,g){var m=o.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=g;var w=o.baseQueue,S=m.pending;if(S!==null){if(w!==null){var R=w.next;w.next=S.next,S.next=R}c.baseQueue=w=S,m.pending=null}if(S=o.baseState,w===null)o.memoizedState=S;else{c=w.next;var Y=R=null,ce=null,Ce=c,Oe=!1;do{var ze=Ce.lane&-536870913;if(ze!==Ce.lane?(Tr&ze)===ze:(go&ze)===ze){var Ne=Ce.revertLane;if(Ne===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),ze===ou&&(Oe=!0);else if((go&Ne)===Ne){Ce=Ce.next,Ne===ou&&(Oe=!0);continue}else ze={lane:0,revertLane:Ce.revertLane,gesture:null,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},ce===null?(Y=ce=ze,R=S):ce=ce.next=ze,nr.lanes|=Ne,al|=Ne;ze=Ce.action,Xl&&g(S,ze),S=Ce.hasEagerState?Ce.eagerState:g(S,ze)}else Ne={lane:ze,revertLane:Ce.revertLane,gesture:Ce.gesture,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},ce===null?(Y=ce=Ne,R=S):ce=ce.next=Ne,nr.lanes|=ze,al|=ze;Ce=Ce.next}while(Ce!==null&&Ce!==c);if(ce===null?R=S:ce.next=Y,!X(S,o.memoizedState)&&($n=!0,Oe&&(g=lu,g!==null)))throw g;o.memoizedState=S,o.baseState=R,o.baseQueue=ce,m.lastRenderedState=S}return w===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function kb(o){var c=Dn(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=o;var m=g.dispatch,w=g.pending,S=c.memoizedState;if(w!==null){g.pending=null;var R=w=w.next;do S=o(S,R.action),R=R.next;while(R!==w);X(S,c.memoizedState)||($n=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),g.lastRenderedState=S}return[S,m]}function ek(o,c,g){var m=nr,w=Dn(),S=_r;if(S){if(g===void 0)throw Error(n(407));g=g()}else g=c();var R=!X((Qr||w).memoizedState,g);if(R&&(w.memoizedState=g,$n=!0),w=w.queue,_b(nk.bind(null,m,w,o),[o]),w.getSnapshot!==c||R||Un!==null&&Un.memoizedState.tag&1){if(m.flags|=2048,gu(9,{destroy:void 0},rk.bind(null,m,w,g,c),null),tn===null)throw Error(n(349));S||(go&127)!==0||tk(m,c,g)}return g}function tk(o,c,g){o.flags|=16384,o={getSnapshot:c,value:g},c=nr.updateQueue,c===null?(c=Qg(),nr.updateQueue=c,c.stores=[o]):(g=c.stores,g===null?c.stores=[o]:g.push(o))}function rk(o,c,g,m){c.value=g,c.getSnapshot=m,ak(c)&&ik(o)}function nk(o,c,g){return g(function(){ak(c)&&ik(o)})}function ak(o){var c=o.getSnapshot;o=o.value;try{var g=c();return!X(o,g)}catch{return!0}}function ik(o){var c=$l(o,2);c!==null&&ii(c,o,2)}function Eb(o){var c=Ha();if(typeof o=="function"){var g=o;if(o=g(),Xl){Xt(!0);try{g()}finally{Xt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:o},c}function sk(o,c,g,m){return o.baseState=g,Tb(o,Qr,typeof m=="function"?m:fo)}function Q5(o,c,g,m,w){if(ef(o))throw Error(n(485));if(o=c.action,o!==null){var S={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){S.listeners.push(R)}};I.T!==null?g(!0):S.isTransition=!1,m(S),g=c.pending,g===null?(S.next=c.pending=S,ok(c,S)):(S.next=g.next,c.pending=g.next=S)}}function ok(o,c){var g=c.action,m=c.payload,w=o.state;if(c.isTransition){var S=I.T,R={};I.T=R;try{var Y=g(w,m),ce=I.S;ce!==null&&ce(R,Y),lk(o,c,Y)}catch(Ce){Cb(o,c,Ce)}finally{S!==null&&R.types!==null&&(S.types=R.types),I.T=S}}else try{S=g(w,m),lk(o,c,S)}catch(Ce){Cb(o,c,Ce)}}function lk(o,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){ck(o,c,m)},function(m){return Cb(o,c,m)}):ck(o,c,g)}function ck(o,c,g){c.status="fulfilled",c.value=g,uk(c),o.state=g,c=o.pending,c!==null&&(g=c.next,g===c?o.pending=null:(g=g.next,c.next=g,ok(o,g)))}function Cb(o,c,g){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,uk(c),c=c.next;while(c!==m)}o.action=null}function uk(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function dk(o,c){return c}function hk(o,c){if(_r){var g=tn.formState;if(g!==null){e:{var m=nr;if(_r){if(hn){t:{for(var w=hn,S=$i;w.nodeType!==8;){if(!S){w=null;break t}if(w=Hi(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){hn=Hi(w.nextSibling),m=w.data==="F!";break e}}Qo(m)}m=!1}m&&(c=g[0])}}return g=Ha(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dk,lastRenderedState:c},g.queue=m,g=Pk.bind(null,nr,m),m.dispatch=g,m=Eb(!1),S=Rb.bind(null,nr,!1,m.queue),m=Ha(),w={state:c,dispatch:null,action:o,pending:null},m.queue=w,g=Q5.bind(null,nr,w,S,g),w.dispatch=g,m.memoizedState=o,[c,g,!1]}function pk(o){var c=Dn();return gk(c,Qr,o)}function gk(o,c,g){if(c=Tb(o,c,dk)[0],o=Xg(fo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=eh(c)}catch(R){throw R===cu?Ug:R}else m=c;c=Dn();var w=c.queue,S=w.dispatch;return g!==c.memoizedState&&(nr.flags|=2048,gu(9,{destroy:void 0},K5.bind(null,w,g),null)),[m,S,o]}function K5(o,c){o.action=c}function fk(o){var c=Dn(),g=Qr;if(g!==null)return gk(c,g,o);Dn(),c=c.memoizedState,g=Dn();var m=g.queue.dispatch;return g.memoizedState=o,[c,m,!1]}function gu(o,c,g,m){return o={tag:o,create:g,deps:m,inst:c,next:null},c=nr.updateQueue,c===null&&(c=Qg(),nr.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=o.next=o:(m=g.next,g.next=o,o.next=m,c.lastEffect=o),o}function mk(){return Dn().memoizedState}function Jg(o,c,g,m){var w=Ha();nr.flags|=o,w.memoizedState=gu(1|c,{destroy:void 0},g,m===void 0?null:m)}function Zg(o,c,g,m){var w=Dn();m=m===void 0?null:m;var S=w.memoizedState.inst;Qr!==null&&m!==null&&yb(m,Qr.memoizedState.deps)?w.memoizedState=gu(c,S,g,m):(nr.flags|=o,w.memoizedState=gu(1|c,S,g,m))}function yk(o,c){Jg(8390656,8,o,c)}function _b(o,c){Zg(2048,8,o,c)}function X5(o){nr.flags|=4;var c=nr.updateQueue;if(c===null)c=Qg(),nr.updateQueue=c,c.events=[o];else{var g=c.events;g===null?c.events=[o]:g.push(o)}}function bk(o){var c=Dn().memoizedState;return X5({ref:c,nextImpl:o}),function(){if((Br&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function xk(o,c){return Zg(4,2,o,c)}function vk(o,c){return Zg(4,4,o,c)}function wk(o,c){if(typeof c=="function"){o=o();var g=c(o);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Sk(o,c,g){g=g!=null?g.concat([o]):null,Zg(4,4,wk.bind(null,c,o),g)}function Ab(){}function Tk(o,c){var g=Dn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&yb(c,m[1])?m[0]:(g.memoizedState=[o,c],o)}function kk(o,c){var g=Dn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&yb(c,m[1]))return m[0];if(m=o(),Xl){Xt(!0);try{o()}finally{Xt(!1)}}return g.memoizedState=[m,c],m}function Nb(o,c,g){return g===void 0||(go&1073741824)!==0&&(Tr&261930)===0?o.memoizedState=c:(o.memoizedState=g,o=EE(),nr.lanes|=o,al|=o,g)}function Ek(o,c,g,m){return X(g,c)?g:du.current!==null?(o=Nb(o,g,m),X(o,c)||($n=!0),o):(go&42)===0||(go&1073741824)!==0&&(Tr&261930)===0?($n=!0,o.memoizedState=g):(o=EE(),nr.lanes|=o,al|=o,c)}function Ck(o,c,g,m,w){var S=G.p;G.p=S!==0&&8>S?S:8;var R=I.T,Y={};I.T=Y,Rb(o,!1,c,g);try{var ce=w(),Ce=I.S;if(Ce!==null&&Ce(Y,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Oe=W5(ce,m);th(o,c,Oe,Ci(o))}else th(o,c,m,Ci(o))}catch(ze){th(o,c,{then:function(){},status:"rejected",reason:ze},Ci())}finally{G.p=S,R!==null&&Y.types!==null&&(R.types=Y.types),I.T=R}}function J5(){}function Lb(o,c,g,m){if(o.tag!==5)throw Error(n(476));var w=_k(o).queue;Ck(o,w,c,V,g===null?J5:function(){return Ak(o),g(m)})}function _k(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:V},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:g},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function Ak(o){var c=_k(o);c.next===null&&(c=o.alternate.memoizedState),th(o,c.next.queue,{},Ci())}function Pb(){return wa(bh)}function Nk(){return Dn().memoizedState}function Lk(){return Dn().memoizedState}function Z5(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ci();o=Jo(g);var m=Zo(c,o,g);m!==null&&(ii(m,c,g),Kd(m,c,g)),c={cache:sb()},o.payload=c;return}c=c.return}}function ej(o,c,g){var m=Ci();g={lane:m,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ef(o)?Rk(c,g):(g=Qy(o,c,g,m),g!==null&&(ii(g,o,m),Ik(g,c,m)))}function Pk(o,c,g){var m=Ci();th(o,c,g,m)}function th(o,c,g,m){var w={lane:m,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(ef(o))Rk(c,w);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var R=c.lastRenderedState,Y=S(R,g);if(w.hasEagerState=!0,w.eagerState=Y,X(Y,R))return Dg(o,c,w,0),tn===null&&Ig(),!1}catch{}finally{}if(g=Qy(o,c,w,m),g!==null)return ii(g,o,m),Ik(g,c,m),!0}return!1}function Rb(o,c,g,m){if(m={lane:2,revertLane:ux(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ef(o)){if(c)throw Error(n(479))}else c=Qy(o,g,m,2),c!==null&&ii(c,o,2)}function ef(o){var c=o.alternate;return o===nr||c!==null&&c===nr}function Rk(o,c){hu=Vg=!0;var g=o.pending;g===null?c.next=c:(c.next=g.next,g.next=c),o.pending=c}function Ik(o,c,g){if((g&4194048)!==0){var m=c.lanes;m&=o.pendingLanes,g|=m,c.lanes=g,Lt(o,g)}}var rh={readContext:wa,use:Kg,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An};rh.useEffectEvent=An;var Dk={readContext:wa,use:Kg,useCallback:function(o,c){return Ha().memoizedState=[o,c===void 0?null:c],o},useContext:wa,useEffect:yk,useImperativeHandle:function(o,c,g){g=g!=null?g.concat([o]):null,Jg(4194308,4,wk.bind(null,c,o),g)},useLayoutEffect:function(o,c){return Jg(4194308,4,o,c)},useInsertionEffect:function(o,c){Jg(4,2,o,c)},useMemo:function(o,c){var g=Ha();c=c===void 0?null:c;var m=o();if(Xl){Xt(!0);try{o()}finally{Xt(!1)}}return g.memoizedState=[m,c],m},useReducer:function(o,c,g){var m=Ha();if(g!==void 0){var w=g(c);if(Xl){Xt(!0);try{g(c)}finally{Xt(!1)}}}else w=c;return m.memoizedState=m.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},m.queue=o,o=o.dispatch=ej.bind(null,nr,o),[m.memoizedState,o]},useRef:function(o){var c=Ha();return o={current:o},c.memoizedState=o},useState:function(o){o=Eb(o);var c=o.queue,g=Pk.bind(null,nr,c);return c.dispatch=g,[o.memoizedState,g]},useDebugValue:Ab,useDeferredValue:function(o,c){var g=Ha();return Nb(g,o,c)},useTransition:function(){var o=Eb(!1);return o=Ck.bind(null,nr,o.queue,!0,!1),Ha().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,g){var m=nr,w=Ha();if(_r){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),tn===null)throw Error(n(349));(Tr&127)!==0||tk(m,c,g)}w.memoizedState=g;var S={value:g,getSnapshot:c};return w.queue=S,yk(nk.bind(null,m,S,o),[o]),m.flags|=2048,gu(9,{destroy:void 0},rk.bind(null,m,S,g,c),null),g},useId:function(){var o=Ha(),c=tn.identifierPrefix;if(_r){var g=Rs,m=Ps;g=(m&~(1<<32-tr(m)-1)).toString(32)+g,c="_"+c+"R_"+g,g=Yg++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=V5++,c="_"+c+"r_"+g.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:Pb,useFormState:hk,useActionState:hk,useOptimistic:function(o){var c=Ha();c.memoizedState=c.baseState=o;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Rb.bind(null,nr,!0,g),g.dispatch=c,[o,c]},useMemoCache:Sb,useCacheRefresh:function(){return Ha().memoizedState=Z5.bind(null,nr)},useEffectEvent:function(o){var c=Ha(),g={impl:o};return c.memoizedState=g,function(){if((Br&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},Ib={readContext:wa,use:Kg,useCallback:Tk,useContext:wa,useEffect:_b,useImperativeHandle:Sk,useInsertionEffect:xk,useLayoutEffect:vk,useMemo:kk,useReducer:Xg,useRef:mk,useState:function(){return Xg(fo)},useDebugValue:Ab,useDeferredValue:function(o,c){var g=Dn();return Ek(g,Qr.memoizedState,o,c)},useTransition:function(){var o=Xg(fo)[0],c=Dn().memoizedState;return[typeof o=="boolean"?o:eh(o),c]},useSyncExternalStore:ek,useId:Nk,useHostTransitionStatus:Pb,useFormState:pk,useActionState:pk,useOptimistic:function(o,c){var g=Dn();return sk(g,Qr,o,c)},useMemoCache:Sb,useCacheRefresh:Lk};Ib.useEffectEvent=bk;var Mk={readContext:wa,use:Kg,useCallback:Tk,useContext:wa,useEffect:_b,useImperativeHandle:Sk,useInsertionEffect:xk,useLayoutEffect:vk,useMemo:kk,useReducer:kb,useRef:mk,useState:function(){return kb(fo)},useDebugValue:Ab,useDeferredValue:function(o,c){var g=Dn();return Qr===null?Nb(g,o,c):Ek(g,Qr.memoizedState,o,c)},useTransition:function(){var o=kb(fo)[0],c=Dn().memoizedState;return[typeof o=="boolean"?o:eh(o),c]},useSyncExternalStore:ek,useId:Nk,useHostTransitionStatus:Pb,useFormState:fk,useActionState:fk,useOptimistic:function(o,c){var g=Dn();return Qr!==null?sk(g,Qr,o,c):(g.baseState=o,[o,g.queue.dispatch])},useMemoCache:Sb,useCacheRefresh:Lk};Mk.useEffectEvent=bk;function Db(o,c,g,m){c=o.memoizedState,g=g(m,c),g=g==null?c:f({},c,g),o.memoizedState=g,o.lanes===0&&(o.updateQueue.baseState=g)}var Mb={enqueueSetState:function(o,c,g){o=o._reactInternals;var m=Ci(),w=Jo(m);w.payload=c,g!=null&&(w.callback=g),c=Zo(o,w,m),c!==null&&(ii(c,o,m),Kd(c,o,m))},enqueueReplaceState:function(o,c,g){o=o._reactInternals;var m=Ci(),w=Jo(m);w.tag=1,w.payload=c,g!=null&&(w.callback=g),c=Zo(o,w,m),c!==null&&(ii(c,o,m),Kd(c,o,m))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var g=Ci(),m=Jo(g);m.tag=2,c!=null&&(m.callback=c),c=Zo(o,m,g),c!==null&&(ii(c,o,g),Kd(c,o,g))}};function Ok(o,c,g,m,w,S,R){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,S,R):c.prototype&&c.prototype.isPureReactComponent?!Fn(g,m)||!Fn(w,S):!0}function jk(o,c,g,m){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==o&&Mb.enqueueReplaceState(c,c.state,null)}function Jl(o,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(o=o.defaultProps){g===c&&(g=f({},g));for(var w in o)g[w]===void 0&&(g[w]=o[w])}return g}function Bk(o){Rg(o)}function Fk(o){console.error(o)}function zk(o){Rg(o)}function tf(o,c){try{var g=o.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Uk(o,c,g){try{var m=o.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Ob(o,c,g){return g=Jo(g),g.tag=3,g.payload={element:null},g.callback=function(){tf(o,c)},g}function $k(o){return o=Jo(o),o.tag=3,o}function qk(o,c,g,m){var w=g.type.getDerivedStateFromError;if(typeof w=="function"){var S=m.value;o.payload=function(){return w(S)},o.callback=function(){Uk(c,g,m)}}var R=g.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(o.callback=function(){Uk(c,g,m),typeof w!="function"&&(il===null?il=new Set([this]):il.add(this));var Y=m.stack;this.componentDidCatch(m.value,{componentStack:Y!==null?Y:""})})}function tj(o,c,g,m,w){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&su(c,g,w,!0),g=Si.current,g!==null){switch(g.tag){case 31:case 13:return qi===null?gf():g.alternate===null&&Nn===0&&(Nn=3),g.flags&=-257,g.flags|=65536,g.lanes=w,m===$g?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),ox(o,m,w)),!1;case 22:return g.flags|=65536,m===$g?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),ox(o,m,w)),!1}throw Error(n(435,g.tag))}return ox(o,m,w),gf(),!1}if(_r)return c=Si.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,m!==tb&&(o=Error(n(422),{cause:m}),Gd(Fi(o,g)))):(m!==tb&&(c=Error(n(423),{cause:m}),Gd(Fi(c,g))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,m=Fi(m,g),w=Ob(o.stateNode,m,w),hb(o,w),Nn!==4&&(Nn=2)),!1;var S=Error(n(520),{cause:m});if(S=Fi(S,g),uh===null?uh=[S]:uh.push(S),Nn!==4&&(Nn=2),c===null)return!0;m=Fi(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,o=w&-w,g.lanes|=o,o=Ob(g.stateNode,m,o),hb(g,o),!1;case 1:if(c=g.type,S=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(il===null||!il.has(S))))return g.flags|=65536,w&=-w,g.lanes|=w,w=$k(w),qk(w,o,g,m),hb(g,w),!1}g=g.return}while(g!==null);return!1}var jb=Error(n(461)),$n=!1;function Sa(o,c,g,m){c.child=o===null?VT(c,null,g,m):Kl(c,o.child,g,m)}function Hk(o,c,g,m,w){g=g.render;var S=c.ref;if("ref"in m){var R={};for(var Y in m)Y!=="ref"&&(R[Y]=m[Y])}else R=m;return Wl(c),m=bb(o,c,g,R,S,w),Y=xb(),o!==null&&!$n?(vb(o,c,w),mo(o,c,w)):(_r&&Y&&Zy(c),c.flags|=1,Sa(o,c,m,w),c.child)}function Gk(o,c,g,m,w){if(o===null){var S=g.type;return typeof S=="function"&&!Ky(S)&&S.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=S,Wk(o,c,S,m,w)):(o=Og(g.type,null,m,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,!Gb(o,w)){var R=S.memoizedProps;if(g=g.compare,g=g!==null?g:Fn,g(R,m)&&o.ref===c.ref)return mo(o,c,w)}return c.flags|=1,o=co(S,m),o.ref=c.ref,o.return=c,c.child=o}function Wk(o,c,g,m,w){if(o!==null){var S=o.memoizedProps;if(Fn(S,m)&&o.ref===c.ref)if($n=!1,c.pendingProps=m=S,Gb(o,w))(o.flags&131072)!==0&&($n=!0);else return c.lanes=o.lanes,mo(o,c,w)}return Bb(o,c,g,m,w)}function Vk(o,c,g,m){var w=m.children,S=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|g:g,o!==null){for(m=c.child=o.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;m=w&~S}else m=0,c.child=null;return Yk(o,c,S,g,m)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&zg(c,S!==null?S.cachePool:null),S!==null?KT(c,S):gb(),XT(c);else return m=c.lanes=536870912,Yk(o,c,S!==null?S.baseLanes|g:g,g,m)}else S!==null?(zg(c,S.cachePool),KT(c,S),tl(),c.memoizedState=null):(o!==null&&zg(c,null),gb(),tl());return Sa(o,c,w,g),c.child}function nh(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Yk(o,c,g,m,w){var S=lb();return S=S===null?null:{parent:zn._currentValue,pool:S},c.memoizedState={baseLanes:g,cachePool:S},o!==null&&zg(c,null),gb(),XT(c),o!==null&&su(o,c,m,!0),c.childLanes=w,null}function rf(o,c){return c=af({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function Qk(o,c,g){return Kl(c,o.child,null,g),o=rf(c,c.pendingProps),o.flags|=2,Ti(c),c.memoizedState=null,o}function rj(o,c,g){var m=c.pendingProps,w=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(_r){if(m.mode==="hidden")return o=rf(c,m),c.lanes=536870912,nh(null,o);if(mb(c),(o=hn)?(o=oC(o,$i),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Vo!==null?{id:Ps,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},g=RT(o),g.return=c,c.child=g,va=c,hn=null)):o=null,o===null)throw Qo(c);return c.lanes=536870912,null}return rf(c,m)}var S=o.memoizedState;if(S!==null){var R=S.dehydrated;if(mb(c),w)if(c.flags&256)c.flags&=-257,c=Qk(o,c,g);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(n(558));else if($n||su(o,c,g,!1),w=(g&o.childLanes)!==0,$n||w){if(m=tn,m!==null&&(R=ln(m,g),R!==0&&R!==S.retryLane))throw S.retryLane=R,$l(o,R),ii(m,o,R),jb;gf(),c=Qk(o,c,g)}else o=S.treeContext,hn=Hi(R.nextSibling),va=c,_r=!0,Yo=null,$i=!1,o!==null&&MT(c,o),c=rf(c,m),c.flags|=4096;return c}return o=co(o.child,{mode:m.mode,children:m.children}),o.ref=c.ref,c.child=o,o.return=c,o}function nf(o,c){var g=c.ref;if(g===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(o===null||o.ref!==g)&&(c.flags|=4194816)}}function Bb(o,c,g,m,w){return Wl(c),g=bb(o,c,g,m,void 0,w),m=xb(),o!==null&&!$n?(vb(o,c,w),mo(o,c,w)):(_r&&m&&Zy(c),c.flags|=1,Sa(o,c,g,w),c.child)}function Kk(o,c,g,m,w,S){return Wl(c),c.updateQueue=null,g=ZT(c,m,g,w),JT(o),m=xb(),o!==null&&!$n?(vb(o,c,S),mo(o,c,S)):(_r&&m&&Zy(c),c.flags|=1,Sa(o,c,g,S),c.child)}function Xk(o,c,g,m,w){if(Wl(c),c.stateNode===null){var S=ru,R=g.contextType;typeof R=="object"&&R!==null&&(S=wa(R)),S=new g(m,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Mb,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=m,S.state=c.memoizedState,S.refs={},ub(c),R=g.contextType,S.context=typeof R=="object"&&R!==null?wa(R):ru,S.state=c.memoizedState,R=g.getDerivedStateFromProps,typeof R=="function"&&(Db(c,g,R,m),S.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(R=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),R!==S.state&&Mb.enqueueReplaceState(S,S.state,null),Jd(c,m,S,w),Xd(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(o===null){S=c.stateNode;var Y=c.memoizedProps,ce=Jl(g,Y);S.props=ce;var Ce=S.context,Oe=g.contextType;R=ru,typeof Oe=="object"&&Oe!==null&&(R=wa(Oe));var ze=g.getDerivedStateFromProps;Oe=typeof ze=="function"||typeof S.getSnapshotBeforeUpdate=="function",Y=c.pendingProps!==Y,Oe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Y||Ce!==R)&&jk(c,S,m,R),Xo=!1;var Ne=c.memoizedState;S.state=Ne,Jd(c,m,S,w),Xd(),Ce=c.memoizedState,Y||Ne!==Ce||Xo?(typeof ze=="function"&&(Db(c,g,ze,m),Ce=c.memoizedState),(ce=Xo||Ok(c,g,ce,m,Ne,Ce,R))?(Oe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=Ce),S.props=m,S.state=Ce,S.context=R,m=ce):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{S=c.stateNode,db(o,c),R=c.memoizedProps,Oe=Jl(g,R),S.props=Oe,ze=c.pendingProps,Ne=S.context,Ce=g.contextType,ce=ru,typeof Ce=="object"&&Ce!==null&&(ce=wa(Ce)),Y=g.getDerivedStateFromProps,(Ce=typeof Y=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==ze||Ne!==ce)&&jk(c,S,m,ce),Xo=!1,Ne=c.memoizedState,S.state=Ne,Jd(c,m,S,w),Xd();var Pe=c.memoizedState;R!==ze||Ne!==Pe||Xo||o!==null&&o.dependencies!==null&&Bg(o.dependencies)?(typeof Y=="function"&&(Db(c,g,Y,m),Pe=c.memoizedState),(Oe=Xo||Ok(c,g,Oe,m,Ne,Pe,ce)||o!==null&&o.dependencies!==null&&Bg(o.dependencies))?(Ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Pe,ce),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Pe,ce)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Pe),S.props=m,S.state=Pe,S.context=ce,m=Oe):(typeof S.componentDidUpdate!="function"||R===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===o.memoizedProps&&Ne===o.memoizedState||(c.flags|=1024),m=!1)}return S=m,nf(o,c),m=(c.flags&128)!==0,S||m?(S=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,o!==null&&m?(c.child=Kl(c,o.child,null,w),c.child=Kl(c,null,g,w)):Sa(o,c,g,w),c.memoizedState=S.state,o=c.child):o=mo(o,c,w),o}function Jk(o,c,g,m){return Hl(),c.flags|=256,Sa(o,c,g,m),c.child}var Fb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zb(o){return{baseLanes:o,cachePool:UT()}}function Ub(o,c,g){return o=o!==null?o.childLanes&~g:0,c&&(o|=Ei),o}function Zk(o,c,g){var m=c.pendingProps,w=!1,S=(c.flags&128)!==0,R;if((R=S)||(R=o!==null&&o.memoizedState===null?!1:(In.current&2)!==0),R&&(w=!0,c.flags&=-129),R=(c.flags&32)!==0,c.flags&=-33,o===null){if(_r){if(w?el(c):tl(),(o=hn)?(o=oC(o,$i),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Vo!==null?{id:Ps,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},g=RT(o),g.return=c,c.child=g,va=c,hn=null)):o=null,o===null)throw Qo(c);return Tx(o)?c.lanes=32:c.lanes=536870912,null}var Y=m.children;return m=m.fallback,w?(tl(),w=c.mode,Y=af({mode:"hidden",children:Y},w),m=ql(m,w,g,null),Y.return=c,m.return=c,Y.sibling=m,c.child=Y,m=c.child,m.memoizedState=zb(g),m.childLanes=Ub(o,R,g),c.memoizedState=Fb,nh(null,m)):(el(c),$b(c,Y))}var ce=o.memoizedState;if(ce!==null&&(Y=ce.dehydrated,Y!==null)){if(S)c.flags&256?(el(c),c.flags&=-257,c=qb(o,c,g)):c.memoizedState!==null?(tl(),c.child=o.child,c.flags|=128,c=null):(tl(),Y=m.fallback,w=c.mode,m=af({mode:"visible",children:m.children},w),Y=ql(Y,w,g,null),Y.flags|=2,m.return=c,Y.return=c,m.sibling=Y,c.child=m,Kl(c,o.child,null,g),m=c.child,m.memoizedState=zb(g),m.childLanes=Ub(o,R,g),c.memoizedState=Fb,c=nh(null,m));else if(el(c),Tx(Y)){if(R=Y.nextSibling&&Y.nextSibling.dataset,R)var Ce=R.dgst;R=Ce,m=Error(n(419)),m.stack="",m.digest=R,Gd({value:m,source:null,stack:null}),c=qb(o,c,g)}else if($n||su(o,c,g,!1),R=(g&o.childLanes)!==0,$n||R){if(R=tn,R!==null&&(m=ln(R,g),m!==0&&m!==ce.retryLane))throw ce.retryLane=m,$l(o,m),ii(R,o,m),jb;Sx(Y)||gf(),c=qb(o,c,g)}else Sx(Y)?(c.flags|=192,c.child=o.child,c=null):(o=ce.treeContext,hn=Hi(Y.nextSibling),va=c,_r=!0,Yo=null,$i=!1,o!==null&&MT(c,o),c=$b(c,m.children),c.flags|=4096);return c}return w?(tl(),Y=m.fallback,w=c.mode,ce=o.child,Ce=ce.sibling,m=co(ce,{mode:"hidden",children:m.children}),m.subtreeFlags=ce.subtreeFlags&65011712,Ce!==null?Y=co(Ce,Y):(Y=ql(Y,w,g,null),Y.flags|=2),Y.return=c,m.return=c,m.sibling=Y,c.child=m,nh(null,m),m=c.child,Y=o.child.memoizedState,Y===null?Y=zb(g):(w=Y.cachePool,w!==null?(ce=zn._currentValue,w=w.parent!==ce?{parent:ce,pool:ce}:w):w=UT(),Y={baseLanes:Y.baseLanes|g,cachePool:w}),m.memoizedState=Y,m.childLanes=Ub(o,R,g),c.memoizedState=Fb,nh(o.child,m)):(el(c),g=o.child,o=g.sibling,g=co(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,o!==null&&(R=c.deletions,R===null?(c.deletions=[o],c.flags|=16):R.push(o)),c.child=g,c.memoizedState=null,g)}function $b(o,c){return c=af({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function af(o,c){return o=wi(22,o,null,c),o.lanes=0,o}function qb(o,c,g){return Kl(c,o.child,null,g),o=$b(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function eE(o,c,g){o.lanes|=c;var m=o.alternate;m!==null&&(m.lanes|=c),ab(o.return,c,g)}function Hb(o,c,g,m,w,S){var R=o.memoizedState;R===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:w,treeForkCount:S}:(R.isBackwards=c,R.rendering=null,R.renderingStartTime=0,R.last=m,R.tail=g,R.tailMode=w,R.treeForkCount=S)}function tE(o,c,g){var m=c.pendingProps,w=m.revealOrder,S=m.tail;m=m.children;var R=In.current,Y=(R&2)!==0;if(Y?(R=R&1|2,c.flags|=128):R&=1,H(In,R),Sa(o,c,m,g),m=_r?Hd:0,!Y&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&eE(o,g,c);else if(o.tag===19)eE(o,g,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(w){case"forwards":for(g=c.child,w=null;g!==null;)o=g.alternate,o!==null&&Wg(o)===null&&(w=g),g=g.sibling;g=w,g===null?(w=c.child,c.child=null):(w=g.sibling,g.sibling=null),Hb(c,!1,w,g,S,m);break;case"backwards":case"unstable_legacy-backwards":for(g=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Wg(o)===null){c.child=w;break}o=w.sibling,w.sibling=g,g=w,w=o}Hb(c,!0,g,null,S,m);break;case"together":Hb(c,!1,null,null,void 0,m);break;default:c.memoizedState=null}return c.child}function mo(o,c,g){if(o!==null&&(c.dependencies=o.dependencies),al|=c.lanes,(g&c.childLanes)===0)if(o!==null){if(su(o,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,g=co(o,o.pendingProps),c.child=g,g.return=c;o.sibling!==null;)o=o.sibling,g=g.sibling=co(o,o.pendingProps),g.return=c;g.sibling=null}return c.child}function Gb(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Bg(o)))}function nj(o,c,g){switch(c.tag){case 3:ye(c,c.stateNode.containerInfo),Ko(c,zn,o.memoizedState.cache),Hl();break;case 27:case 5:de(c);break;case 4:ye(c,c.stateNode.containerInfo);break;case 10:Ko(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,mb(c),null;break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(el(c),c.flags|=128,null):(g&c.child.childLanes)!==0?Zk(o,c,g):(el(c),o=mo(o,c,g),o!==null?o.sibling:null);el(c);break;case 19:var w=(o.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(su(o,c,g,!1),m=(g&c.childLanes)!==0),w){if(m)return tE(o,c,g);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),H(In,In.current),m)break;return null;case 22:return c.lanes=0,Vk(o,c,g,c.pendingProps);case 24:Ko(c,zn,o.memoizedState.cache)}return mo(o,c,g)}function rE(o,c,g){if(o!==null)if(o.memoizedProps!==c.pendingProps)$n=!0;else{if(!Gb(o,g)&&(c.flags&128)===0)return $n=!1,nj(o,c,g);$n=(o.flags&131072)!==0}else $n=!1,_r&&(c.flags&1048576)!==0&&DT(c,Hd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var m=c.pendingProps;if(o=Yl(c.elementType),c.type=o,typeof o=="function")Ky(o)?(m=Jl(o,m),c.tag=1,c=Xk(null,c,o,m,g)):(c.tag=0,c=Bb(null,c,o,m,g));else{if(o!=null){var w=o.$$typeof;if(w===P){c.tag=11,c=Hk(null,c,o,m,g);break e}else if(w===D){c.tag=14,c=Gk(null,c,o,m,g);break e}}throw c=O(o)||o,Error(n(306,c,""))}}return c;case 0:return Bb(o,c,c.type,c.pendingProps,g);case 1:return m=c.type,w=Jl(m,c.pendingProps),Xk(o,c,m,w,g);case 3:e:{if(ye(c,c.stateNode.containerInfo),o===null)throw Error(n(387));m=c.pendingProps;var S=c.memoizedState;w=S.element,db(o,c),Jd(c,m,null,g);var R=c.memoizedState;if(m=R.cache,Ko(c,zn,m),m!==S.cache&&ib(c,[zn],g,!0),Xd(),m=R.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:R.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=Jk(o,c,m,g);break e}else if(m!==w){w=Fi(Error(n(424)),c),Gd(w),c=Jk(o,c,m,g);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(hn=Hi(o.firstChild),va=c,_r=!0,Yo=null,$i=!0,g=VT(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(Hl(),m===w){c=mo(o,c,g);break e}Sa(o,c,m,g)}c=c.child}return c;case 26:return nf(o,c),o===null?(g=pC(c.type,null,c.pendingProps,null))?c.memoizedState=g:_r||(g=c.type,o=c.pendingProps,m=wf(ae.current).createElement(g),m[en]=c,m[Fr]=o,Ta(m,g,o),Jt(m),c.stateNode=m):c.memoizedState=pC(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return de(c),o===null&&_r&&(m=c.stateNode=uC(c.type,c.pendingProps,ae.current),va=c,$i=!0,w=hn,cl(c.type)?(kx=w,hn=Hi(m.firstChild)):hn=w),Sa(o,c,c.pendingProps.children,g),nf(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&_r&&((w=m=hn)&&(m=Ij(m,c.type,c.pendingProps,$i),m!==null?(c.stateNode=m,va=c,hn=Hi(m.firstChild),$i=!1,w=!0):w=!1),w||Qo(c)),de(c),w=c.type,S=c.pendingProps,R=o!==null?o.memoizedProps:null,m=S.children,xx(w,S)?m=null:R!==null&&xx(w,R)&&(c.flags|=32),c.memoizedState!==null&&(w=bb(o,c,Y5,null,null,g),bh._currentValue=w),nf(o,c),Sa(o,c,m,g),c.child;case 6:return o===null&&_r&&((o=g=hn)&&(g=Dj(g,c.pendingProps,$i),g!==null?(c.stateNode=g,va=c,hn=null,o=!0):o=!1),o||Qo(c)),null;case 13:return Zk(o,c,g);case 4:return ye(c,c.stateNode.containerInfo),m=c.pendingProps,o===null?c.child=Kl(c,null,m,g):Sa(o,c,m,g),c.child;case 11:return Hk(o,c,c.type,c.pendingProps,g);case 7:return Sa(o,c,c.pendingProps,g),c.child;case 8:return Sa(o,c,c.pendingProps.children,g),c.child;case 12:return Sa(o,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,Ko(c,c.type,m.value),Sa(o,c,m.children,g),c.child;case 9:return w=c.type._context,m=c.pendingProps.children,Wl(c),w=wa(w),m=m(w),c.flags|=1,Sa(o,c,m,g),c.child;case 14:return Gk(o,c,c.type,c.pendingProps,g);case 15:return Wk(o,c,c.type,c.pendingProps,g);case 19:return tE(o,c,g);case 31:return rj(o,c,g);case 22:return Vk(o,c,g,c.pendingProps);case 24:return Wl(c),m=wa(zn),o===null?(w=lb(),w===null&&(w=tn,S=sb(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=g),w=S),c.memoizedState={parent:m,cache:w},ub(c),Ko(c,zn,w)):((o.lanes&g)!==0&&(db(o,c),Jd(c,null,null,g),Xd()),w=o.memoizedState,S=c.memoizedState,w.parent!==m?(w={parent:m,cache:m},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Ko(c,zn,m)):(m=S.cache,Ko(c,zn,m),m!==w.cache&&ib(c,[zn],g,!0))),Sa(o,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function yo(o){o.flags|=4}function Wb(o,c,g,m,w){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(w&335544128)===w)if(o.stateNode.complete)o.flags|=8192;else if(NE())o.flags|=8192;else throw Ql=$g,cb}else o.flags&=-16777217}function nE(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!bC(c))if(NE())o.flags|=8192;else throw Ql=$g,cb}function sf(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?It():536870912,o.lanes|=c,bu|=c)}function ah(o,c){if(!_r)switch(o.tailMode){case"hidden":c=o.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?o.tail=null:g.sibling=null;break;case"collapsed":g=o.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function pn(o){var c=o.alternate!==null&&o.alternate.child===o.child,g=0,m=0;if(c)for(var w=o.child;w!==null;)g|=w.lanes|w.childLanes,m|=w.subtreeFlags&65011712,m|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)g|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=m,o.childLanes=g,c}function aj(o,c,g){var m=c.pendingProps;switch(eb(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(c),null;case 1:return pn(c),null;case 3:return g=c.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),po(zn),_e(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(iu(c)?yo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,rb())),pn(c),null;case 26:var w=c.type,S=c.memoizedState;return o===null?(yo(c),S!==null?(pn(c),nE(c,S)):(pn(c),Wb(c,w,null,m,g))):S?S!==o.memoizedState?(yo(c),pn(c),nE(c,S)):(pn(c),c.flags&=-16777217):(o=o.memoizedProps,o!==m&&yo(c),pn(c),Wb(c,w,o,m,g)),null;case 27:if(Ae(c),g=ae.current,w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==m&&yo(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return pn(c),null}o=ue.current,iu(c)?OT(c):(o=uC(w,m,g),c.stateNode=o,yo(c))}return pn(c),null;case 5:if(Ae(c),w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==m&&yo(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return pn(c),null}if(S=ue.current,iu(c))OT(c);else{var R=wf(ae.current);switch(S){case 1:S=R.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:S=R.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":S=R.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":S=R.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":S=R.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof m.is=="string"?R.createElement("select",{is:m.is}):R.createElement("select"),m.multiple?S.multiple=!0:m.size&&(S.size=m.size);break;default:S=typeof m.is=="string"?R.createElement(w,{is:m.is}):R.createElement(w)}}S[en]=c,S[Fr]=m;e:for(R=c.child;R!==null;){if(R.tag===5||R.tag===6)S.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===c)break e;for(;R.sibling===null;){if(R.return===null||R.return===c)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}c.stateNode=S;e:switch(Ta(S,w,m),w){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&yo(c)}}return pn(c),Wb(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,g),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==m&&yo(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(n(166));if(o=ae.current,iu(c)){if(o=c.stateNode,g=c.memoizedProps,m=null,w=va,w!==null)switch(w.tag){case 27:case 5:m=w.memoizedProps}o[en]=c,o=!!(o.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||ZE(o.nodeValue,g)),o||Qo(c,!0)}else o=wf(o).createTextNode(m),o[en]=c,c.stateNode=o}return pn(c),null;case 31:if(g=c.memoizedState,o===null||o.memoizedState!==null){if(m=iu(c),g!==null){if(o===null){if(!m)throw Error(n(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[en]=c}else Hl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),o=!1}else g=rb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=g),o=!0;if(!o)return c.flags&256?(Ti(c),c):(Ti(c),null);if((c.flags&128)!==0)throw Error(n(558))}return pn(c),null;case 13:if(m=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=iu(c),m!==null&&m.dehydrated!==null){if(o===null){if(!w)throw Error(n(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[en]=c}else Hl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pn(c),w=!1}else w=rb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(Ti(c),c):(Ti(c),null)}return Ti(c),(c.flags&128)!==0?(c.lanes=g,c):(g=m!==null,o=o!==null&&o.memoizedState!==null,g&&(m=c.child,w=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(w=m.alternate.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==w&&(m.flags|=2048)),g!==o&&g&&(c.child.flags|=8192),sf(c,c.updateQueue),pn(c),null);case 4:return _e(),o===null&&gx(c.stateNode.containerInfo),pn(c),null;case 10:return po(c.type),pn(c),null;case 19:if(ie(In),m=c.memoizedState,m===null)return pn(c),null;if(w=(c.flags&128)!==0,S=m.rendering,S===null)if(w)ah(m,!1);else{if(Nn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(S=Wg(o),S!==null){for(c.flags|=128,ah(m,!1),o=S.updateQueue,c.updateQueue=o,sf(c,o),c.subtreeFlags=0,o=g,g=c.child;g!==null;)PT(g,o),g=g.sibling;return H(In,In.current&1|2),_r&&uo(c,m.treeForkCount),c.child}o=o.sibling}m.tail!==null&&ft()>df&&(c.flags|=128,w=!0,ah(m,!1),c.lanes=4194304)}else{if(!w)if(o=Wg(S),o!==null){if(c.flags|=128,w=!0,o=o.updateQueue,c.updateQueue=o,sf(c,o),ah(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!_r)return pn(c),null}else 2*ft()-m.renderingStartTime>df&&g!==536870912&&(c.flags|=128,w=!0,ah(m,!1),c.lanes=4194304);m.isBackwards?(S.sibling=c.child,c.child=S):(o=m.last,o!==null?o.sibling=S:c.child=S,m.last=S)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=ft(),o.sibling=null,g=In.current,H(In,w?g&1|2:g&1),_r&&uo(c,m.treeForkCount),o):(pn(c),null);case 22:case 23:return Ti(c),fb(),m=c.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(pn(c),c.subtreeFlags&6&&(c.flags|=8192)):pn(c),g=c.updateQueue,g!==null&&sf(c,g.retryQueue),g=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),o!==null&&ie(Vl),null;case 24:return g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),po(zn),pn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function ij(o,c){switch(eb(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return po(zn),_e(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ae(c),null;case 31:if(c.memoizedState!==null){if(Ti(c),c.alternate===null)throw Error(n(340));Hl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(Ti(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Hl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ie(In),null;case 4:return _e(),null;case 10:return po(c.type),null;case 22:case 23:return Ti(c),fb(),o!==null&&ie(Vl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return po(zn),null;case 25:return null;default:return null}}function aE(o,c){switch(eb(c),c.tag){case 3:po(zn),_e();break;case 26:case 27:case 5:Ae(c);break;case 4:_e();break;case 31:c.memoizedState!==null&&Ti(c);break;case 13:Ti(c);break;case 19:ie(In);break;case 10:po(c.type);break;case 22:case 23:Ti(c),fb(),o!==null&&ie(Vl);break;case 24:po(zn)}}function ih(o,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var w=m.next;g=w;do{if((g.tag&o)===o){m=void 0;var S=g.create,R=g.inst;m=S(),R.destroy=m}g=g.next}while(g!==w)}}catch(Y){Wr(c,c.return,Y)}}function rl(o,c,g){try{var m=c.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var S=w.next;m=S;do{if((m.tag&o)===o){var R=m.inst,Y=R.destroy;if(Y!==void 0){R.destroy=void 0,w=c;var ce=g,Ce=Y;try{Ce()}catch(Oe){Wr(w,ce,Oe)}}}m=m.next}while(m!==S)}}catch(Oe){Wr(c,c.return,Oe)}}function iE(o){var c=o.updateQueue;if(c!==null){var g=o.stateNode;try{QT(c,g)}catch(m){Wr(o,o.return,m)}}}function sE(o,c,g){g.props=Jl(o.type,o.memoizedProps),g.state=o.memoizedState;try{g.componentWillUnmount()}catch(m){Wr(o,c,m)}}function sh(o,c){try{var g=o.ref;if(g!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof g=="function"?o.refCleanup=g(m):g.current=m}}catch(w){Wr(o,c,w)}}function Is(o,c){var g=o.ref,m=o.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(w){Wr(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(w){Wr(o,c,w)}else g.current=null}function oE(o){var c=o.type,g=o.memoizedProps,m=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(w){Wr(o,o.return,w)}}function Vb(o,c,g){try{var m=o.stateNode;_j(m,o.type,g,c),m[Fr]=c}catch(w){Wr(o,o.return,w)}}function lE(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&cl(o.type)||o.tag===4}function Yb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&cl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Qb(o,c,g){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(o,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(o),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=it));else if(m!==4&&(m===27&&cl(o.type)&&(g=o.stateNode,c=null),o=o.child,o!==null))for(Qb(o,c,g),o=o.sibling;o!==null;)Qb(o,c,g),o=o.sibling}function of(o,c,g){var m=o.tag;if(m===5||m===6)o=o.stateNode,c?g.insertBefore(o,c):g.appendChild(o);else if(m!==4&&(m===27&&cl(o.type)&&(g=o.stateNode),o=o.child,o!==null))for(of(o,c,g),o=o.sibling;o!==null;)of(o,c,g),o=o.sibling}function cE(o){var c=o.stateNode,g=o.memoizedProps;try{for(var m=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);Ta(c,m,g),c[en]=o,c[Fr]=g}catch(S){Wr(o,o.return,S)}}var bo=!1,qn=!1,Kb=!1,uE=typeof WeakSet=="function"?WeakSet:Set,ca=null;function sj(o,c){if(o=o.containerInfo,yx=Af,o=qd(o),Zc(o)){if("selectionStart"in o)var g={start:o.selectionStart,end:o.selectionEnd};else e:{g=(g=o.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var w=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{g.nodeType,S.nodeType}catch{g=null;break e}var R=0,Y=-1,ce=-1,Ce=0,Oe=0,ze=o,Ne=null;t:for(;;){for(var Pe;ze!==g||w!==0&&ze.nodeType!==3||(Y=R+w),ze!==S||m!==0&&ze.nodeType!==3||(ce=R+m),ze.nodeType===3&&(R+=ze.nodeValue.length),(Pe=ze.firstChild)!==null;)Ne=ze,ze=Pe;for(;;){if(ze===o)break t;if(Ne===g&&++Ce===w&&(Y=R),Ne===S&&++Oe===m&&(ce=R),(Pe=ze.nextSibling)!==null)break;ze=Ne,Ne=ze.parentNode}ze=Pe}g=Y===-1||ce===-1?null:{start:Y,end:ce}}else g=null}g=g||{start:0,end:0}}else g=null;for(bx={focusedElem:o,selectionRange:g},Af=!1,ca=c;ca!==null;)if(c=ca,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ca=o;else for(;ca!==null;){switch(c=ca,S=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(g=0;g<o.length;g++)w=o[g],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,g=c,w=S.memoizedProps,S=S.memoizedState,m=g.stateNode;try{var yt=Jl(g.type,w);o=m.getSnapshotBeforeUpdate(yt,S),m.__reactInternalSnapshotBeforeUpdate=o}catch(qt){Wr(g,g.return,qt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,g=o.nodeType,g===9)wx(o);else if(g===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":wx(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,ca=o;break}ca=c.return}}function dE(o,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:vo(o,g),m&4&&ih(5,g);break;case 1:if(vo(o,g),m&4)if(o=g.stateNode,c===null)try{o.componentDidMount()}catch(R){Wr(g,g.return,R)}else{var w=Jl(g.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(R){Wr(g,g.return,R)}}m&64&&iE(g),m&512&&sh(g,g.return);break;case 3:if(vo(o,g),m&64&&(o=g.updateQueue,o!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{QT(o,c)}catch(R){Wr(g,g.return,R)}}break;case 27:c===null&&m&4&&cE(g);case 26:case 5:vo(o,g),c===null&&m&4&&oE(g),m&512&&sh(g,g.return);break;case 12:vo(o,g);break;case 31:vo(o,g),m&4&&gE(o,g);break;case 13:vo(o,g),m&4&&fE(o,g),m&64&&(o=g.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(g=fj.bind(null,g),Mj(o,g))));break;case 22:if(m=g.memoizedState!==null||bo,!m){c=c!==null&&c.memoizedState!==null||qn,w=bo;var S=qn;bo=m,(qn=c)&&!S?wo(o,g,(g.subtreeFlags&8772)!==0):vo(o,g),bo=w,qn=S}break;case 30:break;default:vo(o,g)}}function hE(o){var c=o.alternate;c!==null&&(o.alternate=null,hE(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&he(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var yn=null,ti=!1;function xo(o,c,g){for(g=g.child;g!==null;)pE(o,c,g),g=g.sibling}function pE(o,c,g){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(hr,g)}catch{}switch(g.tag){case 26:qn||Is(g,c),xo(o,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:qn||Is(g,c);var m=yn,w=ti;cl(g.type)&&(yn=g.stateNode,ti=!1),xo(o,c,g),fh(g.stateNode),yn=m,ti=w;break;case 5:qn||Is(g,c);case 6:if(m=yn,w=ti,yn=null,xo(o,c,g),yn=m,ti=w,yn!==null)if(ti)try{(yn.nodeType===9?yn.body:yn.nodeName==="HTML"?yn.ownerDocument.body:yn).removeChild(g.stateNode)}catch(S){Wr(g,c,S)}else try{yn.removeChild(g.stateNode)}catch(S){Wr(g,c,S)}break;case 18:yn!==null&&(ti?(o=yn,iC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,g.stateNode),Cu(o)):iC(yn,g.stateNode));break;case 4:m=yn,w=ti,yn=g.stateNode.containerInfo,ti=!0,xo(o,c,g),yn=m,ti=w;break;case 0:case 11:case 14:case 15:rl(2,g,c),qn||rl(4,g,c),xo(o,c,g);break;case 1:qn||(Is(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&sE(g,c,m)),xo(o,c,g);break;case 21:xo(o,c,g);break;case 22:qn=(m=qn)||g.memoizedState!==null,xo(o,c,g),qn=m;break;default:xo(o,c,g)}}function gE(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Cu(o)}catch(g){Wr(c,c.return,g)}}}function fE(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Cu(o)}catch(g){Wr(c,c.return,g)}}function oj(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new uE),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new uE),c;default:throw Error(n(435,o.tag))}}function lf(o,c){var g=oj(o);c.forEach(function(m){if(!g.has(m)){g.add(m);var w=mj.bind(null,o,m);m.then(w,w)}})}function ri(o,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var w=g[m],S=o,R=c,Y=R;e:for(;Y!==null;){switch(Y.tag){case 27:if(cl(Y.type)){yn=Y.stateNode,ti=!1;break e}break;case 5:yn=Y.stateNode,ti=!1;break e;case 3:case 4:yn=Y.stateNode.containerInfo,ti=!0;break e}Y=Y.return}if(yn===null)throw Error(n(160));pE(S,R,w),yn=null,ti=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)mE(c,o),c=c.sibling}var gs=null;function mE(o,c){var g=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ri(c,o),ni(o),m&4&&(rl(3,o,o.return),ih(3,o),rl(5,o,o.return));break;case 1:ri(c,o),ni(o),m&512&&(qn||g===null||Is(g,g.return)),m&64&&bo&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(g=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var w=gs;if(ri(c,o),ni(o),m&512&&(qn||g===null||Is(g,g.return)),m&4){var S=g!==null?g.memoizedState:null;if(m=o.memoizedState,g===null)if(m===null)if(o.stateNode===null){e:{m=o.type,g=o.memoizedProps,w=w.ownerDocument||w;t:switch(m){case"title":S=w.getElementsByTagName("title")[0],(!S||S[gt]||S[en]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(m),w.head.insertBefore(S,w.querySelector("head > title"))),Ta(S,m,g),S[en]=o,Jt(S),m=S;break e;case"link":var R=mC("link","href",w).get(m+(g.href||""));if(R){for(var Y=0;Y<R.length;Y++)if(S=R[Y],S.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&S.getAttribute("rel")===(g.rel==null?null:g.rel)&&S.getAttribute("title")===(g.title==null?null:g.title)&&S.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){R.splice(Y,1);break t}}S=w.createElement(m),Ta(S,m,g),w.head.appendChild(S);break;case"meta":if(R=mC("meta","content",w).get(m+(g.content||""))){for(Y=0;Y<R.length;Y++)if(S=R[Y],S.getAttribute("content")===(g.content==null?null:""+g.content)&&S.getAttribute("name")===(g.name==null?null:g.name)&&S.getAttribute("property")===(g.property==null?null:g.property)&&S.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&S.getAttribute("charset")===(g.charSet==null?null:g.charSet)){R.splice(Y,1);break t}}S=w.createElement(m),Ta(S,m,g),w.head.appendChild(S);break;default:throw Error(n(468,m))}S[en]=o,Jt(S),m=S}o.stateNode=m}else yC(w,o.type,o.stateNode);else o.stateNode=fC(w,m,o.memoizedProps);else S!==m?(S===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):S.count--,m===null?yC(w,o.type,o.stateNode):fC(w,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Vb(o,o.memoizedProps,g.memoizedProps)}break;case 27:ri(c,o),ni(o),m&512&&(qn||g===null||Is(g,g.return)),g!==null&&m&4&&Vb(o,o.memoizedProps,g.memoizedProps);break;case 5:if(ri(c,o),ni(o),m&512&&(qn||g===null||Is(g,g.return)),o.flags&32){w=o.stateNode;try{Mt(w,"")}catch(yt){Wr(o,o.return,yt)}}m&4&&o.stateNode!=null&&(w=o.memoizedProps,Vb(o,w,g!==null?g.memoizedProps:w)),m&1024&&(Kb=!0);break;case 6:if(ri(c,o),ni(o),m&4){if(o.stateNode===null)throw Error(n(162));m=o.memoizedProps,g=o.stateNode;try{g.nodeValue=m}catch(yt){Wr(o,o.return,yt)}}break;case 3:if(kf=null,w=gs,gs=Sf(c.containerInfo),ri(c,o),gs=w,ni(o),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Cu(c.containerInfo)}catch(yt){Wr(o,o.return,yt)}Kb&&(Kb=!1,yE(o));break;case 4:m=gs,gs=Sf(o.stateNode.containerInfo),ri(c,o),ni(o),gs=m;break;case 12:ri(c,o),ni(o);break;case 31:ri(c,o),ni(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,lf(o,m)));break;case 13:ri(c,o),ni(o),o.child.flags&8192&&o.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(uf=ft()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,lf(o,m)));break;case 22:w=o.memoizedState!==null;var ce=g!==null&&g.memoizedState!==null,Ce=bo,Oe=qn;if(bo=Ce||w,qn=Oe||ce,ri(c,o),qn=Oe,bo=Ce,ni(o),m&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(g===null||ce||bo||qn||Zl(o)),g=null,c=o;;){if(c.tag===5||c.tag===26){if(g===null){ce=g=c;try{if(S=ce.stateNode,w)R=S.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{Y=ce.stateNode;var ze=ce.memoizedProps.style,Ne=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;Y.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(yt){Wr(ce,ce.return,yt)}}}else if(c.tag===6){if(g===null){ce=c;try{ce.stateNode.nodeValue=w?"":ce.memoizedProps}catch(yt){Wr(ce,ce.return,yt)}}}else if(c.tag===18){if(g===null){ce=c;try{var Pe=ce.stateNode;w?sC(Pe,!0):sC(ce.stateNode,!1)}catch(yt){Wr(ce,ce.return,yt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=o.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,lf(o,g))));break;case 19:ri(c,o),ni(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,lf(o,m)));break;case 30:break;case 21:break;default:ri(c,o),ni(o)}}function ni(o){var c=o.flags;if(c&2){try{for(var g,m=o.return;m!==null;){if(lE(m)){g=m;break}m=m.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var w=g.stateNode,S=Yb(o);of(o,S,w);break;case 5:var R=g.stateNode;g.flags&32&&(Mt(R,""),g.flags&=-33);var Y=Yb(o);of(o,Y,R);break;case 3:case 4:var ce=g.stateNode.containerInfo,Ce=Yb(o);Qb(o,Ce,ce);break;default:throw Error(n(161))}}catch(Oe){Wr(o,o.return,Oe)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function yE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;yE(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function vo(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)dE(o,c.alternate,c),c=c.sibling}function Zl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:rl(4,c,c.return),Zl(c);break;case 1:Is(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&sE(c,c.return,g),Zl(c);break;case 27:fh(c.stateNode);case 26:case 5:Is(c,c.return),Zl(c);break;case 22:c.memoizedState===null&&Zl(c);break;case 30:Zl(c);break;default:Zl(c)}o=o.sibling}}function wo(o,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,w=o,S=c,R=S.flags;switch(S.tag){case 0:case 11:case 15:wo(w,S,g),ih(4,S);break;case 1:if(wo(w,S,g),m=S,w=m.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Ce){Wr(m,m.return,Ce)}if(m=S,w=m.updateQueue,w!==null){var Y=m.stateNode;try{var ce=w.shared.hiddenCallbacks;if(ce!==null)for(w.shared.hiddenCallbacks=null,w=0;w<ce.length;w++)YT(ce[w],Y)}catch(Ce){Wr(m,m.return,Ce)}}g&&R&64&&iE(S),sh(S,S.return);break;case 27:cE(S);case 26:case 5:wo(w,S,g),g&&m===null&&R&4&&oE(S),sh(S,S.return);break;case 12:wo(w,S,g);break;case 31:wo(w,S,g),g&&R&4&&gE(w,S);break;case 13:wo(w,S,g),g&&R&4&&fE(w,S);break;case 22:S.memoizedState===null&&wo(w,S,g),sh(S,S.return);break;case 30:break;default:wo(w,S,g)}c=c.sibling}}function Xb(o,c){var g=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==g&&(o!=null&&o.refCount++,g!=null&&Wd(g))}function Jb(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wd(o))}function fs(o,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)bE(o,c,g,m),c=c.sibling}function bE(o,c,g,m){var w=c.flags;switch(c.tag){case 0:case 11:case 15:fs(o,c,g,m),w&2048&&ih(9,c);break;case 1:fs(o,c,g,m);break;case 3:fs(o,c,g,m),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wd(o)));break;case 12:if(w&2048){fs(o,c,g,m),o=c.stateNode;try{var S=c.memoizedProps,R=S.id,Y=S.onPostCommit;typeof Y=="function"&&Y(R,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ce){Wr(c,c.return,ce)}}else fs(o,c,g,m);break;case 31:fs(o,c,g,m);break;case 13:fs(o,c,g,m);break;case 23:break;case 22:S=c.stateNode,R=c.alternate,c.memoizedState!==null?S._visibility&2?fs(o,c,g,m):oh(o,c):S._visibility&2?fs(o,c,g,m):(S._visibility|=2,fu(o,c,g,m,(c.subtreeFlags&10256)!==0||!1)),w&2048&&Xb(R,c);break;case 24:fs(o,c,g,m),w&2048&&Jb(c.alternate,c);break;default:fs(o,c,g,m)}}function fu(o,c,g,m,w){for(w=w&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=o,R=c,Y=g,ce=m,Ce=R.flags;switch(R.tag){case 0:case 11:case 15:fu(S,R,Y,ce,w),ih(8,R);break;case 23:break;case 22:var Oe=R.stateNode;R.memoizedState!==null?Oe._visibility&2?fu(S,R,Y,ce,w):oh(S,R):(Oe._visibility|=2,fu(S,R,Y,ce,w)),w&&Ce&2048&&Xb(R.alternate,R);break;case 24:fu(S,R,Y,ce,w),w&&Ce&2048&&Jb(R.alternate,R);break;default:fu(S,R,Y,ce,w)}c=c.sibling}}function oh(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=o,m=c,w=m.flags;switch(m.tag){case 22:oh(g,m),w&2048&&Xb(m.alternate,m);break;case 24:oh(g,m),w&2048&&Jb(m.alternate,m);break;default:oh(g,m)}c=c.sibling}}var lh=8192;function mu(o,c,g){if(o.subtreeFlags&lh)for(o=o.child;o!==null;)xE(o,c,g),o=o.sibling}function xE(o,c,g){switch(o.tag){case 26:mu(o,c,g),o.flags&lh&&o.memoizedState!==null&&Vj(g,gs,o.memoizedState,o.memoizedProps);break;case 5:mu(o,c,g);break;case 3:case 4:var m=gs;gs=Sf(o.stateNode.containerInfo),mu(o,c,g),gs=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=lh,lh=16777216,mu(o,c,g),lh=m):mu(o,c,g));break;default:mu(o,c,g)}}function vE(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function ch(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];ca=m,SE(m,o)}vE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wE(o),o=o.sibling}function wE(o){switch(o.tag){case 0:case 11:case 15:ch(o),o.flags&2048&&rl(9,o,o.return);break;case 3:ch(o);break;case 12:ch(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,cf(o)):ch(o);break;default:ch(o)}}function cf(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];ca=m,SE(m,o)}vE(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:rl(8,c,c.return),cf(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,cf(c));break;default:cf(c)}o=o.sibling}}function SE(o,c){for(;ca!==null;){var g=ca;switch(g.tag){case 0:case 11:case 15:rl(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Wd(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,ca=m;else e:for(g=o;ca!==null;){m=ca;var w=m.sibling,S=m.return;if(hE(m),m===g){ca=null;break e}if(w!==null){w.return=S,ca=w;break e}ca=S}}}var lj={getCacheForType:function(o){var c=wa(zn),g=c.data.get(o);return g===void 0&&(g=o(),c.data.set(o,g)),g},cacheSignal:function(){return wa(zn).controller.signal}},cj=typeof WeakMap=="function"?WeakMap:Map,Br=0,tn=null,fr=null,Tr=0,Gr=0,ki=null,nl=!1,yu=!1,Zb=!1,So=0,Nn=0,al=0,ec=0,ex=0,Ei=0,bu=0,uh=null,ai=null,tx=!1,uf=0,TE=0,df=1/0,hf=null,il=null,Zn=0,sl=null,xu=null,To=0,rx=0,nx=null,kE=null,dh=0,ax=null;function Ci(){return(Br&2)!==0&&Tr!==0?Tr&-Tr:I.T!==null?ux():fi()}function EE(){if(Ei===0)if((Tr&536870912)===0||_r){var o=Ua;Ua<<=1,(Ua&3932160)===0&&(Ua=262144),Ei=o}else Ei=536870912;return o=Si.current,o!==null&&(o.flags|=32),Ei}function ii(o,c,g){(o===tn&&(Gr===2||Gr===9)||o.cancelPendingCommit!==null)&&(vu(o,0),ol(o,Tr,Ei,!1)),Ar(o,g),((Br&2)===0||o!==tn)&&(o===tn&&((Br&2)===0&&(ec|=g),Nn===4&&ol(o,Tr,Ei,!1)),Ds(o))}function CE(o,c,g){if((Br&6)!==0)throw Error(n(327));var m=!g&&(c&127)===0&&(c&o.expiredLanes)===0||De(o,c),w=m?hj(o,c):sx(o,c,!0),S=m;do{if(w===0){yu&&!m&&ol(o,c,0,!1);break}else{if(g=o.current.alternate,S&&!uj(g)){w=sx(o,c,!1),S=!1;continue}if(w===2){if(S=c,o.errorRecoveryDisabledLanes&S)var R=0;else R=o.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){c=R;e:{var Y=o;w=uh;var ce=Y.current.memoizedState.isDehydrated;if(ce&&(vu(Y,R).flags|=256),R=sx(Y,R,!1),R!==2){if(Zb&&!ce){Y.errorRecoveryDisabledLanes|=S,ec|=S,w=4;break e}S=ai,ai=w,S!==null&&(ai===null?ai=S:ai.push.apply(ai,S))}w=R}if(S=!1,w!==2)continue}}if(w===1){vu(o,0),ol(o,c,0,!0);break}e:{switch(m=o,S=w,S){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:ol(m,c,Ei,!nl);break e;case 2:ai=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(w=uf+300-ft(),10<w)){if(ol(m,c,Ei,!nl),le(m,0,!0)!==0)break e;To=c,m.timeoutHandle=nC(_E.bind(null,m,g,ai,hf,tx,c,Ei,ec,bu,nl,S,"Throttled",-0,0),w);break e}_E(m,g,ai,hf,tx,c,Ei,ec,bu,nl,S,null,-0,0)}}break}while(!0);Ds(o)}function _E(o,c,g,m,w,S,R,Y,ce,Ce,Oe,ze,Ne,Pe){if(o.timeoutHandle=-1,ze=c.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:it},xE(c,S,ze);var yt=(S&62914560)===S?uf-ft():(S&4194048)===S?TE-ft():0;if(yt=Yj(ze,yt),yt!==null){To=S,o.cancelPendingCommit=yt(ME.bind(null,o,c,S,g,m,w,R,Y,ce,Oe,ze,null,Ne,Pe)),ol(o,S,R,!Ce);return}}ME(o,c,S,g,m,w,R,Y,ce)}function uj(o){for(var c=o;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var w=g[m],S=w.getSnapshot;w=w.value;try{if(!X(S(),w))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ol(o,c,g,m){c&=~ex,c&=~ec,o.suspendedLanes|=c,o.pingedLanes&=~c,m&&(o.warmLanes|=c),m=o.expirationTimes;for(var w=c;0<w;){var S=31-tr(w),R=1<<S;m[S]=-1,w&=~R}g!==0&&ut(o,g,c)}function pf(){return(Br&6)===0?(hh(0),!1):!0}function ix(){if(fr!==null){if(Gr===0)var o=fr.return;else o=fr,ho=Gl=null,wb(o),uu=null,Yd=0,o=fr;for(;o!==null;)aE(o.alternate,o),o=o.return;fr=null}}function vu(o,c){var g=o.timeoutHandle;g!==-1&&(o.timeoutHandle=-1,Lj(g)),g=o.cancelPendingCommit,g!==null&&(o.cancelPendingCommit=null,g()),To=0,ix(),tn=o,fr=g=co(o.current,null),Tr=c,Gr=0,ki=null,nl=!1,yu=De(o,c),Zb=!1,bu=Ei=ex=ec=al=Nn=0,ai=uh=null,tx=!1,(c&8)!==0&&(c|=c&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=c;0<m;){var w=31-tr(m),S=1<<w;c|=o[w],m&=~S}return So=c,Ig(),g}function AE(o,c){nr=null,I.H=rh,c===cu||c===Ug?(c=HT(),Gr=3):c===cb?(c=HT(),Gr=4):Gr=c===jb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ki=c,fr===null&&(Nn=1,tf(o,Fi(c,o.current)))}function NE(){var o=Si.current;return o===null?!0:(Tr&4194048)===Tr?qi===null:(Tr&62914560)===Tr||(Tr&536870912)!==0?o===qi:!1}function LE(){var o=I.H;return I.H=rh,o===null?rh:o}function PE(){var o=I.A;return I.A=lj,o}function gf(){Nn=4,nl||(Tr&4194048)!==Tr&&Si.current!==null||(yu=!0),(al&134217727)===0&&(ec&134217727)===0||tn===null||ol(tn,Tr,Ei,!1)}function sx(o,c,g){var m=Br;Br|=2;var w=LE(),S=PE();(tn!==o||Tr!==c)&&(hf=null,vu(o,c)),c=!1;var R=Nn;e:do try{if(Gr!==0&&fr!==null){var Y=fr,ce=ki;switch(Gr){case 8:ix(),R=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(c=!0);var Ce=Gr;if(Gr=0,ki=null,wu(o,Y,ce,Ce),g&&yu){R=0;break e}break;default:Ce=Gr,Gr=0,ki=null,wu(o,Y,ce,Ce)}}dj(),R=Nn;break}catch(Oe){AE(o,Oe)}while(!0);return c&&o.shellSuspendCounter++,ho=Gl=null,Br=m,I.H=w,I.A=S,fr===null&&(tn=null,Tr=0,Ig()),R}function dj(){for(;fr!==null;)RE(fr)}function hj(o,c){var g=Br;Br|=2;var m=LE(),w=PE();tn!==o||Tr!==c?(hf=null,df=ft()+500,vu(o,c)):yu=De(o,c);e:do try{if(Gr!==0&&fr!==null){c=fr;var S=ki;t:switch(Gr){case 1:Gr=0,ki=null,wu(o,c,S,1);break;case 2:case 9:if($T(S)){Gr=0,ki=null,IE(c);break}c=function(){Gr!==2&&Gr!==9||tn!==o||(Gr=7),Ds(o)},S.then(c,c);break e;case 3:Gr=7;break e;case 4:Gr=5;break e;case 7:$T(S)?(Gr=0,ki=null,IE(c)):(Gr=0,ki=null,wu(o,c,S,7));break;case 5:var R=null;switch(fr.tag){case 26:R=fr.memoizedState;case 5:case 27:var Y=fr;if(R?bC(R):Y.stateNode.complete){Gr=0,ki=null;var ce=Y.sibling;if(ce!==null)fr=ce;else{var Ce=Y.return;Ce!==null?(fr=Ce,ff(Ce)):fr=null}break t}}Gr=0,ki=null,wu(o,c,S,5);break;case 6:Gr=0,ki=null,wu(o,c,S,6);break;case 8:ix(),Nn=6;break e;default:throw Error(n(462))}}pj();break}catch(Oe){AE(o,Oe)}while(!0);return ho=Gl=null,I.H=m,I.A=w,Br=g,fr!==null?0:(tn=null,Tr=0,Ig(),Nn)}function pj(){for(;fr!==null&&!ir();)RE(fr)}function RE(o){var c=rE(o.alternate,o,So);o.memoizedProps=o.pendingProps,c===null?ff(o):fr=c}function IE(o){var c=o,g=c.alternate;switch(c.tag){case 15:case 0:c=Kk(g,c,c.pendingProps,c.type,void 0,Tr);break;case 11:c=Kk(g,c,c.pendingProps,c.type.render,c.ref,Tr);break;case 5:wb(c);default:aE(g,c),c=fr=PT(c,So),c=rE(g,c,So)}o.memoizedProps=o.pendingProps,c===null?ff(o):fr=c}function wu(o,c,g,m){ho=Gl=null,wb(c),uu=null,Yd=0;var w=c.return;try{if(tj(o,w,c,g,Tr)){Nn=1,tf(o,Fi(g,o.current)),fr=null;return}}catch(S){if(w!==null)throw fr=w,S;Nn=1,tf(o,Fi(g,o.current)),fr=null;return}c.flags&32768?(_r||m===1?o=!0:yu||(Tr&536870912)!==0?o=!1:(nl=o=!0,(m===2||m===9||m===3||m===6)&&(m=Si.current,m!==null&&m.tag===13&&(m.flags|=16384))),DE(c,o)):ff(c)}function ff(o){var c=o;do{if((c.flags&32768)!==0){DE(c,nl);return}o=c.return;var g=aj(c.alternate,c,So);if(g!==null){fr=g;return}if(c=c.sibling,c!==null){fr=c;return}fr=c=o}while(c!==null);Nn===0&&(Nn=5)}function DE(o,c){do{var g=ij(o.alternate,o);if(g!==null){g.flags&=32767,fr=g;return}if(g=o.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(o=o.sibling,o!==null)){fr=o;return}fr=o=g}while(o!==null);Nn=6,fr=null}function ME(o,c,g,m,w,S,R,Y,ce){o.cancelPendingCommit=null;do mf();while(Zn!==0);if((Br&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(S=c.lanes|c.childLanes,S|=Yy,dt(o,g,S,R,Y,ce),o===tn&&(fr=tn=null,Tr=0),xu=c,sl=o,To=g,rx=S,nx=w,kE=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,yj(Ze,function(){return zE(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,w=G.p,G.p=2,R=Br,Br|=4;try{sj(o,c,g)}finally{Br=R,G.p=w,I.T=m}}Zn=1,OE(),jE(),BE()}}function OE(){if(Zn===1){Zn=0;var o=sl,c=xu,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=I.T,I.T=null;var m=G.p;G.p=2;var w=Br;Br|=4;try{mE(c,o);var S=bx,R=qd(o.containerInfo),Y=S.focusedElem,ce=S.selectionRange;if(R!==Y&&Y&&Y.ownerDocument&&Ul(Y.ownerDocument.documentElement,Y)){if(ce!==null&&Zc(Y)){var Ce=ce.start,Oe=ce.end;if(Oe===void 0&&(Oe=Ce),"selectionStart"in Y)Y.selectionStart=Ce,Y.selectionEnd=Math.min(Oe,Y.value.length);else{var ze=Y.ownerDocument||document,Ne=ze&&ze.defaultView||window;if(Ne.getSelection){var Pe=Ne.getSelection(),yt=Y.textContent.length,qt=Math.min(ce.start,yt),Xr=ce.end===void 0?qt:Math.min(ce.end,yt);!Pe.extend&&qt>Xr&&(R=Xr,Xr=qt,qt=R);var me=Wo(Y,qt),ge=Wo(Y,Xr);if(me&&ge&&(Pe.rangeCount!==1||Pe.anchorNode!==me.node||Pe.anchorOffset!==me.offset||Pe.focusNode!==ge.node||Pe.focusOffset!==ge.offset)){var ke=ze.createRange();ke.setStart(me.node,me.offset),Pe.removeAllRanges(),qt>Xr?(Pe.addRange(ke),Pe.extend(ge.node,ge.offset)):(ke.setEnd(ge.node,ge.offset),Pe.addRange(ke))}}}}for(ze=[],Pe=Y;Pe=Pe.parentNode;)Pe.nodeType===1&&ze.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<ze.length;Y++){var Fe=ze[Y];Fe.element.scrollLeft=Fe.left,Fe.element.scrollTop=Fe.top}}Af=!!yx,bx=yx=null}finally{Br=w,G.p=m,I.T=g}}o.current=c,Zn=2}}function jE(){if(Zn===2){Zn=0;var o=sl,c=xu,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=I.T,I.T=null;var m=G.p;G.p=2;var w=Br;Br|=4;try{dE(o,c.alternate,c)}finally{Br=w,G.p=m,I.T=g}}Zn=3}}function BE(){if(Zn===4||Zn===3){Zn=0,lr();var o=sl,c=xu,g=To,m=kE;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Zn=5:(Zn=0,xu=sl=null,FE(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(il=null),jn(g),c=c.stateNode,cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(hr,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=I.T,w=G.p,G.p=2,I.T=null;try{for(var S=o.onRecoverableError,R=0;R<m.length;R++){var Y=m[R];S(Y.value,{componentStack:Y.stack})}}finally{I.T=c,G.p=w}}(To&3)!==0&&mf(),Ds(o),w=o.pendingLanes,(g&261930)!==0&&(w&42)!==0?o===ax?dh++:(dh=0,ax=o):dh=0,hh(0)}}function FE(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Wd(c)))}function mf(){return OE(),jE(),BE(),zE()}function zE(){if(Zn!==5)return!1;var o=sl,c=rx;rx=0;var g=jn(To),m=I.T,w=G.p;try{G.p=32>g?32:g,I.T=null,g=nx,nx=null;var S=sl,R=To;if(Zn=0,xu=sl=null,To=0,(Br&6)!==0)throw Error(n(331));var Y=Br;if(Br|=4,wE(S.current),bE(S,S.current,R,g),Br=Y,hh(0,!1),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(hr,S)}catch{}return!0}finally{G.p=w,I.T=m,FE(o,c)}}function UE(o,c,g){c=Fi(g,c),c=Ob(o.stateNode,c,2),o=Zo(o,c,2),o!==null&&(Ar(o,2),Ds(o))}function Wr(o,c,g){if(o.tag===3)UE(o,o,g);else for(;c!==null;){if(c.tag===3){UE(c,o,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(il===null||!il.has(m))){o=Fi(g,o),g=$k(2),m=Zo(c,g,2),m!==null&&(qk(g,m,c,o),Ar(m,2),Ds(m));break}}c=c.return}}function ox(o,c,g){var m=o.pingCache;if(m===null){m=o.pingCache=new cj;var w=new Set;m.set(c,w)}else w=m.get(c),w===void 0&&(w=new Set,m.set(c,w));w.has(g)||(Zb=!0,w.add(g),o=gj.bind(null,o,c,g),c.then(o,o))}function gj(o,c,g){var m=o.pingCache;m!==null&&m.delete(c),o.pingedLanes|=o.suspendedLanes&g,o.warmLanes&=~g,tn===o&&(Tr&g)===g&&(Nn===4||Nn===3&&(Tr&62914560)===Tr&&300>ft()-uf?(Br&2)===0&&vu(o,0):ex|=g,bu===Tr&&(bu=0)),Ds(o)}function $E(o,c){c===0&&(c=It()),o=$l(o,c),o!==null&&(Ar(o,c),Ds(o))}function fj(o){var c=o.memoizedState,g=0;c!==null&&(g=c.retryLane),$E(o,g)}function mj(o,c){var g=0;switch(o.tag){case 31:case 13:var m=o.stateNode,w=o.memoizedState;w!==null&&(g=w.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(c),$E(o,g)}function yj(o,c){return kt(o,c)}var yf=null,Su=null,lx=!1,bf=!1,cx=!1,ll=0;function Ds(o){o!==Su&&o.next===null&&(Su===null?yf=Su=o:Su=Su.next=o),bf=!0,lx||(lx=!0,xj())}function hh(o,c){if(!cx&&bf){cx=!0;do for(var g=!1,m=yf;m!==null;){if(o!==0){var w=m.pendingLanes;if(w===0)var S=0;else{var R=m.suspendedLanes,Y=m.pingedLanes;S=(1<<31-tr(42|o)+1)-1,S&=w&~(R&~Y),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(g=!0,WE(m,S))}else S=Tr,S=le(m,m===tn?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||De(m,S)||(g=!0,WE(m,S));m=m.next}while(g);cx=!1}}function bj(){qE()}function qE(){bf=lx=!1;var o=0;ll!==0&&Nj()&&(o=ll);for(var c=ft(),g=null,m=yf;m!==null;){var w=m.next,S=HE(m,c);S===0?(m.next=null,g===null?yf=w:g.next=w,w===null&&(Su=g)):(g=m,(o!==0||(S&3)!==0)&&(bf=!0)),m=w}Zn!==0&&Zn!==5||hh(o),ll!==0&&(ll=0)}function HE(o,c){for(var g=o.suspendedLanes,m=o.pingedLanes,w=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var R=31-tr(S),Y=1<<R,ce=w[R];ce===-1?((Y&g)===0||(Y&m)!==0)&&(w[R]=Qe(Y,c)):ce<=c&&(o.expiredLanes|=Y),S&=~Y}if(c=tn,g=Tr,g=le(o,o===c?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,g===0||o===c&&(Gr===2||Gr===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&At(m),o.callbackNode=null,o.callbackPriority=0;if((g&3)===0||De(o,g)){if(c=g&-g,c===o.callbackPriority)return c;switch(m!==null&&At(m),jn(g)){case 2:case 8:g=we;break;case 32:g=Ze;break;case 268435456:g=pt;break;default:g=Ze}return m=GE.bind(null,o),g=kt(g,m),o.callbackPriority=c,o.callbackNode=g,c}return m!==null&&m!==null&&At(m),o.callbackPriority=2,o.callbackNode=null,2}function GE(o,c){if(Zn!==0&&Zn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var g=o.callbackNode;if(mf()&&o.callbackNode!==g)return null;var m=Tr;return m=le(o,o===tn?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(CE(o,m,c),HE(o,ft()),o.callbackNode!=null&&o.callbackNode===g?GE.bind(null,o):null)}function WE(o,c){if(mf())return null;CE(o,c,!0)}function xj(){Pj(function(){(Br&6)!==0?kt(re,bj):qE()})}function ux(){if(ll===0){var o=ou;o===0&&(o=za,za<<=1,(za&261888)===0&&(za=256)),ll=o}return ll}function VE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ls(""+o)}function YE(o,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,o.id&&g.setAttribute("form",o.id),c.parentNode.insertBefore(g,c),o=new FormData(o),g.parentNode.removeChild(g),o}function vj(o,c,g,m,w){if(c==="submit"&&g&&g.stateNode===w){var S=VE((w[Fr]||null).action),R=m.submitter;R&&(c=(c=R[Fr]||null)?VE(c.formAction):R.getAttribute("formAction"),c!==null&&(S=c,R=null));var Y=new Yc("action","action",null,m,w);o.push({event:Y,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ll!==0){var ce=R?YE(w,R):new FormData(w);Lb(g,{pending:!0,data:ce,method:w.method,action:S},null,ce)}}else typeof S=="function"&&(Y.preventDefault(),ce=R?YE(w,R):new FormData(w),Lb(g,{pending:!0,data:ce,method:w.method,action:S},S,ce))},currentTarget:w}]})}}for(var dx=0;dx<Vy.length;dx++){var hx=Vy[dx],wj=hx.toLowerCase(),Sj=hx[0].toUpperCase()+hx.slice(1);ps(wj,"on"+Sj)}ps(mn,"onAnimationEnd"),ps(qr,"onAnimationIteration"),ps(Hr,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(ds,"onTransitionRun"),ps(Yr,"onTransitionStart"),ps(Jn,"onTransitionCancel"),ps(hs,"onTransitionEnd"),Ke("onMouseEnter",["mouseout","mouseover"]),Ke("onMouseLeave",["mouseout","mouseover"]),Ke("onPointerEnter",["pointerout","pointerover"]),Ke("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ph));function QE(o,c){c=(c&4)!==0;for(var g=0;g<o.length;g++){var m=o[g],w=m.event;m=m.listeners;e:{var S=void 0;if(c)for(var R=m.length-1;0<=R;R--){var Y=m[R],ce=Y.instance,Ce=Y.currentTarget;if(Y=Y.listener,ce!==S&&w.isPropagationStopped())break e;S=Y,w.currentTarget=Ce;try{S(w)}catch(Oe){Rg(Oe)}w.currentTarget=null,S=ce}else for(R=0;R<m.length;R++){if(Y=m[R],ce=Y.instance,Ce=Y.currentTarget,Y=Y.listener,ce!==S&&w.isPropagationStopped())break e;S=Y,w.currentTarget=Ce;try{S(w)}catch(Oe){Rg(Oe)}w.currentTarget=null,S=ce}}}}function mr(o,c){var g=c[is];g===void 0&&(g=c[is]=new Set);var m=o+"__bubble";g.has(m)||(KE(c,o,2,!1),g.add(m))}function px(o,c,g){var m=0;c&&(m|=4),KE(g,o,m,c)}var xf="_reactListening"+Math.random().toString(36).slice(2);function gx(o){if(!o[xf]){o[xf]=!0,cn.forEach(function(g){g!=="selectionchange"&&(Tj.has(g)||px(g,!1,o),px(g,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[xf]||(c[xf]=!0,px("selectionchange",!1,c))}}function KE(o,c,g,m){switch(EC(c)){case 2:var w=Xj;break;case 8:w=Jj;break;default:w=Nx}g=w.bind(null,c,g,o),w=void 0,!Bd||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),m?w!==void 0?o.addEventListener(c,g,{capture:!0,passive:w}):o.addEventListener(c,g,!0):w!==void 0?o.addEventListener(c,g,{passive:w}):o.addEventListener(c,g,!1)}function fx(o,c,g,m,w){var S=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var Y=m.stateNode.containerInfo;if(Y===w)break;if(R===4)for(R=m.return;R!==null;){var ce=R.tag;if((ce===3||ce===4)&&R.stateNode.containerInfo===w)return;R=R.return}for(;Y!==null;){if(R=Ue(Y),R===null)return;if(ce=R.tag,ce===5||ce===6||ce===26||ce===27){m=S=R;continue e}Y=Y.parentNode}}m=m.return}Fl(function(){var Ce=S,Oe=Qt(g),ze=[];e:{var Ne=NT.get(o);if(Ne!==void 0){var Pe=Yc,yt=o;switch(o){case"keypress":if(io(g)===0)break e;case"keydown":case"keyup":Pe=By;break;case"focusin":yt="focus",Pe=Fd;break;case"focusout":yt="blur",Pe=Fd;break;case"beforeblur":case"afterblur":Pe=Fd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Ly;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Uy;break;case mn:case qr:case Hr:Pe=Cg;break;case hs:Pe=Lg;break;case"scroll":case"scrollend":Pe=Ay;break;case"wheel":Pe=Hy;break;case"copy":case"cut":case"paste":Pe=Iy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=Ng;break;case"toggle":case"beforetoggle":Pe=B}var qt=(c&4)!==0,Xr=!qt&&(o==="scroll"||o==="scrollend"),me=qt?Ne!==null?Ne+"Capture":null:Ne;qt=[];for(var ge=Ce,ke;ge!==null;){var Fe=ge;if(ke=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||ke===null||me===null||(Fe=fa(ge,me),Fe!=null&&qt.push(gh(ge,Fe,ke))),Xr)break;ge=ge.return}0<qt.length&&(Ne=new Pe(Ne,yt,null,g,Oe),ze.push({event:Ne,listeners:qt}))}}if((c&7)===0){e:{if(Ne=o==="mouseover"||o==="pointerover",Pe=o==="mouseout"||o==="pointerout",Ne&&g!==mt&&(yt=g.relatedTarget||g.fromElement)&&(Ue(yt)||yt[$a]))break e;if((Pe||Ne)&&(Ne=Oe.window===Oe?Oe:(Ne=Oe.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Pe?(yt=g.relatedTarget||g.toElement,Pe=Ce,yt=yt?Ue(yt):null,yt!==null&&(Xr=i(yt),qt=yt.tag,yt!==Xr||qt!==5&&qt!==27&&qt!==6)&&(yt=null)):(Pe=null,yt=Ce),Pe!==yt)){if(qt=Eg,Fe="onMouseLeave",me="onMouseEnter",ge="mouse",(o==="pointerout"||o==="pointerover")&&(qt=Ng,Fe="onPointerLeave",me="onPointerEnter",ge="pointer"),Xr=Pe==null?Ne:wr(Pe),ke=yt==null?Ne:wr(yt),Ne=new qt(Fe,ge+"leave",Pe,g,Oe),Ne.target=Xr,Ne.relatedTarget=ke,Fe=null,Ue(Oe)===Ce&&(qt=new qt(me,ge+"enter",yt,g,Oe),qt.target=ke,qt.relatedTarget=Xr,Fe=qt),Xr=Fe,Pe&&yt)t:{for(qt=kj,me=Pe,ge=yt,ke=0,Fe=me;Fe;Fe=qt(Fe))ke++;Fe=0;for(var Ot=ge;Ot;Ot=qt(Ot))Fe++;for(;0<ke-Fe;)me=qt(me),ke--;for(;0<Fe-ke;)ge=qt(ge),Fe--;for(;ke--;){if(me===ge||ge!==null&&me===ge.alternate){qt=me;break t}me=qt(me),ge=qt(ge)}qt=null}else qt=null;Pe!==null&&XE(ze,Ne,Pe,qt,!1),yt!==null&&Xr!==null&&XE(ze,Xr,yt,qt,!0)}}e:{if(Ne=Ce?wr(Ce):window,Pe=Ne.nodeName&&Ne.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Ne.type==="file")var Ir=Aa;else if(Gt(Ne))if(ji)Ir=$d;else{Ir=Ud;var Nt=us}else Pe=Ne.nodeName,!Pe||Pe.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Ce&&Ns(Ce.elementType)&&(Ir=Aa):Ir=Wy;if(Ir&&(Ir=Ir(o,Ce))){Sn(ze,Ir,g,Oe);break e}Nt&&Nt(o,Ne,Ce),o==="focusout"&&Ce&&Ne.type==="number"&&Ce.memoizedProps.value!=null&&ss(Ne,"number",Ne.value)}switch(Nt=Ce?wr(Ce):window,o){case"focusin":(Gt(Nt)||Nt.contentEditable==="true")&&(xa=Nt,eu=Ce,Ge=null);break;case"focusout":Ge=eu=xa=null;break;case"mousedown":be=!0;break;case"contextmenu":case"mouseup":case"dragend":be=!1,Be(ze,g,Oe);break;case"selectionchange":if(Pg)break;case"keydown":case"keyup":Be(ze,g,Oe)}var sr;if(Se)e:{switch(o){case"compositionstart":var kr="onCompositionStart";break e;case"compositionend":kr="onCompositionEnd";break e;case"compositionupdate":kr="onCompositionUpdate";break e}kr=void 0}else He?Ie(o,g)&&(kr="onCompositionEnd"):o==="keydown"&&g.keyCode===229&&(kr="onCompositionStart");kr&&(J&&g.locale!=="ko"&&(He||kr!=="onCompositionStart"?kr==="onCompositionEnd"&&He&&(sr=Wc()):(os=Oe,Gc="value"in os?os.value:os.textContent,He=!0)),Nt=vf(Ce,kr),0<Nt.length&&(kr=new _g(kr,o,null,g,Oe),ze.push({event:kr,listeners:Nt}),sr?kr.data=sr:(sr=fe(g),sr!==null&&(kr.data=sr)))),(sr=Me?We(o,g):Le(o,g))&&(kr=vf(Ce,"onBeforeInput"),0<kr.length&&(Nt=new _g("onBeforeInput","beforeinput",null,g,Oe),ze.push({event:Nt,listeners:kr}),Nt.data=sr)),vj(ze,o,Ce,g,Oe)}QE(ze,c)})}function gh(o,c,g){return{instance:o,listener:c,currentTarget:g}}function vf(o,c){for(var g=c+"Capture",m=[];o!==null;){var w=o,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=fa(o,g),w!=null&&m.unshift(gh(o,w,S)),w=fa(o,c),w!=null&&m.push(gh(o,w,S))),o.tag===3)return m;o=o.return}return[]}function kj(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function XE(o,c,g,m,w){for(var S=c._reactName,R=[];g!==null&&g!==m;){var Y=g,ce=Y.alternate,Ce=Y.stateNode;if(Y=Y.tag,ce!==null&&ce===m)break;Y!==5&&Y!==26&&Y!==27||Ce===null||(ce=Ce,w?(Ce=fa(g,S),Ce!=null&&R.unshift(gh(g,Ce,ce))):w||(Ce=fa(g,S),Ce!=null&&R.push(gh(g,Ce,ce)))),g=g.return}R.length!==0&&o.push({event:c,listeners:R})}var Ej=/\r\n?/g,Cj=/\u0000|\uFFFD/g;function JE(o){return(typeof o=="string"?o:""+o).replace(Ej,`
`).replace(Cj,"")}function ZE(o,c){return c=JE(c),JE(o)===c}function Kr(o,c,g,m,w,S){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Mt(o,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Mt(o,""+m);break;case"className":Qn(o,"class",m);break;case"tabIndex":Qn(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(o,g,m);break;case"style":Cr(o,m,S);break;case"data":if(c!=="object"){Qn(o,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){o.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(g);break}m=Ls(""+m),o.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(g==="formAction"?(c!=="input"&&Kr(o,c,"name",w.name,w,null),Kr(o,c,"formEncType",w.formEncType,w,null),Kr(o,c,"formMethod",w.formMethod,w,null),Kr(o,c,"formTarget",w.formTarget,w,null)):(Kr(o,c,"encType",w.encType,w,null),Kr(o,c,"method",w.method,w,null),Kr(o,c,"target",w.target,w,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(g);break}m=Ls(""+m),o.setAttribute(g,m);break;case"onClick":m!=null&&(o.onclick=it);break;case"onScroll":m!=null&&mr("scroll",o);break;case"onScrollEnd":m!=null&&mr("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(g=m.__html,g!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=g}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}g=Ls(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(g,""+m):o.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(g,""):o.removeAttribute(g);break;case"capture":case"download":m===!0?o.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(g,m):o.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(g,m):o.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(g):o.setAttribute(g,m);break;case"popover":mr("beforetoggle",o),mr("toggle",o),la(o,"popover",m);break;case"xlinkActuate":Cn(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Cn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Cn(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Cn(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Cn(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Cn(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Cn(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Cn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Cn(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":la(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Mi.get(g)||g,la(o,g,m))}}function mx(o,c,g,m,w,S){switch(g){case"style":Cr(o,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(g=m.__html,g!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=g}}break;case"children":typeof m=="string"?Mt(o,m):(typeof m=="number"||typeof m=="bigint")&&Mt(o,""+m);break;case"onScroll":m!=null&&mr("scroll",o);break;case"onScrollEnd":m!=null&&mr("scrollend",o);break;case"onClick":m!=null&&(o.onclick=it);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rn.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(w=g.endsWith("Capture"),c=g.slice(2,w?g.length-7:void 0),S=o[Fr]||null,S=S!=null?S[g]:null,typeof S=="function"&&o.removeEventListener(c,S,w),typeof m=="function")){typeof S!="function"&&S!==null&&(g in o?o[g]=null:o.hasAttribute(g)&&o.removeAttribute(g)),o.addEventListener(c,m,w);break e}g in o?o[g]=m:m===!0?o.setAttribute(g,""):la(o,g,m)}}}function Ta(o,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mr("error",o),mr("load",o);var m=!1,w=!1,S;for(S in g)if(g.hasOwnProperty(S)){var R=g[S];if(R!=null)switch(S){case"src":m=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Kr(o,c,S,R,g,null)}}w&&Kr(o,c,"srcSet",g.srcSet,g,null),m&&Kr(o,c,"src",g.src,g,null);return;case"input":mr("invalid",o);var Y=S=R=w=null,ce=null,Ce=null;for(m in g)if(g.hasOwnProperty(m)){var Oe=g[m];if(Oe!=null)switch(m){case"name":w=Oe;break;case"type":R=Oe;break;case"checked":ce=Oe;break;case"defaultChecked":Ce=Oe;break;case"value":S=Oe;break;case"defaultValue":Y=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:Kr(o,c,m,Oe,g,null)}}_n(o,S,Y,ce,Ce,R,w,!1);return;case"select":mr("invalid",o),m=R=S=null;for(w in g)if(g.hasOwnProperty(w)&&(Y=g[w],Y!=null))switch(w){case"value":S=Y;break;case"defaultValue":R=Y;break;case"multiple":m=Y;default:Kr(o,c,w,Y,g,null)}c=S,g=R,o.multiple=!!m,c!=null?Bn(o,!!m,c,!1):g!=null&&Bn(o,!!m,g,!0);return;case"textarea":mr("invalid",o),S=w=m=null;for(R in g)if(g.hasOwnProperty(R)&&(Y=g[R],Y!=null))switch(R){case"value":m=Y;break;case"defaultValue":w=Y;break;case"children":S=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:Kr(o,c,R,Y,g,null)}no(o,m,w,S);return;case"option":for(ce in g)if(g.hasOwnProperty(ce)&&(m=g[ce],m!=null))switch(ce){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Kr(o,c,ce,m,g,null)}return;case"dialog":mr("beforetoggle",o),mr("toggle",o),mr("cancel",o),mr("close",o);break;case"iframe":case"object":mr("load",o);break;case"video":case"audio":for(m=0;m<ph.length;m++)mr(ph[m],o);break;case"image":mr("error",o),mr("load",o);break;case"details":mr("toggle",o);break;case"embed":case"source":case"link":mr("error",o),mr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in g)if(g.hasOwnProperty(Ce)&&(m=g[Ce],m!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Kr(o,c,Ce,m,g,null)}return;default:if(Ns(c)){for(Oe in g)g.hasOwnProperty(Oe)&&(m=g[Oe],m!==void 0&&mx(o,c,Oe,m,g,void 0));return}}for(Y in g)g.hasOwnProperty(Y)&&(m=g[Y],m!=null&&Kr(o,c,Y,m,g,null))}function _j(o,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,R=null,Y=null,ce=null,Ce=null,Oe=null;for(Pe in g){var ze=g[Pe];if(g.hasOwnProperty(Pe)&&ze!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":ce=ze;default:m.hasOwnProperty(Pe)||Kr(o,c,Pe,null,m,ze)}}for(var Ne in m){var Pe=m[Ne];if(ze=g[Ne],m.hasOwnProperty(Ne)&&(Pe!=null||ze!=null))switch(Ne){case"type":S=Pe;break;case"name":w=Pe;break;case"checked":Ce=Pe;break;case"defaultChecked":Oe=Pe;break;case"value":R=Pe;break;case"defaultValue":Y=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,c));break;default:Pe!==ze&&Kr(o,c,Ne,Pe,m,ze)}}ro(o,R,Y,ce,Ce,Oe,S,w);return;case"select":Pe=R=Y=Ne=null;for(S in g)if(ce=g[S],g.hasOwnProperty(S)&&ce!=null)switch(S){case"value":break;case"multiple":Pe=ce;default:m.hasOwnProperty(S)||Kr(o,c,S,null,m,ce)}for(w in m)if(S=m[w],ce=g[w],m.hasOwnProperty(w)&&(S!=null||ce!=null))switch(w){case"value":Ne=S;break;case"defaultValue":Y=S;break;case"multiple":R=S;default:S!==ce&&Kr(o,c,w,S,m,ce)}c=Y,g=R,m=Pe,Ne!=null?Bn(o,!!g,Ne,!1):!!m!=!!g&&(c!=null?Bn(o,!!g,c,!0):Bn(o,!!g,g?[]:"",!1));return;case"textarea":Pe=Ne=null;for(Y in g)if(w=g[Y],g.hasOwnProperty(Y)&&w!=null&&!m.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Kr(o,c,Y,null,m,w)}for(R in m)if(w=m[R],S=g[R],m.hasOwnProperty(R)&&(w!=null||S!=null))switch(R){case"value":Ne=w;break;case"defaultValue":Pe=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:w!==S&&Kr(o,c,R,w,m,S)}As(o,Ne,Pe);return;case"option":for(var yt in g)if(Ne=g[yt],g.hasOwnProperty(yt)&&Ne!=null&&!m.hasOwnProperty(yt))switch(yt){case"selected":o.selected=!1;break;default:Kr(o,c,yt,null,m,Ne)}for(ce in m)if(Ne=m[ce],Pe=g[ce],m.hasOwnProperty(ce)&&Ne!==Pe&&(Ne!=null||Pe!=null))switch(ce){case"selected":o.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol";break;default:Kr(o,c,ce,Ne,m,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qt in g)Ne=g[qt],g.hasOwnProperty(qt)&&Ne!=null&&!m.hasOwnProperty(qt)&&Kr(o,c,qt,null,m,Ne);for(Ce in m)if(Ne=m[Ce],Pe=g[Ce],m.hasOwnProperty(Ce)&&Ne!==Pe&&(Ne!=null||Pe!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(n(137,c));break;default:Kr(o,c,Ce,Ne,m,Pe)}return;default:if(Ns(c)){for(var Xr in g)Ne=g[Xr],g.hasOwnProperty(Xr)&&Ne!==void 0&&!m.hasOwnProperty(Xr)&&mx(o,c,Xr,void 0,m,Ne);for(Oe in m)Ne=m[Oe],Pe=g[Oe],!m.hasOwnProperty(Oe)||Ne===Pe||Ne===void 0&&Pe===void 0||mx(o,c,Oe,Ne,m,Pe);return}}for(var me in g)Ne=g[me],g.hasOwnProperty(me)&&Ne!=null&&!m.hasOwnProperty(me)&&Kr(o,c,me,null,m,Ne);for(ze in m)Ne=m[ze],Pe=g[ze],!m.hasOwnProperty(ze)||Ne===Pe||Ne==null&&Pe==null||Kr(o,c,ze,Ne,m,Pe)}function eC(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Aj(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,g=performance.getEntriesByType("resource"),m=0;m<g.length;m++){var w=g[m],S=w.transferSize,R=w.initiatorType,Y=w.duration;if(S&&Y&&eC(R)){for(R=0,Y=w.responseEnd,m+=1;m<g.length;m++){var ce=g[m],Ce=ce.startTime;if(Ce>Y)break;var Oe=ce.transferSize,ze=ce.initiatorType;Oe&&eC(ze)&&(ce=ce.responseEnd,R+=Oe*(ce<Y?1:(Y-Ce)/(ce-Ce)))}if(--m,c+=8*(S+R)/(w.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var yx=null,bx=null;function wf(o){return o.nodeType===9?o:o.ownerDocument}function tC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rC(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function xx(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vx=null;function Nj(){var o=window.event;return o&&o.type==="popstate"?o===vx?!1:(vx=o,!0):(vx=null,!1)}var nC=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,aC=typeof Promise=="function"?Promise:void 0,Pj=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(o){return aC.resolve(null).then(o).catch(Rj)}:nC;function Rj(o){setTimeout(function(){throw o})}function cl(o){return o==="head"}function iC(o,c){var g=c,m=0;do{var w=g.nextSibling;if(o.removeChild(g),w&&w.nodeType===8)if(g=w.data,g==="/$"||g==="/&"){if(m===0){o.removeChild(w),Cu(c);return}m--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")m++;else if(g==="html")fh(o.ownerDocument.documentElement);else if(g==="head"){g=o.ownerDocument.head,fh(g);for(var S=g.firstChild;S;){var R=S.nextSibling,Y=S.nodeName;S[gt]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&S.rel.toLowerCase()==="stylesheet"||g.removeChild(S),S=R}}else g==="body"&&fh(o.ownerDocument.body);g=w}while(g);Cu(c)}function sC(o,c){var g=o;o=0;do{var m=g.nextSibling;if(g.nodeType===1?c?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(c?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),m&&m.nodeType===8)if(g=m.data,g==="/$"){if(o===0)break;o--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||o++;g=m}while(g)}function wx(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":wx(g),he(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}o.removeChild(g)}}function Ij(o,c,g,m){for(;o.nodeType===1;){var w=g;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[gt])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=Hi(o.nextSibling),o===null)break}return null}function Dj(o,c,g){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!g||(o=Hi(o.nextSibling),o===null))return null;return o}function oC(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Hi(o.nextSibling),o===null))return null;return o}function Sx(o){return o.data==="$?"||o.data==="$~"}function Tx(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Mj(o,c){var g=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||g.readyState!=="loading")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Hi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var kx=null;function lC(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="/$"||g==="/&"){if(c===0)return Hi(o.nextSibling);c--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||c++}o=o.nextSibling}return null}function cC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(c===0)return o;c--}else g!=="/$"&&g!=="/&"||c++}o=o.previousSibling}return null}function uC(o,c,g){switch(c=wf(g),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function fh(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);he(o)}var Gi=new Map,dC=new Set;function Sf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ko=G.d;G.d={f:Oj,r:jj,D:Bj,C:Fj,L:zj,m:Uj,X:qj,S:$j,M:Hj};function Oj(){var o=ko.f(),c=pf();return o||c}function jj(o){var c=ct(o);c!==null&&c.tag===5&&c.type==="form"?Ak(c):ko.r(o)}var Tu=typeof document>"u"?null:document;function hC(o,c,g){var m=Tu;if(m&&typeof c=="string"&&c){var w=pa(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof g=="string"&&(w+='[crossorigin="'+g+'"]'),dC.has(w)||(dC.add(w),o={rel:o,crossOrigin:g,href:c},m.querySelector(w)===null&&(c=m.createElement("link"),Ta(c,"link",o),Jt(c),m.head.appendChild(c)))}}function Bj(o){ko.D(o),hC("dns-prefetch",o,null)}function Fj(o,c){ko.C(o,c),hC("preconnect",o,c)}function zj(o,c,g){ko.L(o,c,g);var m=Tu;if(m&&o&&c){var w='link[rel="preload"][as="'+pa(c)+'"]';c==="image"&&g&&g.imageSrcSet?(w+='[imagesrcset="'+pa(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(w+='[imagesizes="'+pa(g.imageSizes)+'"]')):w+='[href="'+pa(o)+'"]';var S=w;switch(c){case"style":S=ku(o);break;case"script":S=Eu(o)}Gi.has(S)||(o=f({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:o,as:c},g),Gi.set(S,o),m.querySelector(w)!==null||c==="style"&&m.querySelector(mh(S))||c==="script"&&m.querySelector(yh(S))||(c=m.createElement("link"),Ta(c,"link",o),Jt(c),m.head.appendChild(c)))}}function Uj(o,c){ko.m(o,c);var g=Tu;if(g&&o){var m=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+pa(m)+'"][href="'+pa(o)+'"]',S=w;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Eu(o)}if(!Gi.has(S)&&(o=f({rel:"modulepreload",href:o},c),Gi.set(S,o),g.querySelector(w)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(yh(S)))return}m=g.createElement("link"),Ta(m,"link",o),Jt(m),g.head.appendChild(m)}}}function $j(o,c,g){ko.S(o,c,g);var m=Tu;if(m&&o){var w=jr(m).hoistableStyles,S=ku(o);c=c||"default";var R=w.get(S);if(!R){var Y={loading:0,preload:null};if(R=m.querySelector(mh(S)))Y.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":c},g),(g=Gi.get(S))&&Ex(o,g);var ce=R=m.createElement("link");Jt(ce),Ta(ce,"link",o),ce._p=new Promise(function(Ce,Oe){ce.onload=Ce,ce.onerror=Oe}),ce.addEventListener("load",function(){Y.loading|=1}),ce.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Tf(R,c,m)}R={type:"stylesheet",instance:R,count:1,state:Y},w.set(S,R)}}}function qj(o,c){ko.X(o,c);var g=Tu;if(g&&o){var m=jr(g).hoistableScripts,w=Eu(o),S=m.get(w);S||(S=g.querySelector(yh(w)),S||(o=f({src:o,async:!0},c),(c=Gi.get(w))&&Cx(o,c),S=g.createElement("script"),Jt(S),Ta(S,"link",o),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(w,S))}}function Hj(o,c){ko.M(o,c);var g=Tu;if(g&&o){var m=jr(g).hoistableScripts,w=Eu(o),S=m.get(w);S||(S=g.querySelector(yh(w)),S||(o=f({src:o,async:!0,type:"module"},c),(c=Gi.get(w))&&Cx(o,c),S=g.createElement("script"),Jt(S),Ta(S,"link",o),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(w,S))}}function pC(o,c,g,m){var w=(w=ae.current)?Sf(w):null;if(!w)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=ku(g.href),g=jr(w).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){o=ku(g.href);var S=jr(w).hoistableStyles,R=S.get(o);if(R||(w=w.ownerDocument||w,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,R),(S=w.querySelector(mh(o)))&&!S._p&&(R.instance=S,R.state.loading=5),Gi.has(o)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gi.set(o,g),S||Gj(w,o,g,R.state))),c&&m===null)throw Error(n(528,""));return R}if(c&&m!==null)throw Error(n(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Eu(g),g=jr(w).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function ku(o){return'href="'+pa(o)+'"'}function mh(o){return'link[rel="stylesheet"]['+o+"]"}function gC(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function Gj(o,c,g,m){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=o.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Ta(c,"link",g),Jt(c),o.head.appendChild(c))}function Eu(o){return'[src="'+pa(o)+'"]'}function yh(o){return"script[async]"+o}function fC(o,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=o.querySelector('style[data-href~="'+pa(g.href)+'"]');if(m)return c.instance=m,Jt(m),m;var w=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Jt(m),Ta(m,"style",w),Tf(m,g.precedence,o),c.instance=m;case"stylesheet":w=ku(g.href);var S=o.querySelector(mh(w));if(S)return c.state.loading|=4,c.instance=S,Jt(S),S;m=gC(g),(w=Gi.get(w))&&Ex(m,w),S=(o.ownerDocument||o).createElement("link"),Jt(S);var R=S;return R._p=new Promise(function(Y,ce){R.onload=Y,R.onerror=ce}),Ta(S,"link",m),c.state.loading|=4,Tf(S,g.precedence,o),c.instance=S;case"script":return S=Eu(g.src),(w=o.querySelector(yh(S)))?(c.instance=w,Jt(w),w):(m=g,(w=Gi.get(S))&&(m=f({},g),Cx(m,w)),o=o.ownerDocument||o,w=o.createElement("script"),Jt(w),Ta(w,"link",m),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Tf(m,g.precedence,o));return c.instance}function Tf(o,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=m.length?m[m.length-1]:null,S=w,R=0;R<m.length;R++){var Y=m[R];if(Y.dataset.precedence===c)S=Y;else if(S!==w)break}S?S.parentNode.insertBefore(o,S.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(o,c.firstChild))}function Ex(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Cx(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var kf=null;function mC(o,c,g){if(kf===null){var m=new Map,w=kf=new Map;w.set(g,m)}else w=kf,m=w.get(g),m||(m=new Map,w.set(g,m));if(m.has(o))return m;for(m.set(o,null),g=g.getElementsByTagName(o),w=0;w<g.length;w++){var S=g[w];if(!(S[gt]||S[en]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var R=S.getAttribute(c)||"";R=o+R;var Y=m.get(R);Y?Y.push(S):m.set(R,[S])}}return m}function yC(o,c,g){o=o.ownerDocument||o,o.head.insertBefore(g,c==="title"?o.querySelector("head > title"):null)}function Wj(o,c,g){if(g===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function bC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Vj(o,c,g,m){if(g.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var w=ku(m.href),S=c.querySelector(mh(w));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=Ef.bind(o),c.then(o,o)),g.state.loading|=4,g.instance=S,Jt(S);return}S=c.ownerDocument||c,m=gC(m),(w=Gi.get(w))&&Ex(m,w),S=S.createElement("link"),Jt(S);var R=S;R._p=new Promise(function(Y,ce){R.onload=Y,R.onerror=ce}),Ta(S,"link",m),g.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(o.count++,g=Ef.bind(o),c.addEventListener("load",g),c.addEventListener("error",g))}}var _x=0;function Yj(o,c){return o.stylesheets&&o.count===0&&_f(o,o.stylesheets),0<o.count||0<o.imgCount?function(g){var m=setTimeout(function(){if(o.stylesheets&&_f(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+c);0<o.imgBytes&&_x===0&&(_x=62500*Aj());var w=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&_f(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>_x?50:800)+c);return o.unsuspend=g,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(w)}}:null}function Ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_f(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Cf=null;function _f(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Cf=new Map,c.forEach(Qj,o),Cf=null,Ef.call(o))}function Qj(o,c){if(!(c.state.loading&4)){var g=Cf.get(o);if(g)var m=g.get(null);else{g=new Map,Cf.set(o,g);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var R=w[S];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(g.set(R.dataset.precedence,R),m=R)}m&&g.set(null,m)}w=c.instance,R=w.getAttribute("data-precedence"),S=g.get(R)||m,S===m&&g.set(null,w),g.set(R,w),this.count++,m=Ef.bind(this),w.addEventListener("load",m),w.addEventListener("error",m),S?S.parentNode.insertBefore(w,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var bh={$$typeof:A,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Kj(o,c,g,m,w,S,R,Y,ce){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.hiddenUpdates=Or(null),this.identifierPrefix=m,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function xC(o,c,g,m,w,S,R,Y,ce,Ce,Oe,ze){return o=new Kj(o,c,g,R,ce,Ce,Oe,ze,Y),c=1,S===!0&&(c|=24),S=wi(3,null,null,c),o.current=S,S.stateNode=o,c=sb(),c.refCount++,o.pooledCache=c,c.refCount++,S.memoizedState={element:m,isDehydrated:g,cache:c},ub(S),o}function vC(o){return o?(o=ru,o):ru}function wC(o,c,g,m,w,S){w=vC(w),m.context===null?m.context=w:m.pendingContext=w,m=Jo(c),m.payload={element:g},S=S===void 0?null:S,S!==null&&(m.callback=S),g=Zo(o,m,c),g!==null&&(ii(g,o,c),Kd(g,o,c))}function SC(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var g=o.retryLane;o.retryLane=g!==0&&g<c?g:c}}function Ax(o,c){SC(o,c),(o=o.alternate)&&SC(o,c)}function TC(o){if(o.tag===13||o.tag===31){var c=$l(o,67108864);c!==null&&ii(c,o,67108864),Ax(o,67108864)}}function kC(o){if(o.tag===13||o.tag===31){var c=Ci();c=rr(c);var g=$l(o,c);g!==null&&ii(g,o,c),Ax(o,c)}}var Af=!0;function Xj(o,c,g,m){var w=I.T;I.T=null;var S=G.p;try{G.p=2,Nx(o,c,g,m)}finally{G.p=S,I.T=w}}function Jj(o,c,g,m){var w=I.T;I.T=null;var S=G.p;try{G.p=8,Nx(o,c,g,m)}finally{G.p=S,I.T=w}}function Nx(o,c,g,m){if(Af){var w=Lx(m);if(w===null)fx(o,c,m,Nf,g),CC(o,m);else if(eB(w,o,c,g,m))m.stopPropagation();else if(CC(o,m),c&4&&-1<Zj.indexOf(o)){for(;w!==null;){var S=ct(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var R=nn(S.pendingLanes);if(R!==0){var Y=S;for(Y.pendingLanes|=2,Y.entangledLanes|=2;R;){var ce=1<<31-tr(R);Y.entanglements[1]|=ce,R&=~ce}Ds(S),(Br&6)===0&&(df=ft()+500,hh(0))}}break;case 31:case 13:Y=$l(S,2),Y!==null&&ii(Y,S,2),pf(),Ax(S,2)}if(S=Lx(m),S===null&&fx(o,c,m,Nf,g),S===w)break;w=S}w!==null&&m.stopPropagation()}else fx(o,c,m,null,g)}}function Lx(o){return o=Qt(o),Px(o)}var Nf=null;function Px(o){if(Nf=null,o=Ue(o),o!==null){var c=i(o);if(c===null)o=null;else{var g=c.tag;if(g===13){if(o=s(c),o!==null)return o;o=null}else if(g===31){if(o=l(c),o!==null)return o;o=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Nf=o,null}function EC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ur()){case re:return 2;case we:return 8;case Ze:case et:return 32;case pt:return 268435456;default:return 32}default:return 32}}var Rx=!1,ul=null,dl=null,hl=null,xh=new Map,vh=new Map,pl=[],Zj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CC(o,c){switch(o){case"focusin":case"focusout":ul=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":hl=null;break;case"pointerover":case"pointerout":xh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(c.pointerId)}}function wh(o,c,g,m,w,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:S,targetContainers:[w]},c!==null&&(c=ct(c),c!==null&&TC(c)),o):(o.eventSystemFlags|=m,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function eB(o,c,g,m,w){switch(c){case"focusin":return ul=wh(ul,o,c,g,m,w),!0;case"dragenter":return dl=wh(dl,o,c,g,m,w),!0;case"mouseover":return hl=wh(hl,o,c,g,m,w),!0;case"pointerover":var S=w.pointerId;return xh.set(S,wh(xh.get(S)||null,o,c,g,m,w)),!0;case"gotpointercapture":return S=w.pointerId,vh.set(S,wh(vh.get(S)||null,o,c,g,m,w)),!0}return!1}function _C(o){var c=Ue(o.target);if(c!==null){var g=i(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){o.blockedOn=c,ei(o.priority,function(){kC(g)});return}}else if(c===31){if(c=l(g),c!==null){o.blockedOn=c,ei(o.priority,function(){kC(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){o.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Lf(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var g=Lx(o.nativeEvent);if(g===null){g=o.nativeEvent;var m=new g.constructor(g.type,g);mt=m,g.target.dispatchEvent(m),mt=null}else return c=ct(g),c!==null&&TC(c),o.blockedOn=g,!1;c.shift()}return!0}function AC(o,c,g){Lf(o)&&g.delete(c)}function tB(){Rx=!1,ul!==null&&Lf(ul)&&(ul=null),dl!==null&&Lf(dl)&&(dl=null),hl!==null&&Lf(hl)&&(hl=null),xh.forEach(AC),vh.forEach(AC)}function Pf(o,c){o.blockedOn===c&&(o.blockedOn=null,Rx||(Rx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tB)))}var Rf=null;function NC(o){Rf!==o&&(Rf=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rf===o&&(Rf=null);for(var c=0;c<o.length;c+=3){var g=o[c],m=o[c+1],w=o[c+2];if(typeof m!="function"){if(Px(m||g)===null)continue;break}var S=ct(g);S!==null&&(o.splice(c,3),c-=3,Lb(S,{pending:!0,data:w,method:g.method,action:m},m,w))}}))}function Cu(o){function c(ce){return Pf(ce,o)}ul!==null&&Pf(ul,o),dl!==null&&Pf(dl,o),hl!==null&&Pf(hl,o),xh.forEach(c),vh.forEach(c);for(var g=0;g<pl.length;g++){var m=pl[g];m.blockedOn===o&&(m.blockedOn=null)}for(;0<pl.length&&(g=pl[0],g.blockedOn===null);)_C(g),g.blockedOn===null&&pl.shift();if(g=(o.ownerDocument||o).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var w=g[m],S=g[m+1],R=w[Fr]||null;if(typeof S=="function")R||NC(g);else if(R){var Y=null;if(S&&S.hasAttribute("formAction")){if(w=S,R=S[Fr]||null)Y=R.formAction;else if(Px(w)!==null)continue}else Y=R.action;typeof Y=="function"?g[m+1]=Y:(g.splice(m,3),m-=3),NC(g)}}}function LC(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(R){return w=R})},focusReset:"manual",scroll:"manual"})}function c(){w!==null&&(w(),w=null),m||setTimeout(g,20)}function g(){if(!m&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,w=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(g,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),w!==null&&(w(),w=null)}}}function Ix(o){this._internalRoot=o}If.prototype.render=Ix.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var g=c.current,m=Ci();wC(g,m,o,c,null,null)},If.prototype.unmount=Ix.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;wC(o.current,2,null,o,null,null),pf(),c[$a]=null}};function If(o){this._internalRoot=o}If.prototype.unstable_scheduleHydration=function(o){if(o){var c=fi();o={blockedOn:null,target:o,priority:c};for(var g=0;g<pl.length&&c!==0&&c<pl[g].priority;g++);pl.splice(g,0,o),g===0&&_C(o)}};var PC=t.version;if(PC!=="19.2.0")throw Error(n(527,PC,"19.2.0"));G.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(c),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var rB={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{hr=Df.inject(rB),cr=Df}catch{}}return Th.createRoot=function(o,c){if(!a(o))throw Error(n(299));var g=!1,m="",w=Bk,S=Fk,R=zk;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),c=xC(o,1,!1,null,null,g,m,null,w,S,R,LC),o[$a]=c.current,gx(o),new Ix(c)},Th.hydrateRoot=function(o,c,g){if(!a(o))throw Error(n(299));var m=!1,w="",S=Bk,R=Fk,Y=zk,ce=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(w=g.identifierPrefix),g.onUncaughtError!==void 0&&(S=g.onUncaughtError),g.onCaughtError!==void 0&&(R=g.onCaughtError),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError),g.formState!==void 0&&(ce=g.formState)),c=xC(o,1,!0,c,g??null,m,w,ce,S,R,Y,LC),c.context=vC(null),g=c.current,m=Ci(),m=rr(m),w=Jo(m),w.callback=null,Zo(g,w,m),g=m,c.current.lanes=g,Ar(c,g),Ds(c),o[$a]=c.current,gx(o),new If(c)},Th.version="19.2.0",Th}var UC;function dB(){if(UC)return Mx.exports;UC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mx.exports=uB(),Mx.exports}var hB=dB();const Kt=e=>typeof e=="string",kh=()=>{let e,t;const r=new Promise((n,a)=>{e=n,t=a});return r.resolve=e,r.reject=t,r},$C=e=>e==null?"":""+e,pB=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},gB=/###/g,qC=e=>e&&e.indexOf("###")>-1?e.replace(gB,"."):e,HC=e=>!e||Kt(e),pp=(e,t,r)=>{const n=Kt(t)?t.split("."):t;let a=0;for(;a<n.length-1;){if(HC(e))return{};const i=qC(n[a]);!e[i]&&r&&(e[i]=new r),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++a}return HC(e)?{}:{obj:e,k:qC(n[a])}},GC=(e,t,r)=>{const{obj:n,k:a}=pp(e,t,Object);if(n!==void 0||t.length===1){n[a]=r;return}let i=t[t.length-1],s=t.slice(0,t.length-1),l=pp(e,s,Object);for(;l.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),l=pp(e,s,Object),l?.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=r},fB=(e,t,r,n)=>{const{obj:a,k:i}=pp(e,t,Object);a[i]=a[i]||[],a[i].push(r)},Om=(e,t)=>{const{obj:r,k:n}=pp(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},mB=(e,t,r)=>{const n=Om(e,r);return n!==void 0?n:Om(t,r)},f3=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?Kt(e[n])||e[n]instanceof String||Kt(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):f3(e[n],t[n],r):e[n]=t[n]);return e},_u=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var yB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const bB=e=>Kt(e)?e.replace(/[&<>"'\/]/g,t=>yB[t]):e;class xB{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const vB=[" ",",","?","!",";"],wB=new xB(20),SB=(e,t,r)=>{t=t||"",r=r||"";const n=vB.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;const a=wB.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!a.test(e);if(!i){const s=e.indexOf(r);s>0&&!a.test(e.substring(0,s))&&(i=!0)}return i},Zv=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let a=e;for(let i=0;i<n.length;){if(!a||typeof a!="object")return;let s,l="";for(let u=i;u<n.length;++u)if(u!==i&&(l+=r),l+=n[u],s=a[l],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&u<n.length-1)continue;i+=u-i+1;break}a=s}return a},Pp=e=>e?.replace("_","-"),TB={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class jm{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||TB,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,a){return a&&!this.debug?null:(Kt(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new jm(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new jm(this.logger,t)}}var Gs=new jm;class j0{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(r)||0;this.observers[n].set(r,a+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a.apply(a,[t,...r])})}}class WC extends j0{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,a={}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,r],n&&(Array.isArray(n)?l.push(...n):Kt(n)&&i?l.push(...n.split(i)):l.push(n)));const u=Om(this.data,l);return!u&&!r&&!n&&t.indexOf(".")>-1&&(t=l[0],r=l[1],n=l.slice(2).join(".")),u||!s||!Kt(n)?u:Zv(this.data?.[t]?.[r],n,i)}addResource(t,r,n,a,i={silent:!1}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[t,r];n&&(l=l.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(l=t.split("."),a=r,r=l[1]),this.addNamespaces(r),GC(this.data,l,a),i.silent||this.emit("added",t,r,n,a)}addResources(t,r,n,a={silent:!1}){for(const i in n)(Kt(n[i])||Array.isArray(n[i]))&&this.addResource(t,r,i,n[i],{silent:!0});a.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,a,i,s={silent:!1,skipCopy:!1}){let l=[t,r];t.indexOf(".")>-1&&(l=t.split("."),a=n,n=r,r=l[1]),this.addNamespaces(r);let u=Om(this.data,l)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?f3(u,n,i):u={...u,...n},GC(this.data,l,u),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var m3={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,a){return e.forEach(i=>{t=this.processors[i]?.process(t,r,n,a)??t}),t}};const y3=Symbol("i18next/PATH_KEY");function kB(){const e=[],t=Object.create(null);let r;return t.get=(n,a)=>(r?.revoke?.(),a===y3?e:(e.push(a),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function ew(e,t){const{[y3]:r}=e(kB());return r.join(t?.keySeparator??".")}const VC={},zx=e=>!Kt(e)&&typeof e!="boolean"&&typeof e!="number";class Bm extends j0{constructor(t,r={}){super(),pB(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gs.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const a=this.resolve(t,n);if(a?.res===void 0)return!1;const i=zx(a.res);return!(n.returnObjects===!1&&i)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const s=n&&t.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!SB(t,n,a);if(s&&!l){const u=t.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:t,namespaces:Kt(i)?[i]:i};const h=t.split(n);(n!==a||n===a&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),t=h.join(a)}return{key:t,namespaces:Kt(i)?[i]:i}}translate(t,r,n){let a=typeof r=="object"?{...r}:r;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";typeof t=="function"&&(t=ew(t,{...this.options,...a})),Array.isArray(t)||(t=[String(t)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(t[t.length-1],a),h=u[u.length-1];let p=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const f=a.lng||this.language,y=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return y?i?{res:`${h}${p}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:`${h}${p}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:l;const b=this.resolve(t,a);let x=b?.res;const v=b?.usedKey||l,T=b?.exactUsedKey||l,k=["[object Number]","[object Function]","[object RegExp]"],C=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,P=a.count!==void 0&&!Kt(a.count),M=Bm.hasDefaultValue(a),L=P?this.pluralResolver.getSuffix(f,a.count,a):"",D=a.ordinal&&P?this.pluralResolver.getSuffix(f,a.count,{ordinal:!1}):"",q=P&&!a.ordinal&&a.count===0,Q=q&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${L}`]||a[`defaultValue${D}`]||a.defaultValue;let F=x;A&&!x&&M&&(F=Q);const K=zx(F),W=Object.prototype.toString.apply(F);if(A&&F&&K&&k.indexOf(W)<0&&!(Kt(C)&&Array.isArray(F))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,F,{...a,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(b.res=j,b.usedParams=this.getUsedParamsDetails(a),b):j}if(s){const j=Array.isArray(F),O=j?[]:{},$=j?T:v;for(const I in F)if(Object.prototype.hasOwnProperty.call(F,I)){const G=`${$}${s}${I}`;M&&!x?O[I]=this.translate(G,{...a,defaultValue:zx(Q)?Q[I]:void 0,joinArrays:!1,ns:u}):O[I]=this.translate(G,{...a,joinArrays:!1,ns:u}),O[I]===G&&(O[I]=F[I])}x=O}}else if(A&&Kt(C)&&Array.isArray(x))x=x.join(C),x&&(x=this.extendTranslation(x,t,a,n));else{let j=!1,O=!1;!this.isValidLookup(x)&&M&&(j=!0,x=Q),this.isValidLookup(x)||(O=!0,x=l);const I=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:x,G=M&&Q!==x&&this.options.updateMissing;if(O||j||G){if(this.logger.log(G?"updateKey":"missingKey",f,h,l,G?Q:x),s){const z=this.resolve(l,{...a,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let V=[];const oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(let z=0;z<oe.length;z++)V.push(oe[z]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(a.lng||this.language):V.push(a.lng||this.language);const U=(z,ie,H)=>{const ue=M&&H!==x?H:I;this.options.missingKeyHandler?this.options.missingKeyHandler(z,h,ie,ue,G,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(z,h,ie,ue,G,a),this.emit("missingKey",z,h,ie,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?V.forEach(z=>{const ie=this.pluralResolver.getSuffixes(z,a);q&&a[`defaultValue${this.options.pluralSeparator}zero`]&&ie.indexOf(`${this.options.pluralSeparator}zero`)<0&&ie.push(`${this.options.pluralSeparator}zero`),ie.forEach(H=>{U([z],l+H,a[`defaultValue${H}`]||Q)})}):U(V,l,Q))}x=this.extendTranslation(x,t,a,b,n),O&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${h}${p}${l}`),(O||j)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${l}`:l,j?x:void 0,a))}return i?(b.res=x,b.usedParams=this.getUsedParamsDetails(a),b):x}extendTranslation(t,r,n,a,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=Kt(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const f=t.match(this.interpolator.nestingRegexp);h=f&&f.length}let p=n.replace&&!Kt(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,n.lng||this.language||a.usedLng,n),u){const f=t.match(this.interpolator.nestingRegexp),y=f&&f.length;h<y&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>i?.[0]===f[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):this.translate(...f,r),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,l=Kt(s)?[s]:s;return t!=null&&l?.length&&n.applyPostProcessor!==!1&&(t=m3.handle(l,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,a,i,s,l;return Kt(t)&&(t=[t]),t.forEach(u=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(u,r),p=h.key;a=p;let f=h.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const y=r.count!==void 0&&!Kt(r.count),b=y&&!r.ordinal&&r.count===0,x=r.context!==void 0&&(Kt(r.context)||typeof r.context=="number")&&r.context!=="",v=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);f.forEach(T=>{this.isValidLookup(n)||(l=T,!VC[`${v[0]}-${T}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(VC[`${v[0]}-${T}`]=!0,this.logger.warn(`key "${a}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(k=>{if(this.isValidLookup(n))return;s=k;const C=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,p,k,T,r);else{let P;y&&(P=this.pluralResolver.getSuffix(k,r.count,r));const M=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(r.ordinal&&P.indexOf(L)===0&&C.push(p+P.replace(L,this.options.pluralSeparator)),C.push(p+P),b&&C.push(p+M)),x){const D=`${p}${this.options.contextSeparator||"_"}${r.context}`;C.push(D),y&&(r.ordinal&&P.indexOf(L)===0&&C.push(D+P.replace(L,this.options.pluralSeparator)),C.push(D+P),b&&C.push(D+M))}}let A;for(;A=C.pop();)this.isValidLookup(n)||(i=A,n=this.getResource(k,T,A,r))}))})}),{res:n,usedKey:a,exactUsedKey:i,usedLng:s,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,a):this.resourceStore.getResource(t,r,n,a)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Kt(t.replace);let a=n?t.replace:t;if(n&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const i of r)delete a[i]}return a}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class YC{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gs.create("languageUtils")}getScriptPartFromCode(t){if(t=Pp(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Pp(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Kt(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return r=a;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Kt(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),a=[],i=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Kt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):Kt(t)&&i(this.formatLanguageCode(t)),n.forEach(s=>{a.indexOf(s)<0&&i(this.formatLanguageCode(s))}),a}}const QC={zero:0,one:1,two:2,few:3,many:4,other:5},KC={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class EB{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Gs.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Pp(t==="dev"?"en":t),a=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),KC;if(!t.match(/-|_/))return KC;const u=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(u,r)}return this.pluralRulesCache[i]=s,s}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(a=>`${r}${a}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((a,i)=>QC[a]-QC[i]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,r,n={}){const a=this.getRule(t,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const XC=(e,t,r,n=".",a=!0)=>{let i=mB(e,t,r);return!i&&a&&Kt(r)&&(i=Zv(e,r,n),i===void 0&&(i=Zv(t,r,n))),i},Ux=e=>e.replace(/\$/g,"$$$$");class CB{constructor(t={}){this.logger=Gs.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:a,prefix:i,prefixEscaped:s,suffix:l,suffixEscaped:u,formatSeparator:h,unescapeSuffix:p,unescapePrefix:f,nestingPrefix:y,nestingPrefixEscaped:b,nestingSuffix:x,nestingSuffixEscaped:v,nestingOptionsSeparator:T,maxReplaces:k,alwaysFormat:C}=t.interpolation;this.escape=r!==void 0?r:bB,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?_u(i):s||"{{",this.suffix=l?_u(l):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?_u(y):b||_u("$t("),this.nestingSuffix=x?_u(x):v||_u(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=k||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,a){let i,s,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=b=>{if(b.indexOf(this.formatSeparator)<0){const k=XC(r,u,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(k,void 0,n,{...a,...r,interpolationkey:b}):k}const x=b.split(this.formatSeparator),v=x.shift().trim(),T=x.join(this.formatSeparator).trim();return this.format(XC(r,u,v,this.options.keySeparator,this.options.ignoreJSONStructure),T,n,{...a,...r,interpolationkey:v})};this.resetRegExp();const p=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>Ux(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?Ux(this.escape(b)):Ux(b)}].forEach(b=>{for(l=0;i=b.regex.exec(t);){const x=i[1].trim();if(s=h(x),s===void 0)if(typeof p=="function"){const T=p(t,i,a);s=Kt(T)?T:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))s="";else if(f){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),s="";else!Kt(s)&&!this.useRawValueToEscape&&(s=$C(s));const v=b.safeValue(s);if(t=t.replace(i[0],v),f?(b.regex.lastIndex+=s.length,b.regex.lastIndex-=i[0].length):b.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,r,n={}){let a,i,s;const l=(u,h)=>{const p=this.nestingOptionsSeparator;if(u.indexOf(p)<0)return u;const f=u.split(new RegExp(`${p}[ ]*{`));let y=`{${f[1]}`;u=f[0],y=this.interpolate(y,s);const b=y.match(/'/g),x=y.match(/"/g);((b?.length??0)%2===0&&!x||x.length%2!==0)&&(y=y.replace(/'/g,'"'));try{s=JSON.parse(y),h&&(s={...h,...s})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,v),`${u}${p}${y}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,u};for(;a=this.nestingRegexp.exec(t);){let u=[];s={...n},s=s.replace&&!Kt(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(h!==-1&&(u=a[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),a[1]=a[1].slice(0,h)),i=r(l.call(this,a[1].trim(),s),s),i&&a[0]===t&&!Kt(i))return i;Kt(i)||(i=$C(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),i=""),u.length&&(i=u.reduce((p,f)=>this.format(p,f,n.lng,{...n,interpolationkey:a[1].trim()}),i.trim())),t=t.replace(a[0],i),this.regexp.lastIndex=0}return t}}const _B=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);t==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(s=>{if(s){const[l,...u]=s.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),p=l.trim();r[p]||(r[p]=h),h==="false"&&(r[p]=!1),h==="true"&&(r[p]=!0),isNaN(h)||(r[p]=parseInt(h,10))}})}return{formatName:t,formatOptions:r}},JC=e=>{const t={};return(r,n,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const s=n+JSON.stringify(i);let l=t[s];return l||(l=e(Pp(n),a),t[s]=l),l(r)}},AB=e=>(t,r,n)=>e(Pp(r),n)(t);class NB{constructor(t={}){this.logger=Gs.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?JC:AB;this.formats={number:n((a,i)=>{const s=new Intl.NumberFormat(a,{...i});return l=>s.format(l)}),currency:n((a,i)=>{const s=new Intl.NumberFormat(a,{...i,style:"currency"});return l=>s.format(l)}),datetime:n((a,i)=>{const s=new Intl.DateTimeFormat(a,{...i});return l=>s.format(l)}),relativetime:n((a,i)=>{const s=new Intl.RelativeTimeFormat(a,{...i});return l=>s.format(l,i.range||"day")}),list:n((a,i)=>{const s=new Intl.ListFormat(a,{...i});return l=>s.format(l)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=JC(r)}format(t,r,n,a={}){const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(u=>u.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,u)=>{const{formatName:h,formatOptions:p}=_B(u);if(this.formats[h]){let f=l;try{const y=a?.formatParams?.[a.interpolationkey]||{},b=y.locale||y.lng||a.locale||a.lng||n;f=this.formats[h](l,b,{...p,...a,...y})}catch(y){this.logger.warn(y)}return f}else this.logger.warn(`there was no format function for ${h}`);return l},t)}}const LB=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class PB extends j0{constructor(t,r,n,a={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=Gs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,a.backend,a)}queueLoad(t,r,n,a){const i={},s={},l={},u={};return t.forEach(h=>{let p=!0;r.forEach(f=>{const y=`${h}|${f}`;!n.reload&&this.store.hasResourceBundle(h,f)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?s[y]===void 0&&(s[y]=!0):(this.state[y]=1,p=!1,s[y]===void 0&&(s[y]=!0),i[y]===void 0&&(i[y]=!0),u[f]===void 0&&(u[f]=!0)))}),p||(l[h]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(t,r,n){const a=t.split("|"),i=a[0],s=a[1];r&&this.emit("failedLoading",i,s,r),!r&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const l={};this.queue.forEach(u=>{fB(u.loaded,[i],s),LB(u,t),r&&u.errors.push(r),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{l[h]||(l[h]={});const p=u.loaded[h];p.length&&p.forEach(f=>{l[h][f]===void 0&&(l[h][f]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(t,r,n,a=0,i=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:a,wait:i,callback:s});return}this.readingCalls++;const l=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(h&&p&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,a+1,i*2,s)},i);return}s(h,p)},u=this.backend[n].bind(this.backend);if(u.length===2){try{const h=u(t,r);h&&typeof h.then=="function"?h.then(p=>l(null,p)).catch(l):l(null,h)}catch(h){l(h)}return}return u(t,r,l)}prepareLoading(t,r,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Kt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Kt(r)&&(r=[r]);const i=this.queueLoad(t,r,n,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),a=n[0],i=n[1];this.read(a,i,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${r}loading namespace ${i} for language ${a} failed`,s),!s&&l&&this.logger.log(`${r}loaded namespace ${i} for language ${a}`,l),this.loaded(t,s,l)})}saveMissing(t,r,n,a,i,s={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const u={...s,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let p;h.length===5?p=h(t,r,n,a,u):p=h(t,r,n,a),p&&typeof p.then=="function"?p.then(f=>l(null,f)).catch(l):l(null,p)}catch(p){l(p)}else h(t,r,n,a,l,u)}!t||!t[0]||this.store.addResource(t[0],r,n,a)}}}const ZC=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Kt(e[1])&&(t.defaultValue=e[1]),Kt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),e2=e=>(Kt(e.ns)&&(e.ns=[e.ns]),Kt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Kt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Mf=()=>{},RB=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Rp extends j0{constructor(t={},r){if(super(),this.options=e2(t),this.services={},this.logger=Gs,this.modules={external:[]},RB(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Kt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=ZC();this.options={...n,...this.options,...e2(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Gs.init(a(this.modules.logger),this.options):Gs.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=NB;const p=new YC(this.options);this.store=new WC(this.options.resources,this.options);const f=this.services;f.logger=Gs,f.resourceStore=this.store,f.languageUtils=p,f.pluralResolver=new EB(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=a(h),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new CB(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new PB(a(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(b,...x)=>{this.emit(b,...x)}),this.modules.languageDetector&&(f.languageDetector=a(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=a(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Bm(this.services,this.options),this.translator.on("*",(b,...x)=>{this.emit(b,...x)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Mf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const l=kh(),u=()=>{const h=(p,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(p,f)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(t,r=Mf){let n=r;const a=Kt(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],s=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&i.indexOf(h)<0&&i.push(h)})};a?s(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>s(u)),this.options.preload?.forEach?.(l=>s(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(t,r,n){const a=kh();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=Mf),this.services.backendConnector.reload(t,r,i=>{a.resolve(),n(i)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&m3.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=kh();this.emit("languageChanging",t);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,u)=>{u?this.isLanguageChangingTo===t&&(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),r&&r(l,(...h)=>this.t(...h))},s=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=Kt(l)?l:l&&l[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Kt(l)?[l]:l);h&&(this.language||a(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,p=>{i(p,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),n}getFixedT(t,r,n){const a=(i,s,...l)=>{let u;typeof s!="object"?u=this.options.overloadTranslationOptionHandler([i,s].concat(l)):u={...s},u.lng=u.lng||a.lng,u.lngs=u.lngs||a.lngs,u.ns=u.ns||a.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||n||a.keyPrefix);const h=this.options.keySeparator||".";let p;return u.keyPrefix&&Array.isArray(i)?p=i.map(f=>(typeof f=="function"&&(f=ew(f,{...this.options,...s})),`${u.keyPrefix}${h}${f}`)):(typeof i=="function"&&(i=ew(i,{...this.options,...s})),p=u.keyPrefix?`${u.keyPrefix}${h}${i}`:i),this.t(p,u)};return Kt(t)?a.lng=t:a.lngs=t,a.ns=r,a.keyPrefix=n,a}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(l,u)=>{const h=this.services.backendConnector.state[`${l}|${u}`];return h===-1||h===0||h===2};if(r.precheck){const l=r.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!a||s(i,t)))}loadNamespaces(t,r){const n=kh();return this.options.ns?(Kt(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),r&&r(a)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=kh();Kt(t)&&(t=[t]);const a=this.options.preload||[],i=t.filter(s=>a.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=a.concat(i),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const a=new Intl.Locale(t);if(a&&a.getTextInfo){const i=a.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new YC(ZC());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new Rp(t,r)}cloneInstance(t={},r=Mf){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},i=new Rp(a);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const l=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((p,f)=>(p[f]={...u[h][f]},p),u[h]),u),{});i.store=new WC(l,a),i.services.resourceStore=i.store}return i.translator=new Bm(i.services,a),i.translator.on("*",(l,...u)=>{i.emit(l,...u)}),i.init(a,r),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Oa=Rp.createInstance();Oa.createInstance=Rp.createInstance;Oa.createInstance;Oa.dir;Oa.init;Oa.loadResources;Oa.reloadResources;Oa.use;Oa.changeLanguage;Oa.getFixedT;Oa.t;Oa.exists;Oa.setDefaultNamespace;Oa.hasLoadedNamespace;Oa.loadNamespaces;Oa.loadLanguages;var _=eg();const dr=Ic(_),IB=(e,t,r,n)=>{const a=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);wc(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...a):console?.warn&&console.warn(...a)},t2={},b3=(e,t,r,n)=>{wc(r)&&t2[r]||(wc(r)&&(t2[r]=new Date),IB(e,t,r,n))},x3=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},tw=(e,t,r)=>{e.loadNamespaces(t,x3(e,r))},r2=(e,t,r,n)=>{if(wc(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return tw(e,r,n);r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,x3(e,n))},DB=(e,t,r={})=>!t.languages||!t.languages.length?(b3(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}),wc=e=>typeof e=="string",MB=e=>typeof e=="object"&&e!==null,OB=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,jB={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},BB=e=>jB[e],FB=e=>e.replace(OB,BB);let rw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:FB};const zB=(e={})=>{rw={...rw,...e}},UB=()=>rw;let v3;const $B=e=>{v3=e},qB=()=>v3,HB={type:"3rdParty",init(e){zB(e.options.react),$B(e)}},GB=_.createContext();class WB{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var $x={exports:{}},qx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n2;function VB(){if(n2)return qx;n2=1;var e=eg();function t(f,y){return f===y&&(f!==0||1/f===1/y)||f!==f&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function l(f,y){var b=y(),x=n({inst:{value:b,getSnapshot:y}}),v=x[0].inst,T=x[1];return i(function(){v.value=b,v.getSnapshot=y,u(v)&&T({inst:v})},[f,b,y]),a(function(){return u(v)&&T({inst:v}),f(function(){u(v)&&T({inst:v})})},[f]),s(b),b}function u(f){var y=f.getSnapshot;f=f.value;try{var b=y();return!r(f,b)}catch{return!0}}function h(f,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return qx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,qx}var a2;function YB(){return a2||(a2=1,$x.exports=VB()),$x.exports}var QB=YB();const KB=(e,t)=>wc(t)?t:MB(t)&&wc(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,XB={t:KB,ready:!1},JB=()=>()=>{},wd=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:a}=_.useContext(GB)||{},i=r||n||qB();i&&!i.reportNamespaces&&(i.reportNamespaces=new WB),i||b3(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=_.useMemo(()=>({...UB(),...i?.options?.react,...t}),[i,t]),{useSuspense:l,keyPrefix:u}=s,h=_.useMemo(()=>{const A=a||i?.options?.defaultNS;return wc(A)?[A]:A||["translation"]},[e,a,i]);i?.reportNamespaces?.addUsedNamespaces?.(h);const p=_.useCallback(A=>{if(!i)return JB;const{bindI18n:P,bindI18nStore:M}=s;return P&&i.on(P,A),M&&i.store.on(M,A),()=>{P&&P.split(" ").forEach(L=>i.off(L,A)),M&&M.split(" ").forEach(L=>i.store.off(L,A))}},[i,s]),f=_.useRef(),y=_.useCallback(()=>{if(!i)return XB;const A=!!(i.isInitialized||i.initializedStoreOnce)&&h.every(D=>DB(D,i,s)),P=i.getFixedT(t.lng||i.language,s.nsMode==="fallback"?h:h[0],u),M=f.current;if(M&&M.ready===A&&M.lng===(t.lng||i.language)&&M.keyPrefix===u)return M;const L={t:P,ready:A,lng:t.lng||i.language,keyPrefix:u};return f.current=L,L},[i,h,u,s,t.lng]),[b,x]=_.useState(0),{t:v,ready:T}=QB.useSyncExternalStore(p,y,y);_.useEffect(()=>{if(i&&!T&&!l){const A=()=>x(P=>P+1);t.lng?r2(i,t.lng,h,A):tw(i,h,A)}},[i,t.lng,h,T,l,b]);const k=i||{},C=_.useMemo(()=>{const A=[v,k,T];return A.t=v,A.i18n=k,A.ready=T,A},[v,k,T]);if(i&&l&&!T)throw new Promise(A=>{const P=()=>A();t.lng?r2(i,t.lng,h,P):tw(i,h,P)});return C},{slice:ZB,forEach:eF}=[];function tF(e){return eF.call(ZB.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function rF(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const i2=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,nF=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(t);let i=`${e}=${a}`;if(n.maxAge>0){const s=n.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(s)}`}if(n.domain){if(!i2.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!i2.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},s2={create(e,t,r,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+r*60*1e3)),n&&(a.domain=n),document.cookie=nF(e,t,a)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let a=r[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var aF={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return s2.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:a,cookieOptions:i}=t;r&&typeof document<"u"&&s2.create(r,e,n,a,i)}},iF={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const i=n.substring(1).split("&");for(let s=0;s<i.length;s++){const l=i[s].indexOf("=");l>0&&i[s].substring(0,l)===t&&(r=i[s].substring(l+1))}}return r}},sF={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const i=a.substring(1);if(t){const s=i.split("&");for(let l=0;l<s.length;l++){const u=s[l].indexOf("=");u>0&&s[l].substring(0,u)===t&&(n=s[l].substring(u+1))}}if(n)return n;if(!n&&r>-1){const s=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let Au=null;const o2=()=>{if(Au!==null)return Au;try{if(Au=typeof window<"u"&&window.localStorage!==null,!Au)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Au=!1}return Au};var oF={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&o2())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&o2()&&window.localStorage.setItem(r,e)}};let Nu=null;const l2=()=>{if(Nu!==null)return Nu;try{if(Nu=typeof window<"u"&&window.sessionStorage!==null,!Nu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Nu=!1}return Nu};var lF={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&l2())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&l2()&&window.sessionStorage.setItem(r,e)}},cF={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:a}=navigator;if(r)for(let i=0;i<r.length;i++)t.push(r[i]);n&&t.push(n),a&&t.push(a)}return t.length>0?t:void 0}},uF={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},dF={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},hF={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let w3=!1;try{document.cookie,w3=!0}catch{}const S3=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];w3||S3.splice(1,1);const pF=()=>({order:S3,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class T3{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=tF(r,this.options||{},pF()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(aF),this.addDetector(iF),this.addDetector(oF),this.addDetector(lF),this.addDetector(cF),this.addDetector(uF),this.addDetector(dF),this.addDetector(hF),this.addDetector(sF)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let a=this.detectors[n].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(r=r.concat(a))}}),r=r.filter(n=>n!=null&&!rF(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}T3.type="languageDetector";const gF={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",clear:"Clear",search:"Search",filter:"Filter",export:"Export",import:"Import",download:"Download",upload:"Upload",copy:"Copy",paste:"Paste",cut:"Cut",undo:"Undo",redo:"Redo",select:"Select",selectAll:"Select All",deselectAll:"Deselect All"},fF={signIn:"Sign in with Google",signOut:"Sign Out",authRequired:"Authentication is required to use this application",tokenExpired:"Your session has expired. Please sign in again.",welcomeBack:"Welcome back!",signInPrompt:"Sign in to continue",signInRequired:"You must sign in to use this feature",signingIn:"Signing in...",signingOut:"Signing out...",researchAgent:"Research Agent",tagline:"AI-powered research assistant",secureAuth:"Secure authentication powered by Google",whyChooseTitle:"Why Choose Research Agent?",whyChooseIntro:"Unlike standard AI chatbots that simply answer questions, Research Agent is your comprehensive research companion built for deep investigation and knowledge building.",keyAdvantagesTitle:"Key Advantages:",webConnected:"Web-Connected Intelligence",webConnectedDesc:"Real-time web search and content extraction ensure you get current, accurate information—not outdated training data",multiTool:"Multi-Tool Orchestration",multiToolDesc:"Seamlessly combines web search, code execution, YouTube transcripts, image generation, and document analysis in a single conversation",knowledgeBase:"Knowledge Base Integration",knowledgeBaseDesc:"Save findings to your personal knowledge base, create snippets, and build comprehensive research documents over time",advancedPlanning:"Advanced Planning",advancedPlanningDesc:"Generate structured research plans with expert personas, search strategies, and methodological approaches",costEffective:"Smart Model Selection",costEffectiveDesc:"Automatic selection of models that do the job economically or powerfully based on selection strategy. Bring your own keys to save 25%",transparency:"Full Transparency",transparencyDesc:"Track every API call, token usage, and cost in real-time billing dashboard",perfectFor:"Perfect for: Academic research, market analysis, content creation, technical documentation, competitive intelligence, and any task requiring thorough investigation."},mF={placeholder:"Type your message here...",send:"Send",retry:"Retry",stop:"Stop",thinking:"Thinking...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"Edit",delete:"Delete",copy:"Copy",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Select All",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},yF={title:"Research Planning",query:"Research Query",generatePlan:"Generate Plan",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},bF={title:"Settings",language:"Language",selectLanguage:"Select Language",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",serverProviders:"Server Providers",serverProvidersDescription:"View available providers configured on the server and their capabilities",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"Voice",tts:"TTS",rag:"RAG",images:"Images"},images:{title:"Image Generation Settings",description:"Configure default image generation quality and size preferences. These settings apply when quality is not explicitly requested.",quality:{label:"Default Image Quality",description:"Higher quality images cost more. Fast is recommended for most use cases (<$0.001 per image).",fast:"Fast (draft, sketch, <$0.001) - Recommended",standard:"Standard (illustrations, $0.001-0.002)",high:"High (detailed, artistic, $0.02-0.04)",ultra:"Ultra (photorealistic, 4k, $0.08-0.12)"},size:{label:"Default Image Size",description:"Choose the default aspect ratio for generated images. Larger sizes may cost more."}},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},xF={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},vF={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},wF={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},SF={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},TF={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},kF={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},EF={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},CF={title:"Feed",generateFeed:"Generate Feed",generating:"Generating content...",refresh:"Refresh",noItems:"No items yet",emptyMessage:"Your personalized feed will appear here",emptySubMessage:"We'll generate content based on your saved snippets and interests",didYouKnow:"Did You Know",questionAnswer:"Q&A",stash:"Grab",stashed:"Grabbed",trash:"Trash",quiz:"Quiz",swipeLeft:"Swipe left to trash",swipeRight:"Swipe right to grab",showMore:"Show more",showLess:"Show less",sources:"Sources",topics:"Topics",settings:{title:"Feed Settings",searchTerms:"Search Terms",searchTermsDesc:"Define up to 5 search topics to personalize your feed",addTerm:"Add Term",removeTerm:"Remove",maxTerms:"Maximum 5 search terms allowed",termExists:"This search term already exists",placeholder:"e.g., 'artificial intelligence', 'climate news'",learnedPreferences:"Learned Preferences",likedTopics:"Liked Topics",dislikedTopics:"Disliked Topics",stashToLearn:"Grab items to help the feed learn what you like",trashToLearn:"Trash items to help the feed learn what to avoid",tips:"💡 Tips for Better Feeds",tipSpecific:'Be specific with search terms (e.g., "quantum computing" vs "technology")',tipStash:"Grab items you find interesting to refine future recommendations",tipTrash:"Trash irrelevant items to improve content quality",tipMix:"Mix broad and specific topics for variety"}},_F={title:"Quiz",subtitle:"Track your learning progress and quiz performance",startQuiz:"Start Quiz",nextQuestion:"Next Question",previousQuestion:"Previous",submitAnswer:"Submit Answer",viewResults:"View Results",retakeQuiz:"Retake Quiz",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Question",of:"of",yourAnswer:"Your answer",correctAnswer:"Correct answer",explanation:"Explanation",generating:"Generating quiz...",noQuizzes:"No quizzes yet",emptyMessage:"Generate a quiz from any saved snippet or feed item",performance:"Quiz Performance",totalQuizzes:"Total Quizzes",averageScore:"Average Score",questionsAnswered:"Questions Answered",statistics:"Quiz Statistics",createNewQuiz:"Create New Quiz",recentQuizzes:"Recent Quizzes",noQuizzesYet:"No quizzes completed yet",noQuizzesDescription:"Take a quiz from your saved content in SWAG to see your statistics here",goToSwag:"Go to SWAG",quizMe:"Quiz Me",quizMeHelp:"You can also generate quizzes from the Swag page by selecting snippets, or from the Feed page.",generatingQuiz:"Generating Quiz...",backToChat:"Back to Chat",loadingStats:"Loading statistics...",errorLoadingStats:"Failed to load quiz statistics",confirmDelete:"Are you sure you want to delete the quiz '{{title}}'?",quizDeleted:"Quiz deleted successfully",errorDeletingQuiz:"Failed to delete quiz",deleteQuiz:"Delete quiz",today:"Today",yesterday:"Yesterday",daysAgo:"{{days}} days ago",snippetCount:"{{count}} snippet",snippetCount_plural:"{{count}} snippets",enriched:"Enriched",notSynced:"Not Synced",highestScore:"Highest Score",lowestScore:"Lowest Score",clickToRestart:"Click to Restart",notCompleted:"Not Completed",clickToRetake:"Click to Retake"},AF={common:gF,auth:fF,chat:mF,planning:yF,settings:bF,languages:xF,billing:vF,errors:wF,swag:SF,tts:TF,playlist:kF,tools:EF,feed:CF,quiz:_F},NF={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",close:"Cerrar",loading:"Cargando...",error:"Error",success:"Éxito",confirm:"Confirmar",back:"Atrás",next:"Siguiente",submit:"Enviar",clear:"Limpiar",search:"Buscar",filter:"Filtrar",export:"Exportar",import:"Importar",download:"Descargar",upload:"Subir",copy:"Copiar",paste:"Pegar",cut:"Cortar",undo:"Deshacer",redo:"Rehacer",select:"Seleccionar",selectAll:"Seleccionar todo",deselectAll:"Deseleccionar todo"},LF={signIn:"Iniciar sesión con Google",signOut:"Cerrar sesión",authRequired:"Se requiere autenticación para usar esta aplicación",tokenExpired:"Tu sesión ha expirado. Por favor inicia sesión nuevamente.",welcomeBack:"¡Bienvenido de nuevo!",signInPrompt:"Iniciar sesión para continuar",signInRequired:"Debes iniciar sesión para usar esta función",signingIn:"Iniciando sesión...",signingOut:"Cerrando sesión...",researchAgent:"Agente de Investigación",tagline:"Asistente de investigación con IA",secureAuth:"Autenticación segura con tecnología de Google",whyChooseTitle:"¿Por qué elegir Research Agent?",whyChooseIntro:"A diferencia de los chatbots de IA estándar que simplemente responden preguntas, Research Agent es tu compañero integral de investigación diseñado para investigaciones profundas y construcción de conocimiento.",keyAdvantagesTitle:"Ventajas Clave:",webConnected:"Inteligencia Conectada a la Web",webConnectedDesc:"La búsqueda web en tiempo real y extracción de contenido garantizan información actual y precisa, no datos de entrenamiento obsoletos",multiTool:"Orquestación Multi-Herramienta",multiToolDesc:"Combina perfectamente búsqueda web, ejecución de código, transcripciones de YouTube, generación de imágenes y análisis de documentos en una sola conversación",knowledgeBase:"Integración de Base de Conocimiento",knowledgeBaseDesc:"Guarda hallazgos en tu base de conocimiento personal, crea fragmentos y construye documentos de investigación integrales con el tiempo",advancedPlanning:"Planificación Avanzada",advancedPlanningDesc:"Genera planes de investigación estructurados con personas expertas, estrategias de búsqueda y enfoques metodológicos",costEffective:"Selección Inteligente de Modelos",costEffectiveDesc:"Selección automática de modelos que hacen el trabajo de manera económica o potente según la estrategia de selección. Trae tus propias claves para ahorrar un 25%",transparency:"Transparencia Total",transparencyDesc:"Rastrea cada llamada API, uso de tokens y costos en el panel de facturación en tiempo real",perfectFor:"Perfecto para: Investigación académica, análisis de mercado, creación de contenido, documentación técnica, inteligencia competitiva y cualquier tarea que requiera investigación exhaustiva."},PF={placeholder:"Escribe tu mensaje aquí...",send:"Enviar",retry:"Reintentar",stop:"Detener",thinking:"Pensando...",generating:"Generando respuesta...",newChat:"Nuevo Chat",clearHistory:"Limpiar Historial",loadChat:"Cargar Chat",systemPrompt:"Indicación del Sistema",customInstructions:"Instrucciones Personalizadas",temperature:"Temperatura",maxTokens:"Tokens Máximos",model:"Modelo",provider:"Proveedor",history:"Historial de Chat",continue:"Continuar",regenerate:"Regenerar",edit:"Editar",delete:"Eliminar",copy:"Copiar",copied:"¡Copiado!",selectFiles:"Seleccionar Archivos",attachFiles:"Adjuntar Archivos",pasteImage:"Pegar Imagen",recording:"Grabando...",voiceInput:"Entrada de Voz",stopRecording:"Detener Grabación",processing:"Procesando...",noMessages:"No hay mensajes aún. ¡Inicia una conversación!",clearConfirm:"¿Estás seguro de que quieres limpiar todos los mensajes?",deleteConfirm:"¿Estás seguro de que quieres eliminar este mensaje?",loadingHistory:"Cargando historial de chat...",savingChat:"Guardando chat...",chatSaved:"Chat guardado exitosamente",chatLoaded:"Chat cargado exitosamente",errorSaving:"Error al guardar el chat",errorLoading:"Error al cargar el chat",signInRequired:"Por favor inicia sesión para usar esta función",providerRequired:"Por favor configura al menos un proveedor en Configuración",messageError:"Error al enviar el mensaje",streamError:"Error en el flujo del mensaje",toolExecution:"Ejecutando herramienta...",toolExecuted:"Herramienta ejecutada exitosamente",toolError:"Error de ejecución de herramienta",searchingWeb:"Buscando en la web...",scrapingContent:"Extrayendo contenido...",transcribingAudio:"Transcribiendo audio...",generatingImage:"Generando imagen...",generatingChart:"Generando gráfico...",executingCode:"Ejecutando código...",planningMode:"Modo de Planificación",exitPlanning:"Salir de Planificación",startPlanning:"Iniciar Planificación",mcpServers:"Servidores MCP",addMCPServer:"Agregar Servidor MCP",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL inválido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Historial de Chat",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversación",searchProvider:"Proveedor de Búsqueda:",functionCall:"Llamada de Función:",code:"Código:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar código al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar código a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasión de detección de bots",contentExtracted:"Contenido extraído inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Método de Extracción:",tier:"Nivel",scrapeTime:"Tiempo de Extracción:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamaño Original:",compressedSize:"Tamaño Comprimido:",compression:"Compresión:",compressionStrategy:"Estrategia de Compresión:",basicExtraction:"Extracción básica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamaño:",titlePrompt:"Título/Indicación",finalPrompt:"Indicación Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"¿Estás seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats aún",startChatting:"Comienza a chatear para ver el historial aquí",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Título del Chat",enterChatTitle:"Ingresa un título para este chat...",signInToChat:"Por favor inicia sesión para comenzar a chatear",streamingResponse:"Respuesta en transmisión...",imageAddedToSwag:"¡Imagen agregada a Swag!",imageAddedWithoutConversion:"¡Imagen agregada a Swag (sin conversión)!",contentCapturedToSwag:"¡Contenido capturado a Swag!",contentCapturedWithoutConversion:"¡Contenido capturado a Swag (sin conversión de imagen)!",planningTransferred:"Indicaciones de planificación transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificación",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproducción",transcriptionStopped:"Transcripción detenida",failedToStopTranscription:"Error al detener la transcripción: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamaño máximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen más pequeña.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesión para enviar mensajes",foundRelevantChunks:"🔍 Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontró contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin él",sessionExpired:"Tu sesión ha expirado. Por favor inicia sesión nuevamente.",todoLimitReached:"Límite de progresión automática de tareas alcanzado. Por favor continúa manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"¡Copiado al portapapeles!",outputCopied:"¡Salida copiada al portapapeles!",codeCopied:"¡Código copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva línea, ↑↓ para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generación de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Error al cargar el chat",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Eliminar",chatHistoryTitle:"Historial de Chat",noChatHistory:"No se encontró historial de chat. Inicia una conversación para guardarla automáticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat cargado exitosamente",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Seleccionar Todo",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"¿Estás seguro de que quieres eliminar este chat?",confirmClearHistory:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"¿Estás seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin título",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuración del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesión para enviar mensajes"},RF={title:"Planificación de Investigación",query:"Consulta de Investigación",generatePlan:"Generar Plan",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"Aún no se ha generado ningún plan",enterQuery:"Ingresa tu consulta o tema de investigación...",researchFocus:"Enfoque de Investigación",methodology:"Metodología",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Procesando...",signInToGenerate:"Inicia sesión para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesión para usar la planificación",signInRequired:"Por favor inicia sesión con Google para usar la función de planificación",authExpired:"Autenticación expirada. Por favor cierra sesión e inicia sesión nuevamente para continuar.",authRequired:"Se requiere autenticación. Por favor inicia sesión con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigación",debugCopied:"¡Información de depuración copiada al portapapeles!",debugCopyFailed:"Error al copiar información de depuración",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar información de depuración para solución de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificación y comenzar de nuevo",systemPromptEditable:"Indicación del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edítalo según sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviará al chat. Edítalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver información de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se generó un plan válido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento está al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificación extensa.",comprehensiveResearchPlan:"📚 Plan de Investigación Completo",analysisSummary:"📊 Resumen del Análisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigación:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:"🎭 Persona Experta",searchQueries:"🔍 Consultas de Búsqueda:",researchQuestions:"📋 Preguntas de Investigación:",suggestedSources:"🌐 Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:"⚙️ Metodología de Investigación:",enhancedSystemPrompt:"🤖 Indicación del Sistema Mejorada:",enhancedUserPrompt:"💬 Indicación de Usuario Mejorada:",debugRawLlmResponse:"🔍 Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:"📝 Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construirá en etapas usando fragmentos. Cada sección se investigará y escribirá por separado, luego se combinará en un documento final.",documentStructure:"📑 Estructura del Documento:",keywords:"Palabras Clave:",workflow:"⚙️ Flujo de Trabajo:",needMoreInfo:"❓ Se Necesita Más Información",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con más detalles:",provideMoreDetails:"Proporciona detalles más específicos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:"📋 Se Requiere Más Información",planType:"Tipo de Plan:",detectedComplexityPatterns:"🔍 Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:"⚙️ Flujo de Trabajo Sugerido:",requiredTools:"🛠️ Herramientas Requeridas:",guidanceQuestions:"💡 Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicación de investigación con las respuestas:",guidanceTip:"💡 Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto más específico seas, mejor podrá la IA crear un plan de múltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigación completo sobre el cambio climático:
1. Creando 25 tareas para diferentes subtemas (política, ciencia, economía, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando gráficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un análisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cómo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteración...`,generateDetailedExecutionPlan:"🎯 Generar Plan de Ejecución Detallado",forcePlan:"⚡ Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generación del plan",reset:"🔄 Reiniciar",resetTooltip:"Limpiar modo de guía y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Guía:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren múltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecución detallado con ejemplos de pocos disparos que muestren cómo usar tareas, fragmentos y múltiples llamadas de herramientas por iteración.",forcingPlan:"Forzando generación del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Falló al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basándote en la consulta original."},IF={title:"Configuración",language:"Idioma",selectLanguage:"Seleccionar Idioma",providers:"Proveedores",cloudSync:"Sincronización en la Nube",billing:"Facturación",general:"General",generalDescription:"Configura ajustes generales de la aplicación incluyendo idioma y preferencias de visualización",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automáticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Selección de Modelo",modelStrategyDescription:"Elige cómo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Económico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos más pequeños capaces. Recurre a proveedores de pago solo cuando esté limitado por tasa. Mejor para la mayoría de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para máxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para análisis complejo",fastest:"Más Rápido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rápidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita búsqueda y extracción web mejorada a través de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Búsqueda Web",webSearchDescription:"Busca en la web información actual, noticias y artículos",executeJs:"Ejecución de JavaScript",executeJsDescription:"Ejecuta código JavaScript para cálculos y procesamiento de datos",scrapeUrl:"Extracción Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web específicos",youtubeSearch:"Búsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripción",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Gráficos",chartDescription:"Crea visualizaciones y gráficos a partir de datos",generateImage:"Generar Imágenes",imageDescription:"Crea imágenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de código y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analítico paso a paso para problemas complejos",proxySettings:"Configuración de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contraseña (Opcional)",locationServices:"Servicios de Ubicación",locationDescription:"Usa tu ubicación para resultados de búsqueda localizados e información específica de la región",enableLocation:"Habilitar Servicios de Ubicación",locationHelp:"Permite que las búsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicación Actual",requestLocation:"Solicitar Ubicación",clearLocation:"Limpiar Ubicación",locationPermission:"Permiso de Ubicación",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Proveedor",cloud:"Sincronización en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicación",voice:"Voz",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamaño de Fuente",lineHeight:"Altura de Línea"},DF={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},MF={title:"Panel de Facturación",balance:"Saldo de Crédito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"Aún no hay transacciones",creditsPurchased:"Créditos comprados exitosamente",insufficientCredits:"Créditos insuficientes",purchaseCredits:"Agregar Crédito",amount:"Monto",paymentMethod:"Método de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"¿Estás seguro de que quieres limpiar los datos de facturación?",dataClearedSuccess:"✅ Éxito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Proveedor",model:"Modelo",duration:"Duración",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rápidos:",today:"Hoy",last7Days:"Últimos 7 Días",last30Days:"Últimos 30 Días",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:"📦 Agrupar por ID de Solicitud",itemsPerPage:"por página",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:"🔗 Grupo de Solicitudes ({{count}} transacciones)",signInRequired:"🔐 Se Requiere Inicio de Sesión",signInToViewBilling:"Por favor inicia sesión con Google para ver tus datos de facturación.",howToAccessBilling:"📋 Cómo Acceder a los Datos de Facturación:",signInStep1:'Haz clic en el botón "Iniciar sesión con Google" en la barra de navegación superior',signInStep2:"¡Eso es todo! Tus datos de facturación se cargarán automáticamente",billingDataNote:"💡 Tus datos de facturación se almacenan en una Hoja de cálculo de Google de cuenta de servicio centralizada y se recuperan automáticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesión con Google.",debugInfo:"🔧 Información de Depuración",loading:"Cargando datos de facturación...",errorLoading:"⚠️ Error al Cargar Datos de Facturación",retry:"🔄 Reintentar",noBillingData:"No hay datos de facturación disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:"📊 Aún No Hay Datos de Facturación",startUsingChat:"Comienza a usar el chat para generar registros de facturación. Todo el uso de API se rastrea automáticamente.",refresh:"🔄 Actualizar",usageOnly:"Solo uso (excl. créditos)",totalCredits:"Créditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Créditos a agregar:",minimumPurchase:"La compra mínima es $5.00",addCreditsTitle:"💳 Agregar Créditos",purchaseCreditsDescription:"Compra créditos para usar funciones de IA. Compra mínima: $5.00",enterAmount:"Ingresa el monto (mín $5.00)",tipUseOwnKeys:"💡 Consejo: ¡Agrega tus propias claves API en Configuración para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:"⚠️ SDK de PayPal no cargado. Por favor actualiza la página.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturación",clearDataWarning:"⚠️ Advertencia: Esta acción no se puede deshacer. Tus datos de facturación se eliminarán permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminará todas las transacciones de tu hoja de facturación.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"Útil para alinearse con los ciclos de facturación del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta acción no se puede deshacer",cancel:"Cancelar",page:"Página",of:"de",first:"⏮️ Primera",prev:"◀️ Anterior",next:"Siguiente ▶️",last:"Última ⏭️",types:{chat:"Chat",embedding:"Incrustación",guardrail_input:"🛡️ Entrada de Guardarraíl",guardrail_output:"🛡️ Salida de Guardarraíl",planning:"Planificación",assessment:"Evaluación",image_generation:"🖼️ Generación de Imagen",tts:"🎙️ Texto a Voz",chat_iteration:"Iteración de Chat",credit_added:"Crédito Agregado",summary:"Resumen",lambda_invocation:"Invocación Lambda"}},OF={generic:"Ocurrió un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validación",tryAgain:"Por favor intenta nuevamente"},jF={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},BF={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},FF={title:"Lista de Reproducción",addToPlaylist:"Agregar a Lista de Reproducción",removeFromPlaylist:"Eliminar de Lista de Reproducción",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproducción",emptyPlaylist:"La lista de reproducción está vacía"},zF={search:"Búsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Gráfico",generateImage:"Generar Imagen"},UF={title:"Feed",generateFeed:"Generar Feed",generating:"Generando...",refresh:"Actualizar",noItems:"Aún no hay elementos",emptyMessage:"Tu feed personalizado aparecerá aquí",emptySubMessage:"Generaremos contenido basado en tus fragmentos guardados e intereses",didYouKnow:"¿Sabías que",questionAnswer:"Pregunta y Respuesta",stash:"Guardar",stashed:"Guardado",trash:"Eliminar",quiz:"Cuestionario",swipeLeft:"Desliza a la izquierda para eliminar",swipeRight:"Desliza a la derecha para guardar",showMore:"Mostrar más",showLess:"Mostrar menos",sources:"Fuentes",topics:"Temas",settings:{title:"Configuración del Feed",searchTerms:"Términos de Búsqueda",searchTermsDesc:"Define hasta 5 temas de búsqueda para personalizar tu feed",addTerm:"Agregar Término",removeTerm:"Eliminar",maxTerms:"Máximo 5 términos de búsqueda permitidos",termExists:"Este término de búsqueda ya existe",placeholder:"ej. 'inteligencia artificial', 'noticias climáticas'",learnedPreferences:"Preferencias Aprendidas",likedTopics:"Temas Favoritos",dislikedTopics:"Temas No Deseados",stashToLearn:"Guarda elementos para ayudar al feed a aprender lo que te gusta",trashToLearn:"Elimina elementos para ayudar al feed a aprender qué evitar",tips:"💡 Consejos para Mejores Feeds",tipSpecific:"Sé específico con los términos de búsqueda",tipStash:"Guarda elementos que encuentres interesantes",tipTrash:"Elimina elementos irrelevantes para mejorar la calidad",tipMix:"Mezcla temas amplios y específicos para variedad"}},$F={title:"Cuestionario",subtitle:"Sigue tu progreso de aprendizaje y rendimiento en cuestionarios",startQuiz:"Iniciar Cuestionario",nextQuestion:"Siguiente Pregunta",previousQuestion:"Anterior",submitAnswer:"Enviar Respuesta",viewResults:"Ver Resultados",retakeQuiz:"Repetir Cuestionario",score:"Puntuación",correct:"Correcto",incorrect:"Incorrecto",question:"Pregunta",of:"de",yourAnswer:"Tu respuesta",correctAnswer:"Respuesta correcta",explanation:"Explicación",generating:"Generando cuestionario...",noQuizzes:"Aún no hay cuestionarios",emptyMessage:"Genera un cuestionario desde cualquier fragmento guardado o elemento del feed",performance:"Rendimiento del Cuestionario",totalQuizzes:"Total de Cuestionarios",averageScore:"Puntuación Promedio",questionsAnswered:"Preguntas Respondidas",statistics:"Estadísticas del Cuestionario",createNewQuiz:"Crear Nuevo Cuestionario",recentQuizzes:"Cuestionarios Recientes",noQuizzesYet:"Aún no hay cuestionarios completados",noQuizzesDescription:"Realiza un cuestionario desde tu contenido guardado en SWAG para ver tus estadísticas aquí",goToSwag:"Ir a SWAG",backToChat:"Volver al Chat",loadingStats:"Cargando estadísticas...",errorLoadingStats:"Error al cargar estadísticas del cuestionario",confirmDelete:"¿Estás seguro de que quieres eliminar el cuestionario '{{title}}'?",quizDeleted:"Cuestionario eliminado exitosamente",errorDeletingQuiz:"Error al eliminar el cuestionario",deleteQuiz:"Eliminar cuestionario",today:"Hoy",yesterday:"Ayer",daysAgo:"Hace {{days}} días",snippetCount:"{{count}} fragmento",snippetCount_plural:"{{count}} fragmentos",enriched:"Enriquecido",notSynced:"No Sincronizado",highestScore:"Puntuación Más Alta",lowestScore:"Puntuación Más Baja"},qF={common:NF,auth:LF,chat:PF,planning:RF,settings:IF,languages:DF,billing:MF,errors:OF,swag:jF,tts:BF,playlist:FF,tools:zF,feed:UF,quiz:$F},HF={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",close:"Fermer",loading:"Chargement...",error:"Erreur",success:"Succès",confirm:"Confirmer",back:"Retour",next:"Suivant",submit:"Soumettre",clear:"Effacer",search:"Rechercher",filter:"Filtrer",export:"Exporter",import:"Importer",download:"Télécharger",upload:"Téléverser",copy:"Copier",paste:"Coller",cut:"Couper",undo:"Annuler",redo:"Refaire",select:"Sélectionner",selectAll:"Tout sélectionner",deselectAll:"Tout désélectionner"},GF={signIn:"Se connecter avec Google",signOut:"Se déconnecter",authRequired:"L'authentification est requise pour utiliser cette application",tokenExpired:"Votre session a expiré. Veuillez vous reconnecter.",welcomeBack:"Content de vous revoir !",signInPrompt:"Se connecter pour continuer",signInRequired:"Vous devez vous connecter pour utiliser cette fonctionnalité",signingIn:"Connexion...",signingOut:"Déconnexion...",researchAgent:"Agent de Recherche",tagline:"Assistant de recherche alimenté par l'IA",secureAuth:"Authentification sécurisée par Google",whyChooseTitle:"Pourquoi choisir Research Agent ?",whyChooseIntro:"Contrairement aux chatbots IA standards qui répondent simplement aux questions, Research Agent est votre compagnon de recherche complet conçu pour l'investigation approfondie et la construction de connaissances.",keyAdvantagesTitle:"Avantages Clés :",webConnected:"Intelligence Connectée au Web",webConnectedDesc:"La recherche web en temps réel et l'extraction de contenu garantissent des informations actuelles et précises, pas des données d'entraînement obsolètes",multiTool:"Orchestration Multi-Outils",multiToolDesc:"Combine de manière transparente la recherche web, l'exécution de code, les transcriptions YouTube, la génération d'images et l'analyse de documents dans une seule conversation",knowledgeBase:"Intégration de Base de Connaissances",knowledgeBaseDesc:"Sauvegardez les découvertes dans votre base de connaissances personnelle, créez des extraits et construisez des documents de recherche complets au fil du temps",advancedPlanning:"Planification Avancée",advancedPlanningDesc:"Générez des plans de recherche structurés avec des personas experts, des stratégies de recherche et des approches méthodologiques",costEffective:"Sélection Intelligente de Modèles",costEffectiveDesc:"Sélection automatique de modèles qui font le travail de manière économique ou puissante selon la stratégie de sélection. Apportez vos propres clés pour économiser 25%",transparency:"Transparence Totale",transparencyDesc:"Suivez chaque appel API, utilisation de jetons et coût dans le tableau de bord de facturation en temps réel",perfectFor:"Parfait pour : Recherche académique, analyse de marché, création de contenu, documentation technique, veille concurrentielle et toute tâche nécessitant une investigation approfondie."},WF={placeholder:"Tapez votre message ici...",send:"Envoyer",retry:"Réessayer",stop:"Arrêter",thinking:"Réflexion...",generating:"Génération de la réponse...",newChat:"Nouveau Chat",clearHistory:"Effacer l'historique",loadChat:"Charger le chat",systemPrompt:"Instruction système",customInstructions:"Instructions personnalisées",temperature:"Température",maxTokens:"Tokens maximum",model:"Modèle",provider:"Fournisseur",history:"Historique du chat",continue:"Continuer",regenerate:"Régénérer",edit:"Modifier",delete:"Supprimer",copy:"Copier",copied:"Copié !",selectFiles:"Sélectionner des fichiers",attachFiles:"Joindre des fichiers",pasteImage:"Coller une image",recording:"Enregistrement...",voiceInput:"Entrée vocale",stopRecording:"Arrêter l'enregistrement",processing:"Traitement...",noMessages:"Aucun message pour le moment. Commencez une conversation !",clearConfirm:"Êtes-vous sûr de vouloir effacer tous les messages ?",deleteConfirm:"Êtes-vous sûr de vouloir supprimer ce message ?",loadingHistory:"Chargement de l'historique du chat...",savingChat:"Enregistrement du chat...",chatSaved:"Chat enregistré avec succès",chatLoaded:"Chat chargé avec succès",errorSaving:"Erreur lors de l'enregistrement du chat",errorLoading:"Erreur lors du chargement du chat",signInRequired:"Veuillez vous connecter pour utiliser cette fonctionnalité",providerRequired:"Veuillez configurer au moins un fournisseur dans les paramètres",messageError:"Erreur lors de l'envoi du message",streamError:"Erreur dans le flux du message",toolExecution:"Exécution de l'outil...",toolExecuted:"Outil exécuté avec succès",toolError:"Erreur d'exécution de l'outil",searchingWeb:"Recherche sur le web...",scrapingContent:"Extraction du contenu...",transcribingAudio:"Transcription de l'audio...",generatingImage:"Génération de l'image...",generatingChart:"Génération du graphique...",executingCode:"Exécution du code...",planningMode:"Mode planification",exitPlanning:"Quitter la planification",startPlanning:"Démarrer la planification",mcpServers:"Serveurs MCP",addMCPServer:"Ajouter un serveur MCP",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL inválido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Historique du chat",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversación",searchProvider:"Proveedor de Búsqueda:",functionCall:"Llamada de Función:",code:"Código:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar código al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar código a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasión de detección de bots",contentExtracted:"Contenido extraído inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Método de Extracción:",tier:"Nivel",scrapeTime:"Tiempo de Extracción:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamaño Original:",compressedSize:"Tamaño Comprimido:",compression:"Compresión:",compressionStrategy:"Estrategia de Compresión:",basicExtraction:"Extracción básica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamaño:",titlePrompt:"Título/Indicación",finalPrompt:"Indicación Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"¿Estás seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats aún",startChatting:"Comienza a chatear para ver el historial aquí",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Título del Chat",enterChatTitle:"Ingresa un título para este chat...",signInToChat:"Por favor inicia sesión para comenzar a chatear",streamingResponse:"Respuesta en transmisión...",imageAddedToSwag:"¡Imagen agregada a Swag!",imageAddedWithoutConversion:"¡Imagen agregada a Swag (sin conversión)!",contentCapturedToSwag:"¡Contenido capturado a Swag!",contentCapturedWithoutConversion:"¡Contenido capturado a Swag (sin conversión de imagen)!",planningTransferred:"Indicaciones de planificación transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificación",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproducción",transcriptionStopped:"Transcripción detenida",failedToStopTranscription:"Error al detener la transcripción: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamaño máximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen más pequeña.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesión para enviar mensajes",foundRelevantChunks:"🔍 Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontró contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin él",sessionExpired:"Tu sesión ha expirado. Por favor inicia sesión nuevamente.",todoLimitReached:"Límite de progresión automática de tareas alcanzado. Por favor continúa manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"¡Copiado al portapapeles!",outputCopied:"¡Salida copiada al portapapeles!",codeCopied:"¡Código copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva línea, ↑↓ para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generación de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Erreur lors du chargement du chat",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Supprimer",chatHistoryTitle:"Historique du chat",noChatHistory:"No se encontró historial de chat. Inicia una conversación para guardarla automáticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat chargé avec succès",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Tout sélectionner",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"¿Estás seguro de que quieres eliminar este chat?",confirmClearHistory:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"¿Estás seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin título",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuración del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesión para enviar mensajes"},VF={title:"Planification de la Recherche",query:"Consulta de Investigación",generatePlan:"Générer un Plan",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"Aún no se ha generado ningún plan",enterQuery:"Ingresa tu consulta o tema de investigación...",researchFocus:"Enfoque de Investigación",methodology:"Metodología",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Traitement...",signInToGenerate:"Inicia sesión para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesión para usar la planificación",signInRequired:"Por favor inicia sesión con Google para usar la función de planificación",authExpired:"Autenticación expirada. Por favor cierra sesión e inicia sesión nuevamente para continuar.",authRequired:"Se requiere autenticación. Por favor inicia sesión con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigación",debugCopied:"¡Información de depuración copiada al portapapeles!",debugCopyFailed:"Error al copiar información de depuración",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar información de depuración para solución de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificación y comenzar de nuevo",systemPromptEditable:"Indicación del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edítalo según sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviará al chat. Edítalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver información de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se generó un plan válido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento está al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificación extensa.",comprehensiveResearchPlan:"📚 Plan de Investigación Completo",analysisSummary:"📊 Resumen del Análisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigación:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:"🎭 Persona Experta",searchQueries:"🔍 Consultas de Búsqueda:",researchQuestions:"📋 Preguntas de Investigación:",suggestedSources:"🌐 Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:"⚙️ Metodología de Investigación:",enhancedSystemPrompt:"🤖 Indicación del Sistema Mejorada:",enhancedUserPrompt:"💬 Indicación de Usuario Mejorada:",debugRawLlmResponse:"🔍 Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:"📝 Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construirá en etapas usando fragmentos. Cada sección se investigará y escribirá por separado, luego se combinará en un documento final.",documentStructure:"📑 Estructura del Documento:",keywords:"Palabras Clave:",workflow:"⚙️ Flujo de Trabajo:",needMoreInfo:"❓ Se Necesita Más Información",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con más detalles:",provideMoreDetails:"Proporciona detalles más específicos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:"📋 Se Requiere Más Información",planType:"Tipo de Plan:",detectedComplexityPatterns:"🔍 Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:"⚙️ Flujo de Trabajo Sugerido:",requiredTools:"🛠️ Herramientas Requeridas:",guidanceQuestions:"💡 Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicación de investigación con las respuestas:",guidanceTip:"💡 Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto más específico seas, mejor podrá la IA crear un plan de múltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigación completo sobre el cambio climático:
1. Creando 25 tareas para diferentes subtemas (política, ciencia, economía, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando gráficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un análisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cómo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteración...`,generateDetailedExecutionPlan:"🎯 Generar Plan de Ejecución Detallado",forcePlan:"⚡ Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generación del plan",reset:"🔄 Reiniciar",resetTooltip:"Limpiar modo de guía y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Guía:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren múltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecución detallado con ejemplos de pocos disparos que muestren cómo usar tareas, fragmentos y múltiples llamadas de herramientas por iteración.",forcingPlan:"Forzando generación del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Falló al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basándote en la consulta original."},YF={title:"Paramètres",language:"Langue",selectLanguage:"Sélectionner la Langue",providers:"Proveedores",cloudSync:"Sincronización en la Nube",billing:"Facturación",general:"General",generalDescription:"Configura ajustes generales de la aplicación incluyendo idioma y preferencias de visualización",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automáticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Selección de Modelo",modelStrategyDescription:"Elige cómo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Económico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos más pequeños capaces. Recurre a proveedores de pago solo cuando esté limitado por tasa. Mejor para la mayoría de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para máxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para análisis complejo",fastest:"Más Rápido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rápidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita búsqueda y extracción web mejorada a través de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Búsqueda Web",webSearchDescription:"Busca en la web información actual, noticias y artículos",executeJs:"Ejecución de JavaScript",executeJsDescription:"Ejecuta código JavaScript para cálculos y procesamiento de datos",scrapeUrl:"Extracción Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web específicos",youtubeSearch:"Búsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripción",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Gráficos",chartDescription:"Crea visualizaciones y gráficos a partir de datos",generateImage:"Generar Imágenes",imageDescription:"Crea imágenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de código y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analítico paso a paso para problemas complejos",proxySettings:"Configuración de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contraseña (Opcional)",locationServices:"Servicios de Ubicación",locationDescription:"Usa tu ubicación para resultados de búsqueda localizados e información específica de la región",enableLocation:"Habilitar Servicios de Ubicación",locationHelp:"Permite que las búsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicación Actual",requestLocation:"Solicitar Ubicación",clearLocation:"Limpiar Ubicación",locationPermission:"Permiso de Ubicación",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Fournisseur",cloud:"Sincronización en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicación",voice:"Voix",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamaño de Fuente",lineHeight:"Altura de Línea"},QF={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},KF={title:"Panel de Facturación",balance:"Saldo de Crédito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"Aún no hay transacciones",creditsPurchased:"Créditos comprados exitosamente",insufficientCredits:"Créditos insuficientes",purchaseCredits:"Agregar Crédito",amount:"Monto",paymentMethod:"Método de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"¿Estás seguro de que quieres limpiar los datos de facturación?",dataClearedSuccess:"✅ Éxito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Fournisseur",model:"Modèle",duration:"Duración",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rápidos:",today:"Hoy",last7Days:"Últimos 7 Días",last30Days:"Últimos 30 Días",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:"📦 Agrupar por ID de Solicitud",itemsPerPage:"por página",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:"🔗 Grupo de Solicitudes ({{count}} transacciones)",signInRequired:"🔐 Se Requiere Inicio de Sesión",signInToViewBilling:"Por favor inicia sesión con Google para ver tus datos de facturación.",howToAccessBilling:"📋 Cómo Acceder a los Datos de Facturación:",signInStep1:'Haz clic en el botón "Iniciar sesión con Google" en la barra de navegación superior',signInStep2:"¡Eso es todo! Tus datos de facturación se cargarán automáticamente",billingDataNote:"💡 Tus datos de facturación se almacenan en una Hoja de cálculo de Google de cuenta de servicio centralizada y se recuperan automáticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesión con Google.",debugInfo:"🔧 Información de Depuración",loading:"Cargando datos de facturación...",errorLoading:"⚠️ Error al Cargar Datos de Facturación",retry:"🔄 Reintentar",noBillingData:"No hay datos de facturación disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:"📊 Aún No Hay Datos de Facturación",startUsingChat:"Comienza a usar el chat para generar registros de facturación. Todo el uso de API se rastrea automáticamente.",refresh:"🔄 Actualizar",usageOnly:"Solo uso (excl. créditos)",totalCredits:"Créditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Créditos a agregar:",minimumPurchase:"La compra mínima es $5.00",addCreditsTitle:"💳 Agregar Créditos",purchaseCreditsDescription:"Compra créditos para usar funciones de IA. Compra mínima: $5.00",enterAmount:"Ingresa el monto (mín $5.00)",tipUseOwnKeys:"💡 Consejo: ¡Agrega tus propias claves API en Configuración para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:"⚠️ SDK de PayPal no cargado. Por favor actualiza la página.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturación",clearDataWarning:"⚠️ Advertencia: Esta acción no se puede deshacer. Tus datos de facturación se eliminarán permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminará todas las transacciones de tu hoja de facturación.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"Útil para alinearse con los ciclos de facturación del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta acción no se puede deshacer",cancel:"Cancelar",page:"Página",of:"de",first:"⏮️ Primera",prev:"◀️ Anterior",next:"Siguiente ▶️",last:"Última ⏭️",types:{chat:"Chat",embedding:"Incrustación",guardrail_input:"🛡️ Entrada de Guardarraíl",guardrail_output:"🛡️ Salida de Guardarraíl",planning:"Planificación",assessment:"Evaluación",image_generation:"🖼️ Generación de Imagen",tts:"🎙️ Texto a Voz",chat_iteration:"Iteración de Chat",credit_added:"Crédito Agregado",summary:"Resumen",lambda_invocation:"Invocación Lambda"}},XF={generic:"Ocurrió un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validación",tryAgain:"Por favor intenta nuevamente"},JF={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},ZF={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},e8={title:"Lista de Reproducción",addToPlaylist:"Agregar a Lista de Reproducción",removeFromPlaylist:"Eliminar de Lista de Reproducción",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproducción",emptyPlaylist:"La lista de reproducción está vacía"},t8={search:"Búsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Gráfico",generateImage:"Generar Imagen"},r8={title:"Fil d'actualités",generateFeed:"Générer le Fil",generating:"Génération en cours...",refresh:"Actualiser",noItems:"Aucun élément pour l'instant",emptyMessage:"Votre fil personnalisé apparaîtra ici",emptySubMessage:"Nous générerons du contenu basé sur vos extraits sauvegardés et vos intérêts",didYouKnow:"Le saviez-vous",questionAnswer:"Question & Réponse",stash:"Enregistrer",stashed:"Enregistré",trash:"Supprimer",quiz:"Quiz",swipeLeft:"Glissez à gauche pour supprimer",swipeRight:"Glissez à droite pour enregistrer",showMore:"Afficher plus",showLess:"Afficher moins",sources:"Sources",topics:"Sujets",settings:{title:"Paramètres du Fil",searchTerms:"Termes de Recherche",searchTermsDesc:"Définissez jusqu'à 5 sujets de recherche pour personnaliser votre fil",addTerm:"Ajouter un Terme",removeTerm:"Supprimer",maxTerms:"Maximum 5 termes de recherche autorisés",termExists:"Ce terme de recherche existe déjà",placeholder:"ex. 'intelligence artificielle', 'actualités climatiques'",learnedPreferences:"Préférences Apprises",likedTopics:"Sujets Appréciés",dislikedTopics:"Sujets Non Appréciés",stashToLearn:"Enregistrez des éléments pour aider le fil à apprendre ce que vous aimez",trashToLearn:"Supprimez des éléments pour aider le fil à apprendre ce qu'il faut éviter",tips:"💡 Conseils pour de Meilleurs Fils",tipSpecific:"Soyez précis avec les termes de recherche",tipStash:"Enregistrez les éléments que vous trouvez intéressants",tipTrash:"Supprimez les éléments non pertinents pour améliorer la qualité",tipMix:"Mélangez sujets larges et spécifiques pour la variété"}},n8={title:"Quiz",subtitle:"Suivez votre progression d'apprentissage et vos performances aux quiz",startQuiz:"Démarrer le Quiz",nextQuestion:"Question Suivante",previousQuestion:"Précédent",submitAnswer:"Soumettre la Réponse",viewResults:"Voir les Résultats",retakeQuiz:"Refaire le Quiz",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Question",of:"de",yourAnswer:"Votre réponse",correctAnswer:"Bonne réponse",explanation:"Explication",generating:"Génération du quiz...",noQuizzes:"Aucun quiz pour l'instant",emptyMessage:"Générez un quiz à partir de n'importe quel extrait sauvegardé ou élément du fil",performance:"Performance au Quiz",totalQuizzes:"Total des Quiz",averageScore:"Score Moyen",questionsAnswered:"Questions Répondues",statistics:"Statistiques du Quiz",createNewQuiz:"Créer un Nouveau Quiz",recentQuizzes:"Quiz Récents",noQuizzesYet:"Aucun quiz complété pour l'instant",noQuizzesDescription:"Passez un quiz depuis votre contenu sauvegardé dans SWAG pour voir vos statistiques ici",goToSwag:"Aller à SWAG",backToChat:"Retour au Chat",loadingStats:"Chargement des statistiques...",errorLoadingStats:"Échec du chargement des statistiques du quiz",confirmDelete:"Êtes-vous sûr de vouloir supprimer le quiz '{{title}}' ?",quizDeleted:"Quiz supprimé avec succès",errorDeletingQuiz:"Échec de la suppression du quiz",deleteQuiz:"Supprimer le quiz",today:"Aujourd'hui",yesterday:"Hier",daysAgo:"Il y a {{days}} jours",snippetCount:"{{count}} extrait",snippetCount_plural:"{{count}} extraits",enriched:"Enrichi",notSynced:"Non Synchronisé",highestScore:"Meilleur Score",lowestScore:"Score le Plus Bas"},a8={common:HF,auth:GF,chat:WF,planning:VF,settings:YF,languages:QF,billing:KF,errors:XF,swag:JF,tts:ZF,playlist:e8,tools:t8,feed:r8,quiz:n8},i8={save:"Speichern",cancel:"Abbrechen",delete:"Löschen",edit:"Bearbeiten",close:"Schließen",loading:"Laden...",error:"Fehler",success:"Erfolg",confirm:"Bestätigen",back:"Zurück",next:"Weiter",submit:"Absenden",clear:"Löschen",search:"Suchen",filter:"Filtern",export:"Exportieren",import:"Importieren",download:"Herunterladen",upload:"Hochladen",copy:"Kopieren",paste:"Einfügen",cut:"Ausschneiden",undo:"Rückgängig",redo:"Wiederholen",select:"Auswählen",selectAll:"Alles auswählen",deselectAll:"Alle abwählen"},s8={signIn:"Mit Google anmelden",signOut:"Abmelden",authRequired:"Authentifizierung ist erforderlich, um diese Anwendung zu verwenden",tokenExpired:"Ihre Sitzung ist abgelaufen. Bitte melden Sie sich erneut an.",welcomeBack:"Willkommen zurück!",signInPrompt:"Anmelden, um fortzufahren",signInRequired:"Sie müssen sich anmelden, um diese Funktion zu nutzen",signingIn:"Anmelden...",signingOut:"Abmelden...",researchAgent:"Forschungsagent",tagline:"KI-gestützter Forschungsassistent",secureAuth:"Sichere Authentifizierung von Google",whyChooseTitle:"Warum Research Agent wählen?",whyChooseIntro:"Im Gegensatz zu Standard-KI-Chatbots, die einfach nur Fragen beantworten, ist Research Agent Ihr umfassender Forschungsbegleiter für tiefgehende Untersuchungen und Wissensaufbau.",keyAdvantagesTitle:"Hauptvorteile:",webConnected:"Web-verbundene Intelligenz",webConnectedDesc:"Echtzeit-Websuche und Content-Extraktion stellen aktuelle, präzise Informationen sicher – keine veralteten Trainingsdaten",multiTool:"Multi-Tool-Orchestrierung",multiToolDesc:"Kombiniert nahtlos Websuche, Code-Ausführung, YouTube-Transkripte, Bildgenerierung und Dokumentanalyse in einer einzigen Konversation",knowledgeBase:"Wissensdatenbank-Integration",knowledgeBaseDesc:"Speichern Sie Erkenntnisse in Ihrer persönlichen Wissensdatenbank, erstellen Sie Snippets und bauen Sie im Laufe der Zeit umfassende Forschungsdokumente auf",advancedPlanning:"Erweiterte Planung",advancedPlanningDesc:"Generieren Sie strukturierte Forschungspläne mit Experten-Personas, Suchstrategien und methodischen Ansätzen",costEffective:"Intelligente Modellauswahl",costEffectiveDesc:"Automatische Auswahl von Modellen, die die Aufgabe wirtschaftlich oder leistungsstark erledigen, basierend auf der Auswahlstrategie. Verwenden Sie Ihre eigenen Schlüssel, um 25% zu sparen",transparency:"Volle Transparenz",transparencyDesc:"Verfolgen Sie jeden API-Aufruf, Token-Verbrauch und Kosten im Echtzeit-Abrechnungs-Dashboard",perfectFor:"Perfekt für: Akademische Forschung, Marktanalyse, Content-Erstellung, technische Dokumentation, Competitive Intelligence und jede Aufgabe, die gründliche Untersuchungen erfordert."},o8={placeholder:"Geben Sie Ihre Nachricht hier ein...",send:"Senden",retry:"Wiederholen",stop:"Stoppen",thinking:"Denken...",generating:"Antwort wird generiert...",newChat:"Neuer Chat",clearHistory:"Verlauf löschen",loadChat:"Chat laden",systemPrompt:"Systemaufforderung",customInstructions:"Benutzerdefinierte Anweisungen",temperature:"Temperatur",maxTokens:"Maximale Tokens",model:"Modell",provider:"Anbieter",history:"Chat-Verlauf",continue:"Fortsetzen",regenerate:"Neu generieren",edit:"Bearbeiten",delete:"Löschen",copy:"Kopieren",copied:"Kopiert!",selectFiles:"Dateien auswählen",attachFiles:"Dateien anhängen",pasteImage:"Bild einfügen",recording:"Aufnahme...",voiceInput:"Spracheingabe",stopRecording:"Aufnahme stoppen",processing:"Verarbeitung...",noMessages:"Noch keine Nachrichten. Starten Sie ein Gespräch!",clearConfirm:"Sind Sie sicher, dass Sie alle Nachrichten löschen möchten?",deleteConfirm:"Sind Sie sicher, dass Sie diese Nachricht löschen möchten?",loadingHistory:"Chat-Verlauf wird geladen...",savingChat:"Chat wird gespeichert...",chatSaved:"Chat erfolgreich gespeichert",chatLoaded:"Chat erfolgreich geladen",errorSaving:"Fehler beim Speichern des Chats",errorLoading:"Fehler beim Laden des Chats",signInRequired:"Bitte melden Sie sich an, um diese Funktion zu nutzen",providerRequired:"Bitte konfigurieren Sie mindestens einen Anbieter in den Einstellungen",messageError:"Fehler beim Senden der Nachricht",streamError:"Fehler im Nachrichtenfluss",toolExecution:"Tool wird ausgeführt...",toolExecuted:"Tool erfolgreich ausgeführt",toolError:"Tool-Ausführungsfehler",searchingWeb:"Suche im Web...",scrapingContent:"Inhalt wird extrahiert...",transcribingAudio:"Audio wird transkribiert...",generatingImage:"Bild wird generiert...",generatingChart:"Diagramm wird erstellt...",executingCode:"Code wird ausgeführt...",planningMode:"Planungsmodus",exitPlanning:"Planung beenden",startPlanning:"Planung starten",mcpServers:"MCP-Server",addMCPServer:"MCP-Server hinzufügen",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL inválido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Chat-Verlauf",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversación",searchProvider:"Proveedor de Búsqueda:",functionCall:"Llamada de Función:",code:"Código:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar código al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar código a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasión de detección de bots",contentExtracted:"Contenido extraído inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Método de Extracción:",tier:"Nivel",scrapeTime:"Tiempo de Extracción:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamaño Original:",compressedSize:"Tamaño Comprimido:",compression:"Compresión:",compressionStrategy:"Estrategia de Compresión:",basicExtraction:"Extracción básica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamaño:",titlePrompt:"Título/Indicación",finalPrompt:"Indicación Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"¿Estás seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats aún",startChatting:"Comienza a chatear para ver el historial aquí",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Título del Chat",enterChatTitle:"Ingresa un título para este chat...",signInToChat:"Por favor inicia sesión para comenzar a chatear",streamingResponse:"Respuesta en transmisión...",imageAddedToSwag:"¡Imagen agregada a Swag!",imageAddedWithoutConversion:"¡Imagen agregada a Swag (sin conversión)!",contentCapturedToSwag:"¡Contenido capturado a Swag!",contentCapturedWithoutConversion:"¡Contenido capturado a Swag (sin conversión de imagen)!",planningTransferred:"Indicaciones de planificación transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificación",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproducción",transcriptionStopped:"Transcripción detenida",failedToStopTranscription:"Error al detener la transcripción: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamaño máximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen más pequeña.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesión para enviar mensajes",foundRelevantChunks:"🔍 Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontró contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin él",sessionExpired:"Tu sesión ha expirado. Por favor inicia sesión nuevamente.",todoLimitReached:"Límite de progresión automática de tareas alcanzado. Por favor continúa manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"¡Copiado al portapapeles!",outputCopied:"¡Salida copiada al portapapeles!",codeCopied:"¡Código copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva línea, ↑↓ para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generación de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Fehler beim Laden des Chats",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Löschen",chatHistoryTitle:"Chat-Verlauf",noChatHistory:"No se encontró historial de chat. Inicia una conversación para guardarla automáticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat erfolgreich geladen",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Alles auswählen",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"¿Estás seguro de que quieres eliminar este chat?",confirmClearHistory:"¿Estás seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"¿Estás seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin título",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuración del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesión para enviar mensajes"},l8={title:"Forschungsplanung",query:"Consulta de Investigación",generatePlan:"Plan Generieren",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"Aún no se ha generado ningún plan",enterQuery:"Ingresa tu consulta o tema de investigación...",researchFocus:"Enfoque de Investigación",methodology:"Metodología",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Verarbeitung...",signInToGenerate:"Inicia sesión para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesión para usar la planificación",signInRequired:"Por favor inicia sesión con Google para usar la función de planificación",authExpired:"Autenticación expirada. Por favor cierra sesión e inicia sesión nuevamente para continuar.",authRequired:"Se requiere autenticación. Por favor inicia sesión con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigación",debugCopied:"¡Información de depuración copiada al portapapeles!",debugCopyFailed:"Error al copiar información de depuración",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar información de depuración para solución de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificación y comenzar de nuevo",systemPromptEditable:"Indicación del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edítalo según sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviará al chat. Edítalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver información de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se generó un plan válido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento está al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificación extensa.",comprehensiveResearchPlan:"📚 Plan de Investigación Completo",analysisSummary:"📊 Resumen del Análisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigación:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:"🎭 Persona Experta",searchQueries:"🔍 Consultas de Búsqueda:",researchQuestions:"📋 Preguntas de Investigación:",suggestedSources:"🌐 Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:"⚙️ Metodología de Investigación:",enhancedSystemPrompt:"🤖 Indicación del Sistema Mejorada:",enhancedUserPrompt:"💬 Indicación de Usuario Mejorada:",debugRawLlmResponse:"🔍 Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:"📝 Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construirá en etapas usando fragmentos. Cada sección se investigará y escribirá por separado, luego se combinará en un documento final.",documentStructure:"📑 Estructura del Documento:",keywords:"Palabras Clave:",workflow:"⚙️ Flujo de Trabajo:",needMoreInfo:"❓ Se Necesita Más Información",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con más detalles:",provideMoreDetails:"Proporciona detalles más específicos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:"📋 Se Requiere Más Información",planType:"Tipo de Plan:",detectedComplexityPatterns:"🔍 Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:"⚙️ Flujo de Trabajo Sugerido:",requiredTools:"🛠️ Herramientas Requeridas:",guidanceQuestions:"💡 Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicación de investigación con las respuestas:",guidanceTip:"💡 Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto más específico seas, mejor podrá la IA crear un plan de múltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigación completo sobre el cambio climático:
1. Creando 25 tareas para diferentes subtemas (política, ciencia, economía, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando gráficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un análisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cómo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteración...`,generateDetailedExecutionPlan:"🎯 Generar Plan de Ejecución Detallado",forcePlan:"⚡ Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generación del plan",reset:"🔄 Reiniciar",resetTooltip:"Limpiar modo de guía y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Guía:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren múltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecución detallado con ejemplos de pocos disparos que muestren cómo usar tareas, fragmentos y múltiples llamadas de herramientas por iteración.",forcingPlan:"Forzando generación del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Falló al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basándote en la consulta original."},c8={title:"Einstellungen",language:"Sprache",selectLanguage:"Sprache Auswählen",providers:"Proveedores",cloudSync:"Sincronización en la Nube",billing:"Facturación",general:"General",generalDescription:"Configura ajustes generales de la aplicación incluyendo idioma y preferencias de visualización",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automáticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Selección de Modelo",modelStrategyDescription:"Elige cómo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Económico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos más pequeños capaces. Recurre a proveedores de pago solo cuando esté limitado por tasa. Mejor para la mayoría de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para máxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para análisis complejo",fastest:"Más Rápido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rápidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita búsqueda y extracción web mejorada a través de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Búsqueda Web",webSearchDescription:"Busca en la web información actual, noticias y artículos",executeJs:"Ejecución de JavaScript",executeJsDescription:"Ejecuta código JavaScript para cálculos y procesamiento de datos",scrapeUrl:"Extracción Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web específicos",youtubeSearch:"Búsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripción",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Gráficos",chartDescription:"Crea visualizaciones y gráficos a partir de datos",generateImage:"Generar Imágenes",imageDescription:"Crea imágenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de código y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analítico paso a paso para problemas complejos",proxySettings:"Configuración de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contraseña (Opcional)",locationServices:"Servicios de Ubicación",locationDescription:"Usa tu ubicación para resultados de búsqueda localizados e información específica de la región",enableLocation:"Habilitar Servicios de Ubicación",locationHelp:"Permite que las búsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicación Actual",requestLocation:"Solicitar Ubicación",clearLocation:"Limpiar Ubicación",locationPermission:"Permiso de Ubicación",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Anbieter",cloud:"Sincronización en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicación",voice:"Stimme",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamaño de Fuente",lineHeight:"Altura de Línea"},u8={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},d8={title:"Panel de Facturación",balance:"Saldo de Crédito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"Aún no hay transacciones",creditsPurchased:"Créditos comprados exitosamente",insufficientCredits:"Créditos insuficientes",purchaseCredits:"Agregar Crédito",amount:"Monto",paymentMethod:"Método de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"¿Estás seguro de que quieres limpiar los datos de facturación?",dataClearedSuccess:"✅ Éxito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Anbieter",model:"Modell",duration:"Duración",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rápidos:",today:"Hoy",last7Days:"Últimos 7 Días",last30Days:"Últimos 30 Días",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:"📦 Agrupar por ID de Solicitud",itemsPerPage:"por página",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:"🔗 Grupo de Solicitudes ({{count}} transacciones)",signInRequired:"🔐 Se Requiere Inicio de Sesión",signInToViewBilling:"Por favor inicia sesión con Google para ver tus datos de facturación.",howToAccessBilling:"📋 Cómo Acceder a los Datos de Facturación:",signInStep1:'Haz clic en el botón "Iniciar sesión con Google" en la barra de navegación superior',signInStep2:"¡Eso es todo! Tus datos de facturación se cargarán automáticamente",billingDataNote:"💡 Tus datos de facturación se almacenan en una Hoja de cálculo de Google de cuenta de servicio centralizada y se recuperan automáticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesión con Google.",debugInfo:"🔧 Información de Depuración",loading:"Cargando datos de facturación...",errorLoading:"⚠️ Error al Cargar Datos de Facturación",retry:"🔄 Reintentar",noBillingData:"No hay datos de facturación disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:"📊 Aún No Hay Datos de Facturación",startUsingChat:"Comienza a usar el chat para generar registros de facturación. Todo el uso de API se rastrea automáticamente.",refresh:"🔄 Actualizar",usageOnly:"Solo uso (excl. créditos)",totalCredits:"Créditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Créditos a agregar:",minimumPurchase:"La compra mínima es $5.00",addCreditsTitle:"💳 Agregar Créditos",purchaseCreditsDescription:"Compra créditos para usar funciones de IA. Compra mínima: $5.00",enterAmount:"Ingresa el monto (mín $5.00)",tipUseOwnKeys:"💡 Consejo: ¡Agrega tus propias claves API en Configuración para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:"⚠️ SDK de PayPal no cargado. Por favor actualiza la página.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturación",clearDataWarning:"⚠️ Advertencia: Esta acción no se puede deshacer. Tus datos de facturación se eliminarán permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminará todas las transacciones de tu hoja de facturación.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"Útil para alinearse con los ciclos de facturación del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta acción no se puede deshacer",cancel:"Cancelar",page:"Página",of:"de",first:"⏮️ Primera",prev:"◀️ Anterior",next:"Siguiente ▶️",last:"Última ⏭️",types:{chat:"Chat",embedding:"Incrustación",guardrail_input:"🛡️ Entrada de Guardarraíl",guardrail_output:"🛡️ Salida de Guardarraíl",planning:"Planificación",assessment:"Evaluación",image_generation:"🖼️ Generación de Imagen",tts:"🎙️ Texto a Voz",chat_iteration:"Iteración de Chat",credit_added:"Crédito Agregado",summary:"Resumen",lambda_invocation:"Invocación Lambda"}},h8={generic:"Ocurrió un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validación",tryAgain:"Por favor intenta nuevamente"},p8={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},g8={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},f8={title:"Lista de Reproducción",addToPlaylist:"Agregar a Lista de Reproducción",removeFromPlaylist:"Eliminar de Lista de Reproducción",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproducción",emptyPlaylist:"La lista de reproducción está vacía"},m8={search:"Búsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Gráfico",generateImage:"Generar Imagen"},y8={title:"Feed",generateFeed:"Feed generieren",generating:"Wird generiert...",refresh:"Aktualisieren",noItems:"Noch keine Einträge",emptyMessage:"Ihr personalisierter Feed wird hier angezeigt",emptySubMessage:"Wir erstellen Inhalte basierend auf Ihren gespeicherten Snippets und Interessen",didYouKnow:"Wussten Sie",questionAnswer:"Frage & Antwort",stash:"Speichern",stashed:"Gespeichert",trash:"Löschen",quiz:"Quiz",swipeLeft:"Nach links wischen zum Löschen",swipeRight:"Nach rechts wischen zum Speichern",showMore:"Mehr anzeigen",showLess:"Weniger anzeigen",sources:"Quellen",topics:"Themen",settings:{title:"Feed-Einstellungen",searchTerms:"Suchbegriffe",searchTermsDesc:"Definieren Sie bis zu 5 Suchthemen, um Ihren Feed zu personalisieren",addTerm:"Begriff hinzufügen",removeTerm:"Entfernen",maxTerms:"Maximal 5 Suchbegriffe erlaubt",termExists:"Dieser Suchbegriff existiert bereits",placeholder:"z.B. 'künstliche Intelligenz', 'Klimanachrichten'",learnedPreferences:"Gelernte Präferenzen",likedTopics:"Beliebte Themen",dislikedTopics:"Unbeliebte Themen",stashToLearn:"Speichern Sie Einträge, damit der Feed lernt, was Ihnen gefällt",trashToLearn:"Löschen Sie Einträge, damit der Feed lernt, was vermieden werden soll",tips:"💡 Tipps für bessere Feeds",tipSpecific:"Seien Sie spezifisch mit Suchbegriffen",tipStash:"Speichern Sie interessante Einträge",tipTrash:"Löschen Sie irrelevante Einträge, um die Qualität zu verbessern",tipMix:"Mischen Sie breite und spezifische Themen für Vielfalt"}},b8={title:"Quiz",startQuiz:"Quiz starten",nextQuestion:"Nächste Frage",previousQuestion:"Zurück",submitAnswer:"Antwort absenden",viewResults:"Ergebnisse anzeigen",retakeQuiz:"Quiz wiederholen",score:"Punktzahl",correct:"Richtig",incorrect:"Falsch",question:"Frage",of:"von",yourAnswer:"Ihre Antwort",correctAnswer:"Richtige Antwort",explanation:"Erklärung",generating:"Quiz wird erstellt...",noQuizzes:"Noch keine Quizze",emptyMessage:"Erstellen Sie ein Quiz aus einem gespeicherten Snippet oder Feed-Eintrag",performance:"Quiz-Leistung",totalQuizzes:"Gesamte Quizze",averageScore:"Durchschnittliche Punktzahl",questionsAnswered:"Beantwortete Fragen",statistics:"Quiz-Statistiken",subtitle:"Verfolgen Sie Ihren Lernfortschritt und Ihre Quiz-Leistung",createNewQuiz:"Neues Quiz Erstellen",recentQuizzes:"Letzte Quiz",noQuizzesYet:"Noch keine Quiz abgeschlossen",noQuizzesDescription:"Machen Sie ein Quiz aus Ihrem gespeicherten Inhalt in SWAG, um Ihre Statistiken hier zu sehen",goToSwag:"Zu SWAG Gehen",backToChat:"Zurück zum Chat",loadingStats:"Statistiken werden geladen...",errorLoadingStats:"Fehler beim Laden der Quiz-Statistiken",confirmDelete:"Sind Sie sicher, dass Sie das Quiz '{{title}}' löschen möchten?",quizDeleted:"Quiz erfolgreich gelöscht",errorDeletingQuiz:"Fehler beim Löschen des Quiz",deleteQuiz:"Quiz löschen",today:"Heute",yesterday:"Gestern",daysAgo:"Vor {{days}} Tagen",snippetCount:"{{count}} Snippet",snippetCount_plural:"{{count}} Snippets",enriched:"Angereichert",notSynced:"Nicht Synchronisiert",highestScore:"Höchste Punktzahl",lowestScore:"Niedrigste Punktzahl"},x8={common:i8,auth:s8,chat:o8,planning:l8,settings:c8,languages:u8,billing:d8,errors:h8,swag:p8,tts:g8,playlist:f8,tools:m8,feed:y8,quiz:b8},v8={save:"保存",cancel:"取消",delete:"删除",edit:"编辑",close:"关闭",loading:"加载中...",error:"错误",success:"成功",confirm:"确认",back:"返回",next:"下一个",submit:"提交",clear:"清除",search:"搜索",filter:"筛选",export:"导出",import:"导入",download:"下载",upload:"上传",copy:"复制",paste:"粘贴",cut:"剪切",undo:"撤销",redo:"重做",select:"选择",selectAll:"全选",deselectAll:"取消全选"},w8={signIn:"使用 Google 登录",signOut:"退出登录",authRequired:"使用此应用程序需要身份验证",tokenExpired:"您的会话已过期。请重新登录。",welcomeBack:"欢迎回来！",signInPrompt:"登录以继续",signInRequired:"您必须登录才能使用此功能",signingIn:"登录中...",signingOut:"退出登录中...",researchAgent:"研究助手",tagline:"AI驱动的研究助手",secureAuth:"由 Google 提供的安全身份验证",whyChooseTitle:"为什么选择 Research Agent？",whyChooseIntro:"与仅简单回答问题的标准 AI 聊天机器人不同，Research Agent 是您的综合研究伴侣，专为深度调查和知识构建而设计。",keyAdvantagesTitle:"关键优势：",webConnected:"联网智能",webConnectedDesc:"实时网络搜索和内容提取确保您获得最新、准确的信息——而非过时的训练数据",multiTool:"多工具编排",multiToolDesc:"在单次对话中无缝结合网络搜索、代码执行、YouTube 转录、图像生成和文档分析",knowledgeBase:"知识库集成",knowledgeBaseDesc:"将发现保存到您的个人知识库，创建片段，并随着时间推移构建全面的研究文档",advancedPlanning:"高级规划",advancedPlanningDesc:"生成结构化的研究计划，包含专家角色、搜索策略和方法论途径",costEffective:"智能模型选择",costEffectiveDesc:"根据选择策略自动选择经济高效或功能强大的模型。使用您自己的密钥可节省25%",transparency:"完全透明",transparencyDesc:"在实时计费仪表板中跟踪每个 API 调用、令牌使用情况和成本",perfectFor:"适用于：学术研究、市场分析、内容创作、技术文档、竞争情报以及任何需要深入调查的任务。"},S8={placeholder:"在此输入您的消息...",send:"发送",retry:"Retry",stop:"停止",thinking:"思考中...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"编辑",delete:"删除",copy:"复制",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"全选",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},T8={title:"研究规划",query:"Research Query",generatePlan:"生成计划",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},k8={title:"设置",language:"语言",selectLanguage:"选择语言",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"语音",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},E8={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},C8={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},_8={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},A8={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},N8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},L8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},P8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},R8={title:"信息流",generateFeed:"生成信息流",generating:"生成中...",refresh:"刷新",noItems:"暂无项目",emptyMessage:"您的个性化信息流将显示在这里",emptySubMessage:"我们将根据您保存的片段和兴趣生成内容",didYouKnow:"你知道吗",questionAnswer:"问答",stash:"保存",stashed:"已保存",trash:"删除",quiz:"测验",swipeLeft:"向左滑动删除",swipeRight:"向右滑动保存",showMore:"显示更多",showLess:"显示更少",sources:"来源",topics:"主题",settings:{title:"信息流设置",searchTerms:"搜索关键词",searchTermsDesc:"定义最多5个搜索主题来个性化您的信息流",addTerm:"添加关键词",removeTerm:"删除",maxTerms:"最多允许5个搜索关键词",termExists:"此搜索关键词已存在",placeholder:"例如：'人工智能'、'气候新闻'",learnedPreferences:"学习的偏好",likedTopics:"喜欢的主题",dislikedTopics:"不喜欢的主题",stashToLearn:"保存项目以帮助信息流了解您的喜好",trashToLearn:"删除项目以帮助信息流了解要避免什么",tips:"💡 获得更好信息流的提示",tipSpecific:"使用具体的搜索关键词",tipStash:"保存您觉得有趣的项目",tipTrash:"删除不相关的项目以提高质量",tipMix:"混合广泛和具体的主题以获得多样性"}},I8={title:"测验",startQuiz:"开始测验",nextQuestion:"下一题",previousQuestion:"上一题",submitAnswer:"提交答案",viewResults:"查看结果",retakeQuiz:"重新测验",score:"得分",correct:"正确",incorrect:"错误",question:"问题",of:"共",yourAnswer:"您的答案",correctAnswer:"正确答案",explanation:"解释",generating:"生成测验中...",noQuizzes:"暂无测验",emptyMessage:"从任何保存的片段或信息流项目生成测验",performance:"测验表现",totalQuizzes:"总测验数",averageScore:"平均得分",questionsAnswered:"已回答问题",statistics:"测验统计",subtitle:"跟踪您的学习进度和测验表现",createNewQuiz:"创建新测验",recentQuizzes:"最近的测验",noQuizzesYet:"还没有完成的测验",noQuizzesDescription:"从 SWAG 中保存的内容进行测验，在这里查看您的统计数据",goToSwag:"前往 SWAG",backToChat:"返回聊天",loadingStats:"正在加载统计数据...",errorLoadingStats:"加载测验统计数据失败",confirmDelete:"您确定要删除测验'{{title}}'吗？",quizDeleted:"测验已成功删除",errorDeletingQuiz:"删除测验失败",deleteQuiz:"删除测验",today:"今天",yesterday:"昨天",daysAgo:"{{days}} 天前",snippetCount:"{{count}} 个片段",snippetCount_plural:"{{count}} 个片段",enriched:"已丰富",notSynced:"未同步",highestScore:"最高分",lowestScore:"最低分"},D8={common:v8,auth:w8,chat:S8,planning:T8,settings:k8,languages:E8,billing:C8,errors:_8,swag:A8,tts:N8,playlist:L8,tools:P8,feed:R8,quiz:I8},M8={save:"保存",cancel:"キャンセル",delete:"削除",edit:"編集",close:"閉じる",loading:"読み込み中...",error:"エラー",success:"成功",confirm:"確認",back:"戻る",next:"次へ",submit:"送信",clear:"クリア",search:"検索",filter:"フィルター",export:"エクスポート",import:"インポート",download:"ダウンロード",upload:"アップロード",copy:"コピー",paste:"貼り付け",cut:"切り取り",undo:"元に戻す",redo:"やり直し",select:"選択",selectAll:"すべて選択",deselectAll:"すべて選択解除"},O8={signIn:"Googleでサインイン",signOut:"サインアウト",authRequired:"このアプリケーションを使用するには認証が必要です",tokenExpired:"セッションの有効期限が切れました。再度サインインしてください。",welcomeBack:"おかえりなさい！",signInPrompt:"続行するにはサインインしてください",signInRequired:"この機能を使用するにはサインインが必要です",signingIn:"サインイン中...",signingOut:"サインアウト中...",researchAgent:"研究エージェント",tagline:"AI搭載の研究アシスタント",secureAuth:"Googleによる安全な認証",whyChooseTitle:"なぜResearch Agentを選ぶのか？",whyChooseIntro:"単に質問に答えるだけの標準的なAIチャットボットとは異なり、Research Agentは深い調査と知識構築のために作られた包括的な研究パートナーです。",keyAdvantagesTitle:"主な利点：",webConnected:"Web接続インテリジェンス",webConnectedDesc:"リアルタイムのWeb検索とコンテンツ抽出により、古いトレーニングデータではなく、最新で正確な情報を確保",multiTool:"マルチツールオーケストレーション",multiToolDesc:"Web検索、コード実行、YouTubeトランスクリプト、画像生成、ドキュメント分析を単一の会話でシームレスに統合",knowledgeBase:"ナレッジベース統合",knowledgeBaseDesc:"発見を個人のナレッジベースに保存し、スニペットを作成し、時間の経過とともに包括的な研究ドキュメントを構築",advancedPlanning:"高度な計画",advancedPlanningDesc:"専門家のペルソナ、検索戦略、方法論的アプローチを含む構造化された研究計画を生成",costEffective:"スマートモデル選択",costEffectiveDesc:"選択戦略に基づいて、経済的またはパワフルにジョブを実行するモデルを自動選択。独自のキーを使用すると25%節約",transparency:"完全な透明性",transparencyDesc:"リアルタイム請求ダッシュボードですべてのAPI呼び出し、トークン使用量、コストを追跡",perfectFor:"最適な用途：学術研究、市場分析、コンテンツ作成、技術文書、競合情報、および徹底的な調査を必要とするあらゆるタスク。"},j8={placeholder:"ここにメッセージを入力...",send:"送信",retry:"Retry",stop:"停止",thinking:"考え中...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"編集",delete:"削除",copy:"コピー",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"すべて選択",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},B8={title:"研究計画",query:"Research Query",generatePlan:"計画を生成",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},F8={title:"設定",language:"言語",selectLanguage:"言語を選択",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"音声",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},z8={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},U8={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},$8={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},q8={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},H8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},G8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},W8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},V8={title:"フィード",generateFeed:"フィードを生成",generating:"生成中...",refresh:"更新",noItems:"まだアイテムがありません",emptyMessage:"パーソナライズされたフィードがここに表示されます",emptySubMessage:"保存したスニペットと興味に基づいてコンテンツを生成します",didYouKnow:"ご存知ですか",questionAnswer:"質問と回答",stash:"保存",stashed:"保存済み",trash:"削除",quiz:"クイズ",swipeLeft:"左にスワイプして削除",swipeRight:"右にスワイプして保存",showMore:"もっと見る",showLess:"少なく表示",sources:"ソース",topics:"トピック",settings:{title:"フィード設定",searchTerms:"検索キーワード",searchTermsDesc:"フィードをパーソナライズするために最大5つの検索トピックを定義",addTerm:"キーワードを追加",removeTerm:"削除",maxTerms:"最大5つの検索キーワードが許可されています",termExists:"この検索キーワードはすでに存在します",placeholder:"例：'人工知能'、'気候ニュース'",learnedPreferences:"学習した設定",likedTopics:"お気に入りのトピック",dislikedTopics:"嫌いなトピック",stashToLearn:"アイテムを保存してフィードが好みを学習するのを助ける",trashToLearn:"アイテムを削除してフィードが避けるべきものを学習するのを助ける",tips:"💡 より良いフィードのためのヒント",tipSpecific:"検索キーワードは具体的に",tipStash:"興味深いアイテムを保存",tipTrash:"無関係なアイテムを削除して品質を向上",tipMix:"多様性のために広範で具体的なトピックを混ぜる"}},Y8={title:"クイズ",startQuiz:"クイズを開始",nextQuestion:"次の質問",previousQuestion:"前へ",submitAnswer:"回答を送信",viewResults:"結果を見る",retakeQuiz:"クイズをやり直す",score:"スコア",correct:"正解",incorrect:"不正解",question:"質問",of:"の",yourAnswer:"あなたの回答",correctAnswer:"正解",explanation:"説明",generating:"クイズを生成中...",noQuizzes:"まだクイズがありません",emptyMessage:"保存したスニペットまたはフィードアイテムからクイズを生成",performance:"クイズパフォーマンス",totalQuizzes:"合計クイズ",averageScore:"平均スコア",questionsAnswered:"回答した質問",statistics:"クイズ統計",subtitle:"学習の進捗とクイズのパフォーマンスを追跡",createNewQuiz:"新しいクイズを作成",recentQuizzes:"最近のクイズ",noQuizzesYet:"まだ完了したクイズがありません",noQuizzesDescription:"SWAGに保存されたコンテンツからクイズを受けて、ここで統計を確認してください",goToSwag:"SWAGへ移動",backToChat:"チャットに戻る",loadingStats:"統計を読み込み中...",errorLoadingStats:"クイズ統計の読み込みに失敗しました",confirmDelete:"クイズ'{{title}}'を削除してもよろしいですか？",quizDeleted:"クイズが正常に削除されました",errorDeletingQuiz:"クイズの削除に失敗しました",deleteQuiz:"クイズを削除",today:"今日",yesterday:"昨日",daysAgo:"{{days}}日前",snippetCount:"{{count}}個のスニペット",snippetCount_plural:"{{count}}個のスニペット",enriched:"エンリッチ済み",notSynced:"未同期",highestScore:"最高スコア",lowestScore:"最低スコア"},Q8={common:M8,auth:O8,chat:j8,planning:B8,settings:F8,languages:z8,billing:U8,errors:$8,swag:q8,tts:H8,playlist:G8,tools:W8,feed:V8,quiz:Y8},K8={save:"حفظ",cancel:"إلغاء",delete:"حذف",edit:"تعديل",close:"إغلاق",loading:"جار التحميل...",error:"خطأ",success:"نجاح",confirm:"تأكيد",back:"رجوع",next:"التالي",submit:"إرسال",clear:"مسح",search:"بحث",filter:"تصفية",export:"تصدير",import:"استيراد",download:"تحميل",upload:"رفع",copy:"نسخ",paste:"لصق",cut:"قص",undo:"تراجع",redo:"إعادة",select:"تحديد",selectAll:"تحديد الكل",deselectAll:"إلغاء تحديد الكل"},X8={signIn:"تسجيل الدخول باستخدام Google",signOut:"تسجيل الخروج",authRequired:"المصادقة مطلوبة لاستخدام هذا التطبيق",tokenExpired:"انتهت صلاحية جلستك. يرجى تسجيل الدخول مرة أخرى.",welcomeBack:"مرحبًا بعودتك!",signInPrompt:"تسجيل الدخول للمتابعة",signInRequired:"يجب عليك تسجيل الدخول لاستخدام هذه الميزة",signingIn:"جاري تسجيل الدخول...",signingOut:"جاري تسجيل الخروج...",researchAgent:"وكيل البحث",tagline:"مساعد بحث مدعوم بالذكاء الاصطناعي",secureAuth:"مصادقة آمنة من Google",whyChooseTitle:"لماذا تختار Research Agent؟",whyChooseIntro:"على عكس روبوتات الدردشة القياسية بالذكاء الاصطناعي التي تجيب على الأسئلة ببساطة، Research Agent هو رفيقك الشامل للبحث المصمم للتحقيق العميق وبناء المعرفة.",keyAdvantagesTitle:"المزايا الرئيسية:",webConnected:"ذكاء متصل بالويب",webConnectedDesc:"البحث على الويب في الوقت الفعلي واستخراج المحتوى يضمنان معلومات حالية ودقيقة - وليس بيانات تدريب قديمة",multiTool:"تنسيق متعدد الأدوات",multiToolDesc:"يجمع بسلاسة بين البحث على الويب وتنفيذ التعليمات البرمجية ونصوص YouTube وتوليد الصور وتحليل المستندات في محادثة واحدة",knowledgeBase:"تكامل قاعدة المعرفة",knowledgeBaseDesc:"احفظ النتائج في قاعدة المعرفة الشخصية الخاصة بك، وأنشئ مقتطفات، وقم ببناء وثائق بحثية شاملة بمرور الوقت",advancedPlanning:"تخطيط متقدم",advancedPlanningDesc:"قم بإنشاء خطط بحث منظمة مع شخصيات خبراء واستراتيجيات بحث ومناهج منهجية",costEffective:"اختيار نموذج ذكي",costEffectiveDesc:"اختيار تلقائي للنماذج التي تنجز المهمة بشكل اقتصادي أو قوي بناءً على استراتيجية الاختيار. أحضر مفاتيحك الخاصة لتوفير 25%",transparency:"شفافية كاملة",transparencyDesc:"تتبع كل استدعاء API واستخدام الرموز والتكلفة في لوحة الفوترة في الوقت الفعلي",perfectFor:"مثالي لـ: البحث الأكاديمي، تحليل السوق، إنشاء المحتوى، التوثيق الفني، المعلومات التنافسية، وأي مهمة تتطلب تحقيقًا شاملاً."},J8={placeholder:"اكتب رسالتك هنا...",send:"إرسال",retry:"Retry",stop:"إيقاف",thinking:"جاري التفكير...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"تحرير",delete:"حذف",copy:"نسخ",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"تحديد الكل",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},Z8={title:"تخطيط البحث",query:"Research Query",generatePlan:"إنشاء خطة",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},ez={title:"الإعدادات",language:"اللغة",selectLanguage:"اختر اللغة",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"صوت",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},tz={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},rz={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},nz={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},az={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},iz={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},sz={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},oz={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},lz={title:"التغذية",generateFeed:"توليد التغذية",generating:"جاري التوليد...",refresh:"تحديث",noItems:"لا توجد عناصر بعد",emptyMessage:"ستظهر تغذيتك الشخصية هنا",emptySubMessage:"سنقوم بإنشاء محتوى بناءً على مقتطفاتك المحفوظة واهتماماتك",didYouKnow:"هل كنت تعلم",questionAnswer:"سؤال وجواب",stash:"حفظ",stashed:"محفوظ",trash:"حذف",quiz:"اختبار",swipeLeft:"اسحب لليسار للحذف",swipeRight:"اسحب لليمين للحفظ",showMore:"عرض المزيد",showLess:"عرض أقل",sources:"المصادر",topics:"المواضيع",settings:{title:"إعدادات التغذية",searchTerms:"مصطلحات البحث",searchTermsDesc:"حدد ما يصل إلى 5 مواضيع بحث لتخصيص تغذيتك",addTerm:"إضافة مصطلح",removeTerm:"إزالة",maxTerms:"الحد الأقصى 5 مصطلحات بحث",termExists:"مصطلح البحث هذا موجود بالفعل",placeholder:"مثال: 'الذكاء الاصطناعي', 'أخبار المناخ'",learnedPreferences:"التفضيلات المكتسبة",likedTopics:"المواضيع المفضلة",dislikedTopics:"المواضيع غير المفضلة",stashToLearn:"احفظ العناصر لمساعدة التغذية على معرفة ما تفضله",trashToLearn:"احذف العناصر لمساعدة التغذية على معرفة ما يجب تجنبه",tips:"💡 نصائح لتغذية أفضل",tipSpecific:"كن محددًا مع مصطلحات البحث",tipStash:"احفظ العناصر التي تجدها مثيرة للاهتمام",tipTrash:"احذف العناصر غير ذات الصلة لتحسين الجودة",tipMix:"امزج المواضيع الواسعة والمحددة للتنوع"}},cz={title:"اختبار",startQuiz:"بدء الاختبار",nextQuestion:"السؤال التالي",previousQuestion:"السابق",submitAnswer:"إرسال الإجابة",viewResults:"عرض النتائج",retakeQuiz:"إعادة الاختبار",score:"النتيجة",correct:"صحيح",incorrect:"خطأ",question:"سؤال",of:"من",yourAnswer:"إجابتك",correctAnswer:"الإجابة الصحيحة",explanation:"التفسير",generating:"جاري إنشاء الاختبار...",noQuizzes:"لا توجد اختبارات بعد",emptyMessage:"قم بإنشاء اختبار من أي مقتطف محفوظ أو عنصر تغذية",performance:"أداء الاختبار",totalQuizzes:"إجمالي الاختبارات",averageScore:"متوسط الدرجات",questionsAnswered:"الأسئلة المجاب عنها",statistics:"إحصائيات الاختبار",subtitle:"تتبع تقدم التعلم وأداء الاختبارات",createNewQuiz:"إنشاء اختبار جديد",recentQuizzes:"الاختبارات الأخيرة",noQuizzesYet:"لا توجد اختبارات مكتملة بعد",noQuizzesDescription:"قم بإجراء اختبار من المحتوى المحفوظ في SWAG لرؤية إحصائياتك هنا",goToSwag:"الانتقال إلى SWAG",backToChat:"العودة إلى الدردشة",loadingStats:"جارٍ تحميل الإحصائيات...",errorLoadingStats:"فشل تحميل إحصائيات الاختبار",confirmDelete:"هل أنت متأكد من أنك تريد حذف الاختبار '{{title}}'؟",quizDeleted:"تم حذف الاختبار بنجاح",errorDeletingQuiz:"فشل حذف الاختبار",deleteQuiz:"حذف الاختبار",today:"اليوم",yesterday:"أمس",daysAgo:"منذ {{days}} أيام",snippetCount:"{{count}} مقتطف",snippetCount_plural:"{{count}} مقتطفات",enriched:"محسّن",notSynced:"غير متزامن",highestScore:"أعلى درجة",lowestScore:"أدنى درجة"},uz={common:K8,auth:X8,chat:J8,planning:Z8,settings:ez,languages:tz,billing:rz,errors:nz,swag:az,tts:iz,playlist:sz,tools:oz,feed:lz,quiz:cz},dz={save:"Opslaan",cancel:"Annuleren",delete:"Verwijderen",edit:"Bewerken",close:"Sluiten",loading:"Laden...",error:"Fout",success:"Succes",confirm:"Bevestigen",back:"Terug",next:"Volgende",submit:"Verzenden",clear:"Wissen",search:"Zoeken",filter:"Filteren",export:"Exporteren",import:"Importeren",download:"Downloaden",upload:"Uploaden",copy:"Kopiëren",paste:"Plakken",cut:"Knippen",undo:"Ongedaan maken",redo:"Opnieuw",select:"Selecteren",selectAll:"Alles selecteren",deselectAll:"Alles deselecteren"},hz={signIn:"Inloggen met Google",signOut:"Uitloggen",authRequired:"Authenticatie is vereist om deze applicatie te gebruiken",tokenExpired:"Uw sessie is verlopen. Log opnieuw in.",welcomeBack:"Welkom terug!",signInPrompt:"Inloggen om door te gaan",signInRequired:"U moet inloggen om deze functie te gebruiken",signingIn:"Inloggen...",signingOut:"Uitloggen...",researchAgent:"Onderzoeksagent",tagline:"AI-aangedreven onderzoeksassistent",secureAuth:"Veilige authenticatie mogelijk gemaakt door Google",whyChooseTitle:"Waarom kiezen voor Research Agent?",whyChooseIntro:"In tegenstelling tot standaard AI-chatbots die simpelweg vragen beantwoorden, is Research Agent uw uitgebreide onderzoekspartner gebouwd voor diepgaand onderzoek en kennisopbouw.",keyAdvantagesTitle:"Belangrijkste Voordelen:",webConnected:"Web-verbonden Intelligentie",webConnectedDesc:"Real-time webzoeken en content-extractie zorgen voor actuele, nauwkeurige informatie – geen verouderde trainingsgegevens",multiTool:"Multi-Tool Orkestratie",multiToolDesc:"Combineert naadloos webzoeken, code-uitvoering, YouTube-transcripties, beeldgeneratie en documentanalyse in één gesprek",knowledgeBase:"Kennisbank Integratie",knowledgeBaseDesc:"Sla bevindingen op in uw persoonlijke kennisbank, creëer fragmenten en bouw uitgebreide onderzoeksdocumenten in de loop van de tijd",advancedPlanning:"Geavanceerde Planning",advancedPlanningDesc:"Genereer gestructureerde onderzoeksplannen met expert-persona's, zoekstrategieën en methodologische benaderingen",costEffective:"Slimme Modelselectie",costEffectiveDesc:"Automatische selectie van modellen die het werk economisch of krachtig uitvoeren op basis van de selectiestrategie. Gebruik je eigen sleutels om 25% te besparen",transparency:"Volledige Transparantie",transparencyDesc:"Volg elke API-aanroep, token-gebruik en kosten in real-time facturatie-dashboard",perfectFor:"Perfect voor: Academisch onderzoek, marktanalyse, contentcreatie, technische documentatie, competitieve intelligentie en elke taak die grondig onderzoek vereist."},pz={placeholder:"Typ hier uw bericht...",send:"Verzenden",retry:"Opnieuw proberen",stop:"Stoppen",thinking:"Denken...",generating:"Antwoord genereren...",newChat:"Nieuwe chat",clearHistory:"Geschiedenis wissen",loadChat:"Chat laden",systemPrompt:"Systeemprompt",customInstructions:"Aangepaste instructies",temperature:"Temperatuur",maxTokens:"Max tokens",model:"Model",provider:"Provider",history:"Chatgeschiedenis",continue:"Doorgaan",regenerate:"Opnieuw genereren",edit:"Bewerken",delete:"Verwijderen",copy:"Kopiëren",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Log in om deze functie te gebruiken",providerRequired:"Configureer minimaal één provider in Instellingen",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Alles selecteren",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},gz={title:"Onderzoeksplanning",query:"Onderzoeksvraag",generatePlan:"Plan genereren",savePlan:"Plan opslaan",loadSaved:"Load Saved",transferToChat:"Overdragen naar chat",clearAll:"Alles wissen",debug:"Debug",planning:"Plannen...",planGenerated:"Plan succesvol gegenereerd",noPlan:"Nog geen plan gegenereerd",enterQuery:"Voer uw onderzoeksvraag in",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},fz={title:"Instellingen",language:"Taal",selectLanguage:"Selecteer taal",providers:"Providers",cloudSync:"Cloudsynchronisatie",billing:"Facturering",general:"Algemeen",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"Stem",tts:"TTS",rag:"RAG"},appearance:"Uiterlijk",theme:"Thema",darkMode:"Donkere modus",lightMode:"Lichte modus",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},mz={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},yz={title:"Facturering",balance:"Saldo",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Kosten",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},bz={generic:"Er is een fout opgetreden",network:"Netwerkfout",timeout:"Request timed out",unauthorized:"Ongeautoriseerde toegang",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Probeer het opnieuw"},xz={title:"Kennisbank",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Zoek fragmenten...",noSnippets:"Geen fragmenten gevonden",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},vz={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},wz={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},Sz={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},Tz={title:"Feed",generateFeed:"Feed Genereren",generating:"Genereren...",refresh:"Vernieuwen",noItems:"Nog geen items",emptyMessage:"Je gepersonaliseerde feed verschijnt hier",emptySubMessage:"We genereren content op basis van je opgeslagen snippets en interesses",didYouKnow:"Wist je dat",questionAnswer:"Vraag & Antwoord",stash:"Opslaan",stashed:"Opgeslagen",trash:"Verwijderen",quiz:"Quiz",swipeLeft:"Veeg naar links om te verwijderen",swipeRight:"Veeg naar rechts om op te slaan",showMore:"Meer tonen",showLess:"Minder tonen",sources:"Bronnen",topics:"Onderwerpen",settings:{title:"Feed Instellingen",searchTerms:"Zoektermen",searchTermsDesc:"Definieer maximaal 5 zoekonderwerpen om je feed te personaliseren",addTerm:"Term Toevoegen",removeTerm:"Verwijderen",maxTerms:"Maximaal 5 zoektermen toegestaan",termExists:"Deze zoekterm bestaat al",placeholder:"bijv. 'kunstmatige intelligentie', 'klimaatnieuws'",learnedPreferences:"Geleerde Voorkeuren",likedTopics:"Favoriete Onderwerpen",dislikedTopics:"Ongewenste Onderwerpen",stashToLearn:"Sla items op om de feed te helpen leren wat je leuk vindt",trashToLearn:"Verwijder items om de feed te helpen leren wat te vermijden",tips:"💡 Tips voor Betere Feeds",tipSpecific:"Wees specifiek met zoektermen",tipStash:"Sla interessante items op",tipTrash:"Verwijder irrelevante items om de kwaliteit te verbeteren",tipMix:"Mix brede en specifieke onderwerpen voor varieteit"}},kz={title:"Quiz",startQuiz:"Quiz Starten",nextQuestion:"Volgende Vraag",previousQuestion:"Vorige",submitAnswer:"Antwoord Indienen",viewResults:"Resultaten Bekijken",retakeQuiz:"Quiz Herhalen",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Vraag",of:"van",yourAnswer:"Jouw antwoord",correctAnswer:"Juiste antwoord",explanation:"Uitleg",generating:"Quiz genereren...",noQuizzes:"Nog geen quizzen",emptyMessage:"Genereer een quiz van een opgeslagen snippet of feed item",performance:"Quiz Prestaties",totalQuizzes:"Totaal Quizzen",averageScore:"Gemiddelde Score",questionsAnswered:"Beantwoorde Vragen",statistics:"Quiz Statistieken",subtitle:"Volg je leervoortgang en quizprestaties",createNewQuiz:"Nieuwe Quiz Maken",recentQuizzes:"Recente Quizzen",noQuizzesYet:"Nog geen voltooide quizzen",noQuizzesDescription:"Doe een quiz vanuit je opgeslagen inhoud in SWAG om je statistieken hier te zien",goToSwag:"Ga naar SWAG",backToChat:"Terug naar Chat",loadingStats:"Statistieken laden...",errorLoadingStats:"Fout bij het laden van quizstatistieken",confirmDelete:"Weet je zeker dat je de quiz '{{title}}' wilt verwijderen?",quizDeleted:"Quiz succesvol verwijderd",errorDeletingQuiz:"Fout bij het verwijderen van quiz",deleteQuiz:"Quiz verwijderen",today:"Vandaag",yesterday:"Gisteren",daysAgo:"{{days}} dagen geleden",snippetCount:"{{count}} fragment",snippetCount_plural:"{{count}} fragmenten",enriched:"Verrijkt",notSynced:"Niet Gesynchroniseerd",highestScore:"Hoogste Score",lowestScore:"Laagste Score"},Ez={common:dz,auth:hz,chat:pz,planning:gz,settings:fz,languages:mz,billing:yz,errors:bz,swag:xz,tts:vz,playlist:wz,tools:Sz,feed:Tz,quiz:kz},Cz={save:"Salvar",cancel:"Cancelar",delete:"Excluir",edit:"Editar",close:"Fechar",loading:"Carregando...",error:"Erro",success:"Sucesso",confirm:"Confirmar",back:"Voltar",next:"Próximo",submit:"Enviar",clear:"Limpar",search:"Buscar",filter:"Filtrar",export:"Exportar",import:"Importar",download:"Baixar",upload:"Enviar",copy:"Copiar",paste:"Colar",cut:"Recortar",undo:"Desfazer",redo:"Refazer",select:"Selecionar",selectAll:"Selecionar tudo",deselectAll:"Desselecionar tudo"},_z={signIn:"Entrar com Google",signOut:"Sair",authRequired:"A autenticação é necessária para usar este aplicativo",tokenExpired:"Sua sessão expirou. Por favor, entre novamente.",welcomeBack:"Bem-vindo de volta!",signInPrompt:"Entrar para continuar",signInRequired:"Você deve entrar para usar este recurso",signingIn:"Entrando...",signingOut:"Saindo...",researchAgent:"Agente de Pesquisa",tagline:"Assistente de pesquisa com IA",secureAuth:"Autenticação segura fornecida pelo Google",whyChooseTitle:"Por que escolher o Research Agent?",whyChooseIntro:"Ao contrário dos chatbots de IA padrão que simplesmente respondem perguntas, o Research Agent é seu companheiro de pesquisa abrangente criado para investigação profunda e construção de conhecimento.",keyAdvantagesTitle:"Principais Vantagens:",webConnected:"Inteligência Conectada à Web",webConnectedDesc:"Pesquisa web em tempo real e extração de conteúdo garantem informações atuais e precisas – não dados de treinamento desatualizados",multiTool:"Orquestração Multi-Ferramentas",multiToolDesc:"Combina perfeitamente pesquisa web, execução de código, transcrições do YouTube, geração de imagens e análise de documentos em uma única conversa",knowledgeBase:"Integração de Base de Conhecimento",knowledgeBaseDesc:"Salve descobertas em sua base de conhecimento pessoal, crie trechos e construa documentos de pesquisa abrangentes ao longo do tempo",advancedPlanning:"Planejamento Avançado",advancedPlanningDesc:"Gere planos de pesquisa estruturados com personas especializadas, estratégias de busca e abordagens metodológicas",costEffective:"Seleção Inteligente de Modelos",costEffectiveDesc:"Seleção automática de modelos que fazem o trabalho de forma econômica ou poderosa com base na estratégia de seleção. Traga suas próprias chaves para economizar 25%",transparency:"Transparência Total",transparencyDesc:"Rastreie cada chamada de API, uso de tokens e custo no painel de cobrança em tempo real",perfectFor:"Perfeito para: Pesquisa acadêmica, análise de mercado, criação de conteúdo, documentação técnica, inteligência competitiva e qualquer tarefa que exija investigação minuciosa."},Az={placeholder:"Digite sua mensagem aqui...",send:"Enviar",retry:"Tentar novamente",stop:"Parar",thinking:"Pensando...",generating:"Gerando resposta...",newChat:"Nova conversa",clearHistory:"Limpar histórico",loadChat:"Carregar conversa",systemPrompt:"Prompt do sistema",customInstructions:"Instruções personalizadas",temperature:"Temperatura",maxTokens:"Máximo de tokens",model:"Modelo",provider:"Provedor",history:"Histórico de conversa",continue:"Continuar",regenerate:"Regenerar",edit:"Editar",delete:"Excluir",copy:"Copiar",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Por favor, entre para usar este recurso",providerRequired:"Configure pelo menos um provedor nas Configurações",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Selecionar tudo",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},Nz={title:"Planejamento de pesquisa",query:"Consulta de pesquisa",generatePlan:"Gerar plano",savePlan:"Salvar plano",loadSaved:"Load Saved",transferToChat:"Transferir para chat",clearAll:"Limpar tudo",debug:"Debug",planning:"Planejando...",planGenerated:"Plano gerado com sucesso",noPlan:"Nenhum plano gerado ainda",enterQuery:"Digite sua consulta de pesquisa",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},Lz={title:"Configurações",language:"Idioma",selectLanguage:"Selecionar idioma",providers:"Provedores",cloudSync:"Sincronização na nuvem",billing:"Faturamento",general:"Geral",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"Voz",tts:"TTS",rag:"RAG"},appearance:"Aparência",theme:"Tema",darkMode:"Modo escuro",lightMode:"Modo claro",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},Pz={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},Rz={title:"Faturamento",balance:"Saldo",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Custo",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},Iz={generic:"Ocorreu um erro",network:"Erro de rede",timeout:"Request timed out",unauthorized:"Acesso não autorizado",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Por favor, tente novamente"},Dz={title:"Base de conhecimento",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Buscar trechos...",noSnippets:"Nenhum trecho encontrado",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},Mz={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},Oz={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},jz={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},Bz={title:"Feed",generateFeed:"Gerar Feed",generating:"Gerando...",refresh:"Atualizar",noItems:"Ainda sem itens",emptyMessage:"Seu feed personalizado aparecerá aqui",emptySubMessage:"Vamos gerar conteúdo baseado em seus trechos salvos e interesses",didYouKnow:"Você sabia",questionAnswer:"Pergunta e Resposta",stash:"Guardar",stashed:"Guardado",trash:"Excluir",quiz:"Quiz",swipeLeft:"Deslize para a esquerda para excluir",swipeRight:"Deslize para a direita para guardar",showMore:"Mostrar mais",showLess:"Mostrar menos",sources:"Fontes",topics:"Tópicos",settings:{title:"Configurações do Feed",searchTerms:"Termos de Busca",searchTermsDesc:"Defina até 5 tópicos de busca para personalizar seu feed",addTerm:"Adicionar Termo",removeTerm:"Remover",maxTerms:"Máximo de 5 termos de busca permitidos",termExists:"Este termo de busca já existe",placeholder:"ex. 'inteligência artificial', 'notícias climáticas'",learnedPreferences:"Preferências Aprendidas",likedTopics:"Tópicos Favoritos",dislikedTopics:"Tópicos Indesejados",stashToLearn:"Guarde itens para ajudar o feed a aprender o que você gosta",trashToLearn:"Exclua itens para ajudar o feed a aprender o que evitar",tips:"💡 Dicas para Feeds Melhores",tipSpecific:"Seja específico com os termos de busca",tipStash:"Guarde itens que você acha interessantes",tipTrash:"Exclua itens irrelevantes para melhorar a qualidade",tipMix:"Misture tópicos amplos e específicos para variedade"}},Fz={title:"Quiz",startQuiz:"Iniciar Quiz",nextQuestion:"Próxima Pergunta",previousQuestion:"Anterior",submitAnswer:"Enviar Resposta",viewResults:"Ver Resultados",retakeQuiz:"Refazer Quiz",score:"Pontuação",correct:"Correto",incorrect:"Incorreto",question:"Pergunta",of:"de",yourAnswer:"Sua resposta",correctAnswer:"Resposta correta",explanation:"Explicação",generating:"Gerando quiz...",noQuizzes:"Ainda sem quizzes",emptyMessage:"Gere um quiz de qualquer trecho salvo ou item do feed",performance:"Desempenho no Quiz",totalQuizzes:"Total de Quizzes",averageScore:"Pontuação Média",questionsAnswered:"Perguntas Respondidas",statistics:"Estatísticas do Quiz",subtitle:"Acompanhe seu progresso de aprendizado e desempenho em quizzes",createNewQuiz:"Criar Novo Quiz",recentQuizzes:"Quizzes Recentes",noQuizzesYet:"Nenhum quiz completado ainda",noQuizzesDescription:"Faça um quiz do seu conteúdo salvo no SWAG para ver suas estatísticas aqui",goToSwag:"Ir para SWAG",backToChat:"Voltar ao Chat",loadingStats:"Carregando estatísticas...",errorLoadingStats:"Falha ao carregar estatísticas do quiz",confirmDelete:"Tem certeza de que deseja excluir o quiz '{{title}}'?",quizDeleted:"Quiz excluído com sucesso",errorDeletingQuiz:"Falha ao excluir quiz",deleteQuiz:"Excluir quiz",today:"Hoje",yesterday:"Ontem",daysAgo:"Há {{days}} dias",snippetCount:"{{count}} trecho",snippetCount_plural:"{{count}} trechos",enriched:"Enriquecido",notSynced:"Não Sincronizado",highestScore:"Pontuação Mais Alta",lowestScore:"Pontuação Mais Baixa"},zz={common:Cz,auth:_z,chat:Az,planning:Nz,settings:Lz,languages:Pz,billing:Rz,errors:Iz,swag:Dz,tts:Mz,playlist:Oz,tools:jz,feed:Bz,quiz:Fz},Uz={save:"Сохранить",cancel:"Отмена",delete:"Удалить",edit:"Редактировать",close:"Закрыть",loading:"Загрузка...",error:"Ошибка",success:"Успешно",confirm:"Подтвердить",back:"Назад",next:"Далее",submit:"Отправить",clear:"Очистить",search:"Поиск",filter:"Фильтр",export:"Экспорт",import:"Импорт",download:"Скачать",upload:"Загрузить",copy:"Копировать",paste:"Вставить",cut:"Вырезать",undo:"Отменить",redo:"Повторить",select:"Выбрать",selectAll:"Выбрать все",deselectAll:"Снять выделение"},$z={signIn:"Войти через Google",signOut:"Выйти",authRequired:"Для использования этого приложения требуется аутентификация",tokenExpired:"Ваша сессия истекла. Пожалуйста, войдите снова.",welcomeBack:"С возвращением!",signInPrompt:"Войдите, чтобы продолжить",signInRequired:"Вы должны войти, чтобы использовать эту функцию",signingIn:"Вход...",signingOut:"Выход...",researchAgent:"Исследовательский агент",tagline:"Исследовательский помощник на базе ИИ",secureAuth:"Безопасная аутентификация от Google",whyChooseTitle:"Почему стоит выбрать Research Agent?",whyChooseIntro:"В отличие от стандартных AI-чатботов, которые просто отвечают на вопросы, Research Agent — это ваш всеобъемлющий помощник по исследованиям, созданный для глубокого анализа и построения знаний.",keyAdvantagesTitle:"Ключевые Преимущества:",webConnected:"Интеллект, Подключенный к Интернету",webConnectedDesc:"Поиск в реальном времени и извлечение контента обеспечивают актуальную, точную информацию — не устаревшие обучающие данные",multiTool:"Оркестрация Нескольких Инструментов",multiToolDesc:"Беспрепятственно комбинирует веб-поиск, выполнение кода, транскрипты YouTube, генерацию изображений и анализ документов в одном разговоре",knowledgeBase:"Интеграция Базы Знаний",knowledgeBaseDesc:"Сохраняйте находки в личную базу знаний, создавайте фрагменты и создавайте всеобъемлющие исследовательские документы со временем",advancedPlanning:"Расширенное Планирование",advancedPlanningDesc:"Генерируйте структурированные планы исследований с экспертными персонажами, стратегиями поиска и методологическими подходами",costEffective:"Интеллектуальный Выбор Моделей",costEffectiveDesc:"Автоматический выбор моделей, которые выполняют работу экономично или мощно на основе стратегии выбора. Используйте свои собственные ключи, чтобы сэкономить 25%",transparency:"Полная Прозрачность",transparencyDesc:"Отслеживайте каждый вызов API, использование токенов и стоимость на панели выставления счетов в реальном времени",perfectFor:"Идеально для: Академических исследований, анализа рынка, создания контента, технической документации, конкурентной разведки и любой задачи, требующей тщательного исследования."},qz={placeholder:"Введите ваше сообщение здесь...",send:"Отправить",retry:"Повторить",stop:"Остановить",thinking:"Думаю...",generating:"Генерация ответа...",newChat:"Новый чат",clearHistory:"Очистить историю",loadChat:"Загрузить чат",systemPrompt:"Системный промпт",customInstructions:"Пользовательские инструкции",temperature:"Температура",maxTokens:"Макс. токены",model:"Модель",provider:"Провайдер",history:"История чата",continue:"Продолжить",regenerate:"Перегенерировать",edit:"Редактировать",delete:"Удалить",copy:"Копировать",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Пожалуйста, войдите, чтобы использовать эту функцию",providerRequired:"Настройте хотя бы одного провайдера в Настройках",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:"🔍 Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line, ↑↓ for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Выбрать всё",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},Hz={title:"Планирование исследования",query:"Запрос исследования",generatePlan:"Создать план",savePlan:"Сохранить план",loadSaved:"Load Saved",transferToChat:"Перенести в чат",clearAll:"Очистить все",debug:"Debug",planning:"Планирование...",planGenerated:"План успешно создан",noPlan:"План еще не создан",enterQuery:"Введите ваш запрос исследования",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:"📚 Comprehensive Research Plan",analysisSummary:"📊 Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:"🎭 Expert Persona",searchQueries:"🔍 Search Queries:",researchQuestions:"📋 Research Questions:",suggestedSources:"🌐 Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:"⚙️ Research Methodology:",enhancedSystemPrompt:"🤖 Enhanced System Prompt:",enhancedUserPrompt:"💬 Enhanced User Prompt:",debugRawLlmResponse:"🔍 Debug: Raw LLM Response Fields",longFormDocumentPlan:"📝 Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:"📑 Document Structure:",keywords:"Keywords:",workflow:"⚙️ Workflow:",needMoreInfo:"❓ Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:"📋 More Info Required",planType:"Plan Type:",detectedComplexityPatterns:"🔍 Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:"⚙️ Suggested Workflow:",requiredTools:"🛠️ Required Tools:",guidanceQuestions:"💡 Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:"💡 Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:"🎯 Generate Detailed Execution Plan",forcePlan:"⚡ Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:"🔄 Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},Gz={title:"Настройки",language:"Язык",selectLanguage:"Выберите язык",providers:"Провайдеры",cloudSync:"Облачная синхронизация",billing:"Биллинг",general:"Общие",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",voice:"Голос",tts:"TTS",rag:"RAG"},appearance:"Внешний вид",theme:"Тема",darkMode:"Темный режим",lightMode:"Светлый режим",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},Wz={en:"English",es:"Español",fr:"Français",de:"Deutsch",zh:"中文",ja:"日本語",ar:"العربية",nl:"Nederlands",pt:"Português",ru:"Русский"},Vz={title:"Биллинг",balance:"Баланс",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Стоимость",tokens:"Токены",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:"✅ Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:"❌ Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:"📦 Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:"🔗 Request Group ({{count}} transactions)",signInRequired:"🔐 Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:"📋 How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:"💡 Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:"🔧 Debug Info",loading:"Loading billing data...",errorLoading:"⚠️ Error Loading Billing Data",retry:"🔄 Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:"📊 No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:"🔄 Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:"💳 Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:"💡 Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:"⚠️ PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:"⚠️ Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:"⏮️ First",prev:"◀️ Prev",next:"Next ▶️",last:"Last ⏭️",types:{chat:"Chat",embedding:"Embedding",guardrail_input:"🛡️ Guardrail Input",guardrail_output:"🛡️ Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:"🖼️ Image Generation",tts:"🎙️ Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},Yz={generic:"Произошла ошибка",network:"Сетевая ошибка",timeout:"Request timed out",unauthorized:"Несанкционированный доступ",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Пожалуйста, попробуйте снова"},Qz={title:"База знаний",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Поиск фрагментов...",noSnippets:"Фрагменты не найдены",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},Kz={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},Xz={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},Jz={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},Zz={title:"Лента",generateFeed:"Создать Ленту",generating:"Создание...",refresh:"Обновить",noItems:"Пока нет элементов",emptyMessage:"Ваша персонализированная лента появится здесь",emptySubMessage:"Мы создадим контент на основе ваших сохраненных фрагментов и интересов",didYouKnow:"А вы знали",questionAnswer:"Вопрос и Ответ",stash:"Сохранить",stashed:"Сохранено",trash:"Удалить",quiz:"Викторина",swipeLeft:"Смахните влево, чтобы удалить",swipeRight:"Смахните вправо, чтобы сохранить",showMore:"Показать больше",showLess:"Показать меньше",sources:"Источники",topics:"Темы",settings:{title:"Настройки Ленты",searchTerms:"Поисковые Запросы",searchTermsDesc:"Определите до 5 тем поиска для персонализации вашей ленты",addTerm:"Добавить Запрос",removeTerm:"Удалить",maxTerms:"Максимум 5 поисковых запросов",termExists:"Этот поисковый запрос уже существует",placeholder:"например, 'искусственный интеллект', 'климатические новости'",learnedPreferences:"Изученные Предпочтения",likedTopics:"Любимые Темы",dislikedTopics:"Нежелательные Темы",stashToLearn:"Сохраняйте элементы, чтобы помочь ленте узнать, что вам нравится",trashToLearn:"Удаляйте элементы, чтобы помочь ленте узнать, чего избегать",tips:"💡 Советы для Лучших Лент",tipSpecific:"Будьте конкретны с поисковыми запросами",tipStash:"Сохраняйте интересные элементы",tipTrash:"Удаляйте нерелевантные элементы для улучшения качества",tipMix:"Смешивайте широкие и конкретные темы для разнообразия"}},e9={title:"Викторина",startQuiz:"Начать Викторину",nextQuestion:"Следующий Вопрос",previousQuestion:"Назад",submitAnswer:"Отправить Ответ",viewResults:"Посмотреть Результаты",retakeQuiz:"Пройти Заново",score:"Результат",correct:"Правильно",incorrect:"Неправильно",question:"Вопрос",of:"из",yourAnswer:"Ваш ответ",correctAnswer:"Правильный ответ",explanation:"Объяснение",generating:"Создание викторины...",noQuizzes:"Пока нет викторин",emptyMessage:"Создайте викторину из любого сохраненного фрагмента или элемента ленты",performance:"Результаты Викторины",totalQuizzes:"Всего Викторин",averageScore:"Средний Результат",questionsAnswered:"Отвеченных Вопросов",statistics:"Статистика Викторины",subtitle:"Отслеживайте свой прогресс в обучении и результаты викторин",createNewQuiz:"Создать Новую Викторину",recentQuizzes:"Недавние Викторины",noQuizzesYet:"Пока нет пройденных викторин",noQuizzesDescription:"Пройдите викторину из сохраненного контента в SWAG, чтобы увидеть свою статистику здесь",goToSwag:"Перейти в SWAG",backToChat:"Назад к Чату",loadingStats:"Загрузка статистики...",errorLoadingStats:"Не удалось загрузить статистику викторины",confirmDelete:"Вы уверены, что хотите удалить викторину '{{title}}'?",quizDeleted:"Викторина успешно удалена",errorDeletingQuiz:"Не удалось удалить викторину",deleteQuiz:"Удалить викторину",today:"Сегодня",yesterday:"Вчера",daysAgo:"{{days}} дней назад",snippetCount:"{{count}} фрагмент",snippetCount_plural:"{{count}} фрагментов",enriched:"Обогащено",notSynced:"Не Синхронизировано",highestScore:"Наивысший Балл",lowestScore:"Наименьший Балл"},t9={common:Uz,auth:$z,chat:qz,planning:Hz,settings:Gz,languages:Wz,billing:Vz,errors:Yz,swag:Qz,tts:Kz,playlist:Xz,tools:Jz,feed:Zz,quiz:e9};Oa.use(T3).use(HB).init({resources:{en:{translation:AF},es:{translation:qF},fr:{translation:a8},de:{translation:x8},zh:{translation:D8},ja:{translation:Q8},ar:{translation:uz},nl:{translation:Ez},pt:{translation:zz},ru:{translation:t9}},fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const r9="modulepreload",n9=function(e){return"/"+e},c2={},Rt=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");a=u(r.map(h=>{if(h=n9(h),h in c2)return;c2[h]=!0;const p=h.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":r9,p||(y.as="script"),y.crossOrigin="",y.href=h,l&&y.setAttribute("nonce",l),document.head.appendChild(y),p)return new Promise((b,x)=>{y.addEventListener("load",b),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u2="popstate";function a9(e={}){function t(n,a){let{pathname:i,search:s,hash:l}=n.location;return nw("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ip(a)}return s9(t,r,null,e)}function En(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ks(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function i9(){return Math.random().toString(36).substring(2,10)}function d2(e,t){return{usr:e.state,key:e.key,idx:t}}function nw(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Sd(t):t,state:r,key:t&&t.key||n||i9()}}function Ip({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function s9(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l="POP",u=null,h=p();h==null&&(h=0,s.replaceState({...s.state,idx:h},""));function p(){return(s.state||{idx:null}).idx}function f(){l="POP";let T=p(),k=T==null?null:T-h;h=T,u&&u({action:l,location:v.location,delta:k})}function y(T,k){l="PUSH";let C=nw(v.location,T,k);h=p()+1;let A=d2(C,h),P=v.createHref(C);try{s.pushState(A,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(P)}i&&u&&u({action:l,location:v.location,delta:1})}function b(T,k){l="REPLACE";let C=nw(v.location,T,k);h=p();let A=d2(C,h),P=v.createHref(C);s.replaceState(A,"",P),i&&u&&u({action:l,location:v.location,delta:0})}function x(T){return o9(T)}let v={get action(){return l},get location(){return e(a,s)},listen(T){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(u2,f),u=T,()=>{a.removeEventListener(u2,f),u=null}},createHref(T){return t(a,T)},createURL:x,encodeLocation(T){let k=x(T);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:b,go(T){return s.go(T)}};return v}function o9(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),En(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ip(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function k3(e,t,r="/"){return l9(e,t,r,!1)}function l9(e,t,r,n){let a=typeof t=="string"?Sd(t):t,i=Do(a.pathname||"/",r);if(i==null)return null;let s=E3(e);c9(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let h=v9(i);l=b9(s[u],h,n)}return l}function E3(e,t=[],r=[],n="",a=!1){let i=(s,l,u=a,h)=>{let p={relativePath:h===void 0?s.path||"":h,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&u)return;En(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let f=Po([n,p.relativePath]),y=r.concat(p);s.children&&s.children.length>0&&(En(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),E3(s.children,t,y,f,u)),!(s.path==null&&!s.index)&&t.push({path:f,score:m9(f,s.index),routesMeta:y})};return e.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))i(s,l);else for(let u of C3(s.path))i(s,l,!0,u)}),t}function C3(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=C3(n.join("/")),l=[];return l.push(...s.map(u=>u===""?i:[i,u].join("/"))),a&&l.push(...s),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function c9(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:y9(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var u9=/^:[\w-]+$/,d9=3,h9=2,p9=1,g9=10,f9=-2,h2=e=>e==="*";function m9(e,t){let r=e.split("/"),n=r.length;return r.some(h2)&&(n+=f9),t&&(n+=h9),r.filter(a=>!h2(a)).reduce((a,i)=>a+(u9.test(i)?d9:i===""?p9:g9),n)}function y9(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function b9(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,p=i==="/"?t:t.slice(i.length)||"/",f=Fm({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!f&&h&&r&&!n[n.length-1].route.index&&(f=Fm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:Po([i,f.pathname]),pathnameBase:k9(Po([i,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(i=Po([i,f.pathnameBase]))}return s}function Fm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=x9(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:f},y)=>{if(p==="*"){let x=l[y]||"";s=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[y];return f&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:s,pattern:e}}function x9(e,t=!1,r=!0){ks(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function v9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ks(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Do(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function w9(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Sd(e):e;return{pathname:r?r.startsWith("/")?r:S9(r,t):t,search:E9(n),hash:C9(a)}}function S9(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Hx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T9(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _3(e){let t=T9(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function A3(e,t,r,n=!1){let a;typeof e=="string"?a=Sd(e):(a={...e},En(!a.pathname||!a.pathname.includes("?"),Hx("?","pathname","search",a)),En(!a.pathname||!a.pathname.includes("#"),Hx("#","pathname","hash",a)),En(!a.search||!a.search.includes("#"),Hx("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),f-=1;a.pathname=y.join("/")}l=f>=0?t[f]:"/"}let u=w9(a,l),h=s&&s!=="/"&&s.endsWith("/"),p=(i||s===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Po=e=>e.join("/").replace(/\/\/+/g,"/"),k9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),E9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,C9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var N3=["POST","PUT","PATCH","DELETE"];new Set(N3);var A9=["GET",...N3];new Set(A9);var Td=_.createContext(null);Td.displayName="DataRouter";var B0=_.createContext(null);B0.displayName="DataRouterState";_.createContext(!1);var L3=_.createContext({isTransitioning:!1});L3.displayName="ViewTransition";var N9=_.createContext(new Map);N9.displayName="Fetchers";var L9=_.createContext(null);L9.displayName="Await";var Qs=_.createContext(null);Qs.displayName="Navigation";var tg=_.createContext(null);tg.displayName="Location";var Bo=_.createContext({outlet:null,matches:[],isDataRoute:!1});Bo.displayName="Route";var G1=_.createContext(null);G1.displayName="RouteError";function P9(e,{relative:t}={}){En(rg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=_.useContext(Qs),{hash:a,pathname:i,search:s}=ng(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Po([r,i])),n.createHref({pathname:l,search:s,hash:a})}function rg(){return _.useContext(tg)!=null}function Fo(){return En(rg(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(tg).location}var P3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R3(e){_.useContext(Qs).static||_.useLayoutEffect(e)}function Pl(){let{isDataRoute:e}=_.useContext(Bo);return e?H9():R9()}function R9(){En(rg(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(Td),{basename:t,navigator:r}=_.useContext(Qs),{matches:n}=_.useContext(Bo),{pathname:a}=Fo(),i=JSON.stringify(_3(n)),s=_.useRef(!1);return R3(()=>{s.current=!0}),_.useCallback((u,h={})=>{if(ks(s.current,P3),!s.current)return;if(typeof u=="number"){r.go(u);return}let p=A3(u,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Po([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,i,a,e])}_.createContext(null);function ng(e,{relative:t}={}){let{matches:r}=_.useContext(Bo),{pathname:n}=Fo(),a=JSON.stringify(_3(r));return _.useMemo(()=>A3(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function I9(e,t){return I3(e,t)}function I3(e,t,r,n,a){En(rg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Qs),{matches:s}=_.useContext(Bo),l=s[s.length-1],u=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",f=l&&l.route;{let C=f&&f.path||"";D3(h,!f||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=Fo(),b;if(t){let C=typeof t=="string"?Sd(t):t;En(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=y;let x=b.pathname||"/",v=x;if(p!=="/"){let C=p.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=k3(e,{pathname:v});ks(f||T!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ks(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=B9(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Po([p,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:Po([p,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),s,r,n,a);return t&&k?_.createElement(tg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},k):k}function D9(){let e=q9(),t=_9(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:a},r):null,s)}var M9=_.createElement(D9,null),O9=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?_.createElement(Bo.Provider,{value:this.props.routeContext},_.createElement(G1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j9({routeContext:e,match:t,children:r}){let n=_.useContext(Td);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Bo.Provider,{value:e},r)}function B9(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r?.errors;if(s!=null){let h=i.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);En(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,u=-1;if(r)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:f,errors:y}=r,b=p.route.loader&&!f.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,p,f)=>{let y,b=!1,x=null,v=null;r&&(y=s&&p.route.id?s[p.route.id]:void 0,x=p.route.errorElement||M9,l&&(u<0&&f===0?(D3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):u===f&&(b=!0,v=p.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,f+1)),k=()=>{let C;return y?C=x:b?C=v:p.route.Component?C=_.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,_.createElement(j9,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?_.createElement(O9,{location:r.location,revalidation:r.revalidation,component:x,error:y,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:n}):k()},null)}function W1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F9(e){let t=_.useContext(Td);return En(t,W1(e)),t}function z9(e){let t=_.useContext(B0);return En(t,W1(e)),t}function U9(e){let t=_.useContext(Bo);return En(t,W1(e)),t}function V1(e){let t=U9(e),r=t.matches[t.matches.length-1];return En(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function $9(){return V1("useRouteId")}function q9(){let e=_.useContext(G1),t=z9("useRouteError"),r=V1("useRouteError");return e!==void 0?e:t.errors?.[r]}function H9(){let{router:e}=F9("useNavigate"),t=V1("useNavigate"),r=_.useRef(!1);return R3(()=>{r.current=!0}),_.useCallback(async(a,i={})=>{ks(r.current,P3),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var p2={};function D3(e,t,r){!t&&!p2[e]&&(p2[e]=!0,ks(!1,r))}_.memo(G9);function G9({routes:e,future:t,state:r,unstable_onError:n}){return I3(e,void 0,r,n,t)}function Ki(e){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W9({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){En(!rg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),l=_.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof r=="string"&&(r=Sd(r));let{pathname:u="/",search:h="",hash:p="",state:f=null,key:y="default"}=r,b=_.useMemo(()=>{let x=Do(u,s);return x==null?null:{location:{pathname:x,search:h,hash:p,state:f,key:y},navigationType:n}},[s,u,h,p,f,y,n]);return ks(b!=null,`<Router basename="${s}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:_.createElement(Qs.Provider,{value:l},_.createElement(tg.Provider,{children:t,value:b}))}function V9({children:e,location:t}){return I9(aw(e),t)}function aw(e,t=[]){let r=[];return _.Children.forEach(e,(n,a)=>{if(!_.isValidElement(n))return;let i=[...t,a];if(n.type===_.Fragment){r.push.apply(r,aw(n.props.children,i));return}En(n.type===Ki,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=aw(n.props.children,i)),r.push(s)}),r}var hm="get",pm="application/x-www-form-urlencoded";function F0(e){return e!=null&&typeof e.tagName=="string"}function Y9(e){return F0(e)&&e.tagName.toLowerCase()==="button"}function Q9(e){return F0(e)&&e.tagName.toLowerCase()==="form"}function K9(e){return F0(e)&&e.tagName.toLowerCase()==="input"}function X9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function J9(e,t){return e.button===0&&(!t||t==="_self")&&!X9(e)}function iw(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Z9(e,t){let r=iw(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Of=null;function e7(){if(Of===null)try{new FormData(document.createElement("form"),0),Of=!1}catch{Of=!0}return Of}var t7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gx(e){return e!=null&&!t7.has(e)?(ks(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pm}"`),null):e}function r7(e,t){let r,n,a,i,s;if(Q9(e)){let l=e.getAttribute("action");n=l?Do(l,t):null,r=e.getAttribute("method")||hm,a=Gx(e.getAttribute("enctype"))||pm,i=new FormData(e)}else if(Y9(e)||K9(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(n=u?Do(u,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||hm,a=Gx(e.getAttribute("formenctype"))||Gx(l.getAttribute("enctype"))||pm,i=new FormData(l,e),!e7()){let{name:h,type:p,value:f}=e;if(p==="image"){let y=h?`${h}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else h&&i.append(h,f)}}else{if(F0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=hm,n=null,a=pm,s=e}return i&&a==="text/plain"&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Y1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function n7(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Do(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function a7(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function s7(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let s=await a7(i,r);return s.links?s.links():[]}return[]}));return u7(n.flat(1).filter(i7).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function g2(e,t,r,n,a,i){let s=(u,h)=>r[h]?u.route.id!==r[h].route.id:!0,l=(u,h)=>r[h].pathname!==u.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==u.params["*"];return i==="assets"?t.filter((u,h)=>s(u,h)||l(u,h)):i==="data"?t.filter((u,h)=>{let p=n.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(s(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function o7(e,t,{includeHydrateFallback:r}={}){return l7(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function l7(e){return[...new Set(e)]}function c7(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function u7(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(c7(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function M3(){let e=_.useContext(Td);return Y1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function d7(){let e=_.useContext(B0);return Y1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Q1=_.createContext(void 0);Q1.displayName="FrameworkContext";function O3(){let e=_.useContext(Q1);return Y1(e,"You must render this element inside a <HydratedRouter> element"),e}function h7(e,t){let r=_.useContext(Q1),[n,a]=_.useState(!1),[i,s]=_.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:f}=t,y=_.useRef(null);_.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let v=k=>{k.forEach(C=>{s(C.isIntersecting)})},T=new IntersectionObserver(v,{threshold:.5});return y.current&&T.observe(y.current),()=>{T.disconnect()}}},[e]),_.useEffect(()=>{if(n){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[n]);let b=()=>{a(!0)},x=()=>{a(!1),s(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Eh(l,b),onBlur:Eh(u,x),onMouseEnter:Eh(h,b),onMouseLeave:Eh(p,x),onTouchStart:Eh(f,b)}]:[!1,y,{}]}function Eh(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function p7({page:e,...t}){let{router:r}=M3(),n=_.useMemo(()=>k3(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?_.createElement(f7,{page:e,matches:n,...t}):null}function g7(e){let{manifest:t,routeModules:r}=O3(),[n,a]=_.useState([]);return _.useEffect(()=>{let i=!1;return s7(e,t,r).then(s=>{i||a(s)}),()=>{i=!0}},[e,t,r]),n}function f7({page:e,matches:t,...r}){let n=Fo(),{manifest:a,routeModules:i}=O3(),{basename:s}=M3(),{loaderData:l,matches:u}=d7(),h=_.useMemo(()=>g2(e,t,u,a,n,"data"),[e,t,u,a,n]),p=_.useMemo(()=>g2(e,t,u,a,n,"assets"),[e,t,u,a,n]),f=_.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,v=!1;if(t.forEach(k=>{let C=a.routes[k.route.id];!C||!C.hasLoader||(!h.some(A=>A.route.id===k.route.id)&&k.route.id in l&&i[k.route.id]?.shouldRevalidate||C.hasClientLoader?v=!0:x.add(k.route.id))}),x.size===0)return[];let T=n7(e,s,"data");return v&&x.size>0&&T.searchParams.set("_routes",t.filter(k=>x.has(k.route.id)).map(k=>k.route.id).join(",")),[T.pathname+T.search]},[s,l,n,a,h,t,e,i]),y=_.useMemo(()=>o7(p,a),[p,a]),b=g7(p);return _.createElement(_.Fragment,null,f.map(x=>_.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),y.map(x=>_.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),b.map(({key:x,link:v})=>_.createElement("link",{key:x,nonce:r.nonce,...v})))}function m7(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var j3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j3&&(window.__reactRouterVersion="7.9.4")}catch{}function y7({basename:e,children:t,window:r}){let n=_.useRef();n.current==null&&(n.current=a9({window:r,v5Compat:!0}));let a=n.current,[i,s]=_.useState({action:a.action,location:a.location}),l=_.useCallback(u=>{_.startTransition(()=>s(u))},[s]);return _.useLayoutEffect(()=>a.listen(l),[a,l]),_.createElement(W9,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var B3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K1=_.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:s,state:l,target:u,to:h,preventScrollReset:p,viewTransition:f,...y},b){let{basename:x}=_.useContext(Qs),v=typeof h=="string"&&B3.test(h),T,k=!1;if(typeof h=="string"&&v&&(T=h,j3))try{let Q=new URL(window.location.href),F=h.startsWith("//")?new URL(Q.protocol+h):new URL(h),K=Do(F.pathname,x);F.origin===Q.origin&&K!=null?h=K+F.search+F.hash:k=!0}catch{ks(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=P9(h,{relative:a}),[A,P,M]=h7(n,y),L=w7(h,{replace:s,state:l,target:u,preventScrollReset:p,relative:a,viewTransition:f});function D(Q){t&&t(Q),Q.defaultPrevented||L(Q)}let q=_.createElement("a",{...y,...M,href:T||C,onClick:k||i?t:D,ref:m7(b,P),target:u,"data-discover":!v&&r==="render"?"true":void 0});return A&&!v?_.createElement(_.Fragment,null,q,_.createElement(p7,{page:C})):q});K1.displayName="Link";var b7=_.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:s,viewTransition:l,children:u,...h},p){let f=ng(s,{relative:h.relative}),y=Fo(),b=_.useContext(B0),{navigator:x,basename:v}=_.useContext(Qs),T=b!=null&&C7(f)&&l===!0,k=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,C=y.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&v&&(A=Do(A,v)||A);const P=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let M=C===k||!a&&C.startsWith(k)&&C.charAt(P)==="/",L=A!=null&&(A===k||!a&&A.startsWith(k)&&A.charAt(k.length)==="/"),D={isActive:M,isPending:L,isTransitioning:T},q=M?t:void 0,Q;typeof n=="function"?Q=n(D):Q=[n,M?"active":null,L?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(D):i;return _.createElement(K1,{...h,"aria-current":q,className:Q,ref:p,style:F,to:s,viewTransition:l},typeof u=="function"?u(D):u)});b7.displayName="NavLink";var x7=_.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:s=hm,action:l,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:f,...y},b)=>{let x=k7(),v=E7(l,{relative:h}),T=s.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&B3.test(l),C=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let P=A.nativeEvent.submitter,M=P?.getAttribute("formmethod")||s;x(P||A.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:a,state:i,relative:h,preventScrollReset:p,viewTransition:f})};return _.createElement("form",{ref:b,method:T,action:v,onSubmit:n?u:C,...y,"data-discover":!k&&e==="render"?"true":void 0})});x7.displayName="Form";function v7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F3(e){let t=_.useContext(Td);return En(t,v7(e)),t}function w7(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:s}={}){let l=Pl(),u=Fo(),h=ng(e,{relative:i});return _.useCallback(p=>{if(J9(p,t)){p.preventDefault();let f=r!==void 0?r:Ip(u)===Ip(h);l(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:s})}},[u,l,h,r,n,t,e,a,i,s])}function rye(e){ks(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=_.useRef(iw(e)),r=_.useRef(!1),n=Fo(),a=_.useMemo(()=>Z9(n.search,r.current?null:t.current),[n.search]),i=Pl(),s=_.useCallback((l,u)=>{const h=iw(typeof l=="function"?l(new URLSearchParams(a)):l);r.current=!0,i("?"+h,u)},[i,a]);return[a,s]}var S7=0,T7=()=>`__${String(++S7)}__`;function k7(){let{router:e}=F3("useSubmit"),{basename:t}=_.useContext(Qs),r=$9();return _.useCallback(async(n,a={})=>{let{action:i,method:s,encType:l,formData:u,body:h}=r7(n,t);if(a.navigate===!1){let p=a.fetcherKey||T7();await e.fetch(p,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||s,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:h,formMethod:a.method||s,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function E7(e,{relative:t}={}){let{basename:r}=_.useContext(Qs),n=_.useContext(Bo);En(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...ng(e||".",{relative:t})},s=Fo();if(e==null){i.search=s.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let p=l.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Po([r,i.pathname])),Ip(i)}function C7(e,{relative:t}={}){let r=_.useContext(L3);En(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=F3("useViewTransitionState"),a=ng(e,{relative:t});if(!r.isTransitioning)return!1;let i=Do(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Do(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Fm(a.pathname,s)!=null||Fm(a.pathname,i)!=null}var _7=g3();const A7=Ic(_7),z3=(e,t,r,n)=>{const a=t.trim().replace(/[\r\n]/g,""),i=r?.trim().replace(/[\r\n]/g,"");if(localStorage.setItem("google_user",JSON.stringify(e)),localStorage.setItem("google_access_token",a),i&&localStorage.setItem("google_refresh_token",i),n){const s=Date.now()+n*1e3;localStorage.setItem("google_token_expiration",s.toString())}else try{const s=kd(a);s?.exp&&localStorage.setItem("google_token_expiration",(s.exp*1e3).toString())}catch{const l=Date.now()+36e5;localStorage.setItem("google_token_expiration",l.toString())}},sw=()=>{const e=localStorage.getItem("google_user"),t=localStorage.getItem("google_access_token"),r=localStorage.getItem("google_refresh_token");return e&&t?{user:JSON.parse(e),accessToken:t,isAuthenticated:!0,refreshToken:r||void 0}:{user:null,accessToken:null,isAuthenticated:!1}},ow=()=>{localStorage.removeItem("google_user"),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_refresh_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("last_token_refresh")},kd=e=>{try{if(!e||typeof e!="string"||e.split(".").length!==3)return console.warn("Token is not a valid JWT format"),null;const t=e.split(".")[1];if(!t)return null;const r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return console.warn("Failed to decode JWT (token may be an access token, not an ID token):",t),null}},U3=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10)-Date.now();return Math.max(0,l)}const r=kd(e);if(!r||!r.exp)return 0;const n=r.exp*1e3,a=Date.now(),i=n-a;return Math.max(0,i)}catch(t){return console.error("Failed to get token time remaining:",t),0}},Fu=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10),u=Date.now(),h=300*1e3;return l-u<h}const r=kd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration, assuming valid"),!1;const n=r.exp*1e3,a=Date.now(),i=300*1e3,s=n-a;if(s>0&&s<600*1e3&&s>=i){const l=Math.floor(s/6e4);console.warn(`⚠️ Token expires in ${l} minutes`)}return s<i}catch(t){return console.error("Failed to check token expiration:",t),!0}},lw=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10),u=Date.now(),h=900*1e3;return l-u<h}const r=kd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration for refresh check, assuming no refresh needed"),!1;const n=r.exp*1e3,a=Date.now(),i=900*1e3;return n-a<i}catch(t){return console.error("Failed to check if token should refresh:",t),!1}},N7=async e=>{try{const t=localStorage.getItem("google_refresh_token");if(t){console.log("🔄 Refreshing token via OAuth refresh endpoint...");const n=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({refresh_token:t})});if(n.ok){const a=await n.json();return console.log("✅ Token refreshed successfully via OAuth"),{accessToken:a.access_token,refreshToken:a.refresh_token||t}}else return console.log("OAuth refresh failed:",n.status),null}return console.log("ℹ️ No refresh token available for silent refresh"),null}catch(t){return console.error("Token refresh failed:",t),null}},cw=()=>{try{localStorage.setItem("has_completed_welcome_wizard","true"),localStorage.setItem("welcome_wizard_completed_at",new Date().toISOString())}catch(e){console.error("Failed to mark welcome wizard as complete:",e)}},$3=()=>{try{localStorage.removeItem("has_completed_welcome_wizard"),localStorage.removeItem("welcome_wizard_completed_at")}catch(e){console.error("Failed to reset welcome wizard:",e)}},L7=()=>{try{console.log("🎓 Triggering welcome wizard..."),$3(),console.log("🎓 Reset wizard state");const e=new CustomEvent("show-welcome-wizard");console.log("🎓 About to dispatch event:",e),console.log("🎓 Current event listeners on window:",window);const t=window.dispatchEvent(e);console.log("🎓 Event dispatch result:",t),console.log("🎓 Event dispatched successfully"),setTimeout(()=>{console.log("🎓 Trying delayed dispatch...");const r=new CustomEvent("show-welcome-wizard");window.dispatchEvent(r)},100)}catch(e){console.error("Failed to trigger welcome wizard:",e)}},P7=Object.freeze(Object.defineProperty({__proto__:null,clearAuthState:ow,decodeJWT:kd,getTokenTimeRemaining:U3,isTokenExpiringSoon:Fu,loadAuthState:sw,markWelcomeWizardComplete:cw,refreshGoogleToken:N7,resetWelcomeWizard:$3,saveAuthState:z3,shouldRefreshToken:lw,triggerWelcomeWizard:L7},Symbol.toStringTag,{value:"Module"}));function q3(){try{const e=localStorage.getItem("google_user");if(e){const t=JSON.parse(e);if(t&&t.email)return t.email}}catch(e){console.error("Failed to parse user from localStorage for scoping:",e)}return"anonymous"}function gm(e){return`${q3()}:${e}`}const Ch={getItem(e){return localStorage.getItem(gm(e))},setItem(e,t){localStorage.setItem(gm(e),t)},removeItem(e){localStorage.removeItem(gm(e))}};function uw(e){const t=q3();if(t==="anonymous"||e==="google_user"||e.includes("token"))return;const r=localStorage.getItem(e),n=gm(e);r!==null&&localStorage.getItem(n)===null&&(console.log(`Migrating localStorage key "${e}" to user scope "${t}"`),localStorage.setItem(n,r))}const R7=["tts_settings","rag_config","swag-recent-tags","swag-google-docs-cache","enabled_tools","auto_sync_enabled","youtube_oauth_tokens","feed_preferences","image_editor_command","image_editor_images","image_editor_selection","proxy_settings","image_quality","image_size","last_active_chat_id","rag_spreadsheet_id","rag_google_linked","continuousVoice_hotword","continuousVoice_sensitivity","continuousVoice_timeout"];function H3(){console.log("Starting migration of localStorage keys to user-scoped keys..."),R7.forEach(uw),console.log("Migration check complete.")}const G3=_.createContext(void 0),Di=()=>{const e=_.useContext(G3);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},I7=({children:e})=>{const[t,r]=_.useState(()=>sw()),[n,a]=_.useState(!1),i=_.useCallback(h=>{try{const p=kd(h);if(!p||!p.email){console.error("Login failed: Invalid token or missing user info");return}const f={email:p.email,name:p.name,picture:p.picture,sub:p.sub};z3(f,h),r({user:f,accessToken:h,isAuthenticated:!0}),H3(),window.dispatchEvent(new CustomEvent("auth-change")),console.log("User logged in:",f.email)}catch(p){console.error("Login failed:",p)}},[]),s=_.useCallback(()=>{ow(),r({user:null,accessToken:null,isAuthenticated:!1}),window.dispatchEvent(new CustomEvent("auth-change")),console.log("User logged out")},[]),l=_.useCallback(async()=>{try{if(!t.accessToken)return console.log("No token to refresh"),!1;console.log("🔄 Attempting token refresh...");const{refreshGoogleToken:h,decodeJWT:p,saveAuthState:f}=await Rt(async()=>{const{refreshGoogleToken:b,decodeJWT:x,saveAuthState:v}=await Promise.resolve().then(()=>P7);return{refreshGoogleToken:b,decodeJWT:x,saveAuthState:v}},[]),y=await h(t.accessToken);if(y){const b=p(y.accessToken);if(b){const x={email:b.email,name:b.name,picture:b.picture,sub:b.sub};return f(x,y.accessToken,y.refreshToken),r({user:x,accessToken:y.accessToken,isAuthenticated:!0}),console.log("✅ Token refreshed successfully"),!0}}return console.log("ℹ️ Token refresh not available (user may need to re-authenticate manually)"),!1}catch(h){return console.log("ℹ️ Token refresh unavailable:",h instanceof Error?h.message:"Unknown error"),!1}},[t.accessToken]),u=_.useCallback(async()=>t.accessToken?Fu(t.accessToken)?(console.log("Token expired, logging out"),s(),null):t.accessToken:null,[t.accessToken,s]);return _.useEffect(()=>{(async()=>{if(n||(a(!0),t.isAuthenticated))return;const p=sw();if(!p.accessToken||!p.user){console.log("No saved auth state found");return}console.log("Attempting auto-login for:",p.user.email),Fu(p.accessToken)?(console.log("Saved token expired, clearing auth state"),ow()):(r(p),console.log("Auto-login successful with existing token"))})()},[n,t.isAuthenticated,i]),_.useEffect(()=>{if(t.isAuthenticated&&typeof google<"u"&&google?.accounts?.id)try{google.accounts.id.cancel(),console.log("✅ Cancelled any pending Google One Tap prompts (user authenticated)")}catch{console.log("No Google One Tap prompt to cancel")}},[t.isAuthenticated]),_.useEffect(()=>{if(!t.isAuthenticated||!t.accessToken)return;const h=t.accessToken;lw(h)?(console.log("🔄 Token should be refreshed on mount (less than 15 min remaining)"),l().then(f=>{!f&&Fu(h)&&(console.warn("⚠️ Token refresh failed and token expiring soon, logging out..."),s())})):Fu(h)&&(console.warn("⚠️ Token critically close to expiring on mount, attempting refresh..."),l().then(f=>{f||(console.warn("⚠️ Critical token refresh failed on mount, logging out..."),s())}));const p=setInterval(async()=>{if(!t.accessToken)return;const f=t.accessToken;if(lw(f)){const y=U3(f),b=Math.floor(y/6e4);console.log(`ℹ️ Token expires in ${b} minutes, attempting proactive refresh...`);const x=await l();!x&&Fu(f)?(console.warn("⚠️ Token expiring soon and refresh unavailable. Please re-authenticate."),s()):x||console.log(`ℹ️ Silent refresh not available, but token still valid for ${b} minutes`)}},120*1e3);return()=>clearInterval(p)},[t.isAuthenticated,t.accessToken,s,l]),d.jsx(G3.Provider,{value:{...t,login:i,logout:s,refreshToken:l,getToken:u},children:e})},W3=_.createContext(void 0),D7=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),i=u=>{a(!1),r(h=>{const p=h.findIndex(f=>f.query.toLowerCase()===u.query.toLowerCase());if(p>=0){const f=[...h];return f[p]=u,f}else return[...h,u]})},s=u=>{r(u)},l=()=>{a(!0),r([])};return d.jsx(W3.Provider,{value:{searchResults:t,addSearchResult:i,setSearchResults:s,clearSearchResults:l,wasCleared:n},children:e})},M7=()=>{const e=_.useContext(W3);if(e===void 0)throw new Error("useSearchResults must be used within a SearchResultsProvider");return e},dw=(e,t)=>t.some(r=>e instanceof r);let f2,m2;function O7(){return f2||(f2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j7(){return m2||(m2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hw=new WeakMap,Wx=new WeakMap,z0=new WeakMap;function B7(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{r(yc(e.result)),a()},s=()=>{n(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",s)});return z0.set(t,e),t}function F7(e){if(hw.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});hw.set(e,t)}let pw={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return hw.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return yc(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function V3(e){pw=e(pw)}function z7(e){return j7().includes(e)?function(...t){return e.apply(gw(this),t),yc(this.request)}:function(...t){return yc(e.apply(gw(this),t))}}function U7(e){return typeof e=="function"?z7(e):(e instanceof IDBTransaction&&F7(e),dw(e,O7())?new Proxy(e,pw):e)}function yc(e){if(e instanceof IDBRequest)return B7(e);if(Wx.has(e))return Wx.get(e);const t=U7(e);return t!==e&&(Wx.set(e,t),z0.set(t,e)),t}const gw=e=>z0.get(e);function U0(e,t,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(e,t),l=yc(s);return n&&s.addEventListener("upgradeneeded",u=>{n(yc(s.result),u.oldVersion,u.newVersion,yc(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const $7=["get","getKey","getAll","getAllKeys","count"],q7=["put","add","delete","clear"],Vx=new Map;function y2(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Vx.get(t))return Vx.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=q7.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||$7.includes(r)))return;const i=async function(s,...l){const u=this.transaction(s,a?"readwrite":"readonly");let h=u.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[r](...l),a&&u.done]))[0]};return Vx.set(t,i),i}V3(e=>({...e,get:(t,r,n)=>y2(t,r)||e.get(t,r,n),has:(t,r)=>!!y2(t,r)||e.has(t,r)}));const H7=["continue","continuePrimaryKey","advance"],b2={},fw=new WeakMap,Y3=new WeakMap,G7={get(e,t){if(!H7.includes(t))return e[t];let r=b2[t];return r||(r=b2[t]=function(...n){fw.set(this,Y3.get(this)[t](...n))}),r}};async function*W7(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,G7);for(Y3.set(r,t),z0.set(r,gw(t));t;)yield r,t=await(fw.get(r)||t.continue()),fw.delete(r)}function x2(e,t){return t===Symbol.asyncIterator&&dw(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&dw(e,[IDBIndex,IDBObjectStore])}V3(e=>({...e,get(t,r,n){return x2(t,r)?W7:e.get(t,r,n)},has(t,r){return x2(t,r)||e.has(t,r)}}));class V7{queue=[];batchInterval=3e4;batchTimer=null;onExecute;constructor(t){this.onExecute=t}queueSync(t,r="normal"){this.queue.push({adapterName:t,priority:r,timestamp:Date.now()}),r==="high"?this.executeBatch():(this.batchTimer&&clearTimeout(this.batchTimer),this.batchTimer=setTimeout(()=>{this.executeBatch()},this.batchInterval))}async executeBatch(){if(this.queue.length===0)return;const t=[...new Set(this.queue.map(r=>r.adapterName))];this.queue=[],console.log(`🔄 Executing batch sync for: ${t.join(", ")}`);try{await this.onExecute(t)}catch(r){console.error("❌ Batch sync failed:",r)}}clear(){this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null),this.queue=[]}setBatchInterval(t){this.batchInterval=t}}class Y7{adapters=new Map;scheduler;syncStatus={syncing:!1,lastSyncTime:null,nextSyncTime:null,adapterStatuses:{}};syncInterval=300*1e3;syncTimer=null;enabled=!1;statusListeners=[];constructor(){this.scheduler=new V7(t=>this.executeBatchSync(t))}registerAdapter(t){this.adapters.set(t.name,t),this.syncStatus.adapterStatuses[t.name]={name:t.name,enabled:t.enabled,status:"idle",lastSync:null,nextSync:null,itemCount:0,error:null},console.log(`✓ Registered sync adapter: ${t.name}`)}unregisterAdapter(t){this.adapters.delete(t),delete this.syncStatus.adapterStatuses[t],console.log(`✓ Unregistered sync adapter: ${t}`)}setAdapterEnabled(t,r){const n=this.adapters.get(t);n&&(n.enabled=r,this.syncStatus.adapterStatuses[t]&&(this.syncStatus.adapterStatuses[t].enabled=r),console.log(`${r?"✓":"✗"} Adapter ${t} ${r?"enabled":"disabled"}`))}queueSync(t,r="normal"){if(!this.enabled){console.log(`⚠️ Unified sync is disabled, skipping: ${t}`);return}const n=this.adapters.get(t);if(!n){console.warn(`⚠️ Adapter not found: ${t}`);return}if(!n.enabled){console.log(`⚠️ Adapter ${t} is disabled, skipping sync`);return}this.scheduler.queueSync(t,r)}async syncAdapter(t){const r=this.adapters.get(t);if(!r)throw new Error(`Adapter not found: ${t}`);return r.enabled?await this._syncAdapter(r):{success:!1,action:"no-change",timestamp:Date.now(),itemCount:0,error:`Adapter ${t} is disabled`}}async _syncAdapter(t){const r=this.syncStatus.adapterStatuses[t.name];try{if(r.status="syncing",this.notifyStatusChange(),!await t.shouldSync())return r.status="idle",this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const a=await t.getLocalData(),i=await t.getLastModified(),s=await t.pull();if(!s||s.length===0)return a&&(Array.isArray(a)?a.length>0:Object.keys(a).length>0)?(await t.push(a),r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(a)?a.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:r.itemCount}):(r.status="idle",this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0});const l=Array.isArray(s)&&s.length>0?Math.max(...s.map(u=>u.timestamp||0)):s.timestamp||0;if(l>i){if(t.mergeData){const u=t.mergeData(a,s);await t.setLocalData(u)}else await t.setLocalData(s);return r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(s)?s.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.itemCount}}else return i>l?(await t.push(a),r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(a)?a.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:r.itemCount}):(r.status="success",r.lastSync=Date.now(),r.error=null,this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0})}catch(n){const a=n instanceof Error?n.message:String(n);return console.error(`❌ Error syncing ${t.name}:`,a),r.status="error",r.error=a,this.notifyStatusChange(),{success:!1,action:"no-change",timestamp:Date.now(),itemCount:0,error:a}}}async executeBatchSync(t){this.syncStatus.syncing=!0,this.notifyStatusChange(),(await Promise.allSettled(t.map(n=>{const a=this.adapters.get(n);return a?this._syncAdapter(a):Promise.reject(`Adapter not found: ${n}`)}))).forEach((n,a)=>{const i=t[a];if(n.status==="fulfilled"){const s=n.value;s.success&&s.action!=="no-change"&&console.log(`✅ ${i}: ${s.action} (${s.itemCount} items)`)}else console.error(`❌ ${i}: ${n.reason}`)}),this.syncStatus.syncing=!1,this.syncStatus.lastSyncTime=Date.now(),this.notifyStatusChange()}async syncAll(){const t={};this.syncStatus.syncing=!0,this.notifyStatusChange();for(const[r,n]of this.adapters)n.enabled&&(t[r]=await this._syncAdapter(n));return this.syncStatus.syncing=!1,this.syncStatus.lastSyncTime=Date.now(),this.notifyStatusChange(),t}start(t){t&&(this.syncInterval=t),this.enabled=!0,this.syncAll().then(()=>{console.log("✅ Initial unified sync complete")}),this.syncTimer=setInterval(()=>{this.syncAll()},this.syncInterval),console.log(`✅ Unified sync started (interval: ${this.syncInterval/1e3/60} minutes)`)}stop(){this.enabled=!1,this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null),this.scheduler.clear(),console.log("✓ Unified sync stopped")}isEnabled(){return this.enabled}getStatus(){return{...this.syncStatus}}onStatusChange(t){return this.statusListeners.push(t),()=>{const r=this.statusListeners.indexOf(t);r>-1&&this.statusListeners.splice(r,1)}}notifyStatusChange(){const t=this.getStatus();this.statusListeners.forEach(r=>{try{r(t)}catch(n){console.error("Error in status listener:",n)}})}setDebounceInterval(t){this.scheduler.setBatchInterval(t)}setSyncInterval(t){this.syncInterval=t,this.syncTimer&&(this.stop(),this.start())}}const ta=new Y7;class Q7{db=null;DB_NAME="youtube-playlist-db";DB_VERSION=1;async init(){if(!this.db)try{this.db=await U0(this.DB_NAME,this.DB_VERSION,{upgrade(t){if(t.objectStoreNames.contains("currentPlaylist")||t.createObjectStore("currentPlaylist",{keyPath:"id"}),!t.objectStoreNames.contains("savedPlaylists")){const r=t.createObjectStore("savedPlaylists",{keyPath:"id",autoIncrement:!0});r.createIndex("by-name","name",{unique:!1}),r.createIndex("by-date","createdAt",{unique:!1})}}}),await this.migrateFromLocalStorage()}catch(t){throw console.error("Failed to initialize playlist database:",t),t}}async migrateFromLocalStorage(){try{const t=localStorage.getItem("youtube_playlist"),r=localStorage.getItem("youtube_current_track");if(t){const n=JSON.parse(t),a=r?parseInt(r,10):null,i=await this.db.get("currentPlaylist","current");(!i||i.tracks.length===0)&&(await this.saveCurrentPlaylist(n,a),console.log("✅ Migrated playlist from localStorage to IndexedDB"))}}catch(t){console.error("Failed to migrate from localStorage:",t)}}async saveCurrentPlaylist(t,r){await this.init(),await this.db.put("currentPlaylist",{id:"current",tracks:t,currentIndex:r,isPlaying:!1,updatedAt:Date.now()})}async loadCurrentPlaylist(){await this.init();const t=await this.db.get("currentPlaylist","current");return t?{tracks:t.tracks||[],currentIndex:t.currentIndex}:{tracks:[],currentIndex:null}}async clearCurrentPlaylist(){await this.init(),await this.db.delete("currentPlaylist","current")}async savePlaylist(t,r){if(await this.init(),!t||t.trim().length===0)throw new Error("Playlist name cannot be empty");const n=await this.db.add("savedPlaylists",{id:0,name:t.trim(),tracks:r,createdAt:Date.now(),updatedAt:Date.now()});return ta.isEnabled()&&ta.queueSync("playlists","high"),n}async updatePlaylist(t,r,n){await this.init();const a=await this.db.get("savedPlaylists",t);if(!a)throw new Error("Playlist not found");await this.db.put("savedPlaylists",{...a,name:r.trim(),tracks:n,updatedAt:Date.now()}),ta.isEnabled()&&ta.queueSync("playlists","high")}async loadPlaylist(t){return await this.init(),(await this.db.get("savedPlaylists",t))?.tracks||[]}async getPlaylist(t){return await this.init(),await this.db.get("savedPlaylists",t)}async listPlaylists(){return await this.init(),(await this.db.getAll("savedPlaylists")).map(r=>({id:r.id,name:r.name,trackCount:r.tracks.length,createdAt:r.createdAt,updatedAt:r.updatedAt})).sort((r,n)=>n.updatedAt-r.updatedAt)}async deletePlaylist(t){await this.init(),await this.db.delete("savedPlaylists",t),ta.isEnabled()&&ta.queueSync("playlists","high")}async playlistExists(t){return await this.init(),(await this.db.getAllFromIndex("savedPlaylists","by-name",t.trim())).length>0}async searchPlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=t.toLowerCase();return r.filter(a=>a.name.toLowerCase().includes(n)).map(a=>({id:a.id,name:a.name,trackCount:a.tracks.length,createdAt:a.createdAt,updatedAt:a.updatedAt})).sort((a,i)=>i.updatedAt-a.updatedAt)}async exportPlaylist(t){await this.init();const r=await this.db.get("savedPlaylists",t);if(!r)throw new Error("Playlist not found");return JSON.stringify({name:r.name,tracks:r.tracks,exportedAt:Date.now(),version:1},null,2)}async importPlaylist(t){await this.init();try{const r=JSON.parse(t);if(!r.name||!Array.isArray(r.tracks))throw new Error("Invalid playlist format");const n=r.tracks.filter(a=>a.videoId&&a.url&&a.title);if(n.length===0)throw new Error("No valid tracks found in playlist");return await this.savePlaylist(r.name,n)}catch(r){throw r instanceof SyntaxError?new Error("Invalid JSON format"):r}}async getStats(){await this.init();const t=await this.db.get("currentPlaylist","current"),r=await this.db.getAll("savedPlaylists"),n=r.reduce((a,i)=>a+i.tracks.length,0);return{currentPlaylistSize:t?.tracks.length||0,savedPlaylistCount:r.length,totalSavedTracks:n,databaseSize:await this.estimateSize()}}async estimateSize(){await this.init();try{if("estimate"in navigator.storage)return`~${(((await navigator.storage.estimate()).usage||0)/(1024*1024)).toFixed(2)} MB`}catch{}return"Unknown"}async exportAllPlaylists(){return await this.init(),await this.db.getAll("savedPlaylists")}async importAndMergePlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=new Map(r.map(i=>[i.name.toLowerCase(),i]));let a=0;for(const i of t){const s=i.name.toLowerCase(),l=n.get(s);l?i.updatedAt>l.updatedAt&&(await this.db.put("savedPlaylists",{id:l.id,name:i.name,tracks:i.tracks,createdAt:l.createdAt,updatedAt:i.updatedAt}),a++):(await this.db.add("savedPlaylists",{id:0,name:i.name,tracks:i.tracks,createdAt:i.createdAt,updatedAt:i.updatedAt}),a++)}return a}async getPlaylistsModifiedSince(t){return await this.init(),(await this.db.getAll("savedPlaylists")).filter(n=>n.updatedAt>t)}async getLastModified(){await this.init();const t=await this.db.getAll("savedPlaylists");return t.length===0?0:Math.max(...t.map(r=>r.updatedAt))}close(){this.db&&(this.db.close(),this.db=null)}}const Li=new Q7,Q3=_.createContext(void 0),Dc=()=>{const e=_.useContext(Q3);if(!e)throw new Error("usePlaylist must be used within PlaylistProvider");return e},K7=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(null),[i,s]=_.useState(!1),[l,u]=_.useState([]),[h,p]=_.useState(!1),[f,y]=_.useState(!1),[b,x]=_.useState([]),[v,T]=_.useState("none"),[k,C]=_.useState(1),[A,P]=_.useState(1),[M,L]=_.useState("auto");_.useEffect(()=>{try{const de=localStorage.getItem("playbackRate");de&&C(parseFloat(de));const Ae=localStorage.getItem("volume");Ae&&P(parseFloat(Ae));const Te=localStorage.getItem("repeatMode");Te&&(Te==="none"||Te==="all"||Te==="one")&&T(Te);const $e=localStorage.getItem("shuffleMode");$e&&y($e==="true");const ot=localStorage.getItem("videoQuality");ot&&L(ot)}catch(de){console.error("Failed to load preferences:",de)}},[]),_.useEffect(()=>{(async()=>{try{const{tracks:Ae,currentIndex:Te}=await Li.loadCurrentPlaylist();r(Ae),a(Te),p(!0)}catch(Ae){console.error("Failed to load playlist:",Ae),p(!0)}})()},[]),_.useEffect(()=>{U()},[]),_.useEffect(()=>{if(!h)return;const de=async()=>{try{await Li.saveCurrentPlaylist(t,n)}catch(Te){console.error("Failed to save playlist:",Te)}},Ae=setTimeout(()=>{de()},500);return()=>clearTimeout(Ae)},[t,n,h]);const D=_.useCallback(de=>{const Ae={...de,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()};r(Te=>[...Te,Ae])},[]),q=_.useCallback(de=>{r(Ae=>{const Te=[],$e=new Set(Ae.map(je=>je.videoId)),ot=new Set;return de.forEach((je,_t)=>{$e.has(je.videoId)||ot.has(je.videoId)||(ot.add(je.videoId),Te.push({...je,id:`${Date.now()}-${_t}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()}))}),[...Te,...Ae].slice(0,500)})},[]),Q=_.useCallback(de=>{r(Ae=>{const Te=[],$e=[],ot=[],Tt=new Set;de.forEach((Pt,Bt)=>{if(Tt.has(Pt.videoId))return;Tt.add(Pt.videoId);const kt=Ae.findIndex(At=>At.videoId===Pt.videoId);kt!==-1?Te.push({...Ae[kt],addedAt:Date.now()}):$e.push({...Pt,id:`${Date.now()}-${Bt}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()})}),Ae.forEach(Pt=>{Tt.has(Pt.videoId)||ot.push(Pt)});const _t=[...Te,...$e,...ot].slice(0,500);if(n!==null&&Ae[n]){const Pt=Ae[n].videoId,Bt=_t.findIndex(kt=>kt.videoId===Pt);Bt!==-1?a(Bt):(a(null),s(!1))}return _t})},[n]),F=_.useCallback(de=>{r(Ae=>{const Te=Ae.findIndex($e=>$e.id===de);return Te===-1?Ae:(n!==null&&(Te===n?(s(!1),a(null)):Te<n&&a(n-1)),Ae.filter($e=>$e.id!==de))})},[n]),K=_.useCallback(()=>{r([]),a(null),s(!1)},[]),W=_.useCallback(de=>{de>=0&&de<t.length&&(a(de),s(!0))},[t.length]),j=_.useCallback(()=>{const de=t.map((Ae,Te)=>Te);n!==null&&de.splice(de.indexOf(n),1);for(let Ae=de.length-1;Ae>0;Ae--){const Te=Math.floor(Math.random()*(Ae+1));[de[Ae],de[Te]]=[de[Te],de[Ae]]}return n!==null&&de.unshift(n),de},[t,n]);_.useEffect(()=>{f&&x(j())},[f,t,j]);const O=_.useCallback(()=>{if(t.length===0)return;if(n===null){a(0),s(!0);return}if(v==="one"){s(!0);return}const de=f?b:t.map((Te,$e)=>$e),Ae=de.indexOf(n);Ae<de.length-1?(a(de[Ae+1]),s(!0)):v==="all"?(a(de[0]),s(!0)):s(!1)},[t,n,f,b,v]),$=_.useCallback(()=>{if(t.length===0)return;if(n===null){a(t.length-1),s(!0);return}const de=f?b:t.map((Te,$e)=>$e),Ae=de.indexOf(n);Ae>0?(a(de[Ae-1]),s(!0)):(a(de[de.length-1]),s(!0))},[t,n,f,b]),I=_.useCallback(()=>{t.length!==0&&(n===null?(a(0),s(!0)):s(de=>!de))},[t.length,n]),G=_.useCallback(()=>{t.length!==0&&(n===null&&a(0),s(!0))},[t.length,n]),V=_.useCallback(()=>{s(!1)},[]),oe=_.useCallback(de=>{const Ae=t.findIndex(Te=>Te.videoId===de);return Ae!==-1?(a(Ae),s(!0),!0):!1},[t]),U=_.useCallback(async()=>{try{const de=await Li.listPlaylists();u(de)}catch(de){console.error("Failed to load saved playlists:",de)}},[]),z=_.useCallback(async de=>{try{await Li.savePlaylist(de,t),await U()}catch(Ae){throw console.error("Failed to save playlist:",Ae),Ae}},[t,U]),ie=_.useCallback(async de=>{try{const Ae=await Li.loadPlaylist(de);r(Ae),a(null),s(!1)}catch(Ae){throw console.error("Failed to load playlist:",Ae),Ae}},[]),H=_.useCallback(async de=>{try{await Li.deletePlaylist(de),await U()}catch(Ae){throw console.error("Failed to delete playlist:",Ae),Ae}},[U]),ue=_.useCallback(()=>{const de=!f;y(de),localStorage.setItem("shuffleMode",String(de)),de&&x(j())},[f,j]),Z=_.useCallback(de=>{T(de),localStorage.setItem("repeatMode",de)},[]),ae=_.useCallback(de=>{C(de),localStorage.setItem("playbackRate",String(de))},[]),pe=_.useCallback(de=>{P(de),localStorage.setItem("volume",String(de))},[]),ye=_.useCallback(de=>{L(de),localStorage.setItem("videoQuality",de)},[]),_e=n!==null&&t[n]?t[n]:null;return d.jsx(Q3.Provider,{value:{playlist:t,currentTrackIndex:n,isPlaying:i,addTrack:D,addTracks:q,addTracksToStart:Q,removeTrack:F,clearPlaylist:K,playTrack:W,playTrackByVideoId:oe,nextTrack:O,previousTrack:$,togglePlayPause:I,play:G,pause:V,currentTrack:_e,savedPlaylists:l,savePlaylistAs:z,loadPlaylist:ie,deletePlaylist:H,refreshSavedPlaylists:U,shuffleMode:f,toggleShuffle:ue,repeatMode:v,setRepeatMode:Z,playbackRate:k,setPlaybackRate:ae,volume:A,setVolume:pe,videoQuality:M,setVideoQuality:ye},children:e})},K3=_.createContext(void 0),X3=()=>{const e=_.useContext(K3);if(!e)throw new Error("usePlayer must be used within PlayerProvider");return e},X7=({children:e})=>{const t=_.useRef(null),{isPlaying:r,currentTrack:n,play:a,pause:i}=Dc(),[s,l]=_.useState(!1),[u,h]=_.useState(0),[p,f]=_.useState(0),y=_.useCallback(A=>{console.log("[PlayerContext] Registering player:",A),t.current=A},[]),b=_.useCallback(()=>{console.log("[PlayerContext] Unregistering player"),t.current=null},[]),x=_.useCallback(()=>{t.current?(console.log("[PlayerContext] Playing video via ref"),a()):(console.warn("[PlayerContext] Cannot play - no player registered"),a())},[a]),v=_.useCallback(()=>{t.current?(console.log("[PlayerContext] Pausing video via ref"),i()):(console.warn("[PlayerContext] Cannot pause - no player registered"),i())},[i]),T=_.useCallback(A=>{t.current&&t.current.seekTo?(console.log("[PlayerContext] Seeking to:",A),t.current.seekTo(A,"seconds")):console.warn("[PlayerContext] Cannot seek - no player registered")},[]),k=_.useCallback(()=>t.current&&t.current.getCurrentTime?t.current.getCurrentTime():0,[]),C=_.useCallback(()=>t.current&&t.current.getDuration?t.current.getDuration():0,[]);return _.useEffect(()=>{t.current&&console.log("[PlayerContext] Syncing player state - isPlaying:",r,"currentTrack:",n?.title)},[r,n]),d.jsx(K3.Provider,{value:{playerRef:t,registerPlayer:y,unregisterPlayer:b,playVideo:x,pauseVideo:v,seekTo:T,getCurrentTime:k,getDuration:C,isLoading:s,setIsLoading:l,currentTime:u,duration:p,setCurrentTime:h,setDuration:f},children:e})},J7="lambdallmproxy",Z7=1,Wi="app_data",Lu=5*1024*1024,_h=250*1024*1024;class ac extends Error{code;estimatedSize;limit;constructor(t,r,n,a){super(t),this.name="StorageError",this.code=r,this.estimatedSize=n,this.limit=a}}class eU{db=null;initPromise=null;useIndexedDB=!0;async initDB(){return this.initPromise?this.initPromise:(this.initPromise=new Promise(t=>{if(!window.indexedDB){console.warn("IndexedDB not supported, falling back to localStorage"),this.useIndexedDB=!1,t();return}const r=indexedDB.open(J7,Z7);r.onerror=()=>{console.error("IndexedDB error:",r.error),this.useIndexedDB=!1,t()},r.onsuccess=()=>{this.db=r.result,this.useIndexedDB=!0,t()},r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(Wi)||a.createObjectStore(Wi)}}),this.initPromise)}getDataSize(t){try{return new Blob([JSON.stringify(t)]).size}catch{return JSON.stringify(t).length*2}}async getItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{return await this.getFromIndexedDB(t)}catch(r){console.warn("IndexedDB read failed, trying localStorage:",r)}try{const r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.error("Failed to read from localStorage:",r),null}}async setItem(t,r){await this.initDB();const n=this.getDataSize(r);if(this.useIndexedDB&&this.db)try{if(n>_h)throw new ac(`Data size (${this.formatBytes(n)}) exceeds IndexedDB limit (${this.formatBytes(_h)}). Consider reducing the amount of stored data.`,"QUOTA_EXCEEDED",n,_h);await this.setToIndexedDB(t,r);return}catch(a){if(a instanceof ac)throw a;console.warn("IndexedDB write failed, trying localStorage:",a),this.useIndexedDB=!1}try{if(n>Lu)throw new ac(`Data size (${this.formatBytes(n)}) exceeds localStorage limit (${this.formatBytes(Lu)}). Try using fewer or smaller snippets, or clear old data.`,"QUOTA_EXCEEDED",n,Lu);localStorage.setItem(t,JSON.stringify(r))}catch(a){throw a instanceof ac?a:a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?new ac(`Storage quota exceeded (${this.formatBytes(n)}). Please delete some snippets to free up space.`,"QUOTA_EXCEEDED",n,Lu):new ac(`Failed to save data: ${a instanceof Error?a.message:"Unknown error"}`,"UNKNOWN")}}async removeItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.removeFromIndexedDB(t)}catch(r){console.warn("Failed to remove from IndexedDB:",r)}try{localStorage.removeItem(t)}catch(r){console.warn("Failed to remove from localStorage:",r)}}async clear(){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.clearIndexedDB()}catch(t){console.warn("Failed to clear IndexedDB:",t)}try{localStorage.clear()}catch(t){console.warn("Failed to clear localStorage:",t)}}async getStats(){await this.initDB();const t=[];let r=0;if(this.useIndexedDB&&this.db){const n=await this.getAllKeysFromIndexedDB();for(const a of n){const i=await this.getFromIndexedDB(a);t.push(a),r+=this.getDataSize(i)}return{type:"indexeddb",keys:t,totalSize:r,limit:_h,percentUsed:r/_h*100}}else{for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);if(a){t.push(a);const i=localStorage.getItem(a);i&&(r+=this.getDataSize(i))}}return{type:"localstorage",keys:t,totalSize:r,limit:Lu,percentUsed:r/Lu*100}}}getFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const s=this.db.transaction([Wi],"readonly").objectStore(Wi).get(t);s.onsuccess=()=>{r(s.result??null)},s.onerror=()=>{n(s.error)}})}setToIndexedDB(t,r){return new Promise((n,a)=>{if(!this.db){a(new Error("Database not initialized"));return}const l=this.db.transaction([Wi],"readwrite").objectStore(Wi).put(r,t);l.onsuccess=()=>{n()},l.onerror=()=>{a(l.error)}})}removeFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const s=this.db.transaction([Wi],"readwrite").objectStore(Wi).delete(t);s.onsuccess=()=>{r()},s.onerror=()=>{n(s.error)}})}clearIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Wi],"readwrite").objectStore(Wi).clear();i.onsuccess=()=>{t()},i.onerror=()=>{r(i.error)}})}getAllKeysFromIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Wi],"readonly").objectStore(Wi).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{r(i.error)}})}formatBytes(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}}const cc=new eU,J3=_.createContext(void 0),Ks=()=>{const e=_.useContext(J3);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},tU=({children:e})=>{const[t,r]=_.useState([]),n=_.useCallback(x=>{r(v=>v.filter(T=>T.id!==x))},[]),a=_.useCallback((x,v,T)=>{r(k=>k.map(C=>C.id===x?{...C,message:v,...T!==void 0&&{progress:T}}:C))},[]),i=_.useCallback(()=>{r([])},[]),s=_.useCallback((x,v="info",T=5e3)=>{const k=`toast-${Date.now()}-${Math.random()}`,C={id:k,message:x,type:v,duration:T};r(A=>[...A,C]),T>0&&setTimeout(()=>n(k),T)},[n]),l=_.useCallback((x,v="info",T)=>{const k=`toast-${Date.now()}-${Math.random()}`,C={id:k,message:x,type:v,duration:0,action:T};return r(A=>[...A,C]),k},[]),u=_.useCallback(x=>s(x,"error",7e3),[s]),h=_.useCallback(x=>s(x,"success",3e3),[s]),p=_.useCallback(x=>s(x,"warning",5e3),[s]),f=_.useCallback(x=>s(x,"info",4e3),[s]),y=x=>`flex items-start gap-3 p-4 rounded-lg shadow-lg border backdrop-blur-sm transition-all duration-300 animate-slide-in ${{success:"bg-green-50/95 dark:bg-green-900/95 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50/95 dark:bg-red-900/95 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50/95 dark:bg-yellow-900/95 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50/95 dark:bg-blue-900/95 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"}[x]}`,b=x=>({success:"✓",error:"✕",warning:"⚠",info:"ℹ"})[x];return d.jsxs(J3.Provider,{value:{showToast:s,showPersistentToast:l,removeToast:n,updateToast:a,showError:u,showSuccess:h,showWarning:p,showInfo:f,clearAllToasts:i},children:[e,d.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:t.map(x=>d.jsxs("div",{className:y(x.type),children:[d.jsx("span",{className:"text-xl font-bold",children:b(x.type)}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium",children:x.message}),x.progress!==void 0&&d.jsx("div",{className:"mt-2 w-full bg-current/20 rounded-full h-2 overflow-hidden",children:d.jsx("div",{className:"bg-current h-full transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,x.progress))}%`}})})]}),x.action&&d.jsx("button",{onClick:x.action.onClick,className:"px-3 py-1 text-xs font-semibold rounded bg-current/10 hover:bg-current/20 transition-colors",children:x.action.label}),d.jsx("button",{onClick:()=>n(x.id),className:"text-current opacity-50 hover:opacity-100 transition-opacity",children:"✕"})]},x.id))}),d.jsx("style",{children:`
        @keyframes slide-in {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in {
          animation: slide-in 0.3s ease-out;
        }
      `})]})};function v2(e){const t=[],r=e.split(`
`);let n={};for(const a of r)if(a.startsWith("event:"))n.event=a.substring(6).trim();else if(a.startsWith("data:"))n.data=a.substring(5).trim();else if(a===""&&n.event&&n.data){try{const i=JSON.parse(n.data);t.push({event:n.event,data:i})}catch(i){console.error("Failed to parse SSE data:",n.data,i)}n={}}return t}async function Z3(e,t,r,n){if(!e.body)throw new Error("Response body is null");const a=e.body.getReader(),i=new TextDecoder;let s="";try{for(;;){const{done:l,value:u}=await a.read();if(l){s.trim()&&v2(s).forEach(f=>t(f.event,f.data)),r&&r();break}s+=i.decode(u,{stream:!0});const h=s.split(`

`);s=h.pop()||"";for(const p of h)p.trim()&&v2(p+`

`).forEach(y=>t(y.event,y.data))}}catch(l){console.error("SSE stream error:",l),n&&n(l instanceof Error?l:new Error("Stream error"))}}async function eL(e,t,r,n,a,i=3,s=1e3,l){const h={"Content-Type":"application/json",Authorization:`Bearer ${r.trim().replace(/[\r\n]/g,"")}`,Accept:"text/event-stream"};l&&(h["X-Request-Id"]=l,console.log("🔗 Using request ID for log grouping:",l)),a&&(h["X-YouTube-Token"]=a);const p=["google_access_token","gapi_access_token","google_drive_access_token"];let f=null,y="none";for(const k of p){const C=localStorage.getItem(k);if(C){f=C.trim().replace(/[\r\n]/g,""),y=k;break}}const b=localStorage.getItem("google_refresh_token");console.log("🔐 Drive token check:",{hasDriveToken:!!f,hasRefreshToken:!!b,tokenLength:f?.length||0,source:y,availableKeys:p.filter(k=>!!localStorage.getItem(k))}),f?(h["X-Google-Access-Token"]=f,console.log(`✅ Including Drive access token for Google Sheets operations (source: ${y})`)):(console.log("⚠️ No Drive access token available - snippet management will not work"),console.log("   Checked keys:",p)),b&&(h["X-Google-Refresh-Token"]=b.trim().replace(/[\r\n]/g,""),console.log("✅ Including Google refresh token for automatic token refresh"));let x=null;for(let k=0;k<i;k++)try{console.log(`🌐 SSE Request attempt ${k+1}/${i}:`,{url:e,method:"POST",hasToken:!!r,hasYoutubeToken:!!a,bodyKeys:t?Object.keys(t):[]});const C=await fetch(e,{method:"POST",headers:h,body:JSON.stringify(t),signal:n});if(console.log("✅ SSE Response received:",{status:C.status,statusText:C.statusText,ok:C.ok,headers:Object.fromEntries(C.headers.entries())}),!C.ok){if(C.status===429&&k<i-1){const A=C.headers.get("Retry-After");let P;if(A){const M=parseInt(A);if(!isNaN(M))P=M*1e3;else{const L=new Date(A);isNaN(L.getTime())?P=s*Math.pow(2,k):P=Math.max(0,L.getTime()-Date.now())}}else P=s*Math.pow(2,k);console.warn(`⚠️ Rate limited (429), retrying in ${(P/1e3).toFixed(1)}s... (attempt ${k+1}/${i})`),await new Promise(M=>setTimeout(M,P));continue}throw new Error(`Request failed: ${C.status} ${C.statusText}`)}return C}catch(C){if(x=C,console.error(`❌ SSE Request failed (attempt ${k+1}/${i}):`,{error:C instanceof Error?C.message:String(C),errorName:C instanceof Error?C.name:"Unknown",stack:C instanceof Error?C.stack:void 0,url:e,attempt:k+1,maxRetries:i}),n?.aborted)throw console.log("⚠️ Request aborted by user"),new Error("Request aborted by user");if(k>=i-1){console.error("❌ Max retries reached, giving up");break}const A=s*Math.pow(2,k);console.warn(`⚠️ Request failed, retrying in ${(A/1e3).toFixed(1)}s... (attempt ${k+1}/${i})`,C),await new Promise(P=>setTimeout(P,A))}const v=e.includes("localhost")||e.includes("127.0.0.1"),T=x?.message||"Unknown error";throw v&&(T.includes("fetch")||T.includes("ECONNREFUSED")||T.includes("NetworkError"))?new Error("⚠️ Dev server not running. Please start your dev server with `make dev` or `npm run dev`"):T.includes("fetch")||T.includes("NetworkError")?new Error("❌ Lambda API error: Cannot connect to server. Please check your internet connection or try again later."):x||new Error(`Request failed after ${i} attempts`)}class rU{db=null;version="1.0.0";defaultTTL=14400*1e3;maxStorageBytes=100*1024*1024;enabled=!0;initPromise=null;constructor(){this.initPromise=this.init()}async init(){try{if(localStorage.getItem("caching_disabled")==="true"){console.log("⚠️ Caching disabled by user preference"),this.enabled=!1;return}this.db=await U0("ResearchAgentCache",1,{upgrade(r){r.objectStoreNames.contains("llm_responses")||r.createObjectStore("llm_responses",{keyPath:"messageHash"}).createIndex("timestamp","timestamp"),r.objectStoreNames.contains("search_results")||r.createObjectStore("search_results",{keyPath:"query"}).createIndex("timestamp","timestamp"),r.objectStoreNames.contains("tool_outputs")||r.createObjectStore("tool_outputs",{keyPath:"paramsHash"}).createIndex("timestamp","timestamp")}}),console.log("✅ Cache initialized successfully"),this.cleanup().catch(r=>console.error("Cleanup failed:",r)),setInterval(()=>{this.cleanup().catch(r=>console.error("Periodic cleanup failed:",r))},3600*1e3)}catch(t){console.error("❌ Failed to initialize IndexedDB cache:",t),this.enabled=!1}}async waitForInit(){this.initPromise&&await this.initPromise}async hashMessages(t){const r=JSON.stringify(t),a=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("")}async hashObject(t){const r=JSON.stringify(t),a=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("")}async getLLMResponse(t){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const r=await this.hashMessages(t),n=await this.db.get("llm_responses",r);return n?Date.now()-n.timestamp>n.ttl?(console.log("⏰ Cache expired for LLM response"),await this.db.delete("llm_responses",r),null):n.version!==this.version?(console.log("🔄 Cache version mismatch, invalidating"),await this.db.delete("llm_responses",r),null):(console.log("✅ Cache HIT for LLM response"),{...n.response,usage:n.usage,model:n.model,cached:!0}):(console.log("❌ Cache miss for LLM response"),null)}catch(r){return console.error("Error getting cached LLM response:",r),null}}async setLLMResponse(t,r,n,a){if(await this.waitForInit(),!(!this.enabled||!this.db))try{const i=await this.hashMessages(t);await this.db.put("llm_responses",{messageHash:i,messages:t.map(s=>({role:s.role,content:s.content?.substring(0,200)})),response:r,usage:n,model:a,timestamp:Date.now(),ttl:this.defaultTTL,version:this.version}),console.log("💾 Cached LLM response"),this.enforceStorageLimit().catch(s=>console.error("Storage limit enforcement failed:",s))}catch(i){console.error("Error caching LLM response:",i)}}async getSearchResults(t){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const r=await this.db.get("search_results",t);return r?Date.now()-r.timestamp>r.ttl?(console.log("⏰ Cache expired for search results"),await this.db.delete("search_results",t),null):(console.log("✅ Cache HIT for search results"),r.results):(console.log("❌ Cache miss for search results"),null)}catch(r){return console.error("Error getting cached search results:",r),null}}async setSearchResults(t,r){if(await this.waitForInit(),!(!this.enabled||!this.db))try{await this.db.put("search_results",{query:t,results:r,timestamp:Date.now(),ttl:this.defaultTTL}),console.log("💾 Cached search results")}catch(n){console.error("Error caching search results:",n)}}async getToolOutput(t,r){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const n=await this.hashObject({tool:t,params:r}),a=await this.db.get("tool_outputs",n);return a?Date.now()-a.timestamp>a.ttl?(console.log("⏰ Cache expired for tool output"),await this.db.delete("tool_outputs",n),null):(console.log("✅ Cache HIT for tool output"),a.output):(console.log("❌ Cache miss for tool output"),null)}catch(n){return console.error("Error getting cached tool output:",n),null}}async setToolOutput(t,r,n,a){if(await this.waitForInit(),!(!this.enabled||!this.db))try{const i=await this.hashObject({tool:t,params:r});await this.db.put("tool_outputs",{tool:t,paramsHash:i,output:n,timestamp:Date.now(),ttl:a||this.defaultTTL}),console.log("💾 Cached tool output")}catch(i){console.error("Error caching tool output:",i)}}async cleanup(){if(await this.waitForInit(),!!this.db)try{const t=Date.now(),r=["llm_responses","search_results","tool_outputs"];let n=0;for(const a of r){const i=this.db.transaction(a,"readwrite");let u=await i.objectStore(a).index("timestamp").openCursor();for(;u;){const h=u.value;t-h.timestamp>h.ttl&&(await u.delete(),n++),u=await u.continue()}await i.done}n>0&&console.log(`🧹 Cleaned up ${n} expired cache entries`)}catch(t){console.error("Error during cache cleanup:",t)}}async enforceStorageLimit(){if(await this.waitForInit(),!!this.db)try{if("storage"in navigator&&"estimate"in navigator.storage){const r=(await navigator.storage.estimate()).usage||0;if(r>this.maxStorageBytes){console.warn(`⚠️ Cache storage limit exceeded (${(r/1024/1024).toFixed(2)}MB), evicting oldest entries`);const n=["llm_responses","search_results","tool_outputs"];for(const a of n){const i=this.db.transaction(a,"readwrite"),s=i.objectStore(a),u=await s.index("timestamp").getAllKeys(),h=Math.ceil(u.length*.1);if(h>0){const p=u.slice(0,h);for(const f of p)await s.delete(f);console.log(`🗑️ Evicted ${h} entries from ${a}`)}await i.done}}}}catch(t){console.error("Error enforcing storage limit:",t)}}async clearAll(){if(await this.waitForInit(),!!this.db)try{await this.db.clear("llm_responses"),await this.db.clear("search_results"),await this.db.clear("tool_outputs"),console.log("🗑️ All cache cleared")}catch(t){console.error("Error clearing cache:",t)}}async getStats(){await this.waitForInit();const t={llmResponses:0,searchResults:0,toolOutputs:0,storageUsage:0,storageQuota:0,enabled:this.enabled};if(!this.db)return t;try{if(t.llmResponses=await this.db.count("llm_responses"),t.searchResults=await this.db.count("search_results"),t.toolOutputs=await this.db.count("tool_outputs"),"storage"in navigator&&"estimate"in navigator.storage){const r=await navigator.storage.estimate();t.storageUsage=r.usage||0,t.storageQuota=r.quota||0}}catch(r){console.error("Error getting cache stats:",r)}return t}setEnabled(t){this.enabled=t,localStorage.setItem("caching_disabled",t?"false":"true"),console.log(`🔧 Caching ${t?"enabled":"disabled"}`)}isEnabled(){return this.enabled}}const Ah=new rU,nU="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("🚀 API Module Loading - Version: 2024-10-22-DYNAMIC-HOSTNAME");function aU(){const e=window.location.protocol,t=window.location.hostname,r="3000";console.log("🔍 getLocalLambdaUrl() called:",{protocol:e,hostname:t,port:r});const n=`${e}//${t}:${r}`;return console.log("🔍 getLocalLambdaUrl() returning:",n),n}console.log("🔧 API Configuration:",{hostname:window.location.hostname,remote:nU,local:aU(),source:"env"});async function iU(){return console.log("🌐 Using VITE_API_BASE:","https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"),"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}let ep=null,tp=null,Nh=null;async function kn(){return Nh&&Nh!==window.location.hostname&&(console.log(`🔄 Hostname changed from ${Nh} to ${window.location.hostname}, clearing API cache`),ep=null,tp=null,Nh=null),ep||(tp||(Nh=window.location.hostname,tp=iU().then(e=>(ep=e,e))),tp)}function tL(){ep=null,tp=null,console.log("🔄 API base cache reset")}const mw=async(e,t,r,n,a,i,s,l)=>{const u=await kn(),h=r.filter(b=>b.enabled!==!1),p={};h.forEach(b=>{const{type:x,enabled:v,...T}=b;p[x]=T});const f={query:e,providers:p};l?.temperature!==void 0&&(f.temperature=l.temperature),l?.maxTokens!==void 0&&(f.max_tokens=l.maxTokens),l?.reasoningDepth!==void 0&&(f.reasoning_depth=l.reasoningDepth),l?.clarificationAnswers&&(f.clarificationAnswers=l.clarificationAnswers),l?.previousContext&&(f.previousContext=l.previousContext),l?.forcePlan&&(f.forcePlan=!0),l?.language&&(f.language=l.language);const y=await eL(`${u}/planning`,f,t,l?.signal);await Z3(y,a,i,s)},yw=async(e,t,r,n,a,i,s,l)=>{if(!e.stream&&!e.tools&&Ah.isEnabled())try{const v=await Ah.getLLMResponse(e.messages);if(v){r("content",{content:v.content}),r("complete",{response:v,usage:v.usage,model:v.model,cached:!0}),n&&n();return}}catch(v){console.error("Cache lookup failed, continuing with API call:",v)}const u=await kn(),h=await eL(`${u}/chat`,e,t,i,s,3,1e3,l);let p="",f=null,y;await Z3(h,(v,T)=>{Ah.isEnabled()&&!e.tools&&(v==="content"&&(p+=T.content||""),v==="complete"&&(f=T.usage,y=T.model)),r(v,T)},async()=>{if(Ah.isEnabled()&&!e.tools&&p)try{await Ah.setLLMResponse(e.messages,{role:"assistant",content:p},f,y)}catch(v){console.error("Failed to cache response:",v)}n&&n()},a)},rL=async(e,t,r,n,a,i,s,l,u)=>{const h=await kn(),p={prompt:e,provider:t,model:r,modelKey:n,size:a,quality:i,style:s,accessToken:l,...u||{}};try{const f=await fetch(`${h}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p),credentials:"include"}),y=await f.json();return f.ok?y:{success:!1,error:y.error||`HTTP ${f.status}: ${f.statusText}`}}catch(f){return console.error("Image generation request failed:",f),{success:!1,error:f.message||"Failed to generate image"}}},sU=async(e,t)=>{const r=await kn();try{const n=await fetch(`${r}/paypal/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({amount:e}),credentials:"include"}),a=await n.json();return n.ok?{success:!0,orderId:a.orderId}:{success:!1,error:a.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order creation failed:",n),{success:!1,error:n.message||"Failed to create PayPal order"}}},oU=async(e,t)=>{const r=await kn();try{const n=await fetch(`${r}/paypal/capture-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({orderId:e}),credentials:"include"}),a=await n.json();return n.ok?{success:!0,creditsAdded:a.creditsAdded,newBalance:a.newBalance}:{success:!1,error:a.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order capture failed:",n),{success:!1,error:n.message||"Failed to capture PayPal order"}}},nL=async(e,t,r,n,a="adult")=>{const i=await kn(),s=await fetch(`${i}/quiz/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({content:e,enrichment:t,providers:r,maturityLevel:a}),credentials:"include"});if(!s.ok){const l=await s.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||`HTTP ${s.status}: ${s.statusText}`)}return await s.json()},lU=Object.freeze(Object.defineProperty({__proto__:null,capturePayPalOrder:oU,createPayPalOrder:sU,generateImage:rL,generatePlan:mw,generateQuiz:nL,getCachedApiBase:kn,resetApiBase:tL,sendChatMessageStreaming:yw},Symbol.toStringTag,{value:"Module"}));class cU{config=null;status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0};syncQueue=[];syncInterval=null;apiUrl=null;eventCallbacks={onStart:[],onComplete:[],onError:[]};constructor(){this.initializeApiUrl(),this.initializeDeviceId(),this.loadQueueFromStorage()}async initializeApiUrl(){this.apiUrl=await kn()}async getApiUrl(){return this.apiUrl?this.apiUrl:(await this.initializeApiUrl(),this.apiUrl)}initializeDeviceId(){let t=localStorage.getItem("rag_device_id");t||(t=`device-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("rag_device_id",t))}getDeviceId(){return localStorage.getItem("rag_device_id")||"unknown"}async initialize(t){this.config={...t,deviceId:this.getDeviceId()},localStorage.setItem("rag_sync_config",JSON.stringify(this.config)),console.log("🔄 RAG Sync Service initialized:",this.config),t.autoSync&&this.startAutoSync()}getStatus(){return{...this.status}}async pushSnippets(t,r,n){if(!this.config)throw new Error("Sync service not initialized");try{console.log(`📤 Pushing ${t.length} snippets to Sheets...`);const a=await this.getApiUrl(),i=await fetch(`${a}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify({operation:"push-snippets",userEmail:r,deviceId:this.config.deviceId,data:t})});if(!i.ok){const l=await i.json();throw new Error(l.error||"Failed to push snippets")}const s=await i.json();console.log(`✅ Pushed ${s.count||t.length} snippets`)}catch(a){throw console.error("❌ Error pushing snippets:",a),a}}async pullSnippets(t,r){if(!this.config)throw new Error("Sync service not initialized");try{console.log("📥 Pulling snippets from Sheets...");const n=await this.getApiUrl(),a=await fetch(`${n}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({operation:"pull-snippets",userEmail:t,deviceId:this.config.deviceId})});if(!a.ok){const l=await a.json();throw new Error(l.error||"Failed to pull snippets")}const s=(await a.json()).snippets||[];return console.log(`✅ Pulled ${s.length} snippets`),s}catch(n){throw console.error("❌ Error pulling snippets:",n),n}}async fullSync(t,r){if(!this.config)throw new Error("Sync service not initialized");this.status.inProgress=!0,this.notifyStart();const n={snippetsPushed:0,snippetsPulled:0,embeddingsPushed:0,embeddingsPulled:0,conflicts:0,errors:[]};try{console.log("🔄 Starting full sync...");const a=await this.pullSnippets(t),{toUpload:i,toDownload:s,conflicts:l}=this.mergeSnippets(r,a);return n.conflicts=l.length,this.status.conflictsResolved+=l.length,i.length>0&&(await this.pushSnippets(i,t),n.snippetsPushed=i.length),n.snippetsPulled=s.length,this.status.lastSync=Date.now(),this.status.lastError=null,localStorage.setItem("rag_last_sync",this.status.lastSync.toString()),console.log("✅ Full sync complete:",n),this.notifyComplete(n),n}catch(a){throw console.error("❌ Full sync failed:",a),this.status.lastError=a.message,n.errors.push(a.message),this.notifyError(a),a}finally{this.status.inProgress=!1}}mergeSnippets(t,r){const n=new Map(t.map(u=>[u.id,u])),a=new Map(r.map(u=>[u.id,u])),i=[],s=[],l=[];for(const u of t){const h=a.get(u.id);if(!h)i.push(u);else{const p=u.updateDate||u.timestamp,f=h.updateDate||h.timestamp;p>f?i.push(u):f>p&&s.push(h)}}for(const u of r)n.has(u.id)||s.push(u);return console.log(`📊 Merge result: ${i.length} to upload, ${s.length} to download, ${l.length} conflicts`),{toUpload:i,toDownload:s,conflicts:l}}queueSync(t){const r={...t,timestamp:Date.now()};this.syncQueue.push(r),this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(`📝 Queued ${t.type} operation (${this.syncQueue.length} pending)`),this.config?.autoSync&&!this.status.inProgress&&setTimeout(()=>{this.syncQueue.length>0&&!this.status.inProgress&&this.processSyncQueue().catch(console.error)},2e3)}async processSyncQueue(){if(!(!this.config||this.syncQueue.length===0)){console.log(`🔄 Processing ${this.syncQueue.length} queued operations...`),this.status.inProgress=!0;try{const t=this.syncQueue.filter(r=>r.type==="push-snippet");if(t.length>0){const r=t.map(a=>a.data),n=t[0].userEmail;await this.pushSnippets(r,n),this.syncQueue=this.syncQueue.filter(a=>a.type!=="push-snippet")}this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(`✅ Queue processed, ${this.syncQueue.length} remaining`)}catch(t){console.error("❌ Error processing queue:",t)}finally{this.status.inProgress=!1}}}startAutoSync(){if(!this.syncInterval){if(!this.config){console.warn("Cannot start auto-sync: service not initialized");return}console.log(`🔄 Starting auto-sync (interval: ${this.config.syncInterval}ms)`),this.syncInterval=setInterval(()=>{!this.status.inProgress&&this.syncQueue.length>0&&this.processSyncQueue().catch(console.error)},this.config.syncInterval)}}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log("⏹️ Auto-sync stopped"))}saveQueueToStorage(){try{localStorage.setItem("rag_sync_queue",JSON.stringify(this.syncQueue))}catch(t){console.error("Failed to save sync queue:",t)}}loadQueueFromStorage(){try{const t=localStorage.getItem("rag_sync_queue");t&&(this.syncQueue=JSON.parse(t),this.status.pendingChanges=this.syncQueue.length,console.log(`📝 Loaded ${this.syncQueue.length} queued operations from storage`))}catch(t){console.error("Failed to load sync queue:",t)}}async pushEmbeddings(t,r){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const n=localStorage.getItem("rag_spreadsheet_id");if(!n)throw new Error("No spreadsheet ID found. User may not be logged in.");let a=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!a)throw new Error("Not authenticated");const i=100,s=Math.ceil(t.length/i);for(let l=0;l<s;l++){const u=t.slice(l*i,(l+1)*i);r&&r(Math.min((l+1)*i,t.length),t.length);const h=await this.getApiUrl(),p=await fetch(`${h}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({operation:"push",spreadsheetId:n,chunks:u})});if(!p.ok)throw new Error(`Failed to push embeddings: ${p.status}`)}console.log(`✅ Pushed ${t.length} chunks to Google Sheets`)}catch(n){throw console.error("Failed to push embeddings:",n),n}}async pullEmbeddings(t){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const r=localStorage.getItem("rag_spreadsheet_id");if(!r)throw new Error("No spreadsheet ID found. User may not be logged in.");let n=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!n)throw new Error("Not authenticated");const a=await this.getApiUrl(),i=await fetch(`${a}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({operation:"pull",spreadsheetId:r,snippetIds:t})});if(!i.ok)throw new Error(`Failed to pull embeddings: ${i.status}`);const{chunks:s}=await i.json();return console.log(`✅ Pulled ${s?.length||0} chunks from Google Sheets`),s||[]}catch(r){throw console.error("Failed to pull embeddings:",r),r}}onSyncStart(t){this.eventCallbacks.onStart.push(t)}onSyncComplete(t){this.eventCallbacks.onComplete.push(t)}onSyncError(t){this.eventCallbacks.onError.push(t)}notifyStart(){this.eventCallbacks.onStart.forEach(t=>t())}notifyComplete(t){this.eventCallbacks.onComplete.forEach(r=>r(t))}notifyError(t){this.eventCallbacks.onError.forEach(r=>r(void 0,t))}clear(){this.syncQueue=[],this.status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0},localStorage.removeItem("rag_sync_queue"),localStorage.removeItem("rag_last_sync"),console.log("🗑️ Sync service cleared")}}const ka=new cU;let uc=null,Yx=null,w2=0;function S2(e){const t=window.google;if(!t?.accounts?.oauth2){console.warn("⚠️ Google Identity Services not loaded - include GIS script in index.html");return}if(uc){console.log("✅ Google Identity already initialized");return}try{uc=t.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/drive.file",callback:()=>{console.log("🔐 Token response received")}}),console.log("✅ Google Identity Services initialized")}catch(r){console.error("❌ Failed to initialize Google Identity Services:",r)}}function uU(){return uc!==null}async function X1(e){if(!uc)throw new Error("Google Identity Services not initialized. Call initGoogleIdentity() first.");const t=Date.now();return Yx&&w2>t+6e4?(console.log("🔐 Using cached access token"),Yx):new Promise((r,n)=>{if(!uc)return n(new Error("Token client not initialized"));uc.callback=a=>{if("error"in a)return console.error("❌ OAuth error:",a.error),n(new Error(`OAuth error: ${a.error}`));if(!a.access_token)return n(new Error("No access token received"));Yx=a.access_token,w2=Date.now()+a.expires_in*1e3,console.log("✅ Access token obtained (expires in",a.expires_in,"seconds)"),r(a.access_token)},uc.requestAccessToken(e)})}async function dU(e,t,r){if(!e)throw new Error("Spreadsheet ID is required");if(!r||r.length===0)throw new Error("No values to append");const n=await X1(),a=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}:append?valueInputOption=RAW`,i={values:r};console.log(`📤 Appending ${r.length} rows to sheet: ${t}`);const s=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){const u=await s.text();throw console.error("❌ Sheets API error:",{status:s.status,statusText:s.statusText,body:u}),new Error(`Sheets API error: ${s.status} ${s.statusText}. ${u}`)}const l=await s.json();return console.log(`✅ Appended ${l.updates.updatedRows} rows to Google Sheets`),l}async function hU(e,t){const r=await X1(),n=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}`,a=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!a.ok){const s=await a.text();throw new Error(`Sheets API error: ${a.status} ${a.statusText}. ${s}`)}return(await a.json()).values||[]}function pU(e){return e.map(t=>[t.id||"",t.snippet_id||"",t.snippet_name||"",t.chunk_text||"",JSON.stringify(t.embedding||[]),t.chunk_index??0,t.embedding_model||"",t.embedding_provider||"",t.embedding_dimensions||0,t.source_type||"text",t.created_at||new Date().toISOString()])}function Pi(e,t){const[r,n]=_.useState(()=>{uw(e);try{const i=Ch.getItem(e);return i?JSON.parse(i):t}catch(i){console.error(`Error loading scoped localStorage key "${e}":`,i);try{const s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.error(`Error loading unscoped localStorage key "${e}":`,s),t}}});return _.useEffect(()=>{const i=()=>{try{uw(e);const s=Ch.getItem(e);n(s?JSON.parse(s):t)}catch(s){console.error(`Error reloading scoped localStorage key "${e}" on storage change:`,s)}};return window.addEventListener("auth-change",i),()=>{window.removeEventListener("auth-change",i)}},[e,t]),[r,i=>{try{n(s=>{const l=i instanceof Function?i(s):i;try{Ch.setItem(e,JSON.stringify(l))}catch(u){if(u?.name==="QuotaExceededError"){console.warn(`localStorage quota exceeded for key "${e}". Attempting cleanup...`);try{const h=gU("chat_history_");if(h.length>5){const p=h.sort().slice(0,h.length-5);p.forEach(f=>window.localStorage.removeItem(f)),console.log(`Removed ${p.length} old chat history items`)}Ch.setItem(e,JSON.stringify(l)),console.log("Successfully saved after cleanup")}catch(h){if(console.error("Failed to save even after cleanup:",h),e==="app_settings"){const p={version:l.version,providers:[],tavilyApiKey:""};Ch.setItem(e,JSON.stringify(p)),console.warn("Saved minimal settings due to quota")}}}else throw u}return l})}catch(s){console.error(`Error saving scoped localStorage key "${e}":`,s)}}]}function gU(e){try{return Object.keys(localStorage).filter(t=>t.startsWith(e))}catch(t){return console.error("Error getting localStorage keys:",t),[]}}const fU={groq:"https://api.groq.com/openai/v1",openai:"https://api.openai.com/v1",gemini:"https://generativelanguage.googleapis.com/v1beta",together:"https://api.together.xyz/v1",replicate:"https://api.replicate.com/v1",atlascloud:"https://api.atlascloud.ai/v1",speaches:"http://localhost:8000",anthropic:"https://api.anthropic.com/v1"},nye={groq:{name:"Groq",icon:"⚡",description:"Fast inference with LLaMA and Mixtral models"},openai:{name:"OpenAI",icon:"🤖",description:"GPT-4, GPT-4o, and other OpenAI models"},gemini:{name:"Google Gemini",icon:"✨",description:"Google's Gemini models"},together:{name:"Together AI",icon:"🔌",description:"Open source models including FLUX image generation"},replicate:{name:"Replicate",icon:"🔄",description:"Run ML models via API"},atlascloud:{name:"Atlas Cloud",icon:"☁️",description:"API marketplace for various LLM models"},speaches:{name:"Speaches (Local)",icon:"🏠",description:"Local Whisper server for STT and TTS (OpenAI compatible)"},anthropic:{name:"Anthropic",icon:"🧠",description:"Claude models - Advanced reasoning and analysis"},"openai-compatible":{name:"OpenAI Compatible (Custom)",icon:"⚙️",description:"Custom endpoint with OpenAI-compatible API"}},fm="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",bw="https://www.googleapis.com/auth/drive.file";let wl=null,Xi=null;const zm="google_access_token";Xi=localStorage.getItem(zm);const mU=()=>new Promise((e,t)=>{if(console.log("🔐 Initializing Google Auth..."),console.log("📋 Client ID configured:","YES"),console.log("📋 Client ID value:",fm.substring(0,20)+"..."),typeof google<"u"&&google.accounts){console.log("✅ Google Identity Services already loaded"),wl||(wl=google.accounts.oauth2.initTokenClient({client_id:fm,scope:bw,callback:n=>{if(console.log("🎫 Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const a=n.access_token.trim().replace(/[\r\n]/g,"");if(Xi=a,localStorage.setItem(zm,a),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log("✅ Access token received and stored:",a.substring(0,20)+"..."),e(a)}else console.error("❌ No access token in response:",n),t(new Error("Failed to get access token"))}})),e(wl);return}console.log("📥 Loading Google Identity Services library...");const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{console.log("✅ Google Identity Services library loaded"),wl=google.accounts.oauth2.initTokenClient({client_id:fm,scope:bw,callback:n=>{if(console.log("🎫 Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const a=n.access_token.trim().replace(/[\r\n]/g,"");if(Xi=a,localStorage.setItem(zm,a),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log("✅ Access token received and stored:",a.substring(0,20)+"..."),e(a)}else console.error("❌ No access token in response:",n),t(new Error("Failed to get access token"))}}),console.log("✅ Token client initialized"),e(wl)},r.onerror=()=>{console.error("❌ Failed to load Google Identity Services library"),t(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)}),aa=async()=>{if(console.log("🔑 Requesting Google Auth..."),console.log("📋 Current token:",Xi?Xi.substring(0,20)+"...":"NONE"),Xi){console.log("🔍 Validating existing token...");try{if((await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:"Bearer "+Xi}})).ok)return console.log("✅ Token is still valid"),Xi;console.warn("⚠️ Token invalid, clearing..."),Xi=null}catch(e){console.error("❌ Token validation failed:",e),Xi=null}}return wl||(console.log("🔧 Token client not initialized, initializing..."),await mU()),new Promise((e,t)=>{try{console.log("🎫 Setting up token callback..."),wl.callback=r=>{if(console.log("📨 Token callback triggered:",{hasToken:!!r.access_token,error:r.error,errorDescription:r.error_description}),r.error){const n="Authentication failed: "+r.error+(r.error_description?" - "+r.error_description:"")+". Please grant permissions and try again.";console.error("❌",n),t(new Error(n));return}r.access_token?(Xi=r.access_token,localStorage.setItem(zm,r.access_token),console.log("✅ New access token received and stored:",r.access_token.substring(0,20)+"..."),e(r.access_token)):(console.error("❌ No access token in response"),t(new Error("No access token received. Please grant permissions and try again.")))},console.log("🚀 Requesting access token from Google..."),console.log("📋 Scopes requested:",bw),console.log("📋 Using Client ID:",fm?.substring(0,30)+"..."),console.log("📋 Current origin:",window.location.origin),wl.requestAccessToken({prompt:""}),console.log("⏳ Waiting for user to grant permissions...")}catch(r){console.error("❌ Failed to request access token:",r),t(new Error("Failed to request access token. Please grant permissions and try again."))}})},aye=async()=>{console.log("📝 Listing Google Docs...");const e=await aa();console.log("🔑 Using token:",e.substring(0,20)+"...");const t="mimeType='application/vnd.google-apps.spreadsheet' and trashed=false and name='Research Agent Swag'";console.log("🔍 Query:",t),console.log("🚀 Making API request to Google Drive...");const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name,modifiedTime,properties,description)&orderBy=modifiedTime desc",{headers:{Authorization:"Bearer "+e}});if(console.log("📩 Response status:",r.status,r.statusText),!r.ok){const i=await r.json().catch(()=>({}));console.error("❌ API Error:",i);const l="Failed to list documents: "+(i.error?.message||r.statusText)+". Please grant permissions and try again.";throw console.error("❌",l),new Error(l)}const n=await r.json();console.log("✅ Documents retrieved:",n.files?.length||0);const a=n.files.filter(i=>i.name==="Research Agent Swag");return console.log('✅ Documents with exact name "Research Agent Swag":',a.length),a.map(i=>({id:i.id,name:i.name,modifiedTime:i.modifiedTime}))},iye=async(e,t)=>{console.log("➕ Appending to Google Doc:",e);const r=await aa();console.log("🔑 Using token:",r.substring(0,20)+"..."),console.log("📖 Getting document details...");const n=await fetch("https://docs.googleapis.com/v1/documents/"+e,{headers:{Authorization:"Bearer "+r}});if(!n.ok){const l=await n.json().catch(()=>({}));console.error("❌ API Error:",l);const h="Failed to get document: "+(l.error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("❌",h),new Error(h)}const a=await n.json(),i=a.body.content[a.body.content.length-1].endIndex-1;console.log("📍 End index:",i),console.log("✍️ Appending content...");const s=await fetch("https://docs.googleapis.com/v1/documents/"+e+":batchUpdate",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({requests:[{insertText:{location:{index:i},text:`

`+t+`
`}}]})});if(!s.ok){const l=await s.json().catch(()=>({}));console.error("❌ API Error:",l);const h="Failed to append to document: "+(l.error?.message||s.statusText)+". Please grant permissions and try again.";throw console.error("❌",h),new Error(h)}console.log("✅ Content appended successfully")},Qx=()=>!!Xi,T2="Research Agent",aL="Research Agent Settings",J1=async()=>{console.log("📁 Finding or creating Research Agent folder...");const e=await aa(),t=`mimeType='application/vnd.google-apps.folder' and name='${T2}' and trashed=false`;console.log("🔍 Searching for folder:",t);const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+e}});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error("Failed to search for folder: "+(s.error?.message||r.statusText))}const n=await r.json();if(n.files&&n.files.length>0){const s=n.files[0].id;return console.log("✅ Found existing folder:",s),s}console.log("📁 Creating new folder...");const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:T2,mimeType:"application/vnd.google-apps.folder",description:"Storage for Research Agent settings and snippets"})});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error("Failed to create folder: "+(s.error?.message||a.statusText))}const i=await a.json();return console.log("✅ Created new folder:",i.id),i.id},iL=async e=>{console.log("📄 Searching for settings file in folder:",e);const t=await aa(),r=`name='${aL}' and '${e}' in parents and trashed=false`;console.log("🔍 Query:",r);const n=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(r)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+t}});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error("Failed to search for settings file: "+(i.error?.message||n.statusText))}const a=await n.json();return a.files&&a.files.length>0?(console.log("✅ Found settings file:",a.files[0].id),a.files[0].id):(console.log("ℹ️  No settings file found"),null)},yU=async(e,t)=>{console.log("📄 Creating settings file in folder:",e);const r=await aa(),n="-------314159265358979323846",a=`\r
--`+n+`\r
`,i=`\r
--`+n+"--",s={name:aL,mimeType:"text/plain",parents:[e],description:"Research Agent Settings - Contains API keys and provider configuration"},l=a+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(s)+a+`Content-Type: text/plain\r
\r
`+t+i,u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"multipart/related; boundary="+n},body:l});if(!u.ok){const p=await u.json().catch(()=>({}));throw new Error("Failed to create settings file: "+(p.error?.message||u.statusText))}const h=await u.json();return console.log("✅ Settings file created:",h.id),h.id},bU=async(e,t)=>{console.log("📝 Updating settings file:",e);const r=await aa(),n=await fetch("https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media",{method:"PATCH",headers:{Authorization:"Bearer "+r,"Content-Type":"text/plain"},body:t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error("Failed to update settings file: "+(a.error?.message||n.statusText))}console.log("✅ Settings file updated")},k2=async()=>{try{console.log("📥 Loading settings from Google Drive...");const e=await J1(),t=await iL(e);if(!t)return console.log("ℹ️  No settings file found in Google Drive"),null;const r=await aa(),n=await fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+r}});if(!n.ok)throw new Error("Failed to download settings: "+n.statusText);const a=await n.text();return console.log("✅ Settings loaded from Google Drive"),a}catch(e){throw console.error("❌ Failed to load settings from Google Drive:",e),e}},Kx=async e=>{try{console.log("💾 Saving settings to Google Drive...");const t=await J1(),r=await iL(t);r?await bU(r,e):await yU(t,e),console.log("✅ Settings saved to Google Drive")}catch(t){throw console.error("❌ Failed to save settings to Google Drive:",t),t}},sye=async e=>{console.log("📄 Creating Google Doc in Research Agent folder:",e);const t=await aa(),r=await J1();console.log("🚀 Making API request to Google Docs...");const n=await fetch("https://docs.googleapis.com/v1/documents",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(console.log("📩 Response status:",n.status,n.statusText),!n.ok){const u="Failed to create document: "+((await n.json().catch(()=>({}))).error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("❌",u),new Error(u)}const i=(await n.json()).documentId;try{console.log("📁 Moving document to Research Agent folder..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?addParents=${r}&fields=id,parents`,{method:"PATCH",headers:{Authorization:"Bearer "+t}})).ok?console.log("✅ Document moved to folder"):console.warn("⚠️ Could not move document to folder (document still created)")}catch(s){console.warn("⚠️ Could not move document to folder:",s)}try{console.log("🏷️  Adding app metadata to document..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=id`,{method:"PATCH",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({properties:{createdByApp:"LambdaLLMProxy-Swag",appVersion:"1.0"},description:"Created by LLM Proxy Swag feature"})})).ok?console.log("✅ Metadata added successfully"):console.warn("⚠️ Could not add metadata (document still created)")}catch(s){console.warn("⚠️ Could not add metadata:",s)}return{id:i,name:e,modifiedTime:new Date().toISOString()}},sL=_.createContext(void 0);function xU(e){let t=e;if(t.version==="2.0.0"){if("provider"in t||"llmApiKey"in t){const{provider:r,llmApiKey:n,...a}=t;t=a}}else{const r=[];if(t.provider&&t.llmApiKey){const n=t.provider==="groq"?"groq":"openai";r.push({id:crypto.randomUUID(),type:n,apiEndpoint:fU[n],apiKey:t.llmApiKey})}t={version:"2.0.0",providers:r,tavilyApiKey:t.tavilyApiKey||""}}return(!t.embeddingSource||t.embeddingSource==="undefined")&&(console.log('🔧 Migrating: Setting default embeddingSource to "local"'),t.embeddingSource="local"),(!t.embeddingModel||t.embeddingModel==="undefined")&&(console.log('🔧 Migrating: Setting default embeddingModel to "Xenova/all-MiniLM-L6-v2"'),t.embeddingModel="Xenova/all-MiniLM-L6-v2"),t}const vU=({children:e})=>{const[t,r]=Pi("app_settings",{version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!0,language:"en",embeddingSource:"local",embeddingModel:"Xenova/all-MiniLM-L6-v2"}),[n,a]=_.useState(!1),i=xU(t);_.useEffect(()=>{t!==i&&(r(i),Qx()&&Kx(JSON.stringify(i,null,2)).catch(p=>{console.error("❌ Failed to save migrated settings to Google Drive:",p)}))},[t,i,r]),_.useEffect(()=>{(async()=>{if(Qx()&&!n)try{a(!0),console.log("🔄 Auto-loading settings from Google Drive...");const f=await k2();if(f){const y=JSON.parse(f);r(y),console.log("✅ Settings auto-loaded from Google Drive")}}catch(f){console.error("❌ Failed to auto-load settings from Google Drive:",f)}finally{a(!1)}})()},[]);const s=p=>{r(p),Qx()&&Kx(JSON.stringify(p,null,2)).catch(f=>{console.error("❌ Failed to auto-save settings to Google Drive:",f)})},l=async()=>{try{console.log("📥 Manually loading settings from Google Drive...");const p=await k2();if(p){const f=JSON.parse(p);r(f),console.log("✅ Settings loaded from Google Drive")}else throw new Error("No settings found in Google Drive")}catch(p){throw console.error("❌ Failed to load settings from Google Drive:",p),p}},u=async()=>{try{console.log("💾 Manually saving settings to Google Drive..."),await Kx(JSON.stringify(i,null,2)),console.log("✅ Settings saved to Google Drive")}catch(p){throw console.error("❌ Failed to save settings to Google Drive:",p),p}},h=()=>{r({version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!1,embeddingSource:"local",embeddingModel:"Xenova/all-MiniLM-L6-v2"}),console.log("🗑️  Settings cleared")};return d.jsx(sL.Provider,{value:{settings:i,setSettings:s,loadFromGoogleDrive:l,saveToGoogleDrive:u,clearSettings:h},children:e})},Xs=()=>{const e=_.useContext(sL);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},E2="rag_embeddings",wU=2,si="chunks",Ms="metadata",Pu="search_cache";class SU{db=null;initPromise=null;async resetDatabase(){console.log("🗑️ Deleting and recreating RAG database..."),this.db&&(this.db.close(),this.db=null),this.initPromise=null,await new Promise((t,r)=>{const n=indexedDB.deleteDatabase(E2);n.onsuccess=()=>{console.log("✅ Database deleted successfully"),t()},n.onerror=()=>{console.error("❌ Failed to delete database:",n.error),r(n.error)},n.onblocked=()=>{console.warn("⚠️ Database deletion blocked - close all tabs using this database")}}),await this.init(),console.log("✅ Database recreated successfully")}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{if(!window.indexedDB){console.warn("IndexedDB not supported"),r(new Error("IndexedDB not supported"));return}const n=indexedDB.open(E2,wU);n.onerror=()=>{console.error("RAG IndexedDB error:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("RAG IndexedDB initialized"),t()},n.onupgradeneeded=a=>{const i=a.target.result,s=a.oldVersion;if(!i.objectStoreNames.contains(si)){const l=i.createObjectStore(si,{keyPath:"id"});l.createIndex("snippet_id","snippet_id",{unique:!1}),l.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(Ms)||i.createObjectStore(Ms,{keyPath:"snippet_id"}),s<2&&!i.objectStoreNames.contains(Pu)&&i.createObjectStore(Pu,{keyPath:"query"}).createIndex("created_at","created_at",{unique:!1})}}),this.initPromise)}async hasEmbedding(t,r){return await this.init(),this.db?new Promise((n,a)=>{const u=this.db.transaction([si],"readonly").objectStore(si).index("snippet_id").getAll(IDBKeyRange.only(t));u.onsuccess=()=>{const h=u.result;if(!r)n(h.length>0);else{const p=h.filter(f=>f.embedding_model===r);n(p.length>0)}},u.onerror=()=>{console.error("Error checking embedding:",u.error),a(u.error)}}):!1}async getEmbeddingDetails(t){return await this.init(),this.db?new Promise((r,n)=>{const a=this.db.transaction([si,Ms],"readonly"),l=a.objectStore(si).index("snippet_id").getAll(IDBKeyRange.only(t)),h=a.objectStore(Ms).get(t);a.oncomplete=()=>{const p=l.result,f=h.result;r({hasEmbedding:p.length>0,chunkCount:p.length,chunks:p.sort((y,b)=>y.chunk_index-b.chunk_index),metadata:f})},a.onerror=()=>{console.error("Error getting embedding details:",a.error),n(a.error)}}):{hasEmbedding:!1,chunkCount:0,chunks:[]}}async bulkCheckEmbeddings(t,r){if(await this.init(),!this.db)return{};const n={};for(const a of t)try{n[a]=await this.hasEmbedding(a,r)}catch(i){console.error(`Error checking embedding for ${a}:`,i),n[a]=!1}return n}async saveChunks(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return console.log("💾 saveChunks called with:",{chunkCount:t.length,firstChunk:t[0],firstChunkKeys:t[0]?Object.keys(t[0]):[],hasId:t[0]?.id!==void 0,idValue:t[0]?.id,idType:typeof t[0]?.id,chunkStringified:JSON.stringify(t[0],null,2)}),new Promise(async(n,a)=>{const i=t[0]?.snippet_id||r?.snippet_id,s=t[0]?.embedding_model;if(i&&s)try{console.log(`🗑️ Deleting old chunks for snippet: ${i} (model: ${s})`),await this.deleteChunks(i,s),console.log("✅ Deleted old chunks for snippet")}catch(h){console.warn("⚠️ Failed to delete old chunks:",h)}const l=this.db.transaction([si,Ms],"readwrite"),u=l.objectStore(si);console.log("🔍 IndexedDB Store Info:",{storeName:u.name,keyPath:u.keyPath,autoIncrement:u.autoIncrement,indexNames:Array.from(u.indexNames)});for(let h=0;h<t.length;h++){const p=t[h];try{const f=p.snippet_id||r?.snippet_id||"unknown",y=p.chunk_index??h,b=p.id||`${f}_chunk_${y}`;if(!b||b==="undefined_chunk_0"||b==="_chunk_0")throw console.error("❌ Invalid chunk ID generated:",{chunkId:b,snippetId:f,chunkIndex:y,chunk:p}),new Error(`Invalid chunk ID: ${b}`);const x=Array.isArray(p.embedding)?[...p.embedding]:Array.from(p.embedding||[]),v={id:b,snippet_id:f,chunk_text:p.chunk_text||"",embedding:x,chunk_index:y,embedding_model:p.embedding_model||"text-embedding-3-small",created_at:p.created_at||new Date().toISOString()};if(!v.id)throw new Error(`Chunk missing id property after normalization: ${JSON.stringify(Object.keys(v))}`);const T=v.id;if(!T)throw new Error(`Cannot access id property via bracket notation: ${T}`);const k=Object.getPrototypeOf(v);if(k!==Object.prototype)throw new Error(`Chunk has non-plain prototype: ${k?.constructor?.name}`);console.log("🔍 Putting chunk:",{id:v.id,snippetId:v.snippet_id,chunkIndex:v.chunk_index,embeddingLength:v.embedding.length,embeddingType:v.embedding.constructor.name,allKeys:Object.keys(v),idDescriptor:Object.getOwnPropertyDescriptor(v,"id"),objectType:typeof v,prototypeChainDepth:(()=>{let P=0,M=v;for(;M&&P<10;)M=Object.getPrototypeOf(M),P++;return P})()});const C=JSON.stringify(v),A=JSON.parse(C);if(!A.id)throw new Error(`Chunk id lost during JSON serialization! Original: ${v.id}`);console.log("✅ Chunk survived JSON round-trip with id:",A.id),await new Promise((P,M)=>{const L=u.put(A);L.onsuccess=()=>{P()},L.onerror=()=>{console.error("❌ PUT request failed:",{chunk:v,error:L.error,errorName:L.error?.name,errorMessage:L.error?.message,chunkKeys:Object.keys(v),hasIdProperty:"id"in v,idValue:v.id}),M(L.error)}})}catch(f){throw console.error("❌ Error putting chunk:",{chunk:p,error:f}),f}}r&&l.objectStore(Ms).put(r),l.oncomplete=()=>{console.log(`Saved ${t.length} chunks to IndexedDB`),n()},l.onerror=()=>{console.error("Error saving chunks:",l.error),a(l.error)}})}async deleteChunks(t,r){if(await this.init(),!!this.db)return new Promise((n,a)=>{const i=this.db.transaction([si,Ms],"readwrite"),u=i.objectStore(si).index("snippet_id").openCursor(IDBKeyRange.only(t));u.onsuccess=h=>{const p=h.target.result;if(p){const f=p.value;(!r||f.embedding_model===r)&&p.delete(),p.continue()}},r||i.objectStore(Ms).delete(t),i.oncomplete=()=>{const h=r?` (model: ${r})`:"";console.log(`Deleted chunks for snippet ${t}${h}`),n()},i.onerror=()=>{console.error("Error deleting chunks:",i.error),a(i.error)}})}async getAllEmbeddedSnippetIds(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([Ms],"readonly").objectStore(Ms).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting embedded snippet IDs:",i.error),r(i.error)}}):[]}async cacheQueryEmbedding(t,r,n){if(await this.init(),!!this.db)return new Promise((a,i)=>{const s=this.db.transaction([Pu],"readwrite"),l=s.objectStore(Pu),u={query:t,embedding:r,model:n,created_at:Date.now()};l.put(u),s.oncomplete=()=>{a()},s.onerror=()=>{console.error("Error caching query embedding:",s.error),i(s.error)}})}async getCachedQueryEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const s=this.db.transaction([Pu],"readonly").objectStore(Pu).get(t);s.onsuccess=()=>{const l=s.result;r(l?{embedding:l.embedding,model:l.model}:null)},s.onerror=()=>{console.error("Error getting cached query:",s.error),n(s.error)}}):null}cosineSimilarity(t,r){if(t.length!==r.length)throw new Error("Vectors must have same length");let n=0,a=0,i=0;for(let s=0;s<t.length;s++)n+=t[s]*r[s],a+=t[s]*t[s],i+=r[s]*r[s];return n/(Math.sqrt(a)*Math.sqrt(i))}async vectorSearch(t,r=5,n=.5){return await this.init(),this.db?new Promise((a,i)=>{const u=this.db.transaction([si],"readonly").objectStore(si).getAll();u.onsuccess=()=>{const p=u.result.map(b=>({snippet_id:b.snippet_id,chunk_id:b.id,chunk_text:b.chunk_text,chunk_index:b.chunk_index,score:this.cosineSimilarity(t,b.embedding)})),f=[...p].sort((b,x)=>x.score-b.score);console.log(`🎯 Vector search - Top 10 scores (threshold: ${n}):`,f.slice(0,10).map(b=>({score:b.score.toFixed(4),snippet_id:b.snippet_id,chunk_preview:b.chunk_text.substring(0,100)+"..."})));const y=p.filter(b=>b.score>=n).sort((b,x)=>x.score-b.score).slice(0,r);console.log(`✅ Returning ${y.length} results above threshold ${n}`),a(y)},u.onerror=()=>{console.error("Error performing vector search:",u.error),i(u.error)}}):[]}async getAllChunks(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([si],"readonly").objectStore(si).getAll();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting all chunks:",i.error),r(i.error)}}):[]}}const Va=new SU,TU="Snippets";async function kU(e){try{const t=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${encodeURIComponent("Research Agent Swag")}' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false&fields=files(id,name)`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Drive API error: ${t.statusText}`);const n=(await t.json()).files||[];if(n.length===0)return console.warn('⚠️ "Research Agent Swag" spreadsheet not found'),null;const a=n[0].id;return console.log(`✅ Found "Research Agent Swag" spreadsheet: ${a}`),a}catch(t){throw console.error("❌ Error finding snippets spreadsheet:",t),t}}function EU(e){if(!e||e.length<5)return null;const[t,r,n,a,i,s,l]=e;if(!t||t==="id"||!i)return null;const u=s?s.split(",").map(y=>y.trim()).filter(Boolean):[],h=r?new Date(r).getTime():Date.now(),p=n?new Date(n).getTime():h,f=l==="chat"||l==="assistant"?"assistant":l==="user"?"user":"tool";return{id:`sheet-${t}`,content:i||"",title:a||void 0,timestamp:h,updateDate:p,sourceType:f,selected:!1,tags:u,hasEmbedding:!1}}async function CU(e,t){try{const r=await kU(t);if(!r)throw new Error("Snippets spreadsheet not found");const n=await hU(r,`${TU}!A:H`);if(!n||n.length<2)return console.warn("⚠️ No snippets found in spreadsheet"),null;for(let a=1;a<n.length;a++){const i=n[a];if(parseInt(i[0],10)===e){const l=EU(i);if(l)return console.log(`✅ Fetched snippet #${e} from Google Sheets:`,l.title),l}}return console.warn(`⚠️ Snippet #${e} not found in Google Sheets`),null}catch(r){throw console.error(`❌ Error fetching snippet #${e}:`,r),r}}const _U="PlanningDB",AU=1,Vi="plans",jf=50;class NU{db=null;initPromise=null;async init(){return this.initPromise?this.initPromise:(this.initPromise=this._init(),this.initPromise)}async _init(){if(!this.db)try{this.db=await U0(_U,AU,{upgrade(t){const r=t.createObjectStore(Vi,{keyPath:"id"});r.createIndex("by-timestamp","timestamp"),r.createIndex("by-query","query"),console.log("✅ PlanningDB object store created")}}),console.log("✅ PlanningDB initialized"),await this.migrateFromLocalStorage()}catch(t){throw console.error("❌ Error initializing PlanningDB:",t),t}}async migrateFromLocalStorage(){if(localStorage.getItem("plans_migrated_to_idb")==="true"){console.log("✓ Plans already migrated to IndexedDB");return}try{const r=localStorage.getItem("llm_proxy_planning_cache");if(!r){console.log("✓ No plans in localStorage to migrate"),localStorage.setItem("plans_migrated_to_idb","true");return}const n=JSON.parse(r);if(!Array.isArray(n)||n.length===0){console.log("✓ No valid plans in localStorage to migrate"),localStorage.setItem("plans_migrated_to_idb","true");return}const a=this.db.transaction(Vi,"readwrite"),i=a.objectStore(Vi);let s=0;for(const l of n)try{await i.put(l),s++}catch(u){console.error(`Error migrating plan ${l.id}:`,u)}await a.done,console.log(`✅ Migrated ${s} of ${n.length} plans from localStorage to IndexedDB`),localStorage.setItem("plans_migrated_to_idb","true")}catch(r){throw console.error("❌ Error during plan migration:",r),r}}async ensureInit(){this.db||await this.init()}async savePlan(t){await this.ensureInit();try{await this.db.put(Vi,t),console.log(`✓ Plan saved to IndexedDB: ${t.query.substring(0,50)}...`),await this.pruneOldPlans()}catch(r){throw console.error("❌ Error saving plan to IndexedDB:",r),r}}async getAllPlans(){await this.ensureInit();try{return(await this.db.getAll(Vi)).sort((r,n)=>n.timestamp-r.timestamp)}catch(t){return console.error("❌ Error reading plans from IndexedDB:",t),[]}}async getPlan(t){await this.ensureInit();try{return await this.db.get(Vi,t)}catch(r){console.error(`❌ Error reading plan ${t} from IndexedDB:`,r);return}}async deletePlan(t){await this.ensureInit();try{await this.db.delete(Vi,t),console.log(`✓ Plan deleted from IndexedDB: ${t}`)}catch(r){throw console.error(`❌ Error deleting plan ${t} from IndexedDB:`,r),r}}async clear(){await this.ensureInit();try{await this.db.clear(Vi),console.log("✓ All plans cleared from IndexedDB")}catch(t){throw console.error("❌ Error clearing plans from IndexedDB:",t),t}}async replacePlans(t){await this.ensureInit();try{const r=this.db.transaction(Vi,"readwrite"),n=r.objectStore(Vi);await n.clear();for(const a of t)await n.put(a);await r.done,console.log(`✅ Replaced all plans with ${t.length} items from sync`)}catch(r){throw console.error("❌ Error replacing plans in IndexedDB:",r),r}}async getPlansModifiedSince(t){await this.ensureInit();try{return(await this.getAllPlans()).filter(n=>n.timestamp>t)}catch(r){return console.error("❌ Error getting modified plans:",r),[]}}async pruneOldPlans(){try{const t=await this.getAllPlans();if(t.length<=jf)return;const n=t.sort((s,l)=>l.timestamp-s.timestamp).slice(jf),a=this.db.transaction(Vi,"readwrite"),i=a.objectStore(Vi);for(const s of n)await i.delete(s.id);await a.done,console.log(`✓ Pruned ${n.length} old plans (keeping ${jf} most recent)`)}catch(t){console.error("❌ Error pruning old plans:",t)}}async getStorageEstimate(){if("storage"in navigator&&"estimate"in navigator.storage)try{const t=await navigator.storage.estimate(),r=t.usage||0,n=t.quota||0,a=n>0?r/n*100:0;return{usage:r,quota:n,percentage:a}}catch(t){return console.error("Error getting storage estimate:",t),null}return null}async requestPersistentStorage(){if("storage"in navigator&&"persist"in navigator.storage)try{if(!await navigator.storage.persisted()){const r=await navigator.storage.persist();return console.log("Persistent storage request:",r?"granted":"denied"),r}return console.log("Storage is already persistent"),!0}catch(t){return console.error("Error requesting persistent storage:",t),!1}return console.warn("Persistent storage API not available"),!1}mergePlans(t,r){const n=new Map;return t.forEach(a=>{const i=a.query.trim().toLowerCase();n.set(i,a)}),r.forEach(a=>{const i=a.query.trim().toLowerCase(),s=n.get(i);(!s||a.timestamp>s.timestamp)&&n.set(i,a)}),Array.from(n.values()).sort((a,i)=>i.timestamp-a.timestamp).slice(0,jf)}}const El=new NU;function LU(){return`plan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function PU(){return LU()}async function Dp(){try{return await El.getAllPlans()}catch(e){return console.error("Error reading planning cache:",e),[]}}async function oL(e,t,r,n){try{const a=await Dp(),i=e.trim().toLowerCase(),s=a.find(u=>u.query.trim().toLowerCase()===i),l={id:s?.id||PU(),query:e.trim(),plan:t,systemPrompt:r,userPrompt:n,timestamp:Date.now()};await El.savePlan(l),console.log(`Plan saved ${s?"(replaced duplicate)":"(new)"}:`,e.trim()),ta.isEnabled()&&ta.queueSync("plans","high")}catch(a){throw console.error("Error saving plan to cache:",a),a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?(console.error("Storage quota exceeded. Consider:",`
1. Deleting old saved plans`,`
2. Clearing browser data`,`
3. Using persistent storage (navigator.storage.persist())`),new Error("Storage quota exceeded. Please delete some old plans to free up space, or clear your browser cache.")):a}}async function RU(e){try{await El.deletePlan(e),ta.isEnabled()&&ta.queueSync("plans","high")}catch(t){throw console.error("Error deleting cached plan:",t),t}}async function IU(){try{await El.clear()}catch(e){throw console.error("Error clearing planning cache:",e),e}}async function DU(){return await El.getStorageEstimate()}const MU="ChatHistoryDB",OU=1,Hn="chats";class jU{db=null;initPromise=null;async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(MU,OU);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("IndexedDB initialized successfully"),t(this.db)},n.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(Hn)||(i.createObjectStore(Hn,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("Created chat history object store"))}}),this.initPromise)}async saveChat(t,r,n,a){try{const l=(await this.init()).transaction([Hn],"readwrite").objectStore(Hn),u={id:t,messages:r,timestamp:Date.now(),title:n,...a?.systemPrompt&&{systemPrompt:a.systemPrompt},...a?.planningQuery&&{planningQuery:a.planningQuery},...a?.generatedSystemPrompt&&{generatedSystemPrompt:a.generatedSystemPrompt},...a?.generatedUserQuery&&{generatedUserQuery:a.generatedUserQuery},...a?.selectedSnippetIds&&{selectedSnippetIds:a.selectedSnippetIds},...a?.todosState&&{todosState:a.todosState}};await new Promise((h,p)=>{const f=l.put(u);f.onsuccess=()=>h(),f.onerror=()=>p(f.error)}),console.log(`Saved chat ${t} to IndexedDB with planning/todos metadata`)}catch(i){throw console.error("Error saving chat to IndexedDB:",i),i}}async getChat(t){try{const a=(await this.init()).transaction([Hn],"readonly").objectStore(Hn);return new Promise((i,s)=>{const l=a.get(t);l.onsuccess=()=>{const u=l.result;i(u?u.messages:null)},l.onerror=()=>s(l.error)})}catch(r){return console.error("Error getting chat from IndexedDB:",r),null}}async getChatWithMetadata(t){try{const a=(await this.init()).transaction([Hn],"readonly").objectStore(Hn);return new Promise((i,s)=>{const l=a.get(t);l.onsuccess=()=>{const u=l.result;i(u||null)},l.onerror=()=>s(l.error)})}catch(r){return console.error("Error getting chat with metadata from IndexedDB:",r),null}}async getAllChats(){try{const n=(await this.init()).transaction([Hn],"readonly").objectStore(Hn);return new Promise((a,i)=>{const s=n.getAll();s.onsuccess=()=>a(s.result||[]),s.onerror=()=>i(s.error)})}catch(t){return console.error("Error getting all chats from IndexedDB:",t),[]}}async deleteChat(t){try{const a=(await this.init()).transaction([Hn],"readwrite").objectStore(Hn);await new Promise((i,s)=>{const l=a.delete(t);l.onsuccess=()=>i(),l.onerror=()=>s(l.error)}),console.log(`Deleted chat ${t} from IndexedDB`)}catch(r){throw console.error("Error deleting chat from IndexedDB:",r),r}}async clearAllChats(){try{const n=(await this.init()).transaction([Hn],"readwrite").objectStore(Hn);await new Promise((a,i)=>{const s=n.clear();s.onsuccess=()=>a(),s.onerror=()=>i(s.error)}),console.log("Cleared all chats from IndexedDB")}catch(t){throw console.error("Error clearing all chats from IndexedDB:",t),t}}async getOldestChats(t){try{const i=(await this.init()).transaction([Hn],"readonly").objectStore(Hn).index("timestamp");return new Promise((s,l)=>{const u=i.openCursor(),h=[];u.onsuccess=p=>{const f=p.target.result;f&&h.length<t?(h.push(f.value),f.continue()):s(h)},u.onerror=()=>l(u.error)})}catch(r){return console.error("Error getting oldest chats:",r),[]}}async getCount(){try{const n=(await this.init()).transaction([Hn],"readonly").objectStore(Hn);return new Promise((a,i)=>{const s=n.count();s.onsuccess=()=>a(s.result),s.onerror=()=>i(s.error)})}catch(t){return console.error("Error getting chat count:",t),0}}async cleanupOldChats(t){try{const r=await this.getAllChats();if(r.length<=t)return 0;const a=r.sort((u,h)=>u.timestamp-h.timestamp).slice(0,r.length-t),s=(await this.init()).transaction([Hn],"readwrite"),l=s.objectStore(Hn);for(const u of a)l.delete(u.id);return await new Promise((u,h)=>{s.oncomplete=()=>u(),s.onerror=()=>h(s.error)}),console.log(`Cleaned up ${a.length} old chats`),a.length}catch(r){return console.error("Error cleaning up old chats:",r),0}}async migrateFromLocalStorage(){try{let t=0;const r=Object.keys(localStorage).filter(n=>n.startsWith("chat_history_"));for(const n of r)try{const a=localStorage.getItem(n);if(a){const i=JSON.parse(a),s=n.replace("chat_history_","");await this.saveChat(s,i),localStorage.removeItem(n),t++}}catch(a){console.error(`Error migrating ${n}:`,a)}return t>0&&console.log(`Migrated ${t} chat histories from localStorage to IndexedDB`),t}catch(t){return console.error("Error during migration:",t),0}}}const es=new jU,BU="quiz_statistics",FU=1,Ln="statistics";class zU{db=null;initPromise=null;async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{if(!window.indexedDB){console.warn("IndexedDB not supported"),r(new Error("IndexedDB not supported"));return}const n=indexedDB.open(BU,FU);n.onerror=()=>{console.error("Failed to open quiz database:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("✅ Quiz database initialized"),t()},n.onupgradeneeded=a=>{const i=a.target.result;if(!i.objectStoreNames.contains(Ln)){const s=i.createObjectStore(Ln,{keyPath:"id"});s.createIndex("completedAt","completedAt",{unique:!1}),s.createIndex("score","score",{unique:!1}),s.createIndex("percentage","percentage",{unique:!1}),s.createIndex("synced","synced",{unique:!1}),console.log("✅ Quiz statistics store created")}}}),this.initPromise)}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}async saveQuizStatistic(t){if(await this.init(),!this.db)throw new Error("Database not initialized");const r=this.generateUUID(),n=Math.round(t.score/t.totalQuestions*100),a={...t,id:r,synced:!1,percentage:n,completed:t.completed??!0};return new Promise((i,s)=>{const h=this.db.transaction([Ln],"readwrite").objectStore(Ln).add(a);h.onsuccess=()=>{console.log("✅ Quiz statistic saved:",r),i(r)},h.onerror=()=>{console.error("Failed to save quiz statistic:",h.error),s(h.error)}})}async saveGeneratedQuiz(t,r,n,a,i,s){if(await this.init(),!this.db)throw new Error("Database not initialized");const l=this.generateUUID(),u={id:l,quizTitle:t,snippetIds:r,score:0,totalQuestions:n,percentage:0,timeTaken:0,completedAt:new Date().toISOString(),answers:[],enrichment:a,synced:!1,completed:!1,quizData:i,...s!==void 0&&{cost:s}};return new Promise((h,p)=>{const b=this.db.transaction([Ln],"readwrite").objectStore(Ln).add(u);b.onsuccess=()=>{console.log("✅ Generated quiz saved:",l),h(l)},b.onerror=()=>{console.error("Failed to save generated quiz:",b.error),p(b.error)}})}async updateQuizData(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const s=this.db.transaction([Ln],"readwrite").objectStore(Ln),l=s.get(t);l.onsuccess=()=>{const u=l.result;if(!u){a(new Error("Quiz not found"));return}const h={...u,quizData:r},p=s.put(h);p.onsuccess=()=>{console.log("✅ Quiz data updated:",t),n()},p.onerror=()=>{console.error("Failed to update quiz data:",p.error),a(p.error)}},l.onerror=()=>{console.error("Failed to get quiz:",l.error),a(l.error)}})}async updateQuizCompletion(t,r,n,a){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((i,s)=>{const u=this.db.transaction([Ln],"readwrite").objectStore(Ln),h=u.get(t);h.onsuccess=()=>{const p=h.result;if(!p){s(new Error("Quiz not found"));return}const f=Math.round(r/p.totalQuestions*100),y={...p,score:r,percentage:f,timeTaken:n,answers:a,completedAt:new Date().toISOString(),completed:!0},b=u.put(y);b.onsuccess=()=>{console.log("✅ Quiz completion updated:",t),i()},b.onerror=()=>{console.error("Failed to update quiz completion:",b.error),s(b.error)}},h.onerror=()=>{console.error("Failed to get quiz:",h.error),s(h.error)}})}async getQuizStatistics(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const l=this.db.transaction([Ln],"readonly").objectStore(Ln).index("completedAt").openCursor(null,"prev"),u=[];l.onsuccess=()=>{const h=l.result;h&&(!t||u.length<t)?(u.push(h.value),h.continue()):r(u)},l.onerror=()=>{console.error("Failed to get quiz statistics:",l.error),n(l.error)}})}async getQuizStatistic(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction([Ln],"readonly").objectStore(Ln).get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>{console.error("Failed to get quiz statistic:",s.error),n(s.error)}})}async deleteQuizStatistic(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction([Ln],"readwrite").objectStore(Ln).delete(t);s.onsuccess=()=>{console.log("✅ Quiz statistic deleted:",t),r()},s.onerror=()=>{console.error("Failed to delete quiz statistic:",s.error),n(s.error)}})}async markAsSynced(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const i=this.db.transaction([Ln],"readwrite").objectStore(Ln);let s=0,l=!1;for(const u of t){const h=i.get(u);h.onsuccess=()=>{const p=h.result;if(p){p.synced=!0;const f=i.put(p);f.onsuccess=()=>{s++,s===t.length&&!l&&(console.log(`✅ Marked ${t.length} quiz statistics as synced`),r())},f.onerror=()=>{l||(l=!0,n(f.error))}}else s++,s===t.length&&!l&&r()},h.onerror=()=>{l||(l=!0,n(h.error))}}})}async getUnsyncedStatistics(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const s=this.db.transaction([Ln],"readonly").objectStore(Ln).index("synced").openCursor(IDBKeyRange.only(!1)),l=[];s.onsuccess=()=>{const u=s.result;u?(l.push(u.value),u.continue()):t(l)},s.onerror=()=>{console.error("Failed to get unsynced statistics:",s.error),r(s.error)}})}async getStatisticsSummary(){const r=(await this.getQuizStatistics()).filter(l=>l.completed);if(r.length===0)return{totalQuizzes:0,averageScore:0,averagePercentage:0,highestScore:0,lowestScore:0,totalQuestionsAnswered:0,totalCorrectAnswers:0};const n=r.reduce((l,u)=>l+u.score,0),a=r.reduce((l,u)=>l+u.totalQuestions,0),i=r.reduce((l,u)=>l+u.score,0),s=r.map(l=>l.percentage);return{totalQuizzes:r.length,averageScore:n/r.length,averagePercentage:s.reduce((l,u)=>l+u,0)/r.length,highestScore:Math.max(...s),lowestScore:Math.min(...s),totalQuestionsAnswered:a,totalCorrectAnswers:i}}async clearAllStatistics(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction([Ln],"readwrite").objectStore(Ln).clear();i.onsuccess=()=>{console.log("✅ All quiz statistics cleared"),t()},i.onerror=()=>{console.error("Failed to clear quiz statistics:",i.error),r(i.error)}})}}const Lh=new zU;class UU{db=null;dbName="feed_data";dbVersion=2;async init(){if(!this.db)return new Promise((t,r)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{r(new Error("Failed to open IndexedDB"))},n.onsuccess=()=>{this.db=n.result,console.log("✅ Feed database initialized"),t()},n.onupgradeneeded=a=>{const i=a.target.result,s=a.oldVersion;if(!i.objectStoreNames.contains("items")){const l=i.createObjectStore("items",{keyPath:"id"});l.createIndex("createdAt","createdAt",{unique:!1}),l.createIndex("viewed","viewed",{unique:!1}),l.createIndex("stashed","stashed",{unique:!1}),l.createIndex("trashed","trashed",{unique:!1}),l.createIndex("topics","topics",{unique:!1,multiEntry:!0})}if(i.objectStoreNames.contains("preferences")||i.createObjectStore("preferences",{keyPath:"id"}),i.objectStoreNames.contains("quizzes")||i.createObjectStore("quizzes",{keyPath:"itemId"}).createIndex("generatedAt","generatedAt",{unique:!1}),s<2&&!i.objectStoreNames.contains("interactions")){const l=i.createObjectStore("interactions",{keyPath:"id"});l.createIndex("timestamp","timestamp",{unique:!1}),l.createIndex("feedItemId","feedItemId",{unique:!1}),l.createIndex("action","action",{unique:!1}),l.createIndex("topics","topics",{unique:!1,multiEntry:!0}),l.createIndex("quizGenerated","quizGenerated",{unique:!1})}s<2&&!i.objectStoreNames.contains("userPreferences")&&i.createObjectStore("userPreferences",{keyPath:"userId"}).createIndex("lastUpdated","lastUpdated",{unique:!1})}})}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}async saveItems(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const a=this.db.transaction(["items"],"readwrite"),i=a.objectStore("items");for(const s of t){const l={...s,id:s.id||this.generateUUID(),createdAt:s.createdAt||new Date().toISOString(),viewed:s.viewed!==void 0?s.viewed:!1,stashed:s.stashed!==void 0?s.stashed:!1,trashed:s.trashed!==void 0?s.trashed:!1};i.put(l)}a.oncomplete=()=>r(),a.onerror=()=>n(a.error)})}async getItems(t=10,r=0){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const i=this.db.transaction(["items"],"readonly"),l=i.objectStore("items").index("createdAt"),u=[];let h=0;const p=l.openCursor(null,"prev");p.onsuccess=f=>{const y=f.target.result;if(y){const b=y.value;b.trashed||(h<r?h++:u.length<t&&u.push(b)),u.length<t&&y.continue()}},i.oncomplete=()=>n(u),i.onerror=()=>a(i.error)})}async getItemById(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["items"],"readonly").objectStore("items").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async updateItem(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const s=this.db.transaction(["items"],"readwrite").objectStore("items"),l=s.get(t);l.onsuccess=()=>{const u=l.result;if(!u){a(new Error("Item not found"));return}const h={...u,...r},p=s.put(h);p.onsuccess=()=>n(),p.onerror=()=>a(p.error)},l.onerror=()=>a(l.error)})}async deleteItem(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["items"],"readwrite").objectStore("items").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async clearTrashed(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const n=this.db.transaction(["items"],"readwrite"),s=n.objectStore("items").index("trashed").openCursor(IDBKeyRange.only(!0));s.onsuccess=l=>{const u=l.target.result;u&&(u.delete(),u.continue())},n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})}async clearAllItems(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["items"],"readwrite").objectStore("items").clear();i.onsuccess=()=>{console.log("🗑️ Cleared all feed items from IndexedDB"),t()},i.onerror=()=>r(i.error)})}async getPreferences(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["preferences"],"readonly").objectStore("preferences").get("default");i.onsuccess=()=>{const s=i.result||{id:"default",searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],maturityLevel:"adult",lastGenerated:new Date().toISOString()};t(s)},i.onerror=()=>r(i.error)})}async updatePreferences(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const i=this.db.transaction(["preferences"],"readwrite").objectStore("preferences"),s=i.get("default");s.onsuccess=()=>{const u={...s.result||{id:"default",searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],lastGenerated:new Date().toISOString()},...t},h=i.put(u);h.onsuccess=()=>r(),h.onerror=()=>n(h.error)},s.onerror=()=>n(s.error)})}async addLikedTopic(t){const r=await this.getPreferences(),n=new Set(r.likedTopics);n.add(t);const a=r.dislikedTopics.filter(i=>i!==t);await this.updatePreferences({likedTopics:Array.from(n),dislikedTopics:a})}async addDislikedTopic(t){const r=await this.getPreferences(),n=new Set(r.dislikedTopics);n.add(t);const a=r.likedTopics.filter(i=>i!==t);await this.updatePreferences({likedTopics:a,dislikedTopics:Array.from(n)})}async saveQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readwrite").objectStore("quizzes").put(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async getQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readonly").objectStore("quizzes").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async deleteQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readwrite").objectStore("quizzes").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async saveInteraction(t){if(await this.init(),!this.db)throw new Error("Database not initialized");const r={...t,id:`interaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return new Promise((n,a)=>{const l=this.db.transaction(["interactions"],"readwrite").objectStore("interactions").add(r);l.onsuccess=()=>n(),l.onerror=()=>a(l.error)})}async getInteractions(t=1e3){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const l=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("timestamp").getAll();l.onsuccess=()=>{const u=l.result;r(u.reverse().slice(0,t))},l.onerror=()=>n(l.error)})}async getInteractionsByAction(t,r=500){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const u=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("action").getAll(t);u.onsuccess=()=>{const h=u.result;n(h.reverse().slice(0,r))},u.onerror=()=>a(u.error)})}async getQuizInteractions(t=500){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const l=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("quizGenerated").getAll();l.onsuccess=()=>{const h=l.result.filter(p=>p.quizGenerated);r(h.reverse().slice(0,t))},l.onerror=()=>n(l.error)})}async getUserPreferences(t="default"){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["userPreferences"],"readonly").objectStore("userPreferences").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async updateUserPreferences(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["userPreferences"],"readwrite").objectStore("userPreferences").put(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async initializeUserPreferences(t="default"){const r={userId:t,learnedTopics:[],learnedKeywords:[],avoidTopics:[],lastUpdated:Date.now(),interactionCount:0,quizEngagementCount:0};return await this.updateUserPreferences(r),r}async clearInteractions(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["interactions"],"readwrite").objectStore("interactions").clear();i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}async clearUserPreferences(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["userPreferences"],"readwrite").objectStore("userPreferences").clear();i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}}const vn=new UU,oye=Object.freeze(Object.defineProperty({__proto__:null,feedDB:vn},Symbol.toStringTag,{value:"Module"})),C2="LLM Proxy App Data",Xx="saved_plans.json",Jx="saved_playlists.json",_2="saved_snippets.json",A2="saved_embeddings.json",Zx="chat_history.json",ev="quiz_progress.json",tv="feed_items.json",N2="sync_metadata.json";let Bf=null;class $U{async isAuthenticated(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking authentication:",t),!1}}async getAppFolder(){if(Bf)return Bf;const t=await aa(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${C2}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to search for app folder");const n=await r.json();if(n.files&&n.files.length>0)return Bf=n.files[0].id,n.files[0].id;const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:C2,mimeType:"application/vnd.google-apps.folder"})});if(!a.ok)throw new Error("Failed to create app folder");const i=await a.json();return Bf=i.id,i.id}async uploadFile(t,r){const n=await aa(),a=await this.getAppFolder(),i=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${a}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${n}`}});if(!i.ok)throw new Error(`Failed to search for file: ${t}`);const s=await i.json();if(s.files&&s.files.length>0){const l=s.files[0].id;if(!(await fetch(`https://www.googleapis.com/upload/drive/v3/files/${l}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:r})).ok)throw new Error(`Failed to update file: ${t}`)}else{const l={name:t,parents:[a]},u=new FormData;if(u.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),u.append("file",new Blob([r],{type:"application/json"})),!(await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:u})).ok)throw new Error(`Failed to create file: ${t}`)}}async downloadFile(t){try{const r=await aa(),n=await this.getAppFolder(),a=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`Failed to search for file: ${t}`);const i=await a.json();if(!i.files||i.files.length===0)return null;const s=i.files[0].id,l=await fetch(`https://www.googleapis.com/drive/v3/files/${s}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!l.ok)throw new Error(`Failed to download file: ${t}`);return await l.text()}catch(r){return console.error(`Error downloading file ${t}:`,r),null}}async syncPlans(){try{const t=await Dp(),r=t.length>0?Math.max(...t.map(s=>s.timestamp)):0,n=await this.downloadFile(Xx);if(!n)return t.length>0?(await this.uploadPlans(t),await this.updateSyncMetadata("plans",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const a=JSON.parse(n),i=a.length>0?Math.max(...a.map(s=>s.timestamp)):0;return i>r?(await this.mergePlans(a),await this.updateSyncMetadata("plans",a.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:a.length}):r>i?(await this.uploadPlans(t),await this.updateSyncMetadata("plans",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length}}catch(t){return console.error("Error syncing plans:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async uploadPlans(t){const r=JSON.stringify(t,null,2);await this.uploadFile(Xx,r)}async downloadPlans(){const t=await this.downloadFile(Xx);return t?JSON.parse(t):[]}async mergePlans(t){const r=await Dp(),n=new Map;r.forEach(i=>{const s=i.query.trim().toLowerCase();n.set(s,i)}),t.forEach(i=>{const s=i.query.trim().toLowerCase(),l=n.get(s);(!l||i.timestamp>l.timestamp)&&n.set(s,i)});const a=Array.from(n.values()).sort((i,s)=>s.timestamp-i.timestamp).slice(0,50);await IU();for(const i of a)await oL(i.query,i.plan,i.systemPrompt,i.userPrompt)}async syncPlaylists(){try{await Li.init();const t=await Li.exportAllPlaylists(),r=t.length>0?Math.max(...t.map(s=>s.updatedAt)):0,n=await this.downloadFile(Jx);if(!n)return t.length>0?(await this.uploadPlaylists(t),await this.updateSyncMetadata("playlists",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const a=JSON.parse(n),i=a.length>0?Math.max(...a.map(s=>s.updatedAt)):0;if(i>r){const s=await Li.importAndMergePlaylists(a);return await this.updateSyncMetadata("playlists",s),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:s}}else return r>i?(await this.uploadPlaylists(t),await this.updateSyncMetadata("playlists",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length}}catch(t){return console.error("Error syncing playlists:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async uploadPlaylists(t){const r=JSON.stringify(t,null,2);await this.uploadFile(Jx,r)}async downloadPlaylists(){const t=await this.downloadFile(Jx);return t?JSON.parse(t):[]}async syncSnippets(){try{const t=await cc.getItem("swag-snippets")||[],r=await this.downloadSnippets();if(t.length===0&&r.length===0)return{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const n=t.length>0?Math.max(...t.map(i=>i.updateDate||i.timestamp)):0,a=r.length>0?Math.max(...r.map(i=>i.updateDate||i.timestamp)):0;return t.length===0?(await cc.setItem("swag-snippets",r),await this.updateSyncMetadata("snippets",r.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.length}):r.length===0?(await this.uploadSnippets(t),await this.updateSyncMetadata("snippets",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):n>a?(await this.uploadSnippets(t),await this.updateSyncMetadata("snippets",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):a>n?(await cc.setItem("swag-snippets",r),await this.updateSyncMetadata("snippets",r.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.length}):(await this.updateSyncMetadata("snippets",t.length),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length})}catch(t){return console.error("Error syncing snippets:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async syncEmbeddings(){try{const t=await Va.getAllChunks(),r=await this.downloadEmbeddings();if(t.length===0&&r.length===0)return{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const n=t.length>0?Math.max(...t.map(i=>new Date(i.created_at).getTime())):0,a=r.length>0?Math.max(...r.map(i=>new Date(i.created_at).getTime())):0;return t.length===0?(await Va.saveChunks(r),await this.updateSyncMetadata("embeddings",r.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.length}):r.length===0?(await this.uploadEmbeddings(t),await this.updateSyncMetadata("embeddings",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):n>a?(await this.uploadEmbeddings(t),await this.updateSyncMetadata("embeddings",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):a>n?(await Va.saveChunks(r),await this.updateSyncMetadata("embeddings",r.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.length}):(await this.updateSyncMetadata("embeddings",t.length),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length})}catch(t){return console.error("Error syncing embeddings:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async uploadSnippets(t){const r=JSON.stringify(t,null,2);await this.uploadFile(_2,r)}async downloadSnippets(){const t=await this.downloadFile(_2);return t?JSON.parse(t):[]}async uploadEmbeddings(t){const r=JSON.stringify(t,null,2);await this.uploadFile(A2,r)}async downloadEmbeddings(){const t=await this.downloadFile(A2);return t?JSON.parse(t):[]}async syncChatHistory(){try{const t=await es.getAllChats(),r=await this.downloadFile(Zx),n=r?JSON.parse(r):[],a=t.length>0?Math.max(...t.map(u=>u.timestamp)):0,i=n.length>0?Math.max(...n.map(u=>u.timestamp)):0;let s="no-change",l=t.length;if(t.length===0&&n.length>0){console.log(`📥 Downloading ${n.length} chat(s) from Google Drive...`);for(const u of n)await es.saveChat(u.id,u.messages,u.title,{systemPrompt:u.systemPrompt,planningQuery:u.planningQuery,generatedSystemPrompt:u.generatedSystemPrompt,generatedUserQuery:u.generatedUserQuery,selectedSnippetIds:u.selectedSnippetIds,todosState:u.todosState});s="downloaded",l=n.length}else if(n.length===0&&t.length>0)console.log(`📤 Uploading ${t.length} chat(s) to Google Drive...`),await this.uploadChatHistory(t),s="uploaded";else if(a>i)console.log(`📤 Uploading ${t.length} chat(s) (local newer)...`),await this.uploadChatHistory(t),s="uploaded";else if(i>a){console.log(`📥 Downloading ${n.length} chat(s) (remote newer)...`);const u=await es.getAllChats();for(const h of u)await es.deleteChat(h.id);for(const h of n)await es.saveChat(h.id,h.messages,h.title,{systemPrompt:h.systemPrompt,planningQuery:h.planningQuery,generatedSystemPrompt:h.generatedSystemPrompt,generatedUserQuery:h.generatedUserQuery,selectedSnippetIds:h.selectedSnippetIds,todosState:h.todosState});s="downloaded",l=n.length}return s!=="no-change"&&await this.updateSyncMetadata("chatHistory",l),{success:!0,action:s,timestamp:Date.now(),itemCount:l}}catch(t){return console.error("Failed to sync chat history:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t.message}}}async uploadChatHistory(t){const r=JSON.stringify(t,null,2);await this.uploadFile(Zx,r)}async downloadChatHistory(){const t=await this.downloadFile(Zx);return t?JSON.parse(t):[]}async syncQuizProgress(){try{await Lh.init();const t=await Lh.getQuizStatistics(),r=await this.downloadFile(ev),n=r?JSON.parse(r):[],a=t.length>0?Math.max(...t.map(u=>new Date(u.completedAt).getTime())):0,i=n.length>0?Math.max(...n.map(u=>new Date(u.completedAt).getTime())):0;let s="no-change",l=t.length;if(t.length===0&&n.length>0){console.log(`📥 Downloading ${n.length} quiz statistic(s) from Google Drive...`);for(const u of n)await Lh.saveQuizStatistic({quizTitle:u.quizTitle,snippetIds:u.snippetIds,score:u.score,totalQuestions:u.totalQuestions,timeTaken:u.timeTaken,completedAt:u.completedAt,answers:u.answers,enrichment:u.enrichment,completed:u.completed,quizData:u.quizData});s="downloaded",l=n.length}else if(n.length===0&&t.length>0)console.log(`📤 Uploading ${t.length} quiz statistic(s) to Google Drive...`),await this.uploadQuizProgress(t),s="uploaded";else if(a>i)console.log(`📤 Uploading ${t.length} quiz statistic(s) (local newer)...`),await this.uploadQuizProgress(t),s="uploaded";else if(i>a){console.log(`📥 Downloading ${n.length} quiz statistic(s) (remote newer)...`),await Lh.clearAllStatistics();for(const u of n)await Lh.saveQuizStatistic({quizTitle:u.quizTitle,snippetIds:u.snippetIds,score:u.score,totalQuestions:u.totalQuestions,timeTaken:u.timeTaken,completedAt:u.completedAt,answers:u.answers,enrichment:u.enrichment,completed:u.completed,quizData:u.quizData});s="downloaded",l=n.length}return s!=="no-change"&&await this.updateSyncMetadata("quizProgress",l),{success:!0,action:s,timestamp:Date.now(),itemCount:l}}catch(t){return console.error("Failed to sync quiz progress:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t.message}}}async uploadQuizProgress(t){const r=JSON.stringify(t,null,2);await this.uploadFile(ev,r)}async downloadQuizProgress(){const t=await this.downloadFile(ev);return t?JSON.parse(t):[]}async syncFeedItems(){try{await vn.init();const t=await vn.getItems(1e4,0),r=await this.downloadFile(tv),n=r?JSON.parse(r):[],a=t.length>0?Math.max(...t.map(u=>new Date(u.createdAt).getTime())):0,i=n.length>0?Math.max(...n.map(u=>new Date(u.createdAt).getTime())):0;let s="no-change",l=t.length;if(t.length===0&&n.length>0)console.log(`📥 Downloading ${n.length} feed item(s) from Google Drive...`),await vn.saveItems(n),s="downloaded",l=n.length;else if(n.length===0&&t.length>0)console.log(`📤 Uploading ${t.length} feed item(s) to Google Drive...`),await this.uploadFeedItems(t),s="uploaded";else if(a>i)console.log(`📤 Uploading ${t.length} feed item(s) (local newer)...`),await this.uploadFeedItems(t),s="uploaded";else if(i>a){console.log(`📥 Downloading ${n.length} feed item(s) (remote newer)...`);const u=await vn.getItems(1e4,0);for(const h of u)await vn.deleteItem(h.id);await vn.saveItems(n),s="downloaded",l=n.length}return s!=="no-change"&&await this.updateSyncMetadata("feedItems",l),{success:!0,action:s,timestamp:Date.now(),itemCount:l}}catch(t){return console.error("Failed to sync feed items:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t.message}}}async uploadFeedItems(t){const r=JSON.stringify(t,null,2);await this.uploadFile(tv,r)}async downloadFeedItems(){const t=await this.downloadFile(tv);return t?JSON.parse(t):[]}async syncAll(){const[t,r,n,a,i,s,l]=await Promise.all([this.syncPlans(),this.syncPlaylists(),this.syncSnippets(),this.syncEmbeddings(),this.syncChatHistory(),this.syncQuizProgress(),this.syncFeedItems()]);return{plans:t,playlists:r,snippets:n,embeddings:a,chatHistory:i,quizProgress:s,feedItems:l}}async getLastSyncTime(){return(await this.getSyncMetadata()).lastSyncTime}async getSyncMetadata(){const t=await this.downloadFile(N2);if(!t)return{lastSyncTime:0,lastPlansSync:0,lastPlaylistsSync:0,lastSnippetsSync:0,lastEmbeddingsSync:0,lastChatHistorySync:0,lastQuizProgressSync:0,lastFeedItemsSync:0,plansCount:0,playlistsCount:0,snippetsCount:0,embeddingsCount:0,chatHistoryCount:0,quizProgressCount:0,feedItemsCount:0};const r=JSON.parse(t);return{lastSyncTime:r.lastSyncTime||0,lastPlansSync:r.lastPlansSync||0,lastPlaylistsSync:r.lastPlaylistsSync||0,lastSnippetsSync:r.lastSnippetsSync||0,lastEmbeddingsSync:r.lastEmbeddingsSync||0,lastChatHistorySync:r.lastChatHistorySync||0,lastQuizProgressSync:r.lastQuizProgressSync||0,lastFeedItemsSync:r.lastFeedItemsSync||0,plansCount:r.plansCount||0,playlistsCount:r.playlistsCount||0,snippetsCount:r.snippetsCount||0,embeddingsCount:r.embeddingsCount||0,chatHistoryCount:r.chatHistoryCount||0,quizProgressCount:r.quizProgressCount||0,feedItemsCount:r.feedItemsCount||0}}async updateSyncMetadata(t,r){const n=await this.getSyncMetadata();n.lastSyncTime=Date.now(),t==="plans"?(n.lastPlansSync=Date.now(),n.plansCount=r):t==="playlists"?(n.lastPlaylistsSync=Date.now(),n.playlistsCount=r):t==="snippets"?(n.lastSnippetsSync=Date.now(),n.snippetsCount=r):t==="embeddings"?(n.lastEmbeddingsSync=Date.now(),n.embeddingsCount=r):t==="chatHistory"?(n.lastChatHistorySync=Date.now(),n.chatHistoryCount=r):t==="quizProgress"?(n.lastQuizProgressSync=Date.now(),n.quizProgressCount=r):t==="feedItems"&&(n.lastFeedItemsSync=Date.now(),n.feedItemsCount=r);const a=JSON.stringify(n,null,2);await this.uploadFile(N2,a)}}const Gu=new $U,lL=_.createContext(void 0),$0=()=>{const e=_.useContext(lL);if(!e)throw new Error("useSwag must be used within SwagProvider");return e},qU=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,u]=_.useState(null),{showError:h,showWarning:p,showSuccess:f,showPersistentToast:y,removeToast:b,updateToast:x}=Ks(),{user:v,getToken:T}=Di(),{settings:k}=Xs();_.useEffect(()=>{(async()=>{try{const ae=await cc.getItem("swag-snippets");if(ae&&r(ae),a(!0),A())try{console.log("🔄 Checking Google Drive for newer snippets and embeddings...");const pe=await Gu.syncSnippets();if(pe.success&&pe.action==="downloaded"){console.log(`📥 Downloaded ${pe.itemCount} snippets from Google Drive`);const _e=await cc.getItem("swag-snippets");_e&&r(_e)}const ye=await Gu.syncEmbeddings();ye.success&&ye.action==="downloaded"&&console.log(`📥 Downloaded ${ye.itemCount} embeddings from Google Drive`)}catch(pe){console.error("Failed to sync with Google Drive on load:",pe)}}catch(ae){console.error("Failed to load snippets:",ae),h("Failed to load snippets from storage"),a(!0)}})()},[h]);const C=Z=>Z<1024?Z+" B":Z<1024*1024?(Z/1024).toFixed(2)+" KB":(Z/(1024*1024)).toFixed(2)+" MB";_.useEffect(()=>{if(!n)return;(async()=>{try{await cc.setItem("swag-snippets",t);const ae=await cc.getStats();s({totalSize:ae.totalSize,limit:ae.limit,percentUsed:ae.percentUsed}),ae.percentUsed>80&&p(`Storage is ${ae.percentUsed.toFixed(0)}% full. Consider deleting old snippets.`)}catch(ae){if(ae instanceof ac)if(ae.code==="QUOTA_EXCEEDED"){const pe=ae.estimatedSize&&ae.limit?`Current size: ${C(ae.estimatedSize)}, Limit: ${C(ae.limit)}`:"";h(`Storage Quota Exceeded! ${ae.message} ${pe}`)}else h(`Storage error: ${ae.message}`);else console.error("Failed to save snippets:",ae),h("Failed to save snippets to storage")}})()},[t,n,h,p]),_.useEffect(()=>{if(!n||!A())return;const Z=setTimeout(async()=>{try{console.log("🔄 Syncing snippets to Google Drive...");const ae=await Gu.syncSnippets();ae.success&&ae.action!=="no-change"&&console.log(`✅ Snippets synced: ${ae.action} (${ae.itemCount} items)`)}catch(ae){console.error("Failed to sync snippets to Google Drive:",ae)}},1e4);return()=>clearTimeout(Z)},[t,n]);const A=()=>{try{const Z=localStorage.getItem("google_drive_access_token");return!!Z&&Z.length>0}catch(Z){console.error("Failed to check authentication:",Z)}return!1},P=async()=>{try{const Z=localStorage.getItem("rag_spreadsheet_id");if(Z)return console.log("Using cached spreadsheet ID:",Z),Z;let ae=localStorage.getItem("google_drive_access_token");if(ae)console.log("✅ Using cached Drive API access token");else{if(console.log("🔑 Requesting Google Drive API access token..."),typeof window>"u"||!window.google?.accounts?.oauth2)throw console.error("❌ Google Identity Services not available. The library may not have loaded yet."),console.log("💡 This usually happens if the page loads before Google GSI library is ready."),console.log("💡 Try: 1) Refresh the page, 2) Check internet connection, 3) Check browser console for script loading errors"),new Error("Google Identity Services not available - library not loaded");try{const de=window.google.accounts.oauth2.initTokenClient({client_id:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file",callback:async Ae=>{if(Ae.access_token){const Te=Ae.access_token.trim().replace(/[\r\n]/g,"");localStorage.setItem("google_drive_access_token",Te),console.log("✅ Got Drive API access token")}}});if(!de)throw new Error("Failed to initialize Google token client");await new Promise((Ae,Te)=>{de.callback=$e=>{if($e.error){console.error("OAuth error:",$e.error),Te(new Error(`OAuth error: ${$e.error}`));return}if($e.access_token){const ot=$e.access_token.trim().replace(/[\r\n]/g,"");ae=ot,localStorage.setItem("google_drive_access_token",ot),console.log("✅ Got Drive API access token"),Ae()}else Te(new Error("No access token received"))},console.log("📋 Requesting Google Drive & Sheets permissions..."),de.requestAccessToken({prompt:""})})}catch(de){throw console.error("Failed to get Drive API token:",de),new Error("Please grant access to Google Drive and Sheets to enable cloud sync")}}if(!ae)throw console.error("No Drive API access token available"),new Error("No Drive API access token - unable to access Google Sheets");const pe=await kn();console.log("🌐 Calling getUserRagSpreadsheet at:",pe);const ye=await fetch(`${pe}/rag/user-spreadsheet`,{method:"GET",headers:{Authorization:`Bearer ${ae}`}});if(!ye.ok){const de=await ye.text();console.error("❌ Backend error response:",{status:ye.status,statusText:ye.statusText,body:de});let Ae=`Failed to get spreadsheet: ${ye.status}`;try{const Te=JSON.parse(de);Te.error&&(Ae=Te.error)}catch{}throw new Error(Ae)}const _e=await ye.json();return localStorage.setItem("rag_spreadsheet_id",_e.spreadsheetId),_e.created?(console.log("✅ Created new RAG spreadsheet:",_e.spreadsheetId),p('Created new "Research Agent Swag" spreadsheet in your Google Drive')):console.log("✅ Found existing RAG spreadsheet:",_e.spreadsheetId),_e.spreadsheetId}catch(Z){return console.error("Failed to get user RAG spreadsheet:",Z),null}};_.useEffect(()=>((async()=>{if(!(!v?.email||!A()||!n))try{if(!await P()){console.warn("Could not get user RAG spreadsheet - sync disabled"),p("Cannot access Google Sheets. Please check your Google Drive connection in Settings > Cloud Sync.");return}await ka.initialize({enabled:!0,autoSync:!0,syncInterval:6e4,batchSize:50,retryAttempts:3,deviceId:ka.getDeviceId()}),ka.onSyncStart(()=>{u(ka.getStatus())}),ka.onSyncComplete(_e=>{u(ka.getStatus()),_e&&_e.snippetsPulled>0&&console.log(`Synced ${_e.snippetsPulled} snippets from cloud`)}),ka.onSyncError((_e,de)=>{console.error("Sync error:",de),u(ka.getStatus()),de&&h(`Sync failed: ${de.message}`)}),console.log("Performing initial sync...");const pe=await T(),ye=await ka.pullSnippets(v.email,pe||void 0);ye&&ye.length>0&&(r(_e=>{const de=new Set(_e.map($e=>$e.id)),Ae=ye.filter($e=>!de.has($e.id)),Te=_e.map($e=>{const ot=ye.find(Tt=>Tt.id===$e.id);return ot&&ot.updateDate>$e.updateDate?ot:$e});return[...Ae,...Te].sort(($e,ot)=>ot.updateDate-$e.updateDate)}),console.log(`Downloaded ${ye.length} snippets from cloud`)),t.length>0&&await ka.pushSnippets(t,v.email,pe||void 0),ka.startAutoSync(),console.log("✅ RAG sync initialized and auto-sync started")}catch(ae){console.error("Failed to initialize sync:",ae),h("Cloud sync failed to initialize. Check your Google Drive connection in Settings > Cloud Sync.")}})(),()=>{A()&&ka.stopAutoSync()}),[v?.email,n,h]);const M=()=>{try{const Z=localStorage.getItem("rag_config");if(console.log("📋 RAG config from localStorage:",Z),Z){const ae=JSON.parse(Z);return console.log("📋 Parsed RAG config:",{enabled:ae.enabled,autoEmbed:ae.autoEmbed}),ae.enabled&&ae.autoEmbed}else console.log("⚠️ No RAG config found in localStorage")}catch(Z){console.error("Failed to check RAG config:",Z)}return!1},L=async Z=>{const ae=M();if(console.log(`🔍 Auto-embed check for snippet ${Z.id}:`,{autoEmbedEnabled:ae}),!ae){console.log(`⏭️ Auto-embed disabled, skipping snippet ${Z.id}`);return}try{console.log(`🔄 Auto-embedding snippet ${Z.id} with current embedding model...`);const pe=await z([Z.id],[Z],void 0,!1);console.log(`📊 Auto-embed result for snippet ${Z.id}:`,pe),pe.embedded>0?(console.log(`✅ Auto-embedded snippet ${Z.id} (${pe.embedded} embeddings created)`),r(ye=>ye.map(_e=>_e.id===Z.id?{..._e,hasEmbedding:!0}:_e))):pe.skipped>0?console.log(`⏭️ Snippet ${Z.id} already has embedding, skipped`):pe.failed>0?console.warn(`⚠️ Auto-embed failed for snippet ${Z.id} (${pe.failed} failures)`):console.warn(`⚠️ Auto-embed returned unexpected result for snippet ${Z.id}:`,pe)}catch(pe){console.error(`❌ Auto-embed exception for snippet ${Z.id}:`,pe)}},D=async(Z,ae,pe)=>{const ye=t.find(Ae=>Ae.content.trim()===Z.trim());if(ye)return await q(ye.id,{updateDate:Date.now()}),ye;const _e=Date.now(),de={id:`snippet-${_e}-${Math.random().toString(36).substr(2,9)}`,content:Z,title:pe,sourceType:ae,timestamp:_e,updateDate:_e,selected:!1};return r(Ae=>[de,...Ae]),A()&&v?.email&&ka.queueSync({type:"push-snippet",data:de,userEmail:v.email}),console.log(`🚀 Starting auto-embed for snippet ${de.id}...`),await L(de),console.log(`✅ Auto-embed completed for snippet ${de.id}`),de},q=async(Z,ae)=>{const pe=t.find(_e=>_e.id===Z),ye={...pe,...ae,updateDate:Date.now()};if(r(_e=>_e.map(de=>de.id===Z?ye:de)),A()&&v?.email&&ka.queueSync({type:"push-snippet",data:ye,userEmail:v.email}),pe&&ae.content&&ae.content!==pe.content){const _e=ae.title!==void 0?ae.title:pe.title,de={...pe,...ae,title:_e};await L(de)}},Q=Z=>{r(ae=>ae.filter(pe=>!Z.includes(pe.id))),A()&&v?.email&&Z.forEach(ae=>{ka.queueSync({type:"delete-snippet",data:{id:ae},userEmail:v.email})})},F=Z=>{if(Z.length<2)return;const ae=t.filter(Ae=>Z.includes(Ae.id)).sort((Ae,Te)=>Ae.timestamp-Te.timestamp),pe=ae.map(Ae=>Ae.content).join(`

---

`),ye=ae.filter(Ae=>Ae.title).map(Ae=>Ae.title).join(" + "),_e=Date.now(),de={id:`snippet-${_e}-${Math.random().toString(36).substr(2,9)}`,content:pe,title:ye||void 0,sourceType:ae[0].sourceType,timestamp:_e,updateDate:_e,selected:!1};r(Ae=>[de,...Ae.filter(Te=>!Z.includes(Te.id))])},K=Z=>{r(ae=>ae.map(pe=>pe.id===Z?{...pe,selected:!pe.selected}:pe))},W=()=>{r(Z=>Z.map(ae=>({...ae,selected:!0})))},j=()=>{r(Z=>Z.map(ae=>({...ae,selected:!1})))},O=()=>t.filter(Z=>Z.selected),$=()=>{const Z=new Set;return t.forEach(ae=>{ae.tags&&ae.tags.forEach(pe=>Z.add(pe))}),Array.from(Z).sort()},I=(Z,ae)=>{r(pe=>pe.map(ye=>{if(Z.includes(ye.id)){const _e=ye.tags||[],de=[...new Set([..._e,...ae])];return{...ye,tags:de,updateDate:Date.now()}}return ye}))},G=(Z,ae)=>{r(pe=>pe.map(ye=>{if(Z.includes(ye.id)&&ye.tags){const _e=ye.tags.filter(de=>!ae.includes(de));return{...ye,tags:_e.length>0?_e:void 0,updateDate:Date.now()}}return ye}))},V=async Z=>{try{return await Va.hasEmbedding(Z)}catch(ae){return console.error("Error checking embedding status:",ae),!1}},oe=async Z=>{try{const ae=k.embeddingModel||"Xenova/all-MiniLM-L6-v2",pe=await Va.getEmbeddingDetails(Z);if(pe.hasEmbedding){const _e=pe.chunks.filter(de=>de.embedding_model===ae);return{hasEmbedding:_e.length>0,chunkCount:_e.length,chunks:_e,metadata:pe.metadata}}return t.find(_e=>_e.id===Z)?.hasEmbedding?{hasEmbedding:!0,chunkCount:1,chunks:[]}:{hasEmbedding:!1,chunkCount:0,chunks:[]}}catch(ae){return console.error("Error getting embedding details:",ae),{hasEmbedding:!1,chunkCount:0,chunks:[]}}},U=async()=>{try{const Z=t.map(ye=>ye.id);if(Z.length===0)return;const ae=k.embeddingModel||"Xenova/all-MiniLM-L6-v2",pe=await Va.bulkCheckEmbeddings(Z,ae);r(ye=>ye.map(_e=>({..._e,hasEmbedding:pe[_e.id]||!1})))}catch(Z){console.error("Failed to check embedding status:",Z)}},z=async(Z,ae,pe,ye=!1)=>{console.log("🔍 generateEmbeddings called with:",{snippetIds:Z,snippetsInState:t.length,providedSnippetsCount:ae?.length,force:ye});const _e=ae||t.filter($e=>Z.includes($e.id));if(console.log(`🔍 Found ${_e.length} snippets matching IDs:`,_e.map($e=>$e.id)),_e.length===0)return console.warn("⚠️ No snippets found in state for IDs:",Z),{embedded:0,skipped:0,failed:0};let de=_e,Ae=0;const Te=k.embeddingModel||"Xenova/all-MiniLM-L6-v2";if(!ye){const $e=await Va.bulkCheckEmbeddings(Z,Te),ot=Z.filter(Tt=>$e[Tt]);if(ot.length>0){if(console.log(`⏭️ Skipping ${ot.length} already indexed snippets (model: ${Te}):`,ot),de=_e.filter(Tt=>!$e[Tt.id]),Ae=ot.length,de.length===0)return console.log(`✅ All selected snippets already have embeddings for model: ${Te}`),p(`✅ All ${_e.length} snippets already indexed with ${Te}`),{embedded:0,skipped:Ae,failed:0};p(`⏭️ Skipping ${Ae} already indexed with ${Te}, generating ${de.length} new embeddings`)}}try{const $e=k.embeddingSource==="local";console.log(`🔍 Embedding source check: embeddingSource="${k.embeddingSource}", useLocalEmbeddings=${$e}, embeddingModel="${k.embeddingModel}"`);let ot=[];if($e){console.log("🏠 Using local browser-based embeddings");const{getLocalEmbeddingService:kt}=await Rt(async()=>{const{getLocalEmbeddingService:ur}=await import("./localEmbeddings-47-wZLX9.js");return{getLocalEmbeddingService:ur}},[]),At=kt(),ir=k.embeddingModel||"Xenova/all-MiniLM-L6-v2",lr=ir.replace("Xenova/","");console.log(`📦 Loading model: ${ir}`);let ft=null;ft=y(`🔄 Loading local model ${lr}...`,"info"),await At.loadModel(ir,ur=>{if(console.log(`⏳ ${ur.message} (${ur.progress}%)`),ft){const re=Math.round(ur.progress);x(ft,`🔄 Loading local model ${lr}... ${re}%`,re)}}),ft&&(b(ft),ft=null),console.log("✅ Model loaded, generating embeddings...");for(let ur=0;ur<de.length;ur++){const re=de[ur];try{pe&&pe(ur+1,de.length);const we=[];re.title&&we.push(`Title: ${re.title}`),re.tags&&re.tags.length>0&&we.push(`Tags: ${re.tags.join(", ")}`);const et=(we.length>0?we.join(`
`)+`

`:"")+re.content,pt=await At.generateEmbedding(et),Ft={id:`${re.id}_0`,snippet_id:re.id,chunk_text:re.content,chunk_index:0,start_char:0,end_char:re.content.length,embedding:pt,embedding_model:ir,created_at:Date.now(),updated_at:Date.now()};ot.push({id:re.id,status:"success",chunks:[Ft]})}catch(we){console.error(`❌ Failed to embed snippet ${re.id}:`,we),ot.push({id:re.id,status:"failed",error:we instanceof Error?we.message:"Unknown error",chunks:[]})}}}else{let kt,At=0;const ir=3;for(;At<=ir;)try{const we=await kn(),Ze=await T();if(!Ze)throw new Error(`🔐 Authentication Required

To generate embeddings, you need to sign in with Google.

📝 Steps:
1. Click the profile icon in the top right
2. Click "Sign in with Google"
3. Authorize the application
4. Try generating embeddings again

💡 Note: Embeddings enable vector search and semantic similarity in SWAG.`);const et=k.providers.filter(Ft=>Ft.enabled!==!1&&Ft.capabilities?.embedding!==!1).map(Ft=>({type:Ft.type,apiKey:Ft.apiKey,apiEndpoint:Ft.apiEndpoint,modelName:Ft.modelName,allowedModels:Ft.allowedModels,maxImageQuality:Ft.maxImageQuality})),pt=k.embeddingModel||void 0;if(kt=await fetch(`${we}/rag/embed-snippets`,{method:"POST",headers:{"Content-Type":"application/json",...Ze?{Authorization:`Bearer ${Ze}`}:{}},body:JSON.stringify({snippets:de.map(Ft=>({id:Ft.id,content:Ft.content,title:Ft.title,tags:Ft.tags,timestamp:Ft.timestamp})),providers:et,embeddingModel:pt,force:ye})}),kt.status===429&&At<ir){const Ft=Math.pow(2,At)*1e3;console.warn(`⏳ Rate limited, retrying in ${Ft/1e3}s... (attempt ${At+1}/${ir})`),p(`⏳ Rate limited, retrying in ${Ft/1e3}s...`),await new Promise(Rr=>setTimeout(Rr,Ft)),At++;continue}break}catch(we){if(At<ir){const Ze=Math.pow(2,At)*1e3;console.warn(`⚠️ Fetch error, retrying in ${Ze/1e3}s...`,we),await new Promise(et=>setTimeout(et,Ze)),At++;continue}throw we}if(!kt||!kt.ok){const we=await kt?.text()||"No response";let Ze;try{Ze=JSON.parse(we)}catch{Ze={error:we}}throw Ze.requiredAction==="CONFIGURE_EMBEDDING_PROVIDER"||Ze.error&&Ze.error.includes("No embedding provider")?new Error(`⚙️ Embedding Provider Required

To use Swag embeddings and vector search, you need to configure a provider that supports embeddings.

📝 Steps:
1. Go to Settings (gear icon)
2. Click "Providers" tab
3. Add a provider: OpenAI, Together.AI, Cohere, or Voyage
4. Enable the "🔗 Embeddings" capability
5. Save and try again

💡 Note: Swag embeddings work independently of the RAG system. You just need one embedding-capable provider configured.`):new Error(`Failed to generate embeddings: ${kt?.status} ${kt?.statusText}. ${we}`)}const lr=await kt.json(),ft=lr.results?.[0]?.chunks?.[0]?.embedding;console.log("📦 Backend response:",{success:lr.success,resultsCount:lr.results?.length,firstResult:lr.results?.[0],firstChunk:lr.results?.[0]?.chunks?.[0],firstChunkKeys:lr.results?.[0]?.chunks?.[0]?Object.keys(lr.results[0].chunks[0]):[],firstChunkEmbeddingLength:ft?.length,firstChunkEmbeddingType:ft?.constructor?.name,firstChunkEmbeddingFirst5:Array.isArray(ft)?ft.slice(0,5):"NOT_AN_ARRAY"});const{success:ur,error:re}=lr;if(ot=lr.results,!ur)throw new Error(re||"Failed to generate embeddings")}const Tt=[];let je=0,_t=0,Pt=0;for(let kt=0;kt<ot.length;kt++){const At=ot[kt];if(At.status==="success"&&At.chunks.length>0){console.log("🔍 Chunk structure check:",{chunkCount:At.chunks.length,firstChunk:At.chunks[0],hasId:At.chunks[0]?.id!==void 0,hasSnippetId:At.chunks[0]?.snippet_id!==void 0});try{await Va.saveChunks(At.chunks,{snippet_id:At.id,created_at:Date.now(),updated_at:Date.now()}),Tt.push(At.id),je+=At.chunks.length,_t++,console.log(`✅ Saved ${At.chunks.length} chunks for snippet ${At.id}`)}catch(ir){Pt++,console.error(`❌ Failed to save chunks for snippet ${At.id}:`,ir)}pe&&pe(kt+1,ot.length)}else At.status==="failed"&&(Pt++,console.error(`Failed to embed snippet ${At.id}:`,At.error))}r(kt=>kt.map(At=>Tt.includes(At.id)?{...At,hasEmbedding:!0}:At));const Bt=ot.filter(kt=>kt.status==="success").flatMap(kt=>kt.chunks);if(console.log("📊 Google Sheets sync check:",{chunksToSync:Bt.length,userEmail:v?.email,spreadsheetId:localStorage.getItem("rag_spreadsheet_id"),googleLinked:localStorage.getItem("rag_google_linked")}),Bt.length>0&&v?.email)try{const kt=localStorage.getItem("rag_spreadsheet_id");if(!kt)console.warn("⚠️ No spreadsheet ID found. Skipping Google Sheets sync."),console.log("💡 To enable sync: Go to Settings > Cloud Sync and connect Google Drive"),p("⚠️ Embeddings saved locally. Connect Google Drive in Cloud Sync settings to enable automatic backup.");else{const ir=localStorage.getItem("rag_google_linked")==="true"&&uU();if(console.log(`📤 Sync method: ${ir?"Client-side direct":"Backend"}`),ir){console.log(`📤 Using direct Google Sheets sync for ${Bt.length} chunks (client-side)...`);try{const lr=pU(Bt);console.log(`📝 Formatted ${lr.length} rows for Google Sheets`),await dU(kt,"RAG_Embeddings_v1!A:K",lr),console.log("✅ Synced to Google Sheets (client-side)"),p(`✅ Synced ${Bt.length} embeddings to Google Sheets`)}catch(lr){console.error("❌ Client-side sync failed, falling back to backend:",lr),p("⚠️ Direct sync failed, using backend fallback..."),setTimeout(async()=>{try{await ka.pushEmbeddings(Bt,(ft,ur)=>{console.log(`📤 Backend sync: ${ft}/${ur} chunks`)}),console.log("✅ Synced to Google Sheets (backend fallback)"),p(`✅ Synced ${Bt.length} embeddings to Google Sheets (backend)`)}catch(ft){console.error("Backend sync also failed:",ft),p("⚠️ Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}else console.log(`📤 Using backend sync for ${Bt.length} chunks (with 2s delay)...`),setTimeout(async()=>{try{console.log("📤 Starting backend Google Sheets sync..."),await ka.pushEmbeddings(Bt,(lr,ft)=>{console.log(`📤 Syncing: ${lr}/${ft} chunks`)}),console.log("✅ Synced to Google Sheets (backend)"),p(`✅ Synced ${Bt.length} embeddings to Google Sheets`)}catch(lr){console.error("Failed to sync to Google Sheets:",lr),p("⚠️ Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}catch(kt){console.error("Failed to queue sync:",kt)}return console.log(`✅ Generated ${je} embeddings for ${_t} snippets`),A()&&(async()=>{try{console.log("🔄 Syncing embeddings to Google Drive...");const kt=await Gu.syncEmbeddings();kt.success&&kt.action!=="no-change"&&console.log(`✅ Embeddings synced: ${kt.action} (${kt.itemCount} chunks)`)}catch(kt){console.error("Failed to sync embeddings to Google Drive:",kt)}})(),{embedded:_t,skipped:Ae+(ot.length-_t-Pt),failed:Pt}}catch($e){throw console.error("Failed to generate embeddings:",$e),$e}},ie=async()=>{if(!v?.email){p("Please sign in with Google to sync");return}if(!A()){p("Cloud sync requires Google Drive connection. Go to Settings > Cloud Sync to connect.");return}try{console.log("📤 Manual sync triggered"),console.log("📋 Ensuring spreadsheet exists...");const Z=await P();if(!Z){h("Failed to create or access Google Sheets spreadsheet");return}console.log("✅ Spreadsheet ready:",Z),console.log("⬇️ Pulling remote snippets...");try{const ae=localStorage.getItem("google_drive_access_token");if(!ae)console.warn("No Drive token available for pull");else{const pe=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Z}/values/RAG_Snippets_v1!A2:J10000`,{headers:{Authorization:`Bearer ${ae}`}}).then(ye=>ye.json()).then(ye=>ye.values||[]);if(pe.length>0){console.log(`📥 Received ${pe.length} rows from Sheets`);const ye=new Map;pe.forEach(de=>{const Ae=de[0];ye.has(Ae)||ye.set(Ae,[]),ye.get(Ae).push(de)});const _e=[];ye.forEach((de,Ae)=>{de.sort((ot,Tt)=>parseInt(ot[8]||"1")-parseInt(Tt[8]||"1"));const Te=de[0],$e=de.map(ot=>ot[2]||"").join("");_e.push({id:Ae,title:Te[1]||"",content:$e,timestamp:parseInt(Te[5])||Date.now(),updateDate:parseInt(Te[6])||Date.now(),sourceType:Te[7]||"user",tags:Te[4]?JSON.parse(Te[4]):[]})}),console.log(`📦 Reassembled ${_e.length} snippets from ${pe.length} rows`),r(de=>{const Ae=new Set(de.map(ot=>ot.id)),Te=_e.filter(ot=>!Ae.has(ot.id)),$e=de.map(ot=>{const Tt=_e.find(je=>je.id===ot.id);return Tt&&Tt.updateDate>ot.updateDate?Tt:ot});return[...Te,...$e].sort((ot,Tt)=>Tt.updateDate-ot.updateDate)})}else console.log("📭 No remote snippets found")}}catch(ae){console.error("⚠️ Pull failed:",ae)}if(console.log("⬆️ Pushing local snippets..."),t.length>0){const ae=localStorage.getItem("google_drive_access_token");if(!ae){h("No Drive API access token available");return}const pe=49e3,ye=[];t.forEach(Te=>{const $e=Te.content||"";if($e.length<=pe)ye.push([Te.id,Te.title||"",$e,"",JSON.stringify(Te.tags||[]),Te.timestamp.toString(),Te.updateDate.toString(),Te.sourceType,"1","1"]);else{const ot=Math.ceil($e.length/pe);for(let Tt=0;Tt<ot;Tt++){const je=Tt*pe,_t=Math.min((Tt+1)*pe,$e.length),Pt=$e.substring(je,_t);ye.push([Te.id,Tt===0&&Te.title||"",Pt,"",Tt===0?JSON.stringify(Te.tags||[]):"[]",Te.timestamp.toString(),Te.updateDate.toString(),Te.sourceType,(Tt+1).toString(),ot.toString()])}}}),console.log(`📝 Prepared ${ye.length} rows from ${t.length} snippets`),console.log("🗑️ Clearing existing data...");const _e=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Z}/values/RAG_Snippets_v1!A2:J10000:clear`,{method:"POST",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(!_e.ok){const Te=await _e.text();console.error("Clear error:",Te)}console.log(`📝 Writing ${ye.length} rows...`);const de=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${Z}/values/RAG_Snippets_v1!A2?valueInputOption=RAW`,{method:"PUT",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify({values:ye})});if(!de.ok){const Te=await de.text();throw console.error("❌ Update error:",Te),new Error(`Failed to update sheet: ${de.status} ${Te}`)}const Ae=await de.json();console.log(`📤 Pushed ${t.length} snippets (${ye.length} rows) to Google Sheets`,Ae)}else console.log("📭 No local snippets to push");console.log("✅ Manual sync complete"),f(`Synced ${t.length} snippets with Google Sheets`)}catch(Z){console.error("❌ Manual sync failed:",Z),h(`Manual sync failed: ${Z instanceof Error?Z.message:"Unknown error"}`)}},H=async Z=>{try{console.log(`🔄 Syncing snippet #${Z} from Google Sheets...`);const ae=await X1();if(!ae)throw new Error("No Drive access token available");const pe=await CU(Z,ae);if(!pe){console.warn(`⚠️ Snippet #${Z} not found in Google Sheets`);return}const ye=t.find(_e=>_e.id===pe.id||_e.content.trim()===pe.content.trim());if(ye){console.log(`✅ Snippet #${Z} already exists in localStorage, updating timestamp`),await q(ye.id,{updateDate:Date.now()}),f(`Snippet "${pe.title||"Untitled"}" synced from Google Sheets`);return}r(_e=>[pe,..._e]),f(`Snippet "${pe.title||"Untitled"}" synced from Google Sheets`),console.log(`✅ Synced snippet #${Z} from Google Sheets:`,pe.title),await L(pe)}catch(ae){console.error(`❌ Failed to sync snippet #${Z}:`,ae),h(`Failed to sync snippet: ${ae instanceof Error?ae.message:"Unknown error"}`)}},ue=async Z=>{try{console.log("🔄 Starting full reindex of all snippets..."),y("🔄 Clearing existing embeddings...","info"),await Va.resetDatabase(),console.log("✅ Cleared all embeddings"),r(ye=>ye.map(_e=>({..._e,hasEmbedding:!1})));const ae=t.map(ye=>ye.id);y(`🔍 Reindexing ${ae.length} snippets...`,"info");const pe=await z(ae,void 0,Z,!0);return await U(),pe.failed===0?f(`✅ Successfully reindexed ${pe.embedded} snippets`):p(`⚠️ Reindexed ${pe.embedded} snippets, ${pe.failed} failed`),{embedded:pe.embedded,failed:pe.failed}}catch(ae){throw console.error("❌ Failed to reindex snippets:",ae),h(`Failed to reindex: ${ae instanceof Error?ae.message:"Unknown error"}`),ae}};return d.jsx(lL.Provider,{value:{snippets:t,addSnippet:D,updateSnippet:q,deleteSnippets:Q,mergeSnippets:F,toggleSelection:K,selectAll:W,selectNone:j,getSelectedSnippets:O,getAllTags:$,addTagsToSnippets:I,removeTagsFromSnippets:G,storageStats:i,checkEmbeddingStatus:V,getEmbeddingDetails:oe,bulkCheckEmbeddingStatus:U,generateEmbeddings:z,reindexAllSnippets:ue,syncStatus:l,triggerManualSync:ie,getUserRagSpreadsheet:P,syncSnippetFromGoogleSheets:H},children:e})};async function HU(e,t,r,n=5,a){const i=await kn(),s={swagContent:t,searchTerms:r.searchTerms,count:n,preferences:r};console.log("🌐 Making feed generation request to:",`${i}/feed/generate`),console.log("📦 Request body:",s);const l=await fetch(`${i}/feed/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(console.log("📡 Response status:",l.status,l.statusText),!l.ok){const y=await l.json();throw console.error("❌ Feed generation error:",y),new Error(y.error||`Failed to generate feed: ${l.statusText}`)}const u=l.body?.getReader();if(!u)throw new Error("No response body");const h=new TextDecoder,p=[];let f="";try{for(;;){const{done:y,value:b}=await u.read();if(y)break;f+=h.decode(b,{stream:!0});const x=f.split(`

`);f=x.pop()||"";for(const v of x){if(!v.trim()||v.startsWith(":"))continue;const T=v.split(`
`);let k=null,C=null;for(const A of T)A.startsWith("event: ")?k=A.substring(7).trim():A.startsWith("data: ")&&(C=A.substring(6).trim());if(C)try{const A=JSON.parse(C),P={type:k||A.type||"status",...A};if(console.log("📨 SSE Event received:",P.type,P),a&&a(P),P.type==="item_generated"&&P.item)p.push(P.item);else if(P.type==="error")throw new Error(P.error||"Unknown error during generation")}catch(A){console.error("Failed to parse SSE event data:",C,A)}}}}finally{u.releaseLock()}return p}const cL=_.createContext(null);function lye(){const e=_.useContext(cL);if(!e)throw new Error("useFeed must be used within FeedProvider");return e}function GU({children:e}){const{getToken:t}=Di(),{snippets:r}=$0(),{settings:n}=Xs(),{showSuccess:a,showWarning:i,showError:s}=Ks(),[l,u]=_.useState([]),[h,p]=_.useState([]),[f,y]=_.useState({searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],maturityLevel:"adult",lastGenerated:new Date().toISOString()}),[b,x]=_.useState(null),[v,T]=_.useState(!0),[k,C]=_.useState(!1),[A,P]=_.useState(!1),[M,L]=_.useState(""),[D,q]=_.useState(null),[Q,F]=_.useState([]),K=_.useRef(r),W=_.useRef(f),j=_.useRef(k);_.useEffect(()=>{K.current=r},[r]),_.useEffect(()=>{W.current=f},[f]),_.useEffect(()=>{j.current=k},[k]),_.useEffect(()=>{(async()=>{console.log("📂 FeedContext: Starting initial data load...");try{T(!0),console.log("📂 Initializing feedDB..."),await vn.init(),console.log("✅ FeedDB initialized"),console.log("📂 Loading preferences...");const Z=await vn.getPreferences();console.log("✅ Loaded preferences"),y(Z),console.log("📂 Loading items from DB...");const ae=await vn.getItems(10,0);console.log("✅ Loaded items from DB:",ae.length),u(ae),console.log("✅ Initial data load complete")}catch(Z){console.error("❌ Failed to load feed data:",Z),q(Z instanceof Error?Z.message:"Failed to load feed")}finally{console.log("📂 Setting isLoading to false"),T(!1)}})()},[]);const O=_.useCallback(async()=>{console.log("🎯 generateMore called");const ue=await t();if(console.log("🔑 Token retrieved:",ue?`${ue.substring(0,20)}...`:"NULL"),!ue){console.log("❌ No token, aborting"),q("Please sign in to generate feed items"),s("Please sign in to generate feed items");return}if(j.current){console.log("⏸️ Already generating, skipping");return}try{console.log("🚀 Starting feed generation..."),C(!0),q(null),L("Preparing to generate feed...");let Z=K.current;Q.length>0&&(Z=Z.filter(je=>je.tags&&je.tags.some(_t=>Q.includes(_t))),console.log(`🏷️ Filtered by tags [${Q.join(", ")}]: ${Z.length} snippets`));const ae=Z.slice(-20).map(je=>je.content||"");console.log("📚 Swag items:",ae.length);const pe=l.flatMap(je=>je.topics||[]),ye=pe.reduce((je,_t)=>(je[_t]=(je[_t]||0)+1,je),{}),_e=Object.entries(ye).sort(([,je],[,_t])=>_t-je).slice(0,5).map(([je])=>je),de=_e.length>0?_e:W.current.searchTerms;console.log("🔍 Using search terms:",de),console.log("📊 Topic analysis:",{existingTopics:pe.length,uniqueTopics:Object.keys(ye).length,topTopics:_e});const Ae=[],Te=new Date().toISOString(),$e={...W.current,searchTerms:de};console.log("🔍 Calling generateFeedItems with preferences:",$e);const ot=await HU(ue,ae,$e,10,je=>{if(console.log("📨 Feed event:",je.type,je),je.type==="item_generated"&&je.item)console.log("✨ New item generated:",je.item.title),Ae.push(je.item),vn.saveItems([je.item]).then(()=>{console.log("💾 Saved item to DB:",je.item.id,je.item.title)}).catch(_t=>{console.error("❌ Failed to save item to DB:",je.item.id,_t)}),L(`Generated ${Ae.length} of 10 items...`),u(_t=>{const Pt=[..._t,je.item],Bt=Pt.length>30?Pt.slice(-30):Pt;return console.log("📊 Items in state after adding:",Bt.length,"items"),Bt});else if(je.type==="status"&&je.message)console.log("📊 Status:",je.message),L(je.message);else if(je.type==="search_complete")console.log("🔍 Search complete:",je.searchResults,"results"),L(`Search complete - found ${je.searchResults||0} results`);else if(je.type==="complete"&&je.cost!==void 0){if(console.log("💰 Total cost:",je.cost),je.cost>0&&L(`Complete! Cost: $${je.cost.toFixed(6)}`),Ae.length>0){const _t={timestamp:Te,cost:je.cost,itemCount:Ae.length,itemIds:Ae.map(Pt=>Pt.id)};p(Pt=>[...Pt,_t]),console.log("💰 Generation batch saved:",_t)}}else je.type==="error"&&(console.error("❌ Generation error:",je.error),q(je.error||"Generation failed"),L("Generation failed"))});console.log("✅ Generated items:",ot.length),console.log("✅ Items via events:",Ae.length),console.log("📄 Items preview:",ot.map(je=>({id:je.title}))),await vn.updatePreferences({lastGenerated:new Date().toISOString()}),(()=>{const je=localStorage.getItem("google_drive_access_token"),_t=localStorage.getItem("auto_sync_enabled")==="true";return je&&je.length>0&&_t})()&&(async()=>{try{(await Gu.syncFeedItems()).success&&console.log("✅ Feed items synced to Google Drive")}catch(je){console.error("❌ Failed to sync feed items:",je)}})()}catch(Z){console.error("❌ Failed to generate feed items:",Z),Z instanceof Error&&(console.error("Error message:",Z.message),console.error("Error stack:",Z.stack)),q(Z instanceof Error?Z.message:"Failed to generate feed")}finally{C(!1),L("")}},[t]),$=_.useCallback(async ue=>{try{await vn.updateItem(ue,{stashed:!0}),u(ae=>ae.map(pe=>pe.id===ue?{...pe,stashed:!0}:pe));const Z=l.find(ae=>ae.id===ue);if(Z){for(const pe of Z.topics)await vn.addLikedTopic(pe);const ae=await vn.getPreferences();y(ae)}}catch(Z){console.error("Failed to stash item:",Z),q(Z instanceof Error?Z.message:"Failed to stash item")}},[l]),I=_.useCallback(async ue=>{try{await vn.updateItem(ue,{trashed:!0}),u(ae=>ae.filter(pe=>pe.id!==ue));const Z=l.find(ae=>ae.id===ue);if(Z){for(const pe of Z.topics)await vn.addDislikedTopic(pe);const ae=await vn.getPreferences();y(ae)}}catch(Z){console.error("Failed to trash item:",Z),q(Z instanceof Error?Z.message:"Failed to trash item")}},[l]),G=_.useCallback(async ue=>{try{await vn.updateItem(ue,{viewed:!0}),u(Z=>Z.map(ae=>ae.id===ue?{...ae,viewed:!0}:ae))}catch(Z){console.error("Failed to mark item as viewed:",Z)}},[]),V=_.useCallback(async ue=>{const Z=await t();if(Z)try{T(!0),q(null);let ae=await vn.getQuiz(ue);if(!ae){i("🧠 Generating quiz... this may take 30-60 seconds. Please wait."),P(!0);const pe=l.find(Ae=>Ae.id===ue);if(!pe)throw new Error("Item not found");const ye=n?.providers?.filter(Ae=>Ae.enabled!==!1)||[],_e=pe.expandedContent||pe.content,de=await nL(_e,!0,ye,Z,f.maturityLevel);ae={itemId:pe.id,title:de.quiz.title||`Quiz: ${pe.title}`,questions:de.quiz.questions.map(Ae=>({id:Ae.id,prompt:Ae.prompt,choices:Ae.choices,correctChoiceId:Ae.correctChoiceId,explanation:Ae.explanation})),sources:pe.sources,generatedAt:new Date().toISOString()},await vn.saveQuiz(ae),a("✅ Quiz ready!")}x(ae)}catch(ae){console.error("Failed to start quiz:",ae);const pe=ae instanceof Error?ae.message:"Failed to load quiz";q(pe),s(`❌ ${pe}`)}finally{T(!1),P(!1)}},[t,l,i,a,s]),oe=_.useCallback(()=>{x(null)},[]),U=_.useCallback(async ue=>{try{await vn.updatePreferences({searchTerms:ue});const Z=await vn.getPreferences();y(Z)}catch(Z){console.error("Failed to update search terms:",Z),q(Z instanceof Error?Z.message:"Failed to update settings")}},[]),z=_.useCallback(ue=>{F(ue),console.log(`🏷️ Tag filter updated: ${ue.length} tags selected`)},[]),ie=_.useCallback(async()=>{console.log("🔄 Refreshing feed - clearing all items and generating new ones");try{T(!0),L("Clearing existing items..."),u([]),await vn.clearAllItems(),console.log("✅ Cleared all feed items"),L("Generating fresh content..."),await O(),a("Feed refreshed with new content!")}catch(ue){console.error("Failed to refresh feed:",ue),q(ue instanceof Error?ue.message:"Failed to refresh"),s("Failed to refresh feed")}finally{T(!1),L("")}},[O,a,s]),H={items:l,generationBatches:h,preferences:f,currentQuiz:b,isLoading:v,isGenerating:k,isGeneratingQuiz:A,generationStatus:M,error:D,selectedTags:Q,generateMore:O,stashItem:$,trashItem:I,markViewed:G,startQuiz:V,closeQuiz:oe,updateSearchTerms:U,updateSelectedTags:z,refresh:ie};return d.jsx(cL.Provider,{value:H,children:e})}const uL=_.createContext(void 0),Ph={clientId:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",redirectUri:"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/callback",scope:"https://www.googleapis.com/auth/youtube.readonly",authUrl:"https://accounts.google.com/o/oauth2/v2/auth"},WU=({children:e})=>{const[t,r]=Pi("youtube_oauth_tokens",null),[n,a]=_.useState(!1),[i,s]=_.useState(null),l=_.useMemo(()=>t?Date.now()<t.expires_at-3e5:!1,[t]);_.useEffect(()=>{if(!t||!l)return;const b=t.expires_at-Date.now(),x=Math.max(0,b-6e5);if(x<=0){p();return}const v=setTimeout(()=>{p()},x);return()=>clearTimeout(v)},[t,l]);const u=_.useCallback(()=>{const b=localStorage.getItem("auth");if(!b)return null;try{return JSON.parse(b).token||null}catch{return null}},[]),h=_.useCallback(async()=>{a(!0),s(null);try{const b=crypto.randomUUID();sessionStorage.setItem("oauth_state",b);const x=new URLSearchParams({client_id:Ph.clientId,redirect_uri:Ph.redirectUri,response_type:"code",scope:Ph.scope,access_type:"offline",prompt:"consent",state:b}),v=`${Ph.authUrl}?${x}`,T=600,k=700,C=window.screenX+(window.outerWidth-T)/2,A=window.screenY+(window.outerHeight-k)/2,P=window.open(v,"oauth",`width=${T},height=${k},left=${C},top=${A}`);if(!P)throw new Error("Popup blocked. Please allow popups for this site.");const M=D=>{const q=new URL(Ph.redirectUri).origin;if(D.origin!==q){console.warn("Ignoring message from unexpected origin:",D.origin);return}if(D.data.type==="oauth_success"){const Q=sessionStorage.getItem("oauth_state");if(D.data.data.state!==Q){s("Invalid state parameter - possible CSRF attack"),a(!1);return}const F={access_token:D.data.data.tokens.access_token,refresh_token:D.data.data.tokens.refresh_token,expires_at:D.data.data.tokens.expires_at,scope:D.data.data.tokens.scope,token_type:D.data.data.tokens.token_type};console.log("Successfully obtained YouTube OAuth tokens"),r(F),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",M)}else D.data.type==="oauth_error"&&(console.error("OAuth error:",D.data.data.error),s(D.data.data.message||D.data.data.error||"Authorization failed"),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",M))};window.addEventListener("message",M);const L=setInterval(()=>{P.closed&&(clearInterval(L),a(!1),window.removeEventListener("message",M),sessionStorage.getItem("oauth_state")&&(s("Authorization cancelled"),sessionStorage.removeItem("oauth_state")))},500)}catch(b){console.error("OAuth flow error:",b),s(b instanceof Error?b.message:"Failed to initiate OAuth flow"),a(!1)}},[r]),p=_.useCallback(async()=>{if(!t?.refresh_token){console.warn("No refresh token available");return}try{const b=u();if(!b){console.log("Cannot refresh YouTube tokens: JWT authentication not available");return}const x="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Refreshing YouTube OAuth tokens...");const v=await fetch(`${x}/oauth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({refresh_token:t.refresh_token})});if(!v.ok){const k=await v.json().catch(()=>({}));throw new Error(k.message||`Token refresh failed: ${v.status}`)}const T=await v.json();r({access_token:T.access_token,refresh_token:T.refresh_token,expires_at:T.expires_at,scope:T.scope,token_type:T.token_type}),console.log("Successfully refreshed YouTube OAuth tokens"),s(null)}catch(b){console.error("Token refresh error:",b);const x=b instanceof Error?b.message:"Token refresh failed";x.includes("invalid_grant")?(console.warn("Refresh token invalid, clearing tokens"),r(null),s("YouTube access expired. Please reconnect.")):s(x)}},[t,r,u]),f=_.useCallback(async()=>{if(!t)return null;if(Date.now()>=t.expires_at-3e5){console.log("Access token expired or expiring soon, refreshing..."),await p();const b=localStorage.getItem("youtube_oauth_tokens");if(b)try{return JSON.parse(b).access_token}catch{return null}return null}return t.access_token},[t,p]),y=_.useCallback(async()=>{if(t)try{const b=u();if(b){const x="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Revoking YouTube OAuth tokens..."),await fetch(`${x}/oauth/revoke`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({token:t.access_token})})}}catch(b){console.error("Revoke error:",b)}finally{r(null),s(null),console.log("YouTube OAuth tokens cleared")}},[t,r,u]);return d.jsx(uL.Provider,{value:{isConnected:l,isLoading:n,tokens:t,error:i,initiateOAuthFlow:h,disconnect:y,refreshTokens:p,getAccessToken:f},children:e})},VU=()=>{const e=_.useContext(uL);if(!e)throw new Error("useYouTubeAuth must be used within a YouTubeAuthProvider");return e},dL=_.createContext(void 0);function YU({children:e}){const{accessToken:t,isAuthenticated:r}=Di(),[n,a]=_.useState(null),[i,s]=_.useState(!1),[l,u]=_.useState(null),[h,p]=_.useState(null),f=async()=>{if(!t||!r){a(null);return}s(!0),u(null);try{const x=await kn(),v={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},T=await fetch(`${x}/billing`,{method:"GET",headers:v});if(!T.ok){const D=await T.json().catch(()=>({}));throw new Error(D.message||`HTTP ${T.status}`)}const k=await T.json();k.ttsCapabilities&&(p(k.ttsCapabilities),console.log("🎙️ Server TTS capabilities:",k.ttsCapabilities));let C=0,A=0;if(k.transactions)for(const D of k.transactions)D.type==="credit_added"?C+=Math.abs(D.cost):A+=D.cost;const P=C-A,M=P<-.01,L={userEmail:"",totalCost:parseFloat(A.toFixed(4)),creditBalance:parseFloat(Math.max(0,P).toFixed(2)),totalCredits:parseFloat(C.toFixed(2)),exceeded:M,timestamp:new Date().toISOString()};a(L),console.log("💰 Usage calculated from billing data:",{...L,rawTotalCredits:C,rawTotalUsage:A,rawCreditBalance:P})}catch(x){const v=x instanceof Error?x.message:"Failed to load usage";console.error("❌ Failed to fetch usage:",v),u(v),a(null)}finally{s(!1)}},y=x=>{if(!n)return;const v=n.totalCost+x,T=n.totalCredits-v,k=T<-.01;a({...n,totalCost:v,creditBalance:T,exceeded:k,timestamp:new Date().toISOString()}),console.log(`💸 Added $${x.toFixed(4)} to usage - New balance: $${T.toFixed(4)}`)};_.useEffect(()=>{r&&t?f():a(null)},[r,t]);const b={usage:n,loading:i,error:l,refreshUsage:f,addCost:y,isLocked:n?.exceeded||!1,ttsCapabilities:h};return d.jsx(dL.Provider,{value:b,children:e})}function q0(){const e=_.useContext(dL);if(e===void 0)throw new Error("useUsage must be used within a UsageProvider");return e}const hL=_.createContext(void 0),H0=()=>{const e=_.useContext(hL);if(!e)throw new Error("useCast must be used within a CastProvider");return e},QU=({children:e})=>{const[t,r]=_.useState(!1),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,u]=_.useState(null),[h,p]=_.useState(!1),[f,y]=_.useState(!1),b="DE7507EF",x=_.useCallback(()=>{if(!window.chrome?.cast){console.log("Cast API not available yet, will retry...");return}const Q=new chrome.cast.SessionRequest(b),F=new chrome.cast.ApiConfig(Q,K=>{console.log("Cast session started:",K),u(K),a(!0),s(K.receiver.friendlyName)},K=>{console.log("Cast receiver availability:",K),r(K===chrome.cast.ReceiverAvailability.AVAILABLE)});chrome.cast.initialize(F,()=>console.log("Cast initialized successfully"),K=>console.error("Cast initialization failed:",K))},[b]),v=_.useCallback(()=>{if(!chrome?.cast){console.error("Cast API not available");return}chrome.cast.requestSession(Q=>{console.log("Cast session requested successfully:",Q),u(Q),a(!0),s(Q.receiver.friendlyName),Q.addUpdateListener(F=>{console.log("Cast session update:",F),F||(a(!1),u(null),s(null))})},Q=>{console.error("Error requesting cast session:",Q)})},[]),T=_.useCallback(()=>{l&&l.stop(()=>{console.log("Cast session stopped"),a(!1),u(null),s(null)},Q=>console.error("Error stopping session:",Q))},[l]),k=_.useCallback(Q=>{if(!l||!n){console.log("No active cast session");return}try{const F="urn:x-cast:com.lambdallmproxy.chat",K={type:"MESSAGES_UPDATE",messages:Q.map(W=>({role:W.role,content:W.content,name:W.name,tool_call_id:W.tool_call_id,isStreaming:W.isStreaming}))};l.sendMessage(F,K,()=>console.log("Messages sent to receiver"),W=>console.error("Error sending messages:",W))}catch(F){console.error("Error in sendMessages:",F)}},[l,n]),C=_.useCallback(Q=>{if(!(!l||!n))try{const F="urn:x-cast:com.lambdallmproxy.chat",K={type:"SCROLL_UPDATE",position:Q};l.sendMessage(F,K,()=>console.log("Scroll position sent:",Q),W=>console.error("Error sending scroll:",W))}catch(F){console.error("Error in sendScrollPosition:",F)}},[l,n]),A=_.useCallback((Q,F=0)=>{if(!l||!n){console.log("No active cast session for video");return}try{const K="urn:x-cast:com.lambdallmproxy.video",W={type:"VIDEO_COMMAND",command:"load",data:{videoId:Q.videoId,url:Q.url,title:Q.title,channel:Q.channel,thumbnail:Q.thumbnail,duration:Q.duration,position:F},timestamp:Date.now()};l.sendMessage(K,W,()=>{console.log("Video cast command sent:",Q.title),p(!0)},j=>console.error("Error casting video:",j))}catch(K){console.error("Error in castVideo:",K)}},[l,n]),P=_.useCallback((Q,F={})=>{if(!(!l||!n))try{const K="urn:x-cast:com.lambdallmproxy.video",W={type:"VIDEO_COMMAND",command:Q,data:F,timestamp:Date.now()};l.sendMessage(K,W,()=>console.log("Video command sent:",Q),j=>console.error("Error sending video command:",j)),Q==="stop"&&p(!1)}catch(K){console.error("Error in sendVideoCommand:",K)}},[l,n]),M=_.useCallback(Q=>{if(!l||!n){console.log("No active cast session for snippet");return}try{const F="urn:x-cast:com.lambdallmproxy.snippet",K={type:"SNIPPET_COMMAND",command:"load",data:{id:Q.id,content:Q.content,title:Q.title||"Untitled Snippet",tags:Q.tags||[],created:Q.created,modified:Q.modified},timestamp:Date.now()};l.sendMessage(F,K,()=>{console.log("Snippet cast successfully:",Q.title),y(!0)},W=>console.error("Error casting snippet:",W))}catch(F){console.error("Error in castSnippet:",F)}},[l,n]),L=_.useCallback(Q=>{if(!(!l||!n||!f))try{const F="urn:x-cast:com.lambdallmproxy.snippet",K={type:"SNIPPET_COMMAND",command:"scroll",data:{position:Q},timestamp:Date.now()};l.sendMessage(F,K,()=>console.log("Snippet scroll position sent:",Q),W=>console.error("Error sending snippet scroll:",W))}catch(F){console.error("Error in sendSnippetScrollPosition:",F)}},[l,n,f]),D=_.useCallback(()=>{if(!(!l||!n||!f))try{const Q="urn:x-cast:com.lambdallmproxy.snippet",F={type:"SNIPPET_COMMAND",command:"stop",data:{},timestamp:Date.now()};l.sendMessage(Q,F,()=>{console.log("Snippet cast stopped"),y(!1)},K=>console.error("Error stopping snippet cast:",K))}catch(Q){console.error("Error in stopSnippetCast:",Q)}},[l,n,f]);_.useEffect(()=>{if(document.getElementById("cast-sdk")){window.chrome?.cast&&x();return}const Q=document.createElement("script");return Q.id="cast-sdk",Q.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",Q.async=!0,Q.onload=()=>{console.log("Cast SDK loaded");const F=setInterval(()=>{window.chrome?.cast&&(clearInterval(F),x())},100);setTimeout(()=>clearInterval(F),1e4)},document.head.appendChild(Q),()=>{}},[x]);const q={isAvailable:t,isConnected:n,deviceName:i,initializeCast:x,requestSession:v,endSession:T,sendMessages:k,sendScrollPosition:C,castVideo:A,sendVideoCommand:P,isCastingVideo:h,castSnippet:M,sendSnippetScrollPosition:L,stopSnippetCast:D,isCastingSnippet:f};return d.jsx(hL.Provider,{value:q,children:e})},pL=_.createContext(void 0),KU=()=>{const e=_.useContext(pL);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},XU=({children:e})=>{const[t,r]=_.useState(null),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,u]=_.useState("unknown");_.useEffect(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(b=>{u(b.state),b.addEventListener("change",()=>{u(b.state)})}).catch(()=>{u("unknown")})},[]);const h=async(b,x)=>{try{const v=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b}&lon=${x}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"LLMProxyChat/1.0"}});if(!v.ok){console.warn("Reverse geocoding failed:",v.statusText);return}const T=await v.json();if(T.address)return{city:T.address.city||T.address.town||T.address.village,state:T.address.state,country:T.address.country,postalCode:T.address.postcode,formatted:T.display_name}}catch(v){console.warn("Error reverse geocoding:",v)}},p=_.useCallback(async()=>{if(!navigator.geolocation){s("Geolocation is not supported by your browser");return}a(!0),s(null);try{const b=await new Promise((A,P)=>{navigator.geolocation.getCurrentPosition(A,P,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:x,longitude:v,accuracy:T}=b.coords,k=await h(x,v),C={latitude:x,longitude:v,accuracy:T,address:k,timestamp:Date.now()};r(C),u("granted"),localStorage.setItem("user_location",JSON.stringify(C)),console.log("Location updated:",C)}catch(b){let x="Failed to get location";b.code===1?(x="Location permission denied",u("denied")):b.code===2?x="Location unavailable":b.code===3&&(x="Location request timed out"),s(x),console.error("Geolocation error:",b)}finally{a(!1)}},[]),f=_.useCallback(()=>{r(null),s(null),localStorage.removeItem("user_location")},[]);_.useEffect(()=>{const b=localStorage.getItem("user_location");if(b)try{const x=JSON.parse(b);Date.now()-(x.timestamp||0)<1440*60*1e3?r(x):localStorage.removeItem("user_location")}catch(x){console.error("Error loading stored location:",x),localStorage.removeItem("user_location")}},[]);const y={location:t,isLoading:n,error:i,permissionState:l,requestLocation:p,clearLocation:f};return d.jsx(pL.Provider,{value:y,children:e})},JU={version:"1.0.0",currentProvider:"llm",currentVoice:null,rate:1,pitch:1,volume:1,autoSummarize:!0,elevenlabsApiKey:""};class Ru{name="llm";provider=null;audio=null;currentOnEnd=null;constructor(t){this.provider=t||null}setProvider(t){this.provider=t}async isAvailable(){return this.provider?["openai","gemini","groq","together"].includes(this.provider.type):!1}async getVoices(){if(!this.provider)return[];switch(this.provider.type){case"openai":return[{id:"alloy",name:"Alloy",language:"en",gender:"neutral",provider:"openai"},{id:"echo",name:"Echo",language:"en",gender:"male",provider:"openai"},{id:"fable",name:"Fable",language:"en",gender:"neutral",provider:"openai"},{id:"onyx",name:"Onyx",language:"en",gender:"male",provider:"openai"},{id:"nova",name:"Nova",language:"en",gender:"female",provider:"openai"},{id:"shimmer",name:"Shimmer",language:"en",gender:"female",provider:"openai"}];case"gemini":return[{id:"en-US-Neural2-A",name:"Neural2 A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-C",name:"Neural2 C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-D",name:"Neural2 D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-E",name:"Neural2 E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-F",name:"Neural2 F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-G",name:"Neural2 G (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-H",name:"Neural2 H (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-I",name:"Neural2 I (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-J",name:"Neural2 J (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-A",name:"WaveNet A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-B",name:"WaveNet B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-C",name:"WaveNet C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-D",name:"WaveNet D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-E",name:"WaveNet E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-F",name:"WaveNet F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-A",name:"Standard A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-B",name:"Standard B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-C",name:"Standard C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-D",name:"Standard D (Male)",language:"en-US",gender:"male",provider:"google"}];case"groq":return[{id:"Aaliyah-PlayAI",name:"Aaliyah",language:"en-US",gender:"female",provider:"groq"},{id:"Adelaide-PlayAI",name:"Adelaide",language:"en-US",gender:"female",provider:"groq"},{id:"Angelo-PlayAI",name:"Angelo",language:"en-US",gender:"male",provider:"groq"},{id:"Arista-PlayAI",name:"Arista",language:"en-US",gender:"female",provider:"groq"},{id:"Atlas-PlayAI",name:"Atlas",language:"en-US",gender:"male",provider:"groq"},{id:"Basil-PlayAI",name:"Basil",language:"en-US",gender:"male",provider:"groq"},{id:"Briggs-PlayAI",name:"Briggs",language:"en-US",gender:"male",provider:"groq"},{id:"Calum-PlayAI",name:"Calum",language:"en-US",gender:"male",provider:"groq"},{id:"Celeste-PlayAI",name:"Celeste",language:"en-US",gender:"female",provider:"groq"},{id:"Cheyenne-PlayAI",name:"Cheyenne",language:"en-US",gender:"female",provider:"groq"},{id:"Chip-PlayAI",name:"Chip",language:"en-US",gender:"male",provider:"groq"},{id:"Cillian-PlayAI",name:"Cillian",language:"en-US",gender:"male",provider:"groq"},{id:"Deedee-PlayAI",name:"Deedee",language:"en-US",gender:"female",provider:"groq"},{id:"Eleanor-PlayAI",name:"Eleanor",language:"en-US",gender:"female",provider:"groq"},{id:"Fritz-PlayAI",name:"Fritz",language:"en-US",gender:"male",provider:"groq"},{id:"Gail-PlayAI",name:"Gail",language:"en-US",gender:"female",provider:"groq"},{id:"Indigo-PlayAI",name:"Indigo",language:"en-US",gender:"neutral",provider:"groq"},{id:"Jennifer-PlayAI",name:"Jennifer",language:"en-US",gender:"female",provider:"groq"},{id:"Judy-PlayAI",name:"Judy",language:"en-US",gender:"female",provider:"groq"},{id:"Mamaw-PlayAI",name:"Mamaw",language:"en-US",gender:"female",provider:"groq"},{id:"Mason-PlayAI",name:"Mason",language:"en-US",gender:"male",provider:"groq"},{id:"Mikail-PlayAI",name:"Mikail",language:"en-US",gender:"male",provider:"groq"},{id:"Mitch-PlayAI",name:"Mitch",language:"en-US",gender:"male",provider:"groq"},{id:"Nia-PlayAI",name:"Nia",language:"en-US",gender:"female",provider:"groq"},{id:"Quinn-PlayAI",name:"Quinn",language:"en-US",gender:"neutral",provider:"groq"},{id:"Ruby-PlayAI",name:"Ruby",language:"en-US",gender:"female",provider:"groq"},{id:"Thunder-PlayAI",name:"Thunder",language:"en-US",gender:"male",provider:"groq"}];case"together":return[];default:return[]}}async speak(t,r={}){if(!this.provider)throw new Error("No provider configured for TTS");console.log("LLMProviderTTSProvider: speak() called, stopping any existing audio"),this.stop();const n=await this.speakViaProxy(t,r);return this.playAudio(n,r)}async speakViaProxy(t,r){const n=await this.getApiBase();let a=this.provider.type;a==="gemini"?a="google":a==="groq"&&(a="groq");const i=localStorage.getItem("google_access_token");if(!i)throw new Error("Authentication required. Please sign in.");const s=await fetch(`${n}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:a,text:t,voice:r.voice,rate:r.rate||1,pitch:r.pitch||1,model:a==="openai"?"tts-1":void 0,apiKey:this.provider.apiKey})});if(!s.ok){const l=await s.text();throw new Error(`TTS Proxy API error: ${s.status} - ${l}`)}return await s.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(r,{method:"OPTIONS",signal:AbortSignal.timeout(500)})).status!==void 0)return console.log("🏠 Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const s=new Error("Audio playback failed");r.onError?.(s),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(s)},this.audio.play().catch(s=>{const l=new Error(`Failed to start audio playback: ${s.message}`);r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)})})}stop(){if(console.log("LLMProviderTTSProvider: stop() called",{hasAudio:!!this.audio}),this.audio){console.log("LLMProviderTTSProvider: Stopping audio",{paused:this.audio.paused,currentTime:this.audio.currentTime,duration:this.audio.duration,src:this.audio.src?.substring(0,50)}),this.audio.onended=null,this.audio.onerror=null,this.audio.oncanplaythrough=null,this.audio.pause(),this.audio.currentTime=0;const t=this.audio;this.audio=null,t.src&&t.src.startsWith("blob:")&&(console.log("LLMProviderTTSProvider: Revoking blob URL"),URL.revokeObjectURL(t.src),t.src="");try{t.remove()}catch(r){console.warn("Failed to remove audio element:",r)}if(console.log("LLMProviderTTSProvider: Audio stopped and cleaned up"),this.currentOnEnd){console.log("LLMProviderTTSProvider: Triggering onEnd callback");const r=this.currentOnEnd;this.currentOnEnd=null,r()}}else console.log("LLMProviderTTSProvider: No audio to stop")}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop()}}class L2{name="elevenlabs";apiKey;audio=null;cachedVoices=null;currentOnEnd=null;constructor(t){this.apiKey=t}setApiKey(t){this.apiKey=t,this.cachedVoices=null}async isAvailable(){return!!this.apiKey}async getVoices(){if(this.cachedVoices)return this.cachedVoices;if(!this.apiKey)return[];try{const t=await fetch("https://api.elevenlabs.io/v1/voices",{headers:{"xi-api-key":this.apiKey,"Content-Type":"application/json"}});if(!t.ok)return console.error("Failed to fetch ElevenLabs voices:",t.status,t.statusText),[];const r=await t.json();return this.cachedVoices=r.voices.map(n=>({id:n.voice_id,name:n.name,language:n.labels?.language||"en",gender:this.detectGender(n.name,n.labels),provider:"elevenlabs"})),this.cachedVoices}catch(t){return console.error("Failed to fetch ElevenLabs voices:",t),[]}}detectGender(t,r){if(r?.gender)return r.gender.toLowerCase();const n=t.toLowerCase();return n.includes("bella")||n.includes("elli")||n.includes("rachel")||n.includes("domi")||n.includes("sarah")||n.includes("nicole")||n.includes("female")?"female":n.includes("adam")||n.includes("antoni")||n.includes("arnold")||n.includes("josh")||n.includes("sam")||n.includes("male")?"male":"neutral"}async speak(t,r={}){if(!this.apiKey)throw new Error("ElevenLabs API key not configured");const n=await this.getVoices();let a=r.voice;if(!a||!n.find(i=>i.id===a)){if(n.length===0)throw new Error("No ElevenLabs voices available");a=n[0].id}try{const i=await this.speakViaProxy(t,a,r);return this.playAudio(i,r)}catch(i){const s=i instanceof Error?i.message:"Unknown error";throw new Error(`ElevenLabs TTS failed: ${s}`)}}async speakViaProxy(t,r,n){const a=await this.getApiBase(),i=localStorage.getItem("google_id_token");if(!i)throw new Error("Authentication required. Please sign in.");const s=await fetch(`${a}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:"elevenlabs",text:t,voice:r,rate:n.rate||1,apiKey:this.apiKey})});if(!s.ok){const l=await s.text();throw new Error(`TTS Proxy API error: ${s.status} - ${l}`)}return await s.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(r,{method:"OPTIONS",signal:AbortSignal.timeout(500)})).status!==void 0)return console.log("🏠 Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const s=new Error("Audio playback failed");r.onError?.(s),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(s)},this.audio.play().catch(s=>{const l=new Error(`Failed to start audio playback: ${s.message}`);r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)})})}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src&&this.audio.src.startsWith("blob:")&&URL.revokeObjectURL(this.audio.src),this.audio=null,this.currentOnEnd&&(console.log("ElevenLabsProvider: stop() triggering onEnd callback"),this.currentOnEnd(),this.currentOnEnd=null))}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop(),this.cachedVoices=null}}function Qu(e){let t=e;return t=t.replace(/#{1,6}\s/g,""),t=t.replace(/\*\*\*(.*?)\*\*\*/g,"$1"),t=t.replace(/\*\*(.*?)\*\*/g,"$1"),t=t.replace(/\*(.*?)\*/g,"$1"),t=t.replace(/`{1,3}[^`]*`{1,3}/g,"code"),t=t.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),t=t.replace(/<[^>]+>/g,""),t=t.replace(/&/g," and "),t=t.replace(/@/g," at "),t=t.replace(/#/g," hashtag "),t=t.replace(/\$/g," dollar "),t=t.replace(/%/g," percent "),t=t.replace(/[^\w\s.,!?;:'"()[\]{}\-]/g," "),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\. /g,". ... "),t=t.replace(/, /g,", .. "),t=t.replace(/: /g,": .. "),t=t.replace(/; /g,"; .. "),t}function ZU(e){if(typeof e=="string")return Qu(e);if(Array.isArray(e)){const t=e.filter(r=>r.type==="text").map(r=>r.text||r.content||"");return Qu(t.join(" "))}if(e&&typeof e=="object"){const t=e.text||e.content||"";return Qu(String(t))}return""}function xw(e,t=500){if(e.length<=t)return e;const r=e.substring(0,t),n=Math.max(r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));return n>t*.7?r.substring(0,n+1)+" ... Content truncated for speech.":r+"... Content truncated for speech."}function e$(e,t,r=500){return t?e.length>r:!1}function gL(e){const t=e.toLowerCase();return t.includes("female")||t.includes("woman")||t.includes("alice")||t.includes("emma")||t.includes("nova")||t.includes("shimmer")||t.includes("samantha")||t.includes("victoria")||t.includes("alloy")?"female":t.includes("male")||t.includes("man")||t.includes("alex")||t.includes("daniel")||t.includes("onyx")||t.includes("echo")||t.includes("thomas")||t.includes("david")?"male":"neutral"}class t${name="Browser Speech";synth;utterance=null;isStoppedIntentionally=!1;currentOnEndCallback=null;pollingInterval=null;constructor(){this.synth=window.speechSynthesis}async isAvailable(){return"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}async getVoices(){return await this.waitForVoices(),this.synth.getVoices().map(r=>({id:r.voiceURI,name:r.name,language:r.lang,gender:gL(r.name),provider:"browser"}))}waitForVoices(){return new Promise(t=>{if(this.synth.getVoices().length>0){t();return}const n=()=>{this.synth.removeEventListener("voiceschanged",n),t()};this.synth.addEventListener("voiceschanged",n),setTimeout(()=>{this.synth.removeEventListener("voiceschanged",n),t()},1e3)})}async speak(t,r={}){if(!t||t.trim().length===0){const i=new Error("Cannot speak empty text");throw r.onError?.(i),i}this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null;let n=Qu(t);n=xw(n,500);const a=(i,s)=>new Promise((l,u)=>{if(!i||i.trim().length===0){const p=new Error("Cannot speak empty text after preprocessing");return r.onError?.(p),u(p)}this.utterance=new SpeechSynthesisUtterance(i);const h=this.utterance;if(h.rate=r.rate||1,h.pitch=r.pitch||1,h.volume=r.volume||1,r.voice){const p=this.synth.getVoices();h.voice=p.find(f=>f.voiceURI===r.voice)||null}this.utterance.onstart=()=>r.onStart?.(),this.currentOnEndCallback=r.onEnd||null,this.utterance.onend=()=>{this.stopPolling(),r.onEnd?.(),this.currentOnEndCallback=null,this.utterance=null,l()},this.utterance.onerror=p=>{if(p.error==="synthesis-failed"&&s){const y=xw(i,200);return a(y,!1).then(l).catch(u)}const f=new Error(`Speech synthesis error: ${p.error}`);r.onError?.(f),this.currentOnEndCallback=null,this.utterance=null,u(f)},r.onBoundary&&(this.utterance.onboundary=p=>{const f=i.substring(p.charIndex,p.charIndex+p.charLength);r.onBoundary(f,p.charIndex)});try{this.synth.speak(this.utterance),this.startPolling()}catch(p){const f=new Error(`Failed to start speech: ${p}`);r.onError?.(f),this.utterance=null,u(f)}});return a(n,!0)}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval(()=>{if(this.utterance&&!this.synth.speaking&&!this.synth.pending&&(console.log("BrowserSpeechProvider: Polling detected speech stopped, triggering onEnd"),this.stopPolling(),this.currentOnEndCallback)){const t=this.currentOnEndCallback;this.currentOnEndCallback=null,this.utterance=null,t()}},500)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}stop(){if(console.log("BrowserSpeechProvider: stop() called",{hasUtterance:!!this.utterance,hasCallback:!!this.currentOnEndCallback,isStoppedIntentionally:this.isStoppedIntentionally}),this.stopPolling(),this.utterance||this.currentOnEndCallback){this.isStoppedIntentionally=!0;const t=this.currentOnEndCallback;this.synth.pause(),this.synth.cancel(),setTimeout(()=>{this.synth.speaking&&this.synth.cancel()},0),this.utterance=null,this.currentOnEndCallback=null,t&&(console.log("BrowserSpeechProvider: Manually calling onEnd callback"),setTimeout(()=>t(),0))}}pause(){this.synth.speaking&&!this.synth.paused&&this.synth.pause()}resume(){this.synth.paused&&this.synth.resume()}cleanup(){this.stopPolling(),this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null}}class r${name="speakjs";speech=null;isPlaying=!1;isInitialized=!1;async initialize(){if(!this.isInitialized)try{const t=(await Rt(async()=>{const{default:r}=await import("./speak-tts-DnnHbcnI.js").then(n=>n.s);return{default:r}},[])).default;this.speech=new t,await this.speech.init({volume:1,lang:"en-US",rate:1,pitch:1,splitSentences:!0}),this.isInitialized=!0,console.log("🔊 speak.js: Initialized successfully")}catch(t){console.warn("🔊 speak.js: Failed to initialize, will use silent fallback:",t)}}async isAvailable(){return!0}async getVoices(){if(await this.initialize(),this.speech&&this.isInitialized)try{return this.speech.voices().map(r=>({id:r.voiceURI||r.name,name:r.name,language:r.lang,gender:gL(r.name),provider:"speakjs"}))}catch(t){console.warn("🔊 speak.js: Failed to get voices:",t)}return[{id:"speakjs-en",name:"speak.js English",language:"en-US",gender:"neutral",provider:"speakjs"}]}async speak(t,r={}){return this.stop(),await this.initialize(),this.speech&&this.isInitialized?new Promise((n,a)=>{this.isPlaying=!0,r.onStart?.(),this.speech.speak({text:t,queue:!1,listeners:{onstart:()=>{console.log("🔊 speak.js: Started speaking")},onend:()=>{console.log("🔊 speak.js: Finished speaking"),this.isPlaying=!1,r.onEnd?.(),n()},onerror:i=>{console.error("🔊 speak.js: Error:",i),this.isPlaying=!1,r.onError?.(i),a(i)}}}).catch(i=>{console.error("🔊 speak.js: speak() failed:",i),this.isPlaying=!1,r.onError?.(i),a(i)})}):(console.warn("🔊 speak.js: Library not available, using silent fallback"),this.silentFallback(t,r))}async silentFallback(t,r={}){return new Promise(n=>{r.onStart?.(),this.isPlaying=!0;const a=Math.min(t.length*80,1e4);setTimeout(()=>{this.isPlaying&&(r.onEnd?.(),this.isPlaying=!1,n())},a)})}stop(){if(this.isPlaying=!1,this.speech&&this.isInitialized)try{this.speech.cancel()}catch(t){console.warn("🔊 speak.js: Error stopping speech:",t)}}pause(){if(this.speech&&this.isInitialized)try{this.speech.pause()}catch{console.warn("🔊 speak.js: Pause not supported")}}resume(){if(this.speech&&this.isInitialized)try{this.speech.resume()}catch{console.warn("🔊 speak.js: Resume not supported")}}cleanup(){this.stop(),this.speech=null,this.isInitialized=!1}}class n${name="Chatterbox TTS (Local)";baseUrl;audioElement=null;cachedVoices=null;constructor(t="http://localhost:8000"){this.baseUrl=t.replace(/\/$/,"")}async isAvailable(){try{return await fetch(`${this.baseUrl}/health`,{method:"GET",signal:AbortSignal.timeout(3e3),mode:"no-cors"}),!0}catch{return!1}}async getVoices(){return this.cachedVoices?this.cachedVoices:(this.cachedVoices=this.getDefaultVoices(),this.cachedVoices)}getDefaultVoices(){return[{id:"en_default",name:"English (Default)",language:"en",gender:"neutral",provider:"chatterbox"},{id:"en_male",name:"English (Male)",language:"en",gender:"male",provider:"chatterbox"},{id:"en_female",name:"English (Female)",language:"en",gender:"female",provider:"chatterbox"},{id:"es_default",name:"Spanish (Default)",language:"es",gender:"neutral",provider:"chatterbox"},{id:"fr_default",name:"French (Default)",language:"fr",gender:"neutral",provider:"chatterbox"},{id:"de_default",name:"German (Default)",language:"de",gender:"neutral",provider:"chatterbox"},{id:"it_default",name:"Italian (Default)",language:"it",gender:"neutral",provider:"chatterbox"},{id:"pt_default",name:"Portuguese (Default)",language:"pt",gender:"neutral",provider:"chatterbox"},{id:"ru_default",name:"Russian (Default)",language:"ru",gender:"neutral",provider:"chatterbox"},{id:"zh_default",name:"Chinese (Default)",language:"zh",gender:"neutral",provider:"chatterbox"},{id:"ja_default",name:"Japanese (Default)",language:"ja",gender:"neutral",provider:"chatterbox"},{id:"ko_default",name:"Korean (Default)",language:"ko",gender:"neutral",provider:"chatterbox"}]}async speak(t,r={}){if(!t||t.trim().length===0)throw new Error("Text is required for TTS");try{r.onStart?.();const n=r.voice?.split("_")[0]||"en",a=r.voice||"en_default",i=await fetch(`${this.baseUrl}/api/tts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t.trim(),language:n,speaker_id:a,speed:r.rate||1}),signal:AbortSignal.timeout(3e4)});if(!i.ok){const u=await i.text();throw new Error(`Chatterbox TTS API error: ${i.status} ${u}`)}const s=await i.blob(),l=URL.createObjectURL(s);await this.playAudio(l,r),r.onEnd?.(),URL.revokeObjectURL(l)}catch(n){const a=n instanceof Error?n.message:"Unknown error";throw console.error("Chatterbox TTS error:",a),r.onError?.(new Error(`Failed to generate speech: ${a}`)),n}}playAudio(t,r){return new Promise((n,a)=>{this.stop(),this.audioElement=new Audio(t),r.volume!==void 0&&(this.audioElement.volume=Math.max(0,Math.min(1,r.volume))),r.rate!==void 0&&(this.audioElement.playbackRate=Math.max(.5,Math.min(2,r.rate))),this.audioElement.onended=()=>{n()},this.audioElement.onerror=()=>{const i=new Error("Audio playback failed");a(i)},this.audioElement.play().catch(a)})}stop(){this.audioElement&&(this.audioElement.pause(),this.audioElement.currentTime=0,this.audioElement=null)}pause(){this.audioElement&&!this.audioElement.paused&&this.audioElement.pause()}resume(){this.audioElement&&this.audioElement.paused&&this.audioElement.play().catch(t=>{console.error("Failed to resume audio:",t)})}cleanup(){this.stop(),this.cachedVoices=null}}class a${providers=new Map;llmProviders=[];async initializeProviders(t,r){this.llmProviders=t,this.providers.clear();const n=new n$("http://localhost:8000");await n.isAvailable()&&(this.providers.set("chatterbox",n),console.log("🏠 Chatterbox TTS provider initialized (LOCAL GPU)")),await this.initializeLLMProviders();const a=this.getBestLLMProviderForTTS();if(a){const l=new Ru(a);await l.isAvailable()&&this.providers.set("llm",l)}if(r){const l=new L2(r);await l.isAvailable()&&this.providers.set("elevenlabs",l)}const i=new t$;await i.isAvailable()&&this.providers.set("browser",i);const s=new r$;await s.isAvailable()&&this.providers.set("speakjs",s)}async initializeLLMProviders(){const t=this.llmProviders.find(i=>i.type==="openai"&&i.enabled!==!1);if(t){const i=new Ru(t);await i.isAvailable()&&this.providers.set("openai-tts",i)}const r=this.llmProviders.find(i=>i.type==="groq"&&i.enabled!==!1);if(r){const i=new Ru(r);await i.isAvailable()&&this.providers.set("groq-tts",i)}const n=this.llmProviders.find(i=>i.type==="gemini"&&i.enabled!==!1);if(n){const i=new Ru(n);await i.isAvailable()&&this.providers.set("gemini-tts",i)}const a=this.llmProviders.find(i=>i.type==="together"&&i.enabled!==!1);if(a){const i=new Ru(a);await i.isAvailable()&&this.providers.set("together-tts",i)}}getBestLLMProviderForTTS(){const t=["openai","gemini","groq","together"];for(const r of t){const n=this.llmProviders.find(a=>a.type===r&&a.enabled!==!1);if(n)return n}return null}getProvider(t){return this.providers.get(t)}getAvailableProviders(){const t=Array.from(this.providers.keys());t.includes("elevenlabs")||t.push("elevenlabs");const r=["chatterbox","speaches","openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];return t.sort((n,a)=>{const i=r.indexOf(n),s=r.indexOf(a);return(i===-1?999:i)-(s===-1?999:s)})}getAvailableLLMProviders(){return this.llmProviders.filter(t=>t.enabled!==!1&&["openai","gemini","groq","together"].includes(t.type)).map(t=>({type:t.type,name:this.getLLMProviderDisplayName(t.type)}))}getLLMProviderByType(t){return this.llmProviders.find(r=>r.type===t&&r.enabled!==!1)||null}getLLMProviderDisplayName(t){return{openai:"OpenAI",gemini:"Gemini",groq:"Groq",together:"Together AI"}[t]||t}getDefaultProvider(){const t=["chatterbox","speaches","openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t){const n=this.providers.get(r);if(n)return n}return null}getDefaultProviderType(){const t=["chatterbox","speaches","openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t)if(this.providers.has(r))return r;return null}async updateLLMProviders(t){this.llmProviders=t;const r=this.getBestLLMProviderForTTS();if(r){const n=this.providers.get("llm");if(n)n.setProvider(r);else{const a=new Ru(r);await a.isAvailable()&&this.providers.set("llm",a)}}else this.providers.delete("llm")}async updateElevenLabsApiKey(t){if(t){const r=this.providers.get("elevenlabs");if(r)r.setApiKey(t);else{const n=new L2(t);await n.isAvailable()&&this.providers.set("elevenlabs",n)}}else this.providers.delete("elevenlabs")}cleanup(){this.providers.forEach(t=>{if(t&&typeof t.stop=="function")try{t.stop()}catch(r){console.warn("Error stopping TTS provider:",r)}if(t&&typeof t.cleanup=="function")try{t.cleanup()}catch(r){console.warn("Error cleaning up TTS provider:",r)}}),this.providers.clear()}getCurrentLLMProviderInfo(){const t=this.getBestLLMProviderForTTS();return t?{name:{openai:"OpenAI",gemini:"Google Gemini",groq:"Groq",together:"Together AI",atlascloud:"Atlas Cloud"}[t.type]||t.type,type:t.type}:null}}class i${async generateSpeakableSummary(t,r){if(t.length<500)return Qu(t);const n=`Convert the following text into a concise, natural-sounding spoken summary. 
The summary should:
- Be 2-3 sentences maximum
- Sound natural when read aloud
- Capture the key points
- Avoid technical jargon or formatting
- Use conversational language

Text to summarize:
${t}

Speakable summary:`;try{const a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a helpful assistant that creates concise, natural-sounding spoken summaries."},{role:"user",content:n}],provider:r.type,apiKey:r.apiKey,maxTokens:200,temperature:.7,ttsMode:!0})});if(!a.ok)throw new Error(`Summary API error: ${a.status}`);const i=await a.json();let s="";if(i.choices&&i.choices[0]?.message?.content)s=i.choices[0].message.content;else if(i.content)s=i.content;else throw new Error("No summary content in response");return Qu(s)}catch(a){return console.error("Failed to generate speakable summary:",a),xw(t,500)}}shouldSummarize(t,r,n=500){return r?t.length>n:!1}}const fL=_.createContext(void 0),s$=({children:e})=>{const{settings:t}=Xs(),{ttsCapabilities:r}=q0(),[n,a]=Pi("tts_settings",JU),[i]=_.useState(()=>new a$),[s]=_.useState(()=>new i$),[l,u]=_.useState(null),h=_.useRef(!1),[p,f]=_.useState({isPlaying:!1,currentText:null,currentProvider:n.currentProvider,currentVoice:n.currentVoice,rate:n.rate,pitch:n.pitch,volume:n.volume,providers:[],voices:[],autoSummarize:n.autoSummarize,elevenlabsApiKey:n.elevenlabsApiKey});_.useEffect(()=>((async()=>{try{i.cleanup();const j=[...t.providers];r?.groq&&!j.some(V=>V.type==="groq")&&(console.log("🎙️ TTS: Adding Groq TTS from backend"),j.push({id:"backend-groq",type:"groq",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.openai&&!j.some(V=>V.type==="openai")&&(console.log("🎙️ TTS: Adding OpenAI TTS from backend"),j.push({id:"backend-openai",type:"openai",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.gemini&&!j.some(V=>V.type==="gemini")&&(console.log("🎙️ TTS: Adding Gemini TTS from backend"),j.push({id:"backend-gemini",type:"gemini",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.together&&!j.some(V=>V.type==="together")&&(console.log("🎙️ TTS: Adding Together TTS from backend"),j.push({id:"backend-together",type:"together",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),await i.initializeProviders(j,n.elevenlabsApiKey);const O=i.getAvailableProviders();console.log("🎙️ TTS: Available providers:",O);let $=n.currentProvider;O.includes($)||($=i.getDefaultProviderType()||"speakjs");const I=i.getProvider($),G=I?await I.getVoices():[];f(V=>({...V,currentProvider:$,providers:[],voices:G})),$!==n.currentProvider&&a(V=>({...V,currentProvider:$}))}catch(j){console.error("Failed to initialize TTS providers:",j)}})(),()=>{i.cleanup()}),[t.providers,n.elevenlabsApiKey,r]),_.useEffect(()=>{(async()=>{const j=i.getProvider(n.currentProvider);if(j)try{const O=await j.getVoices();f($=>({...$,voices:O,currentVoice:O.find(I=>I.id===$.currentVoice)?$.currentVoice:null}))}catch(O){console.error("Failed to load voices:",O),f($=>({...$,voices:[]}))}})()},[n.currentProvider]);const y=_.useCallback(async(W,j={})=>{if(!p.currentProvider)throw new Error("No TTS provider selected");console.log("TTSContext.speak() - Resetting isStoppingIntentionally flag (starting new speech)"),h.current=!1;let O=ZU(W);if(j.shouldSummarize||e$(O,p.autoSummarize))try{const z=t.providers.find(ie=>ie.enabled!==!1&&ie.apiKey);z&&(O=await s.generateSpeakableSummary(O,z))}catch(z){console.warn("Failed to generate summary, using original text:",z)}f(z=>({...z,isPlaying:!0,currentText:O})),l&&(clearTimeout(l),u(null));const $=setTimeout(()=>{console.log("TTSContext: Fallback timeout triggered - forcing isPlaying to false"),f(z=>({...z,isPlaying:!1,currentText:null})),u(null)},3e4);u($);const G=(z=>z==="browser"?["browser","speakjs"]:z==="speakjs"?["speakjs"]:[z])(p.currentProvider),V={voice:p.currentVoice||void 0,rate:p.rate,pitch:p.pitch,volume:p.volume,onStart:()=>{j.onStart?.()},onEnd:()=>{if(console.log("TTSContext speak onEnd callback - checking if intentional stop:",h.current),h.current){console.log("TTSContext speak onEnd - INTENTIONAL STOP, skipping onEnd callback and ensuring clean state"),l&&(clearTimeout(l),u(null)),f(z=>({...z,isPlaying:!1,currentText:null}));return}console.log("TTSContext speak onEnd callback - setting isPlaying to false"),l&&(clearTimeout(l),u(null)),f(z=>(console.log("TTSContext speak onEnd - prev state:",{isPlaying:z.isPlaying}),{...z,isPlaying:!1,currentText:null})),j.onEnd?.()},onError:z=>{f(ie=>({...ie,isPlaying:!1,currentText:null})),j.onError?.(z)},onBoundary:j.onBoundary,...j};let oe=null,U=null;for(const z of G){const ie=i.getProvider(z);if(ie)try{z!==p.currentProvider?console.warn(`TTS: ${p.currentProvider} failed, falling back to ${z}`):console.log(`TTS: Using primary provider ${z}`),await ie.speak(O,V),U=z,console.log(`TTS: Successfully used provider ${z}`);break}catch(H){console.warn(`TTS provider ${z} failed:`,H),oe=H;continue}}if(!U)throw f(z=>({...z,isPlaying:!1,currentText:null})),oe||new Error("All TTS providers failed")},[p,t.providers,i,s]),b=_.useCallback(()=>{console.log("TTSContext.stop() called - INTENTIONAL STOP"),h.current=!0,l&&(clearTimeout(l),u(null)),typeof window<"u"&&window.speechSynthesis&&(console.log("TTSContext.stop() - Stopping speechSynthesis"),window.speechSynthesis.cancel());const W=document.querySelectorAll("audio");console.log("TTSContext.stop() - Found",W.length,"audio elements"),W.forEach(j=>{j.paused||(console.log("TTSContext.stop() - Force stopping audio element"),j.pause(),j.currentTime=0,j.src&&j.src.startsWith("blob:")&&(URL.revokeObjectURL(j.src),j.src=""))}),f(j=>{console.log("TTSContext.stop() - stopping, prev state:",{isPlaying:j.isPlaying,currentProvider:j.currentProvider});const O=i.getProvider(j.currentProvider);if(O){console.log("TTSContext.stop() - calling provider.stop()");try{O.stop()}catch($){console.error("TTSContext.stop() - Error calling provider.stop():",$)}}else console.warn("TTSContext.stop() - no provider found for:",j.currentProvider);return{...j,isPlaying:!1,currentText:null}})},[i,l]),x=_.useCallback(()=>{f(W=>{const j=i.getProvider(W.currentProvider);return j&&j.pause&&j.pause(),W})},[i]),v=_.useCallback(()=>{f(W=>{const j=i.getProvider(W.currentProvider);return j&&j.resume&&j.resume(),W})},[i]),T=_.useCallback(async W=>{const j=i.getProvider(W);if(j){b();try{const O=await j.getVoices();f($=>({...$,currentProvider:W,voices:O,currentVoice:null})),a($=>({...$,currentProvider:W,currentVoice:null}))}catch(O){console.error("Failed to switch provider:",O)}}},[i,b,a]),k=_.useCallback(W=>{f(j=>({...j,currentVoice:W})),a(j=>({...j,currentVoice:W}))},[a]),C=_.useCallback(W=>{f(j=>({...j,rate:W})),a(j=>({...j,rate:W}))},[a]),A=_.useCallback(W=>{f(j=>({...j,pitch:W})),a(j=>({...j,pitch:W}))},[a]),P=_.useCallback(W=>{f(j=>({...j,volume:W})),a(j=>({...j,volume:W}))},[a]),M=_.useCallback(W=>{f(j=>({...j,autoSummarize:W})),a(j=>({...j,autoSummarize:W}))},[a]),L=_.useCallback(async W=>{f(O=>({...O,elevenlabsApiKey:W})),a(O=>({...O,elevenlabsApiKey:W})),await i.updateElevenLabsApiKey(W);const j=i.getAvailableProviders();console.log("Available TTS providers after ElevenLabs update:",j)},[a,i]),D=_.useCallback(()=>{const W=i.getAvailableProviders(),j=["llm","openai-tts","groq-tts","gemini-tts","speaches","elevenlabs","chatterbox","together-tts","browser","speakjs"];return W.sort((O,$)=>{const I=j.indexOf(O),G=j.indexOf($);return I===-1?1:G===-1?-1:I-G})},[i]),q=_.useCallback(async W=>{const j=i.getProvider(W);return j?await j.getVoices():[]},[i]),Q=_.useCallback(async(W,j)=>y(W,{shouldSummarize:j}),[y]),F=_.useCallback(async(W,j)=>y(W,{shouldSummarize:j}),[y]),K={state:p,speak:y,stop:b,pause:x,resume:v,setProvider:T,setVoice:k,setRate:C,setPitch:A,setVolume:P,setAutoSummarize:M,setElevenLabsApiKey:L,getAvailableProviders:D,getVoicesForProvider:q,speakResponse:Q,speakSnippet:F};return d.jsx(fL.Provider,{value:K,children:e})},Z1=()=>{const e=_.useContext(fL);if(!e)throw new Error("useTTS must be used within a TTSProvider");return e},mL=_.createContext(void 0),o$=()=>{const e=_.useContext(mL);if(!e)throw new Error("useFeatures must be used within a FeaturesProvider");return e},l$=({children:e})=>{const{getToken:t,isAuthenticated:r}=Di(),[n,a]=_.useState(null),[i,s]=_.useState(!0),[l,u]=_.useState(null),h=async()=>{try{s(!0),u(null);const f=await t();if(!f){a({chat:!1,imageGeneration:!1,imageEditing:!1,transcription:!1,textToSpeech:!1,embeddings:!1,webSearch:!0}),s(!1);return}const y=await kn(),b=await fetch(`${y}/billing`,{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},credentials:"include"});if(!b.ok)throw new Error(`HTTP ${b.status}: ${b.statusText}`);const x=await b.json();x.features?a(x.features):a({chat:!1,imageGeneration:!1,imageEditing:!1,transcription:!1,textToSpeech:!1,embeddings:!1,webSearch:!0}),s(!1)}catch(f){console.error("Failed to load features:",f),u(f.message||"Failed to load features"),a({chat:!1,imageGeneration:!1,imageEditing:!1,transcription:!1,textToSpeech:!1,embeddings:!1,webSearch:!0}),s(!1)}};_.useEffect(()=>{r?h():(a({chat:!1,imageGeneration:!1,imageEditing:!1,transcription:!1,textToSpeech:!1,embeddings:!1,webSearch:!0}),s(!1))},[r]);const p=async()=>{await h()};return d.jsx(mL.Provider,{value:{features:n,loading:i,error:l,refreshFeatures:p},children:e})};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u$=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),P2=e=>{const t=u$(e);return t.charAt(0).toUpperCase()+t.slice(1)},yL=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),d$=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...l},u)=>_.createElement("svg",{ref:u,...h$,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:yL("lucide",a),...!i&&!d$(l)&&{"aria-hidden":"true"},...l},[...s.map(([h,p])=>_.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=(e,t)=>{const r=_.forwardRef(({className:n,...a},i)=>_.createElement(p$,{ref:i,iconNode:t,className:yL(`lucide-${c$(P2(e))}`,`lucide-${e}`,n),...a}));return r.displayName=P2(e),r};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],f$=eS("brain",g$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],y$=eS("palette",m$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],x$=eS("rss",b$),v$=({className:e=""})=>{const t=Pl();return d.jsx("button",{onClick:()=>t("/image-editor"),className:e,title:"Image Editor",children:d.jsx(y$,{className:"w-6 h-6"})})},bL=({hideGitHub:e=!1})=>{const t=Pl();return d.jsxs("div",{className:"hidden md:flex fixed bottom-4 right-4 flex-col gap-2 z-50",style:{zIndex:9999},children:[d.jsx("button",{onClick:()=>{console.log("Navigating to /chat"),t("/chat")},className:"p-3 bg-green-600 hover:bg-green-500 dark:bg-green-700 dark:hover:bg-green-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Chat with AI",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),d.jsx("button",{onClick:()=>{console.log("Navigating to /swag"),t("/swag")},className:"p-3 bg-blue-600 hover:bg-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Swag - Save and manage snippets",children:d.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})})}),d.jsx("button",{onClick:()=>t("/"),className:"p-3 bg-cyan-600 hover:bg-cyan-500 dark:bg-cyan-700 dark:hover:bg-cyan-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Feed",children:d.jsx(x$,{className:"w-6 h-6"})}),d.jsx("button",{onClick:()=>t("/quiz"),className:"p-3 bg-indigo-600 hover:bg-indigo-500 dark:bg-indigo-700 dark:hover:bg-indigo-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Quiz Statistics",children:d.jsx(f$,{className:"w-6 h-6"})}),d.jsx(v$,{className:"p-3 bg-orange-600 hover:bg-orange-500 dark:bg-orange-700 dark:hover:bg-orange-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center"}),d.jsx("button",{onClick:()=>t("/settings"),className:"p-3 bg-purple-600 hover:bg-purple-500 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Settings",children:d.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("button",{onClick:()=>t("/help"),className:"p-3 bg-blue-600 hover:bg-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Help & Documentation",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("button",{onClick:()=>t("/privacy"),className:"p-3 bg-teal-600 hover:bg-teal-500 dark:bg-teal-700 dark:hover:bg-teal-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Privacy Policy",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),!e&&d.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-gray-800 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"View on GitHub",children:d.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})};let rv=!1;const w$=()=>{const{t:e,i18n:t}=wd(),{login:r}=Di(),n=_.useRef(null),a=_.useRef(!1),i=s=>{t.changeLanguage(s)};return _.useEffect(()=>{if(n.current&&!a.current&&!rv){let s=0;const l=50,u=()=>{if(typeof google<"u"&&google.accounts){const h="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";a.current=!0,rv=!0,console.log("LoginScreen: Initializing Google Sign-In (ONCE GLOBALLY)"),google.accounts.id.initialize({client_id:h,callback:p=>{p.credential&&(console.log("LoginScreen: Login successful"),r(p.credential))},auto_select:!1,cancel_on_tap_outside:!0,itp_support:!1,use_fedcm_for_prompt:!1});try{google.accounts.id.cancel(),console.log("LoginScreen: Cancelled any auto-prompts immediately after init")}catch{}google.accounts.id.renderButton(n.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",width:300}),console.log("LoginScreen: Google Sign-In button rendered (One Tap permanently disabled)")}else s<l?(s++,console.log(`LoginScreen: Google SDK not loaded yet, retry ${s}/${l}...`),setTimeout(u,100)):console.error("LoginScreen: Failed to load Google SDK after maximum retries")};u()}else rv&&console.log("LoginScreen: Google already initialized globally, skipping")},[]),d.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12 max-w-3xl w-full mx-4 relative overflow-y-auto max-h-[95vh]",children:[d.jsx("div",{className:"absolute top-4 right-4",children:d.jsxs("select",{value:t.language,onChange:s=>i(s.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsxs("option",{value:"en",children:["🇬🇧 ",e("languages.en")]}),d.jsxs("option",{value:"es",children:["🇪🇸 ",e("languages.es")]}),d.jsxs("option",{value:"fr",children:["🇫🇷 ",e("languages.fr")]}),d.jsxs("option",{value:"de",children:["🇩🇪 ",e("languages.de")]}),d.jsxs("option",{value:"nl",children:["🇳🇱 ",e("languages.nl")]}),d.jsxs("option",{value:"pt",children:["🇵🇹 ",e("languages.pt")]}),d.jsxs("option",{value:"ru",children:["🇷🇺 ",e("languages.ru")]}),d.jsxs("option",{value:"zh",children:["🇨🇳 ",e("languages.zh")]}),d.jsxs("option",{value:"ja",children:["🇯🇵 ",e("languages.ja")]}),d.jsxs("option",{value:"ar",children:["🇸🇦 ",e("languages.ar")]})]})}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:d.jsx("img",{src:"/agent.png",alt:e("auth.researchAgent"),className:"w-24 h-24 object-contain"})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e("auth.researchAgent")}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("auth.tagline")}),d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{ref:n,id:"login-screen-google-signin",className:"min-w-[300px] min-h-[44px]",style:{display:"flex",alignItems:"center",justifyContent:"center"}})}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("auth.secureAuth")}),d.jsx("div",{className:"mt-3",children:d.jsx(K1,{to:"/privacy",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-medium",children:"🔒 Privacy Policy"})})]}),d.jsxs("div",{className:"mb-8 text-left space-y-4 max-w-2xl mx-auto",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center",children:e("auth.whyChooseTitle")}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:e("auth.whyChooseIntro")}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e("auth.keyAdvantagesTitle")}),d.jsxs("div",{className:"space-y-2.5 text-sm",children:[d.jsxs("div",{children:[d.jsxs("strong",{className:"text-blue-600 dark:text-blue-400",children:[e("auth.webConnected"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.webConnectedDesc")]})]}),d.jsxs("div",{children:[d.jsxs("strong",{className:"text-purple-600 dark:text-purple-400",children:[e("auth.multiTool"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.multiToolDesc")]})]}),d.jsxs("div",{children:[d.jsxs("strong",{className:"text-green-600 dark:text-green-400",children:[e("auth.knowledgeBase"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.knowledgeBaseDesc")]})]}),d.jsxs("div",{children:[d.jsxs("strong",{className:"text-indigo-600 dark:text-indigo-400",children:[e("auth.advancedPlanning"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.advancedPlanningDesc")]})]}),d.jsxs("div",{children:[d.jsxs("strong",{className:"text-yellow-600 dark:text-yellow-400",children:[e("auth.costEffective"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.costEffectiveDesc")]})]}),d.jsxs("div",{children:[d.jsxs("strong",{className:"text-pink-600 dark:text-pink-400",children:[e("auth.transparency"),":"]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.transparencyDesc")]})]}),d.jsxs("div",{children:[d.jsx("strong",{className:"text-purple-600 dark:text-purple-400",children:"Learning Support:"}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:" Generate quizzes from any content and explore a personalized feed to reinforce learning"})]})]})]}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm italic border-t border-gray-200 dark:border-gray-700 pt-3",children:e("auth.perfectFor")})]})]}),d.jsx(bL,{hideGitHub:!0})]})},R2=()=>{const{user:e,logout:t}=Di(),{isAvailable:r,isConnected:n,deviceName:a,requestSession:i,endSession:s}=H0();if(!e)return null;const l=()=>{n?s():i()};return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:t,className:"btn-secondary px-3 py-2 flex items-center gap-2",title:`Sign out ${e.email}`,"aria-label":"Logout",children:[e.picture&&d.jsx("img",{src:e.picture,alt:e.name||e.email,className:"w-6 h-6 rounded-full",referrerPolicy:"no-referrer"}),d.jsx("span",{children:"Logout"})]}),r&&d.jsx("button",{onClick:l,className:`btn-secondary p-2 ${n?"bg-blue-500 text-white hover:bg-blue-600":""}`,title:n?`Casting to ${a}`:"Cast to TV","aria-label":n?`Casting to ${a}`:"Cast to TV",children:d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M1,18 v3 h3 c0,-1.66 -1.34,-3 -3,-3 z M1,14 v2 c2.76,0 5,2.24 5,5 h2 c0,-3.87 -3.13,-7 -7,-7 z M1,10 v2 c4.97,0 9,4.03 9,9 h2 c0,-6.08 -4.93,-11 -11,-11 z M21,3 H3 C1.9,3 1,3.9 1,5 v3 h2 V5 h18 v14 h-7 v2 h7 c1.1,0 2,-0.9 2,-2 V5 c0,-1.1 -0.9,-2 -2,-2 z"})})})]})};function ag(e,t,r=!0){const n=_.useRef(null),a=_.useCallback(s=>{s.key==="Escape"&&t()},[t]),i=_.useCallback(s=>{r&&n.current&&s.target===n.current&&t()},[t,r]);return _.useEffect(()=>{if(e)return document.addEventListener("keydown",a),document.addEventListener("mousedown",i),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",i)}},[e,a,i]),n}const S$=({isOpen:e,onClose:t})=>{const r=ag(e,t),{playlist:n,currentTrackIndex:a,isPlaying:i,playTrack:s,removeTrack:l,clearPlaylist:u,currentTrack:h,savedPlaylists:p,savePlaylistAs:f,loadPlaylist:y,deletePlaylist:b,previousTrack:x,nextTrack:v,togglePlayPause:T,shuffleMode:k,toggleShuffle:C,repeatMode:A,setRepeatMode:P,playbackRate:M,setPlaybackRate:L,volume:D,setVolume:q}=Dc(),{isAvailable:Q,deviceName:F,castVideo:K,sendVideoCommand:W,isCastingVideo:j}=H0(),{showSuccess:O,showError:$}=Ks(),I=_.useRef(null),[G,V]=_.useState(!1),[oe,U]=_.useState(!1),[z,ie]=_.useState(""),[H,ue]=_.useState("");_.useEffect(()=>{if(!e)return;const ye=_e=>{_e.key==="Escape"&&t()};return window.addEventListener("keydown",ye),()=>window.removeEventListener("keydown",ye)},[e,t]);const Z=_.useMemo(()=>{if(!H.trim())return n;const ye=H.toLowerCase();return n.filter(_e=>_e.title.toLowerCase().includes(ye)||_e.channel?.toLowerCase().includes(ye)||_e.description?.toLowerCase().includes(ye))},[n,H]),ae=T$(Z),pe=Z.length;return e?d.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-2 sm:p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:["🎵 YouTube Playlist",d.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400",children:H?d.jsxs(d.Fragment,{children:["(",pe," of ",n.length," ",n.length===1?"video":"videos",")"]}):d.jsxs(d.Fragment,{children:["(",n.length," ",n.length===1?"video":"videos",")"]})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[h&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:x,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Previous track",children:d.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),d.jsx("button",{onClick:T,className:"p-2 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors",title:i?"Pause":"Play",children:i?d.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):d.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 5v14l11-7z"})})}),d.jsx("button",{onClick:v,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Next track",children:d.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1",title:"Close (Esc)",children:d.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h&&d.jsxs("div",{className:"w-2/3 mx-auto flex-shrink-0 mt-4 relative",children:[d.jsx("div",{id:"dialog-player-container",className:"w-full relative"}),j&&d.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm z-10",children:d.jsxs("div",{className:"text-center p-6",children:[d.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"📺"}),d.jsxs("h3",{className:"text-white text-xl font-semibold mb-2",children:["Casting to ",F]}),d.jsx("p",{className:"text-gray-300 text-sm mb-4",children:h.title}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:()=>W(i?"pause":"play"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded transition-colors",children:i?"⏸ Pause":"▶ Play"}),d.jsx("button",{onClick:()=>W("stop"),className:"px-4 py-2 bg-red-500/80 hover:bg-red-600/80 text-white rounded transition-colors",children:"⏹ Stop Casting"})]})]})}),d.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 text-white",children:[d.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1",children:h.title}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-300",children:[h.channel&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"flex items-center gap-1",children:["👤 ",h.channel]}),d.jsx("span",{children:"•"})]}),h.duration&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"flex items-center gap-1",children:["⏱️ ",h.duration]}),d.jsx("span",{children:"•"})]}),d.jsxs("span",{className:"flex items-center gap-1",children:["📅 Added ",k$(h.addedAt)]})]}),h.description&&d.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-400 line-clamp-2",children:h.description})]})]}),d.jsx("div",{className:"p-3 sm:p-4",children:n.length===0?d.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[d.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),d.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Playlist is empty"}),d.jsx("p",{className:"text-sm mt-2",children:"Search for YouTube videos using the chat to add tracks"})]}):ae.map(([ye,_e])=>d.jsxs("div",{className:"mb-6",children:[d.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:["📅 ",ye,d.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",_e.length," ",_e.length===1?"video":"videos",")"]})]}),d.jsx("div",{className:"space-y-2",children:_e.map(de=>{const Ae=n.findIndex($e=>$e.id===de.id),Te=Ae===a;return d.jsxs("div",{onClick:()=>{Ae===a?T():s(Ae)},className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg transition-all cursor-pointer ${Te?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-500":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent"}`,children:[d.jsx("div",{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-colors",title:Te?i?"Pause":"Play":"Play this track",children:Te&&i?d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 5v14l11-7z"})})}),de.thumbnail&&d.jsx("img",{src:de.thumbnail,alt:"",className:"w-16 h-12 object-cover rounded flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:de.title}),de.channel&&d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:de.channel})]}),de.duration&&d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:de.duration}),d.jsx("button",{onClick:$e=>{$e.stopPropagation(),confirm(`Remove "${de.title}" from playlist?`)&&l(de.id)},className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},de.id)})})]},ye))})]}),n.length>0&&d.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[d.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:d.jsxs("div",{className:"flex-1 min-w-[200px] flex items-center gap-2",children:[d.jsx("input",{type:"text",value:H,onChange:ye=>ue(ye.target.value),placeholder:"🔍 Search playlist...",className:"flex-1 px-3 py-1.5 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),H&&d.jsx("button",{onClick:()=>ue(""),className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",title:"Clear search",children:"✕"})]})}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("button",{onClick:()=>C(),className:`px-3 py-1.5 text-xs sm:text-sm rounded transition-colors ${k?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:"Toggle shuffle",children:"🔀 Shuffle"}),d.jsxs("button",{onClick:()=>{const ye=["none","all","one"],_e=ye.indexOf(A),de=ye[(_e+1)%ye.length];P(de)},className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:`Repeat: ${A}`,children:[A==="none"&&"↻ Repeat: Off",A==="all"&&"🔁 Repeat: All",A==="one"&&"🔂 Repeat: One"]}),d.jsxs("select",{value:M,onChange:ye=>L(parseFloat(ye.target.value)),className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:"Playback speed",children:[d.jsx("option",{value:.25,children:"⚡ 0.25x"}),d.jsx("option",{value:.5,children:"⚡ 0.5x"}),d.jsx("option",{value:.75,children:"⚡ 0.75x"}),d.jsx("option",{value:1,children:"⚡ 1x"}),d.jsx("option",{value:1.25,children:"⚡ 1.25x"}),d.jsx("option",{value:1.5,children:"⚡ 1.5x"}),d.jsx("option",{value:1.75,children:"⚡ 1.75x"}),d.jsx("option",{value:2,children:"⚡ 2x"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"🔊"}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:D,onChange:ye=>q(parseFloat(ye.target.value)),className:"w-16 sm:w-24",title:"Volume"})]}),Q&&h&&d.jsx("button",{onClick:()=>{if(j)W("stop");else{const ye=I.current?.getCurrentTime()||0;K({videoId:h.videoId,url:h.url,title:h.title,channel:h.channel,thumbnail:h.thumbnail,duration:h.duration},ye)}},className:`p-2 rounded transition-colors ${j?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:j?`Stop casting to ${F}`:`Cast to ${F}`,children:d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[d.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",onClick:()=>V(!0),children:"Save"}),d.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-green-500 hover:bg-green-600 text-white rounded transition-colors",onClick:()=>U(!0),children:"Load"}),n.length>0&&d.jsx("button",{onClick:()=>{confirm("Clear entire playlist? This cannot be undone.")&&(u(),O("Playlist cleared successfully!"))},className:"px-3 py-1.5 text-xs sm:text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:"🗑️ Clear All"})]})]}),G&&d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Save Playlist"}),d.jsx("input",{type:"text",placeholder:"Enter playlist name...",value:z,onChange:ye=>ie(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:async()=>{if(z.trim())try{await f(z),ie(""),V(!1),O(`Playlist "${z}" saved successfully!`)}catch(ye){$("Failed to save playlist: "+ye.message)}},className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",disabled:!z.trim(),children:"Save"}),d.jsx("button",{onClick:()=>{ie(""),V(!1)},className:"flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"})]})]})}),oe&&d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Load Playlist"}),p.length===0?d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No saved playlists found."}):d.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:p.map(ye=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:ye.name}),d.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[ye.trackCount," tracks • ",new Date(ye.updatedAt).toLocaleDateString()]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:async()=>{try{await y(ye.id),U(!1),O(`Playlist "${ye.name}" loaded successfully!`)}catch(_e){$("Failed to load playlist: "+_e.message)}},className:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded",children:"Load"}),d.jsx("button",{onClick:async()=>{if(confirm(`Delete "${ye.name}"?`))try{await b(ye.id),O(`Playlist "${ye.name}" deleted!`)}catch(_e){$("Failed to delete playlist: "+_e.message)}},className:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded",children:"Delete"})]})]},ye.id))}),d.jsx("button",{onClick:()=>U(!1),className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Close"})]})})]})}):null};function T$(e){const t=new Map,r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()-1);const a=new Date(r);return a.setDate(a.getDate()-7),e.forEach(i=>{const s=new Date(i.addedAt);s.setHours(0,0,0,0);let l;s.getTime()===r.getTime()?l="Today":s.getTime()===n.getTime()?l="Yesterday":s>a?l="This Week":l=s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:s.getFullYear()!==r.getFullYear()?"numeric":void 0}),t.has(l)||t.set(l,[]),t.get(l).push(i)}),Array.from(t.entries())}function k$(e){const t=new Date(e),n=new Date().getTime()-t.getTime(),a=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return a<1?"just now":a<60?`${a}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function I2(e){if(!e||!isFinite(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`}const E$=()=>{const{playlist:e,isPlaying:t,currentTrack:r,togglePlayPause:n,nextTrack:a,previousTrack:i}=Dc(),{isLoading:s,currentTime:l,duration:u}=X3(),[h,p]=_.useState(!1);if(e.length===0)return null;const f=()=>{console.log("[PlaylistButton] Play/Pause clicked - current isPlaying:",t),n()},y=()=>{i()},b=()=>{a()};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-sm",children:[d.jsx("button",{onClick:y,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Previous track",children:d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"})})}),d.jsx("button",{onClick:f,className:`p-1.5 sm:p-2 transition-colors ${t?"bg-blue-500 hover:bg-blue-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,title:t?"Pause":"Play",children:t?d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 5v14l11-7z"})})}),d.jsx("button",{onClick:b,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Next track",children:d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z"})})}),d.jsx("div",{className:"hidden sm:flex flex-col items-start px-2 py-1 min-w-0 max-w-[150px] md:max-w-[250px]",children:s&&t?d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("svg",{className:"animate-spin h-3 w-3 text-gray-700 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate w-full",children:r?.title?r.title.slice(0,10):"No track"}),u>0&&d.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono",children:[I2(l)," / ",I2(u)]})]})}),d.jsxs("button",{onClick:x=>{x.stopPropagation(),console.log("[PlaylistButton] Opening dialog, playlist size:",e.length),p(!0)},className:"p-1.5 sm:p-2 bg-purple-500 hover:bg-purple-600 text-white transition-colors flex items-center gap-1",title:"View playlist",children:[d.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),d.jsx("span",{className:"hidden md:inline text-xs font-medium",children:e.length})]})]}),d.jsx(S$,{isOpen:h,onClose:()=>p(!1)})]})},C$=E$,xL=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,D2=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,M2=/\.(m3u8)($|\?)/i,_$=/\.(mpd)($|\?)/i,A$=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,N$=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,L$=/vimeo\.com\/(?!progressive_redirect).+/,P$=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,R$=/open\.spotify\.com\/(\w+)\/(\w+)/i,I$=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,D$=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,gp=(e,t)=>{if(Array.isArray(e)){for(const r of e)if(typeof r=="string"&&gp(r,t)||gp(r.src,t))return!0;return!1}return t(e)},Os={html:e=>gp(e,t=>xL.test(t)||D2.test(t)),hls:e=>gp(e,t=>M2.test(t)),dash:e=>gp(e,t=>_$.test(t)),mux:e=>A$.test(e),youtube:e=>N$.test(e),vimeo:e=>L$.test(e)&&!D2.test(e)&&!M2.test(e),wistia:e=>P$.test(e),spotify:e=>R$.test(e),twitch:e=>I$.test(e),tiktok:e=>D$.test(e)},M$=dr.forwardRef((e,t)=>{const r=xL.test(`${e.src}`)?"audio":"video";return dr.createElement(r,{...e,ref:t},e.children)});var O$=M$;const j$=[{key:"hls",name:"hls.js",canPlay:Os.hls,canEnablePIP:()=>!0,player:_.lazy(()=>Rt(()=>import("./react-BPxLd4cS.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:Os.dash,canEnablePIP:()=>!0,player:_.lazy(()=>Rt(()=>import("./react-Cn7WceYT.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:Os.mux,canEnablePIP:()=>!0,player:_.lazy(()=>Rt(()=>import("./index-DqyPSgXw.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:Os.youtube,player:_.lazy(()=>Rt(()=>import("./react-BfR1KgIu.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:Os.vimeo,player:_.lazy(()=>Rt(()=>import("./react-5B9R3dIG.js"),[]))},{key:"wistia",name:"Wistia",canPlay:Os.wistia,canEnablePIP:()=>!0,player:_.lazy(()=>Rt(()=>import("./react-CWnaq8ie.js"),[]))},{key:"spotify",name:"Spotify",canPlay:Os.spotify,canEnablePIP:()=>!1,player:_.lazy(()=>Rt(()=>import("./react-CNPYfGyc.js"),[]))},{key:"twitch",name:"Twitch",canPlay:Os.twitch,canEnablePIP:()=>!1,player:_.lazy(()=>Rt(()=>import("./react-eiyp0ak3.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:Os.tiktok,canEnablePIP:()=>!1,player:_.lazy(()=>Rt(()=>import("./react-DVX42Mxm.js"),[]))},{key:"html",name:"html",canPlay:Os.html,canEnablePIP:()=>!0,player:O$}];var vw=j$;const B$={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},vL=dr.forwardRef((e,t)=>{const{playing:r,pip:n}=e,a=e.activePlayer,i=_.useRef(null),s=_.useRef(!0);_.useEffect(()=>{var f,y;i.current&&(i.current.paused&&r===!0&&i.current.play(),!i.current.paused&&r===!1&&i.current.pause(),i.current.playbackRate=(f=e.playbackRate)!=null?f:1,i.current.volume=(y=e.volume)!=null?y:1)}),_.useEffect(()=>{var f,y,b,x,v;if(!(!i.current||!globalThis.document)){if(n&&!document.pictureInPictureElement)try{(y=(f=i.current).requestPictureInPicture)==null||y.call(f)}catch{}if(!n&&document.pictureInPictureElement)try{(x=(b=i.current).exitPictureInPicture)==null||x.call(b),(v=document.exitPictureInPicture)==null||v.call(document)}catch{}}},[n]);const l=f=>{var y,b;s.current=!0,(y=e.onReady)==null||y.call(e),(b=e.onLoadStart)==null||b.call(e,f)},u=f=>{var y,b;s.current&&(s.current=!1,(y=e.onStart)==null||y.call(e,f)),(b=e.onPlay)==null||b.call(e,f)};if(!a)return null;const h={},p=["onReady","onStart"];for(const f in e)f.startsWith("on")&&!p.includes(f)&&(h[f]=e[f]);return dr.createElement(a,{...h,style:e.style,className:e.className,slot:e.slot,ref:_.useCallback(f=>{i.current=f,typeof t=="function"?t(f):t!==null&&(t.current=f)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:l,onPlay:u},e.children)});vL.displayName="Player";var F$=vL;const z$=_.lazy(()=>Rt(()=>import("./Preview-ChDHxn7c.js"),[])),Rh=[],U$=(e,t)=>{const r=a=>{for(const i of[...Rh,...e])if(a&&i.canPlay(a))return i;return t||null},n=dr.forwardRef((a,i)=>{const s={...B$,...a},{src:l,slot:u,className:h,style:p,width:f,height:y,fallback:b,wrapper:x}=s,[v,T]=_.useState(!!s.light);_.useEffect(()=>{s.light?T(!0):T(!1)},[s.light]);const k=L=>{var D;T(!1),(D=s.onClickPreview)==null||D.call(s,L)},C=L=>{if(!L)return null;const{light:D,playIcon:q,previewTabIndex:Q,oEmbedUrl:F,previewAriaLabel:K}=s;return dr.createElement(z$,{src:L,light:D,playIcon:q,previewTabIndex:Q,previewAriaLabel:K,oEmbedUrl:F,onClickPreview:k})},A=L=>{var D,q;const Q=r(L);if(!Q)return null;const{style:F,width:K,height:W,wrapper:j}=s,O=(D=s.config)==null?void 0:D[Q.key];return dr.createElement(F$,{...s,ref:i,activePlayer:(q=Q.player)!=null?q:Q,slot:j?void 0:u,className:j?void 0:h,style:j?{display:"block",width:"100%",height:"100%"}:{display:"block",width:K,height:W,...F},config:O})},P=x??O2,M=b===!1?O2:_.Suspense;return dr.createElement(P,{slot:u,className:h,style:{width:f,height:y,...p}},dr.createElement(M,{fallback:b},v?C(l):A(l)))});return n.displayName="ReactPlayer",n.addCustomPlayer=a=>{Rh.push(a)},n.removeCustomPlayers=()=>{Rh.length=0},n.canPlay=a=>{if(a){for(const i of[...Rh,...e])if(i.canPlay(a))return!0}return!1},n.canEnablePIP=a=>{var i;if(a){for(const s of[...Rh,...e])if(s.canPlay(a)&&((i=s.canEnablePIP)!=null&&i.call(s)))return!0}return!1},n},O2=({children:e})=>e,$$=vw[vw.length-1];var q$=U$(vw,$$);const H$=()=>{const e=_.useRef(null),{currentTrack:t,isPlaying:r,nextTrack:n,play:a,pause:i}=Dc(),{registerPlayer:s,unregisterPlayer:l,setIsLoading:u,setCurrentTime:h,setDuration:p}=X3(),{isCastingVideo:f}=H0();_.useEffect(()=>(e.current&&(console.log("[BackgroundPlayer] Registering player"),s(e.current)),()=>{console.log("[BackgroundPlayer] Unregistering player"),l()}),[s,l]),_.useEffect(()=>{console.log("[BackgroundPlayer] Track or playing state changed - isPlaying:",r,"currentTrack:",t?.title),t&&r?u(!0):r||u(!1)},[t,r,u]);const[y,b]=dr.useState(!1),x=dr.useRef(0),v=dr.useRef(!1);if(dr.useEffect(()=>{const A=()=>{const M=document.getElementById("dialog-player-container"),L=y,D=!!M;L!==D&&(console.log("[BackgroundPlayer] Dialog opening, last tracked position:",x.current,"isPlaying:",r),v.current=r),b(D)};A();const P=new MutationObserver(()=>{setTimeout(A,10)});return P.observe(document.body,{childList:!0,subtree:!0}),()=>P.disconnect()},[y,r]),!t)return null;const T=d.jsx(q$,{ref:A=>{e.current=A,A&&(console.log("[BackgroundPlayer] ReactPlayer ref set, registering player, dialogOpen:",y),s(A))},src:t.url,playing:r&&!f,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},className:"react-player-hide-controls",onReady:()=>{console.log("[BackgroundPlayer] ReactPlayer ready, URL:",t.url,"isPlaying:",r,"dialogOpen:",y,"savedPosition:",x.current);const A=e.current;A&&A.duration&&p(A.duration)},onTimeUpdate:A=>{const P=A.currentTarget.currentTime,M=A.currentTarget.duration;P>0&&(x.current=P,h(P),console.log("[BackgroundPlayer] Position:",P.toFixed(2))),M>0&&p(M)},onPlay:()=>{console.log("[BackgroundPlayer] Playback started - syncing play state"),r||a(),setTimeout(()=>u(!1),500)},onStart:()=>{if(console.log("[BackgroundPlayer] Media started, savedPosition:",x.current),x.current>1){const A=x.current;console.log("[BackgroundPlayer] Will seek to saved position:",A),setTimeout(()=>{const P=e.current;P&&typeof P.currentTime=="number"?(console.log("[BackgroundPlayer] Setting currentTime from",P.currentTime,"to",A),P.currentTime=A,x.current=0):console.log("[BackgroundPlayer] ❌ Cannot seek - video element not ready")},300)}setTimeout(()=>u(!1),500)},onPause:()=>{console.log("[BackgroundPlayer] ⏸ PLAYBACK PAUSED - syncing pause state, isPlaying:",r),r&&i()},onEnded:n,onError:A=>{console.error("[BackgroundPlayer] Playback error:",A),u(!1)}},`player-${t.videoId}`);let k=document.getElementById("background-player-mount");k||(k=document.createElement("div"),k.id="background-player-mount",k.className="fixed bottom-0 left-0",k.style.cssText="width: 1px; height: 1px; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;",document.body.appendChild(k));const C=y?document.getElementById("dialog-player-container"):k;return C?A7.createPortal(d.jsx("div",{className:"w-full h-full relative bg-black",style:{aspectRatio:"16/9"},children:T}),C):null},ww="llm_proxy_search_cache",G$=7;function W$(){try{const e=localStorage.getItem(ww);if(!e)return{};const t=JSON.parse(e),r=Date.now(),n=G$*24*60*60*1e3,a={};for(const[i,s]of Object.entries(t)){const l=s;r-l.timestamp<n&&(a[i]=l)}return Object.keys(a).length!==Object.keys(t).length&&localStorage.setItem(ww,JSON.stringify(a)),a}catch(e){return console.error("Error reading search cache:",e),{}}}function V$(e,t){try{const r=W$(),n=e.toLowerCase().trim();r[n]={query:e.trim(),results:t,timestamp:Date.now()},localStorage.setItem(ww,JSON.stringify(r))}catch(r){console.error("Error saving search to cache:",r)}}function Y$(e,t){if(e!=="search_web")return null;try{const r=JSON.parse(t);return r.query&&Array.isArray(r.results)?(V$(r.query,r.results),{query:r.query,results:r.results}):null}catch(r){return console.error("Error extracting search result from tool call:",r),null}}var Ff={exports:{}};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var wL=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Um=wL.join(","),SL=typeof Element>"u",Sc=SL?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,$m=!SL&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Mp=function(t,r){var n;r===void 0&&(r=!0);var a=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),i=a===""||a==="true",s=i||r&&t&&Mp(t.parentNode);return s},Q$=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},TL=function(t,r,n){if(Mp(t))return[];var a=Array.prototype.slice.apply(t.querySelectorAll(Um));return r&&Sc.call(t,Um)&&a.unshift(t),a=a.filter(n),a},qm=function(t,r,n){for(var a=[],i=Array.from(t);i.length;){var s=i.shift();if(!Mp(s,!1))if(s.tagName==="SLOT"){var l=s.assignedElements(),u=l.length?l:s.children,h=qm(u,!0,n);n.flatten?a.push.apply(a,h):a.push({scopeParent:s,candidates:h})}else{var p=Sc.call(s,Um);p&&n.filter(s)&&(r||!t.includes(s))&&a.push(s);var f=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),y=!Mp(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(f&&y){var b=qm(f===!0?s.children:f.children,!0,n);n.flatten?a.push.apply(a,b):a.push({scopeParent:s,candidates:b})}else i.unshift.apply(i,s.children)}}return a},kL=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Sl=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Q$(t))&&!kL(t)?0:t.tabIndex},K$=function(t,r){var n=Sl(t);return n<0&&r&&!kL(t)?0:n},X$=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},EL=function(t){return t.tagName==="INPUT"},J$=function(t){return EL(t)&&t.type==="hidden"},Z$=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},eq=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},tq=function(t){if(!t.name)return!0;var r=t.form||$m(t),n=function(l){return r.querySelectorAll('input[type="radio"][name="'+l+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=n(window.CSS.escape(t.name));else try{a=n(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=eq(a,t.form);return!i||i===t},rq=function(t){return EL(t)&&t.type==="radio"},nq=function(t){return rq(t)&&!tq(t)},aq=function(t){var r,n=t&&$m(t),a=(r=n)===null||r===void 0?void 0:r.host,i=!1;if(n&&n!==t){var s,l,u;for(i=!!((s=a)!==null&&s!==void 0&&(l=s.ownerDocument)!==null&&l!==void 0&&l.contains(a)||t!=null&&(u=t.ownerDocument)!==null&&u!==void 0&&u.contains(t));!i&&a;){var h,p,f;n=$m(a),a=(h=n)===null||h===void 0?void 0:h.host,i=!!((p=a)!==null&&p!==void 0&&(f=p.ownerDocument)!==null&&f!==void 0&&f.contains(a))}}return i},j2=function(t){var r=t.getBoundingClientRect(),n=r.width,a=r.height;return n===0&&a===0},iq=function(t,r){var n=r.displayCheck,a=r.getShadowRoot;if(n==="full-native"&&"checkVisibility"in t){var i=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(t).visibility==="hidden")return!0;var s=Sc.call(t,"details>summary:first-of-type"),l=s?t.parentElement:t;if(Sc.call(l,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="full-native"||n==="legacy-full"){if(typeof a=="function"){for(var u=t;t;){var h=t.parentElement,p=$m(t);if(h&&!h.shadowRoot&&a(h)===!0)return j2(t);t.assignedSlot?t=t.assignedSlot:!h&&p!==t.ownerDocument?t=p.host:t=h}t=u}if(aq(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return j2(t);return!1},sq=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var a=r.children.item(n);if(a.tagName==="LEGEND")return Sc.call(r,"fieldset[disabled] *")?!0:!a.contains(t)}return!0}r=r.parentElement}return!1},Hm=function(t,r){return!(r.disabled||Mp(r)||J$(r)||iq(r,t)||Z$(r)||sq(r))},Sw=function(t,r){return!(nq(r)||Sl(r)<0||!Hm(t,r))},oq=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},CL=function(t){var r=[],n=[];return t.forEach(function(a,i){var s=!!a.scopeParent,l=s?a.scopeParent:a,u=K$(l,s),h=s?CL(a.candidates):l;u===0?s?r.push.apply(r,h):r.push(l):n.push({documentOrder:i,tabIndex:u,item:a,isScope:s,content:h})}),n.sort(X$).reduce(function(a,i){return i.isScope?a.push.apply(a,i.content):a.push(i.content),a},[]).concat(r)},_L=function(t,r){r=r||{};var n;return r.getShadowRoot?n=qm([t],r.includeContainer,{filter:Sw.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:oq}):n=TL(t,r.includeContainer,Sw.bind(null,r)),CL(n)},AL=function(t,r){r=r||{};var n;return r.getShadowRoot?n=qm([t],r.includeContainer,{filter:Hm.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=TL(t,r.includeContainer,Hm.bind(null,r)),n},ic=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Sc.call(t,Um)===!1?!1:Sw(r,t)},lq=wL.concat("iframe").join(","),mm=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return Sc.call(t,lq)===!1?!1:Hm(r,t)};const cq=Object.freeze(Object.defineProperty({__proto__:null,focusable:AL,getTabIndex:Sl,isFocusable:mm,isTabbable:ic,tabbable:_L},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Tw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function uq(e){if(Array.isArray(e))return Tw(e)}function dq(e,t,r){return(t=mq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function F2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){dq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gq(e){return uq(e)||hq(e)||yq(e)||pq()}function fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mq(e){var t=fq(e,"string");return typeof t=="symbol"?t:t+""}function yq(e,t){if(e){if(typeof e=="string")return Tw(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tw(e,t):void 0}}var z2={activateTrap:function(t,r){if(t.length>0){var n=t[t.length-1];n!==r&&n._setPausedState(!0)}var a=t.indexOf(r);a===-1||t.splice(a,1),t.push(r)},deactivateTrap:function(t,r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&!t[t.length-1]._isManuallyPaused()&&t[t.length-1]._setPausedState(!1)}},bq=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},xq=function(t){return t?.key==="Escape"||t?.key==="Esc"||t?.keyCode===27},fp=function(t){return t?.key==="Tab"||t?.keyCode===9},vq=function(t){return fp(t)&&!t.shiftKey},wq=function(t){return fp(t)&&t.shiftKey},U2=function(t){return setTimeout(t,0)},Ih=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return typeof t=="function"?t.apply(void 0,n):t},zf=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},Sq=[],Tq=function(t,r){var n=r?.document||document,a=r?.trapStack||Sq,i=F2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:vq,isKeyBackward:wq},r),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,u=function(j,O,$){return j&&j[O]!==void 0?j[O]:i[$||O]},h=function(j,O){var $=typeof O?.composedPath=="function"?O.composedPath():void 0;return s.containerGroups.findIndex(function(I){var G=I.container,V=I.tabbableNodes;return G.contains(j)||$?.includes(G)||V.find(function(oe){return oe===j})})},p=function(j){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=O.hasFallback,I=$===void 0?!1:$,G=O.params,V=G===void 0?[]:G,oe=i[j];if(typeof oe=="function"&&(oe=oe.apply(void 0,gq(V))),oe===!0&&(oe=void 0),!oe){if(oe===void 0||oe===!1)return oe;throw new Error("`".concat(j,"` was specified but was not a node, or did not return a node"))}var U=oe;if(typeof oe=="string"){try{U=n.querySelector(oe)}catch(z){throw new Error("`".concat(j,'` appears to be an invalid selector; error="').concat(z.message,'"'))}if(!U&&!I)throw new Error("`".concat(j,"` as selector refers to no known node"))}return U},f=function(){var j=p("initialFocus",{hasFallback:!0});if(j===!1)return!1;if(j===void 0||j&&!mm(j,i.tabbableOptions))if(h(n.activeElement)>=0)j=n.activeElement;else{var O=s.tabbableGroups[0],$=O&&O.firstTabbableNode;j=$||p("fallbackFocus")}else j===null&&(j=p("fallbackFocus"));if(!j)throw new Error("Your focus-trap needs to have at least one focusable element");return j},y=function(){if(s.containerGroups=s.containers.map(function(j){var O=_L(j,i.tabbableOptions),$=AL(j,i.tabbableOptions),I=O.length>0?O[0]:void 0,G=O.length>0?O[O.length-1]:void 0,V=$.find(function(z){return ic(z)}),oe=$.slice().reverse().find(function(z){return ic(z)}),U=!!O.find(function(z){return Sl(z)>0});return{container:j,tabbableNodes:O,focusableNodes:$,posTabIndexesFound:U,firstTabbableNode:I,lastTabbableNode:G,firstDomTabbableNode:V,lastDomTabbableNode:oe,nextTabbableNode:function(ie){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ue=O.indexOf(ie);return ue<0?H?$.slice($.indexOf(ie)+1).find(function(Z){return ic(Z)}):$.slice(0,$.indexOf(ie)).reverse().find(function(Z){return ic(Z)}):O[ue+(H?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(j){return j.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(j){return j.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},b=function(j){var O=j.activeElement;if(O)return O.shadowRoot&&O.shadowRoot.activeElement!==null?b(O.shadowRoot):O},x=function(j){if(j!==!1&&j!==b(document)){if(!j||!j.focus){x(f());return}j.focus({preventScroll:!!i.preventScroll}),s.mostRecentlyFocusedNode=j,bq(j)&&j.select()}},v=function(j){var O=p("setReturnFocus",{params:[j]});return O||(O===!1?!1:j)},T=function(j){var O=j.target,$=j.event,I=j.isBackward,G=I===void 0?!1:I;O=O||zf($),y();var V=null;if(s.tabbableGroups.length>0){var oe=h(O,$),U=oe>=0?s.containerGroups[oe]:void 0;if(oe<0)G?V=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:V=s.tabbableGroups[0].firstTabbableNode;else if(G){var z=s.tabbableGroups.findIndex(function(pe){var ye=pe.firstTabbableNode;return O===ye});if(z<0&&(U.container===O||mm(O,i.tabbableOptions)&&!ic(O,i.tabbableOptions)&&!U.nextTabbableNode(O,!1))&&(z=oe),z>=0){var ie=z===0?s.tabbableGroups.length-1:z-1,H=s.tabbableGroups[ie];V=Sl(O)>=0?H.lastTabbableNode:H.lastDomTabbableNode}else fp($)||(V=U.nextTabbableNode(O,!1))}else{var ue=s.tabbableGroups.findIndex(function(pe){var ye=pe.lastTabbableNode;return O===ye});if(ue<0&&(U.container===O||mm(O,i.tabbableOptions)&&!ic(O,i.tabbableOptions)&&!U.nextTabbableNode(O))&&(ue=oe),ue>=0){var Z=ue===s.tabbableGroups.length-1?0:ue+1,ae=s.tabbableGroups[Z];V=Sl(O)>=0?ae.firstTabbableNode:ae.firstDomTabbableNode}else fp($)||(V=U.nextTabbableNode(O))}}else V=p("fallbackFocus");return V},k=function(j){var O=zf(j);if(!(h(O,j)>=0)){if(Ih(i.clickOutsideDeactivates,j)){l.deactivate({returnFocus:i.returnFocusOnDeactivate});return}Ih(i.allowOutsideClick,j)||j.preventDefault()}},C=function(j){var O=zf(j),$=h(O,j)>=0;if($||O instanceof Document)$&&(s.mostRecentlyFocusedNode=O);else{j.stopImmediatePropagation();var I,G=!0;if(s.mostRecentlyFocusedNode)if(Sl(s.mostRecentlyFocusedNode)>0){var V=h(s.mostRecentlyFocusedNode),oe=s.containerGroups[V].tabbableNodes;if(oe.length>0){var U=oe.findIndex(function(z){return z===s.mostRecentlyFocusedNode});U>=0&&(i.isKeyForward(s.recentNavEvent)?U+1<oe.length&&(I=oe[U+1],G=!1):U-1>=0&&(I=oe[U-1],G=!1))}}else s.containerGroups.some(function(z){return z.tabbableNodes.some(function(ie){return Sl(ie)>0})})||(G=!1);else G=!1;G&&(I=T({target:s.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(s.recentNavEvent)})),x(I||s.mostRecentlyFocusedNode||f())}s.recentNavEvent=void 0},A=function(j){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=j;var $=T({event:j,isBackward:O});$&&(fp(j)&&j.preventDefault(),x($))},P=function(j){(i.isKeyForward(j)||i.isKeyBackward(j))&&A(j,i.isKeyBackward(j))},M=function(j){xq(j)&&Ih(i.escapeDeactivates,j)!==!1&&(j.preventDefault(),l.deactivate())},L=function(j){var O=zf(j);h(O,j)>=0||Ih(i.clickOutsideDeactivates,j)||Ih(i.allowOutsideClick,j)||(j.preventDefault(),j.stopImmediatePropagation())},D=function(){if(s.active)return z2.activateTrap(a,l),s.delayInitialFocusTimer=i.delayInitialFocus?U2(function(){x(f())}):x(f()),n.addEventListener("focusin",C,!0),n.addEventListener("mousedown",k,{capture:!0,passive:!1}),n.addEventListener("touchstart",k,{capture:!0,passive:!1}),n.addEventListener("click",L,{capture:!0,passive:!1}),n.addEventListener("keydown",P,{capture:!0,passive:!1}),n.addEventListener("keydown",M),l},q=function(){if(s.active)return n.removeEventListener("focusin",C,!0),n.removeEventListener("mousedown",k,!0),n.removeEventListener("touchstart",k,!0),n.removeEventListener("click",L,!0),n.removeEventListener("keydown",P,!0),n.removeEventListener("keydown",M),l},Q=function(j){var O=j.some(function($){var I=Array.from($.removedNodes);return I.some(function(G){return G===s.mostRecentlyFocusedNode})});O&&x(f())},F=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Q):void 0,K=function(){F&&(F.disconnect(),s.active&&!s.paused&&s.containers.map(function(j){F.observe(j,{subtree:!0,childList:!0})}))};return l={get active(){return s.active},get paused(){return s.paused},activate:function(j){if(s.active)return this;var O=u(j,"onActivate"),$=u(j,"onPostActivate"),I=u(j,"checkCanFocusTrap");I||y(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=b(n),O?.();var G=function(){I&&y(),D(),K(),$?.()};return I?(I(s.containers.concat()).then(G,G),this):(G(),this)},deactivate:function(j){if(!s.active)return this;var O=F2({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},j);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,q(),s.active=!1,s.paused=!1,K(),z2.deactivateTrap(a,l);var $=u(O,"onDeactivate"),I=u(O,"onPostDeactivate"),G=u(O,"checkCanReturnFocus"),V=u(O,"returnFocus","returnFocusOnDeactivate");$?.();var oe=function(){U2(function(){V&&x(v(s.nodeFocusedBeforeActivation)),I?.()})};return V&&G?(G(v(s.nodeFocusedBeforeActivation)).then(oe,oe),this):(oe(),this)},pause:function(j){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,j)):this},unpause:function(j){return s.active?(s.manuallyPaused=!1,a[a.length-1]!==this?this:this._setPausedState(!1,j)):this},updateContainerElements:function(j){var O=[].concat(j).filter(Boolean);return s.containers=O.map(function($){return typeof $=="string"?n.querySelector($):$}),s.active&&y(),K(),this}},Object.defineProperties(l,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(j,O){if(s.paused===j)return this;if(s.paused=j,j){var $=u(O,"onPause"),I=u(O,"onPostPause");$?.(),q(),K(),I?.()}else{var G=u(O,"onUnpause"),V=u(O,"onPostUnpause");G?.(),y(),D(),K(),V?.()}return this}}}),l.updateContainerElements(t),l};const kq=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:Tq},Symbol.toStringTag,{value:"Module"})),Eq=p3(kq),Cq=p3(cq);var $2;function _q(){if($2)return Ff.exports;$2=1;function e(D){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},e(D)}var t,r;function n(D,q){if(!(D instanceof q))throw new TypeError("Cannot call a class as a function")}function a(D,q){for(var Q=0;Q<q.length;Q++){var F=q[Q];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,x(F.key),F)}}function i(D,q,Q){return q&&a(D.prototype,q),Object.defineProperty(D,"prototype",{writable:!1}),D}function s(D,q,Q){return q=p(q),l(D,h()?Reflect.construct(q,Q||[],p(D).constructor):q.apply(D,Q))}function l(D,q){if(q&&(e(q)=="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(D)}function u(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function h(){try{var D=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h=function(){return!!D})()}function p(D){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)},p(D)}function f(D,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(q&&q.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),q&&y(D,q)}function y(D,q){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Q,F){return Q.__proto__=F,Q},y(D,q)}function b(D,q,Q){return(q=x(q))in D?Object.defineProperty(D,q,{value:Q,enumerable:!0,configurable:!0,writable:!0}):D[q]=Q,D}function x(D){var q=v(D,"string");return e(q)=="symbol"?q:q+""}function v(D,q){if(e(D)!="object"||!D)return D;var Q=D[Symbol.toPrimitive];if(Q!==void 0){var F=Q.call(D,q);if(e(F)!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(D)}var T=eg(),k=Eq,C=k.createFocusTrap,A=Cq,P=A.isFocusable,M=parseInt((t=(r=/^(\d+)\./.exec(T.version))===null||r===void 0?void 0:r[1])!==null&&t!==void 0?t:0,10),L=(function(D){function q(Q){var F;n(this,q),F=s(this,q,[Q]),b(F,"getNodeForOption",function(j){var O,$=(O=this.internalOptions[j])!==null&&O!==void 0?O:this.originalOptions[j];if(typeof $=="function"){for(var I=arguments.length,G=new Array(I>1?I-1:0),V=1;V<I;V++)G[V-1]=arguments[V];$=$.apply(void 0,G)}if($===!0&&($=void 0),!$){if($===void 0||$===!1)return $;throw new Error("`".concat(j,"` was specified but was not a node, or did not return a node"))}var oe=$;if(typeof $=="string"){var U;if(oe=(U=this.getDocument())===null||U===void 0?void 0:U.querySelector($),!oe)throw new Error("`".concat(j,"` as selector refers to no known node"))}return oe}),F.handleDeactivate=F.handleDeactivate.bind(F),F.handlePostDeactivate=F.handlePostDeactivate.bind(F),F.handleClickOutsideDeactivates=F.handleClickOutsideDeactivates.bind(F),F.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:F.handleDeactivate,onPostDeactivate:F.handlePostDeactivate,clickOutsideDeactivates:F.handleClickOutsideDeactivates},F.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var K=Q.focusTrapOptions;for(var W in K)if(Object.prototype.hasOwnProperty.call(K,W)){if(W==="returnFocusOnDeactivate"||W==="onDeactivate"||W==="onPostDeactivate"||W==="checkCanReturnFocus"||W==="clickOutsideDeactivates"){F.originalOptions[W]=K[W];continue}F.internalOptions[W]=K[W]}return F.outsideClick=null,F.focusTrapElements=Q.containerElements||[],F.updatePreviousElement(),F}return f(q,D),i(q,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var F=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return F||(F===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var F=this.getDocument();F&&(this.previouslyFocusedElement=F.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(F){var K=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,F):this.originalOptions.clickOutsideDeactivates;return K&&(this.outsideClick={target:F.target,allowDeactivation:K}),K}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var F=this,K=function(){var j=F.getReturnFocusNode(),O=!!(F.originalOptions.returnFocusOnDeactivate&&j!==null&&j!==void 0&&j.focus&&(!F.outsideClick||F.outsideClick.allowDeactivation&&!P(F.outsideClick.target,F.internalOptions.tabbableOptions))),$=F.internalOptions.preventScroll,I=$===void 0?!1:$;O&&j.focus({preventScroll:I}),F.originalOptions.onPostDeactivate&&F.originalOptions.onPostDeactivate.call(null),F.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(K,K):K()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var F=this.focusTrapElements.some(Boolean);F&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(F){if(this.focusTrap){F.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var K=!F.active&&this.props.active,W=F.active&&!this.props.active,j=!F.paused&&this.props.paused,O=F.paused&&!this.props.paused;if(K&&(this.updatePreviousElement(),this.focusTrap.activate()),W){this.deactivateTrap();return}j&&this.focusTrap.pause(),O&&this.focusTrap.unpause()}else F.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var F=this,K=this.props.children?T.Children.only(this.props.children):void 0;if(K){if(K.type&&K.type===T.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var W=function($){var I=F.props.containerElements;K&&(M>=19?typeof K.props.ref=="function"?K.props.ref($):K.props.ref&&(K.props.ref.current=$):typeof K.ref=="function"?K.ref($):K.ref&&(K.ref.current=$)),F.focusTrapElements=I||[$]},j=T.cloneElement(K,{ref:W});return j}return null}}])})(T.Component);return L.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:C},Ff.exports=L,Ff.exports.FocusTrap=L,Ff.exports}var kw=_q();const Aq=({onClose:e})=>d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:"LLM Transparency Info"}),d.jsx("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",onClick:e,children:"×"})]});function tS(e,t=!0){if(e===null)return"N/A";const r=t?"$":"";return e<1e-4?`${r}${e.toFixed(6)}`:e<.01?`${r}${e.toFixed(4)}`:`${r}${e.toFixed(4)}`}const Nq=({call:e})=>{function t(n){switch(n.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:"🛡️"};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:"🛡️"};case"image_generation":return{label:"Image Generation",color:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-400",text:"text-pink-700 dark:text-pink-300",icon:"🖼️"};case"planning":return{label:"Planning",color:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-400",text:"text-blue-700 dark:text-blue-300",icon:"📝"};case"embedding":return{label:"Embedding",color:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-400",text:"text-indigo-700 dark:text-indigo-300",icon:"🧩"};default:return{label:"Chat",color:"bg-gray-100 dark:bg-gray-900/30",border:"border-gray-400",text:"text-gray-700 dark:text-gray-300",icon:"💬"}}}const r=t(e);return d.jsxs("div",{className:`border rounded-lg p-4 mb-2 ${r.color} ${r.border||""}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:`font-semibold ${r.text}`,children:[r.icon," ",r.label]}),d.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.provider," • ",e.model]})]}),d.jsx("div",{className:"mb-2",children:d.jsxs("span",{className:"font-mono text-sm",children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]})}),d.jsxs("div",{className:"mb-2",children:[e.cost!==void 0&&d.jsxs("span",{className:"font-semibold text-pink-700 dark:text-pink-300",children:["💰 ",tS(e.cost)]}),e.durationMs&&d.jsxs("span",{className:"ml-2",children:["⏱️ ",(e.durationMs/1e3).toFixed(2),"s"]}),e.success!==void 0&&d.jsx("span",{className:e.success?"text-green-600 dark:text-green-400 ml-2":"text-red-600 dark:text-red-400 ml-2",children:e.success?"✅ Success":"❌ Failed"})]})]})},Lq=({totalTokens:e,totalPromptTokens:t,totalCompletionTokens:r,totalActualCost:n,totalPaidEquivalent:a,hasPricing:i,hasFreeModels:s,onClose:l})=>d.jsxs("div",{className:"mt-6 border-t pt-4 text-sm text-gray-700 dark:text-gray-300",children:[d.jsxs("div",{className:"mb-2",children:["Total tokens: ",d.jsx("span",{className:"font-mono font-semibold",children:e})]}),d.jsxs("div",{className:"mb-2",children:["Prompt tokens: ",d.jsx("span",{className:"font-mono",children:t})," | Completion tokens: ",d.jsx("span",{className:"font-mono",children:r})]}),d.jsxs("div",{className:"mb-2",children:["Actual cost: ",d.jsx("span",{className:"font-mono font-semibold",children:n})]}),i&&d.jsxs("div",{className:"mb-2",children:["Paid equivalent: ",d.jsx("span",{className:"font-mono",children:a})]}),s&&d.jsx("div",{className:"mb-2 text-green-600 dark:text-green-400",children:"Some calls used free tier models."}),d.jsx("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors mt-4",onClick:l,children:"Close"})]}),Pq=({apiCalls:e,onClose:t})=>d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 dark:bg-opacity-60",children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl p-6 relative",children:[d.jsx(Aq,{onClose:t}),d.jsx("div",{className:"space-y-4",children:e.length===0?d.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((h,p)=>d.jsx(Nq,{call:h},p))}),d.jsx(Lq,{totalTokens:0,totalPromptTokens:0,totalCompletionTokens:0,totalActualCost:0,totalPaidEquivalent:0,hasPricing:!1,hasFreeModels:!1,onClose:t})]})}),Rq={groq:/^gsk_[a-zA-Z0-9]{32,}$/,openai:/^sk-[a-zA-Z0-9_-]{20,}$/,gemini:/^AIza[a-zA-Z0-9_-]{35}$/,together:/^[a-zA-Z0-9_-]{32,}$/,atlascloud:/^apikey-[a-f0-9]{32}$/,"openai-compatible":/.+/,replicate:/^r8_[a-zA-Z0-9]{40}$/,speaches:/.+/,anthropic:/^sk-ant-[a-zA-Z0-9_-]{20,}$/};function Iq(e,t){return!e||e.trim()===""?{valid:!1,error:"API key is required"}:Rq[t].test(e)?{valid:!0}:{valid:!1,error:{groq:'Groq API key must start with "gsk_" followed by at least 32 characters',openai:'OpenAI API key must start with "sk-" followed by at least 20 characters',gemini:'Gemini API key must start with "AIza" followed by 35 characters',together:"Together AI API key must be at least 32 characters",atlascloud:'Atlas Cloud API key must start with "apikey-" followed by 32 hex characters',"openai-compatible":"API key cannot be empty",replicate:'Replicate API key must start with "r8_" followed by 40 characters',speaches:"API key cannot be empty",anthropic:'Anthropic API key must start with "sk-ant-" followed by at least 20 characters'}[t]}}function Dq(e){if(!e||e.trim()==="")return{valid:!1,error:"Endpoint URL is required"};try{return new URL(e).protocol!=="https:"?{valid:!1,error:"Endpoint must use HTTPS protocol"}:{valid:!0}}catch{return{valid:!1,error:"Invalid URL format"}}}function Mq(e){return!e||e.trim()===""?{valid:!1,error:"Model name is required for OpenAI-compatible providers"}:{valid:!0}}function Oq(e){return e!==void 0&&(isNaN(e)||e<0)?{valid:!1,error:"Rate limit must be a positive number or empty"}:{valid:!0}}function q2(e){const t={};if(e.type||(t.type="Provider type is required"),e.type){const r=Iq(e.apiKey||"",e.type);r.valid||(t.apiKey=r.error)}if(e.type==="openai-compatible"){const r=Dq(e.apiEndpoint||"");r.valid||(t.apiEndpoint=r.error);const n=Mq(e.modelName);n.valid||(t.modelName=n.error);const a=Oq(e.rateLimitTPM);a.valid||(t.rateLimitTPM=a.error)}return{valid:Object.keys(t).length===0,errors:t}}function cye(e){if(!e||e.length<12)return"••••••••••••••";const t=e.slice(0,4),r=e.slice(-4),n=Math.max(8,e.length-8);return`${t}${"•".repeat(n)}${r}`}function H2(e,t){return e.type===t.type&&e.apiKey===t.apiKey}function jq(){const{settings:e,setSettings:t}=Xs(),r=_.useCallback(s=>{const l=q2(s);if(!l.valid)return{success:!1,error:Object.values(l.errors)[0]};const u={...s,id:crypto.randomUUID(),enabled:!0};return e.providers.find(p=>H2(p,u))?{success:!1,error:"A provider with this type and API key already exists"}:(t({...e,providers:[...e.providers,u]}),{success:!0})},[e,t]),n=_.useCallback((s,l)=>{const u=e.providers.find(f=>f.id===s);if(!u)return{success:!1,error:"Provider not found"};const h={...u,...l};if(!("enabled"in l&&Object.keys(l).length===1)){const f=q2(h);if(!f.valid)return{success:!1,error:Object.values(f.errors)[0]};if(e.providers.find(b=>b.id!==s&&H2(b,h)))return{success:!1,error:"A provider with this type and API key already exists"}}const p=e.providers.map(f=>f.id===s?h:f);return t({...e,providers:p}),{success:!0}},[e,t]),a=_.useCallback(s=>{t({...e,providers:e.providers.filter(l=>l.id!==s)})},[e,t]),i=_.useCallback(s=>e.providers.find(l=>l.id===s),[e.providers]);return{providers:e.providers,addProvider:r,updateProvider:n,deleteProvider:a,getProvider:i}}const NL=({isOpen:e,onClose:t,onTranscriptionComplete:r,accessToken:n,apiEndpoint:a})=>{const i=ag(e,t,!1),{providers:s}=jq(),[l,u]=_.useState(!1),[h,p]=_.useState(0),[f,y]=_.useState(""),[b,x]=_.useState(null),[v,T]=_.useState(!1),k=_.useRef(null),C=_.useRef(null),A=_.useRef(null),P=_.useRef([]),M=_.useRef(null),L=_.useRef(null),D=_.useRef(null),q=_.useCallback(()=>{M.current&&cancelAnimationFrame(M.current),L.current&&clearTimeout(L.current),k.current&&k.current.state!=="inactive"&&k.current.stop(),D.current&&D.current.getTracks().forEach(O=>O.stop()),C.current&&C.current.state!=="closed"&&C.current.close().catch(O=>{console.warn("Failed to close AudioContext:",O)}),u(!1),p(0)},[]),Q=async()=>{try{if(x(null),P.current=[],!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Your browser does not support audio recording");if((await navigator.mediaDevices.enumerateDevices()).filter(z=>z.kind==="audioinput").length===0)throw new Error("No microphone found. Please connect a microphone and try again.");const I=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});D.current=I;const G=new(window.AudioContext||window.webkitAudioContext);C.current=G;const V=G.createMediaStreamSource(I),oe=G.createAnalyser();oe.fftSize=256,A.current=oe,V.connect(oe);const U=new MediaRecorder(I);k.current=U,U.ondataavailable=z=>{z.data.size>0&&P.current.push(z.data)},U.onstop=async()=>{const z=new Blob(P.current,{type:"audio/webm"});await j(z)},U.start(),u(!0),F(),K()}catch(O){console.error("Error starting recording:",O);let $="Failed to access microphone. ";O.name==="NotFoundError"||O.message.includes("No microphone")?$="No microphone found. Please connect a microphone and try again.":O.name==="NotAllowedError"||O.name==="PermissionDeniedError"?$="Microphone permission denied. Please allow microphone access in your browser settings.":O.name==="NotSupportedError"?$="Your browser does not support audio recording. Please use Chrome, Firefox, or Edge.":O.message?$=O.message:$+="Please check permissions and try again.",x($)}},F=()=>{if(!A.current||!l)return;const O=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(O);const $=O.reduce((G,V)=>G+V)/O.length,I=Math.min($/128,1);p(I),M.current=requestAnimationFrame(F)},K=()=>{if(!A.current)return;const O=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(O);const $=O.reduce((V,oe)=>V+oe)/O.length,I=10,G=2e3;$<I?L.current||(L.current=setTimeout(()=>{console.log("Silence detected, stopping recording..."),W()},G)):L.current&&(clearTimeout(L.current),L.current=null),l&&setTimeout(K,100)},W=()=>{q()},j=async O=>{if(!n){x("Not authenticated. Please sign in.");return}T(!0);const $=`web-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("🎙️ Generated request ID for voice transcription:",$);const I=s.find(ue=>ue.type==="speaches"&&ue.enabled!==!1),G=s.find(ue=>ue.type==="groq"&&ue.enabled!==!1),V=s.find(ue=>ue.type==="openai"&&ue.enabled!==!1),oe=I?.apiKey||G?.apiKey||V?.apiKey||null,U=I?"speaches":G?"groq":V?"openai":null;I?console.log("🎤 Transcription provider: 🏠 Speaches (LOCAL, FREE)"):console.log("🎤 Transcription provider:",U,"hasKey:",!!oe);const z=new FormData;z.append("audio",O,"recording.webm"),oe&&U&&(z.append("apiKey",oe),z.append("provider",U));const ie=3;let H=null;try{const Z=`${(await kn()).replace("/openai/v1","")}/transcribe`;console.log("Transcribing audio (resolved):",{url:Z,blobSize:O.size,blobType:O.type,hasToken:!!n,requestId:$,provider:U,hasApiKey:!!oe});for(let ae=1;ae<=ie;ae++)try{const pe=new AbortController,ye=setTimeout(()=>pe.abort(),2e4),_e=await fetch(Z,{method:"POST",headers:{Authorization:`Bearer ${n}`,"X-Request-Id":$},body:z,signal:pe.signal});clearTimeout(ye);const de=await _e.json().catch(()=>({}));if(!_e.ok){const $e=de?.error||_e.statusText||`HTTP ${_e.status}`;throw console.error(`Transcription failed (attempt ${ae}):`,$e,de),new Error($e)}const Ae=de.text||de.transcription||"",Te=de.llmApiCall||null;y(Ae),setTimeout(()=>{r(Ae,$,Te),t()},500);return}catch(pe){H=pe;const ye=pe instanceof TypeError&&pe.message.includes("Failed to fetch"),_e=pe.name==="AbortError";if(console.warn(`Transcription attempt ${ae} failed:`,pe?.message||pe),ae<ie&&(ye||_e)){const de=500*Math.pow(2,ae-1);console.log(`Retrying transcription in ${de}ms...`),await new Promise(Ae=>setTimeout(Ae,de));continue}throw pe}throw H||new Error("Transcription failed")}catch(ue){console.error("Transcription error (final):",ue);let Z="Transcription failed";ue instanceof TypeError&&ue.message.includes("Failed to fetch")?Z="Network error: Could not reach transcription service. Check your internet connection and that the backend is running (run `make dev`).":ue.name==="AbortError"?Z="Transcription request timed out. Please try again.":ue instanceof Error&&(Z=ue.message),x(Z);return}finally{T(!1)}};return _.useEffect(()=>(e||q(),q),[e,q]),_.useEffect(()=>{e&&(y(""),x(null),!l&&!v&&Q())},[e]),e?d.jsx("div",{ref:i,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md p-8",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:v?"🔄 Processing...":l?"🎤 Listening...":"🎙️ Voice Input"}),d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v?"Transcribing your audio...":l?"Speak now. Will auto-stop after 2 seconds of silence.":"Click start to begin recording"})]}),d.jsx("div",{className:"mb-8",children:d.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 flex items-end justify-center gap-1 p-4",children:[...Array(20)].map((O,$)=>{const I=Math.max(.1,h*(1-Math.abs($-10)/10)*(.8+Math.random()*.4));return d.jsx("div",{className:`flex-1 rounded-t transition-all duration-100 ${l?h>.3?"bg-gradient-to-t from-green-500 to-green-300":"bg-gradient-to-t from-blue-500 to-blue-300":"bg-gray-400"}`,style:{height:`${I*100}%`,opacity:l?1:.3}},$)})}),l&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${h>.3?"bg-green-500/20 animate-pulse":"bg-blue-500/20"}`,children:d.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),d.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})})]})}),f&&d.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:d.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[d.jsx("strong",{children:"Transcription:"})," ",f]})}),b&&d.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:d.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[d.jsx("strong",{children:"Error:"})," ",b]})}),d.jsxs("div",{className:"flex gap-3",children:[l&&!v&&d.jsxs("button",{onClick:W,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),"Stop"]}),d.jsx("button",{onClick:t,disabled:v,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Processing...":"Cancel"})]}),d.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 dark:text-gray-400",children:["Press ",d.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to cancel"]})]})}):null},Bq=({isOpen:e,onClose:t,onTransferToChat:r})=>{const{t:n}=wd(),a=ag(e,t),{getToken:i,isAuthenticated:s,accessToken:l}=Di(),{settings:u}=Xs(),{showError:h,showSuccess:p}=Ks(),[f,y]=Pi("planning_query",""),[b,x]=Pi("planning_result",null),[v,T]=_.useState(!1),[k,C]=_.useState(""),[A,P]=_.useState(!1),[M,L]=_.useState([]),[D,q]=_.useState(""),[Q,F]=_.useState(null),[K,W]=_.useState(null),[j,O]=_.useState(!1),[$,I]=_.useState(!1),[G,V]=_.useState("query"),[oe,U]=_.useState(0),z=_.useRef(null),ie=_.useRef(null),H=_.useRef(null),[ue,Z]=Pi("planning_dialog_generated_system_prompt",""),[ae,pe]=Pi("planning_dialog_generated_user_query",""),[ye,_e]=_.useState(""),[de,Ae]=_.useState(""),[Te,$e]=_.useState(""),ot=re=>{re&&(re.style.height="auto",re.style.height=re.scrollHeight+"px")};_.useEffect(()=>{ot(z.current)},[f]),_.useEffect(()=>{ot(ie.current)},[ue]),_.useEffect(()=>{ot(H.current)},[ae]),_.useEffect(()=>{kn().then(re=>{q(re),console.log("🔗 API endpoint for planning voice input:",re)})},[]),_.useEffect(()=>{A&&(Dp().then(re=>{L(re)}),Tt())},[A]);const Tt=async()=>{const re=await DU();F(re)};_.useEffect(()=>{b&&b.queryType==="guidance"?(f&&_e(f),ue&&Ae(ue),ae&&$e(ae),Z(""),pe("")):b&&b.queryType!=="guidance"&&ye&&(de&&Z(de),Te&&pe(Te),_e(""),Ae(""),$e(""))},[b]);const je=async()=>{if(!s){console.error("User not authenticated"),h(n("planning.signInRequired")),x({error:n("planning.authRequired")});return}if(!f.trim()){h(n("planning.enterResearchQuestion"));return}if(!v){T(!0),x(null),C(n("planning.initializing"));try{const re=await i();if(!re){console.error("No valid token available"),h(n("planning.authExpired")),x({error:n("planning.authExpired")}),T(!1);return}console.log("🔐 Planning with token:",{tokenLength:re.length,tokenPrefix:re.substring(0,20)+"...",isAuthenticated:s,hasProviders:u.providers.length});const we=u.providers.filter(Ze=>Ze.enabled!==!1);console.log(`📋 Enabled providers: ${we.length} (server may have additional credentials)`),await mw(f,re,we,void 0,(Ze,et)=>{switch(console.log("Planning SSE event:",Ze,et),Ze){case"status":console.log("Status:",et.message),C(et.message||"Processing...");break;case"result":x(et),et.enhancedSystemPrompt&&Z(et.enhancedSystemPrompt),et.enhancedUserPrompt&&pe(et.enhancedUserPrompt);break;case"llm_response":W(et),console.log("Captured LLM transparency info:",et);break;case"error":const pt=et.error||"Unknown error",Ft=et.provider&&et.model?` (Provider: ${et.provider}, Model: ${et.model})`:"",Rr=`${pt}${Ft}`;let hr="";pt.includes("Invalid API Key")||pt.includes("401")?hr=`

💡 Tip: Check your API key in Settings. Make sure it's valid and hasn't expired.`:(et.isRateLimit||pt.includes("rate limit"))&&(hr=`

💡 Tip: You've hit the rate limit. Try again in a few moments or use a different provider.`),x({error:Rr+hr}),h(`Planning error: ${Rr}${hr}`);break;case"llm_error":console.error("LLM Error:",et);const cr=et.error||"LLM request failed",Xt=et.provider&&et.modelName?` (${et.provider}:${et.modelName})`:"";h(`LLM Error${Xt}: ${cr}`);break}},()=>{console.log("Planning stream complete"),T(!1),C("")},Ze=>{console.error("Planning stream error:",Ze),x({error:Ze.message}),h(`Planning failed: ${Ze.message}`),T(!1),C("")},{language:u.language||"en"})}catch(re){console.error("Planning error:",re);const we=re instanceof Error?re.message:"Unknown error";x({error:we}),h(`Planning error: ${we}`),T(!1),C("")}}},_t=()=>{if(!ae||!r)return;const re={prompt:ae,persona:ue||"",planningQuery:f,generatedSystemPrompt:ue,generatedUserQuery:ae};console.log("🎯 PlanningDialog - Creating transfer data:",re);const we=JSON.stringify(re);console.log("🎯 PlanningDialog - JSON string length:",we.length),r(we),t()},Pt=()=>{const re={query:f,result:b,generatedSystemPrompt:ue,generatedUserPrompt:ae,llmInfo:K,timestamp:new Date().toISOString()},we=`=== Planning Debug Info for Copilot ===
Generated at: ${re.timestamp}

--- User Query ---
${re.query||"(none)"}

--- Planning Result (Full Response) ---
${JSON.stringify(re.result,null,2)}

--- Generated System Prompt ---
${re.generatedSystemPrompt||"(none)"}

--- Generated User Query ---
${re.generatedUserPrompt||"(none)"}

--- LLM Request/Response Details ---
${JSON.stringify(re.llmInfo,null,2)}

=== End Debug Info ===`;navigator.clipboard.writeText(we).then(()=>{p(n("planning.debugCopied"))},()=>{h(n("planning.debugCopyFailed"))})},Bt=re=>{y(re.query),x(re.plan),re.plan&&!re.plan.error&&(re.plan.enhancedSystemPrompt&&Z(re.plan.enhancedSystemPrompt),re.plan.enhancedUserPrompt&&pe(re.plan.enhancedUserPrompt)),re.systemPrompt&&Z(re.systemPrompt),re.userPrompt&&pe(re.userPrompt),P(!1)},kt=async re=>{await RU(re);const we=await Dp();L(we)},At=async()=>{if(!b||b.error){h(n("planning.cannotSavePlan"));return}try{await oL(f,b,b.enhancedSystemPrompt||ue||"",b.enhancedUserPrompt||ae||""),p(n("planning.planSavedSuccess")),console.log("Plan manually saved to cache with system and user prompts")}catch(re){h(re instanceof Error?re.message:n("planning.planSaveFailed"))}},ir=()=>{y(""),x(null),Z(""),pe(""),localStorage.removeItem("planning_dialog_generated_system_prompt"),localStorage.removeItem("planning_dialog_generated_user_query"),localStorage.removeItem("planning_query"),localStorage.removeItem("planning_result"),console.log("Planning dialog cleared completely")},lr=re=>{console.log("🎤 Voice transcription received for planning:",re);let we="",Ze,et=null;switch(G){case"systemPrompt":we=ue,Ze=Z,et=ie.current;break;case"userQuery":we=ae,Ze=pe,et=H.current;break;case"query":default:we=f,Ze=y,et=z.current;break}const pt=we.substring(0,oe),Ft=we.substring(oe),Rr=pt+re+Ft;Ze(Rr),et&&setTimeout(()=>{const hr=oe+re.length;et.selectionStart=hr,et.selectionEnd=hr,et.focus(),U(hr)},0)},ft=re=>{V(re)},ur=re=>{re&&U(re.selectionStart)};return e?d.jsxs(d.Fragment,{children:[d.jsx(kw.FocusTrap,{active:e,children:d.jsx("div",{ref:a,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n("planning.title")}),d.jsx("div",{className:"ml-4",children:d.jsxs("button",{onClick:At,disabled:!b||b.error,className:"btn-primary text-sm flex items-center gap-1.5",title:n("planning.savePlanTooltip"),children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),n("planning.savePlan")]})}),d.jsxs("button",{onClick:()=>P(!0),className:"btn-secondary text-sm flex items-center gap-1.5",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n("planning.loadSaved")]}),d.jsxs("button",{onClick:()=>I(!0),disabled:!s,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:s?"Voice input - transcribe speech into last selected field":n("auth.signInRequired"),children:[d.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),d.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),"🎤"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:Pt,disabled:!f&&!b,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:n("planning.debugTooltip"),children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n("planning.debug")]}),r&&d.jsxs("button",{onClick:_t,disabled:!ae||!ae.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n("planning.transferToChat")]}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":n("common.close"),children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[v&&k&&d.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),d.jsx("div",{className:"ml-3",children:d.jsx("p",{className:"text-sm text-blue-700",children:k})})]})}),!(b&&b.queryType==="guidance")&&d.jsxs("div",{className:"card p-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("planning.query")}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:je,disabled:v||!f.trim(),title:s?f.trim()?n(v?"planning.planning":"planning.generatePlan"):n("planning.enterResearchQuestion"):n("planning.signInRequired"),className:`${s?"bg-green-600 hover:bg-green-700":"bg-yellow-500 hover:bg-yellow-600"} disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5`,children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),n(v?"planning.generating":s?"planning.generatePlan":"planning.signInToGenerate")]}),d.jsxs("button",{onClick:ir,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:n("planning.clearAllTooltip"),children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n("planning.clearAll")]})]})]}),s?d.jsx(d.Fragment,{children:d.jsx("textarea",{ref:z,value:f,onChange:re=>y(re.target.value),onFocus:()=>ft("query"),onClick:()=>ur(z.current),onKeyUp:()=>ur(z.current),placeholder:n("planning.enterQuery"),className:"input-field resize-none overflow-hidden",style:{minHeight:"120px"}})}):d.jsx("div",{className:"text-center text-red-500 py-4",children:n("planning.signInToUsePlanning")})]}),ue&&!(b&&b.queryType==="guidance")&&d.jsxs("div",{className:"card p-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:n("planning.generatedPrompts")}),K&&d.jsxs("button",{onClick:()=>O(!0),className:"btn-secondary text-xs px-3 py-1.5 flex items-center gap-1",title:n("planning.llmInfoTooltip"),children:["💰 $",(K.cost||0).toFixed(4)," • ",K.calls||1," ",K.calls>1?n("planning.llmCallsPlural"):n("planning.llmCalls")," ℹ️"]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:n("planning.systemPromptEditable")}),d.jsx("textarea",{ref:ie,value:ue,onChange:re=>Z(re.target.value),onFocus:()=>ft("systemPrompt"),onClick:()=>ur(ie.current),onKeyUp:()=>ur(ie.current),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.systemPromptHelp")})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:n("planning.userQueryEditable")}),d.jsx("textarea",{ref:H,value:ae,onChange:re=>pe(re.target.value),onFocus:()=>ft("userQuery"),onClick:()=>ur(H.current),onKeyUp:()=>ur(H.current),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.userQueryHelp")})]})]})]}),b&&!b.error&&d.jsx("div",{className:"card p-4",children:d.jsxs("div",{className:"space-y-4",children:[b.queryType==="SIMPLE"&&d.jsxs("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20",children:[d.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:n("planning.simpleQueryDetected")}),d.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.simpleInstruction}),d.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.simpleQueryHelp")})]}),b.queryType==="OVERVIEW"&&d.jsxs("div",{className:"card p-4 space-y-4",children:[d.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("planning.comprehensiveResearchPlan")}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-800 dark:text-gray-200",children:n("planning.analysisSummary")}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.queryType")}),d.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:b.queryType})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.complexity")}),d.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded",children:b.complexityAssessment})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.researchApproach")}),d.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:b.researchApproach})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.estimatedSources")}),d.jsx("span",{className:"ml-2 px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded",children:b.estimatedSources||"N/A"})]})]}),b.reasoning&&d.jsxs("div",{className:"mt-2",children:[d.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.reasoning")}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:b.reasoning})]})]}),b.persona&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:n("planning.expertPersona")}),d.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:b.persona})]}),b.searchStrategies?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.searchQueries")}),d.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:d.jsx("ul",{className:"space-y-1",children:b.searchStrategies.map((re,we)=>d.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300 flex items-start",children:[d.jsx("span",{className:"text-green-500 mr-2",children:"•"}),d.jsxs("span",{children:['"',re,'"']})]},we))})})]}),b.researchQuestions?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.researchQuestions")}),d.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:d.jsx("ul",{className:"list-decimal list-inside space-y-1 text-sm",children:b.researchQuestions.map((re,we)=>d.jsx("li",{className:"text-purple-700 dark:text-purple-300",children:re},we))})})]}),b.suggestedSources?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.suggestedSources")}),d.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg",children:d.jsx("div",{className:"space-y-2",children:b.suggestedSources.map((re,we)=>d.jsxs("div",{className:"text-sm",children:[d.jsxs("div",{className:"font-medium text-teal-800 dark:text-teal-200 capitalize",children:[re.type," ",n("planning.sources")]}),d.jsx("div",{className:"text-teal-700 dark:text-teal-300 ml-2",children:re.examples?re.examples.join(", "):n("planning.variousRelevantSources")})]},we))})})]}),b.methodology&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.researchMethodology")}),d.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:d.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:b.methodology})})]}),b.enhancedSystemPrompt&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:"� Enhanced System Prompt:"}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:d.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:b.enhancedSystemPrompt})})]}),b.enhancedUserPrompt&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:"💬 Enhanced User Prompt:"}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:d.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:b.enhancedUserPrompt})})]}),d.jsxs("details",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",children:[d.jsx("summary",{className:"text-sm font-medium cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"🔍 Debug: Raw LLM Response Fields"}),d.jsx("div",{className:"mt-3 space-y-2 text-xs",children:Object.entries(b).map(([re,we])=>re.startsWith("_")||typeof we=="object"?null:d.jsxs("div",{className:"flex",children:[d.jsxs("span",{className:"font-mono text-gray-500 dark:text-gray-400 w-32 flex-shrink-0",children:[re,":"]}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-all",children:typeof we=="string"?we:JSON.stringify(we)})]},re))})]})]}),b.queryType==="LONG_FORM"&&d.jsxs("div",{className:"card p-4 space-y-4",children:[d.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:n("planning.longFormDocumentPlan")}),d.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded text-sm",children:[d.jsx("strong",{children:"Note:"})," ",n("planning.longFormNote")]}),b.documentSections?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.documentStructure")}),b.documentSections.map((re,we)=>d.jsxs("div",{className:"ml-4 mb-3 p-2 bg-gray-50 dark:bg-gray-900 rounded",children:[d.jsxs("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:[we+1,". ",re.title]}),d.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[n("planning.keywords"),": ",re.keywords.join(", ")]}),re.questions?.length>0&&d.jsx("ul",{className:"text-xs mt-1 ml-4 list-disc list-inside",children:re.questions.map((Ze,et)=>d.jsx("li",{children:Ze},et))})]},we))]}),b.snippetWorkflow&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.workflow")}),d.jsx("div",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded whitespace-pre-wrap",children:b.snippetWorkflow})]})]}),b.queryType==="NEEDS_CLARIFICATION"&&d.jsxs("div",{className:"card p-4 space-y-4 bg-orange-50 dark:bg-orange-900/20",children:[d.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:n("planning.needMoreInfo")}),d.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.reasoning}),b.clarificationQuestions?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.pleaseClarify")}),d.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:b.clarificationQuestions.map((re,we)=>d.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:re},we))})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:n("planning.updateQueryDetails")}),d.jsx("textarea",{value:f,onChange:re=>y(re.target.value),className:"input-field",rows:4,placeholder:n("planning.provideMoreDetails")}),d.jsx("button",{onClick:je,className:"btn-primary mt-2 w-full",children:n("planning.regeneratePlanWithClarifications")})]})]}),b.queryType==="guidance"&&d.jsxs("div",{className:"card p-4 space-y-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[d.jsxs("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 flex items-center gap-2",children:[d.jsx("span",{className:"text-2xl",children:"📋"})," ",n("planning.moreInfoRequired")]}),b.planType&&d.jsxs("div",{className:"flex gap-2 items-center",children:[d.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:n("planning.planType")}),d.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm font-medium",children:b.planType.replace(/-/g," ").toUpperCase()})]}),b.detectedPatterns?.length>0&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[d.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-800 dark:text-purple-200",children:n("planning.detectedComplexityPatterns")}),d.jsx("div",{className:"flex flex-wrap gap-2",children:b.detectedPatterns.map((re,we)=>d.jsx("span",{className:"px-2 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:re},we))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[b.estimatedIterations&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[d.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:n("planning.estimatedIterations")}),d.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:b.estimatedIterations})]}),b.toolsRequired?.length>0&&d.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[d.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:n("planning.toolsRequired")}),d.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:b.toolsRequired.length})]})]}),b.suggestedWorkflow&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[d.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:n("planning.suggestedWorkflow")}),d.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:b.suggestedWorkflow})]}),b.toolsRequired?.length>0&&d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.requiredTools")}),d.jsx("div",{className:"flex flex-wrap gap-2",children:b.toolsRequired.map((re,we)=>d.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-mono",children:re},we))})]}),d.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700",children:[d.jsxs("h4",{className:"text-sm font-medium mb-3 text-yellow-900 dark:text-yellow-100 flex items-center gap-2",children:[d.jsx("span",{className:"text-lg",children:"💡"})," ",n("planning.guidanceQuestions")]}),b.guidanceQuestions?.length>0&&d.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm mb-4",children:b.guidanceQuestions.map((re,we)=>d.jsx("li",{className:"text-yellow-800 dark:text-yellow-200 font-medium",children:re},we))}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx("label",{className:"block text-sm font-semibold text-yellow-900 dark:text-yellow-100",children:n("planning.updatePromptWithAnswers")}),d.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-2",children:n("planning.guidanceTip")}),d.jsx("textarea",{value:f,onChange:re=>y(re.target.value),className:"input-field",rows:6,placeholder:n("planning.guidanceExamplePlaceholder")}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx("button",{onClick:je,className:"btn-primary flex-1",children:n("planning.generateDetailedExecutionPlan")}),d.jsx("button",{onClick:async()=>{if(!s){h(n("planning.signInRequired"));return}if(!v){T(!0),C(n("planning.forcingPlan"));try{const re=await i();if(!re){h(n("planning.authExpired")),T(!1);return}const we=u.providers.filter(et=>et.enabled!==!1),Ze=b.guidanceQuestions?.map((et,pt)=>`Q${pt+1}: ${et}
A${pt+1}: ${n("planning.clarificationAnswer")}`).join(`

`)||"";await mw(f,re,we,void 0,(et,pt)=>{switch(console.log("Force Plan SSE event:",et,pt),et){case"status":C(pt.message||n("planning.processing"));break;case"result":x(pt),pt.enhancedSystemPrompt&&Z(pt.enhancedSystemPrompt),pt.enhancedUserPrompt&&pe(pt.enhancedUserPrompt);break;case"llm_response":W(pt);break;case"error":const Ft=pt.error||"Unknown error";x({error:Ft}),h(`${n("planning.forcePlanError")}: ${Ft}`);break}},()=>{console.log("Force plan complete"),T(!1),C("")},et=>{console.error("Force plan error:",et),x({error:et.message}),h(`${n("planning.forcePlanFailed")}: ${et.message}`),T(!1),C("")},{clarificationAnswers:Ze,previousContext:b,forcePlan:!0,language:u.language||"en"})}catch(re){console.error("Force plan error:",re);const we=re instanceof Error?re.message:"Unknown error";x({error:we}),h(`${n("planning.forcePlanError")}: ${we}`),T(!1),C("")}}},disabled:v,className:"btn-secondary flex-1",title:n("planning.forcePlanTooltip"),children:n("planning.forcePlan")}),d.jsx("button",{onClick:()=>{x(null),C(""),de&&Z(de),Te&&pe(Te),_e(""),Ae(""),$e("")},className:"btn-secondary",title:n("planning.resetTooltip"),children:n("planning.reset")})]})]})]}),d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-300 dark:border-blue-700",children:d.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[d.jsx("strong",{children:n("planning.aboutGuidanceMode")})," ",n("planning.guidanceModeHelp")]})})]})]})})]})]})})}),A&&d.jsx(kw.FocusTrap,{active:A,children:d.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:d.jsxs("div",{className:"card p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:n("planning.loadSavedPlan")}),Q&&d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("planning.storage"),": ",(Q.usage/(1024*1024)).toFixed(2)," MB / ",(Q.quota/(1024*1024)).toFixed(0)," MB (",Q.percentage.toFixed(1),"%)"]})]}),Q&&Q.percentage>80&&d.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[d.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-semibold mb-2",children:["⚠️ ",n("planning.storageWarning",{percentage:Q.percentage.toFixed(1)})]}),d.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:n("planning.storageWarningHelp")})]}),M.length===0?d.jsx("p",{className:"text-gray-500",children:n("planning.noSavedPlans")}):d.jsx("div",{className:"space-y-3",children:M.map(re=>{const we=new Date(re.timestamp).toLocaleString();return d.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-3",children:d.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 mb-1 truncate",title:re.query,children:re.query.length>100?re.query.substring(0,100)+"...":re.query}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("planning.saved"),": ",we]})]}),d.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[d.jsx("button",{onClick:()=>Bt(re),className:"btn-primary text-xs",children:n("planning.load")}),d.jsx("button",{onClick:()=>kt(re.id),className:"btn-secondary text-red-500 text-xs",children:n("common.delete")})]})]})},re.id)})}),d.jsx("button",{onClick:()=>P(!1),className:"btn-primary w-full mt-4",children:n("common.close")})]})})}),j&&K&&d.jsx(Pq,{apiCalls:[K],onClose:()=>O(!1)}),d.jsx(NL,{isOpen:$,onClose:()=>I(!1),onTranscriptionComplete:lr,accessToken:l,apiEndpoint:D}),d.jsx("div",{className:"flex justify-end mt-6",children:d.jsx("button",{className:"btn-secondary text-xs",onClick:Pt,title:"Copy conversation, LLM, and tool debug info for Copilot support",children:"🐞 Copy Debug Info"})})]}):null};function uye(){}function dye(){}function G2(e){const t=[],r=String(e||"");let n=r.indexOf(","),a=0,i=!1;for(;!i;){n===-1&&(n=r.length,i=!0);const s=r.slice(a,n).trim();(s||!i)&&t.push(s),a=n+1,n=r.indexOf(",",a)}return t}function LL(e,t){const r=t||{};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const Fq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Uq={};function W2(e,t){return(Uq.jsx?zq:Fq).test(e)}const $q=/[ \t\n\f\r]/g;function qq(e){return typeof e=="object"?e.type==="text"?V2(e.value):!1:V2(e)}function V2(e){return e.replace($q,"")===""}let ig=class{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}};ig.prototype.normal={};ig.prototype.property={};ig.prototype.space=void 0;function PL(e,t){const r={},n={};for(const a of e)Object.assign(r,a.property),Object.assign(n,a.normal);return new ig(r,n,t)}function Op(e){return e.toLowerCase()}let gi=class{constructor(t,r){this.attribute=r,this.property=t}};gi.prototype.attribute="";gi.prototype.booleanish=!1;gi.prototype.boolean=!1;gi.prototype.commaOrSpaceSeparated=!1;gi.prototype.commaSeparated=!1;gi.prototype.defined=!1;gi.prototype.mustUseProperty=!1;gi.prototype.number=!1;gi.prototype.overloadedBoolean=!1;gi.prototype.property="";gi.prototype.spaceSeparated=!1;gi.prototype.space=void 0;let Hq=0;const or=Mc(),Gn=Mc(),Ew=Mc(),nt=Mc(),sn=Mc(),Ku=Mc(),Ai=Mc();function Mc(){return 2**++Hq}const Cw=Object.freeze(Object.defineProperty({__proto__:null,boolean:or,booleanish:Gn,commaOrSpaceSeparated:Ai,commaSeparated:Ku,number:nt,overloadedBoolean:Ew,spaceSeparated:sn},Symbol.toStringTag,{value:"Module"})),nv=Object.keys(Cw);let rS=class extends gi{constructor(t,r,n,a){let i=-1;if(super(t,r),Y2(this,"space",a),typeof n=="number")for(;++i<nv.length;){const s=nv[i];Y2(this,nv[i],(n&Cw[s])===Cw[s])}}};rS.prototype.defined=!0;function Y2(e,t,r){r&&(e[t]=r)}function Ed(e){const t={},r={};for(const[n,a]of Object.entries(e.properties)){const i=new rS(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[Op(n)]=n,r[Op(i.attribute)]=n}return new ig(t,r,e.space)}const RL=Ed({properties:{ariaActiveDescendant:null,ariaAtomic:Gn,ariaAutoComplete:null,ariaBusy:Gn,ariaChecked:Gn,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:sn,ariaCurrent:null,ariaDescribedBy:sn,ariaDetails:null,ariaDisabled:Gn,ariaDropEffect:sn,ariaErrorMessage:null,ariaExpanded:Gn,ariaFlowTo:sn,ariaGrabbed:Gn,ariaHasPopup:null,ariaHidden:Gn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:sn,ariaLevel:nt,ariaLive:null,ariaModal:Gn,ariaMultiLine:Gn,ariaMultiSelectable:Gn,ariaOrientation:null,ariaOwns:sn,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:Gn,ariaReadOnly:Gn,ariaRelevant:null,ariaRequired:Gn,ariaRoleDescription:sn,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:Gn,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function IL(e,t){return t in e?e[t]:t}function DL(e,t){return IL(e,t.toLowerCase())}const Gq=Ed({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ku,acceptCharset:sn,accessKey:sn,action:null,allow:null,allowFullScreen:or,allowPaymentRequest:or,allowUserMedia:or,alt:null,as:null,async:or,autoCapitalize:null,autoComplete:sn,autoFocus:or,autoPlay:or,blocking:sn,capture:null,charSet:null,checked:or,cite:null,className:sn,cols:nt,colSpan:null,content:null,contentEditable:Gn,controls:or,controlsList:sn,coords:nt|Ku,crossOrigin:null,data:null,dateTime:null,decoding:null,default:or,defer:or,dir:null,dirName:null,disabled:or,download:Ew,draggable:Gn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:or,formTarget:null,headers:sn,height:nt,hidden:Ew,high:nt,href:null,hrefLang:null,htmlFor:sn,httpEquiv:sn,id:null,imageSizes:null,imageSrcSet:null,inert:or,inputMode:null,integrity:null,is:null,isMap:or,itemId:null,itemProp:sn,itemRef:sn,itemScope:or,itemType:sn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:or,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:or,muted:or,name:null,nonce:null,noModule:or,noValidate:or,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:or,optimum:nt,pattern:null,ping:sn,placeholder:null,playsInline:or,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:or,referrerPolicy:null,rel:sn,required:or,reversed:or,rows:nt,rowSpan:nt,sandbox:sn,scope:null,scoped:or,seamless:or,selected:or,shadowRootClonable:or,shadowRootDelegatesFocus:or,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:Gn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:or,useMap:null,value:Gn,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:sn,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:or,declare:or,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:or,noHref:or,noShade:or,noWrap:or,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:Gn,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:or,disableRemotePlayback:or,prefix:null,property:null,results:nt,security:null,unselectable:null},space:"html",transform:DL}),Wq=Ed({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ai,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:sn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:or,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ku,g2:Ku,glyphName:Ku,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:Ai,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:sn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ai,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ai,rev:Ai,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ai,requiredFeatures:Ai,requiredFonts:Ai,requiredFormats:Ai,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:Ai,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ai,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ai,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:IL}),ML=Ed({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),OL=Ed({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:DL}),jL=Ed({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Vq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Yq=/[A-Z]/g,Q2=/-[a-z]/g,Qq=/^data[-\w.:]+$/i;function nS(e,t){const r=Op(t);let n=t,a=gi;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Qq.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Q2,Xq);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Q2.test(i)){let s=i.replace(Yq,Kq);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}a=rS}return new a(n,t)}function Kq(e){return"-"+e.toLowerCase()}function Xq(e){return e.charAt(1).toUpperCase()}const G0=PL([RL,Gq,ML,OL,jL],"html"),Cd=PL([RL,Wq,ML,OL,jL],"svg");function K2(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function BL(e){return e.join(" ").trim()}var Iu={},av,X2;function Jq(){if(X2)return av;X2=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,h="/",p="*",f="",y="comment",b="declaration";av=function(v,T){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];T=T||{};var k=1,C=1;function A(j){var O=j.match(t);O&&(k+=O.length);var $=j.lastIndexOf(u);C=~$?j.length-$:C+j.length}function P(){var j={line:k,column:C};return function(O){return O.position=new M(j),q(),O}}function M(j){this.start=j,this.end={line:k,column:C},this.source=T.source}M.prototype.content=v;function L(j){var O=new Error(T.source+":"+k+":"+C+": "+j);if(O.reason=j,O.filename=T.source,O.line=k,O.column=C,O.source=v,!T.silent)throw O}function D(j){var O=j.exec(v);if(O){var $=O[0];return A($),v=v.slice($.length),O}}function q(){D(r)}function Q(j){var O;for(j=j||[];O=F();)O!==!1&&j.push(O);return j}function F(){var j=P();if(!(h!=v.charAt(0)||p!=v.charAt(1))){for(var O=2;f!=v.charAt(O)&&(p!=v.charAt(O)||h!=v.charAt(O+1));)++O;if(O+=2,f===v.charAt(O-1))return L("End of comment missing");var $=v.slice(2,O-2);return C+=2,A($),v=v.slice(O),C+=2,j({type:y,comment:$})}}function K(){var j=P(),O=D(n);if(O){if(F(),!D(a))return L("property missing ':'");var $=D(i),I=j({type:b,property:x(O[0].replace(e,f)),value:$?x($[0].replace(e,f)):f});return D(s),I}}function W(){var j=[];Q(j);for(var O;O=K();)O!==!1&&(j.push(O),Q(j));return j}return q(),W()};function x(v){return v?v.replace(l,f):f}return av}var J2;function Zq(){if(J2)return Iu;J2=1;var e=Iu&&Iu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.default=r;const t=e(Jq());function r(n,a){let i=null;if(!n||typeof n!="string")return i;const s=(0,t.default)(n),l=typeof a=="function";return s.forEach(u=>{if(u.type!=="declaration")return;const{property:h,value:p}=u;l?a(h,p,u):p&&(i=i||{},i[h]=p)}),i}return Iu}var Dh={},Z2;function eH(){if(Z2)return Dh;Z2=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(h){return!h||r.test(h)||e.test(h)},s=function(h,p){return p.toUpperCase()},l=function(h,p){return"".concat(p,"-")},u=function(h,p){return p===void 0&&(p={}),i(h)?h:(h=h.toLowerCase(),p.reactCompat?h=h.replace(a,l):h=h.replace(n,l),h.replace(t,s))};return Dh.camelCase=u,Dh}var Mh,e_;function tH(){if(e_)return Mh;e_=1;var e=Mh&&Mh.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(Zq()),r=eH();function n(a,i){var s={};return!a||typeof a!="string"||(0,t.default)(a,function(l,u){l&&u&&(s[(0,r.camelCase)(l,i)]=u)}),s}return n.default=n,Mh=n,Mh}var rH=tH();const nH=Ic(rH),W0=FL("end"),Js=FL("start");function FL(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function zL(e){const t=Js(e),r=W0(e);if(t&&r)return{start:t,end:r}}function mp(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?t_(e.position):"start"in e||"end"in e?t_(e):"line"in e||"column"in e?_w(e):""}function _w(e){return r_(e&&e.line)+":"+r_(e&&e.column)}function t_(e){return _w(e&&e.start)+"-"+_w(e&&e.end)}function r_(e){return e&&typeof e=="number"?e:1}class ja extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let a="",i={},s=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?a=t:!i.cause&&t&&(s=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const u=n.indexOf(":");u===-1?i.ruleId=n:(i.source=n.slice(0,u),i.ruleId=n.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=mp(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ja.prototype.file="";ja.prototype.name="";ja.prototype.reason="";ja.prototype.message="";ja.prototype.stack="";ja.prototype.column=void 0;ja.prototype.line=void 0;ja.prototype.ancestors=void 0;ja.prototype.cause=void 0;ja.prototype.fatal=void 0;ja.prototype.place=void 0;ja.prototype.ruleId=void 0;ja.prototype.source=void 0;const aS={}.hasOwnProperty,aH=new Map,iH=/[A-Z]/g,sH=new Set(["table","tbody","thead","tfoot","tr"]),oH=new Set(["td","th"]),UL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function lH(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=mH(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=fH(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Cd:G0,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=$L(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function $L(e,t,r){if(t.type==="element")return cH(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return uH(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return hH(e,t,r);if(t.type==="mdxjsEsm")return dH(e,t);if(t.type==="root")return pH(e,t,r);if(t.type==="text")return gH(e,t)}function cH(e,t,r){const n=e.schema;let a=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(a=Cd,e.schema=a),e.ancestors.push(t);const i=HL(e,t.tagName,!1),s=yH(e,t);let l=sS(e,t);return sH.has(t.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!qq(u):!0})),qL(e,s,i,t),iS(s,l),e.ancestors.pop(),e.schema=n,e.create(t,i,s,r)}function uH(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}jp(e,t.position)}function dH(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jp(e,t.position)}function hH(e,t,r){const n=e.schema;let a=n;t.name==="svg"&&n.space==="html"&&(a=Cd,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:HL(e,t.name,!0),s=bH(e,t),l=sS(e,t);return qL(e,s,i,t),iS(s,l),e.ancestors.pop(),e.schema=n,e.create(t,i,s,r)}function pH(e,t,r){const n={};return iS(n,sS(e,t)),e.create(t,e.Fragment,n,r)}function gH(e,t){return t.value}function qL(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function iS(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function fH(e,t,r){return n;function n(a,i,s,l){const h=Array.isArray(s.children)?r:t;return l?h(i,s,l):h(i,s)}}function mH(e,t){return r;function r(n,a,i,s){const l=Array.isArray(i.children),u=Js(n);return t(a,i,s,l,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function yH(e,t){const r={};let n,a;for(a in t.properties)if(a!=="children"&&aS.call(t.properties,a)){const i=xH(e,a,t.properties[a]);if(i){const[s,l]=i;e.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&oH.has(t.tagName)?n=l:r[s]=l}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function bH(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const s=i.expression;s.type;const l=s.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else jp(e,t.position);else{const a=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const l=n.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else jp(e,t.position);else i=n.value===null?!0:n.value;r[a]=i}return r}function sS(e,t){const r=[];let n=-1;const a=e.passKeys?new Map:aH;for(;++n<t.children.length;){const i=t.children[n];let s;if(e.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=a.get(u)||0;s=u+"-"+h,a.set(u,h+1)}}const l=$L(e,i,s);l!==void 0&&r.push(l)}return r}function xH(e,t,r){const n=nS(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?LL(r):BL(r)),n.property==="style"){let a=typeof r=="object"?r:vH(e,String(r));return e.stylePropertyNameCase==="css"&&(a=wH(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&n.space?Vq[n.property]||n.property:n.attribute,r]}}function vH(e,t){try{return nH(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,a=new ja("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=UL+"#cannot-parse-style-attribute",a}}function HL(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,s;for(;++i<a.length;){const l=W2(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=s}else n=W2(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const a=n.value;return aS.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(n);jp(e)}function jp(e,t){const r=new ja("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=UL+"#cannot-handle-mdx-estrees-without-createevaluater",r}function wH(e){const t={};let r;for(r in e)aS.call(e,r)&&(t[SH(r)]=e[r]);return t}function SH(e){let t=e.replace(iH,TH);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function TH(e){return"-"+e.toLowerCase()}const iv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},kH={};function oS(e,t){const r=kH,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return GL(e,n,a)}function GL(e,t,r){if(EH(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return n_(e.children,t,r)}return Array.isArray(e)?n_(e,t,r):""}function n_(e,t,r){const n=[];let a=-1;for(;++a<e.length;)n[a]=GL(e[a],t,r);return n.join("")}function EH(e){return!!(e&&typeof e=="object")}const a_=document.createElement("i");function lS(e){const t="&"+e+";";a_.innerHTML=t;const r=a_.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Ri(e,t,r,n){const a=e.length;let i=0,s;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,n.length<1e4)s=Array.from(n),s.unshift(t,r),e.splice(...s);else for(r&&e.splice(t,r);i<n.length;)s=n.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function Ji(e,t){return e.length>0?(Ri(e,e.length,0,t),e):t}const i_={}.hasOwnProperty;function WL(e){const t={};let r=-1;for(;++r<e.length;)CH(t,e[r]);return t}function CH(e,t){let r;for(r in t){const a=(i_.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let s;if(i)for(s in i){i_.call(a,s)||(a[s]=[]);const l=i[s];_H(a[s],Array.isArray(l)?l:l?[l]:[])}}}function _H(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Ri(e,0,0,n)}function VL(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function ws(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ya=Rl(/[A-Za-z]/),Ra=Rl(/[\dA-Za-z]/),AH=Rl(/[#-'*+\--9=?A-Z^-~]/);function Gm(e){return e!==null&&(e<32||e===127)}const Aw=Rl(/\d/),NH=Rl(/[\dA-Fa-f]/),LH=Rl(/[!-/:-@[-`{-~]/);function $t(e){return e!==null&&e<-2}function rn(e){return e!==null&&(e<0||e===32)}function xr(e){return e===-2||e===-1||e===32}const V0=Rl(new RegExp("\\p{P}|\\p{S}","u")),Tc=Rl(/\s/);function Rl(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function _d(e){const t=[];let r=-1,n=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let s="";if(i===37&&Ra(e.charCodeAt(r+1))&&Ra(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(s=String.fromCharCode(i,l),a=1):s="�"}else s=String.fromCharCode(i);s&&(t.push(e.slice(n,r),encodeURIComponent(s)),n=r+a+1,s=""),a&&(r+=a,a=0)}return t.join("")+e.slice(n)}function Pr(e,t,r,n){const a=n?n-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(u){return xr(u)?(e.enter(r),l(u)):t(u)}function l(u){return xr(u)&&i++<a?(e.consume(u),l):(e.exit(r),t(u))}}const PH={tokenize:RH};function RH(e){const t=e.attempt(this.parser.constructs.contentInitial,n,a);let r;return t;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Pr(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const u=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=u),r=u,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return $t(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),s)}}const IH={tokenize:DH},s_={tokenize:MH};function DH(e){const t=this,r=[];let n=0,a,i,s;return l;function l(A){if(n<r.length){const P=r[n];return t.containerState=P[1],e.attempt(P[0].continuation,u,h)(A)}return h(A)}function u(A){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&C();const P=t.events.length;let M=P,L;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){L=t.events[M][1].end;break}k(n);let D=P;for(;D<t.events.length;)t.events[D][1].end={...L},D++;return Ri(t.events,M+1,0,t.events.slice(P)),t.events.length=D,h(A)}return l(A)}function h(A){if(n===r.length){if(!a)return y(A);if(a.currentConstruct&&a.currentConstruct.concrete)return x(A);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(s_,p,f)(A)}function p(A){return a&&C(),k(n),y(A)}function f(A){return t.parser.lazy[t.now().line]=n!==r.length,s=t.now().offset,x(A)}function y(A){return t.containerState={},e.attempt(s_,b,x)(A)}function b(A){return n++,r.push([t.currentConstruct,t.containerState]),y(A)}function x(A){if(A===null){a&&C(),k(0),e.consume(A);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),v(A)}function v(A){if(A===null){T(e.exit("chunkFlow"),!0),k(0),e.consume(A);return}return $t(A)?(e.consume(A),T(e.exit("chunkFlow")),n=0,t.interrupt=void 0,l):(e.consume(A),v)}function T(A,P){const M=t.sliceStream(A);if(P&&M.push(null),A.previous=i,i&&(i.next=A),i=A,a.defineSkip(A.start),a.write(M),t.parser.lazy[A.start.line]){let L=a.events.length;for(;L--;)if(a.events[L][1].start.offset<s&&(!a.events[L][1].end||a.events[L][1].end.offset>s))return;const D=t.events.length;let q=D,Q,F;for(;q--;)if(t.events[q][0]==="exit"&&t.events[q][1].type==="chunkFlow"){if(Q){F=t.events[q][1].end;break}Q=!0}for(k(n),L=D;L<t.events.length;)t.events[L][1].end={...F},L++;Ri(t.events,q+1,0,t.events.slice(D)),t.events.length=L}}function k(A){let P=r.length;for(;P-- >A;){const M=r[P];t.containerState=M[1],M[0].exit.call(t,e)}r.length=A}function C(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function MH(e,t,r){return Pr(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function cd(e){if(e===null||rn(e)||Tc(e))return 1;if(V0(e))return 2}function Y0(e,t,r){const n=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const Nw={name:"attention",resolveAll:OH,tokenize:jH};function OH(e,t){let r=-1,n,a,i,s,l,u,h,p;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;u=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const f={...e[n][1].end},y={...e[r][1].start};o_(f,-u),o_(y,u),s={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...e[n][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:y},i={type:u>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},a={type:u>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},e[n][1].end={...s.start},e[r][1].start={...l.end},h=[],e[n][1].end.offset-e[n][1].start.offset&&(h=Ji(h,[["enter",e[n][1],t],["exit",e[n][1],t]])),h=Ji(h,[["enter",a,t],["enter",s,t],["exit",s,t],["enter",i,t]]),h=Ji(h,Y0(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),h=Ji(h,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(p=2,h=Ji(h,[["enter",e[r][1],t],["exit",e[r][1],t]])):p=0,Ri(e,n-1,r-n+3,h),r=n+h.length-p-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function jH(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,a=cd(n);let i;return s;function s(u){return i=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===i)return e.consume(u),l;const h=e.exit("attentionSequence"),p=cd(u),f=!p||p===2&&a||r.includes(u),y=!a||a===2&&p||r.includes(n);return h._open=!!(i===42?f:f&&(a||!y)),h._close=!!(i===42?y:y&&(p||!f)),t(u)}}function o_(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const BH={name:"autolink",tokenize:FH};function FH(e,t,r){let n=0;return a;function a(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(b){return Ya(b)?(e.consume(b),s):b===64?r(b):h(b)}function s(b){return b===43||b===45||b===46||Ra(b)?(n=1,l(b)):h(b)}function l(b){return b===58?(e.consume(b),n=0,u):(b===43||b===45||b===46||Ra(b))&&n++<32?(e.consume(b),l):(n=0,h(b))}function u(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Gm(b)?r(b):(e.consume(b),u)}function h(b){return b===64?(e.consume(b),p):AH(b)?(e.consume(b),h):r(b)}function p(b){return Ra(b)?f(b):r(b)}function f(b){return b===46?(e.consume(b),n=0,p):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):y(b)}function y(b){if((b===45||Ra(b))&&n++<63){const x=b===45?y:f;return e.consume(b),x}return r(b)}}const sg={partial:!0,tokenize:zH};function zH(e,t,r){return n;function n(i){return xr(i)?Pr(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||$t(i)?t(i):r(i)}}const YL={continuation:{tokenize:$H},exit:qH,name:"blockQuote",tokenize:UH};function UH(e,t,r){const n=this;return a;function a(s){if(s===62){const l=n.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return r(s)}function i(s){return xr(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function $H(e,t,r){const n=this;return a;function a(s){return xr(s)?Pr(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(YL,t,r)(s)}}function qH(e){e.exit("blockQuote")}const QL={name:"characterEscape",tokenize:HH};function HH(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return LH(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const KL={name:"characterReference",tokenize:GH};function GH(e,t,r){const n=this;let a=0,i,s;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,s=Ra,p(f))}function h(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=NH,p):(e.enter("characterReferenceValue"),i=7,s=Aw,p(f))}function p(f){if(f===59&&a){const y=e.exit("characterReferenceValue");return s===Ra&&!lS(n.sliceSerialize(y))?r(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&a++<i?(e.consume(f),p):r(f)}}const l_={partial:!0,tokenize:VH},c_={concrete:!0,name:"codeFenced",tokenize:WH};function WH(e,t,r){const n=this,a={partial:!0,tokenize:M};let i=0,s=0,l;return u;function u(L){return h(L)}function h(L){const D=n.events[n.events.length-1];return i=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,l=L,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(L)}function p(L){return L===l?(s++,e.consume(L),p):s<3?r(L):(e.exit("codeFencedFenceSequence"),xr(L)?Pr(e,f,"whitespace")(L):f(L))}function f(L){return L===null||$t(L)?(e.exit("codeFencedFence"),n.interrupt?t(L):e.check(l_,v,P)(L)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),y(L))}function y(L){return L===null||$t(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(L)):xr(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Pr(e,b,"whitespace")(L)):L===96&&L===l?r(L):(e.consume(L),y)}function b(L){return L===null||$t(L)?f(L):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(L))}function x(L){return L===null||$t(L)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(L)):L===96&&L===l?r(L):(e.consume(L),x)}function v(L){return e.attempt(a,P,T)(L)}function T(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),k}function k(L){return i>0&&xr(L)?Pr(e,C,"linePrefix",i+1)(L):C(L)}function C(L){return L===null||$t(L)?e.check(l_,v,P)(L):(e.enter("codeFlowValue"),A(L))}function A(L){return L===null||$t(L)?(e.exit("codeFlowValue"),C(L)):(e.consume(L),A)}function P(L){return e.exit("codeFenced"),t(L)}function M(L,D,q){let Q=0;return F;function F($){return L.enter("lineEnding"),L.consume($),L.exit("lineEnding"),K}function K($){return L.enter("codeFencedFence"),xr($)?Pr(L,W,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):W($)}function W($){return $===l?(L.enter("codeFencedFenceSequence"),j($)):q($)}function j($){return $===l?(Q++,L.consume($),j):Q>=s?(L.exit("codeFencedFenceSequence"),xr($)?Pr(L,O,"whitespace")($):O($)):q($)}function O($){return $===null||$t($)?(L.exit("codeFencedFence"),D($)):q($)}}}function VH(e,t,r){const n=this;return a;function a(s){return s===null?r(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return n.parser.lazy[n.now().line]?r(s):t(s)}}const sv={name:"codeIndented",tokenize:QH},YH={partial:!0,tokenize:KH};function QH(e,t,r){const n=this;return a;function a(h){return e.enter("codeIndented"),Pr(e,i,"linePrefix",5)(h)}function i(h){const p=n.events[n.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?s(h):r(h)}function s(h){return h===null?u(h):$t(h)?e.attempt(YH,s,u)(h):(e.enter("codeFlowValue"),l(h))}function l(h){return h===null||$t(h)?(e.exit("codeFlowValue"),s(h)):(e.consume(h),l)}function u(h){return e.exit("codeIndented"),t(h)}}function KH(e,t,r){const n=this;return a;function a(s){return n.parser.lazy[n.now().line]?r(s):$t(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):Pr(e,i,"linePrefix",5)(s)}function i(s){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):$t(s)?a(s):r(s)}}const XH={name:"codeText",previous:ZH,resolve:JH,tokenize:eG};function JH(e){let t=e.length-4,r=3,n,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)a===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(a=n):(n===t||e[n][1].type==="lineEnding")&&(e[a][1].type="codeTextData",n!==a+2&&(e[a][1].end=e[n-1][1].end,e.splice(a+2,n-a-2),t-=n-a-2,n=a+2),a=void 0);return e}function ZH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function eG(e,t,r){let n=0,a,i;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),n++,l):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?r(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(i=e.enter("codeTextSequence"),a=0,p(f)):$t(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||$t(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),h)}function p(f){return f===96?(e.consume(f),a++,p):a===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",h(f))}}class tG{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const a=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return n&&Oh(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Oh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Oh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Oh(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Oh(this.left,r.reverse())}}}function Oh(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function XL(e){const t={};let r=-1,n,a,i,s,l,u,h;const p=new tG(e);for(;++r<p.length;){for(;r in t;)r=t[r];if(n=p.get(r),r&&n[1].type==="chunkFlow"&&p.get(r-1)[1].type==="listItemPrefix"&&(u=n[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,rG(p,r)),r=t[r],h=!0);else if(n[1]._container){for(i=r,a=void 0;i--;)if(s=p.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),s[1].type="lineEnding",a=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;a&&(n[1].end={...p.get(a)[1].start},l=p.slice(a,r),l.unshift(n),p.splice(a,r-a+1,l))}}return Ri(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function rG(e,t){const r=e.get(t)[1],n=e.get(t)[2];let a=t-1;const i=[];let s=r._tokenizer;s||(s=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,u=[],h={};let p,f,y=-1,b=r,x=0,v=0;const T=[v];for(;b;){for(;e.get(++a)[1]!==b;);i.push(a),b._tokenizer||(p=n.sliceStream(b),b.next||p.push(null),f&&s.defineSkip(b.start),b._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(p),b._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=b,b=b.next}for(b=r;++y<l.length;)l[y][0]==="exit"&&l[y-1][0]==="enter"&&l[y][1].type===l[y-1][1].type&&l[y][1].start.line!==l[y][1].end.line&&(v=y+1,T.push(v),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(s.events=[],b?(b._tokenizer=void 0,b.previous=void 0):T.pop(),y=T.length;y--;){const k=l.slice(T[y],T[y+1]),C=i.pop();u.push([C,C+k.length-1]),e.splice(C,2,k)}for(u.reverse(),y=-1;++y<u.length;)h[x+u[y][0]]=x+u[y][1],x+=u[y][1]-u[y][0]-1;return h}const nG={resolve:iG,tokenize:sG},aG={partial:!0,tokenize:oG};function iG(e){return XL(e),e}function sG(e,t){let r;return n;function n(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):$t(l)?e.check(aG,s,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function s(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function oG(e,t,r){const n=this;return a;function a(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Pr(e,i,"linePrefix")}function i(s){if(s===null||$t(s))return r(s);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):e.interrupt(n.parser.constructs.flow,r,t)(s)}}function JL(e,t,r,n,a,i,s,l,u){const h=u||Number.POSITIVE_INFINITY;let p=0;return f;function f(k){return k===60?(e.enter(n),e.enter(a),e.enter(i),e.consume(k),e.exit(i),y):k===null||k===32||k===41||Gm(k)?r(k):(e.enter(n),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(k))}function y(k){return k===62?(e.enter(i),e.consume(k),e.exit(i),e.exit(a),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),b(k))}function b(k){return k===62?(e.exit("chunkString"),e.exit(l),y(k)):k===null||k===60||$t(k)?r(k):(e.consume(k),k===92?x:b)}function x(k){return k===60||k===62||k===92?(e.consume(k),b):b(k)}function v(k){return!p&&(k===null||k===41||rn(k))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(n),t(k)):p<h&&k===40?(e.consume(k),p++,v):k===41?(e.consume(k),p--,v):k===null||k===32||k===40||Gm(k)?r(k):(e.consume(k),k===92?T:v)}function T(k){return k===40||k===41||k===92?(e.consume(k),v):v(k)}}function ZL(e,t,r,n,a,i){const s=this;let l=0,u;return h;function h(b){return e.enter(n),e.enter(a),e.consume(b),e.exit(a),e.enter(i),p}function p(b){return l>999||b===null||b===91||b===93&&!u||b===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?r(b):b===93?(e.exit(i),e.enter(a),e.consume(b),e.exit(a),e.exit(n),t):$t(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===null||b===91||b===93||$t(b)||l++>999?(e.exit("chunkString"),p(b)):(e.consume(b),u||(u=!xr(b)),b===92?y:f)}function y(b){return b===91||b===92||b===93?(e.consume(b),l++,f):f(b)}}function eP(e,t,r,n,a,i){let s;return l;function l(y){return y===34||y===39||y===40?(e.enter(n),e.enter(a),e.consume(y),e.exit(a),s=y===40?41:y,u):r(y)}function u(y){return y===s?(e.enter(a),e.consume(y),e.exit(a),e.exit(n),t):(e.enter(i),h(y))}function h(y){return y===s?(e.exit(i),u(s)):y===null?r(y):$t(y)?(e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),Pr(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===s||y===null||$t(y)?(e.exit("chunkString"),h(y)):(e.consume(y),y===92?f:p)}function f(y){return y===s||y===92?(e.consume(y),p):p(y)}}function yp(e,t){let r;return n;function n(a){return $t(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,n):xr(a)?Pr(e,n,r?"linePrefix":"lineSuffix")(a):t(a)}}const lG={name:"definition",tokenize:uG},cG={partial:!0,tokenize:dG};function uG(e,t,r){const n=this;let a;return i;function i(b){return e.enter("definition"),s(b)}function s(b){return ZL.call(n,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function l(b){return a=ws(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),u):r(b)}function u(b){return rn(b)?yp(e,h)(b):h(b)}function h(b){return JL(e,p,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function p(b){return e.attempt(cG,f,f)(b)}function f(b){return xr(b)?Pr(e,y,"whitespace")(b):y(b)}function y(b){return b===null||$t(b)?(e.exit("definition"),n.parser.defined.push(a),t(b)):r(b)}}function dG(e,t,r){return n;function n(l){return rn(l)?yp(e,a)(l):r(l)}function a(l){return eP(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return xr(l)?Pr(e,s,"whitespace")(l):s(l)}function s(l){return l===null||$t(l)?t(l):r(l)}}const hG={name:"hardBreakEscape",tokenize:pG};function pG(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return $t(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const gG={name:"headingAtx",resolve:fG,tokenize:mG};function fG(e,t){let r=e.length-2,n=3,a,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(a={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Ri(e,n,r-n+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function mG(e,t,r){let n=0;return a;function a(p){return e.enter("atxHeading"),i(p)}function i(p){return e.enter("atxHeadingSequence"),s(p)}function s(p){return p===35&&n++<6?(e.consume(p),s):p===null||rn(p)?(e.exit("atxHeadingSequence"),l(p)):r(p)}function l(p){return p===35?(e.enter("atxHeadingSequence"),u(p)):p===null||$t(p)?(e.exit("atxHeading"),t(p)):xr(p)?Pr(e,l,"whitespace")(p):(e.enter("atxHeadingText"),h(p))}function u(p){return p===35?(e.consume(p),u):(e.exit("atxHeadingSequence"),l(p))}function h(p){return p===null||p===35||rn(p)?(e.exit("atxHeadingText"),l(p)):(e.consume(p),h)}}const yG=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],u_=["pre","script","style","textarea"],bG={concrete:!0,name:"htmlFlow",resolveTo:wG,tokenize:SG},xG={partial:!0,tokenize:kG},vG={partial:!0,tokenize:TG};function wG(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function SG(e,t,r){const n=this;let a,i,s,l,u;return h;function h(H){return p(H)}function p(H){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(H),f}function f(H){return H===33?(e.consume(H),y):H===47?(e.consume(H),i=!0,v):H===63?(e.consume(H),a=3,n.interrupt?t:U):Ya(H)?(e.consume(H),s=String.fromCharCode(H),T):r(H)}function y(H){return H===45?(e.consume(H),a=2,b):H===91?(e.consume(H),a=5,l=0,x):Ya(H)?(e.consume(H),a=4,n.interrupt?t:U):r(H)}function b(H){return H===45?(e.consume(H),n.interrupt?t:U):r(H)}function x(H){const ue="CDATA[";return H===ue.charCodeAt(l++)?(e.consume(H),l===ue.length?n.interrupt?t:W:x):r(H)}function v(H){return Ya(H)?(e.consume(H),s=String.fromCharCode(H),T):r(H)}function T(H){if(H===null||H===47||H===62||rn(H)){const ue=H===47,Z=s.toLowerCase();return!ue&&!i&&u_.includes(Z)?(a=1,n.interrupt?t(H):W(H)):yG.includes(s.toLowerCase())?(a=6,ue?(e.consume(H),k):n.interrupt?t(H):W(H)):(a=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(H):i?C(H):A(H))}return H===45||Ra(H)?(e.consume(H),s+=String.fromCharCode(H),T):r(H)}function k(H){return H===62?(e.consume(H),n.interrupt?t:W):r(H)}function C(H){return xr(H)?(e.consume(H),C):F(H)}function A(H){return H===47?(e.consume(H),F):H===58||H===95||Ya(H)?(e.consume(H),P):xr(H)?(e.consume(H),A):F(H)}function P(H){return H===45||H===46||H===58||H===95||Ra(H)?(e.consume(H),P):M(H)}function M(H){return H===61?(e.consume(H),L):xr(H)?(e.consume(H),M):A(H)}function L(H){return H===null||H===60||H===61||H===62||H===96?r(H):H===34||H===39?(e.consume(H),u=H,D):xr(H)?(e.consume(H),L):q(H)}function D(H){return H===u?(e.consume(H),u=null,Q):H===null||$t(H)?r(H):(e.consume(H),D)}function q(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||rn(H)?M(H):(e.consume(H),q)}function Q(H){return H===47||H===62||xr(H)?A(H):r(H)}function F(H){return H===62?(e.consume(H),K):r(H)}function K(H){return H===null||$t(H)?W(H):xr(H)?(e.consume(H),K):r(H)}function W(H){return H===45&&a===2?(e.consume(H),I):H===60&&a===1?(e.consume(H),G):H===62&&a===4?(e.consume(H),z):H===63&&a===3?(e.consume(H),U):H===93&&a===5?(e.consume(H),oe):$t(H)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(xG,ie,j)(H)):H===null||$t(H)?(e.exit("htmlFlowData"),j(H)):(e.consume(H),W)}function j(H){return e.check(vG,O,ie)(H)}function O(H){return e.enter("lineEnding"),e.consume(H),e.exit("lineEnding"),$}function $(H){return H===null||$t(H)?j(H):(e.enter("htmlFlowData"),W(H))}function I(H){return H===45?(e.consume(H),U):W(H)}function G(H){return H===47?(e.consume(H),s="",V):W(H)}function V(H){if(H===62){const ue=s.toLowerCase();return u_.includes(ue)?(e.consume(H),z):W(H)}return Ya(H)&&s.length<8?(e.consume(H),s+=String.fromCharCode(H),V):W(H)}function oe(H){return H===93?(e.consume(H),U):W(H)}function U(H){return H===62?(e.consume(H),z):H===45&&a===2?(e.consume(H),U):W(H)}function z(H){return H===null||$t(H)?(e.exit("htmlFlowData"),ie(H)):(e.consume(H),z)}function ie(H){return e.exit("htmlFlow"),t(H)}}function TG(e,t,r){const n=this;return a;function a(s){return $t(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):r(s)}function i(s){return n.parser.lazy[n.now().line]?r(s):t(s)}}function kG(e,t,r){return n;function n(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(sg,t,r)}}const EG={name:"htmlText",tokenize:CG};function CG(e,t,r){const n=this;let a,i,s;return l;function l(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),u}function u(U){return U===33?(e.consume(U),h):U===47?(e.consume(U),M):U===63?(e.consume(U),A):Ya(U)?(e.consume(U),q):r(U)}function h(U){return U===45?(e.consume(U),p):U===91?(e.consume(U),i=0,x):Ya(U)?(e.consume(U),C):r(U)}function p(U){return U===45?(e.consume(U),b):r(U)}function f(U){return U===null?r(U):U===45?(e.consume(U),y):$t(U)?(s=f,G(U)):(e.consume(U),f)}function y(U){return U===45?(e.consume(U),b):f(U)}function b(U){return U===62?I(U):U===45?y(U):f(U)}function x(U){const z="CDATA[";return U===z.charCodeAt(i++)?(e.consume(U),i===z.length?v:x):r(U)}function v(U){return U===null?r(U):U===93?(e.consume(U),T):$t(U)?(s=v,G(U)):(e.consume(U),v)}function T(U){return U===93?(e.consume(U),k):v(U)}function k(U){return U===62?I(U):U===93?(e.consume(U),k):v(U)}function C(U){return U===null||U===62?I(U):$t(U)?(s=C,G(U)):(e.consume(U),C)}function A(U){return U===null?r(U):U===63?(e.consume(U),P):$t(U)?(s=A,G(U)):(e.consume(U),A)}function P(U){return U===62?I(U):A(U)}function M(U){return Ya(U)?(e.consume(U),L):r(U)}function L(U){return U===45||Ra(U)?(e.consume(U),L):D(U)}function D(U){return $t(U)?(s=D,G(U)):xr(U)?(e.consume(U),D):I(U)}function q(U){return U===45||Ra(U)?(e.consume(U),q):U===47||U===62||rn(U)?Q(U):r(U)}function Q(U){return U===47?(e.consume(U),I):U===58||U===95||Ya(U)?(e.consume(U),F):$t(U)?(s=Q,G(U)):xr(U)?(e.consume(U),Q):I(U)}function F(U){return U===45||U===46||U===58||U===95||Ra(U)?(e.consume(U),F):K(U)}function K(U){return U===61?(e.consume(U),W):$t(U)?(s=K,G(U)):xr(U)?(e.consume(U),K):Q(U)}function W(U){return U===null||U===60||U===61||U===62||U===96?r(U):U===34||U===39?(e.consume(U),a=U,j):$t(U)?(s=W,G(U)):xr(U)?(e.consume(U),W):(e.consume(U),O)}function j(U){return U===a?(e.consume(U),a=void 0,$):U===null?r(U):$t(U)?(s=j,G(U)):(e.consume(U),j)}function O(U){return U===null||U===34||U===39||U===60||U===61||U===96?r(U):U===47||U===62||rn(U)?Q(U):(e.consume(U),O)}function $(U){return U===47||U===62||rn(U)?Q(U):r(U)}function I(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):r(U)}function G(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),V}function V(U){return xr(U)?Pr(e,oe,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):oe(U)}function oe(U){return e.enter("htmlTextData"),s(U)}}const cS={name:"labelEnd",resolveAll:LG,resolveTo:PG,tokenize:RG},_G={tokenize:IG},AG={tokenize:DG},NG={tokenize:MG};function LG(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const a=n.type==="labelImage"?4:2;n.type="data",t+=a}}return e.length!==r.length&&Ri(e,0,e.length,r),e}function PG(e,t){let r=e.length,n=0,a,i,s,l;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(s){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){n=2;break}}else a.type==="labelEnd"&&(s=r);const u={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},p={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[s-2][1].start}};return l=[["enter",u,t],["enter",h,t]],l=Ji(l,e.slice(i+1,i+n+3)),l=Ji(l,[["enter",p,t]]),l=Ji(l,Y0(t.parser.constructs.insideSpan.null,e.slice(i+n+4,s-3),t)),l=Ji(l,[["exit",p,t],e[s-2],e[s-1],["exit",h,t]]),l=Ji(l,e.slice(s+1)),l=Ji(l,[["exit",u,t]]),Ri(e,i,e.length,l),e}function RG(e,t,r){const n=this;let a=n.events.length,i,s;for(;a--;)if((n.events[a][1].type==="labelImage"||n.events[a][1].type==="labelLink")&&!n.events[a][1]._balanced){i=n.events[a][1];break}return l;function l(y){return i?i._inactive?f(y):(s=n.parser.defined.includes(ws(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(y),e.exit("labelMarker"),e.exit("labelEnd"),u):r(y)}function u(y){return y===40?e.attempt(_G,p,s?p:f)(y):y===91?e.attempt(AG,p,s?h:f)(y):s?p(y):f(y)}function h(y){return e.attempt(NG,p,f)(y)}function p(y){return t(y)}function f(y){return i._balanced=!0,r(y)}}function IG(e,t,r){return n;function n(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),a}function a(f){return rn(f)?yp(e,i)(f):i(f)}function i(f){return f===41?p(f):JL(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return rn(f)?yp(e,u)(f):p(f)}function l(f){return r(f)}function u(f){return f===34||f===39||f===40?eP(e,h,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):p(f)}function h(f){return rn(f)?yp(e,p)(f):p(f)}function p(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):r(f)}}function DG(e,t,r){const n=this;return a;function a(l){return ZL.call(n,e,i,s,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(ws(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function s(l){return r(l)}}function MG(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const OG={name:"labelStartImage",resolveAll:cS.resolveAll,tokenize:jG};function jG(e,t,r){const n=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):r(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const BG={name:"labelStartLink",resolveAll:cS.resolveAll,tokenize:FG};function FG(e,t,r){const n=this;return a;function a(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const ov={name:"lineEnding",tokenize:zG};function zG(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Pr(e,t,"linePrefix")}}const ym={name:"thematicBreak",tokenize:UG};function UG(e,t,r){let n=0,a;return i;function i(h){return e.enter("thematicBreak"),s(h)}function s(h){return a=h,l(h)}function l(h){return h===a?(e.enter("thematicBreakSequence"),u(h)):n>=3&&(h===null||$t(h))?(e.exit("thematicBreak"),t(h)):r(h)}function u(h){return h===a?(e.consume(h),n++,u):(e.exit("thematicBreakSequence"),xr(h)?Pr(e,l,"whitespace")(h):l(h))}}const ui={continuation:{tokenize:GG},exit:VG,name:"list",tokenize:HG},$G={partial:!0,tokenize:YG},qG={partial:!0,tokenize:WG};function HG(e,t,r){const n=this,a=n.events[n.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0;return l;function l(b){const x=n.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!n.containerState.marker||b===n.containerState.marker:Aw(b)){if(n.containerState.type||(n.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(ym,r,h)(b):h(b);if(!n.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(b)}return r(b)}function u(b){return Aw(b)&&++s<10?(e.consume(b),u):(!n.interrupt||s<2)&&(n.containerState.marker?b===n.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),h(b)):r(b)}function h(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||b,e.check(sg,n.interrupt?r:p,e.attempt($G,y,f))}function p(b){return n.containerState.initialBlankLine=!0,i++,y(b)}function f(b){return xr(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),y):r(b)}function y(b){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function GG(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(sg,a,i);function a(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Pr(e,t,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!xr(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(qG,t,s)(l))}function s(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,Pr(e,e.attempt(ui,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function WG(e,t,r){const n=this;return Pr(e,a,"listItemIndent",n.containerState.size+1);function a(i){const s=n.events[n.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?t(i):r(i)}}function VG(e){e.exit(this.containerState.type)}function YG(e,t,r){const n=this;return Pr(e,a,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const s=n.events[n.events.length-1];return!xr(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const d_={name:"setextUnderline",resolveTo:QG,tokenize:KG};function QG(e,t){let r=e.length,n,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const s={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=s,e.push(["exit",s,t]),e}function KG(e,t,r){const n=this;let a;return i;function i(h){let p=n.events.length,f;for(;p--;)if(n.events[p][1].type!=="lineEnding"&&n.events[p][1].type!=="linePrefix"&&n.events[p][1].type!=="content"){f=n.events[p][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||f)?(e.enter("setextHeadingLine"),a=h,s(h)):r(h)}function s(h){return e.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===a?(e.consume(h),l):(e.exit("setextHeadingLineSequence"),xr(h)?Pr(e,u,"lineSuffix")(h):u(h))}function u(h){return h===null||$t(h)?(e.exit("setextHeadingLine"),t(h)):r(h)}}const XG={tokenize:JG};function JG(e){const t=this,r=e.attempt(sg,n,e.attempt(this.parser.constructs.flowInitial,a,Pr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(nG,a)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const ZG={resolveAll:rP()},eW=tP("string"),tW=tP("text");function tP(e){return{resolveAll:rP(e==="text"?rW:void 0),tokenize:t};function t(r){const n=this,a=this.parser.constructs[e],i=r.attempt(a,s,l);return s;function s(p){return h(p)?i(p):l(p)}function l(p){if(p===null){r.consume(p);return}return r.enter("data"),r.consume(p),u}function u(p){return h(p)?(r.exit("data"),i(p)):(r.consume(p),u)}function h(p){if(p===null)return!0;const f=a[p];let y=-1;if(f)for(;++y<f.length;){const b=f[y];if(!b.previous||b.previous.call(n,n.previous))return!0}return!1}}}function rP(e){return t;function t(r,n){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,n):r}}function rW(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],a=t.sliceStream(n);let i=a.length,s=-1,l=0,u;for(;i--;){const h=a[i];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(h===-2)u=!0,l++;else if(h!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const h={type:r===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:n.start._bufferIndex+s,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...h.start},n.start.offset===n.end.offset?Object.assign(n,h):(e.splice(r,0,["enter",h,t],["exit",h,t]),r+=2)}r++}return e}const nW={42:ui,43:ui,45:ui,48:ui,49:ui,50:ui,51:ui,52:ui,53:ui,54:ui,55:ui,56:ui,57:ui,62:YL},aW={91:lG},iW={[-2]:sv,[-1]:sv,32:sv},sW={35:gG,42:ym,45:[d_,ym],60:bG,61:d_,95:ym,96:c_,126:c_},oW={38:KL,92:QL},lW={[-5]:ov,[-4]:ov,[-3]:ov,33:OG,38:KL,42:Nw,60:[BH,EG],91:BG,92:[hG,QL],93:cS,95:Nw,96:XH},cW={null:[Nw,ZG]},uW={null:[42,95]},dW={null:[]},hW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:uW,contentInitial:aW,disable:dW,document:nW,flow:sW,flowInitial:iW,insideSpan:cW,string:oW,text:lW},Symbol.toStringTag,{value:"Module"}));function pW(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let s=[],l=[];const u={attempt:D(M),check:D(L),consume:C,enter:A,exit:P,interrupt:D(L,{interrupt:!0})},h={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:e,previous:null,sliceSerialize:y,sliceStream:b,write:f};let p=t.tokenize.call(h,u);return t.resolveAll&&i.push(t),h;function f(K){return s=Ji(s,K),T(),s[s.length-1]!==null?[]:(q(t,0),h.events=Y0(i,h.events,h),h.events)}function y(K,W){return fW(b(K),W)}function b(K){return gW(s,K)}function x(){const{_bufferIndex:K,_index:W,line:j,column:O,offset:$}=n;return{_bufferIndex:K,_index:W,line:j,column:O,offset:$}}function v(K){a[K.line]=K.column,F()}function T(){let K;for(;n._index<s.length;){const W=s[n._index];if(typeof W=="string")for(K=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===K&&n._bufferIndex<W.length;)k(W.charCodeAt(n._bufferIndex));else k(W)}}function k(K){p=p(K)}function C(K){$t(K)?(n.line++,n.column=1,n.offset+=K===-3?2:1,F()):K!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=K}function A(K,W){const j=W||{};return j.type=K,j.start=x(),h.events.push(["enter",j,h]),l.push(j),j}function P(K){const W=l.pop();return W.end=x(),h.events.push(["exit",W,h]),W}function M(K,W){q(K,W.from)}function L(K,W){W.restore()}function D(K,W){return j;function j(O,$,I){let G,V,oe,U;return Array.isArray(O)?ie(O):"tokenize"in O?ie([O]):z(O);function z(ae){return pe;function pe(ye){const _e=ye!==null&&ae[ye],de=ye!==null&&ae.null,Ae=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(de)?de:de?[de]:[]];return ie(Ae)(ye)}}function ie(ae){return G=ae,V=0,ae.length===0?I:H(ae[V])}function H(ae){return pe;function pe(ye){return U=Q(),oe=ae,ae.partial||(h.currentConstruct=ae),ae.name&&h.parser.constructs.disable.null.includes(ae.name)?Z():ae.tokenize.call(W?Object.assign(Object.create(h),W):h,u,ue,Z)(ye)}}function ue(ae){return K(oe,U),$}function Z(ae){return U.restore(),++V<G.length?H(G[V]):I}}}function q(K,W){K.resolveAll&&!i.includes(K)&&i.push(K),K.resolve&&Ri(h.events,W,h.events.length-W,K.resolve(h.events.slice(W),h)),K.resolveTo&&(h.events=K.resolveTo(h.events,h))}function Q(){const K=x(),W=h.previous,j=h.currentConstruct,O=h.events.length,$=Array.from(l);return{from:O,restore:I};function I(){n=K,h.previous=W,h.currentConstruct=j,h.events.length=O,l=$,F()}}function F(){n.line in a&&n.column<2&&(n.column=a[n.line],n.offset+=a[n.line]-1)}}function gW(e,t){const r=t.start._index,n=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let s;if(r===a)s=[e[r].slice(n,i)];else{if(s=e.slice(r,a),n>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(n):s.shift()}i>0&&s.push(e[a].slice(0,i))}return s}function fW(e,t){let r=-1;const n=[];let a;for(;++r<e.length;){const i=e[r];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&a)continue;s=" ";break}default:s=String.fromCharCode(i)}a=i===-2,n.push(s)}return n.join("")}function mW(e){const n={constructs:WL([hW,...(e||{}).extensions||[]]),content:a(PH),defined:[],document:a(IH),flow:a(XG),lazy:{},string:a(eW),text:a(tW)};return n;function a(i){return s;function s(l){return pW(n,i,l)}}}function yW(e){for(;!XL(e););return e}const h_=/[\0\t\n\r]/g;function bW(){let e=1,t="",r=!0,n;return a;function a(i,s,l){const u=[];let h,p,f,y,b;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),f=0,t="",r&&(i.charCodeAt(0)===65279&&f++,r=void 0);f<i.length;){if(h_.lastIndex=f,h=h_.exec(i),y=h&&h.index!==void 0?h.index:i.length,b=i.charCodeAt(y),!h){t=i.slice(f);break}if(b===10&&f===y&&n)u.push(-3),n=void 0;else switch(n&&(u.push(-5),n=void 0),f<y&&(u.push(i.slice(f,y)),e+=y-f),b){case 0:{u.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,u.push(-2);e++<p;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:n=!0,e=1}f=y+1}return l&&(n&&u.push(-5),t&&u.push(t),u.push(null)),u}}const xW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vW(e){return e.replace(xW,wW)}function wW(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return VL(r.slice(i?2:1),i?16:10)}return lS(r)||e}const nP={}.hasOwnProperty;function SW(e,t,r){return typeof t!="string"&&(r=t,t=void 0),TW(r)(yW(mW(r).document().write(bW()(e,t,!0))))}function TW(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Bt),autolinkProtocol:Q,autolinkEmail:Q,atxHeading:i(Tt),blockQuote:i(de),characterEscape:Q,characterReference:Q,codeFenced:i(Ae),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(Ae,s),codeText:i(Te,s),codeTextData:Q,data:Q,codeFlowValue:Q,definition:i($e),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i(ot),hardBreakEscape:i(je),hardBreakTrailing:i(je),htmlFlow:i(_t,s),htmlFlowData:Q,htmlText:i(_t,s),htmlTextData:Q,image:i(Pt),label:s,link:i(Bt),listItem:i(At),listItemValue:y,listOrdered:i(kt,f),listUnordered:i(kt),paragraph:i(ir),reference:H,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(Tt),strong:i(lr),thematicBreak:i(ur)},exit:{atxHeading:u(),atxHeadingSequence:M,autolink:u(),autolinkEmail:_e,autolinkProtocol:ye,blockQuote:u(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ae,characterReference:pe,codeFenced:u(T),codeFencedFence:v,codeFencedFenceInfo:b,codeFencedFenceMeta:x,codeFlowValue:F,codeIndented:u(k),codeText:u($),codeTextData:F,data:F,definition:u(),definitionDestinationString:P,definitionLabelString:C,definitionTitleString:A,emphasis:u(),hardBreakEscape:u(W),hardBreakTrailing:u(W),htmlFlow:u(j),htmlFlowData:F,htmlText:u(O),htmlTextData:F,image:u(G),label:oe,labelText:V,lineEnding:K,link:u(I),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ue,resourceDestinationString:U,resourceTitleString:z,resource:ie,setextHeading:u(q),setextHeadingLineSequence:D,setextHeadingText:L,strong:u(),thematicBreak:u()}};aP(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(re){let we={type:"root",children:[]};const Ze={stack:[we],tokenStack:[],config:t,enter:l,exit:h,buffer:s,resume:p,data:r},et=[];let pt=-1;for(;++pt<re.length;)if(re[pt][1].type==="listOrdered"||re[pt][1].type==="listUnordered")if(re[pt][0]==="enter")et.push(pt);else{const Ft=et.pop();pt=a(re,Ft,pt)}for(pt=-1;++pt<re.length;){const Ft=t[re[pt][0]];nP.call(Ft,re[pt][1].type)&&Ft[re[pt][1].type].call(Object.assign({sliceSerialize:re[pt][2].sliceSerialize},Ze),re[pt][1])}if(Ze.tokenStack.length>0){const Ft=Ze.tokenStack[Ze.tokenStack.length-1];(Ft[1]||p_).call(Ze,void 0,Ft[0])}for(we.position={start:fl(re.length>0?re[0][1].start:{line:1,column:1,offset:0}),end:fl(re.length>0?re[re.length-2][1].end:{line:1,column:1,offset:0})},pt=-1;++pt<t.transforms.length;)we=t.transforms[pt](we)||we;return we}function a(re,we,Ze){let et=we-1,pt=-1,Ft=!1,Rr,hr,cr,Xt;for(;++et<=Ze;){const tr=re[et];switch(tr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tr[0]==="enter"?pt++:pt--,Xt=void 0;break}case"lineEndingBlank":{tr[0]==="enter"&&(Rr&&!Xt&&!pt&&!cr&&(cr=et),Xt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xt=void 0}if(!pt&&tr[0]==="enter"&&tr[1].type==="listItemPrefix"||pt===-1&&tr[0]==="exit"&&(tr[1].type==="listUnordered"||tr[1].type==="listOrdered")){if(Rr){let sa=et;for(hr=void 0;sa--;){const fn=re[sa];if(fn[1].type==="lineEnding"||fn[1].type==="lineEndingBlank"){if(fn[0]==="exit")continue;hr&&(re[hr][1].type="lineEndingBlank",Ft=!0),fn[1].type="lineEnding",hr=sa}else if(!(fn[1].type==="linePrefix"||fn[1].type==="blockQuotePrefix"||fn[1].type==="blockQuotePrefixWhitespace"||fn[1].type==="blockQuoteMarker"||fn[1].type==="listItemIndent"))break}cr&&(!hr||cr<hr)&&(Rr._spread=!0),Rr.end=Object.assign({},hr?re[hr][1].start:tr[1].end),re.splice(hr||et,0,["exit",Rr,tr[2]]),et++,Ze++}if(tr[1].type==="listItemPrefix"){const sa={type:"listItem",_spread:!1,start:Object.assign({},tr[1].start),end:void 0};Rr=sa,re.splice(et,0,["enter",sa,tr[2]]),et++,Ze++,cr=void 0,Xt=!0}}}return re[we][1]._spread=Ft,Ze}function i(re,we){return Ze;function Ze(et){l.call(this,re(et),et),we&&we.call(this,et)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(re,we,Ze){this.stack[this.stack.length-1].children.push(re),this.stack.push(re),this.tokenStack.push([we,Ze||void 0]),re.position={start:fl(we.start),end:void 0}}function u(re){return we;function we(Ze){re&&re.call(this,Ze),h.call(this,Ze)}}function h(re,we){const Ze=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==re.type&&(we?we.call(this,re,et[0]):(et[1]||p_).call(this,re,et[0]));else throw new Error("Cannot close `"+re.type+"` ("+mp({start:re.start,end:re.end})+"): it’s not open");Ze.position.end=fl(re.end)}function p(){return oS(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function y(re){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(re),10),this.data.expectingFirstListItemValue=void 0}}function b(){const re=this.resume(),we=this.stack[this.stack.length-1];we.lang=re}function x(){const re=this.resume(),we=this.stack[this.stack.length-1];we.meta=re}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const re=this.resume(),we=this.stack[this.stack.length-1];we.value=re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const re=this.resume(),we=this.stack[this.stack.length-1];we.value=re.replace(/(\r?\n|\r)$/g,"")}function C(re){const we=this.resume(),Ze=this.stack[this.stack.length-1];Ze.label=we,Ze.identifier=ws(this.sliceSerialize(re)).toLowerCase()}function A(){const re=this.resume(),we=this.stack[this.stack.length-1];we.title=re}function P(){const re=this.resume(),we=this.stack[this.stack.length-1];we.url=re}function M(re){const we=this.stack[this.stack.length-1];if(!we.depth){const Ze=this.sliceSerialize(re).length;we.depth=Ze}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function D(re){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(re).codePointAt(0)===61?1:2}function q(){this.data.setextHeadingSlurpLineEnding=void 0}function Q(re){const Ze=this.stack[this.stack.length-1].children;let et=Ze[Ze.length-1];(!et||et.type!=="text")&&(et=ft(),et.position={start:fl(re.start),end:void 0},Ze.push(et)),this.stack.push(et)}function F(re){const we=this.stack.pop();we.value+=this.sliceSerialize(re),we.position.end=fl(re.end)}function K(re){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ze=we.children[we.children.length-1];Ze.position.end=fl(re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(we.type)&&(Q.call(this,re),F.call(this,re))}function W(){this.data.atHardBreak=!0}function j(){const re=this.resume(),we=this.stack[this.stack.length-1];we.value=re}function O(){const re=this.resume(),we=this.stack[this.stack.length-1];we.value=re}function $(){const re=this.resume(),we=this.stack[this.stack.length-1];we.value=re}function I(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=we,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function G(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=we,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function V(re){const we=this.sliceSerialize(re),Ze=this.stack[this.stack.length-2];Ze.label=vW(we),Ze.identifier=ws(we).toLowerCase()}function oe(){const re=this.stack[this.stack.length-1],we=this.resume(),Ze=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ze.type==="link"){const et=re.children;Ze.children=et}else Ze.alt=we}function U(){const re=this.resume(),we=this.stack[this.stack.length-1];we.url=re}function z(){const re=this.resume(),we=this.stack[this.stack.length-1];we.title=re}function ie(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function ue(re){const we=this.resume(),Ze=this.stack[this.stack.length-1];Ze.label=we,Ze.identifier=ws(this.sliceSerialize(re)).toLowerCase(),this.data.referenceType="full"}function Z(re){this.data.characterReferenceType=re.type}function ae(re){const we=this.sliceSerialize(re),Ze=this.data.characterReferenceType;let et;Ze?(et=VL(we,Ze==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=lS(we);const pt=this.stack[this.stack.length-1];pt.value+=et}function pe(re){const we=this.stack.pop();we.position.end=fl(re.end)}function ye(re){F.call(this,re);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(re)}function _e(re){F.call(this,re);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(re)}function de(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function Tt(){return{type:"heading",depth:0,children:[]}}function je(){return{type:"break"}}function _t(){return{type:"html",value:""}}function Pt(){return{type:"image",title:null,url:"",alt:null}}function Bt(){return{type:"link",title:null,url:"",children:[]}}function kt(re){return{type:"list",ordered:re.type==="listOrdered",start:null,spread:re._spread,children:[]}}function At(re){return{type:"listItem",spread:re._spread,checked:null,children:[]}}function ir(){return{type:"paragraph",children:[]}}function lr(){return{type:"strong",children:[]}}function ft(){return{type:"text",value:""}}function ur(){return{type:"thematicBreak"}}}function fl(e){return{line:e.line,column:e.column,offset:e.offset}}function aP(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?aP(e,n):kW(e,n)}}function kW(e,t){let r;for(r in t)if(nP.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function p_(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+mp({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+mp({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+mp({start:t.start,end:t.end})+") is still open")}function EW(e){const t=this;t.parser=r;function r(n){return SW(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function CW(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function _W(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function AW(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function NW(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LW(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function PW(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),a=_d(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s,l=e.footnoteCounts.get(n);l===void 0?(l=0,e.footnoteOrder.push(n),s=e.footnoteOrder.length):s=i+1,l+=1,e.footnoteCounts.set(n,l);const u={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,h),e.applyData(t,h)}function RW(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function IW(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function iP(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const s=a[a.length-1];return s&&s.type==="text"?s.value+=n:a.push({type:"text",value:n}),a}function DW(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return iP(e,t);const a={src:_d(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(a.title=n.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function MW(e,t){const r={src:_d(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function OW(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function jW(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return iP(e,t);const a={href:_d(n.url||"")};n.title!==null&&n.title!==void 0&&(a.title=n.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function BW(e,t){const r={href:_d(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FW(e,t,r){const n=e.all(t),a=r?zW(r):sP(t),i={},s=[];if(typeof t.checked=="boolean"){const p=n[0];let f;p&&p.type==="element"&&p.tagName==="p"?f=p:(f={type:"element",tagName:"p",properties:{},children:[]},n.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const p=n[l];(a||l!==0||p.type!=="element"||p.tagName!=="p")&&s.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?s.push(...p.children):s.push(p)}const u=n[n.length-1];u&&(a||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:s};return e.patch(t,h),e.applyData(t,h)}function zW(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=sP(r[n])}return t}function sP(e){const t=e.spread;return t??e.children.length>1}function UW(e,t){const r={},n=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<n.length;){const s=n[a];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function $W(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qW(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function HW(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function GW(e,t){const r=e.all(t),n=r.shift(),a=[];if(n){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],s),a.push(s)}if(r.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=Js(t.children[1]),u=W0(t.children[t.children.length-1]);l&&u&&(s.position={start:l,end:u}),a.push(s)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function WW(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",s=r&&r.type==="table"?r.align:void 0,l=s?s.length:t.children.length;let u=-1;const h=[];for(;++u<l;){const f=t.children[u],y={},b=s?s[u]:void 0;b&&(y.align=b);let x={type:"element",tagName:i,properties:y,children:[]};f&&(x.children=e.all(f),e.patch(f,x),x=e.applyData(f,x)),h.push(x)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,p),e.applyData(t,p)}function VW(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const g_=9,f_=32;function YW(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),a=0;const i=[];for(;n;)i.push(m_(t.slice(a,n.index),a>0,!0),n[0]),a=n.index+n[0].length,n=r.exec(t);return i.push(m_(t.slice(a),a>0,!1)),i.join("")}function m_(e,t,r){let n=0,a=e.length;if(t){let i=e.codePointAt(n);for(;i===g_||i===f_;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(a-1);for(;i===g_||i===f_;)a--,i=e.codePointAt(a-1)}return a>n?e.slice(n,a):""}function QW(e,t){const r={type:"text",value:YW(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function KW(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const XW={blockquote:CW,break:_W,code:AW,delete:NW,emphasis:LW,footnoteReference:PW,heading:RW,html:IW,imageReference:DW,image:MW,inlineCode:OW,linkReference:jW,link:BW,listItem:FW,list:UW,paragraph:$W,root:qW,strong:HW,table:GW,tableCell:VW,tableRow:WW,text:QW,thematicBreak:KW,toml:Uf,yaml:Uf,definition:Uf,footnoteDefinition:Uf};function Uf(){}const oP=-1,Q0=0,bp=1,Wm=2,uS=3,dS=4,hS=5,pS=6,lP=7,cP=8,y_=typeof self=="object"?self:globalThis,JW=(e,t)=>{const r=(a,i)=>(e.set(i,a),a),n=a=>{if(e.has(a))return e.get(a);const[i,s]=t[a];switch(i){case Q0:case oP:return r(s,a);case bp:{const l=r([],a);for(const u of s)l.push(n(u));return l}case Wm:{const l=r({},a);for(const[u,h]of s)l[n(u)]=n(h);return l}case uS:return r(new Date(s),a);case dS:{const{source:l,flags:u}=s;return r(new RegExp(l,u),a)}case hS:{const l=r(new Map,a);for(const[u,h]of s)l.set(n(u),n(h));return l}case pS:{const l=r(new Set,a);for(const u of s)l.add(n(u));return l}case lP:{const{name:l,message:u}=s;return r(new y_[l](u),a)}case cP:return r(BigInt(s),a);case"BigInt":return r(Object(BigInt(s)),a);case"ArrayBuffer":return r(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return r(new DataView(l),s)}}return r(new y_[i](s),a)};return n},b_=e=>JW(new Map,e)(0),Du="",{toString:ZW}={},{keys:eV}=Object,jh=e=>{const t=typeof e;if(t!=="object"||!e)return[Q0,t];const r=ZW.call(e).slice(8,-1);switch(r){case"Array":return[bp,Du];case"Object":return[Wm,Du];case"Date":return[uS,Du];case"RegExp":return[dS,Du];case"Map":return[hS,Du];case"Set":return[pS,Du];case"DataView":return[bp,r]}return r.includes("Array")?[bp,r]:r.includes("Error")?[lP,r]:[Wm,r]},$f=([e,t])=>e===Q0&&(t==="function"||t==="symbol"),tV=(e,t,r,n)=>{const a=(s,l)=>{const u=n.push(s)-1;return r.set(l,u),u},i=s=>{if(r.has(s))return r.get(s);let[l,u]=jh(s);switch(l){case Q0:{let p=s;switch(u){case"bigint":l=cP,p=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);p=null;break;case"undefined":return a([oP],s)}return a([l,p],s)}case bp:{if(u){let y=s;return u==="DataView"?y=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(y=new Uint8Array(s)),a([u,[...y]],s)}const p=[],f=a([l,p],s);for(const y of s)p.push(i(y));return f}case Wm:{if(u)switch(u){case"BigInt":return a([u,s.toString()],s);case"Boolean":case"Number":case"String":return a([u,s.valueOf()],s)}if(t&&"toJSON"in s)return i(s.toJSON());const p=[],f=a([l,p],s);for(const y of eV(s))(e||!$f(jh(s[y])))&&p.push([i(y),i(s[y])]);return f}case uS:return a([l,s.toISOString()],s);case dS:{const{source:p,flags:f}=s;return a([l,{source:p,flags:f}],s)}case hS:{const p=[],f=a([l,p],s);for(const[y,b]of s)(e||!($f(jh(y))||$f(jh(b))))&&p.push([i(y),i(b)]);return f}case pS:{const p=[],f=a([l,p],s);for(const y of s)(e||!$f(jh(y)))&&p.push(i(y));return f}}const{message:h}=s;return a([l,{name:u,message:h}],s)};return i},x_=(e,{json:t,lossy:r}={})=>{const n=[];return tV(!(t||r),!!t,new Map,n)(e),n},kc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?b_(x_(e,t)):structuredClone(e):(e,t)=>b_(x_(e,t));function rV(e,t){const r=[{type:"text",value:"↩"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function nV(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function aV(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||rV,n=e.options.footnoteBackLabel||nV,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[u]);if(!h)continue;const p=e.all(h),f=String(h.identifier).toUpperCase(),y=_d(f.toLowerCase());let b=0;const x=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++b<=v;){x.length>0&&x.push({type:"text",value:" "});let C=typeof r=="string"?r:r(u,b);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+y+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(u,b),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const T=p[p.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const C=T.children[T.children.length-1];C&&C.type==="text"?C.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...x)}else p.push(...x);const k={type:"element",tagName:"li",properties:{id:t+"fn-"+y},children:e.wrap(p,!0)};e.patch(h,k),l.push(k)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...kc(s),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const og=(function(e){if(e==null)return lV;if(typeof e=="function")return K0(e);if(typeof e=="object")return Array.isArray(e)?iV(e):sV(e);if(typeof e=="string")return oV(e);throw new Error("Expected function, string, or object as test")});function iV(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=og(e[r]);return K0(n);function n(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function sV(e){const t=e;return K0(r);function r(n){const a=n;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function oV(e){return K0(t);function t(r){return r&&r.type===e}}function K0(e){return t;function t(r,n,a){return!!(cV(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function lV(){return!0}function cV(e){return e!==null&&typeof e=="object"&&"type"in e}const uP=[],uV=!0,Lw=!1,dV="skip";function dP(e,t,r,n){let a;typeof t=="function"&&typeof r!="function"?(n=r,r=t):a=t;const i=og(a),s=n?-1:1;l(e,void 0,[])();function l(u,h,p){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const b=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(u.type+(b?"<"+b+">":""))+")"})}return y;function y(){let b=uP,x,v,T;if((!t||i(u,h,p[p.length-1]||void 0))&&(b=hV(r(u,p)),b[0]===Lw))return b;if("children"in u&&u.children){const k=u;if(k.children&&b[0]!==dV)for(v=(n?k.children.length:-1)+s,T=p.concat(k);v>-1&&v<k.children.length;){const C=k.children[v];if(x=l(C,v,T)(),x[0]===Lw)return x;v=typeof x[1]=="number"?x[1]:v+s}}return b}}}function hV(e){return Array.isArray(e)?e:typeof e=="number"?[uV,e]:e==null?uP:[e]}function lg(e,t,r,n){let a,i,s;typeof t=="function"&&typeof r!="function"?(i=void 0,s=t,a=r):(i=t,s=r,a=n),dP(e,i,l,a);function l(u,h){const p=h[h.length-1],f=p?p.children.indexOf(u):void 0;return s(u,f,p)}}const Pw={}.hasOwnProperty,pV={};function gV(e,t){const r=t||pV,n=new Map,a=new Map,i=new Map,s={...XW,...r.handlers},l={all:h,applyData:mV,definitionById:n,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:s,one:u,options:r,patch:fV,wrap:bV};return lg(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const f=p.type==="definition"?n:a,y=String(p.identifier).toUpperCase();f.has(y)||f.set(y,p)}}),l;function u(p,f){const y=p.type,b=l.handlers[y];if(Pw.call(l.handlers,y)&&b)return b(l,p,f);if(l.options.passThrough&&l.options.passThrough.includes(y)){if("children"in p){const{children:v,...T}=p,k=kc(T);return k.children=l.all(p),k}return kc(p)}return(l.options.unknownHandler||yV)(l,p,f)}function h(p){const f=[];if("children"in p){const y=p.children;let b=-1;for(;++b<y.length;){const x=l.one(y[b],p);if(x){if(b&&y[b-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=v_(x.value)),!Array.isArray(x)&&x.type==="element")){const v=x.children[0];v&&v.type==="text"&&(v.value=v_(v.value))}Array.isArray(x)?f.push(...x):f.push(x)}}}return f}}function fV(e,t){e.position&&(t.position=zL(e))}function mV(e,t){let r=t;if(e&&e.data){const n=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const s="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:s}}r.type==="element"&&i&&Object.assign(r.properties,kc(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function yV(e,t){const r=t.data||{},n="value"in t&&!(Pw.call(r,"hProperties")||Pw.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bV(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function v_(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function w_(e,t){const r=gV(e,t),n=r.one(e,void 0),a=aV(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function xV(e,t){return e&&"run"in e?async function(r,n){const a=w_(r,{file:n,...t});await e.run(a,n)}:function(r,n){return w_(r,{file:n,...e||t})}}function S_(e){if(e)throw e}var lv,T_;function vV(){if(T_)return lv;T_=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},i=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var p=e.call(h,"constructor"),f=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!f)return!1;var y;for(y in h);return typeof y>"u"||e.call(h,y)},s=function(h,p){r&&p.name==="__proto__"?r(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},l=function(h,p){if(p==="__proto__")if(e.call(h,p)){if(n)return n(h,p).value}else return;return h[p]};return lv=function u(){var h,p,f,y,b,x,v=arguments[0],T=1,k=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},T=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});T<k;++T)if(h=arguments[T],h!=null)for(p in h)f=l(v,p),y=l(h,p),v!==y&&(C&&y&&(i(y)||(b=a(y)))?(b?(b=!1,x=f&&a(f)?f:[]):x=f&&i(f)?f:{},s(v,{name:p,newValue:u(C,x,y)})):typeof y<"u"&&s(v,{name:p,newValue:y}));return v},lv}var wV=vV();const cv=Ic(wV);function Rw(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function SV(){const e=[],t={run:r,use:n};return t;function r(...a){let i=-1;const s=a.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...a);function l(u,...h){const p=e[++i];let f=-1;if(u){s(u);return}for(;++f<a.length;)(h[f]===null||h[f]===void 0)&&(h[f]=a[f]);a=h,p?TV(p,l)(...h):s(null,...h)}}function n(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function TV(e,t){let r;return n;function n(...s){const l=e.length>s.length;let u;l&&s.push(a);try{u=e.apply(this,s)}catch(h){const p=h;if(l&&r)throw p;return a(p)}l||(u&&u.then&&typeof u.then=="function"?u.then(i,a):u instanceof Error?a(u):i(u))}function a(s,...l){r||(r=!0,t(s,...l))}function i(s){a(null,s)}}const $s={basename:kV,dirname:EV,extname:CV,join:_V,sep:"/"};function kV(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');cg(e);let r=0,n=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else n<0&&(i=!0,n=a+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let s=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(n=a):(l=-1,n=s));return r===n?n=s:n<0&&(n=e.length),e.slice(r,n)}function EV(e){if(cg(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function CV(e){cg(e);let t=e.length,r=-1,n=0,a=-1,i=0,s;for(;t--;){const l=e.codePointAt(t);if(l===47){if(s){n=t+1;break}continue}r<0&&(s=!0,r=t+1),l===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===n+1?"":e.slice(a,r)}function _V(...e){let t=-1,r;for(;++t<e.length;)cg(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":AV(r)}function AV(e){cg(e);const t=e.codePointAt(0)===47;let r=NV(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function NV(e,t){let r="",n=0,a=-1,i=0,s=-1,l,u;for(;++s<=e.length;){if(s<e.length)l=e.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(a===s-1||i===1))if(a!==s-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(u=r.lastIndexOf("/"),u!==r.length-1){u<0?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),a=s,i=0;continue}}else if(r.length>0){r="",n=0,a=s,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(a+1,s):r=e.slice(a+1,s),n=s-a-1;a=s,i=0}else l===46&&i>-1?i++:i=-1}return r}function cg(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const LV={cwd:PV};function PV(){return"/"}function Iw(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function RV(e){if(typeof e=="string")e=new URL(e);else if(!Iw(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return IV(e)}function IV(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const uv=["history","path","basename","stem","extname","dirname"];class hP{constructor(t){let r;t?Iw(t)?r={path:t}:typeof t=="string"||DV(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":LV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<uv.length;){const i=uv[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)uv.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?$s.basename(this.path):void 0}set basename(t){hv(t,"basename"),dv(t,"basename"),this.path=$s.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?$s.dirname(this.path):void 0}set dirname(t){k_(this.basename,"dirname"),this.path=$s.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?$s.extname(this.path):void 0}set extname(t){if(dv(t,"extname"),k_(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$s.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Iw(t)&&(t=RV(t)),hv(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?$s.basename(this.path,this.extname):void 0}set stem(t){hv(t,"stem"),dv(t,"stem"),this.path=$s.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const a=this.message(t,r,n);throw a.fatal=!0,a}info(t,r,n){const a=this.message(t,r,n);return a.fatal=void 0,a}message(t,r,n){const a=new ja(t,r,n);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function dv(e,t){if(e&&e.includes($s.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$s.sep+"`")}function hv(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function k_(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function DV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const MV=(function(e){const n=this.constructor.prototype,a=n[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),OV={}.hasOwnProperty;class gS extends MV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=SV()}copy(){const t=new gS;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(cv(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(fv("data",this.frozen),this.namespace[t]=r,this):OV.call(this.namespace,t)&&this.namespace[t]||void 0:t?(fv("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const a=r.call(t,...n);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=qf(t),n=this.parser||this.Parser;return pv("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),pv("process",this.parser||this.Parser),gv("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,s){const l=qf(t),u=n.parse(l);n.run(u,l,function(p,f,y){if(p||!f||!y)return h(p);const b=f,x=n.stringify(b,y);FV(x)?y.value=x:y.result=x,h(p,y)});function h(p,f){p||!f?s(p):i?i(f):r(void 0,f)}}}processSync(t){let r=!1,n;return this.freeze(),pv("processSync",this.parser||this.Parser),gv("processSync",this.compiler||this.Compiler),this.process(t,a),C_("processSync","process",r),n;function a(i,s){r=!0,S_(i),n=s}}run(t,r,n){E_(t),this.freeze();const a=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(s,l){const u=qf(r);a.run(t,u,h);function h(p,f,y){const b=f||t;p?l(p):s?s(b):n(void 0,b,y)}}}runSync(t,r){let n=!1,a;return this.run(t,r,i),C_("runSync","run",n),a;function i(s,l){S_(s),a=l,n=!0}}stringify(t,r){this.freeze();const n=qf(r),a=this.compiler||this.Compiler;return gv("stringify",a),E_(t),a(t,n)}use(t,...r){const n=this.attachers,a=this.namespace;if(fv("use",this.frozen),t!=null)if(typeof t=="function")u(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...f]=h;u(p,f)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(a.settings=cv(!0,a.settings,h.settings))}function l(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const f=h[p];i(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,p){let f=-1,y=-1;for(;++f<n.length;)if(n[f][0]===h){y=f;break}if(y===-1)n.push([h,...p]);else if(p.length>0){let[b,...x]=p;const v=n[y][1];Rw(v)&&Rw(b)&&(b=cv(!0,v,b)),n[y]=[h,b,...x]}}}}const jV=new gS().freeze();function pv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function gv(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function fv(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function E_(e){if(!Rw(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function C_(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function qf(e){return BV(e)?e:new hP(e)}function BV(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function FV(e){return typeof e=="string"||zV(e)}function zV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const UV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",__=[],A_={allowDangerousHtml:!0},$V=/^(https?|ircs?|mailto|xmpp)$/i,qV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Vm(e){const t=HV(e),r=GV(e);return WV(t.runSync(t.parse(r),r),e)}function HV(e){const t=e.rehypePlugins||__,r=e.remarkPlugins||__,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...A_}:A_;return jV().use(EW).use(r).use(xV,n).use(t)}function GV(e){const t=e.children||"",r=new hP;return typeof t=="string"&&(r.value=t),r}function WV(e,t){const r=t.allowedElements,n=t.allowElement,a=t.components,i=t.disallowedElements,s=t.skipHtml,l=t.unwrapDisallowed,u=t.urlTransform||VV;for(const p of qV)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+UV+p.id,void 0);return lg(e,h),lH(e,{Fragment:d.Fragment,components:a,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function h(p,f,y){if(p.type==="raw"&&y&&typeof f=="number")return s?y.children.splice(f,1):y.children[f]={type:"text",value:p.value},f;if(p.type==="element"){let b;for(b in iv)if(Object.hasOwn(iv,b)&&Object.hasOwn(p.properties,b)){const x=p.properties[b],v=iv[b];(v===null||v.includes(p.tagName))&&(p.properties[b]=u(String(x||""),b,p))}}if(p.type==="element"){let b=r?!r.includes(p.tagName):i?i.includes(p.tagName):!1;if(!b&&n&&typeof f=="number"&&(b=!n(p,f,y)),b&&y&&typeof f=="number")return l&&p.children?y.children.splice(f,1,...p.children):y.children.splice(f,1),f}}}function VV(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||n!==-1&&t>n||$V.test(e.slice(0,t))?e:""}function N_(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,a=r.indexOf(t);for(;a!==-1;)n++,a=r.indexOf(t,a+t.length);return n}function YV(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function QV(e,t,r){const a=og((r||{}).ignore||[]),i=KV(t);let s=-1;for(;++s<i.length;)dP(e,"text",l);function l(h,p){let f=-1,y;for(;++f<p.length;){const b=p[f],x=y?y.children:void 0;if(a(b,x?x.indexOf(b):void 0,y))return;y=b}if(y)return u(h,p)}function u(h,p){const f=p[p.length-1],y=i[s][0],b=i[s][1];let x=0;const T=f.children.indexOf(h);let k=!1,C=[];y.lastIndex=0;let A=y.exec(h.value);for(;A;){const P=A.index,M={index:A.index,input:A.input,stack:[...p,h]};let L=b(...A,M);if(typeof L=="string"&&(L=L.length>0?{type:"text",value:L}:void 0),L===!1?y.lastIndex=P+1:(x!==P&&C.push({type:"text",value:h.value.slice(x,P)}),Array.isArray(L)?C.push(...L):L&&C.push(L),x=P+A[0].length,k=!0),!y.global)break;A=y.exec(h.value)}return k?(x<h.value.length&&C.push({type:"text",value:h.value.slice(x)}),f.children.splice(T,1,...C)):C=[h],T+C.length}}function KV(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const a=r[n];t.push([XV(a[0]),JV(a[1])])}return t}function XV(e){return typeof e=="string"?new RegExp(YV(e),"g"):e}function JV(e){return typeof e=="function"?e:function(){return e}}const mv="phrasing",yv=["autolink","link","image","label"];function ZV(){return{transforms:[sY],enter:{literalAutolink:tY,literalAutolinkEmail:bv,literalAutolinkHttp:bv,literalAutolinkWww:bv},exit:{literalAutolink:iY,literalAutolinkEmail:aY,literalAutolinkHttp:rY,literalAutolinkWww:nY}}}function eY(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:mv,notInConstruct:yv},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:mv,notInConstruct:yv},{character:":",before:"[ps]",after:"\\/",inConstruct:mv,notInConstruct:yv}]}}function tY(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function bv(e){this.config.enter.autolinkProtocol.call(this,e)}function rY(e){this.config.exit.autolinkProtocol.call(this,e)}function nY(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function aY(e){this.config.exit.autolinkEmail.call(this,e)}function iY(e){this.exit(e)}function sY(e){QV(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,oY],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),lY]],{ignore:["link","linkReference"]})}function oY(e,t,r,n,a){let i="";if(!pP(a)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!cY(r)))return!1;const s=uY(r+n);if(!s[0])return!1;const l={type:"link",title:null,url:i+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function lY(e,t,r,n){return!pP(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function cY(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function uY(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const a=N_(e,"(");let i=N_(e,")");for(;n!==-1&&a>i;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[e,r]}function pP(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Tc(r)||V0(r))&&(!t||r!==47)}gP.peek=xY;function dY(){this.buffer()}function hY(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function pY(){this.buffer()}function gY(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function fY(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ws(this.sliceSerialize(e)).toLowerCase(),r.label=t}function mY(e){this.exit(e)}function yY(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ws(this.sliceSerialize(e)).toLowerCase(),r.label=t}function bY(e){this.exit(e)}function xY(){return"["}function gP(e,t,r,n){const a=r.createTracker(n);let i=a.move("[^");const s=r.enter("footnoteReference"),l=r.enter("reference");return i+=a.move(r.safe(r.associationId(e),{after:"]",before:i})),l(),s(),i+=a.move("]"),i}function vY(){return{enter:{gfmFootnoteCallString:dY,gfmFootnoteCall:hY,gfmFootnoteDefinitionLabelString:pY,gfmFootnoteDefinition:gY},exit:{gfmFootnoteCallString:fY,gfmFootnoteCall:mY,gfmFootnoteDefinitionLabelString:yY,gfmFootnoteDefinition:bY}}}function wY(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:gP},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,a,i,s){const l=i.createTracker(s);let u=l.move("[^");const h=i.enter("footnoteDefinition"),p=i.enter("label");return u+=l.move(i.safe(i.associationId(n),{before:u,after:"]"})),p(),u+=l.move("]:"),n.children&&n.children.length>0&&(l.shift(4),u+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(n,l.current()),t?fP:SY))),h(),u}}function SY(e,t,r){return t===0?e:fP(e,t,r)}function fP(e,t,r){return(r?"":"    ")+e}const TY=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];mP.peek=AY;function kY(){return{canContainEols:["delete"],enter:{strikethrough:CY},exit:{strikethrough:_Y}}}function EY(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:TY}],handlers:{delete:mP}}}function CY(e){this.enter({type:"delete",children:[]},e)}function _Y(e){this.exit(e)}function mP(e,t,r,n){const a=r.createTracker(n),i=r.enter("strikethrough");let s=a.move("~~");return s+=r.containerPhrasing(e,{...a.current(),before:s,after:"~"}),s+=a.move("~~"),i(),s}function AY(){return"~"}function NY(e){return e.length}function LY(e,t){const r=t||{},n=(r.align||[]).concat(),a=r.stringLength||NY,i=[],s=[],l=[],u=[];let h=0,p=-1;for(;++p<e.length;){const v=[],T=[];let k=-1;for(e[p].length>h&&(h=e[p].length);++k<e[p].length;){const C=PY(e[p][k]);if(r.alignDelimiters!==!1){const A=a(C);T[k]=A,(u[k]===void 0||A>u[k])&&(u[k]=A)}v.push(C)}s[p]=v,l[p]=T}let f=-1;if(typeof n=="object"&&"length"in n)for(;++f<h;)i[f]=L_(n[f]);else{const v=L_(n);for(;++f<h;)i[f]=v}f=-1;const y=[],b=[];for(;++f<h;){const v=i[f];let T="",k="";v===99?(T=":",k=":"):v===108?T=":":v===114&&(k=":");let C=r.alignDelimiters===!1?1:Math.max(1,u[f]-T.length-k.length);const A=T+"-".repeat(C)+k;r.alignDelimiters!==!1&&(C=T.length+C+k.length,C>u[f]&&(u[f]=C),b[f]=C),y[f]=A}s.splice(1,0,y),l.splice(1,0,b),p=-1;const x=[];for(;++p<s.length;){const v=s[p],T=l[p];f=-1;const k=[];for(;++f<h;){const C=v[f]||"";let A="",P="";if(r.alignDelimiters!==!1){const M=u[f]-(T[f]||0),L=i[f];L===114?A=" ".repeat(M):L===99?M%2?(A=" ".repeat(M/2+.5),P=" ".repeat(M/2-.5)):(A=" ".repeat(M/2),P=A):P=" ".repeat(M)}r.delimiterStart!==!1&&!f&&k.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&C==="")&&(r.delimiterStart!==!1||f)&&k.push(" "),r.alignDelimiters!==!1&&k.push(A),k.push(C),r.alignDelimiters!==!1&&k.push(P),r.padding!==!1&&k.push(" "),(r.delimiterEnd!==!1||f!==h-1)&&k.push("|")}x.push(r.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return x.join(`
`)}function PY(e){return e==null?"":String(e)}function L_(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const P_={}.hasOwnProperty;function yP(e,t){const r=t||{};function n(a,...i){let s=n.invalid;const l=n.handlers;if(a&&P_.call(a,e)){const u=String(a[e]);s=P_.call(l,u)?l[u]:n.unknown}if(s)return s.call(this,a,...i)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}function RY(e,t,r,n){const a=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const s=r.indentLines(r.containerFlow(e,i.current()),IY);return a(),s}function IY(e,t,r){return">"+(r?"":" ")+e}function DY(e,t){return R_(e,t.inConstruct,!0)&&!R_(e,t.notInConstruct,!1)}function R_(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function I_(e,t,r,n){let a=-1;for(;++a<r.unsafe.length;)if(r.unsafe[a].character===`
`&&DY(r.stack,r.unsafe[a]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function MY(e,t){const r=String(e);let n=r.indexOf(t),a=n,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===a?++i>s&&(s=i):i=1,a=n+t.length,n=r.indexOf(t,a);return s}function OY(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function jY(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function BY(e,t,r,n){const a=jY(r),i=e.value||"",s=a==="`"?"GraveAccent":"Tilde";if(OY(e,r)){const f=r.enter("codeIndented"),y=r.indentLines(i,FY);return f(),y}const l=r.createTracker(n),u=a.repeat(Math.max(MY(i,a)+1,3)),h=r.enter("codeFenced");let p=l.move(u);if(e.lang){const f=r.enter(`codeFencedLang${s}`);p+=l.move(r.safe(e.lang,{before:p,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=r.enter(`codeFencedMeta${s}`);p+=l.move(" "),p+=l.move(r.safe(e.meta,{before:p,after:`
`,encode:["`"],...l.current()})),f()}return p+=l.move(`
`),i&&(p+=l.move(i+`
`)),p+=l.move(u),h(),p}function FY(e,t,r){return(r?"":"    ")+e}function fS(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function zY(e,t,r,n){const a=fS(r),i=a==='"'?"Quote":"Apostrophe",s=r.enter("definition");let l=r.enter("label");const u=r.createTracker(n);let h=u.move("[");return h+=u.move(r.safe(r.associationId(e),{before:h,after:"]",...u.current()})),h+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(r.safe(e.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=r.enter("destinationRaw"),h+=u.move(r.safe(e.url,{before:h,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=r.enter(`title${i}`),h+=u.move(" "+a),h+=u.move(r.safe(e.title,{before:h,after:a,...u.current()})),h+=u.move(a),l()),s(),h}function UY(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Bp(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ym(e,t,r){const n=cd(e),a=cd(t);return n===void 0?a===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}bP.peek=$Y;function bP(e,t,r,n){const a=UY(r),i=r.enter("emphasis"),s=r.createTracker(n),l=s.move(a);let u=s.move(r.containerPhrasing(e,{after:a,before:l,...s.current()}));const h=u.charCodeAt(0),p=Ym(n.before.charCodeAt(n.before.length-1),h,a);p.inside&&(u=Bp(h)+u.slice(1));const f=u.charCodeAt(u.length-1),y=Ym(n.after.charCodeAt(0),f,a);y.inside&&(u=u.slice(0,-1)+Bp(f));const b=s.move(a);return i(),r.attentionEncodeSurroundingInfo={after:y.outside,before:p.outside},l+u+b}function $Y(e,t,r){return r.options.emphasis||"*"}function qY(e,t){let r=!1;return lg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Lw}),!!((!e.depth||e.depth<3)&&oS(e)&&(t.options.setext||r))}function HY(e,t,r,n){const a=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(n);if(qY(e,r)){const p=r.enter("headingSetext"),f=r.enter("phrasing"),y=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return f(),p(),y+`
`+(a===1?"=":"-").repeat(y.length-(Math.max(y.lastIndexOf("\r"),y.lastIndexOf(`
`))+1))}const s="#".repeat(a),l=r.enter("headingAtx"),u=r.enter("phrasing");i.move(s+" ");let h=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=Bp(h.charCodeAt(0))+h.slice(1)),h=h?s+" "+h:s,r.options.closeAtx&&(h+=" "+s),u(),l(),h}xP.peek=GY;function xP(e){return e.value||""}function GY(){return"<"}vP.peek=WY;function vP(e,t,r,n){const a=fS(r),i=a==='"'?"Quote":"Apostrophe",s=r.enter("image");let l=r.enter("label");const u=r.createTracker(n);let h=u.move("![");return h+=u.move(r.safe(e.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(r.safe(e.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(l=r.enter("destinationRaw"),h+=u.move(r.safe(e.url,{before:h,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=r.enter(`title${i}`),h+=u.move(" "+a),h+=u.move(r.safe(e.title,{before:h,after:a,...u.current()})),h+=u.move(a),l()),h+=u.move(")"),s(),h}function WY(){return"!"}wP.peek=VY;function wP(e,t,r,n){const a=e.referenceType,i=r.enter("imageReference");let s=r.enter("label");const l=r.createTracker(n);let u=l.move("![");const h=r.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),s();const p=r.stack;r.stack=[],s=r.enter("reference");const f=r.safe(r.associationId(e),{before:u,after:"]",...l.current()});return s(),r.stack=p,i(),a==="full"||!h||h!==f?u+=l.move(f+"]"):a==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function VY(){return"!"}SP.peek=YY;function SP(e,t,r){let n=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(n);)a+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const s=r.unsafe[i],l=r.compilePattern(s);let u;if(s.atBreak)for(;u=l.exec(n);){let h=u.index;n.charCodeAt(h)===10&&n.charCodeAt(h-1)===13&&h--,n=n.slice(0,h)+" "+n.slice(u.index+1)}}return a+n+a}function YY(){return"`"}function TP(e,t){const r=oS(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}kP.peek=QY;function kP(e,t,r,n){const a=fS(r),i=a==='"'?"Quote":"Apostrophe",s=r.createTracker(n);let l,u;if(TP(e,r)){const p=r.stack;r.stack=[],l=r.enter("autolink");let f=s.move("<");return f+=s.move(r.containerPhrasing(e,{before:f,after:">",...s.current()})),f+=s.move(">"),l(),r.stack=p,f}l=r.enter("link"),u=r.enter("label");let h=s.move("[");return h+=s.move(r.containerPhrasing(e,{before:h,after:"](",...s.current()})),h+=s.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=r.enter("destinationLiteral"),h+=s.move("<"),h+=s.move(r.safe(e.url,{before:h,after:">",...s.current()})),h+=s.move(">")):(u=r.enter("destinationRaw"),h+=s.move(r.safe(e.url,{before:h,after:e.title?" ":")",...s.current()}))),u(),e.title&&(u=r.enter(`title${i}`),h+=s.move(" "+a),h+=s.move(r.safe(e.title,{before:h,after:a,...s.current()})),h+=s.move(a),u()),h+=s.move(")"),l(),h}function QY(e,t,r){return TP(e,r)?"<":"["}EP.peek=KY;function EP(e,t,r,n){const a=e.referenceType,i=r.enter("linkReference");let s=r.enter("label");const l=r.createTracker(n);let u=l.move("[");const h=r.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(h+"]["),s();const p=r.stack;r.stack=[],s=r.enter("reference");const f=r.safe(r.associationId(e),{before:u,after:"]",...l.current()});return s(),r.stack=p,i(),a==="full"||!h||h!==f?u+=l.move(f+"]"):a==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function KY(){return"["}function mS(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function XY(e){const t=mS(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function JY(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function CP(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function ZY(e,t,r,n){const a=r.enter("list"),i=r.bulletCurrent;let s=e.ordered?JY(r):mS(r);const l=e.ordered?s==="."?")":".":XY(r);let u=t&&r.bulletLastUsed?s===r.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&p&&(!p.children||!p.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(u=!0),CP(r)===s&&p){let f=-1;for(;++f<e.children.length;){const y=e.children[f];if(y&&y.type==="listItem"&&y.children&&y.children[0]&&y.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=l),r.bulletCurrent=s;const h=r.containerFlow(e,n);return r.bulletLastUsed=s,r.bulletCurrent=i,a(),h}function eQ(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function tQ(e,t,r,n){const a=eQ(r);let i=r.bulletCurrent||mS(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const l=r.createTracker(n);l.move(i+" ".repeat(s-i.length)),l.shift(s);const u=r.enter("listItem"),h=r.indentLines(r.containerFlow(e,l.current()),p);return u(),h;function p(f,y,b){return y?(b?"":" ".repeat(s))+f:(b?i:i+" ".repeat(s-i.length))+f}}function rQ(e,t,r,n){const a=r.enter("paragraph"),i=r.enter("phrasing"),s=r.containerPhrasing(e,n);return i(),a(),s}const nQ=og(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function aQ(e,t,r,n){return(e.children.some(function(s){return nQ(s)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function iQ(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}_P.peek=sQ;function _P(e,t,r,n){const a=iQ(r),i=r.enter("strong"),s=r.createTracker(n),l=s.move(a+a);let u=s.move(r.containerPhrasing(e,{after:a,before:l,...s.current()}));const h=u.charCodeAt(0),p=Ym(n.before.charCodeAt(n.before.length-1),h,a);p.inside&&(u=Bp(h)+u.slice(1));const f=u.charCodeAt(u.length-1),y=Ym(n.after.charCodeAt(0),f,a);y.inside&&(u=u.slice(0,-1)+Bp(f));const b=s.move(a+a);return i(),r.attentionEncodeSurroundingInfo={after:y.outside,before:p.outside},l+u+b}function sQ(e,t,r){return r.options.strong||"*"}function oQ(e,t,r,n){return r.safe(e.value,n)}function lQ(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function cQ(e,t,r){const n=(CP(r)+(r.options.ruleSpaces?" ":"")).repeat(lQ(r));return r.options.ruleSpaces?n.slice(0,-1):n}const AP={blockquote:RY,break:I_,code:BY,definition:zY,emphasis:bP,hardBreak:I_,heading:HY,html:xP,image:vP,imageReference:wP,inlineCode:SP,link:kP,linkReference:EP,list:ZY,listItem:tQ,paragraph:rQ,root:aQ,strong:_P,text:oQ,thematicBreak:cQ};function uQ(){return{enter:{table:dQ,tableData:D_,tableHeader:D_,tableRow:pQ},exit:{codeText:gQ,table:hQ,tableData:xv,tableHeader:xv,tableRow:xv}}}function dQ(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function hQ(e){this.exit(e),this.data.inTable=void 0}function pQ(e){this.enter({type:"tableRow",children:[]},e)}function xv(e){this.exit(e)}function D_(e){this.enter({type:"tableCell",children:[]},e)}function gQ(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,fQ));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function fQ(e,t){return t==="|"?t:e}function mQ(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,a=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:y,table:s,tableCell:u,tableRow:l}};function s(b,x,v,T){return h(p(b,v,T),b.align)}function l(b,x,v,T){const k=f(b,v,T),C=h([k]);return C.slice(0,C.indexOf(`
`))}function u(b,x,v,T){const k=v.enter("tableCell"),C=v.enter("phrasing"),A=v.containerPhrasing(b,{...T,before:i,after:i});return C(),k(),A}function h(b,x){return LY(b,{align:x,alignDelimiters:n,padding:r,stringLength:a})}function p(b,x,v){const T=b.children;let k=-1;const C=[],A=x.enter("table");for(;++k<T.length;)C[k]=f(T[k],x,v);return A(),C}function f(b,x,v){const T=b.children;let k=-1;const C=[],A=x.enter("tableRow");for(;++k<T.length;)C[k]=u(T[k],b,x,v);return A(),C}function y(b,x,v){let T=AP.inlineCode(b,x,v);return v.stack.includes("tableCell")&&(T=T.replace(/\|/g,"\\$&")),T}}function yQ(){return{exit:{taskListCheckValueChecked:M_,taskListCheckValueUnchecked:M_,paragraph:xQ}}}function bQ(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:vQ}}}function M_(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function xQ(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const a=t.children;let i=-1,s;for(;++i<a.length;){const l=a[i];if(l.type==="paragraph"){s=l;break}}s===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function vQ(e,t,r,n){const a=e.children[0],i=typeof e.checked=="boolean"&&a&&a.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",l=r.createTracker(n);i&&l.move(s);let u=AP.listItem(e,t,r,{...n,...l.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(p){return p+s}}function wQ(){return[ZV(),vY(),kY(),uQ(),yQ()]}function SQ(e){return{extensions:[eY(),wY(e),EY(),mQ(e),bQ()]}}const TQ={tokenize:NQ,partial:!0},NP={tokenize:LQ,partial:!0},LP={tokenize:PQ,partial:!0},PP={tokenize:RQ,partial:!0},kQ={tokenize:IQ,partial:!0},RP={name:"wwwAutolink",tokenize:_Q,previous:DP},IP={name:"protocolAutolink",tokenize:AQ,previous:MP},zo={name:"emailAutolink",tokenize:CQ,previous:OP},Zs={};function EQ(){return{text:Zs}}let tc=48;for(;tc<123;)Zs[tc]=zo,tc++,tc===58?tc=65:tc===91&&(tc=97);Zs[43]=zo;Zs[45]=zo;Zs[46]=zo;Zs[95]=zo;Zs[72]=[zo,IP];Zs[104]=[zo,IP];Zs[87]=[zo,RP];Zs[119]=[zo,RP];function CQ(e,t,r){const n=this;let a,i;return s;function s(f){return!Dw(f)||!OP.call(n,n.previous)||yS(n.events)?r(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return Dw(f)?(e.consume(f),l):f===64?(e.consume(f),u):r(f)}function u(f){return f===46?e.check(kQ,p,h)(f):f===45||f===95||Ra(f)?(i=!0,e.consume(f),u):p(f)}function h(f){return e.consume(f),a=!0,u}function p(f){return i&&a&&Ya(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):r(f)}}function _Q(e,t,r){const n=this;return a;function a(s){return s!==87&&s!==119||!DP.call(n,n.previous)||yS(n.events)?r(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(TQ,e.attempt(NP,e.attempt(LP,i),r),r)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function AQ(e,t,r){const n=this;let a="",i=!1;return s;function s(f){return(f===72||f===104)&&MP.call(n,n.previous)&&!yS(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(f),e.consume(f),l):r(f)}function l(f){if(Ya(f)&&a.length<5)return a+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const y=a.toLowerCase();if(y==="http"||y==="https")return e.consume(f),u}return r(f)}function u(f){return f===47?(e.consume(f),i?h:(i=!0,u)):r(f)}function h(f){return f===null||Gm(f)||rn(f)||Tc(f)||V0(f)?r(f):e.attempt(NP,e.attempt(LP,p),r)(f)}function p(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function NQ(e,t,r){let n=0;return a;function a(s){return(s===87||s===119)&&n<3?(n++,e.consume(s),a):s===46&&n===3?(e.consume(s),i):r(s)}function i(s){return s===null?r(s):t(s)}}function LQ(e,t,r){let n,a,i;return s;function s(h){return h===46||h===95?e.check(PP,u,l)(h):h===null||rn(h)||Tc(h)||h!==45&&V0(h)?u(h):(i=!0,e.consume(h),s)}function l(h){return h===95?n=!0:(a=n,n=void 0),e.consume(h),s}function u(h){return a||n||!i?r(h):t(h)}}function PQ(e,t){let r=0,n=0;return a;function a(s){return s===40?(r++,e.consume(s),a):s===41&&n<r?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(PP,t,i)(s):s===null||rn(s)||Tc(s)?t(s):(e.consume(s),a)}function i(s){return s===41&&n++,e.consume(s),a}}function RQ(e,t,r){return n;function n(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),n):l===38?(e.consume(l),i):l===93?(e.consume(l),a):l===60||l===null||rn(l)||Tc(l)?t(l):r(l)}function a(l){return l===null||l===40||l===91||rn(l)||Tc(l)?t(l):n(l)}function i(l){return Ya(l)?s(l):r(l)}function s(l){return l===59?(e.consume(l),n):Ya(l)?(e.consume(l),s):r(l)}}function IQ(e,t,r){return n;function n(i){return e.consume(i),a}function a(i){return Ra(i)?r(i):t(i)}}function DP(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||rn(e)}function MP(e){return!Ya(e)}function OP(e){return!(e===47||Dw(e))}function Dw(e){return e===43||e===45||e===46||e===95||Ra(e)}function yS(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const DQ={tokenize:$Q,partial:!0};function MQ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:FQ,continuation:{tokenize:zQ},exit:UQ}},text:{91:{name:"gfmFootnoteCall",tokenize:BQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:OQ,resolveTo:jQ}}}}function OQ(e,t,r){const n=this;let a=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;a--;){const u=n.events[a][1];if(u.type==="labelImage"){s=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!s||!s._balanced)return r(u);const h=ws(n.sliceSerialize({start:s.end,end:n.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?r(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function jQ(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...l),e}function BQ(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i=0,s;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),u}function u(f){return f!==94?r(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(f){if(i>999||f===93&&!s||f===null||f===91||rn(f))return r(f);if(f===93){e.exit("chunkString");const y=e.exit("gfmFootnoteCallString");return a.includes(ws(n.sliceSerialize(y)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(f)}return rn(f)||(s=!0),i++,e.consume(f),f===92?p:h}function p(f){return f===91||f===92||f===93?(e.consume(f),i++,h):h(f)}}function FQ(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,s=0,l;return u;function u(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):r(x)}function p(x){if(s>999||x===93&&!l||x===null||x===91||rn(x))return r(x);if(x===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return i=ws(n.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),y}return rn(x)||(l=!0),s++,e.consume(x),x===92?f:p}function f(x){return x===91||x===92||x===93?(e.consume(x),s++,p):p(x)}function y(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(i)||a.push(i),Pr(e,b,"gfmFootnoteDefinitionWhitespace")):r(x)}function b(x){return t(x)}}function zQ(e,t,r){return e.check(sg,t,e.attempt(DQ,t,r))}function UQ(e){e.exit("gfmFootnoteDefinition")}function $Q(e,t,r){const n=this;return Pr(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const s=n.events[n.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):r(i)}}function qQ(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:a};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function a(s,l){let u=-1;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._close){let h=u;for(;h--;)if(s[h][0]==="exit"&&s[h][1].type==="strikethroughSequenceTemporary"&&s[h][1]._open&&s[u][1].end.offset-s[u][1].start.offset===s[h][1].end.offset-s[h][1].start.offset){s[u][1].type="strikethroughSequence",s[h][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},s[h][1].start),end:Object.assign({},s[u][1].end)},f={type:"strikethroughText",start:Object.assign({},s[h][1].end),end:Object.assign({},s[u][1].start)},y=[["enter",p,l],["enter",s[h][1],l],["exit",s[h][1],l],["enter",f,l]],b=l.parser.constructs.insideSpan.null;b&&Ri(y,y.length,0,Y0(b,s.slice(h+1,u),l)),Ri(y,y.length,0,[["exit",f,l],["enter",s[u][1],l],["exit",s[u][1],l],["exit",p,l]]),Ri(s,h-1,u-h+3,y),u=h+y.length-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="strikethroughSequenceTemporary"&&(s[u][1].type="data");return s}function i(s,l,u){const h=this.previous,p=this.events;let f=0;return y;function y(x){return h===126&&p[p.length-1][1].type!=="characterEscape"?u(x):(s.enter("strikethroughSequenceTemporary"),b(x))}function b(x){const v=cd(h);if(x===126)return f>1?u(x):(s.consume(x),f++,b);if(f<2&&!r)return u(x);const T=s.exit("strikethroughSequenceTemporary"),k=cd(x);return T._open=!k||k===2&&!!v,T._close=!v||v===2&&!!k,l(x)}}}class HQ{constructor(){this.map=[]}add(t,r,n){GQ(this,t,r,n)}consume(t){if(this.map.sort(function(i,s){return i[0]-s[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let a=n.pop();for(;a;){for(const i of a)t.push(i);a=n.pop()}this.map.length=0}}function GQ(e,t,r,n){let a=0;if(!(r===0&&n.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=r,e.map[a][2].push(...n);return}a+=1}e.map.push([t,r,n])}}function WQ(e,t){let r=!1;const n=[];for(;t<e.length;){const a=e[t];if(r){if(a[0]==="enter")a[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=n.length-1;n[i]=n[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function VQ(){return{flow:{null:{name:"table",tokenize:YQ,resolveAll:QQ}}}}function YQ(e,t,r){const n=this;let a=0,i=0,s;return l;function l(F){let K=n.events.length-1;for(;K>-1;){const O=n.events[K][1].type;if(O==="lineEnding"||O==="linePrefix")K--;else break}const W=K>-1?n.events[K][1].type:null,j=W==="tableHead"||W==="tableRow"?L:u;return j===L&&n.parser.lazy[n.now().line]?r(F):j(F)}function u(F){return e.enter("tableHead"),e.enter("tableRow"),h(F)}function h(F){return F===124||(s=!0,i+=1),p(F)}function p(F){return F===null?r(F):$t(F)?i>1?(i=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),b):r(F):xr(F)?Pr(e,p,"whitespace")(F):(i+=1,s&&(s=!1,a+=1),F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),s=!0,p):(e.enter("data"),f(F)))}function f(F){return F===null||F===124||rn(F)?(e.exit("data"),p(F)):(e.consume(F),F===92?y:f)}function y(F){return F===92||F===124?(e.consume(F),f):f(F)}function b(F){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(F):(e.enter("tableDelimiterRow"),s=!1,xr(F)?Pr(e,x,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):x(F))}function x(F){return F===45||F===58?T(F):F===124?(s=!0,e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),v):M(F)}function v(F){return xr(F)?Pr(e,T,"whitespace")(F):T(F)}function T(F){return F===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),k):F===45?(i+=1,k(F)):F===null||$t(F)?P(F):M(F)}function k(F){return F===45?(e.enter("tableDelimiterFiller"),C(F)):M(F)}function C(F){return F===45?(e.consume(F),C):F===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(F),e.exit("tableDelimiterMarker"),A):(e.exit("tableDelimiterFiller"),A(F))}function A(F){return xr(F)?Pr(e,P,"whitespace")(F):P(F)}function P(F){return F===124?x(F):F===null||$t(F)?!s||a!==i?M(F):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(F)):M(F)}function M(F){return r(F)}function L(F){return e.enter("tableRow"),D(F)}function D(F){return F===124?(e.enter("tableCellDivider"),e.consume(F),e.exit("tableCellDivider"),D):F===null||$t(F)?(e.exit("tableRow"),t(F)):xr(F)?Pr(e,D,"whitespace")(F):(e.enter("data"),q(F))}function q(F){return F===null||F===124||rn(F)?(e.exit("data"),D(F)):(e.consume(F),F===92?Q:q)}function Q(F){return F===92||F===124?(e.consume(F),q):q(F)}}function QQ(e,t){let r=-1,n=!0,a=0,i=[0,0,0,0],s=[0,0,0,0],l=!1,u=0,h,p,f;const y=new HQ;for(;++r<e.length;){const b=e[r],x=b[1];b[0]==="enter"?x.type==="tableHead"?(l=!1,u!==0&&(O_(y,t,u,h,p),p=void 0,u=0),h={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(r,0,[["enter",h,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(n=!0,f=void 0,i=[0,0,0,0],s=[0,r+1,0,0],l&&(l=!1,p={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},y.add(r,0,[["enter",p,t]])),a=x.type==="tableDelimiterRow"?2:p?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(n=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],f=Hf(y,t,i,a,void 0,f),i=[0,0,0,0]),s[2]=r)):x.type==="tableCellDivider"&&(n?n=!1:(i[1]!==0&&(s[0]=s[1],f=Hf(y,t,i,a,void 0,f)),i=s,s=[i[1],r,0,0])):x.type==="tableHead"?(l=!0,u=r):x.type==="tableRow"||x.type==="tableDelimiterRow"?(u=r,i[1]!==0?(s[0]=s[1],f=Hf(y,t,i,a,r,f)):s[1]!==0&&(f=Hf(y,t,s,a,r,f)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(s[3]=r)}for(u!==0&&O_(y,t,u,h,p),y.consume(t.events),r=-1;++r<t.events.length;){const b=t.events[r];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=WQ(t.events,r))}return e}function Hf(e,t,r,n,a,i){const s=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",l="tableContent";r[0]!==0&&(i.end=Object.assign({},zu(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const u=zu(t.events,r[1]);if(i={type:s,start:Object.assign({},u),end:Object.assign({},u)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){const h=zu(t.events,r[2]),p=zu(t.events,r[3]),f={type:l,start:Object.assign({},h),end:Object.assign({},p)};if(e.add(r[2],0,[["enter",f,t]]),n!==2){const y=t.events[r[2]],b=t.events[r[3]];if(y[1].end=Object.assign({},b[1].end),y[1].type="chunkText",y[1].contentType="text",r[3]>r[2]+1){const x=r[2]+1,v=r[3]-r[2]-1;e.add(x,v,[])}}e.add(r[3]+1,0,[["exit",f,t]])}return a!==void 0&&(i.end=Object.assign({},zu(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function O_(e,t,r,n,a){const i=[],s=zu(t.events,r);a&&(a.end=Object.assign({},s),i.push(["exit",a,t])),n.end=Object.assign({},s),i.push(["exit",n,t]),e.add(r+1,0,i)}function zu(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const KQ={name:"tasklistCheck",tokenize:JQ};function XQ(){return{text:{91:KQ}}}function JQ(e,t,r){const n=this;return a;function a(u){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),i)}function i(u){return rn(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),s):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),s):r(u)}function s(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):r(u)}function l(u){return $t(u)?t(u):xr(u)?e.check({tokenize:ZQ},t,r)(u):r(u)}}function ZQ(e,t,r){return Pr(e,n,"whitespace");function n(a){return a===null?r(a):t(a)}}function eK(e){return WL([EQ(),MQ(),qQ(e),VQ(),XQ()])}const tK={};function rK(e){const t=this,r=e||tK,n=t.data(),a=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);a.push(eK(r)),i.push(wQ()),s.push(SQ(r))}const j_=/[#.]/g;function nK(e,t){const r=e||"",n={};let a=0,i,s;for(;a<r.length;){j_.lastIndex=a;const l=j_.exec(r),u=r.slice(a,l?l.index:r.length);u&&(i?i==="#"?n.id=u:Array.isArray(n.className)?n.className.push(u):n.className=[u]:s=u,a+=u.length),l&&(i=l[0],a++)}return{type:"element",tagName:s||t||"div",properties:n,children:[]}}function jP(e,t,r){const n=r?oK(r):void 0;function a(i,s,...l){let u;if(i==null){u={type:"root",children:[]};const h=s;l.unshift(h)}else{u=nK(i,t);const h=u.tagName.toLowerCase(),p=n?n.get(h):void 0;if(u.tagName=p||h,aK(s))l.unshift(s);else for(const[f,y]of Object.entries(s))iK(e,u.properties,f,y)}for(const h of l)Mw(u.children,h);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return a}function aK(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const n of r){const a=t[n];if(a&&typeof a=="object"){if(!Array.isArray(a))return!0;const i=a;for(const s of i)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function iK(e,t,r,n){const a=nS(e,r);let i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?a.spaceSeparated?i=K2(n):a.commaSeparated?i=G2(n):a.commaOrSpaceSeparated?i=K2(G2(n).join(" ")):i=B_(a,a.property,n):Array.isArray(n)?i=[...n]:i=a.property==="style"?sK(n):String(n);if(Array.isArray(i)){const s=[];for(const l of i)s.push(B_(a,a.property,l));i=s}a.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[a.property]=i}}function Mw(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)Mw(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?Mw(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function B_(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||Op(r)===Op(t)))return!0}return r}function sK(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function oK(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const lK=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],cK=jP(G0,"div"),uK=jP(Cd,"g",lK);function dK(e){const t=String(e),r=[];return{toOffset:a,toPoint:n};function n(i){if(typeof i=="number"&&i>-1&&i<=t.length){let s=0;for(;;){let l=r[s];if(l===void 0){const u=F_(t,r[s-1]);l=u===-1?t.length+1:u+1,r[s]=l}if(l>i)return{line:s+1,column:i-(s>0?r[s-1]:0)+1,offset:i};s++}}}function a(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;r.length<i.line;){const l=r[r.length-1],u=F_(t,l),h=u===-1?t.length+1:u+1;if(l===h)break;r.push(h)}const s=(i.line>1?r[i.line-2]:0)+i.column-1;if(s<r[i.line-1])return s}}}function F_(e,t){const r=e.indexOf("\r",t),n=e.indexOf(`
`,t);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const dc={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},BP={}.hasOwnProperty,hK=Object.prototype;function pK(e,t){const r=t||{};return bS({file:r.file||void 0,location:!1,schema:r.space==="svg"?Cd:G0,verbose:r.verbose||!1},e)}function bS(e,t){let r;switch(t.nodeName){case"#comment":{const n=t;return r={type:"comment",value:n.data},bm(e,n,r),r}case"#document":case"#document-fragment":{const n=t,a="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:FP(e,t.childNodes),data:{quirksMode:a}},e.file&&e.location){const i=String(e.file),s=dK(i),l=s.toPoint(0),u=s.toPoint(i.length);r.position={start:l,end:u}}return r}case"#documentType":{const n=t;return r={type:"doctype"},bm(e,n,r),r}case"#text":{const n=t;return r={type:"text",value:n.value},bm(e,n,r),r}default:return r=gK(e,t),r}}function FP(e,t){let r=-1;const n=[];for(;++r<t.length;){const a=bS(e,t[r]);n.push(a)}return n}function gK(e,t){const r=e.schema;e.schema=t.namespaceURI===dc.svg?Cd:G0;let n=-1;const a={};for(;++n<t.attrs.length;){const l=t.attrs[n],u=(l.prefix?l.prefix+":":"")+l.name;BP.call(hK,u)||(a[u]=l.value)}const s=(e.schema.space==="svg"?uK:cK)(t.tagName,a,FP(e,t.childNodes));if(bm(e,t,s),s.tagName==="template"){const l=t,u=l.sourceCodeLocation,h=u&&u.startTag&&Wu(u.startTag),p=u&&u.endTag&&Wu(u.endTag),f=bS(e,l.content);h&&p&&e.file&&(f.position={start:h.end,end:p.start}),s.content=f}return e.schema=r,s}function bm(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=fK(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function fK(e,t,r){const n=Wu(r);if(t.type==="element"){const a=t.children[t.children.length-1];if(n&&!r.endTag&&a&&a.position&&a.position.end&&(n.end=Object.assign({},a.position.end)),e.verbose){const i={};let s;if(r.attrs)for(s in r.attrs)BP.call(r.attrs,s)&&(i[nS(e.schema,s).property]=Wu(r.attrs[s]));r.startTag;const l=Wu(r.startTag),u=r.endTag?Wu(r.endTag):void 0,h={opening:l};u&&(h.closing=u),h.properties=i,t.data={position:h}}}return n}function Wu(e){const t=z_({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=z_({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function z_(e){return e.line&&e.column?e:void 0}class ug{constructor(t,r,n){this.property=t,this.normal=r,n&&(this.space=n)}}ug.prototype.property={};ug.prototype.normal={};ug.prototype.space=null;function zP(e,t){const r={},n={};let a=-1;for(;++a<e.length;)Object.assign(r,e[a].property),Object.assign(n,e[a].normal);return new ug(r,n,t)}function Ow(e){return e.toLowerCase()}class as{constructor(t,r){this.property=t,this.attribute=r}}as.prototype.space=null;as.prototype.boolean=!1;as.prototype.booleanish=!1;as.prototype.overloadedBoolean=!1;as.prototype.number=!1;as.prototype.commaSeparated=!1;as.prototype.spaceSeparated=!1;as.prototype.commaOrSpaceSeparated=!1;as.prototype.mustUseProperty=!1;as.prototype.defined=!1;let mK=0;const ar=Oc(),Wn=Oc(),UP=Oc(),at=Oc(),on=Oc(),Xu=Oc(),Ni=Oc();function Oc(){return 2**++mK}const jw=Object.freeze(Object.defineProperty({__proto__:null,boolean:ar,booleanish:Wn,commaOrSpaceSeparated:Ni,commaSeparated:Xu,number:at,overloadedBoolean:UP,spaceSeparated:on},Symbol.toStringTag,{value:"Module"})),vv=Object.keys(jw);class xS extends as{constructor(t,r,n,a){let i=-1;if(super(t,r),U_(this,"space",a),typeof n=="number")for(;++i<vv.length;){const s=vv[i];U_(this,vv[i],(n&jw[s])===jw[s])}}}xS.prototype.defined=!0;function U_(e,t,r){r&&(e[t]=r)}const yK={}.hasOwnProperty;function Ad(e){const t={},r={};let n;for(n in e.properties)if(yK.call(e.properties,n)){const a=e.properties[n],i=new xS(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[Ow(n)]=n,r[Ow(i.attribute)]=n}return new ug(t,r,e.space)}const $P=Ad({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),qP=Ad({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function HP(e,t){return t in e?e[t]:t}function GP(e,t){return HP(e,t.toLowerCase())}const WP=Ad({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:GP,properties:{xmlns:null,xmlnsXLink:null}}),VP=Ad({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Wn,ariaAutoComplete:null,ariaBusy:Wn,ariaChecked:Wn,ariaColCount:at,ariaColIndex:at,ariaColSpan:at,ariaControls:on,ariaCurrent:null,ariaDescribedBy:on,ariaDetails:null,ariaDisabled:Wn,ariaDropEffect:on,ariaErrorMessage:null,ariaExpanded:Wn,ariaFlowTo:on,ariaGrabbed:Wn,ariaHasPopup:null,ariaHidden:Wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:on,ariaLevel:at,ariaLive:null,ariaModal:Wn,ariaMultiLine:Wn,ariaMultiSelectable:Wn,ariaOrientation:null,ariaOwns:on,ariaPlaceholder:null,ariaPosInSet:at,ariaPressed:Wn,ariaReadOnly:Wn,ariaRelevant:null,ariaRequired:Wn,ariaRoleDescription:on,ariaRowCount:at,ariaRowIndex:at,ariaRowSpan:at,ariaSelected:Wn,ariaSetSize:at,ariaSort:null,ariaValueMax:at,ariaValueMin:at,ariaValueNow:at,ariaValueText:null,role:null}}),bK=Ad({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:GP,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xu,acceptCharset:on,accessKey:on,action:null,allow:null,allowFullScreen:ar,allowPaymentRequest:ar,allowUserMedia:ar,alt:null,as:null,async:ar,autoCapitalize:null,autoComplete:on,autoFocus:ar,autoPlay:ar,blocking:on,capture:null,charSet:null,checked:ar,cite:null,className:on,cols:at,colSpan:null,content:null,contentEditable:Wn,controls:ar,controlsList:on,coords:at|Xu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ar,defer:ar,dir:null,dirName:null,disabled:ar,download:UP,draggable:Wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ar,formTarget:null,headers:on,height:at,hidden:ar,high:at,href:null,hrefLang:null,htmlFor:on,httpEquiv:on,id:null,imageSizes:null,imageSrcSet:null,inert:ar,inputMode:null,integrity:null,is:null,isMap:ar,itemId:null,itemProp:on,itemRef:on,itemScope:ar,itemType:on,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ar,low:at,manifest:null,max:null,maxLength:at,media:null,method:null,min:null,minLength:at,multiple:ar,muted:ar,name:null,nonce:null,noModule:ar,noValidate:ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ar,optimum:at,pattern:null,ping:on,placeholder:null,playsInline:ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ar,referrerPolicy:null,rel:on,required:ar,reversed:ar,rows:at,rowSpan:at,sandbox:on,scope:null,scoped:ar,seamless:ar,selected:ar,shadowRootClonable:ar,shadowRootDelegatesFocus:ar,shadowRootMode:null,shape:null,size:at,sizes:null,slot:null,span:at,spellCheck:Wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:at,step:null,style:null,tabIndex:at,target:null,title:null,translate:null,type:null,typeMustMatch:ar,useMap:null,value:Wn,width:at,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:on,axis:null,background:null,bgColor:null,border:at,borderColor:null,bottomMargin:at,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ar,declare:ar,event:null,face:null,frame:null,frameBorder:null,hSpace:at,leftMargin:at,link:null,longDesc:null,lowSrc:null,marginHeight:at,marginWidth:at,noResize:ar,noHref:ar,noShade:ar,noWrap:ar,object:null,profile:null,prompt:null,rev:null,rightMargin:at,rules:null,scheme:null,scrolling:Wn,standby:null,summary:null,text:null,topMargin:at,valueType:null,version:null,vAlign:null,vLink:null,vSpace:at,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ar,disableRemotePlayback:ar,prefix:null,property:null,results:at,security:null,unselectable:null}}),xK=Ad({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:HP,properties:{about:Ni,accentHeight:at,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:at,amplitude:at,arabicForm:null,ascent:at,attributeName:null,attributeType:null,azimuth:at,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:at,by:null,calcMode:null,capHeight:at,className:on,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:at,diffuseConstant:at,direction:null,display:null,dur:null,divisor:at,dominantBaseline:null,download:ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:at,enableBackground:null,end:null,event:null,exponent:at,externalResourcesRequired:null,fill:null,fillOpacity:at,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xu,g2:Xu,glyphName:Xu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:at,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:at,horizOriginX:at,horizOriginY:at,id:null,ideographic:at,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:at,k:at,k1:at,k2:at,k3:at,k4:at,kernelMatrix:Ni,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:at,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:at,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:at,overlineThickness:at,paintOrder:null,panose1:null,path:null,pathLength:at,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:on,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:at,pointsAtY:at,pointsAtZ:at,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ni,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ni,rev:Ni,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ni,requiredFeatures:Ni,requiredFonts:Ni,requiredFormats:Ni,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:at,specularExponent:at,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:at,strikethroughThickness:at,string:null,stroke:null,strokeDashArray:Ni,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:at,strokeOpacity:at,strokeWidth:null,style:null,surfaceScale:at,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ni,tabIndex:at,tableValues:null,target:null,targetX:at,targetY:at,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ni,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:at,underlineThickness:at,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:at,values:null,vAlphabetic:at,vMathematical:at,vectorEffect:null,vHanging:at,vIdeographic:at,version:null,vertAdvY:at,vertOriginX:at,vertOriginY:at,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:at,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),vK=/^data[-\w.:]+$/i,$_=/-[a-z]/g,wK=/[A-Z]/g;function SK(e,t){const r=Ow(t);let n=t,a=as;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&vK.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace($_,kK);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!$_.test(i)){let s=i.replace(wK,TK);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}a=xS}return new a(n,t)}function TK(e){return"-"+e.toLowerCase()}function kK(e){return e.charAt(1).toUpperCase()}const EK=zP([qP,$P,WP,VP,bK],"html"),YP=zP([qP,$P,WP,VP,xK],"svg"),CK={},_K={}.hasOwnProperty,QP=yP("type",{handlers:{root:NK,element:DK,text:RK,comment:IK,doctype:PK}});function AK(e,t){const n=(t||CK).space;return QP(e,n==="svg"?YP:EK)}function NK(e,t){const r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=vS(e.children,r,t),Nd(e,r),r}function LK(e,t){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=vS(e.children,r,t),Nd(e,r),r}function PK(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Nd(e,t),t}function RK(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Nd(e,t),t}function IK(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Nd(e,t),t}function DK(e,t){const r=t;let n=r;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=YP);const a=[];let i;if(e.properties){for(i in e.properties)if(i!=="children"&&_K.call(e.properties,i)){const u=MK(n,i,e.properties[i]);u&&a.push(u)}}const s=n.space,l={nodeName:e.tagName,tagName:e.tagName,attrs:a,namespaceURI:dc[s],childNodes:[],parentNode:null};return l.childNodes=vS(e.children,l,n),Nd(e,l),e.tagName==="template"&&e.content&&(l.content=LK(e.content,n)),l}function MK(e,t,r){const n=SK(e,t);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?LL(r):BL(r));const a={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const i=a.name.indexOf(":");i<0?a.prefix="":(a.name=a.name.slice(i+1),a.prefix=n.attribute.slice(0,i)),a.namespace=dc[n.space]}return a}function vS(e,t,r){let n=-1;const a=[];if(e)for(;++n<e.length;){const i=QP(e[n],r);i.parentNode=t,a.push(i)}return a}function Nd(e,t){const r=e.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const OK=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],jK=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bn="�";var ee;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(ee||(ee={}));const oi={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function KP(e){return e>=55296&&e<=57343}function BK(e){return e>=56320&&e<=57343}function FK(e,t){return(e-55296)*1024+9216+t}function XP(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function JP(e){return e>=64976&&e<=65007||jK.has(e)}var Re;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Re||(Re={}));const zK=65536;class UK{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=zK,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,r){const{line:n,col:a,offset:i}=this,s=a+r,l=i+r;return{code:t,startLine:n,endLine:n,startCol:s,endCol:s,startOffset:l,endOffset:l}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(BK(r))return this.pos++,this._addGap(),FK(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ee.EOF;return this._err(Re.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let n=0;n<t.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==t.charCodeAt(n))return!1;return!0}peek(t){const r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ee.EOF;const n=this.html.charCodeAt(r);return n===ee.CARRIAGE_RETURN?ee.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ee.EOF;let t=this.html.charCodeAt(this.pos);return t===ee.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ee.LINE_FEED):t===ee.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,KP(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ee.LINE_FEED||t===ee.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){XP(t)?this._err(Re.controlCharacterInInputStream):JP(t)&&this._err(Re.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var gr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(gr||(gr={}));function ZP(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}const $K=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),qK=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function HK(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=qK.get(e))!==null&&t!==void 0?t:e}var da;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(da||(da={}));const GK=32;var Tl;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Tl||(Tl={}));function Bw(e){return e>=da.ZERO&&e<=da.NINE}function WK(e){return e>=da.UPPER_A&&e<=da.UPPER_F||e>=da.LOWER_A&&e<=da.LOWER_F}function VK(e){return e>=da.UPPER_A&&e<=da.UPPER_Z||e>=da.LOWER_A&&e<=da.LOWER_Z||Bw(e)}function YK(e){return e===da.EQUALS||VK(e)}var ua;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ua||(ua={}));var Lo;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Lo||(Lo={}));class QK{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=ua.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Lo.Strict}startEntity(t){this.decodeMode=t,this.state=ua.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case ua.EntityStart:return t.charCodeAt(r)===da.NUM?(this.state=ua.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=ua.NamedEntity,this.stateNamedEntity(t,r));case ua.NumericStart:return this.stateNumericStart(t,r);case ua.NumericDecimal:return this.stateNumericDecimal(t,r);case ua.NumericHex:return this.stateNumericHex(t,r);case ua.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|GK)===da.LOWER_X?(this.state=ua.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=ua.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,a){if(r!==n){const i=n-r;this.result=this.result*Math.pow(a,i)+Number.parseInt(t.substr(r,i),a),this.consumed+=i}}stateNumericHex(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(Bw(a)||WK(a))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(Bw(a))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===da.SEMI)this.consumed+=1;else if(this.decodeMode===Lo.Strict)return 0;return this.emitCodePoint(HK(this.result),this.consumed),this.errors&&(t!==da.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:n}=this;let a=n[this.treeIndex],i=(a&Tl.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const s=t.charCodeAt(r);if(this.treeIndex=KK(n,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Lo.Attribute&&(i===0||YK(s))?0:this.emitNotTerminatedNamedEntity();if(a=n[this.treeIndex],i=(a&Tl.VALUE_LENGTH)>>14,i!==0){if(s===da.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Lo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:n}=this,a=(n[r]&Tl.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){const{decodeTree:a}=this;return this.emitCodePoint(r===1?a[t]&~Tl.VALUE_LENGTH:a[t+1],n),r===3&&this.emitCodePoint(a[t+2],n),n}end(){var t;switch(this.state){case ua.NamedEntity:return this.result!==0&&(this.decodeMode!==Lo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ua.NumericDecimal:return this.emitNumericEntity(0,2);case ua.NumericHex:return this.emitNumericEntity(0,3);case ua.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ua.EntityStart:return 0}}}function KK(e,t,r,n){const a=(t&Tl.BRANCH_LENGTH)>>7,i=t&Tl.JUMP_TABLE;if(a===0)return i!==0&&n===i?r:-1;if(i){const u=n-i;return u<0||u>=a?-1:e[r+u]-1}let s=r,l=s+a-1;for(;s<=l;){const u=s+l>>>1,h=e[u];if(h<n)s=u+1;else if(h>n)l=u-1;else return e[u+a]}return-1}var Ye;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ye||(Ye={}));var bc;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(bc||(bc={}));var Zi;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Zi||(Zi={}));var ve;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(ve||(ve={}));var E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(E||(E={}));const XK=new Map([[ve.A,E.A],[ve.ADDRESS,E.ADDRESS],[ve.ANNOTATION_XML,E.ANNOTATION_XML],[ve.APPLET,E.APPLET],[ve.AREA,E.AREA],[ve.ARTICLE,E.ARTICLE],[ve.ASIDE,E.ASIDE],[ve.B,E.B],[ve.BASE,E.BASE],[ve.BASEFONT,E.BASEFONT],[ve.BGSOUND,E.BGSOUND],[ve.BIG,E.BIG],[ve.BLOCKQUOTE,E.BLOCKQUOTE],[ve.BODY,E.BODY],[ve.BR,E.BR],[ve.BUTTON,E.BUTTON],[ve.CAPTION,E.CAPTION],[ve.CENTER,E.CENTER],[ve.CODE,E.CODE],[ve.COL,E.COL],[ve.COLGROUP,E.COLGROUP],[ve.DD,E.DD],[ve.DESC,E.DESC],[ve.DETAILS,E.DETAILS],[ve.DIALOG,E.DIALOG],[ve.DIR,E.DIR],[ve.DIV,E.DIV],[ve.DL,E.DL],[ve.DT,E.DT],[ve.EM,E.EM],[ve.EMBED,E.EMBED],[ve.FIELDSET,E.FIELDSET],[ve.FIGCAPTION,E.FIGCAPTION],[ve.FIGURE,E.FIGURE],[ve.FONT,E.FONT],[ve.FOOTER,E.FOOTER],[ve.FOREIGN_OBJECT,E.FOREIGN_OBJECT],[ve.FORM,E.FORM],[ve.FRAME,E.FRAME],[ve.FRAMESET,E.FRAMESET],[ve.H1,E.H1],[ve.H2,E.H2],[ve.H3,E.H3],[ve.H4,E.H4],[ve.H5,E.H5],[ve.H6,E.H6],[ve.HEAD,E.HEAD],[ve.HEADER,E.HEADER],[ve.HGROUP,E.HGROUP],[ve.HR,E.HR],[ve.HTML,E.HTML],[ve.I,E.I],[ve.IMG,E.IMG],[ve.IMAGE,E.IMAGE],[ve.INPUT,E.INPUT],[ve.IFRAME,E.IFRAME],[ve.KEYGEN,E.KEYGEN],[ve.LABEL,E.LABEL],[ve.LI,E.LI],[ve.LINK,E.LINK],[ve.LISTING,E.LISTING],[ve.MAIN,E.MAIN],[ve.MALIGNMARK,E.MALIGNMARK],[ve.MARQUEE,E.MARQUEE],[ve.MATH,E.MATH],[ve.MENU,E.MENU],[ve.META,E.META],[ve.MGLYPH,E.MGLYPH],[ve.MI,E.MI],[ve.MO,E.MO],[ve.MN,E.MN],[ve.MS,E.MS],[ve.MTEXT,E.MTEXT],[ve.NAV,E.NAV],[ve.NOBR,E.NOBR],[ve.NOFRAMES,E.NOFRAMES],[ve.NOEMBED,E.NOEMBED],[ve.NOSCRIPT,E.NOSCRIPT],[ve.OBJECT,E.OBJECT],[ve.OL,E.OL],[ve.OPTGROUP,E.OPTGROUP],[ve.OPTION,E.OPTION],[ve.P,E.P],[ve.PARAM,E.PARAM],[ve.PLAINTEXT,E.PLAINTEXT],[ve.PRE,E.PRE],[ve.RB,E.RB],[ve.RP,E.RP],[ve.RT,E.RT],[ve.RTC,E.RTC],[ve.RUBY,E.RUBY],[ve.S,E.S],[ve.SCRIPT,E.SCRIPT],[ve.SEARCH,E.SEARCH],[ve.SECTION,E.SECTION],[ve.SELECT,E.SELECT],[ve.SOURCE,E.SOURCE],[ve.SMALL,E.SMALL],[ve.SPAN,E.SPAN],[ve.STRIKE,E.STRIKE],[ve.STRONG,E.STRONG],[ve.STYLE,E.STYLE],[ve.SUB,E.SUB],[ve.SUMMARY,E.SUMMARY],[ve.SUP,E.SUP],[ve.TABLE,E.TABLE],[ve.TBODY,E.TBODY],[ve.TEMPLATE,E.TEMPLATE],[ve.TEXTAREA,E.TEXTAREA],[ve.TFOOT,E.TFOOT],[ve.TD,E.TD],[ve.TH,E.TH],[ve.THEAD,E.THEAD],[ve.TITLE,E.TITLE],[ve.TR,E.TR],[ve.TRACK,E.TRACK],[ve.TT,E.TT],[ve.U,E.U],[ve.UL,E.UL],[ve.SVG,E.SVG],[ve.VAR,E.VAR],[ve.WBR,E.WBR],[ve.XMP,E.XMP]]);function Ld(e){var t;return(t=XK.get(e))!==null&&t!==void 0?t:E.UNKNOWN}const Je=E,JK={[Ye.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Ye.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Ye.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Ye.XLINK]:new Set,[Ye.XML]:new Set,[Ye.XMLNS]:new Set},Fw=new Set([Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6]);ve.STYLE,ve.SCRIPT,ve.XMP,ve.IFRAME,ve.NOEMBED,ve.NOFRAMES,ve.PLAINTEXT;var ne;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(ne||(ne={}));const Mn={DATA:ne.DATA,RCDATA:ne.RCDATA,RAWTEXT:ne.RAWTEXT,SCRIPT_DATA:ne.SCRIPT_DATA,PLAINTEXT:ne.PLAINTEXT,CDATA_SECTION:ne.CDATA_SECTION};function ZK(e){return e>=ee.DIGIT_0&&e<=ee.DIGIT_9}function rp(e){return e>=ee.LATIN_CAPITAL_A&&e<=ee.LATIN_CAPITAL_Z}function eX(e){return e>=ee.LATIN_SMALL_A&&e<=ee.LATIN_SMALL_Z}function ml(e){return eX(e)||rp(e)}function q_(e){return ml(e)||ZK(e)}function Gf(e){return e+32}function eR(e){return e===ee.SPACE||e===ee.LINE_FEED||e===ee.TABULATION||e===ee.FORM_FEED}function H_(e){return eR(e)||e===ee.SOLIDUS||e===ee.GREATER_THAN_SIGN}function tX(e){return e===ee.NULL?Re.nullCharacterReference:e>1114111?Re.characterReferenceOutsideUnicodeRange:KP(e)?Re.surrogateCharacterReference:JP(e)?Re.noncharacterCharacterReference:XP(e)||e===ee.CARRIAGE_RETURN?Re.controlCharacterReference:null}class rX{constructor(t,r){this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ne.DATA,this.returnState=ne.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new UK(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new QK($K,(n,a)=>{this.preprocessor.pos=this.entityStartPos+a-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Re.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Re.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const a=tX(n);a&&this._err(a,1)}}:void 0)}_err(t,r=0){var n,a;(a=(n=this.handler).onParseError)===null||a===void 0||a.call(n,this.preprocessor.getError(t,r))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,r,n){this.active=!0,this.preprocessor.write(t,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let r=0;r<t;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,r){return this.preprocessor.startsWith(t,r)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:gr.START_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:gr.END_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:gr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:gr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,r){this.currentCharacterToken={type:t,chars:r,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,r;const n=this.currentToken;if(ZP(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const a=(t=(r=n.location).attrs)!==null&&t!==void 0?t:r.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Ld(t.tagName),t.type===gr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Re.endTagWithAttributes),t.selfClosing&&this._err(Re.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case gr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case gr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case gr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:gr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,r)}_emitCodePoint(t){const r=eR(t)?gr.WHITESPACE_CHARACTER:t===ee.NULL?gr.NULL_CHARACTER:gr.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(gr.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=ne.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Lo.Attribute:Lo.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===ne.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ne.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ne.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ne.DATA:{this._stateData(t);break}case ne.RCDATA:{this._stateRcdata(t);break}case ne.RAWTEXT:{this._stateRawtext(t);break}case ne.SCRIPT_DATA:{this._stateScriptData(t);break}case ne.PLAINTEXT:{this._statePlaintext(t);break}case ne.TAG_OPEN:{this._stateTagOpen(t);break}case ne.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ne.TAG_NAME:{this._stateTagName(t);break}case ne.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ne.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ne.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ne.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ne.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ne.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ne.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ne.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ne.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ne.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ne.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ne.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ne.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ne.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ne.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ne.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ne.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ne.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ne.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ne.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ne.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ne.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ne.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ne.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ne.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ne.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ne.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ne.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ne.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ne.COMMENT_START:{this._stateCommentStart(t);break}case ne.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ne.COMMENT:{this._stateComment(t);break}case ne.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ne.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ne.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ne.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ne.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ne.COMMENT_END:{this._stateCommentEnd(t);break}case ne.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ne.DOCTYPE:{this._stateDoctype(t);break}case ne.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ne.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ne.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ne.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ne.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ne.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ne.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ne.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ne.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ne.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ne.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ne.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ne.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ne.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ne.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ne.CDATA_SECTION:{this._stateCdataSection(t);break}case ne.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ne.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ne.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case ne.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ee.LESS_THAN_SIGN:{this.state=ne.TAG_OPEN;break}case ee.AMPERSAND:{this._startCharacterReference();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitCodePoint(t);break}case ee.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ee.AMPERSAND:{this._startCharacterReference();break}case ee.LESS_THAN_SIGN:{this.state=ne.RCDATA_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ee.LESS_THAN_SIGN:{this.state=ne.RAWTEXT_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(ml(t))this._createStartTagToken(),this.state=ne.TAG_NAME,this._stateTagName(t);else switch(t){case ee.EXCLAMATION_MARK:{this.state=ne.MARKUP_DECLARATION_OPEN;break}case ee.SOLIDUS:{this.state=ne.END_TAG_OPEN;break}case ee.QUESTION_MARK:{this._err(Re.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ne.BOGUS_COMMENT,this._stateBogusComment(t);break}case ee.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ne.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(ml(t))this._createEndTagToken(),this.state=ne.TAG_NAME,this._stateTagName(t);else switch(t){case ee.GREATER_THAN_SIGN:{this._err(Re.missingEndTagName),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ne.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.BEFORE_ATTRIBUTE_NAME;break}case ee.SOLIDUS:{this.state=ne.SELF_CLOSING_START_TAG;break}case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentTagToken();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.tagName+=bn;break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(rp(t)?Gf(t):t)}}_stateRcdataLessThanSign(t){t===ee.SOLIDUS?this.state=ne.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ne.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){ml(t)?(this.state=ne.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ne.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ne.BEFORE_ATTRIBUTE_NAME,!1;case ee.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ne.SELF_CLOSING_START_TAG,!1;case ee.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ne.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ne.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ee.SOLIDUS?this.state=ne.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ne.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){ml(t)?(this.state=ne.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ne.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ne.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ee.SOLIDUS:{this.state=ne.SCRIPT_DATA_END_TAG_OPEN;break}case ee.EXCLAMATION_MARK:{this.state=ne.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ne.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){ml(t)?(this.state=ne.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ne.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ne.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ee.HYPHEN_MINUS?(this.state=ne.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ne.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ee.HYPHEN_MINUS?(this.state=ne.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ne.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ee.HYPHEN_MINUS:{this.state=ne.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ee.HYPHEN_MINUS:{this.state=ne.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.state=ne.SCRIPT_DATA_ESCAPED,this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ne.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ee.HYPHEN_MINUS:{this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ee.GREATER_THAN_SIGN:{this.state=ne.SCRIPT_DATA,this._emitChars(">");break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.state=ne.SCRIPT_DATA_ESCAPED,this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ne.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ee.SOLIDUS?this.state=ne.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ml(t)?(this._emitChars("<"),this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ne.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){ml(t)?(this.state=ne.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ne.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ne.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(oi.SCRIPT,!1)&&H_(this.preprocessor.peek(oi.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<oi.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ne.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ee.HYPHEN_MINUS:{this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ee.HYPHEN_MINUS:{this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ee.HYPHEN_MINUS:{this._emitChars("-");break}case ee.LESS_THAN_SIGN:{this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ee.GREATER_THAN_SIGN:{this.state=ne.SCRIPT_DATA,this._emitChars(">");break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bn);break}case ee.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ee.SOLIDUS?(this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(oi.SCRIPT,!1)&&H_(this.preprocessor.peek(oi.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<oi.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=ne.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ne.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.SOLIDUS:case ee.GREATER_THAN_SIGN:case ee.EOF:{this.state=ne.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ee.EQUALS_SIGN:{this._err(Re.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ne.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ne.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:case ee.SOLIDUS:case ee.GREATER_THAN_SIGN:case ee.EOF:{this._leaveAttrName(),this.state=ne.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ee.EQUALS_SIGN:{this._leaveAttrName(),this.state=ne.BEFORE_ATTRIBUTE_VALUE;break}case ee.QUOTATION_MARK:case ee.APOSTROPHE:case ee.LESS_THAN_SIGN:{this._err(Re.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.name+=bn;break}default:this.currentAttr.name+=String.fromCodePoint(rp(t)?Gf(t):t)}}_stateAfterAttributeName(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.SOLIDUS:{this.state=ne.SELF_CLOSING_START_TAG;break}case ee.EQUALS_SIGN:{this.state=ne.BEFORE_ATTRIBUTE_VALUE;break}case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentTagToken();break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ne.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.QUOTATION_MARK:{this.state=ne.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{this.state=ne.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingAttributeValue),this.state=ne.DATA,this.emitCurrentTagToken();break}default:this.state=ne.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ee.QUOTATION_MARK:{this.state=ne.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ee.AMPERSAND:{this._startCharacterReference();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bn;break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ee.APOSTROPHE:{this.state=ne.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ee.AMPERSAND:{this._startCharacterReference();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bn;break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this._leaveAttrValue(),this.state=ne.BEFORE_ATTRIBUTE_NAME;break}case ee.AMPERSAND:{this._startCharacterReference();break}case ee.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ne.DATA,this.emitCurrentTagToken();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bn;break}case ee.QUOTATION_MARK:case ee.APOSTROPHE:case ee.LESS_THAN_SIGN:case ee.EQUALS_SIGN:case ee.GRAVE_ACCENT:{this._err(Re.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this._leaveAttrValue(),this.state=ne.BEFORE_ATTRIBUTE_NAME;break}case ee.SOLIDUS:{this._leaveAttrValue(),this.state=ne.SELF_CLOSING_START_TAG;break}case ee.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ne.DATA,this.emitCurrentTagToken();break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBetweenAttributes),this.state=ne.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ee.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=ne.DATA,this.emitCurrentTagToken();break}case ee.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.unexpectedSolidusInTag),this.state=ne.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const r=this.currentToken;switch(t){case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentComment(r);break}case ee.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.data+=bn;break}default:r.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(oi.DASH_DASH,!0)?(this._createCommentToken(oi.DASH_DASH.length+1),this.state=ne.COMMENT_START):this._consumeSequenceIfMatch(oi.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(oi.DOCTYPE.length+1),this.state=ne.DOCTYPE):this._consumeSequenceIfMatch(oi.CDATA_START,!0)?this.inForeignNode?this.state=ne.CDATA_SECTION:(this._err(Re.cdataInHtmlContent),this._createCommentToken(oi.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ne.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ne.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ee.HYPHEN_MINUS:{this.state=ne.COMMENT_START_DASH;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=ne.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=ne.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const r=this.currentToken;switch(t){case ee.HYPHEN_MINUS:{this.state=ne.COMMENT_END;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=ne.DATA,this.emitCurrentComment(r);break}case ee.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=ne.COMMENT,this._stateComment(t)}}_stateComment(t){const r=this.currentToken;switch(t){case ee.HYPHEN_MINUS:{this.state=ne.COMMENT_END_DASH;break}case ee.LESS_THAN_SIGN:{r.data+="<",this.state=ne.COMMENT_LESS_THAN_SIGN;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.data+=bn;break}case ee.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const r=this.currentToken;switch(t){case ee.EXCLAMATION_MARK:{r.data+="!",this.state=ne.COMMENT_LESS_THAN_SIGN_BANG;break}case ee.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=ne.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ee.HYPHEN_MINUS?this.state=ne.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ne.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ee.HYPHEN_MINUS?this.state=ne.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ne.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ee.GREATER_THAN_SIGN&&t!==ee.EOF&&this._err(Re.nestedComment),this.state=ne.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const r=this.currentToken;switch(t){case ee.HYPHEN_MINUS:{this.state=ne.COMMENT_END;break}case ee.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=ne.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const r=this.currentToken;switch(t){case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentComment(r);break}case ee.EXCLAMATION_MARK:{this.state=ne.COMMENT_END_BANG;break}case ee.HYPHEN_MINUS:{r.data+="-";break}case ee.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=ne.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const r=this.currentToken;switch(t){case ee.HYPHEN_MINUS:{r.data+="--!",this.state=ne.COMMENT_END_DASH;break}case ee.GREATER_THAN_SIGN:{this._err(Re.incorrectlyClosedComment),this.state=ne.DATA,this.emitCurrentComment(r);break}case ee.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=ne.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.BEFORE_DOCTYPE_NAME;break}case ee.GREATER_THAN_SIGN:{this.state=ne.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ee.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBeforeDoctypeName),this.state=ne.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(rp(t))this._createDoctypeToken(String.fromCharCode(Gf(t))),this.state=ne.DOCTYPE_NAME;else switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.NULL:{this._err(Re.unexpectedNullCharacter),this._createDoctypeToken(bn),this.state=ne.DOCTYPE_NAME;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ne.DOCTYPE_NAME}}_stateDoctypeName(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.AFTER_DOCTYPE_NAME;break}case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.name+=bn;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(rp(t)?Gf(t):t)}}_stateAfterDoctypeName(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(oi.PUBLIC,!1)?this.state=ne.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(oi.SYSTEM,!1)?this.state=ne.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ee.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=ne.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=ne.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.QUOTATION_MARK:{r.publicId="",this.state=ne.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{r.publicId="",this.state=ne.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case ee.QUOTATION_MARK:{this.state=ne.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.publicId+=bn;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case ee.APOSTROPHE:{this.state=ne.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.publicId+=bn;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ee.GREATER_THAN_SIGN:{this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.QUOTATION_MARK:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.QUOTATION_MARK:{r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:{this.state=ne.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ee.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.QUOTATION_MARK:{r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ee.APOSTROPHE:{r.systemId="",this.state=ne.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ee.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.DATA,this.emitCurrentDoctype(r);break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case ee.QUOTATION_MARK:{this.state=ne.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.systemId+=bn;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case ee.APOSTROPHE:{this.state=ne.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter),r.systemId+=bn;break}case ee.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case ee.SPACE:case ee.LINE_FEED:case ee.TABULATION:case ee.FORM_FEED:break;case ee.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.EOF:{this._err(Re.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Re.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ne.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const r=this.currentToken;switch(t){case ee.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=ne.DATA;break}case ee.NULL:{this._err(Re.unexpectedNullCharacter);break}case ee.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ee.RIGHT_SQUARE_BRACKET:{this.state=ne.CDATA_SECTION_BRACKET;break}case ee.EOF:{this._err(Re.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ee.RIGHT_SQUARE_BRACKET?this.state=ne.CDATA_SECTION_END:(this._emitChars("]"),this.state=ne.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ee.GREATER_THAN_SIGN:{this.state=ne.DATA;break}case ee.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ne.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(ee.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&q_(this.preprocessor.peek(1))?ne.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){q_(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ee.SEMICOLON&&this._err(Re.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const tR=new Set([E.DD,E.DT,E.LI,E.OPTGROUP,E.OPTION,E.P,E.RB,E.RP,E.RT,E.RTC]),G_=new Set([...tR,E.CAPTION,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]),Qm=new Set([E.APPLET,E.CAPTION,E.HTML,E.MARQUEE,E.OBJECT,E.TABLE,E.TD,E.TEMPLATE,E.TH]),nX=new Set([...Qm,E.OL,E.UL]),aX=new Set([...Qm,E.BUTTON]),W_=new Set([E.ANNOTATION_XML,E.MI,E.MN,E.MO,E.MS,E.MTEXT]),V_=new Set([E.DESC,E.FOREIGN_OBJECT,E.TITLE]),iX=new Set([E.TR,E.TEMPLATE,E.HTML]),sX=new Set([E.TBODY,E.TFOOT,E.THEAD,E.TEMPLATE,E.HTML]),oX=new Set([E.TABLE,E.TEMPLATE,E.HTML]),lX=new Set([E.TD,E.TH]);class cX{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=E.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===E.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ye.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){const n=this._indexOf(t);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(t,r,n){const a=this._indexOf(t)+1;this.items.splice(a,0,r),this.tagIDs.splice(a,0,n),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Ye.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(t){for(;this.stackTop>=t;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){const r=this._indexOf(t);this.shortenToLength(Math.max(r,0))}popUntilPopped(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Fw,Ye.HTML)}popUntilTableCellPopped(){this.popUntilPopped(lX,Ye.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let n=this.stackTop;n>=0;n--)if(t.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(oX,Ye.HTML)}clearBackToTableBodyContext(){this.clearBackTo(sX,Ye.HTML)}clearBackToTableRowContext(){this.clearBackTo(iX,Ye.HTML)}remove(t){const r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===E.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===E.HTML}hasInDynamicScope(t,r){for(let n=this.stackTop;n>=0;n--){const a=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Ye.HTML:{if(a===t)return!0;if(r.has(a))return!1;break}case Ye.SVG:{if(V_.has(a))return!1;break}case Ye.MATHML:{if(W_.has(a))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Qm)}hasInListItemScope(t){return this.hasInDynamicScope(t,nX)}hasInButtonScope(t){return this.hasInDynamicScope(t,aX)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case Ye.HTML:{if(Fw.has(r))return!0;if(Qm.has(r))return!1;break}case Ye.SVG:{if(V_.has(r))return!1;break}case Ye.MATHML:{if(W_.has(r))return!1;break}}}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ye.HTML)switch(this.tagIDs[r]){case t:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Ye.HTML)switch(this.tagIDs[t]){case E.TBODY:case E.THEAD:case E.TFOOT:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ye.HTML)switch(this.tagIDs[r]){case t:return!0;case E.OPTION:case E.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&tR.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&G_.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&G_.has(this.currentTagId);)this.pop()}}const wv=3;var Hs;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Hs||(Hs={}));const Y_={type:Hs.Marker};class uX{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){const n=[],a=r.length,i=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let l=0;l<this.entries.length;l++){const u=this.entries[l];if(u.type===Hs.Marker)break;const{element:h}=u;if(this.treeAdapter.getTagName(h)===i&&this.treeAdapter.getNamespaceURI(h)===s){const p=this.treeAdapter.getAttrList(h);p.length===a&&n.push({idx:l,attrs:p})}}return n}_ensureNoahArkCondition(t){if(this.entries.length<wv)return;const r=this.treeAdapter.getAttrList(t),n=this._getNoahArkConditionCandidates(t,r);if(n.length<wv)return;const a=new Map(r.map(s=>[s.name,s.value]));let i=0;for(let s=0;s<n.length;s++){const l=n[s];l.attrs.every(u=>a.get(u.name)===u.value)&&(i+=1,i>=wv&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(Y_)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:Hs.Element,element:t,token:r})}insertElementAfterBookmark(t,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:Hs.Element,element:t,token:r})}removeEntry(t){const r=this.entries.indexOf(t);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){const t=this.entries.indexOf(Y_);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const r=this.entries.find(n=>n.type===Hs.Marker||this.treeAdapter.getTagName(n.element)===t);return r&&r.type===Hs.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===Hs.Element&&r.element===t)}}const yl={createDocument(){return{nodeName:"#document",mode:Zi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,n){const a=e.childNodes.find(i=>i.nodeName==="#documentType");if(a)a.name=t,a.publicId=r,a.systemId=n;else{const i={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};yl.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(yl.isTextNode(r)){r.value+=t;return}}yl.appendChild(e,yl.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&yl.isTextNode(n)?n.value+=t:yl.insertBefore(e,yl.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(n=>n.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},rR="html",dX="about:legacy-compat",hX="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",nR=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],pX=[...nR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],gX=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),aR=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],fX=[...aR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Q_(e,t){return t.some(r=>e.startsWith(r))}function mX(e){return e.name===rR&&e.publicId===null&&(e.systemId===null||e.systemId===dX)}function yX(e){if(e.name!==rR)return Zi.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===hX)return Zi.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),gX.has(r))return Zi.QUIRKS;let n=t===null?pX:nR;if(Q_(r,n))return Zi.QUIRKS;if(n=t===null?aR:fX,Q_(r,n))return Zi.LIMITED_QUIRKS}return Zi.NO_QUIRKS}const K_={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},bX="definitionurl",xX="definitionURL",vX=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),wX=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ye.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ye.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ye.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ye.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ye.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ye.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ye.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ye.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ye.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ye.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ye.XMLNS}]]),SX=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),TX=new Set([E.B,E.BIG,E.BLOCKQUOTE,E.BODY,E.BR,E.CENTER,E.CODE,E.DD,E.DIV,E.DL,E.DT,E.EM,E.EMBED,E.H1,E.H2,E.H3,E.H4,E.H5,E.H6,E.HEAD,E.HR,E.I,E.IMG,E.LI,E.LISTING,E.MENU,E.META,E.NOBR,E.OL,E.P,E.PRE,E.RUBY,E.S,E.SMALL,E.SPAN,E.STRONG,E.STRIKE,E.SUB,E.SUP,E.TABLE,E.TT,E.U,E.UL,E.VAR]);function kX(e){const t=e.tagID;return t===E.FONT&&e.attrs.some(({name:n})=>n===bc.COLOR||n===bc.SIZE||n===bc.FACE)||TX.has(t)}function iR(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===bX){e.attrs[t].name=xX;break}}function sR(e){for(let t=0;t<e.attrs.length;t++){const r=vX.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function wS(e){for(let t=0;t<e.attrs.length;t++){const r=wX.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function EX(e){const t=SX.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Ld(e.tagName))}function CX(e,t){return t===Ye.MATHML&&(e===E.MI||e===E.MO||e===E.MN||e===E.MS||e===E.MTEXT)}function _X(e,t,r){if(t===Ye.MATHML&&e===E.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===bc.ENCODING){const a=r[n].value.toLowerCase();return a===K_.TEXT_HTML||a===K_.APPLICATION_XML}}return t===Ye.SVG&&(e===E.FOREIGN_OBJECT||e===E.DESC||e===E.TITLE)}function AX(e,t,r,n){return(!n||n===Ye.HTML)&&_X(e,t,r)||(!n||n===Ye.MATHML)&&CX(e,t)}const NX="hidden",LX=8,PX=3;var se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(se||(se={}));const RX={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},oR=new Set([E.TABLE,E.TBODY,E.TFOOT,E.THEAD,E.TR]),X_={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:yl,onParseError:null};class J_{constructor(t,r,n=null,a=null){this.fragmentContext=n,this.scriptHandler=a,this.currentToken=null,this.stopped=!1,this.insertionMode=se.INITIAL,this.originalInsertionMode=se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...X_,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new rX(this.options,this),this.activeFormattingElements=new uX(this.treeAdapter),this.fragmentContextID=n?Ld(this.treeAdapter.getTagName(n)):E.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new cX(this.document,this.treeAdapter,this)}static parse(t,r){const n=new this(r);return n.tokenizer.write(t,!0),n.document}static getFragmentParser(t,r){const n={...X_,...r};t??(t=n.treeAdapter.createElement(ve.TEMPLATE,Ye.HTML,[]));const a=n.treeAdapter.createElement("documentmock",Ye.HTML,[]),i=new this(n,a,t);return i.fragmentContextID===E.TEMPLATE&&i.tmplInsertionModeStack.unshift(se.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,r),r}_err(t,r,n){var a;if(!this.onParseError)return;const i=(a=t.location)!==null&&a!==void 0?a:RX,s={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(s)}onItemPush(t,r,n){var a,i;(i=(a=this.treeAdapter).onItemPush)===null||i===void 0||i.call(a,t),n&&this.openElements.stackTop>0&&this._setContextModes(t,r)}onItemPop(t,r){var n,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(a=(n=this.treeAdapter).onItemPop)===null||a===void 0||a.call(n,t,this.openElements.current),r){let i,s;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,s=this.fragmentContextID):{current:i,currentTagId:s}=this.openElements,this._setContextModes(i,s)}}_setContextModes(t,r){const n=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===Ye.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&t!==void 0&&r!==void 0&&!this._isIntegrationPoint(r,t)}_switchToTextParsing(t,r){this._insertElement(t,Ye.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=se.TEXT}switchToPlaintextParsing(){this.insertionMode=se.TEXT,this.originalInsertionMode=se.IN_BODY,this.tokenizer.state=Mn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===ve.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ye.HTML))switch(this.fragmentContextID){case E.TITLE:case E.TEXTAREA:{this.tokenizer.state=Mn.RCDATA;break}case E.STYLE:case E.XMP:case E.IFRAME:case E.NOEMBED:case E.NOFRAMES:case E.NOSCRIPT:{this.tokenizer.state=Mn.RAWTEXT;break}case E.SCRIPT:{this.tokenizer.state=Mn.SCRIPT_DATA;break}case E.PLAINTEXT:{this.tokenizer.state=Mn.PLAINTEXT;break}}}_setDocumentType(t){const r=t.name||"",n=t.publicId||"",a=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,a),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(t,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,t)}}_appendElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location)}_insertElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID)}_insertFakeElement(t,r){const n=this.treeAdapter.createElement(t,Ye.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(t){const r=this.treeAdapter.createElement(t.tagName,Ye.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(ve.HTML,Ye.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,E.HTML)}_appendCommentNode(t,r){const n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,t.location)}_insertCharacters(t){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,t.chars,n):this.treeAdapter.insertText(r,t.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,t.chars)),!t.location)return;const a=this.treeAdapter.getChildNodes(r),i=n?a.lastIndexOf(n):a.length,s=a[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:h,endOffset:p}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:h,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,r){for(let n=this.treeAdapter.getFirstChild(t);n;n=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(t,r){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&r.location){const n=r.location,a=this.treeAdapter.getTagName(t),i=r.type===gr.END_TAG&&a===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,i)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,t.tagID===E.SVG&&this.treeAdapter.getTagName(r)===ve.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Ye.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===E.MGLYPH||t.tagID===E.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,r,Ye.HTML)}_processToken(t){switch(t.type){case gr.CHARACTER:{this.onCharacter(t);break}case gr.NULL_CHARACTER:{this.onNullCharacter(t);break}case gr.COMMENT:{this.onComment(t);break}case gr.DOCTYPE:{this.onDoctype(t);break}case gr.START_TAG:{this._processStartTag(t);break}case gr.END_TAG:{this.onEndTag(t);break}case gr.EOF:{this.onEof(t);break}case gr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,r,n){const a=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return AX(t,a,i,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const r=this.activeFormattingElements.entries.findIndex(a=>a.type===Hs.Marker||this.openElements.contains(a.element)),n=r===-1?t-1:r-1;for(let a=n;a>=0;a--){const i=this.activeFormattingElements.entries[a];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(E.P),this.openElements.popUntilTagNamePopped(E.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case E.TR:{this.insertionMode=se.IN_ROW;return}case E.TBODY:case E.THEAD:case E.TFOOT:{this.insertionMode=se.IN_TABLE_BODY;return}case E.CAPTION:{this.insertionMode=se.IN_CAPTION;return}case E.COLGROUP:{this.insertionMode=se.IN_COLUMN_GROUP;return}case E.TABLE:{this.insertionMode=se.IN_TABLE;return}case E.BODY:{this.insertionMode=se.IN_BODY;return}case E.FRAMESET:{this.insertionMode=se.IN_FRAMESET;return}case E.SELECT:{this._resetInsertionModeForSelect(t);return}case E.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case E.HTML:{this.insertionMode=this.headElement?se.AFTER_HEAD:se.BEFORE_HEAD;return}case E.TD:case E.TH:{if(t>0){this.insertionMode=se.IN_CELL;return}break}case E.HEAD:{if(t>0){this.insertionMode=se.IN_HEAD;return}break}}this.insertionMode=se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let r=t-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===E.TEMPLATE)break;if(n===E.TABLE){this.insertionMode=se.IN_SELECT_IN_TABLE;return}}this.insertionMode=se.IN_SELECT}_isElementCausesFosterParenting(t){return oR.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case E.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Ye.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case E.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,t,r.beforeElement):this.treeAdapter.appendChild(r.parent,t)}_isSpecialElement(t,r){const n=this.treeAdapter.getNamespaceURI(t);return JK[n].has(r)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){lZ(this,t);return}switch(this.insertionMode){case se.INITIAL:{Bh(this,t);break}case se.BEFORE_HTML:{xp(this,t);break}case se.BEFORE_HEAD:{vp(this,t);break}case se.IN_HEAD:{wp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Sp(this,t);break}case se.AFTER_HEAD:{Tp(this,t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:{cR(this,t);break}case se.TEXT:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Sv(this,t);break}case se.IN_TABLE_TEXT:{fR(this,t);break}case se.IN_COLUMN_GROUP:{Km(this,t);break}case se.AFTER_BODY:{Xm(this,t);break}case se.AFTER_AFTER_BODY:{xm(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){oZ(this,t);return}switch(this.insertionMode){case se.INITIAL:{Bh(this,t);break}case se.BEFORE_HTML:{xp(this,t);break}case se.BEFORE_HEAD:{vp(this,t);break}case se.IN_HEAD:{wp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Sp(this,t);break}case se.AFTER_HEAD:{Tp(this,t);break}case se.TEXT:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Sv(this,t);break}case se.IN_COLUMN_GROUP:{Km(this,t);break}case se.AFTER_BODY:{Xm(this,t);break}case se.AFTER_AFTER_BODY:{xm(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){zw(this,t);return}switch(this.insertionMode){case se.INITIAL:case se.BEFORE_HTML:case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_TEMPLATE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{zw(this,t);break}case se.IN_TABLE_TEXT:{Fh(this,t);break}case se.AFTER_BODY:{FX(this,t);break}case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{zX(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case se.INITIAL:{UX(this,t);break}case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:{this._err(t,Re.misplacedDoctype);break}case se.IN_TABLE_TEXT:{Fh(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Re.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?cZ(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{Bh(this,t);break}case se.BEFORE_HTML:{$X(this,t);break}case se.BEFORE_HEAD:{HX(this,t);break}case se.IN_HEAD:{Es(this,t);break}case se.IN_HEAD_NO_SCRIPT:{VX(this,t);break}case se.AFTER_HEAD:{QX(this,t);break}case se.IN_BODY:{Ba(this,t);break}case se.IN_TABLE:{ud(this,t);break}case se.IN_TABLE_TEXT:{Fh(this,t);break}case se.IN_CAPTION:{GJ(this,t);break}case se.IN_COLUMN_GROUP:{kS(this,t);break}case se.IN_TABLE_BODY:{Z0(this,t);break}case se.IN_ROW:{ey(this,t);break}case se.IN_CELL:{YJ(this,t);break}case se.IN_SELECT:{bR(this,t);break}case se.IN_SELECT_IN_TABLE:{KJ(this,t);break}case se.IN_TEMPLATE:{JJ(this,t);break}case se.AFTER_BODY:{eZ(this,t);break}case se.IN_FRAMESET:{tZ(this,t);break}case se.AFTER_FRAMESET:{nZ(this,t);break}case se.AFTER_AFTER_BODY:{iZ(this,t);break}case se.AFTER_AFTER_FRAMESET:{sZ(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?uZ(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{Bh(this,t);break}case se.BEFORE_HTML:{qX(this,t);break}case se.BEFORE_HEAD:{GX(this,t);break}case se.IN_HEAD:{WX(this,t);break}case se.IN_HEAD_NO_SCRIPT:{YX(this,t);break}case se.AFTER_HEAD:{KX(this,t);break}case se.IN_BODY:{J0(this,t);break}case se.TEXT:{MJ(this,t);break}case se.IN_TABLE:{Fp(this,t);break}case se.IN_TABLE_TEXT:{Fh(this,t);break}case se.IN_CAPTION:{WJ(this,t);break}case se.IN_COLUMN_GROUP:{VJ(this,t);break}case se.IN_TABLE_BODY:{Uw(this,t);break}case se.IN_ROW:{yR(this,t);break}case se.IN_CELL:{QJ(this,t);break}case se.IN_SELECT:{xR(this,t);break}case se.IN_SELECT_IN_TABLE:{XJ(this,t);break}case se.IN_TEMPLATE:{ZJ(this,t);break}case se.AFTER_BODY:{wR(this,t);break}case se.IN_FRAMESET:{rZ(this,t);break}case se.AFTER_FRAMESET:{aZ(this,t);break}case se.AFTER_AFTER_BODY:{xm(this,t);break}}}onEof(t){switch(this.insertionMode){case se.INITIAL:{Bh(this,t);break}case se.BEFORE_HTML:{xp(this,t);break}case se.BEFORE_HEAD:{vp(this,t);break}case se.IN_HEAD:{wp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Sp(this,t);break}case se.AFTER_HEAD:{Tp(this,t);break}case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{pR(this,t);break}case se.TEXT:{OJ(this,t);break}case se.IN_TABLE_TEXT:{Fh(this,t);break}case se.IN_TEMPLATE:{vR(this,t);break}case se.AFTER_BODY:case se.IN_FRAMESET:case se.AFTER_FRAMESET:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{TS(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ee.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.TEXT:case se.IN_COLUMN_GROUP:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{this._insertCharacters(t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:case se.AFTER_BODY:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{lR(this,t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Sv(this,t);break}case se.IN_TABLE_TEXT:{gR(this,t);break}}}}function IX(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):hR(e,t),r}function DX(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const a=e.openElements.items[n];if(a===t.element)break;e._isSpecialElement(a,e.openElements.tagIDs[n])&&(r=a)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function MX(e,t,r){let n=t,a=e.openElements.getCommonAncestor(t);for(let i=0,s=a;s!==r;i++,s=a){a=e.openElements.getCommonAncestor(s);const l=e.activeFormattingElements.getElementEntry(s),u=l&&i>=PX;!l||u?(u&&e.activeFormattingElements.removeEntry(l),e.openElements.remove(s)):(s=OX(e,l),n===t&&(e.activeFormattingElements.bookmark=l),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(s,n),n=s)}return n}function OX(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function jX(e,t,r){const n=e.treeAdapter.getTagName(t),a=Ld(n);if(e._isElementCausesFosterParenting(a))e._fosterParentElement(r);else{const i=e.treeAdapter.getNamespaceURI(t);a===E.TEMPLATE&&i===Ye.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function BX(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:a}=r,i=e.treeAdapter.createElement(a.tagName,n,a.attrs);e._adoptNodes(t,i),e.treeAdapter.appendChild(t,i),e.activeFormattingElements.insertElementAfterBookmark(i,a),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,i,a.tagID)}function SS(e,t){for(let r=0;r<LX;r++){const n=IX(e,t);if(!n)break;const a=DX(e,n);if(!a)break;e.activeFormattingElements.bookmark=n;const i=MX(e,a,n.element),s=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),s&&jX(e,s,i),BX(e,a,n)}}function zw(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function FX(e,t){e._appendCommentNode(t,e.openElements.items[0])}function zX(e,t){e._appendCommentNode(t,e.document)}function TS(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],a=e.treeAdapter.getNodeSourceCodeLocation(n);if(a&&!a.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const i=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(i);s&&!s.endTag&&e._setEndLocation(i,t)}}}}function UX(e,t){e._setDocumentType(t);const r=t.forceQuirks?Zi.QUIRKS:yX(t);mX(t)||e._err(t,Re.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=se.BEFORE_HTML}function Bh(e,t){e._err(t,Re.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Zi.QUIRKS),e.insertionMode=se.BEFORE_HTML,e._processToken(t)}function $X(e,t){t.tagID===E.HTML?(e._insertElement(t,Ye.HTML),e.insertionMode=se.BEFORE_HEAD):xp(e,t)}function qX(e,t){const r=t.tagID;(r===E.HTML||r===E.HEAD||r===E.BODY||r===E.BR)&&xp(e,t)}function xp(e,t){e._insertFakeRootElement(),e.insertionMode=se.BEFORE_HEAD,e._processToken(t)}function HX(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.HEAD:{e._insertElement(t,Ye.HTML),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD;break}default:vp(e,t)}}function GX(e,t){const r=t.tagID;r===E.HEAD||r===E.BODY||r===E.HTML||r===E.BR?vp(e,t):e._err(t,Re.endTagWithoutMatchingOpenElement)}function vp(e,t){e._insertFakeElement(ve.HEAD,E.HEAD),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD,e._processToken(t)}function Es(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:{e._appendElement(t,Ye.HTML),t.ackSelfClosing=!0;break}case E.TITLE:{e._switchToTextParsing(t,Mn.RCDATA);break}case E.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Mn.RAWTEXT):(e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_HEAD_NO_SCRIPT);break}case E.NOFRAMES:case E.STYLE:{e._switchToTextParsing(t,Mn.RAWTEXT);break}case E.SCRIPT:{e._switchToTextParsing(t,Mn.SCRIPT_DATA);break}case E.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(se.IN_TEMPLATE);break}case E.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:wp(e,t)}}function WX(e,t){switch(t.tagID){case E.HEAD:{e.openElements.pop(),e.insertionMode=se.AFTER_HEAD;break}case E.BODY:case E.BR:case E.HTML:{wp(e,t);break}case E.TEMPLATE:{jc(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function jc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==E.TEMPLATE&&e._err(t,Re.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Re.endTagWithoutMatchingOpenElement)}function wp(e,t){e.openElements.pop(),e.insertionMode=se.AFTER_HEAD,e._processToken(t)}function VX(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.BASEFONT:case E.BGSOUND:case E.HEAD:case E.LINK:case E.META:case E.NOFRAMES:case E.STYLE:{Es(e,t);break}case E.NOSCRIPT:{e._err(t,Re.nestedNoscriptInHead);break}default:Sp(e,t)}}function YX(e,t){switch(t.tagID){case E.NOSCRIPT:{e.openElements.pop(),e.insertionMode=se.IN_HEAD;break}case E.BR:{Sp(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function Sp(e,t){const r=t.type===gr.EOF?Re.openElementsLeftAfterEof:Re.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=se.IN_HEAD,e._processToken(t)}function QX(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.BODY:{e._insertElement(t,Ye.HTML),e.framesetOk=!1,e.insertionMode=se.IN_BODY;break}case E.FRAMESET:{e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_FRAMESET;break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{e._err(t,Re.abandonedHeadElementChild),e.openElements.push(e.headElement,E.HEAD),Es(e,t),e.openElements.remove(e.headElement);break}case E.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:Tp(e,t)}}function KX(e,t){switch(t.tagID){case E.BODY:case E.HTML:case E.BR:{Tp(e,t);break}case E.TEMPLATE:{jc(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function Tp(e,t){e._insertFakeElement(ve.BODY,E.BODY),e.insertionMode=se.IN_BODY,X0(e,t)}function X0(e,t){switch(t.type){case gr.CHARACTER:{cR(e,t);break}case gr.WHITESPACE_CHARACTER:{lR(e,t);break}case gr.COMMENT:{zw(e,t);break}case gr.START_TAG:{Ba(e,t);break}case gr.END_TAG:{J0(e,t);break}case gr.EOF:{pR(e,t);break}}}function lR(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function cR(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function XX(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function JX(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function ZX(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_FRAMESET)}function eJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML)}function tJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&Fw.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ye.HTML)}function rJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function nJ(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML),r||(e.formElement=e.openElements.current))}function aJ(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const a=e.openElements.tagIDs[n];if(r===E.LI&&a===E.LI||(r===E.DD||r===E.DT)&&(a===E.DD||a===E.DT)){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(a!==E.ADDRESS&&a!==E.DIV&&a!==E.P&&e._isSpecialElement(e.openElements.items[n],a))break}e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML)}function iJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML),e.tokenizer.state=Mn.PLAINTEXT}function sJ(e,t){e.openElements.hasInScope(E.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML),e.framesetOk=!1}function oJ(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(ve.A);r&&(SS(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function lJ(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function cJ(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(E.NOBR)&&(SS(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ye.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function uJ(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function dJ(e,t){e.treeAdapter.getDocumentMode(e.document)!==Zi.QUIRKS&&e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ye.HTML),e.framesetOk=!1,e.insertionMode=se.IN_TABLE}function uR(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ye.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function dR(e){const t=ZP(e,bc.TYPE);return t!=null&&t.toLowerCase()===NX}function hJ(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ye.HTML),dR(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function pJ(e,t){e._appendElement(t,Ye.HTML),t.ackSelfClosing=!0}function gJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._appendElement(t,Ye.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function fJ(e,t){t.tagName=ve.IMG,t.tagID=E.IMG,uR(e,t)}function mJ(e,t){e._insertElement(t,Ye.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Mn.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=se.TEXT}function yJ(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Mn.RAWTEXT)}function bJ(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Mn.RAWTEXT)}function Z_(e,t){e._switchToTextParsing(t,Mn.RAWTEXT)}function xJ(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===se.IN_TABLE||e.insertionMode===se.IN_CAPTION||e.insertionMode===se.IN_TABLE_BODY||e.insertionMode===se.IN_ROW||e.insertionMode===se.IN_CELL?se.IN_SELECT_IN_TABLE:se.IN_SELECT}function vJ(e,t){e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML)}function wJ(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ye.HTML)}function SJ(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(E.RTC),e._insertElement(t,Ye.HTML)}function TJ(e,t){e._reconstructActiveFormattingElements(),iR(t),wS(t),t.selfClosing?e._appendElement(t,Ye.MATHML):e._insertElement(t,Ye.MATHML),t.ackSelfClosing=!0}function kJ(e,t){e._reconstructActiveFormattingElements(),sR(t),wS(t),t.selfClosing?e._appendElement(t,Ye.SVG):e._insertElement(t,Ye.SVG),t.ackSelfClosing=!0}function eA(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ye.HTML)}function Ba(e,t){switch(t.tagID){case E.I:case E.S:case E.B:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.SMALL:case E.STRIKE:case E.STRONG:{lJ(e,t);break}case E.A:{oJ(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{tJ(e,t);break}case E.P:case E.DL:case E.OL:case E.UL:case E.DIV:case E.DIR:case E.NAV:case E.MAIN:case E.MENU:case E.ASIDE:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.DETAILS:case E.ADDRESS:case E.ARTICLE:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{eJ(e,t);break}case E.LI:case E.DD:case E.DT:{aJ(e,t);break}case E.BR:case E.IMG:case E.WBR:case E.AREA:case E.EMBED:case E.KEYGEN:{uR(e,t);break}case E.HR:{gJ(e,t);break}case E.RB:case E.RTC:{wJ(e,t);break}case E.RT:case E.RP:{SJ(e,t);break}case E.PRE:case E.LISTING:{rJ(e,t);break}case E.XMP:{yJ(e,t);break}case E.SVG:{kJ(e,t);break}case E.HTML:{XX(e,t);break}case E.BASE:case E.LINK:case E.META:case E.STYLE:case E.TITLE:case E.SCRIPT:case E.BGSOUND:case E.BASEFONT:case E.TEMPLATE:{Es(e,t);break}case E.BODY:{JX(e,t);break}case E.FORM:{nJ(e,t);break}case E.NOBR:{cJ(e,t);break}case E.MATH:{TJ(e,t);break}case E.TABLE:{dJ(e,t);break}case E.INPUT:{hJ(e,t);break}case E.PARAM:case E.TRACK:case E.SOURCE:{pJ(e,t);break}case E.IMAGE:{fJ(e,t);break}case E.BUTTON:{sJ(e,t);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{uJ(e,t);break}case E.IFRAME:{bJ(e,t);break}case E.SELECT:{xJ(e,t);break}case E.OPTION:case E.OPTGROUP:{vJ(e,t);break}case E.NOEMBED:case E.NOFRAMES:{Z_(e,t);break}case E.FRAMESET:{ZX(e,t);break}case E.TEXTAREA:{mJ(e,t);break}case E.NOSCRIPT:{e.options.scriptingEnabled?Z_(e,t):eA(e,t);break}case E.PLAINTEXT:{iJ(e,t);break}case E.COL:case E.TH:case E.TD:case E.TR:case E.HEAD:case E.FRAME:case E.TBODY:case E.TFOOT:case E.THEAD:case E.CAPTION:case E.COLGROUP:break;default:eA(e,t)}}function EJ(e,t){if(e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function CJ(e,t){e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,wR(e,t))}function _J(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function AJ(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(E.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(E.FORM):r&&e.openElements.remove(r))}function NJ(e){e.openElements.hasInButtonScope(E.P)||e._insertFakeElement(ve.P,E.P),e._closePElement()}function LJ(e){e.openElements.hasInListItemScope(E.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(E.LI),e.openElements.popUntilTagNamePopped(E.LI))}function PJ(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function RJ(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function IJ(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function DJ(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(ve.BR,E.BR),e.openElements.pop(),e.framesetOk=!1}function hR(e,t){const r=t.tagName,n=t.tagID;for(let a=e.openElements.stackTop;a>0;a--){const i=e.openElements.items[a],s=e.openElements.tagIDs[a];if(n===s&&(n!==E.UNKNOWN||e.treeAdapter.getTagName(i)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=a&&e.openElements.shortenToLength(a);break}if(e._isSpecialElement(i,s))break}}function J0(e,t){switch(t.tagID){case E.A:case E.B:case E.I:case E.S:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.NOBR:case E.SMALL:case E.STRIKE:case E.STRONG:{SS(e,t);break}case E.P:{NJ(e);break}case E.DL:case E.UL:case E.OL:case E.DIR:case E.DIV:case E.NAV:case E.PRE:case E.MAIN:case E.MENU:case E.ASIDE:case E.BUTTON:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.ADDRESS:case E.ARTICLE:case E.DETAILS:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.LISTING:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{_J(e,t);break}case E.LI:{LJ(e);break}case E.DD:case E.DT:{PJ(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{RJ(e);break}case E.BR:{DJ(e);break}case E.BODY:{EJ(e,t);break}case E.HTML:{CJ(e,t);break}case E.FORM:{AJ(e);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{IJ(e,t);break}case E.TEMPLATE:{jc(e,t);break}default:hR(e,t)}}function pR(e,t){e.tmplInsertionModeStack.length>0?vR(e,t):TS(e,t)}function MJ(e,t){var r;t.tagID===E.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function OJ(e,t){e._err(t,Re.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Sv(e,t){if(e.openElements.currentTagId!==void 0&&oR.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=se.IN_TABLE_TEXT,t.type){case gr.CHARACTER:{fR(e,t);break}case gr.WHITESPACE_CHARACTER:{gR(e,t);break}}else dg(e,t)}function jJ(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_CAPTION}function BJ(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_COLUMN_GROUP}function FJ(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ve.COLGROUP,E.COLGROUP),e.insertionMode=se.IN_COLUMN_GROUP,kS(e,t)}function zJ(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_TABLE_BODY}function UJ(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ve.TBODY,E.TBODY),e.insertionMode=se.IN_TABLE_BODY,Z0(e,t)}function $J(e,t){e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function qJ(e,t){dR(t)?e._appendElement(t,Ye.HTML):dg(e,t),t.ackSelfClosing=!0}function HJ(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ye.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function ud(e,t){switch(t.tagID){case E.TD:case E.TH:case E.TR:{UJ(e,t);break}case E.STYLE:case E.SCRIPT:case E.TEMPLATE:{Es(e,t);break}case E.COL:{FJ(e,t);break}case E.FORM:{HJ(e,t);break}case E.TABLE:{$J(e,t);break}case E.TBODY:case E.TFOOT:case E.THEAD:{zJ(e,t);break}case E.INPUT:{qJ(e,t);break}case E.CAPTION:{jJ(e,t);break}case E.COLGROUP:{BJ(e,t);break}default:dg(e,t)}}function Fp(e,t){switch(t.tagID){case E.TABLE:{e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode());break}case E.TEMPLATE:{jc(e,t);break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:dg(e,t)}}function dg(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,X0(e,t),e.fosterParentingEnabled=r}function gR(e,t){e.pendingCharacterTokens.push(t)}function fR(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Fh(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)dg(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const mR=new Set([E.CAPTION,E.COL,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]);function GJ(e,t){const r=t.tagID;mR.has(r)?e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,ud(e,t)):Ba(e,t)}function WJ(e,t){const r=t.tagID;switch(r){case E.CAPTION:case E.TABLE:{e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,r===E.TABLE&&Fp(e,t));break}case E.BODY:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:J0(e,t)}}function kS(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.COL:{e._appendElement(t,Ye.HTML),t.ackSelfClosing=!0;break}case E.TEMPLATE:{Es(e,t);break}default:Km(e,t)}}function VJ(e,t){switch(t.tagID){case E.COLGROUP:{e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TEMPLATE:{jc(e,t);break}case E.COL:break;default:Km(e,t)}}function Km(e,t){e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE,e._processToken(t))}function Z0(e,t){switch(t.tagID){case E.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_ROW;break}case E.TH:case E.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(ve.TR,E.TR),e.insertionMode=se.IN_ROW,ey(e,t);break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,ud(e,t));break}default:ud(e,t)}}function Uw(e,t){const r=t.tagID;switch(t.tagID){case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,Fp(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:case E.TR:break;default:Fp(e,t)}}function ey(e,t){switch(t.tagID){case E.TH:case E.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ye.HTML),e.insertionMode=se.IN_CELL,e.activeFormattingElements.insertMarker();break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,Z0(e,t));break}default:ud(e,t)}}function yR(e,t){switch(t.tagID){case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY);break}case E.TABLE:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,Uw(e,t));break}case E.TBODY:case E.TFOOT:case E.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(E.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,Uw(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:break;default:Fp(e,t)}}function YJ(e,t){const r=t.tagID;mR.has(r)?(e.openElements.hasInTableScope(E.TD)||e.openElements.hasInTableScope(E.TH))&&(e._closeTableCell(),ey(e,t)):Ba(e,t)}function QJ(e,t){const r=t.tagID;switch(r){case E.TD:case E.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_ROW);break}case E.TABLE:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),yR(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:break;default:J0(e,t)}}function bR(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._insertElement(t,Ye.HTML);break}case E.OPTGROUP:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ye.HTML);break}case E.HR:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Ye.HTML),t.ackSelfClosing=!0;break}case E.INPUT:case E.KEYGEN:case E.TEXTAREA:case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),t.tagID!==E.SELECT&&e._processStartTag(t));break}case E.SCRIPT:case E.TEMPLATE:{Es(e,t);break}}}function xR(e,t){switch(t.tagID){case E.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===E.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===E.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop();break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop();break}case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode());break}case E.TEMPLATE:{jc(e,t);break}}}function KJ(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e._processStartTag(t)):bR(e,t)}function XJ(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e.onEndTag(t)):xR(e,t)}function JJ(e,t){switch(t.tagID){case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{Es(e,t);break}case E.CAPTION:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.tmplInsertionModeStack[0]=se.IN_TABLE,e.insertionMode=se.IN_TABLE,ud(e,t);break}case E.COL:{e.tmplInsertionModeStack[0]=se.IN_COLUMN_GROUP,e.insertionMode=se.IN_COLUMN_GROUP,kS(e,t);break}case E.TR:{e.tmplInsertionModeStack[0]=se.IN_TABLE_BODY,e.insertionMode=se.IN_TABLE_BODY,Z0(e,t);break}case E.TD:case E.TH:{e.tmplInsertionModeStack[0]=se.IN_ROW,e.insertionMode=se.IN_ROW,ey(e,t);break}default:e.tmplInsertionModeStack[0]=se.IN_BODY,e.insertionMode=se.IN_BODY,Ba(e,t)}}function ZJ(e,t){t.tagID===E.TEMPLATE&&jc(e,t)}function vR(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):TS(e,t)}function eZ(e,t){t.tagID===E.HTML?Ba(e,t):Xm(e,t)}function wR(e,t){var r;if(t.tagID===E.HTML){if(e.fragmentContext||(e.insertionMode=se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===E.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&e._setEndLocation(n,t)}}else Xm(e,t)}function Xm(e,t){e.insertionMode=se.IN_BODY,X0(e,t)}function tZ(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.FRAMESET:{e._insertElement(t,Ye.HTML);break}case E.FRAME:{e._appendElement(t,Ye.HTML),t.ackSelfClosing=!0;break}case E.NOFRAMES:{Es(e,t);break}}}function rZ(e,t){t.tagID===E.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==E.FRAMESET&&(e.insertionMode=se.AFTER_FRAMESET))}function nZ(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.NOFRAMES:{Es(e,t);break}}}function aZ(e,t){t.tagID===E.HTML&&(e.insertionMode=se.AFTER_AFTER_FRAMESET)}function iZ(e,t){t.tagID===E.HTML?Ba(e,t):xm(e,t)}function xm(e,t){e.insertionMode=se.IN_BODY,X0(e,t)}function sZ(e,t){switch(t.tagID){case E.HTML:{Ba(e,t);break}case E.NOFRAMES:{Es(e,t);break}}}function oZ(e,t){t.chars=bn,e._insertCharacters(t)}function lZ(e,t){e._insertCharacters(t),e.framesetOk=!1}function SR(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ye.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function cZ(e,t){if(kX(t))SR(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===Ye.MATHML?iR(t):n===Ye.SVG&&(EX(t),sR(t)),wS(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function uZ(e,t){if(t.tagID===E.P||t.tagID===E.BR){SR(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===Ye.HTML){e._endTagOutsideForeignContent(t);break}const a=e.treeAdapter.getTagName(n);if(a.toLowerCase()===t.tagName){t.tagName=a,e.openElements.shortenToLength(r);break}}}ve.AREA,ve.BASE,ve.BASEFONT,ve.BGSOUND,ve.BR,ve.COL,ve.EMBED,ve.FRAME,ve.HR,ve.IMG,ve.INPUT,ve.KEYGEN,ve.LINK,ve.META,ve.PARAM,ve.SOURCE,ve.TRACK,ve.WBR;const dZ=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,hZ=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),tA={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function TR(e,t){const r=SZ(e),n=yP("type",{handlers:{root:pZ,element:gZ,text:fZ,comment:ER,doctype:mZ,raw:bZ},unknown:xZ}),a={parser:r?new J_(tA):J_.getFragmentParser(void 0,tA),handle(l){n(l,a)},stitches:!1,options:t||{}};n(e,a),Pd(a,Js());const i=r?a.parser.document:a.parser.getFragment(),s=pK(i,{file:a.options.file});return a.stitches&&lg(s,"comment",function(l,u,h){const p=l;if(p.value.stitch&&h&&u!==void 0){const f=h.children;return f[u]=p.value.stitch,u}}),s.type==="root"&&s.children.length===1&&s.children[0].type===e.type?s.children[0]:s}function kR(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function pZ(e,t){kR(e.children,t)}function gZ(e,t){vZ(e,t),kR(e.children,t),wZ(e,t)}function fZ(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const r={type:gr.CHARACTER,chars:e.value,location:hg(e)};Pd(t,Js(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function mZ(e,t){const r={type:gr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:hg(e)};Pd(t,Js(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function yZ(e,t){t.stitches=!0;const r=TZ(e);if("children"in e&&"children"in r){const n=TR({type:"root",children:e.children},t.options);r.children=n.children}ER({type:"comment",value:{stitch:r}},t)}function ER(e,t){const r=e.value,n={type:gr.COMMENT,data:r,location:hg(e)};Pd(t,Js(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function bZ(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,CR(t,Js(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(dZ,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=t.parser.tokenizer._consume();t.parser.tokenizer._callState(r)}}function xZ(e,t){const r=e;if(t.options.passThrough&&t.options.passThrough.includes(r.type))yZ(r,t);else{let n="";throw hZ.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function Pd(e,t){CR(e,t);const r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Mn.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function CR(e,t){if(t&&t.offset!==void 0){const r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function vZ(e,t){const r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Mn.PLAINTEXT)return;Pd(t,Js(e));const n=t.parser.openElements.current;let a="namespaceURI"in n?n.namespaceURI:dc.html;a===dc.html&&r==="svg"&&(a=dc.svg);const i=AK({...e,children:[]},{space:a===dc.svg?"svg":"html"}),s={type:gr.START_TAG,tagName:r,tagID:Ld(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:hg(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}function wZ(e,t){const r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&OK.includes(r)||t.parser.tokenizer.state===Mn.PLAINTEXT)return;Pd(t,W0(e));const n={type:gr.END_TAG,tagName:r,tagID:Ld(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:hg(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Mn.RCDATA||t.parser.tokenizer.state===Mn.RAWTEXT||t.parser.tokenizer.state===Mn.SCRIPT_DATA)&&(t.parser.tokenizer.state=Mn.DATA)}function SZ(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function hg(e){const t=Js(e)||{line:void 0,column:void 0,offset:void 0},r=W0(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function TZ(e){return"children"in e?kc({...e,children:[]}):kc(e)}function kZ(e){return function(t,r){return TR(t,{...e,file:r})}}const rc=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],kp={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...rc,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...rc],h2:[["className","sr-only"]],img:[...rc,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...rc,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...rc],table:[...rc],ul:[...rc,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},xl={}.hasOwnProperty;function EZ(e,t){let r={type:"root",children:[]};const n={schema:t?{...kp,...t}:kp,stack:[]},a=_R(n,e);return a&&(Array.isArray(a)?a.length===1?r=a[0]:r.children=a:r=a),r}function _R(e,t){if(t&&typeof t=="object"){const r=t;switch(typeof r.type=="string"?r.type:""){case"comment":return CZ(e,r);case"doctype":return _Z(e,r);case"element":return AZ(e,r);case"root":return NZ(e,r);case"text":return LZ(e,r)}}}function CZ(e,t){if(e.schema.allowComments){const r=typeof t.value=="string"?t.value:"",n=r.indexOf("-->"),i={type:"comment",value:n<0?r:r.slice(0,n)};return pg(i,t),i}}function _Z(e,t){if(e.schema.allowDoctypes){const r={type:"doctype"};return pg(r,t),r}}function AZ(e,t){const r=typeof t.tagName=="string"?t.tagName:"";e.stack.push(r);const n=AR(e,t.children),a=PZ(e,t.properties);e.stack.pop();let i=!1;if(r&&r!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(r))&&(i=!0,e.schema.ancestors&&xl.call(e.schema.ancestors,r))){const l=e.schema.ancestors[r];let u=-1;for(i=!1;++u<l.length;)e.stack.includes(l[u])&&(i=!0)}if(!i)return e.schema.strip&&!e.schema.strip.includes(r)?n:void 0;const s={type:"element",tagName:r,properties:a,children:n};return pg(s,t),s}function NZ(e,t){const n={type:"root",children:AR(e,t.children)};return pg(n,t),n}function LZ(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return pg(n,t),n}function AR(e,t){const r=[];if(Array.isArray(t)){const n=t;let a=-1;for(;++a<n.length;){const i=_R(e,n[a]);i&&(Array.isArray(i)?r.push(...i):r.push(i))}}return r}function PZ(e,t){const r=e.stack[e.stack.length-1],n=e.schema.attributes,a=e.schema.required,i=n&&xl.call(n,r)?n[r]:void 0,s=n&&xl.call(n,"*")?n["*"]:void 0,l=t&&typeof t=="object"?t:{},u={};let h;for(h in l)if(xl.call(l,h)){const p=l[h];let f=rA(e,nA(i,h),h,p);f==null&&(f=rA(e,nA(s,h),h,p)),f!=null&&(u[h]=f)}if(a&&xl.call(a,r)){const p=a[r];for(h in p)xl.call(p,h)&&!xl.call(u,h)&&(u[h]=p[h])}return u}function rA(e,t,r,n){return t?Array.isArray(n)?RZ(e,t,r,n):NR(e,t,r,n):void 0}function RZ(e,t,r,n){let a=-1;const i=[];for(;++a<n.length;){const s=NR(e,t,r,n[a]);(typeof s=="number"||typeof s=="string")&&i.push(s)}return i}function NR(e,t,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&IZ(e,r,n)){if(typeof t=="object"&&t.length>1){let a=!1,i=0;for(;++i<t.length;){const s=t[i];if(s&&typeof s=="object"&&"flags"in s){if(s.test(String(n))){a=!0;break}}else if(s===n){a=!0;break}}if(!a)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(r)?e.schema.clobberPrefix+n:n}}function IZ(e,t,r){const n=e.schema.protocols&&xl.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!n||n.length===0)return!0;const a=String(r),i=a.indexOf(":"),s=a.indexOf("?"),l=a.indexOf("#"),u=a.indexOf("/");if(i<0||u>-1&&i>u||s>-1&&i>s||l>-1&&i>l)return!0;let h=-1;for(;++h<n.length;){const p=n[h];if(i===p.length&&a.slice(0,p.length)===p)return!0}return!1}function pg(e,t){const r=zL(t);t.data&&(e.data=kc(t.data)),r&&(e.position=r)}function nA(e,t){let r,n=-1;if(e)for(;++n<e.length;){const a=e[n],i=typeof a=="string"?a:a[0];if(i===t)return a;i==="data*"&&(r=a)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return r}function DZ(e){return function(t){return EZ(t,e)}}const aA=(function(e,t,r){const n=og(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]}),Bc=(function(e){if(e==null)return jZ;if(typeof e=="string")return OZ(e);if(typeof e=="object")return MZ(e);if(typeof e=="function")return ES(e);throw new Error("Expected function, string, or array as `test`")});function MZ(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Bc(e[r]);return ES(n);function n(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function OZ(e){return ES(t);function t(r){return r.tagName===e}}function ES(e){return t;function t(r,n,a){return!!(BZ(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function jZ(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function BZ(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const iA=/\n/g,sA=/[\t ]+/g,$w=Bc("br"),oA=Bc(WZ),FZ=Bc("p"),lA=Bc("tr"),zZ=Bc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",GZ,VZ]),LR=Bc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function UZ(e,t){const r=t||{},n="children"in e?e.children:[],a=LR(e),i=IR(e,{whitespace:r.whitespace||"normal"}),s=[];(e.type==="text"||e.type==="comment")&&s.push(...RR(e,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<n.length;)s.push(...PR(n[l],e,{whitespace:i,breakBefore:l?void 0:a,breakAfter:l<n.length-1?$w(n[l+1]):a}));const u=[];let h;for(l=-1;++l<s.length;){const p=s[l];typeof p=="number"?h!==void 0&&p>h&&(h=p):p&&(h!==void 0&&h>-1&&u.push(`
`.repeat(h)||" "),h=-1,u.push(p))}return u.join("")}function PR(e,t,r){return e.type==="element"?$Z(e,t,r):e.type==="text"?r.whitespace==="normal"?RR(e,r):qZ(e):[]}function $Z(e,t,r){const n=IR(e,r),a=e.children||[];let i=-1,s=[];if(zZ(e))return s;let l,u;for($w(e)||lA(e)&&aA(t,e,lA)?u=`
`:FZ(e)?(l=2,u=2):LR(e)&&(l=1,u=1);++i<a.length;)s=s.concat(PR(a[i],e,{whitespace:n,breakBefore:i?void 0:l,breakAfter:i<a.length-1?$w(a[i+1]):u}));return oA(e)&&aA(t,e,oA)&&s.push("	"),l&&s.unshift(l),u&&s.push(u),s}function RR(e,t){const r=String(e.value),n=[],a=[];let i=0;for(;i<=r.length;){iA.lastIndex=i;const u=iA.exec(r),h=u&&"index"in u?u.index:r.length;n.push(HZ(r.slice(i,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,h===r.length?t.breakAfter:!0)),i=h+1}let s=-1,l;for(;++s<n.length;)n[s].charCodeAt(n[s].length-1)===8203||s<n.length-1&&n[s+1].charCodeAt(0)===8203?(a.push(n[s]),l=void 0):n[s]?(typeof l=="number"&&a.push(l),a.push(n[s]),l=0):(s===0||s===n.length-1)&&a.push(0);return a}function qZ(e){return[String(e.value)]}function HZ(e,t,r){const n=[];let a=0,i;for(;a<e.length;){sA.lastIndex=a;const s=sA.exec(e);i=s?s.index:e.length,!a&&!i&&s&&!t&&n.push(""),a!==i&&n.push(e.slice(a,i)),a=s?i+s[0].length:i}return a!==i&&!r&&n.push(""),n.join(" ")}function IR(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function GZ(e){return!!(e.properties||{}).hidden}function WZ(e){return e.tagName==="td"||e.tagName==="th"}function VZ(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function YZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},y={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],T=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],P={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:T},M={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},L=[M,f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],D={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:P,contains:L.concat([{begin:/\(/,end:/\)/,keywords:P,contains:L.concat(["self"]),relevance:0}]),relevance:0},q={className:"function",begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:P,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:P,relevance:0},{begin:b,returnBegin:!0,contains:[y],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:P,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:P,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:P,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(D,q,M,L,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:P,contains:["self",l]},{begin:e.IDENT_RE+"::",keywords:P},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function QZ(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},r=YZ(e),n=r.keywords;return n.type=[...n.type,...t.type],n.literal=[...n.literal,...t.literal],n.built_in=[...n.built_in,...t.built_in],n._hints=t._hints,r.name="Arduino",r.aliases=["ino"],r.supersetOf="cpp",r}function KZ(e){const t=e.regex,r={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r,a]};a.contains.push(l);const u={match:/\\"/},h={className:"string",begin:/'/,end:/'/},p={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,r]},y=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],b=e.SHEBANG({binary:`(${y.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],T=["true","false"],k={match:/(\/[a-z._-]+)+/},C=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],A=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],P=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],M=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:T,built_in:[...C,...A,"set","shopt",...P,...M]},contains:[b,e.SHEBANG(),x,f,i,s,k,l,u,h,p,r]}}function XZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},y={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",T={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},k=[f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:T,contains:k.concat([{begin:/\(/,end:/\)/,keywords:T,contains:k.concat(["self"]),relevance:0}]),relevance:0},A={begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:T,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:T,relevance:0},{begin:b,returnBegin:!0,contains:[e.inherit(y,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:T,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:T,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:T,disableAutodetect:!0,illegal:"</",contains:[].concat(C,A,k,[f,{begin:e.IDENT_RE+"::",keywords:T},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:h,keywords:T}}}function JZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},y={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],T=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],P={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:T},M={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},L=[M,f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],D={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:P,contains:L.concat([{begin:/\(/,end:/\)/,keywords:P,contains:L.concat(["self"]),relevance:0}]),relevance:0},q={className:"function",begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:P,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:P,relevance:0},{begin:b,returnBegin:!0,contains:[y],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:P,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:P,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:P,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(D,q,M,L,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:P,contains:["self",l]},{begin:e.IDENT_RE+"::",keywords:P},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function ZZ(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:a.concat(i),built_in:t,literal:n},l=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},p={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(p,{illegal:/\n/}),y={className:"subst",begin:/\{/,end:/\}/,keywords:s},b=e.inherit(y,{illegal:/\n/}),x={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,b]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},y]},T=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},b]});y.contains=[v,x,p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,e.C_BLOCK_COMMENT_MODE],b.contains=[T,x,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,u,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const k={variants:[h,v,x,p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},C={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},A=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",P={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},k,u,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+A+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,C],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[k,u,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},P]}}const eee=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),tee=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],ree=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],nee=[...tee,...ree],aee=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),iee=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),see=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),oee=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function lee(e){const t=e.regex,r=eee(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",i=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,n,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+iee.join("|")+")"},{begin:":(:)?("+see.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+oee.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:aee.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+nee.join("|")+")\\b"}]}}function cee(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function uee(e){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function dee(e){const t=e.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(r,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function hee(e){const t=e.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},n=e.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[n,i,a,s,r,"self"],relevance:0},u=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,p=/'[^']*'/,f=t.either(u,h,p),y=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:y,className:"attr",starts:{end:/$/,contains:[n,l,i,a,s,r]}}]}}var Uu="[0-9](_*[0-9])*",Wf=`\\.(${Uu})`,Vf="[0-9a-fA-F](_*[0-9a-fA-F])*",cA={className:"number",variants:[{begin:`(\\b(${Uu})((${Wf})|\\.)?|(${Wf}))[eE][+-]?(${Uu})[fFdD]?\\b`},{begin:`\\b(${Uu})((${Wf})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Wf})[fFdD]?\\b`},{begin:`\\b(${Uu})[fFdD]\\b`},{begin:`\\b0[xX]((${Vf})\\.?|(${Vf})?\\.(${Vf}))[pP][+-]?(${Uu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Vf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function DR(e,t,r){return r===-1?"":e.replace(t,n=>DR(e,t,r-1))}function pee(e){const t=e.regex,r="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",n=r+DR("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),u={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},p={className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:u,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[p,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:u,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,cA,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},cA,h]}}const uA="[A-Za-z$_][0-9A-Za-z$_]*",gee=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],fee=["true","false","null","undefined","NaN","Infinity"],MR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],OR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],jR=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],mee=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],yee=[].concat(jR,MR,OR);function bee(e){const t=e.regex,r=(V,{after:oe})=>{const U="</"+V[0].slice(1);return V.input.indexOf(U,oe)!==-1},n=uA,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,oe)=>{const U=V[0].length+V.index,z=V.input[U];if(z==="<"||z===","){oe.ignoreMatch();return}z===">"&&(r(V,{after:U})||oe.ignoreMatch());let ie;const H=V.input.substring(U);if(ie=H.match(/^\s*=/)){oe.ignoreMatch();return}if((ie=H.match(/^\s+extends\s+/))&&ie.index===0){oe.ignoreMatch();return}}},l={$pattern:uA,keyword:gee,literal:fee,built_in:yee,"variable.language":mee},u="[0-9](_?[0-9])*",h=`\\.(${u})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${u})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},y={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"graphql"}},T={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,y]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,{match:/\$\d+/},f];y.contains=A.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(A)});const P=[].concat(C,y.contains),M=P.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(P)}]),L={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:M},D={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},q={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...MR,...OR]}},Q={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},F={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[L],illegal:/%/},K={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function W(V){return t.concat("(?!",V.join("|"),")")}const j={match:t.concat(/\b/,W([...jR,"super","import"].map(V=>`${V}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},O={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},L]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",G={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[L]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:M,CLASS_REFERENCE:q},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),Q,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,C,{match:/\$\d+/},f,q,{scope:"attr",match:n+t.lookahead(":"),relevance:0},G,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:M}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},F,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[L,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},O,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[L]},j,K,D,$,{match:/\$[(.]/}]}}function xee(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],a={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[t,r,e.QUOTE_STRING_MODE,a,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var $u="[0-9](_*[0-9])*",Yf=`\\.(${$u})`,Qf="[0-9a-fA-F](_*[0-9a-fA-F])*",vee={className:"number",variants:[{begin:`(\\b(${$u})((${Yf})|\\.)?|(${Yf}))[eE][+-]?(${$u})[fFdD]?\\b`},{begin:`\\b(${$u})((${Yf})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Yf})[fFdD]?\\b`},{begin:`\\b(${$u})[fFdD]\\b`},{begin:`\\b0[xX]((${Qf})\\.?|(${Qf})?\\.(${Qf}))[pP][+-]?(${$u})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Qf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function wee(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},a={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,a]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,i,a]}]};a.contains.push(s);const l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},u={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(s,{className:"string"}),"self"]}]},h=vee,p=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},y=f;return y.variants[1].contains=[f],f.variants[1].contains=[y],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,p,r,n,l,u,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,p],relevance:0},e.C_LINE_COMMENT_MODE,p,l,u,s,e.C_NUMBER_MODE]},p]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,u]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const See=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Tee=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],kee=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Eee=[...Tee,...kee],Cee=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),BR=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),FR=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),_ee=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),Aee=BR.concat(FR).sort().reverse();function Nee(e){const t=See(e),r=Aee,n="and or not only",a="[\\w-]+",i="("+a+"|@\\{"+a+"\\})",s=[],l=[],u=function(A){return{className:"string",begin:"~?"+A+".*?"+A}},h=function(A,P,M){return{className:A,begin:P,relevance:M}},p={$pattern:/[a-z-]+/,keyword:n,attribute:Cee.join(" ")},f={begin:"\\(",end:"\\)",contains:l,keywords:p,relevance:0};l.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,u("'"),u('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,h("variable","@@?"+a,10),h("variable","@\\{"+a+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:a+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const y=l.concat({begin:/\{/,end:/\}/,contains:s}),b={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(l)},x={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+_ee.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:l}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:p,returnEnd:!0,contains:l,relevance:0}},T={className:"variable",variants:[{begin:"@"+a+"\\s*:",relevance:15},{begin:"@"+a}],starts:{end:"[;}]",returnEnd:!0,contains:y}},k={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,b,h("keyword","all\\b"),h("variable","@\\{"+a+"\\}"),{begin:"\\b("+Eee.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,h("selector-tag",i,0),h("selector-id","#"+i),h("selector-class","\\."+i,0),h("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+BR.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+FR.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:y},{begin:"!important"},t.FUNCTION_DISPATCH]},C={begin:a+`:(:)?(${r.join("|")})`,returnBegin:!0,contains:[k]};return s.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,T,C,x,k,b,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function Lee(e){const t="\\[=*\\[",r="\\]=*\\]",n={begin:t,end:r,contains:["self"]},a=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,r,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:r,contains:[n],relevance:5}])}}function Pee(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,r]},a={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,r,n,a,i,s]}}function Ree(e){const t=e.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,u={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},p={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(h,{contains:[]}),y=e.inherit(p,{contains:[]});h.contains.push(y),p.contains.push(f);let b=[r,u];return[h,p,f,y].forEach(k=>{k.contains=k.contains.concat(b)}),b=b.concat(h,p),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:b},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:b}]}]},r,i,h,p,{className:"quote",begin:"^>\\s+",contains:b,end:"$"},a,n,u,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Iee(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:r,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},u={$pattern:r,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+u.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:u,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function Dee(e){const t=e.regex,r=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],n=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:r.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},s={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},u={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},p=[e.BACKSLASH_ESCAPE,i,u],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],y=(v,T,k="\\1")=>{const C=k==="\\1"?k:t.concat(k,T);return t.concat(t.concat("(?:",v,")"),T,/(?:\\.|[^\\\/])*?/,C,/(?:\\.|[^\\\/])*?/,k,n)},b=(v,T,k)=>t.concat(t.concat("(?:",v,")"),T,/(?:\\.|[^\\\/])*?/,k,n),x=[u,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:p,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:y("s|tr|y",t.either(...f,{capture:!0}))},{begin:y("s|tr|y","\\(","\\)")},{begin:y("s|tr|y","\\[","\\]")},{begin:y("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:b("(?:m|qr)?",/\//,/\//)},{begin:b("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:b("m|qr",/\(/,/\)/)},{begin:b("m|qr",/\[/,/\]/)},{begin:b("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,l,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=x,s.contains=x,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:x}}function Mee(e){const t=e.regex,r=/(?![A-Za-z0-9])(?![$])/,n=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),a=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),i=t.concat(/[A-Z]+/,r),s={scope:"variable",match:"\\$+"+n},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},u={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=e.inherit(e.APOS_STRING_MODE,{illegal:null}),p=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(u)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(u),"on:begin":(O,$)=>{$.data._beginMatch=O[1]||O[2]},"on:end":(O,$)=>{$.data._beginMatch!==O[1]&&$.ignoreMatch()}},y=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),b=`[ 	
]`,x={scope:"string",variants:[p,h,f,y]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},T=["false","null","true"],k=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],C=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],P={keyword:k,literal:(O=>{const $=[];return O.forEach(I=>{$.push(I),I.toLowerCase()===I?$.push(I.toUpperCase()):$.push(I.toLowerCase())}),$})(T),built_in:C},M=O=>O.map($=>$.replace(/\|\d+$/,"")),L={variants:[{match:[/new/,t.concat(b,"+"),t.concat("(?!",M(C).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},D=t.concat(n,"\\b(?!\\()"),q={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),D],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,t.concat(/::/,t.lookahead(/(?!class\b)/)),D],scope:{1:"title.class",3:"variable.constant"}},{match:[a,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},Q={scope:"attr",match:t.concat(n,t.lookahead(":"),t.lookahead(/(?!::)/))},F={relevance:0,begin:/\(/,end:/\)/,keywords:P,contains:[Q,s,q,e.C_BLOCK_COMMENT_MODE,x,v,L]},K={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",M(k).join("\\b|"),"|",M(C).join("\\b|"),"\\b)"),n,t.concat(b,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[F]};F.contains.push(K);const W=[Q,q,e.C_BLOCK_COMMENT_MODE,x,v,L],j={begin:t.concat(/#\[\s*\\?/,t.either(a,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:T,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:T,keyword:["new","array"]},contains:["self",...W]},...W,{scope:"meta",variants:[{match:a},{match:i}]}]};return{case_insensitive:!1,keywords:P,contains:[j,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},s,K,q,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},L,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:P,contains:["self",j,s,q,e.C_BLOCK_COMMENT_MODE,x,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},x,v]}}function Oee(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function jee(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function Bee(e){const t=e.regex,r=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},u={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},p={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,u],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,u],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,u,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,u,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,p,h]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},y="[0-9](_?[0-9])*",b=`(\\b(${y}))?\\.(${y})|\\b(${y})\\.`,x=`\\b|${n.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${y})|(${b}))[eE][+-]?(${y})[jJ]?(?=${x})`},{begin:`(${b})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${y})[jJ](?=${x})`}]},T={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},k={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",u,v,f,e.HASH_COMMENT_MODE]}]};return h.contains=[f,v,u],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[u,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,T,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[k]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,k,f]}]}}function Fee(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function zee(e){const t=e.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[i,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function Uee(e){const t=e.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=t.concat(n,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},u={begin:"#<",end:">"},h=[e.COMMENT("#","$",{contains:[l]}),e.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],p={className:"subst",begin:/#\{/,end:/\}/,keywords:s},f={className:"string",contains:[e.BACKSLASH_ESCAPE,p],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,p]})]}]},y="[1-9](_?[0-9])*|0",b="[0-9](_?[0-9])*",x={className:"number",relevance:0,variants:[{begin:`\\b(${y})(\\.(${b}))?([eE][+-]?(${b})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},L=[f,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:s},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:r}],relevance:0},x,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,p],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(u,h),relevance:0}].concat(u,h);p.contains=L,v.contains=L;const F=[{begin:/^\s*=>/,starts:{end:"$",contains:L}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:L}}];return h.unshift(u),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(F).concat(h).concat(L)}}function $ee(e){const t=e.regex,r=/(r#)?/,n=t.concat(r,e.UNDERSCORE_IDENT_RE),a=t.concat(r,e.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,t.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],u=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],p=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:p,keyword:l,literal:u,built_in:h},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:p}},{className:"punctuation",begin:"->"},i]}}const qee=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Hee=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Gee=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Wee=[...Hee,...Gee],Vee=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Yee=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Qee=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Kee=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Xee(e){const t=qee(e),r=Qee,n=Yee,a="@[a-z-]+",i="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+Wee.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+n.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+r.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Kee.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,l,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:a,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:Vee.join(" ")},contains:[{begin:a,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function Jee(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Zee(e){const t=e.regex,r=e.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},a={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],u=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],p=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],y=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],b=p,x=[...h,...u].filter(M=>!p.includes(M)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},T={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},k={match:t.concat(/\b/,t.either(...b),/\s*\(/),relevance:0,keywords:{built_in:b}};function C(M){return t.concat(/\b/,t.either(...M.map(L=>L.replace(/\s+/,"\\s+"))),/\b/)}const A={scope:"keyword",match:C(y),relevance:0};function P(M,{exceptions:L,when:D}={}){const q=D;return L=L||[],M.map(Q=>Q.match(/\|\d+$/)||L.includes(Q)?Q:q(Q)?`${Q}|0`:Q)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:P(x,{when:M=>M.length<3}),literal:i,type:l,built_in:f},contains:[{scope:"type",match:C(s)},A,k,v,n,a,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,r,T]}}function zR(e){return e?typeof e=="string"?e:e.source:null}function zh(e){return Zr("(?=",e,")")}function Zr(...e){return e.map(r=>zR(r)).join("")}function ete(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Wa(...e){return"("+(ete(e).capture?"":"?:")+e.map(n=>zR(n)).join("|")+")"}const CS=e=>Zr(/\b/,e,/\w$/.test(e)?/\b/:/\B/),tte=["Protocol","Type"].map(CS),dA=["init","self"].map(CS),rte=["Any","Self"],Tv=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],hA=["false","nil","true"],nte=["assignment","associativity","higherThan","left","lowerThan","none","right"],ate=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],pA=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],UR=Wa(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),$R=Wa(UR,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),kv=Zr(UR,$R,"*"),qR=Wa(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),Jm=Wa(qR,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Bs=Zr(qR,Jm,"*"),Kf=Zr(/[A-Z]/,Jm,"*"),ite=["attached","autoclosure",Zr(/convention\(/,Wa("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Zr(/objc\(/,Bs,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],ste=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function ote(e){const t={match:/\s+/,relevance:0},r=e.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[e.C_LINE_COMMENT_MODE,r],a={match:[/\./,Wa(...tte,...dA)],className:{2:"keyword"}},i={match:Zr(/\./,Wa(...Tv)),relevance:0},s=Tv.filter(je=>typeof je=="string").concat(["_|0"]),l=Tv.filter(je=>typeof je!="string").concat(rte).map(CS),u={variants:[{className:"keyword",match:Wa(...l,...dA)}]},h={$pattern:Wa(/\b\w+/,/#\w+/),keyword:s.concat(ate),literal:hA},p=[a,i,u],f={match:Zr(/\./,Wa(...pA)),relevance:0},y={className:"built_in",match:Zr(/\b/,Wa(...pA),/(?=\()/)},b=[f,y],x={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:kv},{match:`\\.(\\.|${$R})+`}]},T=[x,v],k="([0-9]_*)+",C="([0-9a-fA-F]_*)+",A={className:"number",relevance:0,variants:[{match:`\\b(${k})(\\.(${k}))?([eE][+-]?(${k}))?\\b`},{match:`\\b0x(${C})(\\.(${C}))?([pP][+-]?(${k}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},P=(je="")=>({className:"subst",variants:[{match:Zr(/\\/,je,/[0\\tnr"']/)},{match:Zr(/\\/,je,/u\{[0-9a-fA-F]{1,8}\}/)}]}),M=(je="")=>({className:"subst",match:Zr(/\\/,je,/[\t ]*(?:[\r\n]|\r\n)/)}),L=(je="")=>({className:"subst",label:"interpol",begin:Zr(/\\/,je,/\(/),end:/\)/}),D=(je="")=>({begin:Zr(je,/"""/),end:Zr(/"""/,je),contains:[P(je),M(je),L(je)]}),q=(je="")=>({begin:Zr(je,/"/),end:Zr(/"/,je),contains:[P(je),L(je)]}),Q={className:"string",variants:[D(),D("#"),D("##"),D("###"),q(),q("#"),q("##"),q("###")]},F=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],K={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:F},W=je=>{const _t=Zr(je,/\//),Pt=Zr(/\//,je);return{begin:_t,end:Pt,contains:[...F,{scope:"comment",begin:`#(?!.*${Pt})`,end:/$/}]}},j={scope:"regexp",variants:[W("###"),W("##"),W("#"),K]},O={match:Zr(/`/,Bs,/`/)},$={className:"variable",match:/\$\d+/},I={className:"variable",match:`\\$${Jm}+`},G=[O,$,I],V={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:ste,contains:[...T,A,Q]}]}},oe={scope:"keyword",match:Zr(/@/,Wa(...ite),zh(Wa(/\(/,/\s+/)))},U={scope:"meta",match:Zr(/@/,Bs)},z=[V,oe,U],ie={match:zh(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Zr(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,Jm,"+")},{className:"type",match:Kf,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Zr(/\s+&\s+/,zh(Kf)),relevance:0}]},H={begin:/</,end:/>/,keywords:h,contains:[...n,...p,...z,x,ie]};ie.contains.push(H);const ue={match:Zr(Bs,/\s*:/),keywords:"_|0",relevance:0},Z={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",ue,...n,j,...p,...b,...T,A,Q,...G,...z,ie]},ae={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,ie]},pe={begin:Wa(zh(Zr(Bs,/\s*:/)),zh(Zr(Bs,/\s+/,Bs,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Bs}]},ye={begin:/\(/,end:/\)/,keywords:h,contains:[pe,...n,...p,...T,A,Q,...z,ie,Z],endsParent:!0,illegal:/["']/},_e={match:[/(func|macro)/,/\s+/,Wa(O.match,Bs,kv)],className:{1:"keyword",3:"title.function"},contains:[ae,ye,t],illegal:[/\[/,/%/]},de={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[ae,ye,t],illegal:/\[|%/},Ae={match:[/operator/,/\s+/,kv],className:{1:"keyword",3:"title"}},Te={begin:[/precedencegroup/,/\s+/,Kf],className:{1:"keyword",3:"title"},contains:[ie],keywords:[...nte,...hA],end:/}/},$e={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ot={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Tt={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Bs,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[ae,...p,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:Kf},...p],relevance:0}]};for(const je of Q.variants){const _t=je.contains.find(Bt=>Bt.label==="interpol");_t.keywords=h;const Pt=[...p,...b,...T,A,Q,...G];_t.contains=[...Pt,{begin:/\(/,end:/\)/,contains:["self",...Pt]}]}return{name:"Swift",keywords:h,contains:[...n,_e,de,$e,ot,Tt,Ae,Te,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},j,...p,...b,...T,A,Q,...G,...z,ie,Z]}}const Zm="[A-Za-z$_][0-9A-Za-z$_]*",HR=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],GR=["true","false","null","undefined","NaN","Infinity"],WR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],VR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],YR=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],QR=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],KR=[].concat(YR,WR,VR);function lte(e){const t=e.regex,r=(V,{after:oe})=>{const U="</"+V[0].slice(1);return V.input.indexOf(U,oe)!==-1},n=Zm,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,oe)=>{const U=V[0].length+V.index,z=V.input[U];if(z==="<"||z===","){oe.ignoreMatch();return}z===">"&&(r(V,{after:U})||oe.ignoreMatch());let ie;const H=V.input.substring(U);if(ie=H.match(/^\s*=/)){oe.ignoreMatch();return}if((ie=H.match(/^\s+extends\s+/))&&ie.index===0){oe.ignoreMatch();return}}},l={$pattern:Zm,keyword:HR,literal:GR,built_in:KR,"variable.language":QR},u="[0-9](_?[0-9])*",h=`\\.(${u})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${u})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},y={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,y],subLanguage:"graphql"}},T={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,y]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,{match:/\$\d+/},f];y.contains=A.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(A)});const P=[].concat(C,y.contains),M=P.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(P)}]),L={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:M},D={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},q={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...WR,...VR]}},Q={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},F={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[L],illegal:/%/},K={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function W(V){return t.concat("(?!",V.join("|"),")")}const j={match:t.concat(/\b/,W([...YR,"super","import"].map(V=>`${V}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},O={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},L]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",G={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[L]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:M,CLASS_REFERENCE:q},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),Q,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,C,{match:/\$\d+/},f,q,{scope:"attr",match:n+t.lookahead(":"),relevance:0},G,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:M}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},F,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[L,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},O,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[L]},j,K,D,$,{match:/\$[(.]/}]}}function cte(e){const t=e.regex,r=lte(e),n=Zm,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[r.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},u=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:Zm,keyword:HR.concat(u),literal:GR,built_in:KR.concat(a),"variable.language":QR},p={className:"meta",begin:"@"+n},f=(v,T,k)=>{const C=v.contains.findIndex(A=>A.label===T);if(C===-1)throw new Error("can not find mode to replace");v.contains.splice(C,1,k)};Object.assign(r.keywords,h),r.exports.PARAMS_CONTAINS.push(p);const y=r.contains.find(v=>v.scope==="attr"),b=Object.assign({},y,{match:t.concat(n,t.lookahead(/\s*\?:/))});r.exports.PARAMS_CONTAINS.push([r.exports.CLASS_REFERENCE,y,b]),r.contains=r.contains.concat([p,i,s,b]),f(r,"shebang",e.SHEBANG()),f(r,"use_strict",l);const x=r.contains.find(v=>v.label==="func.def");return x.relevance=0,Object.assign(r,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),r}function ute(e){const t=e.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,u={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,a),/ *#/)},{begin:t.concat(/# */,l,/ *#/)},{begin:t.concat(/# */,s,/ *#/)},{begin:t.concat(/# */,t.either(i,a),/ +/,t.either(s,l),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},p={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),y=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,n,u,h,p,f,y,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[y]}]}}function dte(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const r=e.COMMENT(/;;/,/$/),n=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},u={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:n},contains:[r,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,s,a,e.QUOTE_STRING_MODE,u,h,l]}}function hte(e){const t=e.regex,r=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=e.inherit(i,{begin:/\(/,end:/\)/}),l=e.inherit(e.APOS_STRING_MODE,{className:"string"}),u=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,u,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,u,l]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[u]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(r,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function pte(e){const t="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,a]},l=e.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),y={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},b={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},x={begin:/\{/,end:/\}/,contains:[b],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[b],illegal:"\\n",relevance:0},T=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},y,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},x,v,i,s],k=[...T];return k.pop(),k.push(l),b.contains=k,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:T}}const gte={arduino:QZ,bash:KZ,c:XZ,cpp:JZ,csharp:ZZ,css:lee,diff:cee,go:uee,graphql:dee,ini:hee,java:pee,javascript:bee,json:xee,kotlin:wee,less:Nee,lua:Lee,makefile:Pee,markdown:Ree,objectivec:Iee,perl:Dee,php:Mee,"php-template":Oee,plaintext:jee,python:Bee,"python-repl":Fee,r:zee,ruby:Uee,rust:$ee,scss:Xee,shell:Jee,sql:Zee,swift:ote,typescript:cte,vbnet:ute,wasm:dte,xml:hte,yaml:pte};var Ev,gA;function fte(){if(gA)return Ev;gA=1;function e(le){return le instanceof Map?le.clear=le.delete=le.set=function(){throw new Error("map is read-only")}:le instanceof Set&&(le.add=le.clear=le.delete=function(){throw new Error("set is read-only")}),Object.freeze(le),Object.getOwnPropertyNames(le).forEach(De=>{const Qe=le[De],It=typeof Qe;(It==="object"||It==="function")&&!Object.isFrozen(Qe)&&e(Qe)}),le}class t{constructor(De){De.data===void 0&&(De.data={}),this.data=De.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(le){return le.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(le,...De){const Qe=Object.create(null);for(const It in le)Qe[It]=le[It];return De.forEach(function(It){for(const Or in It)Qe[Or]=It[Or]}),Qe}const a="</span>",i=le=>!!le.scope,s=(le,{prefix:De})=>{if(le.startsWith("language:"))return le.replace("language:","language-");if(le.includes(".")){const Qe=le.split(".");return[`${De}${Qe.shift()}`,...Qe.map((It,Or)=>`${It}${"_".repeat(Or+1)}`)].join(" ")}return`${De}${le}`};class l{constructor(De,Qe){this.buffer="",this.classPrefix=Qe.classPrefix,De.walk(this)}addText(De){this.buffer+=r(De)}openNode(De){if(!i(De))return;const Qe=s(De.scope,{prefix:this.classPrefix});this.span(Qe)}closeNode(De){i(De)&&(this.buffer+=a)}value(){return this.buffer}span(De){this.buffer+=`<span class="${De}">`}}const u=(le={})=>{const De={children:[]};return Object.assign(De,le),De};class h{constructor(){this.rootNode=u(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(De){this.top.children.push(De)}openNode(De){const Qe=u({scope:De});this.add(Qe),this.stack.push(Qe)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(De){return this.constructor._walk(De,this.rootNode)}static _walk(De,Qe){return typeof Qe=="string"?De.addText(Qe):Qe.children&&(De.openNode(Qe),Qe.children.forEach(It=>this._walk(De,It)),De.closeNode(Qe)),De}static _collapse(De){typeof De!="string"&&De.children&&(De.children.every(Qe=>typeof Qe=="string")?De.children=[De.children.join("")]:De.children.forEach(Qe=>{h._collapse(Qe)}))}}class p extends h{constructor(De){super(),this.options=De}addText(De){De!==""&&this.add(De)}startScope(De){this.openNode(De)}endScope(){this.closeNode()}__addSublanguage(De,Qe){const It=De.root;Qe&&(It.scope=`language:${Qe}`),this.add(It)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(le){return le?typeof le=="string"?le:le.source:null}function y(le){return v("(?=",le,")")}function b(le){return v("(?:",le,")*")}function x(le){return v("(?:",le,")?")}function v(...le){return le.map(Qe=>f(Qe)).join("")}function T(le){const De=le[le.length-1];return typeof De=="object"&&De.constructor===Object?(le.splice(le.length-1,1),De):{}}function k(...le){return"("+(T(le).capture?"":"?:")+le.map(It=>f(It)).join("|")+")"}function C(le){return new RegExp(le.toString()+"|").exec("").length-1}function A(le,De){const Qe=le&&le.exec(De);return Qe&&Qe.index===0}const P=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function M(le,{joinWith:De}){let Qe=0;return le.map(It=>{Qe+=1;const Or=Qe;let Ar=f(It),dt="";for(;Ar.length>0;){const ut=P.exec(Ar);if(!ut){dt+=Ar;break}dt+=Ar.substring(0,ut.index),Ar=Ar.substring(ut.index+ut[0].length),ut[0][0]==="\\"&&ut[1]?dt+="\\"+String(Number(ut[1])+Or):(dt+=ut[0],ut[0]==="("&&Qe++)}return dt}).map(It=>`(${It})`).join(De)}const L=/\b\B/,D="[a-zA-Z]\\w*",q="[a-zA-Z_]\\w*",Q="\\b\\d+(\\.\\d+)?",F="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",K="\\b(0b[01]+)",W="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",j=(le={})=>{const De=/^#![ ]*\//;return le.binary&&(le.begin=v(De,/.*\b/,le.binary,/\b.*/)),n({scope:"meta",begin:De,end:/$/,relevance:0,"on:begin":(Qe,It)=>{Qe.index!==0&&It.ignoreMatch()}},le)},O={begin:"\\\\[\\s\\S]",relevance:0},$={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[O]},I={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[O]},G={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},V=function(le,De,Qe={}){const It=n({scope:"comment",begin:le,end:De,contains:[]},Qe);It.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Or=k("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return It.contains.push({begin:v(/[ ]+/,"(",Or,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),It},oe=V("//","$"),U=V("/\\*","\\*/"),z=V("#","$"),ie={scope:"number",begin:Q,relevance:0},H={scope:"number",begin:F,relevance:0},ue={scope:"number",begin:K,relevance:0},Z={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[O,{begin:/\[/,end:/\]/,relevance:0,contains:[O]}]},ae={scope:"title",begin:D,relevance:0},pe={scope:"title",begin:q,relevance:0},ye={begin:"\\.\\s*"+q,relevance:0};var de=Object.freeze({__proto__:null,APOS_STRING_MODE:$,BACKSLASH_ESCAPE:O,BINARY_NUMBER_MODE:ue,BINARY_NUMBER_RE:K,COMMENT:V,C_BLOCK_COMMENT_MODE:U,C_LINE_COMMENT_MODE:oe,C_NUMBER_MODE:H,C_NUMBER_RE:F,END_SAME_AS_BEGIN:function(le){return Object.assign(le,{"on:begin":(De,Qe)=>{Qe.data._beginMatch=De[1]},"on:end":(De,Qe)=>{Qe.data._beginMatch!==De[1]&&Qe.ignoreMatch()}})},HASH_COMMENT_MODE:z,IDENT_RE:D,MATCH_NOTHING_RE:L,METHOD_GUARD:ye,NUMBER_MODE:ie,NUMBER_RE:Q,PHRASAL_WORDS_MODE:G,QUOTE_STRING_MODE:I,REGEXP_MODE:Z,RE_STARTERS_RE:W,SHEBANG:j,TITLE_MODE:ae,UNDERSCORE_IDENT_RE:q,UNDERSCORE_TITLE_MODE:pe});function Ae(le,De){le.input[le.index-1]==="."&&De.ignoreMatch()}function Te(le,De){le.className!==void 0&&(le.scope=le.className,delete le.className)}function $e(le,De){De&&le.beginKeywords&&(le.begin="\\b("+le.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",le.__beforeBegin=Ae,le.keywords=le.keywords||le.beginKeywords,delete le.beginKeywords,le.relevance===void 0&&(le.relevance=0))}function ot(le,De){Array.isArray(le.illegal)&&(le.illegal=k(...le.illegal))}function Tt(le,De){if(le.match){if(le.begin||le.end)throw new Error("begin & end are not supported with match");le.begin=le.match,delete le.match}}function je(le,De){le.relevance===void 0&&(le.relevance=1)}const _t=(le,De)=>{if(!le.beforeMatch)return;if(le.starts)throw new Error("beforeMatch cannot be used with starts");const Qe=Object.assign({},le);Object.keys(le).forEach(It=>{delete le[It]}),le.keywords=Qe.keywords,le.begin=v(Qe.beforeMatch,y(Qe.begin)),le.starts={relevance:0,contains:[Object.assign(Qe,{endsParent:!0})]},le.relevance=0,delete Qe.beforeMatch},Pt=["of","and","for","in","not","or","if","then","parent","list","value"],Bt="keyword";function kt(le,De,Qe=Bt){const It=Object.create(null);return typeof le=="string"?Or(Qe,le.split(" ")):Array.isArray(le)?Or(Qe,le):Object.keys(le).forEach(function(Ar){Object.assign(It,kt(le[Ar],De,Ar))}),It;function Or(Ar,dt){De&&(dt=dt.map(ut=>ut.toLowerCase())),dt.forEach(function(ut){const Lt=ut.split("|");It[Lt[0]]=[Ar,At(Lt[0],Lt[1])]})}}function At(le,De){return De?Number(De):ir(le)?0:1}function ir(le){return Pt.includes(le.toLowerCase())}const lr={},ft=le=>{console.error(le)},ur=(le,...De)=>{console.log(`WARN: ${le}`,...De)},re=(le,De)=>{lr[`${le}/${De}`]||(console.log(`Deprecated as of ${le}. ${De}`),lr[`${le}/${De}`]=!0)},we=new Error;function Ze(le,De,{key:Qe}){let It=0;const Or=le[Qe],Ar={},dt={};for(let ut=1;ut<=De.length;ut++)dt[ut+It]=Or[ut],Ar[ut+It]=!0,It+=C(De[ut-1]);le[Qe]=dt,le[Qe]._emit=Ar,le[Qe]._multi=!0}function et(le){if(Array.isArray(le.begin)){if(le.skip||le.excludeBegin||le.returnBegin)throw ft("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),we;if(typeof le.beginScope!="object"||le.beginScope===null)throw ft("beginScope must be object"),we;Ze(le,le.begin,{key:"beginScope"}),le.begin=M(le.begin,{joinWith:""})}}function pt(le){if(Array.isArray(le.end)){if(le.skip||le.excludeEnd||le.returnEnd)throw ft("skip, excludeEnd, returnEnd not compatible with endScope: {}"),we;if(typeof le.endScope!="object"||le.endScope===null)throw ft("endScope must be object"),we;Ze(le,le.end,{key:"endScope"}),le.end=M(le.end,{joinWith:""})}}function Ft(le){le.scope&&typeof le.scope=="object"&&le.scope!==null&&(le.beginScope=le.scope,delete le.scope)}function Rr(le){Ft(le),typeof le.beginScope=="string"&&(le.beginScope={_wrap:le.beginScope}),typeof le.endScope=="string"&&(le.endScope={_wrap:le.endScope}),et(le),pt(le)}function hr(le){function De(dt,ut){return new RegExp(f(dt),"m"+(le.case_insensitive?"i":"")+(le.unicodeRegex?"u":"")+(ut?"g":""))}class Qe{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ut,Lt){Lt.position=this.position++,this.matchIndexes[this.matchAt]=Lt,this.regexes.push([Lt,ut]),this.matchAt+=C(ut)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ut=this.regexes.map(Lt=>Lt[1]);this.matcherRe=De(M(ut,{joinWith:"|"}),!0),this.lastIndex=0}exec(ut){this.matcherRe.lastIndex=this.lastIndex;const Lt=this.matcherRe.exec(ut);if(!Lt)return null;const ln=Lt.findIndex((jn,fi)=>fi>0&&jn!==void 0),rr=this.matchIndexes[ln];return Lt.splice(0,ln),Object.assign(Lt,rr)}}class It{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ut){if(this.multiRegexes[ut])return this.multiRegexes[ut];const Lt=new Qe;return this.rules.slice(ut).forEach(([ln,rr])=>Lt.addRule(ln,rr)),Lt.compile(),this.multiRegexes[ut]=Lt,Lt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ut,Lt){this.rules.push([ut,Lt]),Lt.type==="begin"&&this.count++}exec(ut){const Lt=this.getMatcher(this.regexIndex);Lt.lastIndex=this.lastIndex;let ln=Lt.exec(ut);if(this.resumingScanAtSamePosition()&&!(ln&&ln.index===this.lastIndex)){const rr=this.getMatcher(0);rr.lastIndex=this.lastIndex+1,ln=rr.exec(ut)}return ln&&(this.regexIndex+=ln.position+1,this.regexIndex===this.count&&this.considerAll()),ln}}function Or(dt){const ut=new It;return dt.contains.forEach(Lt=>ut.addRule(Lt.begin,{rule:Lt,type:"begin"})),dt.terminatorEnd&&ut.addRule(dt.terminatorEnd,{type:"end"}),dt.illegal&&ut.addRule(dt.illegal,{type:"illegal"}),ut}function Ar(dt,ut){const Lt=dt;if(dt.isCompiled)return Lt;[Te,Tt,Rr,_t].forEach(rr=>rr(dt,ut)),le.compilerExtensions.forEach(rr=>rr(dt,ut)),dt.__beforeBegin=null,[$e,ot,je].forEach(rr=>rr(dt,ut)),dt.isCompiled=!0;let ln=null;return typeof dt.keywords=="object"&&dt.keywords.$pattern&&(dt.keywords=Object.assign({},dt.keywords),ln=dt.keywords.$pattern,delete dt.keywords.$pattern),ln=ln||/\w+/,dt.keywords&&(dt.keywords=kt(dt.keywords,le.case_insensitive)),Lt.keywordPatternRe=De(ln,!0),ut&&(dt.begin||(dt.begin=/\B|\b/),Lt.beginRe=De(Lt.begin),!dt.end&&!dt.endsWithParent&&(dt.end=/\B|\b/),dt.end&&(Lt.endRe=De(Lt.end)),Lt.terminatorEnd=f(Lt.end)||"",dt.endsWithParent&&ut.terminatorEnd&&(Lt.terminatorEnd+=(dt.end?"|":"")+ut.terminatorEnd)),dt.illegal&&(Lt.illegalRe=De(dt.illegal)),dt.contains||(dt.contains=[]),dt.contains=[].concat(...dt.contains.map(function(rr){return Xt(rr==="self"?dt:rr)})),dt.contains.forEach(function(rr){Ar(rr,Lt)}),dt.starts&&Ar(dt.starts,ut),Lt.matcher=Or(Lt),Lt}if(le.compilerExtensions||(le.compilerExtensions=[]),le.contains&&le.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return le.classNameAliases=n(le.classNameAliases||{}),Ar(le)}function cr(le){return le?le.endsWithParent||cr(le.starts):!1}function Xt(le){return le.variants&&!le.cachedVariants&&(le.cachedVariants=le.variants.map(function(De){return n(le,{variants:null},De)})),le.cachedVariants?le.cachedVariants:cr(le)?n(le,{starts:le.starts?n(le.starts):null}):Object.isFrozen(le)?n(le):le}var tr="11.11.1";class sa extends Error{constructor(De,Qe){super(De),this.name="HTMLInjectionError",this.html=Qe}}const fn=r,$o=n,za=Symbol("nomatch"),Ua=7,ha=function(le){const De=Object.create(null),Qe=Object.create(null),It=[];let Or=!0;const Ar="Could not find the language '{}', did you forget to load/include a language module?",dt={disableAutodetect:!0,name:"Plain text",contains:[]};let ut={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function Lt(Ke){return ut.noHighlightRe.test(Ke)}function ln(Ke){let st=Ke.className+" ";st+=Ke.parentNode?Ke.parentNode.className:"";const Zt=ut.languageDetectRe.exec(st);if(Zt){const Er=Ue(Zt[1]);return Er||(ur(Ar.replace("{}",Zt[1])),ur("Falling back to no-highlight mode for this block.",Ke)),Er?Zt[1]:"no-highlight"}return st.split(/\s+/).find(Er=>Lt(Er)||Ue(Er))}function rr(Ke,st,Zt){let Er="",wn="";typeof st=="object"?(Er=Ke,Zt=st.ignoreIllegals,wn=st.language):(re("10.7.0","highlight(lang, code, ...args) has been deprecated."),re("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),wn=Ke,Er=st),Zt===void 0&&(Zt=!0);const la={code:Er,language:wn};Rn("before:highlight",la);const Qn=la.result?la.result:jn(la.language,la.code,Zt);return Qn.code=la.code,Rn("after:highlight",Qn),Qn}function jn(Ke,st,Zt,Er){const wn=Object.create(null);function la(it,mt){return it.keywords[mt]}function Qn(){if(!Mt.keywords){un.addText(Cr);return}let it=0;Mt.keywordPatternRe.lastIndex=0;let mt=Mt.keywordPatternRe.exec(Cr),Qt="";for(;mt;){Qt+=Cr.substring(it,mt.index);const pr=Bn.case_insensitive?mt[0].toLowerCase():mt[0],an=la(Mt,pr);if(an){const[ga,ao]=an;if(un.addText(Qt),Qt="",wn[pr]=(wn[pr]||0)+1,wn[pr]<=Ua&&(Ns+=ao),ga.startsWith("_"))Qt+=mt[0];else{const Fl=Bn.classNameAliases[ga]||ga;_a(mt[0],Fl)}}else Qt+=mt[0];it=Mt.keywordPatternRe.lastIndex,mt=Mt.keywordPatternRe.exec(Cr)}Qt+=Cr.substring(it),un.addText(Qt)}function Cn(){if(Cr==="")return;let it=null;if(typeof Mt.subLanguage=="string"){if(!De[Mt.subLanguage]){un.addText(Cr);return}it=jn(Mt.subLanguage,Cr,!0,Hc[Mt.subLanguage]),Hc[Mt.subLanguage]=it._top}else it=ei(Cr,Mt.subLanguage.length?Mt.subLanguage:null);Mt.relevance>0&&(Ns+=it.relevance),un.__addSublanguage(it._emitter,it.language)}function $r(){Mt.subLanguage!=null?Cn():Qn(),Cr=""}function _a(it,mt){it!==""&&(un.startScope(mt),un.addText(it),un.endScope())}function jl(it,mt){let Qt=1;const pr=mt.length-1;for(;Qt<=pr;){if(!it._emit[Qt]){Qt++;continue}const an=Bn.classNameAliases[it[Qt]]||it[Qt],ga=mt[Qt];an?_a(ga,an):(Cr=ga,Qn(),Cr=""),Qt++}}function bi(it,mt){return it.scope&&typeof it.scope=="string"&&un.openNode(Bn.classNameAliases[it.scope]||it.scope),it.beginScope&&(it.beginScope._wrap?(_a(Cr,Bn.classNameAliases[it.beginScope._wrap]||it.beginScope._wrap),Cr=""):it.beginScope._multi&&(jl(it.beginScope,mt),Cr="")),Mt=Object.create(it,{parent:{value:Mt}}),Mt}function _s(it,mt,Qt){let pr=A(it.endRe,Qt);if(pr){if(it["on:end"]){const an=new t(it);it["on:end"](mt,an),an.isMatchIgnored&&(pr=!1)}if(pr){for(;it.endsParent&&it.parent;)it=it.parent;return it}}if(it.endsWithParent)return _s(it.parent,mt,Qt)}function qo(it){return Mt.matcher.regexIndex===0?(Cr+=it[0],1):(Ls=!0,0)}function Bl(it){const mt=it[0],Qt=it.rule,pr=new t(Qt),an=[Qt.__beforeBegin,Qt["on:begin"]];for(const ga of an)if(ga&&(ga(it,pr),pr.isMatchIgnored))return qo(mt);return Qt.skip?Cr+=mt:(Qt.excludeBegin&&(Cr+=mt),$r(),!Qt.returnBegin&&!Qt.excludeBegin&&(Cr=mt)),bi(Qt,it),Qt.returnBegin?0:mt.length}function pa(it){const mt=it[0],Qt=st.substring(it.index),pr=_s(Mt,it,Qt);if(!pr)return za;const an=Mt;Mt.endScope&&Mt.endScope._wrap?($r(),_a(mt,Mt.endScope._wrap)):Mt.endScope&&Mt.endScope._multi?($r(),jl(Mt.endScope,it)):an.skip?Cr+=mt:(an.returnEnd||an.excludeEnd||(Cr+=mt),$r(),an.excludeEnd&&(Cr=mt));do Mt.scope&&un.closeNode(),!Mt.skip&&!Mt.subLanguage&&(Ns+=Mt.relevance),Mt=Mt.parent;while(Mt!==pr.parent);return pr.starts&&bi(pr.starts,it),an.returnEnd?0:mt.length}function ro(){const it=[];for(let mt=Mt;mt!==Bn;mt=mt.parent)mt.scope&&it.unshift(mt.scope);it.forEach(mt=>un.openNode(mt))}let _n={};function ss(it,mt){const Qt=mt&&mt[0];if(Cr+=it,Qt==null)return $r(),0;if(_n.type==="begin"&&mt.type==="end"&&_n.index===mt.index&&Qt===""){if(Cr+=st.slice(mt.index,mt.index+1),!Or){const pr=new Error(`0 width match regex (${Ke})`);throw pr.languageName=Ke,pr.badRule=_n.rule,pr}return 1}if(_n=mt,mt.type==="begin")return Bl(mt);if(mt.type==="illegal"&&!Zt){const pr=new Error('Illegal lexeme "'+Qt+'" for mode "'+(Mt.scope||"<unnamed>")+'"');throw pr.mode=Mt,pr}else if(mt.type==="end"){const pr=pa(mt);if(pr!==za)return pr}if(mt.type==="illegal"&&Qt==="")return Cr+=`
`,1;if(Ho>1e5&&Ho>mt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Cr+=Qt,Qt.length}const Bn=Ue(Ke);if(!Bn)throw ft(Ar.replace("{}",Ke)),new Error('Unknown language: "'+Ke+'"');const As=hr(Bn);let no="",Mt=Er||As;const Hc={},un=new ut.__emitter(ut);ro();let Cr="",Ns=0,Mi=0,Ho=0,Ls=!1;try{if(Bn.__emitTokens)Bn.__emitTokens(st,un);else{for(Mt.matcher.considerAll();;){Ho++,Ls?Ls=!1:Mt.matcher.considerAll(),Mt.matcher.lastIndex=Mi;const it=Mt.matcher.exec(st);if(!it)break;const mt=st.substring(Mi,it.index),Qt=ss(mt,it);Mi=it.index+Qt}ss(st.substring(Mi))}return un.finalize(),no=un.toHTML(),{language:Ke,value:no,relevance:Ns,illegal:!1,_emitter:un,_top:Mt}}catch(it){if(it.message&&it.message.includes("Illegal"))return{language:Ke,value:fn(st),illegal:!0,relevance:0,_illegalBy:{message:it.message,index:Mi,context:st.slice(Mi-100,Mi+100),mode:it.mode,resultSoFar:no},_emitter:un};if(Or)return{language:Ke,value:fn(st),illegal:!1,relevance:0,errorRaised:it,_emitter:un,_top:Mt};throw it}}function fi(Ke){const st={value:fn(Ke),illegal:!1,relevance:0,_top:dt,_emitter:new ut.__emitter(ut)};return st._emitter.addText(Ke),st}function ei(Ke,st){st=st||ut.languages||Object.keys(De);const Zt=fi(Ke),Er=st.filter(Ue).filter(wr).map($r=>jn($r,Ke,!1));Er.unshift(Zt);const wn=Er.sort(($r,_a)=>{if($r.relevance!==_a.relevance)return _a.relevance-$r.relevance;if($r.language&&_a.language){if(Ue($r.language).supersetOf===_a.language)return 1;if(Ue(_a.language).supersetOf===$r.language)return-1}return 0}),[la,Qn]=wn,Cn=la;return Cn.secondBest=Qn,Cn}function Yn(Ke,st,Zt){const Er=st&&Qe[st]||Zt;Ke.classList.add("hljs"),Ke.classList.add(`language-${Er}`)}function en(Ke){let st=null;const Zt=ln(Ke);if(Lt(Zt))return;if(Rn("before:highlightElement",{el:Ke,language:Zt}),Ke.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ke);return}if(Ke.children.length>0&&(ut.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ke)),ut.throwUnescapedHTML))throw new sa("One of your code blocks includes unescaped HTML.",Ke.innerHTML);st=Ke;const Er=st.textContent,wn=Zt?rr(Er,{language:Zt,ignoreIllegals:!0}):ei(Er);Ke.innerHTML=wn.value,Ke.dataset.highlighted="yes",Yn(Ke,Zt,wn.language),Ke.result={language:wn.language,re:wn.relevance,relevance:wn.relevance},wn.secondBest&&(Ke.secondBest={language:wn.secondBest.language,relevance:wn.secondBest.relevance}),Rn("after:highlightElement",{el:Ke,result:wn,text:Er})}function Fr(Ke){ut=$o(ut,Ke)}const $a=()=>{mi(),re("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function is(){mi(),re("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let zt=!1;function mi(){function Ke(){mi()}if(document.readyState==="loading"){zt||window.addEventListener("DOMContentLoaded",Ke,!1),zt=!0;return}document.querySelectorAll(ut.cssSelector).forEach(en)}function yi(Ke,st){let Zt=null;try{Zt=st(le)}catch(Er){if(ft("Language definition for '{}' could not be registered.".replace("{}",Ke)),Or)ft(Er);else throw Er;Zt=dt}Zt.name||(Zt.name=Ke),De[Ke]=Zt,Zt.rawDefinition=st.bind(null,le),Zt.aliases&&ct(Zt.aliases,{languageName:Ke})}function gt(Ke){delete De[Ke];for(const st of Object.keys(Qe))Qe[st]===Ke&&delete Qe[st]}function he(){return Object.keys(De)}function Ue(Ke){return Ke=(Ke||"").toLowerCase(),De[Ke]||De[Qe[Ke]]}function ct(Ke,{languageName:st}){typeof Ke=="string"&&(Ke=[Ke]),Ke.forEach(Zt=>{Qe[Zt.toLowerCase()]=st})}function wr(Ke){const st=Ue(Ke);return st&&!st.disableAutodetect}function jr(Ke){Ke["before:highlightBlock"]&&!Ke["before:highlightElement"]&&(Ke["before:highlightElement"]=st=>{Ke["before:highlightBlock"](Object.assign({block:st.el},st))}),Ke["after:highlightBlock"]&&!Ke["after:highlightElement"]&&(Ke["after:highlightElement"]=st=>{Ke["after:highlightBlock"](Object.assign({block:st.el},st))})}function Jt(Ke){jr(Ke),It.push(Ke)}function cn(Ke){const st=It.indexOf(Ke);st!==-1&&It.splice(st,1)}function Rn(Ke,st){const Zt=Ke;It.forEach(function(Er){Er[Zt]&&Er[Zt](st)})}function oa(Ke){return re("10.7.0","highlightBlock will be removed entirely in v12.0"),re("10.7.0","Please use highlightElement now."),en(Ke)}Object.assign(le,{highlight:rr,highlightAuto:ei,highlightAll:mi,highlightElement:en,highlightBlock:oa,configure:Fr,initHighlighting:$a,initHighlightingOnLoad:is,registerLanguage:yi,unregisterLanguage:gt,listLanguages:he,getLanguage:Ue,registerAliases:ct,autoDetection:wr,inherit:$o,addPlugin:Jt,removePlugin:cn}),le.debugMode=function(){Or=!1},le.safeMode=function(){Or=!0},le.versionString=tr,le.regex={concat:v,lookahead:y,either:k,optional:x,anyNumberOfTimes:b};for(const Ke in de)typeof de[Ke]=="object"&&e(de[Ke]);return Object.assign(le,de),le},nn=ha({});return nn.newInstance=()=>ha({}),Ev=nn,nn.HighlightJS=nn,nn.default=nn,Ev}var mte=fte();const yte=Ic(mte),fA={},bte="hljs-";function xte(e){const t=yte.newInstance();return e&&i(e),{highlight:r,highlightAuto:n,listLanguages:a,register:i,registerAlias:s,registered:l};function r(u,h,p){const f=p||fA,y=typeof f.prefix=="string"?f.prefix:bte;if(!t.getLanguage(u))throw new Error("Unknown language: `"+u+"` is not registered");t.configure({__emitter:vte,classPrefix:y});const b=t.highlight(h,{ignoreIllegals:!0,language:u});if(b.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:b.errorRaised});const x=b._emitter.root,v=x.data;return v.language=b.language,v.relevance=b.relevance,x}function n(u,h){const f=(h||fA).subset||a();let y=-1,b=0,x;for(;++y<f.length;){const v=f[y];if(!t.getLanguage(v))continue;const T=r(v,u,h);T.data&&T.data.relevance!==void 0&&T.data.relevance>b&&(b=T.data.relevance,x=T)}return x||{type:"root",children:[],data:{language:void 0,relevance:b}}}function a(){return t.listLanguages()}function i(u,h){if(typeof u=="string")t.registerLanguage(u,h);else{let p;for(p in u)Object.hasOwn(u,p)&&t.registerLanguage(p,u[p])}}function s(u,h){if(typeof u=="string")t.registerAliases(typeof h=="string"?h:[...h],{languageName:u});else{let p;for(p in u)if(Object.hasOwn(u,p)){const f=u[p];t.registerAliases(typeof f=="string"?f:[...f],{languageName:p})}}}function l(u){return!!t.getLanguage(u)}}class vte{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const r=this.stack[this.stack.length-1],n=r.children[r.children.length-1];n&&n.type==="text"?n.value+=t:r.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,r){const n=this.stack[this.stack.length-1],a=t.root.children;r?n.children.push({type:"element",tagName:"span",properties:{className:[r]},children:a}):n.children.push(...a)}openNode(t){const r=this,n=t.split(".").map(function(s,l){return l?s+"_".repeat(l):r.options.classPrefix+s}),a=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:n},children:[]};a.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const wte={};function Ste(e){const t=e||wte,r=t.aliases,n=t.detect||!1,a=t.languages||gte,i=t.plainText,s=t.prefix,l=t.subset;let u="hljs";const h=xte(a);if(r&&h.registerAlias(r),s){const p=s.indexOf("-");u=p===-1?s:s.slice(0,p)}return function(p,f){lg(p,"element",function(y,b,x){if(y.tagName!=="code"||!x||x.type!=="element"||x.tagName!=="pre")return;const v=Tte(y);if(v===!1||!v&&!n||v&&i&&i.includes(v))return;Array.isArray(y.properties.className)||(y.properties.className=[]),y.properties.className.includes(u)||y.properties.className.unshift(u);const T=UZ(y,{whitespace:"pre"});let k;try{k=v?h.highlight(v,T,{prefix:s}):h.highlightAuto(T,{prefix:s,subset:l})}catch(C){const A=C;if(v&&/Unknown language/.test(A.message)){f.message("Cannot highlight as `"+v+"`, it’s not registered",{ancestors:[x,y],cause:A,place:y.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw A}!v&&k.data&&k.data.language&&y.properties.className.push("language-"+k.data.language),k.children.length>0&&(y.children=k.children)})}}function Tte(e){const t=e.properties.className;let r=-1;if(!Array.isArray(t))return;let n;for(;++r<t.length;){const a=String(t[r]);if(a==="no-highlight"||a==="nohighlight")return!1;!n&&a.slice(0,5)==="lang-"&&(n=a.slice(5)),!n&&a.slice(0,9)==="language-"&&(n=a.slice(9))}return n}var mA={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},vm={exports:{}},kte=vm.exports,yA;function Ete(){return yA||(yA=1,(function(e,t){(function(r,n){e.exports=n()})(kte,(function(){var r=1e3,n=6e4,a=36e5,i="millisecond",s="second",l="minute",u="hour",h="day",p="week",f="month",y="quarter",b="year",x="date",v="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var $=["th","st","nd","rd"],I=O%100;return"["+O+($[(I-20)%10]||$[I]||$[0])+"]"}},A=function(O,$,I){var G=String(O);return!G||G.length>=$?O:""+Array($+1-G.length).join(I)+O},P={s:A,z:function(O){var $=-O.utcOffset(),I=Math.abs($),G=Math.floor(I/60),V=I%60;return($<=0?"+":"-")+A(G,2,"0")+":"+A(V,2,"0")},m:function O($,I){if($.date()<I.date())return-O(I,$);var G=12*(I.year()-$.year())+(I.month()-$.month()),V=$.clone().add(G,f),oe=I-V<0,U=$.clone().add(G+(oe?-1:1),f);return+(-(G+(I-V)/(oe?V-U:U-V))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:b,w:p,d:h,D:x,h:u,m:l,s,ms:i,Q:y}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},M="en",L={};L[M]=C;var D="$isDayjsObject",q=function(O){return O instanceof W||!(!O||!O[D])},Q=function O($,I,G){var V;if(!$)return M;if(typeof $=="string"){var oe=$.toLowerCase();L[oe]&&(V=oe),I&&(L[oe]=I,V=oe);var U=$.split("-");if(!V&&U.length>1)return O(U[0])}else{var z=$.name;L[z]=$,V=z}return!G&&V&&(M=V),V||!G&&M},F=function(O,$){if(q(O))return O.clone();var I=typeof $=="object"?$:{};return I.date=O,I.args=arguments,new W(I)},K=P;K.l=Q,K.i=q,K.w=function(O,$){return F(O,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var W=(function(){function O(I){this.$L=Q(I.locale,null,!0),this.parse(I),this.$x=this.$x||I.x||{},this[D]=!0}var $=O.prototype;return $.parse=function(I){this.$d=(function(G){var V=G.date,oe=G.utc;if(V===null)return new Date(NaN);if(K.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var U=V.match(T);if(U){var z=U[2]-1||0,ie=(U[7]||"0").substring(0,3);return oe?new Date(Date.UTC(U[1],z,U[3]||1,U[4]||0,U[5]||0,U[6]||0,ie)):new Date(U[1],z,U[3]||1,U[4]||0,U[5]||0,U[6]||0,ie)}}return new Date(V)})(I),this.init()},$.init=function(){var I=this.$d;this.$y=I.getFullYear(),this.$M=I.getMonth(),this.$D=I.getDate(),this.$W=I.getDay(),this.$H=I.getHours(),this.$m=I.getMinutes(),this.$s=I.getSeconds(),this.$ms=I.getMilliseconds()},$.$utils=function(){return K},$.isValid=function(){return this.$d.toString()!==v},$.isSame=function(I,G){var V=F(I);return this.startOf(G)<=V&&V<=this.endOf(G)},$.isAfter=function(I,G){return F(I)<this.startOf(G)},$.isBefore=function(I,G){return this.endOf(G)<F(I)},$.$g=function(I,G,V){return K.u(I)?this[G]:this.set(V,I)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(I,G){var V=this,oe=!!K.u(G)||G,U=K.p(I),z=function(_e,de){var Ae=K.w(V.$u?Date.UTC(V.$y,de,_e):new Date(V.$y,de,_e),V);return oe?Ae:Ae.endOf(h)},ie=function(_e,de){return K.w(V.toDate()[_e].apply(V.toDate("s"),(oe?[0,0,0,0]:[23,59,59,999]).slice(de)),V)},H=this.$W,ue=this.$M,Z=this.$D,ae="set"+(this.$u?"UTC":"");switch(U){case b:return oe?z(1,0):z(31,11);case f:return oe?z(1,ue):z(0,ue+1);case p:var pe=this.$locale().weekStart||0,ye=(H<pe?H+7:H)-pe;return z(oe?Z-ye:Z+(6-ye),ue);case h:case x:return ie(ae+"Hours",0);case u:return ie(ae+"Minutes",1);case l:return ie(ae+"Seconds",2);case s:return ie(ae+"Milliseconds",3);default:return this.clone()}},$.endOf=function(I){return this.startOf(I,!1)},$.$set=function(I,G){var V,oe=K.p(I),U="set"+(this.$u?"UTC":""),z=(V={},V[h]=U+"Date",V[x]=U+"Date",V[f]=U+"Month",V[b]=U+"FullYear",V[u]=U+"Hours",V[l]=U+"Minutes",V[s]=U+"Seconds",V[i]=U+"Milliseconds",V)[oe],ie=oe===h?this.$D+(G-this.$W):G;if(oe===f||oe===b){var H=this.clone().set(x,1);H.$d[z](ie),H.init(),this.$d=H.set(x,Math.min(this.$D,H.daysInMonth())).$d}else z&&this.$d[z](ie);return this.init(),this},$.set=function(I,G){return this.clone().$set(I,G)},$.get=function(I){return this[K.p(I)]()},$.add=function(I,G){var V,oe=this;I=Number(I);var U=K.p(G),z=function(ue){var Z=F(oe);return K.w(Z.date(Z.date()+Math.round(ue*I)),oe)};if(U===f)return this.set(f,this.$M+I);if(U===b)return this.set(b,this.$y+I);if(U===h)return z(1);if(U===p)return z(7);var ie=(V={},V[l]=n,V[u]=a,V[s]=r,V)[U]||1,H=this.$d.getTime()+I*ie;return K.w(H,this)},$.subtract=function(I,G){return this.add(-1*I,G)},$.format=function(I){var G=this,V=this.$locale();if(!this.isValid())return V.invalidDate||v;var oe=I||"YYYY-MM-DDTHH:mm:ssZ",U=K.z(this),z=this.$H,ie=this.$m,H=this.$M,ue=V.weekdays,Z=V.months,ae=V.meridiem,pe=function(de,Ae,Te,$e){return de&&(de[Ae]||de(G,oe))||Te[Ae].slice(0,$e)},ye=function(de){return K.s(z%12||12,de,"0")},_e=ae||function(de,Ae,Te){var $e=de<12?"AM":"PM";return Te?$e.toLowerCase():$e};return oe.replace(k,(function(de,Ae){return Ae||(function(Te){switch(Te){case"YY":return String(G.$y).slice(-2);case"YYYY":return K.s(G.$y,4,"0");case"M":return H+1;case"MM":return K.s(H+1,2,"0");case"MMM":return pe(V.monthsShort,H,Z,3);case"MMMM":return pe(Z,H);case"D":return G.$D;case"DD":return K.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return pe(V.weekdaysMin,G.$W,ue,2);case"ddd":return pe(V.weekdaysShort,G.$W,ue,3);case"dddd":return ue[G.$W];case"H":return String(z);case"HH":return K.s(z,2,"0");case"h":return ye(1);case"hh":return ye(2);case"a":return _e(z,ie,!0);case"A":return _e(z,ie,!1);case"m":return String(ie);case"mm":return K.s(ie,2,"0");case"s":return String(G.$s);case"ss":return K.s(G.$s,2,"0");case"SSS":return K.s(G.$ms,3,"0");case"Z":return U}return null})(de)||U.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(I,G,V){var oe,U=this,z=K.p(G),ie=F(I),H=(ie.utcOffset()-this.utcOffset())*n,ue=this-ie,Z=function(){return K.m(U,ie)};switch(z){case b:oe=Z()/12;break;case f:oe=Z();break;case y:oe=Z()/3;break;case p:oe=(ue-H)/6048e5;break;case h:oe=(ue-H)/864e5;break;case u:oe=ue/a;break;case l:oe=ue/n;break;case s:oe=ue/r;break;default:oe=ue}return V?oe:K.a(oe)},$.daysInMonth=function(){return this.endOf(f).$D},$.$locale=function(){return L[this.$L]},$.locale=function(I,G){if(!I)return this.$L;var V=this.clone(),oe=Q(I,G,!0);return oe&&(V.$L=oe),V},$.clone=function(){return K.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},O})(),j=W.prototype;return F.prototype=j,[["$ms",i],["$s",s],["$m",l],["$H",u],["$W",h],["$M",f],["$y",b],["$D",x]].forEach((function(O){j[O[1]]=function($){return this.$g($,O[0],O[1])}})),F.extend=function(O,$){return O.$i||(O($,W,F),O.$i=!0),F},F.locale=Q,F.isDayjs=q,F.unix=function(O){return F(1e3*O)},F.en=L[M],F.Ls=L,F.p={},F}))})(vm)),vm.exports}var Cte=Ete();const _te=Ic(Cte);var XR=Object.defineProperty,N=(e,t)=>XR(e,"name",{value:t,configurable:!0}),Ate=(e,t)=>{for(var r in t)XR(e,r,{get:t[r],enumerable:!0})},Eo={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},qe={trace:N((...e)=>{},"trace"),debug:N((...e)=>{},"debug"),info:N((...e)=>{},"info"),warn:N((...e)=>{},"warn"),error:N((...e)=>{},"error"),fatal:N((...e)=>{},"fatal")},_S=N(function(e="fatal"){let t=Eo.fatal;typeof e=="string"?e.toLowerCase()in Eo&&(t=Eo[e]):typeof e=="number"&&(t=e),qe.trace=()=>{},qe.debug=()=>{},qe.info=()=>{},qe.warn=()=>{},qe.error=()=>{},qe.fatal=()=>{},t<=Eo.fatal&&(qe.fatal=console.error?console.error.bind(console,Yi("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Yi("FATAL"))),t<=Eo.error&&(qe.error=console.error?console.error.bind(console,Yi("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Yi("ERROR"))),t<=Eo.warn&&(qe.warn=console.warn?console.warn.bind(console,Yi("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Yi("WARN"))),t<=Eo.info&&(qe.info=console.info?console.info.bind(console,Yi("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Yi("INFO"))),t<=Eo.debug&&(qe.debug=console.debug?console.debug.bind(console,Yi("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Yi("DEBUG"))),t<=Eo.trace&&(qe.trace=console.debug?console.debug.bind(console,Yi("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Yi("TRACE")))},"setLogLevel"),Yi=N(e=>`%c${_te().format("ss.SSS")} : ${e} : `,"format");const wm={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,i=2*r-a;switch(n){case"r":return wm.hue2rgb(i,a,e+1/3)*255;case"g":return wm.hue2rgb(i,a,e)*255;case"b":return wm.hue2rgb(i,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),i=Math.min(e,t,r),s=(a+i)/2;if(n==="l")return s*100;if(a===i)return 0;const l=a-i,u=s>.5?l/(2-a-i):l/(a+i);if(n==="s")return u*100;switch(a){case e:return((t-r)/l+(t<r?6:0))*60;case t:return((r-e)/l+2)*60;case r:return((e-t)/l+4)*60;default:return-1}}},Nte={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},Lte={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Yt={channel:wm,lang:Nte,unit:Lte},bl={};for(let e=0;e<=255;e++)bl[e]=Yt.unit.dec2hex(e);const La={ALL:0,RGB:1,HSL:2};class Pte{constructor(){this.type=La.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=La.ALL}is(t){return this.type===t}}class Rte{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new Pte}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=La.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:a}=t;r===void 0&&(t.h=Yt.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=Yt.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=Yt.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:a}=t;r===void 0&&(t.r=Yt.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=Yt.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=Yt.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(La.HSL)&&r!==void 0?r:(this._ensureHSL(),Yt.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(La.HSL)&&r!==void 0?r:(this._ensureHSL(),Yt.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(La.HSL)&&r!==void 0?r:(this._ensureHSL(),Yt.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(La.RGB)&&r!==void 0?r:(this._ensureRGB(),Yt.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(La.RGB)&&r!==void 0?r:(this._ensureRGB(),Yt.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(La.RGB)&&r!==void 0?r:(this._ensureRGB(),Yt.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(La.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(La.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(La.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(La.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(La.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(La.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const ty=new Rte({r:0,g:0,b:0,a:0},"transparent"),Ju={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Ju.re);if(!t)return;const r=t[1],n=parseInt(r,16),a=r.length,i=a%4===0,s=a>4,l=s?1:17,u=s?8:4,h=i?0:-1,p=s?255:15;return ty.set({r:(n>>u*(h+3)&p)*l,g:(n>>u*(h+2)&p)*l,b:(n>>u*(h+1)&p)*l,a:i?(n&p)*l/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`#${bl[Math.round(t)]}${bl[Math.round(r)]}${bl[Math.round(n)]}${bl[Math.round(a*255)]}`:`#${bl[Math.round(t)]}${bl[Math.round(r)]}${bl[Math.round(n)]}`}},hc={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(hc.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return Yt.channel.clamp.h(parseFloat(r)*.9);case"rad":return Yt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return Yt.channel.clamp.h(parseFloat(r)*360)}}return Yt.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(hc.re);if(!r)return;const[,n,a,i,s,l]=r;return ty.set({h:hc._hue2deg(n),s:Yt.channel.clamp.s(parseFloat(a)),l:Yt.channel.clamp.l(parseFloat(i)),a:s?Yt.channel.clamp.a(l?parseFloat(s)/100:parseFloat(s)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a}=e;return a<1?`hsla(${Yt.lang.round(t)}, ${Yt.lang.round(r)}%, ${Yt.lang.round(n)}%, ${a})`:`hsl(${Yt.lang.round(t)}, ${Yt.lang.round(r)}%, ${Yt.lang.round(n)}%)`}},Ep={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Ep.colors[e];if(t)return Ju.parse(t)},stringify:e=>{const t=Ju.stringify(e);for(const r in Ep.colors)if(Ep.colors[r]===t)return r}},np={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(np.re);if(!r)return;const[,n,a,i,s,l,u,h,p]=r;return ty.set({r:Yt.channel.clamp.r(a?parseFloat(n)*2.55:parseFloat(n)),g:Yt.channel.clamp.g(s?parseFloat(i)*2.55:parseFloat(i)),b:Yt.channel.clamp.b(u?parseFloat(l)*2.55:parseFloat(l)),a:h?Yt.channel.clamp.a(p?parseFloat(h)/100:parseFloat(h)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`rgba(${Yt.lang.round(t)}, ${Yt.lang.round(r)}, ${Yt.lang.round(n)}, ${Yt.lang.round(a)})`:`rgb(${Yt.lang.round(t)}, ${Yt.lang.round(r)}, ${Yt.lang.round(n)})`}},Vs={format:{keyword:Ep,hex:Ju,rgb:np,rgba:np,hsl:hc,hsla:hc},parse:e=>{if(typeof e!="string")return e;const t=Ju.parse(e)||np.parse(e)||hc.parse(e)||Ep.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(La.HSL)||e.data.r===void 0?hc.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?np.stringify(e):Ju.stringify(e)},JR=(e,t)=>{const r=Vs.parse(e);for(const n in t)r[n]=Yt.channel.clamp[n](t[n]);return Vs.stringify(r)},Cp=(e,t,r=0,n=1)=>{if(typeof e!="number")return JR(e,{a:t});const a=ty.set({r:Yt.channel.clamp.r(e),g:Yt.channel.clamp.g(t),b:Yt.channel.clamp.b(r),a:Yt.channel.clamp.a(n)});return Vs.stringify(a)},Ite=e=>{const{r:t,g:r,b:n}=Vs.parse(e),a=.2126*Yt.channel.toLinear(t)+.7152*Yt.channel.toLinear(r)+.0722*Yt.channel.toLinear(n);return Yt.lang.round(a)},Dte=e=>Ite(e)>=.5,gg=e=>!Dte(e),ZR=(e,t,r)=>{const n=Vs.parse(e),a=n[t],i=Yt.channel.clamp[t](a+r);return a!==i&&(n[t]=i),Vs.stringify(n)},xt=(e,t)=>ZR(e,"l",t),jt=(e,t)=>ZR(e,"l",-t),xe=(e,t)=>{const r=Vs.parse(e),n={};for(const a in t)t[a]&&(n[a]=r[a]+t[a]);return JR(e,n)},Mte=(e,t,r=50)=>{const{r:n,g:a,b:i,a:s}=Vs.parse(e),{r:l,g:u,b:h,a:p}=Vs.parse(t),f=r/100,y=f*2-1,b=s-p,v=((y*b===-1?y:(y+b)/(1+y*b))+1)/2,T=1-v,k=n*v+l*T,C=a*v+u*T,A=i*v+h*T,P=s*f+p*(1-f);return Cp(k,C,A,P)},lt=(e,t=100)=>{const r=Vs.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Mte(r,e,t)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:eI,setPrototypeOf:bA,isFrozen:Ote,getPrototypeOf:jte,getOwnPropertyDescriptor:Bte}=Object;let{freeze:Ja,seal:ts,create:qw}=Object,{apply:Hw,construct:Gw}=typeof Reflect<"u"&&Reflect;Ja||(Ja=function(t){return t});ts||(ts=function(t){return t});Hw||(Hw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return t.apply(r,a)});Gw||(Gw=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return new t(...n)});const Xf=Za(Array.prototype.forEach),Fte=Za(Array.prototype.lastIndexOf),xA=Za(Array.prototype.pop),Uh=Za(Array.prototype.push),zte=Za(Array.prototype.splice),Sm=Za(String.prototype.toLowerCase),Cv=Za(String.prototype.toString),_v=Za(String.prototype.match),$h=Za(String.prototype.replace),Ute=Za(String.prototype.indexOf),$te=Za(String.prototype.trim),ms=Za(Object.prototype.hasOwnProperty),Ga=Za(RegExp.prototype.test),qh=qte(TypeError);function Za(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return Hw(e,t,n)}}function qte(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gw(e,r)}}function yr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sm;bA&&bA(e,null);let n=t.length;for(;n--;){let a=t[n];if(typeof a=="string"){const i=r(a);i!==a&&(Ote(t)||(t[n]=i),a=i)}e[a]=!0}return e}function Hte(e){for(let t=0;t<e.length;t++)ms(e,t)||(e[t]=null);return e}function _o(e){const t=qw(null);for(const[r,n]of eI(e))ms(e,r)&&(Array.isArray(n)?t[r]=Hte(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=_o(n):t[r]=n);return t}function Hh(e,t){for(;e!==null;){const n=Bte(e,t);if(n){if(n.get)return Za(n.get);if(typeof n.value=="function")return Za(n.value)}e=jte(e)}function r(){return null}return r}const vA=Ja(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Av=Ja(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Nv=Ja(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Gte=Ja(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lv=Ja(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wte=Ja(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wA=Ja(["#text"]),SA=Ja(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Pv=Ja(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TA=Ja(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Jf=Ja(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Vte=ts(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Yte=ts(/<%[\w\W]*|[\w\W]*%>/gm),Qte=ts(/\$\{[\w\W]*/gm),Kte=ts(/^data-[\-\w.\u00B7-\uFFFF]+$/),Xte=ts(/^aria-[\-\w]+$/),tI=ts(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jte=ts(/^(?:\w+script|data):/i),Zte=ts(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rI=ts(/^html$/i),ere=ts(/^[a-z][.\w]*(-[.\w]+)+$/i);var kA=Object.freeze({__proto__:null,ARIA_ATTR:Xte,ATTR_WHITESPACE:Zte,CUSTOM_ELEMENT:ere,DATA_ATTR:Kte,DOCTYPE_NAME:rI,ERB_EXPR:Yte,IS_ALLOWED_URI:tI,IS_SCRIPT_OR_DATA:Jte,MUSTACHE_EXPR:Vte,TMPLIT_EXPR:Qte});const Gh={element:1,text:3,progressingInstruction:7,comment:8,document:9},tre=function(){return typeof window>"u"?null:window},rre=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(n=r.getAttribute(a));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},EA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function nI(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tre();const t=gt=>nI(gt);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==Gh.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,a=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:h,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:y,trustedTypes:b}=e,x=u.prototype,v=Hh(x,"cloneNode"),T=Hh(x,"remove"),k=Hh(x,"nextSibling"),C=Hh(x,"childNodes"),A=Hh(x,"parentNode");if(typeof s=="function"){const gt=r.createElement("template");gt.content&&gt.content.ownerDocument&&(r=gt.content.ownerDocument)}let P,M="";const{implementation:L,createNodeIterator:D,createDocumentFragment:q,getElementsByTagName:Q}=r,{importNode:F}=n;let K=EA();t.isSupported=typeof eI=="function"&&typeof A=="function"&&L&&L.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:j,TMPLIT_EXPR:O,DATA_ATTR:$,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:oe}=kA;let{IS_ALLOWED_URI:U}=kA,z=null;const ie=yr({},[...vA,...Av,...Nv,...Lv,...wA]);let H=null;const ue=yr({},[...SA,...Pv,...TA,...Jf]);let Z=Object.seal(qw(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,pe=null;const ye=Object.seal(qw(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let _e=!0,de=!0,Ae=!1,Te=!0,$e=!1,ot=!0,Tt=!1,je=!1,_t=!1,Pt=!1,Bt=!1,kt=!1,At=!0,ir=!1;const lr="user-content-";let ft=!0,ur=!1,re={},we=null;const Ze=yr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let et=null;const pt=yr({},["audio","video","img","source","image","track"]);let Ft=null;const Rr=yr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hr="http://www.w3.org/1998/Math/MathML",cr="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml";let tr=Xt,sa=!1,fn=null;const $o=yr({},[hr,cr,Xt],Cv);let za=yr({},["mi","mo","mn","ms","mtext"]),Ua=yr({},["annotation-xml"]);const ha=yr({},["title","style","font","a","script"]);let nn=null;const le=["application/xhtml+xml","text/html"],De="text/html";let Qe=null,It=null;const Or=r.createElement("form"),Ar=function(he){return he instanceof RegExp||he instanceof Function},dt=function(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(It&&It===he)){if((!he||typeof he!="object")&&(he={}),he=_o(he),nn=le.indexOf(he.PARSER_MEDIA_TYPE)===-1?De:he.PARSER_MEDIA_TYPE,Qe=nn==="application/xhtml+xml"?Cv:Sm,z=ms(he,"ALLOWED_TAGS")?yr({},he.ALLOWED_TAGS,Qe):ie,H=ms(he,"ALLOWED_ATTR")?yr({},he.ALLOWED_ATTR,Qe):ue,fn=ms(he,"ALLOWED_NAMESPACES")?yr({},he.ALLOWED_NAMESPACES,Cv):$o,Ft=ms(he,"ADD_URI_SAFE_ATTR")?yr(_o(Rr),he.ADD_URI_SAFE_ATTR,Qe):Rr,et=ms(he,"ADD_DATA_URI_TAGS")?yr(_o(pt),he.ADD_DATA_URI_TAGS,Qe):pt,we=ms(he,"FORBID_CONTENTS")?yr({},he.FORBID_CONTENTS,Qe):Ze,ae=ms(he,"FORBID_TAGS")?yr({},he.FORBID_TAGS,Qe):_o({}),pe=ms(he,"FORBID_ATTR")?yr({},he.FORBID_ATTR,Qe):_o({}),re=ms(he,"USE_PROFILES")?he.USE_PROFILES:!1,_e=he.ALLOW_ARIA_ATTR!==!1,de=he.ALLOW_DATA_ATTR!==!1,Ae=he.ALLOW_UNKNOWN_PROTOCOLS||!1,Te=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$e=he.SAFE_FOR_TEMPLATES||!1,ot=he.SAFE_FOR_XML!==!1,Tt=he.WHOLE_DOCUMENT||!1,Pt=he.RETURN_DOM||!1,Bt=he.RETURN_DOM_FRAGMENT||!1,kt=he.RETURN_TRUSTED_TYPE||!1,_t=he.FORCE_BODY||!1,At=he.SANITIZE_DOM!==!1,ir=he.SANITIZE_NAMED_PROPS||!1,ft=he.KEEP_CONTENT!==!1,ur=he.IN_PLACE||!1,U=he.ALLOWED_URI_REGEXP||tI,tr=he.NAMESPACE||Xt,za=he.MATHML_TEXT_INTEGRATION_POINTS||za,Ua=he.HTML_INTEGRATION_POINTS||Ua,Z=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&Ar(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&Ar(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$e&&(de=!1),Bt&&(Pt=!0),re&&(z=yr({},wA),H=[],re.html===!0&&(yr(z,vA),yr(H,SA)),re.svg===!0&&(yr(z,Av),yr(H,Pv),yr(H,Jf)),re.svgFilters===!0&&(yr(z,Nv),yr(H,Pv),yr(H,Jf)),re.mathMl===!0&&(yr(z,Lv),yr(H,TA),yr(H,Jf))),he.ADD_TAGS&&(typeof he.ADD_TAGS=="function"?ye.tagCheck=he.ADD_TAGS:(z===ie&&(z=_o(z)),yr(z,he.ADD_TAGS,Qe))),he.ADD_ATTR&&(typeof he.ADD_ATTR=="function"?ye.attributeCheck=he.ADD_ATTR:(H===ue&&(H=_o(H)),yr(H,he.ADD_ATTR,Qe))),he.ADD_URI_SAFE_ATTR&&yr(Ft,he.ADD_URI_SAFE_ATTR,Qe),he.FORBID_CONTENTS&&(we===Ze&&(we=_o(we)),yr(we,he.FORBID_CONTENTS,Qe)),ft&&(z["#text"]=!0),Tt&&yr(z,["html","head","body"]),z.table&&(yr(z,["tbody"]),delete ae.tbody),he.TRUSTED_TYPES_POLICY){if(typeof he.TRUSTED_TYPES_POLICY.createHTML!="function")throw qh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof he.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=he.TRUSTED_TYPES_POLICY,M=P.createHTML("")}else P===void 0&&(P=rre(b,a)),P!==null&&typeof M=="string"&&(M=P.createHTML(""));Ja&&Ja(he),It=he}},ut=yr({},[...Av,...Nv,...Gte]),Lt=yr({},[...Lv,...Wte]),ln=function(he){let Ue=A(he);(!Ue||!Ue.tagName)&&(Ue={namespaceURI:tr,tagName:"template"});const ct=Sm(he.tagName),wr=Sm(Ue.tagName);return fn[he.namespaceURI]?he.namespaceURI===cr?Ue.namespaceURI===Xt?ct==="svg":Ue.namespaceURI===hr?ct==="svg"&&(wr==="annotation-xml"||za[wr]):!!ut[ct]:he.namespaceURI===hr?Ue.namespaceURI===Xt?ct==="math":Ue.namespaceURI===cr?ct==="math"&&Ua[wr]:!!Lt[ct]:he.namespaceURI===Xt?Ue.namespaceURI===cr&&!Ua[wr]||Ue.namespaceURI===hr&&!za[wr]?!1:!Lt[ct]&&(ha[ct]||!ut[ct]):!!(nn==="application/xhtml+xml"&&fn[he.namespaceURI]):!1},rr=function(he){Uh(t.removed,{element:he});try{A(he).removeChild(he)}catch{T(he)}},jn=function(he,Ue){try{Uh(t.removed,{attribute:Ue.getAttributeNode(he),from:Ue})}catch{Uh(t.removed,{attribute:null,from:Ue})}if(Ue.removeAttribute(he),he==="is")if(Pt||Bt)try{rr(Ue)}catch{}else try{Ue.setAttribute(he,"")}catch{}},fi=function(he){let Ue=null,ct=null;if(_t)he="<remove></remove>"+he;else{const Jt=_v(he,/^[\r\n\t ]+/);ct=Jt&&Jt[0]}nn==="application/xhtml+xml"&&tr===Xt&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");const wr=P?P.createHTML(he):he;if(tr===Xt)try{Ue=new y().parseFromString(wr,nn)}catch{}if(!Ue||!Ue.documentElement){Ue=L.createDocument(tr,"template",null);try{Ue.documentElement.innerHTML=sa?M:wr}catch{}}const jr=Ue.body||Ue.documentElement;return he&&ct&&jr.insertBefore(r.createTextNode(ct),jr.childNodes[0]||null),tr===Xt?Q.call(Ue,Tt?"html":"body")[0]:Tt?Ue.documentElement:jr},ei=function(he){return D.call(he.ownerDocument||he,he,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Yn=function(he){return he instanceof f&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof p)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},en=function(he){return typeof l=="function"&&he instanceof l};function Fr(gt,he,Ue){Xf(gt,ct=>{ct.call(t,he,Ue,It)})}const $a=function(he){let Ue=null;if(Fr(K.beforeSanitizeElements,he,null),Yn(he))return rr(he),!0;const ct=Qe(he.nodeName);if(Fr(K.uponSanitizeElement,he,{tagName:ct,allowedTags:z}),ot&&he.hasChildNodes()&&!en(he.firstElementChild)&&Ga(/<[/\w!]/g,he.innerHTML)&&Ga(/<[/\w!]/g,he.textContent)||he.nodeType===Gh.progressingInstruction||ot&&he.nodeType===Gh.comment&&Ga(/<[/\w]/g,he.data))return rr(he),!0;if(!(ye.tagCheck instanceof Function&&ye.tagCheck(ct))&&(!z[ct]||ae[ct])){if(!ae[ct]&&zt(ct)&&(Z.tagNameCheck instanceof RegExp&&Ga(Z.tagNameCheck,ct)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(ct)))return!1;if(ft&&!we[ct]){const wr=A(he)||he.parentNode,jr=C(he)||he.childNodes;if(jr&&wr){const Jt=jr.length;for(let cn=Jt-1;cn>=0;--cn){const Rn=v(jr[cn],!0);Rn.__removalCount=(he.__removalCount||0)+1,wr.insertBefore(Rn,k(he))}}}return rr(he),!0}return he instanceof u&&!ln(he)||(ct==="noscript"||ct==="noembed"||ct==="noframes")&&Ga(/<\/no(script|embed|frames)/i,he.innerHTML)?(rr(he),!0):($e&&he.nodeType===Gh.text&&(Ue=he.textContent,Xf([W,j,O],wr=>{Ue=$h(Ue,wr," ")}),he.textContent!==Ue&&(Uh(t.removed,{element:he.cloneNode()}),he.textContent=Ue)),Fr(K.afterSanitizeElements,he,null),!1)},is=function(he,Ue,ct){if(At&&(Ue==="id"||Ue==="name")&&(ct in r||ct in Or))return!1;if(!(de&&!pe[Ue]&&Ga($,Ue))){if(!(_e&&Ga(I,Ue))){if(!(ye.attributeCheck instanceof Function&&ye.attributeCheck(Ue,he))){if(!H[Ue]||pe[Ue]){if(!(zt(he)&&(Z.tagNameCheck instanceof RegExp&&Ga(Z.tagNameCheck,he)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(he))&&(Z.attributeNameCheck instanceof RegExp&&Ga(Z.attributeNameCheck,Ue)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(Ue,he))||Ue==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&Ga(Z.tagNameCheck,ct)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(ct))))return!1}else if(!Ft[Ue]){if(!Ga(U,$h(ct,V,""))){if(!((Ue==="src"||Ue==="xlink:href"||Ue==="href")&&he!=="script"&&Ute(ct,"data:")===0&&et[he])){if(!(Ae&&!Ga(G,$h(ct,V,"")))){if(ct)return!1}}}}}}}return!0},zt=function(he){return he!=="annotation-xml"&&_v(he,oe)},mi=function(he){Fr(K.beforeSanitizeAttributes,he,null);const{attributes:Ue}=he;if(!Ue||Yn(he))return;const ct={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let wr=Ue.length;for(;wr--;){const jr=Ue[wr],{name:Jt,namespaceURI:cn,value:Rn}=jr,oa=Qe(Jt),Ke=Rn;let st=Jt==="value"?Ke:$te(Ke);if(ct.attrName=oa,ct.attrValue=st,ct.keepAttr=!0,ct.forceKeepAttr=void 0,Fr(K.uponSanitizeAttribute,he,ct),st=ct.attrValue,ir&&(oa==="id"||oa==="name")&&(jn(Jt,he),st=lr+st),ot&&Ga(/((--!?|])>)|<\/(style|title|textarea)/i,st)){jn(Jt,he);continue}if(oa==="attributename"&&_v(st,"href")){jn(Jt,he);continue}if(ct.forceKeepAttr)continue;if(!ct.keepAttr){jn(Jt,he);continue}if(!Te&&Ga(/\/>/i,st)){jn(Jt,he);continue}$e&&Xf([W,j,O],Er=>{st=$h(st,Er," ")});const Zt=Qe(he.nodeName);if(!is(Zt,oa,st)){jn(Jt,he);continue}if(P&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!cn)switch(b.getAttributeType(Zt,oa)){case"TrustedHTML":{st=P.createHTML(st);break}case"TrustedScriptURL":{st=P.createScriptURL(st);break}}if(st!==Ke)try{cn?he.setAttributeNS(cn,Jt,st):he.setAttribute(Jt,st),Yn(he)?rr(he):xA(t.removed)}catch{jn(Jt,he)}}Fr(K.afterSanitizeAttributes,he,null)},yi=function gt(he){let Ue=null;const ct=ei(he);for(Fr(K.beforeSanitizeShadowDOM,he,null);Ue=ct.nextNode();)Fr(K.uponSanitizeShadowNode,Ue,null),$a(Ue),mi(Ue),Ue.content instanceof i&&gt(Ue.content);Fr(K.afterSanitizeShadowDOM,he,null)};return t.sanitize=function(gt){let he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ue=null,ct=null,wr=null,jr=null;if(sa=!gt,sa&&(gt="<!-->"),typeof gt!="string"&&!en(gt))if(typeof gt.toString=="function"){if(gt=gt.toString(),typeof gt!="string")throw qh("dirty is not a string, aborting")}else throw qh("toString is not a function");if(!t.isSupported)return gt;if(je||dt(he),t.removed=[],typeof gt=="string"&&(ur=!1),ur){if(gt.nodeName){const Rn=Qe(gt.nodeName);if(!z[Rn]||ae[Rn])throw qh("root node is forbidden and cannot be sanitized in-place")}}else if(gt instanceof l)Ue=fi("<!---->"),ct=Ue.ownerDocument.importNode(gt,!0),ct.nodeType===Gh.element&&ct.nodeName==="BODY"||ct.nodeName==="HTML"?Ue=ct:Ue.appendChild(ct);else{if(!Pt&&!$e&&!Tt&&gt.indexOf("<")===-1)return P&&kt?P.createHTML(gt):gt;if(Ue=fi(gt),!Ue)return Pt?null:kt?M:""}Ue&&_t&&rr(Ue.firstChild);const Jt=ei(ur?gt:Ue);for(;wr=Jt.nextNode();)$a(wr),mi(wr),wr.content instanceof i&&yi(wr.content);if(ur)return gt;if(Pt){if(Bt)for(jr=q.call(Ue.ownerDocument);Ue.firstChild;)jr.appendChild(Ue.firstChild);else jr=Ue;return(H.shadowroot||H.shadowrootmode)&&(jr=F.call(n,jr,!0)),jr}let cn=Tt?Ue.outerHTML:Ue.innerHTML;return Tt&&z["!doctype"]&&Ue.ownerDocument&&Ue.ownerDocument.doctype&&Ue.ownerDocument.doctype.name&&Ga(rI,Ue.ownerDocument.doctype.name)&&(cn="<!DOCTYPE "+Ue.ownerDocument.doctype.name+`>
`+cn),$e&&Xf([W,j,O],Rn=>{cn=$h(cn,Rn," ")}),P&&kt?P.createHTML(cn):cn},t.setConfig=function(){let gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dt(gt),je=!0},t.clearConfig=function(){It=null,je=!1},t.isValidAttribute=function(gt,he,Ue){It||dt({});const ct=Qe(gt),wr=Qe(he);return is(ct,wr,Ue)},t.addHook=function(gt,he){typeof he=="function"&&Uh(K[gt],he)},t.removeHook=function(gt,he){if(he!==void 0){const Ue=Fte(K[gt],he);return Ue===-1?void 0:zte(K[gt],Ue,1)[0]}return xA(K[gt])},t.removeHooks=function(gt){K[gt]=[]},t.removeAllHooks=function(){K=EA()},t}var dd=nI(),aI=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,_p=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,nre=/\s*%%.*\n/gm,td,iI=(td=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},N(td,"UnknownDiagramError"),td),Ec={},AS=N(function(e,t){e=e.replace(aI,"").replace(_p,"").replace(nre,`
`);for(const[r,{detector:n}]of Object.entries(Ec))if(n(e,t))return r;throw new iI(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),Ww=N((...e)=>{for(const{id:t,detector:r,loader:n}of e)sI(t,r,n)},"registerLazyLoadedDiagrams"),sI=N((e,t,r)=>{Ec[e]&&qe.warn(`Detector with key ${e} already exists. Overwriting.`),Ec[e]={detector:t,loader:r},qe.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),are=N(e=>Ec[e].loader,"getDiagramLoader"),Vw=N((e,t,{depth:r=2,clobber:n=!1}={})=>{const a={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>Vw(e,i,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]=="object"&&(e[i]===void 0||typeof e[i]=="object")?(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=Vw(e[i],t[i],{depth:r-1,clobber:n})):(n||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i])}),e)},"assignWithDepth"),ra=Vw,ry="#ffffff",ny="#f2f2f2",Qa=N((e,t)=>t?xe(e,{s:-40,l:10}):xe(e,{s:-40,l:-10}),"mkBorder"),rd,ire=(rd=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||xe(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||xe(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Qa(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Qa(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||lt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||lt(this.tertiaryColor),this.lineColor=this.lineColor||lt(this.background),this.arrowheadColor=this.arrowheadColor||lt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||jt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||lt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||xt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||jt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||jt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||xe(this.primaryColor,{h:30}),this.cScale4=this.cScale4||xe(this.primaryColor,{h:60}),this.cScale5=this.cScale5||xe(this.primaryColor,{h:90}),this.cScale6=this.cScale6||xe(this.primaryColor,{h:120}),this.cScale7=this.cScale7||xe(this.primaryColor,{h:150}),this.cScale8=this.cScale8||xe(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||xe(this.primaryColor,{h:270}),this.cScale10=this.cScale10||xe(this.primaryColor,{h:300}),this.cScale11=this.cScale11||xe(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=jt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=jt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||lt(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||xt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||jt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||xe(this.mainBkg,{h:180,s:-15,l:t*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||xe(this.mainBkg,{h:180,s:-15,l:t*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||xe(this.primaryColor,{h:64}),this.fillType3=this.fillType3||xe(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||xe(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||xe(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||xe(this.primaryColor,{h:128}),this.fillType7=this.fillType7||xe(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||xe(this.primaryColor,{l:-10}),this.pie5=this.pie5||xe(this.secondaryColor,{l:-10}),this.pie6=this.pie6||xe(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||xe(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||xe(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||xe(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||xe(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||xe(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||xe(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||xe(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||xe(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||xe(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||xe(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||xe(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||xe(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||gg(this.quadrant1Fill)?xt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||xe(this.primaryColor,{h:-30}),this.git4=this.git4||xe(this.primaryColor,{h:-60}),this.git5=this.git5||xe(this.primaryColor,{h:-90}),this.git6=this.git6||xe(this.primaryColor,{h:60}),this.git7=this.git7||xe(this.primaryColor,{h:120}),this.darkMode?(this.git0=xt(this.git0,25),this.git1=xt(this.git1,25),this.git2=xt(this.git2,25),this.git3=xt(this.git3,25),this.git4=xt(this.git4,25),this.git5=xt(this.git5,25),this.git6=xt(this.git6,25),this.git7=xt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ry,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ny}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(rd,"Theme"),rd),sre=N(e=>{const t=new ire;return t.calculate(e),t},"getThemeVariables"),nd,ore=(nd=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=xt(this.primaryColor,16),this.tertiaryColor=xe(this.primaryColor,{h:-160}),this.primaryBorderColor=lt(this.background),this.secondaryBorderColor=Qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=xt(lt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Cp(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=jt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=jt(this.sectionBkgColor,10),this.taskBorderColor=Cp(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Cp(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||jt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=xt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=xt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=xt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=xe(this.primaryColor,{h:64}),this.fillType3=xe(this.secondaryColor,{h:64}),this.fillType4=xe(this.primaryColor,{h:-64}),this.fillType5=xe(this.secondaryColor,{h:-64}),this.fillType6=xe(this.primaryColor,{h:128}),this.fillType7=xe(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||xe(this.primaryColor,{h:30}),this.cScale4=this.cScale4||xe(this.primaryColor,{h:60}),this.cScale5=this.cScale5||xe(this.primaryColor,{h:90}),this.cScale6=this.cScale6||xe(this.primaryColor,{h:120}),this.cScale7=this.cScale7||xe(this.primaryColor,{h:150}),this.cScale8=this.cScale8||xe(this.primaryColor,{h:210}),this.cScale9=this.cScale9||xe(this.primaryColor,{h:270}),this.cScale10=this.cScale10||xe(this.primaryColor,{h:300}),this.cScale11=this.cScale11||xe(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||lt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||xt(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||xe(this.mainBkg,{h:30,s:-30,l:-(-10+t*4)}),this["surfacePeer"+t]=this["surfacePeer"+t]||xe(this.mainBkg,{h:30,s:-30,l:-(-7+t*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||xe(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||xe(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||xe(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||xe(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||xe(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||xe(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||gg(this.quadrant1Fill)?xt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?jt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xt(this.secondaryColor,20),this.git1=xt(this.pie2||this.secondaryColor,20),this.git2=xt(this.pie3||this.tertiaryColor,20),this.git3=xt(this.pie4||xe(this.primaryColor,{h:-30}),20),this.git4=xt(this.pie5||xe(this.primaryColor,{h:-60}),20),this.git5=xt(this.pie6||xe(this.primaryColor,{h:-90}),10),this.git6=xt(this.pie7||xe(this.primaryColor,{h:60}),10),this.git7=xt(this.pie8||xe(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||xt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(nd,"Theme"),nd),lre=N(e=>{const t=new ore;return t.calculate(e),t},"getThemeVariables"),ad,cre=(ad=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=xe(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=xe(this.primaryColor,{h:-160}),this.primaryBorderColor=Qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=Cp(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||xe(this.primaryColor,{h:30}),this.cScale4=this.cScale4||xe(this.primaryColor,{h:60}),this.cScale5=this.cScale5||xe(this.primaryColor,{h:90}),this.cScale6=this.cScale6||xe(this.primaryColor,{h:120}),this.cScale7=this.cScale7||xe(this.primaryColor,{h:150}),this.cScale8=this.cScale8||xe(this.primaryColor,{h:210}),this.cScale9=this.cScale9||xe(this.primaryColor,{h:270}),this.cScale10=this.cScale10||xe(this.primaryColor,{h:300}),this.cScale11=this.cScale11||xe(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||jt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||jt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=jt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||xe(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||xe(this.mainBkg,{h:30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||xe(this.mainBkg,{h:30,l:-(7+t*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||lt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||lt(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=xt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||xt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=xe(this.primaryColor,{h:64}),this.fillType3=xe(this.secondaryColor,{h:64}),this.fillType4=xe(this.primaryColor,{h:-64}),this.fillType5=xe(this.secondaryColor,{h:-64}),this.fillType6=xe(this.primaryColor,{h:128}),this.fillType7=xe(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||xe(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||xe(this.primaryColor,{l:-10}),this.pie5=this.pie5||xe(this.secondaryColor,{l:-30}),this.pie6=this.pie6||xe(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||xe(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||xe(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||xe(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||xe(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||xe(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||xe(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||xe(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||xe(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||xe(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||xe(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||xe(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||xe(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||gg(this.quadrant1Fill)?xt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||xe(this.primaryColor,{h:-30}),this.git4=this.git4||xe(this.primaryColor,{h:-60}),this.git5=this.git5||xe(this.primaryColor,{h:-90}),this.git6=this.git6||xe(this.primaryColor,{h:60}),this.git7=this.git7||xe(this.primaryColor,{h:120}),this.darkMode?(this.git0=xt(this.git0,25),this.git1=xt(this.git1,25),this.git2=xt(this.git2,25),this.git3=xt(this.git3,25),this.git4=xt(this.git4,25),this.git5=xt(this.git5,25),this.git6=xt(this.git6,25),this.git7=xt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||jt(lt(this.git0),25),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ry,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ny}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(ad,"Theme"),ad),ure=N(e=>{const t=new cre;return t.calculate(e),t},"getThemeVariables"),id,dre=(id=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=xt("#cde498",10),this.primaryBorderColor=Qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.primaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=jt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||xe(this.primaryColor,{h:30}),this.cScale4=this.cScale4||xe(this.primaryColor,{h:60}),this.cScale5=this.cScale5||xe(this.primaryColor,{h:90}),this.cScale6=this.cScale6||xe(this.primaryColor,{h:120}),this.cScale7=this.cScale7||xe(this.primaryColor,{h:150}),this.cScale8=this.cScale8||xe(this.primaryColor,{h:210}),this.cScale9=this.cScale9||xe(this.primaryColor,{h:270}),this.cScale10=this.cScale10||xe(this.primaryColor,{h:300}),this.cScale11=this.cScale11||xe(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||jt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||jt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=jt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||xe(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||xe(this.mainBkg,{h:30,s:-30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||xe(this.mainBkg,{h:30,s:-30,l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||xt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=xe(this.primaryColor,{h:64}),this.fillType3=xe(this.secondaryColor,{h:64}),this.fillType4=xe(this.primaryColor,{h:-64}),this.fillType5=xe(this.secondaryColor,{h:-64}),this.fillType6=xe(this.primaryColor,{h:128}),this.fillType7=xe(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||xe(this.primaryColor,{l:-30}),this.pie5=this.pie5||xe(this.secondaryColor,{l:-30}),this.pie6=this.pie6||xe(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||xe(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||xe(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||xe(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||xe(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||xe(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||xe(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||xe(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||xe(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||xe(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||xe(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||xe(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||xe(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||gg(this.quadrant1Fill)?xt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||xe(this.primaryColor,{h:-30}),this.git4=this.git4||xe(this.primaryColor,{h:-60}),this.git5=this.git5||xe(this.primaryColor,{h:-90}),this.git6=this.git6||xe(this.primaryColor,{h:60}),this.git7=this.git7||xe(this.primaryColor,{h:120}),this.darkMode?(this.git0=xt(this.git0,25),this.git1=xt(this.git1,25),this.git2=xt(this.git2,25),this.git3=xt(this.git3,25),this.git4=xt(this.git4,25),this.git5=xt(this.git5,25),this.git6=xt(this.git6,25),this.git7=xt(this.git7,25)):(this.git0=jt(this.git0,25),this.git1=jt(this.git1,25),this.git2=jt(this.git2,25),this.git3=jt(this.git3,25),this.git4=jt(this.git4,25),this.git5=jt(this.git5,25),this.git6=jt(this.git6,25),this.git7=jt(this.git7,25)),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||lt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||lt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ry,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ny}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(id,"Theme"),id),hre=N(e=>{const t=new dre;return t.calculate(e),t},"getThemeVariables"),sd,pre=(sd=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=xt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=xe(this.primaryColor,{h:-160}),this.primaryBorderColor=Qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=lt(this.primaryColor),this.secondaryTextColor=lt(this.secondaryColor),this.tertiaryTextColor=lt(this.tertiaryColor),this.lineColor=lt(this.background),this.textColor=lt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||xt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=xt(this.contrast,55),this.border2=this.contrast,this.actorBorder=xt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||lt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||xt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||jt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||xe(this.mainBkg,{l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||xe(this.mainBkg,{l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=xt(this.contrast,30),this.sectionBkgColor2=xt(this.contrast,30),this.taskBorderColor=jt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=xt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=jt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=xe(this.primaryColor,{h:64}),this.fillType3=xe(this.secondaryColor,{h:64}),this.fillType4=xe(this.primaryColor,{h:-64}),this.fillType5=xe(this.secondaryColor,{h:-64}),this.fillType6=xe(this.primaryColor,{h:128}),this.fillType7=xe(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||xe(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||xe(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||xe(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||xe(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||xe(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||xe(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||gg(this.quadrant1Fill)?xt(this.quadrant1Fill):jt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=jt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||xe(this.primaryColor,{h:-30}),this.git4=this.pie5||xe(this.primaryColor,{h:-60}),this.git5=this.pie6||xe(this.primaryColor,{h:-90}),this.git6=this.pie7||xe(this.primaryColor,{h:60}),this.git7=this.pie8||xe(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||lt(this.git0),this.gitInv1=this.gitInv1||lt(this.git1),this.gitInv2=this.gitInv2||lt(this.git2),this.gitInv3=this.gitInv3||lt(this.git3),this.gitInv4=this.gitInv4||lt(this.git4),this.gitInv5=this.gitInv5||lt(this.git5),this.gitInv6=this.gitInv6||lt(this.git6),this.gitInv7=this.gitInv7||lt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ry,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ny}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(sd,"Theme"),sd),gre=N(e=>{const t=new pre;return t.calculate(e),t},"getThemeVariables"),Ro={base:{getThemeVariables:sre},dark:{getThemeVariables:lre},default:{getThemeVariables:ure},forest:{getThemeVariables:hre},neutral:{getThemeVariables:gre}},js={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},oI={...js,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Ro.default.getThemeVariables(),sequence:{...js.sequence,messageFont:N(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:N(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:N(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...js.gantt,tickInterval:void 0,useWidth:void 0},c4:{...js.c4,useWidth:void 0,personFont:N(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...js.flowchart,inheritDir:!1},external_personFont:N(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:N(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:N(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:N(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:N(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:N(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:N(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:N(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:N(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:N(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:N(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:N(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:N(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:N(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:N(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:N(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:N(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:N(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:N(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:N(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:N(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...js.pie,useWidth:984},xyChart:{...js.xyChart,useWidth:void 0},requirement:{...js.requirement,useWidth:void 0},packet:{...js.packet},radar:{...js.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},lI=N((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...lI(e[n],"")]:[...r,t+n],[]),"keyify"),fre=new Set(lI(oI,"")),cI=oI,e0=N(e=>{if(qe.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>e0(t));return}for(const t of Object.keys(e)){if(qe.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!fre.has(t)||e[t]==null){qe.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){qe.debug("sanitizing object",t),e0(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(qe.debug("sanitizing css option",t),e[t]=mre(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}qe.debug("After sanitization",e)}},"sanitizeDirective"),mre=N(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),hd=Object.freeze(cI),di=ra({},hd),t0,Cc=[],Ap=ra({},hd),ay=N((e,t)=>{let r=ra({},e),n={};for(const a of t)hI(a),n=ra(n,a);if(r=ra(r,n),n.theme&&n.theme in Ro){const a=ra({},t0),i=ra(a.themeVariables||{},n.themeVariables);r.theme&&r.theme in Ro&&(r.themeVariables=Ro[r.theme].getThemeVariables(i))}return Ap=r,pI(Ap),Ap},"updateCurrentConfig"),yre=N(e=>(di=ra({},hd),di=ra(di,e),e.theme&&Ro[e.theme]&&(di.themeVariables=Ro[e.theme].getThemeVariables(e.themeVariables)),ay(di,Cc),di),"setSiteConfig"),bre=N(e=>{t0=ra({},e)},"saveConfigFromInitialize"),xre=N(e=>(di=ra(di,e),ay(di,Cc),di),"updateSiteConfig"),uI=N(()=>ra({},di),"getSiteConfig"),dI=N(e=>(pI(e),ra(Ap,e),Ia()),"setConfig"),Ia=N(()=>ra({},Ap),"getConfig"),hI=N(e=>{e&&(["secure",...di.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(qe.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&hI(e[t])}))},"sanitize"),vre=N(e=>{e0(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Cc.push(e),ay(di,Cc)},"addDirective"),r0=N((e=di)=>{Cc=[],ay(e,Cc)},"reset"),wre={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},CA={},Sre=N(e=>{CA[e]||(qe.warn(wre[e]),CA[e]=!0)},"issueWarning"),pI=N(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&Sre("LAZY_LOAD_DEPRECATED")},"checkConfig"),fye=N(()=>{let e={};t0&&(e=ra(e,t0));for(const t of Cc)e=ra(e,t);return e},"getUserDefinedConfig"),fg=/<br\s*\/?>/gi,Tre=N(e=>e?mI(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),kre=(()=>{let e=!1;return()=>{e||(gI(),e=!0)}})();function gI(){const e="data-temp-href-target";dd.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),dd.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}N(gI,"setupDompurifyHooks");var fI=N(e=>(kre(),dd.sanitize(e)),"removeScript"),_A=N((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=fI(e):r!=="loose"&&(e=mI(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=Are(e))}return e},"sanitizeMore"),rs=N((e,t)=>e&&(t.dompurifyConfig?e=dd.sanitize(_A(e,t),t.dompurifyConfig).toString():e=dd.sanitize(_A(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),Ere=N((e,t)=>typeof e=="string"?rs(e,t):e.flat().map(r=>rs(r,t)),"sanitizeTextOrArray"),Cre=N(e=>fg.test(e),"hasBreaks"),_re=N(e=>e.split(fg),"splitBreaks"),Are=N(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),mI=N(e=>e.replace(fg,"#br#"),"breakToPlaceholder"),Nre=N(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),ia=N(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),Lre=N(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),Pre=N(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),AA=N(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let a=t[n];if(a===","&&n>0&&n+1<t.length){const i=t[n-1],s=t[n+1];Rre(i,s)&&(a=i+","+s,n++,r.pop())}r.push(Ire(a))}return r.join("")},"parseGenericTypes"),Yw=N((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),Rre=N((e,t)=>{const r=Yw(e,"~"),n=Yw(t,"~");return r===1&&n===1},"shouldCombineSets"),Ire=N(e=>{const t=Yw(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let a=n.indexOf("~"),i=n.lastIndexOf("~");for(;a!==-1&&i!==-1&&a!==i;)n[a]="<",n[i]=">",a=n.indexOf("~"),i=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),NA=N(()=>window.MathMLElement!==void 0,"isMathMLSupported"),Qw=/\$\$(.*)\$\$/g,pd=N(e=>(e.match(Qw)?.length??0)>0,"hasKatex"),mye=N(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await NS(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),Dre=N(async(e,t)=>{if(!pd(e))return e;if(!(NA()||t.legacyMathML||t.forceLegacyMathML))return e.replace(Qw,"MathML is unsupported in this environment.");{const{default:r}=await Rt(async()=>{const{default:a}=await import("./katex-qrhCpa0F.js");return{default:a}},[]),n=t.forceLegacyMathML||!NA()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(fg).map(a=>pd(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(Qw,(a,i)=>r.renderToString(i,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),NS=N(async(e,t)=>rs(await Dre(e,t),t),"renderKatexSanitized"),Rd={getRows:Tre,sanitizeText:rs,sanitizeTextOrArray:Ere,hasBreaks:Cre,splitBreaks:_re,lineBreakRegex:fg,removeScript:fI,getUrl:Nre,evaluate:ia,getMax:Lre,getMin:Pre},Mre=N(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),Ore=N(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),yI=N(function(e,t,r,n){const a=Ore(t,r,n);Mre(e,a)},"configureSvgSize"),jre=N(function(e,t,r,n){const a=t.node().getBBox(),i=a.width,s=a.height;qe.info(`SVG bounds: ${i}x${s}`,a);let l=0,u=0;qe.info(`Graph bounds: ${l}x${u}`,e),l=i+r*2,u=s+r*2,qe.info(`Calculated bounds: ${l}x${u}`),yI(t,u,l,n);const h=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",h)},"setupGraphViewbox"),Tm={},Bre=N((e,t,r)=>{let n="";return e in Tm&&Tm[e]?n=Tm[e](r):qe.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),Fre=N((e,t)=>{t!==void 0&&(Tm[e]=t)},"addStylesForDiagram"),zre=Bre,bI={};Ate(bI,{clear:()=>Ure,getAccDescription:()=>Gre,getAccTitle:()=>qre,getDiagramTitle:()=>Vre,setAccDescription:()=>Hre,setAccTitle:()=>$re,setDiagramTitle:()=>Wre});var LS="",PS="",RS="",IS=N(e=>rs(e,Ia()),"sanitizeText"),Ure=N(()=>{LS="",RS="",PS=""},"clear"),$re=N(e=>{LS=IS(e).replace(/^\s+/g,"")},"setAccTitle"),qre=N(()=>LS,"getAccTitle"),Hre=N(e=>{RS=IS(e).replace(/\n\s+/g,`
`)},"setAccDescription"),Gre=N(()=>RS,"getAccDescription"),Wre=N(e=>{PS=IS(e)},"setDiagramTitle"),Vre=N(()=>PS,"getDiagramTitle"),LA=qe,Yre=_S,zr=Ia,yye=dI,bye=hd,DS=N(e=>rs(e,zr()),"sanitizeText"),Qre=jre,Kre=N(()=>bI,"getCommonDb"),n0={},a0=N((e,t,r)=>{n0[e]&&LA.warn(`Diagram with id ${e} already registered. Overwriting.`),n0[e]=t,r&&sI(e,r),Fre(e,t.styles),t.injectUtils?.(LA,Yre,zr,DS,Qre,Kre(),()=>{})},"registerDiagram"),Kw=N(e=>{if(e in n0)return n0[e];throw new Xre(e)},"getDiagram"),od,Xre=(od=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},N(od,"DiagramNotFoundError"),od),Jre={value:()=>{}};function xI(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new km(r)}function km(e){this._=e}function Zre(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}km.prototype=xI.prototype={constructor:km,on:function(e,t){var r=this._,n=Zre(e+"",r),a,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((a=(e=n[i]).type)&&(a=ene(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(a=(e=n[i]).type)r[a]=PA(r[a],e.name,t);else if(t==null)for(a in r)r[a]=PA(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new km(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function ene(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function PA(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Jre,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Xw="http://www.w3.org/1999/xhtml";const RA={svg:"http://www.w3.org/2000/svg",xhtml:Xw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iy(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),RA.hasOwnProperty(t)?{space:RA[t],local:e}:e}function tne(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Xw&&t.documentElement.namespaceURI===Xw?t.createElement(e):t.createElementNS(r,e)}}function rne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vI(e){var t=iy(e);return(t.local?rne:tne)(t)}function nne(){}function MS(e){return e==null?nne:function(){return this.querySelector(e)}}function ane(e){typeof e!="function"&&(e=MS(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=new Array(s),u,h,p=0;p<s;++p)(u=i[p])&&(h=e.call(u,u.__data__,p,i))&&("__data__"in u&&(h.__data__=u.__data__),l[p]=h);return new Ii(n,this._parents)}function ine(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sne(){return[]}function wI(e){return e==null?sne:function(){return this.querySelectorAll(e)}}function one(e){return function(){return ine(e.apply(this,arguments))}}function lne(e){typeof e=="function"?e=one(e):e=wI(e);for(var t=this._groups,r=t.length,n=[],a=[],i=0;i<r;++i)for(var s=t[i],l=s.length,u,h=0;h<l;++h)(u=s[h])&&(n.push(e.call(u,u.__data__,h,s)),a.push(u));return new Ii(n,a)}function SI(e){return function(){return this.matches(e)}}function TI(e){return function(t){return t.matches(e)}}var cne=Array.prototype.find;function une(e){return function(){return cne.call(this.children,e)}}function dne(){return this.firstElementChild}function hne(e){return this.select(e==null?dne:une(typeof e=="function"?e:TI(e)))}var pne=Array.prototype.filter;function gne(){return Array.from(this.children)}function fne(e){return function(){return pne.call(this.children,e)}}function mne(e){return this.selectAll(e==null?gne:fne(typeof e=="function"?e:TI(e)))}function yne(e){typeof e!="function"&&(e=SI(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=[],u,h=0;h<s;++h)(u=i[h])&&e.call(u,u.__data__,h,i)&&l.push(u);return new Ii(n,this._parents)}function kI(e){return new Array(e.length)}function bne(){return new Ii(this._enter||this._groups.map(kI),this._parents)}function i0(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}i0.prototype={constructor:i0,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xne(e){return function(){return e}}function vne(e,t,r,n,a,i){for(var s=0,l,u=t.length,h=i.length;s<h;++s)(l=t[s])?(l.__data__=i[s],n[s]=l):r[s]=new i0(e,i[s]);for(;s<u;++s)(l=t[s])&&(a[s]=l)}function wne(e,t,r,n,a,i,s){var l,u,h=new Map,p=t.length,f=i.length,y=new Array(p),b;for(l=0;l<p;++l)(u=t[l])&&(y[l]=b=s.call(u,u.__data__,l,t)+"",h.has(b)?a[l]=u:h.set(b,u));for(l=0;l<f;++l)b=s.call(e,i[l],l,i)+"",(u=h.get(b))?(n[l]=u,u.__data__=i[l],h.delete(b)):r[l]=new i0(e,i[l]);for(l=0;l<p;++l)(u=t[l])&&h.get(y[l])===u&&(a[l]=u)}function Sne(e){return e.__data__}function Tne(e,t){if(!arguments.length)return Array.from(this,Sne);var r=t?wne:vne,n=this._parents,a=this._groups;typeof e!="function"&&(e=xne(e));for(var i=a.length,s=new Array(i),l=new Array(i),u=new Array(i),h=0;h<i;++h){var p=n[h],f=a[h],y=f.length,b=kne(e.call(p,p&&p.__data__,h,n)),x=b.length,v=l[h]=new Array(x),T=s[h]=new Array(x),k=u[h]=new Array(y);r(p,f,v,T,k,b,t);for(var C=0,A=0,P,M;C<x;++C)if(P=v[C]){for(C>=A&&(A=C+1);!(M=T[A])&&++A<x;);P._next=M||null}}return s=new Ii(s,n),s._enter=l,s._exit=u,s}function kne(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ene(){return new Ii(this._exit||this._groups.map(kI),this._parents)}function Cne(e,t,r){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function _ne(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,i=n.length,s=Math.min(a,i),l=new Array(a),u=0;u<s;++u)for(var h=r[u],p=n[u],f=h.length,y=l[u]=new Array(f),b,x=0;x<f;++x)(b=h[x]||p[x])&&(y[x]=b);for(;u<a;++u)l[u]=r[u];return new Ii(l,this._parents)}function Ane(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,i=n[a],s;--a>=0;)(s=n[a])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Nne(e){e||(e=Lne);function t(f,y){return f&&y?e(f.__data__,y.__data__):!f-!y}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var s=r[i],l=s.length,u=a[i]=new Array(l),h,p=0;p<l;++p)(h=s[p])&&(u[p]=h);u.sort(t)}return new Ii(a,this._parents).order()}function Lne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pne(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rne(){return Array.from(this)}function Ine(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var s=n[a];if(s)return s}return null}function Dne(){let e=0;for(const t of this)++e;return e}function Mne(){return!this.node()}function One(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,s=a.length,l;i<s;++i)(l=a[i])&&e.call(l,l.__data__,i,a);return this}function jne(e){return function(){this.removeAttribute(e)}}function Bne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fne(e,t){return function(){this.setAttribute(e,t)}}function zne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Une(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function $ne(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function qne(e,t){var r=iy(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Bne:jne:typeof t=="function"?r.local?$ne:Une:r.local?zne:Fne)(r,t))}function EI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hne(e){return function(){this.style.removeProperty(e)}}function Gne(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Wne(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Vne(e,t,r){return arguments.length>1?this.each((t==null?Hne:typeof t=="function"?Wne:Gne)(e,t,r??"")):gd(this.node(),e)}function gd(e,t){return e.style.getPropertyValue(t)||EI(e).getComputedStyle(e,null).getPropertyValue(t)}function Yne(e){return function(){delete this[e]}}function Qne(e,t){return function(){this[e]=t}}function Kne(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Xne(e,t){return arguments.length>1?this.each((t==null?Yne:typeof t=="function"?Kne:Qne)(e,t)):this.node()[e]}function CI(e){return e.trim().split(/^|\s+/)}function OS(e){return e.classList||new _I(e)}function _I(e){this._node=e,this._names=CI(e.getAttribute("class")||"")}_I.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function AI(e,t){for(var r=OS(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function NI(e,t){for(var r=OS(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Jne(e){return function(){AI(this,e)}}function Zne(e){return function(){NI(this,e)}}function eae(e,t){return function(){(t.apply(this,arguments)?AI:NI)(this,e)}}function tae(e,t){var r=CI(e+"");if(arguments.length<2){for(var n=OS(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?eae:t?Jne:Zne)(r,t))}function rae(){this.textContent=""}function nae(e){return function(){this.textContent=e}}function aae(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function iae(e){return arguments.length?this.each(e==null?rae:(typeof e=="function"?aae:nae)(e)):this.node().textContent}function sae(){this.innerHTML=""}function oae(e){return function(){this.innerHTML=e}}function lae(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function cae(e){return arguments.length?this.each(e==null?sae:(typeof e=="function"?lae:oae)(e)):this.node().innerHTML}function uae(){this.nextSibling&&this.parentNode.appendChild(this)}function dae(){return this.each(uae)}function hae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pae(){return this.each(hae)}function gae(e){var t=typeof e=="function"?e:vI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fae(){return null}function mae(e,t){var r=typeof e=="function"?e:vI(e),n=t==null?fae:typeof t=="function"?t:MS(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function yae(){var e=this.parentNode;e&&e.removeChild(this)}function bae(){return this.each(yae)}function xae(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vae(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wae(e){return this.select(e?vae:xae)}function Sae(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tae(e){return function(t){e.call(this,t,this.__data__)}}function kae(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Eae(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,i;r<a;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function Cae(e,t,r){return function(){var n=this.__on,a,i=Tae(t);if(n){for(var s=0,l=n.length;s<l;++s)if((a=n[s]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=t;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(a):this.__on=[a]}}function _ae(e,t,r){var n=kae(e+""),a,i=n.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,h=l.length,p;u<h;++u)for(a=0,p=l[u];a<i;++a)if((s=n[a]).type===p.type&&s.name===p.name)return p.value}return}for(l=t?Cae:Eae,a=0;a<i;++a)this.each(l(n[a],t,r));return this}function LI(e,t,r){var n=EI(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Aae(e,t){return function(){return LI(this,e,t)}}function Nae(e,t){return function(){return LI(this,e,t.apply(this,arguments))}}function Lae(e,t){return this.each((typeof t=="function"?Nae:Aae)(e,t))}function*Pae(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length,s;a<i;++a)(s=n[a])&&(yield s)}var PI=[null];function Ii(e,t){this._groups=e,this._parents=t}function mg(){return new Ii([[document.documentElement]],PI)}function Rae(){return this}Ii.prototype=mg.prototype={constructor:Ii,select:ane,selectAll:lne,selectChild:hne,selectChildren:mne,filter:yne,data:Tne,enter:bne,exit:Ene,join:Cne,merge:_ne,selection:Rae,order:Ane,sort:Nne,call:Pne,nodes:Rne,node:Ine,size:Dne,empty:Mne,each:One,attr:qne,style:Vne,property:Xne,classed:tae,text:iae,html:cae,raise:dae,lower:pae,append:gae,insert:mae,remove:bae,clone:wae,datum:Sae,on:_ae,dispatch:Lae,[Symbol.iterator]:Pae};function Lr(e){return typeof e=="string"?new Ii([[document.querySelector(e)]],[document.documentElement]):new Ii([[e]],PI)}function jS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function RI(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function yg(){}var zp=.7,s0=1/zp,Zu="\\s*([+-]?\\d+)\\s*",Up="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iae=/^#([0-9a-f]{3,8})$/,Dae=new RegExp(`^rgb\\(${Zu},${Zu},${Zu}\\)$`),Mae=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),Oae=new RegExp(`^rgba\\(${Zu},${Zu},${Zu},${Up}\\)$`),jae=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${Up}\\)$`),Bae=new RegExp(`^hsl\\(${Up},${Ws},${Ws}\\)$`),Fae=new RegExp(`^hsla\\(${Up},${Ws},${Ws},${Up}\\)$`),IA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jS(yg,$p,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:DA,formatHex:DA,formatHex8:zae,formatHsl:Uae,formatRgb:MA,toString:MA});function DA(){return this.rgb().formatHex()}function zae(){return this.rgb().formatHex8()}function Uae(){return II(this).formatHsl()}function MA(){return this.rgb().formatRgb()}function $p(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Iae.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?OA(t):r===3?new pi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Zf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Zf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Dae.exec(e))?new pi(t[1],t[2],t[3],1):(t=Mae.exec(e))?new pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Oae.exec(e))?Zf(t[1],t[2],t[3],t[4]):(t=jae.exec(e))?Zf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bae.exec(e))?FA(t[1],t[2]/100,t[3]/100,1):(t=Fae.exec(e))?FA(t[1],t[2]/100,t[3]/100,t[4]):IA.hasOwnProperty(e)?OA(IA[e]):e==="transparent"?new pi(NaN,NaN,NaN,0):null}function OA(e){return new pi(e>>16&255,e>>8&255,e&255,1)}function Zf(e,t,r,n){return n<=0&&(e=t=r=NaN),new pi(e,t,r,n)}function $ae(e){return e instanceof yg||(e=$p(e)),e?(e=e.rgb(),new pi(e.r,e.g,e.b,e.opacity)):new pi}function Jw(e,t,r,n){return arguments.length===1?$ae(e):new pi(e,t,r,n??1)}function pi(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}jS(pi,Jw,RI(yg,{brighter(e){return e=e==null?s0:Math.pow(s0,e),new pi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zp:Math.pow(zp,e),new pi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pi(xc(this.r),xc(this.g),xc(this.b),o0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jA,formatHex:jA,formatHex8:qae,formatRgb:BA,toString:BA}));function jA(){return`#${pc(this.r)}${pc(this.g)}${pc(this.b)}`}function qae(){return`#${pc(this.r)}${pc(this.g)}${pc(this.b)}${pc((isNaN(this.opacity)?1:this.opacity)*255)}`}function BA(){const e=o0(this.opacity);return`${e===1?"rgb(":"rgba("}${xc(this.r)}, ${xc(this.g)}, ${xc(this.b)}${e===1?")":`, ${e})`}`}function o0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pc(e){return e=xc(e),(e<16?"0":"")+e.toString(16)}function FA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xs(e,t,r,n)}function II(e){if(e instanceof xs)return new xs(e.h,e.s,e.l,e.opacity);if(e instanceof yg||(e=$p(e)),!e)return new xs;if(e instanceof xs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,u=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=u<.5?i+a:2-i-a,s*=60):l=u>0&&u<1?0:s,new xs(s,l,u,e.opacity)}function Hae(e,t,r,n){return arguments.length===1?II(e):new xs(e,t,r,n??1)}function xs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}jS(xs,Hae,RI(yg,{brighter(e){return e=e==null?s0:Math.pow(s0,e),new xs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zp:Math.pow(zp,e),new xs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new pi(Rv(e>=240?e-240:e+120,a,n),Rv(e,a,n),Rv(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new xs(zA(this.h),em(this.s),em(this.l),o0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=o0(this.opacity);return`${e===1?"hsl(":"hsla("}${zA(this.h)}, ${em(this.s)*100}%, ${em(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zA(e){return e=(e||0)%360,e<0?e+360:e}function em(e){return Math.max(0,Math.min(1,e||0))}function Rv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const BS=e=>()=>e;function DI(e,t){return function(r){return e+r*t}}function Gae(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function xye(e,t){var r=t-e;return r?DI(e,r>180||r<-180?r-360*Math.round(r/360):r):BS(isNaN(e)?t:e)}function Wae(e){return(e=+e)==1?MI:function(t,r){return r-t?Gae(t,r,e):BS(isNaN(t)?r:t)}}function MI(e,t){var r=t-e;return r?DI(e,r):BS(isNaN(e)?t:e)}const UA=(function e(t){var r=Wae(t);function n(a,i){var s=r((a=Jw(a)).r,(i=Jw(i)).r),l=r(a.g,i.g),u=r(a.b,i.b),h=MI(a.opacity,i.opacity);return function(p){return a.r=s(p),a.g=l(p),a.b=u(p),a.opacity=h(p),a+""}}return n.gamma=e,n})(1);function vl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Zw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iv=new RegExp(Zw.source,"g");function Vae(e){return function(){return e}}function Yae(e){return function(t){return e(t)+""}}function Qae(e,t){var r=Zw.lastIndex=Iv.lastIndex=0,n,a,i,s=-1,l=[],u=[];for(e=e+"",t=t+"";(n=Zw.exec(e))&&(a=Iv.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,u.push({i:s,x:vl(n,a)})),r=Iv.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?u[0]?Yae(u[0].x):Vae(t):(t=u.length,function(h){for(var p=0,f;p<t;++p)l[(f=u[p]).i]=f.x(h);return l.join("")})}var $A=180/Math.PI,e1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function OI(e,t,r,n,a,i){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*r+t*n)&&(r-=e*u,n-=t*u),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,u/=l),e*n<t*r&&(e=-e,t=-t,u=-u,s=-s),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*$A,skewX:Math.atan(u)*$A,scaleX:s,scaleY:l}}var tm;function Kae(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?e1:OI(t.a,t.b,t.c,t.d,t.e,t.f)}function Xae(e){return e==null||(tm||(tm=document.createElementNS("http://www.w3.org/2000/svg","g")),tm.setAttribute("transform",e),!(e=tm.transform.baseVal.consolidate()))?e1:(e=e.matrix,OI(e.a,e.b,e.c,e.d,e.e,e.f))}function jI(e,t,r,n){function a(h){return h.length?h.pop()+" ":""}function i(h,p,f,y,b,x){if(h!==f||p!==y){var v=b.push("translate(",null,t,null,r);x.push({i:v-4,x:vl(h,f)},{i:v-2,x:vl(p,y)})}else(f||y)&&b.push("translate("+f+t+y+r)}function s(h,p,f,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:f.push(a(f)+"rotate(",null,n)-2,x:vl(h,p)})):p&&f.push(a(f)+"rotate("+p+n)}function l(h,p,f,y){h!==p?y.push({i:f.push(a(f)+"skewX(",null,n)-2,x:vl(h,p)}):p&&f.push(a(f)+"skewX("+p+n)}function u(h,p,f,y,b,x){if(h!==f||p!==y){var v=b.push(a(b)+"scale(",null,",",null,")");x.push({i:v-4,x:vl(h,f)},{i:v-2,x:vl(p,y)})}else(f!==1||y!==1)&&b.push(a(b)+"scale("+f+","+y+")")}return function(h,p){var f=[],y=[];return h=e(h),p=e(p),i(h.translateX,h.translateY,p.translateX,p.translateY,f,y),s(h.rotate,p.rotate,f,y),l(h.skewX,p.skewX,f,y),u(h.scaleX,h.scaleY,p.scaleX,p.scaleY,f,y),h=p=null,function(b){for(var x=-1,v=y.length,T;++x<v;)f[(T=y[x]).i]=T.x(b);return f.join("")}}}var Jae=jI(Kae,"px, ","px)","deg)"),Zae=jI(Xae,", ",")",")"),fd=0,ap=0,Wh=0,BI=1e3,l0,ip,c0=0,_c=0,sy=0,qp=typeof performance=="object"&&performance.now?performance:Date,FI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FS(){return _c||(FI(eie),_c=qp.now()+sy)}function eie(){_c=0}function u0(){this._call=this._time=this._next=null}u0.prototype=zI.prototype={constructor:u0,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?FS():+r)+(t==null?0:+t),!this._next&&ip!==this&&(ip?ip._next=this:l0=this,ip=this),this._call=e,this._time=r,t1()},stop:function(){this._call&&(this._call=null,this._time=1/0,t1())}};function zI(e,t,r){var n=new u0;return n.restart(e,t,r),n}function tie(){FS(),++fd;for(var e=l0,t;e;)(t=_c-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fd}function qA(){_c=(c0=qp.now())+sy,fd=ap=0;try{tie()}finally{fd=0,nie(),_c=0}}function rie(){var e=qp.now(),t=e-c0;t>BI&&(sy-=t,c0=e)}function nie(){for(var e,t=l0,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:l0=r);ip=e,t1(n)}function t1(e){if(!fd){ap&&(ap=clearTimeout(ap));var t=e-_c;t>24?(e<1/0&&(ap=setTimeout(qA,e-qp.now()-sy)),Wh&&(Wh=clearInterval(Wh))):(Wh||(c0=qp.now(),Wh=setInterval(rie,BI)),fd=1,FI(qA))}}function HA(e,t,r){var n=new u0;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var aie=xI("start","end","cancel","interrupt"),iie=[],UI=0,GA=1,r1=2,Em=3,WA=4,n1=5,Cm=6;function oy(e,t,r,n,a,i){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;sie(e,r,{name:t,index:n,group:a,on:aie,tween:iie,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:UI})}function zS(e,t){var r=Cs(e,t);if(r.state>UI)throw new Error("too late; already scheduled");return r}function eo(e,t){var r=Cs(e,t);if(r.state>Em)throw new Error("too late; already running");return r}function Cs(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function sie(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=zI(i,0,r.time);function i(h){r.state=GA,r.timer.restart(s,r.delay,r.time),r.delay<=h&&s(h-r.delay)}function s(h){var p,f,y,b;if(r.state!==GA)return u();for(p in n)if(b=n[p],b.name===r.name){if(b.state===Em)return HA(s);b.state===WA?(b.state=Cm,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[p]):+p<t&&(b.state=Cm,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[p])}if(HA(function(){r.state===Em&&(r.state=WA,r.timer.restart(l,r.delay,r.time),l(h))}),r.state=r1,r.on.call("start",e,e.__data__,r.index,r.group),r.state===r1){for(r.state=Em,a=new Array(y=r.tween.length),p=0,f=-1;p<y;++p)(b=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=b);a.length=f+1}}function l(h){for(var p=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(u),r.state=n1,1),f=-1,y=a.length;++f<y;)a[f].call(e,p);r.state===n1&&(r.on.call("end",e,e.__data__,r.index,r.group),u())}function u(){r.state=Cm,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function oie(e,t){var r=e.__transition,n,a,i=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){i=!1;continue}a=n.state>r1&&n.state<n1,n.state=Cm,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}i&&delete e.__transition}}function lie(e){return this.each(function(){oie(this,e)})}function cie(e,t){var r,n;return function(){var a=eo(this,e),i=a.tween;if(i!==r){n=r=i;for(var s=0,l=n.length;s<l;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}a.tween=n}}function uie(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=eo(this,e),s=i.tween;if(s!==n){a=(n=s).slice();for(var l={name:t,value:r},u=0,h=a.length;u<h;++u)if(a[u].name===t){a[u]=l;break}u===h&&a.push(l)}i.tween=a}}function die(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Cs(this.node(),r).tween,a=0,i=n.length,s;a<i;++a)if((s=n[a]).name===e)return s.value;return null}return this.each((t==null?cie:uie)(r,e,t))}function US(e,t,r){var n=e._id;return e.each(function(){var a=eo(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Cs(a,n).value[t]}}function $I(e,t){var r;return(typeof t=="number"?vl:t instanceof $p?UA:(r=$p(t))?(t=r,UA):Qae)(e,t)}function hie(e){return function(){this.removeAttribute(e)}}function pie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gie(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttribute(e);return s===a?null:s===n?i:i=t(n=s,r)}}function fie(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===n?i:i=t(n=s,r)}}function mie(e,t,r){var n,a,i;return function(){var s,l=r(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===n&&u===a?i:(a=u,i=t(n=s,l)))}}function yie(e,t,r){var n,a,i;return function(){var s,l=r(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===n&&u===a?i:(a=u,i=t(n=s,l)))}}function bie(e,t){var r=iy(e),n=r==="transform"?Zae:$I;return this.attrTween(e,typeof t=="function"?(r.local?yie:mie)(r,n,US(this,"attr."+e,t)):t==null?(r.local?pie:hie)(r):(r.local?fie:gie)(r,n,t))}function xie(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function vie(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function wie(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&vie(e,i)),r}return a._value=t,a}function Sie(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&xie(e,i)),r}return a._value=t,a}function Tie(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=iy(e);return this.tween(r,(n.local?wie:Sie)(n,t))}function kie(e,t){return function(){zS(this,e).delay=+t.apply(this,arguments)}}function Eie(e,t){return t=+t,function(){zS(this,e).delay=t}}function Cie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kie:Eie)(t,e)):Cs(this.node(),t).delay}function _ie(e,t){return function(){eo(this,e).duration=+t.apply(this,arguments)}}function Aie(e,t){return t=+t,function(){eo(this,e).duration=t}}function Nie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_ie:Aie)(t,e)):Cs(this.node(),t).duration}function Lie(e,t){if(typeof t!="function")throw new Error;return function(){eo(this,e).ease=t}}function Pie(e){var t=this._id;return arguments.length?this.each(Lie(t,e)):Cs(this.node(),t).ease}function Rie(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;eo(this,e).ease=r}}function Iie(e){if(typeof e!="function")throw new Error;return this.each(Rie(this._id,e))}function Die(e){typeof e!="function"&&(e=SI(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=[],u,h=0;h<s;++h)(u=i[h])&&e.call(u,u.__data__,h,i)&&l.push(u);return new Mo(n,this._parents,this._name,this._id)}function Mie(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,i=Math.min(n,a),s=new Array(n),l=0;l<i;++l)for(var u=t[l],h=r[l],p=u.length,f=s[l]=new Array(p),y,b=0;b<p;++b)(y=u[b]||h[b])&&(f[b]=y);for(;l<n;++l)s[l]=t[l];return new Mo(s,this._parents,this._name,this._id)}function Oie(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function jie(e,t,r){var n,a,i=Oie(t)?zS:eo;return function(){var s=i(this,e),l=s.on;l!==n&&(a=(n=l).copy()).on(t,r),s.on=a}}function Bie(e,t){var r=this._id;return arguments.length<2?Cs(this.node(),r).on.on(e):this.each(jie(r,e,t))}function Fie(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function zie(){return this.on("end.remove",Fie(this._id))}function Uie(e){var t=this._name,r=this._id;typeof e!="function"&&(e=MS(e));for(var n=this._groups,a=n.length,i=new Array(a),s=0;s<a;++s)for(var l=n[s],u=l.length,h=i[s]=new Array(u),p,f,y=0;y<u;++y)(p=l[y])&&(f=e.call(p,p.__data__,y,l))&&("__data__"in p&&(f.__data__=p.__data__),h[y]=f,oy(h[y],t,r,y,h,Cs(p,r)));return new Mo(i,this._parents,t,r)}function $ie(e){var t=this._name,r=this._id;typeof e!="function"&&(e=wI(e));for(var n=this._groups,a=n.length,i=[],s=[],l=0;l<a;++l)for(var u=n[l],h=u.length,p,f=0;f<h;++f)if(p=u[f]){for(var y=e.call(p,p.__data__,f,u),b,x=Cs(p,r),v=0,T=y.length;v<T;++v)(b=y[v])&&oy(b,t,r,v,y,x);i.push(y),s.push(p)}return new Mo(i,s,t,r)}var qie=mg.prototype.constructor;function Hie(){return new qie(this._groups,this._parents)}function Gie(e,t){var r,n,a;return function(){var i=gd(this,e),s=(this.style.removeProperty(e),gd(this,e));return i===s?null:i===r&&s===n?a:a=t(r=i,n=s)}}function qI(e){return function(){this.style.removeProperty(e)}}function Wie(e,t,r){var n,a=r+"",i;return function(){var s=gd(this,e);return s===a?null:s===n?i:i=t(n=s,r)}}function Vie(e,t,r){var n,a,i;return function(){var s=gd(this,e),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),gd(this,e))),s===u?null:s===n&&u===a?i:(a=u,i=t(n=s,l))}}function Yie(e,t){var r,n,a,i="style."+t,s="end."+i,l;return function(){var u=eo(this,e),h=u.on,p=u.value[i]==null?l||(l=qI(t)):void 0;(h!==r||a!==p)&&(n=(r=h).copy()).on(s,a=p),u.on=n}}function Qie(e,t,r){var n=(e+="")=="transform"?Jae:$I;return t==null?this.styleTween(e,Gie(e,n)).on("end.style."+e,qI(e)):typeof t=="function"?this.styleTween(e,Vie(e,n,US(this,"style."+e,t))).each(Yie(this._id,e)):this.styleTween(e,Wie(e,n,t),r).on("end.style."+e,null)}function Kie(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Xie(e,t,r){var n,a;function i(){var s=t.apply(this,arguments);return s!==a&&(n=(a=s)&&Kie(e,s,r)),n}return i._value=t,i}function Jie(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Xie(e,t,r??""))}function Zie(e){return function(){this.textContent=e}}function ese(e){return function(){var t=e(this);this.textContent=t??""}}function tse(e){return this.tween("text",typeof e=="function"?ese(US(this,"text",e)):Zie(e==null?"":e+""))}function rse(e){return function(t){this.textContent=e.call(this,t)}}function nse(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&rse(a)),t}return n._value=e,n}function ase(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nse(e))}function ise(){for(var e=this._name,t=this._id,r=HI(),n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],l=s.length,u,h=0;h<l;++h)if(u=s[h]){var p=Cs(u,t);oy(u,e,r,h,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Mo(n,this._parents,e,r)}function sse(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(i,s){var l={value:s},u={value:function(){--a===0&&i()}};r.each(function(){var h=eo(this,n),p=h.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),h.on=t}),a===0&&i()})}var ose=0;function Mo(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function HI(){return++ose}var Co=mg.prototype;Mo.prototype={constructor:Mo,select:Uie,selectAll:$ie,selectChild:Co.selectChild,selectChildren:Co.selectChildren,filter:Die,merge:Mie,selection:Hie,transition:ise,call:Co.call,nodes:Co.nodes,node:Co.node,size:Co.size,empty:Co.empty,each:Co.each,on:Bie,attr:bie,attrTween:Tie,style:Qie,styleTween:Jie,text:tse,textTween:ase,remove:zie,tween:die,delay:Cie,duration:Nie,ease:Pie,easeVarying:Iie,end:sse,[Symbol.iterator]:Co[Symbol.iterator]};function lse(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cse={time:null,delay:0,duration:250,ease:lse};function use(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function dse(e){var t,r;e instanceof Mo?(t=e._id,e=e._name):(t=HI(),(r=cse).time=FS(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],l=s.length,u,h=0;h<l;++h)(u=s[h])&&oy(u,e,t,h,s,r||use(u,t));return new Mo(n,this._parents,e,t)}mg.prototype.interrupt=lie;mg.prototype.transition=dse;const a1=Math.PI,i1=2*a1,sc=1e-6,hse=i1-sc;function GI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function pse(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return GI;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class gse{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?GI:pse(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,u=n-t,h=a-r,p=s-t,f=l-r,y=p*p+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>sc)if(!(Math.abs(f*u-h*p)>sc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-s,x=a-l,v=u*u+h*h,T=b*b+x*x,k=Math.sqrt(v),C=Math.sqrt(y),A=i*Math.tan((a1-Math.acos((v+y-T)/(2*k*C)))/2),P=A/C,M=A/k;Math.abs(P-1)>sc&&this._append`L${t+P*p},${r+P*f}`,this._append`A${i},${i},0,0,${+(f*b>p*x)},${this._x1=t+M*u},${this._y1=r+M*h}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),u=n*Math.sin(a),h=t+l,p=r+u,f=1^s,y=s?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>sc||Math.abs(this._y1-p)>sc)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%i1+i1),y>hse?this._append`A${n},${n},0,1,${f},${t-l},${r-u}A${n},${n},0,1,${f},${this._x1=h},${this._y1=p}`:y>sc&&this._append`A${n},${n},0,${+(y>=a1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Mu(e){return function(){return e}}const vye=Math.abs,wye=Math.atan2,Sye=Math.cos,Tye=Math.max,kye=Math.min,Eye=Math.sin,Cye=Math.sqrt,VA=1e-12,$S=Math.PI,YA=$S/2,_ye=2*$S;function Aye(e){return e>1?0:e<-1?$S:Math.acos(e)}function Nye(e){return e>=1?YA:e<=-1?-YA:Math.asin(e)}function fse(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new gse(t)}function mse(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WI(e){this._context=e}WI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function d0(e){return new WI(e)}function yse(e){return e[0]}function bse(e){return e[1]}function xse(e,t){var r=Mu(!0),n=null,a=d0,i=null,s=fse(l);e=typeof e=="function"?e:e===void 0?yse:Mu(e),t=typeof t=="function"?t:t===void 0?bse:Mu(t);function l(u){var h,p=(u=mse(u)).length,f,y=!1,b;for(n==null&&(i=a(b=s())),h=0;h<=p;++h)!(h<p&&r(f=u[h],h,u))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(f,h,u),+t(f,h,u));if(b)return i=null,b+""||null}return l.x=function(u){return arguments.length?(e=typeof u=="function"?u:Mu(+u),l):e},l.y=function(u){return arguments.length?(t=typeof u=="function"?u:Mu(+u),l):t},l.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Mu(!!u),l):r},l.curve=function(u){return arguments.length?(a=u,n!=null&&(i=a(n)),l):a},l.context=function(u){return arguments.length?(u==null?n=i=null:i=a(n=u),l):n},l}class VI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function YI(e){return new VI(e,!0)}function QI(e){return new VI(e,!1)}function _l(){}function h0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ly(e){this._context=e}ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _m(e){return new ly(e)}function KI(e){this._context=e}KI.prototype={areaStart:_l,areaEnd:_l,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vse(e){return new KI(e)}function XI(e){this._context=e}XI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:h0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wse(e){return new XI(e)}function JI(e,t){this._basis=new ly(e),this._beta=t}JI.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],a=t[0],i=e[r]-n,s=t[r]-a,l=-1,u;++l<=r;)u=l/r,this._basis.point(this._beta*e[l]+(1-this._beta)*(n+u*i),this._beta*t[l]+(1-this._beta)*(a+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Sse=(function e(t){function r(n){return t===1?new ly(n):new JI(n,t)}return r.beta=function(n){return e(+n)},r})(.85);function p0(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function qS(e,t){this._context=e,this._k=(1-t)/6}qS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:p0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:p0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZI=(function e(t){function r(n){return new qS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function HS(e,t){this._context=e,this._k=(1-t)/6}HS.prototype={areaStart:_l,areaEnd:_l,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:p0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Tse=(function e(t){function r(n){return new HS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function GS(e,t){this._context=e,this._k=(1-t)/6}GS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:p0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kse=(function e(t){function r(n){return new GS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function WS(e,t,r){var n=e._x1,a=e._y1,i=e._x2,s=e._y2;if(e._l01_a>VA){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,a=(a*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>VA){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*h+e._x1*e._l23_2a-t*e._l12_2a)/p,s=(s*h+e._y1*e._l23_2a-r*e._l12_2a)/p}e._context.bezierCurveTo(n,a,i,s,e._x2,e._y2)}function eD(e,t){this._context=e,this._alpha=t}eD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:WS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tD=(function e(t){function r(n){return t?new eD(n,t):new qS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function rD(e,t){this._context=e,this._alpha=t}rD.prototype={areaStart:_l,areaEnd:_l,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:WS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ese=(function e(t){function r(n){return t?new rD(n,t):new HS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function nD(e,t){this._context=e,this._alpha=t}nD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:WS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Cse=(function e(t){function r(n){return t?new nD(n,t):new GS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function aD(e){this._context=e}aD.prototype={areaStart:_l,areaEnd:_l,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _se(e){return new aD(e)}function QA(e){return e<0?-1:1}function KA(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(QA(i)+QA(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function XA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Dv(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function g0(e){this._context=e}g0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Dv(this,this._t0,XA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Dv(this,XA(this,r=KA(this,e,t)),r);break;default:Dv(this,this._t0,r=KA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iD(e){this._context=new sD(e)}(iD.prototype=Object.create(g0.prototype)).point=function(e,t){g0.prototype.point.call(this,t,e)};function sD(e){this._context=e}sD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function oD(e){return new g0(e)}function lD(e){return new iD(e)}function cD(e){this._context=e}cD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=JA(e),a=JA(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function JA(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function uD(e){return new cD(e)}function cy(e,t){this._context=e,this._t=t}cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function dD(e){return new cy(e,.5)}function hD(e){return new cy(e,0)}function pD(e){return new cy(e,1)}function sp(e,t,r){this.k=e,this.x=t,this.y=r}sp.prototype={constructor:sp,scale:function(e){return e===1?this:new sp(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new sp(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sp.prototype;var Ase=N(e=>{const{securityLevel:t}=zr();let r=Lr("body");if(t==="sandbox"){const i=Lr(`#i${e}`).node()?.contentDocument??document;r=Lr(i.body)}return r.select(`#${e}`)},"selectSvgElement");function VS(e){return typeof e>"u"||e===null}N(VS,"isNothing");function gD(e){return typeof e=="object"&&e!==null}N(gD,"isObject");function fD(e){return Array.isArray(e)?e:VS(e)?[]:[e]}N(fD,"toArray");function mD(e,t){var r,n,a,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)a=i[r],e[a]=t[a];return e}N(mD,"extend");function yD(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}N(yD,"repeat");function bD(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}N(bD,"isNegativeZero");var Nse=VS,Lse=gD,Pse=fD,Rse=yD,Ise=bD,Dse=mD,na={isNothing:Nse,isObject:Lse,toArray:Pse,repeat:Rse,isNegativeZero:Ise,extend:Dse};function YS(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}N(YS,"formatError");function md(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=YS(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}N(md,"YAMLException$1");md.prototype=Object.create(Error.prototype);md.prototype.constructor=md;md.prototype.toString=N(function(t){return this.name+": "+YS(this,t)},"toString");var hi=md;function Am(e,t,r,n,a){var i="",s="",l=Math.floor(a/2)-1;return n-t>l&&(i=" ... ",t=n-l+i.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:i+e.slice(t,r).replace(/\t/g,"→")+s,pos:n-t+i.length}}N(Am,"getLine");function Nm(e,t){return na.repeat(" ",t-e.length)+e}N(Nm,"padStart");function xD(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],a=[],i,s=-1;i=r.exec(e.buffer);)a.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,h,p=Math.min(e.line+t.linesAfter,a.length).toString().length,f=t.maxLength-(t.indent+p+3);for(u=1;u<=t.linesBefore&&!(s-u<0);u++)h=Am(e.buffer,n[s-u],a[s-u],e.position-(n[s]-n[s-u]),f),l=na.repeat(" ",t.indent)+Nm((e.line-u+1).toString(),p)+" | "+h.str+`
`+l;for(h=Am(e.buffer,n[s],a[s],e.position,f),l+=na.repeat(" ",t.indent)+Nm((e.line+1).toString(),p)+" | "+h.str+`
`,l+=na.repeat("-",t.indent+p+3+h.pos)+`^
`,u=1;u<=t.linesAfter&&!(s+u>=a.length);u++)h=Am(e.buffer,n[s+u],a[s+u],e.position-(n[s]-n[s+u]),f),l+=na.repeat(" ",t.indent)+Nm((e.line+u+1).toString(),p)+" | "+h.str+`
`;return l.replace(/\n$/,"")}N(xD,"makeSnippet");var Mse=xD,Ose=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],jse=["scalar","sequence","mapping"];function vD(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}N(vD,"compileStyleAliases");function wD(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Ose.indexOf(r)===-1)throw new hi('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=vD(t.styleAliases||null),jse.indexOf(this.kind)===-1)throw new hi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}N(wD,"Type$1");var Da=wD;function s1(e,t){var r=[];return e[t].forEach(function(n){var a=r.length;r.forEach(function(i,s){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(a=s)}),r[a]=n}),r}N(s1,"compileList");function SD(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(N(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}N(SD,"compileMap");function f0(e){return this.extend(e)}N(f0,"Schema$1");f0.prototype.extend=N(function(t){var r=[],n=[];if(t instanceof Da)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new hi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof Da))throw new hi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new hi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new hi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof Da))throw new hi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(f0.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=s1(a,"implicit"),a.compiledExplicit=s1(a,"explicit"),a.compiledTypeMap=SD(a.compiledImplicit,a.compiledExplicit),a},"extend");var Bse=f0,Fse=new Da("tag:yaml.org,2002:str",{kind:"scalar",construct:N(function(e){return e!==null?e:""},"construct")}),zse=new Da("tag:yaml.org,2002:seq",{kind:"sequence",construct:N(function(e){return e!==null?e:[]},"construct")}),Use=new Da("tag:yaml.org,2002:map",{kind:"mapping",construct:N(function(e){return e!==null?e:{}},"construct")}),$se=new Bse({explicit:[Fse,zse,Use]});function TD(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}N(TD,"resolveYamlNull");function kD(){return null}N(kD,"constructYamlNull");function ED(e){return e===null}N(ED,"isNull");var qse=new Da("tag:yaml.org,2002:null",{kind:"scalar",resolve:TD,construct:kD,predicate:ED,represent:{canonical:N(function(){return"~"},"canonical"),lowercase:N(function(){return"null"},"lowercase"),uppercase:N(function(){return"NULL"},"uppercase"),camelcase:N(function(){return"Null"},"camelcase"),empty:N(function(){return""},"empty")},defaultStyle:"lowercase"});function CD(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}N(CD,"resolveYamlBoolean");function _D(e){return e==="true"||e==="True"||e==="TRUE"}N(_D,"constructYamlBoolean");function AD(e){return Object.prototype.toString.call(e)==="[object Boolean]"}N(AD,"isBoolean");var Hse=new Da("tag:yaml.org,2002:bool",{kind:"scalar",resolve:CD,construct:_D,predicate:AD,represent:{lowercase:N(function(e){return e?"true":"false"},"lowercase"),uppercase:N(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:N(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function ND(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}N(ND,"isHexCode");function LD(e){return 48<=e&&e<=55}N(LD,"isOctCode");function PD(e){return 48<=e&&e<=57}N(PD,"isDecCode");function RD(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!ND(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!LD(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!PD(e.charCodeAt(r)))return!1;n=!0}return!(!n||a==="_")}N(RD,"resolveYamlInteger");function ID(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}N(ID,"constructYamlInteger");function DD(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!na.isNegativeZero(e)}N(DD,"isInteger");var Gse=new Da("tag:yaml.org,2002:int",{kind:"scalar",resolve:RD,construct:ID,predicate:DD,represent:{binary:N(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:N(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:N(function(e){return e.toString(10)},"decimal"),hexadecimal:N(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Wse=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function MD(e){return!(e===null||!Wse.test(e)||e[e.length-1]==="_")}N(MD,"resolveYamlFloat");function OD(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}N(OD,"constructYamlFloat");var Vse=/^[-+]?[0-9]+e/;function jD(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(na.isNegativeZero(e))return"-0.0";return r=e.toString(10),Vse.test(r)?r.replace("e",".e"):r}N(jD,"representYamlFloat");function BD(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||na.isNegativeZero(e))}N(BD,"isFloat");var Yse=new Da("tag:yaml.org,2002:float",{kind:"scalar",resolve:MD,construct:OD,predicate:BD,represent:jD,defaultStyle:"lowercase"}),FD=$se.extend({implicit:[qse,Hse,Gse,Yse]}),Qse=FD,zD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),UD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function $D(e){return e===null?!1:zD.exec(e)!==null||UD.exec(e)!==null}N($D,"resolveYamlTimestamp");function qD(e){var t,r,n,a,i,s,l,u=0,h=null,p,f,y;if(t=zD.exec(e),t===null&&(t=UD.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(i=+t[4],s=+t[5],l=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(p=+t[10],f=+(t[11]||0),h=(p*60+f)*6e4,t[9]==="-"&&(h=-h)),y=new Date(Date.UTC(r,n,a,i,s,l,u)),h&&y.setTime(y.getTime()-h),y}N(qD,"constructYamlTimestamp");function HD(e){return e.toISOString()}N(HD,"representYamlTimestamp");var Kse=new Da("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:$D,construct:qD,instanceOf:Date,represent:HD});function GD(e){return e==="<<"||e===null}N(GD,"resolveYamlMerge");var Xse=new Da("tag:yaml.org,2002:merge",{kind:"scalar",resolve:GD}),QS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function WD(e){if(e===null)return!1;var t,r,n=0,a=e.length,i=QS;for(r=0;r<a;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}N(WD,"resolveYamlBinary");function VD(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,i=QS,s=0,l=[];for(t=0;t<a;t++)t%4===0&&t&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|i.indexOf(n.charAt(t));return r=a%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}N(VD,"constructYamlBinary");function YD(e){var t="",r=0,n,a,i=e.length,s=QS;for(n=0;n<i;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return a=i%3,a===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):a===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):a===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}N(YD,"representYamlBinary");function QD(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}N(QD,"isBinary");var Jse=new Da("tag:yaml.org,2002:binary",{kind:"scalar",resolve:WD,construct:VD,predicate:QD,represent:YD}),Zse=Object.prototype.hasOwnProperty,eoe=Object.prototype.toString;function KD(e){if(e===null)return!0;var t=[],r,n,a,i,s,l=e;for(r=0,n=l.length;r<n;r+=1){if(a=l[r],s=!1,eoe.call(a)!=="[object Object]")return!1;for(i in a)if(Zse.call(a,i))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}N(KD,"resolveYamlOmap");function XD(e){return e!==null?e:[]}N(XD,"constructYamlOmap");var toe=new Da("tag:yaml.org,2002:omap",{kind:"sequence",resolve:KD,construct:XD}),roe=Object.prototype.toString;function JD(e){if(e===null)return!0;var t,r,n,a,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],roe.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;i[t]=[a[0],n[a[0]]]}return!0}N(JD,"resolveYamlPairs");function ZD(e){if(e===null)return[];var t,r,n,a,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],a=Object.keys(n),i[t]=[a[0],n[a[0]]];return i}N(ZD,"constructYamlPairs");var noe=new Da("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:JD,construct:ZD}),aoe=Object.prototype.hasOwnProperty;function eM(e){if(e===null)return!0;var t,r=e;for(t in r)if(aoe.call(r,t)&&r[t]!==null)return!1;return!0}N(eM,"resolveYamlSet");function tM(e){return e!==null?e:{}}N(tM,"constructYamlSet");var ioe=new Da("tag:yaml.org,2002:set",{kind:"mapping",resolve:eM,construct:tM}),rM=Qse.extend({implicit:[Kse,Xse],explicit:[Jse,toe,noe,ioe]}),Al=Object.prototype.hasOwnProperty,m0=1,nM=2,aM=3,y0=4,Mv=1,soe=2,ZA=3,ooe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,loe=/[\x85\u2028\u2029]/,coe=/[,\[\]\{\}]/,iM=/^(?:!|!!|![a-z\-]+!)$/i,sM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function o1(e){return Object.prototype.toString.call(e)}N(o1,"_class");function Ss(e){return e===10||e===13}N(Ss,"is_EOL");function Cl(e){return e===9||e===32}N(Cl,"is_WHITE_SPACE");function Ka(e){return e===9||e===32||e===10||e===13}N(Ka,"is_WS_OR_EOL");function gc(e){return e===44||e===91||e===93||e===123||e===125}N(gc,"is_FLOW_INDICATOR");function oM(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}N(oM,"fromHexCode");function lM(e){return e===120?2:e===117?4:e===85?8:0}N(lM,"escapedHexLen");function cM(e){return 48<=e&&e<=57?e-48:-1}N(cM,"fromDecimalCode");function l1(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}N(l1,"simpleEscapeSequence");function uM(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}N(uM,"charFromCodepoint");var dM=new Array(256),hM=new Array(256);for(nc=0;nc<256;nc++)dM[nc]=l1(nc)?1:0,hM[nc]=l1(nc);var nc;function pM(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||rM,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}N(pM,"State$1");function KS(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Mse(r),new hi(t,r)}N(KS,"generateError");function Dt(e,t){throw KS(e,t)}N(Dt,"throwError");function Hp(e,t){e.onWarning&&e.onWarning.call(null,KS(e,t))}N(Hp,"throwWarning");var eN={YAML:N(function(t,r,n){var a,i,s;t.version!==null&&Dt(t,"duplication of %YAML directive"),n.length!==1&&Dt(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&Dt(t,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),s=parseInt(a[2],10),i!==1&&Dt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Hp(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:N(function(t,r,n){var a,i;n.length!==2&&Dt(t,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],iM.test(a)||Dt(t,"ill-formed tag handle (first argument) of the TAG directive"),Al.call(t.tagMap,a)&&Dt(t,'there is a previously declared suffix for "'+a+'" tag handle'),sM.test(i)||Dt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Dt(t,"tag prefix is malformed: "+i)}t.tagMap[a]=i},"handleTagDirective")};function Io(e,t,r,n){var a,i,s,l;if(t<r){if(l=e.input.slice(t,r),n)for(a=0,i=l.length;a<i;a+=1)s=l.charCodeAt(a),s===9||32<=s&&s<=1114111||Dt(e,"expected valid JSON character");else ooe.test(l)&&Dt(e,"the stream contains non-printable characters");e.result+=l}}N(Io,"captureSegment");function c1(e,t,r,n){var a,i,s,l;for(na.isObject(r)||Dt(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),s=0,l=a.length;s<l;s+=1)i=a[s],Al.call(t,i)||(t[i]=r[i],n[i]=!0)}N(c1,"mergeMappings");function fc(e,t,r,n,a,i,s,l,u){var h,p;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),h=0,p=a.length;h<p;h+=1)Array.isArray(a[h])&&Dt(e,"nested arrays are not supported inside keys"),typeof a=="object"&&o1(a[h])==="[object Object]"&&(a[h]="[object Object]");if(typeof a=="object"&&o1(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(h=0,p=i.length;h<p;h+=1)c1(e,t,i[h],r);else c1(e,t,i,r);else!e.json&&!Al.call(r,a)&&Al.call(t,a)&&(e.line=s||e.line,e.lineStart=l||e.lineStart,e.position=u||e.position,Dt(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[a]=i,delete r[a];return t}N(fc,"storeMappingPair");function uy(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Dt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}N(uy,"readLineBreak");function On(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Cl(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Ss(a))for(uy(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Hp(e,"deficient indentation"),n}N(On,"skipSeparationSpace");function bg(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Ka(r)))}N(bg,"testDocumentSeparator");function dy(e,t){t===1?e.result+=" ":t>1&&(e.result+=na.repeat(`
`,t-1))}N(dy,"writeFoldedLines");function gM(e,t,r){var n,a,i,s,l,u,h,p,f=e.kind,y=e.result,b;if(b=e.input.charCodeAt(e.position),Ka(b)||gc(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(a=e.input.charCodeAt(e.position+1),Ka(a)||r&&gc(a)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,l=!1;b!==0;){if(b===58){if(a=e.input.charCodeAt(e.position+1),Ka(a)||r&&gc(a))break}else if(b===35){if(n=e.input.charCodeAt(e.position-1),Ka(n))break}else{if(e.position===e.lineStart&&bg(e)||r&&gc(b))break;if(Ss(b))if(u=e.line,h=e.lineStart,p=e.lineIndent,On(e,!1,-1),e.lineIndent>=t){l=!0,b=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=u,e.lineStart=h,e.lineIndent=p;break}}l&&(Io(e,i,s,!1),dy(e,e.line-u),i=s=e.position,l=!1),Cl(b)||(s=e.position+1),b=e.input.charCodeAt(++e.position)}return Io(e,i,s,!1),e.result?!0:(e.kind=f,e.result=y,!1)}N(gM,"readPlainScalar");function fM(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Io(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else Ss(r)?(Io(e,n,a,!0),dy(e,On(e,!1,t)),n=a=e.position):e.position===e.lineStart&&bg(e)?Dt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Dt(e,"unexpected end of the stream within a single quoted scalar")}N(fM,"readSingleQuotedScalar");function mM(e,t){var r,n,a,i,s,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return Io(e,r,e.position,!0),e.position++,!0;if(l===92){if(Io(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),Ss(l))On(e,!1,t);else if(l<256&&dM[l])e.result+=hM[l],e.position++;else if((s=lM(l))>0){for(a=s,i=0;a>0;a--)l=e.input.charCodeAt(++e.position),(s=oM(l))>=0?i=(i<<4)+s:Dt(e,"expected hexadecimal character");e.result+=uM(i),e.position++}else Dt(e,"unknown escape sequence");r=n=e.position}else Ss(l)?(Io(e,r,n,!0),dy(e,On(e,!1,t)),r=n=e.position):e.position===e.lineStart&&bg(e)?Dt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Dt(e,"unexpected end of the stream within a double quoted scalar")}N(mM,"readDoubleQuotedScalar");function yM(e,t){var r=!0,n,a,i,s=e.tag,l,u=e.anchor,h,p,f,y,b,x=Object.create(null),v,T,k,C;if(C=e.input.charCodeAt(e.position),C===91)p=93,b=!1,l=[];else if(C===123)p=125,b=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),C=e.input.charCodeAt(++e.position);C!==0;){if(On(e,!0,t),C=e.input.charCodeAt(e.position),C===p)return e.position++,e.tag=s,e.anchor=u,e.kind=b?"mapping":"sequence",e.result=l,!0;r?C===44&&Dt(e,"expected the node content, but found ','"):Dt(e,"missed comma between flow collection entries"),T=v=k=null,f=y=!1,C===63&&(h=e.input.charCodeAt(e.position+1),Ka(h)&&(f=y=!0,e.position++,On(e,!0,t))),n=e.line,a=e.lineStart,i=e.position,Ac(e,t,m0,!1,!0),T=e.tag,v=e.result,On(e,!0,t),C=e.input.charCodeAt(e.position),(y||e.line===n)&&C===58&&(f=!0,C=e.input.charCodeAt(++e.position),On(e,!0,t),Ac(e,t,m0,!1,!0),k=e.result),b?fc(e,l,x,T,v,k,n,a,i):f?l.push(fc(e,null,x,T,v,k,n,a,i)):l.push(v),On(e,!0,t),C=e.input.charCodeAt(e.position),C===44?(r=!0,C=e.input.charCodeAt(++e.position)):r=!1}Dt(e,"unexpected end of the stream within a flow collection")}N(yM,"readFlowCollection");function bM(e,t){var r,n,a=Mv,i=!1,s=!1,l=t,u=0,h=!1,p,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Mv===a?a=f===43?ZA:soe:Dt(e,"repeat of a chomping mode identifier");else if((p=cM(f))>=0)p===0?Dt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Dt(e,"repeat of an indentation width identifier"):(l=t+p-1,s=!0);else break;if(Cl(f)){do f=e.input.charCodeAt(++e.position);while(Cl(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ss(f)&&f!==0)}for(;f!==0;){for(uy(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<l)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>l&&(l=e.lineIndent),Ss(f)){u++;continue}if(e.lineIndent<l){a===ZA?e.result+=na.repeat(`
`,i?1+u:u):a===Mv&&i&&(e.result+=`
`);break}for(n?Cl(f)?(h=!0,e.result+=na.repeat(`
`,i?1+u:u)):h?(h=!1,e.result+=na.repeat(`
`,u+1)):u===0?i&&(e.result+=" "):e.result+=na.repeat(`
`,u):e.result+=na.repeat(`
`,i?1+u:u),i=!0,s=!0,u=0,r=e.position;!Ss(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Io(e,r,e.position,!1)}return!0}N(bM,"readBlockScalar");function u1(e,t){var r,n=e.tag,a=e.anchor,i=[],s,l=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Dt(e,"tab characters must not be used in indentation")),!(u!==45||(s=e.input.charCodeAt(e.position+1),!Ka(s))));){if(l=!0,e.position++,On(e,!0,-1)&&e.lineIndent<=t){i.push(null),u=e.input.charCodeAt(e.position);continue}if(r=e.line,Ac(e,t,aM,!1,!0),i.push(e.result),On(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&u!==0)Dt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=i,!0):!1}N(u1,"readBlockSequence");function xM(e,t,r){var n,a,i,s,l,u,h=e.tag,p=e.anchor,f={},y=Object.create(null),b=null,x=null,v=null,T=!1,k=!1,C;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),C=e.input.charCodeAt(e.position);C!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Dt(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(C===63||C===58)&&Ka(n))C===63?(T&&(fc(e,f,y,b,x,null,s,l,u),b=x=v=null),k=!0,T=!0,a=!0):T?(T=!1,a=!0):Dt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,C=n;else{if(s=e.line,l=e.lineStart,u=e.position,!Ac(e,r,nM,!1,!0))break;if(e.line===i){for(C=e.input.charCodeAt(e.position);Cl(C);)C=e.input.charCodeAt(++e.position);if(C===58)C=e.input.charCodeAt(++e.position),Ka(C)||Dt(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(fc(e,f,y,b,x,null,s,l,u),b=x=v=null),k=!0,T=!1,a=!1,b=e.tag,x=e.result;else if(k)Dt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=h,e.anchor=p,!0}else if(k)Dt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=h,e.anchor=p,!0}if((e.line===i||e.lineIndent>t)&&(T&&(s=e.line,l=e.lineStart,u=e.position),Ac(e,t,y0,!0,a)&&(T?x=e.result:v=e.result),T||(fc(e,f,y,b,x,v,s,l,u),b=x=v=null),On(e,!0,-1),C=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&C!==0)Dt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&fc(e,f,y,b,x,null,s,l,u),k&&(e.tag=h,e.anchor=p,e.kind="mapping",e.result=f),k}N(xM,"readBlockMapping");function vM(e){var t,r=!1,n=!1,a,i,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Dt(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,a="!!",s=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(i=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Dt(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ka(s);)s===33&&(n?Dt(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),iM.test(a)||Dt(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),coe.test(i)&&Dt(e,"tag suffix cannot contain flow indicator characters")}i&&!sM.test(i)&&Dt(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Dt(e,"tag name is malformed: "+i)}return r?e.tag=i:Al.call(e.tagMap,a)?e.tag=e.tagMap[a]+i:a==="!"?e.tag="!"+i:a==="!!"?e.tag="tag:yaml.org,2002:"+i:Dt(e,'undeclared tag handle "'+a+'"'),!0}N(vM,"readTagProperty");function wM(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Dt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ka(r)&&!gc(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Dt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}N(wM,"readAnchorProperty");function SM(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ka(n)&&!gc(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Dt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Al.call(e.anchorMap,r)||Dt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],On(e,!0,-1),!0}N(SM,"readAlias");function Ac(e,t,r,n,a){var i,s,l,u=1,h=!1,p=!1,f,y,b,x,v,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=s=l=y0===r||aM===r,n&&On(e,!0,-1)&&(h=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;vM(e)||wM(e);)On(e,!0,-1)?(h=!0,l=i,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):l=!1;if(l&&(l=h||a),(u===1||y0===r)&&(m0===r||nM===r?v=t:v=t+1,T=e.position-e.lineStart,u===1?l&&(u1(e,T)||xM(e,T,v))||yM(e,v)?p=!0:(s&&bM(e,v)||fM(e,v)||mM(e,v)?p=!0:SM(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&Dt(e,"alias node should not have any properties")):gM(e,v,m0===r)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(p=l&&u1(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Dt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,y=e.implicitTypes.length;f<y;f+=1)if(x=e.implicitTypes[f],x.resolve(e.result)){e.result=x.construct(e.result),e.tag=x.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Al.call(e.typeMap[e.kind||"fallback"],e.tag))x=e.typeMap[e.kind||"fallback"][e.tag];else for(x=null,b=e.typeMap.multi[e.kind||"fallback"],f=0,y=b.length;f<y;f+=1)if(e.tag.slice(0,b[f].tag.length)===b[f].tag){x=b[f];break}x||Dt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&x.kind!==e.kind&&Dt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+x.kind+'", not "'+e.kind+'"'),x.resolve(e.result,e.tag)?(e.result=x.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Dt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}N(Ac,"composeNode");function TM(e){var t=e.position,r,n,a,i=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(On(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(i=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Ka(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&Dt(e,"directive name must not be less than one character in length");s!==0;){for(;Cl(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ss(s));break}if(Ss(s))break;for(r=e.position;s!==0&&!Ka(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}s!==0&&uy(e),Al.call(eN,n)?eN[n](e,n,a):Hp(e,'unknown document directive "'+n+'"')}if(On(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,On(e,!0,-1)):i&&Dt(e,"directives end mark is expected"),Ac(e,e.lineIndent-1,y0,!1,!0),On(e,!0,-1),e.checkLineBreaks&&loe.test(e.input.slice(t,e.position))&&Hp(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&bg(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,On(e,!0,-1));return}if(e.position<e.length-1)Dt(e,"end of the stream or a document separator is expected");else return}N(TM,"readDocument");function XS(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new pM(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Dt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)TM(r);return r.documents}N(XS,"loadDocuments");function uoe(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=XS(e,r);if(typeof t!="function")return n;for(var a=0,i=n.length;a<i;a+=1)t(n[a])}N(uoe,"loadAll$1");function kM(e,t){var r=XS(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new hi("expected a single document in the stream, but found more")}}N(kM,"load$1");var doe=kM,hoe={load:doe},EM=Object.prototype.toString,CM=Object.prototype.hasOwnProperty,JS=65279,poe=9,Gp=10,goe=13,foe=32,moe=33,yoe=34,d1=35,boe=37,xoe=38,voe=39,woe=42,_M=44,Soe=45,b0=58,Toe=61,koe=62,Eoe=63,Coe=64,AM=91,NM=93,_oe=96,LM=123,Aoe=124,PM=125,Fa={};Fa[0]="\\0";Fa[7]="\\a";Fa[8]="\\b";Fa[9]="\\t";Fa[10]="\\n";Fa[11]="\\v";Fa[12]="\\f";Fa[13]="\\r";Fa[27]="\\e";Fa[34]='\\"';Fa[92]="\\\\";Fa[133]="\\N";Fa[160]="\\_";Fa[8232]="\\L";Fa[8233]="\\P";var Noe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Loe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function RM(e,t){var r,n,a,i,s,l,u;if(t===null)return{};for(r={},n=Object.keys(t),a=0,i=n.length;a<i;a+=1)s=n[a],l=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=e.compiledTypeMap.fallback[s],u&&CM.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}N(RM,"compileStyleMap");function IM(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new hi("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+na.repeat("0",n-t.length)+t}N(IM,"encodeHex");var Poe=1,Wp=2;function DM(e){this.schema=e.schema||rM,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=na.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=RM(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Wp:Poe,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}N(DM,"State");function h1(e,t){for(var r=na.repeat(" ",t),n=0,a=-1,i="",s,l=e.length;n<l;)a=e.indexOf(`
`,n),a===-1?(s=e.slice(n),n=l):(s=e.slice(n,a+1),n=a+1),s.length&&s!==`
`&&(i+=r),i+=s;return i}N(h1,"indentString");function x0(e,t){return`
`+na.repeat(" ",e.indent*t)}N(x0,"generateNextLine");function MM(e,t){var r,n,a;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}N(MM,"testImplicitResolving");function Vp(e){return e===foe||e===poe}N(Vp,"isWhitespace");function yd(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==JS||65536<=e&&e<=1114111}N(yd,"isPrintable");function p1(e){return yd(e)&&e!==JS&&e!==goe&&e!==Gp}N(p1,"isNsCharOrWhitespace");function g1(e,t,r){var n=p1(e),a=n&&!Vp(e);return(r?n:n&&e!==_M&&e!==AM&&e!==NM&&e!==LM&&e!==PM)&&e!==d1&&!(t===b0&&!a)||p1(t)&&!Vp(t)&&e===d1||t===b0&&a}N(g1,"isPlainSafe");function OM(e){return yd(e)&&e!==JS&&!Vp(e)&&e!==Soe&&e!==Eoe&&e!==b0&&e!==_M&&e!==AM&&e!==NM&&e!==LM&&e!==PM&&e!==d1&&e!==xoe&&e!==woe&&e!==moe&&e!==Aoe&&e!==Toe&&e!==koe&&e!==voe&&e!==yoe&&e!==boe&&e!==Coe&&e!==_oe}N(OM,"isPlainSafeFirst");function jM(e){return!Vp(e)&&e!==b0}N(jM,"isPlainSafeLast");function Vu(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}N(Vu,"codePointAt");function ZS(e){var t=/^\n* /;return t.test(e)}N(ZS,"needIndentIndicator");var BM=1,f1=2,FM=3,zM=4,qu=5;function UM(e,t,r,n,a,i,s,l){var u,h=0,p=null,f=!1,y=!1,b=n!==-1,x=-1,v=OM(Vu(e,0))&&jM(Vu(e,e.length-1));if(t||s)for(u=0;u<e.length;h>=65536?u+=2:u++){if(h=Vu(e,u),!yd(h))return qu;v=v&&g1(h,p,l),p=h}else{for(u=0;u<e.length;h>=65536?u+=2:u++){if(h=Vu(e,u),h===Gp)f=!0,b&&(y=y||u-x-1>n&&e[x+1]!==" ",x=u);else if(!yd(h))return qu;v=v&&g1(h,p,l),p=h}y=y||b&&u-x-1>n&&e[x+1]!==" "}return!f&&!y?v&&!s&&!a(e)?BM:i===Wp?qu:f1:r>9&&ZS(e)?qu:s?i===Wp?qu:f1:y?zM:FM}N(UM,"chooseScalarStyle");function $M(e,t,r,n,a){e.dump=(function(){if(t.length===0)return e.quotingType===Wp?'""':"''";if(!e.noCompatMode&&(Noe.indexOf(t)!==-1||Loe.test(t)))return e.quotingType===Wp?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),l=n||e.flowLevel>-1&&r>=e.flowLevel;function u(h){return MM(e,h)}switch(N(u,"testAmbiguity"),UM(t,l,e.indent,s,u,e.quotingType,e.forceQuotes&&!n,a)){case BM:return t;case f1:return"'"+t.replace(/'/g,"''")+"'";case FM:return"|"+m1(t,e.indent)+y1(h1(t,i));case zM:return">"+m1(t,e.indent)+y1(h1(qM(t,s),i));case qu:return'"'+HM(t)+'"';default:throw new hi("impossible error: invalid scalar style")}})()}N($M,"writeScalar");function m1(e,t){var r=ZS(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),i=a?"+":n?"":"-";return r+i+`
`}N(m1,"blockHeader");function y1(e){return e[e.length-1]===`
`?e.slice(0,-1):e}N(y1,"dropEndingNewline");function qM(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var h=e.indexOf(`
`);return h=h!==-1?h:e.length,r.lastIndex=h,b1(e.slice(0,h),t)})(),a=e[0]===`
`||e[0]===" ",i,s;s=r.exec(e);){var l=s[1],u=s[2];i=u[0]===" ",n+=l+(!a&&!i&&u!==""?`
`:"")+b1(u,t),a=i}return n}N(qM,"foldString");function b1(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,a=0,i,s=0,l=0,u="";n=r.exec(e);)l=n.index,l-a>t&&(i=s>a?s:l,u+=`
`+e.slice(a,i),a=i+1),s=l;return u+=`
`,e.length-a>t&&s>a?u+=e.slice(a,s)+`
`+e.slice(s+1):u+=e.slice(a),u.slice(1)}N(b1,"foldLine");function HM(e){for(var t="",r=0,n,a=0;a<e.length;r>=65536?a+=2:a++)r=Vu(e,a),n=Fa[r],!n&&yd(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=n||IM(r);return t}N(HM,"escapeString");function GM(e,t,r){var n="",a=e.tag,i,s,l;for(i=0,s=r.length;i<s;i+=1)l=r[i],e.replacer&&(l=e.replacer.call(r,String(i),l)),(Ys(e,t,l,!1,!1)||typeof l>"u"&&Ys(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}N(GM,"writeFlowSequence");function x1(e,t,r,n){var a="",i=e.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],e.replacer&&(u=e.replacer.call(r,String(s),u)),(Ys(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&Ys(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=x0(e,t)),e.dump&&Gp===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=i,e.dump=a||"[]"}N(x1,"writeBlockSequence");function WM(e,t,r){var n="",a=e.tag,i=Object.keys(r),s,l,u,h,p;for(s=0,l=i.length;s<l;s+=1)p="",n!==""&&(p+=", "),e.condenseFlow&&(p+='"'),u=i[s],h=r[u],e.replacer&&(h=e.replacer.call(r,u,h)),Ys(e,t,u,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ys(e,t,h,!1,!1)&&(p+=e.dump,n+=p));e.tag=a,e.dump="{"+n+"}"}N(WM,"writeFlowMapping");function VM(e,t,r,n){var a="",i=e.tag,s=Object.keys(r),l,u,h,p,f,y;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new hi("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||a!=="")&&(y+=x0(e,t)),h=s[l],p=r[h],e.replacer&&(p=e.replacer.call(r,h,p)),Ys(e,t+1,h,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Gp===e.dump.charCodeAt(0)?y+="?":y+="? "),y+=e.dump,f&&(y+=x0(e,t)),Ys(e,t+1,p,!0,f)&&(e.dump&&Gp===e.dump.charCodeAt(0)?y+=":":y+=": ",y+=e.dump,a+=y));e.tag=i,e.dump=a||"{}"}N(VM,"writeBlockMapping");function v1(e,t,r){var n,a,i,s,l,u;for(a=r?e.explicitTypes:e.implicitTypes,i=0,s=a.length;i<s;i+=1)if(l=a[i],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(u=e.styleMap[l.tag]||l.defaultStyle,EM.call(l.represent)==="[object Function]")n=l.represent(t,u);else if(CM.call(l.represent,u))n=l.represent[u](t,u);else throw new hi("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');e.dump=n}return!0}return!1}N(v1,"detectType");function Ys(e,t,r,n,a,i,s){e.tag=null,e.dump=r,v1(e,r,!1)||v1(e,r,!0);var l=EM.call(e.dump),u=n,h;n&&(n=e.flowLevel<0||e.flowLevel>t);var p=l==="[object Object]"||l==="[object Array]",f,y;if(p&&(f=e.duplicates.indexOf(r),y=f!==-1),(e.tag!==null&&e.tag!=="?"||y||e.indent!==2&&t>0)&&(a=!1),y&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(p&&y&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(VM(e,t,e.dump,a),y&&(e.dump="&ref_"+f+e.dump)):(WM(e,t,e.dump),y&&(e.dump="&ref_"+f+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?x1(e,t-1,e.dump,a):x1(e,t,e.dump,a),y&&(e.dump="&ref_"+f+e.dump)):(GM(e,t,e.dump),y&&(e.dump="&ref_"+f+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&$M(e,e.dump,t,i,u);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new hi("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(h=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",e.dump=h+" "+e.dump)}return!0}N(Ys,"writeNode");function YM(e,t){var r=[],n=[],a,i;for(v0(e,r,n),a=0,i=n.length;a<i;a+=1)t.duplicates.push(r[n[a]]);t.usedDuplicates=new Array(i)}N(YM,"getDuplicateReferences");function v0(e,t,r){var n,a,i;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)v0(e[a],t,r);else for(n=Object.keys(e),a=0,i=n.length;a<i;a+=1)v0(e[n[a]],t,r)}N(v0,"inspectNode");function Roe(e,t){t=t||{};var r=new DM(t);r.noRefs||YM(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ys(r,0,n,!0,!0)?r.dump+`
`:""}N(Roe,"dump$1");function Ioe(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}N(Ioe,"renamed");var Doe=FD,Moe=hoe.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Pa={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},tN={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function op(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=xn(e),t=xn(t);const[r,n]=[e.x,e.y],[a,i]=[t.x,t.y],s=a-r,l=i-n;return{angle:Math.atan(l/s),deltaX:s,deltaY:l}}N(op,"calculateDeltaAndAngle");var xn=N(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Ooe=N(e=>({x:N(function(t,r,n){let a=0;const i=xn(n[0]).x<xn(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Pa,e.arrowTypeStart)){const{angle:b,deltaX:x}=op(n[0],n[1]);a=Pa[e.arrowTypeStart]*Math.cos(b)*(x>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Pa,e.arrowTypeEnd)){const{angle:b,deltaX:x}=op(n[n.length-1],n[n.length-2]);a=Pa[e.arrowTypeEnd]*Math.cos(b)*(x>=0?1:-1)}const s=Math.abs(xn(t).x-xn(n[n.length-1]).x),l=Math.abs(xn(t).y-xn(n[n.length-1]).y),u=Math.abs(xn(t).x-xn(n[0]).x),h=Math.abs(xn(t).y-xn(n[0]).y),p=Pa[e.arrowTypeStart],f=Pa[e.arrowTypeEnd],y=1;if(s<f&&s>0&&l<f){let b=f+y-s;b*=i==="right"?-1:1,a-=b}if(u<p&&u>0&&h<p){let b=p+y-u;b*=i==="right"?-1:1,a+=b}return xn(t).x+a},"x"),y:N(function(t,r,n){let a=0;const i=xn(n[0]).y<xn(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Pa,e.arrowTypeStart)){const{angle:b,deltaY:x}=op(n[0],n[1]);a=Pa[e.arrowTypeStart]*Math.abs(Math.sin(b))*(x>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Pa,e.arrowTypeEnd)){const{angle:b,deltaY:x}=op(n[n.length-1],n[n.length-2]);a=Pa[e.arrowTypeEnd]*Math.abs(Math.sin(b))*(x>=0?1:-1)}const s=Math.abs(xn(t).y-xn(n[n.length-1]).y),l=Math.abs(xn(t).x-xn(n[n.length-1]).x),u=Math.abs(xn(t).y-xn(n[0]).y),h=Math.abs(xn(t).x-xn(n[0]).x),p=Pa[e.arrowTypeStart],f=Pa[e.arrowTypeEnd],y=1;if(s<f&&s>0&&l<f){let b=f+y-s;b*=i==="up"?-1:1,a-=b}if(u<p&&u>0&&h<p){let b=p+y-u;b*=i==="up"?-1:1,a+=b}return xn(t).y+a},"y")}),"getLineFunctionsWithOffset"),eT=N(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),joe=N(e=>{const{handDrawnSeed:t}=zr();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Id=N(e=>{const t=Boe([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),Boe=N(e=>{const t=new Map;return e.forEach(r=>{const[n,a]=r.split(":");t.set(n.trim(),a?.trim())}),t},"styles2Map"),QM=N(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),St=N(e=>{const{stylesArray:t}=Id(e),r=[],n=[],a=[],i=[];return t.forEach(s=>{const l=s[0];QM(l)?r.push(s.join(":")+" !important"):(n.push(s.join(":")+" !important"),l.includes("stroke")&&a.push(s.join(":")+" !important"),l==="fill"&&i.push(s.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:i}},"styles2String"),wt=N((e,t)=>{const{themeVariables:r,handDrawnSeed:n}=zr(),{nodeBorder:a,mainBkg:i}=r,{stylesMap:s}=Id(e);return Object.assign({roughness:.7,fill:s.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||a,seed:n,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:Foe(s.get("stroke-dasharray"))},t)},"userNodeOverrides"),Foe=N(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const a=isNaN(t[0])?0:t[0];return[a,a]}const r=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[r,n]},"getStrokeDashArray"),Vh={},ea={},rN;function zoe(){return rN||(rN=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.BLANK_URL=ea.relativeFirstCharacters=ea.whitespaceEscapeCharsRegex=ea.urlSchemeRegex=ea.ctrlCharactersRegex=ea.htmlCtrlEntityRegex=ea.htmlEntitiesRegex=ea.invalidProtocolRegex=void 0,ea.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,ea.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,ea.htmlCtrlEntityRegex=/&(newline|tab);/gi,ea.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ea.urlSchemeRegex=/^.+(:|&colon;)/gim,ea.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,ea.relativeFirstCharacters=[".","/"],ea.BLANK_URL="about:blank"),ea}var nN;function Uoe(){if(nN)return Vh;nN=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.sanitizeUrl=void 0;var e=zoe();function t(s){return e.relativeFirstCharacters.indexOf(s[0])>-1}function r(s){var l=s.replace(e.ctrlCharactersRegex,"");return l.replace(e.htmlEntitiesRegex,function(u,h){return String.fromCharCode(h)})}function n(s){return URL.canParse(s)}function a(s){try{return decodeURIComponent(s)}catch{return s}}function i(s){if(!s)return e.BLANK_URL;var l,u=a(s.trim());do u=r(u).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),u=a(u),l=u.match(e.ctrlCharactersRegex)||u.match(e.htmlEntitiesRegex)||u.match(e.htmlCtrlEntityRegex)||u.match(e.whitespaceEscapeCharsRegex);while(l&&l.length>0);var h=u;if(!h)return e.BLANK_URL;if(t(h))return h;var p=h.trimStart(),f=p.match(e.urlSchemeRegex);if(!f)return h;var y=f[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(y))return e.BLANK_URL;var b=p.replace(/\\/g,"/");if(y==="mailto:"||y.includes("://"))return b;if(y==="http:"||y==="https:"){if(!n(b))return e.BLANK_URL;var x=new URL(b);return x.protocol=x.protocol.toLowerCase(),x.hostname=x.hostname.toLowerCase(),x.toString()}return b}return Vh.sanitizeUrl=i,Vh}var $oe=Uoe(),KM=typeof global=="object"&&global&&global.Object===Object&&global,qoe=typeof self=="object"&&self&&self.Object===Object&&self,to=KM||qoe||Function("return this")(),w0=to.Symbol,XM=Object.prototype,Hoe=XM.hasOwnProperty,Goe=XM.toString,Yh=w0?w0.toStringTag:void 0;function Woe(e){var t=Hoe.call(e,Yh),r=e[Yh];try{e[Yh]=void 0;var n=!0}catch{}var a=Goe.call(e);return n&&(t?e[Yh]=r:delete e[Yh]),a}var Voe=Object.prototype,Yoe=Voe.toString;function Qoe(e){return Yoe.call(e)}var Koe="[object Null]",Xoe="[object Undefined]",aN=w0?w0.toStringTag:void 0;function Dd(e){return e==null?e===void 0?Xoe:Koe:aN&&aN in Object(e)?Woe(e):Qoe(e)}function Fc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Joe="[object AsyncFunction]",Zoe="[object Function]",ele="[object GeneratorFunction]",tle="[object Proxy]";function tT(e){if(!Fc(e))return!1;var t=Dd(e);return t==Zoe||t==ele||t==Joe||t==tle}var Ov=to["__core-js_shared__"],iN=(function(){var e=/[^.]+$/.exec(Ov&&Ov.keys&&Ov.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function rle(e){return!!iN&&iN in e}var nle=Function.prototype,ale=nle.toString;function zc(e){if(e!=null){try{return ale.call(e)}catch{}try{return e+""}catch{}}return""}var ile=/[\\^$.*+?()[\]{}|]/g,sle=/^\[object .+?Constructor\]$/,ole=Function.prototype,lle=Object.prototype,cle=ole.toString,ule=lle.hasOwnProperty,dle=RegExp("^"+cle.call(ule).replace(ile,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hle(e){if(!Fc(e)||rle(e))return!1;var t=tT(e)?dle:sle;return t.test(zc(e))}function ple(e,t){return e?.[t]}function Uc(e,t){var r=ple(e,t);return hle(r)?r:void 0}var Yp=Uc(Object,"create");function gle(){this.__data__=Yp?Yp(null):{},this.size=0}function fle(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var mle="__lodash_hash_undefined__",yle=Object.prototype,ble=yle.hasOwnProperty;function xle(e){var t=this.__data__;if(Yp){var r=t[e];return r===mle?void 0:r}return ble.call(t,e)?t[e]:void 0}var vle=Object.prototype,wle=vle.hasOwnProperty;function Sle(e){var t=this.__data__;return Yp?t[e]!==void 0:wle.call(t,e)}var Tle="__lodash_hash_undefined__";function kle(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Yp&&t===void 0?Tle:t,this}function Nc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nc.prototype.clear=gle;Nc.prototype.delete=fle;Nc.prototype.get=xle;Nc.prototype.has=Sle;Nc.prototype.set=kle;function Ele(){this.__data__=[],this.size=0}function hy(e,t){return e===t||e!==e&&t!==t}function py(e,t){for(var r=e.length;r--;)if(hy(e[r][0],t))return r;return-1}var Cle=Array.prototype,_le=Cle.splice;function Ale(e){var t=this.__data__,r=py(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():_le.call(t,r,1),--this.size,!0}function Nle(e){var t=this.__data__,r=py(t,e);return r<0?void 0:t[r][1]}function Lle(e){return py(this.__data__,e)>-1}function Ple(e,t){var r=this.__data__,n=py(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Uo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Uo.prototype.clear=Ele;Uo.prototype.delete=Ale;Uo.prototype.get=Nle;Uo.prototype.has=Lle;Uo.prototype.set=Ple;var Qp=Uc(to,"Map");function Rle(){this.size=0,this.__data__={hash:new Nc,map:new(Qp||Uo),string:new Nc}}function Ile(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function gy(e,t){var r=e.__data__;return Ile(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Dle(e){var t=gy(this,e).delete(e);return this.size-=t?1:0,t}function Mle(e){return gy(this,e).get(e)}function Ole(e){return gy(this,e).has(e)}function jle(e,t){var r=gy(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Il(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Il.prototype.clear=Rle;Il.prototype.delete=Dle;Il.prototype.get=Mle;Il.prototype.has=Ole;Il.prototype.set=jle;var Ble="Expected a function";function xg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ble);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(xg.Cache||Il),r}xg.Cache=Il;function Fle(){this.__data__=new Uo,this.size=0}function zle(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Ule(e){return this.__data__.get(e)}function $le(e){return this.__data__.has(e)}var qle=200;function Hle(e,t){var r=this.__data__;if(r instanceof Uo){var n=r.__data__;if(!Qp||n.length<qle-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Il(n)}return r.set(e,t),this.size=r.size,this}function Md(e){var t=this.__data__=new Uo(e);this.size=t.size}Md.prototype.clear=Fle;Md.prototype.delete=zle;Md.prototype.get=Ule;Md.prototype.has=$le;Md.prototype.set=Hle;var S0=(function(){try{var e=Uc(Object,"defineProperty");return e({},"",{}),e}catch{}})();function rT(e,t,r){t=="__proto__"&&S0?S0(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function w1(e,t,r){(r!==void 0&&!hy(e[t],r)||r===void 0&&!(t in e))&&rT(e,t,r)}function Gle(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var u=s[++a];if(r(i[u],u,i)===!1)break}return t}}var Wle=Gle(),JM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sN=JM&&typeof module=="object"&&module&&!module.nodeType&&module,Vle=sN&&sN.exports===JM,oN=Vle?to.Buffer:void 0,lN=oN?oN.allocUnsafe:void 0;function Yle(e,t){if(t)return e.slice();var r=e.length,n=lN?lN(r):new e.constructor(r);return e.copy(n),n}var cN=to.Uint8Array;function Qle(e){var t=new e.constructor(e.byteLength);return new cN(t).set(new cN(e)),t}function Kle(e,t){var r=t?Qle(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Xle(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var uN=Object.create,Jle=(function(){function e(){}return function(t){if(!Fc(t))return{};if(uN)return uN(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function ZM(e,t){return function(r){return e(t(r))}}var eO=ZM(Object.getPrototypeOf,Object),Zle=Object.prototype;function fy(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Zle;return e===r}function ece(e){return typeof e.constructor=="function"&&!fy(e)?Jle(eO(e)):{}}function vg(e){return e!=null&&typeof e=="object"}var tce="[object Arguments]";function dN(e){return vg(e)&&Dd(e)==tce}var tO=Object.prototype,rce=tO.hasOwnProperty,nce=tO.propertyIsEnumerable,T0=dN((function(){return arguments})())?dN:function(e){return vg(e)&&rce.call(e,"callee")&&!nce.call(e,"callee")},k0=Array.isArray,ace=9007199254740991;function rO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ace}function my(e){return e!=null&&rO(e.length)&&!tT(e)}function ice(e){return vg(e)&&my(e)}function sce(){return!1}var nO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,hN=nO&&typeof module=="object"&&module&&!module.nodeType&&module,oce=hN&&hN.exports===nO,pN=oce?to.Buffer:void 0,lce=pN?pN.isBuffer:void 0,nT=lce||sce,cce="[object Object]",uce=Function.prototype,dce=Object.prototype,aO=uce.toString,hce=dce.hasOwnProperty,pce=aO.call(Object);function gce(e){if(!vg(e)||Dd(e)!=cce)return!1;var t=eO(e);if(t===null)return!0;var r=hce.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&aO.call(r)==pce}var fce="[object Arguments]",mce="[object Array]",yce="[object Boolean]",bce="[object Date]",xce="[object Error]",vce="[object Function]",wce="[object Map]",Sce="[object Number]",Tce="[object Object]",kce="[object RegExp]",Ece="[object Set]",Cce="[object String]",_ce="[object WeakMap]",Ace="[object ArrayBuffer]",Nce="[object DataView]",Lce="[object Float32Array]",Pce="[object Float64Array]",Rce="[object Int8Array]",Ice="[object Int16Array]",Dce="[object Int32Array]",Mce="[object Uint8Array]",Oce="[object Uint8ClampedArray]",jce="[object Uint16Array]",Bce="[object Uint32Array]",gn={};gn[Lce]=gn[Pce]=gn[Rce]=gn[Ice]=gn[Dce]=gn[Mce]=gn[Oce]=gn[jce]=gn[Bce]=!0;gn[fce]=gn[mce]=gn[Ace]=gn[yce]=gn[Nce]=gn[bce]=gn[xce]=gn[vce]=gn[wce]=gn[Sce]=gn[Tce]=gn[kce]=gn[Ece]=gn[Cce]=gn[_ce]=!1;function Fce(e){return vg(e)&&rO(e.length)&&!!gn[Dd(e)]}function zce(e){return function(t){return e(t)}}var iO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Np=iO&&typeof module=="object"&&module&&!module.nodeType&&module,Uce=Np&&Np.exports===iO,jv=Uce&&KM.process,gN=(function(){try{var e=Np&&Np.require&&Np.require("util").types;return e||jv&&jv.binding&&jv.binding("util")}catch{}})(),fN=gN&&gN.isTypedArray,aT=fN?zce(fN):Fce;function S1(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var $ce=Object.prototype,qce=$ce.hasOwnProperty;function Hce(e,t,r){var n=e[t];(!(qce.call(e,t)&&hy(n,r))||r===void 0&&!(t in e))&&rT(e,t,r)}function Gce(e,t,r,n){var a=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var l=t[i],u=void 0;u===void 0&&(u=e[l]),a?rT(r,l,u):Hce(r,l,u)}return r}function Wce(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Vce=9007199254740991,Yce=/^(?:0|[1-9]\d*)$/;function sO(e,t){var r=typeof e;return t=t??Vce,!!t&&(r=="number"||r!="symbol"&&Yce.test(e))&&e>-1&&e%1==0&&e<t}var Qce=Object.prototype,Kce=Qce.hasOwnProperty;function Xce(e,t){var r=k0(e),n=!r&&T0(e),a=!r&&!n&&nT(e),i=!r&&!n&&!a&&aT(e),s=r||n||a||i,l=s?Wce(e.length,String):[],u=l.length;for(var h in e)(t||Kce.call(e,h))&&!(s&&(h=="length"||a&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||sO(h,u)))&&l.push(h);return l}function Jce(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Zce=Object.prototype,eue=Zce.hasOwnProperty;function tue(e){if(!Fc(e))return Jce(e);var t=fy(e),r=[];for(var n in e)n=="constructor"&&(t||!eue.call(e,n))||r.push(n);return r}function oO(e){return my(e)?Xce(e,!0):tue(e)}function rue(e){return Gce(e,oO(e))}function nue(e,t,r,n,a,i,s){var l=S1(e,r),u=S1(t,r),h=s.get(u);if(h){w1(e,r,h);return}var p=i?i(l,u,r+"",e,t,s):void 0,f=p===void 0;if(f){var y=k0(u),b=!y&&nT(u),x=!y&&!b&&aT(u);p=u,y||b||x?k0(l)?p=l:ice(l)?p=Xle(l):b?(f=!1,p=Yle(u,!0)):x?(f=!1,p=Kle(u,!0)):p=[]:gce(u)||T0(u)?(p=l,T0(l)?p=rue(l):(!Fc(l)||tT(l))&&(p=ece(u))):f=!1}f&&(s.set(u,p),a(p,u,n,i,s),s.delete(u)),w1(e,r,p)}function lO(e,t,r,n,a){e!==t&&Wle(t,function(i,s){if(a||(a=new Md),Fc(i))nue(e,t,s,r,lO,n,a);else{var l=n?n(S1(e,s),i,s+"",e,t,a):void 0;l===void 0&&(l=i),w1(e,s,l)}},oO)}function cO(e){return e}function aue(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var mN=Math.max;function iue(e,t,r){return t=mN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=mN(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),aue(e,this,l)}}function sue(e){return function(){return e}}var oue=S0?function(e,t){return S0(e,"toString",{configurable:!0,enumerable:!1,value:sue(t),writable:!0})}:cO,lue=800,cue=16,uue=Date.now;function due(e){var t=0,r=0;return function(){var n=uue(),a=cue-(n-r);if(r=n,a>0){if(++t>=lue)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hue=due(oue);function pue(e,t){return hue(iue(e,t,cO),e+"")}function gue(e,t,r){if(!Fc(r))return!1;var n=typeof t;return(n=="number"?my(r)&&sO(t,r.length):n=="string"&&t in r)?hy(r[t],e):!1}function fue(e){return pue(function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,s&&gue(r[0],r[1],s)&&(i=a<3?void 0:i,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,i)}return t})}var mue=fue(function(e,t,r){lO(e,t,r)}),yue="​",bue={curveBasis:_m,curveBasisClosed:vse,curveBasisOpen:wse,curveBumpX:YI,curveBumpY:QI,curveBundle:Sse,curveCardinalClosed:Tse,curveCardinalOpen:kse,curveCardinal:ZI,curveCatmullRomClosed:Ese,curveCatmullRomOpen:Cse,curveCatmullRom:tD,curveLinear:d0,curveLinearClosed:_se,curveMonotoneX:oD,curveMonotoneY:lD,curveNatural:uD,curveStep:dD,curveStepAfter:pD,curveStepBefore:hD},xue=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,vue=N(function(e,t){const r=uO(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const s=r.map(l=>l.args);e0(s),n=ra(n,[...s])}else n=r.args;if(!n)return;let a=AS(e,t);const i="config";return n[i]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),n[a]=n[i],delete n[i]),n},"detectInit"),uO=N(function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${xue.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),qe.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const a=[];for(;(n=_p.exec(e))!==null;)if(n.index===_p.lastIndex&&_p.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const i=n[1]?n[1]:n[2],s=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;a.push({type:i,args:s})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(r){return qe.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),wue=N(function(e){return e.replace(_p,"")},"removeDirectives"),Sue=N(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function iT(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return bue[r]??t}N(iT,"interpolateToCurve");function dO(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?$oe.sanitizeUrl(r):r}N(dO,"formatUrl");var Tue=N((e,...t)=>{const r=e.split("."),n=r.length-1,a=r[n];let i=window;for(let s=0;s<n;s++)if(i=i[r[s]],!i){qe.error(`Function name: ${e} not found in window`);return}i[a](...t)},"runFunc");function sT(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}N(sT,"distance");function hO(e){let t,r=0;e.forEach(a=>{r+=sT(a,t),t=a});const n=r/2;return oT(e,n)}N(hO,"traverseEdge");function pO(e){return e.length===1?e[0]:hO(e)}N(pO,"calcLabelPosition");var yN=N((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),oT=N((e,t)=>{let r,n=t;for(const a of e){if(r){const i=sT(a,r);if(i===0)return r;if(i<n)n-=i;else{const s=n/i;if(s<=0)return r;if(s>=1)return{x:a.x,y:a.y};if(s>0&&s<1)return{x:yN((1-s)*r.x+s*a.x,5),y:yN((1-s)*r.y+s*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),kue=N((e,t,r)=>{qe.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=oT(t,25),i=e?10:5,s=Math.atan2(t[0].y-a.y,t[0].x-a.x),l={x:0,y:0};return l.x=Math.sin(s)*i+(t[0].x+a.x)/2,l.y=-Math.cos(s)*i+(t[0].y+a.y)/2,l},"calcCardinalityPosition");function gO(e,t,r){const n=structuredClone(r);qe.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const a=25+e,i=oT(n,a),s=10+e*.5,l=Math.atan2(n[0].y-i.y,n[0].x-i.x),u={x:0,y:0};return t==="start_left"?(u.x=Math.sin(l+Math.PI)*s+(n[0].x+i.x)/2,u.y=-Math.cos(l+Math.PI)*s+(n[0].y+i.y)/2):t==="end_right"?(u.x=Math.sin(l-Math.PI)*s+(n[0].x+i.x)/2-5,u.y=-Math.cos(l-Math.PI)*s+(n[0].y+i.y)/2-5):t==="end_left"?(u.x=Math.sin(l)*s+(n[0].x+i.x)/2-5,u.y=-Math.cos(l)*s+(n[0].y+i.y)/2-5):(u.x=Math.sin(l)*s+(n[0].x+i.x)/2,u.y=-Math.cos(l)*s+(n[0].y+i.y)/2),u}N(gO,"calcTerminalLabelPosition");function fO(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}N(fO,"getStylesFromArray");var bN=0,Eue=N(()=>(bN++,"id-"+Math.random().toString(36).substr(2,12)+"-"+bN),"generateId");function mO(e){let t="";const r="0123456789abcdef",n=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}N(mO,"makeRandomHex");var Cue=N(e=>mO(e.length),"random"),_ue=N(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Aue=N(function(e,t){const r=t.text.replace(Rd.lineBreakRegex," "),[,n]=yy(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",n),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const i=a.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.attr("fill",t.fill),i.text(r),a},"drawSimpleText"),Nue=xg((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Rd.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),a=[];let i="";return n.forEach((s,l)=>{const u=Oo(`${s} `,r),h=Oo(i,r);if(u>t){const{hyphenatedStrings:y,remainingWord:b}=Lue(s,t,"-",r);a.push(i,...y),i=b}else h+u>=t?(a.push(i),i=s):i=[i,s].filter(Boolean).join(" ");l+1===n.length&&a.push(i)}),a.filter(s=>s!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Lue=xg((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const a=[...e],i=[];let s="";return a.forEach((l,u)=>{const h=`${s}${l}`;if(Oo(h,n)>=t){const f=u+1,y=a.length===f,b=`${h}${r}`;i.push(y?h:b),s=""}else s=h}),{hyphenatedStrings:i,remainingWord:s}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function yO(e,t){return lT(e,t).height}N(yO,"calculateTextHeight");function Oo(e,t){return lT(e,t).width}N(Oo,"calculateTextWidth");var lT=xg((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,i]=yy(r),s=["sans-serif",n],l=e.split(Rd.lineBreakRegex),u=[],h=Lr("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const p=h.append("svg");for(const y of s){let b=0;const x={width:0,height:0,lineHeight:0};for(const v of l){const T=_ue();T.text=v||yue;const k=Aue(p,T).style("font-size",i).style("font-weight",a).style("font-family",y),C=(k._groups||k)[0][0].getBBox();if(C.width===0&&C.height===0)throw new Error("svg element not in render tree");x.width=Math.round(Math.max(x.width,C.width)),b=Math.round(C.height),x.height+=b,x.lineHeight=Math.round(Math.max(x.lineHeight,b))}u.push(x)}p.remove();const f=isNaN(u[1].height)||isNaN(u[1].width)||isNaN(u[1].lineHeight)||u[0].height>u[1].height&&u[0].width>u[1].width&&u[0].lineHeight>u[1].lineHeight?0:1;return u[f]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),ld,Pue=(ld=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},N(ld,"InitIDGenerator"),ld),rm,Rue=N(function(e){return rm=rm||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),rm.innerHTML=e,unescape(rm.textContent)},"entityDecode");function cT(e){return"str"in e}N(cT,"isDetailedError");var Iue=N((e,t,r,n)=>{if(!n)return;const a=e.node()?.getBBox();a&&e.append("text").text(n).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),yy=N(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function uT(e,t){return mue({},e,t)}N(uT,"cleanAndMerge");var vs={assignWithDepth:ra,wrapLabel:Nue,calculateTextHeight:yO,calculateTextWidth:Oo,calculateTextDimensions:lT,cleanAndMerge:uT,detectInit:vue,detectDirective:uO,isSubstringInArray:Sue,interpolateToCurve:iT,calcLabelPosition:pO,calcCardinalityPosition:kue,calcTerminalLabelPosition:gO,formatUrl:dO,getStylesFromArray:fO,generateId:Eue,random:Cue,runFunc:Tue,entityDecode:Rue,insertTitle:Iue,isLabelCoordinateInPath:bO,parseFontSize:yy,InitIDGenerator:Pue},Due=N(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"ﬂ°°"+n+"¶ß":"ﬂ°"+n+"¶ß"}),t},"encodeEntities"),$c=N(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Lye=N((e,t,{counter:r=0,prefix:n,suffix:a},i)=>i||`${n?`${n}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function Ma(e){return e??null}N(Ma,"handleUndefinedAttr");function bO(e,t){const r=Math.round(e.x),n=Math.round(e.y),a=t.replace(/(\d+\.\d+)/g,i=>Math.round(parseFloat(i)).toString());return a.includes(r.toString())||a.includes(n.toString())}N(bO,"isLabelCoordinateInPath");const Mue=Object.freeze({left:0,top:0,width:16,height:16}),E0=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),xO=Object.freeze({...Mue,...E0}),Oue=Object.freeze({...xO,body:"",hidden:!1}),jue=Object.freeze({width:null,height:null}),Bue=Object.freeze({...jue,...E0}),Fue=(e,t,r,n="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;n=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const l=a.pop(),u=a.pop(),h={provider:a.length>0?a[0]:n,prefix:u,name:l};return Bv(h)?h:null}const i=a[0],s=i.split("-");if(s.length>1){const l={provider:n,prefix:s.shift(),name:s.join("-")};return Bv(l)?l:null}if(r&&n===""){const l={provider:n,prefix:"",name:i};return Bv(l,r)?l:null}return null},Bv=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function zue(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function xN(e,t){const r=zue(e,t);for(const n in Oue)n in E0?n in e&&!(n in r)&&(r[n]=E0[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function Uue(e,t){const r=e.icons,n=e.aliases||Object.create(null),a=Object.create(null);function i(s){if(r[s])return a[s]=[];if(!(s in a)){a[s]=null;const l=n[s]&&n[s].parent,u=l&&i(l);u&&(a[s]=[l].concat(u))}return a[s]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(i),a}function vN(e,t,r){const n=e.icons,a=e.aliases||Object.create(null);let i={};function s(l){i=xN(n[l]||a[l],i)}return s(t),r.forEach(s),xN(e,i)}function $ue(e,t){if(e.icons[t])return vN(e,t,[]);const r=Uue(e,[t])[t];return r?vN(e,t,r):null}const que=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Hue=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function wN(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(que);if(n===null||!n.length)return e;const a=[];let i=n.shift(),s=Hue.test(i);for(;;){if(s){const l=parseFloat(i);isNaN(l)?a.push(i):a.push(Math.ceil(l*t*r)/r)}else a.push(i);if(i=n.shift(),i===void 0)return a.join("");s=!s}}function Gue(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const a=e.indexOf(">",n),i=e.indexOf("</"+t);if(a===-1||i===-1)break;const s=e.indexOf(">",i);if(s===-1)break;r+=e.slice(a+1,i).trim(),e=e.slice(0,n).trim()+e.slice(s+1)}return{defs:r,content:e}}function Wue(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Vue(e,t,r){const n=Gue(e);return Wue(n.defs,t+n.content+r)}const Yue=e=>e==="unset"||e==="undefined"||e==="none";function Que(e,t){const r={...xO,...e},n={...Bue,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let i=r.body;[r,n].forEach(v=>{const T=[],k=v.hFlip,C=v.vFlip;let A=v.rotate;k?C?A+=2:(T.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),T.push("scale(-1 1)"),a.top=a.left=0):C&&(T.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),T.push("scale(1 -1)"),a.top=a.left=0);let P;switch(A<0&&(A-=Math.floor(A/4)*4),A=A%4,A){case 1:P=a.height/2+a.top,T.unshift("rotate(90 "+P.toString()+" "+P.toString()+")");break;case 2:T.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:P=a.width/2+a.left,T.unshift("rotate(-90 "+P.toString()+" "+P.toString()+")");break}A%2===1&&(a.left!==a.top&&(P=a.left,a.left=a.top,a.top=P),a.width!==a.height&&(P=a.width,a.width=a.height,a.height=P)),T.length&&(i=Vue(i,'<g transform="'+T.join(" ")+'">',"</g>"))});const s=n.width,l=n.height,u=a.width,h=a.height;let p,f;s===null?(f=l===null?"1em":l==="auto"?h:l,p=wN(f,u/h)):(p=s==="auto"?u:s,f=l===null?wN(p,h/u):l==="auto"?h:l);const y={},b=(v,T)=>{Yue(T)||(y[v]=T.toString())};b("width",p),b("height",f);const x=[a.left,a.top,u,h];return y.viewBox=x.join(" "),{attributes:y,viewBox:x,body:i}}const Kue=/\sid="(\S+)"/g,Xue="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Jue=0;function Zue(e,t=Xue){const r=[];let n;for(;n=Kue.exec(e);)r.push(n[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(i=>{const s=typeof t=="function"?t(i):t+(Jue++).toString(),l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+s+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function ede(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function dT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var qc=dT();function vO(e){qc=e}var Lp={exec:()=>null};function Mr(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(a,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(Xa.caret,"$1"),r=r.replace(a,s),n},getRegex:()=>new RegExp(r,t)};return n}var Xa={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},tde=/^(?:[ \t]*(?:\n|$))+/,rde=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,nde=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ade=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hT=/(?:[*+-]|\d{1,9}[.)])/,wO=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,SO=Mr(wO).replace(/bull/g,hT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ide=Mr(wO).replace(/bull/g,hT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),pT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,sde=/^[^\n]+/,gT=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ode=Mr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),lde=Mr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,hT).getRegex(),by="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",fT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,cde=Mr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",fT).replace("tag",by).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),TO=Mr(pT).replace("hr",wg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",by).getRegex(),ude=Mr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",TO).getRegex(),mT={blockquote:ude,code:rde,def:ode,fences:nde,heading:ade,hr:wg,html:cde,lheading:SO,list:lde,newline:tde,paragraph:TO,table:Lp,text:sde},SN=Mr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",by).getRegex(),dde={...mT,lheading:ide,table:SN,paragraph:Mr(pT).replace("hr",wg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",SN).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",by).getRegex()},hde={...mT,html:Mr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",fT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Lp,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Mr(pT).replace("hr",wg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",SO).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},pde=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,gde=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,kO=/^( {2,}|\\)\n(?!\s*$)/,fde=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xy=/[\p{P}\p{S}]/u,yT=/[\s\p{P}\p{S}]/u,EO=/[^\s\p{P}\p{S}]/u,mde=Mr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,yT).getRegex(),CO=/(?!~)[\p{P}\p{S}]/u,yde=/(?!~)[\s\p{P}\p{S}]/u,bde=/(?:[^\s\p{P}\p{S}]|~)/u,xde=Mr(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),_O=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,vde=Mr(_O,"u").replace(/punct/g,xy).getRegex(),wde=Mr(_O,"u").replace(/punct/g,CO).getRegex(),AO="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Sde=Mr(AO,"gu").replace(/notPunctSpace/g,EO).replace(/punctSpace/g,yT).replace(/punct/g,xy).getRegex(),Tde=Mr(AO,"gu").replace(/notPunctSpace/g,bde).replace(/punctSpace/g,yde).replace(/punct/g,CO).getRegex(),kde=Mr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,EO).replace(/punctSpace/g,yT).replace(/punct/g,xy).getRegex(),Ede=Mr(/\\(punct)/,"gu").replace(/punct/g,xy).getRegex(),Cde=Mr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_de=Mr(fT).replace("(?:-->|$)","-->").getRegex(),Ade=Mr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_de).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),C0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Nde=Mr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",C0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),NO=Mr(/^!?\[(label)\]\[(ref)\]/).replace("label",C0).replace("ref",gT).getRegex(),LO=Mr(/^!?\[(ref)\](?:\[\])?/).replace("ref",gT).getRegex(),Lde=Mr("reflink|nolink(?!\\()","g").replace("reflink",NO).replace("nolink",LO).getRegex(),TN=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,bT={_backpedal:Lp,anyPunctuation:Ede,autolink:Cde,blockSkip:xde,br:kO,code:gde,del:Lp,emStrongLDelim:vde,emStrongRDelimAst:Sde,emStrongRDelimUnd:kde,escape:pde,link:Nde,nolink:LO,punctuation:mde,reflink:NO,reflinkSearch:Lde,tag:Ade,text:fde,url:Lp},Pde={...bT,link:Mr(/^!?\[(label)\]\((.*?)\)/).replace("label",C0).getRegex(),reflink:Mr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",C0).getRegex()},T1={...bT,emStrongRDelimAst:Tde,emStrongLDelim:wde,url:Mr(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",TN).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Mr(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",TN).getRegex()},Rde={...T1,br:Mr(kO).replace("{2,}","*").getRegex(),text:Mr(T1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},nm={normal:mT,gfm:dde,pedantic:hde},Qh={normal:bT,gfm:T1,breaks:Rde,pedantic:Pde},Ide={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kN=e=>Ide[e];function Fs(e,t){if(t){if(Xa.escapeTest.test(e))return e.replace(Xa.escapeReplace,kN)}else if(Xa.escapeTestNoEncode.test(e))return e.replace(Xa.escapeReplaceNoEncode,kN);return e}function EN(e){try{e=encodeURI(e).replace(Xa.percentDecode,"%")}catch{return null}return e}function CN(e,t){let r=e.replace(Xa.findPipe,(i,s,l)=>{let u=!1,h=s;for(;--h>=0&&l[h]==="\\";)u=!u;return u?"|":" |"}),n=r.split(Xa.splitPipe),a=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(Xa.slashPipe,"|");return n}function Kh(e,t,r){let n=e.length;if(n===0)return"";let a=0;for(;a<n&&e.charAt(n-a-1)===t;)a++;return e.slice(0,n-a)}function Dde(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function _N(e,t,r,n,a){let i=t.href,s=t.title||null,l=e[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;let u={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:s,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,u}function Mde(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let a=n[1];return t.split(`
`).map(i=>{let s=i.match(r.other.beginningSpace);if(s===null)return i;let[l]=s;return l.length>=a.length?i.slice(a.length):i}).join(`
`)}var _0=class{options;rules;lexer;constructor(t){this.options=t||qc}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Kh(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],a=Mde(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let a=Kh(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:Kh(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=Kh(r[0],`
`).split(`
`),a="",i="",s=[];for(;n.length>0;){let l=!1,u=[],h;for(h=0;h<n.length;h++)if(this.rules.other.blockquoteStart.test(n[h]))u.push(n[h]),l=!0;else if(!l)u.push(n[h]);else break;n=n.slice(h);let p=u.join(`
`),f=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${p}`:p,i=i?`${i}
${f}`:f;let y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,s,!0),this.lexer.state.top=y,n.length===0)break;let b=s.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let x=b,v=x.raw+`
`+n.join(`
`),T=this.blockquote(v);s[s.length-1]=T,a=a.substring(0,a.length-x.raw.length)+T.raw,i=i.substring(0,i.length-x.text.length)+T.text;break}else if(b?.type==="list"){let x=b,v=x.raw+`
`+n.join(`
`),T=this.list(v);s[s.length-1]=T,a=a.substring(0,a.length-b.raw.length)+T.raw,i=i.substring(0,i.length-x.raw.length)+T.raw,n=v.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:s,text:i}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),a=n.length>1,i={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");let s=this.rules.other.listItemRegex(n),l=!1;for(;t;){let h=!1,p="",f="";if(!(r=s.exec(t))||this.rules.block.hr.test(t))break;p=r[0],t=t.substring(p.length);let y=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),b=t.split(`
`,1)[0],x=!y.trim(),v=0;if(this.options.pedantic?(v=2,f=y.trimStart()):x?v=r[1].length+1:(v=r[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,f=y.slice(v),v+=r[1].length),x&&this.rules.other.blankLine.test(b)&&(p+=b+`
`,t=t.substring(b.length+1),h=!0),!h){let C=this.rules.other.nextBulletRegex(v),A=this.rules.other.hrRegex(v),P=this.rules.other.fencesBeginRegex(v),M=this.rules.other.headingBeginRegex(v),L=this.rules.other.htmlBeginRegex(v);for(;t;){let D=t.split(`
`,1)[0],q;if(b=D,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),q=b):q=b.replace(this.rules.other.tabCharGlobal,"    "),P.test(b)||M.test(b)||L.test(b)||C.test(b)||A.test(b))break;if(q.search(this.rules.other.nonSpaceChar)>=v||!b.trim())f+=`
`+q.slice(v);else{if(x||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||P.test(y)||M.test(y)||A.test(y))break;f+=`
`+b}!x&&!b.trim()&&(x=!0),p+=D+`
`,t=t.substring(D.length+1),y=q.slice(v)}}i.loose||(l?i.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(l=!0));let T=null,k;this.options.gfm&&(T=this.rules.other.listIsTask.exec(f),T&&(k=T[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:p,task:!!T,checked:k,loose:!1,text:f,tokens:[]}),i.raw+=p}let u=i.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let h=0;h<i.items.length;h++)if(this.lexer.state.top=!1,i.items[h].tokens=this.lexer.blockTokens(i.items[h].text,[]),!i.loose){let p=i.items[h].tokens.filter(y=>y.type==="space"),f=p.length>0&&p.some(y=>this.rules.other.anyLine.test(y.raw));i.loose=f}if(i.loose)for(let h=0;h<i.items.length;h++)i.items[h].loose=!0;return i}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:a,title:i}}}table(t){let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=CN(r[1]),a=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===a.length){for(let l of a)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<n.length;l++)s.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:s.align[l]});for(let l of i)s.rows.push(CN(l,s.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[h]})));return s}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Kh(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=Dde(r[2],"()");if(s===-2)return;if(s>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let a=r[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(a);s&&(a=s[1],i=s[3])}else i=r[3]?r[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),_N(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=r[a.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return _N(n,i,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...a[0]].length-1,s,l,u=i,h=0,p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,r=r.slice(-1*t.length+i);(a=p.exec(r))!=null;){if(s=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!s)continue;if(l=[...s].length,a[3]||a[4]){u+=l;continue}else if((a[5]||a[6])&&i%3&&!((i+l)%3)){h+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+h);let f=[...a[0]][0].length,y=t.slice(0,i+a.index+f+l);if(Math.min(i,l)%2){let x=y.slice(1,-1);return{type:"em",raw:y,text:x,tokens:this.lexer.inlineTokens(x)}}let b=y.slice(2,-2);return{type:"strong",raw:y,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,a;return r[2]==="@"?(n=r[1],a="mailto:"+n):(n=r[1],a=n),{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let n,a;if(r[2]==="@")n=r[0],a="mailto:"+n;else{let i;do i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(i!==r[0]);n=r[0],r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},ys=class k1{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||qc,this.options.tokenizer=this.options.tokenizer||new _0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Xa,block:nm.normal,inline:Qh.normal};this.options.pedantic?(r.block=nm.pedantic,r.inline=Qh.pedantic):this.options.gfm&&(r.block=nm.gfm,this.options.breaks?r.inline=Qh.breaks:r.inline=Qh.gfm),this.tokenizer.rules=r}static get rules(){return{block:nm,inline:Qh}}static lex(t,r){return new k1(r).lex(t)}static lexInline(t,r){return new k1(r).inlineTokens(t)}lex(t){t=t.replace(Xa.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){for(this.options.pedantic&&(t=t.replace(Xa.tabCharGlobal,"    ").replace(Xa.spaceLine,""));t;){let a;if(this.options.extensions?.block?.some(s=>(a=s.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let s=r.at(-1);a.raw.length===1&&s!==void 0?s.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.at(-1).src=s.text):r.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),r.push(a);continue}let i=t;if(this.options.extensions?.startBlock){let s=1/0,l=t.slice(1),u;this.options.extensions.startBlock.forEach(h=>{u=h.call({lexer:this},l),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(i=t.substring(0,s+1))}if(this.state.top&&(a=this.tokenizer.paragraph(i))){let s=r.at(-1);n&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(a),n=i.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(a);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n=t,a=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,s="";for(;t;){i||(s=""),i=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let h=r.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):r.push(l);continue}if(l=this.tokenizer.emStrong(t,n,s)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),r.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),r.push(l);continue}let u=t;if(this.options.extensions?.startInline){let h=1/0,p=t.slice(1),f;this.options.extensions.startInline.forEach(y=>{f=y.call({lexer:this},p),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(u=t.substring(0,h+1))}if(l=this.tokenizer.inlineText(u)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(s=l.raw.slice(-1)),i=!0;let h=r.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):r.push(l);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},A0=class{options;parser;constructor(t){this.options=t||qc}space(t){return""}code({text:t,lang:r,escaped:n}){let a=(r||"").match(Xa.notSpaceStart)?.[0],i=t.replace(Xa.endingNewline,"")+`
`;return a?'<pre><code class="language-'+Fs(a)+'">'+(n?i:Fs(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Fs(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,a="";for(let l=0;l<t.items.length;l++){let u=t.items[l];a+=this.listitem(u)}let i=r?"ol":"ul",s=r&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+a+"</"+i+`>
`}listitem(t){let r="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+Fs(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);r+=this.tablerow({text:n});let a="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let l=0;l<s.length;l++)n+=this.tablecell(s[l]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Fs(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let a=this.parser.parseInline(n),i=EN(t);if(i===null)return a;t=i;let s='<a href="'+t+'"';return r&&(s+=' title="'+Fs(r)+'"'),s+=">"+a+"</a>",s}image({href:t,title:r,text:n,tokens:a}){a&&(n=this.parser.parseInline(a,this.parser.textRenderer));let i=EN(t);if(i===null)return Fs(n);t=i;let s=`<img src="${t}" alt="${n}"`;return r&&(s+=` title="${Fs(r)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Fs(t.text)}},xT=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},bs=class E1{options;renderer;textRenderer;constructor(t){this.options=t||qc,this.options.renderer=this.options.renderer||new A0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new xT}static parse(t,r){return new E1(r).parse(t)}static parseInline(t,r){return new E1(r).parseInline(t)}parse(t,r=!0){let n="";for(let a=0;a<t.length;a++){let i=t[a];if(this.options.extensions?.renderers?.[i.type]){let l=i,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){n+=u||"";continue}}let s=i;switch(s.type){case"space":{n+=this.renderer.space(s);continue}case"hr":{n+=this.renderer.hr(s);continue}case"heading":{n+=this.renderer.heading(s);continue}case"code":{n+=this.renderer.code(s);continue}case"table":{n+=this.renderer.table(s);continue}case"blockquote":{n+=this.renderer.blockquote(s);continue}case"list":{n+=this.renderer.list(s);continue}case"html":{n+=this.renderer.html(s);continue}case"def":{n+=this.renderer.def(s);continue}case"paragraph":{n+=this.renderer.paragraph(s);continue}case"text":{let l=s,u=this.renderer.text(l);for(;a+1<t.length&&t[a+1].type==="text";)l=t[++a],u+=`
`+this.renderer.text(l);r?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(t,r=this.renderer){let n="";for(let a=0;a<t.length;a++){let i=t[a];if(this.options.extensions?.renderers?.[i.type]){let l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=l||"";continue}}let s=i;switch(s.type){case"escape":{n+=r.text(s);break}case"html":{n+=r.html(s);break}case"link":{n+=r.link(s);break}case"image":{n+=r.image(s);break}case"strong":{n+=r.strong(s);break}case"em":{n+=r.em(s);break}case"codespan":{n+=r.codespan(s);break}case"br":{n+=r.br(s);break}case"del":{n+=r.del(s);break}case"text":{n+=r.text(s);break}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}},lp=class{options;block;constructor(t){this.options=t||qc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?ys.lex:ys.lexInline}provideParser(){return this.block?bs.parse:bs.parseInline}},Ode=class{defaults=dT();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=bs;Renderer=A0;TextRenderer=xT;Lexer=ys;Tokenizer=_0;Hooks=lp;constructor(...t){this.use(...t)}walkTokens(t,r){let n=[];for(let a of t)switch(n=n.concat(r.call(this,a)),a.type){case"table":{let i=a;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,r));for(let s of i.rows)for(let l of s)n=n.concat(this.walkTokens(l.tokens,r));break}case"list":{let i=a;n=n.concat(this.walkTokens(i.items,r));break}default:{let i=a;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let l=i[s].flat(1/0);n=n.concat(this.walkTokens(l,r))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=r.renderers[i.name];s?r.renderers[i.name]=function(...l){let u=i.renderer.apply(this,l);return u===!1&&(u=s.apply(this,l)),u}:r.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=r[i.level];s?s.unshift(i.tokenizer):r[i.level]=[i.tokenizer],i.start&&(i.level==="block"?r.startBlock?r.startBlock.push(i.start):r.startBlock=[i.start]:i.level==="inline"&&(r.startInline?r.startInline.push(i.start):r.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(r.childTokens[i.name]=i.childTokens)}),a.extensions=r),n.renderer){let i=this.defaults.renderer||new A0(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let l=s,u=n.renderer[l],h=i[l];i[l]=(...p)=>{let f=u.apply(i,p);return f===!1&&(f=h.apply(i,p)),f||""}}a.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new _0(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let l=s,u=n.tokenizer[l],h=i[l];i[l]=(...p)=>{let f=u.apply(i,p);return f===!1&&(f=h.apply(i,p)),f}}a.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new lp;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let l=s,u=n.hooks[l],h=i[l];lp.passThroughHooks.has(s)?i[l]=p=>{if(this.defaults.async&&lp.passThroughHooksRespectAsync.has(s))return(async()=>{let y=await u.call(i,p);return h.call(i,y)})();let f=u.call(i,p);return h.call(i,f)}:i[l]=(...p)=>{if(this.defaults.async)return(async()=>{let y=await u.apply(i,p);return y===!1&&(y=await h.apply(i,p)),y})();let f=u.apply(i,p);return f===!1&&(f=h.apply(i,p)),f}}a.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;a.walkTokens=function(l){let u=[];return u.push(s.call(this,l)),i&&(u=u.concat(i.call(this,l))),u}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return ys.lex(t,r??this.defaults)}parser(t,r){return bs.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let a={...n},i={...this.defaults,...a},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let l=i.hooks?await i.hooks.preprocess(r):r,u=await(i.hooks?await i.hooks.provideLexer():t?ys.lex:ys.lexInline)(l,i),h=i.hooks?await i.hooks.processAllTokens(u):u;i.walkTokens&&await Promise.all(this.walkTokens(h,i.walkTokens));let p=await(i.hooks?await i.hooks.provideParser():t?bs.parse:bs.parseInline)(h,i);return i.hooks?await i.hooks.postprocess(p):p})().catch(s);try{i.hooks&&(r=i.hooks.preprocess(r));let l=(i.hooks?i.hooks.provideLexer():t?ys.lex:ys.lexInline)(r,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let u=(i.hooks?i.hooks.provideParser():t?bs.parse:bs.parseInline)(l,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(l){return s(l)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+Fs(n.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(n);throw n}}},Lc=new Ode;function Ur(e,t){return Lc.parse(e,t)}Ur.options=Ur.setOptions=function(e){return Lc.setOptions(e),Ur.defaults=Lc.defaults,vO(Ur.defaults),Ur};Ur.getDefaults=dT;Ur.defaults=qc;Ur.use=function(...e){return Lc.use(...e),Ur.defaults=Lc.defaults,vO(Ur.defaults),Ur};Ur.walkTokens=function(e,t){return Lc.walkTokens(e,t)};Ur.parseInline=Lc.parseInline;Ur.Parser=bs;Ur.parser=bs.parse;Ur.Renderer=A0;Ur.TextRenderer=xT;Ur.Lexer=ys;Ur.lexer=ys.lex;Ur.Tokenizer=_0;Ur.Hooks=lp;Ur.parse=Ur;Ur.options;Ur.setOptions;Ur.use;Ur.walkTokens;Ur.parseInline;bs.parse;ys.lex;function PO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var a=n.reduce(function(l,u){var h=u.match(/\n([\t ]+|(?!\s).)/g);return h?l.concat(h.map(function(p){var f,y;return(y=(f=p.match(/[\t ]/g))===null||f===void 0?void 0:f.length)!==null&&y!==void 0?y:0})):l},[]);if(a.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");n=n.map(function(l){return l.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var s=n[0];return t.forEach(function(l,u){var h=s.match(/(?:^|\n)( *)$/),p=h?h[1]:"",f=l;typeof l=="string"&&l.includes(`
`)&&(f=String(l).split(`
`).map(function(y,b){return b===0?y:""+p+y}).join(`
`)),s+=f+n[u+1]}),s}var jde={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},C1=new Map,RO=new Map,Bde=N(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(qe.debug("Registering icon pack:",t.name),"loader"in t)RO.set(t.name,t.loader);else if("icons"in t)C1.set(t.name,t.icons);else throw qe.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),IO=N(async(e,t)=>{const r=Fue(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let a=C1.get(n);if(!a){const s=RO.get(n);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await s(),prefix:n},C1.set(n,a)}catch(l){throw qe.error(l),new Error(`Failed to load icon set: ${r.prefix}`)}}const i=$ue(a,r.name);if(!i)throw new Error(`Icon not found: ${e}`);return i},"getRegisteredIconData"),Fde=N(async e=>{try{return await IO(e),!0}catch{return!1}},"isIconAvailable"),Sg=N(async(e,t,r)=>{let n;try{n=await IO(e,t?.fallbackPrefix)}catch(s){qe.error(s),n=jde}const a=Que(n,t),i=ede(Zue(a.body),{...a.attributes,...r});return rs(i,Ia())},"getIconSVG");function DO(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=PO(n);return t===!1?a.replace(/ /g,"&nbsp;"):a}N(DO,"preprocessMarkdown");function MO(e,t={}){const r=DO(e,t),n=Ur.lexer(r),a=[[]];let i=0;function s(l,u="normal"){l.type==="text"?l.text.split(`
`).forEach((p,f)=>{f!==0&&(i++,a.push([])),p.split(" ").forEach(y=>{y=y.replace(/&#39;/g,"'"),y&&a[i].push({content:y,type:u})})}):l.type==="strong"||l.type==="em"?l.tokens.forEach(h=>{s(h,l.type)}):l.type==="html"&&a[i].push({content:l.text,type:"normal"})}return N(s,"processNode"),n.forEach(l=>{l.type==="paragraph"?l.tokens?.forEach(u=>{s(u)}):l.type==="html"?a[i].push({content:l.text,type:"normal"}):a[i].push({content:l.raw,type:"normal"})}),a}N(MO,"markdownToLines");function OO(e,{markdownAutoWrap:t}={}){const r=Ur.lexer(e);function n(a){return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${a.tokens?.map(n).join("")}</strong>`:a.type==="em"?`<em>${a.tokens?.map(n).join("")}</em>`:a.type==="paragraph"?`<p>${a.tokens?.map(n).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:(qe.warn(`Unsupported markdown: ${a.type}`),a.raw)}return N(n,"output"),r.map(n).join("")}N(OO,"markdownToHTML");function jO(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}N(jO,"splitTextToChars");function BO(e,t){const r=jO(t.content);return vT(e,[],r,t.type)}N(BO,"splitWordToFitWidth");function vT(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[a,...i]=r,s=[...t,a];return e([{content:s.join(""),type:n}])?vT(e,s,i,n):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}N(vT,"splitWordToFitWidthRecursion");function FO(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return N0(e,t)}N(FO,"splitLineToFitWidth");function N0(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const i=e.shift()??{content:" ",type:"normal"},s=[...n];if(a!==""&&s.push({content:a,type:"normal"}),s.push(i),t(s))return N0(e,t,r,s);if(n.length>0)r.push(n),e.unshift(i);else if(i.content){const[l,u]=BO(t,i);r.push([l]),u.content&&e.unshift(u)}return N0(e,t,r)}N(N0,"splitLineToFitWidthRecursion");function _1(e,t){t&&e.attr("style",t)}N(_1,"applyStyle");async function zO(e,t,r,n,a=!1,i=Ia()){const s=e.append("foreignObject");s.attr("width",`${10*r}px`),s.attr("height",`${10*r}px`);const l=s.append("xhtml:div"),u=pd(t.label)?await NS(t.label.replace(Rd.lineBreakRegex,`
`),i):rs(t.label,i),h=t.isNode?"nodeLabel":"edgeLabel",p=l.append("span");p.html(u),_1(p,t.labelStyle),p.attr("class",`${h} ${n}`),_1(l,t.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("line-height","1.5"),l.style("max-width",r+"px"),l.style("text-align","center"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&l.attr("class","labelBkg");let f=l.node().getBoundingClientRect();return f.width===r&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",r+"px"),f=l.node().getBoundingClientRect()),s.node()}N(zO,"addHtmlSpan");function vy(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}N(vy,"createTspan");function UO(e,t,r){const n=e.append("text"),a=vy(n,1,t);wy(a,r);const i=a.node().getComputedTextLength();return n.remove(),i}N(UO,"computeWidthOfText");function zde(e,t,r){const n=e.append("text"),a=vy(n,1,t);wy(a,[{content:r,type:"normal"}]);const i=a.node()?.getBoundingClientRect();return i&&n.remove(),i}N(zde,"computeDimensionOfText");function $O(e,t,r,n=!1){const i=t.append("g"),s=i.insert("rect").attr("class","background").attr("style","stroke: none"),l=i.append("text").attr("y","-10.1");let u=0;for(const h of r){const p=N(y=>UO(i,1.1,y)<=e,"checkWidth"),f=p(h)?[h]:FO(h,p);for(const y of f){const b=vy(l,u,1.1);wy(b,y),u++}}if(n){const h=l.node().getBBox(),p=2;return s.attr("x",h.x-p).attr("y",h.y-p).attr("width",h.width+2*p).attr("height",h.height+2*p),i.node()}else return l.node()}N($O,"createFormattedText");function wy(e,t){e.text(""),t.forEach((r,n)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?a.text(r.content):a.text(" "+r.content)})}N(wy,"updateTextContentAndStyles");async function qO(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(a,i,s)=>(r.push((async()=>{const l=`${i}:${s}`;return await Fde(l)?await Sg(l,void 0,{class:"label-icon"}):`<i class='${rs(a,t).replace(":"," ")}'></i>`})()),a));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}N(qO,"replaceIconSubstring");var Dl=N(async(e,t="",{style:r="",isTitle:n=!1,classes:a="",useHtmlLabels:i=!0,isNode:s=!0,width:l=200,addSvgBackground:u=!1}={},h)=>{if(qe.debug("XYZ createText",t,r,n,a,i,s,"addSvgBackground: ",u),i){const p=OO(t,h),f=await qO($c(p),h),y=t.replace(/\\\\/g,"\\"),b={isNode:s,label:pd(t)?y:f,labelStyle:r.replace("fill:","color:")};return await zO(e,b,l,a,u,h)}else{const p=t.replace(/<br\s*\/?>/g,"<br/>"),f=MO(p.replace("<br>","<br/>"),h),y=$O(l,e,f,t?u:!1);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Lr(y).attr("style",b)}else{const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Lr(y).select("rect").attr("style",b.replace(/background:/g,"fill:"));const x=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Lr(y).select("text").attr("style",x)}return y}},"createText");function Fv(e,t,r){if(e&&e.length){const[n,a]=t,i=Math.PI/180*r,s=Math.cos(i),l=Math.sin(i);for(const u of e){const[h,p]=u;u[0]=(h-n)*s-(p-a)*l+n,u[1]=(h-n)*l+(p-a)*s+a}}}function Ude(e,t){return e[0]===t[0]&&e[1]===t[1]}function $de(e,t,r,n=1){const a=r,i=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,l=[0,0];if(a)for(const h of s)Fv(h,l,a);const u=(function(h,p,f){const y=[];for(const C of h){const A=[...C];Ude(A[0],A[A.length-1])||A.push([A[0][0],A[0][1]]),A.length>2&&y.push(A)}const b=[];p=Math.max(p,.1);const x=[];for(const C of y)for(let A=0;A<C.length-1;A++){const P=C[A],M=C[A+1];if(P[1]!==M[1]){const L=Math.min(P[1],M[1]);x.push({ymin:L,ymax:Math.max(P[1],M[1]),x:L===P[1]?P[0]:M[0],islope:(M[0]-P[0])/(M[1]-P[1])})}}if(x.sort(((C,A)=>C.ymin<A.ymin?-1:C.ymin>A.ymin?1:C.x<A.x?-1:C.x>A.x?1:C.ymax===A.ymax?0:(C.ymax-A.ymax)/Math.abs(C.ymax-A.ymax))),!x.length)return b;let v=[],T=x[0].ymin,k=0;for(;v.length||x.length;){if(x.length){let C=-1;for(let A=0;A<x.length&&!(x[A].ymin>T);A++)C=A;x.splice(0,C+1).forEach((A=>{v.push({s:T,edge:A})}))}if(v=v.filter((C=>!(C.edge.ymax<=T))),v.sort(((C,A)=>C.edge.x===A.edge.x?0:(C.edge.x-A.edge.x)/Math.abs(C.edge.x-A.edge.x))),(f!==1||k%p==0)&&v.length>1)for(let C=0;C<v.length;C+=2){const A=C+1;if(A>=v.length)break;const P=v[C].edge,M=v[A].edge;b.push([[Math.round(P.x),T],[Math.round(M.x),T]])}T+=f,v.forEach((C=>{C.edge.x=C.edge.x+f*C.edge.islope})),k++}return b})(s,i,n);if(a){for(const h of s)Fv(h,l,-a);(function(h,p,f){const y=[];h.forEach((b=>y.push(...b))),Fv(y,p,f)})(u,l,-a)}return u}function Tg(e,t){var r;const n=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let i=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(i=a),$de(e,a,n,i||1)}class wT{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=Tg(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const a of t)n.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return n}}function Sy(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class qde extends wT{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const a=Tg(t,Object.assign({},r,{hachureGap:n})),i=Math.PI/180*r.hachureAngle,s=[],l=.5*n*Math.cos(i),u=.5*n*Math.sin(i);for(const[h,p]of a)Sy([h,p])&&s.push([[h[0]-l,h[1]+u],[...p]],[[h[0]+l,h[1]-u],[...p]]);return{type:"fillSketch",ops:this.renderLines(s,r)}}}class Hde extends wT{fillPolygons(t,r){const n=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),i=this._fillPolygons(t,a);return n.ops=n.ops.concat(i.ops),n}}class Gde{constructor(t){this.helper=t}fillPolygons(t,r){const n=Tg(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=a/4;for(const l of t){const u=Sy(l),h=u/a,p=Math.ceil(h)-1,f=u-p*a,y=(l[0][0]+l[1][0])/2-a/4,b=Math.min(l[0][1],l[1][1]);for(let x=0;x<p;x++){const v=b+f+x*a,T=y-s+2*Math.random()*s,k=v-s+2*Math.random()*s,C=this.helper.ellipse(T,k,i,i,r);n.push(...C.ops)}}return{type:"fillSketch",ops:n}}}class Wde{constructor(t){this.helper=t}fillPolygons(t,r){const n=Tg(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,i=[];return t.forEach((s=>{const l=Sy(s),u=Math.floor(l/(n+a)),h=(l+a-u*(n+a))/2;let p=s[0],f=s[1];p[0]>f[0]&&(p=s[1],f=s[0]);const y=Math.atan((f[1]-p[1])/(f[0]-p[0]));for(let b=0;b<u;b++){const x=b*(n+a),v=x+n,T=[p[0]+x*Math.cos(y)+h*Math.cos(y),p[1]+x*Math.sin(y)+h*Math.sin(y)],k=[p[0]+v*Math.cos(y)+h*Math.cos(y),p[1]+v*Math.sin(y)+h*Math.sin(y)];i.push(...this.helper.doubleLineOps(T[0],T[1],k[0],k[1],r))}})),i}}class Vde{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?n:r.zigzagOffset,i=Tg(t,r=Object.assign({},r,{hachureGap:n+a}));return{type:"fillSketch",ops:this.zigzagLines(i,a,r)}}zigzagLines(t,r,n){const a=[];return t.forEach((i=>{const s=Sy(i),l=Math.round(s/(2*r));let u=i[0],h=i[1];u[0]>h[0]&&(u=i[1],h=i[0]);const p=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let f=0;f<l;f++){const y=2*f*r,b=2*(f+1)*r,x=Math.sqrt(2*Math.pow(r,2)),v=[u[0]+y*Math.cos(p),u[1]+y*Math.sin(p)],T=[u[0]+b*Math.cos(p),u[1]+b*Math.sin(p)],k=[v[0]+x*Math.cos(p+Math.PI/4),v[1]+x*Math.sin(p+Math.PI/4)];a.push(...this.helper.doubleLineOps(v[0],v[1],k[0],k[1],n),...this.helper.doubleLineOps(k[0],k[1],T[0],T[1],n))}})),a}}const li={};class Yde{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Qde=0,zv=1,AN=2,am={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Uv(e,t){return e.type===t}function ST(e){const t=[],r=(function(s){const l=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))l[l.length]={type:Qde,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];l[l.length]={type:zv,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return l[l.length]={type:AN,text:""},l})(e);let n="BOD",a=0,i=r[a];for(;!Uv(i,AN);){let s=0;const l=[];if(n==="BOD"){if(i.text!=="M"&&i.text!=="m")return ST("M0,0"+e);a++,s=am[i.text],n=i.text}else Uv(i,zv)?s=am[n]:(a++,s=am[i.text],n=i.text);if(!(a+s<r.length))throw new Error("Path data ended short");for(let u=a;u<a+s;u++){const h=r[u];if(!Uv(h,zv))throw new Error("Param not a number: "+n+","+h.text);l[l.length]=+h.text}if(typeof am[n]!="number")throw new Error("Bad segment: "+n);{const u={key:n,data:l};t.push(u),a+=s,i=r[a],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function HO(e){let t=0,r=0,n=0,a=0;const i=[];for(const{key:s,data:l}of e)switch(s){case"M":i.push({key:"M",data:[...l]}),[t,r]=l,[n,a]=l;break;case"m":t+=l[0],r+=l[1],i.push({key:"M",data:[t,r]}),n=t,a=r;break;case"L":i.push({key:"L",data:[...l]}),[t,r]=l;break;case"l":t+=l[0],r+=l[1],i.push({key:"L",data:[t,r]});break;case"C":i.push({key:"C",data:[...l]}),t=l[4],r=l[5];break;case"c":{const u=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"C",data:u}),t=u[4],r=u[5];break}case"Q":i.push({key:"Q",data:[...l]}),t=l[2],r=l[3];break;case"q":{const u=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"Q",data:u}),t=u[2],r=u[3];break}case"A":i.push({key:"A",data:[...l]}),t=l[5],r=l[6];break;case"a":t+=l[5],r+=l[6],i.push({key:"A",data:[l[0],l[1],l[2],l[3],l[4],t,r]});break;case"H":i.push({key:"H",data:[...l]}),t=l[0];break;case"h":t+=l[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...l]}),r=l[0];break;case"v":r+=l[0],i.push({key:"V",data:[r]});break;case"S":i.push({key:"S",data:[...l]}),t=l[2],r=l[3];break;case"s":{const u=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"S",data:u}),t=u[2],r=u[3];break}case"T":i.push({key:"T",data:[...l]}),t=l[0],r=l[1];break;case"t":t+=l[0],r+=l[1],i.push({key:"T",data:[t,r]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=n,r=a}return i}function GO(e){const t=[];let r="",n=0,a=0,i=0,s=0,l=0,u=0;for(const{key:h,data:p}of e){switch(h){case"M":t.push({key:"M",data:[...p]}),[n,a]=p,[i,s]=p;break;case"C":t.push({key:"C",data:[...p]}),n=p[4],a=p[5],l=p[2],u=p[3];break;case"L":t.push({key:"L",data:[...p]}),[n,a]=p;break;case"H":n=p[0],t.push({key:"L",data:[n,a]});break;case"V":a=p[0],t.push({key:"L",data:[n,a]});break;case"S":{let f=0,y=0;r==="C"||r==="S"?(f=n+(n-l),y=a+(a-u)):(f=n,y=a),t.push({key:"C",data:[f,y,...p]}),l=p[0],u=p[1],n=p[2],a=p[3];break}case"T":{const[f,y]=p;let b=0,x=0;r==="Q"||r==="T"?(b=n+(n-l),x=a+(a-u)):(b=n,x=a);const v=n+2*(b-n)/3,T=a+2*(x-a)/3,k=f+2*(b-f)/3,C=y+2*(x-y)/3;t.push({key:"C",data:[v,T,k,C,f,y]}),l=b,u=x,n=f,a=y;break}case"Q":{const[f,y,b,x]=p,v=n+2*(f-n)/3,T=a+2*(y-a)/3,k=b+2*(f-b)/3,C=x+2*(y-x)/3;t.push({key:"C",data:[v,T,k,C,b,x]}),l=f,u=y,n=b,a=x;break}case"A":{const f=Math.abs(p[0]),y=Math.abs(p[1]),b=p[2],x=p[3],v=p[4],T=p[5],k=p[6];f===0||y===0?(t.push({key:"C",data:[n,a,T,k,T,k]}),n=T,a=k):(n!==T||a!==k)&&(WO(n,a,T,k,f,y,b,x,v).forEach((function(C){t.push({key:"C",data:C})})),n=T,a=k);break}case"Z":t.push({key:"Z",data:[]}),n=i,a=s}r=h}return t}function Xh(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function WO(e,t,r,n,a,i,s,l,u,h){const p=(f=s,Math.PI*f/180);var f;let y=[],b=0,x=0,v=0,T=0;if(h)[b,x,v,T]=h;else{[e,t]=Xh(e,t,-p),[r,n]=Xh(r,n,-p);const j=(e-r)/2,O=(t-n)/2;let $=j*j/(a*a)+O*O/(i*i);$>1&&($=Math.sqrt($),a*=$,i*=$);const I=a*a,G=i*i,V=I*G-I*O*O-G*j*j,oe=I*O*O+G*j*j,U=(l===u?-1:1)*Math.sqrt(Math.abs(V/oe));v=U*a*O/i+(e+r)/2,T=U*-i*j/a+(t+n)/2,b=Math.asin(parseFloat(((t-T)/i).toFixed(9))),x=Math.asin(parseFloat(((n-T)/i).toFixed(9))),e<v&&(b=Math.PI-b),r<v&&(x=Math.PI-x),b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),u&&b>x&&(b-=2*Math.PI),!u&&x>b&&(x-=2*Math.PI)}let k=x-b;if(Math.abs(k)>120*Math.PI/180){const j=x,O=r,$=n;x=u&&x>b?b+120*Math.PI/180*1:b+120*Math.PI/180*-1,y=WO(r=v+a*Math.cos(x),n=T+i*Math.sin(x),O,$,a,i,s,0,u,[x,j,v,T])}k=x-b;const C=Math.cos(b),A=Math.sin(b),P=Math.cos(x),M=Math.sin(x),L=Math.tan(k/4),D=4/3*a*L,q=4/3*i*L,Q=[e,t],F=[e+D*A,t-q*C],K=[r+D*M,n-q*P],W=[r,n];if(F[0]=2*Q[0]-F[0],F[1]=2*Q[1]-F[1],h)return[F,K,W].concat(y);{y=[F,K,W].concat(y);const j=[];for(let O=0;O<y.length;O+=3){const $=Xh(y[O][0],y[O][1],p),I=Xh(y[O+1][0],y[O+1][1],p),G=Xh(y[O+2][0],y[O+2][1],p);j.push([$[0],$[1],I[0],I[1],G[0],G[1]])}return j}}const Kde={randOffset:function(e,t){return Vt(e,t)},randOffsetWithRange:function(e,t,r){return L0(e,t,r)},ellipse:function(e,t,r,n,a){const i=YO(r,n,a);return A1(e,t,a,i).opset},doubleLineOps:function(e,t,r,n,a){return Nl(e,t,r,n,a,!0)}};function VO(e,t,r,n,a){return{type:"path",ops:Nl(e,t,r,n,a)}}function Lm(e,t,r){const n=(e||[]).length;if(n>2){const a=[];for(let i=0;i<n-1;i++)a.push(...Nl(e[i][0],e[i][1],e[i+1][0],e[i+1][1],r));return t&&a.push(...Nl(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return n===2?VO(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function Xde(e,t,r,n,a){return(function(i,s){return Lm(i,!0,s)})([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],a)}function NN(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=im(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:im(r[0],1.5*(1+.22*t.roughness),RN(t));for(let i=1;i<r.length;i++){const s=r[i];if(s.length){const l=im(s,1*(1+.2*t.roughness),t),u=t.disableMultiStroke?[]:im(s,1.5*(1+.22*t.roughness),RN(t));for(const h of l)h.op!=="move"&&n.push(h);for(const h of u)h.op!=="move"&&a.push(h)}}return{type:"path",ops:n.concat(a)}}return{type:"path",ops:[]}}function YO(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),i=2*Math.PI/a;let s=Math.abs(e/2),l=Math.abs(t/2);const u=1-r.curveFitting;return s+=Vt(s*u,r),l+=Vt(l*u,r),{increment:i,rx:s,ry:l}}function A1(e,t,r,n){const[a,i]=IN(n.increment,e,t,n.rx,n.ry,1,n.increment*L0(.1,L0(.4,1,r),r),r);let s=P0(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[l]=IN(n.increment,e,t,n.rx,n.ry,1.5,0,r),u=P0(l,null,r);s=s.concat(u)}return{estimatedPoints:i,opset:{type:"path",ops:s}}}function LN(e,t,r,n,a,i,s,l,u){const h=e,p=t;let f=Math.abs(r/2),y=Math.abs(n/2);f+=Vt(.01*f,u),y+=Vt(.01*y,u);let b=a,x=i;for(;b<0;)b+=2*Math.PI,x+=2*Math.PI;x-b>2*Math.PI&&(b=0,x=2*Math.PI);const v=2*Math.PI/u.curveStepCount,T=Math.min(v/2,(x-b)/2),k=DN(T,h,p,f,y,b,x,1,u);if(!u.disableMultiStroke){const C=DN(T,h,p,f,y,b,x,1.5,u);k.push(...C)}return s&&(l?k.push(...Nl(h,p,h+f*Math.cos(b),p+y*Math.sin(b),u),...Nl(h,p,h+f*Math.cos(x),p+y*Math.sin(x),u)):k.push({op:"lineTo",data:[h,p]},{op:"lineTo",data:[h+f*Math.cos(b),p+y*Math.sin(b)]})),{type:"path",ops:k}}function PN(e,t){const r=GO(HO(ST(e))),n=[];let a=[0,0],i=[0,0];for(const{key:s,data:l}of r)switch(s){case"M":i=[l[0],l[1]],a=[l[0],l[1]];break;case"L":n.push(...Nl(i[0],i[1],l[0],l[1],t)),i=[l[0],l[1]];break;case"C":{const[u,h,p,f,y,b]=l;n.push(...Jde(u,h,p,f,y,b,i,t)),i=[y,b];break}case"Z":n.push(...Nl(i[0],i[1],a[0],a[1],t)),i=[a[0],a[1]]}return{type:"path",ops:n}}function $v(e,t){const r=[];for(const n of e)if(n.length){const a=t.maxRandomnessOffset||0,i=n.length;if(i>2){r.push({op:"move",data:[n[0][0]+Vt(a,t),n[0][1]+Vt(a,t)]});for(let s=1;s<i;s++)r.push({op:"lineTo",data:[n[s][0]+Vt(a,t),n[s][1]+Vt(a,t)]})}}return{type:"fillPath",ops:r}}function Ou(e,t){return(function(r,n){let a=r.fillStyle||"hachure";if(!li[a])switch(a){case"zigzag":li[a]||(li[a]=new qde(n));break;case"cross-hatch":li[a]||(li[a]=new Hde(n));break;case"dots":li[a]||(li[a]=new Gde(n));break;case"dashed":li[a]||(li[a]=new Wde(n));break;case"zigzag-line":li[a]||(li[a]=new Vde(n));break;default:a="hachure",li[a]||(li[a]=new wT(n))}return li[a]})(t,Kde).fillPolygons(e,t)}function RN(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function QO(e){return e.randomizer||(e.randomizer=new Yde(e.seed||0)),e.randomizer.next()}function L0(e,t,r,n=1){return r.roughness*n*(QO(r)*(t-e)+e)}function Vt(e,t,r=1){return L0(-e,e,t,r)}function Nl(e,t,r,n,a,i=!1){const s=i?a.disableMultiStrokeFill:a.disableMultiStroke,l=N1(e,t,r,n,a,!0,!1);if(s)return l;const u=N1(e,t,r,n,a,!0,!0);return l.concat(u)}function N1(e,t,r,n,a,i,s){const l=Math.pow(e-r,2)+Math.pow(t-n,2),u=Math.sqrt(l);let h=1;h=u<200?1:u>500?.4:-.0016668*u+1.233334;let p=a.maxRandomnessOffset||0;p*p*100>l&&(p=u/10);const f=p/2,y=.2+.2*QO(a);let b=a.bowing*a.maxRandomnessOffset*(n-t)/200,x=a.bowing*a.maxRandomnessOffset*(e-r)/200;b=Vt(b,a,h),x=Vt(x,a,h);const v=[],T=()=>Vt(f,a,h),k=()=>Vt(p,a,h),C=a.preserveVertices;return s?v.push({op:"move",data:[e+(C?0:T()),t+(C?0:T())]}):v.push({op:"move",data:[e+(C?0:Vt(p,a,h)),t+(C?0:Vt(p,a,h))]}),s?v.push({op:"bcurveTo",data:[b+e+(r-e)*y+T(),x+t+(n-t)*y+T(),b+e+2*(r-e)*y+T(),x+t+2*(n-t)*y+T(),r+(C?0:T()),n+(C?0:T())]}):v.push({op:"bcurveTo",data:[b+e+(r-e)*y+k(),x+t+(n-t)*y+k(),b+e+2*(r-e)*y+k(),x+t+2*(n-t)*y+k(),r+(C?0:k()),n+(C?0:k())]}),v}function im(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+Vt(t,r),e[0][1]+Vt(t,r)]),n.push([e[0][0]+Vt(t,r),e[0][1]+Vt(t,r)]);for(let a=1;a<e.length;a++)n.push([e[a][0]+Vt(t,r),e[a][1]+Vt(t,r)]),a===e.length-1&&n.push([e[a][0]+Vt(t,r),e[a][1]+Vt(t,r)]);return P0(n,null,r)}function P0(e,t,r){const n=e.length,a=[];if(n>3){const i=[],s=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let l=1;l+2<n;l++){const u=e[l];i[0]=[u[0],u[1]],i[1]=[u[0]+(s*e[l+1][0]-s*e[l-1][0])/6,u[1]+(s*e[l+1][1]-s*e[l-1][1])/6],i[2]=[e[l+1][0]+(s*e[l][0]-s*e[l+2][0])/6,e[l+1][1]+(s*e[l][1]-s*e[l+2][1])/6],i[3]=[e[l+1][0],e[l+1][1]],a.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else n===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&a.push(...N1(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function IN(e,t,r,n,a,i,s,l){const u=[],h=[];if(l.roughness===0){e/=4,h.push([t+n*Math.cos(-e),r+a*Math.sin(-e)]);for(let p=0;p<=2*Math.PI;p+=e){const f=[t+n*Math.cos(p),r+a*Math.sin(p)];u.push(f),h.push(f)}h.push([t+n*Math.cos(0),r+a*Math.sin(0)]),h.push([t+n*Math.cos(e),r+a*Math.sin(e)])}else{const p=Vt(.5,l)-Math.PI/2;h.push([Vt(i,l)+t+.9*n*Math.cos(p-e),Vt(i,l)+r+.9*a*Math.sin(p-e)]);const f=2*Math.PI+p-.01;for(let y=p;y<f;y+=e){const b=[Vt(i,l)+t+n*Math.cos(y),Vt(i,l)+r+a*Math.sin(y)];u.push(b),h.push(b)}h.push([Vt(i,l)+t+n*Math.cos(p+2*Math.PI+.5*s),Vt(i,l)+r+a*Math.sin(p+2*Math.PI+.5*s)]),h.push([Vt(i,l)+t+.98*n*Math.cos(p+s),Vt(i,l)+r+.98*a*Math.sin(p+s)]),h.push([Vt(i,l)+t+.9*n*Math.cos(p+.5*s),Vt(i,l)+r+.9*a*Math.sin(p+.5*s)])}return[h,u]}function DN(e,t,r,n,a,i,s,l,u){const h=i+Vt(.1,u),p=[];p.push([Vt(l,u)+t+.9*n*Math.cos(h-e),Vt(l,u)+r+.9*a*Math.sin(h-e)]);for(let f=h;f<=s;f+=e)p.push([Vt(l,u)+t+n*Math.cos(f),Vt(l,u)+r+a*Math.sin(f)]);return p.push([t+n*Math.cos(s),r+a*Math.sin(s)]),p.push([t+n*Math.cos(s),r+a*Math.sin(s)]),P0(p,null,u)}function Jde(e,t,r,n,a,i,s,l){const u=[],h=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let p=[0,0];const f=l.disableMultiStroke?1:2,y=l.preserveVertices;for(let b=0;b<f;b++)b===0?u.push({op:"move",data:[s[0],s[1]]}):u.push({op:"move",data:[s[0]+(y?0:Vt(h[0],l)),s[1]+(y?0:Vt(h[0],l))]}),p=y?[a,i]:[a+Vt(h[b],l),i+Vt(h[b],l)],u.push({op:"bcurveTo",data:[e+Vt(h[b],l),t+Vt(h[b],l),r+Vt(h[b],l),n+Vt(h[b],l),p[0],p[1]]});return u}function Jh(e){return[...e]}function MN(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(Jh(e[0]),Jh(e[1]),Jh(e[2]),Jh(e[2]));else{const a=[];a.push(e[0],e[0]);for(let l=1;l<e.length;l++)a.push(e[l]),l===e.length-1&&a.push(e[l]);const i=[],s=1-t;n.push(Jh(a[0]));for(let l=1;l+2<a.length;l++){const u=a[l];i[0]=[u[0],u[1]],i[1]=[u[0]+(s*a[l+1][0]-s*a[l-1][0])/6,u[1]+(s*a[l+1][1]-s*a[l-1][1])/6],i[2]=[a[l+1][0]+(s*a[l][0]-s*a[l+2][0])/6,a[l+1][1]+(s*a[l][1]-s*a[l+2][1])/6],i[3]=[a[l+1][0],a[l+1][1]],n.push(i[1],i[2],i[3])}}return n}function Pm(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Zde(e,t,r){const n=Pm(t,r);if(n===0)return Pm(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return a=Math.max(0,Math.min(1,a)),Pm(e,oc(t,r,a))}function oc(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function L1(e,t,r,n){const a=n||[];if((function(l,u){const h=l[u+0],p=l[u+1],f=l[u+2],y=l[u+3];let b=3*p[0]-2*h[0]-y[0];b*=b;let x=3*p[1]-2*h[1]-y[1];x*=x;let v=3*f[0]-2*y[0]-h[0];v*=v;let T=3*f[1]-2*y[1]-h[1];return T*=T,b<v&&(b=v),x<T&&(x=T),b+x})(e,t)<r){const l=e[t+0];a.length?(i=a[a.length-1],s=l,Math.sqrt(Pm(i,s))>1&&a.push(l)):a.push(l),a.push(e[t+3])}else{const u=e[t+0],h=e[t+1],p=e[t+2],f=e[t+3],y=oc(u,h,.5),b=oc(h,p,.5),x=oc(p,f,.5),v=oc(y,b,.5),T=oc(b,x,.5),k=oc(v,T,.5);L1([u,y,v,k],0,r,a),L1([k,T,x,f],0,r,a)}var i,s;return a}function ehe(e,t){return R0(e,0,e.length,t)}function R0(e,t,r,n,a){const i=a||[],s=e[t],l=e[r-1];let u=0,h=1;for(let p=t+1;p<r-1;++p){const f=Zde(e[p],s,l);f>u&&(u=f,h=p)}return Math.sqrt(u)>n?(R0(e,t,h+1,n,i),R0(e,h,r,n,i)):(i.length||i.push(s),i.push(l)),i}function qv(e,t=.15,r){const n=[],a=(e.length-1)/3;for(let i=0;i<a;i++)L1(e,3*i,t,n);return r&&r>0?R0(n,0,n.length,r):n}const _i="none";class I0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,a,i){const s=this._o(i);return this._d("line",[VO(t,r,n,a,s)],s)}rectangle(t,r,n,a,i){const s=this._o(i),l=[],u=Xde(t,r,n,a,s);if(s.fill){const h=[[t,r],[t+n,r],[t+n,r+a],[t,r+a]];s.fillStyle==="solid"?l.push($v([h],s)):l.push(Ou([h],s))}return s.stroke!==_i&&l.push(u),this._d("rectangle",l,s)}ellipse(t,r,n,a,i){const s=this._o(i),l=[],u=YO(n,a,s),h=A1(t,r,s,u);if(s.fill)if(s.fillStyle==="solid"){const p=A1(t,r,s,u).opset;p.type="fillPath",l.push(p)}else l.push(Ou([h.estimatedPoints],s));return s.stroke!==_i&&l.push(h.opset),this._d("ellipse",l,s)}circle(t,r,n,a){const i=this.ellipse(t,r,n,n,a);return i.shape="circle",i}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[Lm(t,!1,n)],n)}arc(t,r,n,a,i,s,l=!1,u){const h=this._o(u),p=[],f=LN(t,r,n,a,i,s,l,!0,h);if(l&&h.fill)if(h.fillStyle==="solid"){const y=Object.assign({},h);y.disableMultiStroke=!0;const b=LN(t,r,n,a,i,s,!0,!1,y);b.type="fillPath",p.push(b)}else p.push((function(y,b,x,v,T,k,C){const A=y,P=b;let M=Math.abs(x/2),L=Math.abs(v/2);M+=Vt(.01*M,C),L+=Vt(.01*L,C);let D=T,q=k;for(;D<0;)D+=2*Math.PI,q+=2*Math.PI;q-D>2*Math.PI&&(D=0,q=2*Math.PI);const Q=(q-D)/C.curveStepCount,F=[];for(let K=D;K<=q;K+=Q)F.push([A+M*Math.cos(K),P+L*Math.sin(K)]);return F.push([A+M*Math.cos(q),P+L*Math.sin(q)]),F.push([A,P]),Ou([F],C)})(t,r,n,a,i,s,h));return h.stroke!==_i&&p.push(f),this._d("arc",p,h)}curve(t,r){const n=this._o(r),a=[],i=NN(t,n);if(n.fill&&n.fill!==_i)if(n.fillStyle==="solid"){const s=NN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],l=t;if(l.length){const u=typeof l[0][0]=="number"?[l]:l;for(const h of u)h.length<3?s.push(...h):h.length===3?s.push(...qv(MN([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):s.push(...qv(MN(h),10,(1+n.roughness)/2))}s.length&&a.push(Ou([s],n))}return n.stroke!==_i&&a.push(i),this._d("curve",a,n)}polygon(t,r){const n=this._o(r),a=[],i=Lm(t,!0,n);return n.fill&&(n.fillStyle==="solid"?a.push($v([t],n)):a.push(Ou([t],n))),n.stroke!==_i&&a.push(i),this._d("polygon",a,n)}path(t,r){const n=this._o(r),a=[];if(!t)return this._d("path",a,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&n.fill!=="transparent"&&n.fill!==_i,s=n.stroke!==_i,l=!!(n.simplification&&n.simplification<1),u=(function(p,f,y){const b=GO(HO(ST(p))),x=[];let v=[],T=[0,0],k=[];const C=()=>{k.length>=4&&v.push(...qv(k,f)),k=[]},A=()=>{C(),v.length&&(x.push(v),v=[])};for(const{key:M,data:L}of b)switch(M){case"M":A(),T=[L[0],L[1]],v.push(T);break;case"L":C(),v.push([L[0],L[1]]);break;case"C":if(!k.length){const D=v.length?v[v.length-1]:T;k.push([D[0],D[1]])}k.push([L[0],L[1]]),k.push([L[2],L[3]]),k.push([L[4],L[5]]);break;case"Z":C(),v.push([T[0],T[1]])}if(A(),!y)return x;const P=[];for(const M of x){const L=ehe(M,y);L.length&&P.push(L)}return P})(t,1,l?4-4*(n.simplification||1):(1+n.roughness)/2),h=PN(t,n);if(i)if(n.fillStyle==="solid")if(u.length===1){const p=PN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else a.push($v(u,n));else a.push(Ou(u,n));return s&&(l?u.forEach((p=>{a.push(Lm(p,!1,n))})):a.push(h)),this._d("path",a,n)}opsToPath(t,r){let n="";for(const a of t.ops){const i=typeof r=="number"&&r>=0?a.data.map((s=>+s.toFixed(r))):a.data;switch(a.op){case"move":n+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":n+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":n+=`L${i[0]} ${i[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,a=[];for(const i of r){let s=null;switch(i.type){case"path":s={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:_i};break;case"fillPath":s={d:this.opsToPath(i),stroke:_i,strokeWidth:0,fill:n.fill||_i};break;case"fillSketch":s=this.fillSketch(i,n)}s&&a.push(s)}return a}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||_i,strokeWidth:n,fill:_i}}_mergedShape(t){return t.filter(((r,n)=>n===0||r.op!=="move"))}}class the{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new I0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const s of r)switch(s.type){case"path":a.save(),a.strokeStyle=n.stroke==="none"?"transparent":n.stroke,a.lineWidth=n.strokeWidth,n.strokeLineDash&&a.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(a.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(a,s,i),a.restore();break;case"fillPath":{a.save(),a.fillStyle=n.fill||"";const l=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,s,i,l),a.restore();break}case"fillSketch":this.fillSketch(a,s,n)}}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=a,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,a="nonzero"){t.beginPath();for(const i of r.ops){const s=typeof n=="number"&&n>=0?i.data.map((l=>+l.toFixed(n))):i.data;switch(i.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,a,i){const s=this.gen.line(t,r,n,a,i);return this.draw(s),s}rectangle(t,r,n,a,i){const s=this.gen.rectangle(t,r,n,a,i);return this.draw(s),s}ellipse(t,r,n,a,i){const s=this.gen.ellipse(t,r,n,a,i);return this.draw(s),s}circle(t,r,n,a){const i=this.gen.circle(t,r,n,a);return this.draw(i),i}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,a,i,s,l=!1,u){const h=this.gen.arc(t,r,n,a,i,s,l,u);return this.draw(h),h}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const sm="http://www.w3.org/2000/svg";class rhe{constructor(t,r){this.svg=t,this.gen=new I0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,i=a.createElementNS(sm,"g"),s=t.options.fixedDecimalPlaceDigits;for(const l of r){let u=null;switch(l.type){case"path":u=a.createElementNS(sm,"path"),u.setAttribute("d",this.opsToPath(l,s)),u.setAttribute("stroke",n.stroke),u.setAttribute("stroke-width",n.strokeWidth+""),u.setAttribute("fill","none"),n.strokeLineDash&&u.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":u=a.createElementNS(sm,"path"),u.setAttribute("d",this.opsToPath(l,s)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||u.setAttribute("fill-rule","evenodd");break;case"fillSketch":u=this.fillSketch(a,l,n)}u&&i.appendChild(u)}return i}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2);const i=t.createElementNS(sm,"path");return i.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",a+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,a,i){const s=this.gen.line(t,r,n,a,i);return this.draw(s)}rectangle(t,r,n,a,i){const s=this.gen.rectangle(t,r,n,a,i);return this.draw(s)}ellipse(t,r,n,a,i){const s=this.gen.ellipse(t,r,n,a,i);return this.draw(s)}circle(t,r,n,a){const i=this.gen.circle(t,r,n,a);return this.draw(i)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,a,i,s,l=!1,u){const h=this.gen.arc(t,r,n,a,i,s,l,u);return this.draw(h)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var vt={canvas:(e,t)=>new the(e,t),svg:(e,t)=>new rhe(e,t),generator:e=>new I0(e),newSeed:()=>I0.newSeed()},Ht=N(async(e,t,r)=>{let n;const a=t.useHtmlLabels||ia(zr()?.htmlLabels);r?n=r:n="node default";const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),s=i.insert("g").attr("class","label").attr("style",Ma(t.labelStyle));let l;t.label===void 0?l="":l=typeof t.label=="string"?t.label:t.label[0];const u=await Dl(s,rs($c(l),zr()),{useHtmlLabels:a,width:t.width||zr().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let h=u.getBBox();const p=(t?.padding??0)/2;if(a){const f=u.children[0],y=Lr(u),b=f.getElementsByTagName("img");if(b){const x=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(v=>new Promise(T=>{function k(){if(v.style.display="flex",v.style.flexDirection="column",x){const C=zr().fontSize?zr().fontSize:window.getComputedStyle(document.body).fontSize,A=5,[P=cI.fontSize]=yy(C),M=P*A+"px";v.style.minWidth=M,v.style.maxWidth=M}else v.style.width="100%";T(v)}N(k,"setupImage"),setTimeout(()=>{v.complete&&k()}),v.addEventListener("error",k),v.addEventListener("load",k)})))}h=f.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}return a?s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):s.attr("transform","translate(0, "+-h.height/2+")"),t.centerLabel&&s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:i,bbox:h,halfPadding:p,label:s}},"labelHelper"),Hv=N(async(e,t,r)=>{const n=r.useHtmlLabels||ia(zr()?.flowchart?.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),i=await Dl(a,rs($c(t),zr()),{useHtmlLabels:n,width:r.width||zr()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let s=i.getBBox();const l=r.padding/2;if(ia(zr()?.flowchart?.htmlLabels)){const u=i.children[0],h=Lr(i);s=u.getBoundingClientRect(),h.attr("width",s.width),h.attr("height",s.height)}return n?a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):a.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:s,halfPadding:l,label:a}},"insertLabel"),Ct=N((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Ut=N((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function vr(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}N(vr,"createPathFromPoints");function Ll(e,t,r,n,a,i){const s=[],u=r-e,h=n-t,p=u/i,f=2*Math.PI/p,y=t+h/2;for(let b=0;b<=50;b++){const x=b/50,v=e+x*u,T=y+a*Math.sin(f*(v-e));s.push({x:v,y:T})}return s}N(Ll,"generateFullSineWavePoints");function Kp(e,t,r,n,a,i){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const y=l+f*p,b=e+r*Math.cos(y),x=t+r*Math.sin(y);s.push({x:-b,y:-x})}return s}N(Kp,"generateCirclePoints");var nhe=N((e,t)=>{var r=e.x,n=e.y,a=t.x-r,i=t.y-n,s=e.width/2,l=e.height/2,u,h;return Math.abs(i)*s>Math.abs(a)*l?(i<0&&(l=-l),u=i===0?0:l*a/i,h=l):(a<0&&(s=-s),u=s,h=a===0?0:s*i/a),{x:r+u,y:n+h}},"intersectRect"),Od=nhe;function KO(e,t){t&&e.attr("style",t)}N(KO,"applyStyle");async function XO(e){const t=Lr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=zr();let a=e.label;e.label&&pd(e.label)&&(a=await NS(e.label.replace(Rd.lineBreakRegex,`
`),n));const s='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+a+"</span>";return r.html(rs(s,n)),KO(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}N(XO,"addHtmlLabel");var ahe=N(async(e,t,r,n)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),ia(zr().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),qe.info("vertexText"+a);const i={isNode:n,label:$c(a).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await XO(i)}else{const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof a=="string"?s=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?s=a:s=[];for(const l of s){const u=document.createElementNS("http://www.w3.org/2000/svg","tspan");u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.setAttribute("dy","1em"),u.setAttribute("x","0"),r?u.setAttribute("class","title-row"):u.setAttribute("class","row"),u.textContent=l.trim(),i.appendChild(u)}return i}},"createLabel"),mc=ahe,Ml=N((e,t,r,n,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+n-a,"A",a,a,0,0,1,e+r-a,t+n,"H",e+a,"A",a,a,0,0,1,e,t+n-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),JO=N(async(e,t)=>{qe.info("Creating subgraph rect for ",t.id,t);const r=zr(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:i,clusterBorder:s}=n,{labelStyles:l,nodeStyles:u,borderStyles:h,backgroundStyles:p}=St(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),y=ia(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),x=await Dl(b,t.label,{style:t.labelStyle,useHtmlLabels:y,isNode:!0});let v=x.getBBox();if(ia(r.flowchart.htmlLabels)){const D=x.children[0],q=Lr(x);v=D.getBoundingClientRect(),q.attr("width",v.width),q.attr("height",v.height)}const T=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(T-t.width)/2-t.padding:t.diff=-t.padding;const k=t.height,C=t.x-T/2,A=t.y-k/2;qe.trace("Data ",t,JSON.stringify(t));let P;if(t.look==="handDrawn"){const D=vt.svg(f),q=wt(t,{roughness:.7,fill:i,stroke:s,fillWeight:3,seed:a}),Q=D.path(Ml(C,A,T,k,0),q);P=f.insert(()=>(qe.debug("Rough node insert CXC",Q),Q),":first-child"),P.select("path:nth-child(2)").attr("style",h.join(";")),P.select("path").attr("style",p.join(";").replace("fill","stroke"))}else P=f.insert("rect",":first-child"),P.attr("style",u).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",T).attr("height",k);const{subGraphTitleTopMargin:M}=eT(r);if(b.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+M})`),l){const D=b.select("span");D&&D.attr("style",l)}const L=P.node().getBBox();return t.offsetX=0,t.width=L.width,t.height=L.height,t.offsetY=v.height-t.padding/2,t.intersect=function(D){return Od(t,D)},{cluster:f,labelBBox:v}},"rect"),ihe=N((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),a=0*t.padding,i=a/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const s=n.node().getBBox();return t.width=s.width,t.height=s.height,t.intersect=function(l){return Od(t,l)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),she=N(async(e,t)=>{const r=zr(),{themeVariables:n,handDrawnSeed:a}=r,{altBackground:i,compositeBackground:s,compositeTitleBackground:l,nodeBorder:u}=n,h=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),p=h.insert("g",":first-child"),f=h.insert("g").attr("class","cluster-label");let y=h.append("rect");const b=f.node().appendChild(await mc(t.label,t.labelStyle,void 0,!0));let x=b.getBBox();if(ia(r.flowchart.htmlLabels)){const Q=b.children[0],F=Lr(b);x=Q.getBoundingClientRect(),F.attr("width",x.width),F.attr("height",x.height)}const v=0*t.padding,T=v/2,k=(t.width<=x.width+t.padding?x.width+t.padding:t.width)+v;t.width<=x.width+t.padding?t.diff=(k-t.width)/2-t.padding:t.diff=-t.padding;const C=t.height+v,A=t.height+v-x.height-6,P=t.x-k/2,M=t.y-C/2;t.width=k;const L=t.y-t.height/2-T+x.height+2;let D;if(t.look==="handDrawn"){const Q=t.cssClasses.includes("statediagram-cluster-alt"),F=vt.svg(h),K=t.rx||t.ry?F.path(Ml(P,M,k,C,10),{roughness:.7,fill:l,fillStyle:"solid",stroke:u,seed:a}):F.rectangle(P,M,k,C,{seed:a});D=h.insert(()=>K,":first-child");const W=F.rectangle(P,L,k,A,{fill:Q?i:s,fillStyle:Q?"hachure":"solid",stroke:u,seed:a});D=h.insert(()=>K,":first-child"),y=h.insert(()=>W)}else D=p.insert("rect",":first-child"),D.attr("class","outer").attr("x",P).attr("y",M).attr("width",k).attr("height",C).attr("data-look",t.look),y.attr("class","inner").attr("x",P).attr("y",L).attr("width",k).attr("height",A);f.attr("transform",`translate(${t.x-x.width/2}, ${M+1-(ia(r.flowchart.htmlLabels)?0:3)})`);const q=D.node().getBBox();return t.height=q.height,t.offsetX=0,t.offsetY=x.height-t.padding/2,t.labelBBox=x,t.intersect=function(Q){return Od(t,Q)},{cluster:h,labelBBox:x}},"roundedWithTitle"),ohe=N(async(e,t)=>{qe.info("Creating subgraph rect for ",t.id,t);const r=zr(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:i,clusterBorder:s}=n,{labelStyles:l,nodeStyles:u,borderStyles:h,backgroundStyles:p}=St(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),y=ia(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),x=await Dl(b,t.label,{style:t.labelStyle,useHtmlLabels:y,isNode:!0,width:t.width});let v=x.getBBox();if(ia(r.flowchart.htmlLabels)){const D=x.children[0],q=Lr(x);v=D.getBoundingClientRect(),q.attr("width",v.width),q.attr("height",v.height)}const T=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(T-t.width)/2-t.padding:t.diff=-t.padding;const k=t.height,C=t.x-T/2,A=t.y-k/2;qe.trace("Data ",t,JSON.stringify(t));let P;if(t.look==="handDrawn"){const D=vt.svg(f),q=wt(t,{roughness:.7,fill:i,stroke:s,fillWeight:4,seed:a}),Q=D.path(Ml(C,A,T,k,t.rx),q);P=f.insert(()=>(qe.debug("Rough node insert CXC",Q),Q),":first-child"),P.select("path:nth-child(2)").attr("style",h.join(";")),P.select("path").attr("style",p.join(";").replace("fill","stroke"))}else P=f.insert("rect",":first-child"),P.attr("style",u).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",T).attr("height",k);const{subGraphTitleTopMargin:M}=eT(r);if(b.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+M})`),l){const D=b.select("span");D&&D.attr("style",l)}const L=P.node().getBBox();return t.offsetX=0,t.width=L.width,t.height=L.height,t.offsetY=v.height-t.padding/2,t.intersect=function(D){return Od(t,D)},{cluster:f,labelBBox:v}},"kanbanSection"),lhe=N((e,t)=>{const r=zr(),{themeVariables:n,handDrawnSeed:a}=r,{nodeBorder:i}=n,s=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),l=s.insert("g",":first-child"),u=0*t.padding,h=t.width+u;t.diff=-t.padding;const p=t.height+u,f=t.x-h/2,y=t.y-p/2;t.width=h;let b;if(t.look==="handDrawn"){const T=vt.svg(s).rectangle(f,y,h,p,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:a});b=s.insert(()=>T,":first-child")}else b=l.insert("rect",":first-child"),b.attr("class","divider").attr("x",f).attr("y",y).attr("width",h).attr("height",p).attr("data-look",t.look);const x=b.node().getBBox();return t.height=x.height,t.offsetX=0,t.offsetY=0,t.intersect=function(v){return Od(t,v)},{cluster:s,labelBBox:{}}},"divider"),che=JO,uhe={rect:JO,squareRect:che,roundedWithTitle:she,noteGroup:ihe,divider:lhe,kanbanSection:ohe},ZO=new Map,dhe=N(async(e,t)=>{const r=t.shape||"rect",n=await uhe[r](e,t);return ZO.set(t.id,n),n},"insertCluster"),Oye=N(()=>{ZO=new Map},"clear");function e4(e,t){return e.intersect(t)}N(e4,"intersectNode");var hhe=e4;function t4(e,t,r,n){var a=e.x,i=e.y,s=a-n.x,l=i-n.y,u=Math.sqrt(t*t*l*l+r*r*s*s),h=Math.abs(t*r*s/u);n.x<a&&(h=-h);var p=Math.abs(t*r*l/u);return n.y<i&&(p=-p),{x:a+h,y:i+p}}N(t4,"intersectEllipse");var r4=t4;function n4(e,t,r){return r4(e,t,t,r)}N(n4,"intersectCircle");var phe=n4;function a4(e,t,r,n){{const a=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,l=a*r.x+i*r.y+s,u=a*n.x+i*n.y+s,h=1e-6;if(l!==0&&u!==0&&P1(l,u))return;const p=n.y-r.y,f=r.x-n.x,y=n.x*r.y-r.x*n.y,b=p*e.x+f*e.y+y,x=p*t.x+f*t.y+y;if(Math.abs(b)<h&&Math.abs(x)<h&&P1(b,x))return;const v=a*f-p*i;if(v===0)return;const T=Math.abs(v/2);let k=i*y-f*s;const C=k<0?(k-T)/v:(k+T)/v;k=p*s-a*y;const A=k<0?(k-T)/v:(k+T)/v;return{x:C,y:A}}}N(a4,"intersectLine");function P1(e,t){return e*t>0}N(P1,"sameSign");var ghe=a4;function i4(e,t,r){let n=e.x,a=e.y,i=[],s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(p){s=Math.min(s,p.x),l=Math.min(l,p.y)}):(s=Math.min(s,t.x),l=Math.min(l,t.y));let u=n-e.width/2-s,h=a-e.height/2-l;for(let p=0;p<t.length;p++){let f=t[p],y=t[p<t.length-1?p+1:0],b=ghe(e,r,{x:u+f.x,y:h+f.y},{x:u+y.x,y:h+y.y});b&&i.push(b)}return i.length?(i.length>1&&i.sort(function(p,f){let y=p.x-r.x,b=p.y-r.y,x=Math.sqrt(y*y+b*b),v=f.x-r.x,T=f.y-r.y,k=Math.sqrt(v*v+T*T);return x<k?-1:x===k?0:1}),i[0]):e}N(i4,"intersectPolygon");var fhe=i4,ht={node:hhe,circle:phe,ellipse:r4,polygon:fhe,rect:Od};function s4(e,t){const{labelStyles:r}=St(t);t.labelStyle=r;const n=Ut(t);let a=n;n||(a="anchor");const i=e.insert("g").attr("class",a).attr("id",t.domId||t.id),s=1,{cssStyles:l}=t,u=vt.svg(i),h=wt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const p=u.circle(0,0,s*2,h),f=i.insert(()=>p,":first-child");return f.attr("class","anchor").attr("style",Ma(l)),Ct(t,f),t.intersect=function(y){return qe.info("Circle intersect",t,s,y),ht.circle(t,s,y)},i}N(s4,"anchor");function R1(e,t,r,n,a,i,s){const u=(e+r)/2,h=(t+n)/2,p=Math.atan2(n-t,r-e),f=(r-e)/2,y=(n-t)/2,b=f/a,x=y/i,v=Math.sqrt(b**2+x**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-v**2),k=u+T*i*Math.sin(p)*(s?-1:1),C=h-T*a*Math.cos(p)*(s?-1:1),A=Math.atan2((t-C)/i,(e-k)/a);let M=Math.atan2((n-C)/i,(r-k)/a)-A;s&&M<0&&(M+=2*Math.PI),!s&&M>0&&(M-=2*Math.PI);const L=[];for(let D=0;D<20;D++){const q=D/19,Q=A+q*M,F=k+a*Math.cos(Q),K=C+i*Math.sin(Q);L.push({x:F,y:K})}return L}N(R1,"generateArcPoints");async function o4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.width+t.padding+20,l=i.height+t.padding,u=l/2,h=u/(2.5+l/50),{cssStyles:p}=t,f=[{x:s/2,y:-l/2},{x:-s/2,y:-l/2},...R1(-s/2,-l/2,-s/2,l/2,h,u,!1),{x:s/2,y:l/2},...R1(s/2,l/2,s/2,-l/2,h,u,!0)],y=vt.svg(a),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=vr(f),v=y.path(x,b),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${h/2}, 0)`),Ct(t,T),t.intersect=function(k){return ht.polygon(t,f,k)},a}N(o4,"bowTieRect");function Ol(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}N(Ol,"insertPolygonShape");async function l4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.height+t.padding,l=12,u=i.width+t.padding+l,h=0,p=u,f=-s,y=0,b=[{x:h+l,y:f},{x:p,y:f},{x:p,y},{x:h,y},{x:h,y:f+l},{x:h+l,y:f}];let x;const{cssStyles:v}=t;if(t.look==="handDrawn"){const T=vt.svg(a),k=wt(t,{}),C=vr(b),A=T.path(C,k);x=a.insert(()=>A,":first-child").attr("transform",`translate(${-u/2}, ${s/2})`),v&&x.attr("style",v)}else x=Ol(a,u,s,b);return n&&x.attr("style",n),Ct(t,x),t.intersect=function(T){return ht.polygon(t,b,T)},a}N(l4,"card");function c4(e,t){const{nodeStyles:r}=St(t);t.label="";const n=e.insert("g").attr("class",Ut(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,i=Math.max(28,t.width??0),s=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],l=vt.svg(n),u=wt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=vr(s),p=l.path(h,u),f=n.insert(()=>p,":first-child");return a&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(y){return ht.polygon(t,s,y)},n}N(c4,"choice");async function TT(e,t,r){const{labelStyles:n,nodeStyles:a}=St(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:l}=await Ht(e,t,Ut(t)),u=r?.padding??l,h=s.width/2+u;let p;const{cssStyles:f}=t;if(t.look==="handDrawn"){const y=vt.svg(i),b=wt(t,{}),x=y.circle(0,0,h*2,b);p=i.insert(()=>x,":first-child"),p.attr("class","basic label-container").attr("style",Ma(f))}else p=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",a).attr("r",h).attr("cx",0).attr("cy",0);return Ct(t,p),t.calcIntersect=function(y,b){const x=y.width/2;return ht.circle(y,x,b)},t.intersect=function(y){return qe.info("Circle intersect",t,h,y),ht.circle(t,h,y)},i}N(TT,"circle");function u4(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,a={x:n/2*t,y:n/2*r},i={x:-(n/2)*t,y:n/2*r},s={x:-(n/2)*t,y:-(n/2)*r},l={x:n/2*t,y:-(n/2)*r};return`M ${i.x},${i.y} L ${l.x},${l.y}
                   M ${a.x},${a.y} L ${s.x},${s.y}`}N(u4,"createLine");function d4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",Ut(t)).attr("id",t.domId??t.id),i=Math.max(30,t?.width??0),{cssStyles:s}=t,l=vt.svg(a),u=wt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=l.circle(0,0,i*2,u),p=u4(i),f=l.path(p,u),y=a.insert(()=>h,":first-child");return y.insert(()=>f),s&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),Ct(t,y),t.intersect=function(b){return qe.info("crossedCircle intersect",t,{radius:i,point:b}),ht.circle(t,i,b)},a}N(d4,"crossedCircle");function Ao(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const y=l+f*p,b=e+r*Math.cos(y),x=t+r*Math.sin(y);s.push({x:-b,y:-x})}return s}N(Ao,"generateCirclePoints");async function h4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=i.width+(t.padding??0),u=i.height+(t.padding??0),h=Math.max(5,u*.1),{cssStyles:p}=t,f=[...Ao(l/2,-u/2,h,30,-90,0),{x:-l/2-h,y:h},...Ao(l/2+h*2,-h,h,20,-180,-270),...Ao(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-u/2},...Ao(l/2,u/2,h,20,0,90)],y=[{x:l/2,y:-u/2-h},{x:-l/2,y:-u/2-h},...Ao(l/2,-u/2,h,20,-90,0),{x:-l/2-h,y:-h},...Ao(l/2+l*.1,-h,h,20,-180,-270),...Ao(l/2+l*.1,h,h,20,-90,-180),{x:-l/2-h,y:u/2},...Ao(l/2,u/2,h,20,0,90),{x:-l/2,y:u/2+h},{x:l/2,y:u/2+h}],b=vt.svg(a),x=wt(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=vr(f).replace("Z",""),k=b.path(T,x),C=vr(y),A=b.path(C,{...x}),P=a.insert("g",":first-child");return P.insert(()=>A,":first-child").attr("stroke-opacity",0),P.insert(()=>k,":first-child"),P.attr("class","text"),p&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",n),P.attr("transform",`translate(${h}, 0)`),s.attr("transform",`translate(${-l/2+h-(i.x-(i.left??0))},${-u/2+(t.padding??0)/2-(i.y-(i.top??0))})`),Ct(t,P),t.intersect=function(M){return ht.polygon(t,y,M)},a}N(h4,"curlyBraceLeft");function No(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const y=l+f*p,b=e+r*Math.cos(y),x=t+r*Math.sin(y);s.push({x:b,y:x})}return s}N(No,"generateCirclePoints");async function p4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=i.width+(t.padding??0),u=i.height+(t.padding??0),h=Math.max(5,u*.1),{cssStyles:p}=t,f=[...No(l/2,-u/2,h,20,-90,0),{x:l/2+h,y:-h},...No(l/2+h*2,-h,h,20,-180,-270),...No(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:u/2},...No(l/2,u/2,h,20,0,90)],y=[{x:-l/2,y:-u/2-h},{x:l/2,y:-u/2-h},...No(l/2,-u/2,h,20,-90,0),{x:l/2+h,y:-h},...No(l/2+h*2,-h,h,20,-180,-270),...No(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:u/2},...No(l/2,u/2,h,20,0,90),{x:l/2,y:u/2+h},{x:-l/2,y:u/2+h}],b=vt.svg(a),x=wt(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=vr(f).replace("Z",""),k=b.path(T,x),C=vr(y),A=b.path(C,{...x}),P=a.insert("g",":first-child");return P.insert(()=>A,":first-child").attr("stroke-opacity",0),P.insert(()=>k,":first-child"),P.attr("class","text"),p&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",n),P.attr("transform",`translate(${-h}, 0)`),s.attr("transform",`translate(${-l/2+(t.padding??0)/2-(i.x-(i.left??0))},${-u/2+(t.padding??0)/2-(i.y-(i.top??0))})`),Ct(t,P),t.intersect=function(M){return ht.polygon(t,y,M)},a}N(p4,"curlyBraceRight");function Ea(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const y=l+f*p,b=e+r*Math.cos(y),x=t+r*Math.sin(y);s.push({x:-b,y:-x})}return s}N(Ea,"generateCirclePoints");async function g4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=i.width+(t.padding??0),u=i.height+(t.padding??0),h=Math.max(5,u*.1),{cssStyles:p}=t,f=[...Ea(l/2,-u/2,h,30,-90,0),{x:-l/2-h,y:h},...Ea(l/2+h*2,-h,h,20,-180,-270),...Ea(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-u/2},...Ea(l/2,u/2,h,20,0,90)],y=[...Ea(-l/2+h+h/2,-u/2,h,20,-90,-180),{x:l/2-h/2,y:h},...Ea(-l/2-h/2,-h,h,20,0,90),...Ea(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...Ea(-l/2+h+h/2,u/2,h,30,-180,-270)],b=[{x:l/2,y:-u/2-h},{x:-l/2,y:-u/2-h},...Ea(l/2,-u/2,h,20,-90,0),{x:-l/2-h,y:-h},...Ea(l/2+h*2,-h,h,20,-180,-270),...Ea(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:u/2},...Ea(l/2,u/2,h,20,0,90),{x:-l/2,y:u/2+h},{x:l/2-h-h/2,y:u/2+h},...Ea(-l/2+h+h/2,-u/2,h,20,-90,-180),{x:l/2-h/2,y:h},...Ea(-l/2-h/2,-h,h,20,0,90),...Ea(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...Ea(-l/2+h+h/2,u/2,h,30,-180,-270)],x=vt.svg(a),v=wt(t,{fill:"none"});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const k=vr(f).replace("Z",""),C=x.path(k,v),P=vr(y).replace("Z",""),M=x.path(P,v),L=vr(b),D=x.path(L,{...v}),q=a.insert("g",":first-child");return q.insert(()=>D,":first-child").attr("stroke-opacity",0),q.insert(()=>C,":first-child"),q.insert(()=>M,":first-child"),q.attr("class","text"),p&&t.look!=="handDrawn"&&q.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&q.selectAll("path").attr("style",n),q.attr("transform",`translate(${h-h/4}, 0)`),s.attr("transform",`translate(${-l/2+(t.padding??0)/2-(i.x-(i.left??0))},${-u/2+(t.padding??0)/2-(i.y-(i.top??0))})`),Ct(t,q),t.intersect=function(Q){return ht.polygon(t,b,Q)},a}N(g4,"curlyBraces");async function f4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=80,l=20,u=Math.max(s,(i.width+(t.padding??0)*2)*1.25,t?.width??0),h=Math.max(l,i.height+(t.padding??0)*2,t?.height??0),p=h/2,{cssStyles:f}=t,y=vt.svg(a),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=u,v=h,T=x-p,k=v/4,C=[{x:T,y:0},{x:k,y:0},{x:0,y:v/2},{x:k,y:v},{x:T,y:v},...Kp(-T,-v/2,p,50,270,90)],A=vr(C),P=y.path(A,b),M=a.insert(()=>P,":first-child");return M.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&M.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&M.selectChildren("path").attr("style",n),M.attr("transform",`translate(${-u/2}, ${-h/2})`),Ct(t,M),t.intersect=function(L){return ht.polygon(t,C,L)},a}N(f4,"curvedTrapezoid");var mhe=N((e,t,r,n,a,i)=>[`M${e},${t+i}`,`a${a},${i} 0,0,0 ${r},0`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),yhe=N((e,t,r,n,a,i)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),bhe=N((e,t,r,n,a,i)=>[`M${e-r/2},${-n/2}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function m4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+t.padding,t.width??0),u=l/2,h=u/(2.5+l/50),p=Math.max(i.height+h+t.padding,t.height??0);let f;const{cssStyles:y}=t;if(t.look==="handDrawn"){const b=vt.svg(a),x=yhe(0,0,l,p,u,h),v=bhe(0,h,l,p,u,h),T=b.path(x,wt(t,{})),k=b.path(v,wt(t,{fill:"none"}));f=a.insert(()=>k,":first-child"),f=a.insert(()=>T,":first-child"),f.attr("class","basic label-container"),y&&f.attr("style",y)}else{const b=mhe(0,0,l,p,u,h);f=a.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",Ma(y)).attr("style",n)}return f.attr("label-offset-y",h),f.attr("transform",`translate(${-l/2}, ${-(p/2+h)})`),Ct(t,f),s.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(t.padding??0)/1.5-(i.y-(i.top??0))})`),t.intersect=function(b){const x=ht.rect(t,b),v=x.x-(t.x??0);if(u!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(x.y-(t.y??0))>(t.height??0)/2-h)){let T=h*h*(1-v*v/(u*u));T>0&&(T=Math.sqrt(T)),T=h-T,b.y-(t.y??0)>0&&(T=-T),x.y+=T}return x},a}N(m4,"cylinder");async function y4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=i.width+t.padding,u=i.height+t.padding,h=u*.2,p=-l/2,f=-u/2-h/2,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:p,y:f+h},{x:-p,y:f+h},{x:-p,y:-f},{x:p,y:-f},{x:p,y:f},{x:-p,y:f},{x:-p,y:f+h}],T=b.polygon(v.map(C=>[C.x,C.y]),x),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),s.attr("transform",`translate(${p+(t.padding??0)/2-(i.x-(i.left??0))}, ${f+h+(t.padding??0)/2-(i.y-(i.top??0))})`),Ct(t,k),t.intersect=function(C){return ht.rect(t,C)},a}N(y4,"dividedRectangle");async function b4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s}=await Ht(e,t,Ut(t)),u=i.width/2+s+5,h=i.width/2+s;let p;const{cssStyles:f}=t;if(t.look==="handDrawn"){const y=vt.svg(a),b=wt(t,{roughness:.2,strokeWidth:2.5}),x=wt(t,{roughness:.2,strokeWidth:1.5}),v=y.circle(0,0,u*2,b),T=y.circle(0,0,h*2,x);p=a.insert("g",":first-child"),p.attr("class",Ma(t.cssClasses)).attr("style",Ma(f)),p.node()?.appendChild(v),p.node()?.appendChild(T)}else{p=a.insert("g",":first-child");const y=p.insert("circle",":first-child"),b=p.insert("circle");p.attr("class","basic label-container").attr("style",n),y.attr("class","outer-circle").attr("style",n).attr("r",u).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0)}return Ct(t,p),t.intersect=function(y){return qe.info("DoubleCircle intersect",t,u,y),ht.circle(t,u,y)},a}N(b4,"doublecircle");function x4(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=St(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",Ut(t)).attr("id",t.domId??t.id),s=7,{cssStyles:l}=t,u=vt.svg(i),{nodeBorder:h}=r,p=wt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(p.roughness=0);const f=u.circle(0,0,s*2,p),y=i.insert(()=>f,":first-child");return y.selectAll("path").attr("style",`fill: ${h} !important;`),l&&l.length>0&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",l),a&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",a),Ct(t,y),t.intersect=function(b){return qe.info("filledCircle intersect",t,{radius:s,point:b}),ht.circle(t,s,b)},i}N(x4,"filledCircle");async function v4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=i.width+(t.padding??0),u=l+i.height,h=l+i.height,p=[{x:0,y:-u},{x:h,y:-u},{x:h/2,y:0}],{cssStyles:f}=t,y=vt.svg(a),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=vr(p),v=y.path(x,b),T=a.insert(()=>v,":first-child").attr("transform",`translate(${-u/2}, ${u/2})`);return f&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),t.width=l,t.height=u,Ct(t,T),s.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-u/2+(t.padding??0)/2+(i.y-(i.top??0))})`),t.intersect=function(k){return qe.info("Triangle intersect",t,p,k),ht.polygon(t,p,k)},a}N(v4,"flippedTriangle");function w4(e,t,{dir:r,config:{state:n,themeVariables:a}}){const{nodeStyles:i}=St(t);t.label="";const s=e.insert("g").attr("class",Ut(t)).attr("id",t.domId??t.id),{cssStyles:l}=t;let u=Math.max(70,t?.width??0),h=Math.max(10,t?.height??0);r==="LR"&&(u=Math.max(10,t?.width??0),h=Math.max(70,t?.height??0));const p=-1*u/2,f=-1*h/2,y=vt.svg(s),b=wt(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=y.rectangle(p,f,u,h,b),v=s.insert(()=>x,":first-child");l&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",l),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),Ct(t,v);const T=n?.padding??0;return t.width&&t.height&&(t.width+=T/2||0,t.height+=T/2||0),t.intersect=function(k){return ht.rect(t,k)},s}N(w4,"forkJoin");async function S4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const a=80,i=50,{shapeSvg:s,bbox:l}=await Ht(e,t,Ut(t)),u=Math.max(a,l.width+(t.padding??0)*2,t?.width??0),h=Math.max(i,l.height+(t.padding??0)*2,t?.height??0),p=h/2,{cssStyles:f}=t,y=vt.svg(s),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-u/2,y:-h/2},{x:u/2-p,y:-h/2},...Kp(-u/2+p,0,p,50,90,270),{x:u/2-p,y:h/2},{x:-u/2,y:h/2}],v=vr(x),T=y.path(v,b),k=s.insert(()=>T,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),Ct(t,k),t.intersect=function(C){return qe.info("Pill intersect",t,{radius:p,point:C}),ht.polygon(t,x,C)},s}N(S4,"halfRoundedRectangle");async function T4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.height+(t.padding??0),l=i.width+(t.padding??0)*2.5,{cssStyles:u}=t,h=vt.svg(a),p=wt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");let f=l/2;const y=f/6;f=f+y;const b=s/2,x=b/2,v=f-x,T=[{x:-v,y:-b},{x:0,y:-b},{x:v,y:-b},{x:f,y:0},{x:v,y:b},{x:0,y:b},{x:-v,y:b},{x:-f,y:0}],k=vr(T),C=h.path(k,p),A=a.insert(()=>C,":first-child");return A.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",n),t.width=l,t.height=s,Ct(t,A),t.intersect=function(P){return ht.polygon(t,T,P)},a}N(T4,"hexagon");async function k4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await Ht(e,t,Ut(t)),i=Math.max(30,t?.width??0),s=Math.max(30,t?.height??0),{cssStyles:l}=t,u=vt.svg(a),h=wt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const p=[{x:0,y:0},{x:i,y:0},{x:0,y:s},{x:i,y:s}],f=vr(p),y=u.path(f,h),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),b.attr("transform",`translate(${-i/2}, ${-s/2})`),Ct(t,b),t.intersect=function(x){return qe.info("Pill intersect",t,{points:p}),ht.polygon(t,p,x)},a}N(k4,"hourglass");async function E4(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=St(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),u=n?.wrappingWidth;t.width=Math.max(l,u??0);const{shapeSvg:h,bbox:p,label:f}=await Ht(e,t,"icon-shape default"),y=t.pos==="t",b=l,x=l,{nodeBorder:v}=r,{stylesMap:T}=Id(t),k=-x/2,C=-b/2,A=t.label?8:0,P=vt.svg(h),M=wt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const L=P.rectangle(k,C,x,b,M),D=Math.max(x,p.width),q=b+p.height+A,Q=P.rectangle(-D/2,-q/2,D,q,{...M,fill:"transparent",stroke:"none"}),F=h.insert(()=>L,":first-child"),K=h.insert(()=>Q);if(t.icon){const W=h.append("g");W.html(`<g>${await Sg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const j=W.node().getBBox(),O=j.width,$=j.height,I=j.x,G=j.y;W.attr("transform",`translate(${-O/2-I},${y?p.height/2+A/2-$/2-G:-p.height/2-A/2-$/2-G})`),W.attr("style",`color: ${T.get("stroke")??v};`)}return f.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${y?-q/2:q/2-p.height})`),F.attr("transform",`translate(0,${y?p.height/2+A/2:-p.height/2-A/2})`),Ct(t,K),t.intersect=function(W){if(qe.info("iconSquare intersect",t,W),!t.label)return ht.rect(t,W);const j=t.x??0,O=t.y??0,$=t.height??0;let I=[];return y?I=[{x:j-p.width/2,y:O-$/2},{x:j+p.width/2,y:O-$/2},{x:j+p.width/2,y:O-$/2+p.height+A},{x:j+x/2,y:O-$/2+p.height+A},{x:j+x/2,y:O+$/2},{x:j-x/2,y:O+$/2},{x:j-x/2,y:O-$/2+p.height+A},{x:j-p.width/2,y:O-$/2+p.height+A}]:I=[{x:j-x/2,y:O-$/2},{x:j+x/2,y:O-$/2},{x:j+x/2,y:O-$/2+b},{x:j+p.width/2,y:O-$/2+b},{x:j+p.width/2/2,y:O+$/2},{x:j-p.width/2,y:O+$/2},{x:j-p.width/2,y:O-$/2+b},{x:j-x/2,y:O-$/2+b}],ht.polygon(t,I,W)},h}N(E4,"icon");async function C4(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=St(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),u=n?.wrappingWidth;t.width=Math.max(l,u??0);const{shapeSvg:h,bbox:p,label:f}=await Ht(e,t,"icon-shape default"),y=20,b=t.label?8:0,x=t.pos==="t",{nodeBorder:v,mainBkg:T}=r,{stylesMap:k}=Id(t),C=vt.svg(h),A=wt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const P=k.get("fill");A.stroke=P??T;const M=h.append("g");t.icon&&M.html(`<g>${await Sg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const L=M.node().getBBox(),D=L.width,q=L.height,Q=L.x,F=L.y,K=Math.max(D,q)*Math.SQRT2+y*2,W=C.circle(0,0,K,A),j=Math.max(K,p.width),O=K+p.height+b,$=C.rectangle(-j/2,-O/2,j,O,{...A,fill:"transparent",stroke:"none"}),I=h.insert(()=>W,":first-child"),G=h.insert(()=>$);return M.attr("transform",`translate(${-D/2-Q},${x?p.height/2+b/2-q/2-F:-p.height/2-b/2-q/2-F})`),M.attr("style",`color: ${k.get("stroke")??v};`),f.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${x?-O/2:O/2-p.height})`),I.attr("transform",`translate(0,${x?p.height/2+b/2:-p.height/2-b/2})`),Ct(t,G),t.intersect=function(V){return qe.info("iconSquare intersect",t,V),ht.rect(t,V)},h}N(C4,"iconCircle");async function _4(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=St(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),u=n?.wrappingWidth;t.width=Math.max(l,u??0);const{shapeSvg:h,bbox:p,halfPadding:f,label:y}=await Ht(e,t,"icon-shape default"),b=t.pos==="t",x=l+f*2,v=l+f*2,{nodeBorder:T,mainBkg:k}=r,{stylesMap:C}=Id(t),A=-v/2,P=-x/2,M=t.label?8:0,L=vt.svg(h),D=wt(t,{});t.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const q=C.get("fill");D.stroke=q??k;const Q=L.path(Ml(A,P,v,x,5),D),F=Math.max(v,p.width),K=x+p.height+M,W=L.rectangle(-F/2,-K/2,F,K,{...D,fill:"transparent",stroke:"none"}),j=h.insert(()=>Q,":first-child").attr("class","icon-shape2"),O=h.insert(()=>W);if(t.icon){const $=h.append("g");$.html(`<g>${await Sg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const I=$.node().getBBox(),G=I.width,V=I.height,oe=I.x,U=I.y;$.attr("transform",`translate(${-G/2-oe},${b?p.height/2+M/2-V/2-U:-p.height/2-M/2-V/2-U})`),$.attr("style",`color: ${C.get("stroke")??T};`)}return y.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${b?-K/2:K/2-p.height})`),j.attr("transform",`translate(0,${b?p.height/2+M/2:-p.height/2-M/2})`),Ct(t,O),t.intersect=function($){if(qe.info("iconSquare intersect",t,$),!t.label)return ht.rect(t,$);const I=t.x??0,G=t.y??0,V=t.height??0;let oe=[];return b?oe=[{x:I-p.width/2,y:G-V/2},{x:I+p.width/2,y:G-V/2},{x:I+p.width/2,y:G-V/2+p.height+M},{x:I+v/2,y:G-V/2+p.height+M},{x:I+v/2,y:G+V/2},{x:I-v/2,y:G+V/2},{x:I-v/2,y:G-V/2+p.height+M},{x:I-p.width/2,y:G-V/2+p.height+M}]:oe=[{x:I-v/2,y:G-V/2},{x:I+v/2,y:G-V/2},{x:I+v/2,y:G-V/2+x},{x:I+p.width/2,y:G-V/2+x},{x:I+p.width/2/2,y:G+V/2},{x:I-p.width/2,y:G+V/2},{x:I-p.width/2,y:G-V/2+x},{x:I-v/2,y:G-V/2+x}],ht.polygon(t,oe,$)},h}N(_4,"iconRounded");async function A4(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=St(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),u=n?.wrappingWidth;t.width=Math.max(l,u??0);const{shapeSvg:h,bbox:p,halfPadding:f,label:y}=await Ht(e,t,"icon-shape default"),b=t.pos==="t",x=l+f*2,v=l+f*2,{nodeBorder:T,mainBkg:k}=r,{stylesMap:C}=Id(t),A=-v/2,P=-x/2,M=t.label?8:0,L=vt.svg(h),D=wt(t,{});t.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const q=C.get("fill");D.stroke=q??k;const Q=L.path(Ml(A,P,v,x,.1),D),F=Math.max(v,p.width),K=x+p.height+M,W=L.rectangle(-F/2,-K/2,F,K,{...D,fill:"transparent",stroke:"none"}),j=h.insert(()=>Q,":first-child"),O=h.insert(()=>W);if(t.icon){const $=h.append("g");$.html(`<g>${await Sg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const I=$.node().getBBox(),G=I.width,V=I.height,oe=I.x,U=I.y;$.attr("transform",`translate(${-G/2-oe},${b?p.height/2+M/2-V/2-U:-p.height/2-M/2-V/2-U})`),$.attr("style",`color: ${C.get("stroke")??T};`)}return y.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${b?-K/2:K/2-p.height})`),j.attr("transform",`translate(0,${b?p.height/2+M/2:-p.height/2-M/2})`),Ct(t,O),t.intersect=function($){if(qe.info("iconSquare intersect",t,$),!t.label)return ht.rect(t,$);const I=t.x??0,G=t.y??0,V=t.height??0;let oe=[];return b?oe=[{x:I-p.width/2,y:G-V/2},{x:I+p.width/2,y:G-V/2},{x:I+p.width/2,y:G-V/2+p.height+M},{x:I+v/2,y:G-V/2+p.height+M},{x:I+v/2,y:G+V/2},{x:I-v/2,y:G+V/2},{x:I-v/2,y:G-V/2+p.height+M},{x:I-p.width/2,y:G-V/2+p.height+M}]:oe=[{x:I-v/2,y:G-V/2},{x:I+v/2,y:G-V/2},{x:I+v/2,y:G-V/2+x},{x:I+p.width/2,y:G-V/2+x},{x:I+p.width/2/2,y:G+V/2},{x:I-p.width/2,y:G+V/2},{x:I-p.width/2,y:G-V/2+x},{x:I-v/2,y:G-V/2+x}],ht.polygon(t,oe,$)},h}N(A4,"iconSquare");async function N4(e,t,{config:{flowchart:r}}){const n=new Image;n.src=t?.img??"",await n.decode();const a=Number(n.naturalWidth.toString().replace("px","")),i=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/i;const{labelStyles:s}=St(t);t.labelStyle=s;const l=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;const u=Math.max(t.label?l??0:0,t?.assetWidth??a),h=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:u,p=t.constraint==="on"?h/t.imageAspectRatio:t?.assetHeight??i;t.width=Math.max(h,l??0);const{shapeSvg:f,bbox:y,label:b}=await Ht(e,t,"image-shape default"),x=t.pos==="t",v=-h/2,T=-p/2,k=t.label?8:0,C=vt.svg(f),A=wt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const P=C.rectangle(v,T,h,p,A),M=Math.max(h,y.width),L=p+y.height+k,D=C.rectangle(-M/2,-L/2,M,L,{...A,fill:"none",stroke:"none"}),q=f.insert(()=>P,":first-child"),Q=f.insert(()=>D);if(t.img){const F=f.append("image");F.attr("href",t.img),F.attr("width",h),F.attr("height",p),F.attr("preserveAspectRatio","none"),F.attr("transform",`translate(${-h/2},${x?L/2-p:-L/2})`)}return b.attr("transform",`translate(${-y.width/2-(y.x-(y.left??0))},${x?-p/2-y.height/2-k/2:p/2-y.height/2+k/2})`),q.attr("transform",`translate(0,${x?y.height/2+k/2:-y.height/2-k/2})`),Ct(t,Q),t.intersect=function(F){if(qe.info("iconSquare intersect",t,F),!t.label)return ht.rect(t,F);const K=t.x??0,W=t.y??0,j=t.height??0;let O=[];return x?O=[{x:K-y.width/2,y:W-j/2},{x:K+y.width/2,y:W-j/2},{x:K+y.width/2,y:W-j/2+y.height+k},{x:K+h/2,y:W-j/2+y.height+k},{x:K+h/2,y:W+j/2},{x:K-h/2,y:W+j/2},{x:K-h/2,y:W-j/2+y.height+k},{x:K-y.width/2,y:W-j/2+y.height+k}]:O=[{x:K-h/2,y:W-j/2},{x:K+h/2,y:W-j/2},{x:K+h/2,y:W-j/2+p},{x:K+y.width/2,y:W-j/2+p},{x:K+y.width/2/2,y:W+j/2},{x:K-y.width/2,y:W+j/2},{x:K-y.width/2,y:W-j/2+p},{x:K-h/2,y:W-j/2+p}],ht.polygon(t,O,F)},f}N(N4,"imageSquare");async function L4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=Math.max(i.width+(t.padding??0)*2,t?.width??0),l=Math.max(i.height+(t.padding??0)*2,t?.height??0),u=[{x:0,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:-3*l/6,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=vt.svg(a),y=wt(t,{}),b=vr(u),x=f.path(b,y);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Ol(a,s,l,u);return n&&h.attr("style",n),t.width=s,t.height=l,Ct(t,h),t.intersect=function(f){return ht.polygon(t,u,f)},a}N(L4,"inv_trapezoid");async function Ty(e,t,r){const{labelStyles:n,nodeStyles:a}=St(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ht(e,t,Ut(t)),l=Math.max(s.width+r.labelPaddingX*2,t?.width||0),u=Math.max(s.height+r.labelPaddingY*2,t?.height||0),h=-l/2,p=-u/2;let f,{rx:y,ry:b}=t;const{cssStyles:x}=t;if(r?.rx&&r.ry&&(y=r.rx,b=r.ry),t.look==="handDrawn"){const v=vt.svg(i),T=wt(t,{}),k=y||b?v.path(Ml(h,p,l,u,y||0),T):v.rectangle(h,p,l,u,T);f=i.insert(()=>k,":first-child"),f.attr("class","basic label-container").attr("style",Ma(x))}else f=i.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",a).attr("rx",Ma(y)).attr("ry",Ma(b)).attr("x",h).attr("y",p).attr("width",l).attr("height",u);return Ct(t,f),t.calcIntersect=function(v,T){return ht.rect(v,T)},t.intersect=function(v){return ht.rect(t,v)},i}N(Ty,"drawRect");async function P4(e,t){const{shapeSvg:r,bbox:n,label:a}=await Ht(e,t,"label"),i=r.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),Ct(t,i),t.intersect=function(u){return ht.rect(t,u)},r}N(P4,"labelRect");async function R4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=Math.max(i.width+(t.padding??0),t?.width??0),l=Math.max(i.height+(t.padding??0),t?.height??0),u=[{x:0,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:-(3*l)/6,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=vt.svg(a),y=wt(t,{}),b=vr(u),x=f.path(b,y);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Ol(a,s,l,u);return n&&h.attr("style",n),t.width=s,t.height=l,Ct(t,h),t.intersect=function(f){return ht.polygon(t,u,f)},a}N(R4,"lean_left");async function I4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=Math.max(i.width+(t.padding??0),t?.width??0),l=Math.max(i.height+(t.padding??0),t?.height??0),u=[{x:-3*l/6,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:0,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=vt.svg(a),y=wt(t,{}),b=vr(u),x=f.path(b,y);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Ol(a,s,l,u);return n&&h.attr("style",n),t.width=s,t.height=l,Ct(t,h),t.intersect=function(f){return ht.polygon(t,u,f)},a}N(I4,"lean_right");function D4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",Ut(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,s=Math.max(35,t?.width??0),l=Math.max(35,t?.height??0),u=7,h=[{x:s,y:0},{x:0,y:l+u/2},{x:s-2*u,y:l+u/2},{x:0,y:2*l},{x:s,y:l-u/2},{x:2*u,y:l-u/2}],p=vt.svg(a),f=wt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const y=vr(h),b=p.path(y,f),x=a.insert(()=>b,":first-child");return i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",n),x.attr("transform",`translate(-${s/2},${-l})`),Ct(t,x),t.intersect=function(v){return qe.info("lightningBolt intersect",t,v),ht.polygon(t,h,v)},a}N(D4,"lightningBolt");var xhe=N((e,t,r,n,a,i,s)=>[`M${e},${t+i}`,`a${a},${i} 0,0,0 ${r},0`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+s}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),vhe=N((e,t,r,n,a,i,s)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+s}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),whe=N((e,t,r,n,a,i)=>[`M${e-r/2},${-n/2}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function M4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0),t.width??0),u=l/2,h=u/(2.5+l/50),p=Math.max(i.height+h+(t.padding??0),t.height??0),f=p*.1;let y;const{cssStyles:b}=t;if(t.look==="handDrawn"){const x=vt.svg(a),v=vhe(0,0,l,p,u,h,f),T=whe(0,h,l,p,u,h),k=wt(t,{}),C=x.path(v,k),A=x.path(T,k);a.insert(()=>A,":first-child").attr("class","line"),y=a.insert(()=>C,":first-child"),y.attr("class","basic label-container"),b&&y.attr("style",b)}else{const x=xhe(0,0,l,p,u,h,f);y=a.insert("path",":first-child").attr("d",x).attr("class","basic label-container").attr("style",Ma(b)).attr("style",n)}return y.attr("label-offset-y",h),y.attr("transform",`translate(${-l/2}, ${-(p/2+h)})`),Ct(t,y),s.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),t.intersect=function(x){const v=ht.rect(t,x),T=v.x-(t.x??0);if(u!=0&&(Math.abs(T)<(t.width??0)/2||Math.abs(T)==(t.width??0)/2&&Math.abs(v.y-(t.y??0))>(t.height??0)/2-h)){let k=h*h*(1-T*T/(u*u));k>0&&(k=Math.sqrt(k)),k=h-k,x.y-(t.y??0)>0&&(k=-k),v.y+=k}return v},a}N(M4,"linedCylinder");async function O4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=u/4,p=u+h,{cssStyles:f}=t,y=vt.svg(a),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-l/2-l/2*.1,y:-p/2},{x:-l/2-l/2*.1,y:p/2},...Ll(-l/2-l/2*.1,p/2,l/2+l/2*.1,p/2,h,.8),{x:l/2+l/2*.1,y:-p/2},{x:-l/2-l/2*.1,y:-p/2},{x:-l/2,y:-p/2},{x:-l/2,y:p/2*1.1},{x:-l/2,y:-p/2}],v=y.polygon(x.map(k=>[k.x,k.y]),b),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)+l/2*.1/2-(i.x-(i.left??0))},${-u/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),Ct(t,T),t.intersect=function(k){return ht.polygon(t,x,k)},a}N(O4,"linedWaveEdgedRect");async function j4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,p=-l/2,f=-u/2,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{}),v=[{x:p-h,y:f+h},{x:p-h,y:f+u+h},{x:p+l-h,y:f+u+h},{x:p+l-h,y:f+u},{x:p+l,y:f+u},{x:p+l,y:f+u-h},{x:p+l+h,y:f+u-h},{x:p+l+h,y:f-h},{x:p+h,y:f-h},{x:p+h,y:f},{x:p,y:f},{x:p,y:f+h}],T=[{x:p,y:f+h},{x:p+l-h,y:f+h},{x:p+l-h,y:f+u},{x:p+l,y:f+u},{x:p+l,y:f},{x:p,y:f}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=vr(v),C=b.path(k,x),A=vr(T),P=b.path(A,{...x,fill:"none"}),M=a.insert(()=>P,":first-child");return M.insert(()=>C,":first-child"),M.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(i.width/2)-h-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),Ct(t,M),t.intersect=function(L){return ht.polygon(t,v,L)},a}N(j4,"multiRect");async function B4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=u/4,p=u+h,f=-l/2,y=-p/2,b=5,{cssStyles:x}=t,v=Ll(f-b,y+p+b,f+l-b,y+p+b,h,.8),T=v?.[v.length-1],k=[{x:f-b,y:y+b},{x:f-b,y:y+p+b},...v,{x:f+l-b,y:T.y-b},{x:f+l,y:T.y-b},{x:f+l,y:T.y-2*b},{x:f+l+b,y:T.y-2*b},{x:f+l+b,y:y-b},{x:f+b,y:y-b},{x:f+b,y},{x:f,y},{x:f,y:y+b}],C=[{x:f,y:y+b},{x:f+l-b,y:y+b},{x:f+l-b,y:T.y-b},{x:f+l,y:T.y-b},{x:f+l,y},{x:f,y}],A=vt.svg(a),P=wt(t,{});t.look!=="handDrawn"&&(P.roughness=0,P.fillStyle="solid");const M=vr(k),L=A.path(M,P),D=vr(C),q=A.path(D,P),Q=a.insert(()=>L,":first-child");return Q.insert(()=>q),Q.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&Q.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&Q.selectAll("path").attr("style",n),Q.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-(i.width/2)-b-(i.x-(i.left??0))}, ${-(i.height/2)+b-h/2-(i.y-(i.top??0))})`),Ct(t,Q),t.intersect=function(F){return ht.polygon(t,k,F)},a}N(B4,"multiWaveEdgedRectangle");async function F4(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=St(t);t.labelStyle=n,t.useHtmlLabels||Ia().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:s,bbox:l,label:u}=await Ht(e,t,Ut(t)),h=Math.max(l.width+(t.padding??0)*2,t?.width??0),p=Math.max(l.height+(t.padding??0)*2,t?.height??0),f=-h/2,y=-p/2,{cssStyles:b}=t,x=vt.svg(s),v=wt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=x.rectangle(f,y,h,p,v),k=s.insert(()=>T,":first-child");return k.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",b),a&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",a),u.attr("transform",`translate(${-l.width/2-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),Ct(t,k),t.intersect=function(C){return ht.rect(t,C)},s}N(F4,"note");var She=N((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function z4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.width+t.padding,l=i.height+t.padding,u=s+l,h=.5,p=[{x:u/2,y:0},{x:u,y:-u/2},{x:u/2,y:-u},{x:0,y:-u/2}];let f;const{cssStyles:y}=t;if(t.look==="handDrawn"){const b=vt.svg(a),x=wt(t,{}),v=She(0,0,u),T=b.path(v,x);f=a.insert(()=>T,":first-child").attr("transform",`translate(${-u/2+h}, ${u/2})`),y&&f.attr("style",y)}else f=Ol(a,u,u,p),f.attr("transform",`translate(${-u/2+h}, ${u/2})`);return n&&f.attr("style",n),Ct(t,f),t.calcIntersect=function(b,x){const v=b.width,T=[{x:v/2,y:0},{x:v,y:-v/2},{x:v/2,y:-v},{x:0,y:-v/2}],k=ht.polygon(b,T,x);return{x:k.x-.5,y:k.y-.5}},t.intersect=function(b){return this.calcIntersect(t,b)},a}N(z4,"question");async function U4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0),t?.width??0),u=Math.max(i.height+(t.padding??0),t?.height??0),h=-l/2,p=-u/2,f=p/2,y=[{x:h+f,y:p},{x:h,y:0},{x:h+f,y:-p},{x:-h,y:-p},{x:-h,y:p}],{cssStyles:b}=t,x=vt.svg(a),v=wt(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=vr(y),k=x.path(T,v),C=a.insert(()=>k,":first-child");return C.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",n),C.attr("transform",`translate(${-f/2},0)`),s.attr("transform",`translate(${-f/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),Ct(t,C),t.intersect=function(A){return ht.polygon(t,y,A)},a}N(U4,"rect_left_inv_arrow");async function $4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const i=e.insert("g").attr("class",a).attr("id",t.domId||t.id),s=i.insert("g"),l=i.insert("g").attr("class","label").attr("style",n),u=t.description,h=t.label,p=l.node().appendChild(await mc(h,t.labelStyle,!0,!0));let f={width:0,height:0};if(ia(zr()?.flowchart?.htmlLabels)){const q=p.children[0],Q=Lr(p);f=q.getBoundingClientRect(),Q.attr("width",f.width),Q.attr("height",f.height)}qe.info("Text 2",u);const y=u||[],b=p.getBBox(),x=l.node().appendChild(await mc(y.join?y.join("<br/>"):y,t.labelStyle,!0,!0)),v=x.children[0],T=Lr(x);f=v.getBoundingClientRect(),T.attr("width",f.width),T.attr("height",f.height);const k=(t.padding||0)/2;Lr(x).attr("transform","translate( "+(f.width>b.width?0:(b.width-f.width)/2)+", "+(b.height+k+5)+")"),Lr(p).attr("transform","translate( "+(f.width<b.width?0:-(b.width-f.width)/2)+", 0)"),f=l.node().getBBox(),l.attr("transform","translate("+-f.width/2+", "+(-f.height/2-k+3)+")");const C=f.width+(t.padding||0),A=f.height+(t.padding||0),P=-f.width/2-k,M=-f.height/2-k;let L,D;if(t.look==="handDrawn"){const q=vt.svg(i),Q=wt(t,{}),F=q.path(Ml(P,M,C,A,t.rx||0),Q),K=q.line(-f.width/2-k,-f.height/2-k+b.height+k,f.width/2+k,-f.height/2-k+b.height+k,Q);D=i.insert(()=>(qe.debug("Rough node insert CXC",F),K),":first-child"),L=i.insert(()=>(qe.debug("Rough node insert CXC",F),F),":first-child")}else L=s.insert("rect",":first-child"),D=s.insert("line"),L.attr("class","outer title-state").attr("style",n).attr("x",-f.width/2-k).attr("y",-f.height/2-k).attr("width",f.width+(t.padding||0)).attr("height",f.height+(t.padding||0)),D.attr("class","divider").attr("x1",-f.width/2-k).attr("x2",f.width/2+k).attr("y1",-f.height/2-k+b.height+k).attr("y2",-f.height/2-k+b.height+k);return Ct(t,L),t.intersect=function(q){return ht.rect(t,q)},i}N($4,"rectWithTitle");function cp(e,t,r,n,a,i,s){const u=(e+r)/2,h=(t+n)/2,p=Math.atan2(n-t,r-e),f=(r-e)/2,y=(n-t)/2,b=f/a,x=y/i,v=Math.sqrt(b**2+x**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-v**2),k=u+T*i*Math.sin(p)*(s?-1:1),C=h-T*a*Math.cos(p)*(s?-1:1),A=Math.atan2((t-C)/i,(e-k)/a);let M=Math.atan2((n-C)/i,(r-k)/a)-A;s&&M<0&&(M+=2*Math.PI),!s&&M>0&&(M-=2*Math.PI);const L=[];for(let D=0;D<20;D++){const q=D/19,Q=A+q*M,F=k+a*Math.cos(Q),K=C+i*Math.sin(Q);L.push({x:F,y:K})}return L}N(cp,"generateArcPoints");async function q4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=t?.padding??0,l=t?.padding??0,u=(t?.width?t?.width:i.width)+s*2,h=(t?.height?t?.height:i.height)+l*2,p=t.radius||5,f=t.taper||5,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{});t.stroke&&(x.stroke=t.stroke),t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:-u/2+f,y:-h/2},{x:u/2-f,y:-h/2},...cp(u/2-f,-h/2,u/2,-h/2+f,p,p,!0),{x:u/2,y:-h/2+f},{x:u/2,y:h/2-f},...cp(u/2,h/2-f,u/2-f,h/2,p,p,!0),{x:u/2-f,y:h/2},{x:-u/2+f,y:h/2},...cp(-u/2+f,h/2,-u/2,h/2-f,p,p,!0),{x:-u/2,y:h/2-f},{x:-u/2,y:-h/2+f},...cp(-u/2,-h/2+f,-u/2+f,-h/2,p,p,!0)],T=vr(v),k=b.path(T,x),C=a.insert(()=>k,":first-child");return C.attr("class","basic label-container outer-path"),y&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",y),n&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",n),Ct(t,C),t.intersect=function(A){return ht.polygon(t,v,A)},a}N(q4,"roundedRect");async function H4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=t?.padding??0,u=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),p=-i.width/2-l,f=-i.height/2-l,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:p,y:f},{x:p+u+8,y:f},{x:p+u+8,y:f+h},{x:p-8,y:f+h},{x:p-8,y:f},{x:p,y:f},{x:p,y:f+h}],T=b.polygon(v.map(C=>[C.x,C.y]),x),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container").attr("style",Ma(y)),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),y&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),s.attr("transform",`translate(${-u/2+4+(t.padding??0)-(i.x-(i.left??0))},${-h/2+(t.padding??0)-(i.y-(i.top??0))})`),Ct(t,k),t.intersect=function(C){return ht.rect(t,C)},a}N(H4,"shadedProcess");async function G4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=-l/2,p=-u/2,{cssStyles:f}=t,y=vt.svg(a),b=wt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:h,y:p},{x:h,y:p+u},{x:h+l,y:p+u},{x:h+l,y:p-u/2}],v=vr(x),T=y.path(v,b),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),k.attr("transform",`translate(0, ${u/4})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))}, ${-u/4+(t.padding??0)-(i.y-(i.top??0))})`),Ct(t,k),t.intersect=function(C){return ht.polygon(t,x,C)},a}N(G4,"slopedRect");async function W4(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return Ty(e,t,r)}N(W4,"squareRect");async function V4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.height+t.padding,l=i.width+s/4+t.padding,u=s/2,{cssStyles:h}=t,p=vt.svg(a),f=wt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const y=[{x:-l/2+u,y:-s/2},{x:l/2-u,y:-s/2},...Kp(-l/2+u,0,u,50,90,270),{x:l/2-u,y:s/2},...Kp(l/2-u,0,u,50,270,450)],b=vr(y),x=p.path(b,f),v=a.insert(()=>x,":first-child");return v.attr("class","basic label-container outer-path"),h&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),Ct(t,v),t.intersect=function(T){return ht.polygon(t,y,T)},a}N(V4,"stadium");async function Y4(e,t){return Ty(e,t,{rx:5,ry:5})}N(Y4,"state");function Q4(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=St(t);t.labelStyle=n;const{cssStyles:i}=t,{lineColor:s,stateBorder:l,nodeBorder:u}=r,h=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),p=vt.svg(h),f=wt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const y=p.circle(0,0,14,{...f,stroke:s,strokeWidth:2}),b=l??u,x=p.circle(0,0,5,{...f,fill:b,stroke:b,strokeWidth:2,fillStyle:"solid"}),v=h.insert(()=>y,":first-child");return v.insert(()=>x),i&&v.selectAll("path").attr("style",i),a&&v.selectAll("path").attr("style",a),Ct(t,v),t.intersect=function(T){return ht.circle(t,7,T)},h}N(Q4,"stateEnd");function K4(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i;if(t.look==="handDrawn"){const l=vt.svg(a).circle(0,0,14,joe(n));i=a.insert(()=>l),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=a.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Ct(t,i),t.intersect=function(s){return ht.circle(t,7,s)},a}N(K4,"stateStart");async function X4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=(t?.padding||0)/2,l=i.width+t.padding,u=i.height+t.padding,h=-i.width/2-s,p=-i.height/2-s,f=[{x:0,y:0},{x:l,y:0},{x:l,y:-u},{x:0,y:-u},{x:0,y:0},{x:-8,y:0},{x:l+8,y:0},{x:l+8,y:-u},{x:-8,y:-u},{x:-8,y:0}];if(t.look==="handDrawn"){const y=vt.svg(a),b=wt(t,{}),x=y.rectangle(h-8,p,l+16,u,b),v=y.line(h,p,h,p+u,b),T=y.line(h+l,p,h+l,p+u,b);a.insert(()=>v,":first-child"),a.insert(()=>T,":first-child");const k=a.insert(()=>x,":first-child"),{cssStyles:C}=t;k.attr("class","basic label-container").attr("style",Ma(C)),Ct(t,k)}else{const y=Ol(a,l,u,f);n&&y.attr("style",n),Ct(t,y)}return t.intersect=function(y){return ht.polygon(t,f,y)},a}N(X4,"subroutine");async function J4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=Math.max(i.width+(t.padding??0)*2,t?.width??0),l=Math.max(i.height+(t.padding??0)*2,t?.height??0),u=-s/2,h=-l/2,p=.2*l,f=.2*l,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{}),v=[{x:u-p/2,y:h},{x:u+s+p/2,y:h},{x:u+s+p/2,y:h+l},{x:u-p/2,y:h+l}],T=[{x:u+s-p/2,y:h+l},{x:u+s+p/2,y:h+l},{x:u+s+p/2,y:h+l-f}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=vr(v),C=b.path(k,x),A=vr(T),P=b.path(A,{...x,fillStyle:"solid"}),M=a.insert(()=>P,":first-child");return M.insert(()=>C,":first-child"),M.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",n),Ct(t,M),t.intersect=function(L){return ht.polygon(t,v,L)},a}N(J4,"taggedRect");async function Z4(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=u/4,p=.2*l,f=.2*u,y=u+h,{cssStyles:b}=t,x=vt.svg(a),v=wt(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=[{x:-l/2-l/2*.1,y:y/2},...Ll(-l/2-l/2*.1,y/2,l/2+l/2*.1,y/2,h,.8),{x:l/2+l/2*.1,y:-y/2},{x:-l/2-l/2*.1,y:-y/2}],k=-l/2+l/2*.1,C=-y/2-f*.4,A=[{x:k+l-p,y:(C+u)*1.4},{x:k+l,y:C+u-f},{x:k+l,y:(C+u)*.9},...Ll(k+l,(C+u)*1.3,k+l-p,(C+u)*1.5,-u*.03,.5)],P=vr(T),M=x.path(P,v),L=vr(A),D=x.path(L,{...v,fillStyle:"solid"}),q=a.insert(()=>D,":first-child");return q.insert(()=>M,":first-child"),q.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&q.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&q.selectAll("path").attr("style",n),q.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))},${-u/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),Ct(t,q),t.intersect=function(Q){return ht.polygon(t,T,Q)},a}N(Z4,"taggedWaveEdgedRectangle");async function e6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=Math.max(i.width+t.padding,t?.width||0),l=Math.max(i.height+t.padding,t?.height||0),u=-s/2,h=-l/2,p=a.insert("rect",":first-child");return p.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",u).attr("y",h).attr("width",s).attr("height",l),Ct(t,p),t.intersect=function(f){return ht.rect(t,f)},a}N(e6,"text");var The=N((e,t,r,n,a,i)=>`M${e},${t}
    a${a},${i} 0,0,1 0,${-n}
    l${r},0
    a${a},${i} 0,0,1 0,${n}
    M${r},${-n}
    a${a},${i} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),khe=N((e,t,r,n,a,i)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${i} 0,0,0 0,${-n}`,`l${-r},0`,`a${a},${i} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),Ehe=N((e,t,r,n,a,i)=>[`M${e+r/2},${-n/2}`,`a${a},${i} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function t6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s,halfPadding:l}=await Ht(e,t,Ut(t)),u=t.look==="neo"?l*2:l,h=i.height+u,p=h/2,f=p/(2.5+h/50),y=i.width+f+u,{cssStyles:b}=t;let x;if(t.look==="handDrawn"){const v=vt.svg(a),T=khe(0,0,y,h,f,p),k=Ehe(0,0,y,h,f,p),C=v.path(T,wt(t,{})),A=v.path(k,wt(t,{fill:"none"}));x=a.insert(()=>A,":first-child"),x=a.insert(()=>C,":first-child"),x.attr("class","basic label-container"),b&&x.attr("style",b)}else{const v=The(0,0,y,h,f,p);x=a.insert("path",":first-child").attr("d",v).attr("class","basic label-container").attr("style",Ma(b)).attr("style",n),x.attr("class","basic label-container"),b&&x.selectAll("path").attr("style",b),n&&x.selectAll("path").attr("style",n)}return x.attr("label-offset-x",f),x.attr("transform",`translate(${-y/2}, ${h/2} )`),s.attr("transform",`translate(${-(i.width/2)-f-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),Ct(t,x),t.intersect=function(v){const T=ht.rect(t,v),k=T.y-(t.y??0);if(p!=0&&(Math.abs(k)<(t.height??0)/2||Math.abs(k)==(t.height??0)/2&&Math.abs(T.x-(t.x??0))>(t.width??0)/2-f)){let C=f*f*(1-k*k/(p*p));C!=0&&(C=Math.sqrt(Math.abs(C))),C=f-C,v.x-(t.x??0)>0&&(C=-C),T.x+=C}return T},a}N(t6,"tiltedCylinder");async function r6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=i.width+t.padding,l=i.height+t.padding,u=[{x:-3*l/6,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:0,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=vt.svg(a),y=wt(t,{}),b=vr(u),x=f.path(b,y);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Ol(a,s,l,u);return n&&h.attr("style",n),t.width=s,t.height=l,Ct(t,h),t.intersect=function(f){return ht.polygon(t,u,f)},a}N(r6,"trapezoid");async function n6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=60,l=20,u=Math.max(s,i.width+(t.padding??0)*2,t?.width??0),h=Math.max(l,i.height+(t.padding??0)*2,t?.height??0),{cssStyles:p}=t,f=vt.svg(a),y=wt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-u/2*.8,y:-h/2},{x:u/2*.8,y:-h/2},{x:u/2,y:-h/2*.6},{x:u/2,y:h/2},{x:-u/2,y:h/2},{x:-u/2,y:-h/2*.6}],x=vr(b),v=f.path(x,y),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),Ct(t,T),t.intersect=function(k){return ht.polygon(t,b,k)},a}N(n6,"trapezoidalPentagon");async function a6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=ia(zr().flowchart?.htmlLabels),u=i.width+(t.padding??0),h=u+i.height,p=u+i.height,f=[{x:0,y:0},{x:p,y:0},{x:p/2,y:-h}],{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=vr(f),T=b.path(v,x),k=a.insert(()=>T,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return y&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",y),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),t.width=u,t.height=h,Ct(t,k),s.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${h/2-(i.height+(t.padding??0)/(l?2:1)-(i.y-(i.top??0)))})`),t.intersect=function(C){return qe.info("Triangle intersect",t,f,C),ht.polygon(t,f,C)},a}N(a6,"triangle");async function i6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=u/8,p=u+h,{cssStyles:f}=t,b=70-l,x=b>0?b/2:0,v=vt.svg(a),T=wt(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const k=[{x:-l/2-x,y:p/2},...Ll(-l/2-x,p/2,l/2+x,p/2,h,.8),{x:l/2+x,y:-p/2},{x:-l/2-x,y:-p/2}],C=vr(k),A=v.path(C,T),P=a.insert(()=>A,":first-child");return P.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",n),P.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))},${-u/2+(t.padding??0)-h-(i.y-(i.top??0))})`),Ct(t,P),t.intersect=function(M){return ht.polygon(t,k,M)},a}N(i6,"waveEdgedRectangle");async function s6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Ht(e,t,Ut(t)),s=100,l=50,u=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),p=u/h;let f=u,y=h;f>y*p?y=f/p:f=y*p,f=Math.max(f,s),y=Math.max(y,l);const b=Math.min(y*.2,y/4),x=y+b*2,{cssStyles:v}=t,T=vt.svg(a),k=wt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=[{x:-f/2,y:x/2},...Ll(-f/2,x/2,f/2,x/2,b,1),{x:f/2,y:-x/2},...Ll(f/2,-x/2,-f/2,-x/2,b,-1)],A=vr(C),P=T.path(A,k),M=a.insert(()=>P,":first-child");return M.attr("class","basic label-container"),v&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",v),n&&t.look!=="handDrawn"&&M.selectAll("path").attr("style",n),Ct(t,M),t.intersect=function(L){return ht.polygon(t,C,L)},a}N(s6,"waveRectangle");async function o6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Ht(e,t,Ut(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),u=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,p=-l/2,f=-u/2,{cssStyles:y}=t,b=vt.svg(a),x=wt(t,{}),v=[{x:p-h,y:f-h},{x:p-h,y:f+u},{x:p+l,y:f+u},{x:p+l,y:f-h}],T=`M${p-h},${f-h} L${p+l},${f-h} L${p+l},${f+u} L${p-h},${f+u} L${p-h},${f-h}
                M${p-h},${f} L${p+l},${f}
                M${p},${f-h} L${p},${f+u}`;t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=b.path(T,x),C=a.insert(()=>k,":first-child");return C.attr("transform",`translate(${h/2}, ${h/2})`),C.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(i.width/2)+h/2-(i.x-(i.left??0))}, ${-(i.height/2)+h/2-(i.y-(i.top??0))})`),Ct(t,C),t.intersect=function(A){return ht.polygon(t,v,A)},a}N(o6,"windowPane");async function kT(e,t){const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:ie}=Ia(),{background:H}=ie,ue={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${H}`]};await kT(e,ue)}const n=Ia();t.useHtmlLabels=n.htmlLabels;let a=n.er?.diagramPadding??10,i=n.er?.entityPadding??6;const{cssStyles:s}=t,{labelStyles:l,nodeStyles:u}=St(t);if(r.attributes.length===0&&t.label){const ie={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};Oo(t.label,n)+ie.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const H=await Ty(e,t,ie);if(!ia(n.htmlLabels)){const ue=H.select("text"),Z=ue.node()?.getBBox();ue.attr("transform",`translate(${-Z.width/2}, 0)`)}return H}n.htmlLabels||(a*=1.25,i*=1.25);let h=Ut(t);h||(h="node default");const p=e.insert("g").attr("class",h).attr("id",t.domId||t.id),f=await Hu(p,t.label??"",n,0,0,["name"],l);f.height+=i;let y=0;const b=[],x=[];let v=0,T=0,k=0,C=0,A=!0,P=!0;for(const ie of r.attributes){const H=await Hu(p,ie.type,n,0,y,["attribute-type"],l);v=Math.max(v,H.width+a);const ue=await Hu(p,ie.name,n,0,y,["attribute-name"],l);T=Math.max(T,ue.width+a);const Z=await Hu(p,ie.keys.join(),n,0,y,["attribute-keys"],l);k=Math.max(k,Z.width+a);const ae=await Hu(p,ie.comment,n,0,y,["attribute-comment"],l);C=Math.max(C,ae.width+a);const pe=Math.max(H.height,ue.height,Z.height,ae.height)+i;x.push({yOffset:y,rowHeight:pe}),y+=pe}let M=4;k<=a&&(A=!1,k=0,M--),C<=a&&(P=!1,C=0,M--);const L=p.node().getBBox();if(f.width+a*2-(v+T+k+C)>0){const ie=f.width+a*2-(v+T+k+C);v+=ie/M,T+=ie/M,k>0&&(k+=ie/M),C>0&&(C+=ie/M)}const D=v+T+k+C,q=vt.svg(p),Q=wt(t,{});t.look!=="handDrawn"&&(Q.roughness=0,Q.fillStyle="solid");let F=0;x.length>0&&(F=x.reduce((ie,H)=>ie+(H?.rowHeight??0),0));const K=Math.max(L.width+a*2,t?.width||0,D),W=Math.max((F??0)+f.height,t?.height||0),j=-K/2,O=-W/2;p.selectAll("g:not(:first-child)").each((ie,H,ue)=>{const Z=Lr(ue[H]),ae=Z.attr("transform");let pe=0,ye=0;if(ae){const de=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(ae);de&&(pe=parseFloat(de[1]),ye=parseFloat(de[2]),Z.attr("class").includes("attribute-name")?pe+=v:Z.attr("class").includes("attribute-keys")?pe+=v+T:Z.attr("class").includes("attribute-comment")&&(pe+=v+T+k))}Z.attr("transform",`translate(${j+a/2+pe}, ${ye+O+f.height+i/2})`)}),p.select(".name").attr("transform","translate("+-f.width/2+", "+(O+i/2)+")");const $=q.rectangle(j,O,K,W,Q),I=p.insert(()=>$,":first-child").attr("style",s.join("")),{themeVariables:G}=Ia(),{rowEven:V,rowOdd:oe,nodeBorder:U}=G;b.push(0);for(const[ie,H]of x.entries()){const Z=(ie+1)%2===0&&H.yOffset!==0,ae=q.rectangle(j,f.height+O+H?.yOffset,K,H?.rowHeight,{...Q,fill:Z?V:oe,stroke:U});p.insert(()=>ae,"g.label").attr("style",s.join("")).attr("class",`row-rect-${Z?"even":"odd"}`)}let z=q.line(j,f.height+O,K+j,f.height+O,Q);p.insert(()=>z).attr("class","divider"),z=q.line(v+j,f.height+O,v+j,W+O,Q),p.insert(()=>z).attr("class","divider"),A&&(z=q.line(v+T+j,f.height+O,v+T+j,W+O,Q),p.insert(()=>z).attr("class","divider")),P&&(z=q.line(v+T+k+j,f.height+O,v+T+k+j,W+O,Q),p.insert(()=>z).attr("class","divider"));for(const ie of b)z=q.line(j,f.height+O+ie,K+j,f.height+O+ie,Q),p.insert(()=>z).attr("class","divider");if(Ct(t,I),u&&t.look!=="handDrawn"){const H=u.split(";")?.filter(ue=>ue.includes("stroke"))?.map(ue=>`${ue}`).join("; ");p.selectAll("path").attr("style",H??""),p.selectAll(".row-rect-even path").attr("style",u)}return t.intersect=function(ie){return ht.rect(t,ie)},p}N(kT,"erBox");async function Hu(e,t,r,n=0,a=0,i=[],s=""){const l=e.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${n}, ${a})`).attr("style",s);t!==AA(t)&&(t=AA(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const u=l.node().appendChild(await Dl(l,t,{width:Oo(t,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let p=u.children[0];for(p.textContent=p.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");p.childNodes[0];)p=p.childNodes[0],p.textContent=p.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=u.getBBox();if(ia(r.htmlLabels)){const p=u.children[0];p.style.textAlign="start";const f=Lr(u);h=p.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}return h}N(Hu,"addText");async function l6(e,t,r,n,a=r.class.padding??12){const i=n?0:3,s=e.insert("g").attr("class",Ut(t)).attr("id",t.domId||t.id);let l=null,u=null,h=null,p=null,f=0,y=0,b=0;if(l=s.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const C=t.annotations[0];await up(l,{text:`«${C}»`},0),f=l.node().getBBox().height}u=s.insert("g").attr("class","label-group text"),await up(u,t,0,["font-weight: bolder"]);const x=u.node().getBBox();y=x.height,h=s.insert("g").attr("class","members-group text");let v=0;for(const C of t.members){const A=await up(h,C,v,[C.parseClassifier()]);v+=A+i}b=h.node().getBBox().height,b<=0&&(b=a/2),p=s.insert("g").attr("class","methods-group text");let T=0;for(const C of t.methods){const A=await up(p,C,T,[C.parseClassifier()]);T+=A+i}let k=s.node().getBBox();if(l!==null){const C=l.node().getBBox();l.attr("transform",`translate(${-C.width/2})`)}return u.attr("transform",`translate(${-x.width/2}, ${f})`),k=s.node().getBBox(),h.attr("transform",`translate(0, ${f+y+a*2})`),k=s.node().getBBox(),p.attr("transform",`translate(0, ${f+y+(b?b+a*4:a*2)})`),k=s.node().getBBox(),{shapeSvg:s,bbox:k}}N(l6,"textHelper");async function up(e,t,r,n=[]){const a=e.insert("g").attr("class","label").attr("style",n.join("; ")),i=Ia();let s="useHtmlLabels"in t?t.useHtmlLabels:ia(i.htmlLabels)??!0,l="";"text"in t?l=t.text:l=t.label,!s&&l.startsWith("\\")&&(l=l.substring(1)),pd(l)&&(s=!0);const u=await Dl(a,DS($c(l)),{width:Oo(l,i)+50,classes:"markdown-node-label",useHtmlLabels:s},i);let h,p=1;if(s){const f=u.children[0],y=Lr(u);p=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(p+=f.innerHTML.split("<mrow>").length-1);const b=f.getElementsByTagName("img");if(b){const x=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(v=>new Promise(T=>{function k(){if(v.style.display="flex",v.style.flexDirection="column",x){const C=i.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,P=parseInt(C,10)*5+"px";v.style.minWidth=P,v.style.maxWidth=P}else v.style.width="100%";T(v)}N(k,"setupImage"),setTimeout(()=>{v.complete&&k()}),v.addEventListener("error",k),v.addEventListener("load",k)})))}h=f.getBoundingClientRect(),y.attr("width",h.width),y.attr("height",h.height)}else{n.includes("font-weight: bolder")&&Lr(u).selectAll("tspan").attr("font-weight",""),p=u.children.length;const f=u.children[0];(u.textContent===""||u.textContent.includes("&gt"))&&(f.textContent=l[0]+l.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),l[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),h=u.getBBox()}return a.attr("transform","translate(0,"+(-h.height/(2*p)+r)+")"),h.height}N(up,"addText");async function c6(e,t){const r=zr(),n=r.class.padding??12,a=n,i=t.useHtmlLabels??ia(r.htmlLabels)??!0,s=t;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:l,bbox:u}=await l6(e,t,r,i,a),{labelStyles:h,nodeStyles:p}=St(t);t.labelStyle=h,t.cssStyles=s.styles||"";const f=s.styles?.join(";")||p||"";t.cssStyles||(t.cssStyles=f.replaceAll("!important","").split(";"));const y=s.members.length===0&&s.methods.length===0&&!r.class?.hideEmptyMembersBox,b=vt.svg(l),x=wt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=u.width;let T=u.height;s.members.length===0&&s.methods.length===0?T+=a:s.members.length>0&&s.methods.length===0&&(T+=a*2);const k=-v/2,C=-T/2,A=b.rectangle(k-n,C-n-(y?n:s.members.length===0&&s.methods.length===0?-n/2:0),v+2*n,T+2*n+(y?n*2:s.members.length===0&&s.methods.length===0?-n:0),x),P=l.insert(()=>A,":first-child");P.attr("class","basic label-container");const M=P.node().getBBox();l.selectAll(".text").each((Q,F,K)=>{const W=Lr(K[F]),j=W.attr("transform");let O=0;if(j){const V=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(j);V&&(O=parseFloat(V[2]))}let $=O+C+n-(y?n:s.members.length===0&&s.methods.length===0?-n/2:0);i||($-=4);let I=k;(W.attr("class").includes("label-group")||W.attr("class").includes("annotation-group"))&&(I=-W.node()?.getBBox().width/2||0,l.selectAll("text").each(function(G,V,oe){window.getComputedStyle(oe[V]).textAnchor==="middle"&&(I=0)})),W.attr("transform",`translate(${I}, ${$})`)});const L=l.select(".annotation-group").node().getBBox().height-(y?n/2:0)||0,D=l.select(".label-group").node().getBBox().height-(y?n/2:0)||0,q=l.select(".members-group").node().getBBox().height-(y?n/2:0)||0;if(s.members.length>0||s.methods.length>0||y){const Q=b.line(M.x,L+D+C+n,M.x+M.width,L+D+C+n,x);l.insert(()=>Q).attr("class","divider").attr("style",f)}if(y||s.members.length>0||s.methods.length>0){const Q=b.line(M.x,L+D+q+C+a*2+n,M.x+M.width,L+D+q+C+n+a*2,x);l.insert(()=>Q).attr("class","divider").attr("style",f)}if(s.look!=="handDrawn"&&l.selectAll("path").attr("style",f),P.select(":nth-child(2)").attr("style",f),l.selectAll(".divider").select("path").attr("style",f),t.labelStyle?l.selectAll("span").attr("style",t.labelStyle):l.selectAll("span").attr("style",f),!i){const Q=RegExp(/color\s*:\s*([^;]*)/),F=Q.exec(f);if(F){const K=F[0].replace("color","fill");l.selectAll("tspan").attr("style",K)}else if(h){const K=Q.exec(h);if(K){const W=K[0].replace("color","fill");l.selectAll("tspan").attr("style",W)}}}return Ct(t,P),t.intersect=function(Q){return ht.rect(t,Q)},l}N(c6,"classBox");async function u6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const a=t,i=t,s=20,l=20,u="verifyMethod"in t,h=Ut(t),p=e.insert("g").attr("class",h).attr("id",t.domId??t.id);let f;u?f=await zs(p,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):f=await zs(p,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let y=f;const b=await zs(p,a.name,y,t.labelStyle+"; font-weight: bold;");if(y+=b+l,u){const L=await zs(p,`${a.requirementId?`ID: ${a.requirementId}`:""}`,y,t.labelStyle);y+=L;const D=await zs(p,`${a.text?`Text: ${a.text}`:""}`,y,t.labelStyle);y+=D;const q=await zs(p,`${a.risk?`Risk: ${a.risk}`:""}`,y,t.labelStyle);y+=q,await zs(p,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,y,t.labelStyle)}else{const L=await zs(p,`${i.type?`Type: ${i.type}`:""}`,y,t.labelStyle);y+=L,await zs(p,`${i.docRef?`Doc Ref: ${i.docRef}`:""}`,y,t.labelStyle)}const x=(p.node()?.getBBox().width??200)+s,v=(p.node()?.getBBox().height??200)+s,T=-x/2,k=-v/2,C=vt.svg(p),A=wt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const P=C.rectangle(T,k,x,v,A),M=p.insert(()=>P,":first-child");if(M.attr("class","basic label-container").attr("style",n),p.selectAll(".label").each((L,D,q)=>{const Q=Lr(q[D]),F=Q.attr("transform");let K=0,W=0;if(F){const I=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(F);I&&(K=parseFloat(I[1]),W=parseFloat(I[2]))}const j=W-v/2;let O=T+s/2;(D===0||D===1)&&(O=K),Q.attr("transform",`translate(${O}, ${j+s})`)}),y>f+b+l){const L=C.line(T,k+f+b+l,T+x,k+f+b+l,A);p.insert(()=>L).attr("style",n)}return Ct(t,M),t.intersect=function(L){return ht.rect(t,L)},p}N(u6,"requirementBox");async function zs(e,t,r,n=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",n),i=zr(),s=i.htmlLabels??!0,l=await Dl(a,DS($c(t)),{width:Oo(t,i)+50,classes:"markdown-node-label",useHtmlLabels:s,style:n},i);let u;if(s){const h=l.children[0],p=Lr(l);u=h.getBoundingClientRect(),p.attr("width",u.width),p.attr("height",u.height)}else{const h=l.children[0];for(const p of h.children)p.textContent=p.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&p.setAttribute("style",n);u=l.getBBox(),u.height+=6}return a.attr("transform",`translate(${-u.width/2},${-u.height/2+r})`),u.height}N(zs,"addText");var Che=N(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function d6(e,t,{config:r}){const{labelStyles:n,nodeStyles:a}=St(t);t.labelStyle=n||"";const i=10,s=t.width;t.width=(t.width??200)-10;const{shapeSvg:l,bbox:u,label:h}=await Ht(e,t,Ut(t)),p=t.padding||10;let f="",y;"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(f=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),y=l.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const b={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let x,v;y?{label:x,bbox:v}=await Hv(y,"ticket"in t&&t.ticket||"",b):{label:x,bbox:v}=await Hv(l,"ticket"in t&&t.ticket||"",b);const{label:T,bbox:k}=await Hv(l,"assigned"in t&&t.assigned||"",b);t.width=s;const C=10,A=t?.width||0,P=Math.max(v.height,k.height)/2,M=Math.max(u.height+C*2,t?.height||0)+P,L=-A/2,D=-M/2;h.attr("transform","translate("+(p-A/2)+", "+(-P-u.height/2)+")"),x.attr("transform","translate("+(p-A/2)+", "+(-P+u.height/2)+")"),T.attr("transform","translate("+(p+A/2-k.width-2*i)+", "+(-P+u.height/2)+")");let q;const{rx:Q,ry:F}=t,{cssStyles:K}=t;if(t.look==="handDrawn"){const W=vt.svg(l),j=wt(t,{}),O=Q||F?W.path(Ml(L,D,A,M,Q||0),j):W.rectangle(L,D,A,M,j);q=l.insert(()=>O,":first-child"),q.attr("class","basic label-container").attr("style",K||null)}else{q=l.insert("rect",":first-child"),q.attr("class","basic label-container __APA__").attr("style",a).attr("rx",Q??5).attr("ry",F??5).attr("x",L).attr("y",D).attr("width",A).attr("height",M);const W="priority"in t&&t.priority;if(W){const j=l.append("line"),O=L+2,$=D+Math.floor((Q??0)/2),I=D+M-Math.floor((Q??0)/2);j.attr("x1",O).attr("y1",$).attr("x2",O).attr("y2",I).attr("stroke-width","4").attr("stroke",Che(W))}}return Ct(t,q),t.height=M,t.intersect=function(W){return ht.rect(t,W)},l}N(d6,"kanbanItem");async function h6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Ht(e,t,Ut(t)),u=i.width+10*s,h=i.height+8*s,p=.15*u,{cssStyles:f}=t,y=i.width+20,b=i.height+20,x=Math.max(u,y),v=Math.max(h,b);l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`);let T;const k=`M0 0 
    a${p},${p} 1 0,0 ${x*.25},${-1*v*.1}
    a${p},${p} 1 0,0 ${x*.25},0
    a${p},${p} 1 0,0 ${x*.25},0
    a${p},${p} 1 0,0 ${x*.25},${v*.1}

    a${p},${p} 1 0,0 ${x*.15},${v*.33}
    a${p*.8},${p*.8} 1 0,0 0,${v*.34}
    a${p},${p} 1 0,0 ${-1*x*.15},${v*.33}

    a${p},${p} 1 0,0 ${-1*x*.25},${v*.15}
    a${p},${p} 1 0,0 ${-1*x*.25},0
    a${p},${p} 1 0,0 ${-1*x*.25},0
    a${p},${p} 1 0,0 ${-1*x*.25},${-1*v*.15}

    a${p},${p} 1 0,0 ${-1*x*.1},${-1*v*.33}
    a${p*.8},${p*.8} 1 0,0 0,${-1*v*.34}
    a${p},${p} 1 0,0 ${x*.1},${-1*v*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const C=vt.svg(a),A=wt(t,{}),P=C.path(k,A);T=a.insert(()=>P,":first-child"),T.attr("class","basic label-container").attr("style",Ma(f))}else T=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",k);return T.attr("transform",`translate(${-x/2}, ${-v/2})`),Ct(t,T),t.calcIntersect=function(C,A){return ht.rect(C,A)},t.intersect=function(C){return qe.info("Bang intersect",t,C),ht.rect(t,C)},a}N(h6,"bang");async function p6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Ht(e,t,Ut(t)),u=i.width+2*s,h=i.height+2*s,p=.15*u,f=.25*u,y=.35*u,b=.2*u,{cssStyles:x}=t;let v;const T=`M0 0 
    a${p},${p} 0 0,1 ${u*.25},${-1*u*.1}
    a${y},${y} 1 0,1 ${u*.4},${-1*u*.1}
    a${f},${f} 1 0,1 ${u*.35},${u*.2}

    a${p},${p} 1 0,1 ${u*.15},${h*.35}
    a${b},${b} 1 0,1 ${-1*u*.15},${h*.65}

    a${f},${p} 1 0,1 ${-1*u*.25},${u*.15}
    a${y},${y} 1 0,1 ${-1*u*.5},0
    a${p},${p} 1 0,1 ${-1*u*.25},${-1*u*.15}

    a${p},${p} 1 0,1 ${-1*u*.1},${-1*h*.35}
    a${b},${b} 1 0,1 ${u*.1},${-1*h*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const k=vt.svg(a),C=wt(t,{}),A=k.path(T,C);v=a.insert(()=>A,":first-child"),v.attr("class","basic label-container").attr("style",Ma(x))}else v=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",T);return l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),v.attr("transform",`translate(${-u/2}, ${-h/2})`),Ct(t,v),t.calcIntersect=function(k,C){return ht.rect(k,C)},t.intersect=function(k){return qe.info("Cloud intersect",t,k),ht.rect(t,k)},a}N(p6,"cloud");async function g6(e,t){const{labelStyles:r,nodeStyles:n}=St(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Ht(e,t,Ut(t)),u=i.width+8*s,h=i.height+2*s,p=5,f=`
    M${-u/2} ${h/2-p}
    v${-h+2*p}
    q0,-${p} ${p},-${p}
    h${u-2*p}
    q${p},0 ${p},${p}
    v${h-2*p}
    q0,${p} -${p},${p}
    h${-u+2*p}
    q-${p},0 -${p},-${p}
    Z
  `,y=a.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",f);return a.append("line").attr("class","node-line-").attr("x1",-u/2).attr("y1",h/2).attr("x2",u/2).attr("y2",h/2),l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),a.append(()=>l.node()),Ct(t,y),t.calcIntersect=function(b,x){return ht.rect(b,x)},t.intersect=function(b){return ht.rect(t,b)},a}N(g6,"defaultMindmapNode");async function f6(e,t){const r={padding:t.padding??0};return TT(e,t,r)}N(f6,"mindmapCircle");var _he=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:W4},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:q4},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:V4},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:X4},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:m4},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:TT},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:h6},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:p6},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:z4},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:T4},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:I4},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:R4},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:r6},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:L4},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:b4},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:e6},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:l4},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:H4},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:K4},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Q4},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:w4},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:k4},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:h4},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:p4},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:g4},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:D4},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:i6},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:S4},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:t6},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:M4},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:f4},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:y4},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:a6},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:o6},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:x4},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:n6},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:v4},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:G4},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:B4},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:j4},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:o4},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:d4},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Z4},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:J4},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:s6},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:U4},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:O4}],Ahe=N(()=>{const t=[...Object.entries({state:Y4,choice:c4,note:F4,rectWithTitle:$4,labelRect:P4,iconSquare:A4,iconCircle:C4,icon:E4,iconRounded:_4,imageSquare:N4,anchor:s4,kanbanItem:d6,mindmapCircle:f6,defaultMindmapNode:g6,classBox:c6,erBox:kT,requirementBox:u6}),..._he.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),m6=Ahe();function Nhe(e){return e in m6}N(Nhe,"isValidShape");var ky=new Map;async function y6(e,t,r){let n,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const i=t.shape?m6[t.shape]:void 0;if(!i)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let s;r.config.securityLevel==="sandbox"?s="_top":t.linkTarget&&(s=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",s??null),a=await i(n,t,r)}else a=await i(e,t,r),n=a;return t.tooltip&&a.attr("title",t.tooltip),ky.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}N(y6,"insertNode");var jye=N((e,t)=>{ky.set(t.id,e)},"setNodeElem"),Bye=N(()=>{ky.clear()},"clear"),Fye=N(e=>{const t=ky.get(e.id);qe.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),Lhe=N((e,t,r,n,a,i)=>{t.arrowTypeStart&&ON(e,"start",t.arrowTypeStart,r,n,a,i),t.arrowTypeEnd&&ON(e,"end",t.arrowTypeEnd,r,n,a,i)},"addEdgeMarkers"),Phe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},ON=N((e,t,r,n,a,i,s)=>{const l=Phe[r];if(!l){qe.warn(`Unknown arrow type: ${r}`);return}const u=l.type,p=`${a}_${i}-${u}${t==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const f=s.replace(/[^\dA-Za-z]/g,"_"),y=`${p}_${f}`;if(!document.getElementById(y)){const b=document.getElementById(p);if(b){const x=b.cloneNode(!0);x.id=y,x.querySelectorAll("path, circle, line").forEach(T=>{T.setAttribute("stroke",s),l.fill&&T.setAttribute("fill",s)}),b.parentNode?.appendChild(x)}}e.attr(`marker-${t}`,`url(${n}#${y})`)}else e.attr(`marker-${t}`,`url(${n}#${p})`)},"addEdgeMarker"),D0=new Map,Ca=new Map,zye=N(()=>{D0.clear(),Ca.clear()},"clear"),om=N(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),Rhe=N(async(e,t)=>{let r=ia(zr().flowchart.htmlLabels);const{labelStyles:n}=St(t);t.labelStyle=n;const a=await Dl(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});qe.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label").attr("data-id",t.id);s.node().appendChild(a);let l=a.getBBox();if(r){const h=a.children[0],p=Lr(a);l=h.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),D0.set(t.id,i),t.width=l.width,t.height=l.height;let u;if(t.startLabelLeft){const h=await mc(t.startLabelLeft,om(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");u=f.node().appendChild(h);const y=h.getBBox();f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),Ca.get(t.id)||Ca.set(t.id,{}),Ca.get(t.id).startLeft=p,dp(u,t.startLabelLeft)}if(t.startLabelRight){const h=await mc(t.startLabelRight,om(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");u=p.node().appendChild(h),f.node().appendChild(h);const y=h.getBBox();f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),Ca.get(t.id)||Ca.set(t.id,{}),Ca.get(t.id).startRight=p,dp(u,t.startLabelRight)}if(t.endLabelLeft){const h=await mc(t.endLabelLeft,om(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");u=f.node().appendChild(h);const y=h.getBBox();f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),p.node().appendChild(h),Ca.get(t.id)||Ca.set(t.id,{}),Ca.get(t.id).endLeft=p,dp(u,t.endLabelLeft)}if(t.endLabelRight){const h=await mc(t.endLabelRight,om(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");u=f.node().appendChild(h);const y=h.getBBox();f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),p.node().appendChild(h),Ca.get(t.id)||Ca.set(t.id,{}),Ca.get(t.id).endRight=p,dp(u,t.endLabelRight)}return a},"insertEdgeLabel");function dp(e,t){zr().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}N(dp,"setTerminalWidth");var Ihe=N((e,t)=>{qe.debug("Moving label abc88 ",e.id,e.label,D0.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=zr(),{subGraphTitleTotalMargin:a}=eT(n);if(e.label){const i=D0.get(e.id);let s=e.x,l=e.y;if(r){const u=vs.calcLabelPosition(r);qe.debug("Moving label "+e.label+" from (",s,",",l,") to (",u.x,",",u.y,") abc88"),t.updatedPath&&(s=u.x,l=u.y)}i.attr("transform",`translate(${s}, ${l+a/2})`)}if(e.startLabelLeft){const i=Ca.get(e.id).startLeft;let s=e.x,l=e.y;if(r){const u=vs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=u.x,l=u.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.startLabelRight){const i=Ca.get(e.id).startRight;let s=e.x,l=e.y;if(r){const u=vs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=u.x,l=u.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.endLabelLeft){const i=Ca.get(e.id).endLeft;let s=e.x,l=e.y;if(r){const u=vs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=u.x,l=u.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.endLabelRight){const i=Ca.get(e.id).endRight;let s=e.x,l=e.y;if(r){const u=vs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=u.x,l=u.y}i.attr("transform",`translate(${s}, ${l})`)}},"positionEdgeLabel"),Dhe=N((e,t)=>{const r=e.x,n=e.y,a=Math.abs(t.x-r),i=Math.abs(t.y-n),s=e.width/2,l=e.height/2;return a>=s||i>=l},"outsideNode"),Mhe=N((e,t,r)=>{qe.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,a=e.y,i=Math.abs(n-r.x),s=e.width/2;let l=r.x<t.x?s-i:s+i;const u=e.height/2,h=Math.abs(t.y-r.y),p=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*s>Math.abs(n-t.x)*u){let f=r.y<t.y?t.y-u-a:a-u-t.y;l=p*f/h;const y={x:r.x<t.x?r.x+l:r.x-p+l,y:r.y<t.y?r.y+h-f:r.y-h+f};return l===0&&(y.x=t.x,y.y=t.y),p===0&&(y.x=t.x),h===0&&(y.y=t.y),qe.debug(`abc89 top/bottom calc, Q ${h}, q ${f}, R ${p}, r ${l}`,y),y}else{r.x<t.x?l=t.x-s-n:l=n-s-t.x;let f=h*l/p,y=r.x<t.x?r.x+p-l:r.x-p+l,b=r.y<t.y?r.y+f:r.y-f;return qe.debug(`sides calc abc89, Q ${h}, q ${f}, R ${p}, r ${l}`,{_x:y,_y:b}),l===0&&(y=t.x,b=t.y),p===0&&(y=t.x),h===0&&(b=t.y),{x:y,y:b}}},"intersection"),jN=N((e,t)=>{qe.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],a=!1;return e.forEach(i=>{if(qe.info("abc88 checking point",i,t),!Dhe(t,i)&&!a){const s=Mhe(t,n,i);qe.debug("abc88 inside",i,n,s),qe.debug("abc88 intersection",s,t);let l=!1;r.forEach(u=>{l=l||u.x===s.x&&u.y===s.y}),r.some(u=>u.x===s.x&&u.y===s.y)?qe.warn("abc88 no intersect",s,r):r.push(s),a=!0}else qe.warn("abc88 outside",i,n),n=i,a||r.push(i)}),qe.debug("returning points",r),r},"cutPathAtIntersect");function b6(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const a=e[n-1],i=e[n],s=e[n+1];(a.x===i.x&&i.y===s.y&&Math.abs(i.x-s.x)>5&&Math.abs(i.y-a.y)>5||a.y===i.y&&i.x===s.x&&Math.abs(i.x-a.x)>5&&Math.abs(i.y-s.y)>5)&&(t.push(i),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}N(b6,"extractCornerPoints");var BN=N(function(e,t,r){const n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a),s=r/i;return{x:t.x-s*n,y:t.y-s*a}},"findAdjacentPoint"),Ohe=N(function(e){const{cornerPointPositions:t}=b6(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const a=e[n-1],i=e[n+1],s=e[n],l=BN(a,s,5),u=BN(i,s,5),h=u.x-l.x,p=u.y-l.y;r.push(l);const f=Math.sqrt(2)*2;let y={x:s.x,y:s.y};if(Math.abs(i.x-a.x)>10&&Math.abs(i.y-a.y)>=10){qe.debug("Corner point fixing",Math.abs(i.x-a.x),Math.abs(i.y-a.y));const b=5;s.x===l.x?y={x:h<0?l.x-b+f:l.x+b-f,y:p<0?l.y-f:l.y+f}:y={x:h<0?l.x-f:l.x+f,y:p<0?l.y-b+f:l.y+b-f}}else qe.debug("Corner point skipping fixing",Math.abs(i.x-a.x),Math.abs(i.y-a.y));r.push(y,u)}else r.push(e[n]);return r},"fixCorners"),jhe=N((e,t,r)=>{const n=e-t-r,a=2,i=2,s=a+i,l=Math.floor(n/s),u=Array(l).fill(`${a} ${i}`).join(" ");return`0 ${t} ${u} ${r}`},"generateDashArray"),Bhe=N(function(e,t,r,n,a,i,s,l=!1){const{handDrawnSeed:u}=zr();let h=t.points,p=!1;const f=a;var y=i;const b=[];for(const O in t.cssCompiledStyles)QM(O)||b.push(t.cssCompiledStyles[O]);qe.debug("UIO intersect check",t.points,y.x,f.x),y.intersect&&f.intersect&&!l&&(h=h.slice(1,t.points.length-1),h.unshift(f.intersect(h[0])),qe.debug("Last point UIO",t.start,"-->",t.end,h[h.length-1],y,y.intersect(h[h.length-1])),h.push(y.intersect(h[h.length-1])));const x=btoa(JSON.stringify(h));t.toCluster&&(qe.info("to cluster abc88",r.get(t.toCluster)),h=jN(t.points,r.get(t.toCluster).node),p=!0),t.fromCluster&&(qe.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(h,null,2)),h=jN(h.reverse(),r.get(t.fromCluster).node).reverse(),p=!0);let v=h.filter(O=>!Number.isNaN(O.y));v=Ohe(v);let T=_m;switch(T=d0,t.curve){case"linear":T=d0;break;case"basis":T=_m;break;case"cardinal":T=ZI;break;case"bumpX":T=YI;break;case"bumpY":T=QI;break;case"catmullRom":T=tD;break;case"monotoneX":T=oD;break;case"monotoneY":T=lD;break;case"natural":T=uD;break;case"step":T=dD;break;case"stepAfter":T=pD;break;case"stepBefore":T=hD;break;default:T=_m}const{x:k,y:C}=Ooe(t),A=xse().x(k).y(C).curve(T);let P;switch(t.thickness){case"normal":P="edge-thickness-normal";break;case"thick":P="edge-thickness-thick";break;case"invisible":P="edge-thickness-invisible";break;default:P="edge-thickness-normal"}switch(t.pattern){case"solid":P+=" edge-pattern-solid";break;case"dotted":P+=" edge-pattern-dotted";break;case"dashed":P+=" edge-pattern-dashed";break;default:P+=" edge-pattern-solid"}let M,L=t.curve==="rounded"?x6(v6(v,t),5):A(v);const D=Array.isArray(t.style)?t.style:[t.style];let q=D.find(O=>O?.startsWith("stroke:")),Q=!1;if(t.look==="handDrawn"){const O=vt.svg(e);Object.assign([],v);const $=O.path(L,{roughness:.3,seed:u});P+=" transition",M=Lr($).select("path").attr("id",t.id).attr("class"," "+P+(t.classes?" "+t.classes:"")).attr("style",D?D.reduce((G,V)=>G+";"+V,""):"");let I=M.attr("d");M.attr("d",I),e.node().appendChild(M.node())}else{const O=b.join(";"),$=D?D.reduce((ie,H)=>ie+H+";",""):"";let I="";t.animate&&(I=" edge-animation-fast"),t.animation&&(I=" edge-animation-"+t.animation);const G=(O?O+";"+$+";":$)+";"+(D?D.reduce((ie,H)=>ie+";"+H,""):"");M=e.append("path").attr("d",L).attr("id",t.id).attr("class"," "+P+(t.classes?" "+t.classes:"")+(I??"")).attr("style",G),q=G.match(/stroke:([^;]+)/)?.[1],Q=t.animate===!0||!!t.animation||O.includes("animation");const V=M.node(),oe=typeof V.getTotalLength=="function"?V.getTotalLength():0,U=tN[t.arrowTypeStart]||0,z=tN[t.arrowTypeEnd]||0;if(t.look==="neo"&&!Q){const H=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?jhe(oe,U,z):`0 ${U} ${oe-U-z} ${z}`}; stroke-dashoffset: 0;`;M.attr("style",H+M.attr("style"))}}M.attr("data-edge",!0),M.attr("data-et","edge"),M.attr("data-id",t.id),M.attr("data-points",x),t.showPoints&&v.forEach(O=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",O.x).attr("cy",O.y)});let F="";(zr().flowchart.arrowMarkerAbsolute||zr().state.arrowMarkerAbsolute)&&(F=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,F=F.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),qe.info("arrowTypeStart",t.arrowTypeStart),qe.info("arrowTypeEnd",t.arrowTypeEnd),Lhe(M,t,F,s,n,q);const K=Math.floor(h.length/2),W=h[K];vs.isLabelCoordinateInPath(W,M.attr("d"))||(p=!0);let j={};return p&&(j.updatedPath=h),j.originalPath=t.points,j},"insertEdge");function x6(e,t){if(e.length<2)return"";let r="";const n=e.length,a=1e-5;for(let i=0;i<n;i++){const s=e[i],l=e[i-1],u=e[i+1];if(i===0)r+=`M${s.x},${s.y}`;else if(i===n-1)r+=`L${s.x},${s.y}`;else{const h=s.x-l.x,p=s.y-l.y,f=u.x-s.x,y=u.y-s.y,b=Math.hypot(h,p),x=Math.hypot(f,y);if(b<a||x<a){r+=`L${s.x},${s.y}`;continue}const v=h/b,T=p/b,k=f/x,C=y/x,A=v*k+T*C,P=Math.max(-1,Math.min(1,A)),M=Math.acos(P);if(M<a||Math.abs(Math.PI-M)<a){r+=`L${s.x},${s.y}`;continue}const L=Math.min(t/Math.sin(M/2),b/2,x/2),D=s.x-v*L,q=s.y-T*L,Q=s.x+k*L,F=s.y+C*L;r+=`L${D},${q}`,r+=`Q${s.x},${s.y} ${Q},${F}`}}return r}N(x6,"generateRoundedPath");function I1(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}N(I1,"calculateDeltaAndAngle");function v6(e,t){const r=e.map(a=>({...a}));if(e.length>=2&&Pa[t.arrowTypeStart]){const a=Pa[t.arrowTypeStart],i=e[0],s=e[1],{angle:l}=I1(i,s),u=a*Math.cos(l),h=a*Math.sin(l);r[0].x=i.x+u,r[0].y=i.y+h}const n=e.length;if(n>=2&&Pa[t.arrowTypeEnd]){const a=Pa[t.arrowTypeEnd],i=e[n-1],s=e[n-2],{angle:l}=I1(s,i),u=a*Math.cos(l),h=a*Math.sin(l);r[n-1].x=i.x-u,r[n-1].y=i.y-h}return r}N(v6,"applyMarkerOffsetsToPoints");var Fhe=N((e,t,r,n)=>{t.forEach(a=>{tpe[a](e,r,n)})},"insertMarkers"),zhe=N((e,t,r)=>{qe.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),Uhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),$he=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),qhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),Hhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),Ghe=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Whe=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),Vhe=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Yhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),Qhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),Khe=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),Xhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),Jhe=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),Zhe=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),epe=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),tpe={extension:zhe,composition:Uhe,aggregation:$he,dependency:qhe,lollipop:Hhe,point:Ghe,circle:Whe,cross:Vhe,barb:Yhe,only_one:Qhe,zero_or_one:Khe,one_or_more:Xhe,zero_or_more:Jhe,requirement_arrow:Zhe,requirement_contains:epe},rpe=Fhe,npe={common:Rd,getConfig:Ia,insertCluster:dhe,insertEdge:Bhe,insertEdgeLabel:Rhe,insertMarkers:rpe,insertNode:y6,interpolateToCurve:iT,labelHelper:Ht,log:qe,positionEdgeLabel:Ihe},Xp={},w6=N(e=>{for(const t of e)Xp[t.name]=t},"registerLayoutLoaders"),ape=N(()=>{w6([{name:"dagre",loader:N(async()=>await Rt(()=>import("./dagre-6UL2VRFP-BK_pa8Be.js"),__vite__mapDeps([5,6,7,8,9,10])),"loader")},{name:"cose-bilkent",loader:N(async()=>await Rt(()=>import("./cose-bilkent-S5V4N54A-DUkPHKgO.js"),__vite__mapDeps([11,12])),"loader")}])},"registerDefaultLayoutLoaders");ape();var Uye=N(async(e,t)=>{if(!(e.layoutAlgorithm in Xp))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=Xp[e.layoutAlgorithm];return(await r.loader()).render(e,t,npe,{algorithm:r.algorithm})},"render"),$ye=N((e="",{fallback:t="dagre"}={})=>{if(e in Xp)return e;if(t in Xp)return qe.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),S6="comm",T6="rule",k6="decl",ipe="@import",spe="@namespace",ope="@keyframes",lpe="@layer",E6=Math.abs,ET=String.fromCharCode;function C6(e){return e.trim()}function Rm(e,t,r){return e.replace(t,r)}function cpe(e,t,r){return e.indexOf(t,r)}function ed(e,t){return e.charCodeAt(t)|0}function bd(e,t,r){return e.slice(t,r)}function qs(e){return e.length}function upe(e){return e.length}function lm(e,t){return t.push(e),e}var Ey=1,xd=1,_6=0,ns=0,Vn=0,jd="";function CT(e,t,r,n,a,i,s,l){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:Ey,column:xd,length:s,return:"",siblings:l}}function dpe(){return Vn}function hpe(){return Vn=ns>0?ed(jd,--ns):0,xd--,Vn===10&&(xd=1,Ey--),Vn}function Ts(){return Vn=ns<_6?ed(jd,ns++):0,xd++,Vn===10&&(xd=1,Ey++),Vn}function kl(){return ed(jd,ns)}function Im(){return ns}function Cy(e,t){return bd(jd,e,t)}function Jp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ppe(e){return Ey=xd=1,_6=qs(jd=e),ns=0,[]}function gpe(e){return jd="",e}function Gv(e){return C6(Cy(ns-1,D1(e===91?e+2:e===40?e+1:e)))}function fpe(e){for(;(Vn=kl())&&Vn<33;)Ts();return Jp(e)>2||Jp(Vn)>3?"":" "}function mpe(e,t){for(;--t&&Ts()&&!(Vn<48||Vn>102||Vn>57&&Vn<65||Vn>70&&Vn<97););return Cy(e,Im()+(t<6&&kl()==32&&Ts()==32))}function D1(e){for(;Ts();)switch(Vn){case e:return ns;case 34:case 39:e!==34&&e!==39&&D1(Vn);break;case 40:e===41&&D1(e);break;case 92:Ts();break}return ns}function ype(e,t){for(;Ts()&&e+Vn!==57;)if(e+Vn===84&&kl()===47)break;return"/*"+Cy(t,ns-1)+"*"+ET(e===47?e:Ts())}function bpe(e){for(;!Jp(kl());)Ts();return Cy(e,ns)}function xpe(e){return gpe(Dm("",null,null,null,[""],e=ppe(e),0,[0],e))}function Dm(e,t,r,n,a,i,s,l,u){for(var h=0,p=0,f=s,y=0,b=0,x=0,v=1,T=1,k=1,C=0,A="",P=a,M=i,L=n,D=A;T;)switch(x=C,C=Ts()){case 40:if(x!=108&&ed(D,f-1)==58){cpe(D+=Rm(Gv(C),"&","&\f"),"&\f",E6(h?l[h-1]:0))!=-1&&(k=-1);break}case 34:case 39:case 91:D+=Gv(C);break;case 9:case 10:case 13:case 32:D+=fpe(x);break;case 92:D+=mpe(Im()-1,7);continue;case 47:switch(kl()){case 42:case 47:lm(vpe(ype(Ts(),Im()),t,r,u),u),(Jp(x||1)==5||Jp(kl()||1)==5)&&qs(D)&&bd(D,-1,void 0)!==" "&&(D+=" ");break;default:D+="/"}break;case 123*v:l[h++]=qs(D)*k;case 125*v:case 59:case 0:switch(C){case 0:case 125:T=0;case 59+p:k==-1&&(D=Rm(D,/\f/g,"")),b>0&&(qs(D)-f||v===0&&x===47)&&lm(b>32?zN(D+";",n,r,f-1,u):zN(Rm(D," ","")+";",n,r,f-2,u),u);break;case 59:D+=";";default:if(lm(L=FN(D,t,r,h,p,a,l,A,P=[],M=[],f,i),i),C===123)if(p===0)Dm(D,t,L,L,P,i,f,l,M);else{switch(y){case 99:if(ed(D,3)===110)break;case 108:if(ed(D,2)===97)break;default:p=0;case 100:case 109:case 115:}p?Dm(e,L,L,n&&lm(FN(e,L,L,0,0,a,l,A,a,P=[],f,M),M),a,M,f,l,n?P:M):Dm(D,L,L,L,[""],M,0,l,M)}}h=p=b=0,v=k=1,A=D="",f=s;break;case 58:f=1+qs(D),b=x;default:if(v<1){if(C==123)--v;else if(C==125&&v++==0&&hpe()==125)continue}switch(D+=ET(C),C*v){case 38:k=p>0?1:(D+="\f",-1);break;case 44:l[h++]=(qs(D)-1)*k,k=1;break;case 64:kl()===45&&(D+=Gv(Ts())),y=kl(),p=f=qs(A=D+=bpe(Im())),C++;break;case 45:x===45&&qs(D)==2&&(v=0)}}return i}function FN(e,t,r,n,a,i,s,l,u,h,p,f){for(var y=a-1,b=a===0?i:[""],x=upe(b),v=0,T=0,k=0;v<n;++v)for(var C=0,A=bd(e,y+1,y=E6(T=s[v])),P=e;C<x;++C)(P=C6(T>0?b[C]+" "+A:Rm(A,/&\f/g,b[C])))&&(u[k++]=P);return CT(e,t,r,a===0?T6:l,u,h,p,f)}function vpe(e,t,r,n){return CT(e,t,r,S6,ET(dpe()),bd(e,2,-2),0,n)}function zN(e,t,r,n,a){return CT(e,t,r,k6,bd(e,0,n),bd(e,n+1,-1),n,a)}function M1(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function wpe(e,t,r,n){switch(e.type){case lpe:if(e.children.length)break;case ipe:case spe:case k6:return e.return=e.return||e.value;case S6:return"";case ope:return e.return=e.value+"{"+M1(e.children,n)+"}";case T6:if(!qs(e.value=e.props.join(",")))return""}return qs(r=M1(e.children,n))?e.return=e.value+"{"+r+"}":""}var Spe=ZM(Object.keys,Object),Tpe=Object.prototype,kpe=Tpe.hasOwnProperty;function Epe(e){if(!fy(e))return Spe(e);var t=[];for(var r in Object(e))kpe.call(e,r)&&r!="constructor"&&t.push(r);return t}var O1=Uc(to,"DataView"),j1=Uc(to,"Promise"),B1=Uc(to,"Set"),F1=Uc(to,"WeakMap"),UN="[object Map]",Cpe="[object Object]",$N="[object Promise]",qN="[object Set]",HN="[object WeakMap]",GN="[object DataView]",_pe=zc(O1),Ape=zc(Qp),Npe=zc(j1),Lpe=zc(B1),Ppe=zc(F1),lc=Dd;(O1&&lc(new O1(new ArrayBuffer(1)))!=GN||Qp&&lc(new Qp)!=UN||j1&&lc(j1.resolve())!=$N||B1&&lc(new B1)!=qN||F1&&lc(new F1)!=HN)&&(lc=function(e){var t=Dd(e),r=t==Cpe?e.constructor:void 0,n=r?zc(r):"";if(n)switch(n){case _pe:return GN;case Ape:return UN;case Npe:return $N;case Lpe:return qN;case Ppe:return HN}return t});var Rpe="[object Map]",Ipe="[object Set]",Dpe=Object.prototype,Mpe=Dpe.hasOwnProperty;function WN(e){if(e==null)return!0;if(my(e)&&(k0(e)||typeof e=="string"||typeof e.splice=="function"||nT(e)||aT(e)||T0(e)))return!e.length;var t=lc(e);if(t==Rpe||t==Ipe)return!e.size;if(fy(e))return!Epe(e).length;for(var r in e)if(Mpe.call(e,r))return!1;return!0}var A6="c4",Ope=N(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),jpe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-DT9zgXG3.js");return{diagram:t}},__vite__mapDeps([13,14]));return{id:A6,diagram:e}},"loader"),Bpe={id:A6,detector:Ope,loader:jpe},Fpe=Bpe,N6="flowchart",zpe=N((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),Upe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BCF2M5s_.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:N6,diagram:e}},"loader"),$pe={id:N6,detector:zpe,loader:Upe},qpe=$pe,L6="flowchart-v2",Hpe=N((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),Gpe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BCF2M5s_.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:L6,diagram:e}},"loader"),Wpe={id:L6,detector:Hpe,loader:Gpe},Vpe=Wpe,P6="er",Ype=N(e=>/^\s*erDiagram/.test(e),"detector"),Qpe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-CwC9LHzc.js");return{diagram:t}},__vite__mapDeps([20,17,18,19]));return{id:P6,diagram:e}},"loader"),Kpe={id:P6,detector:Ype,loader:Qpe},Xpe=Kpe,R6="gitGraph",Jpe=N(e=>/^\s*gitGraph/.test(e),"detector"),Zpe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-C9GIJHmL.js");return{diagram:t}},__vite__mapDeps([21,22,23,24,7,9,10]));return{id:R6,diagram:e}},"loader"),ege={id:R6,detector:Jpe,loader:Zpe},tge=ege,I6="gantt",rge=N(e=>/^\s*gantt/.test(e),"detector"),nge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./ganttDiagram-LVOFAZNH-DeZFF1nQ.js");return{diagram:t}},__vite__mapDeps([25,26,27,28]));return{id:I6,diagram:e}},"loader"),age={id:I6,detector:rge,loader:nge},ige=age,D6="info",sge=N(e=>/^\s*info/.test(e),"detector"),oge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./infoDiagram-F6ZHWCRC-C9vZWa8k.js");return{diagram:t}},__vite__mapDeps([29,24,7,9,10]));return{id:D6,diagram:e}},"loader"),lge={id:D6,detector:sge,loader:oge},M6="pie",cge=N(e=>/^\s*pie/.test(e),"detector"),uge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-D59_jzGD.js");return{diagram:t}},__vite__mapDeps([30,22,24,7,9,10,31,32,27]));return{id:M6,diagram:e}},"loader"),dge={id:M6,detector:cge,loader:uge},O6="quadrantChart",hge=N(e=>/^\s*quadrantChart/.test(e),"detector"),pge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-fpWcGZPB.js");return{diagram:t}},__vite__mapDeps([33,26,27,28]));return{id:O6,diagram:e}},"loader"),gge={id:O6,detector:hge,loader:pge},fge=gge,j6="xychart",mge=N(e=>/^\s*xychart(-beta)?/.test(e),"detector"),yge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-DEZNjGCK.js");return{diagram:t}},__vite__mapDeps([34,27,32,26,28]));return{id:j6,diagram:e}},"loader"),bge={id:j6,detector:mge,loader:yge},xge=bge,B6="requirement",vge=N(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),wge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-C6ZdtVpQ.js");return{diagram:t}},__vite__mapDeps([35,17,18]));return{id:B6,diagram:e}},"loader"),Sge={id:B6,detector:vge,loader:wge},Tge=Sge,F6="sequence",kge=N(e=>/^\s*sequenceDiagram/.test(e),"detector"),Ege=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-LYcbjfXE.js");return{diagram:t}},__vite__mapDeps([36,14,23]));return{id:F6,diagram:e}},"loader"),Cge={id:F6,detector:kge,loader:Ege},_ge=Cge,z6="class",Age=N((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),Nge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-Bsu3Fyb7.js");return{diagram:t}},__vite__mapDeps([37,38,16,17,18]));return{id:z6,diagram:e}},"loader"),Lge={id:z6,detector:Age,loader:Nge},Pge=Lge,U6="classDiagram",Rge=N((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),Ige=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-Bsu3Fyb7.js");return{diagram:t}},__vite__mapDeps([39,38,16,17,18]));return{id:U6,diagram:e}},"loader"),Dge={id:U6,detector:Rge,loader:Ige},Mge=Dge,$6="state",Oge=N((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),jge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-Fx9YKb2z.js");return{diagram:t}},__vite__mapDeps([40,41,17,18,6,7,8,9]));return{id:$6,diagram:e}},"loader"),Bge={id:$6,detector:Oge,loader:jge},Fge=Bge,q6="stateDiagram",zge=N((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),Uge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-CA1M7KjY.js");return{diagram:t}},__vite__mapDeps([42,41,17,18]));return{id:q6,diagram:e}},"loader"),$ge={id:q6,detector:zge,loader:Uge},qge=$ge,H6="journey",Hge=N(e=>/^\s*journey/.test(e),"detector"),Gge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-BTTYC-Yn.js");return{diagram:t}},__vite__mapDeps([43,14,16,31]));return{id:H6,diagram:e}},"loader"),Wge={id:H6,detector:Hge,loader:Gge},Vge=Wge,Yge=N((e,t,r)=>{qe.debug(`rendering svg for syntax error
`);const n=Ase(t),a=n.append("g");n.attr("viewBox","0 0 2412 512"),yI(n,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),G6={draw:Yge},Qge=G6,Kge={db:{},renderer:G6,parser:{parse:N(()=>{},"parse")}},Xge=Kge,W6="flowchart-elk",Jge=N((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),Zge=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BCF2M5s_.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:W6,diagram:e}},"loader"),efe={id:W6,detector:Jge,loader:Zge},tfe=efe,V6="timeline",rfe=N(e=>/^\s*timeline/.test(e),"detector"),nfe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-D61N9Av2.js");return{diagram:t}},__vite__mapDeps([44,31]));return{id:V6,diagram:e}},"loader"),afe={id:V6,detector:rfe,loader:nfe},ife=afe,Y6="mindmap",sfe=N(e=>/^\s*mindmap/.test(e),"detector"),ofe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-CMocUZOf.js");return{diagram:t}},__vite__mapDeps([45,17,18]));return{id:Y6,diagram:e}},"loader"),lfe={id:Y6,detector:sfe,loader:ofe},cfe=lfe,Q6="kanban",ufe=N(e=>/^\s*kanban/.test(e),"detector"),dfe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-C3AKCorf.js");return{diagram:t}},__vite__mapDeps([46,16]));return{id:Q6,diagram:e}},"loader"),hfe={id:Q6,detector:ufe,loader:dfe},pfe=hfe,K6="sankey",gfe=N(e=>/^\s*sankey(-beta)?/.test(e),"detector"),ffe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-CLJwtWMB.js");return{diagram:t}},__vite__mapDeps([47,32,27]));return{id:K6,diagram:e}},"loader"),mfe={id:K6,detector:gfe,loader:ffe},yfe=mfe,X6="packet",bfe=N(e=>/^\s*packet(-beta)?/.test(e),"detector"),xfe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-BBKFwDTj.js");return{diagram:t}},__vite__mapDeps([48,22,24,7,9,10]));return{id:X6,diagram:e}},"loader"),vfe={id:X6,detector:bfe,loader:xfe},J6="radar",wfe=N(e=>/^\s*radar-beta/.test(e),"detector"),Sfe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-Czl7vwEj.js");return{diagram:t}},__vite__mapDeps([49,22,24,7,9,10]));return{id:J6,diagram:e}},"loader"),Tfe={id:J6,detector:wfe,loader:Sfe},Z6="block",kfe=N(e=>/^\s*block(-beta)?/.test(e),"detector"),Efe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-sFyD7x7Q.js");return{diagram:t}},__vite__mapDeps([50,16,10,7,6,19]));return{id:Z6,diagram:e}},"loader"),Cfe={id:Z6,detector:kfe,loader:Efe},_fe=Cfe,e5="architecture",Afe=N(e=>/^\s*architecture/.test(e),"detector"),Nfe=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-B7CJoxEj.js");return{diagram:t}},__vite__mapDeps([51,22,24,7,9,10,12]));return{id:e5,diagram:e}},"loader"),Lfe={id:e5,detector:Afe,loader:Nfe},Pfe=Lfe,t5="treemap",Rfe=N(e=>/^\s*treemap/.test(e),"detector"),Ife=N(async()=>{const{diagram:e}=await Rt(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-C6K92s8v.js");return{diagram:t}},__vite__mapDeps([52,18,22,24,7,9,10,28,32,27]));return{id:t5,diagram:e}},"loader"),Dfe={id:t5,detector:Rfe,loader:Ife},VN=!1,_y=N(()=>{VN||(VN=!0,a0("error",Xge,e=>e.toLowerCase().trim()==="error"),a0("---",{db:{clear:N(()=>{},"clear")},styles:{},renderer:{draw:N(()=>{},"draw")},parser:{parse:N(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:N(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),Ww(tfe,cfe,Pfe),Ww(Fpe,pfe,Mge,Pge,Xpe,ige,lge,dge,Tge,_ge,Vpe,qpe,ife,tge,qge,Fge,Vge,fge,yfe,vfe,xge,_fe,Tfe,Dfe))},"addDiagrams"),Mfe=N(async()=>{qe.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Ec).map(async([r,{detector:n,loader:a}])=>{if(a)try{Kw(r)}catch{try{const{diagram:i,id:s}=await a();a0(s,i,n)}catch(i){throw qe.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete Ec[r],i}}}))).filter(r=>r.status==="rejected");if(t.length>0){qe.error(`Failed to load ${t.length} external diagrams`);for(const r of t)qe.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),Ofe="graphics-document document";function r5(e,t){e.attr("role",Ofe),t!==""&&e.attr("aria-roledescription",t)}N(r5,"setA11yDiagramInfo");function n5(e,t,r,n){if(e.insert!==void 0){if(r){const a=`chart-desc-${n}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${n}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}N(n5,"addSVGa11yTitleDescription");var vc,z1=(vc=class{constructor(t,r,n,a,i){this.type=t,this.text=r,this.db=n,this.parser=a,this.renderer=i}static async fromText(t,r={}){const n=Ia(),a=AS(t,n);t=Due(t)+`
`;try{Kw(a)}catch{const h=are(a);if(!h)throw new iI(`Diagram ${a} not found.`);const{id:p,diagram:f}=await h();a0(p,f)}const{db:i,parser:s,renderer:l,init:u}=Kw(a);return s.parser&&(s.parser.yy=i),i.clear?.(),u?.(n),r.title&&i.setDiagramTitle?.(r.title),await s.parse(t),new vc(a,t,i,s,l)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},N(vc,"Diagram"),vc),YN=[],jfe=N(()=>{YN.forEach(e=>{e()}),YN=[]},"attachFunctions"),Bfe=N(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function a5(e){const t=e.match(aI);if(!t)return{text:e,metadata:{}};let r=Moe(t[1],{schema:Doe})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}N(a5,"extractFrontMatter");var Ffe=N(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),zfe=N(e=>{const{text:t,metadata:r}=a5(e),{displayMode:n,title:a,config:i={}}=r;return n&&(i.gantt||(i.gantt={}),i.gantt.displayMode=n),{title:a,config:i,text:t}},"processFrontmatter"),Ufe=N(e=>{const t=vs.detectInit(e)??{},r=vs.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:wue(e),directive:t}},"processDirectives");function _T(e){const t=Ffe(e),r=zfe(t),n=Ufe(r.text),a=uT(r.config,n.directive);return e=Bfe(n.text),{code:e,title:r.title,config:a}}N(_T,"preprocessDiagram");function i5(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}N(i5,"toBase64");var $fe=5e4,qfe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Hfe="sandbox",Gfe="loose",Wfe="http://www.w3.org/2000/svg",Vfe="http://www.w3.org/1999/xlink",Yfe="http://www.w3.org/1999/xhtml",Qfe="100%",Kfe="100%",Xfe="border:0;margin:0;",Jfe="margin:0",Zfe="allow-top-navigation-by-user-activation allow-popups",eme='The "iframe" tag is not supported by your browser.',tme=["foreignobject"],rme=["dominant-baseline"];function AT(e){const t=_T(e);return r0(),vre(t.config??{}),t}N(AT,"processAndSetConfigs");async function s5(e,t){_y();try{const{code:r,config:n}=AT(e);return{diagramType:(await l5(r)).type,config:n}}catch(r){if(t?.suppressErrors)return!1;throw r}}N(s5,"parse");var QN=N((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),nme=N((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const s=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{WN(l.styles)||s.forEach(u=>{r+=QN(l.id,u,l.styles)}),WN(l.textStyles)||(r+=QN(l.id,"tspan",(l?.textStyles||[]).map(u=>u.replace("color","fill"))))})}return r},"createCssStyles"),ame=N((e,t,r,n)=>{const a=nme(e,r),i=zre(t,a,e.themeVariables);return M1(xpe(`${n}{${i}}`),wpe)},"createUserStyles"),ime=N((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=$c(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),sme=N((e="",t)=>{const r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":Kfe,n=i5(`<body style="${Jfe}">${e}</body>`);return`<iframe style="width:${Qfe};height:${r};${Xfe}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${Zfe}">
  ${eme}
</iframe>`},"putIntoIFrame"),KN=N((e,t,r,n,a)=>{const i=e.append("div");i.attr("id",r),n&&i.attr("style",n);const s=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",Wfe);return a&&s.attr("xmlns:xlink",a),s.append("g"),e},"appendDivSvgG");function U1(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}N(U1,"sandboxedIframe");var ome=N((e,t,r,n)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),lme=N(async function(e,t,r){_y();const n=AT(t);t=n.code;const a=Ia();qe.debug(a),t.length>(a?.maxTextSize??$fe)&&(t=qfe);const i="#"+e,s="i"+e,l="#"+s,u="d"+e,h="#"+u,p=N(()=>{const j=Lr(y?l:h).node();j&&"remove"in j&&j.remove()},"removeTempElements");let f=Lr("body");const y=a.securityLevel===Hfe,b=a.securityLevel===Gfe,x=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),y){const W=U1(Lr(r),s);f=Lr(W.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Lr(r);KN(f,e,u,`font-family: ${x}`,Vfe)}else{if(ome(document,e,u,s),y){const W=U1(Lr("body"),s);f=Lr(W.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Lr("body");KN(f,e,u)}let v,T;try{v=await z1.fromText(t,{title:n.title})}catch(W){if(a.suppressErrorRendering)throw p(),W;v=await z1.fromText("error"),T=W}const k=f.select(h).node(),C=v.type,A=k.firstChild,P=A.firstChild,M=v.renderer.getClasses?.(t,v),L=ame(a,C,M,i),D=document.createElement("style");D.innerHTML=L,A.insertBefore(D,P);try{await v.renderer.draw(t,e,mA.version,v)}catch(W){throw a.suppressErrorRendering?p():Qge.draw(t,e,mA.version),W}const q=f.select(`${h} svg`),Q=v.db.getAccTitle?.(),F=v.db.getAccDescription?.();c5(C,q,Q,F),f.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Yfe);let K=f.select(h).node().innerHTML;if(qe.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),K=ime(K,y,ia(a.arrowMarkerAbsolute)),y){const W=f.select(h+" svg").node();K=sme(K,W)}else b||(K=dd.sanitize(K,{ADD_TAGS:tme,ADD_ATTR:rme,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(jfe(),T)throw T;return p(),{diagramType:C,svg:K,bindFunctions:v.db.bindFunctions}},"render");function o5(e={}){const t=ra({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),bre(t),t?.theme&&t.theme in Ro?t.themeVariables=Ro[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Ro.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?yre(t):uI();_S(r.logLevel),_y()}N(o5,"initialize");var l5=N((e,t={})=>{const{code:r}=_T(e);return z1.fromText(r,t)},"getDiagramFromText");function c5(e,t,r,n){r5(t,e),n5(t,r,n,t.attr("id"))}N(c5,"addA11yInfo");var Pc=Object.freeze({render:lme,parse:s5,getDiagramFromText:l5,initialize:o5,getConfig:Ia,setConfig:dI,getSiteConfig:uI,updateSiteConfig:xre,reset:N(()=>{r0()},"reset"),globalReset:N(()=>{r0(hd)},"globalReset"),defaultConfig:hd});_S(Ia().logLevel);r0(Ia());var cme=N((e,t,r)=>{qe.warn(e),cT(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),u5=N(async function(e={querySelector:".mermaid"}){try{await ume(e)}catch(t){if(cT(t)&&qe.error(t.str),jo.parseError&&jo.parseError(t),!e.suppressErrors)throw qe.error("Use the suppressErrors option to suppress these errors"),t}},"run"),ume=N(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=Pc.getConfig();qe.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");qe.debug(`Found ${a.length} diagrams`),n?.startOnLoad!==void 0&&(qe.debug("Start On Load: "+n?.startOnLoad),Pc.updateSiteConfig({startOnLoad:n?.startOnLoad}));const i=new vs.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let s;const l=[];for(const u of Array.from(a)){if(qe.info("Rendering diagram: "+u.id),u.getAttribute("data-processed"))continue;u.setAttribute("data-processed","true");const h=`mermaid-${i.next()}`;s=u.innerHTML,s=PO(vs.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const p=vs.detectInit(s);p&&qe.debug("Detected early reinit: ",p);try{const{svg:f,bindFunctions:y}=await g5(h,s,u);u.innerHTML=f,e&&await e(h),y&&y(u)}catch(f){cme(f,l,jo.parseError)}}if(l.length>0)throw l[0]},"runThrowsErrors"),d5=N(function(e){Pc.initialize(e)},"initialize"),dme=N(async function(e,t,r){qe.warn("mermaid.init is deprecated. Please use run instead."),e&&d5(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await u5(n)},"init"),hme=N(async(e,{lazyLoad:t=!0}={})=>{_y(),Ww(...e),t===!1&&await Mfe()},"registerExternalDiagrams"),h5=N(function(){if(jo.startOnLoad){const{startOnLoad:e}=Pc.getConfig();e&&jo.run().catch(t=>qe.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",h5,!1);var pme=N(function(e){jo.parseError=e},"setParseErrorHandler"),M0=[],Wv=!1,p5=N(async()=>{if(!Wv){for(Wv=!0;M0.length>0;){const e=M0.shift();if(e)try{await e()}catch(t){qe.error("Error executing queue",t)}}Wv=!1}},"executeQueue"),gme=N(async(e,t)=>new Promise((r,n)=>{const a=N(()=>new Promise((i,s)=>{Pc.parse(e,t).then(l=>{i(l),r(l)},l=>{qe.error("Error parsing",l),jo.parseError?.(l),s(l),n(l)})}),"performCall");M0.push(a),p5().catch(n)}),"parse"),g5=N((e,t,r)=>new Promise((n,a)=>{const i=N(()=>new Promise((s,l)=>{Pc.render(e,t,r).then(u=>{s(u),n(u)},u=>{qe.error("Error parsing",u),jo.parseError?.(u),l(u),a(u)})}),"performCall");M0.push(i),p5().catch(a)}),"render"),fme=N(()=>Object.keys(Ec).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),jo={startOnLoad:!0,mermaidAPI:Pc,parse:gme,render:g5,init:dme,run:u5,registerExternalDiagrams:hme,registerLayoutLoaders:w6,initialize:d5,parseError:void 0,contentLoaded:h5,setParseErrorHandler:pme,detectType:AS,registerIconPacks:Bde,getRegisteredDiagramsMetadata:fme},XN=jo;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const vd=({data:e,name:t,level:r=0,defaultExpanded:n=!0})=>{const[a,i]=_.useState(n),s=r*16;if(e==null)return d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsx("span",{className:"text-gray-500 dark:text-gray-500 italic",children:"null"})]});const l=typeof e;if(l==="string"||l==="number"||l==="boolean")return d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsx("span",{className:l==="string"?"text-green-600 dark:text-green-400":l==="number"?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:l==="string"?`"${e}"`:String(e)})]});if(Array.isArray(e))return e.length===0?d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"[]"})]}):d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[d.jsxs("button",{onClick:()=>i(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"▼":"▶"}),t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["[",e.length," ",e.length===1?"item":"items","]"]})]}),a&&d.jsx("div",{className:"ml-2",children:e.map((u,h)=>d.jsx(vd,{data:u,name:String(h),level:r+1,defaultExpanded:r<1},h))})]});if(l==="object"){const u=Object.keys(e);return u.length===0?d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"{}"})]}):d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[d.jsxs("button",{onClick:()=>i(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"▼":"▶"}),t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["{",u.length," ",u.length===1?"key":"keys","}"]})]}),a&&d.jsx("div",{className:"ml-2",children:u.map(h=>d.jsx(vd,{data:e[h],name:h,level:r+1,defaultExpanded:r<1},h))})]})}return d.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),d.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:String(e)})]})},Vv=({content:e})=>{try{const t=JSON.parse(e);return d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:d.jsx(vd,{data:t,defaultExpanded:!0})})}catch{return d.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto text-sm",children:e})}},cm=({data:e,title:t})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(!1),s=p=>{if(typeof p=="string")try{const f=JSON.parse(p);return s(f)}catch{return p}else{if(Array.isArray(p))return p.map(f=>s(f));if(p!==null&&typeof p=="object"){const f={};for(const y in p)f[y]=s(p[y]);return f}}return p},l=s(e),u=()=>{navigator.clipboard.writeText(JSON.stringify(l,null,2)),n(!0),setTimeout(()=>n(!1),2e3)},h=()=>{i(!0)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mt-3",children:d.jsxs("button",{onClick:h,className:"flex items-center justify-between w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t}),d.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium",children:"🔍 Click to View"})]})}),a&&d.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>i(!1),children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl w-full h-full max-w-7xl max-h-[90vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:r?"✓ Copied!":"📋 Copy All"}),d.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"✕ Close"})]})]}),d.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-50 dark:bg-gray-950",children:d.jsx(vd,{data:l,defaultExpanded:!0})})]})})]})};function mme(e){switch(e.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:"🛡️"};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:"🛡️"};case"image_generation":return{label:"Image Generation",color:"bg-pink-50 dark:bg-pink-900/20",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",icon:"🖼️"};case"transcription":return{label:"Whisper Transcription",color:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",icon:"🎤"};case"embedding":return{label:"Embedding",color:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-300 dark:border-indigo-700",text:"text-indigo-700 dark:text-indigo-300",icon:"🧩"};case"planning":return{label:"Planning",color:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",icon:"📝"};case"assessment":return{label:"Self-Assessment",color:"bg-teal-50 dark:bg-teal-900/20",border:"border-teal-300 dark:border-teal-700",text:"text-teal-700 dark:text-teal-300",icon:"🔍"};default:return{label:"Chat",color:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-700 dark:text-gray-300",icon:"💬"}}}const yme=({call:e,index:t})=>{const r=mme(e),n=e.response?.usage?.prompt_tokens||0,a=e.response?.usage?.completion_tokens||0,i=e.response?.usage?.total_tokens||n+a,s=e.cost??0;return d.jsxs("div",{className:`border-2 ${r.border} ${r.color} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-2xl",children:r.icon}),d.jsxs("div",{children:[d.jsx("h3",{className:`font-bold text-lg ${r.text}`,children:r.label}),d.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.provider," • ",e.model]})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`text-2xl font-bold ${s>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:tS(s)}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",t+1]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prompt Tokens"}),d.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completion Tokens"}),d.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Tokens"}),d.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"}),d.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.durationMs?`${(e.durationMs/1e3).toFixed(2)}s`:"N/A"})]})]}),d.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[e.success!==void 0&&d.jsx("span",{className:`px-2 py-1 rounded-full ${e.success?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:e.success?"✅ Success":"❌ Failed"}),e.httpStatus&&d.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:["HTTP ",e.httpStatus]})]}),d.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),d.jsxs("div",{className:"space-y-2",children:[e.request&&d.jsx(cm,{data:e.request,title:"📤 Request Body"}),e.response&&d.jsx(cm,{data:e.response,title:"📥 Response Body"}),e.httpHeaders&&d.jsx(cm,{data:e.httpHeaders,title:"🔖 HTTP Headers"}),e.metadata&&d.jsx(cm,{data:e.metadata,title:"ℹ️ Metadata"})]})]})};function f5({apiCalls:e,onClose:t}){const r=ag(!0,t),[n,a]=_.useState(!1),{showSuccess:i}=Ks(),s=e.reduce((y,b)=>y+(b.response?.usage?.prompt_tokens||0),0),l=e.reduce((y,b)=>y+(b.response?.usage?.completion_tokens||0),0),u=s+l,h=e.reduce((y,b)=>y+(b.cost||0),0),p=e.reduce((y,b)=>y+(b.durationMs||0),0),f=()=>{const y=e.map((b,x)=>({callNumber:x+1,type:b.type||"chat",provider:b.provider,model:b.model,timestamp:b.timestamp,request:b.request,response:b.response,httpHeaders:b.httpHeaders,httpStatus:b.httpStatus,cost:b.cost,durationMs:b.durationMs,metadata:b.metadata}));navigator.clipboard.writeText(JSON.stringify(y,null,2)),a(!0),setTimeout(()=>a(!1),2e3),i(`📋 Copied ${e.length} LLM API call${e.length!==1?"s":""} to clipboard`)};return d.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"🔍 LLM API Transparency"}),d.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," API call",e.length!==1?"s":""]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:n?d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"✓"}),d.jsx("span",{children:"Copied All!"})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"📋"}),d.jsx("span",{children:"Copy All JSON"})]})}),d.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Close",children:d.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:e.length===0?d.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((y,b)=>d.jsx(yme,{call:y,index:b},b))}),d.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"📊 Grand Totals"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Prompt Tokens"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Completion Tokens"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Tokens"}),d.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u.toLocaleString()})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Duration"}),d.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(p/1e3).toFixed(2),"s"]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-green-200 dark:border-green-700 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-gray-800",children:[d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Cost"}),d.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:tS(h)})]})]})]})]})})}const bme=({chart:e,description:t,onLlmApiCall:r})=>{const n=_.useRef(null),[a,i]=_.useState(null),[s,l]=_.useState(!1),[u,h]=_.useState([]),[p,f]=_.useState(e),[y,b]=_.useState(!1),[x,v]=_.useState(!1),[T,k]=_.useState(!1),{accessToken:C}=Di(),{settings:A}=Xs(),{addCost:P}=q0(),{addSnippet:M}=$0(),{showSuccess:L,showError:D}=Ks(),q=async()=>{if(n.current)try{const W=n.current.querySelector("svg");if(!W){D("Chart not found");return}const j=document.createElement("canvas"),O=new XMLSerializer().serializeToString(W),$=new Image,I=new Blob([O],{type:"image/svg+xml;charset=utf-8"}),G=URL.createObjectURL(I);$.onload=async()=>{j.width=W.clientWidth||800,j.height=W.clientHeight||600;const V=j.getContext("2d");V&&(V.fillStyle="white",V.fillRect(0,0,j.width,j.height),V.drawImage($,0,0),j.toBlob(async oe=>{if(oe)try{await navigator.clipboard.write([new ClipboardItem({"image/png":oe})]),k(!0),setTimeout(()=>k(!1),2e3),L("Chart image copied to clipboard!")}catch(U){console.error("Failed to copy to clipboard:",U),D("Failed to copy image to clipboard")}})),URL.revokeObjectURL(G)},$.onerror=()=>{D("Failed to process chart image"),URL.revokeObjectURL(G)},$.src=G}catch(W){console.error("Failed to copy image:",W),D("Failed to copy chart image")}},Q=async()=>{if(n.current)try{const W=n.current.querySelector("svg");if(!W){D("Chart not found");return}const j=t||"Chart diagram",O=document.createElement("canvas"),$=new XMLSerializer().serializeToString(W),I=new Image,G=new Blob([$],{type:"image/svg+xml;charset=utf-8"}),V=URL.createObjectURL(G);I.onload=async()=>{try{O.width=W.clientWidth||800,O.height=W.clientHeight||600;const oe=O.getContext("2d");if(oe){oe.fillStyle="white",oe.fillRect(0,0,O.width,O.height),oe.drawImage(I,0,0);const z=`<img src="${O.toDataURL("image/png")}" alt="${j}" class="max-w-full h-auto rounded-lg" />`;await M(z,"tool",`Chart: ${j}`),L("Chart saved to Swag!")}URL.revokeObjectURL(V)}catch(oe){console.error("Failed to convert to PNG:",oe),D("Failed to save chart to Swag"),URL.revokeObjectURL(V)}},I.onerror=()=>{D("Failed to process chart image"),URL.revokeObjectURL(V)},I.src=V}catch(W){console.error("Failed to grab image:",W),D("Failed to save chart to Swag")}};_.useEffect(()=>{XN.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit",logLevel:"error"})},[]),_.useEffect(()=>{(async()=>{if(n.current)try{i(null),n.current.innerHTML="";const j=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:O}=await XN.render(j,p);if(!n.current){console.warn("⚠️ MermaidChart container ref is null - component may have unmounted");return}n.current.innerHTML=O,document.querySelectorAll('div[id^="d"]').forEach(I=>{const G=I.textContent||"";(G.includes("Syntax error in text")||G.includes("mermaid version"))&&I.remove()}),console.log("✅ Mermaid chart rendered successfully")}catch(j){console.error("❌ Mermaid rendering error:",j);const O=j.message||String(j);i(O),document.querySelectorAll('div[id^="d"]').forEach(I=>{const G=I.textContent||"";(G.includes("Syntax error in text")||G.includes("mermaid version"))&&I.remove()}),u.length<3&&await F(O)}})()},[p]);const F=async W=>{if(!C){console.warn("No access token available for chart fix");return}if(u.length>=3){console.log("Max fix attempts (3) reached");return}l(!0);const j=u.length+1;console.log(`🔧 Attempting to fix chart (attempt ${j}/3)`);try{const{getCachedApiBase:O,resetApiBase:$}=await Rt(async()=>{const{getCachedApiBase:U,resetApiBase:z}=await Promise.resolve().then(()=>lU);return{getCachedApiBase:U,resetApiBase:z}},void 0);$();const I=await O(),G=await fetch(`${I}/fix-mermaid-chart`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({chart:p,error:W,providers:A.providers})});if(!G.ok)throw new Error(`Fix request failed: ${G.statusText}`);const V=await G.json();if(V.error)throw new Error(V.error);const oe={attemptNumber:j,error:W,fixedChart:V.fixedChart,usage:V.usage,llmApiCall:V.llmApiCall};h(U=>[...U,oe]),V.usage&&P&&P(V.usage.cost||0),r&&V.usage&&r({model:V.usage.model,provider:V.usage.provider,prompt_tokens:V.usage.prompt_tokens,completion_tokens:V.usage.completion_tokens,total_tokens:V.usage.total_tokens,cost:V.usage.cost,duration_ms:V.usage.duration_ms,purpose:`chart-fix-attempt-${j}`}),console.log(`✅ Chart fix attempt ${j} successful`),console.log(`💰 Cost: $${V.usage?.cost?.toFixed(6)||"0.000000"}`),console.log(`📊 Tokens: ${V.usage?.total_tokens||0}`),f(V.fixedChart),i(null)}catch(O){console.error(`❌ Chart fix attempt ${j} failed:`,O);const $={attemptNumber:j,error:W};h(I=>[...I,$]),j>=3&&i(`Failed to fix chart after 3 attempts. Last error: ${W}`)}finally{l(!1)}},K=()=>{u.length<3&&a&&F(a)};return d.jsxs("div",{className:"my-4 border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden group",children:[d.jsxs("div",{className:"relative bg-white dark:bg-gray-900",children:[d.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[u.some(W=>W.llmApiCall)&&d.jsxs("button",{onClick:()=>v(!0),className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-blue-600 dark:text-blue-400 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"View LLM transparency info for chart fixes",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-[10px]",children:"LLM"})]}),d.jsx("button",{onClick:q,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Copy chart image to clipboard",children:T?d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsx("span",{className:"text-[10px]",children:"Copied!"})]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),d.jsx("span",{className:"text-[10px]",children:"Copy"})]})}),d.jsxs("button",{onClick:Q,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Grab chart as base64 markdown",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),d.jsx("span",{className:"text-[10px]",children:"Grab"})]})]}),d.jsx("div",{ref:n,className:"p-4 flex items-center justify-center min-h-[200px]",style:{fontSize:"14px",overflow:"auto"}})]}),a&&!s&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-t border-red-300 dark:border-red-700 p-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-1",children:"Chart Rendering Error"}),d.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-mono break-all",children:a}),u.length<3&&d.jsxs("button",{onClick:K,className:"mt-2 text-xs btn-secondary px-3 py-1",children:["🔧 Try to Fix (",u.length,"/3 attempts)"]}),u.length>=3&&d.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:"⚠️ Maximum fix attempts reached. The chart may have unsupported syntax."})]})]})}),s&&d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-t border-blue-300 dark:border-blue-700 p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("svg",{className:"w-5 h-5 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Attempting to fix chart (attempt ",u.length+1,"/3)..."]})]})}),u.length>0&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700",children:[d.jsxs("button",{onClick:()=>b(!y),className:"w-full px-4 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-750 flex items-center justify-between",children:[d.jsxs("span",{children:["🔧 Chart Auto-Fix Details (",u.length," attempt",u.length>1?"s":"",")"]}),d.jsx("svg",{className:`w-4 h-4 transition-transform ${y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&d.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[u.map(W=>d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded p-3 text-xs",children:[d.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Attempt ",W.attemptNumber]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Error:"}),d.jsx("div",{className:"text-red-600 dark:text-red-400 font-mono text-[10px] break-all mt-1",children:W.error})]}),W.usage&&d.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LLM Usage:"}),d.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Provider:"}),d.jsx("div",{className:"font-medium",children:W.usage.provider})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Model:"}),d.jsx("div",{className:"font-medium",children:W.usage.model})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Tokens:"}),d.jsx("div",{className:"font-medium",children:W.usage.total_tokens.toLocaleString()})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Cost:"}),d.jsxs("div",{className:"font-medium text-green-600 dark:text-green-400",children:["$",W.usage.cost.toFixed(6)]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Duration:"}),d.jsxs("div",{className:"font-medium",children:[W.usage.duration_ms,"ms"]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Result:"}),d.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:W.fixedChart?"✅ Fixed":"❌ Failed"})]})]})]})]})]},W.attemptNumber)),u.some(W=>W.usage)&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 text-xs",children:[d.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"📊 Total Cost"}),d.jsxs("div",{className:"text-blue-800 dark:text-blue-300",children:["$",u.reduce((W,j)=>W+(j.usage?.cost||0),0).toFixed(6)," ","(",u.reduce((W,j)=>W+(j.usage?.total_tokens||0),0).toLocaleString()," tokens)"]})]})]})]}),x&&d.jsx(f5,{apiCalls:u.filter(W=>W.llmApiCall).map(W=>W.llmApiCall),onClose:()=>v(!1)})]})},xme={...kp,attributes:{...kp.attributes,"*":["className","style","id"],a:["href","title","target","rel"],img:["src","alt","title","width","height"],table:["className"],td:["align","colspan","rowspan"],th:["align","colspan","rowspan"]},tagNames:[...kp.tagNames||[],"table","thead","tbody","tr","th","td","tfoot","div","span","br","hr"]};function vme(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/shorts\/([^&\n?#]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function wme({href:e,children:t}){const{addTracksToStart:r,playTrack:n}=Dc(),a=vme(e),i=s=>{if(s.preventDefault(),a){const l=typeof t=="string"?t:`YouTube Video ${a}`;r([{videoId:a,title:l,url:e}]),setTimeout(()=>{n(0)},0)}};return d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:t}),d.jsxs("button",{onClick:i,className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors",title:"Play now",children:[d.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 5v14l11-7z"})}),"Play"]})]})}function Sme({images:e}){const[t,r]=_.useState(null);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"image-gallery grid grid-cols-2 md:grid-cols-4 gap-4 my-6",children:e.map((n,a)=>d.jsxs("div",{className:"gallery-item cursor-pointer overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all hover:shadow-lg",onClick:()=>r(n.src),children:[d.jsx("img",{src:n.src,alt:n.alt,className:"w-full h-48 object-cover hover:scale-105 transition-transform",loading:"lazy"}),n.alt&&d.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 truncate",children:n.alt})]},a))}),t&&d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>r(null),children:[d.jsx("button",{className:"absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300",onClick:()=>r(null),"aria-label":"Close",children:"×"}),d.jsx("img",{src:t,alt:"Expanded view",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})]})}function um({content:e,className:t="",chartDescription:r,onLlmApiCall:n,snippetId:a,snippetTags:i=[],onImageEdit:s}){const l=_.useRef(0);if(/^<img\s+[^>]*src="data:image\/[^"]+"/i.test(e.trim()))return d.jsx("div",{className:`markdown-content ${t}`,dangerouslySetInnerHTML:{__html:e}});let h=e.replace(/```html\n([\s\S]*?)\n```/g,(x,v)=>v.includes("<table")?`

${v.replace(/<table/g,'<table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700 border border-gray-300 dark:border-gray-700 my-4"').replace(/<th/g,'<th class="px-4 py-2 bg-gray-100 dark:bg-gray-800 font-semibold text-left border border-gray-300 dark:border-gray-700"').replace(/<td/g,'<td class="px-4 py-2 border border-gray-300 dark:border-gray-700"')}

`:x);const p=/<!-- GALLERY_START -->([\s\S]*?)<!-- GALLERY_END -->/g,f=p.exec(h);let y=h,b=[];if(f){const x=f[1],v=/!\[(.*?)\]\((.*?)\)/g;let T;for(;(T=v.exec(x))!==null;)b.push({alt:T[1],src:T[2]});y=e.replace(p,"").trim()}return d.jsxs("div",{className:`markdown-content ${t}`,children:[d.jsx(Vm,{remarkPlugins:[rK],rehypePlugins:[kZ,[DZ,xme],Ste],components:{h1:({children:x})=>d.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-gray-900 dark:text-gray-100",children:x}),h2:({children:x})=>d.jsx("h2",{className:"text-xl font-bold mt-5 mb-3 text-gray-900 dark:text-gray-100",children:x}),h3:({children:x})=>d.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-100",children:x}),h4:({children:x})=>d.jsx("h4",{className:"text-base font-semibold mt-3 mb-2 text-gray-900 dark:text-gray-100",children:x}),p:({children:x})=>d.jsx("p",{className:"mb-4 leading-relaxed text-gray-800 dark:text-gray-200",children:x}),ul:({children:x})=>d.jsx("ul",{className:"list-disc list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:x}),ol:({children:x})=>d.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:x}),li:({children:x})=>d.jsx("li",{className:"ml-4",children:x}),code:({className:x,children:v,...T})=>{const k=!x,C=/language-(\w+)/.exec(x||"");if((C?C[1]:"")==="mermaid"&&!k){const P=String(v).replace(/\n$/,""),M=P.split(`
`)[0].trim(),L=r||`${M} diagram`;return d.jsx(bme,{chart:P,description:L,onLlmApiCall:n})}return k?d.jsx("code",{className:"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-pink-600 dark:text-pink-400 text-sm font-mono",...T,children:v}):d.jsx("code",{className:`${x} text-sm`,...T,children:v})},pre:({children:x})=>x?.props?.className?.includes("language-mermaid")?x:d.jsx("pre",{className:"mb-4 p-4 rounded-lg bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:x}),a:({href:x,children:v})=>x&&(x.includes("youtube.com/watch")||x.includes("youtu.be/")||x.includes("youtube.com/embed/")||x.includes("youtube.com/shorts/"))&&x?d.jsx(wme,{href:x,children:v}):d.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:v}),blockquote:({children:x})=>d.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4 text-gray-700 dark:text-gray-300",children:x}),table:({children:x})=>d.jsx("div",{className:"overflow-x-auto mb-4",children:d.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:x})}),thead:({children:x})=>d.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:x}),tbody:({children:x})=>d.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:x}),tr:({children:x})=>d.jsx("tr",{children:x}),th:({children:x})=>d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:x}),td:({children:x})=>d.jsx("td",{className:"px-4 py-2 text-sm text-gray-800 dark:text-gray-200",children:x}),hr:()=>d.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-700"}),strong:({children:x})=>d.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",children:x}),em:({children:x})=>d.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",children:x}),img:({src:x,alt:v})=>{const T=typeof x=="string"&&x.trim()!==""?x:null;if(!T)return null;const k=l.current++,C=a?`${a}-img-${k}`:`img-${k}`,A=M=>{if(M.startsWith("data:image/")){const D=M.match(/^data:image\/([^;,]+)/);return D?D[1].toUpperCase():"Unknown"}const L=M.split(".").pop()?.toLowerCase();return L==="jpg"||L==="jpeg"?"JPG":L==="png"?"PNG":L==="gif"?"GIF":L==="webp"?"WebP":L==="svg"?"SVG":"Unknown"},P=M=>{M.preventDefault(),M.stopPropagation(),s&&s({id:C,url:T,name:v||`Image ${k+1}`,tags:i,snippetId:a,format:A(T)})};return s?d.jsxs("span",{className:"relative inline-block group my-4",children:[d.jsx("img",{src:T,alt:v||"",className:"max-w-full h-auto rounded-lg border border-gray-200 dark:border-gray-700",loading:"lazy",onError:M=>{console.error("Image failed to load:",{src:T,alt:v}),M.target.style.display="none"}}),d.jsx("button",{onClick:P,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-orange-600 hover:bg-orange-700 text-white rounded-full p-2 shadow-lg",title:"Edit image","aria-label":"Edit image",children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}):d.jsx("img",{src:T,alt:v||"",className:"max-w-full h-auto rounded-lg my-4 border border-gray-200 dark:border-gray-700",loading:"lazy",onError:M=>{console.error("Image failed to load:",{src:T,alt:v}),M.target.style.display="none"}})}},children:y}),b.length>0&&d.jsx(Sme,{images:b})]})}const ci={YOUTUBE_DOWNLOAD_START:"youtube_download_start",YOUTUBE_DOWNLOAD_PROGRESS:"youtube_download_progress",YOUTUBE_DOWNLOAD_COMPLETE:"youtube_download_complete",DOWNLOAD_START:"download_start",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_COMPLETE:"download_complete",METADATA:"metadata",CHUNKING_START:"chunking_start",CHUNK_READY:"chunk_ready",TRANSCRIBE_START:"transcribe_start",TRANSCRIBE_CHUNK_COMPLETE:"transcribe_chunk_complete",TRANSCRIBE_COMPLETE:"transcribe_complete",TRANSCRIPTION_STOPPED:"transcription_stopped",ERROR:"error"},Jr={DOWNLOADING:"Downloading",CHUNKING:"Chunking",TRANSCRIBING:"Transcribing",COMPLETE:"Complete",STOPPED:"Stopped",ERROR:"Error"},Tme=({toolCallId:e,url:t,events:r,onStop:n})=>{const[a,i]=_.useState(!1),[s,l]=_.useState(!1),u=_.useMemo(()=>{let x=Jr.DOWNLOADING,v=0,T=null,k="",C=0,A=1,P=null;r.length>0&&console.log(`[TranscriptionProgress] Processing ${r.length} events for ${e}:`,r.map(M=>({type:M.progress_type||M.data?.type,data:M.data})));for(const M of r)switch(M.progress_type||M.data?.type||""){case ci.YOUTUBE_DOWNLOAD_START:case ci.DOWNLOAD_START:x=Jr.DOWNLOADING,v=0;break;case ci.YOUTUBE_DOWNLOAD_PROGRESS:case ci.DOWNLOAD_PROGRESS:x=Jr.DOWNLOADING,v=M.data?.percent||0;break;case ci.YOUTUBE_DOWNLOAD_COMPLETE:case ci.DOWNLOAD_COMPLETE:x=Jr.DOWNLOADING,v=100;break;case ci.METADATA:T=M.data||null;break;case ci.CHUNKING_START:x=Jr.CHUNKING,A=M.data?.chunks||1,v=0;break;case ci.CHUNK_READY:x=Jr.CHUNKING,C=M.data?.chunkIndex||0,A=M.data?.totalChunks||1,v=C/A*100;break;case ci.TRANSCRIBE_START:x=Jr.TRANSCRIBING,C=M.data?.chunkIndex||0;break;case ci.TRANSCRIBE_CHUNK_COMPLETE:x=Jr.TRANSCRIBING,M.data?.text&&(k+=(k?`

`:"")+M.data.text),C=M.data?.chunkIndex||0,A=M.data?.totalChunks||1,v=C/A*100;break;case ci.TRANSCRIBE_COMPLETE:x=Jr.COMPLETE,v=100;break;case ci.TRANSCRIPTION_STOPPED:x=Jr.STOPPED,C=M.data?.completedChunks||0,A=M.data?.totalChunks||1,v=A>0?C/A*100:0;break;case ci.ERROR:x=Jr.ERROR,P=M.data?.error||"Unknown error";break}return{stage:x,progress:Math.min(100,Math.max(0,v)),metadata:T,partialText:k,currentChunk:C,totalChunks:A,error:P}},[r]),h=async()=>{l(!0);try{await n(e)}catch(x){console.error("Failed to stop transcription:",x)}finally{setTimeout(()=>l(!1),5e3)}},p=x=>{const v=Math.floor(x/3600),T=Math.floor(x%3600/60),k=x%60;return v>0?`${v}:${T.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`:`${T}:${k.toString().padStart(2,"0")}`},f=x=>{switch(x){case Jr.DOWNLOADING:return"text-blue-600 dark:text-blue-400";case Jr.CHUNKING:return"text-purple-600 dark:text-purple-400";case Jr.TRANSCRIBING:return"text-green-600 dark:text-green-400";case Jr.COMPLETE:return"text-green-700 dark:text-green-300";case Jr.STOPPED:return"text-yellow-600 dark:text-yellow-400";case Jr.ERROR:return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},y=x=>{switch(x){case Jr.DOWNLOADING:return"bg-blue-500";case Jr.CHUNKING:return"bg-purple-500";case Jr.TRANSCRIBING:return"bg-green-500";case Jr.COMPLETE:return"bg-green-600";case Jr.STOPPED:return"bg-yellow-500";case Jr.ERROR:return"bg-red-500";default:return"bg-gray-500"}},b=u.stage===Jr.DOWNLOADING||u.stage===Jr.CHUNKING||u.stage===Jr.TRANSCRIBING;return d.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 mb-4 bg-white dark:bg-gray-800",children:[d.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[u.metadata?.thumbnail&&d.jsx("img",{src:u.metadata.thumbnail,alt:"Video thumbnail",className:"w-24 h-16 object-cover rounded flex-shrink-0"}),d.jsx("div",{className:"flex-1 min-w-0",children:u.metadata?.title?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:u.metadata.title}),u.metadata.author&&d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:u.metadata.author}),u.metadata.duration&&d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Duration: ",p(u.metadata.duration)]})]}):d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t})}),b&&!s&&d.jsx("button",{onClick:h,className:"px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors flex-shrink-0",title:"Stop transcription",children:"Stop"}),s&&d.jsx("div",{className:"px-3 py-1 text-sm bg-gray-400 text-white rounded flex-shrink-0",children:"Stopping..."})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("span",{className:`text-sm font-medium ${f(u.stage)}`,children:u.stage}),u.totalChunks>1&&b&&d.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(Chunk ",u.currentChunk," of ",u.totalChunks,")"]}),b&&d.jsx("div",{className:"ml-auto",children:d.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full"})})]}),d.jsx("div",{className:"relative w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3",children:d.jsx("div",{className:`absolute left-0 top-0 h-full ${y(u.stage)} transition-all duration-300 ease-out`,style:{width:`${u.progress}%`}})}),d.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:[u.progress.toFixed(0),"% complete"]}),u.error&&d.jsxs("div",{className:"mb-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-700 dark:text-red-300",children:["Error: ",u.error]}),u.partialText&&d.jsxs("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:[d.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors mb-2",children:[d.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),d.jsxs("span",{children:[a?"Hide":"Show"," Partial Transcript",u.totalChunks>1&&` (${u.currentChunk} of ${u.totalChunks} chunks)`]})]}),a&&d.jsx("div",{className:"max-h-60 overflow-y-auto bg-gray-50 dark:bg-gray-900 rounded p-3 text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:u.partialText})]}),u.stage===Jr.COMPLETE&&d.jsxs("div",{className:"mt-3 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Transcription complete!"]}),u.stage===Jr.STOPPED&&d.jsxs("div",{className:"mt-3 text-sm text-yellow-600 dark:text-yellow-400 flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Transcription stopped (",u.currentChunk," of ",u.totalChunks," chunks completed)"]})]})},kme=({toolCallId:e,url:t,events:r})=>{if(!r||r.length===0)return null;const n=r[r.length-1],a=n.progress_type||n.data?.type||"",i=a==="scrape_complete"||a==="scrape_error",s=a==="scrape_error",l=[{type:"scrape_launching",icon:"🚀",label:"Launching browser"},{type:"scrape_launched",icon:"✅",label:"Browser ready"},{type:"scrape_navigating",icon:"🌐",label:"Loading page"},{type:"scrape_page_loaded",icon:"📄",label:"Page loaded"},{type:"scrape_extracting",icon:"📖",label:"Extracting content"},{type:"scrape_extracted",icon:"✅",label:"Content extracted"},{type:"scrape_complete",icon:"🎉",label:"Complete"}],u=l.findIndex(k=>k.type===a),h=l[u]||l[0],p=r.find(k=>(k.progress_type||k.data?.type)==="scrape_extracted"),f=r.find(k=>(k.progress_type||k.data?.type)==="scrape_complete"),y=r.find(k=>(k.progress_type||k.data?.type)==="scrape_error"),b=p?.data?.textLength||f?.data?.textLength||0,x=p?.data?.linkCount||f?.data?.linkCount||0,v=p?.data?.imageCount||f?.data?.imageCount||0,T=f?.data?.totalTime||0;return d.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":i?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-2xl",children:h.icon}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:s?"❌ Scraping Failed":i?"✅ Scraping Complete":h.label}),d.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate max-w-md",children:t})]})]}),T>0&&d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(T/1e3).toFixed(1),"s"]})]}),s&&y?.data?.error&&d.jsxs("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 rounded text-sm text-red-800 dark:text-red-200",children:[d.jsx("div",{className:"font-semibold mb-1",children:"Error:"}),d.jsx("div",{className:"text-xs font-mono",children:y.data.error})]}),!s&&d.jsx("div",{className:"mb-3",children:d.jsx("div",{className:"flex items-center gap-1",children:l.slice(0,-1).map((k,C)=>{const A=C<=u,P=C===u;return d.jsx(dr.Fragment,{children:d.jsx("div",{className:`h-1 flex-1 rounded transition-all duration-300 ${A?P?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400":"bg-gray-300 dark:bg-gray-600"}`})},k.type)})})}),(b>0||x>0||v>0)&&d.jsxs("div",{className:"flex gap-4 text-xs text-gray-700 dark:text-gray-300",children:[b>0&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{children:"📝"}),d.jsxs("span",{children:[b," chars"]})]}),x>0&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{children:"🔗"}),d.jsxs("span",{children:[x," links"]})]}),v>0&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{children:"🖼️"}),d.jsxs("span",{children:[v," images"]})]})]}),!i&&r.length>1&&d.jsxs("details",{className:"mt-3",children:[d.jsxs("summary",{className:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",children:["Show timeline (",r.length," events)"]}),d.jsx("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:r.map((k,C)=>{const A=k.progress_type||k.data?.type||"",P=l.find(L=>L.type===A),M=k.timestamp?new Date(k.timestamp).toLocaleTimeString():"";return d.jsxs("div",{className:"text-xs flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[d.jsx("span",{children:P?.icon||"•"}),d.jsx("span",{className:"flex-1",children:P?.label||A}),M&&d.jsx("span",{className:"text-[10px]",children:M})]},C)})})]})]})},Eme=({data:e})=>{switch(e.phase){case"searching":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Searching ",e.service==="tavily"?"Tavily":"DuckDuckGo","..."]})]});case"results_found":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Found results for: ",e.query]})]});case"loading_content":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Loading content from ",e.result_count," results..."]})]});case"fetching_result":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.url})]})]});case"result_loaded":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Loaded ",Math.round((e.content_size||0)/1024),"KB in ",e.fetch_time_ms,"ms"]})]})]});case"result_failed":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] Failed: ",e.title]}),d.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:e.error})]})]});default:return null}},Cme=({data:e})=>{switch(e.phase){case"searching":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["🔍 Searching YouTube for: ",d.jsx("span",{className:"font-medium",children:e.query})]})]});case"results_found":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["🎬 Found ",d.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," for: ",e.query]})]});case"complete":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["✅ YouTube search complete - ",d.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," added to playlist"]})]});case"fetching_transcripts":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["🎬 ",e.message||`Found ${e.totalVideos} videos, fetching transcripts...`]})]});case"fetching_transcript":const t=e.totalVideos&&e.currentVideo?Math.round(e.currentVideo/e.totalVideos*100):0;return d.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsxs("div",{className:"font-medium",children:["📝 ",e.message||`Fetching transcript ${e.currentVideo}/${e.totalVideos}`]}),e.videoId&&d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:["Video ID: ",e.videoId]})]})]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:d.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:[t,"% complete"]})]});case"transcript_fetched":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-medium",children:e.message||"Transcript fetched"}),e.transcriptLength&&d.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",e.transcriptLength.toLocaleString()," characters)"]})]})]});case"transcript_failed":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[d.jsx("span",{className:"font-medium",children:e.message||"Transcript unavailable"}),e.error&&d.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:e.error})]})]});default:return null}},_me=({data:e})=>{switch(e.phase){case"starting":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),d.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["💻 Starting JavaScript execution (",e.code_length," characters, ",(e.timeout_ms||0)/1e3,"s timeout)..."]})]});case"executing":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"💻 Executing JavaScript code..."})]});case"console_output":return d.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-900/50 rounded text-sm font-mono border-l-4 border-purple-500",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsxs("span",{children:["Console Output #",e.output_number,":"]})]}),d.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.output})]});case"completed":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["✅ Execution completed",e.output_lines!==void 0&&e.output_lines>0&&d.jsxs("span",{className:"ml-1",children:["(",e.output_lines," console output",e.output_lines!==1?"s":"",")"]}),e.has_result&&!e.output_lines&&d.jsx("span",{className:"ml-1",children:"(returned value)"})]})]});case"error":return d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[d.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:"❌ Execution Error"}),d.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-mono mt-1",children:e.error})]})]});default:return null}},Ame=({data:e})=>{const r=(()=>{switch(e.phase){case"analyzing_prompt":return{icon:d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),label:"Analyzing prompt",description:e.prompt?`"${e.prompt.substring(0,60)}${e.prompt.length>60?"...":""}"`:"",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"quality_selected":return{icon:d.jsx("span",{className:"text-purple-500",children:"⚡"}),label:`Quality tier: ${e.quality||"standard"}`,description:e.quality==="ultra"?"Highest quality, slower generation":e.quality==="high"?"High quality output":e.quality==="standard"?"Balanced quality and speed":"Fast generation",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};case"selecting_provider":return{icon:d.jsx("span",{className:"text-indigo-500",children:"🎨"}),label:`Selected: ${e.provider||"provider"} ${e.model||""}`,description:`Size: ${e.size||"1024x1024"} • ${e.estimated_cost?`~$${e.estimated_cost.toFixed(4)}`:"Calculating cost..."}`,bgColor:"bg-indigo-50 dark:bg-indigo-900/20",textColor:"text-indigo-700 dark:text-indigo-300"};case"generating":const n=e.remaining_seconds??e.estimated_seconds??15,a=e.estimated_seconds&&e.remaining_seconds!==void 0?Math.min(100,Math.max(0,(e.estimated_seconds-e.remaining_seconds)/e.estimated_seconds*100)):0;return{icon:d.jsx("div",{className:"w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),label:"Generating image...",description:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("span",{children:"⏱️"}),d.jsx("span",{children:n>0?`~${n}s remaining`:"Finishing up..."})]}),e.estimated_seconds&&d.jsx("div",{className:"w-full bg-pink-200 dark:bg-pink-800 rounded-full h-1.5",children:d.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-1.5 rounded-full transition-all duration-1000 ease-linear",style:{width:`${a}%`}})}),d.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.provider," • ",e.quality," quality • ",e.size]})]}),bgColor:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"completed":return{icon:d.jsx("span",{className:"text-green-500",children:"✓"}),label:"Image generated successfully",description:`${e.provider} • ${e.quality} quality • ${e.size}${e.estimated_cost?` • $${e.estimated_cost.toFixed(4)}`:""}`,bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300"};case"error":return{icon:d.jsx("span",{className:"text-red-500",children:"✗"}),label:"Image generation failed",description:e.error||"Unknown error occurred",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-700 dark:text-red-300"};default:return{icon:d.jsx("div",{className:"w-4 h-4 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),label:"Processing...",description:"",bgColor:"bg-gray-50 dark:bg-gray-900/20",textColor:"text-gray-700 dark:text-gray-300"}}})();return d.jsx("div",{className:`rounded-lg ${r.bgColor} p-3 shadow-sm`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:`font-medium text-sm ${r.textColor}`,children:r.label}),r.description&&d.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:typeof r.description=="string"?d.jsx("span",{children:r.description}):r.description})]})]})})},Nme=({data:e})=>e.phase==="preparing"?d.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 shadow-sm",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"font-medium text-sm text-blue-700 dark:text-blue-300",children:["Preparing ",e.chart_type||"chart"," diagram"]}),e.description&&d.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]})}):e.phase==="completed"?d.jsx("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3 shadow-sm",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("span",{className:"text-green-500",children:"✓"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"font-medium text-sm text-green-700 dark:text-green-300",children:[e.chart_type||"Chart"," diagram ready"]}),d.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Diagram will appear below"})]})]})}):null,Lme=({data:e})=>d.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-sm space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Content Extracted"})]}),e.title&&d.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium truncate",children:e.title}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.format&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",d.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.format==="markdown"?"📝 Markdown":"📄 Plain Text"})]}),e.compressionRatio!=null&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",d.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Number(e.compressionRatio).toFixed(1),"x"]})]}),e.originalLength!==void 0&&e.extractedLength!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Size:"})," ",d.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[(e.originalLength/1024).toFixed(1),"KB → ",(e.extractedLength/1024).toFixed(1),"KB"]})]}),e.wordCount!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Words:"})," ",d.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.wordCount.toLocaleString()})]}),e.language&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language:"})," ",d.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.language})]}),e.duration!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"})," ",d.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]})]})]}),(e.images||e.videos||e.youtube||e.links)&&d.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[(e.images??0)>0&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["🖼️ ",e.images," ",e.images===1?"image":"images"]}),(e.videos??0)>0&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["🎥 ",e.videos," ",e.videos===1?"video":"videos"]}),(e.youtube??0)>0&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["📺 ",e.youtube," YouTube ",e.youtube===1?"video":"videos"]}),(e.links??0)>0&&d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["🔗 ",e.links," ",e.links===1?"link":"links"]})]}),e.warning&&d.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:["⚠️ ",e.warning]})]}),hp=({data:e,level:t=0})=>{const[r,n]=dr.useState(t<2);if(e===null)return d.jsx("span",{className:"text-gray-500",children:"null"});if(e===void 0)return d.jsx("span",{className:"text-gray-500",children:"undefined"});if(typeof e!="object")return typeof e=="string"?d.jsxs("span",{className:"text-green-600 dark:text-green-400",children:['"',e,'"']}):typeof e=="number"?d.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e}):typeof e=="boolean"?d.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:String(e)}):d.jsx("span",{children:String(e)});const a=Array.isArray(e),i=a?e.map((s,l)=>l):Object.keys(e);return i.length===0?d.jsx("span",{className:"text-gray-500",children:a?"[]":"{}"}):d.jsxs("div",{className:"ml-4",children:[d.jsxs("button",{onClick:()=>n(!r),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r?"▼":"▶"," ",a?`Array[${i.length}]`:`Object{${i.length}}`]}),r&&d.jsx("div",{className:"ml-4 border-l border-gray-300 dark:border-gray-600 pl-2",children:i.map(s=>d.jsxs("div",{className:"my-1",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-mono",children:String(s)}),d.jsx("span",{className:"text-gray-500",children:": "}),d.jsx(hp,{data:e[s],level:t+1})]},String(s)))})]})},Pme=({errorData:e,llmApiCalls:t,onClose:r})=>{const n=ag(!0,r),{showSuccess:a,showError:i}=Ks();return d.jsx("div",{ref:n,className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[d.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Details"]}),d.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d.jsxs("div",{className:"space-y-4",children:[e?.message&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"Error Message"}),d.jsx("p",{className:"text-red-700 dark:text-red-300 font-mono text-sm whitespace-pre-wrap",children:e.message})]}),(e?.type||e?.code||e?.statusCode)&&d.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-200 mb-2",children:"Error Classification"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[e.type&&d.jsxs("div",{children:[d.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Type:"})," ",d.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.type})]}),e.code&&d.jsxs("div",{children:[d.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Code:"})," ",d.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.code})]}),e.statusCode&&d.jsxs("div",{children:[d.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Status Code:"})," ",d.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.statusCode})]})]})]}),e?.stack&&d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Stack Trace"}),d.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap overflow-x-auto",children:e.stack})]}),(e?.errorType||e?.errorMessage)&&d.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-300 dark:border-purple-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Lambda Error"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[e.errorType&&d.jsxs("div",{children:[d.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Type:"})," ",d.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorType})]}),e.errorMessage&&d.jsxs("div",{children:[d.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Message:"})," ",d.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorMessage})]})]})]}),(e?.error?.message||e?.error?.type||e?.error?.code)&&d.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Upstream LLM Provider Error"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[e.error.message&&d.jsxs("div",{children:[d.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Message:"})," ",d.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.message})]}),e.error.type&&d.jsxs("div",{children:[d.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Type:"})," ",d.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.type})]}),e.error.code&&d.jsxs("div",{children:[d.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Code:"})," ",d.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.code})]})]})]}),(e?.request||e?.requestId||e?.timestamp)&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Request Context"}),d.jsxs("div",{className:"space-y-1 text-sm",children:[e.requestId&&d.jsxs("div",{children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request ID:"})," ",d.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:e.requestId})]}),e.timestamp&&d.jsxs("div",{children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Timestamp:"})," ",d.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(e.timestamp).toLocaleString()})]}),e.request&&d.jsxs("div",{className:"mt-2",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request Data:"}),d.jsx("div",{className:"mt-1 bg-white dark:bg-gray-800 rounded p-2 max-h-48 overflow-auto",children:d.jsx(hp,{data:e.request})})]})]})]}),t&&t.length>0&&d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2",children:[d.jsx("span",{children:"🔍 LLM Request Details"}),d.jsxs("span",{className:"text-xs font-normal text-blue-600 dark:text-blue-400",children:["(",t.length," call",t.length!==1?"s":"",")"]})]}),d.jsx("div",{className:"space-y-3",children:t.map((s,l)=>{const u=s.response?.usage?.prompt_tokens||0,h=s.response?.usage?.completion_tokens||0,p=u+h;return d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Model:"}),d.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded font-mono",children:s.model}),s.provider&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-gray-400",children:"•"}),d.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:s.provider})]}),s.phase&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-gray-400",children:"•"}),d.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:s.phase})]})]}),p>0&&d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Tokens:"}),d.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:[p.toLocaleString()," total"]}),d.jsxs("span",{className:"text-gray-400",children:["(",u.toLocaleString()," in, ",h.toLocaleString()," out)"]})]}),s.cost!==void 0&&d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Cost:"}),d.jsxs("span",{className:"text-green-600 dark:text-green-400 font-mono",children:["$",s.cost.toFixed(6)]})]}),s.timestamp&&d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Time:"}),d.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(s.timestamp).toLocaleTimeString()})]}),s.httpStatus&&d.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[d.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"HTTP Status:"}),d.jsx("span",{className:`font-mono ${s.httpStatus>=400?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:s.httpStatus})]}),s.request&&d.jsxs("details",{className:"mt-2",children:[d.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Request Details ▸"}),d.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:d.jsx(hp,{data:s.request})})]}),s.response&&d.jsxs("details",{className:"mt-2",children:[d.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Response Details ▸"}),d.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:d.jsx(hp,{data:s.response})})]})]})},l)})})]}),d.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2 flex items-center justify-between",children:[d.jsx("span",{children:"Complete Error Object (Expandable Tree)"}),d.jsxs("button",{onClick:()=>{const s=JSON.stringify(e,null,2);navigator.clipboard.writeText(s).then(()=>a("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 flex items-center gap-1",title:"Copy full JSON to clipboard",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy JSON"]})]}),d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3 max-h-96 overflow-auto font-mono text-xs",children:d.jsx(hp,{data:e})})]})]})}),d.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("button",{onClick:()=>{const s=JSON.stringify(e,null,2);navigator.clipboard.writeText(s).then(()=>a("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"btn-secondary",children:"Copy Full JSON"}),d.jsx("button",{onClick:r,className:"btn-primary",children:"Close"})]})]})})};function Rme({isOpen:e,onClose:t,messageData:r}){const[n,a]=_.useState(""),[i,s]=_.useState(!1),[l,u]=_.useState(null),{getToken:h,user:p}=Di(),{showSuccess:f}=Ks(),y=2e3,b=y-n.length,x=async()=>{if(!n.trim()){u("Please provide an explanation");return}s(!0),u(null);try{const v=await h(),T=await kn();if(!v)throw new Error("No access token available");console.log("🔑 Token type check:",{isJWT:v.split(".").length===3,prefix:v.substring(0,20),length:v.length});const k=await fetch(`${T}/report-error`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({userEmail:p?.email||"unknown",explanation:n.trim(),messageData:{messageId:r.messageId,messageContent:r.messageContent,llmApiCalls:r.llmApiCalls,evaluations:r.evaluations||[],conversationThread:r.conversationThread},timestamp:new Date().toISOString()})});if(!k.ok){const C=await k.json().catch(()=>({error:"Unknown error"}));throw new Error(C.error||`HTTP ${k.status}`)}a(""),f("✅ Report submitted successfully"),t()}catch(v){console.error("Failed to submit error report:",v),u(v instanceof Error?v.message:"Failed to submit report. Please try again.")}finally{s(!1)}};return e?d.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 z-10",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:"🚩"}),d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Report Response Issue"})]}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl leading-none","aria-label":"Close",children:"×"})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800 text-sm",children:d.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:["ℹ️ ",d.jsx("strong",{children:"Privacy Notice:"})," Your report will include this conversation's full context and will be reviewed by the development team to improve the system. Please do not include sensitive personal information in your explanation."]})}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Help us improve! Describe what went wrong with this response:"}),d.jsx("textarea",{value:n,onChange:v=>a(v.target.value.slice(0,y)),placeholder:`Examples:
• Response was factually incorrect about...
• Did not answer my actual question
• Hallucinated information
• Ignored previous context
• Missing important details`,className:"w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),d.jsx("div",{className:"flex justify-between items-center text-sm",children:d.jsxs("span",{className:`${b<100?"text-orange-600 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}`,children:[b," characters remaining"]})}),l&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-200 dark:border-red-800",children:d.jsxs("p",{className:"text-red-900 dark:text-red-100 text-sm",children:["⚠️ ",l]})})]}),d.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[d.jsx("button",{onClick:t,disabled:i,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),d.jsx("button",{onClick:x,disabled:i||!n.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"animate-spin",children:"⏳"}),d.jsx("span",{children:"Sending..."})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"📤"}),d.jsx("span",{children:"Send Report"})]})})]})]})}):null}class Ime{recognition=null;isListening=!1;callback=null;currentHotword="hey google";async initialize(t="hey google",r=.5){const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)throw new Error("Speech Recognition not supported in this browser. Please use Chrome, Edge, or Safari.");try{this.currentHotword=t.toLowerCase(),this.recognition=new n,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=1,console.log(`✅ Browser Speech Recognition initialized with hotword: "${t}"`)}catch(a){throw console.error("❌ Failed to initialize Speech Recognition:",a),a}}async startListening(t){if(!this.recognition)throw new Error("Speech Recognition not initialized. Call initialize() first.");if(this.isListening){console.warn("Already listening for hotword");return}this.callback=t;try{this.recognition.onresult=r=>{const n=r.results,i=n[n.length-1][0].transcript.toLowerCase().trim();i.includes(this.currentHotword)&&(console.log("🎤 Hotword detected:",i),this.callback?.())},this.recognition.onerror=r=>{console.error("Speech recognition error:",r.error),(r.error==="no-speech"||r.error==="aborted")&&(console.log("Restarting speech recognition..."),setTimeout(()=>{this.isListening&&this.recognition?.start()},1e3))},this.recognition.onend=()=>{this.isListening&&(console.log("Speech recognition ended, restarting..."),setTimeout(()=>{this.isListening&&this.recognition?.start()},100))},this.recognition.start(),this.isListening=!0,console.log("👂 Listening for hotword:",this.currentHotword)}catch(r){throw console.error("Failed to start hotword detection:",r),r}}async stopListening(){if(this.isListening)try{this.isListening=!1,this.callback=null,this.recognition&&this.recognition.stop(),console.log("Stopped listening for hotword")}catch(t){console.error("Failed to stop hotword detection:",t)}}async release(){await this.stopListening(),this.recognition&&(this.recognition=null,console.log("Speech Recognition released"))}isActive(){return this.isListening}}const Zh=new Ime;function Dme({onVoiceRequest:e,onTranscriptionStart:t,accessToken:r,apiEndpoint:n,isProcessing:a=!1,isSpeaking:i=!1,enabled:s=!1,onEnabledChange:l}){const{showPersistentToast:u,removeToast:h,updateToast:p}=Ks(),f=_.useRef(null),y=Te=>{f.current&&p(f.current,Te)},[b,x]=_.useState(s);_.useEffect(()=>{x(s)},[s]);const v=Te=>{x(Te),l?.(Te)},[T,k]=_.useState("hotword"),[C,A]=_.useState(""),[P,M]=_.useState(0),[L,D]=_.useState(()=>localStorage.getItem("continuousVoice_hotword")||"hey google"),[q,Q]=_.useState(()=>parseFloat(localStorage.getItem("continuousVoice_sensitivity")||"0.5")),[F,K]=_.useState(()=>parseInt(localStorage.getItem("continuousVoice_timeout")||"10000")),W=_.useRef(null),j=100,O=_.useRef(null),$=_.useRef(null),I=_.useRef(null),G=_.useRef([]),V=_.useRef(null),oe=_.useRef(null);_.useEffect(()=>{localStorage.setItem("continuousVoice_hotword",L),localStorage.setItem("continuousVoice_sensitivity",q.toString()),localStorage.setItem("continuousVoice_timeout",F.toString())},[L,q,F]),_.useEffect(()=>{a?k("thinking"):i&&k("speaking")},[a,i]),_.useEffect(()=>{if(T==="speaking"&&!i&&b){console.log("🔄 TTS complete, auto-restarting listening...");const Te=P+1;if(M(Te),Te>=j){console.warn("⚠️ Max turns reached, stopping continuous mode"),v(!1);return}k("listening"),Z(),H()}},[i,T,b,P]),_.useEffect(()=>(b?(U(),f.current||(f.current=u('🎤 Listening for "'+L+'"...',"info",{label:"Stop",onClick:()=>v(!1)}))):(de(),f.current&&(h(f.current),f.current=null)),()=>{de(),f.current&&(h(f.current),f.current=null)}),[b]),_.useEffect(()=>{T==="hotword"&&b&&z()},[T,b]),_.useEffect(()=>{if(!b||!f.current)return;const Te={hotword:`🎤 Listening for "${L}"...`,listening:"🎙️ Recording... (speak now)",thinking:"🤔 Processing...",speaking:"🔊 Speaking..."};y(Te[T])},[T,b,L]);async function U(){try{await Zh.initialize(L,q),console.log("🎙️ Starting continuous mode - recording immediately"),k("listening"),M(0),Z(),H()}catch(Te){console.error("❌ Failed to initialize continuous mode:",Te),v(!1),alert(`Failed to initialize voice detection: ${Te instanceof Error?Te.message:"Unknown error"}`)}}async function z(){try{await Zh.initialize(L,q),await Zh.startListening(ie),console.log("🎤 Hotword mode active")}catch(Te){console.error("❌ Failed to start hotword listening:",Te)}}function ie(){console.log("✅ Hotword detected, starting microphone..."),Zh.stopListening(),k("listening"),t?.(),Z(),H()}function H(){ue(),!(F<=0)&&(W.current=window.setTimeout(()=>{console.log("⏱️ Timeout: No speech detected, returning to hotword mode"),O.current&&O.current.state!=="inactive"&&pe(),k("hotword")},F))}function ue(){W.current&&(clearTimeout(W.current),W.current=null)}async function Z(){try{G.current=[];const Te=await navigator.mediaDevices.getUserMedia({audio:!0});V.current=Te;const $e=new(window.AudioContext||window.webkitAudioContext);$.current=$e;const ot=$e.createMediaStreamSource(Te),Tt=$e.createAnalyser();Tt.fftSize=256,I.current=Tt,ot.connect(Tt);const je=new MediaRecorder(Te);O.current=je,je.ondataavailable=_t=>{_t.data.size>0&&G.current.push(_t.data)},je.onstop=async()=>{const _t=new Blob(G.current,{type:"audio/webm"});await ye(_t)},je.start(),ae(),console.log("🎙️ Recording started")}catch(Te){console.error("❌ Error starting recording:",Te),k("hotword")}}function ae(){if(!I.current||!O.current||O.current.state!=="recording"&&O.current.state!=="paused")return;const Te=new Uint8Array(I.current.frequencyBinCount);I.current.getByteFrequencyData(Te);const $e=Te.reduce((je,_t)=>je+_t)/Te.length,ot=10,Tt=2e3;$e<ot?oe.current||(oe.current=window.setTimeout(()=>{console.log("🤫 Silence detected, stopping recording..."),pe()},Tt)):oe.current&&(clearTimeout(oe.current),oe.current=null),O.current&&(O.current.state==="recording"||O.current.state==="paused")&&setTimeout(ae,100)}function pe(){oe.current&&(clearTimeout(oe.current),oe.current=null),O.current&&(O.current.state==="recording"||O.current.state==="paused")&&O.current.stop(),V.current&&(V.current.getTracks().forEach(Te=>Te.stop()),V.current=null),$.current&&$.current.state!=="closed"&&($.current.close().catch(Te=>{console.warn("Failed to close AudioContext:",Te)}),$.current=null)}async function ye(Te){if(ue(),Te.size===0){console.warn("⚠️ No audio data recorded"),k("hotword");return}k("thinking");try{const $e=await _e(Te);if(A($e),!$e.trim()){console.log("⚠️ Empty transcript, returning to hotword mode"),k("hotword");return}console.log("📝 Transcript:",$e),e?.($e)}catch($e){console.error("❌ Error processing speech:",$e),k("hotword")}}async function _e(Te){if(!r)throw new Error("Not authenticated");const $e=new FormData;$e.append("audio",Te,"recording.webm");const Tt=`${(await kn()).replace("/openai/v1","")}/transcribe`,je=3;let _t=null;for(let Pt=1;Pt<=je;Pt++)try{const Bt=new AbortController,kt=setTimeout(()=>Bt.abort(),2e4),At=await fetch(Tt,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:$e,signal:Bt.signal});clearTimeout(kt);const ir=await At.json().catch(()=>({}));if(!At.ok){const lr=ir?.error||At.statusText||`HTTP ${At.status}`;throw new Error(lr)}return ir.text||ir.transcription||""}catch(Bt){_t=Bt;const kt=Bt instanceof TypeError&&Bt.message.includes("Failed to fetch"),At=Bt.name==="AbortError";if(console.warn(`Transcription attempt ${Pt} failed:`,Bt?.message||Bt),Pt<je&&(kt||At)){const ir=400*Math.pow(2,Pt-1);await new Promise(lr=>setTimeout(lr,ir));continue}throw Bt}throw _t||new Error("Transcription failed")}async function de(){ue(),oe.current&&(clearTimeout(oe.current),oe.current=null),O.current&&(O.current.state==="recording"||O.current.state==="paused")&&pe(),await Zh.release()}function Ae(){v(!b)}return d.jsxs("div",{className:"continuous-voice-mode",children:[!l&&d.jsx("button",{onClick:Ae,className:`toggle-btn ${b?"active":""}`,title:b?"Stop Continuous Mode":"Start Continuous Mode",children:b?"🔴 Stop":"🎙️ Continuous Mode"}),b&&!l&&d.jsxs("div",{className:`state-indicator state-${T}`,children:[d.jsxs("div",{className:"state-icon",children:[T==="hotword"&&"🎤",T==="listening"&&"👂",T==="thinking"&&"🤔",T==="speaking"&&"🔊"]}),d.jsxs("div",{className:"state-text",children:[T==="hotword"&&`Say "${L}" to start...`,T==="listening"&&"Listening...",T==="thinking"&&"Processing...",T==="speaking"&&"Speaking..."]}),d.jsxs("div",{className:"turn-count",children:["Turn ",P,"/",j]})]}),!b&&!l&&d.jsxs("details",{className:"settings-panel",children:[d.jsx("summary",{children:"⚙️ Settings"}),d.jsxs("div",{className:"setting",children:[d.jsx("label",{children:"Hotword:"}),d.jsxs("select",{value:L,onChange:Te=>D(Te.target.value),children:[d.jsx("option",{value:"hey google",children:"Hey Google"}),d.jsx("option",{value:"ok google",children:"OK Google"}),d.jsx("option",{value:"hey siri",children:"Hey Siri"}),d.jsx("option",{value:"alexa",children:"Alexa"}),d.jsx("option",{value:"jarvis",children:"Jarvis"}),d.jsx("option",{value:"computer",children:"Computer"}),d.jsx("option",{value:"porcupine",children:"Porcupine"})]}),d.jsx("small",{children:"Say this phrase to activate"})]}),d.jsxs("div",{className:"setting",children:[d.jsxs("label",{children:["Sensitivity: ",q.toFixed(1)]}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:q,onChange:Te=>Q(parseFloat(Te.target.value))}),d.jsx("small",{children:"Low = fewer false triggers | High = more sensitive"})]}),d.jsxs("div",{className:"setting",children:[d.jsx("label",{children:"Silence Timeout:"}),d.jsxs("select",{value:F,onChange:Te=>K(parseInt(Te.target.value)),children:[d.jsx("option",{value:"5000",children:"5 seconds"}),d.jsx("option",{value:"10000",children:"10 seconds (default)"}),d.jsx("option",{value:"30000",children:"30 seconds"}),d.jsx("option",{value:"-1",children:"Never (manual only)"})]}),d.jsx("small",{children:"Return to hotword mode after silence"})]}),d.jsxs("div",{className:"info-box",children:[d.jsx("p",{children:d.jsx("strong",{children:"How it works:"})}),d.jsxs("ol",{children:[d.jsxs("li",{children:['Say "',L,'" to activate']}),d.jsx("li",{children:"Speak your question"}),d.jsx("li",{children:"Agent responds"}),d.jsx("li",{children:"Microphone auto-restarts for next turn"}),d.jsxs("li",{children:["After ",F>0?`${F/1e3}s`:"∞"," silence, returns to hotword mode"]})]})]})]}),C&&b&&d.jsxs("div",{className:"transcript-display",children:[d.jsx("strong",{children:"You:"})," ",C]})]})}const JN=({data:e,title:t})=>{const[r,n]=_.useState(!1);return d.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded",children:[d.jsxs("button",{onClick:()=>n(!r),className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[d.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:t}),d.jsx("svg",{className:`w-4 h-4 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&d.jsx("pre",{className:"p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(e,null,2)})]})},Mme=({data:e,accessToken:t,providerApiKeys:r,onCopy:n,onGrab:a,onLlmInfo:i,onStatusChange:s})=>{console.log("🖼️ GeneratedImageBlock render:",{status:e.status,hasImageUrl:!!e.imageUrl,hasBase64:!!e.base64,data:e});const[l,u]=_.useState(!1),[h,p]=_.useState(null),[f,y]=_.useState(!1),[b,x]=_.useState(!1),[v,T]=_.useState(!1),k=D=>{switch(D.toLowerCase()){case"openai":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300";case"together":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";case"replicate":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300";case"gemini":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},C=D=>{switch(D.toLowerCase()){case"openai":return"OpenAI";case"together":return"Together AI";case"replicate":return"Replicate";case"gemini":return"Google Gemini";default:return D}},A=async()=>{if(!t){p("Authentication required");return}u(!0),p(null),s?.(e.id,"generating");try{const D=await rL(e.prompt,e.provider,e.model,e.modelKey||"",e.size||"",e.qualityTier||"",e.style||"",t,r);if(D.success&&D.imageUrl){let q=D.imageUrl;D.base64&&!D.base64.startsWith("data:")?q=`data:image/png;base64,${D.base64}`:D.base64&&(q=D.base64),s?.(e.id,"complete",q,D.llmApiCall)}else{const q=D.error||"Image generation failed";p(q),s?.(e.id,"error")}}catch(D){const q=D instanceof Error?D.message:"Image generation failed";p(q),s?.(e.id,"error")}finally{u(!1)}},P=()=>{e.imageUrl&&n&&n(e.imageUrl)},M=()=>{if(e.imageUrl&&a){const D=`![${e.prompt.substring(0,100)}](${e.imageUrl})`;a(D)}},L=()=>{e.llmApiCall&&i&&i(e.llmApiCall)};return e.status==="pending"||!e.imageUrl&&!l&&!h?d.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-4",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("button",{onClick:A,disabled:l,className:"btn-primary flex items-center justify-center gap-2 py-3",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsxs("span",{children:["Generate Image for $",e.cost.toFixed(4)]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k(e.provider)}`,children:C(e.provider)}),d.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:e.model}),e.qualityTier&&d.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:e.qualityTier}),e.size&&d.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",children:e.size})]}),e.constraints&&d.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[d.jsxs("button",{onClick:()=>y(!f),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[d.jsx("svg",{className:`w-4 h-4 transform transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),d.jsx("span",{children:"Model Constraints"})]}),f&&d.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1 pl-6",children:[e.constraints.maxSize&&d.jsxs("div",{children:["• Max size: ",e.constraints.maxSize]}),e.constraints.supportedSizes&&e.constraints.supportedSizes.length>0&&d.jsxs("div",{children:["• Supported sizes: ",e.constraints.supportedSizes.join(", ")]}),e.constraints.supportsStyle!==void 0&&d.jsxs("div",{children:["• Style support: ",e.constraints.supportsStyle?"Yes":"No"]})]})]}),e.availableAlternatives&&e.availableAlternatives.length>0&&d.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[d.jsxs("button",{onClick:()=>x(!b),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[d.jsx("svg",{className:`w-4 h-4 transform transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),d.jsxs("span",{children:["Available Alternatives (",e.availableAlternatives.length,")"]})]}),b&&d.jsx("div",{className:"mt-2 space-y-2 pl-6",children:e.availableAlternatives.map((D,q)=>d.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${k(D.provider)}`,children:C(D.provider)}),d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:D.model})]}),d.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["$",D.cost.toFixed(4)]})]},q))})]})]})}):l||e.status==="generating"?d.jsx("div",{className:"bg-white dark:bg-gray-800 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Generating image with ",C(e.provider),"..."]}),d.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This may take a few seconds"})]})]})}):h||e.status==="error"?d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-4",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-red-900 dark:text-red-200",children:"Image Generation Failed"}),d.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h||e.error||"An unknown error occurred"}),d.jsxs("button",{onClick:A,className:"mt-3 btn-secondary text-sm flex items-center gap-2",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("span",{children:"Retry"})]})]})]})}):e.status==="complete"&&e.imageUrl?d.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[e.fallbackUsed&&d.jsxs("div",{className:"mx-4 mt-4 mb-2 flex items-center gap-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded px-3 py-2",children:[d.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Primary provider unavailable, fallback provider used"})]}),v&&d.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[d.jsx("h3",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 mb-3",children:"🖼️ IMAGE GENERATION DETAILS"}),d.jsx("table",{className:"w-full text-sm mb-4",children:d.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Title"}),d.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:"Generated Image"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Final Prompt"}),d.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100 break-words",children:e.revisedPrompt||e.prompt})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Size"}),d.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.size||"1024x1024"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Model"}),d.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.model})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Provider"}),d.jsx("td",{className:"py-2",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k(e.provider)}`,children:C(e.provider)})})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Quality"}),d.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.qualityTier||"standard"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Cost"}),d.jsxs("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:["$",e.cost.toFixed(4)]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Status"}),d.jsx("td",{className:"py-2",children:d.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"✓ Success"})})]})]})}),e.llmApiCall&&d.jsxs("div",{className:"space-y-3",children:[e.llmApiCall.request&&d.jsx(JN,{data:e.llmApiCall.request,title:"Request Data"}),e.llmApiCall.response&&d.jsx(JN,{data:e.llmApiCall.response,title:"Response Data"})]})]}),d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:e.imageUrl,alt:e.prompt,className:"w-full"}),d.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n&&d.jsx("button",{onClick:P,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy image URL",children:d.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a&&d.jsx("button",{onClick:M,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy as markdown",children:d.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]}),d.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex items-center justify-between",children:[d.jsxs("button",{onClick:()=>T(!v),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[d.jsx("svg",{className:`w-4 h-4 transform transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),d.jsxs("span",{className:"font-medium",children:[v?"Hide":"Show"," Details"]})]}),i&&e.llmApiCall&&d.jsxs("button",{onClick:L,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 border border-gray-300 dark:border-gray-600 rounded transition-colors",title:"View LLM call details",children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{children:"LLM Info"})]})]})]}):null},Zp=({data:e,level:t=0,expanded:r=!1,expandPaths:n=[],currentPath:a="",expandAll:i=!1})=>{const s=i||r||n.some(x=>a===x||a.startsWith(x+".")),[l,u]=_.useState(s),p=(x=>x===null?"null":Array.isArray(x)?"array":typeof x)(e);if(p!=="object"&&p!=="array")return d.jsx("span",{className:`json-value json-${p}`,children:p==="string"?`"${e}"`:String(e)});const f=Array.isArray(e)?e.map((x,v)=>[v,x]):Object.entries(e),y=f.length===0,b=Array.isArray(e)?`Array(${e.length})`:`Object{${f.length}}`;return d.jsxs("div",{className:"json-tree",children:[d.jsxs("div",{className:"json-line",children:[!y&&d.jsx("button",{onClick:()=>u(!l),className:"json-toggle","aria-label":l?"Collapse":"Expand",children:l?"▼":"▶"}),d.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"[":"{"}),!l&&!y&&d.jsxs("span",{className:"json-preview",children:[" ",b," "]}),!l&&d.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"]":"}"})]}),l&&d.jsxs("div",{className:"json-content",style:{marginLeft:`${t*20+20}px`},children:[f.map(([x,v],T)=>{const k=a?`${a}.${x}`:String(x);return d.jsxs("div",{className:"json-item",children:[!Array.isArray(e)&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"json-key",children:['"',x,'"']}),d.jsx("span",{className:"json-colon",children:": "})]}),d.jsx(Zp,{data:v,level:t+1,expanded:!1,expandPaths:n,currentPath:k,expandAll:i}),T<f.length-1&&d.jsx("span",{className:"json-comma",children:","})]},x)}),d.jsx("div",{style:{marginLeft:"-20px"},className:"json-bracket",children:Array.isArray(e)?"]":"}"})]})]})},Ome=e=>{if(typeof e!="string")return!1;const t=e.trim();if(!t||!(t.startsWith("{")||t.startsWith("[")))return!1;try{const r=JSON.parse(t);return typeof r=="object"&&r!==null}catch{return!1}},jme=e=>{try{return JSON.parse(e.trim())}catch{return null}},qye=({content:e,className:t=""})=>{if(Ome(e)){const r=jme(e);if(r!==null)return d.jsx("div",{className:`json-container ${t}`,children:d.jsx(Zp,{data:r,expanded:!1})})}return d.jsx("div",{className:t,children:e})},Bme=({images:e,maxDisplay:t=3,onImageClick:r,onGrabImage:n})=>{const[a,i]=_.useState(new Set),l=e.map(h=>typeof h=="string"?{src:h,alt:void 0}:h).slice(0,t);if(!e||e.length===0)return null;const u=(h,p,f)=>{h.stopPropagation(),n?.(p,f)};return d.jsx("div",{className:"my-4 flex gap-2 flex-wrap",children:l.map((h,p)=>a.has(p)?null:d.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors w-32 h-32",children:[d.jsx("img",{src:h.src,alt:h.alt||`Search result ${p+1}`,className:"w-full h-full object-cover cursor-pointer",loading:"lazy",onError:()=>i(f=>new Set(f).add(p)),onClick:()=>r?.(h.src)}),n&&d.jsx("button",{onClick:f=>u(f,h.src,h.alt||`Search result ${p+1}`),className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded shadow-lg z-10",title:"Add to SWAG",children:"📎 Grab"})]},`${h.src}-${p}`))})},Fme=e=>{const t=e.match(/<img[^>]+>/i);if(t){const r=t[0],n=r.match(/src=["']([^"']+)["']/i),a=n?n[1]:null,i=r.match(/alt=["']([^"']*)["']/i),s=i?i[1]:"Image",l=e.replace(/<img[^>]+>/gi,"").trim();return{hasImage:!!a,imageSrc:a,altText:s,textContent:l.length>200?l.substring(0,200)+"...":l}}return{hasImage:!1,imageSrc:null,altText:null,textContent:e.length>300?e.substring(0,300)+"...":e}},zme=({selectedSnippetIds:e,onSelectionChange:t,userEmail:r})=>{const{getToken:n}=Di(),{snippets:a,getAllTags:i}=$0(),{settings:s}=Xs(),[l,u]=_.useState("text"),[h,p]=_.useState(""),[f,y]=_.useState(""),[b,x]=_.useState([]),[v,T]=_.useState(!1),[k,C]=_.useState(!1),[A,P]=_.useState([]),[M,L]=_.useState(.5);_.useEffect(()=>{const $=()=>{const G=localStorage.getItem("rag_config");if(G)try{const V=JSON.parse(G);V.similarityThreshold!==void 0&&L(V.similarityThreshold)}catch(V){console.error("Failed to parse RAG config:",V)}};$();const I=()=>$();return window.addEventListener("rag_config_updated",I),()=>{window.removeEventListener("rag_config_updated",I)}},[]);const D=async()=>{if(f.trim()){T(!0),C(!0);try{const $=await kn(),I=await n(),G=await fetch(`${$}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...I?{Authorization:`Bearer ${I}`}:{}},body:JSON.stringify({query:f,embeddingModel:s.embeddingModel,providers:s.providers})});if(!G.ok)throw new Error("Failed to get query embedding");const{embedding:V}=await G.json(),oe=await Va.vectorSearch(V,20,M);console.log(`🔍 Vector search found ${oe.length} results with threshold ${M}`),x(oe)}catch($){console.error("Vector search error:",$),alert("Vector search failed. Make sure snippets have embeddings generated.")}finally{T(!1)}}},q=()=>{let $=a;if(A.length>0&&($=$.filter(I=>A.every(G=>I.tags?.includes(G)))),l==="text"&&h.trim()){const I=h.toLowerCase();$=$.filter(G=>G.title?.toLowerCase().includes(I)||G.content.toLowerCase().includes(I))}else if(l==="vector"&&k){const I=new Set(b.map(G=>String(G.snippet_id)));$=$.filter(G=>I.has(G.id))}return $},Q=$=>{if(l!=="vector"||!k)return null;const I=b.find(G=>String(G.snippet_id)===$);return I?I.score:null},F=$=>{const I=new Set(e);I.has($)?I.delete($):I.add($),t(I)},K=()=>{const $=q(),I=new Set;$.forEach(G=>I.add(G.id)),t(I)},W=()=>{t(new Set)},j=q(),O=i();return d.jsxs("div",{className:"snippet-selector flex flex-col h-full bg-gray-50 dark:bg-gray-800",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"📎 Attach Context"}),d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size>0&&`${e.size} selected`})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:K,disabled:j.length===0,className:"px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Select All"}),d.jsx("button",{onClick:W,disabled:e.size===0,className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),d.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800",children:d.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:["💡 Select snippets to include as ",d.jsx("strong",{children:"full context"})," in your message. Unlike automatic RAG which finds relevant fragments, selected snippets are included in their entirety."]})}),d.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{u("text"),C(!1),x([])},className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="text"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"🔤 Text Search"}),d.jsx("button",{onClick:()=>u("vector"),className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="vector"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"🧠 Semantic Search"})]})}),d.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-2",children:[l==="text"?d.jsx("input",{type:"text",placeholder:"Search by title or content...",value:h,onChange:$=>p($.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}):d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",placeholder:"Enter semantic search query...",value:f,onChange:$=>y($.target.value),onKeyDown:$=>$.key==="Enter"&&D(),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.jsx("button",{onClick:D,disabled:v||!f.trim(),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"🔄":"🔍"})]}),l==="vector"&&k&&d.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Found ",b.length," results with similarity ≥ ",M.toFixed(2)]})]}),O.length>0&&d.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[d.jsx("div",{className:"flex flex-wrap gap-1.5",children:O.map($=>d.jsx("button",{onClick:()=>{P(I=>I.includes($)?I.filter(G=>G!==$):[...I,$])},className:`px-2 py-1 text-xs rounded transition-colors ${A.includes($)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:$},$))}),A.length>0&&d.jsx("button",{onClick:()=>P([]),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear tag filters"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:j.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:a.length===0?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm font-medium",children:"No snippets in knowledge base"}),d.jsx("p",{className:"text-xs mt-2",children:"Visit the Swag page to add snippets"})]}):l==="vector"&&!k?d.jsx("p",{className:"text-sm",children:"Enter a query and click Search to find semantically similar snippets"}):d.jsx("p",{className:"text-sm",children:"No snippets match your filters"})}):j.map($=>{const I=e.has($.id),G=Q($.id);return d.jsx("div",{onClick:()=>F($.id),className:`border rounded p-3 cursor-pointer transition-all ${I?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-700 hover:shadow-md"}`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("input",{type:"checkbox",checked:I,onChange:()=>{},className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:$.title||"Untitled"}),G!==null&&d.jsxs("span",{className:"text-xs font-mono text-blue-600 dark:text-blue-400 whitespace-nowrap",children:[(G*100).toFixed(1),"%"]})]}),d.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 overflow-hidden snippet-preview",children:(()=>{const V=Fme($.content);return V.hasImage&&V.imageSrc?d.jsxs("div",{className:"space-y-2",children:[d.jsx("img",{src:V.imageSrc,alt:V.altText||"Image",className:"max-w-full h-auto max-h-32 rounded border border-gray-300 dark:border-gray-600 block",loading:"lazy"}),V.textContent&&d.jsx(Vm,{components:{p:({node:oe,...U})=>d.jsx("p",{...U,className:"my-1"}),code:({node:oe,...U})=>d.jsx("code",{...U,className:"bg-gray-200 dark:bg-gray-700 px-1 rounded text-xs"})},children:V.textContent})]}):d.jsx(Vm,{components:{p:({node:oe,...U})=>d.jsx("p",{...U,className:"my-1"}),code:({node:oe,...U})=>d.jsx("code",{...U,className:"bg-gray-200 dark:bg-gray-700 px-1 rounded text-xs"})},children:V.textContent})})()}),$.tags&&$.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:$.tags.map(V=>d.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:V},V))}),d.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[d.jsx("span",{className:"capitalize",children:$.sourceType}),$.hasEmbedding&&d.jsx("span",{title:"Has embeddings",children:"🧠"})]})]})]})},$.id)})}),d.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900",children:d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:"💡 Tip: Click a snippet to toggle selection. Selected snippets will be included as context when you send your message."})})]})},Ume=({text:e,variant:t="icon",size:r="md",onStart:n,onEnd:a,shouldSummarize:i=!1,className:s=""})=>{const{state:l,speak:u,stop:h}=Z1(),[p,f]=_.useState(!1),y=l.isPlaying||p;console.log("ReadButton render - isReading:",y,"state.isPlaying:",l.isPlaying,"localIsReading:",p),_.useEffect(()=>{f(l.isPlaying)},[l.isPlaying]),_.useEffect(()=>{p&&!l.isPlaying&&(console.log("ReadButton: Syncing local state with global state"),f(!1))},[p,l.isPlaying]);const b=_.useCallback(async()=>{if(y)console.log("ReadButton: Stop clicked"),f(!1),h(),a?.();else{console.log("ReadButton: Start clicked"),f(!0),n?.();try{await u(e,{shouldSummarize:i,onStart:()=>{console.log("TTS started"),f(!0)},onEnd:()=>{console.log("TTS ended"),f(!1),a?.()},onError:C=>{console.error("TTS error in callback:",C),f(!1)}})}catch(C){console.error("TTS error:",C),f(!1),a?.()}}},[y,e,i,u,h,n,a]);if(!l.currentProvider)return null;const x={sm:{icon:"w-4 h-4",button:"px-2 py-1 text-xs",fab:"w-10 h-10"},md:{icon:"w-5 h-5",button:"px-3 py-1.5 text-sm",fab:"w-12 h-12"},lg:{icon:"w-6 h-6",button:"px-4 py-2 text-base",fab:"w-16 h-16"}},v=x[r].icon,T=()=>d.jsx("svg",{className:v,fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),k=()=>d.jsx("svg",{className:v,fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})});return t==="icon"?d.jsx("button",{onClick:b,className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${s}`,title:y?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:l.isPlaying&&!y,children:y?d.jsx(k,{}):d.jsx(T,{})}):t==="button"?d.jsx("button",{onClick:b,className:`${x[r].button} rounded-lg flex items-center gap-2 transition-colors ${y?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} ${s}`,title:y?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:l.isPlaying&&!y,children:y?d.jsxs(d.Fragment,{children:[d.jsx(k,{}),"Stop"]}):d.jsxs(d.Fragment,{children:[d.jsx(T,{}),"Read"]})}):t==="fab"?d.jsx("button",{onClick:b,className:`${x[r].fab} fixed bottom-20 right-6 rounded-full shadow-lg flex items-center justify-center z-40 transition-colors ${y?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white ${s}`,title:y?"Stop reading":"Read aloud",disabled:l.isPlaying&&!y,children:y?d.jsx(k,{}):d.jsx(T,{})}):null},$me=()=>{const{state:e,stop:t}=Z1();return e.isPlaying?d.jsxs("button",{onClick:t,className:"fixed top-4 right-20 z-[60] px-4 py-2 bg-red-600 text-white rounded-lg shadow-lg hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Reading"]}):null},ZN=({rawResponse:e,extractionMetadata:t})=>{const[r,n]=_.useState(null);let a=null,i=[];try{e&&(a=JSON.parse(e),a.results&&Array.isArray(a.results)&&(i=a.results))}catch(s){console.log("Failed to parse rawResponse:",s)}return console.log("🔍 ToolTransparency received:",{hasRawResponse:!!e,rawResponseLength:e?.length,hasExtraction:!!t,parsedResults:i.length,rawResponsePreview:e?e.substring(0,100)+"...":"none"}),!e&&!t?(console.log("⚠️ ToolTransparency: No data, returning null"),null):(console.log("✅ ToolTransparency: Rendering with",i.length,"results"),d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mt-3 pt-3 border-t-4 border-purple-400 dark:border-purple-600 bg-purple-50 dark:bg-purple-950 p-3 rounded",children:[d.jsxs("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:["🔍 Search Results Transparency",d.jsxs("span",{className:"text-xs font-normal opacity-75",children:["(",i.length," results)"]})]}),d.jsxs("div",{className:"space-y-4",children:[i.map((s,l)=>{const u=s.rawHtml||s.rawContent||"",h=s.content||"";return d.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[d.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:["Result ",l+1,": ",s.title||s.url]}),u&&d.jsx("div",{className:"mb-3",children:d.jsxs("button",{onClick:()=>n({content:u,title:`Raw Content: ${s.title||s.url}`}),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded flex items-center gap-2",children:["📄 View Full Raw Scraped Content",d.jsxs("span",{className:"opacity-75",children:["(",u.length.toLocaleString()," chars)"]})]})}),h&&d.jsxs("div",{className:"mb-3",children:[d.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1 flex items-center gap-2",children:["🤖 Content Sent to LLM",d.jsxs("span",{className:"opacity-75",children:["(",h.length.toLocaleString()," chars)"]})]}),d.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-300 dark:border-green-700 rounded p-3 max-h-96 overflow-y-auto",children:d.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:d.jsx(Vm,{children:h})})})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-400 mb-1",children:"📊 Parsed Page Structure & Metadata"}),d.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:d.jsx(vd,{data:{url:s.url,title:s.title,snippet:s.snippet,images:s.page_content?.images||s.images||[],youtube:s.youtube||[],media:s.media||[],links:s.links||[],page_content:s.page_content,summary:s.page_content?.summary,structure:s.page_content?.structure,metadata:{contentLength:h.length,rawContentLength:u.length,hasImages:!!(s.page_content?.images?.length||s.images?.length),hasYouTube:!!s.youtube?.length,hasMedia:!!s.media?.length,hasLinks:!!s.links?.length}}})})]})]},l)}),t&&d.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[d.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"📊 Overall Extraction Metadata"}),d.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:d.jsx(vd,{data:t})})]})]})]}),r&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700",children:[d.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:r.title}),d.jsx("button",{onClick:()=>n(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm",children:"✕ Close"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 font-mono",children:r.content})}),d.jsxs("div",{className:"p-4 border-t border-gray-300 dark:border-gray-700 flex gap-2",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.content),alert("Copied to clipboard!")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:"📋 Copy to Clipboard"}),d.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[r.content.length.toLocaleString()," characters"]})]})]})})]}))},e3=({content:e,chartCode:t})=>{const[r,n]=dr.useState(!1),[a,i]=dr.useState(!1);try{const s=typeof e=="string"?JSON.parse(e):e,u=t||(f=>{if(!f)return null;const y=f.match(/```mermaid\s*([\s\S]*?)```/);if(y&&y[1]){const b=y[1].trim();return b.includes("[Your Mermaid diagram code here]")||b.includes("Your Mermaid diagram code here")?null:b}return null})(s.instructions||""),h=()=>{s.instructions&&navigator.clipboard.writeText(s.instructions).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},p=()=>{u&&navigator.clipboard.writeText(u).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)})};return d.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-950/30 dark:to-indigo-950/30 rounded-lg border border-purple-200 dark:border-purple-700 overflow-hidden",children:d.jsx("table",{className:"w-full text-sm",children:d.jsxs("tbody",{children:[d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[d.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 w-32 bg-purple-100/50 dark:bg-purple-900/30",children:"📊 Chart Type"}),d.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:d.jsx("span",{className:"inline-flex items-center px-2.5 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded-full text-xs font-medium border border-purple-300 dark:border-purple-600",children:s.chart_type||"N/A"})})]}),d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[d.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30",children:"📝 Description"}),d.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:s.description||"N/A"})]}),u&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[d.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:"� Chart Code"}),d.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[d.jsx("button",{onClick:p,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy Mermaid code to clipboard",children:a?d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})}),d.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-gray-900 dark:bg-gray-950 text-green-400 dark:text-green-300 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:u})]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:"�📋 Full Instructions"}),d.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[d.jsx("button",{onClick:h,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy full instructions to clipboard",children:r?d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy All"]})}),d.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:s.instructions||"No instructions available"})]})]})]})})})}catch(s){return console.error("Error parsing generate_chart result:",s),d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:typeof e=="string"?e:JSON.stringify(e,null,2)})}},qme=({videos:e,onOpenPlayer:t})=>{const{playTrack:r,addTracksToStart:n}=Dc(),a=i=>{n([{videoId:i.videoId,title:i.title,url:i.url,thumbnail:i.thumbnail,channel:i.channel,duration:i.duration}]),setTimeout(()=>{r(0),t&&t()},0)};return e.length===0?null:d.jsxs("div",{className:"youtube-video-results my-4 space-y-3",children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:["🎬 YouTube Videos (",e.length,")"]}),e.map((i,s)=>d.jsxs("div",{onClick:()=>a(i),className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors cursor-pointer",children:[i.thumbnail&&d.jsxs("div",{className:"flex-shrink-0 relative",children:[d.jsx("img",{src:i.thumbnail,alt:i.title,className:"w-32 h-20 object-cover rounded"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"bg-black bg-opacity-60 rounded-full p-2",children:d.jsx("span",{className:"text-white text-2xl",children:"▶️"})})})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:i.title}),i.channel&&d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:i.channel}),i.description&&d.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description}),i.duration&&d.jsxs("span",{className:"inline-block text-xs text-gray-500 dark:text-gray-500 mt-1",children:["⏱ ",i.duration]})]}),d.jsx("div",{className:"flex-shrink-0 flex items-center",children:d.jsxs("button",{onClick:l=>{l.stopPropagation(),a(i)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Play video",children:[d.jsx("span",{className:"text-lg",children:"▶️"}),d.jsx("span",{className:"text-sm font-medium",children:"Play"})]})})]},i.videoId||s)),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"💡 All videos have been added to your playlist"})]})},Hme=({results:e})=>{const[t,r]=_.useState(new Set),[n,a]=_.useState(new Set),i=l=>{r(u=>{const h=new Set(u);return h.has(l)?h.delete(l):h.add(l),h})},s=l=>{a(u=>{const h=new Set(u);return h.has(l)?h.delete(l):h.add(l),h})};return!e||e.length===0?null:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200",children:["🔍 Search Results (",e.length,")"]}),e.map((l,u)=>{const h=t.has(u),p=n.has(u),f={url:l.url,title:l.title,description:l.description,score:l.score,duckduckgoScore:l.duckduckgoScore,state:l.state,contentLength:l.contentLength,fetchTimeMs:l.fetchTimeMs,originalLength:l.originalLength,intelligentlyExtracted:l.intelligentlyExtracted,truncated:l.truncated,images_count:l.images?.length||0,youtube_count:l.youtube?.length||0,media_count:l.media?.length||0,links_count:l.links?.length||0,contentError:l.contentError};return d.jsxs("div",{className:"border border-purple-200 dark:border-purple-700 rounded-lg p-3 bg-purple-50/30 dark:bg-purple-900/10",children:[d.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[d.jsxs("span",{className:"flex-shrink-0 text-purple-600 dark:text-purple-400 font-bold text-sm",children:["#",u+1]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 text-sm mb-1",children:l.title||`Result ${u+1}`}),l.url&&d.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block",children:l.url})]})]}),(l.description||l.snippet)&&d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2 italic",children:l.description||l.snippet}),l.contentError&&d.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2 mb-2",children:d.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:["⚠️ ",l.contentError]})}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[l.contentLength!==void 0&&d.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded",children:[(l.contentLength/1024).toFixed(1)," KB"]}),l.fetchTimeMs!==void 0&&d.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded",children:[l.fetchTimeMs,"ms"]}),l.images&&l.images.length>0&&d.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded",children:["🖼️ ",l.images.length]}),l.links&&l.links.length>0&&d.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 rounded",children:["🔗 ",l.links.length]}),l.truncated&&d.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded",children:"✂️ Truncated"})]}),d.jsxs("div",{className:"flex gap-2",children:[l.content&&d.jsxs("button",{onClick:()=>i(u),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors font-medium",children:[d.jsx("span",{children:h?"▼":"▶"}),d.jsx("span",{children:"Content Sent to LLM"}),l.originalLength&&d.jsxs("span",{className:"opacity-75",children:["(",(l.originalLength/1024).toFixed(1)," KB)"]})]}),d.jsxs("button",{onClick:()=>s(u),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors font-medium",children:[d.jsx("span",{children:p?"▼":"▶"}),d.jsx("span",{children:"Metadata JSON"})]})]}),h&&l.content&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-800 dark:text-purple-200 mb-2",children:["📄 Content Sent to LLM:",l.intelligentlyExtracted&&d.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:"✨ Intelligently Extracted"})]}),d.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-700 p-3 max-h-96 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 leading-relaxed font-mono",children:l.content})})]}),p&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[d.jsx("div",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"🔍 Scrape Metadata:"}),d.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-96 overflow-y-auto",children:d.jsx(Zp,{data:f})})]})]},u)})]})},Gme=({isOpen:e,onClose:t,onExampleClick:r,location:n,locationLoading:a,requestLocation:i,clearLocation:s})=>{if(!e)return null;const l=u=>{r(u),t()};return dr.useEffect(()=>{const u=h=>{h.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e,t]),d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:t,children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",onClick:u=>u.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"📝 Example Prompts"}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"overflow-y-auto p-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🔍 Web Search & Research"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("What are the latest developments in artificial intelligence this week?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Latest AI developments"}),d.jsx("button",{onClick:()=>l("Find current news about climate change policy updates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Climate change policy news"}),d.jsx("button",{onClick:()=>l("What is the current stock price of Tesla and recent news about the company?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Stock price lookup with news"}),d.jsx("button",{onClick:()=>l("Search for recent scientific breakthroughs in quantum computing"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scientific research updates"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🎬 YouTube Search & Transcripts"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Find YouTube videos about TypeScript best practices"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search YouTube videos"}),d.jsx("button",{onClick:()=>l("Get transcript with timestamps from https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Get YouTube transcript (with timestamps)"}),d.jsx("button",{onClick:()=>l("Find the top 5 Python tutorial videos and summarize their content"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search + batch summarize videos"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ 3 YouTube tools available"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🎙️ Audio/Video Transcription (Whisper AI)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Transcribe this: http://localhost:3000/samples/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"🏠 Local Dev: AI & ML discussion (~4min)"}),d.jsx("button",{onClick:()=>l("Transcribe this: https://llmproxy-media-samples.s3.amazonaws.com/audio/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe: AI & ML discussion (~4min)"}),d.jsx("button",{onClick:()=>l("Transcribe this YouTube video: https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe YouTube video"}),d.jsx("button",{onClick:()=>l("Transcribe this audio file: https://llmproxy-media-samples.s3.amazonaws.com/audio/hello-test.wav and summarize it"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe + auto-summarize"}),d.jsxs("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:["ℹ️ OpenAI Whisper with progress tracking",d.jsx("br",{}),"⚠️ Local dev example only works with localhost backend"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🧮 Math & Calculations (JavaScript Sandbox)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Calculate compound interest on $10,000 at 7% annual rate for 15 years"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compound interest calculator"}),d.jsx("button",{onClick:()=>l("Generate a multiplication table for numbers 1-12"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Multiplication table"}),d.jsx("button",{onClick:()=>l("Calculate the Fibonacci sequence up to the 20th number"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Fibonacci sequence"}),d.jsx("button",{onClick:()=>l("Convert 100 USD to EUR, GBP, and JPY at current exchange rates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Currency conversion"}),d.jsx("button",{onClick:()=>l("Calculate my BMI if I weigh 70kg and am 175cm tall"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"BMI calculator"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Secure sandbox execution"})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"📊 Charts & Diagrams (Mermaid.js)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Create a flowchart showing the software development lifecycle from planning to deployment"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Flowchart: Dev lifecycle"}),d.jsx("button",{onClick:()=>l("Show a sequence diagram for user authentication with OAuth 2.0"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Sequence: OAuth flow"}),d.jsx("button",{onClick:()=>l("Generate a Gantt chart for a 3-month web app project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Gantt: Project timeline"}),d.jsx("button",{onClick:()=>l("Create a class diagram for an e-commerce system with User, Order, and Product"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Class diagram: E-commerce"}),d.jsx("button",{onClick:()=>l("Show a state diagram for an order processing system"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"State diagram: Order processing"}),d.jsx("button",{onClick:()=>l("Create an ER diagram for a blog database with Users, Posts, Comments"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"ER diagram: Blog schema"}),d.jsx("button",{onClick:()=>l("Show a pie chart of renewable energy distribution: Solar 30%, Wind 35%, Hydro 25%, Geo 10%"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Pie chart: Energy sources"}),d.jsx("button",{onClick:()=>l("Create a mindmap for planning a mobile app development project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Mindmap: App planning"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ 9 chart types with auto-fix"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🌐 Web Scraping & Content Extraction"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Scrape and summarize https://news.ycombinator.com"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: Hacker News"}),d.jsx("button",{onClick:()=>l("Extract key points from https://en.wikipedia.org/wiki/Artificial_intelligence"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Extract: Wikipedia article"}),d.jsx("button",{onClick:()=>l("Get the full documentation from https://react.dev/learn"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: React docs"}),d.jsx("button",{onClick:()=>l("Analyze this GitHub repo: https://github.com/microsoft/TypeScript"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: GitHub repository"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Universal scraper"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🤖 Browser Automation (Selenium)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Scrape https://www.linkedin.com/login and tell me what you see - this requires login"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:"🔐 Login Required: LinkedIn"}),d.jsx("button",{onClick:()=>l("Access https://twitter.com/home and get the latest tweets - requires authentication"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:"🔐 Login Required: Twitter/X"}),d.jsx("button",{onClick:()=>l("Get content from https://www.instagram.com/instagram/ - login needed to view posts"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:"🔐 Login Required: Instagram"}),d.jsx("button",{onClick:()=>l("Scrape https://www.google.com/recaptcha/api2/demo and complete the captcha challenge"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:"🧩 CAPTCHA: Google reCAPTCHA v2"}),d.jsx("button",{onClick:()=>l("Access https://2captcha.com/demo/recaptcha-v2 and solve the captcha"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:"🧩 CAPTCHA: reCAPTCHA Demo Site"}),d.jsx("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-400 italic",children:"⚠️ Opens browser for manual login/CAPTCHA solving"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Tier 3/4: Selenium with interactive mode (local only)"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400",children:"📍 Location-Based Services"}),d.jsx("button",{onClick:async()=>{n?s():await i()},className:`px-2 py-1 text-xs rounded transition-colors ${n?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:n?"Location enabled - Click to disable":"Location disabled - Click to enable",children:a?"⏳":n?"✓ Enabled":"✗ Disabled"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Find the top 5 restaurants near my current location"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearby restaurants"}),d.jsx("button",{onClick:()=>l("Search for coffee shops within 2 miles that are open now"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find open coffee shops"}),d.jsx("button",{onClick:()=>l("What is the weather forecast for my location for the next 3 days?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Local weather forecast"}),d.jsx("button",{onClick:()=>l("Find the nearest hospital or emergency room"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearest hospital"}),d.jsx("button",{onClick:()=>l("What tourist attractions are in my area?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find local attractions"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Privacy-first location"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"🎨 AI Image Generation"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Generate an image of a serene mountain landscape at sunset with golden light"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Landscape: Mountain sunset"}),d.jsx("button",{onClick:()=>l("Create a photorealistic portrait of a professional business woman smiling"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Portrait: Business professional"}),d.jsx("button",{onClick:()=>l("Generate a cartoon-style illustration of a friendly robot helping humans"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Cartoon: Friendly robot"}),d.jsx("button",{onClick:()=>l("Create a fast sketch of a coffee cup on a desk"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Quick sketch: Coffee cup"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Smart model selection"})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"📚 Internal Knowledge Base (RAG)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("How do I configure OpenAI embeddings in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: OpenAI config"}),d.jsx("button",{onClick:()=>l("What is the RAG implementation in this codebase?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: RAG system"}),d.jsx("button",{onClick:()=>l("How do I deploy Lambda functions in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Lambda deployment"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Semantic search with RAG"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"📈 Data Analysis & Comparison"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Compare population growth rates of the top 5 most populous countries"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Population growth"}),d.jsx("button",{onClick:()=>l("What are the key differences between Python and JavaScript?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Python vs JavaScript"}),d.jsx("button",{onClick:()=>l("Analyze pros and cons of renewable energy sources"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Analyze: Renewable energy"}),d.jsx("button",{onClick:()=>l("Compare the performance benchmarks of React, Vue, and Angular"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: JS frameworks"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"✅ Multi-Step Workflows (Backend Todos)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Create a complete React blog application with authentication, post creation, and comments. Break this down into steps and implement each one."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Build: React blog app"}),d.jsx("button",{onClick:()=>l("Help me set up a full CI/CD pipeline for my Node.js app. Plan out all the steps needed and execute them in order."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Setup: CI/CD pipeline"}),d.jsx("button",{onClick:()=>l("Migrate my Express server from JavaScript to TypeScript. Create a step-by-step plan and execute each phase."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Migrate: JS to TypeScript"}),d.jsx("button",{onClick:()=>l("Set up a complete AWS deployment for my application including VPC, RDS database, Lambda functions, and API Gateway. Plan and implement this step by step."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Deploy: AWS infrastructure"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Auto-progresses through steps (max 5 iterations)"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:"📝 Knowledge Snippets (Google Sheets)"}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l('Save this code example to my snippets with tags "javascript" and "async": async function fetchData() { const response = await fetch(url); return response.json(); }'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Code snippet"}),d.jsx("button",{onClick:()=>l("Remember this information: TypeScript 5.0 introduced const type parameters for generic functions"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Quick note"}),d.jsx("button",{onClick:()=>l('Search my snippets for "react hooks"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Saved snippets"}),d.jsx("button",{onClick:()=>l('Find all my snippets tagged with "python"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: By tag"}),d.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:"ℹ️ Stored in your personal Google Sheet"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-amber-300 dark:border-amber-600",children:[d.jsx("h3",{className:"text-sm font-bold text-amber-600 dark:text-amber-400",children:"🤖 Recursive Agent (ask_llm)"}),d.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-amber-200 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300 rounded font-semibold",children:"⚠️ HIGH TOKENS"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Search for recent quantum computing research papers, scrape the top 3, analyze their methodologies, and create a comprehensive comparison table"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Multi-step research + analysis"}),d.jsx("button",{onClick:()=>l("Find Python async/await tutorials, analyze the best one, extract code examples, and generate a beginner-friendly explanation with working examples"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Tutorial extraction + synthesis"}),d.jsx("button",{onClick:()=>l("Search for the latest TypeScript features, create a detailed summary, generate code examples, and save the best practices to my snippets"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Research + documentation + save"}),d.jsxs("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-500 italic bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:["⚠️ Spawns sub-agent with full tool access",d.jsx("br",{}),"⚠️ Uses 5-10x more tokens",d.jsx("br",{}),"⚠️ Enable in Settings first"]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-red-400 dark:border-red-600",children:[d.jsx("h3",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:"🧠 Advanced Reasoning (o1/DeepSeek-R1)"}),d.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-red-300 dark:bg-red-900/50 text-red-900 dark:text-red-300 rounded font-bold animate-pulse",children:"⚠️⚠️ EXTREME"})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("button",{onClick:()=>l("Prove that the square root of 2 is irrational using a step-by-step logical proof with explicit reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Mathematical proof (irrationality)"}),d.jsx("button",{onClick:()=>l("Analyze the time complexity of quicksort and prove why it is O(n log n) on average with detailed step-by-step reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Algorithm complexity proof"}),d.jsx("button",{onClick:()=>l("Design a normalized database schema for an e-commerce platform with explicit reasoning about normalization tradeoffs, performance implications, and scalability considerations"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Architecture design + reasoning"}),d.jsx("button",{onClick:()=>l("Debug this code and explain the logical steps to identify the bug: function fibonacci(n) { if (n <= 1) return n; return fibonacci(n-1) + fibonacci(n-3); }"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Logical debugging analysis"}),d.jsxs("p",{className:"px-3 py-2 text-xs text-red-700 dark:text-red-500 italic bg-red-50 dark:bg-red-900/20 rounded border border-red-300 dark:border-red-800 font-semibold",children:["⚠️⚠️ Uses OpenAI o1 or DeepSeek-R1",d.jsx("br",{}),"⚠️⚠️ Maximum reasoning depth",d.jsx("br",{}),"⚠️⚠️ Uses 10-50x MORE tokens",d.jsx("br",{}),"⚠️⚠️ Enable in Settings first"]})]})]})]})]})})]})})},Wme=({systemPrompt:e,setSystemPrompt:t})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(!1),[s,l]=_.useState("");return e?d.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:d.jsx("div",{className:"flex items-start gap-2 max-w-screen-2xl mx-auto",children:a?d.jsxs(d.Fragment,{children:[d.jsx("textarea",{value:s,onChange:u=>l(u.target.value),className:"flex-1 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded p-2 min-h-[80px] resize-y focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter system prompt..."}),d.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[d.jsx("button",{onClick:()=>{t(s),i(!1)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Save system prompt",children:"Save"}),d.jsx("button",{onClick:()=>{l(e),i(!1)},className:"px-3 py-1.5 bg-gray-400 hover:bg-gray-500 text-white text-xs rounded transition-colors",title:"Cancel editing",children:"Cancel"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded transition-colors",onClick:()=>n(!r),title:r?"Click to collapse":"Click to expand",children:r?e:e.length>200?e.substring(0,200)+"...":e}),d.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[d.jsx("button",{onClick:()=>{l(e),i(!0),n(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Edit system prompt",children:"Edit"}),d.jsx("button",{onClick:()=>{confirm("Clear the system prompt?")&&(t(""),i(!1))},className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors",title:"Clear system prompt",children:"Clear"})]})]})})}):null},Vme=({systemPrompt:e,selectedSnippetIds:t,showSnippetsPanel:r,messageCount:n,onNewChat:a,onShowLoadDialog:i,onToggleSnippetsPanel:s,onShowExamplesModal:l,onShowShareDialog:u})=>{const{t:h}=wd(),p=Pl();return d.jsx("div",{className:"flex flex-wrap items-center gap-2 md:px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:d.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[d.jsxs("button",{onClick:a,className:"bg-green-600 hover:bg-green-700 text-white p-2 md:px-3 md:py-1.5 rounded font-medium text-sm transition-colors flex items-center gap-1.5",title:h("chat.newChat"),"aria-label":h("chat.newChat"),children:[d.jsx("span",{children:"➕"}),d.jsx("span",{className:"hidden md:inline",children:h("chat.newChat")})]}),d.jsxs("button",{onClick:i,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:h("chat.chatHistory"),"aria-label":h("chat.chatHistory"),children:[d.jsx("span",{children:"🕒"}),d.jsx("span",{className:"hidden md:inline",children:h("chat.history")})]}),d.jsxs("button",{onClick:()=>p("/planning"),className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:e?"Edit system prompt and planning":"Create a plan","aria-label":h(e?"chat.editPlan":"chat.makeAPlan"),children:[d.jsx("span",{children:e?"✏️":"📋"}),d.jsx("span",{className:"hidden md:inline",children:h(e?"chat.editPlan":"chat.makeAPlan")})]}),d.jsxs("button",{onClick:l,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:h("chat.examples"),"aria-label":h("chat.examples"),children:[d.jsx("span",{children:"📝"}),d.jsx("span",{className:"hidden md:inline",children:h("chat.examples")})]}),d.jsxs("button",{onClick:u,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:"Share this conversation","aria-label":"Share conversation",disabled:n===0,children:[d.jsx("span",{children:"🔗"}),d.jsx("span",{className:"hidden md:inline",children:"Share"})]}),d.jsxs("button",{onClick:s,className:`text-sm p-2 md:px-3 md:py-1.5 rounded font-medium transition-colors flex items-center gap-1.5 ${r?"bg-blue-600 hover:bg-blue-700 text-white":"btn-secondary"}`,title:h("chat.attachContextTooltip"),"aria-label":h("chat.attachContext"),children:[d.jsx("span",{children:"📎"}),d.jsx("span",{className:"hidden md:inline",children:h("chat.attachContext")}),t.size>0&&d.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-white text-blue-600 rounded-full font-bold",children:t.size})]})]})})},Yme=({attachedFiles:e,onRemoveAttachment:t})=>e.length===0?null:d.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.map((r,n)=>d.jsxs("div",{className:"relative group bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 p-2 flex items-center gap-2",children:[r.preview?d.jsx("img",{src:r.preview,alt:r.name,className:"w-12 h-12 object-cover rounded"}):d.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded",children:d.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate max-w-[150px]",children:r.name}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(r.size/1024).toFixed(1)," KB"]})]}),d.jsx("button",{onClick:()=>t(n),className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",title:"Remove file",children:"×"})]},n))}),Qme=({isDragging:e})=>e?d.jsx("div",{className:"absolute inset-0 z-50 bg-blue-500/20 dark:bg-blue-400/20 backdrop-blur-sm flex items-center justify-center border-4 border-dashed border-blue-500 dark:border-blue-400",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-2xl",children:d.jsxs("div",{className:"text-center",children:[d.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),d.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Drop files here"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Images (JPEG, PNG, GIF, WebP) and PDFs supported"}),d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Max: 5MB for images, 10MB for PDFs"})]})})}):null;var Kme=Object.defineProperty,O0=Object.getOwnPropertySymbols,m5=Object.prototype.hasOwnProperty,y5=Object.prototype.propertyIsEnumerable,t3=(e,t,r)=>t in e?Kme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$1=(e,t)=>{for(var r in t||(t={}))m5.call(t,r)&&t3(e,r,t[r]);if(O0)for(var r of O0(t))y5.call(t,r)&&t3(e,r,t[r]);return e},q1=(e,t)=>{var r={};for(var n in e)m5.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&O0)for(var n of O0(e))t.indexOf(n)<0&&y5.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Rc;(e=>{const t=class br{constructor(u,h,p,f){if(this.version=u,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],u<br.MIN_VERSION||u>br.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let y=[];for(let x=0;x<this.size;x++)y.push(!1);for(let x=0;x<this.size;x++)this.modules.push(y.slice()),this.isFunction.push(y.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(p);if(this.drawCodewords(b),f==-1){let x=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const T=this.getPenaltyScore();T<x&&(f=v,x=T),this.applyMask(v)}}a(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(u,h){const p=e.QrSegment.makeSegments(u);return br.encodeSegments(p,h)}static encodeBinary(u,h){const p=e.QrSegment.makeBytes(u);return br.encodeSegments([p],h)}static encodeSegments(u,h,p=1,f=40,y=-1,b=!0){if(!(br.MIN_VERSION<=p&&p<=f&&f<=br.MAX_VERSION)||y<-1||y>7)throw new RangeError("Invalid value");let x,v;for(x=p;;x++){const A=br.getNumDataCodewords(x,h)*8,P=s.getTotalBits(u,x);if(P<=A){v=P;break}if(x>=f)throw new RangeError("Data too long")}for(const A of[br.Ecc.MEDIUM,br.Ecc.QUARTILE,br.Ecc.HIGH])b&&v<=br.getNumDataCodewords(x,A)*8&&(h=A);let T=[];for(const A of u){r(A.mode.modeBits,4,T),r(A.numChars,A.mode.numCharCountBits(x),T);for(const P of A.getData())T.push(P)}a(T.length==v);const k=br.getNumDataCodewords(x,h)*8;a(T.length<=k),r(0,Math.min(4,k-T.length),T),r(0,(8-T.length%8)%8,T),a(T.length%8==0);for(let A=236;T.length<k;A^=253)r(A,8,T);let C=[];for(;C.length*8<T.length;)C.push(0);return T.forEach((A,P)=>C[P>>>3]|=A<<7-(P&7)),new br(x,h,C,y)}getModule(u,h){return 0<=u&&u<this.size&&0<=h&&h<this.size&&this.modules[h][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),h=u.length;for(let p=0;p<h;p++)for(let f=0;f<h;f++)p==0&&f==0||p==0&&f==h-1||p==h-1&&f==0||this.drawAlignmentPattern(u[p],u[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const h=this.errorCorrectionLevel.formatBits<<3|u;let p=h;for(let y=0;y<10;y++)p=p<<1^(p>>>9)*1335;const f=(h<<10|p)^21522;a(f>>>15==0);for(let y=0;y<=5;y++)this.setFunctionModule(8,y,n(f,y));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let y=9;y<15;y++)this.setFunctionModule(14-y,8,n(f,y));for(let y=0;y<8;y++)this.setFunctionModule(this.size-1-y,8,n(f,y));for(let y=8;y<15;y++)this.setFunctionModule(8,this.size-15+y,n(f,y));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let p=0;p<12;p++)u=u<<1^(u>>>11)*7973;const h=this.version<<12|u;a(h>>>18==0);for(let p=0;p<18;p++){const f=n(h,p),y=this.size-11+p%3,b=Math.floor(p/3);this.setFunctionModule(y,b,f),this.setFunctionModule(b,y,f)}}drawFinderPattern(u,h){for(let p=-4;p<=4;p++)for(let f=-4;f<=4;f++){const y=Math.max(Math.abs(f),Math.abs(p)),b=u+f,x=h+p;0<=b&&b<this.size&&0<=x&&x<this.size&&this.setFunctionModule(b,x,y!=2&&y!=4)}}drawAlignmentPattern(u,h){for(let p=-2;p<=2;p++)for(let f=-2;f<=2;f++)this.setFunctionModule(u+f,h+p,Math.max(Math.abs(f),Math.abs(p))!=1)}setFunctionModule(u,h,p){this.modules[h][u]=p,this.isFunction[h][u]=!0}addEccAndInterleave(u){const h=this.version,p=this.errorCorrectionLevel;if(u.length!=br.getNumDataCodewords(h,p))throw new RangeError("Invalid argument");const f=br.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][h],y=br.ECC_CODEWORDS_PER_BLOCK[p.ordinal][h],b=Math.floor(br.getNumRawDataModules(h)/8),x=f-b%f,v=Math.floor(b/f);let T=[];const k=br.reedSolomonComputeDivisor(y);for(let A=0,P=0;A<f;A++){let M=u.slice(P,P+v-y+(A<x?0:1));P+=M.length;const L=br.reedSolomonComputeRemainder(M,k);A<x&&M.push(0),T.push(M.concat(L))}let C=[];for(let A=0;A<T[0].length;A++)T.forEach((P,M)=>{(A!=v-y||M>=x)&&C.push(P[A])});return a(C.length==b),C}drawCodewords(u){if(u.length!=Math.floor(br.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let f=0;f<this.size;f++)for(let y=0;y<2;y++){const b=p-y,v=(p+1&2)==0?this.size-1-f:f;!this.isFunction[v][b]&&h<u.length*8&&(this.modules[v][b]=n(u[h>>>3],7-(h&7)),h++)}}a(h==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let p=0;p<this.size;p++){let f;switch(u){case 0:f=(p+h)%2==0;break;case 1:f=h%2==0;break;case 2:f=p%3==0;break;case 3:f=(p+h)%3==0;break;case 4:f=(Math.floor(p/3)+Math.floor(h/2))%2==0;break;case 5:f=p*h%2+p*h%3==0;break;case 6:f=(p*h%2+p*h%3)%2==0;break;case 7:f=((p+h)%2+p*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][p]&&f&&(this.modules[h][p]=!this.modules[h][p])}}getPenaltyScore(){let u=0;for(let y=0;y<this.size;y++){let b=!1,x=0,v=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[y][T]==b?(x++,x==5?u+=br.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,v),b||(u+=this.finderPenaltyCountPatterns(v)*br.PENALTY_N3),b=this.modules[y][T],x=1);u+=this.finderPenaltyTerminateAndCount(b,x,v)*br.PENALTY_N3}for(let y=0;y<this.size;y++){let b=!1,x=0,v=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][y]==b?(x++,x==5?u+=br.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,v),b||(u+=this.finderPenaltyCountPatterns(v)*br.PENALTY_N3),b=this.modules[T][y],x=1);u+=this.finderPenaltyTerminateAndCount(b,x,v)*br.PENALTY_N3}for(let y=0;y<this.size-1;y++)for(let b=0;b<this.size-1;b++){const x=this.modules[y][b];x==this.modules[y][b+1]&&x==this.modules[y+1][b]&&x==this.modules[y+1][b+1]&&(u+=br.PENALTY_N2)}let h=0;for(const y of this.modules)h=y.reduce((b,x)=>b+(x?1:0),h);const p=this.size*this.size,f=Math.ceil(Math.abs(h*20-p*10)/p)-1;return a(0<=f&&f<=9),u+=f*br.PENALTY_N4,a(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let p=[6];for(let f=this.size-7;p.length<u;f-=h)p.splice(1,0,f);return p}}static getNumRawDataModules(u){if(u<br.MIN_VERSION||u>br.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*u+128)*u+64;if(u>=2){const p=Math.floor(u/7)+2;h-=(25*p-10)*p-55,u>=7&&(h-=36)}return a(208<=h&&h<=29648),h}static getNumDataCodewords(u,h){return Math.floor(br.getNumRawDataModules(u)/8)-br.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u]*br.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let h=[];for(let f=0;f<u-1;f++)h.push(0);h.push(1);let p=1;for(let f=0;f<u;f++){for(let y=0;y<h.length;y++)h[y]=br.reedSolomonMultiply(h[y],p),y+1<h.length&&(h[y]^=h[y+1]);p=br.reedSolomonMultiply(p,2)}return h}static reedSolomonComputeRemainder(u,h){let p=h.map(f=>0);for(const f of u){const y=f^p.shift();p.push(0),h.forEach((b,x)=>p[x]^=br.reedSolomonMultiply(b,y))}return p}static reedSolomonMultiply(u,h){if(u>>>8||h>>>8)throw new RangeError("Byte out of range");let p=0;for(let f=7;f>=0;f--)p=p<<1^(p>>>7)*285,p^=(h>>>f&1)*u;return a(p>>>8==0),p}finderPenaltyCountPatterns(u){const h=u[1];a(h<=this.size*3);const p=h>0&&u[2]==h&&u[3]==h*3&&u[4]==h&&u[5]==h;return(p&&u[0]>=h*4&&u[6]>=h?1:0)+(p&&u[6]>=h*4&&u[0]>=h?1:0)}finderPenaltyTerminateAndCount(u,h,p){return u&&(this.finderPenaltyAddHistory(h,p),h=0),h+=this.size,this.finderPenaltyAddHistory(h,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(u,h){h[0]==0&&(u+=this.size),h.pop(),h.unshift(u)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(l,u,h){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let p=u-1;p>=0;p--)h.push(l>>>p&1)}function n(l,u){return(l>>>u&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class Pn{constructor(u,h,p){if(this.mode=u,this.numChars=h,this.bitData=p,h<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(u){let h=[];for(const p of u)r(p,8,h);return new Pn(Pn.Mode.BYTE,u.length,h)}static makeNumeric(u){if(!Pn.isNumeric(u))throw new RangeError("String contains non-numeric characters");let h=[];for(let p=0;p<u.length;){const f=Math.min(u.length-p,3);r(parseInt(u.substring(p,p+f),10),f*3+1,h),p+=f}return new Pn(Pn.Mode.NUMERIC,u.length,h)}static makeAlphanumeric(u){if(!Pn.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],p;for(p=0;p+2<=u.length;p+=2){let f=Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(p))*45;f+=Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(p+1)),r(f,11,h)}return p<u.length&&r(Pn.ALPHANUMERIC_CHARSET.indexOf(u.charAt(p)),6,h),new Pn(Pn.Mode.ALPHANUMERIC,u.length,h)}static makeSegments(u){return u==""?[]:Pn.isNumeric(u)?[Pn.makeNumeric(u)]:Pn.isAlphanumeric(u)?[Pn.makeAlphanumeric(u)]:[Pn.makeBytes(Pn.toUtf8ByteArray(u))]}static makeEci(u){let h=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,h);else if(u<16384)r(2,2,h),r(u,14,h);else if(u<1e6)r(6,3,h),r(u,21,h);else throw new RangeError("ECI assignment value out of range");return new Pn(Pn.Mode.ECI,0,h)}static isNumeric(u){return Pn.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Pn.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,h){let p=0;for(const f of u){const y=f.mode.numCharCountBits(h);if(f.numChars>=1<<y)return 1/0;p+=4+y+f.bitData.length}return p}static toUtf8ByteArray(u){u=encodeURI(u);let h=[];for(let p=0;p<u.length;p++)u.charAt(p)!="%"?h.push(u.charCodeAt(p)):(h.push(parseInt(u.substring(p+1,p+3),16)),p+=2);return h}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=i;e.QrSegment=i})(Rc||(Rc={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Rc||(Rc={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Rc||(Rc={}));var Yu=Rc;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Xme={L:Yu.QrCode.Ecc.LOW,M:Yu.QrCode.Ecc.MEDIUM,Q:Yu.QrCode.Ecc.QUARTILE,H:Yu.QrCode.Ecc.HIGH},b5=128,x5="L",v5="#FFFFFF",w5="#000000",S5=!1,T5=1,Jme=4,Zme=0,e0e=.1;function k5(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(s,l){if(!s&&i!==null){r.push(`M${i+t} ${a+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===n.length-1){if(!s)return;i===null?r.push(`M${l+t},${a+t} h1v1H${l+t}z`):r.push(`M${i+t},${a+t} h${l+1-i}v1H${i+t}z`);return}s&&i===null&&(i=l)})}),r.join("")}function E5(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function t0e(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*e0e),s=a/t,l=(n.width||i)*s,u=(n.height||i)*s,h=n.x==null?e.length/2-l/2:n.x*s,p=n.y==null?e.length/2-u/2:n.y*s,f=n.opacity==null?1:n.opacity;let y=null;if(n.excavate){let x=Math.floor(h),v=Math.floor(p),T=Math.ceil(l+h-x),k=Math.ceil(u+p-v);y={x,y:v,w:T,h:k}}const b=n.crossOrigin;return{x:h,y:p,h:u,w:l,excavation:y,opacity:f,crossOrigin:b}}function r0e(e,t){return t!=null?Math.max(Math.floor(t),0):e?Jme:Zme}function C5({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:s,boostLevel:l}){let u=dr.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((v,T)=>(v.push(...Yu.QrSegment.makeSegments(T)),v),[]);return Yu.QrCode.encodeSegments(x,Xme[t],r,void 0,void 0,l)},[e,t,r,l]);const{cells:h,margin:p,numCells:f,calculatedImageSettings:y}=dr.useMemo(()=>{let b=u.getModules();const x=r0e(n,a),v=b.length+x*2,T=t0e(b,s,x,i);return{cells:b,margin:x,numCells:v,calculatedImageSettings:T}},[u,s,i,n,a]);return{qrcode:u,margin:p,cells:h,numCells:f,calculatedImageSettings:y}}var n0e=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),a0e=dr.forwardRef(function(t,r){const n=t,{value:a,size:i=b5,level:s=x5,bgColor:l=v5,fgColor:u=w5,includeMargin:h=S5,minVersion:p=T5,boostLevel:f,marginSize:y,imageSettings:b}=n,v=q1(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=v,k=q1(v,["style"]),C=b?.src,A=dr.useRef(null),P=dr.useRef(null),M=dr.useCallback(O=>{A.current=O,typeof r=="function"?r(O):r&&(r.current=O)},[r]),[L,D]=dr.useState(!1),{margin:q,cells:Q,numCells:F,calculatedImageSettings:K}=C5({value:a,level:s,minVersion:p,boostLevel:f,includeMargin:h,marginSize:y,imageSettings:b,size:i});dr.useEffect(()=>{if(A.current!=null){const O=A.current,$=O.getContext("2d");if(!$)return;let I=Q;const G=P.current,V=K!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;V&&K.excavation!=null&&(I=E5(Q,K.excavation));const oe=window.devicePixelRatio||1;O.height=O.width=i*oe;const U=i/F*oe;$.scale(U,U),$.fillStyle=l,$.fillRect(0,0,F,F),$.fillStyle=u,n0e?$.fill(new Path2D(k5(I,q))):Q.forEach(function(z,ie){z.forEach(function(H,ue){H&&$.fillRect(ue+q,ie+q,1,1)})}),K&&($.globalAlpha=K.opacity),V&&$.drawImage(G,K.x+q,K.y+q,K.w,K.h)}}),dr.useEffect(()=>{D(!1)},[C]);const W=$1({height:i,width:i},T);let j=null;return C!=null&&(j=dr.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{D(!0)},ref:P,crossOrigin:K?.crossOrigin})),dr.createElement(dr.Fragment,null,dr.createElement("canvas",$1({style:W,height:i,width:i,ref:M,role:"img"},k)),j)});a0e.displayName="QRCodeCanvas";var _5=dr.forwardRef(function(t,r){const n=t,{value:a,size:i=b5,level:s=x5,bgColor:l=v5,fgColor:u=w5,includeMargin:h=S5,minVersion:p=T5,boostLevel:f,title:y,marginSize:b,imageSettings:x}=n,v=q1(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:k,numCells:C,calculatedImageSettings:A}=C5({value:a,level:s,minVersion:p,boostLevel:f,includeMargin:h,marginSize:b,imageSettings:x,size:i});let P=k,M=null;x!=null&&A!=null&&(A.excavation!=null&&(P=E5(k,A.excavation)),M=dr.createElement("image",{href:x.src,height:A.h,width:A.w,x:A.x+T,y:A.y+T,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const L=k5(P,T);return dr.createElement("svg",$1({height:i,width:i,viewBox:`0 0 ${C} ${C}`,ref:r,role:"img"},v),!!y&&dr.createElement("title",null,y),dr.createElement("path",{fill:l,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),dr.createElement("path",{fill:u,d:L,shapeRendering:"crispEdges"}),M)});_5.displayName="QRCodeSVG";var Yv={exports:{}},r3;function i0e(){return r3||(r3=1,(function(e){var t=(function(){var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(u,h){if(!i[u]){i[u]={};for(var p=0;p<u.length;p++)i[u][u.charAt(p)]=p}return i[u][h]}var l={compressToBase64:function(u){if(u==null)return"";var h=l._compress(u,6,function(p){return n.charAt(p)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(u){return u==null?"":u==""?null:l._decompress(u.length,32,function(h){return s(n,u.charAt(h))})},compressToUTF16:function(u){return u==null?"":l._compress(u,15,function(h){return r(h+32)})+" "},decompressFromUTF16:function(u){return u==null?"":u==""?null:l._decompress(u.length,16384,function(h){return u.charCodeAt(h)-32})},compressToUint8Array:function(u){for(var h=l.compress(u),p=new Uint8Array(h.length*2),f=0,y=h.length;f<y;f++){var b=h.charCodeAt(f);p[f*2]=b>>>8,p[f*2+1]=b%256}return p},decompressFromUint8Array:function(u){if(u==null)return l.decompress(u);for(var h=new Array(u.length/2),p=0,f=h.length;p<f;p++)h[p]=u[p*2]*256+u[p*2+1];var y=[];return h.forEach(function(b){y.push(r(b))}),l.decompress(y.join(""))},compressToEncodedURIComponent:function(u){return u==null?"":l._compress(u,6,function(h){return a.charAt(h)})},decompressFromEncodedURIComponent:function(u){return u==null?"":u==""?null:(u=u.replace(/ /g,"+"),l._decompress(u.length,32,function(h){return s(a,u.charAt(h))}))},compress:function(u){return l._compress(u,16,function(h){return r(h)})},_compress:function(u,h,p){if(u==null)return"";var f,y,b={},x={},v="",T="",k="",C=2,A=3,P=2,M=[],L=0,D=0,q;for(q=0;q<u.length;q+=1)if(v=u.charAt(q),Object.prototype.hasOwnProperty.call(b,v)||(b[v]=A++,x[v]=!0),T=k+v,Object.prototype.hasOwnProperty.call(b,T))k=T;else{if(Object.prototype.hasOwnProperty.call(x,k)){if(k.charCodeAt(0)<256){for(f=0;f<P;f++)L=L<<1,D==h-1?(D=0,M.push(p(L)),L=0):D++;for(y=k.charCodeAt(0),f=0;f<8;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1}else{for(y=1,f=0;f<P;f++)L=L<<1|y,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=0;for(y=k.charCodeAt(0),f=0;f<16;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1}C--,C==0&&(C=Math.pow(2,P),P++),delete x[k]}else for(y=b[k],f=0;f<P;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1;C--,C==0&&(C=Math.pow(2,P),P++),b[T]=A++,k=String(v)}if(k!==""){if(Object.prototype.hasOwnProperty.call(x,k)){if(k.charCodeAt(0)<256){for(f=0;f<P;f++)L=L<<1,D==h-1?(D=0,M.push(p(L)),L=0):D++;for(y=k.charCodeAt(0),f=0;f<8;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1}else{for(y=1,f=0;f<P;f++)L=L<<1|y,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=0;for(y=k.charCodeAt(0),f=0;f<16;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1}C--,C==0&&(C=Math.pow(2,P),P++),delete x[k]}else for(y=b[k],f=0;f<P;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1;C--,C==0&&(C=Math.pow(2,P),P++)}for(y=2,f=0;f<P;f++)L=L<<1|y&1,D==h-1?(D=0,M.push(p(L)),L=0):D++,y=y>>1;for(;;)if(L=L<<1,D==h-1){M.push(p(L));break}else D++;return M.join("")},decompress:function(u){return u==null?"":u==""?null:l._decompress(u.length,32768,function(h){return u.charCodeAt(h)})},_decompress:function(u,h,p){var f=[],y=4,b=4,x=3,v="",T=[],k,C,A,P,M,L,D,q={val:p(0),position:h,index:1};for(k=0;k<3;k+=1)f[k]=k;for(A=0,M=Math.pow(2,2),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;switch(A){case 0:for(A=0,M=Math.pow(2,8),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;D=r(A);break;case 1:for(A=0,M=Math.pow(2,16),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;D=r(A);break;case 2:return""}for(f[3]=D,C=D,T.push(D);;){if(q.index>u)return"";for(A=0,M=Math.pow(2,x),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;switch(D=A){case 0:for(A=0,M=Math.pow(2,8),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;f[b++]=r(A),D=b-1,y--;break;case 1:for(A=0,M=Math.pow(2,16),L=1;L!=M;)P=q.val&q.position,q.position>>=1,q.position==0&&(q.position=h,q.val=p(q.index++)),A|=(P>0?1:0)*L,L<<=1;f[b++]=r(A),D=b-1,y--;break;case 2:return T.join("")}if(y==0&&(y=Math.pow(2,x),x++),f[D])v=f[D];else if(D===b)v=C+C.charAt(0);else return null;T.push(v),f[b++]=C+v.charAt(0),y--,C=v,y==0&&(y=Math.pow(2,x),x++)}}};return l})();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(Yv)),Yv.exports}var s0e=i0e();const A5=Ic(s0e),H1=32e3,o0e=1;function Mm(e){const t=JSON.stringify(e);return A5.compressToEncodedURIComponent(t)}function N5(e){try{const t=A5.decompressFromEncodedURIComponent(e);if(!t)return null;const r=JSON.parse(t);return!r.version||!r.messages||!Array.isArray(r.messages)?(console.error("Invalid share data structure"),null):r}catch(t){return console.error("Failed to decode share data:",t),null}}function l0e(e){const t=e.messages;if(t.length<=2)return Mm(e);const r=t[0],n=t[t.length-1];let i={...e,messages:[r,n],metadata:{...e.metadata,truncated:!0,originalMessageCount:t.length,includedMessageCount:2,truncationNotice:"Conversation truncated to fit URL limits. Showing first and last messages."}},s=Mm(i);for(let l=t.length-2;l>0;l--){const u=[r,...t.slice(l,t.length-1),n],h={...e,messages:u,metadata:{...e.metadata,truncated:!0,originalMessageCount:t.length,includedMessageCount:u.length,truncationNotice:`Conversation truncated to fit URL limits. Showing ${u.length} of ${t.length} messages.`}},p=Mm(h);if(p.length>H1)break;s=p,i=h}return s}function c0e(e,t={}){const r={version:o0e,timestamp:Date.now(),shareType:t.shareType||"conversation",metadata:{title:t.title,truncated:!1,originalMessageCount:e.length,includedMessageCount:e.length},messages:e,plan:t.plan},n=Mm(r);return n.length<=H1?n:(console.warn(`Share data exceeds ${H1} chars (${n.length}), applying smart truncation`),l0e(r))}function u0e(e){return`${window.location.origin+window.location.pathname}?share=${e}`}function d0e(){return new URLSearchParams(window.location.search).has("share")}function h0e(){const t=new URLSearchParams(window.location.search).get("share");return t?N5(t):null}function p0e(){const e=new URL(window.location.href);e.searchParams.delete("share"),window.history.replaceState({},"",e.toString())}const g0e=({messages:e,onClose:t,title:r,plan:n})=>{const[a,i]=_.useState(""),[s,l]=_.useState(!1),[u,h]=_.useState(!1),[p,f]=_.useState({original:0,included:0}),[y,b]=_.useState(!0);_.useEffect(()=>{try{const P=c0e(e,{title:r,plan:n}),M=u0e(P).replace(window.location.origin,"https://ai.syntithenai.com");i(M);const L=N5(P);L?.metadata.truncated&&(h(!0),f({original:L.metadata.originalMessageCount,included:L.metadata.includedMessageCount}))}catch(P){console.error("Failed to generate share URL:",P)}finally{b(!1)}},[e,r,n]);const x=async()=>{try{await navigator.clipboard.writeText(a),l(!0),setTimeout(()=>l(!1),2e3)}catch(P){console.error("Failed to copy to clipboard:",P)}},v=()=>{const P=encodeURIComponent(`Check out this AI conversation: ${r||"Untitled Chat"}`),M=encodeURIComponent(a);window.open(`https://twitter.com/intent/tweet?text=${P}&url=${M}`,"_blank")},T=()=>{const P=encodeURIComponent(a);window.open(`https://www.reddit.com/submit?url=${P}`,"_blank")},k=()=>{const P=encodeURIComponent(`AI Conversation: ${r||"Untitled Chat"}`),M=encodeURIComponent(`Check out this AI conversation:

${a}`);window.location.href=`mailto:?subject=${P}&body=${M}`},C=()=>{const P=encodeURIComponent(a);window.open(`https://www.facebook.com/sharer/sharer.php?u=${P}`,"_blank")},A=()=>{const P=encodeURIComponent(`Check out this AI conversation: ${r||"Untitled Chat"}

${a}`);window.open(`https://bsky.app/intent/compose?text=${P}`,"_blank")};return y?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),d.jsx("span",{className:"ml-3",children:"Generating share link..."})]})})}):d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t,children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Share Conversation"}),d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&d.jsx("div",{className:"m-6 p-4 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600",children:d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),d.jsxs("div",{className:"ml-3",children:[d.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Conversation Truncated"}),d.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:d.jsxs("p",{children:["Due to URL length limits, this share link includes ",p.included," of ",p.original," messages. The first and last messages are always preserved."]})})]})]})}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Shareable URL"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:a,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",onClick:P=>P.target.select()}),d.jsx("button",{onClick:x,className:`px-4 py-2 rounded-md font-medium transition-colors ${s?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:s?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):"Copy"})]}),d.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["URL length: ",a.length.toLocaleString()," characters"]})]}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Scan with Mobile Device"}),d.jsx("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:d.jsx(_5,{value:a,size:200,level:"M"})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Share On"}),d.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:[d.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#1DA1F2] text-white rounded-md hover:bg-[#1a8cd8] transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"X"]}),d.jsxs("button",{onClick:T,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#FF4500] text-white rounded-md hover:bg-[#e03d00] transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})}),"Reddit"]}),d.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#1877F2] text-white rounded-md hover:bg-[#166fe5] transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),d.jsxs("button",{onClick:A,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#0085ff] text-white rounded-md hover:bg-[#0073e6] transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8z"})}),"Bluesky"]}),d.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]})]}),d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[d.jsx("p",{children:"💡 Anyone with this URL can view the conversation"}),d.jsx("p",{children:"🔒 Share data is compressed and encoded in the URL itself (no server storage)"}),d.jsx("p",{children:"⏱️ Links never expire and work offline once loaded"})]})]}),d.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:d.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})};function f0e(e){return typeof e=="string"?e:Array.isArray(e)?e.filter(t=>t.type==="text"&&t.text).map(t=>t.text).join(`
`):""}function n3(){return`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async function Qv(){try{return(await es.getAllChats()).sort((t,r)=>r.timestamp-t.timestamp).map(t=>({id:t.id,timestamp:t.timestamp,firstUserPrompt:t.title||"New chat",messages:t.messages}))}catch(e){return console.error("Error loading chat history from IndexedDB:",e),[]}}async function m0e(e,t,r){try{const n=e.find(s=>s.role==="user"),a=n?f0e(n.content):"",i=a?a.substring(0,100):"New chat";return t||(t=n3()),await es.saveChat(t,e,i,r),t}catch(n){return console.error("Error saving chat to history:",n),t||n3()}}async function a3(e){try{const t=await es.getChatWithMetadata(e);return t?{messages:t.messages,systemPrompt:t.systemPrompt,planningQuery:t.planningQuery,generatedSystemPrompt:t.generatedSystemPrompt,generatedUserQuery:t.generatedUserQuery,selectedSnippetIds:t.selectedSnippetIds,todosState:t.todosState}:null}catch(t){return console.error("Error loading chat with metadata from IndexedDB:",t),null}}async function i3(e){try{await es.deleteChat(e)}catch(t){console.error("Error deleting chat from IndexedDB:",t)}}async function y0e(){try{await es.clearAllChats()}catch(e){console.error("Error clearing chat history from IndexedDB:",e)}}const b0e=({transferData:e,enabledTools:t,showMCPDialog:r,setShowMCPDialog:n,onLoadingChange:a})=>{const{t:i}=wd(),{accessToken:s,user:l,getToken:u}=Di(),{getAccessToken:h}=VU(),{addSearchResult:p,clearSearchResults:f}=M7(),{addTracksToStart:y}=Dc(),{addSnippet:b,snippets:x,syncSnippetFromGoogleSheets:v}=$0(),{showError:T,showWarning:k,showSuccess:C,clearAllToasts:A}=Ks(),{settings:P}=Xs(),{addCost:M,usage:L}=q0(),{state:D,speak:q}=Z1(),{isConnected:Q,sendMessages:F,sendScrollPosition:K}=H0(),{location:W,isLoading:j,requestLocation:O,clearLocation:$}=KU(),[I,G]=_.useState([]),[V,oe]=_.useState(!1),[U,z]=Pi("chat_input",""),[ie,H]=Pi("chat_system_prompt",""),[ue,Z]=_.useState(!1),[ae,pe]=_.useState(!1),[ye,_e]=_.useState(!1),[de,Ae]=_.useState(!1),[Te,$e]=_.useState(new Set),[ot,Tt]=_.useState(!1),[je,_t]=_.useState(""),[Pt,Bt]=_.useState(""),[kt,At]=_.useState(""),[ir,lr]=Pi("chat_mcp_servers",[]),[ft,ur]=_.useState({name:"",url:""}),[re,we]=_.useState(!1),Ze=[{id:"joke-server",name:"Joke Server",url:"http://localhost:3100",description:"Get programming, dad, science, animal, and food jokes",category:"Sample",instructions:`1. Run: make mcp-install-jokes
2. Run: make mcp-sample-jokes
3. Server starts on port 3100`,tools:["get_random_joke","get_joke_by_id","search_jokes","get_categories"]},{id:"filesystem",name:"@modelcontextprotocol/server-filesystem",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem",description:"Secure file operations with configurable access controls",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-filesystem /path/to/allowed/files",tools:["read_file","write_file","list_directory","search_files"]},{id:"github",name:"@modelcontextprotocol/server-github",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/github",description:"Repository management, file operations, commits, issues, PRs",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-github
Requires: GITHUB_PERSONAL_ACCESS_TOKEN`,tools:["create_or_update_file","search_repositories","create_issue","create_pull_request"]},{id:"postgres",name:"@modelcontextprotocol/server-postgres",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/postgres",description:"Read-only database access for PostgreSQL",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-postgres postgresql://user:pass@localhost/db",tools:["query","list_tables","describe_table","append_insight"]},{id:"sqlite",name:"@modelcontextprotocol/server-sqlite",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/sqlite",description:"Database interaction, schema inspection, query execution",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-sqlite /path/to/database.db",tools:["query","list_tables","describe_table","append_insight"]},{id:"slack",name:"@modelcontextprotocol/server-slack",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/slack",description:"Channel management and messaging for Slack",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-slack
Requires: SLACK_BOT_TOKEN`,tools:["post_message","reply_to_thread","add_reaction","get_channel_history"]},{id:"brave-search",name:"@modelcontextprotocol/server-brave-search",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/brave-search",description:"Web and local search using Brave Search API",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-brave-search
Requires: BRAVE_API_KEY`,tools:["brave_web_search","brave_local_search"]},{id:"gdrive",name:"@modelcontextprotocol/server-gdrive",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive",description:"File access and search for Google Drive",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-gdrive
Requires: OAuth credentials`,tools:["search_files","read_file","list_files"]},{id:"git",name:"@modelcontextprotocol/server-git",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/git",description:"Read, search, and analyze Git repositories",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-git",tools:["git_status","git_diff","git_log","git_commit"]},{id:"memory",name:"@modelcontextprotocol/server-memory",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/memory",description:"Knowledge graph-based persistent memory system",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-memory",tools:["create_entities","create_relations","search_nodes","open_nodes"]},{id:"fetch",name:"@modelcontextprotocol/server-fetch",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/fetch",description:"Efficient web content fetching and conversion",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-fetch
Optional: USER_AGENT, IGNORE_ROBOTS_TXT`,tools:["fetch"]}];_.useEffect(()=>{a?.(ue)},[ue,a]),_.useEffect(()=>{const B=localStorage.getItem("pending_chat_query"),te=localStorage.getItem("pending_chat_from_feed"),Se=localStorage.getItem("pending_chat_new_conversation");B&&te&&(console.log("📝 Found pending query from feed:",te),localStorage.removeItem("pending_chat_query"),localStorage.removeItem("pending_chat_from_feed"),localStorage.removeItem("pending_chat_new_conversation"),Se==="true"&&(console.log("🆕 Starting new conversation from feed - clearing messages"),G([]),localStorage.removeItem("chat_messages")),z(B),Tt(!0))},[]);const[et,pt]=_.useState([]),[Ft,Rr]=_.useState(""),[hr,cr]=_.useState(new Set),[Xt,tr]=_.useState(null),[sa,fn]=_.useState(!1),[$o,za]=_.useState(!1),[Ua,ha]=_.useState(null),[nn,le]=_.useState([]),[De,Qe]=_.useState(new Map),[It,Or]=_.useState(new Map),[Ar,dt]=_.useState(new Map),[ut,Lt]=_.useState(new Map),[ln,rr]=_.useState(""),[jn,fi]=_.useState(new Map),[ei,Yn]=_.useState(new Map),[en,Fr]=_.useState(new Map),[$a,is]=_.useState(new Map),[zt,mi]=_.useState(null),[yi,gt]=_.useState(null),[he,Ue]=_.useState(null),[ct,wr]=_.useState(null),[jr,Jt]=_.useState(null),[cn,Rn]=_.useState(null),[oa,Ke]=_.useState(!1),[st,Zt]=_.useState(!1),[Er,wn]=_.useState(""),[la,Qn]=_.useState(!1),[Cn,$r]=_.useState(null),[_a,jl]=_.useState(0),[bi,_s]=_.useState([]),[qo,Bl]=_.useState(!1),pa=_.useRef(null),ro=_.useRef(null),_n=_.useRef(null),ss=_.useRef(!1),Bn=_.useRef(null),As=_.useRef(null),no=_.useRef(null),[Mt,Hc]=Pi("chat_prompt_history",[]),[un,Cr]=_.useState(-1),[Ns]=Pi("chat_use_rag",!1),[,Mi]=_.useState(!1),[Ho,Ls]=_.useState(.3),[it,mt]=_.useState(null),[Qt,pr]=_.useState(!1),[an,ga]=_.useState(null),[ao,Fl]=_.useState(!1),[fa,Kn]=_.useState(new Set);_.useEffect(()=>{const B=localStorage.getItem("rag_config");if(B)try{const te=JSON.parse(B);te.similarityThreshold!==void 0&&Ls(te.similarityThreshold)}catch(te){console.error("Failed to parse RAG config:",te)}},[]),_.useEffect(()=>{const B=Array.from(ei.values()).find(Se=>Se.phase==="generating"&&Se.estimated_seconds);if(!B||B.remaining_seconds===0)return;const te=setInterval(()=>{Yn(Se=>{const Xe=new Map(Se),Me="img_generating",J=Xe.get(Me);if(J&&J.phase==="generating"){const Ve=J.remaining_seconds??J.estimated_seconds??0;Ve>0&&Xe.set(Me,{...J,remaining_seconds:Ve-1})}return Xe})},1e3);return()=>clearInterval(te)},[ei]);const Bd=dr.useMemo(()=>{const B={};return P.providers.forEach(te=>{if(te.enabled&&te.apiKey)switch(te.type){case"openai":B.openaiApiKey||(B.openaiApiKey=te.apiKey);break;case"together":B.togetherApiKey||(B.togetherApiKey=te.apiKey);break;case"gemini":B.geminiApiKey||(B.geminiApiKey=te.apiKey);break;case"replicate":B.replicateApiKey||(B.replicateApiKey=te.apiKey);break}}),B},[P.providers]),zl=()=>{pa.current?.scrollIntoView({behavior:"smooth"})},os=(B,te)=>{let Se=B;const Xe=[],Me=[],J=[],Ve=/!\[([^\]]*)\]\(([^\)]+)\)/g;let Ee;for(;(Ee=Ve.exec(B))!==null;)Xe.includes(Ee[2])||Xe.push(Ee[2]);const Ie=/\[([^\]]+)\]\(([^\)]+)\)/g;for(;(Ee=Ie.exec(B))!==null;){const We=Ee[2];We.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?J.includes(We)||J.push(We):Me.includes(We)||Me.push(We)}const fe=/<img[^>]+src=["']([^"']+)["'][^>]*>/g;for(;(Ee=fe.exec(B))!==null;)Xe.includes(Ee[1])||Xe.push(Ee[1]);const He=/<a[^>]+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/g;for(;(Ee=He.exec(B))!==null;){const We=Ee[1];We.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?J.includes(We)||J.push(We):Me.includes(We)||Me.push(We)}return te?(Se+=`

---
`,te.images&&te.images.length>0&&(Se+=`

## Extracted Images

`,te.images.forEach(We=>{Se+=`![${We.alt||"Image"}](${We.src})
`,Se+=`<img src="${We.src}" alt="${We.alt||"Image"}" style="max-width:100%;height:auto;" />
`,We.source&&(Se+=`*Source: [${We.source}](${We.source})*

`)})),te.youtubeVideos&&te.youtubeVideos.length>0&&(Se+=`

## YouTube Videos

`,te.youtubeVideos.forEach(We=>{Se+=`### ${We.title||"YouTube Video"}

`,Se+=`[Watch on YouTube](${We.src})

`;const Le=We.src.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/");Se+=`<iframe width="560" height="315" src="${Le}" frameborder="0" allowfullscreen></iframe>

`,We.source&&(Se+=`*Source: [${We.source}](${We.source})*

`)})),te.otherVideos&&te.otherVideos.length>0&&(Se+=`

## Videos

`,te.otherVideos.forEach(We=>{Se+=`### ${We.title||"Video"}

`,Se+=`[Download Video](${We.src})

`,Se+=`<video controls style="max-width:100%;height:auto;">
`,Se+=`  <source src="${We.src}" type="video/mp4">
`,Se+=`  Your browser does not support the video tag.
`,Se+=`</video>

`,We.source&&(Se+=`*Source: [${We.source}](${We.source})*

`)})),te.media&&te.media.length>0&&(Se+=`

## Media

`,te.media.forEach(We=>{Se+=`### ${We.type}

`,Se+=`[Download Media](${We.src})

`,We.type.toLowerCase().includes("audio")?(Se+=`<audio controls style="width:100%;">
`,Se+=`  <source src="${We.src}">
`,Se+=`  Your browser does not support the audio tag.
`,Se+=`</audio>

`):We.type.toLowerCase().includes("video")&&(Se+=`<video controls style="max-width:100%;height:auto;">
`,Se+=`  <source src="${We.src}">
`,Se+=`  Your browser does not support the video tag.
`,Se+=`</video>

`),We.source&&(Se+=`*Source: [${We.source}](${We.source})*

`)})),te.sources&&te.sources.length>0&&(Se+=`

## Sources & References

`,te.sources.forEach((We,Le)=>{Se+=`${Le+1}. **[${We.title}](${We.url})**
`,We.snippet&&(Se+=`   > ${We.snippet}
`),Se+=`   - URL: [${We.url}](${We.url})

`})),Se):(Xe.length>0&&(Se+=`

---

## Inline Images

`,Xe.forEach(We=>{Se+=`![Image](${We})
`})),J.length>0&&(Se+=`

## Inline YouTube Videos

`,J.forEach(We=>{Se+=`- [YouTube Video](${We})
`,Se+=`  <iframe width="560" height="315" src="${We.replace("watch?v=","embed/")}" frameborder="0" allowfullscreen></iframe>

`})),Me.length>0&&(Se+=`

## Inline Links

`,Me.forEach(We=>{Se+=`- [${We}](${We})
`})),Se)},Gc=async(B,te)=>{try{const{imageUrlToBase64:Se}=await Rt(async()=>{const{imageUrlToBase64:Ve}=await import("./imageUtils-DosmAaVd.js");return{imageUrlToBase64:Ve}},[]),Xe=await Se(B),Me=te||"Image",J=`<img src="${Xe}" alt="${Me}" style="max-width: 100%; height: auto;" />`;await b(J,"assistant",Me),C(i("chat.imageAddedToSwag"))}catch(Se){console.error("Failed to grab image:",Se);const Xe=te||"Image",Me=`<img src="${B}" alt="${Xe}" style="max-width: 100%; height: auto;" />`;await b(Me,"assistant",Xe),C(i("chat.imageAddedWithoutConversion"))}},ls=async(B,te,Se,Xe,Me)=>{try{let J=Xe;if(Me&&Me.length>0){const fe=Ay({toolResults:Me});(fe.images.length>0||fe.links.length>0||fe.youtubeLinks.length>0||fe.otherMedia.length>0)&&(J={...Xe,images:[...Xe?.images||[],...fe.images.map(He=>({src:He,alt:"",source:""}))],youtubeVideos:[...Xe?.youtubeVideos||[],...fe.youtubeLinks.map(He=>({src:He.url,title:He.title||"",source:He.url}))],otherVideos:[...Xe?.otherVideos||[],...fe.otherMedia.filter(He=>He.type.includes("video")).map(He=>({src:He.url,title:"",source:He.url}))],media:[...Xe?.media||[],...fe.otherMedia.filter(He=>He.type.includes("audio")).map(He=>({src:He.url,type:He.type,source:He.url}))],sources:[...Xe?.sources||[],...fe.links.map(He=>({url:He.url,title:He.title||He.url,snippet:""}))]})}const Ve=os(B,J),{convertHtmlImagesToBase64:Ee}=await Rt(async()=>{const{convertHtmlImagesToBase64:fe}=await import("./imageUtils-DosmAaVd.js");return{convertHtmlImagesToBase64:fe}},[]),Ie=await Ee(Ve);await b(Ie,te,Se),C(i("chat.contentCapturedToSwag"))}catch(J){console.error("Failed to capture content with base64 conversion:",J);const Ve=os(B,Xe);await b(Ve,te,Se),C(i("chat.contentCapturedWithoutConversion"))}},Wc=_.useRef(null),io=_.useRef(null),Vc=(B,te,Se)=>{console.log("🎙️ Voice transcription received:",{text:B,requestId:te,textLength:B.length,hasLlmApiCall:!!Se}),z(B),Wc.current=te,io.current=Se||null,console.log("🎙️ Voice transcription complete, stored request ID:",te),setTimeout(()=>{console.log("🎙️ Auto-submitting with transcribed text:",B.substring(0,50)),lo(B)},150)};_.useEffect(()=>{zl()},[I]),_.useEffect(()=>{kn().then(B=>{wn(B),console.log("🔗 API endpoint for voice input:",B)})},[]),_.useEffect(()=>{Q&&I.length>0&&(console.log("Syncing messages to Chromecast:",I.length),F(I))},[I,Q,F]),_.useEffect(()=>{if(!Q||!ro.current)return;const B=ro.current;let te;const Se=()=>{clearTimeout(te),te=setTimeout(()=>{B&&K&&K(B.scrollTop)},100)};return B.addEventListener("scroll",Se),()=>{B.removeEventListener("scroll",Se),clearTimeout(te)}},[Q,K]),_.useEffect(()=>{const B=te=>{Bn.current&&!Bn.current.contains(te.target)&&fn(!1)};if(sa)return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[sa]),_.useEffect(()=>{ss.current&&U.trim()&&!ue&&s&&(ss.current=!1,lo())},[U]);const kg=B=>{_n.current&&(_n.current.abort(),_n.current=null),G([]),H(""),z(B),fn(!1),pt([]),Rr(""),tr(null),Qe(new Map),Or(new Map),dt(new Map),Lt(new Map),mi(null),ha(null),localStorage.removeItem("last_active_chat_id"),A(),setTimeout(()=>{lo(B)},0)},Sr=B=>typeof B=="string"?B:Array.isArray(B)?B.filter(te=>te.type==="text"&&te.text).map(te=>te.text).join(`
`):"",so=async B=>{try{const te=I[B],Se=await u();if(!Se){T("Please sign in to submit feedback");return}const Xe=await kn(),Me=await fetch(`${Xe}/report-error`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se}`},body:JSON.stringify({userEmail:l?.email,feedbackType:"positive",explanation:"✅ User marked this response as helpful (thumbs up)",messageData:{messageContent:Sr(te.content),llmApiCalls:te.llmApiCalls||[],evaluations:te.evaluations||[],conversationThread:I.slice(Math.max(0,B-2),B+1)},timestamp:new Date().toISOString()})});if(!Me.ok){const J=await Me.json().catch(()=>({error:"Unknown error"}));throw console.error("❌ Failed to submit positive feedback:",J),new Error(J.error||"Failed to submit feedback")}C("👍 Thank you for the feedback!")}catch(te){console.error("Error submitting positive feedback:",te),T("Failed to submit feedback")}},Yc=B=>{Jt(B)},Go=B=>{const te=Sr(B);if(!te)return null;const Se=te.match(/```mermaid\s*([\s\S]*?)```/);return Se&&Se[1]?Se[1].trim():null},Ay=B=>{const te={images:[],links:[],youtubeLinks:[],otherMedia:[]};return B.toolResults&&B.toolResults.forEach(Se=>{try{const Xe=typeof Se.content=="string"?JSON.parse(Se.content):Se.content;Xe.results&&Array.isArray(Xe.results)&&Xe.results.forEach(Me=>{Me.images&&Array.isArray(Me.images)&&Me.images.forEach(J=>{typeof J=="string"?te.images.push(J):J&&J.src?te.images.push(J.src):J&&J.url&&te.images.push(J.url)}),Me.url&&te.links.push({url:Me.url,title:Me.title}),Me.links&&Array.isArray(Me.links)&&Me.links.forEach(J=>{typeof J=="string"?te.links.push({url:J}):J&&J.href?te.links.push({url:J.href,title:J.text}):J&&J.url&&te.links.push({url:J.url,title:J.text||J.title})})}),Xe.videos&&Array.isArray(Xe.videos)&&Xe.videos.forEach(Me=>{Me.url&&te.youtubeLinks.push({url:Me.url,title:Me.title})}),Xe.images&&Array.isArray(Xe.images)&&Xe.images.forEach(Me=>{typeof Me=="string"?te.images.push(Me):Me&&Me.src?te.images.push(Me.src):Me&&Me.url&&te.images.push(Me.url)}),Xe.page_content?.images&&Array.isArray(Xe.page_content.images)&&Xe.page_content.images.forEach(Me=>{typeof Me=="string"?te.images.push(Me):Me&&Me.src?te.images.push(Me.src):Me&&Me.url&&te.images.push(Me.url)}),Xe.results&&Array.isArray(Xe.results)&&Xe.results.forEach(Me=>{Me.page_content?.images&&Array.isArray(Me.page_content.images)&&Me.page_content.images.forEach(J=>{typeof J=="string"?te.images.push(J):J&&J.src?te.images.push(J.src):J&&J.url&&te.images.push(J.url)})})}catch{}}),te.images=[...new Set(te.images)].filter(Boolean),te.links=Array.from(new Map(te.links.filter(Se=>Se.url).map(Se=>[Se.url,Se])).values()),te.youtubeLinks=Array.from(new Map(te.youtubeLinks.filter(Se=>Se.url).map(Se=>[Se.url,Se])).values()),te},Qc=B=>B<1e-4?"<$0.0001":B<.01?`$${B.toFixed(4)}`:`$${B.toFixed(3)}`,Kc=B=>{if(!B||B.length===0)return 0;const te={"gemini-2.0-flash":{input:0,output:0},"gemini-2.5-flash":{input:0,output:0},"gemini-2.5-pro":{input:0,output:0},"gemini-1.5-flash":{input:0,output:0},"gemini-1.5-pro":{input:0,output:0},"gpt-4o":{input:2.5,output:10},"gpt-4o-mini":{input:.15,output:.6},"gpt-4-turbo":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"llama-3.1-8b-instant":{input:0,output:0},"llama-3.3-70b-versatile":{input:0,output:0},"llama-3.1-70b-versatile":{input:0,output:0},"mixtral-8x7b-32768":{input:0,output:0}};let Se=0;for(const Xe of B){const Me=Xe.model,J=Xe.response?.usage;if(!Me||!J)continue;const Ve=te[Me]||{input:0,output:0},Ee=J.prompt_tokens||0,Ie=J.completion_tokens||0,fe=Ee/1e6*Ve.input,He=Ie/1e6*Ve.output;Se+=fe+He}return Se},Oi=B=>!B.llmApiCalls||B.llmApiCalls.length===0?0:Kc(B.llmApiCalls),cs=B=>B===0?"$0":B<1e-4?"<$0.0001":B<.01?`$${B.toFixed(4)}`:B<1?`$${B.toFixed(3)}`:`$${B.toFixed(2)}`,Eg=B=>{B.preventDefault(),B.stopPropagation(),B.dataTransfer.types.includes("Files")&&Bl(!0)},Ny=B=>{B.preventDefault(),B.stopPropagation(),B.currentTarget===B.target&&Bl(!1)},Ly=B=>{B.preventDefault(),B.stopPropagation()},Py=B=>{B.preventDefault(),B.stopPropagation(),Bl(!1);const te=B.dataTransfer.files;Ag(te)},Fd=B=>{if(B){B.style.height="auto";const Se=Math.min(B.scrollHeight,300);B.style.height=Se+"px"}};_.useEffect(()=>{Fd(As.current)},[U]),_.useEffect(()=>{e&&(z(e.prompt),e.persona&&H(e.persona))},[e]),_.useEffect(()=>{const B=sessionStorage.getItem("planning_transfer_data");if(console.log("🔍 useEffect checking sessionStorage - planningData:",B?.substring(0,100)),B){console.log("📋 Found planning transfer data in sessionStorage");try{const te=JSON.parse(B);if(console.log("📋 Planning transfer data received:",te),G([]),ha(null),localStorage.removeItem("last_active_chat_id"),f(),cr(new Set),Kn(new Set),te.persona||te.generatedSystemPrompt){const Se=te.persona||te.generatedSystemPrompt;H(Se),console.log("📋 Set system prompt from planning:",Se.substring(0,50)+"...")}if(te.prompt||te.generatedUserQuery){const Se=te.prompt||te.generatedUserQuery;z(Se),console.log("📋 Set user input from planning:",Se.substring(0,50)+"...")}te.planningQuery&&_t(te.planningQuery),te.generatedSystemPrompt&&Bt(te.generatedSystemPrompt),te.generatedUserQuery&&At(te.generatedUserQuery),sessionStorage.removeItem("planning_transfer_data"),setTimeout(()=>{As.current?.focus(),C(i("chat.planningTransferred"))},100)}catch(te){console.error("Failed to parse planning transfer data:",te),T(i("chat.failedToTransfer")),sessionStorage.removeItem("planning_transfer_data")}}},[]),_.useEffect(()=>{if(d0e()){const B=h0e();if(B){console.log("🔗 Restoring shared conversation from URL"),G([]),ha(null),localStorage.removeItem("last_active_chat_id"),f(),cr(new Set),Kn(new Set);const te=B.messages.map(Se=>({role:Se.role,content:Se.content,timestamp:Se.timestamp}));G(te),B.metadata.title&&H(B.metadata.title),B.metadata.truncated&&k(`This conversation was truncated to fit URL limits. Showing ${B.metadata.includedMessageCount} of ${B.metadata.originalMessageCount} messages.`),p0e(),C("Shared conversation loaded!"),console.log(`✅ Restored ${te.length} messages from share URL`)}}},[]),_.useEffect(()=>{V||(async()=>{try{const B=localStorage.getItem("last_active_chat_id");if(B){console.log("🔄 Attempting to restore last chat:",B);const te=await a3(B);if(te&&te.messages&&te.messages.length>0){te.systemPrompt&&H(te.systemPrompt),te.planningQuery&&_t(te.planningQuery),te.generatedSystemPrompt&&Bt(te.generatedSystemPrompt),te.generatedUserQuery&&At(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)&&(Kn(new Set(te.selectedSnippetIds)),console.log(`📎 Restored ${te.selectedSnippetIds.length} attached snippets`));const Xe=te.messages.map(Me=>(Me._attachments&&Array.isArray(Me._attachments)&&(Me._attachments=Me._attachments.map(J=>({name:J.name||"file",type:J.type||"application/octet-stream",size:J.size||0,preview:J.preview}))),Me)).filter(Me=>Me&&Me.role);console.log("✅ Restored chat session with planning metadata:",B,"with",Xe.length,"messages"),G(Xe),ha(B)}else console.log("ℹ️ No previous chat to restore")}}catch(B){console.error("❌ Error loading last chat:",B),localStorage.removeItem("last_active_chat_id")}oe(!0)})()},[V]),_.useEffect(()=>{I.length>0&&V&&(async()=>{try{const B=await m0e(I,Ua||void 0,{systemPrompt:ie||void 0,planningQuery:je||void 0,generatedSystemPrompt:Pt||void 0,generatedUserQuery:kt||void 0,selectedSnippetIds:Array.from(fa)});Ua||ha(B),localStorage.setItem("last_active_chat_id",B),console.log("💾 Chat auto-saved with planning metadata:",B)}catch(B){console.error("❌ Failed to auto-save chat:",B)}})()},[I,Ua,V,ie,je,Pt,kt]),_.useEffect(()=>{if(!(()=>{const Se=localStorage.getItem("google_drive_access_token"),Xe=localStorage.getItem("auto_sync_enabled")==="true";return Se&&Se.length>0&&Xe})()||I.length===0)return;const te=setTimeout(async()=>{try{(await Gu.syncChatHistory()).success&&console.log("✅ Chat history synced to Google Drive")}catch(Se){console.error("❌ Failed to sync chat history:",Se)}},1e4);return()=>clearTimeout(te)},[I]),_.useEffect(()=>{ae&&(async()=>{const B=await Qv();le(B)})()},[ae]);const oo=_.useRef(new Set),Cg=_.useRef(y);_.useEffect(()=>{Cg.current=y},[y]),_.useEffect(()=>{const B=I.filter(Xe=>Xe.role==="assistant"&&!Xe.isStreaming&&Xe.toolResults);if(B.length===0)return;const te=[],Se=new Set;if(B.forEach(Xe=>{Xe.toolResults?.forEach(Me=>{if(Me.name!=="search_youtube"||!Me.content)return;const J=Me.tool_call_id||`${Me.name}-${JSON.stringify(Me.content).substring(0,100)}`;if(!oo.current.has(J))try{const Ve=typeof Me.content=="string"?JSON.parse(Me.content):Me.content;Ve.videos&&Array.isArray(Ve.videos)&&(Ve.videos.forEach(Ee=>{Ee.videoId&&!Se.has(Ee.videoId)&&(Se.add(Ee.videoId),te.push(Ee))}),oo.current.add(J))}catch(Ve){console.error("[ChatTab] Failed to parse YouTube results:",Ve)}})}),te.length>0){const Xe=te.map(J=>({videoId:J.videoId,url:J.url,title:J.title||"Untitled Video",description:J.description||"",duration:J.duration||"",channel:J.channel||"",thumbnail:J.thumbnail||""}));console.log(`[ChatTab] Adding ${Xe.length} new YouTube videos to playlist (${oo.current.size} tool results processed total)`),Cg.current(Xe);const Me=I[I.length-1];Me?.role==="assistant"&&!Me.isStreaming&&Me.toolResults?.some(Ve=>Ve.name==="search_youtube"&&!oo.current.has(Ve.tool_call_id||""))&&C(i("chat.addedToPlaylist",{count:Xe.length,plural:Xe.length!==1?"s":""}))}if(oo.current.size>500){const Xe=Array.from(oo.current);oo.current=new Set(Xe.slice(-500))}},[I,C]);const Ry=()=>{_n.current&&(_n.current.abort(),_n.current=null,Xt!==null&&(Ft||I[Xt])&&(G(B=>{const te=[...B],Se=te[Xt];if(Se&&Se.role==="assistant"){const Xe=Ft||Se.content||"",Me=Se.llmApiCalls||[];let J=0;Me.length>0&&(J=Kc(Me)),te[Xt]={...Se,content:Xe+`

_⏹️ Request stopped by user. Partial response shown above._`,isStreaming:!1,wasStopped:!0,llmApiCalls:Me,partialCost:J},J>0&&M(J),console.log("⏹️ Request stopped. Saved partial response:",{contentLength:Xe.length,llmApiCallsCount:Me.length,partialCost:J})}return te}),tr(null),Rr("")),Z(!1))},Iy=()=>{const B=[];return t.web_search&&B.push({type:"function",function:{name:"search_web",description:"Search the web using DuckDuckGo to find current information, news, articles, and real-time data. USE THIS whenever users ask for current/latest information, news, or anything requiring up-to-date web content. Automatically fetches full page content including images and links from all search results. Returns comprehensive search results with titles, URLs, snippets, full content, images, and links. **CRITICAL: You MUST include relevant URLs from search results in your response using markdown links [Title](URL).**",parameters:{type:"object",properties:{query:{type:"string",description:"Search query - be specific and include relevant keywords"},limit:{type:"integer",minimum:1,maximum:50,default:5,description:"Number of results to return (default: 5)"},timeout:{type:"integer",minimum:1,maximum:60,default:15,description:"Timeout in seconds for fetching each page"},generate_summary:{type:"boolean",default:!0,description:"Generate an LLM summary of the search results (highly recommended)"}},required:["query"]}}}),t.execute_js&&B.push({type:"function",function:{name:"execute_javascript",description:"💻 Execute JavaScript code in a sandbox for: 1) Complex mathematical calculations that require computation (factorial, compound interest, statistics, algorithms), 2) Generating formatted tables/grids (multiplication tables, calendars), 3) Data transformations or array processing, 4) ASCII art or text-based visualizations, 5) Custom algorithms. **DO NOT use for**: simple text output, explanations, or answers you already know. Only use when actual computation adds value.",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute. Include console.log() to display results."},timeout:{type:"integer",minimum:1,maximum:10,default:5,description:"Execution timeout in seconds (default: 5)"}},required:["code"]}}}),t.scrape_url&&B.push({type:"function",function:{name:"scrape_web_content",description:"Fetch and extract readable content from any URL. Excellent for getting detailed information from webpages.",parameters:{type:"object",properties:{url:{type:"string",description:"Fully qualified URL to fetch"},timeout:{type:"integer",minimum:1,maximum:60,default:15}},required:["url"]}}}),t.youtube&&B.push({type:"function",function:{name:"search_youtube",description:'🎬 SEARCH/FIND YouTube videos (NOT for transcription). Use when user wants to FIND or SEARCH for videos. **DO NOT USE if user wants to transcribe, get transcript, or extract text from a specific YouTube URL** - use transcribe_url instead. Use search_youtube for: "find YouTube videos about X", "search YouTube for X", "show me videos about X". Returns video titles, descriptions, links, and caption availability. Results are automatically added to a playlist. **CRITICAL: You MUST include ALL video URLs in your response as a formatted markdown list with [Title](URL) format.**',parameters:{type:"object",properties:{query:{type:"string",description:'Search query for YouTube videos (e.g., "javascript tutorial", "bach cello suites", "machine learning course")'},limit:{type:"integer",minimum:1,maximum:50,default:10,description:"Maximum number of video results to return (default 10, max 50)"},order:{type:"string",enum:["relevance","date","viewCount","rating"],default:"relevance",description:"Sort order for results: relevance (default), date (newest first), viewCount (most viewed), rating (highest rated)"}},required:["query"]}}}),t.transcribe&&B.push({type:"function",function:{name:"transcribe_url",description:'🎙️ **PRIMARY TOOL FOR GETTING VIDEO/AUDIO TEXT CONTENT**: Transcribe audio or video content from URLs using OpenAI Whisper. **MANDATORY USE** when user says: "transcribe", "transcript", "get text from", "what does the video say", "extract dialogue", "convert to text", OR provides a specific YouTube/video URL and asks about its content. **YOUTUBE SUPPORT**: Can transcribe directly from YouTube URLs (youtube.com, youtu.be, youtube.com/shorts). Also supports direct media URLs (.mp3, .mp4, .wav, .m4a, etc.). **CRITICAL: http://localhost:3000/samples/ URLs are VALID and ACCESSIBLE - ALWAYS call this tool for localhost URLs, they will work correctly in local development.** Automatically handles large files by chunking. Shows real-time progress with stop capability. Returns full transcription text.',parameters:{type:"object",properties:{url:{type:"string",description:"URL to transcribe. Can be YouTube URL (youtube.com, youtu.be), direct media URL (.mp3, .mp4, .wav, .m4a, etc.), or localhost URL for local development (http://localhost:3000/samples/...)"},language:{type:"string",pattern:"^[a-z]{2}$",description:'Optional: 2-letter ISO language code (e.g., "en", "es", "fr"). Improves accuracy if known.'},prompt:{type:"string",description:'Optional: Context or expected words to improve accuracy (e.g., "Technical discussion about AI and machine learning")'}},required:["url"]}}}),t.generate_chart&&B.push({type:"function",function:{name:"generate_chart",description:"📊 **PRIMARY TOOL FOR ALL DIAGRAMS, CHARTS, AND VISUALIZATIONS**: Generate professional Mermaid diagrams automatically rendered as interactive SVG in the UI. **MANDATORY USE** when user requests: flowcharts, sequence diagrams, class diagrams, state diagrams, ER diagrams, Gantt charts, pie charts, mindmaps, git graphs, or ANY visual diagram/chart/visualization. **DO NOT use execute_javascript to generate charts - ALWAYS use this tool instead**. Keywords: diagram, chart, flowchart, visualization, graph, workflow, UML, ERD, timeline, mindmap.",parameters:{type:"object",properties:{description:{type:"string",description:'Clear description of what the chart should visualize (e.g., "User login flow", "Database schema for blog platform", "Project timeline")'},chart_type:{type:"string",enum:["flowchart","sequence","class","state","er","gantt","pie","git","mindmap"],default:"flowchart",description:"Type of diagram to generate. Choose based on use case: flowchart (processes), sequence (interactions), class (UML), state (FSM), er (database), gantt (timeline), pie (data), git (commits), mindmap (concepts)"}},required:["description"]}}}),t.generate_image&&B.push({type:"function",function:{name:"generate_image",description:'🎨 **MANDATORY USE FOR IMAGE REQUESTS**: Generate high-quality AI images immediately using DALL-E 3, Stable Diffusion, or other providers. **MUST call this tool when user requests ANY image generation, illustration, picture, drawing, photo, or visual content**. Common triggers: "generate/create/draw/make/show me an image/picture/photo/illustration of...", "draw a...", "create a cartoon/photo/illustration of...", "visualize...", "show me what... looks like". Supports quality tiers: ultra (photorealistic, $0.08-0.12), high (detailed/artistic, $0.02-0.04), standard (normal illustrations, $0.001-0.002), fast (quick drafts/sketches, <$0.001 - DEFAULT). Images appear automatically in the conversation. DO NOT refuse image generation requests - ALWAYS call this tool.',parameters:{type:"object",properties:{prompt:{type:"string",description:'Detailed description of the image to generate (e.g., "a low resolution image of a cat sitting on a windowsill")'},quality:{type:"string",enum:["ultra","high","standard","fast"],default:"standard",description:'Quality tier: ultra (photorealistic), high (detailed), standard (illustrations), fast (drafts). Infer from prompt keywords like "low res"=fast, "photorealistic"=ultra, "simple"=standard'},size:{type:"string",enum:["256x256","512x512","1024x1024","1792x1024","1024x1792"],default:"1024x1024",description:'Image dimensions. Use smaller sizes (256x256, 512x512) for "low res" requests'},style:{type:"string",enum:["natural","vivid"],default:"natural",description:"Style: natural (realistic) or vivid (dramatic). DALL-E 3 only"}},required:["prompt"]}}}),t.search_knowledge_base&&B.push({type:"function",function:{name:"search_knowledge_base",description:"📚 **SEARCH INTERNAL KNOWLEDGE BASE**: Perform vector similarity search against the ingested documentation and knowledge base. **USE THIS when user asks about**: project documentation, API references, implementation guides, architecture, deployment procedures, RAG system, embedding models, or any topics covered in the knowledge base. **EXCELLENT for**: finding specific code examples, configuration details, API endpoints, best practices, and technical documentation. Returns relevant text chunks with source file names and similarity scores. **Always use this BEFORE search_web when the question might be answered by internal documentation.**",parameters:{type:"object",properties:{query:{type:"string",description:'Natural language search query. Be specific and include key terms. Examples: "How do I configure OpenAI embeddings?", "What is the RAG implementation?", "How to deploy Lambda functions?"'},top_k:{type:"integer",minimum:1,maximum:20,default:5,description:"Number of most relevant results to return (default: 5, max: 20)"},threshold:{type:"number",minimum:0,maximum:1,default:.3,description:"Minimum similarity score threshold (0-1). Higher values = more strict matching. Default: 0.3 (relaxed for better recall)"},source_type:{type:"string",enum:["file","url","text"],description:"Optional: Filter results by source type (file, url, or text)"}},required:["query"]}}}),t.manage_todos&&B.push({type:"function",function:{name:"manage_todos",description:'✅ **MANAGE BACKEND TODO QUEUE**: Add or delete actionable steps for multi-step tasks. The backend maintains a server-side todo queue that tracks progress through complex workflows. When todos exist, they auto-progress after each successful completion (assessor "OK"). **USE THIS when**: user requests a multi-step plan, breaking down complex tasks, tracking implementation progress, or managing sequential workflows. **DO NOT use for simple single-step tasks.** After adding todos, the system will automatically advance through them, appending each next step as it completes. **Keywords**: plan, steps, todo list, break down task, multi-step workflow, implementation phases.',parameters:{type:"object",properties:{add:{type:"array",items:{type:"string"},description:'Array of todo descriptions to add to the queue. Descriptions should be clear, actionable steps in order. Example: ["Install dependencies", "Configure environment", "Run tests", "Deploy application"]'},delete:{type:"array",items:{oneOf:[{type:"string",description:"Exact todo description to delete"},{type:"number",description:"Todo ID to delete"}]},description:"Array of todo IDs (numbers) or exact descriptions (strings) to remove from the queue"}},additionalProperties:!1}}}),t.manage_snippets&&B.push({type:"function",function:{name:"manage_snippets",description:'📝 **MANAGE KNOWLEDGE SNIPPETS**: Insert, retrieve, search, or delete knowledge snippets stored in your personal Google Sheet ("Research Agent/Research Agent Swag"). Use this to save important information, code examples, procedures, references, or any content you want to preserve and search later. **USE THIS when**: user wants to save/capture content, create a knowledge base, store code snippets, bookmark important info, or search previous saved content. Each snippet can have a title, content, tags for organization, and source tracking (chat/url/file/manual). **Keywords**: save this, remember this, add to knowledge base, store snippet, save for later, search my snippets, find my notes.',parameters:{type:"object",required:["action"],properties:{action:{type:"string",enum:["insert","capture","get","search","delete"],description:'Operation to perform: "insert" (add new snippet), "capture" (save from chat/url/file), "get" (retrieve by ID/title), "search" (find by query/tags), "delete" (remove by ID/title)'},payload:{type:"object",description:"Action-specific parameters",properties:{title:{type:"string",description:"Snippet title (required for insert/capture)"},content:{type:"string",description:"Snippet content/body (required for insert)"},tags:{type:"array",items:{type:"string"},description:'Array of tags for categorization (optional, e.g., ["javascript", "async", "tutorial"])'},source:{type:"string",enum:["chat","url","file","manual"],description:"Source type (for capture action)"},url:{type:"string",description:'Source URL if source="url"'},id:{type:"number",description:"Snippet ID (for get/delete)"},query:{type:"string",description:"Text search query (searches title and content)"}}}},additionalProperties:!1}}}),ir.filter(te=>te.enabled).forEach(te=>{console.log("MCP Server enabled:",te.name,te.url)}),B},Dy=async B=>{try{const Se=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/stop-transcription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({tool_call_id:B})});if(!Se.ok){const Xe=await Se.json();throw new Error(Xe.error||"Failed to stop transcription")}C(i("chat.transcriptionStopped")),console.log("Transcription stopped:",B)}catch(te){console.error("Failed to stop transcription:",te),T(i("chat.failedToStopTranscription"))}},_g=(B,te=2048)=>new Promise((Se,Xe)=>{const Me=new FileReader;Me.onload=J=>{const Ve=new Image;Ve.onload=()=>{const Ee=document.createElement("canvas");let Ie=Ve.width,fe=Ve.height;Ie>fe&&Ie>te?(fe=fe/Ie*te,Ie=te):fe>te&&(Ie=Ie/fe*te,fe=te),Ee.width=Ie,Ee.height=fe,Ee.getContext("2d")?.drawImage(Ve,0,0,Ie,fe);const We=Ee.toDataURL(B.type||"image/jpeg",.85);Se(We.split(",")[1])},Ve.onerror=Xe,Ve.src=J.target?.result},Me.onerror=Xe,Me.readAsDataURL(B)}),Ag=async B=>{if(!B||B.length===0)return;const te=5*1024*1024,Se=10*1024*1024,Xe=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];for(let Me=0;Me<B.length;Me++){const J=B[Me];if(!Xe.includes(J.type)){k(i("chat.fileTypeNotSupported",{name:J.name}));continue}const Ve=J.type==="application/pdf"?Se:te;if(J.size>Ve){k(i("chat.fileTooLarge",{name:J.name,size:(J.size/1024/1024).toFixed(2),maxSize:Ve/1024/1024}));continue}try{let Ee,Ie;if(J.type.startsWith("image/")){Ee=await _g(J),Ie=`data:${J.type};base64,${Ee}`;const fe=Ee.length/1e3;fe>2e4&&k(i("chat.imageTokenWarning",{name:J.name,tokens:Math.round(fe/1e3)}))}else{const fe=new FileReader;Ee=await new Promise((He,We)=>{fe.onload=Le=>{const tt=Le.target?.result;He(tt.split(",")[1])},fe.onerror=We,fe.readAsDataURL(J)})}_s(fe=>[...fe,{name:J.name,type:J.type,size:J.size,base64:Ee,preview:Ie}]),C(i("chat.fileAdded",{name:J.name}))}catch(Ee){console.error("Error processing file:",Ee),T(i("chat.failedToProcess",{name:J.name}))}}},My=B=>{_s(te=>te.filter((Se,Xe)=>Xe!==B))},lo=async B=>{const te=B!==void 0?B:U;if(!te.trim()&&bi.length===0||ue)return;if(!s){T(i("chat.signInToSendMessages"));return}let Se;if(bi.length>0){const Ie=[{type:"text",text:te||"Please analyze these files."}];for(const fe of bi)fe.type&&fe.type.startsWith("image/")?Ie.push({type:"image_url",image_url:{url:`data:${fe.type};base64,${fe.base64}`,detail:"auto"}}):fe.type==="application/pdf"&&Ie.push({type:"text",text:`[PDF attachment: ${fe.name}]`});Se={role:"user",content:Ie,_attachments:bi}}else Se={role:"user",content:te};io.current&&(Se.llmApiCalls=[io.current],console.log("🎙️ Added voice transcription llmApiCall to user message"),io.current=null),console.log("🔵 Adding user message:",typeof Se.content=="string"?Se.content.substring(0,50):`${bi.length} attachments`);let Xe=I.length;G(Ie=>{console.log("🔵 Current messages count before adding user:",Ie.length),Xe=Ie.length;const fe=[...Ie,Se];return console.log("🔵 Messages after adding user:",fe.length,"User message at index:",Xe),fe});const Me=te.trim();Me&&Hc(Ie=>{const fe=Ie.filter(We=>We!==Me);return[Me,...fe].slice(0,50)}),z(""),Cr(-1),_s([]),Kn(new Set),Z(!0),pt([]),Rr(""),jl(0),cr(new Set),dt(new Map),Lt(new Map),Qe(new Map),Or(new Map),is(new Map);let J=null;if(Ns&&te.trim()){Mi(!0);try{let Ie;const fe=await Va.getCachedQueryEmbedding(te.trim());if(fe)console.log("✅ Using cached query embedding"),Ie=fe.embedding;else{console.log("🔄 Fetching new query embedding from backend");const He=await kn(),We=await u(),Le=await fetch(`${He}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...We?{Authorization:`Bearer ${We}`}:{}},body:JSON.stringify({query:te,embeddingModel:P.embeddingModel,providers:P.providers})});if(!Le.ok)throw new Error("Failed to get query embedding");const tt=await Le.json();Ie=tt.embedding;const Gt=tt.model||"unknown";await Va.cacheQueryEmbedding(te.trim(),Ie,Gt),console.log("💾 Cached query embedding for future use")}if(Ie){console.log(`🔍 RAG search with threshold: ${Ho}`);const He=await Va.vectorSearch(Ie,5,Ho);if(He.length>0){let We=`**KNOWLEDGE BASE CONTEXT:**

The following information from the user's knowledge base may be relevant to this query:

`;for(let Le=0;Le<He.length;Le++){const tt=He[Le];We+=`**[Context ${Le+1} - Similarity: ${tt.score.toFixed(3)}]**
`,We+=`${tt.chunk_text}

`;try{const Gt=await Va.getEmbeddingDetails(tt.snippet_id);Gt.metadata&&(We+=`*Source: ${Gt.metadata.source_type||"Unknown"}`,Gt.metadata.title&&(We+=` - "${Gt.metadata.title}"`),We+=`*

`)}catch{}We+=`---

`}We+=`**USER QUESTION:** ${te}

`,We+="Please answer the user's question using the context provided above. If the context is relevant, reference it in your answer. If the context is not helpful, you may answer based on your general knowledge.",J={role:"system",content:We},C(i("chat.foundRelevantChunks",{count:He.length}))}else k(i("chat.noRelevantContext"))}}catch(Ie){console.error("RAG context error:",Ie),k(i("chat.failedToRetrieveRag"))}finally{Mi(!1)}}_n.current=new AbortController;const Ve=Iy();let Ee=null;Ve.length>0&&(Ee=setTimeout(()=>{_n.current&&(console.warn("Request timeout - aborting after 4 minutes due to tool execution"),_n.current.abort())},24e4));try{const Ie=new Date,fe=Ie.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),He=Ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}),We=Ie.toISOString(),Le=`${fe}, ${He} (ISO: ${We})`;let tt=ie.trim()||"You are a helpful assistant";const Gt=Pt&&Pt.length>0;if(tt=`**CURRENT DATE AND TIME:**
${Le}

You have access to the current date and time above. Use this information when responding to temporal queries about "today", "current date", "what time is it", "this week", "this month", "this year", etc. You do not need to use tools to get the current date/time as it is provided in this system prompt.

${tt}`,Gt||(tt+=`

**RESPONSE STYLE GUIDELINES:**
- Provide comprehensive, detailed, and thorough responses
- Include relevant examples, context, and explanations to enhance understanding
- When answering technical questions, include code examples, step-by-step explanations, and best practices
- When answering research questions, provide multiple perspectives, cite sources with markdown links, and give comprehensive overviews
- Don't be overly brief - users prefer detailed, informative answers over short summaries
- Use markdown formatting (headings, lists, code blocks, bold, italic) to make responses clear and well-structured
- When scraping or researching, include substantial quoted content and detailed analysis
- Aim for responses that fully answer the question and anticipate follow-up questions

**IMAGE PLACEMENT GUIDELINES:**
- When including images in your response, distribute them naturally throughout the content next to relevant text sections
- Place images near the paragraphs or sections they illustrate or relate to
- AVOID placing all images at the top or bottom of your response in a single block
- Intersperse images with text to create a more engaging, magazine-style layout
- Use markdown image syntax: ![description](url) inline with your content where contextually appropriate`),Ve.length>0&&!Gt){const Wt=Ve.map(X=>X.function.name).join(", ");tt+=`

You have access to these tools: ${Wt}.

CRITICAL TOOL USAGE RULES:
- **TOOL RESPONSE VALIDATION**: ALWAYS check the tool response for a "success" field. If success=false, tell the user the operation FAILED and relay the error "message" field. NEVER claim success when the tool returned success=false.
- **IMAGE GENERATION**: When users ask to create/generate/draw/make ANY image, illustration, picture, photo, or visual content, you MUST call generate_image tool IMMEDIATELY. NEVER refuse or say "I cannot generate images" - you CAN by calling the tool. Examples: "draw a cat", "generate an image of...", "create a cartoon...", "show me a picture of...", "make an illustration of...", "visualize..." → ALL require calling generate_image.
- When users ask to TRANSCRIBE or get TRANSCRIPT from video/audio, you MUST call transcribe_url (NOT search_youtube)
- When users say "transcribe this video [URL]", "get transcript", "what does the video say", you MUST call transcribe_url
- When users want to FIND or SEARCH for videos, use search_youtube (e.g., "find videos about X")
- When users ask to "scrape", "get content from", "read", "fetch", "extract", "analyze", or "summarize" a website/URL, you MUST call the scrape_web_content tool
- When users provide ANY URL (http/https) and ask questions about it, you MUST call scrape_web_content with that URL FIRST
- MANDATORY: If a message contains a URL and asks to extract/analyze/summarize/get key points, you MUST call scrape_web_content - DO NOT provide an answer without first fetching the content
- When users ask for current information, news, or web content, you MUST use search_web
- **execute_javascript USAGE RULES**:
  - ✅ USE for: Complex calculations requiring computation (factorial, fibonacci, statistics, algorithms)
  - ✅ USE for: Generating formatted tables/grids (multiplication tables, calendars, data matrices)
  - ✅ USE for: Data transformations, array processing, sorting, filtering large datasets
  - ✅ USE for: ASCII art, text-based visualizations, formatted output
  - ✅ USE for: Custom algorithms or mathematical operations you cannot compute mentally
  - ❌ DO NOT USE for: Simple answers you already know (like "Lambda deployment not supported")
  - ❌ DO NOT USE for: Just printing text or explanations
  - ❌ DO NOT USE for: Answers that don't require computation
  - ❌ DO NOT USE for: Simple arithmetic you can answer directly (like 2+2=4)
  - Rule: Only use execute_javascript when the computation or formatting adds actual value
- DO NOT output tool parameters as JSON text in your response (e.g., don't write {"url": "...", "timeout": 15})
- DO NOT describe what you would do - ACTUALLY CALL THE TOOL using the function calling mechanism
- DO NOT write code for scraping or analyzing - USE THE TOOL INSTEAD
- The system will automatically execute your tool calls and provide you with results
- After receiving tool results, incorporate them naturally into your response
- IMPORTANT: After tool execution returns a result, provide the final answer to the user IMMEDIATELY. Do NOT make additional tool calls unless absolutely necessary or the user asks a follow-up question.

Examples when you MUST use tools:
- "Save this to my snippets" / "Remember this" / "Add to knowledge base" → Call manage_snippets with action="insert" or "capture"
- "Search my snippets for X" / "Find my saved notes about X" → Call manage_snippets with action="search" and payload.query="X"
- "transcribe this video https://youtube.com/watch?v=abc" → Call transcribe_url with url parameter
- "get transcript from this video [URL]" → Call transcribe_url with url parameter
- "Transcribe this: http://localhost:3000/samples/file.mp3" → Call transcribe_url (localhost URLs work in local dev!)
- "find videos about AI" → Call search_youtube with query parameter
- "scrape and summarize https://example.com" → Call scrape_web_content with url parameter
- "get content from https://github.com/user/repo" → Call scrape_web_content with url parameter
- "Extract and analyze the key points from https://example.com/article" → Call scrape_web_content with url parameter
- "What does this page say: https://example.com" → Call scrape_web_content with url parameter
- "Summarize this article https://example.com/news" → Call scrape_web_content with url parameter
- "Read and analyze https://en.wikipedia.org/wiki/Topic" → Call scrape_web_content with url parameter
- "Find current news about X" → Call search_web with query parameter
- "What's the latest on X" → Call search_web with query parameter
- "calculate 5 factorial" → Call execute_javascript (requires computation)
- "Generate a multiplication table for numbers 1-12" → Call execute_javascript (formatted table)
- "Calculate compound interest on $10k at 7% for 15 years" → Call execute_javascript (complex calculation)
- "Sort this array and find median: [45,23,67,12,89]" → Call execute_javascript (data processing)
- "What is 2+2?" → Answer directly with "4" (DON'T use execute_javascript for trivial math)
- "How do I deploy a Lambda?" → Answer directly (DON'T use execute_javascript to print explanations)

Remember: Use the function calling mechanism, not text output. The API will handle execution automatically.`}const Sn=I.map(Wt=>{const{llmApiCalls:X,isStreaming:Fn,toolResults:Tn,...Wo}=Wt;return Wo});let ma=0,ya=0,Xn=0;const ba=Sn.map(Wt=>{if(Wt.role==="tool")return ma++,null;if(Wt.role==="assistant"){const X=Sr(Wt.content),Fn=Wt.content&&X.trim().length>0,Tn=Wt.tool_calls&&Array.isArray(Wt.tool_calls)&&Wt.tool_calls.length>0;if(Fn){if(Tn){ya++;const{tool_calls:Wo,...Ul}=Wt;return Ul}return Wt}else return Xn++,null}return Wt}).filter(Wt=>Wt!==null);(ma>0||ya>0||Xn>0)&&(console.log(`🧹 UI filtered: ${ma} tool messages, ${ya} tool_calls stripped, ${Xn} empty assistants removed`),console.log(`   Sending ${ba.length} clean messages + new user message to Lambda`));const Aa=[];if(fa.size>0){const Wt=Array.from(fa).map(Fn=>x.find(Tn=>Tn.id===Fn)).filter(Fn=>Fn!==void 0),X=Fn=>{let Tn=Fn;return Tn=Tn.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,"[Image: $1]"),Tn=Tn.replace(/<img[^>]*src="data:image\/[^"]*"[^>]*>/gi,"[Base64 Image]"),Tn=Tn.replace(/<img[^>]*>/gi,"[Image]"),Tn=Tn.replace(/data:image\/[^;]+;base64,[A-Za-z0-9+/=]+/g,"[Base64 Image Data]"),Tn};for(const Fn of Wt){const Tn=X(Fn.content);Aa.push({role:"user",content:`**KNOWLEDGE BASE CONTEXT** (manually attached by user):

**Title:** ${Fn.title||"Untitled"}

${Tn}

---
`})}console.log(`📎 Attached ${Aa.length} manual context snippets (full content, images stripped)`)}const ji=[{role:"system",content:tt},...J?[J]:[],...Aa,...ba,Se];J&&console.log("🔍 RAG context included in request (automatic fragments)");const qa=ji.map(Wt=>{const{_attachments:X,llmApiCalls:Fn,isStreaming:Tn,toolResults:Wo,isRetryable:Ul,retryCount:qd,originalUserPromptIndex:Zc,originalErrorMessage:Pg,extractedContent:xa,rawResult:eu,evaluations:Ge,errorData:be,imageGenerations:Be,partialCost:bt,wasStopped:Et,...rt}=Wt;return rt}),xi=P.providers.filter(Wt=>Wt.enabled!==!1),vi=localStorage.getItem("proxy_settings");let Xc,Jc;if(vi)try{const Wt=JSON.parse(vi);Wt.enabled&&Wt.username&&Wt.password&&(Xc=Wt.username,Jc=Wt.password,console.log("🌐 Proxy settings loaded from localStorage:",Wt.username))}catch(Wt){console.error("Failed to parse proxy settings:",Wt)}const us={providers:xi,messages:qa,temperature:.7,stream:!0,optimization:P.optimization||"cheap",language:P.language||"en",voiceMode:st};console.log(`🎯 Model selection optimization: ${us.optimization}`),console.log(`🌐 Response language: ${us.language}`),st&&console.log("🎙️ Voice mode enabled - dual response format requested"),W&&(us.location={latitude:W.latitude,longitude:W.longitude,accuracy:W.accuracy,address:W.address,timestamp:W.timestamp},console.log("📍 Including location in request:",W.address?.city||`${W.latitude.toFixed(4)}, ${W.longitude.toFixed(4)}`)),Xc&&Jc&&(us.proxyUsername=Xc,us.proxyPassword=Jc,console.log("🌐 Including proxy credentials in request")),P.tavilyApiKey&&P.tavilyApiKey.trim()&&(us.tavilyApiKey=P.tavilyApiKey,console.log("Including Tavily API key in request")),Ve.length>0&&(us.tools=Ve,console.log("Sending streaming request with tools:",Ve.map(Wt=>Wt.function.name)));const Ud=ir.filter(Wt=>Wt.enabled);Ud.length>0&&(us.mcp_servers=Ud.map(Wt=>({name:Wt.name,url:Wt.url})),console.log("[MCP] Sending MCP servers:",Ud.map(Wt=>Wt.name).join(", ")));const Wy=await h(),$d=Wc.current;$d&&(console.log("🔗 Using request ID from voice transcription:",$d),Wc.current=null),await yw(us,s,(Wt,X)=>{switch(console.log("SSE Event:",Wt,X),Wt){case"status":break;case"delta":X.content&&(Rr(Ge=>Ge+X.content),Ft||rr("Assistant is responding"),G(Ge=>{const be=Ge.length-1,Be=Ge[be];console.log("🟦 Delta received, lastMessage role:",Be?.role,"isStreaming:",Be?.isStreaming,"hasContent:",!!Be?.content,"contentLength:",Be?.content?.length||0);const bt=Be?.role==="tool";if(Be&&Be.role==="assistant"&&!bt){const Et=[...Ge];return Et[be]={...Be,content:(Be.content||"")+X.content,isStreaming:!0},console.log("🟦 Updating assistant at index:",be,"newContentLength:",Et[be].content.length),Et}else{const Et={role:"assistant",content:X.content,isStreaming:!0};return console.log("🟦 Creating NEW streaming block, reason:",bt?"tool execution":"no assistant message"),[...Ge,Et]}}),G(Ge=>{const be=Ge.length-1,Be=Ge[be];return Be&&Be.role==="assistant"&&Be.isStreaming&&(tr(be),console.log("🔵 Set currentStreamingBlockIndex to:",be)),Ge}));break;case"tool_call_start":console.log("� Tool call starting:",X.name,"currentStreamingBlockIndex:",Xt);const Fn=X.name?.replace(/_/g," ")||"tool";rr(`Executing ${Fn}`),pt(Ge=>[...Ge,{id:X.id,name:X.name,status:"starting"}]),console.log("📋 Adding tool_call to assistant message:",{id:X.id,name:X.name,hasArguments:!!X.arguments,argumentsLength:X.arguments?.length}),G(Ge=>{const be=[...Ge];for(let Be=be.length-1;Be>=0;Be--)if(be[Be].role==="assistant"){if(console.log("✅ Found assistant message at index",Be,"current tool_calls:",be[Be].tool_calls),be[Be].tool_calls||(be[Be]={...be[Be],tool_calls:[]}),be[Be].tool_calls?.find(rt=>rt.id===X.id)){console.log("⚠️ Tool call already exists, skipping:",X.id);break}const Et={id:X.id,type:"function",function:{name:X.name,arguments:X.arguments||"{}"}};be[Be].tool_calls=[...be[Be].tool_calls||[],Et],console.log("✅ Added tool_call:",Et),console.log("✅ Updated message tool_calls:",be[Be].tool_calls);break}return be});break;case"tool_call_progress":pt(Ge=>Ge.map(be=>be.id===X.id?{...be,status:"executing"}:be));break;case"image_generation_progress":console.log("🎨 Image generation progress event:",X),G(Ge=>{const be=[...Ge];for(let Be=be.length-1;Be>=0;Be--)if(be[Be].role==="assistant"){be[Be].imageGenerations||(be[Be].imageGenerations=[]);const bt=be[Be].imageGenerations,Et=bt.findIndex(rt=>rt.id===X.id||X.prompt&&rt.prompt===X.prompt);if(Et>=0){const rt=bt[Et];bt[Et]={...rt,phase:X.phase,provider:X.provider||rt.provider,model:X.model||rt.model,estimatedSeconds:X.estimated_seconds||rt.estimatedSeconds,status:X.phase==="error"?"error":"generating"}}else bt.push({id:X.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,provider:X.provider||"unknown",model:X.model||"unknown",cost:X.estimated_cost||0,prompt:X.prompt||"",size:X.size||"1024x1024",qualityTier:X.quality||"standard",status:"generating",phase:X.phase,estimatedSeconds:X.estimated_seconds,ready:!1});break}return be});break;case"image_complete":console.log("🎨 Image complete event:",{hasUrl:!!X.url,url:X.url,provider:X.provider,model:X.model,quality:X.qualityTier}),G(Ge=>{const be=[...Ge];for(let Be=be.length-1;Be>=0;Be--)if(be[Be].role==="assistant"){be[Be].imageGenerations||(be[Be].imageGenerations=[]);const bt=be[Be].imageGenerations,Et=X.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rt=bt.findIndex(dn=>dn.id===Et),Nr={id:Et,provider:X.provider||"unknown",model:X.model||"unknown",modelKey:X.model,cost:X.cost||0,prompt:X.prompt||"",size:X.size||"1024x1024",style:X.style||"natural",qualityTier:X.qualityTier||"standard",status:"downloading",imageUrl:X.url,base64:void 0,ready:!1,llmApiCall:X.llmApiCall,revisedPrompt:X.revisedPrompt};rt>=0?bt[rt]=Nr:bt.push(Nr);break}return be}),X.url&&X.id&&(async()=>{try{console.log("📥 Downloading image via Lambda proxy:",X.url);const Ge=await kn(),be=await fetch(`${Ge}/proxy-image`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({url:X.url,format:"base64"})});if(!be.ok)throw new Error(`Proxy fetch failed: ${be.status}`);const Be=await be.json();if(!Be.success||!Be.dataUri)throw new Error("Invalid proxy response");console.log("✅ Image downloaded via proxy, size:",Be.size,"bytes"),console.log("📦 Proxy data keys:",Object.keys(Be)),console.log("📦 Data URI prefix:",Be.dataUri?.substring(0,50));const bt=Be.dataUri;G(Et=>{const rt=[...Et];console.log("🔄 Updating messages, total:",rt.length);for(let Nr=rt.length-1;Nr>=0;Nr--)if(rt[Nr].role==="assistant"&&rt[Nr].imageGenerations){const dn=rt[Nr].imageGenerations;console.log(`🔍 Checking message ${Nr}, imageGenerations:`,dn.length);const mn=dn.findIndex(qr=>qr.id===X.id);if(console.log(`🔍 Found image at index: ${mn}, searching for ID: ${X.id}`),mn>=0){const qr={...dn[mn]};dn[mn]={...dn[mn],status:"complete",base64:bt,imageUrl:bt,ready:!0};const Hr=dn[mn];console.log("✅ Updated image with base64 data"),console.log("   Before:",{status:qr.status,hasBase64:!!qr.base64,ready:qr.ready}),console.log("   After:",{status:Hr.status,hasBase64:!!Hr.base64,ready:Hr.ready});break}}return rt})}catch(Ge){console.error("❌ Failed to download/convert image:",Ge),G(be=>{const Be=[...be];for(let bt=Be.length-1;bt>=0;bt--)if(Be[bt].role==="assistant"&&Be[bt].imageGenerations){const Et=Be[bt].imageGenerations,rt=Et.findIndex(Nr=>Nr.id===X.id);if(rt>=0){Et[rt]={...Et[rt],status:"error",ready:!1};break}}return Be})}})();break;case"tool_call_result":pt(Ge=>Ge.map(be=>be.id===X.id?{...be,status:X.error?"error":"complete",result:X.content}:be));const Tn=X.name?.replace(/_/g," ")||"tool";if(X.error?rr(`${Tn} failed`):rr(`${Tn} complete`),X.name==="search_web"&&(console.log("🔍 Clearing search progress after search_web completion"),dt(new Map)),X.name==="search_youtube"&&(console.log("🎬 Clearing YouTube search progress after search_youtube completion"),Lt(new Map)),X.name==="execute_javascript"&&(console.log("💻 Clearing JavaScript execution progress after execute_javascript completion"),fi(new Map)),X.name==="generate_image"&&(console.log("🎨 Clearing image generation progress after generate_image completion"),Yn(new Map)),X.name==="generate_chart"&&(console.log("📊 Clearing chart generation progress after generate_chart completion"),Fr(new Map)),G(Ge=>{console.log("🟪 Embedding tool result in assistant message, tool:",X.name,"tool_call_id:",X.id),console.log("🟪 Current messages array length:",Ge.length);const be=[...Ge];let Be=[];console.log("🟪 Assistant messages in array:"),Ge.forEach((rt,Nr)=>{rt.role==="assistant"&&console.log(`  [${Nr}] has tool_calls:`,!!rt.tool_calls,rt.tool_calls?`(${rt.tool_calls.length} calls: ${rt.tool_calls.map(dn=>dn.id).join(", ")})`:"")});let bt=-1;for(let rt=0;rt<be.length;rt++)if(be[rt].role==="assistant"&&be[rt].tool_calls){if(be[rt].tool_calls?.some(dn=>dn.id===X.id)){bt=rt,console.log("🟪 ✅ Found FIRST assistant with matching tool call at index:",rt,"of",be.length);const dn=be[rt].llmApiCalls?.filter(qr=>qr.phase&&qr.tool==="search_web"&&(qr.phase==="page_summary"||qr.phase==="synthesis_summary"||qr.phase==="description_summary"))||[];dn.length>0&&(Be=dn);const mn={role:"tool",content:X.content,tool_call_id:X.id,name:X.name,...Be.length>0&&{llmApiCalls:Be}};if(be[rt].toolResults?be[rt]={...be[rt],toolResults:[...be[rt].toolResults||[],mn]}:be[rt]={...be[rt],toolResults:[mn]},console.log("🟪 Embedded tool result in assistant message at index",rt,", total toolResults:",be[rt].toolResults?.length),X.name==="execute_javascript"){const qr=(be[rt].toolResults?.length||1)-1,Hr=rt*1e3+qr;console.log("💻 Auto-expanding execute_javascript result at key:",Hr),cr(ds=>{const Yr=new Set(ds);return Yr.add(Hr),Yr})}bt=rt;break}}else be[rt].role==="assistant"&&console.log(`  [${rt}] is assistant but has no tool_calls`);return bt!==-1||(console.warn("🟪 ⚠️ Could not find assistant message with matching tool_call_id:",X.id),console.warn("🟪 Available tool_call_ids:",be.filter(rt=>rt.role==="assistant"&&rt.tool_calls).flatMap(rt=>rt.tool_calls?.map(Nr=>Nr.id)||[]))),be}),X.name==="search_web"&&X.content){const Ge=Y$(X.name,X.content);Ge&&(p(Ge),console.log("Search result added to SearchTab:",Ge))}break;case"tool_progress":console.log("📊 Tool progress event:",X),X.tool_call_id&&(X.tool_name==="scrape_web_content"?Or(Ge=>{const be=new Map(Ge),Be=be.get(X.tool_call_id)||[];return be.set(X.tool_call_id,[...Be,X]),be}):Qe(Ge=>{const be=new Map(Ge),Be=be.get(X.tool_call_id)||[];return be.set(X.tool_call_id,[...Be,X]),be}));break;case"search_progress":if(console.log("🔍 Search progress event:",X),console.log("🔍 Current searchProgress size:",Ar.size),console.log("🔍 isLoading:",ue),X.tool==="search_web"){X.phase==="searching"&&dt(new Map);let Ge;X.phase==="fetching_result"||X.phase==="result_loaded"||X.phase==="result_failed"?Ge=`search_web_result_${X.result_index||0}`:Ge=`search_web_${X.phase}`,dt(be=>{const Be=new Map(be);return Be.set(Ge,X),console.log("🔍 Updated searchProgress, new size:",Be.size,"key:",Ge),Be}),(X.phase==="searching"||X.phase==="results_found")&&G(be=>{for(let Be=be.length-1;Be>=0;Be--){const bt=be[Be];if(bt.role==="assistant"&&bt.tool_calls&&bt.tool_calls.findIndex(rt=>rt.function.name==="search_web")!==-1){cr(rt=>{const Nr=new Set(rt);return Nr.add(Be),Nr});break}}return be})}break;case"youtube_search_progress":console.log("🎬 YouTube search progress event:",X),X.phase==="searching"&&Lt(new Map);const Wo=`youtube_${X.phase}`;Lt(Ge=>{const be=new Map(Ge);return be.set(Wo,X),be}),X.phase==="complete"&&setTimeout(()=>{Lt(new Map)},1e3),X.phase==="searching"&&G(Ge=>{for(let be=Ge.length-1;be>=0;be--){const Be=Ge[be];if(Be.role==="assistant"&&Be.tool_calls&&Be.tool_calls.findIndex(Et=>Et.function.name==="search_youtube")!==-1){cr(Et=>{const rt=new Set(Et);return rt.add(be),rt});break}}return Ge});break;case"javascript_execution_progress":console.log("💻 JavaScript execution progress:",X);const Ul=X.phase==="console_output"?`js_output_${X.output_number||Date.now()}`:`js_${X.phase}`;fi(Ge=>{const be=new Map(Ge);return be.set(Ul,X),be}),(X.phase==="completed"||X.phase==="error")&&setTimeout(()=>{fi(new Map)},2e3);break;case"image_generation_progress":console.log("🎨 Image generation progress:",X);const qd=`img_${X.phase}`;Yn(Ge=>{const be=new Map(Ge);return be.set(qd,X),be}),(X.phase==="completed"||X.phase==="error")&&setTimeout(()=>{Yn(new Map)},2e3);break;case"chart_generation_progress":console.log("📊 Chart generation progress:",X);const Zc=`chart_${X.phase}`;Fr(Ge=>{const be=new Map(Ge);return be.set(Zc,X),be}),X.phase==="completed"&&setTimeout(()=>{Fr(new Map)},2e3);break;case"scrape_progress":case"transcript_extracted":if(Wt==="transcript_extracted"){console.log("📊 Skipping transcript_extracted event (hidden from UI):",X);break}console.log("📊 Content extraction event:",X),X.phase==="content_extracted"&&is(Ge=>{const be=new Map(Ge),Be=X.url||`extraction_${Date.now()}`;return be.set(Be,X),be});break;case"message_complete":X.tool_calls&&X.tool_calls.length>0&&console.log("📦 message_complete with tool_calls:",X.tool_calls.map(Ge=>({id:Ge.id,name:Ge.function.name}))),rr("Response complete"),console.log("🖼️ message_complete imageGenerations:",X.imageGenerations?.length||0,"imageGenerations:",X.imageGenerations),Xt!==null?(G(Ge=>{const be=[...Ge];if(be[Xt]){let Be=be[Xt].imageGenerations||[];X.imageGenerations&&X.imageGenerations.length>0&&(Be=[...Be],X.imageGenerations.forEach(Et=>{const rt=Be.findIndex(Nr=>Nr.id===Et.id);rt>=0?Be[rt]={...Be[rt],...Et}:Be.push(Et)}));const bt={...be[Xt],content:X.content||be[Xt].content||"",tool_calls:X.tool_calls||be[Xt].tool_calls,extractedContent:X.extractedContent||be[Xt].extractedContent,imageGenerations:Be,llmApiCalls:X.llmApiCalls||be[Xt].llmApiCalls,evaluations:X.evaluations||be[Xt].evaluations,isStreaming:!1};X.toolResults&&bt.toolResults&&(bt.toolResults=bt.toolResults.map(Et=>{const rt=X.toolResults.find(Nr=>Nr.tool_call_id===Et.tool_call_id);return rt?{...Et,rawResponse:rt.rawResponse,extractionMetadata:rt.extractionMetadata}:Et})),be[Xt]=bt}return be}),tr(null),Rr("")):(X.content||X.tool_calls)&&(G(Ge=>{const be=Ge[Ge.length-1],Be=Ge.length-1,bt=(X.content||"").trim(),Et=be?.content?Sr(be.content).trim():"";let rt=!1;for(let mn=Ge.length-1;mn>=0&&Ge[mn].role!=="assistant";mn--)if(Ge[mn].role==="tool"){rt=!0;break}if(rt){if(be?.role==="assistant"&&be.isStreaming){console.log("🟡 Updating last assistant message with message_complete data");const qr=[...Ge];let Hr=be.imageGenerations||[];X.imageGenerations&&X.imageGenerations.length>0&&(Hr=[...Hr],X.imageGenerations.forEach(Yr=>{const Jn=Hr.findIndex(hs=>hs.id===Yr.id);Jn>=0?Hr[Jn]={...Hr[Jn],...Yr}:Hr.push(Yr)}));const ds={...be,content:X.content||be.content||"",tool_calls:X.tool_calls||be.tool_calls,extractedContent:X.extractedContent||be.extractedContent,imageGenerations:Hr,llmApiCalls:X.llmApiCalls||be.llmApiCalls,evaluations:X.evaluations||be.evaluations,isStreaming:!1};return X.toolResults&&ds.toolResults&&(ds.toolResults=ds.toolResults.map(Yr=>{const Jn=X.toolResults.find(hs=>hs.tool_call_id===Yr.tool_call_id);return Jn?(console.log("🟪 Updating embedded toolResult with rawResponse:",{tool_call_id:Yr.tool_call_id,hasRawResponse:!!Jn.rawResponse,rawResponseLength:Jn.rawResponse?.length}),{...Yr,rawResponse:Jn.rawResponse,extractionMetadata:Jn.extractionMetadata}):Yr})),qr[Be]=ds,qr}console.log("🟢 Creating new assistant message for new iteration");const mn={role:"assistant",content:X.content||"",...X.tool_calls&&{tool_calls:X.tool_calls},...X.extractedContent&&{extractedContent:X.extractedContent},...X.imageGenerations&&{imageGenerations:X.imageGenerations},...X.llmApiCalls&&{llmApiCalls:X.llmApiCalls},...X.evaluations&&{evaluations:X.evaluations}};return[...Ge,mn]}if(be?.role==="assistant"&&(be.isStreaming||!Et||Et&&bt.startsWith(Et))){console.log("🟡 Updating last assistant message with message_complete data"),console.log("🖼️ lastMessage.imageGenerations:",be.imageGenerations),console.log("🖼️ data.imageGenerations:",X.imageGenerations);const qr=[...Ge];let Hr=be.imageGenerations||[];console.log("🖼️ mergedImageGenerations BEFORE merge:",Hr),X.imageGenerations&&X.imageGenerations.length>0&&(Hr=[...Hr],X.imageGenerations.forEach(Yr=>{console.log("🖼️ Processing imageGeneration from message_complete:",{id:Yr.id,hasBase64:!!Yr.base64,base64Length:Yr.base64?.length,hasImageUrl:!!Yr.imageUrl});const Jn=Hr.findIndex(hs=>hs.id===Yr.id);if(Jn>=0){const hs=Hr[Jn].base64;console.log("🖼️ Merging - existing has base64:",!!hs,"new has base64:",!!Yr.base64),Hr[Jn]={...Hr[Jn],...Yr,base64:Yr.base64||hs},console.log("🖼️ After merge - has base64:",!!Hr[Jn].base64)}else Hr.push(Yr),console.log("🖼️ Added new image to merge")})),console.log("🖼️ mergedImageGenerations AFTER merge:",Hr);const ds={...be,content:X.content||be.content||"",tool_calls:X.tool_calls||be.tool_calls,extractedContent:X.extractedContent||be.extractedContent,imageGenerations:Hr,llmApiCalls:X.llmApiCalls||be.llmApiCalls,evaluations:X.evaluations||be.evaluations,isStreaming:!1};return console.log("🖼️ updatedMessage.imageGenerations:",ds.imageGenerations),qr[Be]=ds,console.log("🖼️ newMessages[lastMessageIndex].imageGenerations:",qr[Be].imageGenerations),console.log("🖼️ RETURNING newMessages array:",qr.map((Yr,Jn)=>({idx:Jn,role:Yr.role,hasImageGenerations:!!Yr.imageGenerations,imageGenerationsLength:Yr.imageGenerations?.length,actualImageGenerations:Yr.imageGenerations}))),qr}if(be?.role==="assistant"&&!be.isStreaming&&Et===bt)return console.log("🟡 Skipping duplicate final message block (content matches non-streaming block)"),Ge;const Nr={role:"assistant",content:X.content||"",...X.tool_calls&&{tool_calls:X.tool_calls},...X.extractedContent&&{extractedContent:X.extractedContent},...X.imageGenerations&&{imageGenerations:X.imageGenerations},...X.llmApiCalls&&{llmApiCalls:X.llmApiCalls},...X.evaluations&&{evaluations:X.evaluations}};if(X.content?.includes("Based on the search results above")||X.content?.includes("I apologize, but I was unable to generate a response")||X.content?.includes("I was unable to provide")||!X.content&&!X.tool_calls||X.content&&X.content.trim().length<10&&!X.tool_calls){let mn=-1;for(let qr=Ge.length-1;qr>=0;qr--)if(Ge[qr].role==="user"){mn=qr;break}Nr.isRetryable=!0,Nr.originalErrorMessage="Incomplete or fallback response",Nr.originalUserPromptIndex=mn>=0?mn:void 0,Nr.retryCount=0}return[...Ge,Nr]}),Rr(""));break;case"provider_fallback":console.log("⚠️ Provider fallback:",X);const Pg=`⚠️ ${X.originalModel} hit rate limit, switching to ${X.fallbackModel} (attempt ${X.attempt})`;G(Ge=>[...Ge,{role:"system",content:Pg,timestamp:new Date().toISOString(),metadata:{type:"provider_fallback",originalModel:X.originalModel,fallbackModel:X.fallbackModel,fallbackProvider:X.fallbackProvider,reason:X.reason,attempt:X.attempt,phase:X.phase,iteration:X.iteration}}]);break;case"complete":console.log("Stream complete:",X),X.shortResponse&&st&&(console.log(`🎙️ Received short response for TTS (${X.shortResponse.length} chars)`),q(X.shortResponse,{shouldSummarize:!1,onStart:()=>{console.log("🎙️ TTS started speaking short response")},onEnd:()=>{console.log("🎙️ TTS finished speaking - ContinuousVoiceMode will auto-restart recording")},onError:Ge=>{console.error("🎙️ TTS error:",Ge),T("TTS playback failed")}}).catch(Ge=>{console.error("🎙️ Failed to start TTS:",Ge),T("Failed to speak response")})),X.extractedContent&&(console.log("📦 Attaching extractedContent from complete event:",{hasAllImages:!!X.extractedContent.allImages,allImagesCount:X.extractedContent.allImages?.length||0,hasImages:!!X.extractedContent.images,imagesCount:X.extractedContent.images?.length||0}),G(Ge=>{const be=[...Ge];for(let Be=be.length-1;Be>=0;Be--)if(be[Be].role==="assistant"){be[Be]={...be[Be],extractedContent:X.extractedContent},console.log(`✅ Attached extractedContent to assistant message at index ${Be}`);break}return be})),X.cost&&typeof X.cost=="number"&&(M(X.cost),jl(X.cost),console.log(`💰 Request cost: $${X.cost.toFixed(4)}`));break;case"error":const xa=X.error;if(X.type==="input_moderation_error"){console.warn("🛡️ Input moderation error:",X.reason);const be={role:"assistant",content:`❌ **Content Moderation Alert**

${xa}

**Reason**: ${X.reason}

**Violations**: ${X.violations?.join(", ")||"Unknown"}`,llmApiCalls:X.llmApiCalls||[]};if(G(Be=>[...Be,be]),X.suggestedRevision){z(X.suggestedRevision);const Be={role:"assistant",content:`💡 **Suggested Revision**

We've updated your message to comply with content policies. You can edit and send it again.`};G(bt=>[...bt,Be])}else z("");break}if(X.type==="output_moderation_error"){console.warn("🛡️ Output moderation error:",X.reason);const Ge=`❌ **Content Moderation Alert**

The generated response was flagged by our content moderation system and cannot be displayed.

**Reason**: ${X.reason}

Please try rephrasing your question.`;G(be=>{const Be=[...be];for(let bt=Be.length-1;bt>=0;bt--)if(Be[bt].role==="assistant"){Be[bt]={...Be[bt],content:Ge,guardrailFailed:!0,guardrailReason:X.reason,guardrailViolations:X.violations,llmApiCalls:X.llmApiCalls||Be[bt].llmApiCalls||[],isStreaming:!1},console.log(`🛡️ Replaced assistant message content at index ${bt} with guardrail error`);break}return Be});break}if(X.type==="guardrail_configuration_error"||X.type==="guardrail_system_error"){console.error("🛡️ Guardrail system error:",X.error);const be={role:"assistant",content:`❌ **System Error**

${xa}

The content moderation system is experiencing issues. Please contact support if this persists.`};G(Be=>[...Be,be]),T(xa);break}T(xa),(xa.includes("Authentication")||xa.includes("UNAUTHORIZED")||X.code==="UNAUTHORIZED")&&(console.warn("⚠️ Authentication error detected, logging out..."),k(i("chat.sessionExpired"))),X.code==="MAX_ITERATIONS"&&X.showContinueButton&&X.continueContext&&(console.log("🔄 Continue button enabled for MAX_ITERATIONS error:",xa),Qn(!0),$r(X.continueContext));const eu={role:"assistant",content:`❌ Error: ${xa}`,errorData:X,isRetryable:!0,originalErrorMessage:xa,originalUserPromptIndex:Xe,retryCount:0};G(Ge=>[...Ge,eu]);break;case"llm_request":console.log("🔵 LLM API Request:",X),G(Ge=>{const be=[...Ge],bt=be[be.length-1]?.role==="tool";let Et=!1;if(!bt){for(let rt=be.length-1;rt>=0;rt--)if(be[rt].role==="assistant"){const Nr=Sr(be[rt].content);be[rt].isStreaming||!be[rt].content||Nr.trim().length===0?(console.log("🔵 Attaching llmApiCalls to active assistant at index:",rt,"phase:",X.phase,"provider:",X.provider,"model:",X.model),be[rt]={...be[rt],llmApiCalls:[...be[rt].llmApiCalls||[],{phase:X.phase,provider:X.provider||"Unknown",model:X.model||"Unknown",request:X.request,timestamp:X.timestamp}]},Et=!0):console.log("🔵 Skipping completed assistant at index:",rt,"(from previous query)");break}}return Et||(console.log("🔵 Creating new placeholder for llm_request, reason:",bt?"tools executed":"no active assistant","provider:",X.provider,"model:",X.model),be.push({role:"assistant",content:"",isStreaming:!0,llmApiCalls:[{phase:X.phase,provider:X.provider||"Unknown",model:X.model||"Unknown",request:X.request,timestamp:X.timestamp}]})),be});break;case"llm_response":console.log("🟢 LLM API Response:",X),G(Ge=>{const be=[...Ge];for(let Be=be.length-1;Be>=0;Be--)if(be[Be].role==="assistant"&&be[Be].llmApiCalls){const bt=be[Be].llmApiCalls,Et=bt[bt.length-1];Et&&Et.phase===X.phase&&!Et.response&&(Et.response=X.response,Et.httpHeaders=X.httpHeaders,Et.httpStatus=X.httpStatus,X.provider&&(Et.provider=X.provider),X.model&&(Et.model=X.model),console.log("🟢 Updated llmApiCall response for phase:",X.phase,"provider:",Et.provider,"model:",Et.model),be[Be]={...be[Be],llmApiCalls:[...bt]});break}return be});break;case"todos_updated":console.log("✅ Todos updated:",X),mt({total:X.total??0,remaining:X.remaining??0,current:X.current??null,items:Array.isArray(X.items)?X.items:[]});break;case"todos_current":console.log("✅ Todos current update:",X),mt(Ge=>({total:X.total??Ge?.total??0,remaining:X.remaining??Ge?.remaining??0,current:X.current??Ge?.current??null,items:Ge?.items??[]}));break;case"todos_resubmitting":console.log("🔄 Todos resubmitting:",X),ga(X?.next||X?.state?.current?.description||null),setTimeout(()=>ga(null),2e3);break;case"todos_limit_reached":console.log("⚠️ Todos limit reached:",X),k(X.message||"Todo auto-progression limit reached. Please continue manually.");break;case"snippet_inserted":console.log("📝 Snippet inserted:",X),window.dispatchEvent(new CustomEvent("snippet_inserted",{detail:X})),C(i("chat.snippetSaved",{title:X.title})),X.id&&(console.log("🔄 Triggering snippet sync from Google Sheets for ID:",X.id),setTimeout(async()=>{try{await v(X.id)}catch(Ge){console.error("❌ Failed to sync snippet:",Ge)}},500));break;case"snippet_deleted":console.log("🗑️ Snippet deleted:",X),window.dispatchEvent(new CustomEvent("snippet_deleted",{detail:X})),C(i("chat.snippetDeleted",{title:X.title}));break;case"snippet_updated":console.log("✏️ Snippet updated:",X),window.dispatchEvent(new CustomEvent("snippet_updated",{detail:X})),C(`Updated snippet: ${X.title}`);break;case"token_refreshed":console.log("🔄 Google OAuth token refreshed"),X.accessToken&&(localStorage.setItem("google_access_token",X.accessToken),console.log("✅ Updated google_access_token in localStorage"));break}},()=>{Ee&&clearTimeout(Ee),Z(!1),pt([]),Rr(""),tr(null),_n.current=null},Wt=>{Ee&&clearTimeout(Ee),console.error("Streaming error:",Wt),T(`Streaming error: ${Wt.message}`),Z(!1),pt([]),_n.current=null},_n.current.signal,Wy,$d)}catch(Ie){if(console.error("Chat error:",Ie),Ee&&clearTimeout(Ee),Ie instanceof Error&&Ie.name==="AbortError"){const fe={role:"assistant",content:"⏱️ Request timed out after 4 minutes. This may happen when tools take too long to execute. Try simplifying your request or disabling some tools.",isRetryable:!0,originalErrorMessage:"Request timed out",originalUserPromptIndex:Xe,retryCount:0};G(He=>[...He,fe]),k("Request timed out after 4 minutes. Try disabling some tools or simplifying your request.")}else{const fe=Ie instanceof Error?Ie.message:"Unknown error",He={role:"assistant",content:`❌ Error: ${fe}`,errorData:Ie instanceof Error?{...Ie,message:Ie.message,name:Ie.name,stack:Ie.stack}:{message:String(Ie)},isRetryable:!0,originalErrorMessage:fe,originalUserPromptIndex:Xe,retryCount:0};G(We=>[...We,He]),T(`Chat error: ${fe}`)}Z(!1),pt([]),_n.current=null}};_.useEffect(()=>{ot&&U.trim()&&!ue&&(console.log("🚀 Auto-submitting feed question:",U.substring(0,50)+"..."),Tt(!1),setTimeout(()=>{lo()},300))},[ot,U,ue]);const Oy=async B=>{const te=I[B];if(!te||!te.isRetryable){T("This message cannot be retried");return}const Se=te.retryCount||0;if(Se>=3){T("Maximum retry attempts (3) reached");return}const Xe=te.originalUserPromptIndex;if(Xe===void 0||Xe<0){T("Cannot find original user prompt for retry");return}const Me=I[Xe];if(!Me||Me.role!=="user"){T("Invalid user prompt for retry");return}const J=I.slice(Xe+1,B),Ve=J.filter(Ie=>Ie.role==="tool"),Ee=J.filter(Ie=>Ie.role==="assistant"||Ie.role==="tool");if(console.log("🔄 Retrying request:",{userPromptIndex:Xe,messageIndex:B,retryCount:Se+1,previousToolResults:Ve.length,intermediateMessages:Ee.length,failureReason:te.originalErrorMessage}),C(`Retrying request (attempt ${Se+2}) with full context...`),G(Ie=>Ie.slice(0,B)),typeof Me.content=="string")z(Me.content);else if(Array.isArray(Me.content)){const Ie=Me.content.find(He=>He.type==="text");z(Ie?.text||"");const fe=Me.content.filter(He=>He.type==="image_url");if(fe.length>0){const He=fe.map((We,Le)=>{const Gt=(We.image_url?.url||"").match(/^data:([^;]+);base64,(.+)$/);return Gt?{name:`restored_image_${Le+1}.png`,type:Gt[1],base64:Gt[2]}:null}).filter(Boolean);He.length>0&&(_s(He),console.log(`🖼️ Restored ${He.length} image(s) for retry`))}}ss.current=!0},zd=async B=>{const te=await a3(B.id);te&&te.messages?(G(te.messages),ha(B.id),localStorage.setItem("last_active_chat_id",B.id),te.systemPrompt&&H(te.systemPrompt),te.planningQuery&&_t(te.planningQuery),te.generatedSystemPrompt&&Bt(te.generatedSystemPrompt),te.generatedUserQuery&&At(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)?(Kn(new Set(te.selectedSnippetIds)),console.log(`📎 Restored ${te.selectedSnippetIds.length} attached snippets`)):Kn(new Set),pe(!1),C(i("chat.loadChatSuccess"))):T(i("chat.failedToLoadChat"))},jy=async B=>{await i3(B);const te=await Qv();le(te),C("Chat deleted")},By=async()=>{if(Te.size===0)return;const B=Te.size;for(const Se of Te)await i3(Se);const te=await Qv();le(te),$e(new Set),C(`${B} chat${B>1?"s":""} deleted`)},Fy=()=>{const B=new Set(nn.map(te=>te.id));$e(B)},Ng=()=>{$e(new Set)},zy=B=>{const te=new Set(Te);te.has(B)?te.delete(B):te.add(B),$e(te)},Uy=async()=>{await y0e(),le([]),$e(new Set),_e(!1),pe(!1),C(i("chat.allChatHistoryCleared"))},$y=async()=>{if(!Cn){T("No continuation context available");return}console.log("🔄 Continuing from error/limit with context:",Cn),Qn(!1),A();const B=[];t.web_search&&B.push({type:"function",function:{name:"web_search",description:"Search the web for information",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"}},required:["query"]}}}),t.execute_js&&B.push({type:"function",function:{name:"execute_js",description:"Execute JavaScript code",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute"}},required:["code"]}}}),t.scrape_url&&B.push({type:"function",function:{name:"scrape_web_content",description:"Scrape content from a URL",parameters:{type:"object",properties:{url:{type:"string",description:"URL to scrape"}},required:["url"]}}});const Se={providers:P.providers.filter(Me=>Me.enabled===!0),messages:Cn.messages,temperature:.7,stream:!0,isContinuation:!0,optimization:P.optimization||"cheap",language:P.language||"en"};console.log(`🎯 Continuation request with optimization: ${Se.optimization}`),console.log(`🌐 Response language: ${Se.language}`),W&&(Se.location={latitude:W.latitude,longitude:W.longitude,accuracy:W.accuracy,address:W.address,timestamp:W.timestamp},console.log("📍 Including location in continuation request:",W.address?.city||`${W.latitude.toFixed(4)}, ${W.longitude.toFixed(4)}`)),B.length>0&&(Se.tools=B),Cn.extractedContent&&(Se.extractedContent=Cn.extractedContent);const Xe=ir.filter(Me=>Me.enabled);if(Xe.length>0&&(Se.mcp_servers=Xe.map(Me=>({name:Me.name,url:Me.url}))),Z(!0),!s){T("Please sign in to continue"),Qn(!0),Z(!1);return}try{await yw(Se,s,(Me,J)=>{switch(console.log("SSE Event (continuation):",Me,J),Me){case"delta":J.content&&(Rr(Ie=>Ie+J.content),G(Ie=>{const fe=Ie.length-1,He=Ie[fe],We=He?.role==="tool";if(He&&He.role==="assistant"&&!We){const Le=[...Ie];return Le[fe]={...He,content:(He.content||"")+J.content,isStreaming:!0},Le}else{const Le={role:"assistant",content:J.content,isStreaming:!0};return[...Ie,Le]}}));break;case"error":const Ve=J.error;T(Ve),rr(`Error: ${Ve.substring(0,100)}`),J.showContinueButton&&J.continueContext&&(Qn(!0),$r(J.continueContext));const Ee={role:"assistant",content:`❌ Error: ${Ve}`,errorData:J,isRetryable:!0,originalErrorMessage:Ve,retryCount:0};G(Ie=>[...Ie,Ee]);break;case"complete":console.log("Continuation complete:",J),J.cost&&typeof J.cost=="number"&&M(J.cost);break;case"todos_updated":console.log("✅ Todos updated:",J),mt({total:J.total??0,remaining:J.remaining??0,current:J.current??null,items:Array.isArray(J.items)?J.items:[]});break;case"todos_current":console.log("✅ Todos current update:",J),mt(Ie=>({total:J.total??Ie?.total??0,remaining:J.remaining??Ie?.remaining??0,current:J.current??Ie?.current??null,items:Ie?.items??[]}));break;case"todos_resubmitting":console.log("🔄 Todos resubmitting:",J),ga(J?.next||J?.state?.current?.description||null),setTimeout(()=>ga(null),2e3);break;case"todos_limit_reached":console.log("⚠️ Todos limit reached:",J),k(J.message||"Todo auto-progression limit reached. Please continue manually.");break;default:console.log("Unhandled event in continuation:",Me,J)}},void 0,void 0,_n.current?.signal)}catch(Me){console.error("Error during continuation:",Me),T(Me instanceof Error?Me.message:"Failed to continue"),Qn(!0)}finally{Z(!1)}},Lg=()=>{G([]),z(""),H(""),_t(""),Bt(""),At(""),Kn(new Set),f(),cr(new Set),ha(null),localStorage.removeItem("last_active_chat_id"),setTimeout(()=>{As.current?.focus()},0),console.log("Started new chat - all prompts cleared")},qy=()=>{!ft.name.trim()||!ft.url.trim()||(lr([...ir,{id:`mcp_${Date.now()}`,name:ft.name,url:ft.url,enabled:!0}]),ur({name:"",url:""}))},Hy=B=>{lr(ir.map(te=>te.id===B?{...te,enabled:!te.enabled}:te))},Gy=B=>{lr(ir.filter(te=>te.id!==B))};return d.jsxs("div",{className:"flex flex-col h-full relative",onDragEnter:Eg,onDragOver:Ly,onDragLeave:Ny,onDrop:Py,children:[d.jsx(Qme,{isDragging:qo}),d.jsx(Wme,{systemPrompt:ie,setSystemPrompt:H}),d.jsx(Vme,{systemPrompt:ie,selectedSnippetIds:fa,showSnippetsPanel:ao,messageCount:I.length,onNewChat:Lg,onShowLoadDialog:()=>pe(!0),onToggleSnippetsPanel:()=>Fl(!ao),onShowExamplesModal:()=>fn(!0),onShowShareDialog:()=>za(!0)}),d.jsxs("div",{ref:ro,className:"flex-1 overflow-y-auto md:px-4 py-4 space-y-4","aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text",children:[d.jsx("div",{className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true",children:ln}),I.length===0&&d.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:"No messages yet. Start a conversation!"}),(console.log("🖼️ RENDER: messages array:",I.map((B,te)=>({idx:te,role:B.role,hasImageGenerations:!!B.imageGenerations,imageGenerationsLength:B.imageGenerations?.length,actualImageGenerations:B.imageGenerations}))),null),I.map((B,te)=>{const Se=hr.has(te),Xe=B.content?Sr(B.content):"";console.log(`Rendering message ${te}:`,B.role,Xe.substring(0,50)),console.log(`🖼️ Message ${te} imageGenerations:`,B.imageGenerations),B.role==="assistant"&&B.tool_calls&&console.log(`  Message ${te} has ${B.tool_calls.length} tool_calls:`,B.tool_calls.map(J=>({id:J.id,name:J.function?.name})));const Me=B.role==="assistant"&&B.tool_calls?.some(J=>{if(J.function.name!=="transcribe_url")return!1;const Ve=De.get(J.id);if(!Ve||Ve.length===0)return!1;const Ee=Ve[Ve.length-1],Ie=Ee.progress_type||Ee.data?.type||"";return!(Ie==="transcribe_complete"||Ie==="transcription_stopped"||Ie==="error")});return B.role==="assistant"&&!B.content&&!Me&&!B.tool_calls&&!B.isStreaming?null:d.jsx("div",{className:`flex gap-2 ${B.role==="user"?"flex-row-reverse":(B.role==="tool","")}`,children:d.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${B.role==="user"?"bg-blue-500 text-white":B.role==="tool"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700":B.content&&Sr(B.content).startsWith("❌ Error:")?"bg-pink-100 dark:bg-pink-900/30 border-2 border-pink-400 dark:border-pink-600 text-gray-900 dark:text-gray-100":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[B.role==="tool"&&(()=>{let J=null;console.log("🔍 Searching for tool_call_id:",B.tool_call_id,"in",I.length,"messages");for(let fe=te-1;fe>=0;fe--)if(I[fe].tool_calls&&(console.log("  Found message at index",fe,"with",I[fe].tool_calls?.length,"tool_calls"),J=I[fe].tool_calls?.find(He=>He.id===B.tool_call_id),J)){console.log("✅ Found tool call for",B.name,":",J);break}J||console.log("❌ No tool call found for",B.tool_call_id);let Ve=null;if(B.name==="search_web"&&typeof B.content=="string")try{const fe=JSON.parse(B.content);fe.results&&Array.isArray(fe.results)&&(Ve=fe.results)}catch{}let Ee=null;if(B.name==="scrape_web_content"&&typeof B.content=="string")try{const fe=JSON.parse(B.content);(fe.url||fe.content||fe.error)&&(Ee=fe)}catch{}let Ie=null;if(B.name==="execute_javascript"&&typeof B.content=="string")try{const fe=JSON.parse(B.content);(fe.result!==void 0||fe.error)&&(Ie=fe)}catch{}return d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[d.jsxs("span",{children:["🔧 ",B.name||"Tool Result"]}),J&&(B.name==="search_web"||B.name==="search_youtube")&&(()=>{try{const fe=JSON.parse(J.function.arguments);if(fe.query)return d.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',fe.query,'"']})}catch{}return null})()]}),d.jsx("button",{onClick:()=>{const fe=new Set(hr);Se?fe.delete(te):fe.add(te),cr(fe)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Se?"Collapse":"Expand",children:Se?"▲":"▼"})]}),Se&&d.jsxs("div",{className:"text-xs space-y-2",children:[J&&d.jsx("div",{className:"mb-3 bg-purple-50 dark:bg-purple-950/50 p-3 rounded border border-purple-200 dark:border-purple-800",children:J.function.name==="search_web"?d.jsxs(d.Fragment,{children:[J.function.arguments&&(()=>{try{const fe=JSON.parse(J.function.arguments);if(fe.query)return d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"🔍 Search Query:"}),d.jsxs("div",{className:"text-purple-900 dark:text-purple-100 italic",children:['"',fe.query,'"']})]})}catch(fe){console.error("Error parsing search arguments:",fe)}return null})(),(()=>{try{if(!B.content)return null;const He=(typeof B.content=="string"?JSON.parse(B.content):B.content)?.searchService;if(He&&typeof He=="string"){const We=He==="tavily";return d.jsxs("div",{className:"mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.searchProvider")}),d.jsx("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${We?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border border-blue-300 dark:border-blue-700":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border border-green-300 dark:border-green-700"}`,children:We?"🔵 Tavily API":"🦆 DuckDuckGo"})]})}}catch(fe){console.error("Error parsing search provider:",fe)}return null})()]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:i("chat.functionCall")}),d.jsx("div",{className:"font-mono text-xs mb-2",children:d.jsx("span",{className:"text-purple-900 dark:text-purple-100",children:J.function.name})}),J.function.arguments&&(()=>{try{const fe=JSON.parse(J.function.arguments);return fe.code?d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.code")}),d.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:fe.code})})]}):d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.arguments")}),d.jsx("div",{className:"bg-gray-900 dark:bg-gray-950 p-3 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:d.jsx(Zp,{data:fe,expandAll:!0})})]})}catch(fe){console.error("Error parsing tool arguments:",fe)}return null})()]})}),B.tool_call_id&&B.name!=="search_web"&&d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:i("chat.callId")}),d.jsx("div",{className:"font-mono text-xs bg-purple-50 dark:bg-purple-950 p-1 rounded mt-1 break-all",children:B.tool_call_id})]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:i("chat.result")}),d.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950 p-2 rounded mt-1 max-h-96 overflow-y-auto",children:[Ve?d.jsx(Hme,{results:Ve}):Ee?d.jsxs("div",{className:"space-y-2",children:[Ee.url&&d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:i("chat.url")}),d.jsx("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block mt-1",children:Ee.url})]}),Ee.rawHtml&&d.jsx("button",{onClick:()=>gt({url:Ee.url,html:Ee.rawHtml}),className:"flex-shrink-0 px-3 py-1.5 text-xs bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors font-medium",title:i("chat.viewRawHtml"),children:"📄 Raw HTML"})]}),Ee.error&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[d.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:i("chat.error")}),d.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1",children:Ee.error})]}),Ee.content&&d.jsxs("div",{children:[d.jsxs("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:["📄 Page Content (",Ee.content.length.toLocaleString()," characters)",Ee.format&&d.jsxs("span",{className:"ml-2 text-xs text-purple-600 dark:text-purple-400",children:["[",Ee.format,"]"]})]}),d.jsx("div",{className:"mt-2 p-3 bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 max-h-80 overflow-y-auto",children:Ee.format==="markdown"?d.jsx("div",{className:"text-xs",children:d.jsx(um,{content:Ee.content})}):d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:Ee.content})})]}),(Ee.images||Ee.allImages||Ee.youtube||Ee.media||Ee.links)&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[d.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-3",children:"📎 Extracted Content"}),d.jsxs("div",{className:"space-y-3",children:[Ee.images&&Ee.images.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["🖼️ Prioritized Images (sent to LLM): ",Ee.images.length]}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Ee.images.map((fe,He)=>d.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[d.jsx("img",{src:fe.src,alt:fe.alt||`Image ${He+1}`,className:"w-full h-24 object-cover rounded mb-1",loading:"lazy"}),fe.alt&&d.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 truncate",children:fe.alt})]},He))})]}),Ee.allImages&&Ee.allImages.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["🖼️ All Images: ",Ee.allImages.length]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:Ee.allImages.slice(0,24).map((fe,He)=>d.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-1",children:d.jsx("img",{src:fe.src,alt:fe.alt||`Image ${He+1}`,className:"w-full h-16 object-cover rounded",loading:"lazy"})},He))}),Ee.allImages.length>24&&d.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Ee.allImages.length-24," more"]})]}),Ee.youtube&&Ee.youtube.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["🎬 YouTube Videos: ",Ee.youtube.length]}),d.jsx("div",{className:"space-y-1",children:Ee.youtube.map((fe,He)=>d.jsx("a",{href:fe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:fe.text||fe.url},He))})]}),Ee.media&&Ee.media.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["🎵 Media (Audio/Video): ",Ee.media.length]}),d.jsx("div",{className:"space-y-1",children:Ee.media.map((fe,He)=>d.jsx("a",{href:fe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:fe.text||fe.url},He))})]}),Ee.links&&Ee.links.length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["🔗 Links: ",Ee.links.length]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:Ee.links.slice(0,20).map((fe,He)=>d.jsx("a",{href:fe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:fe.text||fe.url},He))}),Ee.links.length>20&&d.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Ee.links.length-20," more links"]})]})]})]})]}):Ie?d.jsxs("div",{className:"space-y-3",children:[Ie.error&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[d.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"❌ Error:"}),d.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:Ie.error})]}),Ie.result!==void 0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[d.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"✅ Output:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(Ie.result)),C(i("chat.outputCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:i("chat.copyOutputToClipboard"),children:"Copy"}),d.jsx("button",{onClick:()=>{ls(String(Ie.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:i("chat.captureOutputToSwag"),children:"Grab"})]})]}),J?.executedAt&&d.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mb-2",children:["(",J.runtime||"N/A",")"]}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:d.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(Ie.result)})})]})]}):B.name==="generate_chart"?(()=>{let fe=null;for(let He=te-1;He>=0&&!(I[He].role==="assistant"&&I[He].content&&(fe=Go(I[He].content),fe));He--);return d.jsx(e3,{content:B.content,chartCode:fe||void 0})})():d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:Sr(B.content)}),d.jsx(ZN,{rawResponse:B.rawResponse,extractionMetadata:B.extractionMetadata}),B.content&&d.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[d.jsxs("button",{onClick:()=>ls(Sr(B.content),"tool",B.name),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),B.name==="search_web"&&d.jsx("button",{onClick:()=>B.llmApiCalls&&B.llmApiCalls.length>0?Ue(te):null,className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${B.llmApiCalls&&B.llmApiCalls.length>0?"bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 cursor-pointer":"text-gray-500 dark:text-gray-500 cursor-default"}`,title:B.llmApiCalls&&B.llmApiCalls.length>0?`View LLM summarization info • ${cs(Oi(B))}`:"No LLM summarization used",children:B.llmApiCalls&&B.llmApiCalls.length>0?d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["💰 ",cs(Oi(B))]}),d.jsx("span",{className:"ml-0.5",children:"ℹ️"})]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"text-[10px]",children:i("chat.noSummarization")})]})}),B.name!=="search_web"&&B.llmApiCalls&&B.llmApiCalls.length>0&&d.jsxs("button",{onClick:()=>Ue(te),className:"text-xs px-1.5 py-0.5 rounded bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 flex items-center gap-1 transition-colors",title:`View LLM transparency info • ${cs(Oi(B))}`,children:[d.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["💰 ",cs(Oi(B))]}),d.jsx("span",{className:"ml-0.5",children:"ℹ️"})]})]})]})]})]})]})})(),B.role!=="tool"&&d.jsxs(d.Fragment,{children:[B.role==="assistant"?d.jsxs("div",{children:[te===I.length-1&&Ar.size>0&&d.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Ar.values()).map((J,Ve)=>d.jsx(Eme,{data:J},Ve))}),te===I.length-1&&ut.size>0&&d.jsx("div",{className:"mb-3 space-y-2",children:Array.from(ut.values()).map((J,Ve)=>d.jsx(Cme,{data:J},Ve))}),te===I.length-1&&jn.size>0&&d.jsx("div",{className:"mb-3 space-y-2",children:Array.from(jn.values()).map((J,Ve)=>d.jsx(_me,{data:J},Ve))}),te===I.length-1&&ei.size>0&&d.jsx("div",{className:"mb-3 space-y-2",children:Array.from(ei.values()).map((J,Ve)=>d.jsx(Ame,{data:J},Ve))}),te===I.length-1&&en.size>0&&d.jsx("div",{className:"mb-3 space-y-2",children:Array.from(en.values()).map((J,Ve)=>d.jsx(Nme,{data:J},Ve))}),B.tool_calls&&B.tool_calls.map((J,Ve)=>{if(J.function.name==="transcribe_url"&&De.has(J.id)){console.log(`    Rendering TranscriptionProgress for tool_call ${Ve}: ${J.id}`);const Ee=De.get(J.id);if(!Ee||Ee.length===0)return console.log(`      No events for ${J.id}, skipping`),null;const Ie=Ee[Ee.length-1],fe=Ie.progress_type||Ie.data?.type||"",He=fe==="transcribe_complete"||fe==="transcription_stopped"||fe==="error";if(console.log(`      Last event type: ${fe}, isComplete: ${He}`),He)return console.log("      Transcription complete, skipping progress render"),null;console.log(`      ✅ Rendering progress component for ${J.id}`);const We=JSON.parse(J.function.arguments||"{}");return d.jsx("div",{className:"mb-3",children:d.jsx(Tme,{toolCallId:J.id,url:We.url||"",events:Ee||[],onStop:Dy})},J.id)}if(J.function.name==="scrape_web_content"&&It.has(J.id)){console.log(`    Rendering ScrapingProgress for tool_call ${Ve}: ${J.id}`);const Ee=It.get(J.id);if(!Ee||Ee.length===0)return console.log(`      No events for ${J.id}, skipping`),null;const Ie=Ee[Ee.length-1],fe=Ie.progress_type||Ie.data?.type||"",He=fe==="scrape_complete"||fe==="scrape_error";if(console.log(`      Last event type: ${fe}, isComplete: ${He}`),He)return console.log("      Scraping complete, skipping progress render"),null;console.log(`      ✅ Rendering scraping progress component for ${J.id}`);const We=JSON.parse(J.function.arguments||"{}");return d.jsx("div",{className:"mb-3",children:d.jsx(kme,{toolCallId:J.id,url:We.url||"",events:Ee||[]})},J.id)}return null}),B.tool_calls&&B.tool_calls.length>0&&!B.toolResults&&d.jsx("div",{className:"mb-3 space-y-2",children:B.tool_calls.map((J,Ve)=>{let Ee={},Ie=null;try{Ee=JSON.parse(J.function.arguments||"{}")}catch(fe){Ie=`Invalid JSON: ${J.function.arguments}`,console.error(`Failed to parse tool call arguments for ${J.id}:`,fe)}return d.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-3",children:[d.jsxs("div",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-2",children:[d.jsxs("span",{children:["🔧 ",J.function.name]}),Ie&&d.jsx("span",{className:"text-red-600 dark:text-red-400 font-normal",children:"⚠️ Malformed arguments"})]}),d.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:Ie?d.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded p-2 font-mono text-[10px]",children:Ie}):Object.entries(Ee).map(([fe,He])=>d.jsxs("div",{children:[d.jsxs("span",{className:"font-semibold",children:[fe,":"]})," ",d.jsx("span",{className:"font-mono",children:typeof He=="string"?He:JSON.stringify(He)})]},fe))})]},Ve)})}),B.tool_calls&&!B.toolResults&&!B.isStreaming&&d.jsxs("div",{className:"mb-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[d.jsxs("div",{className:"flex gap-1",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),d.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["⚙️ Executing ",B.tool_calls.length," tool",B.tool_calls.length>1?"s":"","..."]})]}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx("div",{className:"flex-1",children:B.content&&(()=>{let J;if(B.toolResults){const Ve=B.toolResults.find(Ee=>Ee.name==="generate_chart");if(Ve)try{const Ee=typeof Ve.content=="string"?JSON.parse(Ve.content):Ve.content;J=Ee.description||Ee.chart_type}catch{}}return d.jsx(um,{content:Sr(B.content),chartDescription:J})})()}),B.content&&!B.isStreaming&&d.jsx(Ume,{text:Sr(B.content),variant:"icon",shouldSummarize:Sr(B.content).length>500})]}),B.isStreaming&&d.jsx("span",{className:"inline-block w-2 h-4 bg-gray-500 animate-pulse ml-1"}),(()=>{const J=I[te+1];if(J&&J.role==="tool"){const Ve=[];if(B.tool_calls&&B.tool_calls.forEach(Ee=>{if(Ee.function?.name==="search_youtube"){const Ie=I.find((fe,He)=>He>te&&fe.role==="tool"&&fe.tool_call_id===Ee.id);if(Ie&&Ie.content)try{const fe=typeof Ie.content=="string"?JSON.parse(Ie.content):Ie.content;fe.videos&&Array.isArray(fe.videos)&&Ve.push(...fe.videos)}catch(fe){console.error("Failed to parse YouTube results:",fe)}}}),Ve.length>0)return d.jsx(qme,{videos:Ve})}return null})(),(()=>{if(!B.extractedContent)return null;const J=B.extractedContent;return J.prioritizedImages&&J.prioritizedImages.length>0||J.allLinks&&J.allLinks.length>0||J.allImages&&J.allImages.length>0||J.youtubeVideos&&J.youtubeVideos.length>0||J.otherVideos&&J.otherVideos.length>0||J.media&&J.media.length>0?d.jsxs("div",{className:"mt-4 space-y-4",children:[J.prioritizedImages&&J.prioritizedImages.length>0&&d.jsx(Bme,{images:J.prioritizedImages.map(Ee=>Ee.src),maxDisplay:3,onImageClick:Ee=>window.open(Ee,"_blank"),onGrabImage:Gc}),J.allLinks&&J.allLinks.length>0&&d.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:["🔗 All Links (",J.allLinks.length,")"]}),d.jsx("div",{className:"p-4 space-y-2",children:J.allLinks.map((Ee,Ie)=>d.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-2 last:border-b-0",children:d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium break-words",children:Ee.title}),Ee.snippet&&d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 italic",children:Ee.snippet})]})]})},Ie))})]}),J.allImages&&J.allImages.length>0&&d.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:["🖼️ All Images (",J.allImages.length,")"]}),d.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:J.allImages.map((Ee,Ie)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:Ee.src,alt:Ee.alt||`Image ${Ie+1}`,className:"w-full h-32 object-cover rounded border border-gray-300 dark:border-gray-700 cursor-pointer hover:opacity-80",onClick:()=>window.open(Ee.src,"_blank"),loading:"lazy"}),d.jsx("button",{onClick:()=>Gc(Ee.src,Ee.alt||`Image ${Ie+1}`),className:"absolute top-2 right-2 p-1.5 bg-white dark:bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",title:i("chat.grabImage"),children:d.jsx("svg",{className:"w-4 h-4 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},Ie))})]}),J.youtubeVideos&&J.youtubeVideos.length>0&&d.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:["📺 YouTube Videos (",J.youtubeVideos.length,")"]}),d.jsx("div",{className:"p-4 space-y-2",children:J.youtubeVideos.map((Ee,Ie)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),d.jsx("a",{href:Ee.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Ee.title})]},Ie))})]}),J.otherVideos&&J.otherVideos.length>0&&d.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:["🎬 Other Videos (",J.otherVideos.length,")"]}),d.jsx("div",{className:"p-4 space-y-2",children:J.otherVideos.map((Ee,Ie)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),d.jsx("a",{href:Ee.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Ee.title})]},Ie))})]}),J.media&&J.media.length>0&&d.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[d.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:["🎵 Audio & Other Media (",J.media.length,")"]}),d.jsx("div",{className:"p-4 space-y-2",children:J.media.map((Ee,Ie)=>d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),d.jsx("a",{href:Ee.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Ee.type||"Media"})]},Ie))})]})]}):null})(),B.toolResults&&B.toolResults.length>0&&d.jsx("div",{className:"mt-4 space-y-3",children:B.toolResults.filter(J=>{if(J.name==="generate_image")try{if(JSON.parse(J.content).error)return!1}catch{}return!0}).map((J,Ve)=>{const Ee=hr.has(te*1e3+Ve);let Ie=null;if(J.name==="search_web"&&typeof J.content=="string")try{const Le=JSON.parse(J.content);Le.results&&Array.isArray(Le.results)&&(Ie=Le.results)}catch{}let fe=null;if(J.name==="scrape_web_content"&&typeof J.content=="string")try{const Le=JSON.parse(J.content);(Le.content||Le.url)&&(fe=Le)}catch{}let He=null,We="";if(J.name==="execute_javascript"&&typeof J.content=="string")try{const Le=JSON.parse(J.content);if(Le.result!==void 0||Le.error){He=Le;const tt=B.tool_calls?.find(Gt=>Gt.id===J.tool_call_id);if(tt)try{We=JSON.parse(tt.function.arguments).code||""}catch{}}}catch{}return d.jsxs("div",{className:"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700 rounded-lg p-3",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[d.jsxs("span",{children:["🔧 ",J.name||"Tool Result"]}),B.tool_calls&&(J.name==="search_web"||J.name==="search_youtube")&&(()=>{const Le=B.tool_calls.find(tt=>tt.id===J.tool_call_id);if(Le)try{const tt=JSON.parse(Le.function.arguments);if(tt.query)return d.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',tt.query,'"']})}catch{}return null})(),J.name==="scrape_web_content"&&(()=>{try{const Le=typeof J.content=="string"?JSON.parse(J.content):J.content;if(Le.url||Le.scrapeService||Le.proxyUsed!==void 0)return d.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 flex items-center gap-1",children:[Le.url&&d.jsxs("a",{href:Le.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["- ",new URL(Le.url).hostname]}),Le.scrapeService&&d.jsx("span",{className:"text-[10px] bg-purple-200 dark:bg-purple-800 px-1.5 py-0.5 rounded",children:Le.scrapeService}),Le.proxyUsed&&d.jsx("span",{className:"text-[10px] bg-green-200 dark:bg-green-800 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded",title:i("chat.usingProxy"),children:"🔒 proxy"})]})}catch{}return null})()]}),d.jsx("button",{onClick:()=>{const Le=new Set(hr),tt=te*1e3+Ve;Ee?Le.delete(tt):Le.add(tt),cr(Le)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Ee?"Collapse":"Expand",children:Ee?"▲":"▼"})]}),Ee&&d.jsxs("div",{className:"text-xs space-y-2",children:[$a.size>0&&Array.from($a.values()).filter(()=>J.name==="search_web"||J.name==="scrape_web_content"||J.name==="transcribe_url").map((Le,tt)=>d.jsx(Lme,{data:Le},tt)),Ie&&Ie.length>0?d.jsx("div",{className:"space-y-3",children:Ie.map((Le,tt)=>{const Gt=te*1e6+Ve*1e3+tt,Sn=hr.has(Gt),ma=Le.content||Le.page_content,ya=typeof Le.content=="string"?Le.content:typeof Le.page_content=="string"?Le.page_content:JSON.stringify(Le.page_content||Le.content,null,2);return d.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 overflow-hidden",children:[d.jsxs("div",{className:"p-3",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("a",{href:Le.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-purple-700 dark:text-purple-300 hover:underline block mb-1",children:Le.title}),(Le.snippet||Le.description)&&d.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2",children:Le.snippet||Le.description}),d.jsx("a",{href:Le.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-[10px] break-all block",children:Le.url})]}),ma&&d.jsx("button",{onClick:()=>{const Xn=new Set(hr);Sn?Xn.delete(Gt):Xn.add(Gt),cr(Xn)},className:"flex-shrink-0 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-xs",title:Sn?"Hide details":"Show details",children:Sn?"▲":"▼"})]}),d.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[Le.state&&d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${Le.state==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"}`,children:Le.state}),Le.fetchTimeMs!==void 0&&d.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded",children:["⏱️ ",Le.fetchTimeMs,"ms"]}),Le.contentFormat&&d.jsx("span",{className:"text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:Le.contentFormat}),Le.intelligentlyExtracted&&d.jsx("span",{className:"text-[10px] bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-1.5 py-0.5 rounded",title:i("chat.contentExtracted"),children:"🧠 smart"}),Le.truncated&&d.jsx("span",{className:"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-1.5 py-0.5 rounded",title:i("chat.truncatedToFit"),children:"✂️ truncated"})]})]}),Sn&&ma&&d.jsxs("div",{className:"border-t border-purple-200 dark:border-purple-800 bg-purple-50/50 dark:bg-purple-900/10",children:[d.jsxs("div",{className:"px-3 py-2 border-b border-purple-200 dark:border-purple-800",children:[d.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"📊 Scraping & Compression Details:"}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-[10px]",children:[d.jsxs("div",{className:"col-span-2",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.scrapeMethod")})," ",d.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Le.tier!==void 0?d.jsxs(d.Fragment,{children:[i("chat.tier")," ",Le.tier," - ",Le.scrapeMethod||Le.scrapeService]}):"Direct HTTP Fetch"}),Le.tier!==void 0&&d.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-[9px] block mt-0.5",children:[Le.tier===0&&"(Simple HTTP GET - fast, no browser)",Le.tier===1&&"(Puppeteer - browser automation with stealth)",Le.tier===2&&"(Playwright - advanced browser automation)",Le.tier===3&&"(Selenium - complex interactions)",Le.tier===4&&"(Interactive - manual CAPTCHA/login)"]})]}),Le.responseTime!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.scrapeTime")})," ",d.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Le.responseTime,"ms"]})]}),Le.fetchTimeMs!==void 0&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.totalTime")})," ",d.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Le.fetchTimeMs,"ms"]})]}),Le.contentFormat&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.format")})," ",d.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:Le.contentFormat})]}),(Le.originalLength||Le.originalContentLength)&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.originalSize")})," ",d.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[((Le.originalLength||Le.originalContentLength)/1024).toFixed(1),"KB"]})]}),ya&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compressedSize")})," ",d.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[(ya.length/1024).toFixed(1),"KB"]})]}),Le.compressionRatio&&d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compression")})," ",d.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:[Le.compressionRatio.toFixed(2),"x"]})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compressionStrategy")})," ",d.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:Le.intelligentlyExtracted?d.jsxs("span",{children:["Smart extraction",Le.contentFormat==="markdown"?" → Markdown":" → Plain text",Le.truncated&&" → Truncated to model limits"]}):d.jsx("span",{children:i("chat.basicExtraction")})})]}),d.jsx("div",{className:"col-span-2 mt-1 text-gray-500 dark:text-gray-400 italic",children:"Note: No LLM calls used for compression (rule-based extraction only)"})]})]}),d.jsxs("div",{className:"p-3 space-y-3",children:[Le.rawHtml&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[d.jsx("span",{children:"🌐 Stage 1: Raw HTML from Scraper"}),d.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Le.rawHtml.length.toLocaleString()," chars"]})]}),d.jsx("button",{onClick:()=>{const Xn=document.createElement("div");Xn.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50";const ba=document.createElement("div");ba.className="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col";const Aa=document.createElement("div");Aa.className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700";const ji=document.createElement("h3");ji.className="text-lg font-semibold text-gray-900 dark:text-gray-100",ji.textContent=i("chat.rawHtml",{count:Le.rawHtml.length.toLocaleString()});const qa=document.createElement("button");qa.className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",qa.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>',qa.onclick=()=>Xn.remove();const xi=document.createElement("div");xi.className="flex-1 overflow-auto p-4";const vi=document.createElement("pre");vi.className="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap",vi.textContent=Le.rawHtml,xi.appendChild(vi),Aa.appendChild(ji),Aa.appendChild(qa),ba.appendChild(Aa),ba.appendChild(xi),Xn.appendChild(ba),document.body.appendChild(Xn)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full HTML"})]}),Le.rawText&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[d.jsx("span",{children:"📄 Stage 2: Raw Text (innerText)"}),d.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Le.rawText.length.toLocaleString()," chars"]})]}),d.jsx("button",{onClick:()=>{const Xn=document.createElement("div");Xn.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50";const ba=document.createElement("div");ba.className="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col";const Aa=document.createElement("div");Aa.className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700";const ji=document.createElement("h3");ji.className="text-lg font-semibold text-gray-900 dark:text-gray-100",ji.textContent=i("chat.rawText",{count:Le.rawText.length.toLocaleString()});const qa=document.createElement("button");qa.className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",qa.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>',qa.onclick=()=>Xn.remove();const xi=document.createElement("div");xi.className="flex-1 overflow-auto p-4";const vi=document.createElement("pre");vi.className="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap",vi.textContent=Le.rawText,xi.appendChild(vi),Aa.appendChild(ji),Aa.appendChild(qa),ba.appendChild(Aa),ba.appendChild(xi),Xn.appendChild(ba),document.body.appendChild(Xn)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full Text"})]}),Le.afterSmartExtraction&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[d.jsx("span",{children:"✨ Stage 3: After Smart Extraction (Headers/Nav/Footers Removed)"}),d.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Le.afterSmartExtraction.length.toLocaleString()," chars"]})]}),d.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-48 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Le.afterSmartExtraction})})]}),Le.afterSummarization&&Le.beforeSummarization&&Le.afterSummarization!==Le.beforeSummarization&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[d.jsx("span",{children:"🔍 Stage 4: After AI Summarization"}),d.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Le.afterSummarization.length.toLocaleString()," chars"]})]}),d.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-amber-200 dark:border-amber-700 max-h-48 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Le.afterSummarization})})]}),Le.sentToLLM&&d.jsxs("div",{children:[d.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-300 mb-2 flex items-center justify-between",children:[d.jsx("span",{children:"🎯 Stage 5: SENT TO LLM (Tool Result)"}),d.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Le.sentToLLM.length.toLocaleString()," chars"]})]}),d.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded border-2 border-green-500 dark:border-green-600 max-h-64 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Le.sentToLLM})})]}),d.jsx("div",{className:"pt-2 border-t border-purple-200 dark:border-purple-800",children:d.jsxs("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 space-y-1",children:[d.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-1",children:i("chat.contentProcessingPipeline")}),Le.rawHtml&&d.jsxs("div",{children:["• Raw HTML: ",Le.rawHtml.length.toLocaleString()," chars"]}),Le.rawText&&d.jsxs("div",{children:["• Raw Text: ",Le.rawText.length.toLocaleString()," chars"]}),Le.afterSmartExtraction&&d.jsxs("div",{children:["• Smart Extraction: ",Le.afterSmartExtraction.length.toLocaleString()," chars"]}),Le.afterSummarization&&Le.beforeSummarization&&Le.afterSummarization!==Le.beforeSummarization&&d.jsxs("div",{children:["• After Summarization: ",Le.afterSummarization.length.toLocaleString()," chars"]}),Le.sentToLLM&&d.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:["→ Sent to LLM: ",Le.sentToLLM.length.toLocaleString()," chars"]})]})})]})]})]},tt)})}):fe?d.jsxs("div",{className:"space-y-3",children:[fe.error&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-3",children:[d.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"❌ Scraping Error:"}),d.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono whitespace-pre-wrap",children:fe.error})]}),fe.warning&&d.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-2",children:[d.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"⚠️ Warning:"}),d.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-xs mt-1",children:fe.warning})]}),(fe.format||fe.compressionRatio||fe.originalLength||fe.extractedLength)&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"📊 Metadata:"}),(()=>{const tt=Array.from($a.values()).find(Gt=>Gt.url===fe.url)?.rawHtml;return tt?d.jsx("button",{onClick:()=>Rn({html:tt,url:fe.url}),className:"text-xs px-2 py-1 bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-300 dark:hover:bg-purple-700",children:"View Raw HTML"}):null})()]}),d.jsx("table",{className:"w-full text-xs border-collapse",children:d.jsxs("tbody",{children:[fe.format&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.format")}),d.jsx("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:fe.format==="markdown"?"📝 Markdown":"📄 Plain Text"})]}),typeof fe.originalLength=="number"&&typeof fe.extractedLength=="number"&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.size")}),d.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[(fe.originalLength/1024).toFixed(1),"KB → ",(fe.extractedLength/1024).toFixed(1),"KB"]})]}),fe.compressionRatio&&typeof fe.compressionRatio=="number"&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.compression")}),d.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[fe.compressionRatio.toFixed(1),"x"]})]})]})})]}),fe.content&&d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"📄 Content:"}),d.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-800 max-h-96 overflow-y-auto",children:fe.format==="markdown"?d.jsx(um,{content:fe.content}):d.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 leading-relaxed",children:fe.content})})]})]}):He?d.jsxs("div",{className:"space-y-3",children:[We&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[d.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"💻 Code:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(We),C(i("chat.codeCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:i("chat.copyCodeToClipboard"),children:"Copy"}),d.jsx("button",{onClick:()=>{ls(We,"tool","JavaScript Code")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:i("chat.captureCodeToSwag"),children:"Grab"})]})]}),d.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:d.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:We})})]}),He.error&&d.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[d.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"❌ Error:"}),d.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:He.error})]}),He.result!==void 0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[d.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"✅ Output:"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(He.result)),C(i("chat.outputCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),d.jsx("button",{onClick:()=>{ls(String(He.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:d.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(He.result)})})]})]}):J.name==="generate_chart"?d.jsx(e3,{content:J.content,chartCode:Go(B.content)||void 0}):J.name==="generate_image"?(()=>{const Le=J.tool_call_id||J.id,tt=B.imageGenerations?.find(Gt=>Gt.id===Le);if(tt)return d.jsxs("div",{className:"space-y-3 mt-3",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsx("table",{className:"w-full text-sm border-collapse border border-purple-200 dark:border-purple-800 rounded",children:d.jsxs("tbody",{children:[tt.prompt&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20 w-1/3",children:i("chat.titlePrompt")}),d.jsx("td",{className:"py-2 px-3",children:tt.prompt})]}),tt.revisedPrompt&&tt.revisedPrompt!==tt.prompt&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:i("chat.finalPrompt")}),d.jsx("td",{className:"py-2 px-3",children:tt.revisedPrompt})]}),tt.size&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Size"}),d.jsx("td",{className:"py-2 px-3",children:tt.size})]}),tt.model&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Model"}),d.jsxs("td",{className:"py-2 px-3",children:[tt.provider,"/",tt.model]})]}),tt.qualityTier&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Quality"}),d.jsx("td",{className:"py-2 px-3 capitalize",children:tt.qualityTier})]}),tt.cost!==void 0&&d.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Cost"}),d.jsxs("td",{className:"py-2 px-3",children:["$",tt.cost.toFixed(4)]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Status"}),d.jsx("td",{className:"py-2 px-3",children:tt.status==="complete"?d.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:"✅ Success"}):tt.status==="error"?d.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:"❌ Failed"}):d.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:tt.status})})]})]})})}),tt.llmApiCall?.request&&d.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[d.jsxs("button",{onClick:()=>{const Gt=`img-req-${tt.id}`,Sn=document.getElementById(Gt);Sn&&Sn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[d.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:"📤 Request Data"}),d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d.jsx("pre",{id:`img-req-${tt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(tt.llmApiCall.request,null,2)})]}),tt.llmApiCall?.response&&d.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[d.jsxs("button",{onClick:()=>{const Gt=`img-res-${tt.id}`,Sn=document.getElementById(Gt);Sn&&Sn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[d.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:"📥 Response Data"}),d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d.jsx("pre",{id:`img-res-${tt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(tt.llmApiCall.response,null,2)})]})]});try{return typeof J.content=="string"?JSON.parse(J.content):J.content,d.jsx(Vv,{content:J.content})}catch{return d.jsx(Vv,{content:J.content})}})():d.jsx(Vv,{content:J.content})]}),J.name==="generate_image"&&(()=>{const Le=J.tool_call_id||J.id,tt=B.imageGenerations?.find(Gt=>Gt.id===Le);if(tt&&(tt.status==="generating"||tt.status==="downloading")){const Gt=tt.phase||"generating",Sn=tt.estimatedSeconds||15;let ma="🎨 Generating image...",ya="This may take 10-30 seconds for high-quality images";return Gt==="selecting_provider"?(ma="🔍 Selecting image provider...",ya="Finding best available model"):Gt==="generating"?(ma=`🎨 Generating image... (~${Sn}s)`,ya=`Using ${tt.provider||"selected"} ${tt.model||"model"}`):tt.status==="downloading"&&(ma="📥 Downloading image...",ya="Converting to base64 for offline storage"),d.jsx("div",{className:"mt-3 relative",children:d.jsxs("div",{className:"w-full rounded border border-purple-300 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20 flex flex-col items-center justify-center p-8",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mb-4"}),d.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold mb-2",children:ma}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center max-w-md",children:ya}),tt.prompt&&d.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center max-w-md mt-3 italic",children:['"',tt.prompt.substring(0,100),tt.prompt.length>100?"...":"",'"']})]})})}if(tt&&(tt.imageUrl||tt.base64)){let Gt;tt.base64?Gt=tt.base64.startsWith("data:image/")?tt.base64:`data:image/png;base64,${tt.base64}`:tt.imageUrl?.startsWith("data:image/")?Gt=tt.imageUrl:Gt=tt.imageUrl||"";const Sn=`<img src="${Gt}" alt="${tt.prompt||"Generated image"}" />`;return d.jsxs("div",{className:"mt-3 relative group",children:[d.jsx("img",{src:Gt,alt:tt.prompt||"Generated image",className:"w-full rounded border border-purple-300 dark:border-purple-700",style:{maxHeight:"512px",objectFit:"contain"}}),d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Gt||""),C(i("chat.copiedToClipboard"))},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Copy image data URL",children:d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),d.jsx("button",{onClick:async()=>{await b(Sn,"assistant",tt.prompt||"Generated image"),C("Image grabbed to swag")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Grab to swag",children:d.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})})})]})]})}return null})(),d.jsx(ZN,{rawResponse:J.rawResponse,extractionMetadata:J.extractionMetadata})]},Ve)})}),B.isStreaming&&B.toolResults&&B.toolResults.length>0&&d.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg",children:d.jsxs("div",{className:"flex items-center gap-3 text-blue-700 dark:text-blue-300",children:[d.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-base",children:"Generating LLM Response..."}),d.jsx("div",{className:"text-sm opacity-80",children:"The AI is analyzing the tool results and composing a response"})]})]})})]}):d.jsxs("div",{className:"whitespace-pre-wrap",children:[Sr(B.content),B._attachments&&B._attachments.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:B._attachments.filter(J=>J&&J.name).map((J,Ve)=>d.jsx("div",{className:"bg-white/20 dark:bg-gray-700/30 rounded-lg overflow-hidden border border-white/30 dark:border-gray-600",children:J.preview?d.jsx("img",{src:J.preview,alt:J.name,className:"w-32 h-32 object-cover cursor-pointer hover:opacity-80 transition-opacity",title:`${J.name} (${(J.size/1024).toFixed(1)} KB)`,onClick:()=>window.open(J.preview,"_blank")}):d.jsxs("div",{className:"w-32 h-32 flex flex-col items-center justify-center p-2 bg-red-50 dark:bg-red-900/20",children:[d.jsxs("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),d.jsx("text",{x:"8",y:"16",fontSize:"8",fill:"currentColor",fontWeight:"bold",children:"PDF"})]}),d.jsx("span",{className:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium truncate max-w-full px-1",children:J.name})]})},Ve))}),(console.log("🖼️ Checking imageGenerations:",{hasImageGenerations:!!B.imageGenerations,length:B.imageGenerations?.length,imageGenerations:B.imageGenerations}),null),B.imageGenerations&&B.imageGenerations.length>0&&d.jsx("div",{className:"mt-3",children:(console.log("🖼️ About to render imageGenerations:",B.imageGenerations),B.imageGenerations.map(J=>(console.log("🖼️ Mapping imageGen:",J),d.jsx(Mme,{data:J,accessToken:s,providerApiKeys:Bd,onCopy:Ve=>{navigator.clipboard.writeText(Ve).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},onGrab:Ve=>{navigator.clipboard.writeText(Ve).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},onLlmInfo:()=>{Ue(te)},onStatusChange:(Ve,Ee,Ie,fe)=>{G(He=>He.map((We,Le)=>{if(We.imageGenerations){const tt=We.imageGenerations.map(Sn=>Sn.id===Ve?{...Sn,status:Ee,imageUrl:Ie,llmApiCall:fe}:Sn),Gt={...We,imageGenerations:tt};return fe&&Le===te&&(Gt.llmApiCalls=[...We.llmApiCalls||[],fe]),Gt}return We}))}},J.id))))})]}),B.role==="assistant"&&!ue&&_a>0&&te===I.length-1&&d.jsx("div",{className:"mt-2 flex items-center justify-end",children:d.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-50 dark:bg-green-900/20 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs",children:[d.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Request cost: ",Qc(_a),L&&d.jsxs("span",{className:"ml-1 opacity-75",children:["(Total: ",Qc(L.totalCost),")"]})]})}),B.role==="assistant"&&(B.content||B.llmApiCalls)&&d.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[d.jsxs("button",{onClick:()=>{const J=Sr(B.content);navigator.clipboard.writeText(J).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Copy to clipboard",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]}),d.jsxs("button",{onClick:()=>{const J=Sr(B.content),Ve="Shared from LLM Proxy",Ee=encodeURIComponent(J);window.open(`https://mail.google.com/mail/?view=cm&fs=1&su=${encodeURIComponent(Ve)}&body=${Ee}`,"_blank")},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Share via Gmail",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Gmail"]}),d.jsxs("button",{onClick:()=>ls(Sr(B.content),"assistant",void 0,B.extractedContent,B.toolResults),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),B.llmApiCalls&&B.llmApiCalls.length>0&&(()=>{let J=0,Ve=0;B.llmApiCalls.forEach(Ie=>{J+=Ie.response?.usage?.prompt_tokens||0,Ve+=Ie.response?.usage?.completion_tokens||0});const Ee=J+Ve;return d.jsxs("button",{onClick:()=>Ue(te),className:"text-xs px-2 py-1 rounded bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 flex items-center gap-1.5 transition-colors",title:`View LLM transparency info • ${Ee.toLocaleString()} tokens (${J.toLocaleString()} in, ${Ve.toLocaleString()} out) • ${B.llmApiCalls.length} call${B.llmApiCalls.length!==1?"s":""} • ${cs(Oi(B))}`,children:[d.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["💰 ",cs(Oi(B))]}),d.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden sm:inline",children:["• ",Ee.toLocaleString()," token",Ee!==1?"s":""," (",J.toLocaleString()," in, ",Ve.toLocaleString()," out)"]}),d.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden lg:inline",children:["• ",B.llmApiCalls.length," call",B.llmApiCalls.length!==1?"s":""]}),d.jsx("span",{className:"ml-0.5",children:"ℹ️"})]})})(),!B.isStreaming&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>so(te),className:"text-xs px-2 py-1 rounded bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50 flex items-center gap-1 transition-colors",title:"Good response",children:"👍"}),d.jsx("button",{onClick:()=>Yc(te),className:"text-xs px-2 py-1 rounded bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50 flex items-center gap-1 transition-colors",title:"Bad response - report issue",children:"👎"})]}),B.errorData&&Sr(B.content).startsWith("❌ Error:")&&!B.guardrailFailed&&d.jsxs("button",{onClick:()=>wr(te),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-100 flex items-center gap-1",title:"View full error details",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Info"]}),B.isRetryable&&(!B.retryCount||B.retryCount<3)&&d.jsxs("button",{onClick:()=>Oy(te),disabled:ue,className:"text-xs text-orange-600 dark:text-orange-400 hover:text-orange-900 dark:hover:text-orange-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Retry this request with full context",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again",(B.retryCount??0)>0&&d.jsxs("span",{className:"text-[10px] opacity-75",children:["(",(B.retryCount??0)+1,")"]})]})]}),B.role==="user"&&d.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[d.jsxs("button",{onClick:()=>{z(Sr(B.content)),G(I.slice(0,te)),pt([]),Rr("")},disabled:ue,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset chat to this message",children:[d.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l3-3m0 0l3 3m-3-3v12"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-3 3m0 0l-3-3",opacity:"0.3"})]}),"Reset"]}),d.jsxs("button",{onClick:()=>{ss.current=!0,G(I.slice(0,te)),pt([]),Rr(""),z(Sr(B.content))},disabled:ue,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry this message (clears subsequent messages and resubmits)",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"})}),"Retry"]}),d.jsxs("button",{onClick:()=>ls(Sr(B.content),"user"),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[d.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]})]})]})]})},te)}),ue&&Xt!==null&&d.jsx("div",{className:"flex justify-start",children:d.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[d.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"streaming..."]})}),ue&&!Ft&&et.length===0&&d.jsx("div",{className:"flex justify-start",children:d.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),d.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),d.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),d.jsx("div",{ref:pa})]}),d.jsx("div",{className:"md:px-4 py-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:d.jsxs(d.Fragment,{children:[d.jsx(Yme,{attachedFiles:bi,onRemoveAttachment:My}),it&&it.total>0&&d.jsxs("div",{className:"mb-3 p-3 border border-yellow-200 dark:border-yellow-800 rounded bg-yellow-50 dark:bg-yellow-900/20",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 text-yellow-900 dark:text-yellow-200 font-semibold text-sm",children:[d.jsx("span",{children:"✅ Todos"}),d.jsxs("span",{className:"text-xs font-normal text-yellow-700 dark:text-yellow-300",children:[it.total," total • ",it.remaining," remaining"]}),an&&d.jsxs("span",{className:"ml-2 text-xs italic text-yellow-800 dark:text-yellow-300 animate-pulse",children:["🔄 Continuing: ",an]})]}),d.jsx("button",{className:"text-xs text-yellow-800 dark:text-yellow-300 hover:underline focus:outline-none",onClick:()=>pr(B=>!B),children:Qt?"▾ Collapse":"▸ Expand"})]}),d.jsxs("div",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:[d.jsx("span",{className:"font-medium",children:"Current:"})," ",it.current?.description||"—"]}),Qt&&d.jsx("ul",{className:"mt-2 max-h-48 overflow-y-auto text-sm divide-y divide-yellow-200 dark:divide-yellow-800 bg-white dark:bg-gray-800 rounded p-2",children:it.items.map((B,te)=>d.jsxs("li",{className:"py-1.5 flex items-start gap-2 text-gray-900 dark:text-gray-100",children:[d.jsx("span",{className:"mt-0.5 text-xs flex-shrink-0",children:B.status==="done"?"✔️":B.status==="current"?"🟡":"⏳"}),d.jsx("span",{className:`flex-1 ${B.status==="done"?"line-through opacity-60":""}`,children:B.description})]},String(B.id)||te))})]}),la&&Cn&&d.jsxs("div",{className:"flex flex-col items-center gap-3 py-3 px-4",children:[d.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-400 dark:border-orange-600 rounded-lg p-4 max-w-2xl w-full",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("svg",{className:"w-6 h-6 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:"⚠️ Maximum Iteration Limit Reached"}),d.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["The conversation has reached the maximum number of tool execution iterations (",Cn?.maxIterations||"?"," iterations). This limit prevents infinite loops and excessive API usage."]}),d.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"Would you like to continue processing from where it stopped?"})]})]})}),d.jsxs("button",{onClick:()=>{confirm(`⚠️ Continue processing?

This will resume tool execution and may incur additional API costs. The iteration limit helps prevent runaway processes.

Click OK to continue or Cancel to stop here.`)&&$y()},disabled:ue,className:"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white p-2 md:px-6 md:py-3 rounded-lg font-semibold text-base transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",title:"Continue from where the iteration limit was reached","aria-label":i("chat.continueProcessing"),children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),d.jsx("span",{className:"hidden md:inline",children:i("chat.continueProcessing")})]})]}),d.jsxs("div",{className:"flex flex-col gap-2",children:[fa.size>0&&d.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:i("chat.snippetsAttached",{count:fa.size,plural:fa.size===1?"":"s"})}),d.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[Array.from(fa).slice(0,3).map(B=>{const te=x.find(Se=>Se.id===B);return te?d.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-200 px-2 py-0.5 rounded truncate max-w-[200px]",title:te.title||"Untitled",children:te.title||"Untitled"},B):null}),fa.size>3&&d.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-300",children:["+",fa.size-3," more"]})]})]}),d.jsx("button",{onClick:()=>Kn(new Set),className:"ml-2 p-1 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800 rounded transition-colors",title:i("chat.clearAttachedSnippets"),"aria-label":i("chat.clearAttachedSnippets"),children:d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),d.jsx("textarea",{ref:As,value:U,onChange:B=>{z(B.target.value),Cr(-1)},onKeyDown:B=>{if(B.key==="Enter"&&!B.shiftKey)B.preventDefault(),lo();else if(B.key==="ArrowUp"&&!B.shiftKey){if(B.preventDefault(),Mt.length>0){const te=Math.min(un+1,Mt.length-1);Cr(te),z(Mt[te])}}else if(B.key==="ArrowDown"&&!B.shiftKey)if(B.preventDefault(),un>0){const te=un-1;Cr(te),z(Mt[te])}else un===0&&(Cr(-1),z(""))},placeholder:i("chat.inputPlaceholder"),className:"input-field flex-1 resize-none overflow-y-auto",style:{minHeight:"2.5rem",maxHeight:"300px"},"aria-label":i("chat.chatMessageInput"),"aria-describedby":"chat-input-help"}),d.jsx("span",{id:"chat-input-help",className:"sr-only",children:"Type your message and press Enter to send. Use Shift+Enter for new line. Use up and down arrows to navigate message history."}),d.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{ref:no,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,application/pdf",multiple:!0,onChange:B=>Ag(B.target.files),className:"hidden"}),d.jsx("button",{onClick:()=>no.current?.click(),disabled:ue,className:"btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:"Attach images or PDFs","aria-label":"Attach images or PDFs",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),d.jsx("button",{onClick:()=>Zt(!st),disabled:ue||!s,className:`btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed ${st?"bg-blue-100 dark:bg-blue-900 border-blue-500":""}`,title:s?st?"Stop continuous voice mode":"Start continuous voice mode (hands-free)":"Please sign in to use voice input","aria-label":s?st?"Stop continuous voice mode":"Start continuous voice mode":"Sign in to use voice input",children:d.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[d.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),d.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})]}),d.jsx("button",{onClick:()=>{ue?Ry():U.trim()?lo():As.current?.focus()},disabled:!ue&&!s,className:"btn-primary p-2 md:px-4 md:py-2 h-10 flex-shrink-0 flex items-center gap-1.5",title:s?U.trim()?i("chat.sendMessage"):i("chat.typeMessageFirst"):i("chat.signInToSend"),"aria-label":i(ue?"chat.stopGenerating":"chat.sendMessage"),children:ue?d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"⏹"}),d.jsx("span",{className:"hidden md:inline",children:i("chat.stop")})]}):U.trim()?d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"📤"}),d.jsx("span",{className:"hidden md:inline",children:i("chat.send")})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"✏️"}),d.jsx("span",{className:"hidden md:inline",children:i("chat.typeMessage")})]})})]})]})]})}),ae&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"card max-w-2xl w-full p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:i("chat.chatHistoryTitle")}),nn.length>0&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:Fy,className:"btn-secondary text-xs px-3 py-1",children:["☑️ ",i("chat.selectAll")]}),d.jsxs("button",{onClick:Ng,className:"btn-secondary text-xs px-3 py-1",children:["☐ ",i("chat.selectNone")]})]})]}),d.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[nn.map(B=>{const te=new Date(B.timestamp).toLocaleString(),Se=Te.has(B.id);return d.jsx("div",{className:`border ${Se?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"} rounded-lg p-3`,children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("input",{type:"checkbox",checked:Se,onChange:()=>zy(B.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-1 truncate",children:B.firstUserPrompt}),d.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:te})]}),d.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[d.jsx("button",{onClick:()=>zd(B),className:"btn-primary text-xs px-3 py-1",children:i("chat.load")}),d.jsx("button",{onClick:()=>jy(B.id),className:"btn-secondary text-red-500 text-xs px-3 py-1",children:i("chat.delete")})]})]})},B.id)}),nn.length===0&&d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:i("chat.noChatHistory")})]}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[Te.size>0&&d.jsxs("button",{onClick:By,className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:["🗑️ ",i("chat.deleteSelected")," (",Te.size,")"]}),nn.length>0&&d.jsxs("button",{onClick:()=>_e(!0),className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:["🗑️ ",i("chat.clearHistory")]}),d.jsx("button",{onClick:()=>pe(!1),className:"btn-primary flex-1",children:i("chat.close")})]})]})}),ye&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"card max-w-md w-full p-6",children:[d.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:[i("chat.clearHistory"),"?"]}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:i("chat.confirmClearHistory")}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>_e(!1),className:"btn-secondary flex-1",children:i("chat.cancel")}),d.jsx("button",{onClick:Uy,className:"btn-primary flex-1 bg-red-600 hover:bg-red-700",children:i("chat.clearHistory")})]})]})}),r&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:d.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:i("chat.mcpServerConfiguration")}),d.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"✕"})]}),d.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i("chat.addMCPServer")}),d.jsx("button",{onClick:()=>we(!re),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:re?"🔽 Hide Examples":"📚 Show Examples"})]}),re&&d.jsxs("div",{className:"mb-4 p-3 bg-white dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-600",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quick Start Examples:"}),d.jsxs("select",{onChange:B=>{const te=Ze.find(Se=>Se.id===B.target.value);te&&ur({name:te.name,url:te.url})},className:"input-field w-full mb-2",defaultValue:"",children:[d.jsx("option",{value:"",disabled:!0,children:"Select an example server..."}),d.jsx("optgroup",{label:"🏠 Sample Servers",children:Ze.filter(B=>B.category==="Sample").map(B=>d.jsxs("option",{value:B.id,children:[B.name," - ",B.description]},B.id))}),d.jsx("optgroup",{label:"✅ Official @modelcontextprotocol Servers",children:Ze.filter(B=>B.category==="Official").map(B=>d.jsxs("option",{value:B.id,children:[B.name.replace("@modelcontextprotocol/server-","")," - ",B.description]},B.id))})]}),ft.name&&Ze.find(B=>B.name===ft.name)&&d.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[d.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:Ze.find(B=>B.name===ft.name)?.name}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:Ze.find(B=>B.name===ft.name)?.description}),d.jsxs("div",{className:"mb-2",children:[d.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Tools:"})," ",d.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Ze.find(B=>B.name===ft.name)?.tools.join(", ")})]}),d.jsx("div",{className:"bg-gray-800 dark:bg-gray-950 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:Ze.find(B=>B.name===ft.name)?.instructions})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{type:"text",value:ft.name,onChange:B=>ur({...ft,name:B.target.value}),placeholder:i("chat.mcpServerNamePlaceholder"),className:"input-field w-full"}),d.jsx("input",{type:"text",value:ft.url,onChange:B=>ur({...ft,url:B.target.value}),placeholder:i("chat.mcpServerUrlPlaceholder"),className:"input-field w-full"}),d.jsxs("button",{onClick:qy,disabled:!ft.name.trim()||!ft.url.trim(),className:"btn-primary w-full",children:["➕ ",i("chat.addServer")]})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:[i("chat.mcpServers")," (",ir.length,")"]}),d.jsxs("div",{className:"space-y-2",children:[ir.map(B=>d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[d.jsx("input",{type:"checkbox",checked:B.enabled,onChange:()=>Hy(B.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:B.name}),d.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:B.url})]}),d.jsx("button",{onClick:()=>Gy(B.id),className:"text-red-500 hover:text-red-700 px-3 py-1",title:i("chat.remove"),children:"🗑️"})]},B.id)),ir.length===0&&d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:i("chat.noMcpServers")})]})]}),d.jsx("div",{className:"mt-6 flex gap-2",children:d.jsx("button",{onClick:()=>n(!1),className:"btn-primary flex-1",children:i("common.done")})})]})}),d.jsx(Bq,{isOpen:de,onClose:()=>Ae(!1),onTransferToChat:B=>{Lg();try{const te=JSON.parse(B);z(te.prompt),te.persona&&H(te.persona),te.planningQuery&&_t(te.planningQuery),te.generatedSystemPrompt&&Bt(te.generatedSystemPrompt),te.generatedUserQuery&&At(te.generatedUserQuery),console.log("✅ Transferred planning context to chat")}catch{z(B)}Ae(!1)}}),zt&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[d.jsxs("div",{className:"flex-1 pr-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:zt.result.title}),d.jsx("a",{href:zt.result.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:zt.result.url}),d.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[d.jsxs("span",{children:["📄 ",(zt.result.content?.length/1024).toFixed(1)," KB"]}),zt.result.contentFormat&&d.jsxs("span",{children:["📝 ",zt.result.contentFormat]}),zt.result.images?.length>0&&d.jsxs("span",{children:["🖼️ ",zt.result.images.length," images"]}),zt.result.links?.length>0&&d.jsxs("span",{children:["🔗 ",zt.result.links.length," links"]})]})]}),d.jsx("button",{onClick:()=>mi(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":i("chat.close"),children:"×"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Page Content"}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:zt.result.contentFormat==="markdown"?d.jsx(um,{content:zt.result.content}):d.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300",children:zt.result.content})})]}),zt.result.images&&zt.result.images.length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Images (",zt.result.images.length,")"]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:zt.result.images.map((B,te)=>d.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[d.jsx("img",{src:B.src,alt:B.alt||`Image ${te+1}`,className:"w-full h-32 object-cover",loading:"lazy"}),B.alt&&d.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:B.alt})]},te))})]}),zt.result.links&&zt.result.links.length>0&&d.jsxs("div",{children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Links (",zt.result.links.length,")"]}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:d.jsxs("ul",{className:"space-y-2",children:[zt.result.links.slice(0,50).map((B,te)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:"•"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("a",{href:B.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:B.text||B.href}),B.context&&d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:B.context})]})]},te)),zt.result.links.length>50&&d.jsxs("li",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["... and ",zt.result.links.length-50," more links"]})]})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"🔍 Full Scraped Data (JSON)"}),d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:d.jsx(Zp,{data:{url:zt.result.url,title:zt.result.title,description:zt.result.description,snippet:zt.result.snippet,fullScrapedContent:zt.result.content,contentFormat:zt.result.contentFormat,summarizedContent:zt.result.summary||zt.result.description,links:zt.result.links||[],images:zt.result.images||[],youtubeLinks:zt.result.youtube||zt.result.videos||[],otherMedia:zt.result.media||zt.result.audio||[],metadata:{contentLength:zt.result.content?.length||0,linkCount:zt.result.links?.length||0,imageCount:zt.result.images?.length||0,youtubeCount:(zt.result.youtube||zt.result.videos||[]).length,mediaCount:(zt.result.media||zt.result.audio||[]).length}},expanded:!1})})]})]})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:d.jsx("button",{onClick:()=>mi(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),yi&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[d.jsxs("div",{className:"flex-1 pr-4",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Raw HTML Content"}),d.jsx("a",{href:yi.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:yi.url}),d.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[d.jsxs("span",{children:["📄 ",(yi.html.length/1024).toFixed(1)," KB uncompressed"]}),d.jsx("span",{children:"📝 Raw HTML"})]})]}),d.jsx("button",{onClick:()=>gt(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":i("chat.close"),children:"×"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:d.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 font-mono",children:yi.html})})}),d.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(yi.html)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"📋 Copy to Clipboard"}),d.jsx("button",{onClick:()=>gt(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})}),he!==null&&I[he]?.llmApiCalls&&d.jsx(f5,{apiCalls:I[he].llmApiCalls,onClose:()=>Ue(null)}),ct!==null&&I[ct]?.errorData&&d.jsx(Pme,{errorData:I[ct].errorData,llmApiCalls:I[ct].llmApiCalls,onClose:()=>wr(null)}),jr!==null&&d.jsx(Rme,{isOpen:!0,onClose:()=>Jt(null),messageData:{messageId:`message-${jr}`,messageContent:Sr(I[jr].content),llmApiCalls:I[jr].llmApiCalls||[],evaluations:I[jr].evaluations||[],conversationThread:I}}),d.jsx(NL,{isOpen:oa,onClose:()=>Ke(!1),onTranscriptionComplete:Vc,accessToken:s,apiEndpoint:Er}),s&&d.jsx("div",{className:"fixed bottom-20 right-4 z-30 max-w-sm",children:d.jsx(Dme,{onVoiceRequest:B=>{z(B),setTimeout(()=>{lo()},100)},onTranscriptionStart:()=>{console.log("🎙️ Continuous mode: transcription started")},accessToken:s,apiEndpoint:Er,isProcessing:ue,isSpeaking:D.isPlaying,enabled:st,onEnabledChange:Zt})}),d.jsx(Gme,{isOpen:sa,onClose:()=>fn(!1),onExampleClick:kg,location:W,locationLoading:j,requestLocation:O,clearLocation:$}),$o&&d.jsx(g0e,{messages:I.map(B=>({role:B.role,content:typeof B.content=="string"?B.content:JSON.stringify(B.content),timestamp:Date.now()})),onClose:()=>za(!1),title:ie||void 0}),ao&&d.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-2/3 z-40 bg-white dark:bg-gray-800 shadow-2xl border-t border-gray-300 dark:border-gray-600 overflow-hidden",children:d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i("chat.attachContextTitle")}),d.jsx("button",{onClick:()=>Fl(!1),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Close Snippet Selector",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx(zme,{selectedSnippetIds:fa,onSelectionChange:Kn,userEmail:l?.email})})]})}),cn&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:"Raw HTML"}),cn.url&&d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate mt-1",children:cn.url})]}),d.jsx("button",{onClick:()=>Rn(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close raw HTML dialog",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(cn.html)},className:"absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded",children:"Copy"}),d.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:d.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 font-mono whitespace-pre",children:cn.html})})]})}),d.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:d.jsx("button",{onClick:()=>Rn(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Close"})})]})})]})},x0e=({isBlocked:e,onUnblock:t})=>{const{settings:r}=Xs(),{isAuthenticated:n}=Di(),a=Pl();return _.useEffect(()=>{if(e&&r.providers&&r.providers.length>0){console.log("User has UI providers configured, unblocking UI"),t();return}},[e,r.providers,t]),_.useEffect(()=>{const i=s=>{console.log("Provider added:",s.detail),setTimeout(()=>{r.providers&&r.providers.length>0&&t()},100)};return window.addEventListener("provider-added",i),()=>{window.removeEventListener("provider-added",i)}},[r.providers,t]),e&&n?d.jsxs("div",{className:"provider-setup-gate",children:[d.jsx("div",{className:"gate-overlay",children:d.jsxs("div",{className:"gate-content",children:[d.jsxs("div",{className:"gate-header",children:[d.jsx("h1",{children:"💳 Credits Required"}),d.jsx("p",{className:"gate-subtitle",children:"To use this service, you need to purchase credits."})]}),d.jsxs("div",{className:"gate-info",children:[d.jsxs("div",{className:"info-box",children:[d.jsx("h3",{children:"How does it work?"}),d.jsx("p",{children:"This is a pay-as-you-go service. Purchase credits to access our LLM providers without needing your own API keys. Your credits are tracked automatically, and you will be charged based on actual usage."})]}),d.jsxs("div",{className:"info-box",children:[d.jsx("h3",{children:"Pricing"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Small models:"})," approximately $0.0001 per request"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Large models:"})," approximately $0.001 per request"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Minimum purchase:"})," $5.00 (5,000-50,000 requests)"]})]}),d.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#888"},children:"Actual costs vary based on model and tokens used."})]}),d.jsxs("div",{className:"info-box",children:[d.jsx("h3",{children:"Secure Payment"}),d.jsx("p",{children:"Payments are processed securely through PayPal. Your credit balance is updated instantly after purchase."})]})]}),d.jsx("div",{className:"gate-action",children:d.jsx("button",{className:"btn-primary btn-large",onClick:()=>{console.log("Navigating to billing page"),t(),a("/settings?tab=billing")},children:"Buy Credits Now"})}),d.jsx("div",{className:"gate-footer",children:d.jsx("p",{className:"text-muted",children:"Your balance will be displayed in the top left corner after purchase. New users receive trial credits that expire after 24 hours."})})]})}),d.jsx("style",{children:".provider-setup-gate{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px)}.gate-overlay{width:100%;height:100%;overflow-y:auto;display:flex;align-items:center;justify-content:center;padding:2rem}.gate-content{max-width:800px;width:100%;background:#1a1a1a;border-radius:12px;padding:3rem;box-shadow:0 20px 60px rgba(0,0,0,0.5);border:1px solid #333}.gate-header{text-align:center;margin-bottom:2rem}.gate-header h1{font-size:2rem;margin:0 0 1rem 0;color:#fff}.gate-subtitle{font-size:1.1rem;color:#bbb;margin:0}.gate-info{margin-bottom:2rem}.info-box{background:#252525;border-radius:8px;padding:1.5rem;margin-bottom:1rem;border:1px solid #333}.info-box h3{margin:0 0 0.75rem 0;color:#fff;font-size:1.1rem}.info-box p{margin:0;color:#bbb;line-height:1.6}.info-box ul{margin:0.5rem 0 0 0;padding-left:1.5rem;color:#bbb}.info-box li{margin-bottom:0.75rem;line-height:1.6}.gate-action{text-align:center;margin-bottom:2rem}.btn-primary{background:#4a9eff;color:white;border:none;padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease}.btn-primary:hover{background:#357ac9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(74,158,255,0.3)}.btn-large{padding:1.25rem 2.5rem;font-size:1.2rem}.gate-footer{text-align:center;border-top:1px solid #333;padding-top:1.5rem}.text-muted{color:#888;font-size:0.95rem;margin:0}@media (max-width:768px){.gate-content{padding:2rem 1.5rem}.gate-header h1{font-size:1.5rem}.gate-subtitle{font-size:1rem}}"})]}):null},dm=[{id:"welcome",type:"modal",title:"👋 Welcome!",content:`Your AI research assistant is ready!

Let's explore the key features in under 2 minutes.`,navigateTo:"/"},{id:"chat",type:"spotlight",title:"💬 Chat Interface",content:"Ask questions, get research, use web search & transcription.",targetSelector:'textarea[placeholder*="message"]',tooltipPosition:"top",navigateTo:"/"},{id:"voice",type:"spotlight",title:"🎙️ Voice Input",content:"Speak your questions hands-free!",targetSelector:'button[aria-label*="voice" i], button[title*="voice" i]',tooltipPosition:"left",navigateTo:"/"},{id:"swag",type:"spotlight",title:"💎 SWAG Storage",content:"Save & organize important info. Tag, search, and embed content locally!",targetSelector:'button[title*="Swag" i]',tooltipPosition:"left",navigateTo:"/"},{id:"nav-billing",type:"spotlight",title:"💰 Navigate to Billing",content:"Click this button to view billing & usage.",targetSelector:'button[aria-label*="Billing" i], a[href="/billing"]',tooltipPosition:"right",navigateTo:"/"},{id:"billing",type:"spotlight",title:"💰 Billing & Usage",content:"Track costs & usage. $0.50 welcome bonus included!",targetSelector:".billing-page, .billing-header, .billing-title h1, .transactions-table, .summary-cards",tooltipPosition:"bottom",navigateTo:"/billing"},{id:"feed",type:"spotlight",title:"📰 Content Feed",content:"Discover curated articles, tutorials & insights. Filter by your saved Swag tags.",targetSelector:".bg-white.border-b.border-gray-200.sticky h1, .text-2xl.font-bold.text-gray-900",tooltipPosition:"bottom",navigateTo:"/feed"},{id:"quiz",type:"spotlight",title:"🧠 Quiz Mode",content:"Test your knowledge with AI-generated quizzes. Generate from Feed articles or selected SWAG content.",targetSelector:'[data-testid="quiz-page-title"], .quiz-page-header, h1.text-3xl.font-bold',tooltipPosition:"bottom",navigateTo:"/quiz"},{id:"image-editor",type:"spotlight",title:"🎨 Image Editor",content:"Create & edit images with AI assistance. Generate, modify, and save images.",targetSelector:"h1.text-xl.font-bold.text-gray-900",tooltipPosition:"bottom",navigateTo:"/image-editor"},{id:"settings",type:"spotlight",title:"⚙️ Settings",content:"Add your own API keys for $0 cost. Customize tools, themes & preferences.",targetSelector:"h1.text-3xl.font-bold.text-gray-900, h1.dark\\:text-gray-100",tooltipPosition:"bottom",navigateTo:"/settings"},{id:"complete",type:"modal",title:"🎉 All Set!",content:`You're ready to go!

Enjoy your AI assistant!`,navigateTo:"/"}],s3=({isOpen:e,onClose:t})=>{const r=Pl(),[n,a]=_.useState(0),[i,s]=_.useState(null),[l,u]=_.useState(!1),h=_.useRef(null),p=dm[n],f=n===0,y=n===dm.length-1;_.useEffect(()=>{e&&p.navigateTo&&(r(p.navigateTo),p.id==="nav-billing"&&window.scrollTo({top:0,behavior:"smooth"}))},[e,n,p.navigateTo,r,p.id]),_.useEffect(()=>{if(!e||p.type!=="spotlight"||!p.targetSelector){s(null),u(!1);return}u(!0),s(null);let k=0;const C=10,A=()=>{const L=document.querySelector(p.targetSelector);if(L){const D=L.getBoundingClientRect();return s(D),u(!1),!0}return!1};if(A())return;const P=setInterval(()=>{k++,(A()||k>=C)&&(clearInterval(P),k>=C&&(console.warn(`Spotlight target not found after ${C} attempts: ${p.targetSelector}`),u(!1),["feed","billing","quiz","image-editor","settings"].includes(p.id)&&setTimeout(()=>{b()},2e3)))},300),M=()=>{i&&A()};return window.addEventListener("resize",M),()=>{clearInterval(P),window.removeEventListener("resize",M)}},[e,p,n]),_.useEffect(()=>{if(!e)return;const k=C=>{C.key==="Escape"?v():C.key==="ArrowRight"&&!y?b():C.key==="ArrowLeft"&&!f&&x()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e,n]);const b=()=>{y?T():a(k=>k+1)},x=()=>{f||a(k=>k-1)},v=()=>{cw(),t()},T=()=>{cw(),t()};return e?d.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[d.jsx("div",{className:"absolute inset-0 bg-black transition-opacity duration-300",style:{opacity:p.type==="modal"?.75:.6},onClick:v,children:p.type==="spotlight"&&i&&d.jsx("div",{className:"absolute pointer-events-none transition-all duration-500 ease-out",style:{top:i.top-8,left:i.left-8,width:i.width+16,height:i.height+16,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6)",borderRadius:"12px",animation:"pulse-spotlight 2s ease-in-out infinite"}})}),p.type==="modal"&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",onClick:k=>k.stopPropagation(),children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-300 scale-100 border-4 border-gray-900 dark:border-gray-100",children:[d.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-3 uppercase tracking-tight",children:p.title}),d.jsx("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line mb-5 text-base leading-snug",children:p.content}),d.jsx("div",{className:"flex justify-center gap-2 mb-5",children:dm.map((k,C)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${C===n?"w-8 bg-blue-600 dark:bg-blue-400":C<n?"w-2 bg-green-500 dark:bg-green-400":"w-2 bg-gray-400 dark:bg-gray-600"}`},C))}),d.jsxs("div",{className:"flex justify-between items-center gap-4",children:[d.jsx("button",{onClick:v,className:"px-3 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors text-xs font-bold uppercase",children:"Skip Tour"}),d.jsxs("div",{className:"flex gap-2",children:[!f&&d.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors font-bold text-xs uppercase",children:"Back"}),d.jsx("button",{onClick:b,className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-bold text-xs uppercase shadow-lg shadow-blue-500/30",children:f?"Start":y?"Done":"Next"})]})]})]})}),p.type==="spotlight"&&i&&d.jsx("div",{ref:h,className:"absolute transform transition-all duration-300",style:{...v0e(i,p.tooltipPosition||"top"),zIndex:1e4},onClick:k=>k.stopPropagation(),children:d.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border-4 border-gray-900 dark:border-gray-100 px-6 py-4 max-w-xs",children:[d.jsx("svg",{className:"absolute",style:w0e(p.tooltipPosition||"top",i),width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S0e()}),d.jsxs("div",{className:"relative z-10",children:[d.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tight",children:p.title}),d.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-snug mb-3",children:p.content}),d.jsx("div",{className:"flex justify-center gap-1.5 mb-3",children:dm.map((k,C)=>d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${C===n?"w-6 bg-blue-600 dark:bg-blue-400":C<n?"w-1.5 bg-green-500 dark:bg-green-400":"w-1.5 bg-gray-400 dark:bg-gray-600"}`},C))}),d.jsxs("div",{className:"flex justify-between items-center gap-2",children:[d.jsx("button",{onClick:v,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors font-bold uppercase",children:"Skip"}),d.jsxs("div",{className:"flex gap-2",children:[!f&&d.jsx("button",{onClick:x,className:"px-3 py-1.5 bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors font-bold text-xs uppercase",children:"Back"}),d.jsx("button",{onClick:b,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-bold text-xs uppercase shadow-lg",children:y?"Done":"Next"})]})]})]})]})}),p.type==="spotlight"&&!i&&l&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:d.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md border-4 border-gray-900 dark:border-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-3"}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-bold uppercase",children:"Loading..."})]})})}),p.type==="spotlight"&&!i&&!l&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",onClick:k=>k.stopPropagation(),children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md border-4 border-gray-900 dark:border-gray-100",children:[d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 font-bold",children:"⚠️ Element not found"}),d.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-xs",children:"This feature may not be available on this page."})]}),d.jsxs("div",{className:"flex justify-center gap-3",children:[d.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 transition-colors font-bold text-xs uppercase",children:"Back"}),d.jsx("button",{onClick:b,className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-bold text-xs uppercase",children:"Skip"})]})]})}),d.jsx("style",{children:`
        @keyframes pulse-spotlight {
          0%, 100% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6);
          }
          50% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);
          }
        }
      `})]}):null};function v0e(e,t){const n=window.innerWidth,a=window.innerHeight,i=320;let s={};switch(t){case"top":s={left:Math.min(Math.max(e.left+e.width/2,i/2+16),n-i/2-16),top:e.top-50,transform:"translate(-50%, -100%)"};break;case"bottom":s={left:Math.min(Math.max(e.left+e.width/2,i/2+16),n-i/2-16),top:e.bottom+50,transform:"translate(-50%, 0)"};break;case"left":s={left:e.left-50,top:Math.min(Math.max(e.top+e.height/2,120),a-120),transform:"translate(-100%, -50%)"};break;case"right":s={left:e.right+50,top:Math.min(Math.max(e.top+e.height/2,120),a-120),transform:"translate(0, -50%)"};break;default:s={left:Math.min(Math.max(e.left+e.width/2,i/2+16),n-i/2-16),top:e.top-50,transform:"translate(-50%, -100%)"}}return s}function w0e(e,t){const n=window.innerWidth,a=t.left+t.width/2,i=Math.min(Math.max(a,320/2+16),n-320/2-16),s=a-i,l=Math.max(-40,Math.min(40,s/320*100));switch(e){case"top":return{bottom:"-36px",left:`calc(50% + ${l}%)`,transform:"translateX(-50%)"};case"bottom":return{top:"-36px",left:`calc(50% + ${l}%)`,transform:"translateX(-50%) rotate(180deg)"};case"left":return{right:"-36px",top:"50%",transform:"translateY(-50%) rotate(-90deg)"};case"right":return{left:"-36px",top:"50%",transform:"translateY(-50%) rotate(90deg)"};default:return{bottom:"-36px",left:`calc(50% + ${l}%)`,transform:"translateX(-50%)"}}}function S0e(){return d.jsxs(d.Fragment,{children:[d.jsx("path",{d:"M 10 2 Q 15 10, 20 2 L 20 30 Q 20 35, 15 38 L 15 38 Q 10 35, 10 30 Z",className:"fill-gray-900 dark:fill-gray-100",strokeWidth:"0"}),d.jsx("path",{d:"M 12 4 Q 15 10, 18 4 L 18 29 Q 18 33, 15 35 L 15 35 Q 12 33, 12 29 Z",className:"fill-white dark:fill-gray-800",strokeWidth:"0"})]})}const T0e=({isOpen:e,onClose:t})=>{const{t:r}=wd();if(!e)return null;const n=[{title:r("keyboardShortcuts.general",{defaultValue:"General"}),shortcuts:[{keys:["Ctrl","K"],description:r("keyboardShortcuts.openHelp",{defaultValue:"Open keyboard shortcuts help"})},{keys:["?"],description:r("keyboardShortcuts.openHelpAlt",{defaultValue:"Show this help dialog"})},{keys:["Esc"],description:r("keyboardShortcuts.closeModal",{defaultValue:"Close modal / Clear input"})},{keys:["Tab"],description:r("keyboardShortcuts.navigateForward",{defaultValue:"Navigate forward"})},{keys:["Shift","Tab"],description:r("keyboardShortcuts.navigateBackward",{defaultValue:"Navigate backward"})}]},{title:r("keyboardShortcuts.chat",{defaultValue:"Chat"}),shortcuts:[{keys:["Ctrl","Enter"],description:r("keyboardShortcuts.sendMessage",{defaultValue:"Send message"})},{keys:["Shift","Enter"],description:r("keyboardShortcuts.newLine",{defaultValue:"New line in message"})},{keys:["↑"],description:r("keyboardShortcuts.previousPrompt",{defaultValue:"Previous prompt in history"})},{keys:["↓"],description:r("keyboardShortcuts.nextPrompt",{defaultValue:"Next prompt in history"})}]},{title:r("keyboardShortcuts.modals",{defaultValue:"Modals & Dialogs"}),shortcuts:[{keys:["Esc"],description:r("keyboardShortcuts.closeDialog",{defaultValue:"Close current dialog"})},{keys:["Tab"],description:r("keyboardShortcuts.cycleFocus",{defaultValue:"Cycle through controls (focus trap active)"})},{keys:["Enter"],description:r("keyboardShortcuts.confirmAction",{defaultValue:"Confirm action / Submit form"})}]}];return d.jsx(kw.FocusTrap,{active:e,children:d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:d.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["⌨️ ",r("keyboardShortcuts.title",{defaultValue:"Keyboard Shortcuts"})]}),d.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close keyboard shortcuts help",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"space-y-6",children:n.map((a,i)=>d.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-b-0",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:a.title}),d.jsx("div",{className:"space-y-2",children:a.shortcuts.map((s,l)=>d.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[d.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.description}),d.jsx("div",{className:"flex items-center gap-1",children:s.keys.map((u,h)=>d.jsxs(dr.Fragment,{children:[d.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm",children:u}),h<s.keys.length-1&&d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+"})]},h))})]},l))})]},i))}),d.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[d.jsxs("strong",{children:[r("keyboardShortcuts.tip",{defaultValue:"Tip"}),":"]})," ",r("keyboardShortcuts.macNote",{defaultValue:"On Mac, use ⌘ (Cmd) instead of Ctrl for most shortcuts."})]})}),d.jsx("div",{className:"flex justify-end gap-3 mt-6",children:d.jsx("button",{onClick:t,className:"btn-primary",children:r("common.close",{defaultValue:"Close"})})})]})})})},o3="LLM Proxy App Data",Kv="saved_plans.json";let ju=null;class k0e{name="plans";enabled=!0;async getAppFolder(){if(ju)return ju;const t=await aa(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${o3}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to search for app folder: ${r.statusText}`);const n=await r.json();if(n.files&&n.files.length>0)return ju=n.files[0].id,ju;const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:o3,mimeType:"application/vnd.google-apps.folder"})});if(!a.ok)throw new Error(`Failed to create app folder: ${a.statusText}`);return ju=(await a.json()).id,ju}async getFileId(t){const r=await aa(),n=await this.getAppFolder(),a=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`Failed to search for file: ${a.statusText}`);const i=await a.json();return i.files&&i.files.length>0?i.files[0].id:null}async pull(){try{const t=await this.getFileId(Kv);if(!t)return null;const r=await aa(),n=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error(`Failed to download plans: ${n.statusText}`);const a=await n.text();return JSON.parse(a)}catch(t){throw console.error("Error pulling plans from Google Drive:",t),t}}async push(t){try{const r=await aa(),n=await this.getAppFolder(),a=await this.getFileId(Kv),i=JSON.stringify(t,null,2),s=new Blob([i],{type:"application/json"});if(a){const l=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${a}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:s});if(!l.ok)throw new Error(`Failed to update plans file: ${l.statusText}`)}else{const l={name:Kv,parents:[n],mimeType:"application/json"},u=new FormData;u.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),u.append("file",s);const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:u});if(!h.ok)throw new Error(`Failed to create plans file: ${h.statusText}`)}console.log(`✓ Pushed ${t.length} plans to Google Drive`)}catch(r){throw console.error("Error pushing plans to Google Drive:",r),r}}async getLocalData(){return await El.getAllPlans()}async setLocalData(t){await El.replacePlans(t)}async getLastModified(){const t=await this.getLocalData();return t.length===0?0:Math.max(...t.map(r=>r.timestamp))}async shouldSync(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking if plans should sync:",t),!1}}mergeData(t,r){return El.mergePlans(t,r)}}const E0e=new k0e,l3="LLM Proxy App Data",Xv="saved_playlists.json";let Bu=null;class C0e{name="playlists";enabled=!0;async getAppFolder(){if(Bu)return Bu;const t=await aa(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${l3}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to search for app folder: ${r.statusText}`);const n=await r.json();if(n.files&&n.files.length>0)return Bu=n.files[0].id,Bu;const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:l3,mimeType:"application/vnd.google-apps.folder"})});if(!a.ok)throw new Error(`Failed to create app folder: ${a.statusText}`);return Bu=(await a.json()).id,Bu}async getFileId(t){const r=await aa(),n=await this.getAppFolder(),a=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`Failed to search for file: ${a.statusText}`);const i=await a.json();return i.files&&i.files.length>0?i.files[0].id:null}async pull(){try{const t=await this.getFileId(Xv);if(!t)return null;const r=await aa(),n=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error(`Failed to download playlists: ${n.statusText}`);const a=await n.text();return JSON.parse(a)}catch(t){throw console.error("Error pulling playlists from Google Drive:",t),t}}async push(t){try{const r=await aa(),n=await this.getAppFolder(),a=await this.getFileId(Xv),i=JSON.stringify(t,null,2),s=new Blob([i],{type:"application/json"});if(a){const l=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${a}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:s});if(!l.ok)throw new Error(`Failed to update playlists file: ${l.statusText}`)}else{const l={name:Xv,parents:[n],mimeType:"application/json"},u=new FormData;u.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),u.append("file",s);const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:u});if(!h.ok)throw new Error(`Failed to create playlists file: ${h.statusText}`)}console.log(`✓ Pushed ${t.length} playlists to Google Drive`)}catch(r){throw console.error("Error pushing playlists to Google Drive:",r),r}}async getLocalData(){return await Li.init(),await Li.exportAllPlaylists()}async setLocalData(t){await Li.init(),await Li.importAndMergePlaylists(t)}async getLastModified(){const t=await this.getLocalData();return t.length===0?0:Math.max(...t.map(r=>r.updatedAt||r.createdAt||0))}async shouldSync(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking if playlists should sync:",t),!1}}mergeData(t,r){const n=new Map;return t.forEach(a=>{const i=a.name.trim().toLowerCase();n.set(i,a)}),r.forEach(a=>{const i=a.name.trim().toLowerCase(),s=n.get(i),l=a.updatedAt||a.createdAt||0,u=s&&(s.updatedAt||s.createdAt)||0;(!s||l>u)&&n.set(i,a)}),Array.from(n.values())}}const _0e=new C0e,A0e=_.createContext(void 0);function N0e({children:e}){const[t,r]=_.useState(ta.getStatus());_.useEffect(()=>{const s=ta.onStatusChange(l=>{r(l)});return()=>{s()}},[]);const n=async()=>{await ta.syncAll()},a=s=>{ta.setAdapterEnabled(s,!0)},i=s=>{ta.setAdapterEnabled(s,!1)};return d.jsx(A0e.Provider,{value:{syncStatus:t,manualSync:n,enableAdapter:a,disableAdapter:i},children:e})}const L5={maxConcurrentAgents:3,maxQueuedAgents:10,maxIterationsPerAgent:10,maxMemoryPerAgent:200,maxTotalMemory:600},P5=150,R5=.7;function L0e(e,t,r,n){const a=t.length>0?typeof t[0].content=="string"?t[0].content:JSON.stringify(t[0].content):r;return{id:crypto.randomUUID(),chatId:e,status:"idle",phase:"waiting",messages:t,currentInput:r,iterationCount:0,maxIterations:10,startTime:Date.now(),lastUpdateTime:Date.now(),estimatedMemoryUsage:0,tokenCount:0,toolCallsCount:0,retryCount:0,title:n||a.slice(0,50),createdAt:Date.now()}}function I5(e){let t=50;return t+=e.messages.length*5/1024,e.phase==="streaming"&&(t+=20),t+=e.toolCallsCount*10,Math.round(t)}function D5(e){const t=Math.floor(e/1e3),r=Math.floor(t/60),n=Math.floor(r/60);return n>0?`${n}h ${r%60}m`:r>0?`${r}m ${t%60}s`:`${t}s`}const P0e=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_AGENT_LIMITS:L5,MEMORY_PER_AGENT:P5,SAFETY_MARGIN:R5,createAgentState:L0e,estimateAgentMemory:I5,formatDuration:D5},Symbol.toStringTag,{value:"Module"})),R0e="AgentManagerDB",Qi="agents",I0e=1;class D0e{dbPromise=null;async getDB(){return this.dbPromise||(this.dbPromise=U0(R0e,I0e,{upgrade(t){if(!t.objectStoreNames.contains(Qi)){const r=t.createObjectStore(Qi,{keyPath:"id"});r.createIndex("status","status"),r.createIndex("chatId","chatId"),r.createIndex("createdAt","createdAt"),r.createIndex("completedAt","completedAt")}}})),this.dbPromise}async saveAgent(t){try{await(await this.getDB()).put(Qi,t),this.backupToLocalStorage(t)}catch(r){throw console.error("Failed to save agent to IndexedDB:",r),r}}async getAgent(t){try{return await(await this.getDB()).get(Qi,t)||null}catch(r){return console.error("Failed to get agent from IndexedDB:",r),null}}async getAllAgents(){try{return(await(await this.getDB()).getAll(Qi)).sort((n,a)=>a.createdAt-n.createdAt)}catch(t){return console.error("Failed to get all agents from IndexedDB:",t),[]}}async getRunningAgents(){try{return await(await this.getDB()).transaction(Qi).store.index("status").getAll("running")}catch(t){return console.error("Failed to get running agents from IndexedDB:",t),[]}}async getQueuedAgents(){try{return await(await this.getDB()).transaction(Qi).store.index("status").getAll("queued")}catch(t){return console.error("Failed to get queued agents from IndexedDB:",t),[]}}async getCompletedAgents(){try{return(await(await this.getDB()).transaction(Qi).store.index("status").getAll("completed")).sort((a,i)=>(i.completedAt||0)-(a.completedAt||0))}catch(t){return console.error("Failed to get completed agents from IndexedDB:",t),[]}}async getFailedAgents(){try{return(await(await this.getDB()).getAll(Qi)).filter(n=>n.status==="error"||n.status==="aborted").sort((n,a)=>a.lastUpdateTime-n.lastUpdateTime)}catch(t){return console.error("Failed to get failed agents from IndexedDB:",t),[]}}async deleteAgent(t){try{await(await this.getDB()).delete(Qi,t),localStorage.removeItem(`agent_backup_${t}`)}catch(r){throw console.error("Failed to delete agent from IndexedDB:",r),r}}async updateAgentStatus(t,r){try{const n=await this.getAgent(t);n&&(n.status=r,n.lastUpdateTime=Date.now(),r==="completed"&&(n.completedAt=Date.now()),await this.saveAgent(n))}catch(n){throw console.error("Failed to update agent status:",n),n}}async clearCompletedAgents(){try{const t=await this.getCompletedAgents(),n=(await this.getDB()).transaction(Qi,"readwrite");await Promise.all([...t.map(a=>n.store.delete(a.id)),n.done]),t.forEach(a=>{localStorage.removeItem(`agent_backup_${a.id}`)})}catch(t){throw console.error("Failed to clear completed agents:",t),t}}async clearAllAgents(){try{await(await this.getDB()).clear(Qi),Object.keys(localStorage).forEach(n=>{n.startsWith("agent_backup_")&&localStorage.removeItem(n)})}catch(t){throw console.error("Failed to clear all agents:",t),t}}backupToLocalStorage(t){try{const r={id:t.id,chatId:t.chatId,status:t.status,lastUpdateTime:t.lastUpdateTime,title:t.title};localStorage.setItem(`agent_backup_${t.id}`,JSON.stringify(r))}catch(r){console.warn("Failed to backup agent to localStorage:",r)}}}const Vr=new D0e;async function M0e(){const e=await Vr.getAllAgents(),t=Date.now(),r=3e4;return e.filter(n=>n.status==="running"&&t-n.lastUpdateTime>r)}function M5(){if("memory"in performance&&performance.memory){const e=performance.memory,t=e.jsHeapSizeLimit/(1024*1024),r=e.usedJSHeapSize/(1024*1024),n=t-r;return{totalMemory:t,usedMemory:r,availableMemory:n,jsHeapLimit:t,isLowMemory:n/t<.2}}return{totalMemory:2048,usedMemory:512,availableMemory:1536,jsHeapLimit:2048,isLowMemory:!1}}function O5(e){const t=Math.floor(e.availableMemory*R5/P5);return Math.max(1,Math.min(5,t))}function O0e(e,t,r,n){return e.iterationCount>=t.maxIterationsPerAgent?(e.status="error",e.lastError=`Exceeded max iterations (${t.maxIterationsPerAgent})`,{canProceed:!1,reason:e.lastError}):e.estimatedMemoryUsage>t.maxMemoryPerAgent?(e.status="error",e.lastError=`Exceeded memory limit (${t.maxMemoryPerAgent}MB)`,{canProceed:!1,reason:e.lastError}):r>=t.maxConcurrentAgents?{canProceed:!1,reason:"Max concurrent agents reached - queueing"}:n>=t.maxQueuedAgents?(e.status="error",e.lastError=`Queue full (${t.maxQueuedAgents} agents)`,{canProceed:!1,reason:e.lastError}):{canProceed:!0}}function j0e(){const e=M5(),t=O5(e);return{...L5,maxConcurrentAgents:t}}function Wye(e){return e.availableMemory<200?{level:"critical",message:`Critical: Only ${Math.round(e.availableMemory)}MB available. Consider closing tabs or reloading.`}:e.isLowMemory?{level:"warning",message:`Warning: Low memory detected (${Math.round(e.availableMemory)}MB available). New agents may be paused.`}:{level:"ok"}}class B0e{runningAgents=new Map;queuedAgents=[];limits;listeners=new Map;executionCallback=null;constructor(t){this.limits=t||j0e()}setExecutionCallback(t){this.executionCallback=t}on(t,r){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r)}off(t,r){const n=this.listeners.get(t);n&&n.delete(r)}emit(t,r){const n=this.listeners.get(t);n&&n.forEach(a=>a(r))}async enqueue(t){t.estimatedMemoryUsage=I5(t);const r=O0e(t,this.limits,this.runningAgents.size,this.queuedAgents.length);if(!r.canProceed){if(t.status==="error")throw await Vr.saveAgent(t),this.emit("agent-error",t),new Error(r.reason);t.status="queued",this.queuedAgents.push(t),await Vr.saveAgent(t),this.emit("agent-queued",t),this.emit("queue-updated",t);return}await this.startAgent(t)}async startAgent(t){if(t.status="running",t.startTime=Date.now(),t.lastUpdateTime=Date.now(),this.runningAgents.set(t.id,t),await Vr.saveAgent(t),this.emit("agent-started",t),this.emit("queue-updated",t),this.executionCallback)try{await this.executionCallback(t)}catch(r){console.error("Agent execution error:",r),t.status="error",t.lastError=r.message,await Vr.saveAgent(t),this.emit("agent-error",t),this.runningAgents.delete(t.id),await this.dequeue()}}async completeAgent(t){const r=this.runningAgents.get(t);r&&(r.status="completed",r.completedAt=Date.now(),await Vr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-completed",r),this.emit("queue-updated",r),await this.dequeue())}async pauseAgent(t){const r=this.runningAgents.get(t);if(!r){const n=this.queuedAgents.findIndex(a=>a.id===t);if(n!==-1){const a=this.queuedAgents[n];a.status="paused",await Vr.saveAgent(a),this.queuedAgents.splice(n,1),this.emit("agent-paused",a),this.emit("queue-updated",a)}return}r.status="paused",await Vr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-paused",r),this.emit("queue-updated",r),await this.dequeue()}async abortAgent(t){const r=this.runningAgents.get(t);if(!r){const n=this.queuedAgents.findIndex(a=>a.id===t);if(n!==-1){const a=this.queuedAgents[n];a.status="aborted",await Vr.saveAgent(a),this.queuedAgents.splice(n,1),this.emit("agent-aborted",a),this.emit("queue-updated",a)}return}r.status="aborted",await Vr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-aborted",r),this.emit("queue-updated",r),await this.dequeue()}async resumeAgent(t){const r=await Vr.getAgent(t);!r||r.status!=="paused"||(r.status="idle",await this.enqueue(r))}async dequeue(){if(this.queuedAgents.length>0&&this.runningAgents.size<this.limits.maxConcurrentAgents){const t=this.queuedAgents.shift();await this.startAgent(t)}}updateMaxConcurrent(t){this.limits.maxConcurrentAgents=Math.max(1,Math.min(5,t)),this.dequeue()}async pauseQueue(){const t=[...this.queuedAgents];this.queuedAgents=[];for(const r of t)r.status="paused",await Vr.saveAgent(r),this.emit("agent-paused",r);this.emit("queue-updated",t[0]||{})}getStatus(){return{running:this.runningAgents.size,queued:this.queuedAgents.length,maxConcurrent:this.limits.maxConcurrentAgents,runningAgents:Array.from(this.runningAgents.values()),queuedAgents:[...this.queuedAgents]}}clear(){this.runningAgents.clear(),this.queuedAgents=[]}}const Us=new B0e,F0e=new URL("/assets/agent-worker-a1XFDa3h.ts",import.meta.url);function z0e(){const e=_.useRef(new Map),t=5,[,r]=_.useState({}),n=_.useCallback(l=>{if(e.current.size>=t)throw new Error("Max concurrent workers reached. Please queue agent.");const u=new Worker(F0e,{type:"module"});u.addEventListener("message",async p=>{const{type:f,payload:y}=p.data;try{switch(f){case"AGENT_UPDATE":y?.agent&&(await Vr.saveAgent(y.agent),window.dispatchEvent(new CustomEvent("agent-update",{detail:y.agent})));break;case"AGENT_COMPLETED":y?.agent&&(await Vr.saveAgent(y.agent),e.current.delete(y.agent.id),u.terminate(),await Us.completeAgent(y.agent.id),window.dispatchEvent(new CustomEvent("agent-completed",{detail:y.agent})),r({}));break;case"AGENT_ERROR":y?.agent&&(await Vr.saveAgent(y.agent),e.current.delete(y.agent.id),u.terminate(),window.dispatchEvent(new CustomEvent("agent-error",{detail:y.agent})),r({}));break;case"AGENT_ABORTED":y?.agent&&(await Vr.saveAgent(y.agent),e.current.delete(y.agent.id),u.terminate(),window.dispatchEvent(new CustomEvent("agent-aborted",{detail:y.agent})),r({}));break;case"AGENT_PAUSED":y?.agent&&(await Vr.saveAgent(y.agent),e.current.delete(y.agent.id),u.terminate(),window.dispatchEvent(new CustomEvent("agent-paused",{detail:y.agent})),r({}));break}}catch(b){console.error("Error handling worker message:",b)}}),u.addEventListener("error",p=>{console.error("Worker error:",p),e.current.delete(l.id),u.terminate(),l.status="error",l.lastError="Worker crashed: "+p.message,Vr.saveAgent(l),window.dispatchEvent(new CustomEvent("agent-error",{detail:l})),r({})});const h={type:"START_AGENT",payload:{agent:l}};u.postMessage(h),e.current.set(l.id,u),r({})},[t]),a=_.useCallback(l=>{const u=e.current.get(l);if(u){const h={type:"PAUSE_AGENT",payload:{agentId:l}};u.postMessage(h)}},[]),i=_.useCallback(l=>{const u=e.current.get(l);if(u){const h={type:"ABORT_AGENT",payload:{agentId:l}};u.postMessage(h)}},[]),s=_.useCallback(()=>{e.current.forEach(l=>{try{l.terminate()}catch(u){console.warn("Error terminating worker:",u)}}),e.current.clear(),r({})},[]);return _.useEffect(()=>s,[s]),{workers:e.current,maxWorkers:t,startAgent:n,pauseAgent:a,abortAgent:i,cleanup:s}}async function U0e(e={}){const t=await M0e();return t.length===0?!1:(console.log(`🔄 Found ${t.length} interrupted agent(s)`,t),e.autoRecover?(await j5(t.map(r=>r.id)),!0):e.autoDiscard?(await B5(t.map(r=>r.id)),!0):(e.onInterruptedAgentsFound&&e.onInterruptedAgentsFound(t),!0))}async function j5(e){const t=e.length;for(const r of e){const n=await Vr.getAgent(r);n&&(n.status="queued",n.retryCount+=1,n.lastUpdateTime=Date.now(),n.lastError=void 0,await Vr.saveAgent(n),window.dispatchEvent(new CustomEvent("agent-recovered",{detail:n})))}console.log(`✅ Recovered ${t} agent(s)`)}async function B5(e){const t=e.length;for(const r of e){const n=await Vr.getAgent(r);n&&(n.status="aborted",n.lastError="Discarded by user after interruption",n.lastUpdateTime=Date.now(),await Vr.saveAgent(n))}console.log(`🗑️ Discarded ${t} agent(s)`)}const $0e=({agents:e,onRecover:t,onDiscard:r,onClose:n})=>{const[a,i]=_.useState(new Set(e.map(y=>y.id))),s=y=>{const b=new Set(a);b.has(y)?b.delete(y):b.add(y),i(b)},l=()=>{i(new Set(e.map(y=>y.id)))},u=()=>{i(new Set)},h=()=>{t(Array.from(a)),n()},p=()=>{r(Array.from(a)),n()},f=()=>{r(e.map(y=>y.id)),n()};return d.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("span",{className:"text-3xl",children:"🔄"}),d.jsx("h2",{className:"text-2xl font-bold dark:text-gray-100",children:"Recover Interrupted Agents"})]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"The following agents were interrupted when you closed the browser. Would you like to recover them?"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:e.map(y=>{const b=Date.now()-y.lastUpdateTime;return d.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a.has(y.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onClick:()=>s(y.id),children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("input",{type:"checkbox",checked:a.has(y.id),onChange:x=>{x.stopPropagation(),s(y.id)},className:"mt-1"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:y.title}),d.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400",children:[d.jsxs("div",{children:["📊 Iteration ",y.iterationCount,"/",y.maxIterations]}),d.jsxs("div",{children:["💬 ",y.messages.length," messages"]}),d.jsxs("div",{children:["⏱️ Interrupted ",D5(b)," ago"]})]}),y.lastError&&d.jsxs("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:["⚠️ Last error: ",y.lastError]})]})]})},y.id)})}),d.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:l,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Select All"}),d.jsx("span",{className:"text-gray-400",children:"•"}),d.jsx("button",{onClick:u,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Select None"})]}),d.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.size," of ",e.length," selected"]})]}),d.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[d.jsxs("button",{onClick:h,disabled:a.size===0,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:["🔄 Recover Selected (",a.size,")"]}),d.jsx("button",{onClick:p,disabled:a.size===0,className:"flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",children:"🗑️ Discard Selected"}),d.jsx("button",{onClick:f,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors",children:"Discard All"})]})]})})},F5=_.createContext(void 0),q0e=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState([]),[i,s]=_.useState([]),[l,u]=_.useState(!1),[h,p]=_.useState(!1),[f,y]=_.useState([]),b=z0e();_.useEffect(()=>{Us.setExecutionCallback(async q=>{try{b.startAgent(q)}catch(Q){console.error("Failed to start agent in worker:",Q),q.status="error",q.lastError=Q instanceof Error?Q.message:"Failed to start worker",await Vr.saveAgent(q)}})},[b]),_.useEffect(()=>{x()},[]),_.useEffect(()=>{const q=()=>{x()};return window.addEventListener("agent-update",q),window.addEventListener("agent-completed",q),window.addEventListener("agent-error",q),window.addEventListener("agent-paused",q),window.addEventListener("agent-aborted",q),window.addEventListener("agent-recovered",q),()=>{window.removeEventListener("agent-update",q),window.removeEventListener("agent-completed",q),window.removeEventListener("agent-error",q),window.removeEventListener("agent-paused",q),window.removeEventListener("agent-aborted",q),window.removeEventListener("agent-recovered",q)}},[]),_.useEffect(()=>{U0e({onInterruptedAgentsFound:q=>{y(q),p(!0)}})},[]),_.useEffect(()=>{const q=setInterval(()=>{const Q=M5(),F=O5(Q);Us.updateMaxConcurrent(F),Q.isLowMemory&&(console.warn("⚠️ Low memory detected - pausing queue"),Us.pauseQueue())},1e4);return()=>clearInterval(q)},[]);const x=async()=>{const q=await Vr.getAllAgents(),Q=await Vr.getRunningAgents(),F=await Vr.getQueuedAgents();s(q),r(Q),a(F)},v=_.useCallback(async(q,Q,F,K)=>{const{createAgentState:W}=await Rt(async()=>{const{createAgentState:O}=await Promise.resolve().then(()=>P0e);return{createAgentState:O}},void 0),j=W(q,Q,F,K);return await Vr.saveAgent(j),j},[]),T=_.useCallback(async q=>{await Us.enqueue(q),await x()},[]),k=_.useCallback(async q=>{await Us.pauseAgent(q),b.pauseAgent(q),await x()},[b]),C=_.useCallback(async q=>{await Us.resumeAgent(q),await x()},[]),A=_.useCallback(async q=>{await Us.abortAgent(q),b.abortAgent(q),await x()},[b]),P=_.useCallback(async q=>{const Q=await Vr.getAgent(q);Q&&(Q.status="idle",Q.retryCount+=1,Q.lastError=void 0,await Us.enqueue(Q),await x())},[]),M=_.useCallback(async q=>{await j5(q),p(!1);for(const Q of q){const F=await Vr.getAgent(Q);F&&F.status==="queued"&&await Us.enqueue(F)}await x()},[]),L=_.useCallback(async q=>{await B5(q),p(!1),await x()},[]),D={createAgent:v,startAgent:T,pauseAgent:k,resumeAgent:C,abortAgent:A,retryAgent:P,runningAgents:t,queuedAgents:n,allAgents:i,showAgentManager:l,setShowAgentManager:u};return d.jsxs(F5.Provider,{value:D,children:[e,h&&f.length>0&&d.jsx($0e,{agents:f,onRecover:M,onDiscard:L,onClose:()=>p(!1)})]})},z5=()=>{const e=_.useContext(F5);if(!e)throw new Error("useAgents must be used within an AgentProvider");return e},H0e=()=>{const{runningAgents:e,queuedAgents:t,setShowAgentManager:r}=z5();return e.length+t.length===0?null:d.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors shadow-md",title:"View agent manager",children:[d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"text-lg",children:"🤖"}),e.length>0&&d.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),d.jsx("div",{className:"flex flex-col items-start text-xs",children:d.jsxs("span",{className:"font-medium",children:[e.length>0&&d.jsxs("span",{className:"text-green-200",children:[e.length," running"]}),e.length>0&&t.length>0&&d.jsx("span",{className:"mx-1",children:"•"}),t.length>0&&d.jsxs("span",{className:"text-yellow-200",children:[t.length," queued"]})]})})]})},G0e=_.lazy(()=>Rt(()=>import("./SettingsPage-CB8do9go.js"),__vite__mapDeps([53,54,55,56])).then(e=>({default:e.SettingsPage}))),W0e=_.lazy(()=>Rt(()=>import("./PlanningPage-CKlUqBKR.js"),[]).then(e=>({default:e.PlanningPage}))),V0e=_.lazy(()=>Rt(()=>import("./SwagPage-CLOrO_GS.js"),__vite__mapDeps([57,58,59,55,60,61,62])).then(e=>({default:e.SwagPage}))),Y0e=_.lazy(()=>Rt(()=>import("./QuizPage-CmhPJ89t.js"),__vite__mapDeps([63,59,55,61,64]))),Q0e=_.lazy(()=>Rt(()=>import("./FeedPage-CHYsr7Ld.js"),__vite__mapDeps([65,64,54,55,59]))),K0e=_.lazy(()=>Rt(()=>import("./BillingPage-BjUS4TAy.js"),__vite__mapDeps([66,67]))),c3=_.lazy(()=>Rt(()=>import("./HelpPage-B6FLz1NA.js"),[]).then(e=>({default:e.HelpPage}))),u3=_.lazy(()=>Rt(()=>import("./PrivacyPolicy-k6L-bYRz.js"),[]).then(e=>({default:e.PrivacyPolicy}))),d3=_.lazy(()=>Rt(()=>import("./SharedSnippetViewer-ld_h3nNM.js"),__vite__mapDeps([68,58])).then(e=>({default:e.SharedSnippetViewer}))),X0e=_.lazy(()=>Rt(()=>import("./ImageEditorPage-CYzJz9bj.js"),__vite__mapDeps([69,60])).then(e=>({default:e.ImageEditorPage}))),J0e=_.lazy(()=>Rt(()=>import("./AgentManager-ELSTB6WB.js"),[]).then(e=>({default:e.AgentManager}))),h3=()=>d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400"}),d.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})});function Z0e(){const{isAuthenticated:e,getToken:t}=Di(),{settings:r}=Xs(),{usage:n,loading:a}=q0(),{showAgentManager:i,setShowAgentManager:s}=z5(),{features:l}=o$(),{i18n:u}=wd(),h=Pl(),p=Fo(),[f,y]=_.useState(!1),[b,x]=_.useState(!1),[v,T]=_.useState(!1),[k,C]=_.useState(!1),[A,P]=_.useState(!1),[M,L]=_.useState(null),[D,q]=_.useState(!1),[Q,F]=_.useState(!1),[K,W]=_.useState(!1);_.useEffect(()=>{console.log("🧭 Route changed to:",p.pathname)},[p.pathname]),_.useEffect(()=>{console.log("🎓 showWelcomeWizard changed to:",Q)},[Q]),_.useEffect(()=>(ta.registerAdapter(E0e),ta.registerAdapter(_0e),localStorage.getItem("auto_sync_enabled")!=="false"?(ta.start(300*1e3),console.log("✅ Unified sync started")):console.log("⚠️ Auto-sync disabled by user"),()=>{ta.stop()}),[]),_.useEffect(()=>{r.language&&u.language!==r.language&&u.changeLanguage(r.language);const U=["ar","he","fa"].includes(u.language)?"rtl":"ltr";document.documentElement.dir=U,document.documentElement.lang=u.language},[r.language,u]),_.useEffect(()=>{const U=z=>{(z.ctrlKey&&z.key==="k"||z.key==="?")&&(z.preventDefault(),W(!0))};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[]),_.useEffect(()=>{q(!1)},[p.pathname]);const j=U=>{console.log("handleNavigate called:",{path:U,isChatLoading:k,currentPath:p.pathname}),k&&p.pathname==="/"?(console.log("Showing navigation warning (chat is loading)"),L(U),P(!0)):(console.log("Navigating to:",U),h(U))},O=()=>{P(!1),M&&h(M),L(null)},$=()=>{P(!1),L(null)};_.useEffect(()=>{!k&&A&&(P(!1),L(null))},[k,A]);const[I,G]=Pi("chat_enabled_tools",{web_search:!0,execute_js:!0,scrape_url:!0,youtube:!0,transcribe:!0,generate_chart:!0,generate_image:!0,search_knowledge_base:!1,manage_todos:!0,manage_snippets:!0,ask_llm:!1,generate_reasoning_chain:!1});if(_.useEffect(()=>{const U=z=>{if(k&&p.pathname==="/")return z.preventDefault(),z.returnValue="",""};return window.addEventListener("beforeunload",U),()=>window.removeEventListener("beforeunload",U)},[k,p.pathname]),_.useEffect(()=>{(async()=>{try{console.log("Starting migration from localStorage to IndexedDB...");const z=await es.migrateFromLocalStorage();console.log(`Migration complete: ${z} chats migrated`),await es.cleanupOldChats(100),console.log("Cleanup complete: kept 100 most recent chats")}catch(z){console.error("Error during migration:",z)}})(),H3()},[]),_.useEffect(()=>{const U="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";if(window.google)S2(U);else{const z=setInterval(()=>{window.google&&(S2(U),clearInterval(z))},100);setTimeout(()=>clearInterval(z),5e3)}},[]),_.useEffect(()=>{e&&!v&&(async()=>{if(!e){T(!0);return}try{const z=await t();if(!z){T(!0);return}const ie=await kn(),H=await fetch(`${ie}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({messages:[{role:"user",content:"test"}],providers:r.providers||[]})});H.status===403&&(await H.json()).requiresProviderSetup&&(console.log("🔒 User needs to configure providers"),x(!0))}catch{console.log("Unable to verify provider setup status (this is not critical)")}finally{T(!0)}})()},[e,t,r.providers,v]),_.useEffect(()=>{},[v,e]),_.useEffect(()=>{const U=()=>{console.log("🎓 Received show-welcome-wizard event, setting showWelcomeWizard to true"),F(z=>(console.log("🎓 State update function called, prev:",z,"new: true"),!0))};return window.addEventListener("show-welcome-wizard",U),()=>window.removeEventListener("show-welcome-wizard",U)},[]),p.pathname.startsWith("/snippet/shared")||p.hash.includes("/snippet/shared")||p.pathname==="/privacy"||p.pathname==="/help")return d.jsxs(d.Fragment,{children:[d.jsx(_.Suspense,{fallback:d.jsx(h3,{}),children:p.pathname.startsWith("/snippet/shared")||p.hash.includes("/snippet/shared")?d.jsx(d3,{}):p.pathname==="/privacy"?d.jsx(u3,{}):p.pathname==="/help"?d.jsx(c3,{}):null}),e&&d.jsx(s3,{isOpen:Q,onClose:()=>F(!1)})]});if(!e)return d.jsx(w$,{});if(!v)return d.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:d.jsx("div",{className:"text-white text-xl",children:"Loading..."})});const oe=n?.exceeded||!1;return b||oe?d.jsx(x0e,{isBlocked:b||oe,onUnblock:()=>x(!1)}):d.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900",children:[d.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:p-4 focus:bg-blue-600 focus:text-white focus:rounded-br-lg focus:shadow-lg",children:"Skip to main content"}),d.jsxs("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[d.jsxs("div",{className:"flex justify-between items-center px-1 md:px-4 py-3 max-w-screen-2xl md:mx-auto",children:[d.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"h-10 sm:h-12 w-auto object-contain"}),d.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[d.jsx(C$,{}),p.pathname!=="/billing"&&d.jsxs("button",{onClick:()=>{console.log("Billing button clicked, navigating to /billing"),j("/billing")},className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 min-h-11 touch-target",title:n?`You have $${n.creditBalance.toFixed(2)} remaining of $${n.totalCredits.toFixed(2)} total credits`:"View billing and usage details","aria-label":"Billing and credits",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),n&&!a&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&d.jsxs("span",{className:`text-xs font-medium ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]}),p.pathname!=="/"&&d.jsxs("button",{onClick:()=>h("/"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium min-h-11 touch-target",title:"Back to Feed","aria-label":"Back to Feed",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),d.jsx("span",{className:"text-sm hidden md:inline",children:"Back"})]}),d.jsx(H0e,{}),d.jsx(R2,{})]}),d.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[p.pathname!=="/billing"&&n&&!a&&typeof n.creditBalance=="number"&&d.jsxs("div",{className:`text-xs font-medium px-2 py-1 rounded ${n.exceeded?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20"}`,children:["$",n.creditBalance.toFixed(2)]}),p.pathname!=="/"&&d.jsxs("button",{onClick:()=>j("/"),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Back to Feed","aria-label":"Back to Feed",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),d.jsx("span",{className:"hidden md:inline text-sm font-medium text-gray-700 dark:text-gray-300",children:"Back"})]}),d.jsx("button",{onClick:()=>q(!D),className:"icon-button","aria-label":D?"Close menu":"Open menu","aria-expanded":D,children:D?d.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):d.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),D&&d.jsx("nav",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",role:"navigation","aria-label":"Mobile navigation",children:d.jsxs("div",{className:"px-4 py-2 space-y-1",children:[p.pathname!=="/"&&d.jsxs("button",{onClick:()=>{h("/"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Feed"})]}),p.pathname!=="/chat"&&d.jsxs("button",{onClick:()=>{h("/chat"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Chat"})]}),p.pathname!=="/billing"&&d.jsxs("button",{onClick:()=>{j("/billing"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Billing"}),n&&!a&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&d.jsxs("div",{className:`text-xs ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]})]}),p.pathname!=="/swag"&&d.jsxs("button",{onClick:()=>{j("/swag"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Swag"})]}),l?.imageEditing&&d.jsxs("button",{onClick:()=>{j("/image-editor"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Image Editor"})]}),d.jsxs("button",{onClick:()=>{j("/settings"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Settings"})]}),d.jsxs("button",{onClick:()=>{j("/help"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Help"})]}),d.jsxs("button",{onClick:()=>{j("/privacy"),q(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Privacy Policy"})]}),d.jsxs("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",onClick:()=>q(!1),className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[d.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),d.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"GitHub"})]}),d.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:d.jsx(R2,{})})]})})]}),d.jsx($me,{}),d.jsx(H$,{}),d.jsx("main",{id:"main-content",className:"flex-1 overflow-y-auto",children:d.jsx("div",{className:"min-h-full max-w-screen-2xl md:mx-auto",children:d.jsx(_.Suspense,{fallback:d.jsx(h3,{}),children:d.jsxs(V9,{children:[d.jsx(Ki,{path:"/",element:d.jsx(Q0e,{})}),d.jsx(Ki,{path:"/chat",element:d.jsx(b0e,{enabledTools:I,setEnabledTools:G,showMCPDialog:f,setShowMCPDialog:y,onLoadingChange:C})}),d.jsx(Ki,{path:"/planning",element:d.jsx(W0e,{})}),d.jsx(Ki,{path:"/swag",element:d.jsx(V0e,{})}),d.jsx(Ki,{path:"/quiz",element:d.jsx(Y0e,{})}),d.jsx(Ki,{path:"/image-editor",element:d.jsx(X0e,{})}),d.jsx(Ki,{path:"/snippet/shared",element:d.jsx(d3,{})}),d.jsx(Ki,{path:"/billing",element:d.jsx(K0e,{})}),d.jsx(Ki,{path:"/settings",element:d.jsx(G0e,{enabledTools:I,setEnabledTools:G,onOpenMCPDialog:()=>y(!0)})}),d.jsx(Ki,{path:"/help",element:d.jsx(c3,{})}),d.jsx(Ki,{path:"/privacy",element:d.jsx(u3,{})})]})})})}),i&&d.jsx(_.Suspense,{fallback:null,children:d.jsx(J0e,{onSwitchToAgent:()=>{j("/"),s(!1)},onCreateNewAgent:()=>{j("/"),s(!1)},onClose:()=>s(!1)})}),K&&d.jsx(T0e,{isOpen:K,onClose:()=>W(!1)}),A&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:d.jsxs("div",{className:"card max-w-md w-full p-6",children:[d.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"⚠️ Active Request in Progress"}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"You have an active chat request running. Navigating away will stop the current request and you may lose the response."}),d.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 font-semibold",children:"Are you sure you want to continue?"}),d.jsxs("div",{className:"flex gap-3 justify-end",children:[d.jsx("button",{onClick:$,className:"btn-secondary px-4 py-2",children:"Stay Here"}),d.jsx("button",{onClick:O,className:"btn-primary px-4 py-2 bg-orange-600 hover:bg-orange-700",children:"Navigate Away"})]})]})}),d.jsx(bL,{}),d.jsx(s3,{isOpen:Q,onClose:()=>F(!1)})]})}function eye(){return d.jsx(y7,{basename:"/",children:d.jsx(tU,{children:d.jsx(I7,{children:d.jsx(l$,{children:d.jsx(YU,{children:d.jsx(vU,{children:d.jsx(XU,{children:d.jsx(N0e,{children:d.jsx(q0e,{children:d.jsx(s$,{children:d.jsx(QU,{children:d.jsx(WU,{children:d.jsx(K7,{children:d.jsx(X7,{children:d.jsx(D7,{children:d.jsx(qU,{children:d.jsx(GU,{children:d.jsx(Z0e,{})})})})})})})})})})})})})})})})})})}typeof window<"u"&&(window.ragDB=Va,console.log("🔧 ragDB exposed to window.ragDB for debugging"));const tye=()=>{const e="AU9cY15vsAcz4tWwm5U0O-nMBqYTP3cT0dOHTpHqPCCD1n9fwdcD-xNcuzMv_eP-UtaB3PFHTuHoXeCW",t=document.createElement("script");t.src=`https://www.paypal.com/sdk/js?client-id=${e}&currency=USD`,t.async=!0,t.onload=()=>console.log("✅ PayPal SDK loaded successfully"),t.onerror=()=>console.error("❌ Failed to load PayPal SDK"),document.head.appendChild(t)};tye();"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("✅ Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},3600*1e3),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{if(t.state==="installed"&&navigator.serviceWorker.controller){console.log("🔄 New version available! Please refresh the page.");const r=new CustomEvent("sw-update-available");window.dispatchEvent(r)}})})}).catch(e=>{console.error("❌ Service Worker registration failed:",e)})}):console.warn("⚠️ Service Workers not supported in this browser");const Jv=new URLSearchParams(window.location.search);if(Jv.get("reset")==="true"){console.log("🔄 Reset parameter detected - clearing remote Lambda preference"),tL(),Jv.delete("reset");const e=Jv.toString(),t=window.location.pathname+(e?"?"+e:"")+window.location.hash;window.history.replaceState({},"",t)}hB.createRoot(document.getElementById("root")).render(d.jsx(eye,{}));export{fse as $,Uye as A,vs as B,Wre as C,Vre as D,Moe as E,Nhe as F,Lye as G,Ure as H,bye as I,Doe as J,Cp as K,A5 as L,um as M,Ate as N,Qre as O,Bq as P,uT as Q,dr as R,Ia as S,cI as T,Cue as U,fg as V,Yt as W,Vs as X,Ase as Y,mA as Z,N as _,Di as a,Rhe as a$,YA as a0,VA as a1,_ye as a2,Sye as a3,Eye as a4,kye as a5,vye as a6,Mu as a7,$S as a8,Cye as a9,eT as aA,qO as aB,$c as aC,fO as aD,wd as aE,q0 as aF,oU as aG,sU as aH,D5 as aI,Us as aJ,Vr as aK,M5 as aL,Wye as aM,Rt as aN,pue as aO,ice as aP,sue as aQ,tT as aR,WN as aS,rpe as aT,Bye as aU,zye as aV,Oye as aW,Ct as aX,jye as aY,Bhe as aZ,Ihe as a_,wye as aa,Nye as ab,Aye as ac,Tye as ad,ure as ae,pd as af,mye as ag,yy as ah,yue as ai,Nre as aj,NS as ak,AA as al,xse as am,_m as an,Eue as ao,jre as ap,gg as aq,xt as ar,jt as as,bI as at,dhe as au,y6 as av,Fye as aw,Ooe as ax,ia as ay,Dl as az,rye as b,Xce as b$,zde as b0,Ks as b1,$0 as b2,Xs as b3,lye as b4,Gu as b5,f$ as b6,nL as b7,mse as b8,Ic as b9,sO as bA,Hce as bB,BS as bC,vl as bD,UA as bE,Qae as bF,$p as bG,St as bH,QM as bI,p3 as bJ,pi as bK,$ae as bL,jS as bM,RI as bN,yg as bO,MI as bP,xye as bQ,_te as bR,hue as bS,iue as bT,Wle as bU,rT as bV,zce as bW,mue as bX,vg as bY,Dd as bZ,w0 as b_,fye as ba,Fo as bb,o$ as bc,Sg as bd,Bde as be,jde as bf,fU as bg,nye as bh,q2 as bi,jq as bj,Qx as bk,cye as bl,Z1 as bm,Pi as bn,VU as bo,KU as bp,Ch as bq,vn as br,x$ as bs,Fc as bt,gue as bu,oO as bv,hy as bw,my as bx,k0 as by,cO as bz,eS as c,jme as c$,Epe as c0,xg as c1,T0 as c2,Gce as c3,eO as c4,Qle as c5,Kle as c6,lc as c7,gN as c8,Xle as c9,xV as cA,hP as cB,dye as cC,lH as cD,iv as cE,rK as cF,kZ as cG,Bc as cH,kc as cI,QK as cJ,$K as cK,Lo as cL,pK as cM,ja as cN,N_ as cO,OK as cP,DZ as cQ,ag as cR,_5 as cS,H0 as cT,mU as cU,aye as cV,Va as cW,Ume as cX,Ome as cY,qye as cZ,sye as c_,nT as ca,Yle as cb,ece as cc,Md as cd,Il as ce,cN as cf,aT as cg,rO as ch,B1 as ci,og as cj,K2 as ck,G2 as cl,lS as cm,lg as cn,Cd as co,Lw as cp,dV as cq,nS as cr,uye as cs,LL as ct,BL as cu,yP as cv,qq as cw,G0 as cx,jV as cy,EW as cz,Gre as d,iye as d0,fue as d1,fy as d2,oye as d3,qre as e,$re as f,kn as g,zr as h,Lr as i,d as j,yI as k,qe as l,ra as m,Oo as n,rs as o,$oe as p,Lh as q,_ as r,Hre as s,L7 as t,Pl as u,Rd as v,Nue as w,yO as x,yye as y,$ye as z};
