import{u as x,r,h,d as m,j as e}from"./index-DkkHh8Xr.js";function u(){const n=x(),[a,o]=r.useState(null),[i,s]=r.useState(null);r.useEffect(()=>{if(h())try{const t=m();t?o(t):s("Invalid share link")}catch(t){console.error("Failed to load shared chat:",t),s("Failed to load shared conversation")}else s("No share data found in URL")},[]);const l=()=>{n("/chat"+location.search)};if(i)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Unable to Load Conversation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:i}),e.jsx("button",{onClick:()=>n("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Go to Home"})]})});if(!a)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading shared conversation..."})});const d=a.messages.map(t=>({role:t.role,content:t.content,timestamp:t.timestamp}));return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"h-10 w-auto object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.metadata.title||"Shared Conversation"}),a.metadata.truncated&&e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:["Showing ",a.metadata.includedMessageCount," of ",a.metadata.originalMessageCount," messages"]})]})]}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Login"})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto pt-[73px] pb-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Viewing Shared Conversation"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"This is a preview of a shared conversation. To continue chatting or save this to your account, please login."})]})]})}),d.map((t,c)=>e.jsx("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] ${t.role==="user"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white"} rounded-lg shadow-sm p-4`,children:[e.jsx("div",{className:"text-xs font-medium mb-2 opacity-70",children:t.role==="user"?"User":"Assistant"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:t.content}),t.timestamp&&e.jsx("div",{className:"text-xs opacity-50 mt-2",children:new Date(t.timestamp).toLocaleString()})]})},c)),e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-6 text-center text-white mt-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Want to continue this conversation?"}),e.jsx("p",{className:"mb-4 opacity-90",children:"Login to continue chatting, save conversations, and access all features"})]})]})})]})}export{u as SharedChatViewer};
