const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/localEmbeddings-47-wZLX9.js","assets/index-DtnxAUWU.js","assets/index-DWgjf74T.css"])))=>i.map(i=>d[i]);
import{c as K,r as g,bg as Q,j as e,bh as _,bi as V,bj as Y,b3 as G,bk as W,bl as J,a as X,g as B,bm as Z,b1 as ee,aN as H,b5 as q,aE as $,bn as R,b4 as se,b6 as U,bo as te,bp as ae,bq as O}from"./index-DtnxAUWU.js";import{T as re}from"./tag-CLmgH5HA.js";import{X as le}from"./x-Dc7d7zkt.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ie=K("plus",ne);function de({initialProvider:s,onSave:b,onCancel:w}){const[r,k]=g.useState(s?.type||""),[t,C]=g.useState(s?.apiKey||""),[h,N]=g.useState(s?.apiEndpoint||""),[f,m]=g.useState(s?.modelName||""),[d,o]=g.useState(s?.rateLimitTPM?.toString()||""),[p,u]=g.useState({chat:s?.capabilities?.chat!==!1,image:s?.capabilities?.image!==!1,embedding:s?.capabilities?.embedding!==!1,voice:s?.capabilities?.voice!==!1,tts:s?.capabilities?.tts!==!1}),[L,A]=g.useState(s?.allowedModels?.join(", ")||""),[M,n]=g.useState(s?.maxImageQuality||"fast"),[j,T]=g.useState({});g.useEffect(()=>{r&&r!=="openai-compatible"?N(Q[r]):r==="openai-compatible"&&N(s?.apiEndpoint||"https://")},[r,s]);const i=c=>{if(c.preventDefault(),!r){T({type:"Please select a provider type"});return}const a={type:r,apiKey:t,apiEndpoint:h,capabilities:p};r==="openai-compatible"&&(a.modelName=f,d&&(a.rateLimitTPM=parseInt(d,10))),L.trim()?a.allowedModels=L.split(",").map(y=>y.trim()).filter(y=>y.length>0):a.allowedModels=null,p.image&&M&&(a.maxImageQuality=M);const l=V(a);if(!l.valid){T(l.errors);return}b(a)},v=["groq","openai","gemini","together","openai-compatible"];return e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Provider Type"}),e.jsxs("select",{value:r,onChange:c=>k(c.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select provider type..."}),v.map(c=>{const a=_[c];return e.jsxs("option",{value:c,children:[a.icon," ",a.name]},c)})]}),j.type&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.type})]}),r&&e.jsx("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-700",children:e.jsx("p",{className:"text-sm text-gray-400",children:_[r].description})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Endpoint"}),e.jsx("input",{type:"text",value:h,onChange:c=>N(c.target.value),disabled:r!=="openai-compatible",className:`w-full px-3 py-2 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${r!=="openai-compatible"?"bg-gray-900 cursor-not-allowed":"bg-gray-800"}`,placeholder:"https://",required:!0}),r!=="openai-compatible"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"â“˜ Auto-filled, not editable"}),r==="openai-compatible"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"âœï¸ EDITABLE - Enter custom endpoint"}),j.apiEndpoint&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.apiEndpoint})]}),r==="openai-compatible"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Model Name"}),e.jsx("input",{type:"text",value:f,onChange:c=>m(c.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"llama-3.1-70b-instruct",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"âœï¸ REQUIRED - Exact model name for API"}),j.modelName&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.modelName})]}),r==="openai-compatible"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Rate Limit (Tokens Per Minute)"}),e.jsx("input",{type:"number",value:d,onChange:c=>o(c.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave empty for no rate limiting",min:"0"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"â“˜ Optional - Leave empty to disable rate limiting"}),j.rateLimitTPM&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.rateLimitTPM})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Key"}),e.jsx("input",{type:"password",value:t,onChange:c=>C(c.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your API key",required:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"â“˜ Your API key for this provider"}),j.apiKey&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:j.apiKey})]}),e.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"Service Capabilities"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select which services this provider can be used for. By default, all are enabled."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.chat,onChange:c=>u({...p,chat:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"ðŸ’¬ Chat / Text Completion"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.image,onChange:c=>u({...p,image:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"ðŸŽ¨ Image Generation"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.embedding,onChange:c=>u({...p,embedding:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"ðŸ”— Embeddings"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.voice,onChange:c=>u({...p,voice:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"ðŸŽ¤ Voice / Transcription"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.tts,onChange:c=>u({...p,tts:c.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"ðŸ”Š Text-to-Speech"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"ï¿½ Model Access Restrictions"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Restrict which models can be used for ALL LLM operations (chat, image generation, etc.). Leave empty to allow all models."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Allowed Models (comma-separated)"}),e.jsx("input",{type:"text",value:L,onChange:c=>A(c.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Leave empty for all models, or: llama-3.1-8b-instant, gpt-4o-mini"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["â“˜ ",e.jsx("strong",{children:"Empty"})," = allow all models | ",e.jsx("strong",{children:"Non-empty"})," = exact model name must match"]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Examples: ",e.jsx("code",{className:"text-blue-400",children:"llama-3.1-8b-instant"}),", ",e.jsx("code",{className:"text-blue-400",children:"black-forest-labs/FLUX.1-schnell-Free"})]})]})]}),p.image&&e.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"ðŸŽ¨ Image Generation Quality Cap"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:'Limit maximum image quality to control costs. Works together with "Allowed Models" above.'}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Maximum Quality Tier"}),e.jsxs("select",{value:M,onChange:c=>n(c.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast (draft, <$0.001/image) - DEFAULT"}),e.jsx("option",{value:"standard",children:"Standard (normal, ~$0.002/image)"}),e.jsx("option",{value:"high",children:"High (detailed, ~$0.04/image)"}),e.jsx("option",{value:"ultra",children:"Ultra (photorealistic, ~$0.12/image)"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"â“˜ Prevents generating images above this quality tier"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s?"Update Provider":"Save Provider"})]})]})}function oe({onEditingChange:s}={}){const{providers:b,addProvider:w,updateProvider:r,deleteProvider:k}=Y(),{loadFromGoogleDrive:t,saveToGoogleDrive:C}=G(),[h,N]=g.useState(!1),[f,m]=g.useState(null);g.useEffect(()=>{s&&s(h||f!==null)},[h,f,s]);const[d,o]=g.useState(null),[p,u]=g.useState(null),[L,A]=g.useState(!1),M=()=>{N(!0),m(null),o(null),u(null)},n=l=>{m(l),N(!1),o(null),u(null)},j=l=>{window.confirm("Are you sure you want to delete this provider?")&&(k(l),u("Provider deleted successfully"),setTimeout(()=>u(null),3e3))},T=l=>{if(f){const y=r(f,l);y.success?(u("Provider updated successfully"),m(null),setTimeout(()=>u(null),3e3)):o(y.error||"Failed to update provider")}else{const y=w(l);y.success?(u("Provider added successfully"),N(!1),setTimeout(()=>u(null),3e3),window.dispatchEvent(new CustomEvent("provider-added"))):o(y.error||"Failed to add provider")}},i=()=>{N(!1),m(null),o(null)},v=async()=>{try{A(!0),o(null),await t(),u("Settings loaded successfully from Google Drive!"),setTimeout(()=>u(null),3e3)}catch(l){o(l.message||"Failed to load settings from Google Drive")}finally{A(!1)}},c=async()=>{try{A(!0),o(null),await C(),u("Settings saved successfully to Google Drive!"),setTimeout(()=>u(null),3e3)}catch(l){o(l.message||"Failed to save settings to Google Drive")}finally{A(!1)}},a=f?b.find(l=>l.id===f):void 0;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"â˜ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Cloud Sync for Provider Credentials"}),e.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:W()?e.jsx("span",{className:"block text-green-700 dark:text-green-400 font-medium",children:"âœ“ Cloud sync is active - changes are saved automatically"}):e.jsxs(e.Fragment,{children:["Connect to Google Drive in the ",e.jsx("strong",{children:"Cloud Sync"})," tab to enable automatic synchronization of your provider settings."]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,disabled:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsx(e.Fragment,{children:"ðŸ“¥ Load from Drive"})}),e.jsx("button",{onClick:c,disabled:L,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):e.jsx(e.Fragment,{children:"ðŸ’¾ Save to Drive"})})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Configured Providers"}),!h&&!f&&e.jsx("button",{onClick:M,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ Add Provider"})]}),p&&e.jsx("div",{className:"p-3 bg-green-700 border border-green-400 rounded-lg",children:e.jsxs("p",{className:"text-sm text-white font-bold",children:["âœ“ ",p]})}),d&&e.jsx("div",{className:"p-3 bg-red-900/30 border border-red-700 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-400",children:["âœ— ",d]})}),(h||f)&&e.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-md font-medium text-white mb-4",children:f?"Edit Provider":"Add Provider"}),e.jsx(de,{initialProvider:a,onSave:T,onCancel:i})]}),!h&&!f&&e.jsx(e.Fragment,{children:b.length===0?e.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700 text-center",children:[e.jsx("p",{className:"text-gray-400",children:"No providers configured yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Click "Add Provider" to configure your first LLM provider'})]}):e.jsx("div",{className:"space-y-3",children:b.map(l=>{const y=_[l.type]||{name:l.type||"Unknown Provider",icon:"â“"},E=l.type==="together",P=typeof l.enabled=="boolean"?l.enabled:!E;return e.jsxs("div",{className:`p-4 rounded-lg border transition-colors ${P?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-gray-900 border-gray-800 hover:border-gray-700 opacity-80 grayscale"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:y.icon}),e.jsx("span",{className:`font-medium ${P?"text-white":"text-gray-500"}`,children:y.name})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:()=>{r(l.id,{enabled:!P}),u(P?`${y.name} disabled`:`${y.name} enabled`),setTimeout(()=>u(null),2e3)},className:`px-3 py-1 rounded transition-colors text-sm font-bold ${P?"bg-green-600 hover:bg-green-700 text-white":"bg-red-700 hover:bg-red-800 text-red-100 border border-red-400"}`,title:P?"Click to disable":"Click to enable",children:P?"Enabled":"Disabled"}),e.jsx("button",{onClick:()=>n(l.id),className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-sm",title:"Edit provider",children:"Edit"}),e.jsx("button",{onClick:()=>j(l.id),className:"px-3 py-1 bg-red-700 text-white rounded hover:bg-red-600 transition-colors text-sm",title:"Delete provider",children:"Delete"})]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Endpoint:"}),e.jsx("span",{className:"text-gray-300 break-all",children:l.apiEndpoint})]}),l.modelName&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Model:"}),e.jsx("span",{className:"text-gray-300",children:l.modelName})]}),l.rateLimitTPM&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Rate Limit:"}),e.jsxs("span",{className:"text-gray-300",children:[l.rateLimitTPM.toLocaleString()," TPM"]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"API Key:"}),e.jsx("span",{className:"text-gray-300 font-mono",children:J(l.apiKey)})]})]})]},l.id)})})}),!h&&!f&&e.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"â„¹ï¸ How Provider Selection Works:"}),e.jsxs("ul",{className:"space-y-1 text-sm text-gray-400",children:[e.jsx("li",{children:"â€¢ Free tier providers (ðŸ†“) are used first"}),e.jsx("li",{children:"â€¢ Paid providers (ðŸ’°) are used when free tier rate limits are exceeded"}),e.jsx("li",{children:"â€¢ The backend automatically selects the best model for each request"}),e.jsx("li",{children:"â€¢ No need to configure rate limits or priorities - it's all automatic!"})]})]})]})}const ce=()=>{const{getToken:s}=X(),[b,w]=g.useState([]),[r,k]=g.useState(null),[t,C]=g.useState(!0),[h,N]=g.useState(null);if(g.useEffect(()=>{(async()=>{try{C(!0),N(null);const d=await s();if(!d){N("Authentication required"),C(!1);return}const o=await B(),p=await fetch(`${o}/billing`,{method:"GET",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},credentials:"include"});if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);const u=await p.json();u.providerCapabilities&&Array.isArray(u.providerCapabilities)?w(u.providerCapabilities):w([]),u.features&&k(u.features),C(!1)}catch(d){console.error("Failed to load server providers:",d),N(d.message||"Failed to load server providers"),C(!1)}})()},[s]),t)return e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"â³ Loading server providers..."})});if(h)return e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["âŒ ",h]})});if(b.length===0)return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"â„¹ï¸ No server-configured providers found"})});const f=b.reduce((m,d)=>{const o=m.find(p=>p.type===d.type);return o?(d.allowedModels&&d.allowedModels.length>0&&(o.allowedModels=o.allowedModels||[],d.allowedModels.forEach(p=>{o.allowedModels.includes(p)||o.allowedModels.push(p)})),d.rateLimitTPM&&(o.rateLimitTPM=Math.max(o.rateLimitTPM||0,d.rateLimitTPM)),d.priority&&(o.priority=Math.min(o.priority||100,d.priority)),d.maxQuality&&(o.maxQualityList=o.maxQualityList||[],o.maxQualityList.includes(d.maxQuality)||o.maxQualityList.push(d.maxQuality)),o.instanceCount=(o.instanceCount||1)+1):m.push({...d,instanceCount:1,maxQualityList:d.maxQuality?[d.maxQuality]:[]}),m},[]);return e.jsxs("div",{className:"space-y-4",children:[r&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"âœ¨ Available Features"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.chat?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.chat?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Chat & LLM"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.imageGeneration?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.imageGeneration?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Image Generation"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.imageEditing?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.imageEditing?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Image Editing"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.transcription?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.transcription?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Transcription"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.textToSpeech?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.textToSpeech?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Text-to-Speech"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.embeddings?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.embeddings?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Embeddings (RAG)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.webSearch?e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"âœ…"}):e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"âŒ"}),e.jsx("span",{className:r.webSearch?"text-blue-900 dark:text-blue-100":"text-gray-500 dark:text-gray-500",children:"Web Search"})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"p-4 border-b border-green-200 dark:border-green-800",children:[e.jsxs("h4",{className:"font-semibold text-green-900 dark:text-green-100 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ–¥ï¸"}),e.jsx("span",{children:"Server-Configured Providers"}),e.jsxs("span",{className:"text-xs font-normal text-green-700 dark:text-green-300",children:["(",f.length," type",f.length!==1?"s":"",", ",b.length," instance",b.length!==1?"s":"",")"]})]}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:"These providers are configured via environment variables on the server and are automatically available."})]}),e.jsx("div",{className:"divide-y divide-green-200 dark:divide-green-800",children:f.map(m=>{const d=[];return m.allowedModels&&m.allowedModels.length>0&&d.push(`models: ${m.allowedModels.join(", ")}`),m.maxQualityList&&m.maxQualityList.length>0&&d.push(`max quality: ${m.maxQualityList.join(" | ")}`),e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"text-sm text-green-900 dark:text-green-100",children:[e.jsx("span",{className:"font-medium",children:m.type}),d.length>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[" â€” ",d.join("; ")]})]})},m.id)})})]})]})},xe=()=>{const{state:s,setProvider:b,setVoice:w,setRate:r,setPitch:k,setVolume:t,setAutoSummarize:C,setElevenLabsApiKey:h,getAvailableProviders:N}=Z(),[f,m]=g.useState([]),[d,o]=g.useState(s.voices),[p,u]=g.useState(!1);g.useEffect(()=>{const n=N();m(n)},[N]),g.useEffect(()=>{o(s.voices)},[s.voices]);const L=async n=>{u(!0);try{await b(n)}catch(j){console.error("Failed to change provider:",j)}finally{u(!1)}},A=n=>({chatterbox:"Chatterbox TTS (Local GPU)",speaches:"Speaches TTS (Local)",llm:"LLM Provider (Auto)","openai-tts":"OpenAI TTS","groq-tts":"Groq TTS","gemini-tts":"Gemini TTS","together-tts":"Together AI TTS",elevenlabs:s.elevenlabsApiKey?"ElevenLabs (Specialized TTS)":"ElevenLabs (Needs API Key)",browser:"Browser (Web Speech API)",speakjs:"speak.js (Offline)"})[n],M=n=>({chatterbox:"High-quality neural TTS with GPU acceleration (requires Docker container on localhost:8000)",speaches:"Local TTS server (configure in LLM providers)",llm:"Automatically selects best available LLM provider (fallback option)","openai-tts":"OpenAI's text-to-speech model (high quality, fast)","groq-tts":"Groq's PlayAI TTS model (fast inference)","gemini-tts":"Google Gemini text-to-speech (natural voices)","together-tts":"Together AI text-to-speech model",elevenlabs:s.elevenlabsApiKey?"Ultra-realistic AI voices":"Ultra-realistic AI voices (configure API key below)",browser:"Uses your browser's built-in voices",speakjs:"Offline synthesis, basic quality"})[n];return e.jsx("div",{className:"space-y-6",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card bg-white dark:bg-gray-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Auto-Summarize Long Content"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use LLM to generate concise, speakable summaries for long responses"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.autoSummarize,onChange:n=>C(n.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),e.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice Provider"}),e.jsx("div",{className:"space-y-3",children:f.map(n=>e.jsxs("label",{className:`flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 ${s.currentProvider===n?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:[e.jsx("input",{type:"radio",name:"tts-provider",value:n,checked:s.currentProvider===n,onChange:()=>L(n),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-2",children:[A(n),n==="elevenlabs"&&!s.elevenlabsApiKey&&e.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 px-2 py-1 rounded-full",children:"Configure"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:M(n)})]})]},n))})]}),e.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice"}),p?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading voices..."})]}):d.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No voices available for this provider"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:d.map(n=>e.jsxs("button",{onClick:()=>w(n.id),className:`p-3 text-left border rounded-lg transition-colors ${s.currentVoice===n.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:n.name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.language," â€¢ ",n.gender||"neutral"]})]},n.id))})]}),e.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Playback Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Speed: ",s.rate.toFixed(1),"x"]}),e.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:s.rate,onChange:n=>r(parseFloat(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"0.5x Slower"}),e.jsx("span",{children:"1.0x Normal"}),e.jsx("span",{children:"2.0x Faster"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pitch: ",s.pitch.toFixed(1)]}),e.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:s.pitch,onChange:n=>k(parseFloat(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"0.5 Lower"}),e.jsx("span",{children:"1.0 Normal"}),e.jsx("span",{children:"2.0 Higher"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Volume: ",Math.round(s.volume*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:s.volume,onChange:n=>t(parseFloat(n.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:"0% Silent"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"100% Max"})]})]})]}),e.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ElevenLabs Authentication"}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Specialized TTS Service"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"ElevenLabs provides TTS-only services and requires separate authentication from your LLM providers."})]})]})}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key:"}),e.jsx("input",{type:"password",placeholder:"Enter ElevenLabs API key",value:s.elevenlabsApiKey,onChange:n=>h(n.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Get your API key from ",e.jsx("a",{href:"https://elevenlabs.io/speech-synthesis",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ElevenLabs Dashboard"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â€¢ Free tier: 10,000 characters/month"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â€¢ Starter: $1/month for 30,000 characters"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"â€¢ Creator: $22/month for 100,000 characters"})]})]}),["llm","openai-tts","groq-tts","gemini-tts","together-tts"].includes(s.currentProvider)&&e.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:s.currentProvider==="llm"?"LLM Provider TTS":`${A(s.currentProvider)}`}),s.currentProvider==="together-tts"&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"TTS Not Available"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Together AI does not provide a Text-to-Speech API. Please select a different TTS provider like OpenAI TTS, Groq TTS, or Gemini TTS."})]})]})}),s.currentProvider!=="together-tts"&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Using Existing Configuration"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:s.currentProvider==="llm"?"TTS will use your currently configured LLM provider and API key. No additional authentication required.":`TTS will use your ${A(s.currentProvider)} configuration and API key. No additional authentication required.`})]})]})})]})]})})},I={enabled:!1,autoEmbed:!0,embeddingModel:"text-embedding-3-small",embeddingProvider:"openai",chunkSize:1e3,chunkOverlap:200,topK:5,similarityThreshold:.3},F=[{id:"Xenova/all-MiniLM-L6-v2",name:"MiniLM-L6 (Recommended)",dimensions:384,size:"23 MB",speed:"Fast",description:"Balanced quality and speed, best for general use"},{id:"Xenova/paraphrase-MiniLM-L3-v2",name:"MiniLM-L3 (Fastest)",dimensions:384,size:"17 MB",speed:"Very Fast",description:"Fastest option, slightly lower quality"},{id:"Xenova/bge-small-en-v1.5",name:"BGE-Small (Highest Quality)",dimensions:384,size:"33 MB",speed:"Slower",description:"Best quality for English text, slower generation"}],ge=()=>{const{showSuccess:s,showError:b,showPersistentToast:w,removeToast:r,updateToast:k}=ee(),{settings:t,setSettings:C}=G(),[h,N]=g.useState(I),[f,m]=g.useState([]),[d,o]=g.useState(!0),[p,u]=g.useState(null);g.useEffect(()=>{M(),A()},[]);const L=()=>t.embeddingSource==="local"?!0:t.embeddingModel?f.some(i=>i.id===t.embeddingModel):f.length>0,A=async()=>{try{const i=await B(),v=localStorage.getItem("google_token"),c=t.providers?.filter(l=>l.enabled!==!1).map(l=>({type:l.type,allowedModels:l.allowedModels}))||[],a=await fetch(`${i}/billing`,{method:"POST",headers:{"Content-Type":"application/json",...v?{Authorization:`Bearer ${v}`}:{}},body:JSON.stringify({providers:c})});if(a.ok){const l=await a.json();l.availableEmbeddings&&Array.isArray(l.availableEmbeddings)&&(m(l.availableEmbeddings),console.log("ðŸ“Š Fetched available embeddings:",l.availableEmbeddings.length,"from",c.length,"providers"))}else console.warn("Failed to fetch available embeddings from billing endpoint")}catch(i){console.error("Error fetching available embeddings:",i)}finally{o(!1)}},M=async()=>{try{const i=localStorage.getItem("rag_config");if(i){const v=JSON.parse(i);N({...I,...v})}else N(I)}catch(i){console.error("Failed to load RAG config:",i),N(I)}},n=async i=>{try{localStorage.setItem("rag_config",JSON.stringify(i)),window.dispatchEvent(new Event("rag_config_updated")),console.log("âœ… RAG settings auto-saved")}catch(v){console.error("Failed to auto-save RAG config:",v)}},j=(i,v)=>{const c={...h,[i]:v};N(c),n(c)},T=async i=>{let v=null;try{u({loading:!0,progress:0,model:i});const c=i.split("/")[1];v=w(`ðŸ”„ Loading model ${c}... 0%`,"info");const{getLocalEmbeddingService:a}=await H(async()=>{const{getLocalEmbeddingService:y}=await import("./localEmbeddings-47-wZLX9.js");return{getLocalEmbeddingService:y}},__vite__mapDeps([0,1,2]));await a().loadModel(i,y=>{const E=Math.round(y.progress*100);u({loading:!0,progress:E,model:i}),v&&k(v,`ðŸ”„ Loading model ${c}... ${E}%`)}),v&&r(v),s(`âœ… Model ${c} loaded successfully! Ready to use.`),u(null)}catch(c){console.error("Failed to preload local model:",c),v&&r(v),b(`âŒ Failed to load model: ${c instanceof Error?c.message:"Unknown error"}`),u(null)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"ðŸ§  RAG (Retrieval-Augmented Generation)"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable semantic search over your saved snippets using embeddings. Enhances LLM responses with relevant context from your content."})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enable RAG System"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically search your snippets when asking questions"})]}),e.jsx("input",{type:"checkbox",checked:h.enabled,onChange:i=>j("enabled",i.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})}),h.enabled&&!d&&!L()&&e.jsx("div",{className:"card p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-red-900 dark:text-red-200 mb-2",children:"RAG System Disabled: Embedding Model Not Available"}),e.jsxs("div",{className:"text-sm text-red-800 dark:text-red-300 space-y-2",children:[e.jsxs("p",{children:['Your selected embedding model "',t.embeddingModel||"none",'" is not available from your configured providers.']}),e.jsx("p",{className:"font-medium",children:"To fix this:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Select a new embedding model from the available options below"}),e.jsx("li",{children:"Save your settings"}),e.jsx("li",{children:"Go to SWAG page and regenerate embeddings for all your snippets"}),e.jsx("li",{children:"Or configure a provider that supports your selected model in the Providers tab"})]})]})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Auto-Embed New Snippets"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically generate embeddings when saving snippets"})]}),e.jsx("input",{type:"checkbox",checked:h.autoEmbed,onChange:i=>j("autoEmbed",i.target.checked),disabled:!h.enabled,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]})}),e.jsxs("div",{className:"card p-4",children:[e.jsxs("label",{className:"block mb-3",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Embedding Model"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Choose from API-based (server) or local (browser) embedding models"})]}),d?e.jsx("div",{className:"text-sm text-gray-500",children:"Loading available models..."}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:t.embeddingModel||"text-embedding-3-small",onChange:async i=>{const v=i.target.value,c=F.some(l=>l.id===v);C({...t,embeddingModel:v,embeddingSource:c?"local":"api"}),c&&await T(v)},disabled:!h.enabled||p?.loading,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:[e.jsx("optgroup",{label:"ðŸ  Local (Browser) - Free, Offline",children:F.map(i=>e.jsxs("option",{value:i.id,children:[i.name," - ",i.size,", ",i.speed,", ",i.dimensions,"d"]},i.id))}),f.length>0&&e.jsx("optgroup",{label:"â˜ï¸ API (Server) - High Quality, Fast",children:f.map(i=>e.jsxs("option",{value:i.id,children:[i.name," (",i.provider,") - $",i.pricing?.perMillionTokens||0,"/M tokens, ",i.dimensions,"d",i.recommended?" â­":"",i.deprecated?" (Legacy)":""]},i.id))})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:(()=>{const i=F.find(c=>c.id===t.embeddingModel);if(i)return`ðŸ  Local: ${i.description}. Model downloads on first use (~${i.size}).`;const v=f.find(c=>c.id===t.embeddingModel);return v?`â˜ï¸ API: ${v.description}`:"Select an embedding model to see details"})()})]}),f.length===0&&!d&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-2",children:"âš ï¸ No API embedding models available. Configure a provider (OpenAI, Gemini, Together AI, etc.) to use API-based embeddings."}),e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-2",children:"âš ï¸ Changing models requires re-embedding all content"})]}),e.jsxs("div",{className:"card p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Chunking Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Size: ",h.chunkSize||1e3," characters (â‰ˆ",Math.round((h.chunkSize||1e3)/4)," tokens)"]})}),e.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:h.chunkSize||1e3,onChange:i=>j("chunkSize",parseInt(i.target.value)),disabled:!h.enabled,className:"w-full disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Overlap: ",h.chunkOverlap||200," characters (",Math.round((h.chunkOverlap||200)/(h.chunkSize||1e3)*100),"%)"]})}),e.jsx("input",{type:"range",min:"0",max:"500",step:"50",value:h.chunkOverlap||200,onChange:i=>j("chunkOverlap",parseInt(i.target.value)),disabled:!h.enabled,className:"w-full disabled:opacity-50"})]})]}),e.jsxs("div",{className:"card p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Search Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Top-K Results: ",h.topK||5]})}),e.jsx("input",{type:"range",min:"1",max:"20",step:"1",value:h.topK||5,onChange:i=>j("topK",parseInt(i.target.value)),disabled:!h.enabled,className:"w-full disabled:opacity-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Similarity Threshold: ",(h.similarityThreshold||.3).toFixed(2)]})}),e.jsx("input",{type:"range",min:"0.1",max:"0.95",step:"0.05",value:h.similarityThreshold||.3,onChange:i=>j("similarityThreshold",parseFloat(i.target.value)),disabled:!h.enabled,className:"w-full disabled:opacity-50"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," All settings auto-save. Start with text-embedding-3-small (or local MiniLM-L6 for free), 1000 char chunks, 200 overlap"]}),e.jsxs("p",{children:["ðŸ“– ",e.jsx("strong",{children:"Learn more:"})," Check src/rag/README.md for detailed documentation"]})]})]})},me=()=>{const[s,b]=g.useState(!1),[w,r]=g.useState(!1),[k,t]=g.useState(null),[C,h]=g.useState(null),[N,f]=g.useState(!1),[m,d]=g.useState(null),[o,p]=g.useState(0),[u,L]=g.useState({plansCount:0,playlistsCount:0,snippetsCount:0,embeddingsCount:0,chatHistoryCount:0,quizProgressCount:0,feedItemsCount:0}),[A,M]=g.useState(localStorage.getItem("auto_sync_enabled")==="true"),n=async()=>{try{const a=await q.getSyncMetadata();p(a.lastSyncTime),L({plansCount:a.plansCount,playlistsCount:a.playlistsCount,snippetsCount:a.snippetsCount||0,embeddingsCount:a.embeddingsCount||0,chatHistoryCount:a.chatHistoryCount||0,quizProgressCount:a.quizProgressCount||0,feedItemsCount:a.feedItemsCount||0})}catch(a){console.error("Failed to load sync metadata:",a)}},j=async()=>{f(!0),d(null),t(null);try{const a=await q.syncAll(),l=[];a.plans.action==="uploaded"?l.push(`Uploaded ${a.plans.itemCount} plan(s)`):a.plans.action==="downloaded"&&l.push(`Downloaded ${a.plans.itemCount} plan(s)`),a.playlists.action==="uploaded"?l.push(`Uploaded ${a.playlists.itemCount} playlist(s)`):a.playlists.action==="downloaded"&&l.push(`Downloaded ${a.playlists.itemCount} playlist(s)`),a.snippets.action==="uploaded"?l.push(`Uploaded ${a.snippets.itemCount} snippet(s)`):a.snippets.action==="downloaded"&&l.push(`Downloaded ${a.snippets.itemCount} snippet(s)`),a.embeddings.action==="uploaded"?l.push(`Uploaded ${a.embeddings.itemCount} embedding(s)`):a.embeddings.action==="downloaded"&&l.push(`Downloaded ${a.embeddings.itemCount} embedding(s)`),a.chatHistory.action==="uploaded"?l.push(`Uploaded ${a.chatHistory.itemCount} chat(s)`):a.chatHistory.action==="downloaded"&&l.push(`Downloaded ${a.chatHistory.itemCount} chat(s)`),a.quizProgress.action==="uploaded"?l.push(`Uploaded ${a.quizProgress.itemCount} quiz stat(s)`):a.quizProgress.action==="downloaded"&&l.push(`Downloaded ${a.quizProgress.itemCount} quiz stat(s)`),a.feedItems.action==="uploaded"?l.push(`Uploaded ${a.feedItems.itemCount} feed item(s)`):a.feedItems.action==="downloaded"&&l.push(`Downloaded ${a.feedItems.itemCount} feed item(s)`),l.length===0?d("Everything is up to date"):d(l.join(", ")),await n(),console.log("âœ… Sync completed:",a)}catch(a){t(a.message||"Sync failed"),console.error("Sync error:",a)}finally{f(!1)}},T=()=>{const a=!A;M(a),localStorage.setItem("auto_sync_enabled",String(a))},i=a=>{if(a===0)return"Never";const y=Date.now()-a;return y<6e4?"Just now":y<36e5?`${Math.floor(y/6e4)} minutes ago`:y<864e5?`${Math.floor(y/36e5)} hours ago`:`${Math.floor(y/864e5)} days ago`};g.useEffect(()=>{const a=localStorage.getItem("google_drive_access_token"),l=localStorage.getItem("user_email");a&&a.length>0&&(b(!0),h(l),n())},[]);const v=async()=>{r(!0),t(null);try{if(!window.google?.accounts?.oauth2)throw new Error("Google Identity Services not loaded. Please refresh the page.");const a="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";window.google.accounts.oauth2.initTokenClient({client_id:a,scope:"https://www.googleapis.com/auth/drive.file",callback:y=>{if(y.error){t(`Authentication failed: ${y.error}`),r(!1);return}if(y.access_token){const E=y.access_token.trim().replace(/[\r\n]/g,"");if(localStorage.setItem("google_drive_access_token",E),y.id_token)try{const z=y.id_token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),x=decodeURIComponent(atob(z).split("").map(D=>"%"+("00"+D.charCodeAt(0).toString(16)).slice(-2)).join("")),S=JSON.parse(x);S.email&&(localStorage.setItem("user_email",S.email),h(S.email))}catch(P){console.error("Failed to decode ID token:",P)}b(!0),r(!1),console.log("âœ… Successfully authenticated with Google Drive"),window.dispatchEvent(new CustomEvent("billing-settings-changed"))}},error_callback:y=>{t(`Authentication error: ${y.message||"Unknown error"}`),r(!1)}}).requestAccessToken({prompt:"consent"})}catch(a){t(a.message||"Failed to authenticate with Google"),r(!1)}},c=()=>{localStorage.removeItem("google_drive_access_token"),localStorage.removeItem("user_email"),b(!1),h(null),t(null)};return e.jsxs("div",{className:"cloud-sync-settings",children:[e.jsx("h2",{children:"Cloud Sync Settings"}),e.jsxs("div",{className:"auth-section",children:[e.jsx("h3",{children:"Google Drive Authentication"}),s?e.jsxs("div",{className:"auth-status",children:[e.jsxs("div",{className:"connected-info",children:[e.jsx("span",{className:"status-indicator",children:"âœ“"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Connected"}),C&&e.jsx("div",{className:"user-email",children:C})]})]}),e.jsx("button",{onClick:c,className:"disconnect-button",children:"Disconnect"})]}):e.jsxs("div",{className:"auth-prompt",children:[e.jsx("p",{children:"Connect your Google account to enable automatic cloud synchronization of your settings, API keys, SWAG content, and usage logs."}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("strong",{children:"Note:"})," All sync features are automatically enabled when you connect your Google account. No additional configuration needed!"]}),e.jsx("button",{onClick:v,disabled:w,className:"google-auth-button",children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),e.jsx("path",{fill:"#34A853",d:"M9.003 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9.003 18z"}),e.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"}),e.jsx("path",{fill:"#EA4335",d:"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.428 0 9.003 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z"})]}),"Connect to Google Drive"]})}),k&&e.jsxs("div",{className:"error-message",children:[e.jsx("strong",{children:"Error:"})," ",k]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"â˜ï¸"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Data Sync Status"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Last synced:"}),e.jsx("strong",{children:i(o)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Saved plans:"}),e.jsxs("strong",{children:[u.plansCount," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Saved playlists:"}),e.jsxs("strong",{children:[u.playlistsCount," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Saved snippets:"}),e.jsxs("strong",{children:[u.snippetsCount," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Saved embeddings:"}),e.jsxs("strong",{children:[u.embeddingsCount," chunks"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Chat history:"}),e.jsxs("strong",{children:[u.chatHistoryCount," chats"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Quiz progress:"}),e.jsxs("strong",{children:[u.quizProgressCount," quizzes"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Feed items:"}),e.jsxs("strong",{children:[u.feedItemsCount," items"]})]}),m&&e.jsxs("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded text-green-800 dark:text-green-100",children:["âœ“ ",m]}),e.jsx("div",{className:"flex gap-2 mt-3",children:e.jsx("button",{onClick:j,disabled:N,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin mr-2",children:"ðŸ”„"}),"Syncing..."]}):e.jsx(e.Fragment,{children:"ðŸ”„ Sync Now"})})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-blue-100 dark:bg-blue-800 rounded",children:[e.jsx("input",{type:"checkbox",id:"auto-sync",checked:A,onChange:T,className:"w-4 h-4"}),e.jsx("label",{htmlFor:"auto-sync",className:"cursor-pointer",children:"Auto-sync every 5 minutes"})]})]})]})]})}),e.jsx("div",{className:"card p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 mt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"Cloud Sync Enabled"}),e.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[e.jsx("p",{children:"All sync features are now active:"}),e.jsxs("ul",{className:"list-disc ml-5 mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Settings & Preferences:"})," Automatically synced across devices"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"API Keys (SWAG):"})," Securely backed up to your Google Drive"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"RAG Content:"})," Snippets and embeddings synced to Google Drive"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Chat History:"})," All conversations backed up with metadata"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Quiz Progress:"})," Quiz statistics and scores synced"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Feed Items:"})," Generated content and recommendations backed up"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Usage Logs:"})," Billing and transaction history backed up"]})]})]})]})]})})]})]})},he=()=>{const{t:s}=$(),[b,w]=R("image_quality","standard"),[r,k]=R("image_size","1024x1024");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:s("settings.images.title")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("settings.images.description")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image-quality",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("settings.images.quality.label")}),e.jsxs("select",{id:"image-quality",value:b,onChange:t=>w(t.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"fast",children:s("settings.images.quality.fast")}),e.jsx("option",{value:"standard",children:s("settings.images.quality.standard")}),e.jsx("option",{value:"high",children:s("settings.images.quality.high")}),e.jsx("option",{value:"ultra",children:s("settings.images.quality.ultra")})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s("settings.images.quality.description")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image-size",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("settings.images.size.label")}),e.jsxs("select",{id:"image-size",value:r,onChange:t=>k(t.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"256x256",children:"256x256 (small, draft)"}),e.jsx("option",{value:"512x512",children:"512x512 (medium, preview)"}),e.jsx("option",{value:"1024x1024",children:"1024x1024 (square, standard)"}),e.jsx("option",{value:"1792x1024",children:"1792x1024 (landscape, widescreen)"}),e.jsx("option",{value:"1024x1792",children:"1024x1792 (portrait, tall)"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s("settings.images.size.description")})]})]})};function ue(){const{t:s}=$(),{preferences:b,updateSearchTerms:w}=se(),[r,k]=g.useState([]),[t,C]=g.useState("");g.useEffect(()=>{k(b.searchTerms)},[b.searchTerms]);const h=()=>{const m=t.trim();if(!m)return;if(r.includes(m)){alert(s("feed.searchTermExists"));return}if(r.length>=5){alert(s("feed.maxSearchTerms"));return}const d=[...r,m];k(d),C(""),w(d)},N=m=>{const d=r.filter(o=>o!==m);k(d),w(d)},f=m=>{m.key==="Enter"&&h()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Content Maturity"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adjust content complexity and topics to match your target audience"}),e.jsxs("select",{value:b.maturityLevel,onChange:m=>{const d={...b,maturityLevel:m.target.value};w(d.searchTerms),H(async()=>{const{feedDB:o}=await import("./index-DtnxAUWU.js").then(p=>p.d3);return{feedDB:o}},__vite__mapDeps([1,2])).then(({feedDB:o})=>{o.updatePreferences({maturityLevel:m.target.value})})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"child",children:"ðŸ§’ Child (Ages 6-12) - Simple, fun, educational"}),e.jsx("option",{value:"youth",children:"ðŸŽ“ Youth (Ages 13-17) - Engaging, relatable content"}),e.jsx("option",{value:"adult",children:"ðŸ‘¤ Adult (Ages 18+) - Sophisticated topics"}),e.jsx("option",{value:"academic",children:"ðŸ“š Academic - Research-focused, technical"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(re,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("feed.searchTerms")})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s("feed.searchTermsDescription")}),e.jsxs("div",{className:"space-y-2 mb-4",children:[r.map((m,d)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:m}),e.jsx("button",{onClick:()=>N(m),className:"p-1 rounded hover:bg-gray-200 transition-colors",title:s("feed.removeSearchTerm"),children:e.jsx(le,{className:"h-4 w-4 text-gray-600"})})]},d)),r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:s("feed.noSearchTerms")})]}),r.length<5&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:m=>C(m.target.value),onKeyPress:f,placeholder:s("feed.searchTermPlaceholder"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:100}),e.jsxs("button",{onClick:h,disabled:!t.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2 font-medium",children:[e.jsx(ie,{className:"h-4 w-4"}),s("feed.add")]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:s("feed.searchTermCount",{count:r.length})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(U,{className:"h-5 w-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("feed.learnedPreferences")})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s("feed.learnedPreferencesDescription")}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:s("feed.likedTopics",{count:b.likedTopics.length})}),b.likedTopics.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:b.likedTopics.map((m,d)=>e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:m},d))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:s("feed.stashToLearn")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:s("feed.dislikedTopics",{count:b.dislikedTopics.length})}),b.dislikedTopics.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:b.dislikedTopics.map((m,d)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:m},d))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:s("feed.trashToLearn")})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:s("feed.tipsTitle")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",s("feed.tip1")]}),e.jsxs("li",{children:["â€¢ ",s("feed.tip2")]}),e.jsxs("li",{children:["â€¢ ",s("feed.tip3")]}),e.jsxs("li",{children:["â€¢ ",s("feed.tip4")]})]})]})]})}const je=({enabledTools:s,setEnabledTools:b,onOpenMCPDialog:w})=>{const{settings:r,setSettings:k}=G(),{t,i18n:C}=$(),{isConnected:h,isLoading:N,error:f,initiateOAuthFlow:m,disconnect:d}=te(),{location:o,isLoading:p,error:u,permissionState:L,requestLocation:A,clearLocation:M}=ae(),[n,j]=g.useState("general"),[T,i]=g.useState(!1),[v,c]=g.useState(""),[a,l]=g.useState(""),[y,E]=g.useState(!1);g.useEffect(()=>{const x=O.getItem("proxy_settings");if(x)try{const S=JSON.parse(x);c(S.username||""),l(S.password||""),E(S.enabled!==!1)}catch(S){console.error("Failed to parse proxy settings:",S)}},[]);const P=(x,S,D)=>{O.setItem("proxy_settings",JSON.stringify({username:x,password:S,enabled:D}))},z=x=>{C.changeLanguage(x),k({...r,language:x})};return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"card p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:t("settings.title")}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>j("general"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${n==="general"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["âš™ï¸ ",t("settings.tabs.general")]}),e.jsxs("button",{onClick:()=>j("provider"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${n==="provider"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ”Œ ",t("settings.tabs.provider")]}),e.jsxs("button",{onClick:()=>j("cloud"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="cloud"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["â˜ï¸ ",t("settings.tabs.cloud")]}),e.jsxs("button",{onClick:()=>j("tools"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ› ï¸ ",t("settings.tabs.tools")]}),e.jsxs("button",{onClick:()=>j("proxy"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="proxy"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸŒ ",t("settings.tabs.proxy")]}),e.jsxs("button",{onClick:()=>j("location"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="location"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ“ ",t("settings.tabs.location")]}),e.jsxs("button",{onClick:()=>j("tts"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="tts"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ”Š ",t("settings.tabs.tts")]}),e.jsxs("button",{onClick:()=>j("rag"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="rag"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ§  ",t("settings.tabs.rag")]}),e.jsxs("button",{onClick:()=>j("images"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${n==="images"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["ðŸ–¼ï¸ ",t("settings.tabs.images")]}),e.jsx("button",{onClick:()=>j("feed"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${n==="feed"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"ðŸ“° Feed"})]}),n==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:t("settings.general")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.generalDescription")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["ðŸŒ ",t("settings.language")]}),e.jsxs("select",{value:r.language||"en",onChange:x=>z(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsxs("option",{value:"en",children:["ðŸ‡¬ðŸ‡§ ",t("languages.en")," - English"]}),e.jsxs("option",{value:"es",children:["ðŸ‡ªðŸ‡¸ ",t("languages.es")," - Spanish"]}),e.jsxs("option",{value:"fr",children:["ðŸ‡«ðŸ‡· ",t("languages.fr")," - French"]}),e.jsxs("option",{value:"de",children:["ðŸ‡©ðŸ‡ª ",t("languages.de")," - German"]}),e.jsxs("option",{value:"nl",children:["ðŸ‡³ðŸ‡± ",t("languages.nl")," - Dutch"]}),e.jsxs("option",{value:"pt",children:["ðŸ‡µðŸ‡¹ ",t("languages.pt")," - Portuguese"]}),e.jsxs("option",{value:"ru",children:["ðŸ‡·ðŸ‡º ",t("languages.ru")," - Russian"]}),e.jsxs("option",{value:"zh",children:["ðŸ‡¨ðŸ‡³ ",t("languages.zh")," - Chinese"]}),e.jsxs("option",{value:"ja",children:["ðŸ‡¯ðŸ‡µ ",t("languages.ja")," - Japanese"]}),e.jsxs("option",{value:"ar",children:["ðŸ‡¸ðŸ‡¦ ",t("languages.ar")," - Arabic"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t("settings.languageHelp")})]})]}),n==="provider"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["âš¡ ",t("settings.providerCredentials")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.providerDescription")})]}),e.jsx(oe,{onEditingChange:i}),!T&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["ðŸŒ ",t("settings.serverProviders")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:t("settings.serverProvidersDescription")}),e.jsx(ce,{})]}),!T&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["ðŸŽ¯ ",t("settings.modelSelectionStrategy")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:t("settings.modelStrategyDescription")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[e.jsx("input",{type:"radio",name:"optimization",value:"cheap",checked:(r.optimization||"cheap")==="cheap",onChange:x=>k({...r,optimization:x.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:["ðŸ’° ",t("settings.cheap")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t("settings.cheapDescription")})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[e.jsx("input",{type:"radio",name:"optimization",value:"balanced",checked:r.optimization==="balanced",onChange:x=>k({...r,optimization:x.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:["âš–ï¸ ",t("settings.balanced")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t("settings.balancedDescription")})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[e.jsx("input",{type:"radio",name:"optimization",value:"powerful",checked:r.optimization==="powerful",onChange:x=>k({...r,optimization:x.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:["ðŸ’ª ",t("settings.powerful")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t("settings.powerfulDescription")})]})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[e.jsx("input",{type:"radio",name:"optimization",value:"fastest",checked:r.optimization==="fastest",onChange:x=>k({...r,optimization:x.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:["âš¡ ",t("settings.fastest")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t("settings.fastestDescription")})]})]})]})]})]}),n==="tools"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("settings.tavilyApiKey")}),e.jsx("input",{type:"password",value:r.tavilyApiKey,onChange:x=>k({...r,tavilyApiKey:x.target.value}),className:"input-field",placeholder:t("settings.tavilyPlaceholder")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t("settings.tavilyHelp")})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:t("settings.enabledTools")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.web_search,onChange:x=>b({...s,web_search:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸ” ",t("settings.webSearch")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.webSearchDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.execute_js,onChange:x=>b({...s,execute_js:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["âš¡ ",t("settings.executeJs")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.executeJsDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.scrape_url,onChange:x=>b({...s,scrape_url:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸŒ ",t("settings.scrapeUrl")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.scrapeUrlDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.youtube,onChange:x=>b({...s,youtube:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸŽ¬ ",t("settings.youtubeSearch")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.youtubeDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.transcribe,onChange:x=>b({...s,transcribe:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸŽ™ï¸ ",t("settings.transcribe")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.transcribeDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.generate_chart,onChange:x=>b({...s,generate_chart:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸ“Š ",t("settings.generateChart")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.chartDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.generate_image,onChange:x=>b({...s,generate_image:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸŽ¨ ",t("settings.generateImage")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.imageDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.search_knowledge_base,onChange:x=>b({...s,search_knowledge_base:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸ“š ",t("settings.searchKnowledgeBase")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.ragDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.manage_todos,onChange:x=>b({...s,manage_todos:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["âœ… ",t("settings.manageTodos")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.todosDescription")})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.manage_snippets,onChange:x=>b({...s,manage_snippets:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["ðŸ“ ",t("settings.manageSnippets")]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("settings.snippetsDescription")})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:x=>{x.preventDefault()},className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"ðŸ“º Use YouTube Captions API"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Direct access to YouTube transcripts (faster than Whisper transcription)"})]}),h&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connected"]})]})}),!h&&e.jsxs("div",{className:"ml-11 mb-4",children:[e.jsx("button",{onClick:m,disabled:N,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:N?"Connecting...":"Connect YouTube Account"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Requires Google account authorization (read-only access)"})]}),h&&e.jsx("div",{className:"ml-11 mb-4",children:e.jsx("button",{onClick:()=>{confirm("Are you sure you want to disconnect YouTube access?")&&d()},className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg transition-colors",children:"Disconnect YouTube Access"})}),f&&e.jsxs("div",{className:"ml-11 mb-4 text-sm text-red-600 dark:text-red-400 flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:f})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors border-2 border-amber-200 dark:border-amber-900/50 bg-amber-50 dark:bg-amber-900/10",children:[e.jsx("input",{type:"checkbox",checked:s.ask_llm,onChange:x=>b({...s,ask_llm:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:["ðŸ¤– ",t("settings.askLlm"),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium text-amber-700 bg-amber-200 dark:bg-amber-900/50 dark:text-amber-400 rounded-full",children:"âš ï¸ HIGH TOKEN USAGE"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium mb-1",children:t("settings.askLlmDescription")}),e.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/30 p-2 rounded border border-amber-300 dark:border-amber-800",children:[e.jsx("strong",{children:"WARNING:"})," This tool creates complete recursive conversations with all available tools and multiple iterations. Can consume ",e.jsx("strong",{children:"5-10x more tokens"})," than direct responses. Use ONLY for complex queries requiring multiple steps with different tools. Limited to 5 iterations with token budget safeguards."]})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-4 rounded-lg hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors border-3 border-red-400 dark:border-red-900 bg-red-50 dark:bg-red-950/20 shadow-md",children:[e.jsx("input",{type:"checkbox",checked:s.generate_reasoning_chain,onChange:x=>b({...s,generate_reasoning_chain:x.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:["ðŸ§  ",t("settings.generateReasoning"),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-bold text-red-800 bg-red-300 dark:bg-red-900/70 dark:text-red-300 rounded-full animate-pulse",children:"âš ï¸âš ï¸ EXTREME TOKEN USAGE"})]}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200 font-semibold mb-1",children:t("settings.reasoningDescription")}),e.jsxs("div",{className:"text-xs text-red-800 dark:text-red-300 bg-red-100 dark:bg-red-950/50 p-3 rounded border-2 border-red-400 dark:border-red-800 space-y-1",children:[e.jsx("div",{className:"font-bold text-sm mb-2",children:"ðŸš¨ CRITICAL WARNINGS:"}),e.jsxs("div",{children:["â€¢ Can consume ",e.jsx("strong",{className:"text-red-900 dark:text-red-200",children:"10-50x MORE tokens"})," than normal responses"]}),e.jsxs("div",{children:["â€¢ Uses ",e.jsx("strong",{children:"maximum reasoning depth"})," - models think extensively before responding"]}),e.jsxs("div",{children:["â€¢ May trigger ",e.jsx("strong",{children:"PARALLEL ASYNCHRONOUS TOOL CALLS"})," causing rapid token consumption"]}),e.jsxs("div",{children:["â€¢ Reasoning models charge for ",e.jsx("strong",{children:"both reasoning AND output tokens"})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-red-300 dark:border-red-800",children:[e.jsx("strong",{children:"USE ONLY FOR:"})," Complex problems requiring deep logical analysis, multi-step proofs, mathematical derivations, or strategic planning where explicit reasoning transparency is essential."]})]})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"MCP Servers"}),e.jsx("button",{onClick:()=>{w()},className:"btn-secondary text-sm px-4 py-2",title:"Configure Model Context Protocol Servers",children:"âž• Configure MCP"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add and manage Model Context Protocol servers for extended functionality"})]})]}),n==="proxy"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:t("settings.proxySettings")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:t("settings.proxyDescription")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:t("settings.proxyUsername")}),e.jsx("input",{type:"text",value:v,onChange:x=>{const S=x.target.value;c(S),P(S,a,y)},placeholder:"exrihquq",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:t("settings.proxyPassword")}),e.jsx("input",{type:"password",value:a,onChange:x=>{const S=x.target.value;l(S),P(v,S,y)},placeholder:"Enter password",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"proxyEnabled",checked:y,onChange:x=>{const S=x.target.checked;E(S),P(v,a,S)},className:"w-4 h-4"}),e.jsx("label",{htmlFor:"proxyEnabled",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable proxy for all requests"})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 space-y-1 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:[e.jsx("p",{children:"âœ“ Rotating residential IPs via p.webshare.io:80"}),e.jsx("p",{children:"âœ“ Avoids rate limiting from Google and other services"}),e.jsxs("p",{children:["âœ“ Get credentials from ",e.jsx("a",{href:"https://dashboard.webshare.io/dashboard",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Webshare Dashboard"})]}),e.jsx("p",{children:"âš ï¸ UI settings override environment variables"})]})]})}),n==="location"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:["ðŸ“ ",t("settings.locationServices")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:t("settings.locationDescription")}),e.jsx("div",{className:`p-6 rounded-lg border-2 ${o?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":L==="denied"?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:p?e.jsxs("svg",{className:"w-12 h-12 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):o?e.jsx("svg",{className:"w-12 h-12 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}):L==="denied"?e.jsx("svg",{className:"w-12 h-12 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm1 13h-2v-2h2v2zm0-4h-2V7h2v4z"})}):e.jsx("svg",{className:"w-12 h-12 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.5",children:e.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"mb-3",children:p?e.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Getting your location..."}):o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-2",children:"Location Enabled"}),o.address&&e.jsxs("div",{className:"space-y-1",children:[o.address.formatted&&e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:o.address.formatted}),!o.address.formatted&&e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[o.address.city,o.address.state,o.address.country].filter(Boolean).join(", ")})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{children:["Coordinates: ",o.latitude.toFixed(6),", ",o.longitude.toFixed(6)]}),e.jsxs("div",{children:["Accuracy: Â±",o.accuracy.toFixed(0)," meters"]}),e.jsxs("div",{children:["Updated: ",new Date(o.timestamp).toLocaleString()]})]})]}):L==="denied"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-2",children:"Location Access Denied"}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"You have denied location access. To enable it, please update your browser settings and reload the page."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location Not Enabled"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click the button below to share your location. This helps provide better responses for location-specific queries."})]})}),u&&e.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"text-sm text-red-700 dark:text-red-400 flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:u})]})}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[!o&&L!=="denied"&&e.jsx("button",{onClick:A,disabled:p,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Getting Location...":"Enable Location"}),o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:A,disabled:p,className:"btn-secondary px-4 py-2",children:"ðŸ”„ Refresh"}),e.jsx("button",{onClick:M,className:"btn-secondary px-4 py-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:"ðŸ—‘ï¸ Clear"})]})]})]})]})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Privacy & Usage"}),e.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:"âœ“ Your location is stored locally in your browser (not on our servers)"}),e.jsx("p",{children:"âœ“ Location data is only sent to the Lambda function when you send a chat message"}),e.jsx("p",{children:"âœ“ Automatically expires after 24 hours"}),e.jsx("p",{children:"âœ“ You can clear your location data at any time"}),e.jsx("p",{children:"âœ“ Used for: weather, local businesses, directions, time zones, regional info"})]})]})]})})]})}),n==="tts"&&e.jsx(xe,{}),n==="rag"&&e.jsx(ge,{}),n==="images"&&e.jsx(he,{}),n==="cloud"&&e.jsx(me,{}),n==="feed"&&e.jsx(ue,{})]})})};export{je as SettingsPage};
