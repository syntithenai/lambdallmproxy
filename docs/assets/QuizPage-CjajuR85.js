import{u as S,aB as Q,a_ as T,r as d,j as e}from"./index-BJU8w3B-.js";import{q as o}from"./quizDb-BKsYOEXU.js";import{c as x,B as i,T as y}from"./trophy-BMJIhuZT.js";import{C as D,T as C}from"./trash-2-C1T0tUOL.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],L=x("arrow-left",_);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$=x("clock",M);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],B=x("trending-up",A),H=()=>{const c=S(),{t:s}=Q(),{showSuccess:b,showError:g}=T(),[m,j]=d.useState([]),[a,p]=d.useState(null),[f,h]=d.useState(!0);d.useEffect(()=>{u()},[]);const u=async()=>{try{h(!0);const[t,r]=await Promise.all([o.getQuizStatistics(20),o.getStatisticsSummary()]);j(t),p(r)}catch(t){console.error("Failed to load quiz statistics:",t),g(s("quiz.errorLoadingStats"))}finally{h(!1)}},w=async(t,r)=>{if(confirm(s("quiz.confirmDelete",{title:r})))try{await o.deleteQuizStatistic(t),b(s("quiz.quizDeleted")),await u()}catch(l){console.error("Failed to delete quiz:",l),g(s("quiz.errorDeletingQuiz"))}},N=t=>{const r=Math.floor(t/6e4),l=Math.floor(t%6e4/1e3);return`${r}:${l.toString().padStart(2,"0")}`},k=t=>{const r=new Date(t),q=new Date().getTime()-r.getTime(),n=Math.floor(q/(1e3*60*60*24));return n===0?s("quiz.today"):n===1?s("quiz.yesterday"):n<7?s("quiz.daysAgo",{days:n}):r.toLocaleDateString()},v=t=>t>=90?"text-green-600 dark:text-green-400":t>=70?"text-blue-600 dark:text-blue-400":t>=50?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",z=t=>t>=90?"bg-green-100 dark:bg-green-900/30":t>=70?"bg-blue-100 dark:bg-blue-900/30":t>=50?"bg-yellow-100 dark:bg-yellow-900/30":"bg-red-100 dark:bg-red-900/30";return f?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:s("quiz.loadingStats")})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 pb-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("/"),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-lg transition-colors",title:s("quiz.backToChat"),children:e.jsx(L,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(i,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),s("quiz.title")]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:s("quiz.subtitle")})]})]}),e.jsxs("button",{onClick:()=>c("/swag"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5"}),s("quiz.createNewQuiz")]})]}),a&&a.totalQuizzes>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:s("quiz.totalQuizzes")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.totalQuizzes})]}),e.jsx(y,{className:"w-12 h-12 text-yellow-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:s("quiz.averageScore")}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[a.averagePercentage.toFixed(0),"%"]})]}),e.jsx(B,{className:"w-12 h-12 text-blue-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:s("quiz.highestScore")}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[a.highestScore.toFixed(0),"%"]})]}),e.jsx(y,{className:"w-12 h-12 text-green-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:s("quiz.questionsAnswered")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.totalQuestionsAnswered})]}),e.jsx(i,{className:"w-12 h-12 text-indigo-500"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s("quiz.recentQuizzes")})}),m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(i,{className:"w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:s("quiz.noQuizzesYet")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:s("quiz.noQuizzesDescription")}),e.jsxs("button",{onClick:()=>c("/swag"),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors inline-flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5"}),s("quiz.goToSwag")]})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(t=>e.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.quizTitle}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${z(t.percentage)} ${v(t.percentage)}`,children:[t.score,"/",t.totalQuestions," (",t.percentage,"%)"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),k(t.completedAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-4 h-4"}),N(t.timeTaken)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(i,{className:"w-4 h-4"}),s("quiz.snippetCount",{count:t.snippetIds.length})]}),t.enrichment&&e.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-xs font-medium",children:s("quiz.enriched")}),!t.synced&&e.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded text-xs font-medium",children:s("quiz.notSynced")})]})]}),e.jsx("button",{onClick:()=>w(t.id,t.quizTitle),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s("quiz.deleteQuiz"),children:e.jsx(C,{className:"w-5 h-5"})})]})},t.id))})]})]})})};export{H as QuizPage};
