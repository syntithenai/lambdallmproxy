import{c as L,u as D,aP as A,d as M,e as F,r as l,j as e,aQ as P,aR as R,M as I,aS as z}from"./index-Ba9w6Zmy.js";import{T as B,a as W}from"./TagAutocomplete-LFSZoPV-.js";import{T as _}from"./tag-BS2IDD1B.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],U=L("pen",Q);function G(){const n=D(),{id:c}=A(),{snippets:i,deleteSnippets:f,updateSnippet:v}=M(),{showSuccess:g,showError:d}=F(),[t,p]=l.useState(null),[j,h]=l.useState(!1),[k,o]=l.useState(!1),[m,u]=l.useState(""),[b,y]=l.useState(""),[r,x]=l.useState([]);l.useEffect(()=>{if(!c){n("/swag");return}const a=i.find(s=>s.id===c);a?p(a):(d("Snippet not found"),n("/swag"))},[c,i,n,d]);const w=()=>{t&&(u(t.title||""),y(t.content),x(t.tags||[]),o(!0))},N=async()=>{if(t)try{await v(t.id,{title:m,content:b,tags:r}),g("Snippet updated"),o(!1);const a=i.find(s=>s.id===t.id);a&&p(a)}catch(a){console.error("Failed to update snippet:",a),d("Failed to update snippet")}},S=()=>{const a=new Set;return i.forEach(s=>{s.tags?.forEach(E=>a.add(E))}),Array.from(a).sort()},T=async()=>{if(t&&confirm("Are you sure you want to delete this snippet?"))try{await f([t.id]),g("Snippet deleted"),n("/swag")}catch(a){console.error("Failed to delete snippet:",a),d("Failed to delete snippet")}},C=()=>{h(!0)};return t?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center justify-end mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:C,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Share snippet",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsx("button",{onClick:w,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Edit snippet",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("button",{onClick:T,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"Delete snippet",children:e.jsx(R,{className:"w-5 h-5"})})]})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t.title||"Untitled Snippet"}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((a,s)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:[e.jsx(_,{className:"w-3 h-3"}),a]},s))})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:e.jsx(I,{content:t.content})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:[t.sourceType&&e.jsxs("div",{children:["Source: ",t.sourceType]}),t.timestamp&&e.jsxs("div",{children:["Added: ",new Date(t.timestamp).toLocaleDateString()," at"," ",new Date(t.timestamp).toLocaleTimeString()]})]})]}),k&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Snippet"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:"×"})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (optional)"}),e.jsx("input",{type:"text",value:m,onChange:a=>u(a.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg",placeholder:"Enter a title..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.map(a=>e.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-2 group",children:[a,e.jsx("button",{onClick:()=>{x(r.filter(s=>s!==a))},className:"hover:text-red-600 dark:hover:text-red-400 opacity-60 group-hover:opacity-100 transition-opacity",title:"Remove tag",children:"×"})]},a))}),e.jsx(B,{existingTags:S(),currentTags:r,onAddTag:a=>{r.includes(a)||x([...r,a])},placeholder:"Type to add tag..."})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),e.jsx("div",{style:{height:"calc(100vh - 28rem)",overflowY:"auto"},children:e.jsx(W,{value:b,onChange:y,placeholder:"Start typing your content...",editable:!0,snippetId:t.id,snippetTags:r})})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[e.jsxs("button",{onClick:()=>o(!1),className:"p-2 md:px-6 md:py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-1.5",title:"Cancel","aria-label":"Cancel",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),e.jsx("span",{className:"hidden md:inline",children:"Cancel"})]}),e.jsxs("button",{onClick:N,className:"p-2 md:px-6 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1.5",title:"Save Changes","aria-label":"Save Changes",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"hidden md:inline",children:"Save Changes"})]})]})]})}),j&&t&&e.jsx(z,{snippetId:t.id,content:t.content,title:t.title,tags:t.tags,sourceType:t.sourceType,onClose:()=>h(!1)})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Loading..."})})}export{G as default};
