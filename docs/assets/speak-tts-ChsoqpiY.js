import{aK as T}from"./index-DPL51mre.js";var y={},a={},L;function x(){if(L)return a;L=1,Object.defineProperty(a,"__esModule",{value:!0}),a.trim=a.isObject=a.isNil=a.isNan=a.size=a.isString=a.validateLocale=a.splitSentences=void 0;var i=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n.replace(/\.+/g,".|").replace(/\?/g,"?|").replace(/\!/g,"!|").split("|").map(function(c){return e(c)}).filter(Boolean)};a.splitSentences=i;var b=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,w=function(n){return typeof n!="string"?!1:b.test(n)};a.validateLocale=w;var d=function(n){return typeof n=="string"||n instanceof String};a.isString=d;var N=function(n){return n&&Array.isArray(n)&&n.length?n.length:0};a.size=N;var _=function(n){return typeof n=="number"&&isNaN(n)};a.isNan=_;var o=function(n){return n==null};a.isNil=o;var s=function(n){return Object.prototype.toString.call(n)==="[object Object]"};a.isObject=s;var e=function(n){return d(n)?n.trim():""};return a.trim=e,a}var E;function q(){if(E)return y;E=1,Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var i=x();function b(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function w(o,s){for(var e=0;e<s.length;e++){var t=s[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function d(o,s,e){return s&&w(o.prototype,s),o}var N=(function(){function o(){b(this,o),this.browserSupport="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,this.synthesisVoice=null}return d(o,[{key:"init",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(n,c){e.browserSupport||c("Your browser does not support Speech Synthesis");var l=(0,i.isNil)(t.listeners)?{}:t.listeners,p=(0,i.isNil)(t.splitSentences)?!0:t.splitSentences,v=(0,i.isNil)(t.lang)?void 0:t.lang,g=(0,i.isNil)(t.volume)?1:t.volume,S=(0,i.isNil)(t.rate)?1:t.rate,f=(0,i.isNil)(t.pitch)?1:t.pitch,h=(0,i.isNil)(t.voice)?void 0:t.voice;Object.keys(l).forEach(function(u){var m=l[u],z=function(r){m&&m(r)};u!=="onvoiceschanged"&&(speechSynthesis[u]=z)}),e._loadVoices().then(function(u){l.onvoiceschanged&&l.onvoiceschanged(u),!(0,i.isNil)(v)&&e.setLanguage(v),!(0,i.isNil)(h)&&e.setVoice(h),!(0,i.isNil)(g)&&e.setVolume(g),!(0,i.isNil)(S)&&e.setRate(S),!(0,i.isNil)(f)&&e.setPitch(f),!(0,i.isNil)(p)&&e.setSplitSentences(p),n({voices:u,lang:e.lang,voice:e.voice,volume:e.volume,rate:e.rate,pitch:e.pitch,splitSentences:e.splitSentences,browserSupport:e.browserSupport})}).catch(function(u){c(u)})})}},{key:"_fetchVoices",value:function(){return new Promise(function(e,t){setTimeout(function(){var n=speechSynthesis.getVoices();return(0,i.size)(n)>0?e(n):t("Could not fetch voices")},100)})}},{key:"_loadVoices",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._fetchVoices().catch(function(n){if(t===0)throw n;return e._loadVoices(t-1)})}},{key:"hasBrowserSupport",value:function(){return this.browserSupport}},{key:"setVoice",value:function(e){var t,n=speechSynthesis.getVoices();if((0,i.isString)(e)&&(t=n.find(function(c){return c.name===e})),(0,i.isObject)(e)&&(t=e),t)this.synthesisVoice=t;else throw"Error setting voice. The voice you passed is not valid or the voices have not been loaded yet."}},{key:"setLanguage",value:function(e){if(e=e.replace("_","-"),(0,i.validateLocale)(e))this.lang=e;else throw"Error setting language. Please verify your locale is BCP47 format (http://schneegans.de/lv/?tags=es-FR&format=text)"}},{key:"setVolume",value:function(e){if(e=parseFloat(e),!(0,i.isNan)(e)&&e>=0&&e<=1)this.volume=e;else throw"Error setting volume. Please verify your volume value is a number between 0 and 1."}},{key:"setRate",value:function(e){if(e=parseFloat(e),!(0,i.isNan)(e)&&e>=0&&e<=10)this.rate=e;else throw"Error setting rate. Please verify your volume value is a number between 0 and 10."}},{key:"setPitch",value:function(e){if(e=parseFloat(e),!(0,i.isNan)(e)&&e>=0&&e<=2)this.pitch=e;else throw"Error setting pitch. Please verify your pitch value is a number between 0 and 2."}},{key:"setSplitSentences",value:function(e){this.splitSentences=e}},{key:"speak",value:function(e){var t=this;return new Promise(function(n,c){var l=e.text,p=e.listeners,v=p===void 0?{}:p,g=e.queue,S=g===void 0?!0:g,f=(0,i.trim)(l);(0,i.isNil)(f)&&n(),!S&&t.cancel();var h=[],u=t.splitSentences?(0,i.splitSentences)(f):[f];u.forEach(function(m,z){var V=z===(0,i.size)(u)-1,r=new SpeechSynthesisUtterance;t.synthesisVoice&&(r.voice=t.synthesisVoice),t.lang&&(r.lang=t.lang),t.volume&&(r.volume=t.volume),t.rate&&(r.rate=t.rate),t.pitch&&(r.pitch=t.pitch),r.text=m,Object.keys(v).forEach(function(k){var j=v[k],O=function(P){j&&j(P),k==="onerror"&&c({utterances:h,lastUtterance:r,error:P}),k==="onend"&&V&&n({utterances:h,lastUtterance:r})};r[k]=O}),h.push(r),speechSynthesis.speak(r)})})}},{key:"pending",value:function(){return speechSynthesis.pending}},{key:"paused",value:function(){return speechSynthesis.paused}},{key:"speaking",value:function(){return speechSynthesis.speaking}},{key:"pause",value:function(){speechSynthesis.pause()}},{key:"resume",value:function(){speechSynthesis.resume()}},{key:"cancel",value:function(){speechSynthesis.cancel()}}]),o})(),_=N;return y.default=_,y}var B=q();const C=T(B),F=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{F as s};
