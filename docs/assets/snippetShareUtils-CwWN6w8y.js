import{L as i}from"./index-BVm7fXtr.js";const s=32e3,d=1;function l(n){const e=JSON.stringify(n);return i.compressToEncodedURIComponent(e)}function c(n){try{const e=i.decompressFromEncodedURIComponent(n);if(!e)return null;const t=JSON.parse(e);return!t.version||t.shareType!=="snippet"||!t.content?(console.error("Invalid snippet share data structure"),null):t}catch(e){return console.error("Failed to decode snippet share data:",e),null}}function u(n,e,t,a,p){const o={version:d,timestamp:Date.now(),shareType:"snippet",id:n,content:e,title:t,tags:a,sourceType:p,metadata:{compressed:!0,originalSize:e.length}},r=l(o);return o.metadata.compressedSize=r.length,r.length>s&&console.warn(`Snippet share data exceeds ${s} chars (${r.length})`),r}function m(n){return`${window.location.origin+window.location.pathname}#/snippet/shared?data=${n}`}function S(){const n=window.location.hash;if(n.includes("/snippet/shared?data=")){const a=n.match(/data=([^&]+)/);if(a)return c(a[1])}const t=new URLSearchParams(window.location.search).get("snippet");return t?c(t):null}export{m as a,u as c,S as g};
