const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-C_eRm8ex.js","assets/mixin-D3UDm--6.js","assets/hls-Bm3F2dIq.js","assets/react-C_SPg3Ju.js","assets/index-C3XKbT6L.js","assets/dagre-6UL2VRFP-WlI3BDXm.js","assets/graph-Bc4oOxXU.js","assets/_baseUniq-BBwBPtSh.js","assets/layout-WPWsCihb.js","assets/_basePickBy-DLWGbary.js","assets/clone-9lG92ojR.js","assets/cose-bilkent-S5V4N54A-Y21l8uwM.js","assets/cytoscape.esm-DtBltrT8.js","assets/c4Diagram-YG6GDRKO-u6NeRFy9.js","assets/chunk-TZMSLE5B-BCb49R22.js","assets/flowDiagram-NV44I4VS-BeIeTt2h.js","assets/chunk-FMBD7UC4-DZyAlhSa.js","assets/chunk-55IACEB6-CEWZGdhF.js","assets/chunk-QN33PNHL-BAvDUrEH.js","assets/channel-Dw22IcrG.js","assets/erDiagram-Q2GNP2WA-C46H1YK5.js","assets/gitGraphDiagram-NY62KEGX-X5gwygfV.js","assets/chunk-4BX2VUAB-DBnIE-KS.js","assets/chunk-QZHKN3VN-CwVr3wji.js","assets/treemap-KMMF4GRG-SQHXAW32.js","assets/ganttDiagram-LVOFAZNH-CXYqBIx4.js","assets/linear-I4lIbbGI.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-F6ZHWCRC-DZJZwvTR.js","assets/pieDiagram-ADFJNKIX-DQMa4bWl.js","assets/arc-l1AmBLNQ.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-BeoGtsLz.js","assets/xychartDiagram-PRI3JC2R-BBueQarb.js","assets/requirementDiagram-UZGBJVZJ-DaeR3n35.js","assets/sequenceDiagram-WL72ISMW-DSuOUt8w.js","assets/classDiagram-2ON5EDUG-CeaNHho-.js","assets/chunk-B4BG7PRW-xj4k5sv6.js","assets/classDiagram-v2-WZHVMYZB-CeaNHho-.js","assets/stateDiagram-FKZM4ZOC-n7c31U58.js","assets/chunk-DI55MBZ5-BjHeYCCj.js","assets/stateDiagram-v2-4FDKWEC3-B_-_vMty.js","assets/journeyDiagram-XKPGCS4Q-D8UQEYGo.js","assets/timeline-definition-IT6M3QCI-jcp9NHXV.js","assets/mindmap-definition-VGOIOE7T-BhW6gDgD.js","assets/kanban-definition-3W4ZIXB7-DvHVO7n1.js","assets/sankeyDiagram-TZEHDZUN-DFPDgTor.js","assets/diagram-S2PKOQOG-DVfxd0wK.js","assets/diagram-QEK2KX5R-DVFzKOGh.js","assets/blockDiagram-VD42YOAC-BUjQx_D9.js","assets/architectureDiagram-VXUJARFQ-BHIOFW9T.js","assets/diagram-PSM6KHXK-p3557TFv.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function Hu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wb={exports:{}},Wd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function n6(){if(e_)return Wd;e_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:o}}return Wd.Fragment=t,Wd.jsx=r,Wd.jsxs=r,Wd}var t_;function a6(){return t_||(t_=1,wb.exports=n6()),wb.exports}var s=a6(),Eb={exports:{}},Vd={},_b={exports:{}},Sb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function s6(){return r_||(r_=1,(function(e){function t(D,X){var K=D.length;D.push(X);e:for(;0<K;){var xe=K-1>>>1,U=D[xe];if(0<a(U,X))D[xe]=X,D[K]=U,K=xe;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var X=D[0],K=D.pop();if(K!==X){D[0]=K;e:for(var xe=0,U=D.length,M=U>>>1;xe<M;){var Y=2*(xe+1)-1,R=D[Y],H=Y+1,ne=D[H];if(0>a(R,K))H<U&&0>a(ne,R)?(D[xe]=ne,D[H]=K,xe=H):(D[xe]=R,D[Y]=K,xe=Y);else if(H<U&&0>a(ne,K))D[xe]=ne,D[H]=K,xe=H;else break e}}return X}function a(D,X){var K=D.sortIndex-X.sortIndex;return K!==0?K:D.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],f=1,p=null,x=3,b=!1,y=!1,k=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function I(D){for(var X=r(h);X!==null;){if(X.callback===null)n(h);else if(X.startTime<=D)n(h),X.sortIndex=X.expirationTime,t(d,X);else break;X=r(h)}}function O(D){if(k=!1,I(D),!y)if(r(d)!==null)y=!0,B||(B=!0,W());else{var X=r(h);X!==null&&q(O,X.startTime-D)}}var B=!1,F=-1,ae=5,Z=-1;function z(){return S?!0:!(e.unstable_now()-Z<ae)}function ee(){if(S=!1,B){var D=e.unstable_now();Z=D;var X=!0;try{e:{y=!1,k&&(k=!1,T(F),F=-1),b=!0;var K=x;try{t:{for(I(D),p=r(d);p!==null&&!(p.expirationTime>D&&z());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,x=p.priorityLevel;var U=xe(p.expirationTime<=D);if(D=e.unstable_now(),typeof U=="function"){p.callback=U,I(D),X=!0;break t}p===r(d)&&n(d),I(D)}else n(d);p=r(d)}if(p!==null)X=!0;else{var M=r(h);M!==null&&q(O,M.startTime-D),X=!1}}break e}finally{p=null,x=K,b=!1}X=void 0}}finally{X?W():B=!1}}}var W;if(typeof A=="function")W=function(){A(ee)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=ee,W=function(){L.postMessage(null)}}else W=function(){_(ee,0)};function q(D,X){F=_(function(){D(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(D){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var K=x;x=X;try{return D()}finally{x=K}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=x;x=D;try{return X()}finally{x=K}},e.unstable_scheduleCallback=function(D,X,K){var xe=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?xe+K:xe):K=xe,D){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,D={id:f++,callback:X,priorityLevel:D,startTime:K,expirationTime:U,sortIndex:-1},K>xe?(D.sortIndex=K,t(h,D),r(d)===null&&D===r(h)&&(k?(T(F),F=-1):k=!0,q(O,K-xe))):(D.sortIndex=U,t(d,D),y||b||(y=!0,B||(B=!0,W()))),D},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(D){var X=x;return function(){var K=x;x=X;try{return D.apply(this,arguments)}finally{x=K}}}})(Sb)),Sb}var n_;function i6(){return n_||(n_=1,_b.exports=s6()),_b.exports}var Tb={exports:{}},er={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function o6(){if(a_)return er;a_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function _(M,Y,R){this.props=M,this.context=Y,this.refs=S,this.updater=R||y}_.prototype.isReactComponent={},_.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},_.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function T(){}T.prototype=_.prototype;function A(M,Y,R){this.props=M,this.context=Y,this.refs=S,this.updater=R||y}var I=A.prototype=new T;I.constructor=A,k(I,_.prototype),I.isPureReactComponent=!0;var O=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function Z(M,Y,R){var H=R.ref;return{$$typeof:e,type:M,key:Y,ref:H!==void 0?H:null,props:R}}function z(M,Y){return Z(M.type,Y,M.props)}function ee(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function W(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(R){return Y[R]})}var $=/\/+/g;function L(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?W(""+M.key):Y.toString(36)}function q(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(B,B):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function D(M,Y,R,H,ne){var re=typeof M;(re==="undefined"||re==="boolean")&&(M=null);var fe=!1;if(M===null)fe=!0;else switch(re){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(M.$$typeof){case e:case t:fe=!0;break;case f:return fe=M._init,D(fe(M._payload),Y,R,H,ne)}}if(fe)return ne=ne(M),fe=H===""?"."+L(M,0):H,O(ne)?(R="",fe!=null&&(R=fe.replace($,"$&/")+"/"),D(ne,Y,R,"",function(ce){return ce})):ne!=null&&(ee(ne)&&(ne=z(ne,R+(ne.key==null||M&&M.key===ne.key?"":(""+ne.key).replace($,"$&/")+"/")+fe)),Y.push(ne)),1;fe=0;var le=H===""?".":H+":";if(O(M))for(var ve=0;ve<M.length;ve++)H=M[ve],re=le+L(H,ve),fe+=D(H,Y,R,re,ne);else if(ve=b(M),typeof ve=="function")for(M=ve.call(M),ve=0;!(H=M.next()).done;)H=H.value,re=le+L(H,ve++),fe+=D(H,Y,R,re,ne);else if(re==="object"){if(typeof M.then=="function")return D(q(M),Y,R,H,ne);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return fe}function X(M,Y,R){if(M==null)return M;var H=[],ne=0;return D(M,H,"","",function(re){return Y.call(R,re,ne++)}),H}function K(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(R){(M._status===0||M._status===-1)&&(M._status=1,M._result=R)},function(R){(M._status===0||M._status===-1)&&(M._status=2,M._result=R)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var xe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},U={map:X,forEach:function(M,Y,R){X(M,function(){Y.apply(this,arguments)},R)},count:function(M){var Y=0;return X(M,function(){Y++}),Y},toArray:function(M){return X(M,function(Y){return Y})||[]},only:function(M){if(!ee(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return er.Activity=p,er.Children=U,er.Component=_,er.Fragment=r,er.Profiler=a,er.PureComponent=A,er.StrictMode=n,er.Suspense=d,er.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,er.__COMPILER_RUNTIME={__proto__:null,c:function(M){return F.H.useMemoCache(M)}},er.cache=function(M){return function(){return M.apply(null,arguments)}},er.cacheSignal=function(){return null},er.cloneElement=function(M,Y,R){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var H=k({},M.props),ne=M.key;if(Y!=null)for(re in Y.key!==void 0&&(ne=""+Y.key),Y)!ae.call(Y,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&Y.ref===void 0||(H[re]=Y[re]);var re=arguments.length-2;if(re===1)H.children=R;else if(1<re){for(var fe=Array(re),le=0;le<re;le++)fe[le]=arguments[le+2];H.children=fe}return Z(M.type,ne,H)},er.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},er.createElement=function(M,Y,R){var H,ne={},re=null;if(Y!=null)for(H in Y.key!==void 0&&(re=""+Y.key),Y)ae.call(Y,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ne[H]=Y[H]);var fe=arguments.length-2;if(fe===1)ne.children=R;else if(1<fe){for(var le=Array(fe),ve=0;ve<fe;ve++)le[ve]=arguments[ve+2];ne.children=le}if(M&&M.defaultProps)for(H in fe=M.defaultProps,fe)ne[H]===void 0&&(ne[H]=fe[H]);return Z(M,re,ne)},er.createRef=function(){return{current:null}},er.forwardRef=function(M){return{$$typeof:u,render:M}},er.isValidElement=ee,er.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:K}},er.memo=function(M,Y){return{$$typeof:h,type:M,compare:Y===void 0?null:Y}},er.startTransition=function(M){var Y=F.T,R={};F.T=R;try{var H=M(),ne=F.S;ne!==null&&ne(R,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(B,xe)}catch(re){xe(re)}finally{Y!==null&&R.types!==null&&(Y.types=R.types),F.T=Y}},er.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},er.use=function(M){return F.H.use(M)},er.useActionState=function(M,Y,R){return F.H.useActionState(M,Y,R)},er.useCallback=function(M,Y){return F.H.useCallback(M,Y)},er.useContext=function(M){return F.H.useContext(M)},er.useDebugValue=function(){},er.useDeferredValue=function(M,Y){return F.H.useDeferredValue(M,Y)},er.useEffect=function(M,Y){return F.H.useEffect(M,Y)},er.useEffectEvent=function(M){return F.H.useEffectEvent(M)},er.useId=function(){return F.H.useId()},er.useImperativeHandle=function(M,Y,R){return F.H.useImperativeHandle(M,Y,R)},er.useInsertionEffect=function(M,Y){return F.H.useInsertionEffect(M,Y)},er.useLayoutEffect=function(M,Y){return F.H.useLayoutEffect(M,Y)},er.useMemo=function(M,Y){return F.H.useMemo(M,Y)},er.useOptimistic=function(M,Y){return F.H.useOptimistic(M,Y)},er.useReducer=function(M,Y,R){return F.H.useReducer(M,Y,R)},er.useRef=function(M){return F.H.useRef(M)},er.useState=function(M){return F.H.useState(M)},er.useSyncExternalStore=function(M,Y,R){return F.H.useSyncExternalStore(M,Y,R)},er.useTransition=function(){return F.H.useTransition()},er.version="19.2.0",er}var s_;function lv(){return s_||(s_=1,Tb.exports=o6()),Tb.exports}var Cb={exports:{}},ba={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function l6(){if(i_)return ba;i_=1;var e=lv();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:h,implementation:f}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ba.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ba.createPortal=function(d,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,f)},ba.flushSync=function(d){var h=l.T,f=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=f,n.d.f()}},ba.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},ba.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ba.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var f=h.as,p=u(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:b}):f==="script"&&n.d.X(d,{crossOrigin:p,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ba.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=u(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},ba.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=u(f,h.crossOrigin);n.d.L(d,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ba.preloadModule=function(d,h){if(typeof d=="string")if(h){var f=u(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},ba.requestFormReset=function(d){n.d.r(d)},ba.unstable_batchedUpdates=function(d,h){return d(h)},ba.useFormState=function(d,h,f){return l.H.useFormState(d,h,f)},ba.useFormStatus=function(){return l.H.useHostTransitionStatus()},ba.version="19.2.0",ba}var o_;function VC(){if(o_)return Cb.exports;o_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cb.exports=l6(),Cb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function c6(){if(l_)return Vd;l_=1;var e=i6(),t=lv(),r=VC();function n(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var c=i,g=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(g=c.return),i=c.return;while(i)}return c.tag===3?g:null}function l(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function u(i){if(i.tag===31){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function h(i){var c=i.alternate;if(!c){if(c=o(i),c===null)throw Error(n(188));return c!==i?null:i}for(var g=i,m=c;;){var v=g.return;if(v===null)break;var w=v.alternate;if(w===null){if(m=v.return,m!==null){g=m;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===g)return d(v),i;if(w===m)return d(v),c;w=w.sibling}throw Error(n(188))}if(g.return!==m.return)g=v,m=w;else{for(var j=!1,G=v.child;G;){if(G===g){j=!0,g=v,m=w;break}if(G===m){j=!0,m=v,g=w;break}G=G.sibling}if(!j){for(G=w.child;G;){if(G===g){j=!0,g=w,m=v;break}if(G===m){j=!0,m=w,g=v;break}G=G.sibling}if(!j)throw Error(n(189))}}if(g.alternate!==m)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:c}function f(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=f(i),c!==null)return c;i=i.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function W(i){return i===null||typeof i!="object"?null:(i=ee&&i[ee]||i["@@iterator"],typeof i=="function"?i:null)}var $=Symbol.for("react.client.reference");function L(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===$?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case y:return"Portal";case A:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case I:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return c=i.displayName||null,c!==null?c:L(i.type)||"Memo";case ae:c=i._payload,i=i._init;try{return L(i(c))}catch{}}return null}var q=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},xe=[],U=-1;function M(i){return{current:i}}function Y(i){0>U||(i.current=xe[U],xe[U]=null,U--)}function R(i,c){U++,xe[U]=i.current,i.current=c}var H=M(null),ne=M(null),re=M(null),fe=M(null);function le(i,c){switch(R(re,c),R(ne,i),R(H,null),c.nodeType){case 9:case 11:i=(i=c.documentElement)&&(i=i.namespaceURI)?EE(i):0;break;default:if(i=c.tagName,c=c.namespaceURI)c=EE(c),i=_E(c,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(H),R(H,i)}function ve(){Y(H),Y(ne),Y(re)}function ce(i){i.memoizedState!==null&&R(fe,i);var c=H.current,g=_E(c,i.type);c!==g&&(R(ne,i),R(H,g))}function ke(i){ne.current===i&&(Y(H),Y(ne)),fe.current===i&&(Y(fe),Hd._currentValue=K)}var it,pt;function zt(i){if(it===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);it=c&&c[1]||"",pt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+i+pt}var Sr=!1;function He(i,c){if(!i||Sr)return"";Sr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Le){var Te=Le}Reflect.construct(i,[],Ue)}else{try{Ue.call()}catch(Le){Te=Le}i.call(Ue.prototype)}}else{try{throw Error()}catch(Le){Te=Le}(Ue=i())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Le){if(Le&&Te&&typeof Le.stack=="string")return[Le.stack,Te.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),j=w[0],G=w[1];if(j&&G){var ue=j.split(`
`),_e=G.split(`
`);for(v=m=0;m<ue.length&&!ue[m].includes("DetermineComponentFrameRoot");)m++;for(;v<_e.length&&!_e[v].includes("DetermineComponentFrameRoot");)v++;if(m===ue.length||v===_e.length)for(m=ue.length-1,v=_e.length-1;1<=m&&0<=v&&ue[m]!==_e[v];)v--;for(;1<=m&&0<=v;m--,v--)if(ue[m]!==_e[v]){if(m!==1||v!==1)do if(m--,v--,0>v||ue[m]!==_e[v]){var Oe=`
`+ue[m].replace(" at new "," at ");return i.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",i.displayName)),Oe}while(1<=m&&0<=v);break}}}finally{Sr=!1,Error.prepareStackTrace=g}return(g=i?i.displayName||i.name:"")?zt(g):""}function Gt(i,c){switch(i.tag){case 26:case 27:case 5:return zt(i.type);case 16:return zt("Lazy");case 13:return i.child!==c&&c!==null?zt("Suspense Fallback"):zt("Suspense");case 19:return zt("SuspenseList");case 0:case 15:return He(i.type,!1);case 11:return He(i.type.render,!1);case 1:return He(i.type,!0);case 31:return zt("Activity");default:return""}}function rr(i){try{var c="",g=null;do c+=Gt(i,g),g=i,i=i.return;while(i);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Dt=Object.prototype.hasOwnProperty,Ht=e.unstable_scheduleCallback,Zt=e.unstable_cancelCallback,hr=e.unstable_shouldYield,ar=e.unstable_requestPaint,Ut=e.unstable_now,dn=e.unstable_getCurrentPriorityLevel,Ne=e.unstable_ImmediatePriority,Ke=e.unstable_UserBlockingPriority,St=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,sr=e.unstable_IdlePriority,on=e.log,hn=e.unstable_setDisableYieldValue,Gr=null,Tr=null;function pr(i){if(typeof on=="function"&&hn(i),Tr&&typeof Tr.setStrictMode=="function")try{Tr.setStrictMode(Gr,i)}catch{}}var Yt=Math.clz32?Math.clz32:rs,gn=Math.log,fn=Math.LN2;function rs(i){return i>>>=0,i===0?32:31-(gn(i)/fn|0)|0}var aa=256,Gn=262144,sa=4194304;function Qr(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function oe(i,c,g){var m=i.pendingLanes;if(m===0)return 0;var v=0,w=i.suspendedLanes,j=i.pingedLanes;i=i.warmLanes;var G=m&134217727;return G!==0?(m=G&~w,m!==0?v=Qr(m):(j&=G,j!==0?v=Qr(j):g||(g=G&~i,g!==0&&(v=Qr(g))))):(G=m&~w,G!==0?v=Qr(G):j!==0?v=Qr(j):g||(g=m&~i,g!==0&&(v=Qr(g)))),v===0?0:c!==0&&c!==v&&(c&w)===0&&(w=v&-v,g=c&-c,w>=g||w===32&&(g&4194048)!==0)?c:v}function Re(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function qe(i,c){switch(i){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bt(){var i=sa;return sa<<=1,(sa&62914560)===0&&(sa=4194304),i}function Cr(i){for(var c=[],g=0;31>g;g++)c.push(i);return c}function br(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ut(i,c,g,m,v,w){var j=i.pendingLanes;i.pendingLanes=g,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=g,i.entangledLanes&=g,i.errorRecoveryDisabledLanes&=g,i.shellSuspendCounter=0;var G=i.entanglements,ue=i.expirationTimes,_e=i.hiddenUpdates;for(g=j&~g;0<g;){var Oe=31-Yt(g),Ue=1<<Oe;G[Oe]=0,ue[Oe]=-1;var Te=_e[Oe];if(Te!==null)for(_e[Oe]=null,Oe=0;Oe<Te.length;Oe++){var Le=Te[Oe];Le!==null&&(Le.lane&=-536870913)}g&=~Ue}m!==0&&lt(i,m,0),w!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=w&~(j&~c))}function lt(i,c,g){i.pendingLanes|=c,i.suspendedLanes&=~c;var m=31-Yt(c);i.entangledLanes|=c,i.entanglements[m]=i.entanglements[m]|1073741824|g&261930}function At(i,c){var g=i.entangledLanes|=c;for(i=i.entanglements;g;){var m=31-Yt(g),v=1<<m;v&c|i[m]&c&&(i[m]|=c),g&=~v}}function dt(i,c){var g=c&-c;return g=(g&42)!==0?1:cr(g),(g&(i.suspendedLanes|c))!==0?0:g}function cr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function nn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ga(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:WE(i.type))}function fa(i,c){var g=X.p;try{return X.p=i,c()}finally{X.p=g}}var Tn=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Tn,Rr="__reactProps$"+Tn,Yn="__reactContainer$"+Tn,Fa="__reactEvents$"+Tn,Hs="__reactListeners$"+Tn,Ua="__reactHandles$"+Tn,ci="__reactResources$"+Tn,ft="__reactMarker$"+Tn;function de(i){delete i[Pr],delete i[Rr],delete i[Fa],delete i[Hs],delete i[Ua]}function $e(i){var c=i[Pr];if(c)return c;for(var g=i.parentNode;g;){if(c=g[Yn]||g[Pr]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(i=jE(i);i!==null;){if(g=i[Pr])return g;i=jE(i)}return c}i=g,g=i.parentNode}return null}function ot(i){if(i=i[Pr]||i[Yn]){var c=i.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return i}return null}function fr(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(n(33))}function Hr(i){var c=i[ci];return c||(c=i[ci]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Vt(i){i[ft]=!0}var he=new Set,Be={};function st(i,c){Ae(i,c),Ae(i+"Capture",c)}function Ae(i,c){for(Be[i]=c,i=0;i<c.length;i++)he.add(c[i])}var Ge=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},Ct={};function Br(i){return Dt.call(Ct,i)?!0:Dt.call(gt,i)?!1:Ge.test(i)?Ct[i]=!0:(gt[i]=!0,!1)}function ln(i,c,g){if(Br(c))if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+g)}}function Xt(i,c,g){if(g===null)i.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+g)}}function ir(i,c,g,m){if(m===null)i.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(g);return}i.setAttributeNS(c,g,""+m)}}function Jt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cn(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function pa(i,c,g){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,c);if(!i.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,w=m.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return v.call(this)},set:function(j){g=""+j,w.call(this,j)}}),Object.defineProperty(i,c,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(j){g=""+j},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function Qt(i){if(!i._valueTracker){var c=Cn(i)?"checked":"value";i._valueTracker=pa(i,c,""+i[c])}}function bs(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return i&&(m=Cn(i)?i.checked?"true":"false":i.value),i=m,i!==g?(c.setValue(i),!0):!1}function Ii(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var xc=/[\n"\\]/g;function ma(i){return i.replace(xc,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ys(i,c,g,m,v,w,j,G){i.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?i.type=j:i.removeAttribute("type"),c!=null?j==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+Jt(c)):i.value!==""+Jt(c)&&(i.value=""+Jt(c)):j!=="submit"&&j!=="reset"||i.removeAttribute("value"),c!=null?Di(i,j,Jt(c)):g!=null?Di(i,j,Jt(g)):m!=null&&i.removeAttribute("value"),v==null&&w!=null&&(i.defaultChecked=!!w),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?i.name=""+Jt(G):i.removeAttribute("name")}function vs(i,c,g,m,v,w,j,G){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),c!=null||g!=null){if(!(w!=="submit"&&w!=="reset"||c!=null)){Qt(i);return}g=g!=null?""+Jt(g):"",c=c!=null?""+Jt(c):g,G||c===i.value||(i.value=c),i.defaultValue=c}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=G?i.checked:!!m,i.defaultChecked=!!m,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(i.name=j),Qt(i)}function Di(i,c,g){c==="number"&&Ii(i.ownerDocument)===i||i.defaultValue===""+g||(i.defaultValue=""+g)}function Wn(i,c,g,m){if(i=i.options,c){c={};for(var v=0;v<g.length;v++)c["$"+g[v]]=!0;for(g=0;g<i.length;g++)v=c.hasOwnProperty("$"+i[g].value),i[g].selected!==v&&(i[g].selected=v),v&&m&&(i[g].defaultSelected=!0)}else{for(g=""+Jt(g),c=null,v=0;v<i.length;v++){if(i[v].value===g){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}c!==null||i[v].disabled||(c=i[v])}c!==null&&(c.selected=!0)}}function hl(i,c,g){if(c!=null&&(c=""+Jt(c),c!==i.value&&(i.value=c),g==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=g!=null?""+Jt(g):""}function qs(i,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(n(92));if(q(m)){if(1<m.length)throw Error(n(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=Jt(c),i.defaultValue=g,m=i.textContent,m===g&&m!==""&&m!==null&&(i.value=m),Qt(i)}function Ot(i,c){if(c){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=c;return}}i.textContent=c}var gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Or(i,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":m?i.setProperty(c,g):typeof g!="number"||g===0||gl.has(c)?c==="float"?i.cssFloat=g:i[c]=(""+g).trim():i[c]=g+"px"}function yr(i,c,g){if(c!=null&&typeof c!="object")throw Error(n(62));if(i=i.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in c)m=c[v],c.hasOwnProperty(v)&&g[v]!==m&&Or(i,v,m)}else for(var w in c)c.hasOwnProperty(w)&&Or(i,w,c[w])}function ui(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(i){return vo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function tt(){}var mt=null;function Wt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mr=null,pn=null;function Ir(i){var c=ot(i);if(c&&(i=c.stateNode)){var g=i[Rr]||null;e:switch(i=c.stateNode,c.type){case"input":if(ys(i,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+ma(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==i&&m.form===i.form){var v=m[Rr]||null;if(!v)throw Error(n(90));ys(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===i.form&&bs(m)}break e;case"textarea":hl(i,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Wn(i,!!g.multiple,c,!1)}}}var ko=!1;function bc(i,c,g){if(ko)return i(c,g);ko=!0;try{var m=i(c);return m}finally{if(ko=!1,(mr!==null||pn!==null)&&(Tf(),mr&&(c=mr,i=pn,pn=mr=null,Ir(c),i)))for(c=0;c<i.length;c++)Ir(i[c])}}function wo(i,c){var g=i.stateNode;if(g===null)return null;var m=g[Rr]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(Ws)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){di=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{di=!1}var hi=null,id=null,yc=null;function Bg(){if(yc)return yc;var i,c=id,g=c.length,m,v="value"in hi?hi.value:hi.textContent,w=v.length;for(i=0;i<g&&c[i]===v[i];i++);var j=g-i;for(m=1;m<=j&&c[g-m]===v[w-m];m++);return yc=v.slice(i,1<m?1-m:void 0)}function vc(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function ws(){return!0}function od(){return!1}function xa(i){function c(g,m,v,w,j){this._reactName=g,this._targetInst=v,this.type=m,this.nativeEvent=w,this.target=j,this.currentTarget=null;for(var G in i)i.hasOwnProperty(G)&&(g=i[G],this[G]=g?g(w):w[G]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ws:od,this.isPropagationStopped=od,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),c}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=xa(Pi),fl=p({},Pi,{view:0,detail:0}),Fg=xa(fl),ld,Bi,pl,wc=p({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fe,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pl&&(pl&&i.type==="mousemove"?(ld=i.screenX-pl.screenX,Bi=i.screenY-pl.screenY):Bi=ld=0,pl=i),ld)},movementY:function(i){return"movementY"in i?i.movementY:Bi}}),Ug=xa(wc),wm=p({},wc,{dataTransfer:0}),Em=xa(wm),_m=p({},fl,{relatedTarget:0}),cd=xa(_m),Sm=p({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Tm=xa(Sm),$g=p({},Pi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cm=xa($g),Nm=p({},Pi,{data:0}),zg=xa(Nm),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},se={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Me={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function at(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=Me[i])?!!c[i]:!1}function Fe(){return at}var J=p({},fl,{key:function(i){if(i.key){var c=P[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=vc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?se[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fe,charCode:function(i){return i.type==="keypress"?vc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?vc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xe=xa(J),Se=p({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ie=xa(Se),pe=p({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fe}),Ze=xa(pe),Ye=p({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ce=xa(Ye),rt=p({},wc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nr=xa(rt),vn=p({},Pi,{newState:0,oldState:0}),ns=xa(vn),as=[9,13,27,32],ea=Ws&&"CompositionEvent"in window,Fi=null;Ws&&"documentMode"in document&&(Fi=document.documentMode);var Am=Ws&&"TextEvent"in window&&!Fi,Hg=Ws&&(!ea||Fi&&8<Fi&&11>=Fi),qg=" ",ud=!1;function Ec(i,c){switch(i){case"keyup":return as.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _c(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Na=!1;function dd(i,c){switch(i){case"compositionend":return _c(c);case"keypress":return c.which!==32?null:(ud=!0,qg);case"textInput":return i=c.data,i===qg&&ud?null:i;default:return null}}function Lm(i,c){if(Na)return i==="compositionend"||!ea&&Ec(i,c)?(i=Bg(),yc=id=hi=null,Na=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Hg&&c.locale!=="ko"?null:c.data;default:return null}}var hd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $t(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!hd[i.type]:c==="textarea"}function V(i,c,g,m){mr?pn?pn.push(m):pn=[m]:mr=m,c=Rf(c,"onChange"),0<c.length&&(g=new kc("onChange","change",null,g,m),i.push({event:g,listeners:c}))}var In=null,mn=null;function ml(i){xE(i,0)}function Ui(i){var c=fr(i);if(bs(c))return i}function gd(i,c){if(i==="change")return c}var ss=!1;if(Ws){var Sc;if(Ws){var We="oninput"in document;if(!We){var be=document.createElement("div");be.setAttribute("oninput","return;"),We=typeof be.oninput=="function"}Sc=We}else Sc=!1;ss=Sc&&(!document.documentMode||9<document.documentMode)}function De(){In&&(In.detachEvent("onpropertychange",Nt),mn=In=null)}function Nt(i){if(i.propertyName==="value"&&Ui(mn)){var c=[];V(c,mn,i,Wt(i)),bc(ml,c)}}function Lt(i,c,g){i==="focusin"?(De(),In=c,mn=g,In.attachEvent("onpropertychange",Nt)):i==="focusout"&&De()}function nt(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ui(mn)}function Dr(i,c){if(i==="click")return Ui(c)}function Vn(i,c){if(i==="input"||i==="change")return Ui(c)}function _n(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var gr=typeof Object.is=="function"?Object.is:_n;function Fr(i,c){if(gr(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var g=Object.keys(i),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var v=g[m];if(!Dt.call(c,v)||!gr(i[v],c[v]))return!1}return!0}function Es(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Vr(i,c){var g=Es(i);i=0;for(var m;g;){if(g.nodeType===3){if(m=i+g.textContent.length,i<=c&&m>=c)return{node:g,offset:c-i};i=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Es(g)}}function Dn(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?Dn(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Vs(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=Ii(i.document);c instanceof i.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)i=c.contentWindow;else break;c=Ii(i.document)}return c}function jm(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}var DI=Ws&&"documentMode"in document&&11>=document.documentMode,Tc=null,Mm=null,fd=null,Rm=!1;function G2(i,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Rm||Tc==null||Tc!==Ii(m)||(m=Tc,"selectionStart"in m&&jm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),fd&&Fr(fd,m)||(fd=m,m=Rf(Mm,"onSelect"),0<m.length&&(c=new kc("onSelect","select",null,c,g),i.push({event:c,listeners:m}),c.target=Tc)))}function xl(i,c){var g={};return g[i.toLowerCase()]=c.toLowerCase(),g["Webkit"+i]="webkit"+c,g["Moz"+i]="moz"+c,g}var Cc={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},Om={},Y2={};Ws&&(Y2=document.createElement("div").style,"AnimationEvent"in window||(delete Cc.animationend.animation,delete Cc.animationiteration.animation,delete Cc.animationstart.animation),"TransitionEvent"in window||delete Cc.transitionend.transition);function bl(i){if(Om[i])return Om[i];if(!Cc[i])return i;var c=Cc[i],g;for(g in c)if(c.hasOwnProperty(g)&&g in Y2)return Om[i]=c[g];return i}var W2=bl("animationend"),V2=bl("animationiteration"),K2=bl("animationstart"),PI=bl("transitionrun"),BI=bl("transitionstart"),FI=bl("transitioncancel"),X2=bl("transitionend"),Q2=new Map,Im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Im.push("scrollEnd");function Ks(i,c){Q2.set(i,c),st(c,[i])}var Gg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_s=[],Nc=0,Dm=0;function Yg(){for(var i=Nc,c=Dm=Nc=0;c<i;){var g=_s[c];_s[c++]=null;var m=_s[c];_s[c++]=null;var v=_s[c];_s[c++]=null;var w=_s[c];if(_s[c++]=null,m!==null&&v!==null){var j=m.pending;j===null?v.next=v:(v.next=j.next,j.next=v),m.pending=v}w!==0&&Z2(g,v,w)}}function Wg(i,c,g,m){_s[Nc++]=i,_s[Nc++]=c,_s[Nc++]=g,_s[Nc++]=m,Dm|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function Pm(i,c,g,m){return Wg(i,c,g,m),Vg(i)}function yl(i,c){return Wg(i,null,null,c),Vg(i)}function Z2(i,c,g){i.lanes|=g;var m=i.alternate;m!==null&&(m.lanes|=g);for(var v=!1,w=i.return;w!==null;)w.childLanes|=g,m=w.alternate,m!==null&&(m.childLanes|=g),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(v=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,v&&c!==null&&(v=31-Yt(g),i=w.hiddenUpdates,m=i[v],m===null?i[v]=[c]:m.push(c),c.lane=g|536870912),w):null}function Vg(i){if(50<Dd)throw Dd=0,Yx=null,Error(n(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var Ac={};function UI(i,c,g,m){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(i,c,g,m){return new UI(i,c,g,m)}function Bm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $i(i,c){var g=i.alternate;return g===null?(g=is(i.tag,c,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=c,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&65011712,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,c=i.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g.refCleanup=i.refCleanup,g}function J2(i,c){i.flags&=65011714;var g=i.alternate;return g===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=g.childLanes,i.lanes=g.lanes,i.child=g.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=g.memoizedProps,i.memoizedState=g.memoizedState,i.updateQueue=g.updateQueue,i.type=g.type,c=g.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function Kg(i,c,g,m,v,w){var j=0;if(m=i,typeof i=="function")Bm(i)&&(j=1);else if(typeof i=="string")j=G5(i,g,H.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case Z:return i=is(31,g,c,v),i.elementType=Z,i.lanes=w,i;case k:return vl(g.children,v,w,c);case S:j=8,v|=24;break;case _:return i=is(12,g,c,v|2),i.elementType=_,i.lanes=w,i;case O:return i=is(13,g,c,v),i.elementType=O,i.lanes=w,i;case B:return i=is(19,g,c,v),i.elementType=B,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case A:j=10;break e;case T:j=9;break e;case I:j=11;break e;case F:j=14;break e;case ae:j=16,m=null;break e}j=29,g=Error(n(130,i===null?"null":typeof i,"")),m=null}return c=is(j,g,c,v),c.elementType=i,c.type=m,c.lanes=w,c}function vl(i,c,g,m){return i=is(7,i,m,c),i.lanes=g,i}function Fm(i,c,g){return i=is(6,i,null,c),i.lanes=g,i}function ek(i){var c=is(18,null,null,0);return c.stateNode=i,c}function Um(i,c,g){return c=is(4,i.children!==null?i.children:[],i.key,c),c.lanes=g,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}var tk=new WeakMap;function Ss(i,c){if(typeof i=="object"&&i!==null){var g=tk.get(i);return g!==void 0?g:(c={value:i,source:c,stack:rr(c)},tk.set(i,c),c)}return{value:i,source:c,stack:rr(c)}}var Lc=[],jc=0,Xg=null,pd=0,Ts=[],Cs=0,Eo=null,gi=1,fi="";function zi(i,c){Lc[jc++]=pd,Lc[jc++]=Xg,Xg=i,pd=c}function rk(i,c,g){Ts[Cs++]=gi,Ts[Cs++]=fi,Ts[Cs++]=Eo,Eo=i;var m=gi;i=fi;var v=32-Yt(m)-1;m&=~(1<<v),g+=1;var w=32-Yt(c)+v;if(30<w){var j=v-v%5;w=(m&(1<<j)-1).toString(32),m>>=j,v-=j,gi=1<<32-Yt(c)+v|g<<v|m,fi=w+i}else gi=1<<w|g<<v|m,fi=i}function $m(i){i.return!==null&&(zi(i,1),rk(i,1,0))}function zm(i){for(;i===Xg;)Xg=Lc[--jc],Lc[jc]=null,pd=Lc[--jc],Lc[jc]=null;for(;i===Eo;)Eo=Ts[--Cs],Ts[Cs]=null,fi=Ts[--Cs],Ts[Cs]=null,gi=Ts[--Cs],Ts[Cs]=null}function nk(i,c){Ts[Cs++]=gi,Ts[Cs++]=fi,Ts[Cs++]=Eo,gi=c.id,fi=c.overflow,Eo=i}var ia=null,xn=null,Lr=!1,_o=null,Ns=!1,Hm=Error(n(519));function So(i){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw md(Ss(c,i)),Hm}function ak(i){var c=i.stateNode,g=i.type,m=i.memoizedProps;switch(c[Pr]=i,c[Rr]=m,g){case"dialog":kr("cancel",c),kr("close",c);break;case"iframe":case"object":case"embed":kr("load",c);break;case"video":case"audio":for(g=0;g<Bd.length;g++)kr(Bd[g],c);break;case"source":kr("error",c);break;case"img":case"image":case"link":kr("error",c),kr("load",c);break;case"details":kr("toggle",c);break;case"input":kr("invalid",c),vs(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":kr("invalid",c);break;case"textarea":kr("invalid",c),qs(c,m.value,m.defaultValue,m.children)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||kE(c.textContent,g)?(m.popover!=null&&(kr("beforetoggle",c),kr("toggle",c)),m.onScroll!=null&&kr("scroll",c),m.onScrollEnd!=null&&kr("scrollend",c),m.onClick!=null&&(c.onclick=tt),c=!0):c=!1,c||So(i,!0)}function sk(i){for(ia=i.return;ia;)switch(ia.tag){case 5:case 31:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:ia=ia.return}}function Mc(i){if(i!==ia)return!1;if(!Lr)return sk(i),Lr=!0,!1;var c=i.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=i.type,g=!(g!=="form"&&g!=="button")||ob(i.type,i.memoizedProps)),g=!g),g&&xn&&So(i),sk(i),c===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xn=LE(i)}else if(c===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));xn=LE(i)}else c===27?(c=xn,Fo(i.type)?(i=hb,hb=null,xn=i):xn=c):xn=ia?Ls(i.stateNode.nextSibling):null;return!0}function kl(){xn=ia=null,Lr=!1}function qm(){var i=_o;return i!==null&&(qa===null?qa=i:qa.push.apply(qa,i),_o=null),i}function md(i){_o===null?_o=[i]:_o.push(i)}var Gm=M(null),wl=null,Hi=null;function To(i,c,g){R(Gm,c._currentValue),c._currentValue=g}function qi(i){i._currentValue=Gm.current,Y(Gm)}function Ym(i,c,g){for(;i!==null;){var m=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),i===g)break;i=i.return}}function Wm(i,c,g,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var w=v.dependencies;if(w!==null){var j=v.child;w=w.firstContext;e:for(;w!==null;){var G=w;w=v;for(var ue=0;ue<c.length;ue++)if(G.context===c[ue]){w.lanes|=g,G=w.alternate,G!==null&&(G.lanes|=g),Ym(w.return,g,i),m||(j=null);break e}w=G.next}}else if(v.tag===18){if(j=v.return,j===null)throw Error(n(341));j.lanes|=g,w=j.alternate,w!==null&&(w.lanes|=g),Ym(j,g,i),j=null}else j=v.child;if(j!==null)j.return=v;else for(j=v;j!==null;){if(j===i){j=null;break}if(v=j.sibling,v!==null){v.return=j.return,j=v;break}j=j.return}v=j}}function Rc(i,c,g,m){i=null;for(var v=c,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var j=v.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var G=v.type;gr(v.pendingProps.value,j.value)||(i!==null?i.push(G):i=[G])}}else if(v===fe.current){if(j=v.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Hd):i=[Hd])}v=v.return}i!==null&&Wm(c,i,g,m),c.flags|=262144}function Qg(i){for(i=i.firstContext;i!==null;){if(!gr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function El(i){wl=i,Hi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function oa(i){return ik(wl,i)}function Zg(i,c){return wl===null&&El(i),ik(i,c)}function ik(i,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},Hi===null){if(i===null)throw Error(n(308));Hi=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else Hi=Hi.next=c;return g}var $I=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(g,m){i.push(m)}};this.abort=function(){c.aborted=!0,i.forEach(function(g){return g()})}},zI=e.unstable_scheduleCallback,HI=e.unstable_NormalPriority,Pn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vm(){return{controller:new $I,data:new Map,refCount:0}}function xd(i){i.refCount--,i.refCount===0&&zI(HI,function(){i.controller.abort()})}var bd=null,Km=0,Oc=0,Ic=null;function qI(i,c){if(bd===null){var g=bd=[];Km=0,Oc=Zx(),Ic={status:"pending",value:void 0,then:function(m){g.push(m)}}}return Km++,c.then(ok,ok),c}function ok(){if(--Km===0&&bd!==null){Ic!==null&&(Ic.status="fulfilled");var i=bd;bd=null,Oc=0,Ic=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function GI(i,c){var g=[],m={status:"pending",value:null,reason:null,then:function(v){g.push(v)}};return i.then(function(){m.status="fulfilled",m.value=c;for(var v=0;v<g.length;v++)(0,g[v])(c)},function(v){for(m.status="rejected",m.reason=v,v=0;v<g.length;v++)(0,g[v])(void 0)}),m}var lk=D.S;D.S=function(i,c){Gw=Ut(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&qI(i,c),lk!==null&&lk(i,c)};var _l=M(null);function Xm(){var i=_l.current;return i!==null?i:an.pooledCache}function Jg(i,c){c===null?R(_l,_l.current):R(_l,c.pool)}function ck(){var i=Xm();return i===null?null:{parent:Pn._currentValue,pool:i}}var Dc=Error(n(460)),Qm=Error(n(474)),ef=Error(n(542)),tf={then:function(){}};function uk(i){return i=i.status,i==="fulfilled"||i==="rejected"}function dk(i,c,g){switch(g=i[g],g===void 0?i.push(c):g!==c&&(c.then(tt,tt),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,gk(i),i;default:if(typeof c.status=="string")c.then(tt,tt);else{if(i=an,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=c,i.status="pending",i.then(function(m){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=m}},function(m){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,gk(i),i}throw Tl=c,Dc}}function Sl(i){try{var c=i._init;return c(i._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Tl=g,Dc):g}}var Tl=null;function hk(){if(Tl===null)throw Error(n(459));var i=Tl;return Tl=null,i}function gk(i){if(i===Dc||i===ef)throw Error(n(483))}var Pc=null,yd=0;function rf(i){var c=yd;return yd+=1,Pc===null&&(Pc=[]),dk(Pc,i,c)}function vd(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function nf(i,c){throw c.$$typeof===x?Error(n(525)):(i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function fk(i){function c(me,ge){if(i){var Ee=me.deletions;Ee===null?(me.deletions=[ge],me.flags|=16):Ee.push(ge)}}function g(me,ge){if(!i)return null;for(;ge!==null;)c(me,ge),ge=ge.sibling;return null}function m(me){for(var ge=new Map;me!==null;)me.key!==null?ge.set(me.key,me):ge.set(me.index,me),me=me.sibling;return ge}function v(me,ge){return me=$i(me,ge),me.index=0,me.sibling=null,me}function w(me,ge,Ee){return me.index=Ee,i?(Ee=me.alternate,Ee!==null?(Ee=Ee.index,Ee<ge?(me.flags|=67108866,ge):Ee):(me.flags|=67108866,ge)):(me.flags|=1048576,ge)}function j(me){return i&&me.alternate===null&&(me.flags|=67108866),me}function G(me,ge,Ee,Pe){return ge===null||ge.tag!==6?(ge=Fm(Ee,me.mode,Pe),ge.return=me,ge):(ge=v(ge,Ee),ge.return=me,ge)}function ue(me,ge,Ee,Pe){var Mt=Ee.type;return Mt===k?Oe(me,ge,Ee.props.children,Pe,Ee.key):ge!==null&&(ge.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ae&&Sl(Mt)===ge.type)?(ge=v(ge,Ee.props),vd(ge,Ee),ge.return=me,ge):(ge=Kg(Ee.type,Ee.key,Ee.props,null,me.mode,Pe),vd(ge,Ee),ge.return=me,ge)}function _e(me,ge,Ee,Pe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ee.containerInfo||ge.stateNode.implementation!==Ee.implementation?(ge=Um(Ee,me.mode,Pe),ge.return=me,ge):(ge=v(ge,Ee.children||[]),ge.return=me,ge)}function Oe(me,ge,Ee,Pe,Mt){return ge===null||ge.tag!==7?(ge=vl(Ee,me.mode,Pe,Mt),ge.return=me,ge):(ge=v(ge,Ee),ge.return=me,ge)}function Ue(me,ge,Ee){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Fm(""+ge,me.mode,Ee),ge.return=me,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return Ee=Kg(ge.type,ge.key,ge.props,null,me.mode,Ee),vd(Ee,ge),Ee.return=me,Ee;case y:return ge=Um(ge,me.mode,Ee),ge.return=me,ge;case ae:return ge=Sl(ge),Ue(me,ge,Ee)}if(q(ge)||W(ge))return ge=vl(ge,me.mode,Ee,null),ge.return=me,ge;if(typeof ge.then=="function")return Ue(me,rf(ge),Ee);if(ge.$$typeof===A)return Ue(me,Zg(me,ge),Ee);nf(me,ge)}return null}function Te(me,ge,Ee,Pe){var Mt=ge!==null?ge.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Mt!==null?null:G(me,ge,""+Ee,Pe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:return Ee.key===Mt?ue(me,ge,Ee,Pe):null;case y:return Ee.key===Mt?_e(me,ge,Ee,Pe):null;case ae:return Ee=Sl(Ee),Te(me,ge,Ee,Pe)}if(q(Ee)||W(Ee))return Mt!==null?null:Oe(me,ge,Ee,Pe,null);if(typeof Ee.then=="function")return Te(me,ge,rf(Ee),Pe);if(Ee.$$typeof===A)return Te(me,ge,Zg(me,Ee),Pe);nf(me,Ee)}return null}function Le(me,ge,Ee,Pe,Mt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return me=me.get(Ee)||null,G(ge,me,""+Pe,Mt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case b:return me=me.get(Pe.key===null?Ee:Pe.key)||null,ue(ge,me,Pe,Mt);case y:return me=me.get(Pe.key===null?Ee:Pe.key)||null,_e(ge,me,Pe,Mt);case ae:return Pe=Sl(Pe),Le(me,ge,Ee,Pe,Mt)}if(q(Pe)||W(Pe))return me=me.get(Ee)||null,Oe(ge,me,Pe,Mt,null);if(typeof Pe.then=="function")return Le(me,ge,Ee,rf(Pe),Mt);if(Pe.$$typeof===A)return Le(me,ge,Ee,Zg(ge,Pe),Mt);nf(ge,Pe)}return null}function xt(me,ge,Ee,Pe){for(var Mt=null,Ur=null,_t=ge,ur=ge=0,Ar=null;_t!==null&&ur<Ee.length;ur++){_t.index>ur?(Ar=_t,_t=null):Ar=_t.sibling;var $r=Te(me,_t,Ee[ur],Pe);if($r===null){_t===null&&(_t=Ar);break}i&&_t&&$r.alternate===null&&c(me,_t),ge=w($r,ge,ur),Ur===null?Mt=$r:Ur.sibling=$r,Ur=$r,_t=Ar}if(ur===Ee.length)return g(me,_t),Lr&&zi(me,ur),Mt;if(_t===null){for(;ur<Ee.length;ur++)_t=Ue(me,Ee[ur],Pe),_t!==null&&(ge=w(_t,ge,ur),Ur===null?Mt=_t:Ur.sibling=_t,Ur=_t);return Lr&&zi(me,ur),Mt}for(_t=m(_t);ur<Ee.length;ur++)Ar=Le(_t,me,ur,Ee[ur],Pe),Ar!==null&&(i&&Ar.alternate!==null&&_t.delete(Ar.key===null?ur:Ar.key),ge=w(Ar,ge,ur),Ur===null?Mt=Ar:Ur.sibling=Ar,Ur=Ar);return i&&_t.forEach(function(qo){return c(me,qo)}),Lr&&zi(me,ur),Mt}function Bt(me,ge,Ee,Pe){if(Ee==null)throw Error(n(151));for(var Mt=null,Ur=null,_t=ge,ur=ge=0,Ar=null,$r=Ee.next();_t!==null&&!$r.done;ur++,$r=Ee.next()){_t.index>ur?(Ar=_t,_t=null):Ar=_t.sibling;var qo=Te(me,_t,$r.value,Pe);if(qo===null){_t===null&&(_t=Ar);break}i&&_t&&qo.alternate===null&&c(me,_t),ge=w(qo,ge,ur),Ur===null?Mt=qo:Ur.sibling=qo,Ur=qo,_t=Ar}if($r.done)return g(me,_t),Lr&&zi(me,ur),Mt;if(_t===null){for(;!$r.done;ur++,$r=Ee.next())$r=Ue(me,$r.value,Pe),$r!==null&&(ge=w($r,ge,ur),Ur===null?Mt=$r:Ur.sibling=$r,Ur=$r);return Lr&&zi(me,ur),Mt}for(_t=m(_t);!$r.done;ur++,$r=Ee.next())$r=Le(_t,me,ur,$r.value,Pe),$r!==null&&(i&&$r.alternate!==null&&_t.delete($r.key===null?ur:$r.key),ge=w($r,ge,ur),Ur===null?Mt=$r:Ur.sibling=$r,Ur=$r);return i&&_t.forEach(function(r6){return c(me,r6)}),Lr&&zi(me,ur),Mt}function en(me,ge,Ee,Pe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===k&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:e:{for(var Mt=Ee.key;ge!==null;){if(ge.key===Mt){if(Mt=Ee.type,Mt===k){if(ge.tag===7){g(me,ge.sibling),Pe=v(ge,Ee.props.children),Pe.return=me,me=Pe;break e}}else if(ge.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===ae&&Sl(Mt)===ge.type){g(me,ge.sibling),Pe=v(ge,Ee.props),vd(Pe,Ee),Pe.return=me,me=Pe;break e}g(me,ge);break}else c(me,ge);ge=ge.sibling}Ee.type===k?(Pe=vl(Ee.props.children,me.mode,Pe,Ee.key),Pe.return=me,me=Pe):(Pe=Kg(Ee.type,Ee.key,Ee.props,null,me.mode,Pe),vd(Pe,Ee),Pe.return=me,me=Pe)}return j(me);case y:e:{for(Mt=Ee.key;ge!==null;){if(ge.key===Mt)if(ge.tag===4&&ge.stateNode.containerInfo===Ee.containerInfo&&ge.stateNode.implementation===Ee.implementation){g(me,ge.sibling),Pe=v(ge,Ee.children||[]),Pe.return=me,me=Pe;break e}else{g(me,ge);break}else c(me,ge);ge=ge.sibling}Pe=Um(Ee,me.mode,Pe),Pe.return=me,me=Pe}return j(me);case ae:return Ee=Sl(Ee),en(me,ge,Ee,Pe)}if(q(Ee))return xt(me,ge,Ee,Pe);if(W(Ee)){if(Mt=W(Ee),typeof Mt!="function")throw Error(n(150));return Ee=Mt.call(Ee),Bt(me,ge,Ee,Pe)}if(typeof Ee.then=="function")return en(me,ge,rf(Ee),Pe);if(Ee.$$typeof===A)return en(me,ge,Zg(me,Ee),Pe);nf(me,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,ge!==null&&ge.tag===6?(g(me,ge.sibling),Pe=v(ge,Ee),Pe.return=me,me=Pe):(g(me,ge),Pe=Fm(Ee,me.mode,Pe),Pe.return=me,me=Pe),j(me)):g(me,ge)}return function(me,ge,Ee,Pe){try{yd=0;var Mt=en(me,ge,Ee,Pe);return Pc=null,Mt}catch(_t){if(_t===Dc||_t===ef)throw _t;var Ur=is(29,_t,null,me.mode);return Ur.lanes=Pe,Ur.return=me,Ur}finally{}}}var Cl=fk(!0),pk=fk(!1),Co=!1;function Zm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jm(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function No(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ao(i,c,g){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(qr&2)!==0){var v=m.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),m.pending=c,c=Vg(i),Z2(i,null,g),c}return Wg(i,m,c,g),Vg(i)}function kd(i,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=i.pendingLanes,g|=m,c.lanes=g,At(i,g)}}function ex(i,c){var g=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var v=null,w=null;if(g=g.firstBaseUpdate,g!==null){do{var j={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};w===null?v=w=j:w=w.next=j,g=g.next}while(g!==null);w===null?v=w=c:w=w.next=c}else v=w=c;g={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=c:i.next=c,g.lastBaseUpdate=c}var tx=!1;function wd(){if(tx){var i=Ic;if(i!==null)throw i}}function Ed(i,c,g,m){tx=!1;var v=i.updateQueue;Co=!1;var w=v.firstBaseUpdate,j=v.lastBaseUpdate,G=v.shared.pending;if(G!==null){v.shared.pending=null;var ue=G,_e=ue.next;ue.next=null,j===null?w=_e:j.next=_e,j=ue;var Oe=i.alternate;Oe!==null&&(Oe=Oe.updateQueue,G=Oe.lastBaseUpdate,G!==j&&(G===null?Oe.firstBaseUpdate=_e:G.next=_e,Oe.lastBaseUpdate=ue))}if(w!==null){var Ue=v.baseState;j=0,Oe=_e=ue=null,G=w;do{var Te=G.lane&-536870913,Le=Te!==G.lane;if(Le?(Nr&Te)===Te:(m&Te)===Te){Te!==0&&Te===Oc&&(tx=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var xt=i,Bt=G;Te=c;var en=g;switch(Bt.tag){case 1:if(xt=Bt.payload,typeof xt=="function"){Ue=xt.call(en,Ue,Te);break e}Ue=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Bt.payload,Te=typeof xt=="function"?xt.call(en,Ue,Te):xt,Te==null)break e;Ue=p({},Ue,Te);break e;case 2:Co=!0}}Te=G.callback,Te!==null&&(i.flags|=64,Le&&(i.flags|=8192),Le=v.callbacks,Le===null?v.callbacks=[Te]:Le.push(Te))}else Le={lane:Te,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Oe===null?(_e=Oe=Le,ue=Ue):Oe=Oe.next=Le,j|=Te;if(G=G.next,G===null){if(G=v.shared.pending,G===null)break;Le=G,G=Le.next,Le.next=null,v.lastBaseUpdate=Le,v.shared.pending=null}}while(!0);Oe===null&&(ue=Ue),v.baseState=ue,v.firstBaseUpdate=_e,v.lastBaseUpdate=Oe,w===null&&(v.shared.lanes=0),Oo|=j,i.lanes=j,i.memoizedState=Ue}}function mk(i,c){if(typeof i!="function")throw Error(n(191,i));i.call(c)}function xk(i,c){var g=i.callbacks;if(g!==null)for(i.callbacks=null,i=0;i<g.length;i++)mk(g[i],c)}var Bc=M(null),af=M(0);function bk(i,c){i=Ji,R(af,i),R(Bc,c),Ji=i|c.baseLanes}function rx(){R(af,Ji),R(Bc,Bc.current)}function nx(){Ji=af.current,Y(Bc),Y(af)}var os=M(null),As=null;function Lo(i){var c=i.alternate;R(Ln,Ln.current&1),R(os,i),As===null&&(c===null||Bc.current!==null||c.memoizedState!==null)&&(As=i)}function ax(i){R(Ln,Ln.current),R(os,i),As===null&&(As=i)}function yk(i){i.tag===22?(R(Ln,Ln.current),R(os,i),As===null&&(As=i)):jo()}function jo(){R(Ln,Ln.current),R(os,os.current)}function ls(i){Y(os),As===i&&(As=null),Y(Ln)}var Ln=M(0);function sf(i){for(var c=i;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||ub(g)||db(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Gi=0,or=null,Zr=null,Bn=null,of=!1,Fc=!1,Nl=!1,lf=0,_d=0,Uc=null,YI=0;function Nn(){throw Error(n(321))}function sx(i,c){if(c===null)return!1;for(var g=0;g<c.length&&g<i.length;g++)if(!gr(i[g],c[g]))return!1;return!0}function ix(i,c,g,m,v,w){return Gi=w,or=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,D.H=i===null||i.memoizedState===null?rw:kx,Nl=!1,w=g(m,v),Nl=!1,Fc&&(w=kk(c,g,m,v)),vk(i),w}function vk(i){D.H=Cd;var c=Zr!==null&&Zr.next!==null;if(Gi=0,Bn=Zr=or=null,of=!1,_d=0,Uc=null,c)throw Error(n(300));i===null||Fn||(i=i.dependencies,i!==null&&Qg(i)&&(Fn=!0))}function kk(i,c,g,m){or=i;var v=0;do{if(Fc&&(Uc=null),_d=0,Fc=!1,25<=v)throw Error(n(301));if(v+=1,Bn=Zr=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}D.H=nw,w=c(g,m)}while(Fc);return w}function WI(){var i=D.H,c=i.useState()[0];return c=typeof c.then=="function"?Sd(c):c,i=i.useState()[0],(Zr!==null?Zr.memoizedState:null)!==i&&(or.flags|=1024),c}function ox(){var i=lf!==0;return lf=0,i}function lx(i,c,g){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~g}function cx(i){if(of){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}of=!1}Gi=0,Bn=Zr=or=null,Fc=!1,_d=lf=0,Uc=null}function Aa(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?or.memoizedState=Bn=i:Bn=Bn.next=i,Bn}function jn(){if(Zr===null){var i=or.alternate;i=i!==null?i.memoizedState:null}else i=Zr.next;var c=Bn===null?or.memoizedState:Bn.next;if(c!==null)Bn=c,Zr=i;else{if(i===null)throw or.alternate===null?Error(n(467)):Error(n(310));Zr=i,i={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},Bn===null?or.memoizedState=Bn=i:Bn=Bn.next=i}return Bn}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sd(i){var c=_d;return _d+=1,Uc===null&&(Uc=[]),i=dk(Uc,i,c),c=or,(Bn===null?c.memoizedState:Bn.next)===null&&(c=c.alternate,D.H=c===null||c.memoizedState===null?rw:kx),i}function uf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Sd(i);if(i.$$typeof===A)return oa(i)}throw Error(n(438,String(i)))}function ux(i){var c=null,g=or.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=or.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=cf(),or.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(i),m=0;m<i;m++)g[m]=z;return c.index++,g}function Yi(i,c){return typeof c=="function"?c(i):c}function df(i){var c=jn();return dx(c,Zr,i)}function dx(i,c,g){var m=i.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=g;var v=i.baseQueue,w=m.pending;if(w!==null){if(v!==null){var j=v.next;v.next=w.next,w.next=j}c.baseQueue=v=w,m.pending=null}if(w=i.baseState,v===null)i.memoizedState=w;else{c=v.next;var G=j=null,ue=null,_e=c,Oe=!1;do{var Ue=_e.lane&-536870913;if(Ue!==_e.lane?(Nr&Ue)===Ue:(Gi&Ue)===Ue){var Te=_e.revertLane;if(Te===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Ue===Oc&&(Oe=!0);else if((Gi&Te)===Te){_e=_e.next,Te===Oc&&(Oe=!0);continue}else Ue={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(G=ue=Ue,j=w):ue=ue.next=Ue,or.lanes|=Te,Oo|=Te;Ue=_e.action,Nl&&g(w,Ue),w=_e.hasEagerState?_e.eagerState:g(w,Ue)}else Te={lane:Ue,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(G=ue=Te,j=w):ue=ue.next=Te,or.lanes|=Ue,Oo|=Ue;_e=_e.next}while(_e!==null&&_e!==c);if(ue===null?j=w:ue.next=G,!gr(w,i.memoizedState)&&(Fn=!0,Oe&&(g=Ic,g!==null)))throw g;i.memoizedState=w,i.baseState=j,i.baseQueue=ue,m.lastRenderedState=w}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function hx(i){var c=jn(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var m=g.dispatch,v=g.pending,w=c.memoizedState;if(v!==null){g.pending=null;var j=v=v.next;do w=i(w,j.action),j=j.next;while(j!==v);gr(w,c.memoizedState)||(Fn=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),g.lastRenderedState=w}return[w,m]}function wk(i,c,g){var m=or,v=jn(),w=Lr;if(w){if(g===void 0)throw Error(n(407));g=g()}else g=c();var j=!gr((Zr||v).memoizedState,g);if(j&&(v.memoizedState=g,Fn=!0),v=v.queue,px(Sk.bind(null,m,v,i),[i]),v.getSnapshot!==c||j||Bn!==null&&Bn.memoizedState.tag&1){if(m.flags|=2048,$c(9,{destroy:void 0},_k.bind(null,m,v,g,c),null),an===null)throw Error(n(349));w||(Gi&127)!==0||Ek(m,c,g)}return g}function Ek(i,c,g){i.flags|=16384,i={getSnapshot:c,value:g},c=or.updateQueue,c===null?(c=cf(),or.updateQueue=c,c.stores=[i]):(g=c.stores,g===null?c.stores=[i]:g.push(i))}function _k(i,c,g,m){c.value=g,c.getSnapshot=m,Tk(c)&&Ck(i)}function Sk(i,c,g){return g(function(){Tk(c)&&Ck(i)})}function Tk(i){var c=i.getSnapshot;i=i.value;try{var g=c();return!gr(i,g)}catch{return!0}}function Ck(i){var c=yl(i,2);c!==null&&Ga(c,i,2)}function gx(i){var c=Aa();if(typeof i=="function"){var g=i;if(i=g(),Nl){pr(!0);try{g()}finally{pr(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:i},c}function Nk(i,c,g,m){return i.baseState=g,dx(i,Zr,typeof m=="function"?m:Yi)}function VI(i,c,g,m,v){if(ff(i))throw Error(n(485));if(i=c.action,i!==null){var w={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){w.listeners.push(j)}};D.T!==null?g(!0):w.isTransition=!1,m(w),g=c.pending,g===null?(w.next=c.pending=w,Ak(c,w)):(w.next=g.next,c.pending=g.next=w)}}function Ak(i,c){var g=c.action,m=c.payload,v=i.state;if(c.isTransition){var w=D.T,j={};D.T=j;try{var G=g(v,m),ue=D.S;ue!==null&&ue(j,G),Lk(i,c,G)}catch(_e){fx(i,c,_e)}finally{w!==null&&j.types!==null&&(w.types=j.types),D.T=w}}else try{w=g(v,m),Lk(i,c,w)}catch(_e){fx(i,c,_e)}}function Lk(i,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){jk(i,c,m)},function(m){return fx(i,c,m)}):jk(i,c,g)}function jk(i,c,g){c.status="fulfilled",c.value=g,Mk(c),i.state=g,c=i.pending,c!==null&&(g=c.next,g===c?i.pending=null:(g=g.next,c.next=g,Ak(i,g)))}function fx(i,c,g){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,Mk(c),c=c.next;while(c!==m)}i.action=null}function Mk(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function Rk(i,c){return c}function Ok(i,c){if(Lr){var g=an.formState;if(g!==null){e:{var m=or;if(Lr){if(xn){t:{for(var v=xn,w=Ns;v.nodeType!==8;){if(!w){v=null;break t}if(v=Ls(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){xn=Ls(v.nextSibling),m=v.data==="F!";break e}}So(m)}m=!1}m&&(c=g[0])}}return g=Aa(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rk,lastRenderedState:c},g.queue=m,g=Jk.bind(null,or,m),m.dispatch=g,m=gx(!1),w=vx.bind(null,or,!1,m.queue),m=Aa(),v={state:c,dispatch:null,action:i,pending:null},m.queue=v,g=VI.bind(null,or,v,w,g),v.dispatch=g,m.memoizedState=i,[c,g,!1]}function Ik(i){var c=jn();return Dk(c,Zr,i)}function Dk(i,c,g){if(c=dx(i,c,Rk)[0],i=df(Yi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Sd(c)}catch(j){throw j===Dc?ef:j}else m=c;c=jn();var v=c.queue,w=v.dispatch;return g!==c.memoizedState&&(or.flags|=2048,$c(9,{destroy:void 0},KI.bind(null,v,g),null)),[m,w,i]}function KI(i,c){i.action=c}function Pk(i){var c=jn(),g=Zr;if(g!==null)return Dk(c,g,i);jn(),c=c.memoizedState,g=jn();var m=g.queue.dispatch;return g.memoizedState=i,[c,m,!1]}function $c(i,c,g,m){return i={tag:i,create:g,deps:m,inst:c,next:null},c=or.updateQueue,c===null&&(c=cf(),or.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=i.next=i:(m=g.next,g.next=i,i.next=m,c.lastEffect=i),i}function Bk(){return jn().memoizedState}function hf(i,c,g,m){var v=Aa();or.flags|=i,v.memoizedState=$c(1|c,{destroy:void 0},g,m===void 0?null:m)}function gf(i,c,g,m){var v=jn();m=m===void 0?null:m;var w=v.memoizedState.inst;Zr!==null&&m!==null&&sx(m,Zr.memoizedState.deps)?v.memoizedState=$c(c,w,g,m):(or.flags|=i,v.memoizedState=$c(1|c,w,g,m))}function Fk(i,c){hf(8390656,8,i,c)}function px(i,c){gf(2048,8,i,c)}function XI(i){or.flags|=4;var c=or.updateQueue;if(c===null)c=cf(),or.updateQueue=c,c.events=[i];else{var g=c.events;g===null?c.events=[i]:g.push(i)}}function Uk(i){var c=jn().memoizedState;return XI({ref:c,nextImpl:i}),function(){if((qr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function $k(i,c){return gf(4,2,i,c)}function zk(i,c){return gf(4,4,i,c)}function Hk(i,c){if(typeof c=="function"){i=i();var g=c(i);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function qk(i,c,g){g=g!=null?g.concat([i]):null,gf(4,4,Hk.bind(null,c,i),g)}function mx(){}function Gk(i,c){var g=jn();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&sx(c,m[1])?m[0]:(g.memoizedState=[i,c],i)}function Yk(i,c){var g=jn();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&sx(c,m[1]))return m[0];if(m=i(),Nl){pr(!0);try{i()}finally{pr(!1)}}return g.memoizedState=[m,c],m}function xx(i,c,g){return g===void 0||(Gi&1073741824)!==0&&(Nr&261930)===0?i.memoizedState=c:(i.memoizedState=g,i=Ww(),or.lanes|=i,Oo|=i,g)}function Wk(i,c,g,m){return gr(g,c)?g:Bc.current!==null?(i=xx(i,g,m),gr(i,c)||(Fn=!0),i):(Gi&42)===0||(Gi&1073741824)!==0&&(Nr&261930)===0?(Fn=!0,i.memoizedState=g):(i=Ww(),or.lanes|=i,Oo|=i,c)}function Vk(i,c,g,m,v){var w=X.p;X.p=w!==0&&8>w?w:8;var j=D.T,G={};D.T=G,vx(i,!1,c,g);try{var ue=v(),_e=D.S;if(_e!==null&&_e(G,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Oe=GI(ue,m);Td(i,c,Oe,ds(i))}else Td(i,c,m,ds(i))}catch(Ue){Td(i,c,{then:function(){},status:"rejected",reason:Ue},ds())}finally{X.p=w,j!==null&&G.types!==null&&(j.types=G.types),D.T=j}}function QI(){}function bx(i,c,g,m){if(i.tag!==5)throw Error(n(476));var v=Kk(i).queue;Vk(i,v,c,K,g===null?QI:function(){return Xk(i),g(m)})}function Kk(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:K},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:g},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function Xk(i){var c=Kk(i);c.next===null&&(c=i.alternate.memoizedState),Td(i,c.next.queue,{},ds())}function yx(){return oa(Hd)}function Qk(){return jn().memoizedState}function Zk(){return jn().memoizedState}function ZI(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var g=ds();i=No(g);var m=Ao(c,i,g);m!==null&&(Ga(m,c,g),kd(m,c,g)),c={cache:Vm()},i.payload=c;return}c=c.return}}function JI(i,c,g){var m=ds();g={lane:m,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ff(i)?ew(c,g):(g=Pm(i,c,g,m),g!==null&&(Ga(g,i,m),tw(g,c,m)))}function Jk(i,c,g){var m=ds();Td(i,c,g,m)}function Td(i,c,g,m){var v={lane:m,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(ff(i))ew(c,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var j=c.lastRenderedState,G=w(j,g);if(v.hasEagerState=!0,v.eagerState=G,gr(G,j))return Wg(i,c,v,0),an===null&&Yg(),!1}catch{}finally{}if(g=Pm(i,c,v,m),g!==null)return Ga(g,i,m),tw(g,c,m),!0}return!1}function vx(i,c,g,m){if(m={lane:2,revertLane:Zx(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ff(i)){if(c)throw Error(n(479))}else c=Pm(i,g,m,2),c!==null&&Ga(c,i,2)}function ff(i){var c=i.alternate;return i===or||c!==null&&c===or}function ew(i,c){Fc=of=!0;var g=i.pending;g===null?c.next=c:(c.next=g.next,g.next=c),i.pending=c}function tw(i,c,g){if((g&4194048)!==0){var m=c.lanes;m&=i.pendingLanes,g|=m,c.lanes=g,At(i,g)}}var Cd={readContext:oa,use:uf,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn};Cd.useEffectEvent=Nn;var rw={readContext:oa,use:uf,useCallback:function(i,c){return Aa().memoizedState=[i,c===void 0?null:c],i},useContext:oa,useEffect:Fk,useImperativeHandle:function(i,c,g){g=g!=null?g.concat([i]):null,hf(4194308,4,Hk.bind(null,c,i),g)},useLayoutEffect:function(i,c){return hf(4194308,4,i,c)},useInsertionEffect:function(i,c){hf(4,2,i,c)},useMemo:function(i,c){var g=Aa();c=c===void 0?null:c;var m=i();if(Nl){pr(!0);try{i()}finally{pr(!1)}}return g.memoizedState=[m,c],m},useReducer:function(i,c,g){var m=Aa();if(g!==void 0){var v=g(c);if(Nl){pr(!0);try{g(c)}finally{pr(!1)}}}else v=c;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=JI.bind(null,or,i),[m.memoizedState,i]},useRef:function(i){var c=Aa();return i={current:i},c.memoizedState=i},useState:function(i){i=gx(i);var c=i.queue,g=Jk.bind(null,or,c);return c.dispatch=g,[i.memoizedState,g]},useDebugValue:mx,useDeferredValue:function(i,c){var g=Aa();return xx(g,i,c)},useTransition:function(){var i=gx(!1);return i=Vk.bind(null,or,i.queue,!0,!1),Aa().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,g){var m=or,v=Aa();if(Lr){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),an===null)throw Error(n(349));(Nr&127)!==0||Ek(m,c,g)}v.memoizedState=g;var w={value:g,getSnapshot:c};return v.queue=w,Fk(Sk.bind(null,m,w,i),[i]),m.flags|=2048,$c(9,{destroy:void 0},_k.bind(null,m,w,g,c),null),g},useId:function(){var i=Aa(),c=an.identifierPrefix;if(Lr){var g=fi,m=gi;g=(m&~(1<<32-Yt(m)-1)).toString(32)+g,c="_"+c+"R_"+g,g=lf++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=YI++,c="_"+c+"r_"+g.toString(32)+"_";return i.memoizedState=c},useHostTransitionStatus:yx,useFormState:Ok,useActionState:Ok,useOptimistic:function(i){var c=Aa();c.memoizedState=c.baseState=i;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=vx.bind(null,or,!0,g),g.dispatch=c,[i,c]},useMemoCache:ux,useCacheRefresh:function(){return Aa().memoizedState=ZI.bind(null,or)},useEffectEvent:function(i){var c=Aa(),g={impl:i};return c.memoizedState=g,function(){if((qr&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},kx={readContext:oa,use:uf,useCallback:Gk,useContext:oa,useEffect:px,useImperativeHandle:qk,useInsertionEffect:$k,useLayoutEffect:zk,useMemo:Yk,useReducer:df,useRef:Bk,useState:function(){return df(Yi)},useDebugValue:mx,useDeferredValue:function(i,c){var g=jn();return Wk(g,Zr.memoizedState,i,c)},useTransition:function(){var i=df(Yi)[0],c=jn().memoizedState;return[typeof i=="boolean"?i:Sd(i),c]},useSyncExternalStore:wk,useId:Qk,useHostTransitionStatus:yx,useFormState:Ik,useActionState:Ik,useOptimistic:function(i,c){var g=jn();return Nk(g,Zr,i,c)},useMemoCache:ux,useCacheRefresh:Zk};kx.useEffectEvent=Uk;var nw={readContext:oa,use:uf,useCallback:Gk,useContext:oa,useEffect:px,useImperativeHandle:qk,useInsertionEffect:$k,useLayoutEffect:zk,useMemo:Yk,useReducer:hx,useRef:Bk,useState:function(){return hx(Yi)},useDebugValue:mx,useDeferredValue:function(i,c){var g=jn();return Zr===null?xx(g,i,c):Wk(g,Zr.memoizedState,i,c)},useTransition:function(){var i=hx(Yi)[0],c=jn().memoizedState;return[typeof i=="boolean"?i:Sd(i),c]},useSyncExternalStore:wk,useId:Qk,useHostTransitionStatus:yx,useFormState:Pk,useActionState:Pk,useOptimistic:function(i,c){var g=jn();return Zr!==null?Nk(g,Zr,i,c):(g.baseState=i,[i,g.queue.dispatch])},useMemoCache:ux,useCacheRefresh:Zk};nw.useEffectEvent=Uk;function wx(i,c,g,m){c=i.memoizedState,g=g(m,c),g=g==null?c:p({},c,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var Ex={enqueueSetState:function(i,c,g){i=i._reactInternals;var m=ds(),v=No(m);v.payload=c,g!=null&&(v.callback=g),c=Ao(i,v,m),c!==null&&(Ga(c,i,m),kd(c,i,m))},enqueueReplaceState:function(i,c,g){i=i._reactInternals;var m=ds(),v=No(m);v.tag=1,v.payload=c,g!=null&&(v.callback=g),c=Ao(i,v,m),c!==null&&(Ga(c,i,m),kd(c,i,m))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var g=ds(),m=No(g);m.tag=2,c!=null&&(m.callback=c),c=Ao(i,m,g),c!==null&&(Ga(c,i,g),kd(c,i,g))}};function aw(i,c,g,m,v,w,j){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,w,j):c.prototype&&c.prototype.isPureReactComponent?!Fr(g,m)||!Fr(v,w):!0}function sw(i,c,g,m){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==i&&Ex.enqueueReplaceState(c,c.state,null)}function Al(i,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(i=i.defaultProps){g===c&&(g=p({},g));for(var v in i)g[v]===void 0&&(g[v]=i[v])}return g}function iw(i){Gg(i)}function ow(i){console.error(i)}function lw(i){Gg(i)}function pf(i,c){try{var g=i.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function cw(i,c,g){try{var m=i.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function _x(i,c,g){return g=No(g),g.tag=3,g.payload={element:null},g.callback=function(){pf(i,c)},g}function uw(i){return i=No(i),i.tag=3,i}function dw(i,c,g,m){var v=g.type.getDerivedStateFromError;if(typeof v=="function"){var w=m.value;i.payload=function(){return v(w)},i.callback=function(){cw(c,g,m)}}var j=g.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(i.callback=function(){cw(c,g,m),typeof v!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var G=m.stack;this.componentDidCatch(m.value,{componentStack:G!==null?G:""})})}function e5(i,c,g,m,v){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&Rc(c,g,v,!0),g=os.current,g!==null){switch(g.tag){case 31:case 13:return As===null?Cf():g.alternate===null&&An===0&&(An=3),g.flags&=-257,g.flags|=65536,g.lanes=v,m===tf?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),Kx(i,m,v)),!1;case 22:return g.flags|=65536,m===tf?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),Kx(i,m,v)),!1}throw Error(n(435,g.tag))}return Kx(i,m,v),Cf(),!1}if(Lr)return c=os.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,m!==Hm&&(i=Error(n(422),{cause:m}),md(Ss(i,g)))):(m!==Hm&&(c=Error(n(423),{cause:m}),md(Ss(c,g))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=Ss(m,g),v=_x(i.stateNode,m,v),ex(i,v),An!==4&&(An=2)),!1;var w=Error(n(520),{cause:m});if(w=Ss(w,g),Id===null?Id=[w]:Id.push(w),An!==4&&(An=2),c===null)return!0;m=Ss(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,i=v&-v,g.lanes|=i,i=_x(g.stateNode,m,i),ex(g,i),!1;case 1:if(c=g.type,w=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Io===null||!Io.has(w))))return g.flags|=65536,v&=-v,g.lanes|=v,v=uw(v),dw(v,i,g,m),ex(g,v),!1}g=g.return}while(g!==null);return!1}var Sx=Error(n(461)),Fn=!1;function la(i,c,g,m){c.child=i===null?pk(c,null,g,m):Cl(c,i.child,g,m)}function hw(i,c,g,m,v){g=g.render;var w=c.ref;if("ref"in m){var j={};for(var G in m)G!=="ref"&&(j[G]=m[G])}else j=m;return El(c),m=ix(i,c,g,j,w,v),G=ox(),i!==null&&!Fn?(lx(i,c,v),Wi(i,c,v)):(Lr&&G&&$m(c),c.flags|=1,la(i,c,m,v),c.child)}function gw(i,c,g,m,v){if(i===null){var w=g.type;return typeof w=="function"&&!Bm(w)&&w.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=w,fw(i,c,w,m,v)):(i=Kg(g.type,null,m,c,c.mode,v),i.ref=c.ref,i.return=c,c.child=i)}if(w=i.child,!Rx(i,v)){var j=w.memoizedProps;if(g=g.compare,g=g!==null?g:Fr,g(j,m)&&i.ref===c.ref)return Wi(i,c,v)}return c.flags|=1,i=$i(w,m),i.ref=c.ref,i.return=c,c.child=i}function fw(i,c,g,m,v){if(i!==null){var w=i.memoizedProps;if(Fr(w,m)&&i.ref===c.ref)if(Fn=!1,c.pendingProps=m=w,Rx(i,v))(i.flags&131072)!==0&&(Fn=!0);else return c.lanes=i.lanes,Wi(i,c,v)}return Tx(i,c,g,m,v)}function pw(i,c,g,m){var v=m.children,w=i!==null?i.memoizedState:null;if(i===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((c.flags&128)!==0){if(w=w!==null?w.baseLanes|g:g,i!==null){for(m=c.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~w}else m=0,c.child=null;return mw(i,c,w,g,m)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jg(c,w!==null?w.cachePool:null),w!==null?bk(c,w):rx(),yk(c);else return m=c.lanes=536870912,mw(i,c,w!==null?w.baseLanes|g:g,g,m)}else w!==null?(Jg(c,w.cachePool),bk(c,w),jo(),c.memoizedState=null):(i!==null&&Jg(c,null),rx(),jo());return la(i,c,v,g),c.child}function Nd(i,c){return i!==null&&i.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function mw(i,c,g,m,v){var w=Xm();return w=w===null?null:{parent:Pn._currentValue,pool:w},c.memoizedState={baseLanes:g,cachePool:w},i!==null&&Jg(c,null),rx(),yk(c),i!==null&&Rc(i,c,m,!0),c.childLanes=v,null}function mf(i,c){return c=bf({mode:c.mode,children:c.children},i.mode),c.ref=i.ref,i.child=c,c.return=i,c}function xw(i,c,g){return Cl(c,i.child,null,g),i=mf(c,c.pendingProps),i.flags|=2,ls(c),c.memoizedState=null,i}function t5(i,c,g){var m=c.pendingProps,v=(c.flags&128)!==0;if(c.flags&=-129,i===null){if(Lr){if(m.mode==="hidden")return i=mf(c,m),c.lanes=536870912,Nd(null,i);if(ax(c),(i=xn)?(i=AE(i,Ns),i=i!==null&&i.data==="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Eo!==null?{id:gi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},g=ek(i),g.return=c,c.child=g,ia=c,xn=null)):i=null,i===null)throw So(c);return c.lanes=536870912,null}return mf(c,m)}var w=i.memoizedState;if(w!==null){var j=w.dehydrated;if(ax(c),v)if(c.flags&256)c.flags&=-257,c=xw(i,c,g);else if(c.memoizedState!==null)c.child=i.child,c.flags|=128,c=null;else throw Error(n(558));else if(Fn||Rc(i,c,g,!1),v=(g&i.childLanes)!==0,Fn||v){if(m=an,m!==null&&(j=dt(m,g),j!==0&&j!==w.retryLane))throw w.retryLane=j,yl(i,j),Ga(m,i,j),Sx;Cf(),c=xw(i,c,g)}else i=w.treeContext,xn=Ls(j.nextSibling),ia=c,Lr=!0,_o=null,Ns=!1,i!==null&&nk(c,i),c=mf(c,m),c.flags|=4096;return c}return i=$i(i.child,{mode:m.mode,children:m.children}),i.ref=c.ref,c.child=i,i.return=c,i}function xf(i,c){var g=c.ref;if(g===null)i!==null&&i.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(i===null||i.ref!==g)&&(c.flags|=4194816)}}function Tx(i,c,g,m,v){return El(c),g=ix(i,c,g,m,void 0,v),m=ox(),i!==null&&!Fn?(lx(i,c,v),Wi(i,c,v)):(Lr&&m&&$m(c),c.flags|=1,la(i,c,g,v),c.child)}function bw(i,c,g,m,v,w){return El(c),c.updateQueue=null,g=kk(c,m,g,v),vk(i),m=ox(),i!==null&&!Fn?(lx(i,c,w),Wi(i,c,w)):(Lr&&m&&$m(c),c.flags|=1,la(i,c,g,w),c.child)}function yw(i,c,g,m,v){if(El(c),c.stateNode===null){var w=Ac,j=g.contextType;typeof j=="object"&&j!==null&&(w=oa(j)),w=new g(m,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Ex,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=m,w.state=c.memoizedState,w.refs={},Zm(c),j=g.contextType,w.context=typeof j=="object"&&j!==null?oa(j):Ac,w.state=c.memoizedState,j=g.getDerivedStateFromProps,typeof j=="function"&&(wx(c,g,j,m),w.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(j=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),j!==w.state&&Ex.enqueueReplaceState(w,w.state,null),Ed(c,m,w,v),wd(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(i===null){w=c.stateNode;var G=c.memoizedProps,ue=Al(g,G);w.props=ue;var _e=w.context,Oe=g.contextType;j=Ac,typeof Oe=="object"&&Oe!==null&&(j=oa(Oe));var Ue=g.getDerivedStateFromProps;Oe=typeof Ue=="function"||typeof w.getSnapshotBeforeUpdate=="function",G=c.pendingProps!==G,Oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(G||_e!==j)&&sw(c,w,m,j),Co=!1;var Te=c.memoizedState;w.state=Te,Ed(c,m,w,v),wd(),_e=c.memoizedState,G||Te!==_e||Co?(typeof Ue=="function"&&(wx(c,g,Ue,m),_e=c.memoizedState),(ue=Co||aw(c,g,ue,m,Te,_e,j))?(Oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=_e),w.props=m,w.state=_e,w.context=j,m=ue):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{w=c.stateNode,Jm(i,c),j=c.memoizedProps,Oe=Al(g,j),w.props=Oe,Ue=c.pendingProps,Te=w.context,_e=g.contextType,ue=Ac,typeof _e=="object"&&_e!==null&&(ue=oa(_e)),G=g.getDerivedStateFromProps,(_e=typeof G=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j!==Ue||Te!==ue)&&sw(c,w,m,ue),Co=!1,Te=c.memoizedState,w.state=Te,Ed(c,m,w,v),wd();var Le=c.memoizedState;j!==Ue||Te!==Le||Co||i!==null&&i.dependencies!==null&&Qg(i.dependencies)?(typeof G=="function"&&(wx(c,g,G,m),Le=c.memoizedState),(Oe=Co||aw(c,g,Oe,m,Te,Le,ue)||i!==null&&i.dependencies!==null&&Qg(i.dependencies))?(_e||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,Le,ue),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,Le,ue)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||j===i.memoizedProps&&Te===i.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Te===i.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Le),w.props=m,w.state=Le,w.context=ue,m=Oe):(typeof w.componentDidUpdate!="function"||j===i.memoizedProps&&Te===i.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===i.memoizedProps&&Te===i.memoizedState||(c.flags|=1024),m=!1)}return w=m,xf(i,c),m=(c.flags&128)!==0,w||m?(w=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,i!==null&&m?(c.child=Cl(c,i.child,null,v),c.child=Cl(c,null,g,v)):la(i,c,g,v),c.memoizedState=w.state,i=c.child):i=Wi(i,c,v),i}function vw(i,c,g,m){return kl(),c.flags|=256,la(i,c,g,m),c.child}var Cx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nx(i){return{baseLanes:i,cachePool:ck()}}function Ax(i,c,g){return i=i!==null?i.childLanes&~g:0,c&&(i|=us),i}function kw(i,c,g){var m=c.pendingProps,v=!1,w=(c.flags&128)!==0,j;if((j=w)||(j=i!==null&&i.memoizedState===null?!1:(Ln.current&2)!==0),j&&(v=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,i===null){if(Lr){if(v?Lo(c):jo(),(i=xn)?(i=AE(i,Ns),i=i!==null&&i.data!=="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Eo!==null?{id:gi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},g=ek(i),g.return=c,c.child=g,ia=c,xn=null)):i=null,i===null)throw So(c);return db(i)?c.lanes=32:c.lanes=536870912,null}var G=m.children;return m=m.fallback,v?(jo(),v=c.mode,G=bf({mode:"hidden",children:G},v),m=vl(m,v,g,null),G.return=c,m.return=c,G.sibling=m,c.child=G,m=c.child,m.memoizedState=Nx(g),m.childLanes=Ax(i,j,g),c.memoizedState=Cx,Nd(null,m)):(Lo(c),Lx(c,G))}var ue=i.memoizedState;if(ue!==null&&(G=ue.dehydrated,G!==null)){if(w)c.flags&256?(Lo(c),c.flags&=-257,c=jx(i,c,g)):c.memoizedState!==null?(jo(),c.child=i.child,c.flags|=128,c=null):(jo(),G=m.fallback,v=c.mode,m=bf({mode:"visible",children:m.children},v),G=vl(G,v,g,null),G.flags|=2,m.return=c,G.return=c,m.sibling=G,c.child=m,Cl(c,i.child,null,g),m=c.child,m.memoizedState=Nx(g),m.childLanes=Ax(i,j,g),c.memoizedState=Cx,c=Nd(null,m));else if(Lo(c),db(G)){if(j=G.nextSibling&&G.nextSibling.dataset,j)var _e=j.dgst;j=_e,m=Error(n(419)),m.stack="",m.digest=j,md({value:m,source:null,stack:null}),c=jx(i,c,g)}else if(Fn||Rc(i,c,g,!1),j=(g&i.childLanes)!==0,Fn||j){if(j=an,j!==null&&(m=dt(j,g),m!==0&&m!==ue.retryLane))throw ue.retryLane=m,yl(i,m),Ga(j,i,m),Sx;ub(G)||Cf(),c=jx(i,c,g)}else ub(G)?(c.flags|=192,c.child=i.child,c=null):(i=ue.treeContext,xn=Ls(G.nextSibling),ia=c,Lr=!0,_o=null,Ns=!1,i!==null&&nk(c,i),c=Lx(c,m.children),c.flags|=4096);return c}return v?(jo(),G=m.fallback,v=c.mode,ue=i.child,_e=ue.sibling,m=$i(ue,{mode:"hidden",children:m.children}),m.subtreeFlags=ue.subtreeFlags&65011712,_e!==null?G=$i(_e,G):(G=vl(G,v,g,null),G.flags|=2),G.return=c,m.return=c,m.sibling=G,c.child=m,Nd(null,m),m=c.child,G=i.child.memoizedState,G===null?G=Nx(g):(v=G.cachePool,v!==null?(ue=Pn._currentValue,v=v.parent!==ue?{parent:ue,pool:ue}:v):v=ck(),G={baseLanes:G.baseLanes|g,cachePool:v}),m.memoizedState=G,m.childLanes=Ax(i,j,g),c.memoizedState=Cx,Nd(i.child,m)):(Lo(c),g=i.child,i=g.sibling,g=$i(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,i!==null&&(j=c.deletions,j===null?(c.deletions=[i],c.flags|=16):j.push(i)),c.child=g,c.memoizedState=null,g)}function Lx(i,c){return c=bf({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function bf(i,c){return i=is(22,i,null,c),i.lanes=0,i}function jx(i,c,g){return Cl(c,i.child,null,g),i=Lx(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function ww(i,c,g){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c),Ym(i.return,c,g)}function Mx(i,c,g,m,v,w){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:v,treeForkCount:w}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=m,j.tail=g,j.tailMode=v,j.treeForkCount=w)}function Ew(i,c,g){var m=c.pendingProps,v=m.revealOrder,w=m.tail;m=m.children;var j=Ln.current,G=(j&2)!==0;if(G?(j=j&1|2,c.flags|=128):j&=1,R(Ln,j),la(i,c,m,g),m=Lr?pd:0,!G&&i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,g,c);else if(i.tag===19)ww(i,g,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(g=c.child,v=null;g!==null;)i=g.alternate,i!==null&&sf(i)===null&&(v=g),g=g.sibling;g=v,g===null?(v=c.child,c.child=null):(v=g.sibling,g.sibling=null),Mx(c,!1,v,g,w,m);break;case"backwards":case"unstable_legacy-backwards":for(g=null,v=c.child,c.child=null;v!==null;){if(i=v.alternate,i!==null&&sf(i)===null){c.child=v;break}i=v.sibling,v.sibling=g,g=v,v=i}Mx(c,!0,g,null,w,m);break;case"together":Mx(c,!1,null,null,void 0,m);break;default:c.memoizedState=null}return c.child}function Wi(i,c,g){if(i!==null&&(c.dependencies=i.dependencies),Oo|=c.lanes,(g&c.childLanes)===0)if(i!==null){if(Rc(i,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,g=$i(i,i.pendingProps),c.child=g,g.return=c;i.sibling!==null;)i=i.sibling,g=g.sibling=$i(i,i.pendingProps),g.return=c;g.sibling=null}return c.child}function Rx(i,c){return(i.lanes&c)!==0?!0:(i=i.dependencies,!!(i!==null&&Qg(i)))}function r5(i,c,g){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),To(c,Pn,i.memoizedState.cache),kl();break;case 27:case 5:ce(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:To(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,ax(c),null;break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Lo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?kw(i,c,g):(Lo(c),i=Wi(i,c,g),i!==null?i.sibling:null);Lo(c);break;case 19:var v=(i.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(Rc(i,c,g,!1),m=(g&c.childLanes)!==0),v){if(m)return Ew(i,c,g);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),R(Ln,Ln.current),m)break;return null;case 22:return c.lanes=0,pw(i,c,g,c.pendingProps);case 24:To(c,Pn,i.memoizedState.cache)}return Wi(i,c,g)}function _w(i,c,g){if(i!==null)if(i.memoizedProps!==c.pendingProps)Fn=!0;else{if(!Rx(i,g)&&(c.flags&128)===0)return Fn=!1,r5(i,c,g);Fn=(i.flags&131072)!==0}else Fn=!1,Lr&&(c.flags&1048576)!==0&&rk(c,pd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var m=c.pendingProps;if(i=Sl(c.elementType),c.type=i,typeof i=="function")Bm(i)?(m=Al(i,m),c.tag=1,c=yw(null,c,i,m,g)):(c.tag=0,c=Tx(null,c,i,m,g));else{if(i!=null){var v=i.$$typeof;if(v===I){c.tag=11,c=hw(null,c,i,m,g);break e}else if(v===F){c.tag=14,c=gw(null,c,i,m,g);break e}}throw c=L(i)||i,Error(n(306,c,""))}}return c;case 0:return Tx(i,c,c.type,c.pendingProps,g);case 1:return m=c.type,v=Al(m,c.pendingProps),yw(i,c,m,v,g);case 3:e:{if(le(c,c.stateNode.containerInfo),i===null)throw Error(n(387));m=c.pendingProps;var w=c.memoizedState;v=w.element,Jm(i,c),Ed(c,m,null,g);var j=c.memoizedState;if(m=j.cache,To(c,Pn,m),m!==w.cache&&Wm(c,[Pn],g,!0),wd(),m=j.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=vw(i,c,m,g);break e}else if(m!==v){v=Ss(Error(n(424)),c),md(v),c=vw(i,c,m,g);break e}else{switch(i=c.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(xn=Ls(i.firstChild),ia=c,Lr=!0,_o=null,Ns=!0,g=pk(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(kl(),m===v){c=Wi(i,c,g);break e}la(i,c,m,g)}c=c.child}return c;case 26:return xf(i,c),i===null?(g=IE(c.type,null,c.pendingProps,null))?c.memoizedState=g:Lr||(g=c.type,i=c.pendingProps,m=Of(re.current).createElement(g),m[Pr]=c,m[Rr]=i,ca(m,g,i),Vt(m),c.stateNode=m):c.memoizedState=IE(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return ce(c),i===null&&Lr&&(m=c.stateNode=ME(c.type,c.pendingProps,re.current),ia=c,Ns=!0,v=xn,Fo(c.type)?(hb=v,xn=Ls(m.firstChild)):xn=v),la(i,c,c.pendingProps.children,g),xf(i,c),i===null&&(c.flags|=4194304),c.child;case 5:return i===null&&Lr&&((v=m=xn)&&(m=M5(m,c.type,c.pendingProps,Ns),m!==null?(c.stateNode=m,ia=c,xn=Ls(m.firstChild),Ns=!1,v=!0):v=!1),v||So(c)),ce(c),v=c.type,w=c.pendingProps,j=i!==null?i.memoizedProps:null,m=w.children,ob(v,w)?m=null:j!==null&&ob(v,j)&&(c.flags|=32),c.memoizedState!==null&&(v=ix(i,c,WI,null,null,g),Hd._currentValue=v),xf(i,c),la(i,c,m,g),c.child;case 6:return i===null&&Lr&&((i=g=xn)&&(g=R5(g,c.pendingProps,Ns),g!==null?(c.stateNode=g,ia=c,xn=null,i=!0):i=!1),i||So(c)),null;case 13:return kw(i,c,g);case 4:return le(c,c.stateNode.containerInfo),m=c.pendingProps,i===null?c.child=Cl(c,null,m,g):la(i,c,m,g),c.child;case 11:return hw(i,c,c.type,c.pendingProps,g);case 7:return la(i,c,c.pendingProps,g),c.child;case 8:return la(i,c,c.pendingProps.children,g),c.child;case 12:return la(i,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,To(c,c.type,m.value),la(i,c,m.children,g),c.child;case 9:return v=c.type._context,m=c.pendingProps.children,El(c),v=oa(v),m=m(v),c.flags|=1,la(i,c,m,g),c.child;case 14:return gw(i,c,c.type,c.pendingProps,g);case 15:return fw(i,c,c.type,c.pendingProps,g);case 19:return Ew(i,c,g);case 31:return t5(i,c,g);case 22:return pw(i,c,g,c.pendingProps);case 24:return El(c),m=oa(Pn),i===null?(v=Xm(),v===null&&(v=an,w=Vm(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=g),v=w),c.memoizedState={parent:m,cache:v},Zm(c),To(c,Pn,v)):((i.lanes&g)!==0&&(Jm(i,c),Ed(c,null,null,g),wd()),v=i.memoizedState,w=c.memoizedState,v.parent!==m?(v={parent:m,cache:m},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),To(c,Pn,m)):(m=w.cache,To(c,Pn,m),m!==v.cache&&Wm(c,[Pn],g,!0))),la(i,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Vi(i){i.flags|=4}function Ox(i,c,g,m,v){if((c=(i.mode&32)!==0)&&(c=!1),c){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(Qw())i.flags|=8192;else throw Tl=tf,Qm}else i.flags&=-16777217}function Sw(i,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!UE(c))if(Qw())i.flags|=8192;else throw Tl=tf,Qm}function yf(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?bt():536870912,i.lanes|=c,Gc|=c)}function Ad(i,c){if(!Lr)switch(i.tailMode){case"hidden":c=i.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function bn(i){var c=i.alternate!==null&&i.alternate.child===i.child,g=0,m=0;if(c)for(var v=i.child;v!==null;)g|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)g|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=g,c}function n5(i,c,g){var m=c.pendingProps;switch(zm(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(c),null;case 1:return bn(c),null;case 3:return g=c.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),qi(Pn),ve(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Mc(c)?Vi(c):i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,qm())),bn(c),null;case 26:var v=c.type,w=c.memoizedState;return i===null?(Vi(c),w!==null?(bn(c),Sw(c,w)):(bn(c),Ox(c,v,null,m,g))):w?w!==i.memoizedState?(Vi(c),bn(c),Sw(c,w)):(bn(c),c.flags&=-16777217):(i=i.memoizedProps,i!==m&&Vi(c),bn(c),Ox(c,v,i,m,g)),null;case 27:if(ke(c),g=re.current,v=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==m&&Vi(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return bn(c),null}i=H.current,Mc(c)?ak(c):(i=ME(v,m,g),c.stateNode=i,Vi(c))}return bn(c),null;case 5:if(ke(c),v=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==m&&Vi(c);else{if(!m){if(c.stateNode===null)throw Error(n(166));return bn(c),null}if(w=H.current,Mc(c))ak(c);else{var j=Of(re.current);switch(w){case 1:w=j.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=j.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=j.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=j.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=j.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?j.createElement("select",{is:m.is}):j.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?j.createElement(v,{is:m.is}):j.createElement(v)}}w[Pr]=c,w[Rr]=m;e:for(j=c.child;j!==null;){if(j.tag===5||j.tag===6)w.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===c)break e;for(;j.sibling===null;){if(j.return===null||j.return===c)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}c.stateNode=w;e:switch(ca(w,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Vi(c)}}return bn(c),Ox(c,c.type,i===null?null:i.memoizedProps,c.pendingProps,g),null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==m&&Vi(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(n(166));if(i=re.current,Mc(c)){if(i=c.stateNode,g=c.memoizedProps,m=null,v=ia,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[Pr]=c,i=!!(i.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||kE(i.nodeValue,g)),i||So(c,!0)}else i=Of(i).createTextNode(m),i[Pr]=c,c.stateNode=i}return bn(c),null;case 31:if(g=c.memoizedState,i===null||i.memoizedState!==null){if(m=Mc(c),g!==null){if(i===null){if(!m)throw Error(n(318));if(i=c.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Pr]=c}else kl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),i=!1}else g=qm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),i=!0;if(!i)return c.flags&256?(ls(c),c):(ls(c),null);if((c.flags&128)!==0)throw Error(n(558))}return bn(c),null;case 13:if(m=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Mc(c),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(n(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Pr]=c}else kl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),v=!1}else v=qm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(ls(c),c):(ls(c),null)}return ls(c),(c.flags&128)!==0?(c.lanes=g,c):(g=m!==null,i=i!==null&&i.memoizedState!==null,g&&(m=c.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==v&&(m.flags|=2048)),g!==i&&g&&(c.child.flags|=8192),yf(c,c.updateQueue),bn(c),null);case 4:return ve(),i===null&&rb(c.stateNode.containerInfo),bn(c),null;case 10:return qi(c.type),bn(c),null;case 19:if(Y(Ln),m=c.memoizedState,m===null)return bn(c),null;if(v=(c.flags&128)!==0,w=m.rendering,w===null)if(v)Ad(m,!1);else{if(An!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(w=sf(i),w!==null){for(c.flags|=128,Ad(m,!1),i=w.updateQueue,c.updateQueue=i,yf(c,i),c.subtreeFlags=0,i=g,g=c.child;g!==null;)J2(g,i),g=g.sibling;return R(Ln,Ln.current&1|2),Lr&&zi(c,m.treeForkCount),c.child}i=i.sibling}m.tail!==null&&Ut()>_f&&(c.flags|=128,v=!0,Ad(m,!1),c.lanes=4194304)}else{if(!v)if(i=sf(w),i!==null){if(c.flags|=128,v=!0,i=i.updateQueue,c.updateQueue=i,yf(c,i),Ad(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Lr)return bn(c),null}else 2*Ut()-m.renderingStartTime>_f&&g!==536870912&&(c.flags|=128,v=!0,Ad(m,!1),c.lanes=4194304);m.isBackwards?(w.sibling=c.child,c.child=w):(i=m.last,i!==null?i.sibling=w:c.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ut(),i.sibling=null,g=Ln.current,R(Ln,v?g&1|2:g&1),Lr&&zi(c,m.treeForkCount),i):(bn(c),null);case 22:case 23:return ls(c),nx(),m=c.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(bn(c),c.subtreeFlags&6&&(c.flags|=8192)):bn(c),g=c.updateQueue,g!==null&&yf(c,g.retryQueue),g=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),i!==null&&Y(_l),null;case 24:return g=null,i!==null&&(g=i.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),qi(Pn),bn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function a5(i,c){switch(zm(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return qi(Pn),ve(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return ke(c),null;case 31:if(c.memoizedState!==null){if(ls(c),c.alternate===null)throw Error(n(340));kl()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 13:if(ls(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));kl()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return Y(Ln),null;case 4:return ve(),null;case 10:return qi(c.type),null;case 22:case 23:return ls(c),nx(),i!==null&&Y(_l),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return qi(Pn),null;case 25:return null;default:return null}}function Tw(i,c){switch(zm(c),c.tag){case 3:qi(Pn),ve();break;case 26:case 27:case 5:ke(c);break;case 4:ve();break;case 31:c.memoizedState!==null&&ls(c);break;case 13:ls(c);break;case 19:Y(Ln);break;case 10:qi(c.type);break;case 22:case 23:ls(c),nx(),i!==null&&Y(_l);break;case 24:qi(Pn)}}function Ld(i,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var v=m.next;g=v;do{if((g.tag&i)===i){m=void 0;var w=g.create,j=g.inst;m=w(),j.destroy=m}g=g.next}while(g!==v)}}catch(G){Xr(c,c.return,G)}}function Mo(i,c,g){try{var m=c.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var w=v.next;m=w;do{if((m.tag&i)===i){var j=m.inst,G=j.destroy;if(G!==void 0){j.destroy=void 0,v=c;var ue=g,_e=G;try{_e()}catch(Oe){Xr(v,ue,Oe)}}}m=m.next}while(m!==w)}}catch(Oe){Xr(c,c.return,Oe)}}function Cw(i){var c=i.updateQueue;if(c!==null){var g=i.stateNode;try{xk(c,g)}catch(m){Xr(i,i.return,m)}}}function Nw(i,c,g){g.props=Al(i.type,i.memoizedProps),g.state=i.memoizedState;try{g.componentWillUnmount()}catch(m){Xr(i,c,m)}}function jd(i,c){try{var g=i.ref;if(g!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof g=="function"?i.refCleanup=g(m):g.current=m}}catch(v){Xr(i,c,v)}}function pi(i,c){var g=i.ref,m=i.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(v){Xr(i,c,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(v){Xr(i,c,v)}else g.current=null}function Aw(i){var c=i.type,g=i.memoizedProps,m=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(v){Xr(i,i.return,v)}}function Ix(i,c,g){try{var m=i.stateNode;T5(m,i.type,g,c),m[Rr]=c}catch(v){Xr(i,i.return,v)}}function Lw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fo(i.type)||i.tag===4}function Dx(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Lw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Px(i,c,g){var m=i.tag;if(m===5||m===6)i=i.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(i,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(i),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=tt));else if(m!==4&&(m===27&&Fo(i.type)&&(g=i.stateNode,c=null),i=i.child,i!==null))for(Px(i,c,g),i=i.sibling;i!==null;)Px(i,c,g),i=i.sibling}function vf(i,c,g){var m=i.tag;if(m===5||m===6)i=i.stateNode,c?g.insertBefore(i,c):g.appendChild(i);else if(m!==4&&(m===27&&Fo(i.type)&&(g=i.stateNode),i=i.child,i!==null))for(vf(i,c,g),i=i.sibling;i!==null;)vf(i,c,g),i=i.sibling}function jw(i){var c=i.stateNode,g=i.memoizedProps;try{for(var m=i.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);ca(c,m,g),c[Pr]=i,c[Rr]=g}catch(w){Xr(i,i.return,w)}}var Ki=!1,Un=!1,Bx=!1,Mw=typeof WeakSet=="function"?WeakSet:Set,ta=null;function s5(i,c){if(i=i.containerInfo,sb=$f,i=Vs(i),jm(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var v=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{g.nodeType,w.nodeType}catch{g=null;break e}var j=0,G=-1,ue=-1,_e=0,Oe=0,Ue=i,Te=null;t:for(;;){for(var Le;Ue!==g||v!==0&&Ue.nodeType!==3||(G=j+v),Ue!==w||m!==0&&Ue.nodeType!==3||(ue=j+m),Ue.nodeType===3&&(j+=Ue.nodeValue.length),(Le=Ue.firstChild)!==null;)Te=Ue,Ue=Le;for(;;){if(Ue===i)break t;if(Te===g&&++_e===v&&(G=j),Te===w&&++Oe===m&&(ue=j),(Le=Ue.nextSibling)!==null)break;Ue=Te,Te=Ue.parentNode}Ue=Le}g=G===-1||ue===-1?null:{start:G,end:ue}}else g=null}g=g||{start:0,end:0}}else g=null;for(ib={focusedElem:i,selectionRange:g},$f=!1,ta=c;ta!==null;)if(c=ta,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,ta=i;else for(;ta!==null;){switch(c=ta,w=c.alternate,i=c.flags,c.tag){case 0:if((i&4)!==0&&(i=c.updateQueue,i=i!==null?i.events:null,i!==null))for(g=0;g<i.length;g++)v=i[g],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,g=c,v=w.memoizedProps,w=w.memoizedState,m=g.stateNode;try{var xt=Al(g.type,v);i=m.getSnapshotBeforeUpdate(xt,w),m.__reactInternalSnapshotBeforeUpdate=i}catch(Bt){Xr(g,g.return,Bt)}}break;case 3:if((i&1024)!==0){if(i=c.stateNode.containerInfo,g=i.nodeType,g===9)cb(i);else if(g===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":cb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=c.sibling,i!==null){i.return=c.return,ta=i;break}ta=c.return}}function Rw(i,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Qi(i,g),m&4&&Ld(5,g);break;case 1:if(Qi(i,g),m&4)if(i=g.stateNode,c===null)try{i.componentDidMount()}catch(j){Xr(g,g.return,j)}else{var v=Al(g.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(v,c,i.__reactInternalSnapshotBeforeUpdate)}catch(j){Xr(g,g.return,j)}}m&64&&Cw(g),m&512&&jd(g,g.return);break;case 3:if(Qi(i,g),m&64&&(i=g.updateQueue,i!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{xk(i,c)}catch(j){Xr(g,g.return,j)}}break;case 27:c===null&&m&4&&jw(g);case 26:case 5:Qi(i,g),c===null&&m&4&&Aw(g),m&512&&jd(g,g.return);break;case 12:Qi(i,g);break;case 31:Qi(i,g),m&4&&Dw(i,g);break;case 13:Qi(i,g),m&4&&Pw(i,g),m&64&&(i=g.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(g=f5.bind(null,g),O5(i,g))));break;case 22:if(m=g.memoizedState!==null||Ki,!m){c=c!==null&&c.memoizedState!==null||Un,v=Ki;var w=Un;Ki=m,(Un=c)&&!w?Zi(i,g,(g.subtreeFlags&8772)!==0):Qi(i,g),Ki=v,Un=w}break;case 30:break;default:Qi(i,g)}}function Ow(i){var c=i.alternate;c!==null&&(i.alternate=null,Ow(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&de(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var kn=null,$a=!1;function Xi(i,c,g){for(g=g.child;g!==null;)Iw(i,c,g),g=g.sibling}function Iw(i,c,g){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Gr,g)}catch{}switch(g.tag){case 26:Un||pi(g,c),Xi(i,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Un||pi(g,c);var m=kn,v=$a;Fo(g.type)&&(kn=g.stateNode,$a=!1),Xi(i,c,g),Ud(g.stateNode),kn=m,$a=v;break;case 5:Un||pi(g,c);case 6:if(m=kn,v=$a,kn=null,Xi(i,c,g),kn=m,$a=v,kn!==null)if($a)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(g.stateNode)}catch(w){Xr(g,c,w)}else try{kn.removeChild(g.stateNode)}catch(w){Xr(g,c,w)}break;case 18:kn!==null&&($a?(i=kn,CE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,g.stateNode),Jc(i)):CE(kn,g.stateNode));break;case 4:m=kn,v=$a,kn=g.stateNode.containerInfo,$a=!0,Xi(i,c,g),kn=m,$a=v;break;case 0:case 11:case 14:case 15:Mo(2,g,c),Un||Mo(4,g,c),Xi(i,c,g);break;case 1:Un||(pi(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&Nw(g,c,m)),Xi(i,c,g);break;case 21:Xi(i,c,g);break;case 22:Un=(m=Un)||g.memoizedState!==null,Xi(i,c,g),Un=m;break;default:Xi(i,c,g)}}function Dw(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Jc(i)}catch(g){Xr(c,c.return,g)}}}function Pw(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jc(i)}catch(g){Xr(c,c.return,g)}}function i5(i){switch(i.tag){case 31:case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new Mw),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new Mw),c;default:throw Error(n(435,i.tag))}}function kf(i,c){var g=i5(i);c.forEach(function(m){if(!g.has(m)){g.add(m);var v=p5.bind(null,i,m);m.then(v,v)}})}function za(i,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var v=g[m],w=i,j=c,G=j;e:for(;G!==null;){switch(G.tag){case 27:if(Fo(G.type)){kn=G.stateNode,$a=!1;break e}break;case 5:kn=G.stateNode,$a=!1;break e;case 3:case 4:kn=G.stateNode.containerInfo,$a=!0;break e}G=G.return}if(kn===null)throw Error(n(160));Iw(w,j,v),kn=null,$a=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)Bw(c,i),c=c.sibling}var Xs=null;function Bw(i,c){var g=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:za(c,i),Ha(i),m&4&&(Mo(3,i,i.return),Ld(3,i),Mo(5,i,i.return));break;case 1:za(c,i),Ha(i),m&512&&(Un||g===null||pi(g,g.return)),m&64&&Ki&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(g=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var v=Xs;if(za(c,i),Ha(i),m&512&&(Un||g===null||pi(g,g.return)),m&4){var w=g!==null?g.memoizedState:null;if(m=i.memoizedState,g===null)if(m===null)if(i.stateNode===null){e:{m=i.type,g=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":w=v.getElementsByTagName("title")[0],(!w||w[ft]||w[Pr]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(m),v.head.insertBefore(w,v.querySelector("head > title"))),ca(w,m,g),w[Pr]=i,Vt(w),m=w;break e;case"link":var j=BE("link","href",v).get(m+(g.href||""));if(j){for(var G=0;G<j.length;G++)if(w=j[G],w.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&w.getAttribute("rel")===(g.rel==null?null:g.rel)&&w.getAttribute("title")===(g.title==null?null:g.title)&&w.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){j.splice(G,1);break t}}w=v.createElement(m),ca(w,m,g),v.head.appendChild(w);break;case"meta":if(j=BE("meta","content",v).get(m+(g.content||""))){for(G=0;G<j.length;G++)if(w=j[G],w.getAttribute("content")===(g.content==null?null:""+g.content)&&w.getAttribute("name")===(g.name==null?null:g.name)&&w.getAttribute("property")===(g.property==null?null:g.property)&&w.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&w.getAttribute("charset")===(g.charSet==null?null:g.charSet)){j.splice(G,1);break t}}w=v.createElement(m),ca(w,m,g),v.head.appendChild(w);break;default:throw Error(n(468,m))}w[Pr]=i,Vt(w),m=w}i.stateNode=m}else FE(v,i.type,i.stateNode);else i.stateNode=PE(v,m,i.memoizedProps);else w!==m?(w===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):w.count--,m===null?FE(v,i.type,i.stateNode):PE(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&Ix(i,i.memoizedProps,g.memoizedProps)}break;case 27:za(c,i),Ha(i),m&512&&(Un||g===null||pi(g,g.return)),g!==null&&m&4&&Ix(i,i.memoizedProps,g.memoizedProps);break;case 5:if(za(c,i),Ha(i),m&512&&(Un||g===null||pi(g,g.return)),i.flags&32){v=i.stateNode;try{Ot(v,"")}catch(xt){Xr(i,i.return,xt)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,Ix(i,v,g!==null?g.memoizedProps:v)),m&1024&&(Bx=!0);break;case 6:if(za(c,i),Ha(i),m&4){if(i.stateNode===null)throw Error(n(162));m=i.memoizedProps,g=i.stateNode;try{g.nodeValue=m}catch(xt){Xr(i,i.return,xt)}}break;case 3:if(Pf=null,v=Xs,Xs=If(c.containerInfo),za(c,i),Xs=v,Ha(i),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Jc(c.containerInfo)}catch(xt){Xr(i,i.return,xt)}Bx&&(Bx=!1,Fw(i));break;case 4:m=Xs,Xs=If(i.stateNode.containerInfo),za(c,i),Ha(i),Xs=m;break;case 12:za(c,i),Ha(i);break;case 31:za(c,i),Ha(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kf(i,m)));break;case 13:za(c,i),Ha(i),i.child.flags&8192&&i.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Ef=Ut()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kf(i,m)));break;case 22:v=i.memoizedState!==null;var ue=g!==null&&g.memoizedState!==null,_e=Ki,Oe=Un;if(Ki=_e||v,Un=Oe||ue,za(c,i),Un=Oe,Ki=_e,Ha(i),m&8192)e:for(c=i.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(g===null||ue||Ki||Un||Ll(i)),g=null,c=i;;){if(c.tag===5||c.tag===26){if(g===null){ue=g=c;try{if(w=ue.stateNode,v)j=w.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{G=ue.stateNode;var Ue=ue.memoizedProps.style,Te=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;G.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(xt){Xr(ue,ue.return,xt)}}}else if(c.tag===6){if(g===null){ue=c;try{ue.stateNode.nodeValue=v?"":ue.memoizedProps}catch(xt){Xr(ue,ue.return,xt)}}}else if(c.tag===18){if(g===null){ue=c;try{var Le=ue.stateNode;v?NE(Le,!0):NE(ue.stateNode,!1)}catch(xt){Xr(ue,ue.return,xt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=i.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,kf(i,g))));break;case 19:za(c,i),Ha(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,kf(i,m)));break;case 30:break;case 21:break;default:za(c,i),Ha(i)}}function Ha(i){var c=i.flags;if(c&2){try{for(var g,m=i.return;m!==null;){if(Lw(m)){g=m;break}m=m.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var v=g.stateNode,w=Dx(i);vf(i,w,v);break;case 5:var j=g.stateNode;g.flags&32&&(Ot(j,""),g.flags&=-33);var G=Dx(i);vf(i,G,j);break;case 3:case 4:var ue=g.stateNode.containerInfo,_e=Dx(i);Px(i,_e,ue);break;default:throw Error(n(161))}}catch(Oe){Xr(i,i.return,Oe)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function Fw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;Fw(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function Qi(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Rw(i,c.alternate,c),c=c.sibling}function Ll(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:Mo(4,c,c.return),Ll(c);break;case 1:pi(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&Nw(c,c.return,g),Ll(c);break;case 27:Ud(c.stateNode);case 26:case 5:pi(c,c.return),Ll(c);break;case 22:c.memoizedState===null&&Ll(c);break;case 30:Ll(c);break;default:Ll(c)}i=i.sibling}}function Zi(i,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,v=i,w=c,j=w.flags;switch(w.tag){case 0:case 11:case 15:Zi(v,w,g),Ld(4,w);break;case 1:if(Zi(v,w,g),m=w,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(_e){Xr(m,m.return,_e)}if(m=w,v=m.updateQueue,v!==null){var G=m.stateNode;try{var ue=v.shared.hiddenCallbacks;if(ue!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ue.length;v++)mk(ue[v],G)}catch(_e){Xr(m,m.return,_e)}}g&&j&64&&Cw(w),jd(w,w.return);break;case 27:jw(w);case 26:case 5:Zi(v,w,g),g&&m===null&&j&4&&Aw(w),jd(w,w.return);break;case 12:Zi(v,w,g);break;case 31:Zi(v,w,g),g&&j&4&&Dw(v,w);break;case 13:Zi(v,w,g),g&&j&4&&Pw(v,w);break;case 22:w.memoizedState===null&&Zi(v,w,g),jd(w,w.return);break;case 30:break;default:Zi(v,w,g)}c=c.sibling}}function Fx(i,c){var g=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(g=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==g&&(i!=null&&i.refCount++,g!=null&&xd(g))}function Ux(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&xd(i))}function Qs(i,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Uw(i,c,g,m),c=c.sibling}function Uw(i,c,g,m){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Qs(i,c,g,m),v&2048&&Ld(9,c);break;case 1:Qs(i,c,g,m);break;case 3:Qs(i,c,g,m),v&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&xd(i)));break;case 12:if(v&2048){Qs(i,c,g,m),i=c.stateNode;try{var w=c.memoizedProps,j=w.id,G=w.onPostCommit;typeof G=="function"&&G(j,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ue){Xr(c,c.return,ue)}}else Qs(i,c,g,m);break;case 31:Qs(i,c,g,m);break;case 13:Qs(i,c,g,m);break;case 23:break;case 22:w=c.stateNode,j=c.alternate,c.memoizedState!==null?w._visibility&2?Qs(i,c,g,m):Md(i,c):w._visibility&2?Qs(i,c,g,m):(w._visibility|=2,zc(i,c,g,m,(c.subtreeFlags&10256)!==0||!1)),v&2048&&Fx(j,c);break;case 24:Qs(i,c,g,m),v&2048&&Ux(c.alternate,c);break;default:Qs(i,c,g,m)}}function zc(i,c,g,m,v){for(v=v&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var w=i,j=c,G=g,ue=m,_e=j.flags;switch(j.tag){case 0:case 11:case 15:zc(w,j,G,ue,v),Ld(8,j);break;case 23:break;case 22:var Oe=j.stateNode;j.memoizedState!==null?Oe._visibility&2?zc(w,j,G,ue,v):Md(w,j):(Oe._visibility|=2,zc(w,j,G,ue,v)),v&&_e&2048&&Fx(j.alternate,j);break;case 24:zc(w,j,G,ue,v),v&&_e&2048&&Ux(j.alternate,j);break;default:zc(w,j,G,ue,v)}c=c.sibling}}function Md(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=i,m=c,v=m.flags;switch(m.tag){case 22:Md(g,m),v&2048&&Fx(m.alternate,m);break;case 24:Md(g,m),v&2048&&Ux(m.alternate,m);break;default:Md(g,m)}c=c.sibling}}var Rd=8192;function Hc(i,c,g){if(i.subtreeFlags&Rd)for(i=i.child;i!==null;)$w(i,c,g),i=i.sibling}function $w(i,c,g){switch(i.tag){case 26:Hc(i,c,g),i.flags&Rd&&i.memoizedState!==null&&Y5(g,Xs,i.memoizedState,i.memoizedProps);break;case 5:Hc(i,c,g);break;case 3:case 4:var m=Xs;Xs=If(i.stateNode.containerInfo),Hc(i,c,g),Xs=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Rd,Rd=16777216,Hc(i,c,g),Rd=m):Hc(i,c,g));break;default:Hc(i,c,g)}}function zw(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function Od(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];ta=m,qw(m,i)}zw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hw(i),i=i.sibling}function Hw(i){switch(i.tag){case 0:case 11:case 15:Od(i),i.flags&2048&&Mo(9,i,i.return);break;case 3:Od(i);break;case 12:Od(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&2&&(i.return===null||i.return.tag!==13)?(c._visibility&=-3,wf(i)):Od(i);break;default:Od(i)}}function wf(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];ta=m,qw(m,i)}zw(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:Mo(8,c,c.return),wf(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,wf(c));break;default:wf(c)}i=i.sibling}}function qw(i,c){for(;ta!==null;){var g=ta;switch(g.tag){case 0:case 11:case 15:Mo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:xd(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,ta=m;else e:for(g=i;ta!==null;){m=ta;var v=m.sibling,w=m.return;if(Ow(m),m===g){ta=null;break e}if(v!==null){v.return=w,ta=v;break e}ta=w}}}var o5={getCacheForType:function(i){var c=oa(Pn),g=c.data.get(i);return g===void 0&&(g=i(),c.data.set(i,g)),g},cacheSignal:function(){return oa(Pn).controller.signal}},l5=typeof WeakMap=="function"?WeakMap:Map,qr=0,an=null,vr=null,Nr=0,Kr=0,cs=null,Ro=!1,qc=!1,$x=!1,Ji=0,An=0,Oo=0,jl=0,zx=0,us=0,Gc=0,Id=null,qa=null,Hx=!1,Ef=0,Gw=0,_f=1/0,Sf=null,Io=null,Kn=0,Do=null,Yc=null,eo=0,qx=0,Gx=null,Yw=null,Dd=0,Yx=null;function ds(){return(qr&2)!==0&&Nr!==0?Nr&-Nr:D.T!==null?Zx():ga()}function Ww(){if(us===0)if((Nr&536870912)===0||Lr){var i=Gn;Gn<<=1,(Gn&3932160)===0&&(Gn=262144),us=i}else us=536870912;return i=os.current,i!==null&&(i.flags|=32),us}function Ga(i,c,g){(i===an&&(Kr===2||Kr===9)||i.cancelPendingCommit!==null)&&(Wc(i,0),Po(i,Nr,us,!1)),br(i,g),((qr&2)===0||i!==an)&&(i===an&&((qr&2)===0&&(jl|=g),An===4&&Po(i,Nr,us,!1)),mi(i))}function Vw(i,c,g){if((qr&6)!==0)throw Error(n(327));var m=!g&&(c&127)===0&&(c&i.expiredLanes)===0||Re(i,c),v=m?d5(i,c):Vx(i,c,!0),w=m;do{if(v===0){qc&&!m&&Po(i,c,0,!1);break}else{if(g=i.current.alternate,w&&!c5(g)){v=Vx(i,c,!1),w=!1;continue}if(v===2){if(w=c,i.errorRecoveryDisabledLanes&w)var j=0;else j=i.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;e:{var G=i;v=Id;var ue=G.current.memoizedState.isDehydrated;if(ue&&(Wc(G,j).flags|=256),j=Vx(G,j,!1),j!==2){if($x&&!ue){G.errorRecoveryDisabledLanes|=w,jl|=w,v=4;break e}w=qa,qa=v,w!==null&&(qa===null?qa=w:qa.push.apply(qa,w))}v=j}if(w=!1,v!==2)continue}}if(v===1){Wc(i,0),Po(i,c,0,!0);break}e:{switch(m=i,w=v,w){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Po(m,c,us,!Ro);break e;case 2:qa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(v=Ef+300-Ut(),10<v)){if(Po(m,c,us,!Ro),oe(m,0,!0)!==0)break e;eo=c,m.timeoutHandle=SE(Kw.bind(null,m,g,qa,Sf,Hx,c,us,jl,Gc,Ro,w,"Throttled",-0,0),v);break e}Kw(m,g,qa,Sf,Hx,c,us,jl,Gc,Ro,w,null,-0,0)}}break}while(!0);mi(i)}function Kw(i,c,g,m,v,w,j,G,ue,_e,Oe,Ue,Te,Le){if(i.timeoutHandle=-1,Ue=c.subtreeFlags,Ue&8192||(Ue&16785408)===16785408){Ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tt},$w(c,w,Ue);var xt=(w&62914560)===w?Ef-Ut():(w&4194048)===w?Gw-Ut():0;if(xt=W5(Ue,xt),xt!==null){eo=w,i.cancelPendingCommit=xt(nE.bind(null,i,c,w,g,m,v,j,G,ue,Oe,Ue,null,Te,Le)),Po(i,w,j,!_e);return}}nE(i,c,w,g,m,v,j,G,ue)}function c5(i){for(var c=i;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var v=g[m],w=v.getSnapshot;v=v.value;try{if(!gr(w(),v))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Po(i,c,g,m){c&=~zx,c&=~jl,i.suspendedLanes|=c,i.pingedLanes&=~c,m&&(i.warmLanes|=c),m=i.expirationTimes;for(var v=c;0<v;){var w=31-Yt(v),j=1<<w;m[w]=-1,v&=~j}g!==0&&lt(i,g,c)}function Tf(){return(qr&6)===0?(Pd(0),!1):!0}function Wx(){if(vr!==null){if(Kr===0)var i=vr.return;else i=vr,Hi=wl=null,cx(i),Pc=null,yd=0,i=vr;for(;i!==null;)Tw(i.alternate,i),i=i.return;vr=null}}function Wc(i,c){var g=i.timeoutHandle;g!==-1&&(i.timeoutHandle=-1,A5(g)),g=i.cancelPendingCommit,g!==null&&(i.cancelPendingCommit=null,g()),eo=0,Wx(),an=i,vr=g=$i(i.current,null),Nr=c,Kr=0,cs=null,Ro=!1,qc=Re(i,c),$x=!1,Gc=us=zx=jl=Oo=An=0,qa=Id=null,Hx=!1,(c&8)!==0&&(c|=c&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=c;0<m;){var v=31-Yt(m),w=1<<v;c|=i[v],m&=~w}return Ji=c,Yg(),g}function Xw(i,c){or=null,D.H=Cd,c===Dc||c===ef?(c=hk(),Kr=3):c===Qm?(c=hk(),Kr=4):Kr=c===Sx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,cs=c,vr===null&&(An=1,pf(i,Ss(c,i.current)))}function Qw(){var i=os.current;return i===null?!0:(Nr&4194048)===Nr?As===null:(Nr&62914560)===Nr||(Nr&536870912)!==0?i===As:!1}function Zw(){var i=D.H;return D.H=Cd,i===null?Cd:i}function Jw(){var i=D.A;return D.A=o5,i}function Cf(){An=4,Ro||(Nr&4194048)!==Nr&&os.current!==null||(qc=!0),(Oo&134217727)===0&&(jl&134217727)===0||an===null||Po(an,Nr,us,!1)}function Vx(i,c,g){var m=qr;qr|=2;var v=Zw(),w=Jw();(an!==i||Nr!==c)&&(Sf=null,Wc(i,c)),c=!1;var j=An;e:do try{if(Kr!==0&&vr!==null){var G=vr,ue=cs;switch(Kr){case 8:Wx(),j=6;break e;case 3:case 2:case 9:case 6:os.current===null&&(c=!0);var _e=Kr;if(Kr=0,cs=null,Vc(i,G,ue,_e),g&&qc){j=0;break e}break;default:_e=Kr,Kr=0,cs=null,Vc(i,G,ue,_e)}}u5(),j=An;break}catch(Oe){Xw(i,Oe)}while(!0);return c&&i.shellSuspendCounter++,Hi=wl=null,qr=m,D.H=v,D.A=w,vr===null&&(an=null,Nr=0,Yg()),j}function u5(){for(;vr!==null;)eE(vr)}function d5(i,c){var g=qr;qr|=2;var m=Zw(),v=Jw();an!==i||Nr!==c?(Sf=null,_f=Ut()+500,Wc(i,c)):qc=Re(i,c);e:do try{if(Kr!==0&&vr!==null){c=vr;var w=cs;t:switch(Kr){case 1:Kr=0,cs=null,Vc(i,c,w,1);break;case 2:case 9:if(uk(w)){Kr=0,cs=null,tE(c);break}c=function(){Kr!==2&&Kr!==9||an!==i||(Kr=7),mi(i)},w.then(c,c);break e;case 3:Kr=7;break e;case 4:Kr=5;break e;case 7:uk(w)?(Kr=0,cs=null,tE(c)):(Kr=0,cs=null,Vc(i,c,w,7));break;case 5:var j=null;switch(vr.tag){case 26:j=vr.memoizedState;case 5:case 27:var G=vr;if(j?UE(j):G.stateNode.complete){Kr=0,cs=null;var ue=G.sibling;if(ue!==null)vr=ue;else{var _e=G.return;_e!==null?(vr=_e,Nf(_e)):vr=null}break t}}Kr=0,cs=null,Vc(i,c,w,5);break;case 6:Kr=0,cs=null,Vc(i,c,w,6);break;case 8:Wx(),An=6;break e;default:throw Error(n(462))}}h5();break}catch(Oe){Xw(i,Oe)}while(!0);return Hi=wl=null,D.H=m,D.A=v,qr=g,vr!==null?0:(an=null,Nr=0,Yg(),An)}function h5(){for(;vr!==null&&!hr();)eE(vr)}function eE(i){var c=_w(i.alternate,i,Ji);i.memoizedProps=i.pendingProps,c===null?Nf(i):vr=c}function tE(i){var c=i,g=c.alternate;switch(c.tag){case 15:case 0:c=bw(g,c,c.pendingProps,c.type,void 0,Nr);break;case 11:c=bw(g,c,c.pendingProps,c.type.render,c.ref,Nr);break;case 5:cx(c);default:Tw(g,c),c=vr=J2(c,Ji),c=_w(g,c,Ji)}i.memoizedProps=i.pendingProps,c===null?Nf(i):vr=c}function Vc(i,c,g,m){Hi=wl=null,cx(c),Pc=null,yd=0;var v=c.return;try{if(e5(i,v,c,g,Nr)){An=1,pf(i,Ss(g,i.current)),vr=null;return}}catch(w){if(v!==null)throw vr=v,w;An=1,pf(i,Ss(g,i.current)),vr=null;return}c.flags&32768?(Lr||m===1?i=!0:qc||(Nr&536870912)!==0?i=!1:(Ro=i=!0,(m===2||m===9||m===3||m===6)&&(m=os.current,m!==null&&m.tag===13&&(m.flags|=16384))),rE(c,i)):Nf(c)}function Nf(i){var c=i;do{if((c.flags&32768)!==0){rE(c,Ro);return}i=c.return;var g=n5(c.alternate,c,Ji);if(g!==null){vr=g;return}if(c=c.sibling,c!==null){vr=c;return}vr=c=i}while(c!==null);An===0&&(An=5)}function rE(i,c){do{var g=a5(i.alternate,i);if(g!==null){g.flags&=32767,vr=g;return}if(g=i.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(i=i.sibling,i!==null)){vr=i;return}vr=i=g}while(i!==null);An=6,vr=null}function nE(i,c,g,m,v,w,j,G,ue){i.cancelPendingCommit=null;do Af();while(Kn!==0);if((qr&6)!==0)throw Error(n(327));if(c!==null){if(c===i.current)throw Error(n(177));if(w=c.lanes|c.childLanes,w|=Dm,ut(i,g,w,j,G,ue),i===an&&(vr=an=null,Nr=0),Yc=c,Do=i,eo=g,qx=w,Gx=v,Yw=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,m5(St,function(){return lE(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=D.T,D.T=null,v=X.p,X.p=2,j=qr,qr|=4;try{s5(i,c,g)}finally{qr=j,X.p=v,D.T=m}}Kn=1,aE(),sE(),iE()}}function aE(){if(Kn===1){Kn=0;var i=Do,c=Yc,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=D.T,D.T=null;var m=X.p;X.p=2;var v=qr;qr|=4;try{Bw(c,i);var w=ib,j=Vs(i.containerInfo),G=w.focusedElem,ue=w.selectionRange;if(j!==G&&G&&G.ownerDocument&&Dn(G.ownerDocument.documentElement,G)){if(ue!==null&&jm(G)){var _e=ue.start,Oe=ue.end;if(Oe===void 0&&(Oe=_e),"selectionStart"in G)G.selectionStart=_e,G.selectionEnd=Math.min(Oe,G.value.length);else{var Ue=G.ownerDocument||document,Te=Ue&&Ue.defaultView||window;if(Te.getSelection){var Le=Te.getSelection(),xt=G.textContent.length,Bt=Math.min(ue.start,xt),en=ue.end===void 0?Bt:Math.min(ue.end,xt);!Le.extend&&Bt>en&&(j=en,en=Bt,Bt=j);var me=Vr(G,Bt),ge=Vr(G,en);if(me&&ge&&(Le.rangeCount!==1||Le.anchorNode!==me.node||Le.anchorOffset!==me.offset||Le.focusNode!==ge.node||Le.focusOffset!==ge.offset)){var Ee=Ue.createRange();Ee.setStart(me.node,me.offset),Le.removeAllRanges(),Bt>en?(Le.addRange(Ee),Le.extend(ge.node,ge.offset)):(Ee.setEnd(ge.node,ge.offset),Le.addRange(Ee))}}}}for(Ue=[],Le=G;Le=Le.parentNode;)Le.nodeType===1&&Ue.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ue.length;G++){var Pe=Ue[G];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}$f=!!sb,ib=sb=null}finally{qr=v,X.p=m,D.T=g}}i.current=c,Kn=2}}function sE(){if(Kn===2){Kn=0;var i=Do,c=Yc,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=D.T,D.T=null;var m=X.p;X.p=2;var v=qr;qr|=4;try{Rw(i,c.alternate,c)}finally{qr=v,X.p=m,D.T=g}}Kn=3}}function iE(){if(Kn===4||Kn===3){Kn=0,ar();var i=Do,c=Yc,g=eo,m=Yw;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Kn=5:(Kn=0,Yc=Do=null,oE(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Io=null),nn(g),c=c.stateNode,Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Gr,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=D.T,v=X.p,X.p=2,D.T=null;try{for(var w=i.onRecoverableError,j=0;j<m.length;j++){var G=m[j];w(G.value,{componentStack:G.stack})}}finally{D.T=c,X.p=v}}(eo&3)!==0&&Af(),mi(i),v=i.pendingLanes,(g&261930)!==0&&(v&42)!==0?i===Yx?Dd++:(Dd=0,Yx=i):Dd=0,Pd(0)}}function oE(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,xd(c)))}function Af(){return aE(),sE(),iE(),lE()}function lE(){if(Kn!==5)return!1;var i=Do,c=qx;qx=0;var g=nn(eo),m=D.T,v=X.p;try{X.p=32>g?32:g,D.T=null,g=Gx,Gx=null;var w=Do,j=eo;if(Kn=0,Yc=Do=null,eo=0,(qr&6)!==0)throw Error(n(331));var G=qr;if(qr|=4,Hw(w.current),Uw(w,w.current,j,g),qr=G,Pd(0,!1),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Gr,w)}catch{}return!0}finally{X.p=v,D.T=m,oE(i,c)}}function cE(i,c,g){c=Ss(g,c),c=_x(i.stateNode,c,2),i=Ao(i,c,2),i!==null&&(br(i,2),mi(i))}function Xr(i,c,g){if(i.tag===3)cE(i,i,g);else for(;c!==null;){if(c.tag===3){cE(c,i,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Io===null||!Io.has(m))){i=Ss(g,i),g=uw(2),m=Ao(c,g,2),m!==null&&(dw(g,m,c,i),br(m,2),mi(m));break}}c=c.return}}function Kx(i,c,g){var m=i.pingCache;if(m===null){m=i.pingCache=new l5;var v=new Set;m.set(c,v)}else v=m.get(c),v===void 0&&(v=new Set,m.set(c,v));v.has(g)||($x=!0,v.add(g),i=g5.bind(null,i,c,g),c.then(i,i))}function g5(i,c,g){var m=i.pingCache;m!==null&&m.delete(c),i.pingedLanes|=i.suspendedLanes&g,i.warmLanes&=~g,an===i&&(Nr&g)===g&&(An===4||An===3&&(Nr&62914560)===Nr&&300>Ut()-Ef?(qr&2)===0&&Wc(i,0):zx|=g,Gc===Nr&&(Gc=0)),mi(i)}function uE(i,c){c===0&&(c=bt()),i=yl(i,c),i!==null&&(br(i,c),mi(i))}function f5(i){var c=i.memoizedState,g=0;c!==null&&(g=c.retryLane),uE(i,g)}function p5(i,c){var g=0;switch(i.tag){case 31:case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(g=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(c),uE(i,g)}function m5(i,c){return Ht(i,c)}var Lf=null,Kc=null,Xx=!1,jf=!1,Qx=!1,Bo=0;function mi(i){i!==Kc&&i.next===null&&(Kc===null?Lf=Kc=i:Kc=Kc.next=i),jf=!0,Xx||(Xx=!0,b5())}function Pd(i,c){if(!Qx&&jf){Qx=!0;do for(var g=!1,m=Lf;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var w=0;else{var j=m.suspendedLanes,G=m.pingedLanes;w=(1<<31-Yt(42|i)+1)-1,w&=v&~(j&~G),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(g=!0,fE(m,w))}else w=Nr,w=oe(m,m===an?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Re(m,w)||(g=!0,fE(m,w));m=m.next}while(g);Qx=!1}}function x5(){dE()}function dE(){jf=Xx=!1;var i=0;Bo!==0&&N5()&&(i=Bo);for(var c=Ut(),g=null,m=Lf;m!==null;){var v=m.next,w=hE(m,c);w===0?(m.next=null,g===null?Lf=v:g.next=v,v===null&&(Kc=g)):(g=m,(i!==0||(w&3)!==0)&&(jf=!0)),m=v}Kn!==0&&Kn!==5||Pd(i),Bo!==0&&(Bo=0)}function hE(i,c){for(var g=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var j=31-Yt(w),G=1<<j,ue=v[j];ue===-1?((G&g)===0||(G&m)!==0)&&(v[j]=qe(G,c)):ue<=c&&(i.expiredLanes|=G),w&=~G}if(c=an,g=Nr,g=oe(i,i===c?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,g===0||i===c&&(Kr===2||Kr===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&Zt(m),i.callbackNode=null,i.callbackPriority=0;if((g&3)===0||Re(i,g)){if(c=g&-g,c===i.callbackPriority)return c;switch(m!==null&&Zt(m),nn(g)){case 2:case 8:g=Ke;break;case 32:g=St;break;case 268435456:g=sr;break;default:g=St}return m=gE.bind(null,i),g=Ht(g,m),i.callbackPriority=c,i.callbackNode=g,c}return m!==null&&m!==null&&Zt(m),i.callbackPriority=2,i.callbackNode=null,2}function gE(i,c){if(Kn!==0&&Kn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var g=i.callbackNode;if(Af()&&i.callbackNode!==g)return null;var m=Nr;return m=oe(i,i===an?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(Vw(i,m,c),hE(i,Ut()),i.callbackNode!=null&&i.callbackNode===g?gE.bind(null,i):null)}function fE(i,c){if(Af())return null;Vw(i,c,!0)}function b5(){L5(function(){(qr&6)!==0?Ht(Ne,x5):dE()})}function Zx(){if(Bo===0){var i=Oc;i===0&&(i=aa,aa<<=1,(aa&261888)===0&&(aa=256)),Bo=i}return Bo}function pE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ys(""+i)}function mE(i,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,i.id&&g.setAttribute("form",i.id),c.parentNode.insertBefore(g,c),i=new FormData(i),g.parentNode.removeChild(g),i}function y5(i,c,g,m,v){if(c==="submit"&&g&&g.stateNode===v){var w=pE((v[Rr]||null).action),j=m.submitter;j&&(c=(c=j[Rr]||null)?pE(c.formAction):j.getAttribute("formAction"),c!==null&&(w=c,j=null));var G=new kc("action","action",null,m,v);i.push({event:G,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Bo!==0){var ue=j?mE(v,j):new FormData(v);bx(g,{pending:!0,data:ue,method:v.method,action:w},null,ue)}}else typeof w=="function"&&(G.preventDefault(),ue=j?mE(v,j):new FormData(v),bx(g,{pending:!0,data:ue,method:v.method,action:w},w,ue))},currentTarget:v}]})}}for(var Jx=0;Jx<Im.length;Jx++){var eb=Im[Jx],v5=eb.toLowerCase(),k5=eb[0].toUpperCase()+eb.slice(1);Ks(v5,"on"+k5)}Ks(W2,"onAnimationEnd"),Ks(V2,"onAnimationIteration"),Ks(K2,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(PI,"onTransitionRun"),Ks(BI,"onTransitionStart"),Ks(FI,"onTransitionCancel"),Ks(X2,"onTransitionEnd"),Ae("onMouseEnter",["mouseout","mouseover"]),Ae("onMouseLeave",["mouseout","mouseover"]),Ae("onPointerEnter",["pointerout","pointerover"]),Ae("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bd));function xE(i,c){c=(c&4)!==0;for(var g=0;g<i.length;g++){var m=i[g],v=m.event;m=m.listeners;e:{var w=void 0;if(c)for(var j=m.length-1;0<=j;j--){var G=m[j],ue=G.instance,_e=G.currentTarget;if(G=G.listener,ue!==w&&v.isPropagationStopped())break e;w=G,v.currentTarget=_e;try{w(v)}catch(Oe){Gg(Oe)}v.currentTarget=null,w=ue}else for(j=0;j<m.length;j++){if(G=m[j],ue=G.instance,_e=G.currentTarget,G=G.listener,ue!==w&&v.isPropagationStopped())break e;w=G,v.currentTarget=_e;try{w(v)}catch(Oe){Gg(Oe)}v.currentTarget=null,w=ue}}}}function kr(i,c){var g=c[Fa];g===void 0&&(g=c[Fa]=new Set);var m=i+"__bubble";g.has(m)||(bE(c,i,2,!1),g.add(m))}function tb(i,c,g){var m=0;c&&(m|=4),bE(g,i,m,c)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function rb(i){if(!i[Mf]){i[Mf]=!0,he.forEach(function(g){g!=="selectionchange"&&(w5.has(g)||tb(g,!1,i),tb(g,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[Mf]||(c[Mf]=!0,tb("selectionchange",!1,c))}}function bE(i,c,g,m){switch(WE(c)){case 2:var v=X5;break;case 8:v=Q5;break;default:v=xb}g=v.bind(null,c,g,i),v=void 0,!di||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(c,g,{capture:!0,passive:v}):i.addEventListener(c,g,!0):v!==void 0?i.addEventListener(c,g,{passive:v}):i.addEventListener(c,g,!1)}function nb(i,c,g,m,v){var w=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var j=m.tag;if(j===3||j===4){var G=m.stateNode.containerInfo;if(G===v)break;if(j===4)for(j=m.return;j!==null;){var ue=j.tag;if((ue===3||ue===4)&&j.stateNode.containerInfo===v)return;j=j.return}for(;G!==null;){if(j=$e(G),j===null)return;if(ue=j.tag,ue===5||ue===6||ue===26||ue===27){m=w=j;continue e}G=G.parentNode}}m=m.return}bc(function(){var _e=w,Oe=Wt(g),Ue=[];e:{var Te=Q2.get(i);if(Te!==void 0){var Le=kc,xt=i;switch(i){case"keypress":if(vc(g)===0)break e;case"keydown":case"keyup":Le=Xe;break;case"focusin":xt="focus",Le=cd;break;case"focusout":xt="blur",Le=cd;break;case"beforeblur":case"afterblur":Le=cd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Ze;break;case W2:case V2:case K2:Le=Tm;break;case X2:Le=Ce;break;case"scroll":case"scrollend":Le=Fg;break;case"wheel":Le=nr;break;case"copy":case"cut":case"paste":Le=Cm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Ie;break;case"toggle":case"beforetoggle":Le=ns}var Bt=(c&4)!==0,en=!Bt&&(i==="scroll"||i==="scrollend"),me=Bt?Te!==null?Te+"Capture":null:Te;Bt=[];for(var ge=_e,Ee;ge!==null;){var Pe=ge;if(Ee=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||Ee===null||me===null||(Pe=wo(ge,me),Pe!=null&&Bt.push(Fd(ge,Pe,Ee))),en)break;ge=ge.return}0<Bt.length&&(Te=new Le(Te,xt,null,g,Oe),Ue.push({event:Te,listeners:Bt}))}}if((c&7)===0){e:{if(Te=i==="mouseover"||i==="pointerover",Le=i==="mouseout"||i==="pointerout",Te&&g!==mt&&(xt=g.relatedTarget||g.fromElement)&&($e(xt)||xt[Yn]))break e;if((Le||Te)&&(Te=Oe.window===Oe?Oe:(Te=Oe.ownerDocument)?Te.defaultView||Te.parentWindow:window,Le?(xt=g.relatedTarget||g.toElement,Le=_e,xt=xt?$e(xt):null,xt!==null&&(en=o(xt),Bt=xt.tag,xt!==en||Bt!==5&&Bt!==27&&Bt!==6)&&(xt=null)):(Le=null,xt=_e),Le!==xt)){if(Bt=Ug,Pe="onMouseLeave",me="onMouseEnter",ge="mouse",(i==="pointerout"||i==="pointerover")&&(Bt=Ie,Pe="onPointerLeave",me="onPointerEnter",ge="pointer"),en=Le==null?Te:fr(Le),Ee=xt==null?Te:fr(xt),Te=new Bt(Pe,ge+"leave",Le,g,Oe),Te.target=en,Te.relatedTarget=Ee,Pe=null,$e(Oe)===_e&&(Bt=new Bt(me,ge+"enter",xt,g,Oe),Bt.target=Ee,Bt.relatedTarget=en,Pe=Bt),en=Pe,Le&&xt)t:{for(Bt=E5,me=Le,ge=xt,Ee=0,Pe=me;Pe;Pe=Bt(Pe))Ee++;Pe=0;for(var Mt=ge;Mt;Mt=Bt(Mt))Pe++;for(;0<Ee-Pe;)me=Bt(me),Ee--;for(;0<Pe-Ee;)ge=Bt(ge),Pe--;for(;Ee--;){if(me===ge||ge!==null&&me===ge.alternate){Bt=me;break t}me=Bt(me),ge=Bt(ge)}Bt=null}else Bt=null;Le!==null&&yE(Ue,Te,Le,Bt,!1),xt!==null&&en!==null&&yE(Ue,en,xt,Bt,!0)}}e:{if(Te=_e?fr(_e):window,Le=Te.nodeName&&Te.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Te.type==="file")var Ur=gd;else if($t(Te))if(ss)Ur=Vn;else{Ur=nt;var _t=Lt}else Le=Te.nodeName,!Le||Le.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?_e&&ui(_e.elementType)&&(Ur=gd):Ur=Dr;if(Ur&&(Ur=Ur(i,_e))){V(Ue,Ur,g,Oe);break e}_t&&_t(i,Te,_e),i==="focusout"&&_e&&Te.type==="number"&&_e.memoizedProps.value!=null&&Di(Te,"number",Te.value)}switch(_t=_e?fr(_e):window,i){case"focusin":($t(_t)||_t.contentEditable==="true")&&(Tc=_t,Mm=_e,fd=null);break;case"focusout":fd=Mm=Tc=null;break;case"mousedown":Rm=!0;break;case"contextmenu":case"mouseup":case"dragend":Rm=!1,G2(Ue,g,Oe);break;case"selectionchange":if(DI)break;case"keydown":case"keyup":G2(Ue,g,Oe)}var ur;if(ea)e:{switch(i){case"compositionstart":var Ar="onCompositionStart";break e;case"compositionend":Ar="onCompositionEnd";break e;case"compositionupdate":Ar="onCompositionUpdate";break e}Ar=void 0}else Na?Ec(i,g)&&(Ar="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(Ar="onCompositionStart");Ar&&(Hg&&g.locale!=="ko"&&(Na||Ar!=="onCompositionStart"?Ar==="onCompositionEnd"&&Na&&(ur=Bg()):(hi=Oe,id="value"in hi?hi.value:hi.textContent,Na=!0)),_t=Rf(_e,Ar),0<_t.length&&(Ar=new zg(Ar,i,null,g,Oe),Ue.push({event:Ar,listeners:_t}),ur?Ar.data=ur:(ur=_c(g),ur!==null&&(Ar.data=ur)))),(ur=Am?dd(i,g):Lm(i,g))&&(Ar=Rf(_e,"onBeforeInput"),0<Ar.length&&(_t=new zg("onBeforeInput","beforeinput",null,g,Oe),Ue.push({event:_t,listeners:Ar}),_t.data=ur)),y5(Ue,i,_e,g,Oe)}xE(Ue,c)})}function Fd(i,c,g){return{instance:i,listener:c,currentTarget:g}}function Rf(i,c){for(var g=c+"Capture",m=[];i!==null;){var v=i,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=wo(i,g),v!=null&&m.unshift(Fd(i,v,w)),v=wo(i,c),v!=null&&m.push(Fd(i,v,w))),i.tag===3)return m;i=i.return}return[]}function E5(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function yE(i,c,g,m,v){for(var w=c._reactName,j=[];g!==null&&g!==m;){var G=g,ue=G.alternate,_e=G.stateNode;if(G=G.tag,ue!==null&&ue===m)break;G!==5&&G!==26&&G!==27||_e===null||(ue=_e,v?(_e=wo(g,w),_e!=null&&j.unshift(Fd(g,_e,ue))):v||(_e=wo(g,w),_e!=null&&j.push(Fd(g,_e,ue)))),g=g.return}j.length!==0&&i.push({event:c,listeners:j})}var _5=/\r\n?/g,S5=/\u0000|\uFFFD/g;function vE(i){return(typeof i=="string"?i:""+i).replace(_5,`
`).replace(S5,"")}function kE(i,c){return c=vE(c),vE(i)===c}function Jr(i,c,g,m,v,w){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Ot(i,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Ot(i,""+m);break;case"className":Xt(i,"class",m);break;case"tabIndex":Xt(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Xt(i,g,m);break;case"style":yr(i,m,w);break;case"data":if(c!=="object"){Xt(i,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){i.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(g);break}m=Ys(""+m),i.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(g==="formAction"?(c!=="input"&&Jr(i,c,"name",v.name,v,null),Jr(i,c,"formEncType",v.formEncType,v,null),Jr(i,c,"formMethod",v.formMethod,v,null),Jr(i,c,"formTarget",v.formTarget,v,null)):(Jr(i,c,"encType",v.encType,v,null),Jr(i,c,"method",v.method,v,null),Jr(i,c,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(g);break}m=Ys(""+m),i.setAttribute(g,m);break;case"onClick":m!=null&&(i.onclick=tt);break;case"onScroll":m!=null&&kr("scroll",i);break;case"onScrollEnd":m!=null&&kr("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(g=m.__html,g!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}g=Ys(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(g,""+m):i.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(g,""):i.removeAttribute(g);break;case"capture":case"download":m===!0?i.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(g,m):i.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(g,m):i.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(g):i.setAttribute(g,m);break;case"popover":kr("beforetoggle",i),kr("toggle",i),ln(i,"popover",m);break;case"xlinkActuate":ir(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ir(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ir(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ir(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ir(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ir(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ir(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ir(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ir(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ln(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Gs.get(g)||g,ln(i,g,m))}}function ab(i,c,g,m,v,w){switch(g){case"style":yr(i,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(g=m.__html,g!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=g}}break;case"children":typeof m=="string"?Ot(i,m):(typeof m=="number"||typeof m=="bigint")&&Ot(i,""+m);break;case"onScroll":m!=null&&kr("scroll",i);break;case"onScrollEnd":m!=null&&kr("scrollend",i);break;case"onClick":m!=null&&(i.onclick=tt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Be.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(v=g.endsWith("Capture"),c=g.slice(2,v?g.length-7:void 0),w=i[Rr]||null,w=w!=null?w[g]:null,typeof w=="function"&&i.removeEventListener(c,w,v),typeof m=="function")){typeof w!="function"&&w!==null&&(g in i?i[g]=null:i.hasAttribute(g)&&i.removeAttribute(g)),i.addEventListener(c,m,v);break e}g in i?i[g]=m:m===!0?i.setAttribute(g,""):ln(i,g,m)}}}function ca(i,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kr("error",i),kr("load",i);var m=!1,v=!1,w;for(w in g)if(g.hasOwnProperty(w)){var j=g[w];if(j!=null)switch(w){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Jr(i,c,w,j,g,null)}}v&&Jr(i,c,"srcSet",g.srcSet,g,null),m&&Jr(i,c,"src",g.src,g,null);return;case"input":kr("invalid",i);var G=w=j=v=null,ue=null,_e=null;for(m in g)if(g.hasOwnProperty(m)){var Oe=g[m];if(Oe!=null)switch(m){case"name":v=Oe;break;case"type":j=Oe;break;case"checked":ue=Oe;break;case"defaultChecked":_e=Oe;break;case"value":w=Oe;break;case"defaultValue":G=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:Jr(i,c,m,Oe,g,null)}}vs(i,w,G,ue,_e,j,v,!1);return;case"select":kr("invalid",i),m=j=w=null;for(v in g)if(g.hasOwnProperty(v)&&(G=g[v],G!=null))switch(v){case"value":w=G;break;case"defaultValue":j=G;break;case"multiple":m=G;default:Jr(i,c,v,G,g,null)}c=w,g=j,i.multiple=!!m,c!=null?Wn(i,!!m,c,!1):g!=null&&Wn(i,!!m,g,!0);return;case"textarea":kr("invalid",i),w=v=m=null;for(j in g)if(g.hasOwnProperty(j)&&(G=g[j],G!=null))switch(j){case"value":m=G;break;case"defaultValue":v=G;break;case"children":w=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:Jr(i,c,j,G,g,null)}qs(i,m,v,w);return;case"option":for(ue in g)if(g.hasOwnProperty(ue)&&(m=g[ue],m!=null))switch(ue){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Jr(i,c,ue,m,g,null)}return;case"dialog":kr("beforetoggle",i),kr("toggle",i),kr("cancel",i),kr("close",i);break;case"iframe":case"object":kr("load",i);break;case"video":case"audio":for(m=0;m<Bd.length;m++)kr(Bd[m],i);break;case"image":kr("error",i),kr("load",i);break;case"details":kr("toggle",i);break;case"embed":case"source":case"link":kr("error",i),kr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in g)if(g.hasOwnProperty(_e)&&(m=g[_e],m!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Jr(i,c,_e,m,g,null)}return;default:if(ui(c)){for(Oe in g)g.hasOwnProperty(Oe)&&(m=g[Oe],m!==void 0&&ab(i,c,Oe,m,g,void 0));return}}for(G in g)g.hasOwnProperty(G)&&(m=g[G],m!=null&&Jr(i,c,G,m,g,null))}function T5(i,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,j=null,G=null,ue=null,_e=null,Oe=null;for(Le in g){var Ue=g[Le];if(g.hasOwnProperty(Le)&&Ue!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":ue=Ue;default:m.hasOwnProperty(Le)||Jr(i,c,Le,null,m,Ue)}}for(var Te in m){var Le=m[Te];if(Ue=g[Te],m.hasOwnProperty(Te)&&(Le!=null||Ue!=null))switch(Te){case"type":w=Le;break;case"name":v=Le;break;case"checked":_e=Le;break;case"defaultChecked":Oe=Le;break;case"value":j=Le;break;case"defaultValue":G=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,c));break;default:Le!==Ue&&Jr(i,c,Te,Le,m,Ue)}}ys(i,j,G,ue,_e,Oe,w,v);return;case"select":Le=j=G=Te=null;for(w in g)if(ue=g[w],g.hasOwnProperty(w)&&ue!=null)switch(w){case"value":break;case"multiple":Le=ue;default:m.hasOwnProperty(w)||Jr(i,c,w,null,m,ue)}for(v in m)if(w=m[v],ue=g[v],m.hasOwnProperty(v)&&(w!=null||ue!=null))switch(v){case"value":Te=w;break;case"defaultValue":G=w;break;case"multiple":j=w;default:w!==ue&&Jr(i,c,v,w,m,ue)}c=G,g=j,m=Le,Te!=null?Wn(i,!!g,Te,!1):!!m!=!!g&&(c!=null?Wn(i,!!g,c,!0):Wn(i,!!g,g?[]:"",!1));return;case"textarea":Le=Te=null;for(G in g)if(v=g[G],g.hasOwnProperty(G)&&v!=null&&!m.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Jr(i,c,G,null,m,v)}for(j in m)if(v=m[j],w=g[j],m.hasOwnProperty(j)&&(v!=null||w!=null))switch(j){case"value":Te=v;break;case"defaultValue":Le=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==w&&Jr(i,c,j,v,m,w)}hl(i,Te,Le);return;case"option":for(var xt in g)if(Te=g[xt],g.hasOwnProperty(xt)&&Te!=null&&!m.hasOwnProperty(xt))switch(xt){case"selected":i.selected=!1;break;default:Jr(i,c,xt,null,m,Te)}for(ue in m)if(Te=m[ue],Le=g[ue],m.hasOwnProperty(ue)&&Te!==Le&&(Te!=null||Le!=null))switch(ue){case"selected":i.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:Jr(i,c,ue,Te,m,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in g)Te=g[Bt],g.hasOwnProperty(Bt)&&Te!=null&&!m.hasOwnProperty(Bt)&&Jr(i,c,Bt,null,m,Te);for(_e in m)if(Te=m[_e],Le=g[_e],m.hasOwnProperty(_e)&&Te!==Le&&(Te!=null||Le!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,c));break;default:Jr(i,c,_e,Te,m,Le)}return;default:if(ui(c)){for(var en in g)Te=g[en],g.hasOwnProperty(en)&&Te!==void 0&&!m.hasOwnProperty(en)&&ab(i,c,en,void 0,m,Te);for(Oe in m)Te=m[Oe],Le=g[Oe],!m.hasOwnProperty(Oe)||Te===Le||Te===void 0&&Le===void 0||ab(i,c,Oe,Te,m,Le);return}}for(var me in g)Te=g[me],g.hasOwnProperty(me)&&Te!=null&&!m.hasOwnProperty(me)&&Jr(i,c,me,null,m,Te);for(Ue in m)Te=m[Ue],Le=g[Ue],!m.hasOwnProperty(Ue)||Te===Le||Te==null&&Le==null||Jr(i,c,Ue,Te,m,Le)}function wE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C5(){if(typeof performance.getEntriesByType=="function"){for(var i=0,c=0,g=performance.getEntriesByType("resource"),m=0;m<g.length;m++){var v=g[m],w=v.transferSize,j=v.initiatorType,G=v.duration;if(w&&G&&wE(j)){for(j=0,G=v.responseEnd,m+=1;m<g.length;m++){var ue=g[m],_e=ue.startTime;if(_e>G)break;var Oe=ue.transferSize,Ue=ue.initiatorType;Oe&&wE(Ue)&&(ue=ue.responseEnd,j+=Oe*(ue<G?1:(G-_e)/(ue-_e)))}if(--m,c+=8*(w+j)/(v.duration/1e3),i++,10<i)break}}if(0<i)return c/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var sb=null,ib=null;function Of(i){return i.nodeType===9?i:i.ownerDocument}function EE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _E(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function ob(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var lb=null;function N5(){var i=window.event;return i&&i.type==="popstate"?i===lb?!1:(lb=i,!0):(lb=null,!1)}var SE=typeof setTimeout=="function"?setTimeout:void 0,A5=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,L5=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(i){return TE.resolve(null).then(i).catch(j5)}:SE;function j5(i){setTimeout(function(){throw i})}function Fo(i){return i==="head"}function CE(i,c){var g=c,m=0;do{var v=g.nextSibling;if(i.removeChild(g),v&&v.nodeType===8)if(g=v.data,g==="/$"||g==="/&"){if(m===0){i.removeChild(v),Jc(c);return}m--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")m++;else if(g==="html")Ud(i.ownerDocument.documentElement);else if(g==="head"){g=i.ownerDocument.head,Ud(g);for(var w=g.firstChild;w;){var j=w.nextSibling,G=w.nodeName;w[ft]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&w.rel.toLowerCase()==="stylesheet"||g.removeChild(w),w=j}}else g==="body"&&Ud(i.ownerDocument.body);g=v}while(g);Jc(c)}function NE(i,c){var g=i;i=0;do{var m=g.nextSibling;if(g.nodeType===1?c?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(c?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),m&&m.nodeType===8)if(g=m.data,g==="/$"){if(i===0)break;i--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||i++;g=m}while(g)}function cb(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":cb(g),de(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}i.removeChild(g)}}function M5(i,c,g,m){for(;i.nodeType===1;){var v=g;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[ft])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Ls(i.nextSibling),i===null)break}return null}function R5(i,c,g){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!g||(i=Ls(i.nextSibling),i===null))return null;return i}function AE(i,c){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ls(i.nextSibling),i===null))return null;return i}function ub(i){return i.data==="$?"||i.data==="$~"}function db(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function O5(i,c){var g=i.ownerDocument;if(i.data==="$~")i._reactRetry=c;else if(i.data!=="$?"||g.readyState!=="loading")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Ls(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return i}var hb=null;function LE(i){i=i.nextSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"||g==="/&"){if(c===0)return Ls(i.nextSibling);c--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||c++}i=i.nextSibling}return null}function jE(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(c===0)return i;c--}else g!=="/$"&&g!=="/&"||c++}i=i.previousSibling}return null}function ME(i,c,g){switch(c=Of(g),i){case"html":if(i=c.documentElement,!i)throw Error(n(452));return i;case"head":if(i=c.head,!i)throw Error(n(453));return i;case"body":if(i=c.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Ud(i){for(var c=i.attributes;c.length;)i.removeAttributeNode(c[0]);de(i)}var js=new Map,RE=new Set;function If(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var to=X.d;X.d={f:I5,r:D5,D:P5,C:B5,L:F5,m:U5,X:z5,S:$5,M:H5};function I5(){var i=to.f(),c=Tf();return i||c}function D5(i){var c=ot(i);c!==null&&c.tag===5&&c.type==="form"?Xk(c):to.r(i)}var Xc=typeof document>"u"?null:document;function OE(i,c,g){var m=Xc;if(m&&typeof c=="string"&&c){var v=ma(c);v='link[rel="'+i+'"][href="'+v+'"]',typeof g=="string"&&(v+='[crossorigin="'+g+'"]'),RE.has(v)||(RE.add(v),i={rel:i,crossOrigin:g,href:c},m.querySelector(v)===null&&(c=m.createElement("link"),ca(c,"link",i),Vt(c),m.head.appendChild(c)))}}function P5(i){to.D(i),OE("dns-prefetch",i,null)}function B5(i,c){to.C(i,c),OE("preconnect",i,c)}function F5(i,c,g){to.L(i,c,g);var m=Xc;if(m&&i&&c){var v='link[rel="preload"][as="'+ma(c)+'"]';c==="image"&&g&&g.imageSrcSet?(v+='[imagesrcset="'+ma(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(v+='[imagesizes="'+ma(g.imageSizes)+'"]')):v+='[href="'+ma(i)+'"]';var w=v;switch(c){case"style":w=Qc(i);break;case"script":w=Zc(i)}js.has(w)||(i=p({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:i,as:c},g),js.set(w,i),m.querySelector(v)!==null||c==="style"&&m.querySelector($d(w))||c==="script"&&m.querySelector(zd(w))||(c=m.createElement("link"),ca(c,"link",i),Vt(c),m.head.appendChild(c)))}}function U5(i,c){to.m(i,c);var g=Xc;if(g&&i){var m=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+ma(m)+'"][href="'+ma(i)+'"]',w=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Zc(i)}if(!js.has(w)&&(i=p({rel:"modulepreload",href:i},c),js.set(w,i),g.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(zd(w)))return}m=g.createElement("link"),ca(m,"link",i),Vt(m),g.head.appendChild(m)}}}function $5(i,c,g){to.S(i,c,g);var m=Xc;if(m&&i){var v=Hr(m).hoistableStyles,w=Qc(i);c=c||"default";var j=v.get(w);if(!j){var G={loading:0,preload:null};if(j=m.querySelector($d(w)))G.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":c},g),(g=js.get(w))&&gb(i,g);var ue=j=m.createElement("link");Vt(ue),ca(ue,"link",i),ue._p=new Promise(function(_e,Oe){ue.onload=_e,ue.onerror=Oe}),ue.addEventListener("load",function(){G.loading|=1}),ue.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Df(j,c,m)}j={type:"stylesheet",instance:j,count:1,state:G},v.set(w,j)}}}function z5(i,c){to.X(i,c);var g=Xc;if(g&&i){var m=Hr(g).hoistableScripts,v=Zc(i),w=m.get(v);w||(w=g.querySelector(zd(v)),w||(i=p({src:i,async:!0},c),(c=js.get(v))&&fb(i,c),w=g.createElement("script"),Vt(w),ca(w,"link",i),g.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function H5(i,c){to.M(i,c);var g=Xc;if(g&&i){var m=Hr(g).hoistableScripts,v=Zc(i),w=m.get(v);w||(w=g.querySelector(zd(v)),w||(i=p({src:i,async:!0,type:"module"},c),(c=js.get(v))&&fb(i,c),w=g.createElement("script"),Vt(w),ca(w,"link",i),g.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function IE(i,c,g,m){var v=(v=re.current)?If(v):null;if(!v)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=Qc(g.href),g=Hr(v).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){i=Qc(g.href);var w=Hr(v).hoistableStyles,j=w.get(i);if(j||(v=v.ownerDocument||v,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,j),(w=v.querySelector($d(i)))&&!w._p&&(j.instance=w,j.state.loading=5),js.has(i)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},js.set(i,g),w||q5(v,i,g,j.state))),c&&m===null)throw Error(n(528,""));return j}if(c&&m!==null)throw Error(n(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Zc(g),g=Hr(v).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Qc(i){return'href="'+ma(i)+'"'}function $d(i){return'link[rel="stylesheet"]['+i+"]"}function DE(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function q5(i,c,g,m){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=i.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),ca(c,"link",g),Vt(c),i.head.appendChild(c))}function Zc(i){return'[src="'+ma(i)+'"]'}function zd(i){return"script[async]"+i}function PE(i,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=i.querySelector('style[data-href~="'+ma(g.href)+'"]');if(m)return c.instance=m,Vt(m),m;var v=p({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Vt(m),ca(m,"style",v),Df(m,g.precedence,i),c.instance=m;case"stylesheet":v=Qc(g.href);var w=i.querySelector($d(v));if(w)return c.state.loading|=4,c.instance=w,Vt(w),w;m=DE(g),(v=js.get(v))&&gb(m,v),w=(i.ownerDocument||i).createElement("link"),Vt(w);var j=w;return j._p=new Promise(function(G,ue){j.onload=G,j.onerror=ue}),ca(w,"link",m),c.state.loading|=4,Df(w,g.precedence,i),c.instance=w;case"script":return w=Zc(g.src),(v=i.querySelector(zd(w)))?(c.instance=v,Vt(v),v):(m=g,(v=js.get(w))&&(m=p({},g),fb(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),Vt(v),ca(v,"link",m),i.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Df(m,g.precedence,i));return c.instance}function Df(i,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,w=v,j=0;j<m.length;j++){var G=m[j];if(G.dataset.precedence===c)w=G;else if(w!==v)break}w?w.parentNode.insertBefore(i,w.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(i,c.firstChild))}function gb(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function fb(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var Pf=null;function BE(i,c,g){if(Pf===null){var m=new Map,v=Pf=new Map;v.set(g,m)}else v=Pf,m=v.get(g),m||(m=new Map,v.set(g,m));if(m.has(i))return m;for(m.set(i,null),g=g.getElementsByTagName(i),v=0;v<g.length;v++){var w=g[v];if(!(w[ft]||w[Pr]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var j=w.getAttribute(c)||"";j=i+j;var G=m.get(j);G?G.push(w):m.set(j,[w])}}return m}function FE(i,c,g){i=i.ownerDocument||i,i.head.insertBefore(g,c==="title"?i.querySelector("head > title"):null)}function G5(i,c,g){if(g===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function UE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Y5(i,c,g,m){if(g.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var v=Qc(m.href),w=c.querySelector($d(v));if(w){c=w._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(i.count++,i=Bf.bind(i),c.then(i,i)),g.state.loading|=4,g.instance=w,Vt(w);return}w=c.ownerDocument||c,m=DE(m),(v=js.get(v))&&gb(m,v),w=w.createElement("link"),Vt(w);var j=w;j._p=new Promise(function(G,ue){j.onload=G,j.onerror=ue}),ca(w,"link",m),g.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(i.count++,g=Bf.bind(i),c.addEventListener("load",g),c.addEventListener("error",g))}}var pb=0;function W5(i,c){return i.stylesheets&&i.count===0&&Uf(i,i.stylesheets),0<i.count||0<i.imgCount?function(g){var m=setTimeout(function(){if(i.stylesheets&&Uf(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+c);0<i.imgBytes&&pb===0&&(pb=62500*C5());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Uf(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>pb?50:800)+c);return i.unsuspend=g,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function Bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ff=null;function Uf(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ff=new Map,c.forEach(V5,i),Ff=null,Bf.call(i))}function V5(i,c){if(!(c.state.loading&4)){var g=Ff.get(i);if(g)var m=g.get(null);else{g=new Map,Ff.set(i,g);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var j=v[w];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(g.set(j.dataset.precedence,j),m=j)}m&&g.set(null,m)}v=c.instance,j=v.getAttribute("data-precedence"),w=g.get(j)||m,w===m&&g.set(null,v),g.set(j,v),this.count++,m=Bf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),w?w.parentNode.insertBefore(v,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),c.state.loading|=4}}var Hd={$$typeof:A,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function K5(i,c,g,m,v,w,j,G,ue){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.hiddenUpdates=Cr(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function $E(i,c,g,m,v,w,j,G,ue,_e,Oe,Ue){return i=new K5(i,c,g,j,ue,_e,Oe,Ue,G),c=1,w===!0&&(c|=24),w=is(3,null,null,c),i.current=w,w.stateNode=i,c=Vm(),c.refCount++,i.pooledCache=c,c.refCount++,w.memoizedState={element:m,isDehydrated:g,cache:c},Zm(w),i}function zE(i){return i?(i=Ac,i):Ac}function HE(i,c,g,m,v,w){v=zE(v),m.context===null?m.context=v:m.pendingContext=v,m=No(c),m.payload={element:g},w=w===void 0?null:w,w!==null&&(m.callback=w),g=Ao(i,m,c),g!==null&&(Ga(g,i,c),kd(g,i,c))}function qE(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<c?g:c}}function mb(i,c){qE(i,c),(i=i.alternate)&&qE(i,c)}function GE(i){if(i.tag===13||i.tag===31){var c=yl(i,67108864);c!==null&&Ga(c,i,67108864),mb(i,67108864)}}function YE(i){if(i.tag===13||i.tag===31){var c=ds();c=cr(c);var g=yl(i,c);g!==null&&Ga(g,i,c),mb(i,c)}}var $f=!0;function X5(i,c,g,m){var v=D.T;D.T=null;var w=X.p;try{X.p=2,xb(i,c,g,m)}finally{X.p=w,D.T=v}}function Q5(i,c,g,m){var v=D.T;D.T=null;var w=X.p;try{X.p=8,xb(i,c,g,m)}finally{X.p=w,D.T=v}}function xb(i,c,g,m){if($f){var v=bb(m);if(v===null)nb(i,c,m,zf,g),VE(i,m);else if(J5(v,i,c,g,m))m.stopPropagation();else if(VE(i,m),c&4&&-1<Z5.indexOf(i)){for(;v!==null;){var w=ot(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var j=Qr(w.pendingLanes);if(j!==0){var G=w;for(G.pendingLanes|=2,G.entangledLanes|=2;j;){var ue=1<<31-Yt(j);G.entanglements[1]|=ue,j&=~ue}mi(w),(qr&6)===0&&(_f=Ut()+500,Pd(0))}}break;case 31:case 13:G=yl(w,2),G!==null&&Ga(G,w,2),Tf(),mb(w,2)}if(w=bb(m),w===null&&nb(i,c,m,zf,g),w===v)break;v=w}v!==null&&m.stopPropagation()}else nb(i,c,m,null,g)}}function bb(i){return i=Wt(i),yb(i)}var zf=null;function yb(i){if(zf=null,i=$e(i),i!==null){var c=o(i);if(c===null)i=null;else{var g=c.tag;if(g===13){if(i=l(c),i!==null)return i;i=null}else if(g===31){if(i=u(c),i!==null)return i;i=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return zf=i,null}function WE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dn()){case Ne:return 2;case Ke:return 8;case St:case Tt:return 32;case sr:return 268435456;default:return 32}default:return 32}}var vb=!1,Uo=null,$o=null,zo=null,qd=new Map,Gd=new Map,Ho=[],Z5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VE(i,c){switch(i){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":qd.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gd.delete(c.pointerId)}}function Yd(i,c,g,m,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:w,targetContainers:[v]},c!==null&&(c=ot(c),c!==null&&GE(c)),i):(i.eventSystemFlags|=m,c=i.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),i)}function J5(i,c,g,m,v){switch(c){case"focusin":return Uo=Yd(Uo,i,c,g,m,v),!0;case"dragenter":return $o=Yd($o,i,c,g,m,v),!0;case"mouseover":return zo=Yd(zo,i,c,g,m,v),!0;case"pointerover":var w=v.pointerId;return qd.set(w,Yd(qd.get(w)||null,i,c,g,m,v)),!0;case"gotpointercapture":return w=v.pointerId,Gd.set(w,Yd(Gd.get(w)||null,i,c,g,m,v)),!0}return!1}function KE(i){var c=$e(i.target);if(c!==null){var g=o(c);if(g!==null){if(c=g.tag,c===13){if(c=l(g),c!==null){i.blockedOn=c,fa(i.priority,function(){YE(g)});return}}else if(c===31){if(c=u(g),c!==null){i.blockedOn=c,fa(i.priority,function(){YE(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Hf(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var g=bb(i.nativeEvent);if(g===null){g=i.nativeEvent;var m=new g.constructor(g.type,g);mt=m,g.target.dispatchEvent(m),mt=null}else return c=ot(g),c!==null&&GE(c),i.blockedOn=g,!1;c.shift()}return!0}function XE(i,c,g){Hf(i)&&g.delete(c)}function e6(){vb=!1,Uo!==null&&Hf(Uo)&&(Uo=null),$o!==null&&Hf($o)&&($o=null),zo!==null&&Hf(zo)&&(zo=null),qd.forEach(XE),Gd.forEach(XE)}function qf(i,c){i.blockedOn===c&&(i.blockedOn=null,vb||(vb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,e6)))}var Gf=null;function QE(i){Gf!==i&&(Gf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gf===i&&(Gf=null);for(var c=0;c<i.length;c+=3){var g=i[c],m=i[c+1],v=i[c+2];if(typeof m!="function"){if(yb(m||g)===null)continue;break}var w=ot(g);w!==null&&(i.splice(c,3),c-=3,bx(w,{pending:!0,data:v,method:g.method,action:m},m,v))}}))}function Jc(i){function c(ue){return qf(ue,i)}Uo!==null&&qf(Uo,i),$o!==null&&qf($o,i),zo!==null&&qf(zo,i),qd.forEach(c),Gd.forEach(c);for(var g=0;g<Ho.length;g++){var m=Ho[g];m.blockedOn===i&&(m.blockedOn=null)}for(;0<Ho.length&&(g=Ho[0],g.blockedOn===null);)KE(g),g.blockedOn===null&&Ho.shift();if(g=(i.ownerDocument||i).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var v=g[m],w=g[m+1],j=v[Rr]||null;if(typeof w=="function")j||QE(g);else if(j){var G=null;if(w&&w.hasAttribute("formAction")){if(v=w,j=w[Rr]||null)G=j.formAction;else if(yb(v)!==null)continue}else G=j.action;typeof G=="function"?g[m+1]=G:(g.splice(m,3),m-=3),QE(g)}}}function ZE(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(j){return v=j})},focusReset:"manual",scroll:"manual"})}function c(){v!==null&&(v(),v=null),m||setTimeout(g,20)}function g(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(g,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),v!==null&&(v(),v=null)}}}function kb(i){this._internalRoot=i}Yf.prototype.render=kb.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));var g=c.current,m=ds();HE(g,m,i,c,null,null)},Yf.prototype.unmount=kb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;HE(i.current,2,null,i,null,null),Tf(),c[Yn]=null}};function Yf(i){this._internalRoot=i}Yf.prototype.unstable_scheduleHydration=function(i){if(i){var c=ga();i={blockedOn:null,target:i,priority:c};for(var g=0;g<Ho.length&&c!==0&&c<Ho[g].priority;g++);Ho.splice(g,0,i),g===0&&KE(i)}};var JE=t.version;if(JE!=="19.2.0")throw Error(n(527,JE,"19.2.0"));X.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(c),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var t6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{Gr=Wf.inject(t6),Tr=Wf}catch{}}return Vd.createRoot=function(i,c){if(!a(i))throw Error(n(299));var g=!1,m="",v=iw,w=ow,j=lw;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=$E(i,1,!1,null,null,g,m,null,v,w,j,ZE),i[Yn]=c.current,rb(i),new kb(c)},Vd.hydrateRoot=function(i,c,g){if(!a(i))throw Error(n(299));var m=!1,v="",w=iw,j=ow,G=lw,ue=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(v=g.identifierPrefix),g.onUncaughtError!==void 0&&(w=g.onUncaughtError),g.onCaughtError!==void 0&&(j=g.onCaughtError),g.onRecoverableError!==void 0&&(G=g.onRecoverableError),g.formState!==void 0&&(ue=g.formState)),c=$E(i,1,!0,c,g??null,m,v,ue,w,j,G,ZE),c.context=zE(null),g=c.current,m=ds(),m=cr(m),v=No(m),v.callback=null,Ao(g,v,m),g=m,c.current.lanes=g,br(c,g),mi(c),i[Yn]=c.current,rb(i),new Yf(c)},Vd.version="19.2.0",Vd}var c_;function u6(){if(c_)return Eb.exports;c_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Eb.exports=c6(),Eb.exports}var d6=u6(),C=lv();const Mn=Hu(C);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u_="popstate";function h6(e={}){function t(n,a){let{pathname:o,search:l,hash:u}=n.location;return Ny("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Kh(a)}return f6(t,r,null,e)}function Sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ci(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g6(){return Math.random().toString(36).substring(2,10)}function d_(e,t){return{usr:e.state,key:e.key,idx:t}}function Ny(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qu(t):t,state:r,key:t&&t.key||n||g6()}}function Kh({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function f6(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,l=a.history,u="POP",d=null,h=f();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-h;h=S,d&&d({action:u,location:k.location,delta:_})}function x(S,_){u="PUSH";let T=Ny(k.location,S,_);h=f()+1;let A=d_(T,h),I=k.createHref(T);try{l.pushState(A,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(I)}o&&d&&d({action:u,location:k.location,delta:1})}function b(S,_){u="REPLACE";let T=Ny(k.location,S,_);h=f();let A=d_(T,h),I=k.createHref(T);l.replaceState(A,"",I),o&&d&&d({action:u,location:k.location,delta:0})}function y(S){return p6(S)}let k={get action(){return u},get location(){return e(a,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(u_,p),d=S,()=>{a.removeEventListener(u_,p),d=null}},createHref(S){return t(a,S)},createURL:y,encodeLocation(S){let _=y(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:b,go(S){return l.go(S)}};return k}function p6(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Sn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Kh(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function KC(e,t,r="/"){return m6(e,t,r,!1)}function m6(e,t,r,n){let a=typeof t=="string"?qu(t):t,o=ho(a.pathname||"/",r);if(o==null)return null;let l=XC(e);x6(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=N6(o);u=T6(l[d],h,n)}return u}function XC(e,t=[],r=[],n="",a=!1){let o=(l,u,d=a,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Sn(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=lo([n,f.relativePath]),x=r.concat(f);l.children&&l.children.length>0&&(Sn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),XC(l.children,t,x,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:_6(p,l.index),routesMeta:x})};return e.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of QC(l.path))o(l,u,!0,d)}),t}function QC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let l=QC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function x6(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:S6(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var b6=/^:[\w-]+$/,y6=3,v6=2,k6=1,w6=10,E6=-2,h_=e=>e==="*";function _6(e,t){let r=e.split("/"),n=r.length;return r.some(h_)&&(n+=E6),t&&(n+=v6),r.filter(a=>!h_(a)).reduce((a,o)=>a+(b6.test(o)?y6:o===""?k6:w6),n)}function S6(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function T6(e,t,r=!1){let{routesMeta:n}=e,a={},o="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],h=u===n.length-1,f=o==="/"?t:t.slice(o.length)||"/",p=U0({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),x=d.route;if(!p&&h&&r&&!n[n.length-1].route.index&&(p=U0({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:lo([o,p.pathname]),pathnameBase:M6(lo([o,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(o=lo([o,p.pathnameBase]))}return l}function U0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=C6(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:p},x)=>{if(f==="*"){let y=u[x]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const b=u[x];return p&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:e}}function C6(e,t=!1,r=!0){Ci(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function N6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ci(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ho(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function A6(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?qu(e):e;return{pathname:r?r.startsWith("/")?r:L6(r,t):t,search:R6(n),hash:O6(a)}}function L6(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Nb(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j6(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ZC(e){let t=j6(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function JC(e,t,r,n=!1){let a;typeof e=="string"?a=qu(e):(a={...e},Sn(!a.pathname||!a.pathname.includes("?"),Nb("?","pathname","search",a)),Sn(!a.pathname||!a.pathname.includes("#"),Nb("#","pathname","hash",a)),Sn(!a.search||!a.search.includes("#"),Nb("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;a.pathname=x.join("/")}u=p>=0?t[p]:"/"}let d=A6(a,u),h=l&&l!=="/"&&l.endsWith("/"),f=(o||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var lo=e=>e.join("/").replace(/\/\/+/g,"/"),M6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,O6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function I6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var eN=["POST","PUT","PATCH","DELETE"];new Set(eN);var D6=["GET",...eN];new Set(D6);var Gu=C.createContext(null);Gu.displayName="DataRouter";var Rp=C.createContext(null);Rp.displayName="DataRouterState";C.createContext(!1);var tN=C.createContext({isTransitioning:!1});tN.displayName="ViewTransition";var P6=C.createContext(new Map);P6.displayName="Fetchers";var B6=C.createContext(null);B6.displayName="Await";var Li=C.createContext(null);Li.displayName="Navigation";var fg=C.createContext(null);fg.displayName="Location";var mo=C.createContext({outlet:null,matches:[],isDataRoute:!1});mo.displayName="Route";var cv=C.createContext(null);cv.displayName="RouteError";function F6(e,{relative:t}={}){Sn(pg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(Li),{hash:a,pathname:o,search:l}=mg(e,{relative:t}),u=o;return r!=="/"&&(u=o==="/"?r:lo([r,o])),n.createHref({pathname:u,search:l,hash:a})}function pg(){return C.useContext(fg)!=null}function sl(){return Sn(pg(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(fg).location}var rN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nN(e){C.useContext(Li).static||C.useLayoutEffect(e)}function Op(){let{isDataRoute:e}=C.useContext(mo);return e?Z6():U6()}function U6(){Sn(pg(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Gu),{basename:t,navigator:r}=C.useContext(Li),{matches:n}=C.useContext(mo),{pathname:a}=sl(),o=JSON.stringify(ZC(n)),l=C.useRef(!1);return nN(()=>{l.current=!0}),C.useCallback((d,h={})=>{if(Ci(l.current,rN),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=JC(d,JSON.parse(o),a,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:lo([t,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[t,r,o,a,e])}C.createContext(null);function mg(e,{relative:t}={}){let{matches:r}=C.useContext(mo),{pathname:n}=sl(),a=JSON.stringify(ZC(r));return C.useMemo(()=>JC(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function $6(e,t){return aN(e,t)}function aN(e,t,r,n,a){Sn(pg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(Li),{matches:l}=C.useContext(mo),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let T=p&&p.path||"";sN(h,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let x=sl(),b;if(t){let T=typeof t=="string"?qu(t):t;Sn(f==="/"||T.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=x;let y=b.pathname||"/",k=y;if(f!=="/"){let T=f.replace(/^\//,"").split("/");k="/"+y.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=KC(e,{pathname:k});Ci(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ci(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Y6(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:lo([f,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:lo([f,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,r,n,a);return t&&_?C.createElement(fg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},_):_}function z6(){let e=Q6(),t=I6(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:o},"ErrorBoundary")," or"," ",C.createElement("code",{style:o},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:a},r):null,l)}var H6=C.createElement(z6,null),q6=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?C.createElement(mo.Provider,{value:this.props.routeContext},C.createElement(cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function G6({routeContext:e,match:t,children:r}){let n=C.useContext(Gu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(mo.Provider,{value:e},r)}function Y6(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=r?.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);Sn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:x}=r,b=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let x,b=!1,y=null,k=null;r&&(x=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||H6,u&&(d<0&&p===0?(sN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,k=null):d===p&&(b=!0,k=f.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,p+1)),_=()=>{let T;return x?T=y:b?T=k:f.route.Component?T=C.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=h,C.createElement(G6,{match:f,routeContext:{outlet:h,matches:S,isDataRoute:r!=null},children:T})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?C.createElement(q6,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function uv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W6(e){let t=C.useContext(Gu);return Sn(t,uv(e)),t}function V6(e){let t=C.useContext(Rp);return Sn(t,uv(e)),t}function K6(e){let t=C.useContext(mo);return Sn(t,uv(e)),t}function dv(e){let t=K6(e),r=t.matches[t.matches.length-1];return Sn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function X6(){return dv("useRouteId")}function Q6(){let e=C.useContext(cv),t=V6("useRouteError"),r=dv("useRouteError");return e!==void 0?e:t.errors?.[r]}function Z6(){let{router:e}=W6("useNavigate"),t=dv("useNavigate"),r=C.useRef(!1);return nN(()=>{r.current=!0}),C.useCallback(async(a,o={})=>{Ci(r.current,rN),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var g_={};function sN(e,t,r){!t&&!g_[e]&&(g_[e]=!0,Ci(!1,r))}C.memo(J6);function J6({routes:e,future:t,state:r,unstable_onError:n}){return aN(e,void 0,r,n,t)}function lu(e){Sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eD({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:o=!1}){Sn(!pg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof r=="string"&&(r=qu(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:x="default"}=r,b=C.useMemo(()=>{let y=ho(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:x},navigationType:n}},[l,d,h,f,p,x,n]);return Ci(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:C.createElement(Li.Provider,{value:u},C.createElement(fg.Provider,{children:t,value:b}))}function tD({children:e,location:t}){return $6(Ay(e),t)}function Ay(e,t=[]){let r=[];return C.Children.forEach(e,(n,a)=>{if(!C.isValidElement(n))return;let o=[...t,a];if(n.type===C.Fragment){r.push.apply(r,Ay(n.props.children,o));return}Sn(n.type===lu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ay(n.props.children,o)),r.push(l)}),r}var y0="get",v0="application/x-www-form-urlencoded";function Ip(e){return e!=null&&typeof e.tagName=="string"}function rD(e){return Ip(e)&&e.tagName.toLowerCase()==="button"}function nD(e){return Ip(e)&&e.tagName.toLowerCase()==="form"}function aD(e){return Ip(e)&&e.tagName.toLowerCase()==="input"}function sD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iD(e,t){return e.button===0&&(!t||t==="_self")&&!sD(e)}var Vf=null;function oD(){if(Vf===null)try{new FormData(document.createElement("form"),0),Vf=!1}catch{Vf=!0}return Vf}var lD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ab(e){return e!=null&&!lD.has(e)?(Ci(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${v0}"`),null):e}function cD(e,t){let r,n,a,o,l;if(nD(e)){let u=e.getAttribute("action");n=u?ho(u,t):null,r=e.getAttribute("method")||y0,a=Ab(e.getAttribute("enctype"))||v0,o=new FormData(e)}else if(rD(e)||aD(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?ho(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||y0,a=Ab(e.getAttribute("formenctype"))||Ab(u.getAttribute("enctype"))||v0,o=new FormData(u,e),!oD()){let{name:h,type:f,value:p}=e;if(f==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,p)}}else{if(Ip(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=y0,n=null,a=v0,l=e}return o&&a==="text/plain"&&(l=o,o=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uD(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ho(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function dD(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hD(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function gD(e,t,r){let n=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await dD(o,r);return l.links?l.links():[]}return[]}));return xD(n.flat(1).filter(hD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function f_(e,t,r,n,a,o){let l=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,u=(d,h)=>r[h].pathname!==d.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?t.filter((d,h)=>{let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function fD(e,t,{includeHydrateFallback:r}={}){return pD(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function pD(e){return[...new Set(e)]}function mD(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function xD(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let o=JSON.stringify(mD(a));return r.has(o)||(r.add(o),n.push({key:o,link:a})),n},[])}function iN(){let e=C.useContext(Gu);return hv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function bD(){let e=C.useContext(Rp);return hv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gv=C.createContext(void 0);gv.displayName="FrameworkContext";function oN(){let e=C.useContext(gv);return hv(e,"You must render this element inside a <HydratedRouter> element"),e}function yD(e,t){let r=C.useContext(gv),[n,a]=C.useState(!1),[o,l]=C.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=t,x=C.useRef(null);C.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let k=_=>{_.forEach(T=>{l(T.isIntersecting)})},S=new IntersectionObserver(k,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),C.useEffect(()=>{if(n){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[n]);let b=()=>{a(!0)},y=()=>{a(!1),l(!1)};return r?e!=="intent"?[o,x,{}]:[o,x,{onFocus:Kd(u,b),onBlur:Kd(d,y),onMouseEnter:Kd(h,b),onMouseLeave:Kd(f,y),onTouchStart:Kd(p,b)}]:[!1,x,{}]}function Kd(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function vD({page:e,...t}){let{router:r}=iN(),n=C.useMemo(()=>KC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(wD,{page:e,matches:n,...t}):null}function kD(e){let{manifest:t,routeModules:r}=oN(),[n,a]=C.useState([]);return C.useEffect(()=>{let o=!1;return gD(e,t,r).then(l=>{o||a(l)}),()=>{o=!0}},[e,t,r]),n}function wD({page:e,matches:t,...r}){let n=sl(),{manifest:a,routeModules:o}=oN(),{basename:l}=iN(),{loaderData:u,matches:d}=bD(),h=C.useMemo(()=>f_(e,t,d,a,n,"data"),[e,t,d,a,n]),f=C.useMemo(()=>f_(e,t,d,a,n,"assets"),[e,t,d,a,n]),p=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,k=!1;if(t.forEach(_=>{let T=a.routes[_.route.id];!T||!T.hasLoader||(!h.some(A=>A.route.id===_.route.id)&&_.route.id in u&&o[_.route.id]?.shouldRevalidate||T.hasClientLoader?k=!0:y.add(_.route.id))}),y.size===0)return[];let S=uD(e,l,"data");return k&&y.size>0&&S.searchParams.set("_routes",t.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,a,h,t,e,o]),x=C.useMemo(()=>fD(f,a),[f,a]),b=kD(f);return C.createElement(C.Fragment,null,p.map(y=>C.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),x.map(y=>C.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),b.map(({key:y,link:k})=>C.createElement("link",{key:y,nonce:r.nonce,...k})))}function ED(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lN&&(window.__reactRouterVersion="7.9.4")}catch{}function _D({basename:e,children:t,window:r}){let n=C.useRef();n.current==null&&(n.current=h6({window:r,v5Compat:!0}));let a=n.current,[o,l]=C.useState({action:a.action,location:a.location}),u=C.useCallback(d=>{C.startTransition(()=>l(d))},[l]);return C.useLayoutEffect(()=>a.listen(u),[a,u]),C.createElement(eD,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var cN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uN=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:f,viewTransition:p,...x},b){let{basename:y}=C.useContext(Li),k=typeof h=="string"&&cN.test(h),S,_=!1;if(typeof h=="string"&&k&&(S=h,lN))try{let Z=new URL(window.location.href),z=h.startsWith("//")?new URL(Z.protocol+h):new URL(h),ee=ho(z.pathname,y);z.origin===Z.origin&&ee!=null?h=ee+z.search+z.hash:_=!0}catch{Ci(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=F6(h,{relative:a}),[A,I,O]=yD(n,x),B=ND(h,{replace:l,state:u,target:d,preventScrollReset:f,relative:a,viewTransition:p});function F(Z){t&&t(Z),Z.defaultPrevented||B(Z)}let ae=C.createElement("a",{...x,...O,href:S||T,onClick:_||o?t:F,ref:ED(b,I),target:d,"data-discover":!k&&r==="render"?"true":void 0});return A&&!k?C.createElement(C.Fragment,null,ae,C.createElement(vD,{page:T})):ae});uN.displayName="Link";var SD=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...h},f){let p=mg(l,{relative:h.relative}),x=sl(),b=C.useContext(Rp),{navigator:y,basename:k}=C.useContext(Li),S=b!=null&&RD(p)&&u===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,T=x.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(T=T.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&k&&(A=ho(A,k)||A);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=T===_||!a&&T.startsWith(_)&&T.charAt(I)==="/",B=A!=null&&(A===_||!a&&A.startsWith(_)&&A.charAt(_.length)==="/"),F={isActive:O,isPending:B,isTransitioning:S},ae=O?t:void 0,Z;typeof n=="function"?Z=n(F):Z=[n,O?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(F):o;return C.createElement(uN,{...h,"aria-current":ae,className:Z,ref:f,style:z,to:l,viewTransition:u},typeof d=="function"?d(F):d)});SD.displayName="NavLink";var TD=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:o,method:l=y0,action:u,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:p,...x},b)=>{let y=jD(),k=MD(u,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&cN.test(u),T=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let I=A.nativeEvent.submitter,O=I?.getAttribute("formmethod")||l;y(I||A.currentTarget,{fetcherKey:t,method:O,navigate:r,replace:a,state:o,relative:h,preventScrollReset:f,viewTransition:p})};return C.createElement("form",{ref:b,method:S,action:k,onSubmit:n?d:T,...x,"data-discover":!_&&e==="render"?"true":void 0})});TD.displayName="Form";function CD(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dN(e){let t=C.useContext(Gu);return Sn(t,CD(e)),t}function ND(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=Op(),d=sl(),h=mg(e,{relative:o});return C.useCallback(f=>{if(iD(f,t)){f.preventDefault();let p=r!==void 0?r:Kh(d)===Kh(h);u(e,{replace:p,state:n,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,r,n,t,e,a,o,l])}var AD=0,LD=()=>`__${String(++AD)}__`;function jD(){let{router:e}=dN("useSubmit"),{basename:t}=C.useContext(Li),r=X6();return C.useCallback(async(n,a={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=cD(n,t);if(a.navigate===!1){let f=a.fetcherKey||LD();await e.fetch(f,r,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function MD(e,{relative:t}={}){let{basename:r}=C.useContext(Li),n=C.useContext(mo);Sn(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...mg(e||".",{relative:t})},l=sl();if(e==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();o.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:lo([r,o.pathname])),Kh(o)}function RD(e,{relative:t}={}){let r=C.useContext(tN);Sn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dN("useViewTransitionState"),a=mg(e,{relative:t});if(!r.isTransitioning)return!1;let o=ho(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=ho(r.nextLocation.pathname,n)||r.nextLocation.pathname;return U0(a.pathname,l)!=null||U0(a.pathname,o)!=null}var OD=VC();const ID=Hu(OD),DD="modulepreload",PD=function(e){return"/"+e},p_={},tr=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let d=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(r.map(h=>{if(h=PD(h),h in p_)return;p_[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":DD,f||(x.as="script"),x.crossOrigin="",x.href=h,u&&x.setAttribute("nonce",u),document.head.appendChild(x),f)return new Promise((b,y)=>{x.addEventListener("load",b),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return t().catch(o)})},hN="927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",gN=(e,t,r,n)=>{if(localStorage.setItem("google_user",JSON.stringify(e)),localStorage.setItem("google_access_token",t),r&&localStorage.setItem("google_refresh_token",r),n){const a=Date.now()+n*1e3;localStorage.setItem("google_token_expiration",a.toString())}else try{const a=Yu(t);a?.exp&&localStorage.setItem("google_token_expiration",(a.exp*1e3).toString())}catch{const o=Date.now()+36e5;localStorage.setItem("google_token_expiration",o.toString())}},Ly=()=>{const e=localStorage.getItem("google_user"),t=localStorage.getItem("google_access_token"),r=localStorage.getItem("google_refresh_token");return e&&t?{user:JSON.parse(e),accessToken:t,isAuthenticated:!0,refreshToken:r||void 0}:{user:null,accessToken:null,isAuthenticated:!1}},jy=()=>{localStorage.removeItem("google_user"),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_refresh_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("last_token_refresh")},Yu=e=>{try{if(!e||typeof e!="string"||e.split(".").length!==3)return console.warn("Token is not a valid JWT format"),null;const t=e.split(".")[1];if(!t)return null;const r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return console.warn("Failed to decode JWT (token may be an access token, not an ID token):",t),null}},fN=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const u=parseInt(t,10)-Date.now();return Math.max(0,u)}const r=Yu(e);if(!r||!r.exp)return 0;const n=r.exp*1e3,a=Date.now(),o=n-a;return Math.max(0,o)}catch(t){return console.error("Failed to get token time remaining:",t),0}},cu=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const u=parseInt(t,10),d=Date.now(),h=300*1e3;return u-d<h}const r=Yu(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration, assuming valid"),!1;const n=r.exp*1e3,a=Date.now(),o=300*1e3,l=n-a;if(l>0&&l<600*1e3&&l>=o){const u=Math.floor(l/6e4);console.warn(` Token expires in ${u} minutes`)}return l<o}catch(t){return console.error("Failed to check token expiration:",t),!0}},My=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const u=parseInt(t,10),d=Date.now(),h=900*1e3;return u-d<h}const r=Yu(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration for refresh check, assuming no refresh needed"),!1;const n=r.exp*1e3,a=Date.now(),o=900*1e3;return n-a<o}catch(t){return console.error("Failed to check if token should refresh:",t),!1}},BD=async e=>{try{const t=localStorage.getItem("google_refresh_token");if(t){console.log(" Refreshing token via OAuth refresh endpoint...");const n=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({refresh_token:t})});if(n.ok){const a=await n.json();return console.log(" Token refreshed successfully via OAuth"),{accessToken:a.access_token,refreshToken:a.refresh_token||t}}else console.log("OAuth refresh failed:",n.status)}return console.log(" Attempting silent sign-in fallback..."),new Promise(r=>{if(typeof google>"u"||!google.accounts){console.log("Google API not loaded"),r(null);return}let n=!1;const a=setTimeout(()=>{n||(n=!0,console.log("Silent sign-in not available"),r(null))},5e3);google.accounts.id.initialize({client_id:hN,callback:o=>{!n&&o.credential&&(n=!0,clearTimeout(a),console.log(" Silent sign-in successful"),r({accessToken:o.credential}))},auto_select:!0,cancel_on_tap_outside:!0})})}catch(t){return console.error("Token refresh failed:",t),null}},FD=Object.freeze(Object.defineProperty({__proto__:null,GOOGLE_CLIENT_ID:hN,clearAuthState:jy,decodeJWT:Yu,getTokenTimeRemaining:fN,isTokenExpiringSoon:cu,loadAuthState:Ly,refreshGoogleToken:BD,saveAuthState:gN,shouldRefreshToken:My},Symbol.toStringTag,{value:"Module"})),pN=C.createContext(void 0),$s=()=>{const e=C.useContext(pN);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},UD=({children:e})=>{const[t,r]=C.useState(()=>Ly()),[n,a]=C.useState(!1),o=C.useCallback(h=>{try{const f=Yu(h);if(!f||!f.email){console.error("Login failed: Invalid token or missing user info");return}const p={email:f.email,name:f.name,picture:f.picture,sub:f.sub};gN(p,h),r({user:p,accessToken:h,isAuthenticated:!0}),console.log("User logged in:",p.email)}catch(f){console.error("Login failed:",f)}},[]),l=C.useCallback(()=>{jy(),r({user:null,accessToken:null,isAuthenticated:!1}),console.log("User logged out")},[]),u=C.useCallback(async()=>{try{if(!t.accessToken)return console.log("No token to refresh"),!1;console.log(" Attempting token refresh...");const{refreshGoogleToken:h,decodeJWT:f,saveAuthState:p}=await tr(async()=>{const{refreshGoogleToken:b,decodeJWT:y,saveAuthState:k}=await Promise.resolve().then(()=>FD);return{refreshGoogleToken:b,decodeJWT:y,saveAuthState:k}},[]),x=await h(t.accessToken);if(x){const b=f(x.accessToken);if(b){const y={email:b.email,name:b.name,picture:b.picture,sub:b.sub};return p(y,x.accessToken,x.refreshToken),r({user:y,accessToken:x.accessToken,isAuthenticated:!0}),console.log(" Token refreshed successfully"),!0}}return console.log(" Token refresh not available (user may need to re-authenticate manually)"),!1}catch(h){return console.log(" Token refresh unavailable:",h instanceof Error?h.message:"Unknown error"),!1}},[t.accessToken]),d=C.useCallback(async()=>t.accessToken?cu(t.accessToken)?(console.log("Token expired, logging out"),l(),null):t.accessToken:null,[t.accessToken,l]);return C.useEffect(()=>{(async()=>{if(n||(a(!0),t.isAuthenticated))return;const f=Ly();if(!f.accessToken||!f.user){console.log("No saved auth state found");return}console.log("Attempting auto-login for:",f.user.email),cu(f.accessToken)?(console.log("Saved token expired, clearing auth state"),jy()):(r(f),console.log("Auto-login successful with existing token"))})()},[n,t.isAuthenticated,o]),C.useEffect(()=>{if(!t.isAuthenticated||!t.accessToken)return;const h=t.accessToken;My(h)?(console.log(" Token should be refreshed on mount (less than 15 min remaining)"),u().then(p=>{!p&&cu(h)&&(console.warn(" Token refresh failed and token expiring soon, logging out..."),l())})):cu(h)&&(console.warn(" Token critically close to expiring on mount, attempting refresh..."),u().then(p=>{p||(console.warn(" Critical token refresh failed on mount, logging out..."),l())}));const f=setInterval(async()=>{if(!t.accessToken)return;const p=t.accessToken;if(My(p)){const x=fN(p),b=Math.floor(x/6e4);console.log(` Token expires in ${b} minutes, attempting proactive refresh...`);const y=await u();!y&&cu(p)?(console.warn(" Token expiring soon and refresh unavailable. Please re-authenticate."),l()):y||console.log(` Silent refresh not available, but token still valid for ${b} minutes`)}},120*1e3);return()=>clearInterval(f)},[t.isAuthenticated,t.accessToken,l,u]),s.jsx(pN.Provider,{value:{...t,login:o,logout:l,refreshToken:u,getToken:d},children:e})},mN=C.createContext(void 0),$D=({children:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),o=d=>{a(!1),r(h=>{const f=h.findIndex(p=>p.query.toLowerCase()===d.query.toLowerCase());if(f>=0){const p=[...h];return p[f]=d,p}else return[...h,d]})},l=d=>{r(d)},u=()=>{a(!0),r([])};return s.jsx(mN.Provider,{value:{searchResults:t,addSearchResult:o,setSearchResults:l,clearSearchResults:u,wasCleared:n},children:e})},zD=()=>{const e=C.useContext(mN);if(e===void 0)throw new Error("useSearchResults must be used within a SearchResultsProvider");return e},Ry=(e,t)=>t.some(r=>e instanceof r);let m_,x_;function HD(){return m_||(m_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qD(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Oy=new WeakMap,Lb=new WeakMap,Dp=new WeakMap;function GD(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{r(Yl(e.result)),a()},l=()=>{n(e.error),a()};e.addEventListener("success",o),e.addEventListener("error",l)});return Dp.set(t,e),t}function YD(e){if(Oy.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{r(),a()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});Oy.set(e,t)}let Iy={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Oy.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Yl(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function xN(e){Iy=e(Iy)}function WD(e){return qD().includes(e)?function(...t){return e.apply(Dy(this),t),Yl(this.request)}:function(...t){return Yl(e.apply(Dy(this),t))}}function VD(e){return typeof e=="function"?WD(e):(e instanceof IDBTransaction&&YD(e),Ry(e,HD())?new Proxy(e,Iy):e)}function Yl(e){if(e instanceof IDBRequest)return GD(e);if(Lb.has(e))return Lb.get(e);const t=VD(e);return t!==e&&(Lb.set(e,t),Dp.set(t,e)),t}const Dy=e=>Dp.get(e);function KD(e,t,{blocked:r,upgrade:n,blocking:a,terminated:o}={}){const l=indexedDB.open(e,t),u=Yl(l);return n&&l.addEventListener("upgradeneeded",d=>{n(Yl(l.result),d.oldVersion,d.newVersion,Yl(l.transaction),d)}),r&&l.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const XD=["get","getKey","getAll","getAllKeys","count"],QD=["put","add","delete","clear"],jb=new Map;function b_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(jb.get(t))return jb.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=QD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||XD.includes(r)))return;const o=async function(l,...u){const d=this.transaction(l,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[r](...u),a&&d.done]))[0]};return jb.set(t,o),o}xN(e=>({...e,get:(t,r,n)=>b_(t,r)||e.get(t,r,n),has:(t,r)=>!!b_(t,r)||e.has(t,r)}));const ZD=["continue","continuePrimaryKey","advance"],y_={},Py=new WeakMap,bN=new WeakMap,JD={get(e,t){if(!ZD.includes(t))return e[t];let r=y_[t];return r||(r=y_[t]=function(...n){Py.set(this,bN.get(this)[t](...n))}),r}};async function*eP(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,JD);for(bN.set(r,t),Dp.set(r,Dy(t));t;)yield r,t=await(Py.get(r)||t.continue()),Py.delete(r)}function v_(e,t){return t===Symbol.asyncIterator&&Ry(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Ry(e,[IDBIndex,IDBObjectStore])}xN(e=>({...e,get(t,r,n){return v_(t,r)?eP:e.get(t,r,n)},has(t,r){return v_(t,r)||e.has(t,r)}}));class tP{db=null;DB_NAME="youtube-playlist-db";DB_VERSION=1;async init(){if(!this.db)try{this.db=await KD(this.DB_NAME,this.DB_VERSION,{upgrade(t){if(t.objectStoreNames.contains("currentPlaylist")||t.createObjectStore("currentPlaylist",{keyPath:"id"}),!t.objectStoreNames.contains("savedPlaylists")){const r=t.createObjectStore("savedPlaylists",{keyPath:"id",autoIncrement:!0});r.createIndex("by-name","name",{unique:!1}),r.createIndex("by-date","createdAt",{unique:!1})}}}),await this.migrateFromLocalStorage()}catch(t){throw console.error("Failed to initialize playlist database:",t),t}}async migrateFromLocalStorage(){try{const t=localStorage.getItem("youtube_playlist"),r=localStorage.getItem("youtube_current_track");if(t){const n=JSON.parse(t),a=r?parseInt(r,10):null,o=await this.db.get("currentPlaylist","current");(!o||o.tracks.length===0)&&(await this.saveCurrentPlaylist(n,a),console.log(" Migrated playlist from localStorage to IndexedDB"))}}catch(t){console.error("Failed to migrate from localStorage:",t)}}async saveCurrentPlaylist(t,r){await this.init(),await this.db.put("currentPlaylist",{id:"current",tracks:t,currentIndex:r,isPlaying:!1,updatedAt:Date.now()})}async loadCurrentPlaylist(){await this.init();const t=await this.db.get("currentPlaylist","current");return t?{tracks:t.tracks||[],currentIndex:t.currentIndex}:{tracks:[],currentIndex:null}}async clearCurrentPlaylist(){await this.init(),await this.db.delete("currentPlaylist","current")}async savePlaylist(t,r){if(await this.init(),!t||t.trim().length===0)throw new Error("Playlist name cannot be empty");return await this.db.add("savedPlaylists",{id:0,name:t.trim(),tracks:r,createdAt:Date.now(),updatedAt:Date.now()})}async updatePlaylist(t,r,n){await this.init();const a=await this.db.get("savedPlaylists",t);if(!a)throw new Error("Playlist not found");await this.db.put("savedPlaylists",{...a,name:r.trim(),tracks:n,updatedAt:Date.now()})}async loadPlaylist(t){return await this.init(),(await this.db.get("savedPlaylists",t))?.tracks||[]}async getPlaylist(t){return await this.init(),await this.db.get("savedPlaylists",t)}async listPlaylists(){return await this.init(),(await this.db.getAll("savedPlaylists")).map(r=>({id:r.id,name:r.name,trackCount:r.tracks.length,createdAt:r.createdAt,updatedAt:r.updatedAt})).sort((r,n)=>n.updatedAt-r.updatedAt)}async deletePlaylist(t){await this.init(),await this.db.delete("savedPlaylists",t)}async playlistExists(t){return await this.init(),(await this.db.getAllFromIndex("savedPlaylists","by-name",t.trim())).length>0}async searchPlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=t.toLowerCase();return r.filter(a=>a.name.toLowerCase().includes(n)).map(a=>({id:a.id,name:a.name,trackCount:a.tracks.length,createdAt:a.createdAt,updatedAt:a.updatedAt})).sort((a,o)=>o.updatedAt-a.updatedAt)}async exportPlaylist(t){await this.init();const r=await this.db.get("savedPlaylists",t);if(!r)throw new Error("Playlist not found");return JSON.stringify({name:r.name,tracks:r.tracks,exportedAt:Date.now(),version:1},null,2)}async importPlaylist(t){await this.init();try{const r=JSON.parse(t);if(!r.name||!Array.isArray(r.tracks))throw new Error("Invalid playlist format");const n=r.tracks.filter(a=>a.videoId&&a.url&&a.title);if(n.length===0)throw new Error("No valid tracks found in playlist");return await this.savePlaylist(r.name,n)}catch(r){throw r instanceof SyntaxError?new Error("Invalid JSON format"):r}}async getStats(){await this.init();const t=await this.db.get("currentPlaylist","current"),r=await this.db.getAll("savedPlaylists"),n=r.reduce((a,o)=>a+o.tracks.length,0);return{currentPlaylistSize:t?.tracks.length||0,savedPlaylistCount:r.length,totalSavedTracks:n,databaseSize:await this.estimateSize()}}async estimateSize(){await this.init();try{if("estimate"in navigator.storage)return`~${(((await navigator.storage.estimate()).usage||0)/(1024*1024)).toFixed(2)} MB`}catch{}return"Unknown"}close(){this.db&&(this.db.close(),this.db=null)}}const eu=new tP,yN=C.createContext(void 0),ic=()=>{const e=C.useContext(yN);if(!e)throw new Error("usePlaylist must be used within PlaylistProvider");return e},rP=({children:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(null),[o,l]=C.useState(!1),[u,d]=C.useState([]),[h,f]=C.useState(!1),[p,x]=C.useState(!1),[b,y]=C.useState([]),[k,S]=C.useState("none"),[_,T]=C.useState(1),[A,I]=C.useState(1),[O,B]=C.useState("auto");C.useEffect(()=>{try{const ce=localStorage.getItem("playbackRate");ce&&T(parseFloat(ce));const ke=localStorage.getItem("volume");ke&&I(parseFloat(ke));const it=localStorage.getItem("repeatMode");it&&(it==="none"||it==="all"||it==="one")&&S(it);const pt=localStorage.getItem("shuffleMode");pt&&x(pt==="true");const zt=localStorage.getItem("videoQuality");zt&&B(zt)}catch(ce){console.error("Failed to load preferences:",ce)}},[]),C.useEffect(()=>{(async()=>{try{const{tracks:ke,currentIndex:it}=await eu.loadCurrentPlaylist();r(ke),a(it),f(!0)}catch(ke){console.error("Failed to load playlist:",ke),f(!0)}})()},[]),C.useEffect(()=>{U()},[]),C.useEffect(()=>{if(!h)return;const ce=async()=>{try{await eu.saveCurrentPlaylist(t,n)}catch(it){console.error("Failed to save playlist:",it)}},ke=setTimeout(()=>{ce()},500);return()=>clearTimeout(ke)},[t,n,h]);const F=C.useCallback(ce=>{const ke={...ce,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()};r(it=>[...it,ke])},[]),ae=C.useCallback(ce=>{r(ke=>{const it=[],pt=new Set(ke.map(He=>He.videoId)),zt=new Set;return ce.forEach((He,Gt)=>{pt.has(He.videoId)||zt.has(He.videoId)||(zt.add(He.videoId),it.push({...He,id:`${Date.now()}-${Gt}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()}))}),[...it,...ke].slice(0,500)})},[]),Z=C.useCallback(ce=>{r(ke=>{const it=[],pt=[],zt=[],Sr=new Set;ce.forEach((rr,Dt)=>{if(Sr.has(rr.videoId))return;Sr.add(rr.videoId);const Ht=ke.findIndex(Zt=>Zt.videoId===rr.videoId);Ht!==-1?it.push({...ke[Ht],addedAt:Date.now()}):pt.push({...rr,id:`${Date.now()}-${Dt}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()})}),ke.forEach(rr=>{Sr.has(rr.videoId)||zt.push(rr)});const Gt=[...it,...pt,...zt].slice(0,500);if(n!==null&&ke[n]){const rr=ke[n].videoId,Dt=Gt.findIndex(Ht=>Ht.videoId===rr);Dt!==-1?a(Dt):(a(null),l(!1))}return Gt})},[n]),z=C.useCallback(ce=>{r(ke=>{const it=ke.findIndex(pt=>pt.id===ce);return it===-1?ke:(n!==null&&(it===n?(l(!1),a(null)):it<n&&a(n-1)),ke.filter(pt=>pt.id!==ce))})},[n]),ee=C.useCallback(()=>{r([]),a(null),l(!1)},[]),W=C.useCallback(ce=>{ce>=0&&ce<t.length&&(a(ce),l(!0))},[t.length]),$=C.useCallback(()=>{const ce=t.map((ke,it)=>it);n!==null&&ce.splice(ce.indexOf(n),1);for(let ke=ce.length-1;ke>0;ke--){const it=Math.floor(Math.random()*(ke+1));[ce[ke],ce[it]]=[ce[it],ce[ke]]}return n!==null&&ce.unshift(n),ce},[t,n]);C.useEffect(()=>{p&&y($())},[p,t,$]);const L=C.useCallback(()=>{if(t.length===0)return;if(n===null){a(0),l(!0);return}if(k==="one"){l(!0);return}const ce=p?b:t.map((it,pt)=>pt),ke=ce.indexOf(n);ke<ce.length-1?(a(ce[ke+1]),l(!0)):k==="all"?(a(ce[0]),l(!0)):l(!1)},[t,n,p,b,k]),q=C.useCallback(()=>{if(t.length===0)return;if(n===null){a(t.length-1),l(!0);return}const ce=p?b:t.map((it,pt)=>pt),ke=ce.indexOf(n);ke>0?(a(ce[ke-1]),l(!0)):(a(ce[ce.length-1]),l(!0))},[t,n,p,b]),D=C.useCallback(()=>{t.length!==0&&(n===null?(a(0),l(!0)):l(ce=>!ce))},[t.length,n]),X=C.useCallback(()=>{t.length!==0&&(n===null&&a(0),l(!0))},[t.length,n]),K=C.useCallback(()=>{l(!1)},[]),xe=C.useCallback(ce=>{const ke=t.findIndex(it=>it.videoId===ce);return ke!==-1?(a(ke),l(!0),!0):!1},[t]),U=C.useCallback(async()=>{try{const ce=await eu.listPlaylists();d(ce)}catch(ce){console.error("Failed to load saved playlists:",ce)}},[]),M=C.useCallback(async ce=>{try{await eu.savePlaylist(ce,t),await U()}catch(ke){throw console.error("Failed to save playlist:",ke),ke}},[t,U]),Y=C.useCallback(async ce=>{try{const ke=await eu.loadPlaylist(ce);r(ke),a(null),l(!1)}catch(ke){throw console.error("Failed to load playlist:",ke),ke}},[]),R=C.useCallback(async ce=>{try{await eu.deletePlaylist(ce),await U()}catch(ke){throw console.error("Failed to delete playlist:",ke),ke}},[U]),H=C.useCallback(()=>{const ce=!p;x(ce),localStorage.setItem("shuffleMode",String(ce)),ce&&y($())},[p,$]),ne=C.useCallback(ce=>{S(ce),localStorage.setItem("repeatMode",ce)},[]),re=C.useCallback(ce=>{T(ce),localStorage.setItem("playbackRate",String(ce))},[]),fe=C.useCallback(ce=>{I(ce),localStorage.setItem("volume",String(ce))},[]),le=C.useCallback(ce=>{B(ce),localStorage.setItem("videoQuality",ce)},[]),ve=n!==null&&t[n]?t[n]:null;return s.jsx(yN.Provider,{value:{playlist:t,currentTrackIndex:n,isPlaying:o,addTrack:F,addTracks:ae,addTracksToStart:Z,removeTrack:z,clearPlaylist:ee,playTrack:W,playTrackByVideoId:xe,nextTrack:L,previousTrack:q,togglePlayPause:D,play:X,pause:K,currentTrack:ve,savedPlaylists:u,savePlaylistAs:M,loadPlaylist:Y,deletePlaylist:R,refreshSavedPlaylists:U,shuffleMode:p,toggleShuffle:H,repeatMode:k,setRepeatMode:ne,playbackRate:_,setPlaybackRate:re,volume:A,setVolume:fe,videoQuality:O,setVideoQuality:le},children:e})},vN=C.createContext(void 0),kN=()=>{const e=C.useContext(vN);if(!e)throw new Error("usePlayer must be used within PlayerProvider");return e},nP=({children:e})=>{const t=C.useRef(null),{isPlaying:r,currentTrack:n,play:a,pause:o}=ic(),[l,u]=C.useState(!1),[d,h]=C.useState(0),[f,p]=C.useState(0),x=C.useCallback(A=>{console.log("[PlayerContext] Registering player:",A),t.current=A},[]),b=C.useCallback(()=>{console.log("[PlayerContext] Unregistering player"),t.current=null},[]),y=C.useCallback(()=>{t.current?(console.log("[PlayerContext] Playing video via ref"),a()):(console.warn("[PlayerContext] Cannot play - no player registered"),a())},[a]),k=C.useCallback(()=>{t.current?(console.log("[PlayerContext] Pausing video via ref"),o()):(console.warn("[PlayerContext] Cannot pause - no player registered"),o())},[o]),S=C.useCallback(A=>{t.current&&t.current.seekTo?(console.log("[PlayerContext] Seeking to:",A),t.current.seekTo(A,"seconds")):console.warn("[PlayerContext] Cannot seek - no player registered")},[]),_=C.useCallback(()=>t.current&&t.current.getCurrentTime?t.current.getCurrentTime():0,[]),T=C.useCallback(()=>t.current&&t.current.getDuration?t.current.getDuration():0,[]);return C.useEffect(()=>{t.current&&console.log("[PlayerContext] Syncing player state - isPlaying:",r,"currentTrack:",n?.title)},[r,n]),s.jsx(vN.Provider,{value:{playerRef:t,registerPlayer:x,unregisterPlayer:b,playVideo:y,pauseVideo:k,seekTo:S,getCurrentTime:_,getDuration:T,isLoading:l,setIsLoading:u,currentTime:d,duration:f,setCurrentTime:h,setDuration:p},children:e})},aP="lambdallmproxy",sP=1,Ms="app_data",tu=5*1024*1024,Xd=250*1024*1024;class Il extends Error{code;estimatedSize;limit;constructor(t,r,n,a){super(t),this.name="StorageError",this.code=r,this.estimatedSize=n,this.limit=a}}class iP{db=null;initPromise=null;useIndexedDB=!0;async initDB(){return this.initPromise?this.initPromise:(this.initPromise=new Promise(t=>{if(!window.indexedDB){console.warn("IndexedDB not supported, falling back to localStorage"),this.useIndexedDB=!1,t();return}const r=indexedDB.open(aP,sP);r.onerror=()=>{console.error("IndexedDB error:",r.error),this.useIndexedDB=!1,t()},r.onsuccess=()=>{this.db=r.result,this.useIndexedDB=!0,t()},r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(Ms)||a.createObjectStore(Ms)}}),this.initPromise)}getDataSize(t){try{return new Blob([JSON.stringify(t)]).size}catch{return JSON.stringify(t).length*2}}async getItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{return await this.getFromIndexedDB(t)}catch(r){console.warn("IndexedDB read failed, trying localStorage:",r)}try{const r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.error("Failed to read from localStorage:",r),null}}async setItem(t,r){await this.initDB();const n=this.getDataSize(r);if(this.useIndexedDB&&this.db)try{if(n>Xd)throw new Il(`Data size (${this.formatBytes(n)}) exceeds IndexedDB limit (${this.formatBytes(Xd)}). Consider reducing the amount of stored data.`,"QUOTA_EXCEEDED",n,Xd);await this.setToIndexedDB(t,r);return}catch(a){if(a instanceof Il)throw a;console.warn("IndexedDB write failed, trying localStorage:",a),this.useIndexedDB=!1}try{if(n>tu)throw new Il(`Data size (${this.formatBytes(n)}) exceeds localStorage limit (${this.formatBytes(tu)}). Try using fewer or smaller snippets, or clear old data.`,"QUOTA_EXCEEDED",n,tu);localStorage.setItem(t,JSON.stringify(r))}catch(a){throw a instanceof Il?a:a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?new Il(`Storage quota exceeded (${this.formatBytes(n)}). Please delete some snippets to free up space.`,"QUOTA_EXCEEDED",n,tu):new Il(`Failed to save data: ${a instanceof Error?a.message:"Unknown error"}`,"UNKNOWN")}}async removeItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.removeFromIndexedDB(t)}catch(r){console.warn("Failed to remove from IndexedDB:",r)}try{localStorage.removeItem(t)}catch(r){console.warn("Failed to remove from localStorage:",r)}}async clear(){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.clearIndexedDB()}catch(t){console.warn("Failed to clear IndexedDB:",t)}try{localStorage.clear()}catch(t){console.warn("Failed to clear localStorage:",t)}}async getStats(){await this.initDB();const t=[];let r=0;if(this.useIndexedDB&&this.db){const n=await this.getAllKeysFromIndexedDB();for(const a of n){const o=await this.getFromIndexedDB(a);t.push(a),r+=this.getDataSize(o)}return{type:"indexeddb",keys:t,totalSize:r,limit:Xd,percentUsed:r/Xd*100}}else{for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);if(a){t.push(a);const o=localStorage.getItem(a);o&&(r+=this.getDataSize(o))}}return{type:"localstorage",keys:t,totalSize:r,limit:tu,percentUsed:r/tu*100}}}getFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const l=this.db.transaction([Ms],"readonly").objectStore(Ms).get(t);l.onsuccess=()=>{r(l.result??null)},l.onerror=()=>{n(l.error)}})}setToIndexedDB(t,r){return new Promise((n,a)=>{if(!this.db){a(new Error("Database not initialized"));return}const u=this.db.transaction([Ms],"readwrite").objectStore(Ms).put(r,t);u.onsuccess=()=>{n()},u.onerror=()=>{a(u.error)}})}removeFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const l=this.db.transaction([Ms],"readwrite").objectStore(Ms).delete(t);l.onsuccess=()=>{r()},l.onerror=()=>{n(l.error)}})}clearIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const o=this.db.transaction([Ms],"readwrite").objectStore(Ms).clear();o.onsuccess=()=>{t()},o.onerror=()=>{r(o.error)}})}getAllKeysFromIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const o=this.db.transaction([Ms],"readonly").objectStore(Ms).getAllKeys();o.onsuccess=()=>{t(o.result)},o.onerror=()=>{r(o.error)}})}formatBytes(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}}const Mb=new iP,wN=C.createContext(void 0),xo=()=>{const e=C.useContext(wN);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},oP=({children:e})=>{const[t,r]=C.useState([]),n=C.useCallback(x=>{r(b=>b.filter(y=>y.id!==x))},[]),a=C.useCallback(()=>{r([])},[]),o=C.useCallback((x,b="info",y=5e3)=>{const k=`toast-${Date.now()}-${Math.random()}`,S={id:k,message:x,type:b,duration:y};r(_=>[..._,S]),y>0&&setTimeout(()=>n(k),y)},[n]),l=C.useCallback(x=>o(x,"error",7e3),[o]),u=C.useCallback(x=>o(x,"success",3e3),[o]),d=C.useCallback(x=>o(x,"warning",5e3),[o]),h=C.useCallback(x=>o(x,"info",4e3),[o]),f=x=>`flex items-start gap-3 p-4 rounded-lg shadow-lg border backdrop-blur-sm transition-all duration-300 animate-slide-in ${{success:"bg-green-50/95 dark:bg-green-900/95 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50/95 dark:bg-red-900/95 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50/95 dark:bg-yellow-900/95 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50/95 dark:bg-blue-900/95 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"}[x]}`,p=x=>({success:"",error:"",warning:"",info:""})[x];return s.jsxs(wN.Provider,{value:{showToast:o,showError:l,showSuccess:u,showWarning:d,showInfo:h,clearAllToasts:a},children:[e,s.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:t.map(x=>s.jsxs("div",{className:f(x.type),children:[s.jsx("span",{className:"text-xl font-bold",children:p(x.type)}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-medium",children:x.message})}),s.jsx("button",{onClick:()=>n(x.id),className:"text-current opacity-50 hover:opacity-100 transition-opacity",children:""})]},x.id))}),s.jsx("style",{children:`
        @keyframes slide-in {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in {
          animation: slide-in 0.3s ease-out;
        }
      `})]})};function k_(e){const t=[],r=e.split(`
`);let n={};for(const a of r)if(a.startsWith("event:"))n.event=a.substring(6).trim();else if(a.startsWith("data:"))n.data=a.substring(5).trim();else if(a===""&&n.event&&n.data){try{const o=JSON.parse(n.data);t.push({event:n.event,data:o})}catch(o){console.error("Failed to parse SSE data:",n.data,o)}n={}}return t}async function EN(e,t,r,n){if(!e.body)throw new Error("Response body is null");const a=e.body.getReader(),o=new TextDecoder;let l="";try{for(;;){const{done:u,value:d}=await a.read();if(u){l.trim()&&k_(l).forEach(p=>t(p.event,p.data)),r&&r();break}l+=o.decode(d,{stream:!0});const h=l.split(`

`);l=h.pop()||"";for(const f of h)f.trim()&&k_(f+`

`).forEach(x=>t(x.event,x.data))}}catch(u){console.error("SSE stream error:",u),n&&n(u instanceof Error?u:new Error("Stream error"))}}async function _N(e,t,r,n,a,o=3,l=1e3,u){const d={"Content-Type":"application/json",Authorization:`Bearer ${r}`,Accept:"text/event-stream"};u&&(d["X-Request-Id"]=u,console.log(" Using request ID for log grouping:",u)),a&&(d["X-YouTube-Token"]=a);const h=["google_access_token","gapi_access_token","google_drive_access_token"];let f=null,p="none";for(const k of h){const S=localStorage.getItem(k);if(S){f=S,p=k;break}}console.log(" Drive token check:",{hasDriveToken:!!f,tokenLength:f?.length||0,source:p,availableKeys:h.filter(k=>!!localStorage.getItem(k))}),f?(d["X-Google-Access-Token"]=f,console.log(` Including Drive access token for Google Sheets operations (source: ${p})`)):(console.log(" No Drive access token available - snippet management will not work"),console.log("   Checked keys:",h));let x=null;for(let k=0;k<o;k++)try{console.log(` SSE Request attempt ${k+1}/${o}:`,{url:e,method:"POST",hasToken:!!r,hasYoutubeToken:!!a,bodyKeys:t?Object.keys(t):[]});const S=await fetch(e,{method:"POST",headers:d,body:JSON.stringify(t),signal:n});if(console.log(" SSE Response received:",{status:S.status,statusText:S.statusText,ok:S.ok,headers:Object.fromEntries(S.headers.entries())}),!S.ok){if(S.status===429&&k<o-1){const _=S.headers.get("Retry-After");let T;if(_){const A=parseInt(_);if(!isNaN(A))T=A*1e3;else{const I=new Date(_);isNaN(I.getTime())?T=l*Math.pow(2,k):T=Math.max(0,I.getTime()-Date.now())}}else T=l*Math.pow(2,k);console.warn(` Rate limited (429), retrying in ${(T/1e3).toFixed(1)}s... (attempt ${k+1}/${o})`),await new Promise(A=>setTimeout(A,T));continue}throw new Error(`Request failed: ${S.status} ${S.statusText}`)}return S}catch(S){if(x=S,console.error(` SSE Request failed (attempt ${k+1}/${o}):`,{error:S instanceof Error?S.message:String(S),errorName:S instanceof Error?S.name:"Unknown",stack:S instanceof Error?S.stack:void 0,url:e,attempt:k+1,maxRetries:o}),n?.aborted)throw console.log(" Request aborted by user"),new Error("Request aborted by user");if(k>=o-1){console.error(" Max retries reached, giving up");break}const _=l*Math.pow(2,k);console.warn(` Request failed, retrying in ${(_/1e3).toFixed(1)}s... (attempt ${k+1}/${o})`,S),await new Promise(T=>setTimeout(T,_))}const b=e.includes("localhost")||e.includes("127.0.0.1"),y=x?.message||"Unknown error";throw b&&(y.includes("fetch")||y.includes("ECONNREFUSED")||y.includes("NetworkError"))?new Error(" Dev server not running. Please start your dev server with `make dev` or `npm run dev`"):y.includes("fetch")||y.includes("NetworkError")?new Error(" Lambda API error: Cannot connect to server. Please check your internet connection or try again later."):x||new Error(`Request failed after ${o} attempts`)}const lP="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log(" API Module Loading - Version: 2024-10-22-DYNAMIC-HOSTNAME");function cP(){const e=window.location.protocol,t=window.location.hostname,r="3000";console.log(" getLocalLambdaUrl() called:",{protocol:e,hostname:t,port:r});const n=`${e}//${t}:${r}`;return console.log(" getLocalLambdaUrl() returning:",n),n}console.log(" API Configuration:",{hostname:window.location.hostname,remote:lP,local:cP(),source:"env"});async function uP(){return console.log(" Using VITE_API_BASE:","https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"),"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}let yh=null,vh=null,Qd=null;async function es(){return Qd&&Qd!==window.location.hostname&&(console.log(` Hostname changed from ${Qd} to ${window.location.hostname}, clearing API cache`),yh=null,vh=null,Qd=null),yh||(vh||(Qd=window.location.hostname,vh=uP().then(e=>(yh=e,e))),vh)}function SN(){yh=null,vh=null,console.log(" API base cache reset")}const TN=async(e,t,r,n,a,o,l,u)=>{const d=await es(),h=r.filter(b=>b.enabled!==!1),f={};h.forEach(b=>{const{type:y,enabled:k,...S}=b;f[y]=S});const p={query:e,providers:f},x=await _N(`${d}/planning`,p,t);await EN(x,a,o,l)},By=async(e,t,r,n,a,o,l,u)=>{const d=await es(),h=await _N(`${d}/chat`,e,t,o,l,3,1e3,u);await EN(h,r,n,a)},CN=async(e,t,r,n,a,o,l,u,d)=>{const h=await es(),f={prompt:e,provider:t,model:r,modelKey:n,size:a,quality:o,style:l,accessToken:u,...d||{}};try{const p=await fetch(`${h}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),credentials:"include"}),x=await p.json();return p.ok?x:{success:!1,error:x.error||`HTTP ${p.status}: ${p.statusText}`}}catch(p){return console.error("Image generation request failed:",p),{success:!1,error:p.message||"Failed to generate image"}}},dP=Object.freeze(Object.defineProperty({__proto__:null,generateImage:CN,generatePlan:TN,getCachedApiBase:es,resetApiBase:SN,sendChatMessageStreaming:By},Symbol.toStringTag,{value:"Module"}));class hP{config=null;status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0};syncQueue=[];syncInterval=null;apiUrl=null;eventCallbacks={onStart:[],onComplete:[],onError:[]};constructor(){this.initializeApiUrl(),this.initializeDeviceId(),this.loadQueueFromStorage()}async initializeApiUrl(){this.apiUrl=await es()}async getApiUrl(){return this.apiUrl?this.apiUrl:(await this.initializeApiUrl(),this.apiUrl)}initializeDeviceId(){let t=localStorage.getItem("rag_device_id");t||(t=`device-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("rag_device_id",t))}getDeviceId(){return localStorage.getItem("rag_device_id")||"unknown"}async initialize(t){this.config={...t,deviceId:this.getDeviceId()},localStorage.setItem("rag_sync_config",JSON.stringify(this.config)),console.log(" RAG Sync Service initialized:",this.config),t.autoSync&&this.startAutoSync()}getStatus(){return{...this.status}}async pushSnippets(t,r){if(!this.config)throw new Error("Sync service not initialized");try{console.log(` Pushing ${t.length} snippets to Sheets...`);const n=await this.getApiUrl(),a=await fetch(`${n}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"push-snippets",userEmail:r,deviceId:this.config.deviceId,data:t})});if(!a.ok){const l=await a.json();throw new Error(l.error||"Failed to push snippets")}const o=await a.json();console.log(` Pushed ${o.count||t.length} snippets`)}catch(n){throw console.error(" Error pushing snippets:",n),n}}async pullSnippets(t){if(!this.config)throw new Error("Sync service not initialized");try{console.log(" Pulling snippets from Sheets...");const r=await this.getApiUrl(),n=await fetch(`${r}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"pull-snippets",userEmail:t,deviceId:this.config.deviceId})});if(!n.ok){const l=await n.json();throw new Error(l.error||"Failed to pull snippets")}const o=(await n.json()).snippets||[];return console.log(` Pulled ${o.length} snippets`),o}catch(r){throw console.error(" Error pulling snippets:",r),r}}async fullSync(t,r){if(!this.config)throw new Error("Sync service not initialized");this.status.inProgress=!0,this.notifyStart();const n={snippetsPushed:0,snippetsPulled:0,embeddingsPushed:0,embeddingsPulled:0,conflicts:0,errors:[]};try{console.log(" Starting full sync...");const a=await this.pullSnippets(t),{toUpload:o,toDownload:l,conflicts:u}=this.mergeSnippets(r,a);return n.conflicts=u.length,this.status.conflictsResolved+=u.length,o.length>0&&(await this.pushSnippets(o,t),n.snippetsPushed=o.length),n.snippetsPulled=l.length,this.status.lastSync=Date.now(),this.status.lastError=null,localStorage.setItem("rag_last_sync",this.status.lastSync.toString()),console.log(" Full sync complete:",n),this.notifyComplete(n),n}catch(a){throw console.error(" Full sync failed:",a),this.status.lastError=a.message,n.errors.push(a.message),this.notifyError(a),a}finally{this.status.inProgress=!1}}mergeSnippets(t,r){const n=new Map(t.map(d=>[d.id,d])),a=new Map(r.map(d=>[d.id,d])),o=[],l=[],u=[];for(const d of t){const h=a.get(d.id);if(!h)o.push(d);else{const f=d.updateDate||d.timestamp,p=h.updateDate||h.timestamp;f>p?o.push(d):p>f&&l.push(h)}}for(const d of r)n.has(d.id)||l.push(d);return console.log(` Merge result: ${o.length} to upload, ${l.length} to download, ${u.length} conflicts`),{toUpload:o,toDownload:l,conflicts:u}}queueSync(t){const r={...t,timestamp:Date.now()};this.syncQueue.push(r),this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queued ${t.type} operation (${this.syncQueue.length} pending)`),this.config?.autoSync&&!this.status.inProgress&&setTimeout(()=>{this.syncQueue.length>0&&!this.status.inProgress&&this.processSyncQueue().catch(console.error)},2e3)}async processSyncQueue(){if(!(!this.config||this.syncQueue.length===0)){console.log(` Processing ${this.syncQueue.length} queued operations...`),this.status.inProgress=!0;try{const t=this.syncQueue.filter(r=>r.type==="push-snippet");if(t.length>0){const r=t.map(a=>a.data),n=t[0].userEmail;await this.pushSnippets(r,n),this.syncQueue=this.syncQueue.filter(a=>a.type!=="push-snippet")}this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queue processed, ${this.syncQueue.length} remaining`)}catch(t){console.error(" Error processing queue:",t)}finally{this.status.inProgress=!1}}}startAutoSync(){if(!this.syncInterval){if(!this.config){console.warn("Cannot start auto-sync: service not initialized");return}console.log(` Starting auto-sync (interval: ${this.config.syncInterval}ms)`),this.syncInterval=setInterval(()=>{!this.status.inProgress&&this.syncQueue.length>0&&this.processSyncQueue().catch(console.error)},this.config.syncInterval)}}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log(" Auto-sync stopped"))}saveQueueToStorage(){try{localStorage.setItem("rag_sync_queue",JSON.stringify(this.syncQueue))}catch(t){console.error("Failed to save sync queue:",t)}}loadQueueFromStorage(){try{const t=localStorage.getItem("rag_sync_queue");t&&(this.syncQueue=JSON.parse(t),this.status.pendingChanges=this.syncQueue.length,console.log(` Loaded ${this.syncQueue.length} queued operations from storage`))}catch(t){console.error("Failed to load sync queue:",t)}}async pushEmbeddings(t,r){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const n=localStorage.getItem("rag_spreadsheet_id");if(!n)throw new Error("No spreadsheet ID found. User may not be logged in.");let a=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!a)throw new Error("Not authenticated");const o=100,l=Math.ceil(t.length/o);for(let u=0;u<l;u++){const d=t.slice(u*o,(u+1)*o);r&&r(Math.min((u+1)*o,t.length),t.length);const h=await this.getApiUrl(),f=await fetch(`${h}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({operation:"push",spreadsheetId:n,chunks:d})});if(!f.ok)throw new Error(`Failed to push embeddings: ${f.status}`)}console.log(` Pushed ${t.length} chunks to Google Sheets`)}catch(n){throw console.error("Failed to push embeddings:",n),n}}async pullEmbeddings(t){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const r=localStorage.getItem("rag_spreadsheet_id");if(!r)throw new Error("No spreadsheet ID found. User may not be logged in.");let n=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!n)throw new Error("Not authenticated");const a=await this.getApiUrl(),o=await fetch(`${a}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({operation:"pull",spreadsheetId:r,snippetIds:t})});if(!o.ok)throw new Error(`Failed to pull embeddings: ${o.status}`);const{chunks:l}=await o.json();return console.log(` Pulled ${l?.length||0} chunks from Google Sheets`),l||[]}catch(r){throw console.error("Failed to pull embeddings:",r),r}}onSyncStart(t){this.eventCallbacks.onStart.push(t)}onSyncComplete(t){this.eventCallbacks.onComplete.push(t)}onSyncError(t){this.eventCallbacks.onError.push(t)}notifyStart(){this.eventCallbacks.onStart.forEach(t=>t())}notifyComplete(t){this.eventCallbacks.onComplete.forEach(r=>r(t))}notifyError(t){this.eventCallbacks.onError.forEach(r=>r(void 0,t))}clear(){this.syncQueue=[],this.status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0},localStorage.removeItem("rag_sync_queue"),localStorage.removeItem("rag_last_sync"),console.log(" Sync service cleared")}}const ua=new hP;let Fl=null,Rb=null,w_=0;function E_(e){const t=window.google;if(!t?.accounts?.oauth2){console.warn(" Google Identity Services not loaded - include GIS script in index.html");return}if(Fl){console.log(" Google Identity already initialized");return}try{Fl=t.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/spreadsheets",callback:()=>{console.log(" Token response received")}}),console.log(" Google Identity Services initialized")}catch(r){console.error(" Failed to initialize Google Identity Services:",r)}}function gP(){return Fl!==null}async function fv(e){if(!Fl)throw new Error("Google Identity Services not initialized. Call initGoogleIdentity() first.");const t=Date.now();return Rb&&w_>t+6e4?(console.log(" Using cached access token"),Rb):new Promise((r,n)=>{if(!Fl)return n(new Error("Token client not initialized"));Fl.callback=a=>{if("error"in a)return console.error(" OAuth error:",a.error),n(new Error(`OAuth error: ${a.error}`));if(!a.access_token)return n(new Error("No access token received"));Rb=a.access_token,w_=Date.now()+a.expires_in*1e3,console.log(" Access token obtained (expires in",a.expires_in,"seconds)"),r(a.access_token)},Fl.requestAccessToken(e)})}async function fP(e,t,r){if(!e)throw new Error("Spreadsheet ID is required");if(!r||r.length===0)throw new Error("No values to append");const n=await fv(),a=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}:append?valueInputOption=RAW`,o={values:r};console.log(` Appending ${r.length} rows to sheet: ${t}`);const l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok){const d=await l.text();throw console.error(" Sheets API error:",{status:l.status,statusText:l.statusText,body:d}),new Error(`Sheets API error: ${l.status} ${l.statusText}. ${d}`)}const u=await l.json();return console.log(` Appended ${u.updates.updatedRows} rows to Google Sheets`),u}async function pP(e,t){const r=await fv(),n=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}`,a=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!a.ok){const l=await a.text();throw new Error(`Sheets API error: ${a.status} ${a.statusText}. ${l}`)}return(await a.json()).values||[]}function mP(e){return e.map(t=>[t.id||"",t.snippet_id||"",t.snippet_name||"",t.chunk_text||"",JSON.stringify(t.embedding||[]),t.chunk_index??0,t.embedding_model||"",t.embedding_provider||"",t.embedding_dimensions||0,t.source_type||"text",t.created_at||new Date().toISOString()])}function ps(e,t){const[r,n]=C.useState(()=>{try{const o=window.localStorage.getItem(e);return o?JSON.parse(o):t}catch(o){return console.error(`Error loading localStorage key "${e}":`,o),t}});return[r,o=>{try{n(l=>{const u=o instanceof Function?o(l):o;try{window.localStorage.setItem(e,JSON.stringify(u))}catch(d){if(d?.name==="QuotaExceededError"){console.warn(`localStorage quota exceeded for key "${e}". Attempting cleanup...`);try{const h=xP("chat_history_");if(h.length>5){const f=h.sort().slice(0,h.length-5);f.forEach(p=>window.localStorage.removeItem(p)),console.log(`Removed ${f.length} old chat history items`)}window.localStorage.setItem(e,JSON.stringify(u)),console.log("Successfully saved after cleanup")}catch(h){if(console.error("Failed to save even after cleanup:",h),e==="app_settings"){const f={version:u.version,providers:[],tavilyApiKey:""};window.localStorage.setItem(e,JSON.stringify(f)),console.warn("Saved minimal settings due to quota")}}}else throw d}return u})}catch(l){console.error(`Error saving localStorage key "${e}":`,l)}}]}function xP(e){try{return Object.keys(localStorage).filter(t=>t.startsWith(e))}catch(t){return console.error("Error getting localStorage keys:",t),[]}}const NN={groq:"https://api.groq.com/openai/v1","groq-free":"https://api.groq.com/openai/v1",openai:"https://api.openai.com/v1",gemini:"https://generativelanguage.googleapis.com/v1beta","gemini-free":"https://generativelanguage.googleapis.com/v1beta",together:"https://api.together.xyz/v1",replicate:"https://api.replicate.com/v1",atlascloud:"https://api.atlascloud.ai/v1"},Fy={"groq-free":{name:"Groq (Free Tier)",icon:"",description:"Fast inference with generous free tier limits"},groq:{name:"Groq (Paid)",icon:"",description:"Fast inference with higher rate limits"},openai:{name:"OpenAI",icon:"",description:"GPT-4, GPT-4o, and other OpenAI models"},"gemini-free":{name:"Google Gemini (Free Tier)",icon:"",description:"Google's Gemini models with free tier"},gemini:{name:"Google Gemini (Paid)",icon:"",description:"Google's Gemini models with higher limits"},together:{name:"Together AI",icon:"",description:"Open source models with trial credits"},replicate:{name:"Replicate",icon:"",description:"Run ML models with API"},atlascloud:{name:"Atlas Cloud",icon:"",description:"API marketplace for various LLM models"},"openai-compatible":{name:"OpenAI Compatible (Custom)",icon:"",description:"Custom endpoint with OpenAI-compatible API"}},k0="927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",Uy="https://www.googleapis.com/auth/documents https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/spreadsheets";let Qo=null,Is=null;const $0="google_access_token";Is=localStorage.getItem($0);const AN=()=>new Promise((e,t)=>{if(console.log(" Initializing Google Auth..."),console.log(" Client ID configured:","YES"),console.log(" Client ID value:",k0.substring(0,20)+"..."),typeof google<"u"&&google.accounts){console.log(" Google Identity Services already loaded"),Qo||(Qo=google.accounts.oauth2.initTokenClient({client_id:k0,scope:Uy,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){if(Is=n.access_token,localStorage.setItem($0,n.access_token),n.expires_in){const a=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",a.toString())}console.log(" Access token received and stored:",n.access_token.substring(0,20)+"..."),e(n.access_token)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}})),e(Qo);return}console.log(" Loading Google Identity Services library...");const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{console.log(" Google Identity Services library loaded"),Qo=google.accounts.oauth2.initTokenClient({client_id:k0,scope:Uy,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){if(Is=n.access_token,localStorage.setItem($0,n.access_token),n.expires_in){const a=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",a.toString())}console.log(" Access token received and stored:",n.access_token.substring(0,20)+"..."),e(n.access_token)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}}),console.log(" Token client initialized"),e(Qo)},r.onerror=()=>{console.error(" Failed to load Google Identity Services library"),t(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)}),il=async()=>{if(console.log(" Requesting Google Auth..."),console.log(" Current token:",Is?Is.substring(0,20)+"...":"NONE"),Is){console.log(" Validating existing token...");try{if((await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:"Bearer "+Is}})).ok)return console.log(" Token is still valid"),Is;console.warn(" Token invalid, clearing..."),Is=null}catch(e){console.error(" Token validation failed:",e),Is=null}}return Qo||(console.log(" Token client not initialized, initializing..."),await AN()),new Promise((e,t)=>{try{console.log(" Setting up token callback..."),Qo.callback=r=>{if(console.log(" Token callback triggered:",{hasToken:!!r.access_token,error:r.error,errorDescription:r.error_description}),r.error){const n="Authentication failed: "+r.error+(r.error_description?" - "+r.error_description:"")+". Please grant permissions and try again.";console.error("",n),t(new Error(n));return}r.access_token?(Is=r.access_token,localStorage.setItem($0,r.access_token),console.log(" New access token received and stored:",r.access_token.substring(0,20)+"..."),e(r.access_token)):(console.error(" No access token in response"),t(new Error("No access token received. Please grant permissions and try again.")))},console.log(" Requesting access token from Google..."),console.log(" Scopes requested:",Uy),console.log(" Using Client ID:",k0?.substring(0,30)+"..."),console.log(" Current origin:",window.location.origin),Qo.requestAccessToken({prompt:""}),console.log(" Waiting for user to grant permissions...")}catch(r){console.error(" Failed to request access token:",r),t(new Error("Failed to request access token. Please grant permissions and try again."))}})},bP=async()=>{console.log(" Listing Google Docs...");const e=await il();console.log(" Using token:",e.substring(0,20)+"...");const t="mimeType='application/vnd.google-apps.document' and trashed=false and properties has { key='createdByApp' and value='LambdaLLMProxy-Swag' }";console.log(" Query:",t),console.log(" Making API request to Google Drive...");const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name,modifiedTime,properties,description)&orderBy=modifiedTime desc",{headers:{Authorization:"Bearer "+e}});if(console.log(" Response status:",r.status,r.statusText),!r.ok){const o=await r.json().catch(()=>({}));console.error(" API Error:",o);const u="Failed to list documents: "+(o.error?.message||r.statusText)+". Please grant permissions and try again.";throw console.error("",u),new Error(u)}const n=await r.json();console.log(" Documents retrieved:",n.files?.length||0);const a=n.files.filter(o=>o.properties?.createdByApp==="LambdaLLMProxy-Swag"||o.description?.includes("Created by LLM Proxy Swag feature"));return console.log(" App-created documents:",a.length),a.map(o=>({id:o.id,name:o.name,modifiedTime:o.modifiedTime}))},yP=async(e,t)=>{console.log(" Appending to Google Doc:",e);const r=await il();console.log(" Using token:",r.substring(0,20)+"..."),console.log(" Getting document details...");const n=await fetch("https://docs.googleapis.com/v1/documents/"+e,{headers:{Authorization:"Bearer "+r}});if(!n.ok){const u=await n.json().catch(()=>({}));console.error(" API Error:",u);const h="Failed to get document: "+(u.error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}const a=await n.json(),o=a.body.content[a.body.content.length-1].endIndex-1;console.log(" End index:",o),console.log(" Appending content...");const l=await fetch("https://docs.googleapis.com/v1/documents/"+e+":batchUpdate",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({requests:[{insertText:{location:{index:o},text:`

`+t+`
`}}]})});if(!l.ok){const u=await l.json().catch(()=>({}));console.error(" API Error:",u);const h="Failed to append to document: "+(u.error?.message||l.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}console.log(" Content appended successfully")},vP=()=>!!Is,__="Research Agent",LN="Research Agent Settings",pv=async()=>{console.log(" Finding or creating Research Agent folder...");const e=await il(),t=`mimeType='application/vnd.google-apps.folder' and name='${__}' and trashed=false`;console.log(" Searching for folder:",t);const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+e}});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error("Failed to search for folder: "+(l.error?.message||r.statusText))}const n=await r.json();if(n.files&&n.files.length>0){const l=n.files[0].id;return console.log(" Found existing folder:",l),l}console.log(" Creating new folder...");const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:__,mimeType:"application/vnd.google-apps.folder",description:"Storage for Research Agent settings and snippets"})});if(!a.ok){const l=await a.json().catch(()=>({}));throw new Error("Failed to create folder: "+(l.error?.message||a.statusText))}const o=await a.json();return console.log(" Created new folder:",o.id),o.id},jN=async e=>{console.log(" Searching for settings file in folder:",e);const t=await il(),r=`name='${LN}' and '${e}' in parents and trashed=false`;console.log(" Query:",r);const n=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(r)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+t}});if(!n.ok){const o=await n.json().catch(()=>({}));throw new Error("Failed to search for settings file: "+(o.error?.message||n.statusText))}const a=await n.json();return a.files&&a.files.length>0?(console.log(" Found settings file:",a.files[0].id),a.files[0].id):(console.log("  No settings file found"),null)},kP=async(e,t)=>{console.log(" Creating settings file in folder:",e);const r=await il(),n="-------314159265358979323846",a=`\r
--`+n+`\r
`,o=`\r
--`+n+"--",l={name:LN,mimeType:"text/plain",parents:[e],description:"Research Agent Settings - Contains API keys and provider configuration"},u=a+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(l)+a+`Content-Type: text/plain\r
\r
`+t+o,d=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"multipart/related; boundary="+n},body:u});if(!d.ok){const f=await d.json().catch(()=>({}));throw new Error("Failed to create settings file: "+(f.error?.message||d.statusText))}const h=await d.json();return console.log(" Settings file created:",h.id),h.id},wP=async(e,t)=>{console.log(" Updating settings file:",e);const r=await il(),n=await fetch("https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media",{method:"PATCH",headers:{Authorization:"Bearer "+r,"Content-Type":"text/plain"},body:t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error("Failed to update settings file: "+(a.error?.message||n.statusText))}console.log(" Settings file updated")},S_=async()=>{try{console.log(" Loading settings from Google Drive...");const e=await pv(),t=await jN(e);if(!t)return console.log("  No settings file found in Google Drive"),null;const r=await il(),n=await fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+r}});if(!n.ok)throw new Error("Failed to download settings: "+n.statusText);const a=await n.text();return console.log(" Settings loaded from Google Drive"),a}catch(e){throw console.error(" Failed to load settings from Google Drive:",e),e}},T_=async e=>{try{console.log(" Saving settings to Google Drive...");const t=await pv(),r=await jN(t);r?await wP(r,e):await kP(t,e),console.log(" Settings saved to Google Drive")}catch(t){throw console.error(" Failed to save settings to Google Drive:",t),t}},EP=async e=>{console.log(" Creating Google Doc in Research Agent folder:",e);const t=await il(),r=await pv();console.log(" Making API request to Google Docs...");const n=await fetch("https://docs.googleapis.com/v1/documents",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(console.log(" Response status:",n.status,n.statusText),!n.ok){const d="Failed to create document: "+((await n.json().catch(()=>({}))).error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",d),new Error(d)}const o=(await n.json()).documentId;try{console.log(" Moving document to Research Agent folder..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${o}?addParents=${r}&fields=id,parents`,{method:"PATCH",headers:{Authorization:"Bearer "+t}})).ok?console.log(" Document moved to folder"):console.warn(" Could not move document to folder (document still created)")}catch(l){console.warn(" Could not move document to folder:",l)}try{console.log("  Adding app metadata to document..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${o}?fields=id`,{method:"PATCH",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({properties:{createdByApp:"LambdaLLMProxy-Swag",appVersion:"1.0"},description:"Created by LLM Proxy Swag feature"})})).ok?console.log(" Metadata added successfully"):console.warn(" Could not add metadata (document still created)")}catch(l){console.warn(" Could not add metadata:",l)}return{id:o,name:e,modifiedTime:new Date().toISOString()}},MN=C.createContext(void 0);function _P(e){if(e.version==="2.0.0")return e;const t=[];if(e.provider&&e.llmApiKey){const r=e.provider==="groq"?"groq-free":"openai";t.push({id:crypto.randomUUID(),type:r,apiEndpoint:NN[r],apiKey:e.llmApiKey})}return{version:"2.0.0",providers:t,tavilyApiKey:e.tavilyApiKey||""}}const SP=({children:e})=>{const[t,r]=ps("app_settings",{version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!1}),[n,a]=C.useState(!1),o=_P(t);C.useEffect(()=>{t!==o&&r(o)},[t,o,r]),C.useEffect(()=>{(async()=>{if(o.syncToGoogleDrive&&vP()&&!n)try{a(!0),console.log(" Auto-loading settings from Google Drive...");const p=await S_();if(p){const x=JSON.parse(p);r(x),console.log(" Settings auto-loaded from Google Drive")}}catch(p){console.error(" Failed to auto-load settings from Google Drive:",p)}finally{a(!1)}})()},[o.syncToGoogleDrive]);const l=f=>{r(f),f.syncToGoogleDrive&&T_(JSON.stringify(f,null,2)).catch(p=>{console.error(" Failed to auto-save settings to Google Drive:",p)})},u=async()=>{try{console.log(" Manually loading settings from Google Drive...");const f=await S_();if(f){const p=JSON.parse(f);r(p),console.log(" Settings loaded from Google Drive")}else throw new Error("No settings found in Google Drive")}catch(f){throw console.error(" Failed to load settings from Google Drive:",f),f}},d=async()=>{try{console.log(" Manually saving settings to Google Drive..."),await T_(JSON.stringify(o,null,2)),console.log(" Settings saved to Google Drive")}catch(f){throw console.error(" Failed to save settings to Google Drive:",f),f}},h=()=>{r({version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!1}),console.log("  Settings cleared")};return s.jsx(MN.Provider,{value:{settings:o,setSettings:l,loadFromGoogleDrive:u,saveToGoogleDrive:d,clearSettings:h},children:e})},ii=()=>{const e=C.useContext(MN);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},C_="rag_embeddings",TP=2,Ya="chunks",xi="metadata",ru="search_cache";class CP{db=null;initPromise=null;async resetDatabase(){console.log(" Deleting and recreating RAG database..."),this.db&&(this.db.close(),this.db=null),this.initPromise=null,await new Promise((t,r)=>{const n=indexedDB.deleteDatabase(C_);n.onsuccess=()=>{console.log(" Database deleted successfully"),t()},n.onerror=()=>{console.error(" Failed to delete database:",n.error),r(n.error)},n.onblocked=()=>{console.warn(" Database deletion blocked - close all tabs using this database")}}),await this.init(),console.log(" Database recreated successfully")}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{if(!window.indexedDB){console.warn("IndexedDB not supported"),r(new Error("IndexedDB not supported"));return}const n=indexedDB.open(C_,TP);n.onerror=()=>{console.error("RAG IndexedDB error:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("RAG IndexedDB initialized"),t()},n.onupgradeneeded=a=>{const o=a.target.result,l=a.oldVersion;if(!o.objectStoreNames.contains(Ya)){const u=o.createObjectStore(Ya,{keyPath:"id"});u.createIndex("snippet_id","snippet_id",{unique:!1}),u.createIndex("created_at","created_at",{unique:!1})}o.objectStoreNames.contains(xi)||o.createObjectStore(xi,{keyPath:"snippet_id"}),l<2&&!o.objectStoreNames.contains(ru)&&o.createObjectStore(ru,{keyPath:"query"}).createIndex("created_at","created_at",{unique:!1})}}),this.initPromise)}async hasEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const u=this.db.transaction([Ya],"readonly").objectStore(Ya).index("snippet_id").count(IDBKeyRange.only(t));u.onsuccess=()=>{r(u.result>0)},u.onerror=()=>{console.error("Error checking embedding:",u.error),n(u.error)}}):!1}async getEmbeddingDetails(t){return await this.init(),this.db?new Promise((r,n)=>{const a=this.db.transaction([Ya,xi],"readonly"),u=a.objectStore(Ya).index("snippet_id").getAll(IDBKeyRange.only(t)),h=a.objectStore(xi).get(t);a.oncomplete=()=>{const f=u.result,p=h.result;r({hasEmbedding:f.length>0,chunkCount:f.length,chunks:f.sort((x,b)=>x.chunk_index-b.chunk_index),metadata:p})},a.onerror=()=>{console.error("Error getting embedding details:",a.error),n(a.error)}}):{hasEmbedding:!1,chunkCount:0,chunks:[]}}async bulkCheckEmbeddings(t){if(await this.init(),!this.db)return{};const r={};for(const n of t)try{r[n]=await this.hasEmbedding(n)}catch(a){console.error(`Error checking embedding for ${n}:`,a),r[n]=!1}return r}async saveChunks(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return console.log(" saveChunks called with:",{chunkCount:t.length,firstChunk:t[0],firstChunkKeys:t[0]?Object.keys(t[0]):[],hasId:t[0]?.id!==void 0,idValue:t[0]?.id,idType:typeof t[0]?.id,chunkStringified:JSON.stringify(t[0],null,2)}),new Promise(async(n,a)=>{const o=t[0]?.snippet_id||r?.snippet_id;if(o)try{console.log(` Deleting old chunks for snippet: ${o}`),await this.deleteChunks(o),console.log(" Deleted old chunks for snippet")}catch(d){console.warn(" Failed to delete old chunks:",d)}const l=this.db.transaction([Ya,xi],"readwrite"),u=l.objectStore(Ya);console.log(" IndexedDB Store Info:",{storeName:u.name,keyPath:u.keyPath,autoIncrement:u.autoIncrement,indexNames:Array.from(u.indexNames)});for(let d=0;d<t.length;d++){const h=t[d];try{const f=h.snippet_id||r?.snippet_id||"unknown",p=h.chunk_index??d,x=h.id||`${f}_chunk_${p}`;if(!x||x==="undefined_chunk_0"||x==="_chunk_0")throw console.error(" Invalid chunk ID generated:",{chunkId:x,snippetId:f,chunkIndex:p,chunk:h}),new Error(`Invalid chunk ID: ${x}`);const b=Array.isArray(h.embedding)?[...h.embedding]:Array.from(h.embedding||[]),y={id:x,snippet_id:f,chunk_text:h.chunk_text||"",embedding:b,chunk_index:p,embedding_model:h.embedding_model||"text-embedding-3-small",created_at:h.created_at||new Date().toISOString()};if(!y.id)throw new Error(`Chunk missing id property after normalization: ${JSON.stringify(Object.keys(y))}`);const k=y.id;if(!k)throw new Error(`Cannot access id property via bracket notation: ${k}`);const S=Object.getPrototypeOf(y);if(S!==Object.prototype)throw new Error(`Chunk has non-plain prototype: ${S?.constructor?.name}`);console.log(" Putting chunk:",{id:y.id,snippetId:y.snippet_id,chunkIndex:y.chunk_index,embeddingLength:y.embedding.length,embeddingType:y.embedding.constructor.name,allKeys:Object.keys(y),idDescriptor:Object.getOwnPropertyDescriptor(y,"id"),objectType:typeof y,prototypeChainDepth:(()=>{let A=0,I=y;for(;I&&A<10;)I=Object.getPrototypeOf(I),A++;return A})()});const _=JSON.stringify(y),T=JSON.parse(_);if(!T.id)throw new Error(`Chunk id lost during JSON serialization! Original: ${y.id}`);console.log(" Chunk survived JSON round-trip with id:",T.id),await new Promise((A,I)=>{const O=u.put(T);O.onsuccess=()=>{A()},O.onerror=()=>{console.error(" PUT request failed:",{chunk:y,error:O.error,errorName:O.error?.name,errorMessage:O.error?.message,chunkKeys:Object.keys(y),hasIdProperty:"id"in y,idValue:y.id}),I(O.error)}})}catch(f){throw console.error(" Error putting chunk:",{chunk:h,error:f}),f}}r&&l.objectStore(xi).put(r),l.oncomplete=()=>{console.log(`Saved ${t.length} chunks to IndexedDB`),n()},l.onerror=()=>{console.error("Error saving chunks:",l.error),a(l.error)}})}async deleteChunks(t){if(await this.init(),!!this.db)return new Promise((r,n)=>{const a=this.db.transaction([Ya,xi],"readwrite"),u=a.objectStore(Ya).index("snippet_id").openCursor(IDBKeyRange.only(t));u.onsuccess=h=>{const f=h.target.result;f&&(f.delete(),f.continue())},a.objectStore(xi).delete(t),a.oncomplete=()=>{console.log(`Deleted chunks for snippet ${t}`),r()},a.onerror=()=>{console.error("Error deleting chunks:",a.error),n(a.error)}})}async getAllEmbeddedSnippetIds(){return await this.init(),this.db?new Promise((t,r)=>{const o=this.db.transaction([xi],"readonly").objectStore(xi).getAllKeys();o.onsuccess=()=>{t(o.result)},o.onerror=()=>{console.error("Error getting embedded snippet IDs:",o.error),r(o.error)}}):[]}async cacheQueryEmbedding(t,r,n){if(await this.init(),!!this.db)return new Promise((a,o)=>{const l=this.db.transaction([ru],"readwrite"),u=l.objectStore(ru),d={query:t,embedding:r,model:n,created_at:Date.now()};u.put(d),l.oncomplete=()=>{a()},l.onerror=()=>{console.error("Error caching query embedding:",l.error),o(l.error)}})}async getCachedQueryEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const l=this.db.transaction([ru],"readonly").objectStore(ru).get(t);l.onsuccess=()=>{const u=l.result;r(u?{embedding:u.embedding,model:u.model}:null)},l.onerror=()=>{console.error("Error getting cached query:",l.error),n(l.error)}}):null}cosineSimilarity(t,r){if(t.length!==r.length)throw new Error("Vectors must have same length");let n=0,a=0,o=0;for(let l=0;l<t.length;l++)n+=t[l]*r[l],a+=t[l]*t[l],o+=r[l]*r[l];return n/(Math.sqrt(a)*Math.sqrt(o))}async vectorSearch(t,r=5,n=.5){return await this.init(),this.db?new Promise((a,o)=>{const d=this.db.transaction([Ya],"readonly").objectStore(Ya).getAll();d.onsuccess=()=>{const f=d.result.map(b=>({snippet_id:b.snippet_id,chunk_id:b.id,chunk_text:b.chunk_text,chunk_index:b.chunk_index,score:this.cosineSimilarity(t,b.embedding)})),p=[...f].sort((b,y)=>y.score-b.score);console.log(` Vector search - Top 10 scores (threshold: ${n}):`,p.slice(0,10).map(b=>({score:b.score.toFixed(4),snippet_id:b.snippet_id,chunk_preview:b.chunk_text.substring(0,100)+"..."})));const x=f.filter(b=>b.score>=n).sort((b,y)=>y.score-b.score).slice(0,r);console.log(` Returning ${x.length} results above threshold ${n}`),a(x)},d.onerror=()=>{console.error("Error performing vector search:",d.error),o(d.error)}}):[]}async getAllChunks(){return await this.init(),this.db?new Promise((t,r)=>{const o=this.db.transaction([Ya],"readonly").objectStore(Ya).getAll();o.onsuccess=()=>{t(o.result)},o.onerror=()=>{console.error("Error getting all chunks:",o.error),r(o.error)}}):[]}}const Ma=new CP,NP="Snippets";async function AP(e){try{const t=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${encodeURIComponent("Research Agent Swag")}' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false&fields=files(id,name)`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Drive API error: ${t.statusText}`);const n=(await t.json()).files||[];if(n.length===0)return console.warn(' "Research Agent Swag" spreadsheet not found'),null;const a=n[0].id;return console.log(` Found "Research Agent Swag" spreadsheet: ${a}`),a}catch(t){throw console.error(" Error finding snippets spreadsheet:",t),t}}function LP(e){if(!e||e.length<5)return null;const[t,r,n,a,o,l,u]=e;if(!t||t==="id"||!o)return null;const d=l?l.split(",").map(x=>x.trim()).filter(Boolean):[],h=r?new Date(r).getTime():Date.now(),f=n?new Date(n).getTime():h,p=u==="chat"||u==="assistant"?"assistant":u==="user"?"user":"tool";return{id:`sheet-${t}`,content:o||"",title:a||void 0,timestamp:h,updateDate:f,sourceType:p,selected:!1,tags:d,hasEmbedding:!1}}async function jP(e,t){try{const r=await AP(t);if(!r)throw new Error("Snippets spreadsheet not found");const n=await pP(r,`${NP}!A:H`);if(!n||n.length<2)return console.warn(" No snippets found in spreadsheet"),null;for(let a=1;a<n.length;a++){const o=n[a];if(parseInt(o[0],10)===e){const u=LP(o);if(u)return console.log(` Fetched snippet #${e} from Google Sheets:`,u.title),u}}return console.warn(` Snippet #${e} not found in Google Sheets`),null}catch(r){throw console.error(` Error fetching snippet #${e}:`,r),r}}const RN=C.createContext(void 0),xg=()=>{const e=C.useContext(RN);if(!e)throw new Error("useSwag must be used within SwagProvider");return e},MP=({children:e})=>{const[t,r]=C.useState([]),[n,a]=C.useState(!1),[o,l]=C.useState(null),[u,d]=C.useState(null),{showError:h,showWarning:f,showSuccess:p}=xo(),{user:x,getToken:b}=$s(),{settings:y}=ii();C.useEffect(()=>{(async()=>{try{const Y=await Mb.getItem("swag-snippets");Y&&r(Y),a(!0)}catch(Y){console.error("Failed to load snippets:",Y),h("Failed to load snippets from storage"),a(!0)}})()},[h]);const k=M=>M<1024?M+" B":M<1024*1024?(M/1024).toFixed(2)+" KB":(M/(1024*1024)).toFixed(2)+" MB";C.useEffect(()=>{if(!n)return;(async()=>{try{await Mb.setItem("swag-snippets",t);const Y=await Mb.getStats();l({totalSize:Y.totalSize,limit:Y.limit,percentUsed:Y.percentUsed}),Y.percentUsed>80&&f(`Storage is ${Y.percentUsed.toFixed(0)}% full. Consider deleting old snippets.`)}catch(Y){if(Y instanceof Il)if(Y.code==="QUOTA_EXCEEDED"){const R=Y.estimatedSize&&Y.limit?`Current size: ${k(Y.estimatedSize)}, Limit: ${k(Y.limit)}`:"";h(`Storage Quota Exceeded! ${Y.message} ${R}`)}else h(`Storage error: ${Y.message}`);else console.error("Failed to save snippets:",Y),h("Failed to save snippets to storage")}})()},[t,n,h,f]);const S=()=>{try{const M=localStorage.getItem("rag_config");if(M){const Y=JSON.parse(M);return Y.enabled&&Y.syncEnabled}}catch(M){console.error("Failed to check RAG sync config:",M)}return!1},_=async()=>{try{const M=localStorage.getItem("rag_spreadsheet_id");if(M)return console.log("Using cached spreadsheet ID:",M),M;let Y=localStorage.getItem("google_drive_access_token");if(Y)console.log(" Using cached Drive API access token");else{if(console.log(" Requesting Google Drive API access token..."),typeof window>"u"||!window.google?.accounts?.oauth2)throw console.error(" Google Identity Services not available. The library may not have loaded yet."),console.log(" This usually happens if the page loads before Google GSI library is ready."),console.log(" Try: 1) Refresh the page, 2) Check internet connection, 3) Check browser console for script loading errors"),new Error("Google Identity Services not available - library not loaded");try{const re=window.google.accounts.oauth2.initTokenClient({client_id:"927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/spreadsheets",callback:fe=>{fe.access_token&&(localStorage.setItem("google_drive_access_token",fe.access_token),console.log(" Got Drive API access token"))}});if(!re)throw new Error("Failed to initialize Google token client");await new Promise((fe,le)=>{re.callback=ve=>{if(ve.error){console.error("OAuth error:",ve.error),le(new Error(`OAuth error: ${ve.error}`));return}ve.access_token?(Y=ve.access_token,localStorage.setItem("google_drive_access_token",ve.access_token),console.log(" Got Drive API access token"),fe()):le(new Error("No access token received"))},console.log(" Requesting Google Drive & Sheets permissions..."),re.requestAccessToken({prompt:""})})}catch(re){throw console.error("Failed to get Drive API token:",re),new Error("Please grant access to Google Drive and Sheets to enable cloud sync")}}if(!Y)throw console.error("No Drive API access token available"),new Error("No Drive API access token - unable to access Google Sheets");const R=await es();console.log(" Calling getUserRagSpreadsheet at:",R);const H=await fetch(`${R}/rag/user-spreadsheet`,{method:"GET",headers:{Authorization:`Bearer ${Y}`}});if(!H.ok){const re=await H.text();console.error(" Backend error response:",{status:H.status,statusText:H.statusText,body:re});let fe=`Failed to get spreadsheet: ${H.status}`;try{const le=JSON.parse(re);le.error&&(fe=le.error)}catch{}throw new Error(fe)}const ne=await H.json();return localStorage.setItem("rag_spreadsheet_id",ne.spreadsheetId),ne.created?(console.log(" Created new RAG spreadsheet:",ne.spreadsheetId),f('Created new "Research Agent Swag" spreadsheet in your Google Drive')):console.log(" Found existing RAG spreadsheet:",ne.spreadsheetId),ne.spreadsheetId}catch(M){return console.error("Failed to get user RAG spreadsheet:",M),null}};C.useEffect(()=>((async()=>{if(!(!x?.email||!S()||!n))try{if(!await _()){console.warn("Could not get user RAG spreadsheet - sync disabled"),f("Cloud sync enabled but cannot access Google Sheets. Please check permissions in Settings > RAG.");return}await ua.initialize({enabled:!0,autoSync:!0,syncInterval:6e4,batchSize:50,retryAttempts:3,deviceId:ua.getDeviceId()}),ua.onSyncStart(()=>{d(ua.getStatus())}),ua.onSyncComplete(H=>{d(ua.getStatus()),H&&H.snippetsPulled>0&&console.log(`Synced ${H.snippetsPulled} snippets from cloud`)}),ua.onSyncError((H,ne)=>{console.error("Sync error:",ne),d(ua.getStatus()),ne&&h(`Sync failed: ${ne.message}`)}),console.log("Performing initial sync...");const R=await ua.pullSnippets(x.email);R&&R.length>0&&(r(H=>{const ne=new Set(H.map(le=>le.id)),re=R.filter(le=>!ne.has(le.id)),fe=H.map(le=>{const ve=R.find(ce=>ce.id===le.id);return ve&&ve.updateDate>le.updateDate?ve:le});return[...re,...fe].sort((le,ve)=>ve.updateDate-le.updateDate)}),console.log(`Downloaded ${R.length} snippets from cloud`)),t.length>0&&await ua.pushSnippets(t,x.email),ua.startAutoSync(),console.log(" RAG sync initialized and auto-sync started")}catch(Y){console.error("Failed to initialize sync:",Y),h("Cloud sync failed to initialize. Check Settings > RAG for details.")}})(),()=>{S()&&ua.stopAutoSync()}),[x?.email,n,h]);const T=()=>{try{const M=localStorage.getItem("rag_config");if(M){const Y=JSON.parse(M);return Y.enabled&&Y.autoEmbed}}catch(M){console.error("Failed to check RAG config:",M)}return!1},A=async(M,Y,R)=>{if(T())try{const H=await es(),ne=await fetch(`${H}/rag/ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:Y,sourceType:"snippet",title:R||`Snippet ${M}`,snippetId:M})});if(!ne.ok){console.error("Failed to auto-embed snippet");return}const re=ne.body?.getReader(),fe=new TextDecoder;if(re)for(;;){const{done:le,value:ve}=await re.read();if(le)break;const ke=fe.decode(ve).split(`
`);for(const it of ke)if(it.startsWith("data: ")){const pt=JSON.parse(it.substring(6));pt.error&&console.error("Auto-embed error:",pt.error),pt.message&&console.log("Auto-embed:",pt.message)}}r(le=>le.map(ve=>ve.id===M?{...ve,hasEmbedding:!0}:ve))}catch(H){console.error("Auto-embed failed:",H)}},I=async(M,Y,R)=>{const H=t.find(fe=>fe.content.trim()===M.trim());if(H)return await O(H.id,{updateDate:Date.now()}),H;const ne=Date.now(),re={id:`snippet-${ne}-${Math.random().toString(36).substr(2,9)}`,content:M,title:R,sourceType:Y,timestamp:ne,updateDate:ne,selected:!1};return r(fe=>[re,...fe]),S()&&x?.email&&ua.queueSync({type:"push-snippet",data:re,userEmail:x.email}),await A(re.id,M,R),re},O=async(M,Y)=>{const R=t.find(ne=>ne.id===M),H={...R,...Y,updateDate:Date.now()};if(r(ne=>ne.map(re=>re.id===M?H:re)),S()&&x?.email&&ua.queueSync({type:"push-snippet",data:H,userEmail:x.email}),R&&Y.content&&Y.content!==R.content){const ne=Y.title!==void 0?Y.title:R.title;await A(M,Y.content,ne)}},B=M=>{r(Y=>Y.filter(R=>!M.includes(R.id))),S()&&x?.email&&M.forEach(Y=>{ua.queueSync({type:"delete-snippet",data:{id:Y},userEmail:x.email})})},F=M=>{if(M.length<2)return;const Y=t.filter(fe=>M.includes(fe.id)).sort((fe,le)=>fe.timestamp-le.timestamp),R=Y.map(fe=>fe.content).join(`

---

`),H=Y.filter(fe=>fe.title).map(fe=>fe.title).join(" + "),ne=Date.now(),re={id:`snippet-${ne}-${Math.random().toString(36).substr(2,9)}`,content:R,title:H||void 0,sourceType:Y[0].sourceType,timestamp:ne,updateDate:ne,selected:!1};r(fe=>[re,...fe.filter(le=>!M.includes(le.id))])},ae=M=>{r(Y=>Y.map(R=>R.id===M?{...R,selected:!R.selected}:R))},Z=()=>{r(M=>M.map(Y=>({...Y,selected:!0})))},z=()=>{r(M=>M.map(Y=>({...Y,selected:!1})))},ee=()=>t.filter(M=>M.selected),W=()=>{const M=new Set;return t.forEach(Y=>{Y.tags&&Y.tags.forEach(R=>M.add(R))}),Array.from(M).sort()},$=(M,Y)=>{r(R=>R.map(H=>{if(M.includes(H.id)){const ne=H.tags||[],re=[...new Set([...ne,...Y])];return{...H,tags:re,updateDate:Date.now()}}return H}))},L=(M,Y)=>{r(R=>R.map(H=>{if(M.includes(H.id)&&H.tags){const ne=H.tags.filter(re=>!Y.includes(re));return{...H,tags:ne.length>0?ne:void 0,updateDate:Date.now()}}return H}))},q=async M=>{try{return await Ma.hasEmbedding(M)}catch(Y){return console.error("Error checking embedding status:",Y),!1}},D=async M=>{try{const Y=await Ma.getEmbeddingDetails(M);return Y.hasEmbedding?Y:t.find(H=>H.id===M)?.hasEmbedding?{hasEmbedding:!0,chunkCount:1,chunks:[]}:{hasEmbedding:!1,chunkCount:0,chunks:[]}}catch(Y){return console.error("Error getting embedding details:",Y),{hasEmbedding:!1,chunkCount:0,chunks:[]}}},X=async()=>{try{const M=t.map(R=>R.id);if(M.length===0)return;const Y=await Ma.bulkCheckEmbeddings(M);r(R=>R.map(H=>({...H,hasEmbedding:Y[H.id]||!1})))}catch(M){console.error("Failed to check embedding status:",M)}},K=async(M,Y,R=!1)=>{const H=t.filter(fe=>M.includes(fe.id));if(H.length===0)return{embedded:0,skipped:0,failed:0};let ne=H,re=0;if(!R){const fe=await Ma.bulkCheckEmbeddings(M),le=M.filter(ve=>fe[ve]);if(le.length>0){if(console.log(` Skipping ${le.length} already indexed snippets:`,le),ne=H.filter(ve=>!fe[ve.id]),re=le.length,ne.length===0)return console.log(" All selected snippets already have embeddings"),f(` All ${H.length} snippets already indexed`),{embedded:0,skipped:re,failed:0};f(` Skipping ${re} already indexed, generating ${ne.length} new embeddings`)}}try{let fe,le=0;const ve=3;for(;le<=ve;)try{const Ht=await es(),Zt=await b(),hr=y.providers.filter(ar=>ar.enabled!==!1&&ar.capabilities?.embedding!==!1).map(ar=>({type:ar.type,apiKey:ar.apiKey,apiEndpoint:ar.apiEndpoint,modelName:ar.modelName,allowedModels:ar.allowedModels,maxImageQuality:ar.maxImageQuality}));if(fe=await fetch(`${Ht}/rag/embed-snippets`,{method:"POST",headers:{"Content-Type":"application/json",...Zt?{Authorization:`Bearer ${Zt}`}:{}},body:JSON.stringify({snippets:ne.map(ar=>({id:ar.id,content:ar.content,title:ar.title,tags:ar.tags,timestamp:ar.timestamp})),providers:hr,force:R})}),fe.status===429&&le<ve){const ar=Math.pow(2,le)*1e3;console.warn(` Rate limited, retrying in ${ar/1e3}s... (attempt ${le+1}/${ve})`),f(` Rate limited, retrying in ${ar/1e3}s...`),await new Promise(Ut=>setTimeout(Ut,ar)),le++;continue}break}catch(Ht){if(le<ve){const Zt=Math.pow(2,le)*1e3;console.warn(` Fetch error, retrying in ${Zt/1e3}s...`,Ht),await new Promise(hr=>setTimeout(hr,Zt)),le++;continue}throw Ht}if(!fe||!fe.ok){const Ht=await fe?.text()||"No response";throw new Error(`Failed to generate embeddings: ${fe?.status} ${fe?.statusText}. ${Ht}`)}const ce=await fe.json(),ke=ce.results?.[0]?.chunks?.[0]?.embedding;console.log(" Backend response:",{success:ce.success,resultsCount:ce.results?.length,firstResult:ce.results?.[0],firstChunk:ce.results?.[0]?.chunks?.[0],firstChunkKeys:ce.results?.[0]?.chunks?.[0]?Object.keys(ce.results[0].chunks[0]):[],firstChunkEmbeddingLength:ke?.length,firstChunkEmbeddingType:ke?.constructor?.name,firstChunkEmbeddingFirst5:Array.isArray(ke)?ke.slice(0,5):"NOT_AN_ARRAY"});const{success:it,results:pt,error:zt}=ce;if(!it)throw new Error(zt||"Failed to generate embeddings");const Sr=[];let He=0,Gt=0,rr=0;for(let Ht=0;Ht<pt.length;Ht++){const Zt=pt[Ht];if(Zt.status==="success"&&Zt.chunks.length>0){console.log(" Chunk structure check:",{chunkCount:Zt.chunks.length,firstChunk:Zt.chunks[0],hasId:Zt.chunks[0]?.id!==void 0,hasSnippetId:Zt.chunks[0]?.snippet_id!==void 0});try{await Ma.saveChunks(Zt.chunks,{snippet_id:Zt.id,created_at:Date.now(),updated_at:Date.now()}),Sr.push(Zt.id),He+=Zt.chunks.length,Gt++,console.log(` Saved ${Zt.chunks.length} chunks for snippet ${Zt.id}`)}catch(hr){rr++,console.error(` Failed to save chunks for snippet ${Zt.id}:`,hr)}Y&&Y(Ht+1,pt.length)}else Zt.status==="failed"&&(rr++,console.error(`Failed to embed snippet ${Zt.id}:`,Zt.error))}r(Ht=>Ht.map(Zt=>Sr.includes(Zt.id)?{...Zt,hasEmbedding:!0}:Zt));const Dt=pt.filter(Ht=>Ht.status==="success").flatMap(Ht=>Ht.chunks);if(console.log(" Google Sheets sync check:",{chunksToSync:Dt.length,userEmail:x?.email,spreadsheetId:localStorage.getItem("rag_spreadsheet_id"),googleLinked:localStorage.getItem("rag_google_linked")}),Dt.length>0&&x?.email)try{const Ht=localStorage.getItem("rag_spreadsheet_id");if(!Ht)console.warn(" No spreadsheet ID found. Skipping Google Sheets sync."),console.log(" To enable sync: Go to Settings > RAG and configure cloud sync"),f(" Embeddings saved locally. Enable cloud sync in Settings to backup to Google Sheets.");else{const hr=localStorage.getItem("rag_google_linked")==="true"&&gP();if(console.log(` Sync method: ${hr?"Client-side direct":"Backend"}`),hr){console.log(` Using direct Google Sheets sync for ${Dt.length} chunks (client-side)...`);try{const ar=mP(Dt);console.log(` Formatted ${ar.length} rows for Google Sheets`),await fP(Ht,"RAG_Embeddings_v1!A:K",ar),console.log(" Synced to Google Sheets (client-side)"),f(` Synced ${Dt.length} embeddings to Google Sheets`)}catch(ar){console.error(" Client-side sync failed, falling back to backend:",ar),f(" Direct sync failed, using backend fallback..."),setTimeout(async()=>{try{await ua.pushEmbeddings(Dt,(Ut,dn)=>{console.log(` Backend sync: ${Ut}/${dn} chunks`)}),console.log(" Synced to Google Sheets (backend fallback)"),f(` Synced ${Dt.length} embeddings to Google Sheets (backend)`)}catch(Ut){console.error("Backend sync also failed:",Ut),f(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}else console.log(` Using backend sync for ${Dt.length} chunks (with 2s delay)...`),setTimeout(async()=>{try{console.log(" Starting backend Google Sheets sync..."),await ua.pushEmbeddings(Dt,(ar,Ut)=>{console.log(` Syncing: ${ar}/${Ut} chunks`)}),console.log(" Synced to Google Sheets (backend)"),f(` Synced ${Dt.length} embeddings to Google Sheets`)}catch(ar){console.error("Failed to sync to Google Sheets:",ar),f(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}catch(Ht){console.error("Failed to queue sync:",Ht)}return console.log(` Generated ${He} embeddings for ${Gt} snippets`),{embedded:Gt,skipped:re+(pt.length-Gt-rr),failed:rr}}catch(fe){throw console.error("Failed to generate embeddings:",fe),fe}},xe=async()=>{if(!x?.email){f("Please sign in with Google to sync");return}if(!S()){f("Cloud sync is not enabled. Enable it in RAG Settings first.");return}try{console.log(" Manual sync triggered"),console.log(" Ensuring spreadsheet exists...");const M=await _();if(!M){h("Failed to create or access Google Sheets spreadsheet");return}console.log(" Spreadsheet ready:",M),console.log(" Pulling remote snippets...");try{const Y=localStorage.getItem("google_drive_access_token");if(!Y)console.warn("No Drive token available for pull");else{const R=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${M}/values/RAG_Snippets_v1!A2:J10000`,{headers:{Authorization:`Bearer ${Y}`}}).then(H=>H.json()).then(H=>H.values||[]);if(R.length>0){console.log(` Received ${R.length} rows from Sheets`);const H=new Map;R.forEach(re=>{const fe=re[0];H.has(fe)||H.set(fe,[]),H.get(fe).push(re)});const ne=[];H.forEach((re,fe)=>{re.sort((ce,ke)=>parseInt(ce[8]||"1")-parseInt(ke[8]||"1"));const le=re[0],ve=re.map(ce=>ce[2]||"").join("");ne.push({id:fe,title:le[1]||"",content:ve,timestamp:parseInt(le[5])||Date.now(),updateDate:parseInt(le[6])||Date.now(),sourceType:le[7]||"user",tags:le[4]?JSON.parse(le[4]):[]})}),console.log(` Reassembled ${ne.length} snippets from ${R.length} rows`),r(re=>{const fe=new Set(re.map(ce=>ce.id)),le=ne.filter(ce=>!fe.has(ce.id)),ve=re.map(ce=>{const ke=ne.find(it=>it.id===ce.id);return ke&&ke.updateDate>ce.updateDate?ke:ce});return[...le,...ve].sort((ce,ke)=>ke.updateDate-ce.updateDate)})}else console.log(" No remote snippets found")}}catch(Y){console.error(" Pull failed:",Y)}if(console.log(" Pushing local snippets..."),t.length>0){const Y=localStorage.getItem("google_drive_access_token");if(!Y){h("No Drive API access token available");return}const R=49e3,H=[];t.forEach(le=>{const ve=le.content||"";if(ve.length<=R)H.push([le.id,le.title||"",ve,"",JSON.stringify(le.tags||[]),le.timestamp.toString(),le.updateDate.toString(),le.sourceType,"1","1"]);else{const ce=Math.ceil(ve.length/R);for(let ke=0;ke<ce;ke++){const it=ke*R,pt=Math.min((ke+1)*R,ve.length),zt=ve.substring(it,pt);H.push([le.id,ke===0&&le.title||"",zt,"",ke===0?JSON.stringify(le.tags||[]):"[]",le.timestamp.toString(),le.updateDate.toString(),le.sourceType,(ke+1).toString(),ce.toString()])}}}),console.log(` Prepared ${H.length} rows from ${t.length} snippets`),console.log(" Clearing existing data...");const ne=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${M}/values/RAG_Snippets_v1!A2:J10000:clear`,{method:"POST",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"}});if(!ne.ok){const le=await ne.text();console.error("Clear error:",le)}console.log(` Writing ${H.length} rows...`);const re=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${M}/values/RAG_Snippets_v1!A2?valueInputOption=RAW`,{method:"PUT",headers:{Authorization:`Bearer ${Y}`,"Content-Type":"application/json"},body:JSON.stringify({values:H})});if(!re.ok){const le=await re.text();throw console.error(" Update error:",le),new Error(`Failed to update sheet: ${re.status} ${le}`)}const fe=await re.json();console.log(` Pushed ${t.length} snippets (${H.length} rows) to Google Sheets`,fe)}else console.log(" No local snippets to push");console.log(" Manual sync complete"),p(`Synced ${t.length} snippets with Google Sheets`)}catch(M){console.error(" Manual sync failed:",M),h(`Manual sync failed: ${M instanceof Error?M.message:"Unknown error"}`)}},U=async M=>{try{console.log(` Syncing snippet #${M} from Google Sheets...`);const Y=await fv();if(!Y)throw new Error("No Drive access token available");const R=await jP(M,Y);if(!R){console.warn(` Snippet #${M} not found in Google Sheets`);return}const H=t.find(ne=>ne.id===R.id||ne.content.trim()===R.content.trim());if(H){console.log(` Snippet #${M} already exists in localStorage, updating timestamp`),await O(H.id,{updateDate:Date.now()}),p(`Snippet "${R.title||"Untitled"}" synced from Google Sheets`);return}r(ne=>[R,...ne]),p(`Snippet "${R.title||"Untitled"}" synced from Google Sheets`),console.log(` Synced snippet #${M} from Google Sheets:`,R.title),await A(R.id,R.content,R.title)}catch(Y){console.error(` Failed to sync snippet #${M}:`,Y),h(`Failed to sync snippet: ${Y instanceof Error?Y.message:"Unknown error"}`)}};return s.jsx(RN.Provider,{value:{snippets:t,addSnippet:I,updateSnippet:O,deleteSnippets:B,mergeSnippets:F,toggleSelection:ae,selectAll:Z,selectNone:z,getSelectedSnippets:ee,getAllTags:W,addTagsToSnippets:$,removeTagsFromSnippets:L,storageStats:o,checkEmbeddingStatus:q,getEmbeddingDetails:D,bulkCheckEmbeddingStatus:X,generateEmbeddings:K,syncStatus:u,triggerManualSync:xe,getUserRagSpreadsheet:_,syncSnippetFromGoogleSheets:U},children:e})},ON=C.createContext(void 0),Zd={clientId:"927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",redirectUri:"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/callback",scope:"https://www.googleapis.com/auth/youtube.force-ssl",authUrl:"https://accounts.google.com/o/oauth2/v2/auth"},RP=({children:e})=>{const[t,r]=ps("youtube_oauth_tokens",null),[n,a]=C.useState(!1),[o,l]=C.useState(null),u=C.useMemo(()=>t?Date.now()<t.expires_at-3e5:!1,[t]);C.useEffect(()=>{if(!t||!u)return;const b=t.expires_at-Date.now(),y=Math.max(0,b-6e5);if(y<=0){f();return}const k=setTimeout(()=>{f()},y);return()=>clearTimeout(k)},[t,u]);const d=C.useCallback(()=>{const b=localStorage.getItem("auth");if(!b)return null;try{return JSON.parse(b).token||null}catch{return null}},[]),h=C.useCallback(async()=>{a(!0),l(null);try{const b=crypto.randomUUID();sessionStorage.setItem("oauth_state",b);const y=new URLSearchParams({client_id:Zd.clientId,redirect_uri:Zd.redirectUri,response_type:"code",scope:Zd.scope,access_type:"offline",prompt:"consent",state:b}),k=`${Zd.authUrl}?${y}`,S=600,_=700,T=window.screenX+(window.outerWidth-S)/2,A=window.screenY+(window.outerHeight-_)/2,I=window.open(k,"oauth",`width=${S},height=${_},left=${T},top=${A}`);if(!I)throw new Error("Popup blocked. Please allow popups for this site.");const O=F=>{const ae=new URL(Zd.redirectUri).origin;if(F.origin!==ae){console.warn("Ignoring message from unexpected origin:",F.origin);return}if(F.data.type==="oauth_success"){const Z=sessionStorage.getItem("oauth_state");if(F.data.data.state!==Z){l("Invalid state parameter - possible CSRF attack"),a(!1);return}const z={access_token:F.data.data.tokens.access_token,refresh_token:F.data.data.tokens.refresh_token,expires_at:F.data.data.tokens.expires_at,scope:F.data.data.tokens.scope,token_type:F.data.data.tokens.token_type};console.log("Successfully obtained YouTube OAuth tokens"),r(z),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",O)}else F.data.type==="oauth_error"&&(console.error("OAuth error:",F.data.data.error),l(F.data.data.message||F.data.data.error||"Authorization failed"),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",O))};window.addEventListener("message",O);const B=setInterval(()=>{I.closed&&(clearInterval(B),a(!1),window.removeEventListener("message",O),sessionStorage.getItem("oauth_state")&&(l("Authorization cancelled"),sessionStorage.removeItem("oauth_state")))},500)}catch(b){console.error("OAuth flow error:",b),l(b instanceof Error?b.message:"Failed to initiate OAuth flow"),a(!1)}},[r]),f=C.useCallback(async()=>{if(!t?.refresh_token){console.warn("No refresh token available");return}try{const b=d();if(!b){console.log("Cannot refresh YouTube tokens: JWT authentication not available");return}const y="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Refreshing YouTube OAuth tokens...");const k=await fetch(`${y}/oauth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({refresh_token:t.refresh_token})});if(!k.ok){const _=await k.json().catch(()=>({}));throw new Error(_.message||`Token refresh failed: ${k.status}`)}const S=await k.json();r({access_token:S.access_token,refresh_token:S.refresh_token,expires_at:S.expires_at,scope:S.scope,token_type:S.token_type}),console.log("Successfully refreshed YouTube OAuth tokens"),l(null)}catch(b){console.error("Token refresh error:",b);const y=b instanceof Error?b.message:"Token refresh failed";y.includes("invalid_grant")?(console.warn("Refresh token invalid, clearing tokens"),r(null),l("YouTube access expired. Please reconnect.")):l(y)}},[t,r,d]),p=C.useCallback(async()=>{if(!t)return null;if(Date.now()>=t.expires_at-3e5){console.log("Access token expired or expiring soon, refreshing..."),await f();const b=localStorage.getItem("youtube_oauth_tokens");if(b)try{return JSON.parse(b).access_token}catch{return null}return null}return t.access_token},[t,f]),x=C.useCallback(async()=>{if(t)try{const b=d();if(b){const y="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Revoking YouTube OAuth tokens..."),await fetch(`${y}/oauth/revoke`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({token:t.access_token})})}}catch(b){console.error("Revoke error:",b)}finally{r(null),l(null),console.log("YouTube OAuth tokens cleared")}},[t,r,d]);return s.jsx(ON.Provider,{value:{isConnected:u,isLoading:n,tokens:t,error:o,initiateOAuthFlow:h,disconnect:x,refreshTokens:f,getAccessToken:p},children:e})},IN=()=>{const e=C.useContext(ON);if(!e)throw new Error("useYouTubeAuth must be used within a YouTubeAuthProvider");return e},DN=C.createContext(void 0);function OP({children:e}){const{accessToken:t,isAuthenticated:r}=$s(),[n,a]=C.useState(null),[o,l]=C.useState(!1),[u,d]=C.useState(null),h=async()=>{if(!t||!r){a(null);return}l(!0),d(null);try{const x=await es(),b={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},y=await fetch(`${x}/billing`,{method:"GET",headers:b});if(!y.ok){const O=await y.json().catch(()=>({}));throw new Error(O.message||`HTTP ${y.status}`)}const k=await y.json();let S=0,_=0;if(k.transactions)for(const O of k.transactions)O.type==="credit_added"?S+=Math.abs(O.cost):_+=O.cost;const T=S-_,A=T<=0,I={userEmail:"",totalCost:parseFloat(_.toFixed(4)),creditBalance:parseFloat(Math.max(0,T).toFixed(2)),totalCredits:parseFloat(S.toFixed(2)),exceeded:A,timestamp:new Date().toISOString()};a(I),console.log(" Usage calculated from billing data:",{...I,rawTotalCredits:S,rawTotalUsage:_,rawCreditBalance:T})}catch(x){const b=x instanceof Error?x.message:"Failed to load usage";console.error(" Failed to fetch usage:",b),d(b),a(null)}finally{l(!1)}},f=x=>{if(!n)return;const b=n.totalCost+x,y=n.totalCredits-b,k=y<=0;a({...n,totalCost:b,creditBalance:y,exceeded:k,timestamp:new Date().toISOString()}),console.log(` Added $${x.toFixed(4)} to usage - New balance: $${y.toFixed(4)}`)};C.useEffect(()=>{r&&t?h():a(null)},[r,t]);const p={usage:n,loading:o,error:u,refreshUsage:h,addCost:f,isLocked:n?.exceeded||!1};return s.jsx(DN.Provider,{value:p,children:e})}function Pp(){const e=C.useContext(DN);if(e===void 0)throw new Error("useUsage must be used within a UsageProvider");return e}const PN=C.createContext(void 0),bg=()=>{const e=C.useContext(PN);if(!e)throw new Error("useCast must be used within a CastProvider");return e},IP=({children:e})=>{const[t,r]=C.useState(!1),[n,a]=C.useState(!1),[o,l]=C.useState(null),[u,d]=C.useState(null),[h,f]=C.useState(!1),[p,x]=C.useState(!1),b="DE7507EF",y=C.useCallback(()=>{if(!window.chrome?.cast){console.log("Cast API not available yet, will retry...");return}const Z=new chrome.cast.SessionRequest(b),z=new chrome.cast.ApiConfig(Z,ee=>{console.log("Cast session started:",ee),d(ee),a(!0),l(ee.receiver.friendlyName)},ee=>{console.log("Cast receiver availability:",ee),r(ee===chrome.cast.ReceiverAvailability.AVAILABLE)});chrome.cast.initialize(z,()=>console.log("Cast initialized successfully"),ee=>console.error("Cast initialization failed:",ee))},[b]),k=C.useCallback(()=>{if(!chrome?.cast){console.error("Cast API not available");return}chrome.cast.requestSession(Z=>{console.log("Cast session requested successfully:",Z),d(Z),a(!0),l(Z.receiver.friendlyName),Z.addUpdateListener(z=>{console.log("Cast session update:",z),z||(a(!1),d(null),l(null))})},Z=>{console.error("Error requesting cast session:",Z)})},[]),S=C.useCallback(()=>{u&&u.stop(()=>{console.log("Cast session stopped"),a(!1),d(null),l(null)},Z=>console.error("Error stopping session:",Z))},[u]),_=C.useCallback(Z=>{if(!u||!n){console.log("No active cast session");return}try{const z="urn:x-cast:com.lambdallmproxy.chat",ee={type:"MESSAGES_UPDATE",messages:Z.map(W=>({role:W.role,content:W.content,name:W.name,tool_call_id:W.tool_call_id,isStreaming:W.isStreaming}))};u.sendMessage(z,ee,()=>console.log("Messages sent to receiver"),W=>console.error("Error sending messages:",W))}catch(z){console.error("Error in sendMessages:",z)}},[u,n]),T=C.useCallback(Z=>{if(!(!u||!n))try{const z="urn:x-cast:com.lambdallmproxy.chat",ee={type:"SCROLL_UPDATE",position:Z};u.sendMessage(z,ee,()=>console.log("Scroll position sent:",Z),W=>console.error("Error sending scroll:",W))}catch(z){console.error("Error in sendScrollPosition:",z)}},[u,n]),A=C.useCallback((Z,z=0)=>{if(!u||!n){console.log("No active cast session for video");return}try{const ee="urn:x-cast:com.lambdallmproxy.video",W={type:"VIDEO_COMMAND",command:"load",data:{videoId:Z.videoId,url:Z.url,title:Z.title,channel:Z.channel,thumbnail:Z.thumbnail,duration:Z.duration,position:z},timestamp:Date.now()};u.sendMessage(ee,W,()=>{console.log("Video cast command sent:",Z.title),f(!0)},$=>console.error("Error casting video:",$))}catch(ee){console.error("Error in castVideo:",ee)}},[u,n]),I=C.useCallback((Z,z={})=>{if(!(!u||!n))try{const ee="urn:x-cast:com.lambdallmproxy.video",W={type:"VIDEO_COMMAND",command:Z,data:z,timestamp:Date.now()};u.sendMessage(ee,W,()=>console.log("Video command sent:",Z),$=>console.error("Error sending video command:",$)),Z==="stop"&&f(!1)}catch(ee){console.error("Error in sendVideoCommand:",ee)}},[u,n]),O=C.useCallback(Z=>{if(!u||!n){console.log("No active cast session for snippet");return}try{const z="urn:x-cast:com.lambdallmproxy.snippet",ee={type:"SNIPPET_COMMAND",command:"load",data:{id:Z.id,content:Z.content,title:Z.title||"Untitled Snippet",tags:Z.tags||[],created:Z.created,modified:Z.modified},timestamp:Date.now()};u.sendMessage(z,ee,()=>{console.log("Snippet cast successfully:",Z.title),x(!0)},W=>console.error("Error casting snippet:",W))}catch(z){console.error("Error in castSnippet:",z)}},[u,n]),B=C.useCallback(Z=>{if(!(!u||!n||!p))try{const z="urn:x-cast:com.lambdallmproxy.snippet",ee={type:"SNIPPET_COMMAND",command:"scroll",data:{position:Z},timestamp:Date.now()};u.sendMessage(z,ee,()=>console.log("Snippet scroll position sent:",Z),W=>console.error("Error sending snippet scroll:",W))}catch(z){console.error("Error in sendSnippetScrollPosition:",z)}},[u,n,p]),F=C.useCallback(()=>{if(!(!u||!n||!p))try{const Z="urn:x-cast:com.lambdallmproxy.snippet",z={type:"SNIPPET_COMMAND",command:"stop",data:{},timestamp:Date.now()};u.sendMessage(Z,z,()=>{console.log("Snippet cast stopped"),x(!1)},ee=>console.error("Error stopping snippet cast:",ee))}catch(Z){console.error("Error in stopSnippetCast:",Z)}},[u,n,p]);C.useEffect(()=>{if(document.getElementById("cast-sdk")){window.chrome?.cast&&y();return}const Z=document.createElement("script");return Z.id="cast-sdk",Z.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",Z.async=!0,Z.onload=()=>{console.log("Cast SDK loaded");const z=setInterval(()=>{window.chrome?.cast&&(clearInterval(z),y())},100);setTimeout(()=>clearInterval(z),1e4)},document.head.appendChild(Z),()=>{}},[y]);const ae={isAvailable:t,isConnected:n,deviceName:o,initializeCast:y,requestSession:k,endSession:S,sendMessages:_,sendScrollPosition:T,castVideo:A,sendVideoCommand:I,isCastingVideo:h,castSnippet:O,sendSnippetScrollPosition:B,stopSnippetCast:F,isCastingSnippet:p};return s.jsx(PN.Provider,{value:ae,children:e})},BN=C.createContext(void 0),FN=()=>{const e=C.useContext(BN);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},DP=({children:e})=>{const[t,r]=C.useState(null),[n,a]=C.useState(!1),[o,l]=C.useState(null),[u,d]=C.useState("unknown");C.useEffect(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(b=>{d(b.state),b.addEventListener("change",()=>{d(b.state)})}).catch(()=>{d("unknown")})},[]);const h=async(b,y)=>{try{const k=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b}&lon=${y}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"LLMProxyChat/1.0"}});if(!k.ok){console.warn("Reverse geocoding failed:",k.statusText);return}const S=await k.json();if(S.address)return{city:S.address.city||S.address.town||S.address.village,state:S.address.state,country:S.address.country,postalCode:S.address.postcode,formatted:S.display_name}}catch(k){console.warn("Error reverse geocoding:",k)}},f=C.useCallback(async()=>{if(!navigator.geolocation){l("Geolocation is not supported by your browser");return}a(!0),l(null);try{const b=await new Promise((A,I)=>{navigator.geolocation.getCurrentPosition(A,I,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:y,longitude:k,accuracy:S}=b.coords,_=await h(y,k),T={latitude:y,longitude:k,accuracy:S,address:_,timestamp:Date.now()};r(T),d("granted"),localStorage.setItem("user_location",JSON.stringify(T)),console.log("Location updated:",T)}catch(b){let y="Failed to get location";b.code===1?(y="Location permission denied",d("denied")):b.code===2?y="Location unavailable":b.code===3&&(y="Location request timed out"),l(y),console.error("Geolocation error:",b)}finally{a(!1)}},[]),p=C.useCallback(()=>{r(null),l(null),localStorage.removeItem("user_location")},[]);C.useEffect(()=>{const b=localStorage.getItem("user_location");if(b)try{const y=JSON.parse(b);Date.now()-(y.timestamp||0)<1440*60*1e3?r(y):localStorage.removeItem("user_location")}catch(y){console.error("Error loading stored location:",y),localStorage.removeItem("user_location")}},[]);const x={location:t,isLoading:n,error:o,permissionState:u,requestLocation:f,clearLocation:p};return s.jsx(BN.Provider,{value:x,children:e})},PP={version:"1.0.0",isEnabled:!1,currentProvider:"llm",currentVoice:null,rate:1,pitch:1,volume:1,autoSummarize:!0,elevenlabsApiKey:""};class nu{name="llm";provider=null;audio=null;currentOnEnd=null;constructor(t){this.provider=t||null}setProvider(t){this.provider=t}async isAvailable(){return this.provider?["openai","gemini","gemini-free","groq-free","together"].includes(this.provider.type):!1}async getVoices(){if(!this.provider)return[];switch(this.provider.type){case"openai":return[{id:"alloy",name:"Alloy",language:"en",gender:"neutral",provider:"openai"},{id:"echo",name:"Echo",language:"en",gender:"male",provider:"openai"},{id:"fable",name:"Fable",language:"en",gender:"neutral",provider:"openai"},{id:"onyx",name:"Onyx",language:"en",gender:"male",provider:"openai"},{id:"nova",name:"Nova",language:"en",gender:"female",provider:"openai"},{id:"shimmer",name:"Shimmer",language:"en",gender:"female",provider:"openai"}];case"gemini":case"gemini-free":return[{id:"en-US-Neural2-A",name:"Neural2 A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-C",name:"Neural2 C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-D",name:"Neural2 D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-E",name:"Neural2 E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-F",name:"Neural2 F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-G",name:"Neural2 G (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-H",name:"Neural2 H (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-I",name:"Neural2 I (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-J",name:"Neural2 J (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-A",name:"WaveNet A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-B",name:"WaveNet B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-C",name:"WaveNet C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-D",name:"WaveNet D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-E",name:"WaveNet E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-F",name:"WaveNet F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-A",name:"Standard A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-B",name:"Standard B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-C",name:"Standard C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-D",name:"Standard D (Male)",language:"en-US",gender:"male",provider:"google"}];case"groq-free":return[{id:"Aaliyah-PlayAI",name:"Aaliyah",language:"en-US",gender:"female",provider:"groq"},{id:"Adelaide-PlayAI",name:"Adelaide",language:"en-US",gender:"female",provider:"groq"},{id:"Angelo-PlayAI",name:"Angelo",language:"en-US",gender:"male",provider:"groq"},{id:"Arista-PlayAI",name:"Arista",language:"en-US",gender:"female",provider:"groq"},{id:"Atlas-PlayAI",name:"Atlas",language:"en-US",gender:"male",provider:"groq"},{id:"Basil-PlayAI",name:"Basil",language:"en-US",gender:"male",provider:"groq"},{id:"Briggs-PlayAI",name:"Briggs",language:"en-US",gender:"male",provider:"groq"},{id:"Calum-PlayAI",name:"Calum",language:"en-US",gender:"male",provider:"groq"},{id:"Celeste-PlayAI",name:"Celeste",language:"en-US",gender:"female",provider:"groq"},{id:"Cheyenne-PlayAI",name:"Cheyenne",language:"en-US",gender:"female",provider:"groq"},{id:"Chip-PlayAI",name:"Chip",language:"en-US",gender:"male",provider:"groq"},{id:"Cillian-PlayAI",name:"Cillian",language:"en-US",gender:"male",provider:"groq"},{id:"Deedee-PlayAI",name:"Deedee",language:"en-US",gender:"female",provider:"groq"},{id:"Eleanor-PlayAI",name:"Eleanor",language:"en-US",gender:"female",provider:"groq"},{id:"Fritz-PlayAI",name:"Fritz",language:"en-US",gender:"male",provider:"groq"},{id:"Gail-PlayAI",name:"Gail",language:"en-US",gender:"female",provider:"groq"},{id:"Indigo-PlayAI",name:"Indigo",language:"en-US",gender:"neutral",provider:"groq"},{id:"Jennifer-PlayAI",name:"Jennifer",language:"en-US",gender:"female",provider:"groq"},{id:"Judy-PlayAI",name:"Judy",language:"en-US",gender:"female",provider:"groq"},{id:"Mamaw-PlayAI",name:"Mamaw",language:"en-US",gender:"female",provider:"groq"},{id:"Mason-PlayAI",name:"Mason",language:"en-US",gender:"male",provider:"groq"},{id:"Mikail-PlayAI",name:"Mikail",language:"en-US",gender:"male",provider:"groq"},{id:"Mitch-PlayAI",name:"Mitch",language:"en-US",gender:"male",provider:"groq"},{id:"Nia-PlayAI",name:"Nia",language:"en-US",gender:"female",provider:"groq"},{id:"Quinn-PlayAI",name:"Quinn",language:"en-US",gender:"neutral",provider:"groq"},{id:"Ruby-PlayAI",name:"Ruby",language:"en-US",gender:"female",provider:"groq"},{id:"Thunder-PlayAI",name:"Thunder",language:"en-US",gender:"male",provider:"groq"}];case"together":return[];default:return[]}}async speak(t,r={}){if(!this.provider)throw new Error("No provider configured for TTS");console.log("LLMProviderTTSProvider: speak() called, stopping any existing audio"),this.stop();const n=await this.speakViaProxy(t,r);return this.playAudio(n,r)}async speakViaProxy(t,r){const n=await this.getApiBase();let a=this.provider.type;a==="gemini"||a==="gemini-free"?a="google":a==="groq-free"&&(a="groq");const o=localStorage.getItem("google_access_token");if(!o)throw new Error("Authentication required. Please sign in.");const l=await fetch(`${n}/tts`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({provider:a,text:t,voice:r.voice,rate:r.rate||1,pitch:r.pitch||1,model:a==="openai"?"tts-1":void 0,apiKey:this.provider.apiKey})});if(!l.ok){const u=await l.text();throw new Error(`TTS Proxy API error: ${l.status} - ${u}`)}return await l.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(`${r}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,o)=>{if(!this.audio){o(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const l=new Error("Audio playback failed");r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,o(l)},this.audio.play().catch(l=>{const u=new Error(`Failed to start audio playback: ${l.message}`);r.onError?.(u),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,o(u)})})}stop(){if(console.log("LLMProviderTTSProvider: stop() called",{hasAudio:!!this.audio}),this.audio){console.log("LLMProviderTTSProvider: Stopping audio",{paused:this.audio.paused,currentTime:this.audio.currentTime,duration:this.audio.duration,src:this.audio.src?.substring(0,50)}),this.audio.onended=null,this.audio.onerror=null,this.audio.oncanplaythrough=null,this.audio.pause(),this.audio.currentTime=0;const t=this.audio;this.audio=null,t.src&&t.src.startsWith("blob:")&&(console.log("LLMProviderTTSProvider: Revoking blob URL"),URL.revokeObjectURL(t.src),t.src="");try{t.remove()}catch(r){console.warn("Failed to remove audio element:",r)}if(console.log("LLMProviderTTSProvider: Audio stopped and cleaned up"),this.currentOnEnd){console.log("LLMProviderTTSProvider: Triggering onEnd callback");const r=this.currentOnEnd;this.currentOnEnd=null,r()}}else console.log("LLMProviderTTSProvider: No audio to stop")}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop()}}class N_{name="elevenlabs";apiKey;audio=null;cachedVoices=null;currentOnEnd=null;constructor(t){this.apiKey=t}setApiKey(t){this.apiKey=t,this.cachedVoices=null}async isAvailable(){return!!this.apiKey}async getVoices(){if(this.cachedVoices)return this.cachedVoices;if(!this.apiKey)return[];try{const t=await fetch("https://api.elevenlabs.io/v1/voices",{headers:{"xi-api-key":this.apiKey,"Content-Type":"application/json"}});if(!t.ok)return console.error("Failed to fetch ElevenLabs voices:",t.status,t.statusText),[];const r=await t.json();return this.cachedVoices=r.voices.map(n=>({id:n.voice_id,name:n.name,language:n.labels?.language||"en",gender:this.detectGender(n.name,n.labels),provider:"elevenlabs"})),this.cachedVoices}catch(t){return console.error("Failed to fetch ElevenLabs voices:",t),[]}}detectGender(t,r){if(r?.gender)return r.gender.toLowerCase();const n=t.toLowerCase();return n.includes("bella")||n.includes("elli")||n.includes("rachel")||n.includes("domi")||n.includes("sarah")||n.includes("nicole")||n.includes("female")?"female":n.includes("adam")||n.includes("antoni")||n.includes("arnold")||n.includes("josh")||n.includes("sam")||n.includes("male")?"male":"neutral"}async speak(t,r={}){if(!this.apiKey)throw new Error("ElevenLabs API key not configured");const n=await this.getVoices();let a=r.voice;if(!a||!n.find(o=>o.id===a)){if(n.length===0)throw new Error("No ElevenLabs voices available");a=n[0].id}try{const o=await this.speakViaProxy(t,a,r);return this.playAudio(o,r)}catch(o){const l=o instanceof Error?o.message:"Unknown error";throw new Error(`ElevenLabs TTS failed: ${l}`)}}async speakViaProxy(t,r,n){const a=await this.getApiBase(),o=localStorage.getItem("google_id_token");if(!o)throw new Error("Authentication required. Please sign in.");const l=await fetch(`${a}/tts`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({provider:"elevenlabs",text:t,voice:r,rate:n.rate||1,apiKey:this.apiKey})});if(!l.ok){const u=await l.text();throw new Error(`TTS Proxy API error: ${l.status} - ${u}`)}return await l.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(`${r}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,o)=>{if(!this.audio){o(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const l=new Error("Audio playback failed");r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,o(l)},this.audio.play().catch(l=>{const u=new Error(`Failed to start audio playback: ${l.message}`);r.onError?.(u),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,o(u)})})}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src&&this.audio.src.startsWith("blob:")&&URL.revokeObjectURL(this.audio.src),this.audio=null,this.currentOnEnd&&(console.log("ElevenLabsProvider: stop() triggering onEnd callback"),this.currentOnEnd(),this.currentOnEnd=null))}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop(),this.cachedVoices=null}}function Mh(e){let t=e;return t=t.replace(/#{1,6}\s/g,""),t=t.replace(/\*\*\*(.*?)\*\*\*/g,"$1"),t=t.replace(/\*\*(.*?)\*\*/g,"$1"),t=t.replace(/\*(.*?)\*/g,"$1"),t=t.replace(/`{1,3}[^`]*`{1,3}/g,"code"),t=t.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),t=t.replace(/<[^>]+>/g,""),t=t.replace(/&/g," and "),t=t.replace(/@/g," at "),t=t.replace(/#/g," hashtag "),t=t.replace(/\$/g," dollar "),t=t.replace(/%/g," percent "),t=t.replace(/[^\w\s.,!?;:'"()[\]{}\-]/g," "),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\. /g,". ... "),t=t.replace(/, /g,", .. "),t=t.replace(/: /g,": .. "),t=t.replace(/; /g,"; .. "),t}function BP(e){if(typeof e=="string")return Mh(e);if(Array.isArray(e)){const t=e.filter(r=>r.type==="text").map(r=>r.text||r.content||"");return Mh(t.join(" "))}if(e&&typeof e=="object"){const t=e.text||e.content||"";return Mh(String(t))}return""}function FP(e,t=500){if(e.length<=t)return e;const r=e.substring(0,t),n=Math.max(r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));return n>t*.7?r.substring(0,n+1)+" ... Content truncated for speech.":r+"... Content truncated for speech."}function UP(e,t,r=500){return t?e.length>r:!1}function $P(e){const t=e.toLowerCase();return t.includes("female")||t.includes("woman")||t.includes("alice")||t.includes("emma")||t.includes("nova")||t.includes("shimmer")||t.includes("samantha")||t.includes("victoria")||t.includes("alloy")?"female":t.includes("male")||t.includes("man")||t.includes("alex")||t.includes("daniel")||t.includes("onyx")||t.includes("echo")||t.includes("thomas")||t.includes("david")?"male":"neutral"}class UN{name="Browser Speech";synth;utterance=null;isStoppedIntentionally=!1;currentOnEndCallback=null;pollingInterval=null;constructor(){this.synth=window.speechSynthesis}async isAvailable(){return"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}async getVoices(){return await this.waitForVoices(),this.synth.getVoices().map(r=>({id:r.voiceURI,name:r.name,language:r.lang,gender:$P(r.name),provider:"browser"}))}waitForVoices(){return new Promise(t=>{if(this.synth.getVoices().length>0){t();return}const n=()=>{this.synth.removeEventListener("voiceschanged",n),t()};this.synth.addEventListener("voiceschanged",n),setTimeout(()=>{this.synth.removeEventListener("voiceschanged",n),t()},1e3)})}async speak(t,r={}){if(!t||t.trim().length===0){const l=new Error("Cannot speak empty text");throw r.onError?.(l),l}this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null;const n=t.trim(),a=32e3,o=n.length>a?n.substring(0,a)+"...":n;if(n.length>a&&console.warn(`BrowserSpeechProvider: Text truncated from ${n.length} to ${a} characters`),this.utterance=new SpeechSynthesisUtterance(o),this.utterance.rate=r.rate||1,this.utterance.pitch=r.pitch||1,this.utterance.volume=r.volume||1,r.voice){const l=this.synth.getVoices();this.utterance.voice=l.find(u=>u.voiceURI===r.voice)||null}return new Promise((l,u)=>{if(!this.utterance){u(new Error("Failed to create speech utterance"));return}this.utterance.onstart=()=>r.onStart?.(),this.currentOnEndCallback=r.onEnd||null,this.utterance.onend=()=>{console.log("BrowserSpeechProvider: onend event fired naturally"),this.stopPolling(),r.onEnd?.(),this.currentOnEndCallback=null,this.utterance=null,l()},this.utterance.onerror=h=>{if(console.error("BrowserSpeechProvider: Speech synthesis error:",{error:h.error,utterance:h.utterance,isStoppedIntentionally:this.isStoppedIntentionally,text:t.substring(0,100)+(t.length>100?"...":"")}),this.isStoppedIntentionally&&h.error==="interrupted"){r.onEnd?.(),this.currentOnEndCallback=null,this.utterance=null,l();return}h.error==="synthesis-failed"&&console.warn("BrowserSpeechProvider: synthesis-failed - possibly empty text, too long text, or browser limitation");const f=new Error(`Speech synthesis error: ${h.error}`);r.onError?.(f),this.currentOnEndCallback=null,this.utterance=null,u(f)},r.onBoundary&&(this.utterance.onboundary=h=>{const f=t.substring(h.charIndex,h.charIndex+h.charLength);r.onBoundary(f,h.charIndex)});const d=()=>{try{this.synth.speak(this.utterance),this.startPolling()}catch(h){const f=new Error(`Failed to start speech: ${h}`);r.onError?.(f),this.utterance=null,u(f)}};this.synth.speaking||this.synth.pending?(console.warn("BrowserSpeechProvider: Speech synthesis in bad state, resetting..."),this.synth.cancel(),setTimeout(d,100)):d()})}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval(()=>{if(this.utterance&&!this.synth.speaking&&!this.synth.pending&&(console.log("BrowserSpeechProvider: Polling detected speech stopped, triggering onEnd"),this.stopPolling(),this.currentOnEndCallback)){const t=this.currentOnEndCallback;this.currentOnEndCallback=null,this.utterance=null,t()}},500)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}stop(){if(console.log("BrowserSpeechProvider: stop() called",{hasUtterance:!!this.utterance,hasCallback:!!this.currentOnEndCallback,isStoppedIntentionally:this.isStoppedIntentionally}),this.stopPolling(),this.utterance||this.currentOnEndCallback){this.isStoppedIntentionally=!0;const t=this.currentOnEndCallback;this.synth.pause(),this.synth.cancel(),setTimeout(()=>{this.synth.speaking&&this.synth.cancel()},0),this.utterance=null,this.currentOnEndCallback=null,t&&(console.log("BrowserSpeechProvider: Manually calling onEnd callback"),setTimeout(()=>t(),0))}}pause(){this.synth.speaking&&!this.synth.paused&&this.synth.pause()}resume(){this.synth.paused&&this.synth.resume()}cleanup(){this.stopPolling(),this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null}}class zP{name="speakjs";worker=null;isPlaying=!1;async isAvailable(){return!0}async getVoices(){return[{id:"speakjs-en",name:"speak.js English",language:"en-US",gender:"neutral",provider:"speakjs"}]}async speak(t,r={}){return this.stop(),"speechSynthesis"in window?new UN().speak(t,r):new Promise(n=>{r.onStart?.(),this.isPlaying=!0;const a=Math.min(t.length*50,5e3);setTimeout(()=>{this.isPlaying&&(r.onEnd?.(),this.isPlaying=!1,n())},a)})}stop(){this.isPlaying=!1,this.worker&&(this.worker.terminate(),this.worker=null)}pause(){}resume(){}cleanup(){this.stop()}}class HP{providers=new Map;llmProviders=[];async initializeProviders(t,r){this.llmProviders=t,this.providers.clear(),await this.initializeLLMProviders();const n=this.getBestLLMProviderForTTS();if(n){const l=new nu(n);await l.isAvailable()&&this.providers.set("llm",l)}if(r){const l=new N_(r);await l.isAvailable()&&this.providers.set("elevenlabs",l)}const a=new UN;await a.isAvailable()&&this.providers.set("browser",a);const o=new zP;await o.isAvailable()&&this.providers.set("speakjs",o)}async initializeLLMProviders(){const t=this.llmProviders.find(o=>o.type==="openai"&&o.enabled!==!1&&o.apiKey);if(t){const o=new nu(t);await o.isAvailable()&&this.providers.set("openai-tts",o)}const r=this.llmProviders.find(o=>o.type==="groq-free"&&o.enabled!==!1&&o.apiKey);if(r){const o=new nu(r);await o.isAvailable()&&this.providers.set("groq-tts",o)}const n=this.llmProviders.find(o=>(o.type==="gemini"||o.type==="gemini-free")&&o.enabled!==!1&&o.apiKey)||this.llmProviders.find(o=>o.type==="gemini-free"&&o.enabled!==!1&&o.apiKey);if(n){const o=new nu(n);await o.isAvailable()&&this.providers.set("gemini-tts",o)}const a=this.llmProviders.find(o=>o.type==="together"&&o.enabled!==!1&&o.apiKey);if(a){const o=new nu(a);await o.isAvailable()&&this.providers.set("together-tts",o)}}getBestLLMProviderForTTS(){const t=["openai","gemini","gemini-free","groq-free","together"];for(const r of t){const n=this.llmProviders.find(a=>a.type===r&&a.enabled!==!1&&a.apiKey);if(n)return n}return null}getProvider(t){return this.providers.get(t)}getAvailableProviders(){const t=Array.from(this.providers.keys());t.includes("elevenlabs")||t.push("elevenlabs");const r=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];return t.sort((n,a)=>{const o=r.indexOf(n),l=r.indexOf(a);return(o===-1?999:o)-(l===-1?999:l)})}getAvailableLLMProviders(){return this.llmProviders.filter(t=>t.enabled!==!1&&t.apiKey&&["openai","gemini","gemini-free","groq-free","together"].includes(t.type)).map(t=>({type:t.type,name:this.getLLMProviderDisplayName(t.type)}))}getLLMProviderByType(t){return this.llmProviders.find(r=>r.type===t&&r.enabled!==!1&&r.apiKey)||null}getLLMProviderDisplayName(t){return{openai:"OpenAI",gemini:"Gemini Pro","gemini-free":"Gemini Free","groq-free":"Groq",together:"Together AI"}[t]||t}getDefaultProvider(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t){const n=this.providers.get(r);if(n)return n}return null}getDefaultProviderType(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t)if(this.providers.has(r))return r;return null}async updateLLMProviders(t){this.llmProviders=t;const r=this.getBestLLMProviderForTTS();if(r){const n=this.providers.get("llm");if(n)n.setProvider(r);else{const a=new nu(r);await a.isAvailable()&&this.providers.set("llm",a)}}else this.providers.delete("llm")}async updateElevenLabsApiKey(t){if(t){const r=this.providers.get("elevenlabs");if(r)r.setApiKey(t);else{const n=new N_(t);await n.isAvailable()&&this.providers.set("elevenlabs",n)}}else this.providers.delete("elevenlabs")}cleanup(){this.providers.forEach(t=>{if(t&&typeof t.stop=="function")try{t.stop()}catch(r){console.warn("Error stopping TTS provider:",r)}if(t&&typeof t.cleanup=="function")try{t.cleanup()}catch(r){console.warn("Error cleaning up TTS provider:",r)}}),this.providers.clear()}getCurrentLLMProviderInfo(){const t=this.getBestLLMProviderForTTS();return t?{name:{openai:"OpenAI",gemini:"Google Gemini (Paid)","gemini-free":"Google Gemini (Free)",groq:"Groq (Paid)","groq-free":"Groq (Free)",together:"Together AI",atlascloud:"Atlas Cloud"}[t.type]||t.type,type:t.type}:null}}class qP{async generateSpeakableSummary(t,r){if(t.length<500)return Mh(t);const n=`Convert the following text into a concise, natural-sounding spoken summary. 
The summary should:
- Be 2-3 sentences maximum
- Sound natural when read aloud
- Capture the key points
- Avoid technical jargon or formatting
- Use conversational language

Text to summarize:
${t}

Speakable summary:`;try{const a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a helpful assistant that creates concise, natural-sounding spoken summaries."},{role:"user",content:n}],provider:r.type,apiKey:r.apiKey,maxTokens:200,temperature:.7,ttsMode:!0})});if(!a.ok)throw new Error(`Summary API error: ${a.status}`);const o=await a.json();let l="";if(o.choices&&o.choices[0]?.message?.content)l=o.choices[0].message.content;else if(o.content)l=o.content;else throw new Error("No summary content in response");return Mh(l)}catch(a){return console.error("Failed to generate speakable summary:",a),FP(t,500)}}shouldSummarize(t,r,n=500){return r?t.length>n:!1}}const $N=C.createContext(void 0),GP=({children:e})=>{const{settings:t}=ii(),[r,n]=ps("tts_settings",PP),[a]=C.useState(()=>new HP),[o]=C.useState(()=>new qP),[l,u]=C.useState(null),d=C.useRef(!1),[h,f]=C.useState({isEnabled:r.isEnabled,isPlaying:!1,currentText:null,currentProvider:r.currentProvider,currentVoice:r.currentVoice,rate:r.rate,pitch:r.pitch,volume:r.volume,providers:[],voices:[],autoSummarize:r.autoSummarize,elevenlabsApiKey:r.elevenlabsApiKey});C.useEffect(()=>((async()=>{try{a.cleanup(),await a.initializeProviders(t.providers,r.elevenlabsApiKey);const $=a.getAvailableProviders();let L=r.currentProvider;$.includes(L)||(L=a.getDefaultProviderType()||"speakjs");const q=a.getProvider(L),D=q?await q.getVoices():[];f(X=>({...X,currentProvider:L,providers:[],voices:D})),L!==r.currentProvider&&n(X=>({...X,currentProvider:L}))}catch($){console.error("Failed to initialize TTS providers:",$)}})(),()=>{a.cleanup()}),[t.providers,r.elevenlabsApiKey]),C.useEffect(()=>{(async()=>{const $=a.getProvider(r.currentProvider);if($)try{const L=await $.getVoices();f(q=>({...q,voices:L,currentVoice:L.find(D=>D.id===q.currentVoice)?q.currentVoice:null}))}catch(L){console.error("Failed to load voices:",L),f(q=>({...q,voices:[]}))}})()},[r.currentProvider]);const p=C.useCallback(async(W,$={})=>{if(!h.isEnabled)throw new Error("TTS is disabled");console.log("TTSContext.speak() - Resetting isStoppingIntentionally flag (starting new speech)"),d.current=!1;let L=BP(W);if($.shouldSummarize||UP(L,h.autoSummarize))try{const M=t.providers.find(Y=>Y.enabled!==!1&&Y.apiKey);M&&(L=await o.generateSpeakableSummary(L,M))}catch(M){console.warn("Failed to generate summary, using original text:",M)}f(M=>({...M,isPlaying:!0,currentText:L})),l&&(clearTimeout(l),u(null));const q=setTimeout(()=>{console.log("TTSContext: Fallback timeout triggered - forcing isPlaying to false"),f(M=>({...M,isPlaying:!1,currentText:null})),u(null)},3e4);u(q);const X=(M=>{const Y=["browser","speakjs"],R=[M],H=a.getAvailableProviders().filter(ne=>ne!==M&&!Y.includes(ne));return R.push(...H,...Y),R})(h.currentProvider),K={voice:h.currentVoice||void 0,rate:h.rate,pitch:h.pitch,volume:h.volume,onStart:()=>{$.onStart?.()},onEnd:()=>{if(console.log("TTSContext speak onEnd callback - checking if intentional stop:",d.current),d.current){console.log("TTSContext speak onEnd - INTENTIONAL STOP, skipping onEnd callback and ensuring clean state"),l&&(clearTimeout(l),u(null)),f(M=>({...M,isPlaying:!1,currentText:null}));return}console.log("TTSContext speak onEnd callback - setting isPlaying to false"),l&&(clearTimeout(l),u(null)),f(M=>(console.log("TTSContext speak onEnd - prev state:",{isPlaying:M.isPlaying}),{...M,isPlaying:!1,currentText:null})),$.onEnd?.()},onError:M=>{f(Y=>({...Y,isPlaying:!1,currentText:null})),$.onError?.(M)},onBoundary:$.onBoundary,...$};let xe=null,U=null;for(const M of X){const Y=a.getProvider(M);if(Y)try{M!==h.currentProvider&&console.warn(`TTS: ${h.currentProvider} failed, falling back to ${M}`),await Y.speak(L,K),U=M;break}catch(R){console.warn(`TTS provider ${M} failed:`,R),xe=R;continue}}if(!U)throw f(M=>({...M,isPlaying:!1,currentText:null})),xe||new Error("All TTS providers failed")},[h,t.providers,a,o]),x=C.useCallback(()=>{console.log("TTSContext.stop() called - INTENTIONAL STOP"),d.current=!0,l&&(clearTimeout(l),u(null)),typeof window<"u"&&window.speechSynthesis&&(console.log("TTSContext.stop() - Stopping speechSynthesis"),window.speechSynthesis.cancel());const W=document.querySelectorAll("audio");console.log("TTSContext.stop() - Found",W.length,"audio elements"),W.forEach($=>{$.paused||(console.log("TTSContext.stop() - Force stopping audio element"),$.pause(),$.currentTime=0,$.src&&$.src.startsWith("blob:")&&(URL.revokeObjectURL($.src),$.src=""))}),f($=>{console.log("TTSContext.stop() - stopping, prev state:",{isPlaying:$.isPlaying,currentProvider:$.currentProvider});const L=a.getProvider($.currentProvider);if(L){console.log("TTSContext.stop() - calling provider.stop()");try{L.stop()}catch(q){console.error("TTSContext.stop() - Error calling provider.stop():",q)}}else console.warn("TTSContext.stop() - no provider found for:",$.currentProvider);return{...$,isPlaying:!1,currentText:null}})},[a,l]),b=C.useCallback(()=>{f(W=>{const $=a.getProvider(W.currentProvider);return $&&$.pause&&$.pause(),W})},[a]),y=C.useCallback(()=>{f(W=>{const $=a.getProvider(W.currentProvider);return $&&$.resume&&$.resume(),W})},[a]),k=C.useCallback(W=>{f($=>({...$,isEnabled:W})),n($=>({...$,isEnabled:W}))},[n]),S=C.useCallback(async W=>{const $=a.getProvider(W);if($){x();try{const L=await $.getVoices();f(q=>({...q,currentProvider:W,voices:L,currentVoice:null})),n(q=>({...q,currentProvider:W,currentVoice:null}))}catch(L){console.error("Failed to switch provider:",L)}}},[a,x,n]),_=C.useCallback(W=>{f($=>({...$,currentVoice:W})),n($=>({...$,currentVoice:W}))},[n]),T=C.useCallback(W=>{f($=>({...$,rate:W})),n($=>({...$,rate:W}))},[n]),A=C.useCallback(W=>{f($=>({...$,pitch:W})),n($=>({...$,pitch:W}))},[n]),I=C.useCallback(W=>{f($=>({...$,volume:W})),n($=>({...$,volume:W}))},[n]),O=C.useCallback(W=>{f($=>({...$,autoSummarize:W})),n($=>({...$,autoSummarize:W}))},[n]),B=C.useCallback(async W=>{f(L=>({...L,elevenlabsApiKey:W})),n(L=>({...L,elevenlabsApiKey:W})),await a.updateElevenLabsApiKey(W);const $=a.getAvailableProviders();console.log("Available TTS providers after ElevenLabs update:",$)},[n,a]),F=C.useCallback(()=>a.getAvailableProviders(),[a]),ae=C.useCallback(async W=>{const $=a.getProvider(W);return $?await $.getVoices():[]},[a]),Z=C.useCallback(async(W,$)=>p(W,{shouldSummarize:$}),[p]),z=C.useCallback(async(W,$)=>p(W,{shouldSummarize:$}),[p]),ee={state:h,speak:p,stop:x,pause:b,resume:y,setEnabled:k,setProvider:S,setVoice:_,setRate:T,setPitch:A,setVolume:I,setAutoSummarize:O,setElevenLabsApiKey:B,getAvailableProviders:F,getVoicesForProvider:ae,speakResponse:Z,speakSnippet:z};return s.jsx($N.Provider,{value:ee,children:e})},Bp=()=>{const e=C.useContext($N);if(!e)throw new Error("useTTS must be used within a TTSProvider");return e},YP="ChatHistoryDB",WP=1,$n="chats";class VP{db=null;initPromise=null;async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(YP,WP);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("IndexedDB initialized successfully"),t(this.db)},n.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains($n)||(o.createObjectStore($n,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("Created chat history object store"))}}),this.initPromise)}async saveChat(t,r,n,a){try{const u=(await this.init()).transaction([$n],"readwrite").objectStore($n),d={id:t,messages:r,timestamp:Date.now(),title:n,...a?.systemPrompt&&{systemPrompt:a.systemPrompt},...a?.planningQuery&&{planningQuery:a.planningQuery},...a?.generatedSystemPrompt&&{generatedSystemPrompt:a.generatedSystemPrompt},...a?.generatedUserQuery&&{generatedUserQuery:a.generatedUserQuery}};await new Promise((h,f)=>{const p=u.put(d);p.onsuccess=()=>h(),p.onerror=()=>f(p.error)}),console.log(`Saved chat ${t} to IndexedDB with planning metadata`)}catch(o){throw console.error("Error saving chat to IndexedDB:",o),o}}async getChat(t){try{const a=(await this.init()).transaction([$n],"readonly").objectStore($n);return new Promise((o,l)=>{const u=a.get(t);u.onsuccess=()=>{const d=u.result;o(d?d.messages:null)},u.onerror=()=>l(u.error)})}catch(r){return console.error("Error getting chat from IndexedDB:",r),null}}async getChatWithMetadata(t){try{const a=(await this.init()).transaction([$n],"readonly").objectStore($n);return new Promise((o,l)=>{const u=a.get(t);u.onsuccess=()=>{const d=u.result;o(d||null)},u.onerror=()=>l(u.error)})}catch(r){return console.error("Error getting chat with metadata from IndexedDB:",r),null}}async getAllChats(){try{const n=(await this.init()).transaction([$n],"readonly").objectStore($n);return new Promise((a,o)=>{const l=n.getAll();l.onsuccess=()=>a(l.result||[]),l.onerror=()=>o(l.error)})}catch(t){return console.error("Error getting all chats from IndexedDB:",t),[]}}async deleteChat(t){try{const a=(await this.init()).transaction([$n],"readwrite").objectStore($n);await new Promise((o,l)=>{const u=a.delete(t);u.onsuccess=()=>o(),u.onerror=()=>l(u.error)}),console.log(`Deleted chat ${t} from IndexedDB`)}catch(r){throw console.error("Error deleting chat from IndexedDB:",r),r}}async clearAllChats(){try{const n=(await this.init()).transaction([$n],"readwrite").objectStore($n);await new Promise((a,o)=>{const l=n.clear();l.onsuccess=()=>a(),l.onerror=()=>o(l.error)}),console.log("Cleared all chats from IndexedDB")}catch(t){throw console.error("Error clearing all chats from IndexedDB:",t),t}}async getOldestChats(t){try{const o=(await this.init()).transaction([$n],"readonly").objectStore($n).index("timestamp");return new Promise((l,u)=>{const d=o.openCursor(),h=[];d.onsuccess=f=>{const p=f.target.result;p&&h.length<t?(h.push(p.value),p.continue()):l(h)},d.onerror=()=>u(d.error)})}catch(r){return console.error("Error getting oldest chats:",r),[]}}async getCount(){try{const n=(await this.init()).transaction([$n],"readonly").objectStore($n);return new Promise((a,o)=>{const l=n.count();l.onsuccess=()=>a(l.result),l.onerror=()=>o(l.error)})}catch(t){return console.error("Error getting chat count:",t),0}}async cleanupOldChats(t){try{const r=await this.getAllChats();if(r.length<=t)return 0;const a=r.sort((d,h)=>d.timestamp-h.timestamp).slice(0,r.length-t),l=(await this.init()).transaction([$n],"readwrite"),u=l.objectStore($n);for(const d of a)u.delete(d.id);return await new Promise((d,h)=>{l.oncomplete=()=>d(),l.onerror=()=>h(l.error)}),console.log(`Cleaned up ${a.length} old chats`),a.length}catch(r){return console.error("Error cleaning up old chats:",r),0}}async migrateFromLocalStorage(){try{let t=0;const r=Object.keys(localStorage).filter(n=>n.startsWith("chat_history_"));for(const n of r)try{const a=localStorage.getItem(n);if(a){const o=JSON.parse(a),l=n.replace("chat_history_","");await this.saveChat(l,o),localStorage.removeItem(n),t++}}catch(a){console.error(`Error migrating ${n}:`,a)}return t>0&&console.log(`Migrated ${t} chat histories from localStorage to IndexedDB`),t}catch(t){return console.error("Error during migration:",t),0}}}const Xl=new VP,zN=()=>s.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-4 right-4 p-3 bg-gray-800 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 z-50",title:"View on GitHub",style:{zIndex:9999},children:s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),KP=()=>{const{login:e}=$s(),t=C.useRef(null),[r,n]=C.useState(!1);return C.useEffect(()=>{if(t.current){const a=()=>{if(typeof google<"u"&&google.accounts)if(console.log("LoginScreen: Initializing Google Sign-In"),google.accounts.id.initialize({client_id:"927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",callback:o=>{o.credential&&(console.log("LoginScreen: Login successful"),e(o.credential))},auto_select:!1,cancel_on_tap_outside:!1}),google.accounts.id.renderButton(t.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",width:300}),r)console.log("LoginScreen: Skipping One Tap (already attempted this mount)");else{n(!0),console.log("LoginScreen: Attempting One Tap sign-in (first time this mount)");try{google.accounts.id.prompt()}catch(o){console.log("LoginScreen: One Tap prompt failed silently:",o)}}else console.log("LoginScreen: Google SDK not loaded yet, retrying..."),setTimeout(a,100)};a()}},[e,r]),s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12 max-w-md w-full mx-4",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:s.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"w-24 h-24 object-contain"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Research Agent"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"AI-powered research assistant"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 text-center",children:"Sign in to continue"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-6",children:"Authentication is required to use this application"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{ref:t,id:"login-screen-google-signin",className:"min-w-[300px] min-h-[44px]",style:{display:"flex",alignItems:"center",justifyContent:"center"}})}),s.jsx("div",{className:"mt-6 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Secure authentication powered by Google"})]}),s.jsx(zN,{})]})},XP=()=>{const{user:e,logout:t}=$s(),{isAvailable:r,isConnected:n,deviceName:a,requestSession:o,endSession:l}=bg();if(!e)return null;const u=()=>{n?l():o()};return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:t,className:"btn-secondary px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm whitespace-nowrap",title:`Sign out ${e.email}`,children:[s.jsx("span",{className:"hidden sm:inline",children:"Sign Out"}),s.jsx("span",{className:"sm:hidden",children:""})]}),r&&s.jsx("button",{onClick:u,className:`btn-secondary p-2 ${n?"bg-blue-500 text-white hover:bg-blue-600":""}`,title:n?`Casting to ${a}`:"Cast to TV",children:s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M1,18 v3 h3 c0,-1.66 -1.34,-3 -3,-3 z M1,14 v2 c2.76,0 5,2.24 5,5 h2 c0,-3.87 -3.13,-7 -7,-7 z M1,10 v2 c4.97,0 9,4.03 9,9 h2 c0,-6.08 -4.93,-11 -11,-11 z M21,3 H3 C1.9,3 1,3.9 1,5 v3 h2 V5 h18 v14 h-7 v2 h7 c1.1,0 2,-0.9 2,-2 V5 c0,-1.1 -0.9,-2 -2,-2 z"})})})]})};function oc(e,t,r=!0){const n=C.useRef(null),a=C.useCallback(l=>{l.key==="Escape"&&t()},[t]),o=C.useCallback(l=>{r&&n.current&&l.target===n.current&&t()},[t,r]);return C.useEffect(()=>{if(e)return document.addEventListener("keydown",a),document.addEventListener("mousedown",o),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",o)}},[e,a,o]),n}const QP=({isOpen:e,onClose:t})=>{const r=oc(e,t),{playlist:n,currentTrackIndex:a,isPlaying:o,playTrack:l,removeTrack:u,clearPlaylist:d,currentTrack:h,savedPlaylists:f,savePlaylistAs:p,loadPlaylist:x,deletePlaylist:b,previousTrack:y,nextTrack:k,togglePlayPause:S,shuffleMode:_,toggleShuffle:T,repeatMode:A,setRepeatMode:I,playbackRate:O,setPlaybackRate:B,volume:F,setVolume:ae}=ic(),{isAvailable:Z,deviceName:z,castVideo:ee,sendVideoCommand:W,isCastingVideo:$}=bg(),{showSuccess:L,showError:q}=xo(),D=C.useRef(null),[X,K]=C.useState(!1),[xe,U]=C.useState(!1),[M,Y]=C.useState(""),[R,H]=C.useState("");C.useEffect(()=>{if(!e)return;const le=ve=>{ve.key==="Escape"&&t()};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[e,t]);const ne=C.useMemo(()=>{if(!R.trim())return n;const le=R.toLowerCase();return n.filter(ve=>ve.title.toLowerCase().includes(le)||ve.channel?.toLowerCase().includes(le)||ve.description?.toLowerCase().includes(le))},[n,R]),re=ZP(ne),fe=ne.length;return e?s.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:[" YouTube Playlist",s.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400",children:R?s.jsxs(s.Fragment,{children:["(",fe," of ",n.length," ",n.length===1?"video":"videos",")"]}):s.jsxs(s.Fragment,{children:["(",n.length," ",n.length===1?"video":"videos",")"]})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[h&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:y,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Previous track",children:s.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),s.jsx("button",{onClick:S,className:"p-2 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors",title:o?"Pause":"Play",children:o?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),s.jsx("button",{onClick:k,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Next track",children:s.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1",title:"Close (Esc)",children:s.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h&&s.jsxs("div",{className:"w-2/3 mx-auto flex-shrink-0 mt-4 relative",children:[s.jsx("div",{id:"dialog-player-container",className:"w-full relative"}),$&&s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm z-10",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),s.jsxs("h3",{className:"text-white text-xl font-semibold mb-2",children:["Casting to ",z]}),s.jsx("p",{className:"text-gray-300 text-sm mb-4",children:h.title}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx("button",{onClick:()=>W(o?"pause":"play"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded transition-colors",children:o?" Pause":" Play"}),s.jsx("button",{onClick:()=>W("stop"),className:"px-4 py-2 bg-red-500/80 hover:bg-red-600/80 text-white rounded transition-colors",children:" Stop Casting"})]})]})}),s.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 text-white",children:[s.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1",children:h.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-300",children:[h.channel&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.channel]}),s.jsx("span",{children:""})]}),h.duration&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.duration]}),s.jsx("span",{children:""})]}),s.jsxs("span",{className:"flex items-center gap-1",children:[" Added ",JP(h.addedAt)]})]}),h.description&&s.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-400 line-clamp-2",children:h.description})]})]}),s.jsx("div",{className:"p-3 sm:p-4",children:n.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),s.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Playlist is empty"}),s.jsx("p",{className:"text-sm mt-2",children:"Search for YouTube videos using the chat to add tracks"})]}):re.map(([le,ve])=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[" ",le,s.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",ve.length," ",ve.length===1?"video":"videos",")"]})]}),s.jsx("div",{className:"space-y-2",children:ve.map(ce=>{const ke=n.findIndex(pt=>pt.id===ce.id),it=ke===a;return s.jsxs("div",{className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg transition-all ${it?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-500":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent"}`,children:[s.jsx("button",{onClick:()=>l(ke),className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full hover:bg-white dark:hover:bg-gray-800 transition-colors",children:it&&o?s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),ce.thumbnail&&s.jsx("img",{src:ce.thumbnail,alt:"",className:"w-16 h-12 object-cover rounded flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:ce.title}),ce.channel&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:ce.channel})]}),ce.duration&&s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:ce.duration}),s.jsx("button",{onClick:()=>{confirm(`Remove "${ce.title}" from playlist?`)&&u(ce.id)},className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ce.id)})})]},le))})]}),n.length>0&&s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[s.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:s.jsxs("div",{className:"flex-1 min-w-[200px] flex items-center gap-2",children:[s.jsx("input",{type:"text",value:R,onChange:le=>H(le.target.value),placeholder:" Search playlist...",className:"flex-1 px-3 py-1.5 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),R&&s.jsx("button",{onClick:()=>H(""),className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",title:"Clear search",children:""})]})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("button",{onClick:()=>T(),className:`px-3 py-1.5 text-xs sm:text-sm rounded transition-colors ${_?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:"Toggle shuffle",children:" Shuffle"}),s.jsxs("button",{onClick:()=>{const le=["none","all","one"],ve=le.indexOf(A),ce=le[(ve+1)%le.length];I(ce)},className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:`Repeat: ${A}`,children:[A==="none"&&" Repeat: Off",A==="all"&&" Repeat: All",A==="one"&&" Repeat: One"]}),s.jsxs("select",{value:O,onChange:le=>B(parseFloat(le.target.value)),className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:"Playback speed",children:[s.jsx("option",{value:.25,children:" 0.25x"}),s.jsx("option",{value:.5,children:" 0.5x"}),s.jsx("option",{value:.75,children:" 0.75x"}),s.jsx("option",{value:1,children:" 1x"}),s.jsx("option",{value:1.25,children:" 1.25x"}),s.jsx("option",{value:1.5,children:" 1.5x"}),s.jsx("option",{value:1.75,children:" 1.75x"}),s.jsx("option",{value:2,children:" 2x"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:""}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:F,onChange:le=>ae(parseFloat(le.target.value)),className:"w-16 sm:w-24",title:"Volume"})]}),Z&&h&&s.jsx("button",{onClick:()=>{if($)W("stop");else{const le=D.current?.getCurrentTime()||0;ee({videoId:h.videoId,url:h.url,title:h.title,channel:h.channel,thumbnail:h.thumbnail,duration:h.duration},le)}},className:`p-2 rounded transition-colors ${$?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:$?`Stop casting to ${z}`:`Cast to ${z}`,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[s.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",onClick:()=>K(!0),children:"Save"}),s.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-green-500 hover:bg-green-600 text-white rounded transition-colors",onClick:()=>U(!0),children:"Load"}),n.length>0&&s.jsx("button",{onClick:()=>{confirm("Clear entire playlist? This cannot be undone.")&&(d(),L("Playlist cleared successfully!"))},className:"px-3 py-1.5 text-xs sm:text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:" Clear All"})]})]}),X&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Save Playlist"}),s.jsx("input",{type:"text",placeholder:"Enter playlist name...",value:M,onChange:le=>Y(le.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{if(M.trim())try{await p(M),Y(""),K(!1),L(`Playlist "${M}" saved successfully!`)}catch(le){q("Failed to save playlist: "+le.message)}},className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",disabled:!M.trim(),children:"Save"}),s.jsx("button",{onClick:()=>{Y(""),K(!1)},className:"flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"})]})]})}),xe&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Load Playlist"}),f.length===0?s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No saved playlists found."}):s.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:f.map(le=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:le.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[le.trackCount," tracks  ",new Date(le.updatedAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{try{await x(le.id),U(!1),L(`Playlist "${le.name}" loaded successfully!`)}catch(ve){q("Failed to load playlist: "+ve.message)}},className:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded",children:"Load"}),s.jsx("button",{onClick:async()=>{if(confirm(`Delete "${le.name}"?`))try{await b(le.id),L(`Playlist "${le.name}" deleted!`)}catch(ve){q("Failed to delete playlist: "+ve.message)}},className:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded",children:"Delete"})]})]},le.id))}),s.jsx("button",{onClick:()=>U(!1),className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Close"})]})})]})}):null};function ZP(e){const t=new Map,r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()-1);const a=new Date(r);return a.setDate(a.getDate()-7),e.forEach(o=>{const l=new Date(o.addedAt);l.setHours(0,0,0,0);let u;l.getTime()===r.getTime()?u="Today":l.getTime()===n.getTime()?u="Yesterday":l>a?u="This Week":u=l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:l.getFullYear()!==r.getFullYear()?"numeric":void 0}),t.has(u)||t.set(u,[]),t.get(u).push(o)}),Array.from(t.entries())}function JP(e){const t=new Date(e),n=new Date().getTime()-t.getTime(),a=Math.floor(n/6e4),o=Math.floor(n/36e5),l=Math.floor(n/864e5);return a<1?"just now":a<60?`${a}m ago`:o<24?`${o}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function A_(e){if(!e||!isFinite(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`}const eB=()=>{const{playlist:e,isPlaying:t,currentTrack:r,togglePlayPause:n,nextTrack:a,previousTrack:o}=ic(),{isLoading:l,currentTime:u,duration:d}=kN(),[h,f]=C.useState(!1);if(e.length===0)return null;const p=()=>{console.log("[PlaylistButton] Play/Pause clicked - current isPlaying:",t),n()},x=()=>{o()},b=()=>{a()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-sm",children:[s.jsx("button",{onClick:x,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Previous track",children:s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"})})}),s.jsx("button",{onClick:p,className:`p-1.5 sm:p-2 transition-colors ${t?"bg-blue-500 hover:bg-blue-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,title:t?"Pause":"Play",children:t?s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})}),s.jsx("button",{onClick:b,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Next track",children:s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z"})})}),s.jsx("div",{className:"hidden sm:flex flex-col items-start px-2 py-1 min-w-0 max-w-[150px] md:max-w-[250px]",children:l&&t?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"animate-spin h-3 w-3 text-gray-700 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate w-full",children:r?.title?r.title.slice(0,10):"No track"}),d>0&&s.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono",children:[A_(u)," / ",A_(d)]})]})}),s.jsxs("button",{onClick:y=>{y.stopPropagation(),console.log("[PlaylistButton] Opening dialog, playlist size:",e.length),f(!0)},className:"p-1.5 sm:p-2 bg-purple-500 hover:bg-purple-600 text-white transition-colors flex items-center gap-1",title:"View playlist",children:[s.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),s.jsx("span",{className:"hidden md:inline text-xs font-medium",children:e.length})]})]}),s.jsx(QP,{isOpen:h,onClose:()=>f(!1)})]})},tB=eB,HN=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,L_=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,j_=/\.(m3u8)($|\?)/i,rB=/\.(mpd)($|\?)/i,nB=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,aB=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,sB=/vimeo\.com\/(?!progressive_redirect).+/,iB=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,oB=/open\.spotify\.com\/(\w+)\/(\w+)/i,lB=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,cB=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,Rh=(e,t)=>{if(Array.isArray(e)){for(const r of e)if(typeof r=="string"&&Rh(r,t)||Rh(r.src,t))return!0;return!1}return t(e)},bi={html:e=>Rh(e,t=>HN.test(t)||L_.test(t)),hls:e=>Rh(e,t=>j_.test(t)),dash:e=>Rh(e,t=>rB.test(t)),mux:e=>nB.test(e),youtube:e=>aB.test(e),vimeo:e=>sB.test(e)&&!L_.test(e)&&!j_.test(e),wistia:e=>iB.test(e),spotify:e=>oB.test(e),twitch:e=>lB.test(e),tiktok:e=>cB.test(e)},uB=Mn.forwardRef((e,t)=>{const r=HN.test(`${e.src}`)?"audio":"video";return Mn.createElement(r,{...e,ref:t},e.children)});var dB=uB;const hB=[{key:"hls",name:"hls.js",canPlay:bi.hls,canEnablePIP:()=>!0,player:C.lazy(()=>tr(()=>import("./react-C_eRm8ex.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:bi.dash,canEnablePIP:()=>!0,player:C.lazy(()=>tr(()=>import("./react-C_SPg3Ju.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:bi.mux,canEnablePIP:()=>!0,player:C.lazy(()=>tr(()=>import("./index-C3XKbT6L.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:bi.youtube,player:C.lazy(()=>tr(()=>import("./react-DBWYUJwH.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:bi.vimeo,player:C.lazy(()=>tr(()=>import("./react-BpSzLita.js"),[]))},{key:"wistia",name:"Wistia",canPlay:bi.wistia,canEnablePIP:()=>!0,player:C.lazy(()=>tr(()=>import("./react-DFeFObpU.js"),[]))},{key:"spotify",name:"Spotify",canPlay:bi.spotify,canEnablePIP:()=>!1,player:C.lazy(()=>tr(()=>import("./react-DtcTGK-a.js"),[]))},{key:"twitch",name:"Twitch",canPlay:bi.twitch,canEnablePIP:()=>!1,player:C.lazy(()=>tr(()=>import("./react-70QvFsUY.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:bi.tiktok,canEnablePIP:()=>!1,player:C.lazy(()=>tr(()=>import("./react-iCTrqLE_.js"),[]))},{key:"html",name:"html",canPlay:bi.html,canEnablePIP:()=>!0,player:dB}];var $y=hB;const gB={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},qN=Mn.forwardRef((e,t)=>{const{playing:r,pip:n}=e,a=e.activePlayer,o=C.useRef(null),l=C.useRef(!0);C.useEffect(()=>{var p,x;o.current&&(o.current.paused&&r===!0&&o.current.play(),!o.current.paused&&r===!1&&o.current.pause(),o.current.playbackRate=(p=e.playbackRate)!=null?p:1,o.current.volume=(x=e.volume)!=null?x:1)}),C.useEffect(()=>{var p,x,b,y,k;if(!(!o.current||!globalThis.document)){if(n&&!document.pictureInPictureElement)try{(x=(p=o.current).requestPictureInPicture)==null||x.call(p)}catch{}if(!n&&document.pictureInPictureElement)try{(y=(b=o.current).exitPictureInPicture)==null||y.call(b),(k=document.exitPictureInPicture)==null||k.call(document)}catch{}}},[n]);const u=p=>{var x,b;l.current=!0,(x=e.onReady)==null||x.call(e),(b=e.onLoadStart)==null||b.call(e,p)},d=p=>{var x,b;l.current&&(l.current=!1,(x=e.onStart)==null||x.call(e,p)),(b=e.onPlay)==null||b.call(e,p)};if(!a)return null;const h={},f=["onReady","onStart"];for(const p in e)p.startsWith("on")&&!f.includes(p)&&(h[p]=e[p]);return Mn.createElement(a,{...h,style:e.style,className:e.className,slot:e.slot,ref:C.useCallback(p=>{o.current=p,typeof t=="function"?t(p):t!==null&&(t.current=p)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:u,onPlay:d},e.children)});qN.displayName="Player";var fB=qN;const pB=C.lazy(()=>tr(()=>import("./Preview-CCAT4i22.js"),[])),Jd=[],mB=(e,t)=>{const r=a=>{for(const o of[...Jd,...e])if(a&&o.canPlay(a))return o;return t||null},n=Mn.forwardRef((a,o)=>{const l={...gB,...a},{src:u,slot:d,className:h,style:f,width:p,height:x,fallback:b,wrapper:y}=l,[k,S]=C.useState(!!l.light);C.useEffect(()=>{l.light?S(!0):S(!1)},[l.light]);const _=B=>{var F;S(!1),(F=l.onClickPreview)==null||F.call(l,B)},T=B=>{if(!B)return null;const{light:F,playIcon:ae,previewTabIndex:Z,oEmbedUrl:z,previewAriaLabel:ee}=l;return Mn.createElement(pB,{src:B,light:F,playIcon:ae,previewTabIndex:Z,previewAriaLabel:ee,oEmbedUrl:z,onClickPreview:_})},A=B=>{var F,ae;const Z=r(B);if(!Z)return null;const{style:z,width:ee,height:W,wrapper:$}=l,L=(F=l.config)==null?void 0:F[Z.key];return Mn.createElement(fB,{...l,ref:o,activePlayer:(ae=Z.player)!=null?ae:Z,slot:$?void 0:d,className:$?void 0:h,style:$?{display:"block",width:"100%",height:"100%"}:{display:"block",width:ee,height:W,...z},config:L})},I=y??M_,O=b===!1?M_:C.Suspense;return Mn.createElement(I,{slot:d,className:h,style:{width:p,height:x,...f}},Mn.createElement(O,{fallback:b},k?T(u):A(u)))});return n.displayName="ReactPlayer",n.addCustomPlayer=a=>{Jd.push(a)},n.removeCustomPlayers=()=>{Jd.length=0},n.canPlay=a=>{if(a){for(const o of[...Jd,...e])if(o.canPlay(a))return!0}return!1},n.canEnablePIP=a=>{var o;if(a){for(const l of[...Jd,...e])if(l.canPlay(a)&&((o=l.canEnablePIP)!=null&&o.call(l)))return!0}return!1},n},M_=({children:e})=>e,xB=$y[$y.length-1];var bB=mB($y,xB);const yB=()=>{const e=C.useRef(null),{currentTrack:t,isPlaying:r,nextTrack:n}=ic(),{registerPlayer:a,unregisterPlayer:o,setIsLoading:l,setCurrentTime:u,setDuration:d}=kN(),{isCastingVideo:h}=bg();C.useEffect(()=>(e.current&&(console.log("[BackgroundPlayer] Registering player"),a(e.current)),()=>{console.log("[BackgroundPlayer] Unregistering player"),o()}),[a,o]),C.useEffect(()=>{console.log("[BackgroundPlayer] Track or playing state changed - isPlaying:",r,"currentTrack:",t?.title),t&&r?l(!0):r||l(!1)},[t,r,l]);const[f,p]=Mn.useState(!1),x=Mn.useRef(0),b=Mn.useRef(!1);if(Mn.useEffect(()=>{const _=()=>{const A=document.getElementById("dialog-player-container"),I=f,O=!!A;I!==O&&(console.log("[BackgroundPlayer] Dialog opening, last tracked position:",x.current,"isPlaying:",r),b.current=r),p(O)};_();const T=new MutationObserver(()=>{setTimeout(_,10)});return T.observe(document.body,{childList:!0,subtree:!0}),()=>T.disconnect()},[f,r]),!t)return null;const y=s.jsx(bB,{ref:_=>{e.current=_,_&&(console.log("[BackgroundPlayer] ReactPlayer ref set, registering player, dialogOpen:",f),a(_))},src:t.url,playing:r&&!h,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},className:"react-player-hide-controls",onReady:()=>{console.log("[BackgroundPlayer] ReactPlayer ready, URL:",t.url,"isPlaying:",r,"dialogOpen:",f,"savedPosition:",x.current);const _=e.current;_&&_.duration&&d(_.duration)},onTimeUpdate:_=>{const T=_.currentTarget.currentTime,A=_.currentTarget.duration;T>0&&(x.current=T,u(T),console.log("[BackgroundPlayer] Position:",T.toFixed(2))),A>0&&d(A)},onPlay:()=>{console.log("[BackgroundPlayer] Playback started"),setTimeout(()=>l(!1),500)},onStart:()=>{if(console.log("[BackgroundPlayer] Media started, savedPosition:",x.current),x.current>1){const _=x.current;console.log("[BackgroundPlayer] Will seek to saved position:",_),setTimeout(()=>{const T=e.current;T&&typeof T.currentTime=="number"?(console.log("[BackgroundPlayer] Setting currentTime from",T.currentTime,"to",_),T.currentTime=_,x.current=0):console.log("[BackgroundPlayer]  Cannot seek - video element not ready")},300)}setTimeout(()=>l(!1),500)},onPause:()=>{console.error("[BackgroundPlayer]  PLAYBACK PAUSED - isPlaying:",r)},onEnded:n,onError:_=>{console.error("[BackgroundPlayer] Playback error:",_),l(!1)}},`player-${t.videoId}`);let k=document.getElementById("background-player-mount");k||(k=document.createElement("div"),k.id="background-player-mount",k.className="fixed bottom-0 left-0",k.style.cssText="width: 1px; height: 1px; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;",document.body.appendChild(k));const S=f?document.getElementById("dialog-player-container"):k;return S?ID.createPortal(s.jsx("div",{className:"w-full h-full relative bg-black",style:{aspectRatio:"16/9"},children:y}),S):null},vB={"groq-free":/^gsk_[a-zA-Z0-9]{32,}$/,groq:/^gsk_[a-zA-Z0-9]{32,}$/,openai:/^sk-[a-zA-Z0-9_-]{20,}$/,"gemini-free":/^AIza[a-zA-Z0-9_-]{35}$/,gemini:/^AIza[a-zA-Z0-9_-]{35}$/,together:/^[a-zA-Z0-9_-]{32,}$/,atlascloud:/^apikey-[a-f0-9]{32}$/,"openai-compatible":/.+/,replicate:/^r8_[a-zA-Z0-9]{40}$/};function kB(e,t){return!e||e.trim()===""?{valid:!1,error:"API key is required"}:vB[t].test(e)?{valid:!0}:{valid:!1,error:{"groq-free":'Groq API key must start with "gsk_" followed by at least 32 characters',groq:'Groq API key must start with "gsk_" followed by at least 32 characters',openai:'OpenAI API key must start with "sk-" followed by at least 20 characters',"gemini-free":'Gemini API key must start with "AIza" followed by 35 characters',gemini:'Gemini API key must start with "AIza" followed by 35 characters',together:"Together AI API key must be at least 32 characters",atlascloud:'Atlas Cloud API key must start with "apikey-" followed by 32 hex characters',"openai-compatible":"API key cannot be empty",replicate:'Replicate API key must start with "r8_" followed by 40 characters'}[t]}}function wB(e){if(!e||e.trim()==="")return{valid:!1,error:"Endpoint URL is required"};try{return new URL(e).protocol!=="https:"?{valid:!1,error:"Endpoint must use HTTPS protocol"}:{valid:!0}}catch{return{valid:!1,error:"Invalid URL format"}}}function EB(e){return!e||e.trim()===""?{valid:!1,error:"Model name is required for OpenAI-compatible providers"}:{valid:!0}}function _B(e){return e!==void 0&&(isNaN(e)||e<0)?{valid:!1,error:"Rate limit must be a positive number or empty"}:{valid:!0}}function zy(e){const t={};if(e.type||(t.type="Provider type is required"),e.type){const r=kB(e.apiKey||"",e.type);r.valid||(t.apiKey=r.error)}if(e.type==="openai-compatible"){const r=wB(e.apiEndpoint||"");r.valid||(t.apiEndpoint=r.error);const n=EB(e.modelName);n.valid||(t.modelName=n.error);const a=_B(e.rateLimitTPM);a.valid||(t.rateLimitTPM=a.error)}return{valid:Object.keys(t).length===0,errors:t}}function SB(e){if(!e||e.length<12)return"";const t=e.slice(0,4),r=e.slice(-4),n=Math.max(8,e.length-8);return`${t}${"".repeat(n)}${r}`}function R_(e,t){return e.type===t.type&&e.apiKey===t.apiKey}function GN(){const{settings:e,setSettings:t}=ii(),r=C.useCallback(l=>{const u=zy(l);if(!u.valid)return{success:!1,error:Object.values(u.errors)[0]};const d={...l,id:crypto.randomUUID(),enabled:!0};return e.providers.find(f=>R_(f,d))?{success:!1,error:"A provider with this type and API key already exists"}:(t({...e,providers:[...e.providers,d]}),{success:!0})},[e,t]),n=C.useCallback((l,u)=>{const d=e.providers.find(p=>p.id===l);if(!d)return{success:!1,error:"Provider not found"};const h={...d,...u};if(!("enabled"in u&&Object.keys(u).length===1)){const p=zy(h);if(!p.valid)return{success:!1,error:Object.values(p.errors)[0]};if(e.providers.find(b=>b.id!==l&&R_(b,h)))return{success:!1,error:"A provider with this type and API key already exists"}}const f=e.providers.map(p=>p.id===l?h:p);return t({...e,providers:f}),{success:!0}},[e,t]),a=C.useCallback(l=>{t({...e,providers:e.providers.filter(u=>u.id!==l)})},[e,t]),o=C.useCallback(l=>e.providers.find(u=>u.id===l),[e.providers]);return{providers:e.providers,addProvider:r,updateProvider:n,deleteProvider:a,getProvider:o}}function YN({initialProvider:e,onSave:t,onCancel:r}){const[n,a]=C.useState(e?.type||""),[o,l]=C.useState(e?.apiKey||""),[u,d]=C.useState(e?.apiEndpoint||""),[h,f]=C.useState(e?.modelName||""),[p,x]=C.useState(e?.rateLimitTPM?.toString()||""),[b,y]=C.useState({chat:e?.capabilities?.chat!==!1,image:e?.capabilities?.image!==!1,embedding:e?.capabilities?.embedding!==!1,voice:e?.capabilities?.voice!==!1,tts:e?.capabilities?.tts!==!1}),[k,S]=C.useState(e?.allowedModels?.join(", ")||""),[_,T]=C.useState(e?.maxImageQuality||"fast"),[A,I]=C.useState({});C.useEffect(()=>{n&&n!=="openai-compatible"?d(NN[n]):n==="openai-compatible"&&d(e?.apiEndpoint||"https://")},[n,e]);const O=F=>{if(F.preventDefault(),!n){I({type:"Please select a provider type"});return}const ae={type:n,apiKey:o,apiEndpoint:u,capabilities:b};n==="openai-compatible"&&(ae.modelName=h,p&&(ae.rateLimitTPM=parseInt(p,10))),k.trim()?ae.allowedModels=k.split(",").map(z=>z.trim()).filter(z=>z.length>0):ae.allowedModels=null,b.image&&_&&(ae.maxImageQuality=_);const Z=zy(ae);if(!Z.valid){I(Z.errors);return}t(ae)},B=["groq-free","groq","openai","gemini-free","gemini","together","openai-compatible"];return s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Provider Type"}),s.jsxs("select",{value:n,onChange:F=>a(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Select provider type..."}),B.map(F=>{const ae=Fy[F];return s.jsxs("option",{value:F,children:[ae.icon," ",ae.name]},F)})]}),A.type&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.type})]}),n&&s.jsx("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-700",children:s.jsx("p",{className:"text-sm text-gray-400",children:Fy[n].description})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Endpoint"}),s.jsx("input",{type:"text",value:u,onChange:F=>d(F.target.value),disabled:n!=="openai-compatible",className:`w-full px-3 py-2 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${n!=="openai-compatible"?"bg-gray-900 cursor-not-allowed":"bg-gray-800"}`,placeholder:"https://",required:!0}),n!=="openai-compatible"&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Auto-filled, not editable"}),n==="openai-compatible"&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" EDITABLE - Enter custom endpoint"}),A.apiEndpoint&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.apiEndpoint})]}),n==="openai-compatible"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Model Name"}),s.jsx("input",{type:"text",value:h,onChange:F=>f(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"llama-3.1-70b-instruct",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" REQUIRED - Exact model name for API"}),A.modelName&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.modelName})]}),n==="openai-compatible"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Rate Limit (Tokens Per Minute)"}),s.jsx("input",{type:"number",value:p,onChange:F=>x(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave empty for no rate limiting",min:"0"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Optional - Leave empty to disable rate limiting"}),A.rateLimitTPM&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.rateLimitTPM})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Key"}),s.jsx("input",{type:"password",value:o,onChange:F=>l(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your API key",required:!0}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Your API key for this provider"}),A.apiKey&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:A.apiKey})]}),s.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"Service Capabilities"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select which services this provider can be used for. By default, all are enabled."}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.chat,onChange:F=>y({...b,chat:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:" Chat / Text Completion"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.image,onChange:F=>y({...b,image:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:" Image Generation"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.embedding,onChange:F=>y({...b,embedding:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:" Embeddings"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.voice,onChange:F=>y({...b,voice:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:" Voice / Transcription"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.tts,onChange:F=>y({...b,tts:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:" Text-to-Speech"})]})]})]}),s.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:" Model Access Restrictions"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Restrict which models can be used for ALL LLM operations (chat, image generation, etc.). Leave empty to allow all models."}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Allowed Models (comma-separated)"}),s.jsx("input",{type:"text",value:k,onChange:F=>S(F.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Leave empty for all models, or: llama-3.1-8b-instant, gpt-4o-mini"}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[" ",s.jsx("strong",{children:"Empty"})," = allow all models | ",s.jsx("strong",{children:"Non-empty"})," = exact model name must match"]}),s.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Examples: ",s.jsx("code",{className:"text-blue-400",children:"llama-3.1-8b-instant"}),", ",s.jsx("code",{className:"text-blue-400",children:"black-forest-labs/FLUX.1-schnell-Free"})]})]})]}),b.image&&s.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:" Image Generation Quality Cap"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:'Limit maximum image quality to control costs. Works together with "Allowed Models" above.'}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Maximum Quality Tier"}),s.jsxs("select",{value:_,onChange:F=>T(F.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"fast",children:"Fast (draft, <$0.001/image) - DEFAULT"}),s.jsx("option",{value:"standard",children:"Standard (normal, ~$0.002/image)"}),s.jsx("option",{value:"high",children:"High (detailed, ~$0.04/image)"}),s.jsx("option",{value:"ultra",children:"Ultra (photorealistic, ~$0.12/image)"})]}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Prevents generating images above this quality tier"})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Update Provider":"Save Provider"})]})]})}function TB({onEditingChange:e}={}){const{providers:t,addProvider:r,updateProvider:n,deleteProvider:a}=GN(),{settings:o,loadFromGoogleDrive:l,saveToGoogleDrive:u}=ii(),[d,h]=C.useState(!1),[f,p]=C.useState(null);C.useEffect(()=>{e&&e(d||f!==null)},[d,f,e]);const[x,b]=C.useState(null),[y,k]=C.useState(null),[S,_]=C.useState(!1),T=()=>{h(!0),p(null),b(null),k(null)},A=z=>{p(z),h(!1),b(null),k(null)},I=z=>{window.confirm("Are you sure you want to delete this provider?")&&(a(z),k("Provider deleted successfully"),setTimeout(()=>k(null),3e3))},O=z=>{if(f){const ee=n(f,z);ee.success?(k("Provider updated successfully"),p(null),setTimeout(()=>k(null),3e3)):b(ee.error||"Failed to update provider")}else{const ee=r(z);ee.success?(k("Provider added successfully"),h(!1),setTimeout(()=>k(null),3e3),window.dispatchEvent(new CustomEvent("provider-added"))):b(ee.error||"Failed to add provider")}},B=()=>{h(!1),p(null),b(null)},F=async()=>{try{_(!0),b(null),await l(),k("Settings loaded successfully from Google Drive!"),setTimeout(()=>k(null),3e3)}catch(z){b(z.message||"Failed to load settings from Google Drive")}finally{_(!1)}},ae=async()=>{try{_(!0),b(null),await u(),k("Settings saved successfully to Google Drive!"),setTimeout(()=>k(null),3e3)}catch(z){b(z.message||"Failed to save settings to Google Drive")}finally{_(!1)}},Z=f?t.find(z=>z.id===f):void 0;return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Cloud Sync for Provider Credentials"}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:["Manually load or save your provider settings, or enable automatic sync in the ",s.jsx("strong",{children:"Cloud Sync"})," tab.",o.syncToGoogleDrive&&s.jsx("span",{className:"block mt-1 text-green-700 dark:text-green-400 font-medium",children:" Auto-sync is enabled - changes are saved automatically"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:F,disabled:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:S?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s.jsx(s.Fragment,{children:" Load from Drive"})}),s.jsx("button",{onClick:ae,disabled:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:S?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):s.jsx(s.Fragment,{children:" Save to Drive"})})]})]})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Configured Providers"}),!d&&!f&&s.jsx("button",{onClick:T,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ Add Provider"})]}),y&&s.jsx("div",{className:"p-3 bg-green-700 border border-green-400 rounded-lg",children:s.jsxs("p",{className:"text-sm text-white font-bold",children:[" ",y]})}),x&&s.jsx("div",{className:"p-3 bg-red-900/30 border border-red-700 rounded-lg",children:s.jsxs("p",{className:"text-sm text-red-400",children:[" ",x]})}),(d||f)&&s.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:[s.jsx("h4",{className:"text-md font-medium text-white mb-4",children:f?"Edit Provider":"Add Provider"}),s.jsx(YN,{initialProvider:Z,onSave:O,onCancel:B})]}),!d&&!f&&s.jsx(s.Fragment,{children:t.length===0?s.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700 text-center",children:[s.jsx("p",{className:"text-gray-400",children:"No providers configured yet"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Click "Add Provider" to configure your first LLM provider'})]}):s.jsx("div",{className:"space-y-3",children:t.map(z=>{const ee=Fy[z.type],W=z.type==="together",$=typeof z.enabled=="boolean"?z.enabled:!W;return s.jsxs("div",{className:`p-4 rounded-lg border transition-colors ${$?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-gray-900 border-gray-800 hover:border-gray-700 opacity-80 grayscale"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:ee.icon}),s.jsx("span",{className:`font-medium ${$?"text-white":"text-gray-500"}`,children:ee.name})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("button",{onClick:()=>{n(z.id,{enabled:!$}),k($?`${ee.name} disabled`:`${ee.name} enabled`),setTimeout(()=>k(null),2e3)},className:`px-3 py-1 rounded transition-colors text-sm font-bold ${$?"bg-green-600 hover:bg-green-700 text-white":"bg-red-700 hover:bg-red-800 text-red-100 border border-red-400"}`,title:$?"Click to disable":"Click to enable",children:$?"Enabled":"Disabled"}),s.jsx("button",{onClick:()=>A(z.id),className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-sm",title:"Edit provider",children:"Edit"}),s.jsx("button",{onClick:()=>I(z.id),className:"px-3 py-1 bg-red-700 text-white rounded hover:bg-red-600 transition-colors text-sm",title:"Delete provider",children:"Delete"})]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Endpoint:"}),s.jsx("span",{className:"text-gray-300 break-all",children:z.apiEndpoint})]}),z.modelName&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Model:"}),s.jsx("span",{className:"text-gray-300",children:z.modelName})]}),z.rateLimitTPM&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Rate Limit:"}),s.jsxs("span",{className:"text-gray-300",children:[z.rateLimitTPM.toLocaleString()," TPM"]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"API Key:"}),s.jsx("span",{className:"text-gray-300 font-mono",children:SB(z.apiKey)})]})]})]},z.id)})})}),!d&&!f&&s.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:" How Provider Selection Works:"}),s.jsxs("ul",{className:"space-y-1 text-sm text-gray-400",children:[s.jsx("li",{children:" Free tier providers () are used first"}),s.jsx("li",{children:" Paid providers () are used when free tier rate limits are exceeded"}),s.jsx("li",{children:" The backend automatically selects the best model for each request"}),s.jsx("li",{children:" No need to configure rate limits or priorities - it's all automatic!"})]})]})]})}const CB=()=>{const{state:e,setEnabled:t,setProvider:r,setVoice:n,setRate:a,setPitch:o,setVolume:l,setAutoSummarize:u,setElevenLabsApiKey:d,getAvailableProviders:h}=Bp(),[f,p]=C.useState([]),[x,b]=C.useState(e.voices),[y,k]=C.useState(!1);C.useEffect(()=>{const A=h();p(A)},[h]),C.useEffect(()=>{b(e.voices)},[e.voices]);const S=async A=>{k(!0);try{await r(A)}catch(I){console.error("Failed to change provider:",I)}finally{k(!1)}},_=A=>({llm:"LLM Provider (Auto)","openai-tts":"OpenAI TTS","groq-tts":"Groq TTS","gemini-tts":"Gemini TTS","together-tts":"Together AI TTS (Not Available)",elevenlabs:e.elevenlabsApiKey?"ElevenLabs (Specialized TTS)":"ElevenLabs (Needs API Key)",browser:"Browser (Web Speech API)",speakjs:"speak.js (Offline)"})[A],T=A=>({llm:"Automatically selects best available LLM provider (fallback option)","openai-tts":"OpenAI's text-to-speech model (high quality, fast)","groq-tts":"Groq's PlayAI TTS model (fast inference)","gemini-tts":"Google Gemini text-to-speech (natural voices)","together-tts":"Together AI does not provide TTS API - please use another provider",elevenlabs:e.elevenlabsApiKey?"Ultra-realistic AI voices":"Ultra-realistic AI voices (configure API key below)",browser:"Uses your browser's built-in voices",speakjs:"Offline synthesis, basic quality"})[A];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"card bg-white dark:bg-gray-800 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Enable Text-to-Speech"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow AI responses and snippets to be read aloud"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:A=>t(A.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),e.isEnabled&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"card bg-white dark:bg-gray-800 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Auto-Summarize Long Content"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use LLM to generate concise, speakable summaries for long responses"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.autoSummarize,onChange:A=>u(A.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),s.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice Provider"}),s.jsx("div",{className:"space-y-3",children:f.map(A=>s.jsxs("label",{className:`flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 ${e.currentProvider===A?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:[s.jsx("input",{type:"radio",name:"tts-provider",value:A,checked:e.currentProvider===A,onChange:()=>S(A),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-2",children:[_(A),A==="elevenlabs"&&!e.elevenlabsApiKey&&s.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 px-2 py-1 rounded-full",children:"Configure"})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:T(A)})]})]},A))})]}),s.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice"}),y?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading voices..."})]}):x.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No voices available for this provider"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:x.map(A=>s.jsxs("button",{onClick:()=>n(A.id),className:`p-3 text-left border rounded-lg transition-colors ${e.currentVoice===A.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:A.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[A.language,"  ",A.gender||"neutral"]})]},A.id))})]}),s.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Playback Settings"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Speed: ",e.rate.toFixed(1),"x"]}),s.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:e.rate,onChange:A=>a(parseFloat(A.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{children:"0.5x Slower"}),s.jsx("span",{children:"1.0x Normal"}),s.jsx("span",{children:"2.0x Faster"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pitch: ",e.pitch.toFixed(1)]}),s.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:e.pitch,onChange:A=>o(parseFloat(A.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{children:"0.5 Lower"}),s.jsx("span",{children:"1.0 Normal"}),s.jsx("span",{children:"2.0 Higher"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Volume: ",Math.round(e.volume*100),"%"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.volume,onChange:A=>l(parseFloat(A.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[s.jsx("span",{children:"0% Silent"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100% Max"})]})]})]}),s.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ElevenLabs Authentication"}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Specialized TTS Service"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"ElevenLabs provides TTS-only services and requires separate authentication from your LLM providers."})]})]})}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key:"}),s.jsx("input",{type:"password",placeholder:"Enter ElevenLabs API key",value:e.elevenlabsApiKey,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Get your API key from ",s.jsx("a",{href:"https://elevenlabs.io/speech-synthesis",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ElevenLabs Dashboard"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Free tier: 10,000 characters/month"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Starter: $1/month for 30,000 characters"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Creator: $22/month for 100,000 characters"})]})]}),["llm","openai-tts","groq-tts","gemini-tts","together-tts"].includes(e.currentProvider)&&s.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e.currentProvider==="llm"?"LLM Provider TTS":`${_(e.currentProvider)}`}),e.currentProvider==="together-tts"&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"TTS Not Available"}),s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Together AI does not provide a Text-to-Speech API. Please select a different TTS provider like OpenAI TTS, Groq TTS, or Gemini TTS."})]})]})}),e.currentProvider!=="together-tts"&&s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Using Existing Configuration"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:e.currentProvider==="llm"?"TTS will use your currently configured LLM provider and API key. No additional authentication required.":`TTS will use your ${_(e.currentProvider)} configuration and API key. No additional authentication required.`})]})]})})]})]})]})},Kf={enabled:!1,autoEmbed:!1,embeddingModel:"text-embedding-3-small",embeddingProvider:"openai",chunkSize:1e3,chunkOverlap:200,topK:5,similarityThreshold:.3,syncEnabled:!0},O_=[{name:"text-embedding-3-small",provider:"openai",cost:"$0.02/1M tokens",recommended:!0},{name:"text-embedding-3-large",provider:"openai",cost:"$0.13/1M tokens"},{name:"embed-english-v3.0",provider:"cohere",cost:"$0.10/1M tokens"},{name:"m2-bert-80M-8k-retrieval",provider:"together",cost:"$0.008/1M tokens"}],NB=()=>{const{showSuccess:e,showError:t,showWarning:r}=xo(),{getUserRagSpreadsheet:n}=xg(),{user:a}=$s(),[o,l]=C.useState(Kf),[u,d]=C.useState(!1),[h,f]=C.useState(!1);C.useEffect(()=>{p()},[]);const p=async()=>{try{const y=localStorage.getItem("rag_config");if(y){const k=JSON.parse(y);l({...Kf,...k})}else l(Kf)}catch(y){console.error("Failed to load RAG config:",y),l(Kf)}},x=(y,k)=>{l(S=>({...S,[y]:k})),f(!0)},b=async()=>{try{if(d(!0),localStorage.setItem("rag_config",JSON.stringify(o)),window.dispatchEvent(new Event("rag_config_updated")),o.syncEnabled&&a){console.log(" Sync enabled - ensuring spreadsheet exists...");const y=await n();y?(console.log(" Spreadsheet ready:",y),e("RAG settings saved! Your embeddings will sync to Google Sheets.")):(console.warn(" Failed to get spreadsheet ID"),r("Settings saved but could not access Google Sheets. Check your authentication."))}else e("RAG settings saved successfully");f(!1)}catch(y){console.error("Failed to save RAG config:",y),t("Failed to save RAG settings")}finally{d(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" RAG (Retrieval-Augmented Generation)"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable semantic search over your saved snippets using embeddings. Enhances LLM responses with relevant context from your content."})]}),s.jsx("div",{className:"card p-4",children:s.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enable RAG System"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically search your snippets when asking questions"})]}),s.jsx("input",{type:"checkbox",checked:o.enabled,onChange:y=>x("enabled",y.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})}),s.jsx("div",{className:"card p-4",children:s.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Auto-Embed New Snippets"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically generate embeddings when saving snippets"})]}),s.jsx("input",{type:"checkbox",checked:o.autoEmbed,onChange:y=>x("autoEmbed",y.target.checked),disabled:!o.enabled,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]})}),s.jsxs("div",{className:"card p-4",children:[s.jsx("label",{className:"block mb-2",children:s.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Embedding Model"})}),s.jsx("select",{value:o.embeddingModel,onChange:y=>{const k=O_.find(S=>S.name===y.target.value);k&&(x("embeddingModel",k.name),x("embeddingProvider",k.provider))},disabled:!o.enabled,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:O_.map(y=>s.jsxs("option",{value:y.name,children:[y.name," (",y.cost,") ",y.recommended?" Recommended":""]},y.name))}),s.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-2",children:" Changing models requires re-embedding all content"})]}),s.jsxs("div",{className:"card p-4 space-y-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Chunking Settings"}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-2",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Size: ",o.chunkSize||1e3," characters (",Math.round((o.chunkSize||1e3)/4)," tokens)"]})}),s.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:o.chunkSize||1e3,onChange:y=>x("chunkSize",parseInt(y.target.value)),disabled:!o.enabled,className:"w-full disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-2",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Overlap: ",o.chunkOverlap||200," characters (",Math.round((o.chunkOverlap||200)/(o.chunkSize||1e3)*100),"%)"]})}),s.jsx("input",{type:"range",min:"0",max:"500",step:"50",value:o.chunkOverlap||200,onChange:y=>x("chunkOverlap",parseInt(y.target.value)),disabled:!o.enabled,className:"w-full disabled:opacity-50"})]})]}),s.jsxs("div",{className:"card p-4 space-y-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Search Settings"}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-2",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Top-K Results: ",o.topK||5]})}),s.jsx("input",{type:"range",min:"1",max:"20",step:"1",value:o.topK||5,onChange:y=>x("topK",parseInt(y.target.value)),disabled:!o.enabled,className:"w-full disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block mb-2",children:s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Similarity Threshold: ",(o.similarityThreshold||.3).toFixed(2)]})}),s.jsx("input",{type:"range",min:"0.3",max:"0.95",step:"0.05",value:o.similarityThreshold||.3,onChange:y=>x("similarityThreshold",parseFloat(y.target.value)),disabled:!o.enabled,className:"w-full disabled:opacity-50"})]})]}),s.jsx("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Cloud Sync Settings"}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Configure cloud synchronization for your Swag and Snippets in the ",s.jsx("strong",{children:"Cloud Sync"})," tab."]})]})]})}),s.jsx("div",{className:"flex gap-3",children:s.jsx("button",{onClick:b,disabled:!h||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Saving...":"Save Settings"})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Tip:"})," Start with default settings (text-embedding-3-small, 1000 char chunks, 200 overlap)"]}),s.jsxs("p",{children:[" ",s.jsx("strong",{children:"Learn more:"})," Check src/rag/README.md for detailed documentation"]})]})]})},AB=({onClose:e})=>{const{settings:t,setSettings:r}=ii(),[n,a]=C.useState(!1),[o,l]=C.useState(!1),[u,d]=C.useState(null),[h,f]=C.useState(null),[p,x]=C.useState(!1),[b,y]=C.useState(!1);C.useEffect(()=>{const A=localStorage.getItem("google_drive_access_token"),I=localStorage.getItem("user_email");A&&A.length>0&&(a(!0),f(I)),x(t.syncToGoogleDrive||!1);const O=localStorage.getItem("cloud_sync_swag");y(O!=="false")},[t.syncToGoogleDrive]);const k=async()=>{l(!0),d(null);try{if(!window.google?.accounts?.oauth2)throw new Error("Google Identity Services not loaded. Please refresh the page.");window.google.accounts.oauth2.initTokenClient({client_id:"927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/spreadsheets",callback:O=>{if(O.error){d(`Authentication failed: ${O.error}`),l(!1);return}if(O.access_token){if(localStorage.setItem("google_drive_access_token",O.access_token),O.id_token)try{const F=O.id_token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ae=decodeURIComponent(atob(F).split("").map(z=>"%"+("00"+z.charCodeAt(0).toString(16)).slice(-2)).join("")),Z=JSON.parse(ae);Z.email&&(localStorage.setItem("user_email",Z.email),f(Z.email))}catch(B){console.error("Failed to decode ID token:",B)}a(!0),l(!1),console.log(" Successfully authenticated with Google Drive"),window.dispatchEvent(new CustomEvent("billing-settings-changed"))}},error_callback:O=>{d(`Authentication error: ${O.message||"Unknown error"}`),l(!1)}}).requestAccessToken({prompt:"consent"})}catch(A){d(A.message||"Failed to authenticate with Google"),l(!1)}},S=()=>{localStorage.removeItem("google_drive_access_token"),localStorage.removeItem("user_email"),localStorage.removeItem("cloud_sync_swag"),r({...t,syncToGoogleDrive:!1}),a(!1),f(null),x(!1),y(!1),d(null)},_=A=>{x(A),r({...t,syncToGoogleDrive:A})},T=A=>{y(A),localStorage.setItem("cloud_sync_swag",A.toString())};return s.jsxs("div",{className:"cloud-sync-settings",children:[s.jsx("h2",{children:"Cloud Sync Settings"}),s.jsxs("div",{className:"auth-section",children:[s.jsx("h3",{children:"Google Drive Authentication"}),n?s.jsxs("div",{className:"auth-status",children:[s.jsxs("div",{className:"connected-info",children:[s.jsx("span",{className:"status-indicator",children:""}),s.jsxs("div",{children:[s.jsx("strong",{children:"Connected"}),h&&s.jsx("div",{className:"user-email",children:h})]})]}),s.jsx("button",{onClick:S,className:"disconnect-button",children:"Disconnect"})]}):s.jsxs("div",{className:"auth-prompt",children:[s.jsx("p",{children:"Connect your Google account to enable cloud synchronization of your settings, API keys, and usage logs."}),s.jsx("button",{onClick:k,disabled:o,className:"google-auth-button",children:o?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner"}),"Connecting..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),s.jsx("path",{fill:"#34A853",d:"M9.003 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9.003 18z"}),s.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"}),s.jsx("path",{fill:"#EA4335",d:"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.428 0 9.003 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z"})]}),"Connect to Google Drive"]})}),u&&s.jsxs("div",{className:"error-message",children:[s.jsx("strong",{children:"Error:"})," ",u]})]})]}),n&&s.jsxs("div",{className:"sync-options",children:[s.jsx("h3",{children:"Sync Options"}),s.jsx("p",{className:"sync-description",children:"Choose which data to synchronize with your Google Drive. Each option can be enabled independently."}),s.jsx("div",{className:"sync-option",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:p,onChange:A=>_(A.target.checked)}),s.jsxs("div",{className:"option-content",children:[s.jsx("strong",{children:"Configuration Sync"}),s.jsx("span",{className:"option-description",children:"Sync app settings, preferences, and UI state across devices"})]})]})}),s.jsx("div",{className:"sync-option",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:b,onChange:A=>T(A.target.checked)}),s.jsxs("div",{className:"option-content",children:[s.jsx("strong",{children:"API Keys Sync (SWAG)"}),s.jsx("span",{className:"option-description",children:"Sync provider API keys securely to your Google Drive"})]})]})})]})]})},LB=({isOpen:e,onClose:t,enabledTools:r,setEnabledTools:n,onOpenMCPDialog:a})=>{const o=oc(e,t),{settings:l,setSettings:u}=ii(),{isConnected:d,isLoading:h,error:f,initiateOAuthFlow:p,disconnect:x}=IN(),{location:b,isLoading:y,error:k,permissionState:S,requestLocation:_,clearLocation:T}=FN(),[A,I]=C.useState("provider"),[O,B]=C.useState(!1),[F,ae]=C.useState(""),[Z,z]=C.useState(""),[ee,W]=C.useState(!1);C.useEffect(()=>{const L=localStorage.getItem("proxy_settings");if(L)try{const q=JSON.parse(L);ae(q.username||""),z(q.password||""),W(q.enabled!==!1)}catch(q){console.error("Failed to parse proxy settings:",q)}},[e]);const $=(L,q,D)=>{localStorage.setItem("proxy_settings",JSON.stringify({username:L,password:q,enabled:D}))};return e?s.jsx("div",{ref:o,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:s.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("button",{onClick:()=>I("provider"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="provider"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Provider"}),s.jsx("button",{onClick:()=>I("cloud"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="cloud"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Cloud Sync"}),s.jsx("button",{onClick:()=>I("tools"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Tools"}),s.jsx("button",{onClick:()=>I("proxy"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="proxy"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Proxy"}),s.jsx("button",{onClick:()=>I("location"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="location"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Location"}),s.jsx("button",{onClick:()=>I("tts"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="tts"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" TTS"}),s.jsx("button",{onClick:()=>I("rag"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${A==="rag"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" RAG"})]}),A==="provider"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" Provider Credentials"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure your LLM provider API keys. The backend automatically selects the best model for each request."})]}),s.jsx(TB,{onEditingChange:B}),!O&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" Model Selection Strategy"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Choose how the system selects models for your requests. This balances cost, quality, and performance."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[s.jsx("input",{type:"radio",name:"optimization",value:"cheap",checked:(l.optimization||"cheap")==="cheap",onChange:L=>u({...l,optimization:L.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Cheap (Recommended)"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[s.jsx("input",{type:"radio",name:"optimization",value:"balanced",checked:l.optimization==="balanced",onChange:L=>u({...l,optimization:L.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Balanced"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[s.jsx("input",{type:"radio",name:"optimization",value:"powerful",checked:l.optimization==="powerful",onChange:L=>u({...l,optimization:L.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Powerful"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis."})]})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[s.jsx("input",{type:"radio",name:"optimization",value:"fastest",checked:l.optimization==="fastest",onChange:L=>u({...l,optimization:L.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Fastest"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions."})]})]})]})]})]}),A==="tools"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tavily API Key (Optional)"}),s.jsx("input",{type:"password",value:l.tavilyApiKey,onChange:L=>u({...l,tavilyApiKey:L.target.value}),className:"input-field",placeholder:"tvly-..."}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided."})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Enabled Tools"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.web_search,onChange:L=>n({...r,web_search:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Web Search"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search the web for current information, news, and articles"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.execute_js,onChange:L=>n({...r,execute_js:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" JavaScript Execution"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Execute JavaScript code for calculations and data processing"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.scrape_url,onChange:L=>n({...r,scrape_url:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Web Scraping"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Extract content from specific URLs and websites"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.youtube,onChange:L=>n({...r,youtube:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" YouTube Search"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search YouTube for videos with transcript support"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.transcribe,onChange:L=>n({...r,transcribe:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Transcribe Audio/Video"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transcribe audio/video from URLs (YouTube, MP3, MP4, etc.) using Whisper"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.generate_chart,onChange:L=>n({...r,generate_chart:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Generate Charts & Diagrams"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create interactive flowcharts, sequence diagrams, ER diagrams, Gantt charts, and more"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.generate_image,onChange:L=>n({...r,generate_image:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Generate Images (AI)"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create images using DALL-E, Stable Diffusion, and other AI models with quality tier selection"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.search_knowledge_base,onChange:L=>n({...r,search_knowledge_base:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Search Knowledge Base (Server-Side)"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Server-side RAG tool for searching project documentation and ingested content"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.manage_todos,onChange:L=>n({...r,manage_todos:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Manage Todos (Backend Queue)"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Backend todo queue management with auto-progression for multi-step workflows"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:r.manage_snippets,onChange:L=>n({...r,manage_snippets:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Manage Snippets (Google Sheets)"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save and search code snippets and knowledge in your personal Google Sheet"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors border-2 border-amber-200 dark:border-amber-900/50 bg-amber-50 dark:bg-amber-900/10",children:[s.jsx("input",{type:"checkbox",checked:r.ask_llm,onChange:L=>n({...r,ask_llm:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[" Recursive LLM Agent",s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium text-amber-700 bg-amber-200 dark:bg-amber-900/50 dark:text-amber-400 rounded-full",children:" HIGH TOKEN USAGE"})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium mb-1",children:"Spawn sub-agent with full tool access for complex multi-step queries"}),s.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/30 p-2 rounded border border-amber-300 dark:border-amber-800",children:[s.jsx("strong",{children:"WARNING:"})," This tool creates complete recursive conversations with all available tools and multiple iterations. Can consume ",s.jsx("strong",{children:"5-10x more tokens"})," than direct responses. Use ONLY for complex queries requiring multiple steps with different tools. Limited to 5 iterations with token budget safeguards."]})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors border-3 border-red-400 dark:border-red-900 bg-red-50 dark:bg-red-950/20 shadow-md",children:[s.jsx("input",{type:"checkbox",checked:r.generate_reasoning_chain,onChange:L=>n({...r,generate_reasoning_chain:L.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-red-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[" Deep Reasoning Chain",s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-bold text-red-800 bg-red-300 dark:bg-red-900/70 dark:text-red-300 rounded-full animate-pulse",children:" EXTREME TOKEN USAGE"})]}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Generate transparent reasoning chains with advanced reasoning models (o1, DeepSeek-R1)"}),s.jsxs("div",{className:"text-xs text-red-800 dark:text-red-300 bg-red-100 dark:bg-red-950/50 p-3 rounded border-2 border-red-400 dark:border-red-800 space-y-1",children:[s.jsx("div",{className:"font-bold text-sm mb-2",children:" CRITICAL WARNINGS:"}),s.jsxs("div",{children:[" Can consume ",s.jsx("strong",{className:"text-red-900 dark:text-red-200",children:"10-50x MORE tokens"})," than normal responses"]}),s.jsxs("div",{children:[" Uses ",s.jsx("strong",{children:"maximum reasoning depth"})," - models think extensively before responding"]}),s.jsxs("div",{children:[" May trigger ",s.jsx("strong",{children:"PARALLEL ASYNCHRONOUS TOOL CALLS"})," causing rapid token consumption"]}),s.jsxs("div",{children:[" Reasoning models charge for ",s.jsx("strong",{children:"both reasoning AND output tokens"})]}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-red-300 dark:border-red-800",children:[s.jsx("strong",{children:"USE ONLY FOR:"})," Complex problems requiring deep logical analysis, multi-step proofs, mathematical derivations, or strategic planning where explicit reasoning transparency is essential."]})]})]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:L=>{L.preventDefault()},className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Use YouTube Captions API"}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Direct access to YouTube transcripts (faster than Whisper transcription)"})]}),d&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connected"]})]})}),!d&&s.jsxs("div",{className:"ml-11 mb-4",children:[s.jsx("button",{onClick:p,disabled:h,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:h?"Connecting...":"Connect YouTube Account"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Requires Google account authorization (read-only access)"})]}),d&&s.jsx("div",{className:"ml-11 mb-4",children:s.jsx("button",{onClick:()=>{confirm("Are you sure you want to disconnect YouTube access?")&&x()},className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg transition-colors",children:"Disconnect YouTube Access"})}),f&&s.jsxs("div",{className:"ml-11 mb-4 text-sm text-red-600 dark:text-red-400 flex items-start gap-2",children:[s.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("span",{children:f})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"MCP Servers"}),s.jsx("button",{onClick:()=>{a(),t()},className:"btn-secondary text-sm px-4 py-2",title:"Configure Model Context Protocol Servers",children:" Configure MCP"})]}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add and manage Model Context Protocol servers for extended functionality"})]})]}),A==="proxy"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Webshare Proxy Configuration"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Configure residential proxy for YouTube, DuckDuckGo, and content scraping to avoid rate limiting"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Username"}),s.jsx("input",{type:"text",value:F,onChange:L=>{const q=L.target.value;ae(q),$(q,Z,ee)},placeholder:"exrihquq",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Password"}),s.jsx("input",{type:"password",value:Z,onChange:L=>{const q=L.target.value;z(q),$(F,q,ee)},placeholder:"Enter password",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"proxyEnabled",checked:ee,onChange:L=>{const q=L.target.checked;W(q),$(F,Z,q)},className:"w-4 h-4"}),s.jsx("label",{htmlFor:"proxyEnabled",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable proxy for all requests"})]})]}),s.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 space-y-1 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:[s.jsx("p",{children:" Rotating residential IPs via p.webshare.io:80"}),s.jsx("p",{children:" Avoids rate limiting from Google and other services"}),s.jsxs("p",{children:[" Get credentials from ",s.jsx("a",{href:"https://dashboard.webshare.io/dashboard",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Webshare Dashboard"})]}),s.jsx("p",{children:" UI settings override environment variables"})]})]})}),A==="location"&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:" Location Services"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enable location services to provide context-aware responses for local queries (weather, restaurants, directions, etc.)"}),s.jsx("div",{className:`p-6 rounded-lg border-2 ${b?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":S==="denied"?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:y?s.jsxs("svg",{className:"w-12 h-12 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):b?s.jsx("svg",{className:"w-12 h-12 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}):S==="denied"?s.jsx("svg",{className:"w-12 h-12 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm1 13h-2v-2h2v2zm0-4h-2V7h2v4z"})}):s.jsx("svg",{className:"w-12 h-12 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.5",children:s.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-3",children:y?s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Getting your location..."}):b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-2",children:"Location Enabled"}),b.address&&s.jsxs("div",{className:"space-y-1",children:[b.address.formatted&&s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:b.address.formatted}),!b.address.formatted&&s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[b.address.city,b.address.state,b.address.country].filter(Boolean).join(", ")})]}),s.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[s.jsxs("div",{children:["Coordinates: ",b.latitude.toFixed(6),", ",b.longitude.toFixed(6)]}),s.jsxs("div",{children:["Accuracy: ",b.accuracy.toFixed(0)," meters"]}),s.jsxs("div",{children:["Updated: ",new Date(b.timestamp).toLocaleString()]})]})]}):S==="denied"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-2",children:"Location Access Denied"}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"You have denied location access. To enable it, please update your browser settings and reload the page."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location Not Enabled"}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click the button below to share your location. This helps provide better responses for location-specific queries."})]})}),k&&s.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:s.jsxs("div",{className:"text-sm text-red-700 dark:text-red-400 flex items-start gap-2",children:[s.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("span",{children:k})]})}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[!b&&S!=="denied"&&s.jsx("button",{onClick:_,disabled:y,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Getting Location...":"Enable Location"}),b&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:_,disabled:y,className:"btn-secondary px-4 py-2",children:" Refresh"}),s.jsx("button",{onClick:T,className:"btn-secondary px-4 py-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:" Clear"})]})]})]})]})}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Privacy & Usage"}),s.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-300 space-y-1",children:[s.jsx("p",{children:" Your location is stored locally in your browser (not on our servers)"}),s.jsx("p",{children:" Location data is only sent to the Lambda function when you send a chat message"}),s.jsx("p",{children:" Automatically expires after 24 hours"}),s.jsx("p",{children:" You can clear your location data at any time"}),s.jsx("p",{children:" Used for: weather, local businesses, directions, time zones, regional info"})]})]})]})})]})}),A==="tts"&&s.jsx(CB,{}),A==="rag"&&s.jsx(NB,{}),A==="cloud"&&s.jsx(AB,{}),s.jsx("div",{className:"flex justify-end gap-3 mt-8",children:s.jsx("button",{onClick:t,className:"btn-primary",children:"Close"})})]})}):null},Hy="llm_proxy_search_cache",jB=7;function MB(){try{const e=localStorage.getItem(Hy);if(!e)return{};const t=JSON.parse(e),r=Date.now(),n=jB*24*60*60*1e3,a={};for(const[o,l]of Object.entries(t)){const u=l;r-u.timestamp<n&&(a[o]=u)}return Object.keys(a).length!==Object.keys(t).length&&localStorage.setItem(Hy,JSON.stringify(a)),a}catch(e){return console.error("Error reading search cache:",e),{}}}function RB(e,t){try{const r=MB(),n=e.toLowerCase().trim();r[n]={query:e.trim(),results:t,timestamp:Date.now()},localStorage.setItem(Hy,JSON.stringify(r))}catch(r){console.error("Error saving search to cache:",r)}}function OB(e,t){if(e!=="search_web")return null;try{const r=JSON.parse(t);return r.query&&Array.isArray(r.results)?(RB(r.query,r.results),{query:r.query,results:r.results}):null}catch(r){return console.error("Error extracting search result from tool call:",r),null}}const mv="llm_proxy_planning_cache";function IB(){return`plan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function z0(){try{const e=localStorage.getItem(mv);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading planning cache:",e),[]}}function DB(e,t,r,n){try{const a=z0(),o=e.trim().toLowerCase(),l=a.filter(h=>h.query.trim().toLowerCase()!==o),u={id:IB(),query:e.trim(),plan:t,systemPrompt:r,userPrompt:n,timestamp:Date.now()};l.unshift(u);const d=l.slice(0,50);localStorage.setItem(mv,JSON.stringify(d)),console.log(`Plan saved (${l.length>a.length?"new":"replaced duplicate"}):`,e.trim())}catch(a){throw console.error("Error saving plan to cache:",a),a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?(console.error("Storage quota exceeded. Consider:",`
1. Deleting old saved plans`,`
2. Clearing browser data`,`
3. Using persistent storage (navigator.storage.persist())`),new Error("Storage quota exceeded. Please delete some old plans to free up space, or clear your browser cache.")):a}}function PB(e){try{const r=z0().filter(n=>n.id!==e);localStorage.setItem(mv,JSON.stringify(r))}catch(t){console.error("Error deleting cached plan:",t)}}async function BB(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate(),t=e.usage||0,r=e.quota||0,n=r>0?t/r*100:0;return{usage:t,quota:r,percentage:n}}catch(e){return console.error("Error getting storage estimate:",e),null}return null}const FB=({onClose:e})=>s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"LLM Transparency Info"}),s.jsx("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",onClick:e,children:""})]});function xv(e,t=!0){if(e===null)return"N/A";const r=t?"$":"";return e<1e-4?`${r}${e.toFixed(6)}`:e<.01?`${r}${e.toFixed(4)}`:`${r}${e.toFixed(4)}`}const UB=({call:e})=>{function t(n){switch(n.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-400",text:"text-pink-700 dark:text-pink-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-400",text:"text-blue-700 dark:text-blue-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-400",text:"text-indigo-700 dark:text-indigo-300",icon:""};default:return{label:"Chat",color:"bg-gray-100 dark:bg-gray-900/30",border:"border-gray-400",text:"text-gray-700 dark:text-gray-300",icon:""}}}const r=t(e);return s.jsxs("div",{className:`border rounded-lg p-4 mb-2 ${r.color} ${r.border||""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:`font-semibold ${r.text}`,children:[r.icon," ",r.label]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.provider,"  ",e.model]})]}),s.jsx("div",{className:"mb-2",children:s.jsxs("span",{className:"font-mono text-sm",children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]})}),s.jsxs("div",{className:"mb-2",children:[e.cost!==void 0&&s.jsxs("span",{className:"font-semibold text-pink-700 dark:text-pink-300",children:[" ",xv(e.cost)]}),e.durationMs&&s.jsxs("span",{className:"ml-2",children:[" ",(e.durationMs/1e3).toFixed(2),"s"]}),e.success!==void 0&&s.jsx("span",{className:e.success?"text-green-600 dark:text-green-400 ml-2":"text-red-600 dark:text-red-400 ml-2",children:e.success?" Success":" Failed"})]})]})},$B=({totalTokens:e,totalPromptTokens:t,totalCompletionTokens:r,totalActualCost:n,totalPaidEquivalent:a,hasPricing:o,hasFreeModels:l,onClose:u})=>s.jsxs("div",{className:"mt-6 border-t pt-4 text-sm text-gray-700 dark:text-gray-300",children:[s.jsxs("div",{className:"mb-2",children:["Total tokens: ",s.jsx("span",{className:"font-mono font-semibold",children:e})]}),s.jsxs("div",{className:"mb-2",children:["Prompt tokens: ",s.jsx("span",{className:"font-mono",children:t})," | Completion tokens: ",s.jsx("span",{className:"font-mono",children:r})]}),s.jsxs("div",{className:"mb-2",children:["Actual cost: ",s.jsx("span",{className:"font-mono font-semibold",children:n})]}),o&&s.jsxs("div",{className:"mb-2",children:["Paid equivalent: ",s.jsx("span",{className:"font-mono",children:a})]}),l&&s.jsx("div",{className:"mb-2 text-green-600 dark:text-green-400",children:"Some calls used free tier models."}),s.jsx("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors mt-4",onClick:u,children:"Close"})]}),zB=({apiCalls:e,onClose:t})=>s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 dark:bg-opacity-60",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl p-6 relative",children:[s.jsx(FB,{onClose:t}),s.jsx("div",{className:"space-y-4",children:e.length===0?s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((h,f)=>s.jsx(UB,{call:h},f))}),s.jsx($B,{totalTokens:0,totalPromptTokens:0,totalCompletionTokens:0,totalActualCost:0,totalPaidEquivalent:0,hasPricing:!1,hasFreeModels:!1,onClose:t})]})}),HB=({isOpen:e,onClose:t,onTransferToChat:r})=>{const n=oc(e,t),{getToken:a,isAuthenticated:o}=$s(),{settings:l}=ii(),{showError:u,showSuccess:d}=xo(),[h,f]=ps("planning_query",""),[p,x]=ps("planning_result",null),[b,y]=C.useState(!1),[k,S]=C.useState(""),[_,T]=C.useState(!1),[A,I]=C.useState([]),[O,B]=C.useState(null),[F,ae]=C.useState(null),[Z,z]=C.useState(!1),ee=C.useRef(null),W=C.useRef(null),$=C.useRef(null),[L,q]=ps("planning_dialog_generated_system_prompt",""),[D,X]=ps("planning_dialog_generated_user_query",""),K=re=>{re&&(re.style.height="auto",re.style.height=re.scrollHeight+"px")};C.useEffect(()=>{K(ee.current)},[h]),C.useEffect(()=>{K(W.current)},[L]),C.useEffect(()=>{K($.current)},[D]),C.useEffect(()=>{_&&(I(z0()),xe())},[_]);const xe=async()=>{const re=await BB();B(re)},U=async()=>{if(!(!h.trim()||b)){y(!0),x(null),S("Initializing...");try{const re=await a();if(!re){console.error("No valid token available"),x({error:"Authentication expired. Please sign out and sign in again to continue."}),y(!1);return}const fe=l.providers.filter(le=>le.enabled===!0);if(fe.length===0){x({error:"No providers configured. Please set up at least one provider in Settings."}),y(!1);return}await TN(h,re,fe,void 0,(le,ve)=>{switch(console.log("Planning SSE event:",le,ve),le){case"status":console.log("Status:",ve.message),S(ve.message||"Processing...");break;case"result":x(ve),ve.enhancedSystemPrompt&&q(ve.enhancedSystemPrompt),ve.enhancedUserPrompt&&X(ve.enhancedUserPrompt);break;case"llm_response":ae(ve),console.log("Captured LLM transparency info:",ve);break;case"error":const ce=ve.error||"Unknown error",ke=ve.provider&&ve.model?` (Provider: ${ve.provider}, Model: ${ve.model})`:"",it=`${ce}${ke}`;let pt="";ce.includes("Invalid API Key")||ce.includes("401")?pt=`

 Tip: Check your API key in Settings. Make sure it's valid and hasn't expired.`:(ve.isRateLimit||ce.includes("rate limit"))&&(pt=`

 Tip: You've hit the rate limit. Try again in a few moments or use a different provider.`),x({error:it+pt}),u(`Planning error: ${it}${pt}`);break;case"llm_error":console.error("LLM Error:",ve);const zt=ve.error||"LLM request failed",Sr=ve.provider&&ve.modelName?` (${ve.provider}:${ve.modelName})`:"";u(`LLM Error${Sr}: ${zt}`);break}},()=>{console.log("Planning stream complete"),y(!1),S("")},le=>{console.error("Planning stream error:",le),x({error:le.message}),u(`Planning failed: ${le.message}`),y(!1),S("")})}catch(re){console.error("Planning error:",re);const fe=re instanceof Error?re.message:"Unknown error";x({error:fe}),u(`Planning error: ${fe}`),y(!1),S("")}}},M=()=>{if(!D||!r)return;r(JSON.stringify({prompt:D,persona:L||"",planningQuery:h,generatedSystemPrompt:L,generatedUserQuery:D})),t()},Y=re=>{f(re.query),x(re.plan),re.plan&&!re.plan.error&&(re.plan.enhancedSystemPrompt&&q(re.plan.enhancedSystemPrompt),re.plan.enhancedUserPrompt&&X(re.plan.enhancedUserPrompt)),re.systemPrompt&&q(re.systemPrompt),re.userPrompt&&X(re.userPrompt),T(!1)},R=re=>{PB(re),I(z0())},H=()=>{if(!p||p.error){u("Cannot save plan: No valid plan generated");return}try{DB(h,p,p.enhancedSystemPrompt||L||"",p.enhancedUserPrompt||D||""),d("Plan saved successfully"),console.log("Plan manually saved to cache with system and user prompts")}catch(re){u(re instanceof Error?re.message:"Failed to save plan")}},ne=()=>{f(""),x(null),q(""),X(""),localStorage.removeItem("planning_dialog_generated_system_prompt"),localStorage.removeItem("planning_dialog_generated_user_query"),localStorage.removeItem("planning_query"),localStorage.removeItem("planning_result"),console.log("Planning dialog cleared completely")};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:n,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Research Planning"}),s.jsx("div",{className:"ml-4",children:s.jsxs("button",{onClick:H,disabled:!p||p.error,className:"btn-primary text-sm flex items-center gap-1.5",title:"Save the current plan to your saved plans list",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Plan"]})}),s.jsxs("button",{onClick:()=>T(!0),className:"btn-secondary text-sm flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Load Saved"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r&&s.jsxs("button",{onClick:M,disabled:!D||!D.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Transfer to Chat"]}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[b&&k&&s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-blue-700",children:k})})]})}),s.jsxs("div",{className:"card p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Research Query"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:U,disabled:b||!h.trim()||!o,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),b?"Generating...":"Generate Plan"]}),s.jsxs("button",{onClick:ne,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:"Clear all planning data and start fresh",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All"]})]})]}),o?s.jsx(s.Fragment,{children:s.jsx("textarea",{ref:ee,value:h,onChange:re=>f(re.target.value),placeholder:"Enter your research question or topic...",className:"input-field resize-none overflow-hidden",style:{minHeight:"120px"}})}):s.jsx("div",{className:"text-center text-red-500 py-4",children:"Please sign in to use planning"})]}),L&&s.jsxs("div",{className:"card p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Generated Prompts"}),F&&s.jsxs("button",{onClick:()=>z(!0),className:"btn-secondary text-xs px-3 py-1.5 flex items-center gap-1",title:"View LLM transparency info (model, tokens, cost)",children:[" $",(F.cost||0).toFixed(4),"  ",F.calls||1," call",F.calls>1?"s":""," "]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Generated System Prompt (Editable):"}),s.jsx("textarea",{ref:W,value:L,onChange:re=>q(re.target.value),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This defines the AI's role and behavior. Edit as needed before transferring to chat."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Generated User Query (Editable):"}),s.jsx("textarea",{ref:$,value:D,onChange:re=>X(re.target.value),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This is the message that will be sent to the chat. Edit to refine your query."})]})]})]}),p&&!p.error&&s.jsx("div",{className:"card p-4",children:s.jsxs("div",{className:"space-y-4",children:[p.queryType==="SIMPLE"&&s.jsxs("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20",children:[s.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Simple Query Detected"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:p.simpleInstruction}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This query can be answered directly without extensive planning."})]}),p.queryType==="OVERVIEW"&&s.jsxs("div",{className:"card p-4 space-y-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:" Comprehensive Research Plan"}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-800 dark:text-gray-200",children:" Analysis Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Query Type:"}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:p.queryType})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Complexity:"}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded",children:p.complexityAssessment})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Research Approach:"}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:p.researchApproach})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Estimated Sources:"}),s.jsx("span",{className:"ml-2 px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded",children:p.estimatedSources||"N/A"})]})]}),p.reasoning&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Reasoning:"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:p.reasoning})]})]}),p.persona&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:" Expert Persona"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:p.persona})]}),p.searchStrategies?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Search Queries:"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:s.jsx("ul",{className:"space-y-1",children:p.searchStrategies.map((re,fe)=>s.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300 flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsxs("span",{children:['"',re,'"']})]},fe))})})]}),p.researchQuestions?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Research Questions:"}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:s.jsx("ul",{className:"list-decimal list-inside space-y-1 text-sm",children:p.researchQuestions.map((re,fe)=>s.jsx("li",{className:"text-purple-700 dark:text-purple-300",children:re},fe))})})]}),p.suggestedSources?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Suggested Sources:"}),s.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg",children:s.jsx("div",{className:"space-y-2",children:p.suggestedSources.map((re,fe)=>s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-teal-800 dark:text-teal-200 capitalize",children:[re.type," Sources:"]}),s.jsx("div",{className:"text-teal-700 dark:text-teal-300 ml-2",children:re.examples?re.examples.join(", "):"Various relevant sources"})]},fe))})})]}),p.methodology&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Research Methodology:"}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:p.methodology})})]}),p.enhancedSystemPrompt&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced System Prompt:"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:s.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:p.enhancedSystemPrompt})})]}),p.enhancedUserPrompt&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced User Prompt:"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:s.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:p.enhancedUserPrompt})})]}),s.jsxs("details",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",children:[s.jsx("summary",{className:"text-sm font-medium cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:" Debug: Raw LLM Response Fields"}),s.jsx("div",{className:"mt-3 space-y-2 text-xs",children:Object.entries(p).map(([re,fe])=>re.startsWith("_")||typeof fe=="object"?null:s.jsxs("div",{className:"flex",children:[s.jsxs("span",{className:"font-mono text-gray-500 dark:text-gray-400 w-32 flex-shrink-0",children:[re,":"]}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-all",children:typeof fe=="string"?fe:JSON.stringify(fe)})]},re))})]})]}),p.queryType==="LONG_FORM"&&s.jsxs("div",{className:"card p-4 space-y-4",children:[s.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:" Long-Form Document Plan"}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded text-sm",children:[s.jsx("strong",{children:"Note:"})," This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document."]}),p.documentSections?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Document Structure:"}),p.documentSections.map((re,fe)=>s.jsxs("div",{className:"ml-4 mb-3 p-2 bg-gray-50 dark:bg-gray-900 rounded",children:[s.jsxs("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:[fe+1,". ",re.title]}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Keywords: ",re.keywords.join(", ")]}),re.questions?.length>0&&s.jsx("ul",{className:"text-xs mt-1 ml-4 list-disc list-inside",children:re.questions.map((le,ve)=>s.jsx("li",{children:le},ve))})]},fe))]}),p.snippetWorkflow&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Workflow:"}),s.jsx("div",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded whitespace-pre-wrap",children:p.snippetWorkflow})]})]}),p.queryType==="NEEDS_CLARIFICATION"&&s.jsxs("div",{className:"card p-4 space-y-4 bg-orange-50 dark:bg-orange-900/20",children:[s.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:" Need More Information"}),s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:p.reasoning}),p.clarificationQuestions?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Please clarify:"}),s.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:p.clarificationQuestions.map((re,fe)=>s.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:re},fe))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Update your query with more details:"}),s.jsx("textarea",{value:h,onChange:re=>f(re.target.value),className:"input-field",rows:4,placeholder:"Provide more specific details..."}),s.jsx("button",{onClick:U,className:"btn-primary mt-2 w-full",children:"Regenerate Plan with Clarifications"})]})]}),p.queryType==="guidance"&&s.jsxs("div",{className:"card p-4 space-y-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[s.jsxs("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""})," Seeking Guidance - Complex Multi-Iteration Plan"]}),p.planType&&s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Plan Type:"}),s.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm font-medium",children:p.planType.replace(/-/g," ").toUpperCase()})]}),p.detectedPatterns?.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-800 dark:text-purple-200",children:" Detected Complexity Patterns:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.detectedPatterns.map((re,fe)=>s.jsx("span",{className:"px-2 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:re},fe))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.estimatedIterations&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Estimated Iterations"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:p.estimatedIterations})]}),p.toolsRequired?.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Tools Required"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:p.toolsRequired.length})]})]}),p.suggestedWorkflow&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:" Suggested Workflow:"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:p.suggestedWorkflow})]}),p.toolsRequired?.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:" Required Tools:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:p.toolsRequired.map((re,fe)=>s.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-mono",children:re},fe))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700",children:[s.jsxs("h4",{className:"text-sm font-medium mb-3 text-yellow-900 dark:text-yellow-100 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""})," Please answer these questions to refine your plan:"]}),p.guidanceQuestions?.length>0&&s.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm mb-4",children:p.guidanceQuestions.map((re,fe)=>s.jsx("li",{className:"text-yellow-800 dark:text-yellow-200 font-medium",children:re},fe))}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("label",{className:"block text-sm font-semibold text-yellow-900 dark:text-yellow-100",children:"Update your research prompt with answers:"}),s.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-2",children:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples."}),s.jsx("textarea",{value:h,onChange:re=>f(re.target.value),className:"input-field",rows:6,placeholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`}),s.jsx("button",{onClick:U,className:"btn-primary mt-2 w-full",children:" Generate Detailed Execution Plan"})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-300 dark:border-blue-700",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"About Guidance Mode:"})," This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration."]})})]})]})})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:s.jsxs("div",{className:"card p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Load Saved Plan"}),O&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Storage: ",(O.usage/(1024*1024)).toFixed(2)," MB / ",(O.quota/(1024*1024)).toFixed(0)," MB (",O.percentage.toFixed(1),"%)"]})]}),O&&O.percentage>80&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-semibold mb-2",children:[" Storage is ",O.percentage.toFixed(1),"% full"]}),s.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Consider deleting old plans to free up space."})]}),A.length===0?s.jsx("p",{className:"text-gray-500",children:"No saved plans found"}):s.jsx("div",{className:"space-y-3",children:A.map(re=>{const fe=new Date(re.timestamp).toLocaleString();return s.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-3",children:s.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 mb-1",children:re.query}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Saved: ",fe]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Y(re),className:"btn-primary text-xs",children:"Load"}),s.jsx("button",{onClick:()=>R(re.id),className:"btn-secondary text-red-500 text-xs",children:"Delete"})]})]})},re.id)})}),s.jsx("button",{onClick:()=>T(!1),className:"btn-primary w-full mt-4",children:"Close"})]})}),Z&&F&&s.jsx(zB,{apiCalls:[F],onClose:()=>z(!1)})]}):null};function I_(e){const t=[],r=String(e||"");let n=r.indexOf(","),a=0,o=!1;for(;!o;){n===-1&&(n=r.length,o=!0);const l=r.slice(a,n).trim();(l||!o)&&t.push(l),a=n+1,n=r.indexOf(",",a)}return t}function WN(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const qB=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,GB=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YB={};function D_(e,t){return(YB.jsx?GB:qB).test(e)}const WB=/[ \t\n\f\r]/g;function VB(e){return typeof e=="object"?e.type==="text"?P_(e.value):!1:P_(e)}function P_(e){return e.replace(WB,"")===""}let yg=class{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}};yg.prototype.normal={};yg.prototype.property={};yg.prototype.space=void 0;function VN(e,t){const r={},n={};for(const a of e)Object.assign(r,a.property),Object.assign(n,a.normal);return new yg(r,n,t)}function Xh(e){return e.toLowerCase()}let ts=class{constructor(t,r){this.attribute=r,this.property=t}};ts.prototype.attribute="";ts.prototype.booleanish=!1;ts.prototype.boolean=!1;ts.prototype.commaOrSpaceSeparated=!1;ts.prototype.commaSeparated=!1;ts.prototype.defined=!1;ts.prototype.mustUseProperty=!1;ts.prototype.number=!1;ts.prototype.overloadedBoolean=!1;ts.prototype.property="";ts.prototype.spaceSeparated=!1;ts.prototype.space=void 0;let KB=0;const dr=lc(),zn=lc(),qy=lc(),Je=lc(),cn=lc(),bu=lc(),gs=lc();function lc(){return 2**++KB}const Gy=Object.freeze(Object.defineProperty({__proto__:null,boolean:dr,booleanish:zn,commaOrSpaceSeparated:gs,commaSeparated:bu,number:Je,overloadedBoolean:qy,spaceSeparated:cn},Symbol.toStringTag,{value:"Module"})),Ob=Object.keys(Gy);let bv=class extends ts{constructor(t,r,n,a){let o=-1;if(super(t,r),B_(this,"space",a),typeof n=="number")for(;++o<Ob.length;){const l=Ob[o];B_(this,Ob[o],(n&Gy[l])===Gy[l])}}};bv.prototype.defined=!0;function B_(e,t,r){r&&(e[t]=r)}function Wu(e){const t={},r={};for(const[n,a]of Object.entries(e.properties)){const o=new bv(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(o.mustUseProperty=!0),t[n]=o,r[Xh(n)]=n,r[Xh(o.attribute)]=n}return new yg(t,r,e.space)}const KN=Wu({properties:{ariaActiveDescendant:null,ariaAtomic:zn,ariaAutoComplete:null,ariaBusy:zn,ariaChecked:zn,ariaColCount:Je,ariaColIndex:Je,ariaColSpan:Je,ariaControls:cn,ariaCurrent:null,ariaDescribedBy:cn,ariaDetails:null,ariaDisabled:zn,ariaDropEffect:cn,ariaErrorMessage:null,ariaExpanded:zn,ariaFlowTo:cn,ariaGrabbed:zn,ariaHasPopup:null,ariaHidden:zn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:cn,ariaLevel:Je,ariaLive:null,ariaModal:zn,ariaMultiLine:zn,ariaMultiSelectable:zn,ariaOrientation:null,ariaOwns:cn,ariaPlaceholder:null,ariaPosInSet:Je,ariaPressed:zn,ariaReadOnly:zn,ariaRelevant:null,ariaRequired:zn,ariaRoleDescription:cn,ariaRowCount:Je,ariaRowIndex:Je,ariaRowSpan:Je,ariaSelected:zn,ariaSetSize:Je,ariaSort:null,ariaValueMax:Je,ariaValueMin:Je,ariaValueNow:Je,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function XN(e,t){return t in e?e[t]:t}function QN(e,t){return XN(e,t.toLowerCase())}const XB=Wu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bu,acceptCharset:cn,accessKey:cn,action:null,allow:null,allowFullScreen:dr,allowPaymentRequest:dr,allowUserMedia:dr,alt:null,as:null,async:dr,autoCapitalize:null,autoComplete:cn,autoFocus:dr,autoPlay:dr,blocking:cn,capture:null,charSet:null,checked:dr,cite:null,className:cn,cols:Je,colSpan:null,content:null,contentEditable:zn,controls:dr,controlsList:cn,coords:Je|bu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:dr,defer:dr,dir:null,dirName:null,disabled:dr,download:qy,draggable:zn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:dr,formTarget:null,headers:cn,height:Je,hidden:qy,high:Je,href:null,hrefLang:null,htmlFor:cn,httpEquiv:cn,id:null,imageSizes:null,imageSrcSet:null,inert:dr,inputMode:null,integrity:null,is:null,isMap:dr,itemId:null,itemProp:cn,itemRef:cn,itemScope:dr,itemType:cn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:dr,low:Je,manifest:null,max:null,maxLength:Je,media:null,method:null,min:null,minLength:Je,multiple:dr,muted:dr,name:null,nonce:null,noModule:dr,noValidate:dr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:dr,optimum:Je,pattern:null,ping:cn,placeholder:null,playsInline:dr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:dr,referrerPolicy:null,rel:cn,required:dr,reversed:dr,rows:Je,rowSpan:Je,sandbox:cn,scope:null,scoped:dr,seamless:dr,selected:dr,shadowRootClonable:dr,shadowRootDelegatesFocus:dr,shadowRootMode:null,shape:null,size:Je,sizes:null,slot:null,span:Je,spellCheck:zn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Je,step:null,style:null,tabIndex:Je,target:null,title:null,translate:null,type:null,typeMustMatch:dr,useMap:null,value:zn,width:Je,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:cn,axis:null,background:null,bgColor:null,border:Je,borderColor:null,bottomMargin:Je,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:dr,declare:dr,event:null,face:null,frame:null,frameBorder:null,hSpace:Je,leftMargin:Je,link:null,longDesc:null,lowSrc:null,marginHeight:Je,marginWidth:Je,noResize:dr,noHref:dr,noShade:dr,noWrap:dr,object:null,profile:null,prompt:null,rev:null,rightMargin:Je,rules:null,scheme:null,scrolling:zn,standby:null,summary:null,text:null,topMargin:Je,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Je,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:dr,disableRemotePlayback:dr,prefix:null,property:null,results:Je,security:null,unselectable:null},space:"html",transform:QN}),QB=Wu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:gs,accentHeight:Je,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Je,amplitude:Je,arabicForm:null,ascent:Je,attributeName:null,attributeType:null,azimuth:Je,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Je,by:null,calcMode:null,capHeight:Je,className:cn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Je,diffuseConstant:Je,direction:null,display:null,dur:null,divisor:Je,dominantBaseline:null,download:dr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Je,enableBackground:null,end:null,event:null,exponent:Je,externalResourcesRequired:null,fill:null,fillOpacity:Je,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bu,g2:bu,glyphName:bu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Je,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Je,horizOriginX:Je,horizOriginY:Je,id:null,ideographic:Je,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Je,k:Je,k1:Je,k2:Je,k3:Je,k4:Je,kernelMatrix:gs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Je,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Je,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Je,overlineThickness:Je,paintOrder:null,panose1:null,path:null,pathLength:Je,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:cn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Je,pointsAtY:Je,pointsAtZ:Je,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gs,rev:gs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gs,requiredFeatures:gs,requiredFonts:gs,requiredFormats:gs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Je,specularExponent:Je,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Je,strikethroughThickness:Je,string:null,stroke:null,strokeDashArray:gs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Je,strokeOpacity:Je,strokeWidth:null,style:null,surfaceScale:Je,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gs,tabIndex:Je,tableValues:null,target:null,targetX:Je,targetY:Je,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Je,underlineThickness:Je,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Je,values:null,vAlphabetic:Je,vMathematical:Je,vectorEffect:null,vHanging:Je,vIdeographic:Je,version:null,vertAdvY:Je,vertOriginX:Je,vertOriginY:Je,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Je,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:XN}),ZN=Wu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),JN=Wu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:QN}),eA=Wu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),ZB={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},JB=/[A-Z]/g,F_=/-[a-z]/g,e8=/^data[-\w.:]+$/i;function yv(e,t){const r=Xh(t);let n=t,a=ts;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&e8.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(F_,r8);n="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!F_.test(o)){let l=o.replace(JB,t8);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=bv}return new a(n,t)}function t8(e){return"-"+e.toLowerCase()}function r8(e){return e.charAt(1).toUpperCase()}const Fp=VN([KN,XB,ZN,JN,eA],"html"),Vu=VN([KN,QB,ZN,JN,eA],"svg");function U_(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function tA(e){return e.join(" ").trim()}var au={},Ib,$_;function n8(){if($_)return Ib;$_=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,h="/",f="*",p="",x="comment",b="declaration";Ib=function(k,S){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];S=S||{};var _=1,T=1;function A($){var L=$.match(t);L&&(_+=L.length);var q=$.lastIndexOf(d);T=~q?$.length-q:T+$.length}function I(){var $={line:_,column:T};return function(L){return L.position=new O($),ae(),L}}function O($){this.start=$,this.end={line:_,column:T},this.source=S.source}O.prototype.content=k;function B($){var L=new Error(S.source+":"+_+":"+T+": "+$);if(L.reason=$,L.filename=S.source,L.line=_,L.column=T,L.source=k,!S.silent)throw L}function F($){var L=$.exec(k);if(L){var q=L[0];return A(q),k=k.slice(q.length),L}}function ae(){F(r)}function Z($){var L;for($=$||[];L=z();)L!==!1&&$.push(L);return $}function z(){var $=I();if(!(h!=k.charAt(0)||f!=k.charAt(1))){for(var L=2;p!=k.charAt(L)&&(f!=k.charAt(L)||h!=k.charAt(L+1));)++L;if(L+=2,p===k.charAt(L-1))return B("End of comment missing");var q=k.slice(2,L-2);return T+=2,A(q),k=k.slice(L),T+=2,$({type:x,comment:q})}}function ee(){var $=I(),L=F(n);if(L){if(z(),!F(a))return B("property missing ':'");var q=F(o),D=$({type:b,property:y(L[0].replace(e,p)),value:q?y(q[0].replace(e,p)):p});return F(l),D}}function W(){var $=[];Z($);for(var L;L=ee();)L!==!1&&($.push(L),Z($));return $}return ae(),W()};function y(k){return k?k.replace(u,p):p}return Ib}var z_;function a8(){if(z_)return au;z_=1;var e=au&&au.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(au,"__esModule",{value:!0}),au.default=r;const t=e(n8());function r(n,a){let o=null;if(!n||typeof n!="string")return o;const l=(0,t.default)(n),u=typeof a=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:f}=d;u?a(h,f,d):f&&(o=o||{},o[h]=f)}),o}return au}var eh={},H_;function s8(){if(H_)return eh;H_=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(h){return!h||r.test(h)||e.test(h)},l=function(h,f){return f.toUpperCase()},u=function(h,f){return"".concat(f,"-")},d=function(h,f){return f===void 0&&(f={}),o(h)?h:(h=h.toLowerCase(),f.reactCompat?h=h.replace(a,u):h=h.replace(n,u),h.replace(t,l))};return eh.camelCase=d,eh}var th,q_;function i8(){if(q_)return th;q_=1;var e=th&&th.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(a8()),r=s8();function n(a,o){var l={};return!a||typeof a!="string"||(0,t.default)(a,function(u,d){u&&d&&(l[(0,r.camelCase)(u,o)]=d)}),l}return n.default=n,th=n,th}var o8=i8();const l8=Hu(o8),Up=rA("end"),ji=rA("start");function rA(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function nA(e){const t=ji(e),r=Up(e);if(t&&r)return{start:t,end:r}}function Oh(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?G_(e.position):"start"in e||"end"in e?G_(e):"line"in e||"column"in e?Yy(e):""}function Yy(e){return Y_(e&&e.line)+":"+Y_(e&&e.column)}function G_(e){return Yy(e&&e.start)+"-"+Yy(e&&e.end)}function Y_(e){return e&&typeof e=="number"?e:1}class Sa extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let a="",o={},l=!1;if(r&&("line"in r&&"column"in r?o={place:r}:"start"in r&&"end"in r?o={place:r}:"type"in r?o={ancestors:[r],place:r.position}:o={...r}),typeof t=="string"?a=t:!o.cause&&t&&(l=!0,a=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof n=="string"){const d=n.indexOf(":");d===-1?o.ruleId=n:(o.source=n.slice(0,d),o.ruleId=n.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const u=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=u?u.line:void 0,this.name=Oh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=l&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Sa.prototype.file="";Sa.prototype.name="";Sa.prototype.reason="";Sa.prototype.message="";Sa.prototype.stack="";Sa.prototype.column=void 0;Sa.prototype.line=void 0;Sa.prototype.ancestors=void 0;Sa.prototype.cause=void 0;Sa.prototype.fatal=void 0;Sa.prototype.place=void 0;Sa.prototype.ruleId=void 0;Sa.prototype.source=void 0;const vv={}.hasOwnProperty,c8=new Map,u8=/[A-Z]/g,d8=new Set(["table","tbody","thead","tfoot","tr"]),h8=new Set(["td","th"]),aA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function g8(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=k8(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=v8(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Vu:Fp,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=sA(a,e,void 0);return o&&typeof o!="string"?o:a.create(e,a.Fragment,{children:o||void 0},void 0)}function sA(e,t,r){if(t.type==="element")return f8(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return p8(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return x8(e,t,r);if(t.type==="mdxjsEsm")return m8(e,t);if(t.type==="root")return b8(e,t,r);if(t.type==="text")return y8(e,t)}function f8(e,t,r){const n=e.schema;let a=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(a=Vu,e.schema=a),e.ancestors.push(t);const o=oA(e,t.tagName,!1),l=w8(e,t);let u=wv(e,t);return d8.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!VB(d):!0})),iA(e,l,o,t),kv(l,u),e.ancestors.pop(),e.schema=n,e.create(t,o,l,r)}function p8(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Qh(e,t.position)}function m8(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Qh(e,t.position)}function x8(e,t,r){const n=e.schema;let a=n;t.name==="svg"&&n.space==="html"&&(a=Vu,e.schema=a),e.ancestors.push(t);const o=t.name===null?e.Fragment:oA(e,t.name,!0),l=E8(e,t),u=wv(e,t);return iA(e,l,o,t),kv(l,u),e.ancestors.pop(),e.schema=n,e.create(t,o,l,r)}function b8(e,t,r){const n={};return kv(n,wv(e,t)),e.create(t,e.Fragment,n,r)}function y8(e,t){return t.value}function iA(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function kv(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function v8(e,t,r){return n;function n(a,o,l,u){const h=Array.isArray(l.children)?r:t;return u?h(o,l,u):h(o,l)}}function k8(e,t){return r;function r(n,a,o,l){const u=Array.isArray(o.children),d=ji(n);return t(a,o,l,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function w8(e,t){const r={};let n,a;for(a in t.properties)if(a!=="children"&&vv.call(t.properties,a)){const o=_8(e,a,t.properties[a]);if(o){const[l,u]=o;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&h8.has(t.tagName)?n=u:r[l]=u}}if(n){const o=r.style||(r.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function E8(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const o=n.data.estree.body[0];o.type;const l=o.expression;l.type;const u=l.properties[0];u.type,Object.assign(r,e.evaluater.evaluateExpression(u.argument))}else Qh(e,t.position);else{const a=n.name;let o;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const u=n.value.data.estree.body[0];u.type,o=e.evaluater.evaluateExpression(u.expression)}else Qh(e,t.position);else o=n.value===null?!0:n.value;r[a]=o}return r}function wv(e,t){const r=[];let n=-1;const a=e.passKeys?new Map:c8;for(;++n<t.children.length;){const o=t.children[n];let l;if(e.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const h=a.get(d)||0;l=d+"-"+h,a.set(d,h+1)}}const u=sA(e,o,l);u!==void 0&&r.push(u)}return r}function _8(e,t,r){const n=yv(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?WN(r):tA(r)),n.property==="style"){let a=typeof r=="object"?r:S8(e,String(r));return e.stylePropertyNameCase==="css"&&(a=T8(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&n.space?ZB[n.property]||n.property:n.attribute,r]}}function S8(e,t){try{return l8(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,a=new Sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=aA+"#cannot-parse-style-attribute",a}}function oA(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let o=-1,l;for(;++o<a.length;){const u=D_(a[o])?{type:"Identifier",name:a[o]}:{type:"Literal",value:a[o]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(o&&u.type==="Literal"),optional:!1}:u}n=l}else n=D_(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const a=n.value;return vv.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(n);Qh(e)}function Qh(e,t){const r=new Sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=aA+"#cannot-handle-mdx-estrees-without-createevaluater",r}function T8(e){const t={};let r;for(r in e)vv.call(e,r)&&(t[C8(r)]=e[r]);return t}function C8(e){let t=e.replace(u8,N8);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function N8(e){return"-"+e.toLowerCase()}const Db={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},A8={};function Ev(e,t){const r=A8,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return lA(e,n,a)}function lA(e,t,r){if(L8(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return W_(e.children,t,r)}return Array.isArray(e)?W_(e,t,r):""}function W_(e,t,r){const n=[];let a=-1;for(;++a<e.length;)n[a]=lA(e[a],t,r);return n.join("")}function L8(e){return!!(e&&typeof e=="object")}const V_=document.createElement("i");function _v(e){const t="&"+e+";";V_.innerHTML=t;const r=V_.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function ms(e,t,r,n){const a=e.length;let o=0,l;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,n.length<1e4)l=Array.from(n),l.unshift(t,r),e.splice(...l);else for(r&&e.splice(t,r);o<n.length;)l=n.slice(o,o+1e4),l.unshift(t,0),e.splice(...l),o+=1e4,t+=1e4}function Ds(e,t){return e.length>0?(ms(e,e.length,0,t),e):t}const K_={}.hasOwnProperty;function cA(e){const t={};let r=-1;for(;++r<e.length;)j8(t,e[r]);return t}function j8(e,t){let r;for(r in t){const a=(K_.call(e,r)?e[r]:void 0)||(e[r]={}),o=t[r];let l;if(o)for(l in o){K_.call(a,l)||(a[l]=[]);const u=o[l];M8(a[l],Array.isArray(u)?u:u?[u]:[])}}}function M8(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);ms(e,0,0,n)}function uA(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function ni(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ra=ol(/[A-Za-z]/),ka=ol(/[\dA-Za-z]/),R8=ol(/[#-'*+\--9=?A-Z^-~]/);function H0(e){return e!==null&&(e<32||e===127)}const Wy=ol(/\d/),O8=ol(/[\dA-Fa-f]/),I8=ol(/[!-/:-@[-`{-~]/);function Pt(e){return e!==null&&e<-2}function sn(e){return e!==null&&(e<0||e===32)}function Er(e){return e===-2||e===-1||e===32}const $p=ol(new RegExp("\\p{P}|\\p{S}","u")),Ql=ol(/\s/);function ol(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Ku(e){const t=[];let r=-1,n=0,a=0;for(;++r<e.length;){const o=e.charCodeAt(r);let l="";if(o===37&&ka(e.charCodeAt(r+1))&&ka(e.charCodeAt(r+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(l=String.fromCharCode(o));else if(o>55295&&o<57344){const u=e.charCodeAt(r+1);o<56320&&u>56319&&u<57344?(l=String.fromCharCode(o,u),a=1):l=""}else l=String.fromCharCode(o);l&&(t.push(e.slice(n,r),encodeURIComponent(l)),n=r+a+1,l=""),a&&(r+=a,a=0)}return t.join("")+e.slice(n)}function Mr(e,t,r,n){const a=n?n-1:Number.POSITIVE_INFINITY;let o=0;return l;function l(d){return Er(d)?(e.enter(r),u(d)):t(d)}function u(d){return Er(d)&&o++<a?(e.consume(d),u):(e.exit(r),t(d))}}const D8={tokenize:P8};function P8(e){const t=e.attempt(this.parser.constructs.contentInitial,n,a);let r;return t;function n(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Mr(e,t,"linePrefix")}function a(u){return e.enter("paragraph"),o(u)}function o(u){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Pt(u)?(e.consume(u),e.exit("chunkText"),o):(e.consume(u),l)}}const B8={tokenize:F8},X_={tokenize:U8};function F8(e){const t=this,r=[];let n=0,a,o,l;return u;function u(A){if(n<r.length){const I=r[n];return t.containerState=I[1],e.attempt(I[0].continuation,d,h)(A)}return h(A)}function d(A){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&T();const I=t.events.length;let O=I,B;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){B=t.events[O][1].end;break}_(n);let F=I;for(;F<t.events.length;)t.events[F][1].end={...B},F++;return ms(t.events,O+1,0,t.events.slice(I)),t.events.length=F,h(A)}return u(A)}function h(A){if(n===r.length){if(!a)return x(A);if(a.currentConstruct&&a.currentConstruct.concrete)return y(A);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(X_,f,p)(A)}function f(A){return a&&T(),_(n),x(A)}function p(A){return t.parser.lazy[t.now().line]=n!==r.length,l=t.now().offset,y(A)}function x(A){return t.containerState={},e.attempt(X_,b,y)(A)}function b(A){return n++,r.push([t.currentConstruct,t.containerState]),x(A)}function y(A){if(A===null){a&&T(),_(0),e.consume(A);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),k(A)}function k(A){if(A===null){S(e.exit("chunkFlow"),!0),_(0),e.consume(A);return}return Pt(A)?(e.consume(A),S(e.exit("chunkFlow")),n=0,t.interrupt=void 0,u):(e.consume(A),k)}function S(A,I){const O=t.sliceStream(A);if(I&&O.push(null),A.previous=o,o&&(o.next=A),o=A,a.defineSkip(A.start),a.write(O),t.parser.lazy[A.start.line]){let B=a.events.length;for(;B--;)if(a.events[B][1].start.offset<l&&(!a.events[B][1].end||a.events[B][1].end.offset>l))return;const F=t.events.length;let ae=F,Z,z;for(;ae--;)if(t.events[ae][0]==="exit"&&t.events[ae][1].type==="chunkFlow"){if(Z){z=t.events[ae][1].end;break}Z=!0}for(_(n),B=F;B<t.events.length;)t.events[B][1].end={...z},B++;ms(t.events,ae+1,0,t.events.slice(F)),t.events.length=B}}function _(A){let I=r.length;for(;I-- >A;){const O=r[I];t.containerState=O[1],O[0].exit.call(t,e)}r.length=A}function T(){a.write([null]),o=void 0,a=void 0,t.containerState._closeFlow=void 0}}function U8(e,t,r){return Mr(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ju(e){if(e===null||sn(e)||Ql(e))return 1;if($p(e))return 2}function zp(e,t,r){const n=[];let a=-1;for(;++a<e.length;){const o=e[a].resolveAll;o&&!n.includes(o)&&(t=o(t,r),n.push(o))}return t}const Vy={name:"attention",resolveAll:$8,tokenize:z8};function $8(e,t){let r=-1,n,a,o,l,u,d,h,f;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const p={...e[n][1].end},x={...e[r][1].start};Q_(p,-d),Q_(x,d),l={type:d>1?"strongSequence":"emphasisSequence",start:p,end:{...e[n][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:x},o={type:d>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},a={type:d>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[n][1].end={...l.start},e[r][1].start={...u.end},h=[],e[n][1].end.offset-e[n][1].start.offset&&(h=Ds(h,[["enter",e[n][1],t],["exit",e[n][1],t]])),h=Ds(h,[["enter",a,t],["enter",l,t],["exit",l,t],["enter",o,t]]),h=Ds(h,zp(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),h=Ds(h,[["exit",o,t],["enter",u,t],["exit",u,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(f=2,h=Ds(h,[["enter",e[r][1],t],["exit",e[r][1],t]])):f=0,ms(e,n-1,r-n+3,h),r=n+h.length-f-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function z8(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,a=ju(n);let o;return l;function l(d){return o=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===o)return e.consume(d),u;const h=e.exit("attentionSequence"),f=ju(d),p=!f||f===2&&a||r.includes(d),x=!a||a===2&&f||r.includes(n);return h._open=!!(o===42?p:p&&(a||!x)),h._close=!!(o===42?x:x&&(f||!p)),t(d)}}function Q_(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const H8={name:"autolink",tokenize:q8};function q8(e,t,r){let n=0;return a;function a(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(b){return Ra(b)?(e.consume(b),l):b===64?r(b):h(b)}function l(b){return b===43||b===45||b===46||ka(b)?(n=1,u(b)):h(b)}function u(b){return b===58?(e.consume(b),n=0,d):(b===43||b===45||b===46||ka(b))&&n++<32?(e.consume(b),u):(n=0,h(b))}function d(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||H0(b)?r(b):(e.consume(b),d)}function h(b){return b===64?(e.consume(b),f):R8(b)?(e.consume(b),h):r(b)}function f(b){return ka(b)?p(b):r(b)}function p(b){return b===46?(e.consume(b),n=0,f):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):x(b)}function x(b){if((b===45||ka(b))&&n++<63){const y=b===45?x:p;return e.consume(b),y}return r(b)}}const vg={partial:!0,tokenize:G8};function G8(e,t,r){return n;function n(o){return Er(o)?Mr(e,a,"linePrefix")(o):a(o)}function a(o){return o===null||Pt(o)?t(o):r(o)}}const dA={continuation:{tokenize:W8},exit:V8,name:"blockQuote",tokenize:Y8};function Y8(e,t,r){const n=this;return a;function a(l){if(l===62){const u=n.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),o}return r(l)}function o(l){return Er(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function W8(e,t,r){const n=this;return a;function a(l){return Er(l)?Mr(e,o,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):o(l)}function o(l){return e.attempt(dA,t,r)(l)}}function V8(e){e.exit("blockQuote")}const hA={name:"characterEscape",tokenize:K8};function K8(e,t,r){return n;function n(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),a}function a(o){return I8(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(o)}}const gA={name:"characterReference",tokenize:X8};function X8(e,t,r){const n=this;let a=0,o,l;return u;function u(p){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),d}function d(p){return p===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(p),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),o=31,l=ka,f(p))}function h(p){return p===88||p===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(p),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,l=O8,f):(e.enter("characterReferenceValue"),o=7,l=Wy,f(p))}function f(p){if(p===59&&a){const x=e.exit("characterReferenceValue");return l===ka&&!_v(n.sliceSerialize(x))?r(p):(e.enter("characterReferenceMarker"),e.consume(p),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(p)&&a++<o?(e.consume(p),f):r(p)}}const Z_={partial:!0,tokenize:Z8},J_={concrete:!0,name:"codeFenced",tokenize:Q8};function Q8(e,t,r){const n=this,a={partial:!0,tokenize:O};let o=0,l=0,u;return d;function d(B){return h(B)}function h(B){const F=n.events[n.events.length-1];return o=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,u=B,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(B)}function f(B){return B===u?(l++,e.consume(B),f):l<3?r(B):(e.exit("codeFencedFenceSequence"),Er(B)?Mr(e,p,"whitespace")(B):p(B))}function p(B){return B===null||Pt(B)?(e.exit("codeFencedFence"),n.interrupt?t(B):e.check(Z_,k,I)(B)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(B))}function x(B){return B===null||Pt(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),p(B)):Er(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Mr(e,b,"whitespace")(B)):B===96&&B===u?r(B):(e.consume(B),x)}function b(B){return B===null||Pt(B)?p(B):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(B))}function y(B){return B===null||Pt(B)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),p(B)):B===96&&B===u?r(B):(e.consume(B),y)}function k(B){return e.attempt(a,I,S)(B)}function S(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),_}function _(B){return o>0&&Er(B)?Mr(e,T,"linePrefix",o+1)(B):T(B)}function T(B){return B===null||Pt(B)?e.check(Z_,k,I)(B):(e.enter("codeFlowValue"),A(B))}function A(B){return B===null||Pt(B)?(e.exit("codeFlowValue"),T(B)):(e.consume(B),A)}function I(B){return e.exit("codeFenced"),t(B)}function O(B,F,ae){let Z=0;return z;function z(q){return B.enter("lineEnding"),B.consume(q),B.exit("lineEnding"),ee}function ee(q){return B.enter("codeFencedFence"),Er(q)?Mr(B,W,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):W(q)}function W(q){return q===u?(B.enter("codeFencedFenceSequence"),$(q)):ae(q)}function $(q){return q===u?(Z++,B.consume(q),$):Z>=l?(B.exit("codeFencedFenceSequence"),Er(q)?Mr(B,L,"whitespace")(q):L(q)):ae(q)}function L(q){return q===null||Pt(q)?(B.exit("codeFencedFence"),F(q)):ae(q)}}}function Z8(e,t,r){const n=this;return a;function a(l){return l===null?r(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o)}function o(l){return n.parser.lazy[n.now().line]?r(l):t(l)}}const Pb={name:"codeIndented",tokenize:e9},J8={partial:!0,tokenize:t9};function e9(e,t,r){const n=this;return a;function a(h){return e.enter("codeIndented"),Mr(e,o,"linePrefix",5)(h)}function o(h){const f=n.events[n.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?l(h):r(h)}function l(h){return h===null?d(h):Pt(h)?e.attempt(J8,l,d)(h):(e.enter("codeFlowValue"),u(h))}function u(h){return h===null||Pt(h)?(e.exit("codeFlowValue"),l(h)):(e.consume(h),u)}function d(h){return e.exit("codeIndented"),t(h)}}function t9(e,t,r){const n=this;return a;function a(l){return n.parser.lazy[n.now().line]?r(l):Pt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):Mr(e,o,"linePrefix",5)(l)}function o(l){const u=n.events[n.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):Pt(l)?a(l):r(l)}}const r9={name:"codeText",previous:a9,resolve:n9,tokenize:s9};function n9(e){let t=e.length-4,r=3,n,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)a===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(a=n):(n===t||e[n][1].type==="lineEnding")&&(e[a][1].type="codeTextData",n!==a+2&&(e[a][1].end=e[n-1][1].end,e.splice(a+2,n-a-2),t-=n-a-2,n=a+2),a=void 0);return e}function a9(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function s9(e,t,r){let n=0,a,o;return l;function l(p){return e.enter("codeText"),e.enter("codeTextSequence"),u(p)}function u(p){return p===96?(e.consume(p),n++,u):(e.exit("codeTextSequence"),d(p))}function d(p){return p===null?r(p):p===32?(e.enter("space"),e.consume(p),e.exit("space"),d):p===96?(o=e.enter("codeTextSequence"),a=0,f(p)):Pt(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(p))}function h(p){return p===null||p===32||p===96||Pt(p)?(e.exit("codeTextData"),d(p)):(e.consume(p),h)}function f(p){return p===96?(e.consume(p),a++,f):a===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(p)):(o.type="codeTextData",h(p))}}class i9{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const a=r||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return n&&rh(this.left,n),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),rh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),rh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);rh(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);rh(this.left,r.reverse())}}}function rh(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function fA(e){const t={};let r=-1,n,a,o,l,u,d,h;const f=new i9(e);for(;++r<f.length;){for(;r in t;)r=t[r];if(n=f.get(r),r&&n[1].type==="chunkFlow"&&f.get(r-1)[1].type==="listItemPrefix"&&(d=n[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,o9(f,r)),r=t[r],h=!0);else if(n[1]._container){for(o=r,a=void 0;o--;)if(l=f.get(o),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),l[1].type="lineEnding",a=o);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;a&&(n[1].end={...f.get(a)[1].start},u=f.slice(a,r),u.unshift(n),f.splice(a,r-a+1,u))}}return ms(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!h}function o9(e,t){const r=e.get(t)[1],n=e.get(t)[2];let a=t-1;const o=[];let l=r._tokenizer;l||(l=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,d=[],h={};let f,p,x=-1,b=r,y=0,k=0;const S=[k];for(;b;){for(;e.get(++a)[1]!==b;);o.push(a),b._tokenizer||(f=n.sliceStream(b),b.next||f.push(null),p&&l.defineSkip(b.start),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(f),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),p=b,b=b.next}for(b=r;++x<u.length;)u[x][0]==="exit"&&u[x-1][0]==="enter"&&u[x][1].type===u[x-1][1].type&&u[x][1].start.line!==u[x][1].end.line&&(k=x+1,S.push(k),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(l.events=[],b?(b._tokenizer=void 0,b.previous=void 0):S.pop(),x=S.length;x--;){const _=u.slice(S[x],S[x+1]),T=o.pop();d.push([T,T+_.length-1]),e.splice(T,2,_)}for(d.reverse(),x=-1;++x<d.length;)h[y+d[x][0]]=y+d[x][1],y+=d[x][1]-d[x][0]-1;return h}const l9={resolve:u9,tokenize:d9},c9={partial:!0,tokenize:h9};function u9(e){return fA(e),e}function d9(e,t){let r;return n;function n(u){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(u)}function a(u){return u===null?o(u):Pt(u)?e.check(c9,l,o)(u):(e.consume(u),a)}function o(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function h9(e,t,r){const n=this;return a;function a(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Mr(e,o,"linePrefix")}function o(l){if(l===null||Pt(l))return r(l);const u=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(n.parser.constructs.flow,r,t)(l)}}function pA(e,t,r,n,a,o,l,u,d){const h=d||Number.POSITIVE_INFINITY;let f=0;return p;function p(_){return _===60?(e.enter(n),e.enter(a),e.enter(o),e.consume(_),e.exit(o),x):_===null||_===32||_===41||H0(_)?r(_):(e.enter(n),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),k(_))}function x(_){return _===62?(e.enter(o),e.consume(_),e.exit(o),e.exit(a),e.exit(n),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===62?(e.exit("chunkString"),e.exit(u),x(_)):_===null||_===60||Pt(_)?r(_):(e.consume(_),_===92?y:b)}function y(_){return _===60||_===62||_===92?(e.consume(_),b):b(_)}function k(_){return!f&&(_===null||_===41||sn(_))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(n),t(_)):f<h&&_===40?(e.consume(_),f++,k):_===41?(e.consume(_),f--,k):_===null||_===32||_===40||H0(_)?r(_):(e.consume(_),_===92?S:k)}function S(_){return _===40||_===41||_===92?(e.consume(_),k):k(_)}}function mA(e,t,r,n,a,o){const l=this;let u=0,d;return h;function h(b){return e.enter(n),e.enter(a),e.consume(b),e.exit(a),e.enter(o),f}function f(b){return u>999||b===null||b===91||b===93&&!d||b===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?r(b):b===93?(e.exit(o),e.enter(a),e.consume(b),e.exit(a),e.exit(n),t):Pt(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===null||b===91||b===93||Pt(b)||u++>999?(e.exit("chunkString"),f(b)):(e.consume(b),d||(d=!Er(b)),b===92?x:p)}function x(b){return b===91||b===92||b===93?(e.consume(b),u++,p):p(b)}}function xA(e,t,r,n,a,o){let l;return u;function u(x){return x===34||x===39||x===40?(e.enter(n),e.enter(a),e.consume(x),e.exit(a),l=x===40?41:x,d):r(x)}function d(x){return x===l?(e.enter(a),e.consume(x),e.exit(a),e.exit(n),t):(e.enter(o),h(x))}function h(x){return x===l?(e.exit(o),d(l)):x===null?r(x):Pt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),Mr(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===l||x===null||Pt(x)?(e.exit("chunkString"),h(x)):(e.consume(x),x===92?p:f)}function p(x){return x===l||x===92?(e.consume(x),f):f(x)}}function Ih(e,t){let r;return n;function n(a){return Pt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,n):Er(a)?Mr(e,n,r?"linePrefix":"lineSuffix")(a):t(a)}}const g9={name:"definition",tokenize:p9},f9={partial:!0,tokenize:m9};function p9(e,t,r){const n=this;let a;return o;function o(b){return e.enter("definition"),l(b)}function l(b){return mA.call(n,e,u,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function u(b){return a=ni(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),d):r(b)}function d(b){return sn(b)?Ih(e,h)(b):h(b)}function h(b){return pA(e,f,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function f(b){return e.attempt(f9,p,p)(b)}function p(b){return Er(b)?Mr(e,x,"whitespace")(b):x(b)}function x(b){return b===null||Pt(b)?(e.exit("definition"),n.parser.defined.push(a),t(b)):r(b)}}function m9(e,t,r){return n;function n(u){return sn(u)?Ih(e,a)(u):r(u)}function a(u){return xA(e,o,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function o(u){return Er(u)?Mr(e,l,"whitespace")(u):l(u)}function l(u){return u===null||Pt(u)?t(u):r(u)}}const x9={name:"hardBreakEscape",tokenize:b9};function b9(e,t,r){return n;function n(o){return e.enter("hardBreakEscape"),e.consume(o),a}function a(o){return Pt(o)?(e.exit("hardBreakEscape"),t(o)):r(o)}}const y9={name:"headingAtx",resolve:v9,tokenize:k9};function v9(e,t){let r=e.length-2,n=3,a,o;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(a={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},o={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},ms(e,n,r-n+1,[["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t]])),e}function k9(e,t,r){let n=0;return a;function a(f){return e.enter("atxHeading"),o(f)}function o(f){return e.enter("atxHeadingSequence"),l(f)}function l(f){return f===35&&n++<6?(e.consume(f),l):f===null||sn(f)?(e.exit("atxHeadingSequence"),u(f)):r(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),d(f)):f===null||Pt(f)?(e.exit("atxHeading"),t(f)):Er(f)?Mr(e,u,"whitespace")(f):(e.enter("atxHeadingText"),h(f))}function d(f){return f===35?(e.consume(f),d):(e.exit("atxHeadingSequence"),u(f))}function h(f){return f===null||f===35||sn(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),h)}}const w9=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eS=["pre","script","style","textarea"],E9={concrete:!0,name:"htmlFlow",resolveTo:T9,tokenize:C9},_9={partial:!0,tokenize:A9},S9={partial:!0,tokenize:N9};function T9(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function C9(e,t,r){const n=this;let a,o,l,u,d;return h;function h(R){return f(R)}function f(R){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(R),p}function p(R){return R===33?(e.consume(R),x):R===47?(e.consume(R),o=!0,k):R===63?(e.consume(R),a=3,n.interrupt?t:U):Ra(R)?(e.consume(R),l=String.fromCharCode(R),S):r(R)}function x(R){return R===45?(e.consume(R),a=2,b):R===91?(e.consume(R),a=5,u=0,y):Ra(R)?(e.consume(R),a=4,n.interrupt?t:U):r(R)}function b(R){return R===45?(e.consume(R),n.interrupt?t:U):r(R)}function y(R){const H="CDATA[";return R===H.charCodeAt(u++)?(e.consume(R),u===H.length?n.interrupt?t:W:y):r(R)}function k(R){return Ra(R)?(e.consume(R),l=String.fromCharCode(R),S):r(R)}function S(R){if(R===null||R===47||R===62||sn(R)){const H=R===47,ne=l.toLowerCase();return!H&&!o&&eS.includes(ne)?(a=1,n.interrupt?t(R):W(R)):w9.includes(l.toLowerCase())?(a=6,H?(e.consume(R),_):n.interrupt?t(R):W(R)):(a=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(R):o?T(R):A(R))}return R===45||ka(R)?(e.consume(R),l+=String.fromCharCode(R),S):r(R)}function _(R){return R===62?(e.consume(R),n.interrupt?t:W):r(R)}function T(R){return Er(R)?(e.consume(R),T):z(R)}function A(R){return R===47?(e.consume(R),z):R===58||R===95||Ra(R)?(e.consume(R),I):Er(R)?(e.consume(R),A):z(R)}function I(R){return R===45||R===46||R===58||R===95||ka(R)?(e.consume(R),I):O(R)}function O(R){return R===61?(e.consume(R),B):Er(R)?(e.consume(R),O):A(R)}function B(R){return R===null||R===60||R===61||R===62||R===96?r(R):R===34||R===39?(e.consume(R),d=R,F):Er(R)?(e.consume(R),B):ae(R)}function F(R){return R===d?(e.consume(R),d=null,Z):R===null||Pt(R)?r(R):(e.consume(R),F)}function ae(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||sn(R)?O(R):(e.consume(R),ae)}function Z(R){return R===47||R===62||Er(R)?A(R):r(R)}function z(R){return R===62?(e.consume(R),ee):r(R)}function ee(R){return R===null||Pt(R)?W(R):Er(R)?(e.consume(R),ee):r(R)}function W(R){return R===45&&a===2?(e.consume(R),D):R===60&&a===1?(e.consume(R),X):R===62&&a===4?(e.consume(R),M):R===63&&a===3?(e.consume(R),U):R===93&&a===5?(e.consume(R),xe):Pt(R)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(_9,Y,$)(R)):R===null||Pt(R)?(e.exit("htmlFlowData"),$(R)):(e.consume(R),W)}function $(R){return e.check(S9,L,Y)(R)}function L(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),q}function q(R){return R===null||Pt(R)?$(R):(e.enter("htmlFlowData"),W(R))}function D(R){return R===45?(e.consume(R),U):W(R)}function X(R){return R===47?(e.consume(R),l="",K):W(R)}function K(R){if(R===62){const H=l.toLowerCase();return eS.includes(H)?(e.consume(R),M):W(R)}return Ra(R)&&l.length<8?(e.consume(R),l+=String.fromCharCode(R),K):W(R)}function xe(R){return R===93?(e.consume(R),U):W(R)}function U(R){return R===62?(e.consume(R),M):R===45&&a===2?(e.consume(R),U):W(R)}function M(R){return R===null||Pt(R)?(e.exit("htmlFlowData"),Y(R)):(e.consume(R),M)}function Y(R){return e.exit("htmlFlow"),t(R)}}function N9(e,t,r){const n=this;return a;function a(l){return Pt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):r(l)}function o(l){return n.parser.lazy[n.now().line]?r(l):t(l)}}function A9(e,t,r){return n;function n(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(vg,t,r)}}const L9={name:"htmlText",tokenize:j9};function j9(e,t,r){const n=this;let a,o,l;return u;function u(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),d}function d(U){return U===33?(e.consume(U),h):U===47?(e.consume(U),O):U===63?(e.consume(U),A):Ra(U)?(e.consume(U),ae):r(U)}function h(U){return U===45?(e.consume(U),f):U===91?(e.consume(U),o=0,y):Ra(U)?(e.consume(U),T):r(U)}function f(U){return U===45?(e.consume(U),b):r(U)}function p(U){return U===null?r(U):U===45?(e.consume(U),x):Pt(U)?(l=p,X(U)):(e.consume(U),p)}function x(U){return U===45?(e.consume(U),b):p(U)}function b(U){return U===62?D(U):U===45?x(U):p(U)}function y(U){const M="CDATA[";return U===M.charCodeAt(o++)?(e.consume(U),o===M.length?k:y):r(U)}function k(U){return U===null?r(U):U===93?(e.consume(U),S):Pt(U)?(l=k,X(U)):(e.consume(U),k)}function S(U){return U===93?(e.consume(U),_):k(U)}function _(U){return U===62?D(U):U===93?(e.consume(U),_):k(U)}function T(U){return U===null||U===62?D(U):Pt(U)?(l=T,X(U)):(e.consume(U),T)}function A(U){return U===null?r(U):U===63?(e.consume(U),I):Pt(U)?(l=A,X(U)):(e.consume(U),A)}function I(U){return U===62?D(U):A(U)}function O(U){return Ra(U)?(e.consume(U),B):r(U)}function B(U){return U===45||ka(U)?(e.consume(U),B):F(U)}function F(U){return Pt(U)?(l=F,X(U)):Er(U)?(e.consume(U),F):D(U)}function ae(U){return U===45||ka(U)?(e.consume(U),ae):U===47||U===62||sn(U)?Z(U):r(U)}function Z(U){return U===47?(e.consume(U),D):U===58||U===95||Ra(U)?(e.consume(U),z):Pt(U)?(l=Z,X(U)):Er(U)?(e.consume(U),Z):D(U)}function z(U){return U===45||U===46||U===58||U===95||ka(U)?(e.consume(U),z):ee(U)}function ee(U){return U===61?(e.consume(U),W):Pt(U)?(l=ee,X(U)):Er(U)?(e.consume(U),ee):Z(U)}function W(U){return U===null||U===60||U===61||U===62||U===96?r(U):U===34||U===39?(e.consume(U),a=U,$):Pt(U)?(l=W,X(U)):Er(U)?(e.consume(U),W):(e.consume(U),L)}function $(U){return U===a?(e.consume(U),a=void 0,q):U===null?r(U):Pt(U)?(l=$,X(U)):(e.consume(U),$)}function L(U){return U===null||U===34||U===39||U===60||U===61||U===96?r(U):U===47||U===62||sn(U)?Z(U):(e.consume(U),L)}function q(U){return U===47||U===62||sn(U)?Z(U):r(U)}function D(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):r(U)}function X(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),K}function K(U){return Er(U)?Mr(e,xe,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):xe(U)}function xe(U){return e.enter("htmlTextData"),l(U)}}const Sv={name:"labelEnd",resolveAll:I9,resolveTo:D9,tokenize:P9},M9={tokenize:B9},R9={tokenize:F9},O9={tokenize:U9};function I9(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const a=n.type==="labelImage"?4:2;n.type="data",t+=a}}return e.length!==r.length&&ms(e,0,e.length,r),e}function D9(e,t){let r=e.length,n=0,a,o,l,u;for(;r--;)if(a=e[r][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=r,a.type!=="labelLink")){n=2;break}}else a.type==="labelEnd"&&(l=r);const d={type:e[o][1].type==="labelLink"?"link":"image",start:{...e[o][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[o][1].start},end:{...e[l][1].end}},f={type:"labelText",start:{...e[o+n+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",d,t],["enter",h,t]],u=Ds(u,e.slice(o+1,o+n+3)),u=Ds(u,[["enter",f,t]]),u=Ds(u,zp(t.parser.constructs.insideSpan.null,e.slice(o+n+4,l-3),t)),u=Ds(u,[["exit",f,t],e[l-2],e[l-1],["exit",h,t]]),u=Ds(u,e.slice(l+1)),u=Ds(u,[["exit",d,t]]),ms(e,o,e.length,u),e}function P9(e,t,r){const n=this;let a=n.events.length,o,l;for(;a--;)if((n.events[a][1].type==="labelImage"||n.events[a][1].type==="labelLink")&&!n.events[a][1]._balanced){o=n.events[a][1];break}return u;function u(x){return o?o._inactive?p(x):(l=n.parser.defined.includes(ni(n.sliceSerialize({start:o.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),d):r(x)}function d(x){return x===40?e.attempt(M9,f,l?f:p)(x):x===91?e.attempt(R9,f,l?h:p)(x):l?f(x):p(x)}function h(x){return e.attempt(O9,f,p)(x)}function f(x){return t(x)}function p(x){return o._balanced=!0,r(x)}}function B9(e,t,r){return n;function n(p){return e.enter("resource"),e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),a}function a(p){return sn(p)?Ih(e,o)(p):o(p)}function o(p){return p===41?f(p):pA(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function l(p){return sn(p)?Ih(e,d)(p):f(p)}function u(p){return r(p)}function d(p){return p===34||p===39||p===40?xA(e,h,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function h(p){return sn(p)?Ih(e,f)(p):f(p)}function f(p){return p===41?(e.enter("resourceMarker"),e.consume(p),e.exit("resourceMarker"),e.exit("resource"),t):r(p)}}function F9(e,t,r){const n=this;return a;function a(u){return mA.call(n,e,o,l,"reference","referenceMarker","referenceString")(u)}function o(u){return n.parser.defined.includes(ni(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(u):r(u)}function l(u){return r(u)}}function U9(e,t,r){return n;function n(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),a}function a(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):r(o)}}const $9={name:"labelStartImage",resolveAll:Sv.resolveAll,tokenize:z9};function z9(e,t,r){const n=this;return a;function a(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),o}function o(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):r(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(u):t(u)}}const H9={name:"labelStartLink",resolveAll:Sv.resolveAll,tokenize:q9};function q9(e,t,r){const n=this;return a;function a(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),o}function o(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const Bb={name:"lineEnding",tokenize:G9};function G9(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Mr(e,t,"linePrefix")}}const w0={name:"thematicBreak",tokenize:Y9};function Y9(e,t,r){let n=0,a;return o;function o(h){return e.enter("thematicBreak"),l(h)}function l(h){return a=h,u(h)}function u(h){return h===a?(e.enter("thematicBreakSequence"),d(h)):n>=3&&(h===null||Pt(h))?(e.exit("thematicBreak"),t(h)):r(h)}function d(h){return h===a?(e.consume(h),n++,d):(e.exit("thematicBreakSequence"),Er(h)?Mr(e,u,"whitespace")(h):u(h))}}const Xa={continuation:{tokenize:X9},exit:Z9,name:"list",tokenize:K9},W9={partial:!0,tokenize:J9},V9={partial:!0,tokenize:Q9};function K9(e,t,r){const n=this,a=n.events[n.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,l=0;return u;function u(b){const y=n.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!n.containerState.marker||b===n.containerState.marker:Wy(b)){if(n.containerState.type||(n.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(w0,r,h)(b):h(b);if(!n.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(b)}return r(b)}function d(b){return Wy(b)&&++l<10?(e.consume(b),d):(!n.interrupt||l<2)&&(n.containerState.marker?b===n.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),h(b)):r(b)}function h(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||b,e.check(vg,n.interrupt?r:f,e.attempt(W9,x,p))}function f(b){return n.containerState.initialBlankLine=!0,o++,x(b)}function p(b){return Er(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),x):r(b)}function x(b){return n.containerState.size=o+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function X9(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(vg,a,o);function a(u){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Mr(e,t,"listItemIndent",n.containerState.size+1)(u)}function o(u){return n.containerState.furtherBlankLines||!Er(u)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,l(u)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(V9,t,l)(u))}function l(u){return n.containerState._closeFlow=!0,n.interrupt=void 0,Mr(e,e.attempt(Xa,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function Q9(e,t,r){const n=this;return Mr(e,a,"listItemIndent",n.containerState.size+1);function a(o){const l=n.events[n.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===n.containerState.size?t(o):r(o)}}function Z9(e){e.exit(this.containerState.type)}function J9(e,t,r){const n=this;return Mr(e,a,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const l=n.events[n.events.length-1];return!Er(o)&&l&&l[1].type==="listItemPrefixWhitespace"?t(o):r(o)}}const tS={name:"setextUnderline",resolveTo:e7,tokenize:t7};function e7(e,t){let r=e.length,n,a,o;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!o&&e[r][1].type==="definition"&&(o=r);const l={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",o?(e.splice(a,0,["enter",l,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end={...e[o][1].end}):e[n][1]=l,e.push(["exit",l,t]),e}function t7(e,t,r){const n=this;let a;return o;function o(h){let f=n.events.length,p;for(;f--;)if(n.events[f][1].type!=="lineEnding"&&n.events[f][1].type!=="linePrefix"&&n.events[f][1].type!=="content"){p=n.events[f][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||p)?(e.enter("setextHeadingLine"),a=h,l(h)):r(h)}function l(h){return e.enter("setextHeadingLineSequence"),u(h)}function u(h){return h===a?(e.consume(h),u):(e.exit("setextHeadingLineSequence"),Er(h)?Mr(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||Pt(h)?(e.exit("setextHeadingLine"),t(h)):r(h)}}const r7={tokenize:n7};function n7(e){const t=this,r=e.attempt(vg,n,e.attempt(this.parser.constructs.flowInitial,a,Mr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(l9,a)),"linePrefix")));return r;function n(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const a7={resolveAll:yA()},s7=bA("string"),i7=bA("text");function bA(e){return{resolveAll:yA(e==="text"?o7:void 0),tokenize:t};function t(r){const n=this,a=this.parser.constructs[e],o=r.attempt(a,l,u);return l;function l(f){return h(f)?o(f):u(f)}function u(f){if(f===null){r.consume(f);return}return r.enter("data"),r.consume(f),d}function d(f){return h(f)?(r.exit("data"),o(f)):(r.consume(f),d)}function h(f){if(f===null)return!0;const p=a[f];let x=-1;if(p)for(;++x<p.length;){const b=p[x];if(!b.previous||b.previous.call(n,n.previous))return!0}return!1}}}function yA(e){return t;function t(r,n){let a=-1,o;for(;++a<=r.length;)o===void 0?r[a]&&r[a][1].type==="data"&&(o=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==o+2&&(r[o][1].end=r[a-1][1].end,r.splice(o+2,a-o-2),a=o+2),o=void 0);return e?e(r,n):r}}function o7(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],a=t.sliceStream(n);let o=a.length,l=-1,u=0,d;for(;o--;){const h=a[o];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(h===-2)d=!0,u++;else if(h!==-1){o++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(u=0),u){const h={type:r===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?l:n.start._bufferIndex+l,_index:n.start._index+o,line:n.end.line,column:n.end.column-u,offset:n.end.offset-u},end:{...n.end}};n.end={...h.start},n.start.offset===n.end.offset?Object.assign(n,h):(e.splice(r,0,["enter",h,t],["exit",h,t]),r+=2)}r++}return e}const l7={42:Xa,43:Xa,45:Xa,48:Xa,49:Xa,50:Xa,51:Xa,52:Xa,53:Xa,54:Xa,55:Xa,56:Xa,57:Xa,62:dA},c7={91:g9},u7={[-2]:Pb,[-1]:Pb,32:Pb},d7={35:y9,42:w0,45:[tS,w0],60:E9,61:tS,95:w0,96:J_,126:J_},h7={38:gA,92:hA},g7={[-5]:Bb,[-4]:Bb,[-3]:Bb,33:$9,38:gA,42:Vy,60:[H8,L9],91:H9,92:[x9,hA],93:Sv,95:Vy,96:r9},f7={null:[Vy,a7]},p7={null:[42,95]},m7={null:[]},x7=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:p7,contentInitial:c7,disable:m7,document:l7,flow:d7,flowInitial:u7,insideSpan:f7,string:h7,text:g7},Symbol.toStringTag,{value:"Module"}));function b7(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},o=[];let l=[],u=[];const d={attempt:F(O),check:F(B),consume:T,enter:A,exit:I,interrupt:F(B,{interrupt:!0})},h={code:null,containerState:{},defineSkip:k,events:[],now:y,parser:e,previous:null,sliceSerialize:x,sliceStream:b,write:p};let f=t.tokenize.call(h,d);return t.resolveAll&&o.push(t),h;function p(ee){return l=Ds(l,ee),S(),l[l.length-1]!==null?[]:(ae(t,0),h.events=zp(o,h.events,h),h.events)}function x(ee,W){return v7(b(ee),W)}function b(ee){return y7(l,ee)}function y(){const{_bufferIndex:ee,_index:W,line:$,column:L,offset:q}=n;return{_bufferIndex:ee,_index:W,line:$,column:L,offset:q}}function k(ee){a[ee.line]=ee.column,z()}function S(){let ee;for(;n._index<l.length;){const W=l[n._index];if(typeof W=="string")for(ee=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===ee&&n._bufferIndex<W.length;)_(W.charCodeAt(n._bufferIndex));else _(W)}}function _(ee){f=f(ee)}function T(ee){Pt(ee)?(n.line++,n.column=1,n.offset+=ee===-3?2:1,z()):ee!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===l[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=ee}function A(ee,W){const $=W||{};return $.type=ee,$.start=y(),h.events.push(["enter",$,h]),u.push($),$}function I(ee){const W=u.pop();return W.end=y(),h.events.push(["exit",W,h]),W}function O(ee,W){ae(ee,W.from)}function B(ee,W){W.restore()}function F(ee,W){return $;function $(L,q,D){let X,K,xe,U;return Array.isArray(L)?Y(L):"tokenize"in L?Y([L]):M(L);function M(re){return fe;function fe(le){const ve=le!==null&&re[le],ce=le!==null&&re.null,ke=[...Array.isArray(ve)?ve:ve?[ve]:[],...Array.isArray(ce)?ce:ce?[ce]:[]];return Y(ke)(le)}}function Y(re){return X=re,K=0,re.length===0?D:R(re[K])}function R(re){return fe;function fe(le){return U=Z(),xe=re,re.partial||(h.currentConstruct=re),re.name&&h.parser.constructs.disable.null.includes(re.name)?ne():re.tokenize.call(W?Object.assign(Object.create(h),W):h,d,H,ne)(le)}}function H(re){return ee(xe,U),q}function ne(re){return U.restore(),++K<X.length?R(X[K]):D}}}function ae(ee,W){ee.resolveAll&&!o.includes(ee)&&o.push(ee),ee.resolve&&ms(h.events,W,h.events.length-W,ee.resolve(h.events.slice(W),h)),ee.resolveTo&&(h.events=ee.resolveTo(h.events,h))}function Z(){const ee=y(),W=h.previous,$=h.currentConstruct,L=h.events.length,q=Array.from(u);return{from:L,restore:D};function D(){n=ee,h.previous=W,h.currentConstruct=$,h.events.length=L,u=q,z()}}function z(){n.line in a&&n.column<2&&(n.column=a[n.line],n.offset+=a[n.line]-1)}}function y7(e,t){const r=t.start._index,n=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;let l;if(r===a)l=[e[r].slice(n,o)];else{if(l=e.slice(r,a),n>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(n):l.shift()}o>0&&l.push(e[a].slice(0,o))}return l}function v7(e,t){let r=-1;const n=[];let a;for(;++r<e.length;){const o=e[r];let l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&a)continue;l=" ";break}default:l=String.fromCharCode(o)}a=o===-2,n.push(l)}return n.join("")}function k7(e){const n={constructs:cA([x7,...(e||{}).extensions||[]]),content:a(D8),defined:[],document:a(B8),flow:a(r7),lazy:{},string:a(s7),text:a(i7)};return n;function a(o){return l;function l(u){return b7(n,o,u)}}}function w7(e){for(;!fA(e););return e}const rS=/[\0\t\n\r]/g;function E7(){let e=1,t="",r=!0,n;return a;function a(o,l,u){const d=[];let h,f,p,x,b;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(l||void 0).decode(o)),p=0,t="",r&&(o.charCodeAt(0)===65279&&p++,r=void 0);p<o.length;){if(rS.lastIndex=p,h=rS.exec(o),x=h&&h.index!==void 0?h.index:o.length,b=o.charCodeAt(x),!h){t=o.slice(p);break}if(b===10&&p===x&&n)d.push(-3),n=void 0;else switch(n&&(d.push(-5),n=void 0),p<x&&(d.push(o.slice(p,x)),e+=x-p),b){case 0:{d.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,d.push(-2);e++<f;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:n=!0,e=1}p=x+1}return u&&(n&&d.push(-5),t&&d.push(t),d.push(null)),d}}const _7=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function S7(e){return e.replace(_7,T7)}function T7(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),o=a===120||a===88;return uA(r.slice(o?2:1),o?16:10)}return _v(r)||e}const vA={}.hasOwnProperty;function C7(e,t,r){return typeof t!="string"&&(r=t,t=void 0),N7(r)(w7(k7(r).document().write(E7()(e,t,!0))))}function N7(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Dt),autolinkProtocol:Z,autolinkEmail:Z,atxHeading:o(Sr),blockQuote:o(ce),characterEscape:Z,characterReference:Z,codeFenced:o(ke),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(ke,l),codeText:o(it,l),codeTextData:Z,data:Z,codeFlowValue:Z,definition:o(pt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(zt),hardBreakEscape:o(He),hardBreakTrailing:o(He),htmlFlow:o(Gt,l),htmlFlowData:Z,htmlText:o(Gt,l),htmlTextData:Z,image:o(rr),label:l,link:o(Dt),listItem:o(Zt),listItemValue:x,listOrdered:o(Ht,p),listUnordered:o(Ht),paragraph:o(hr),reference:R,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Sr),strong:o(ar),thematicBreak:o(dn)},exit:{atxHeading:d(),atxHeadingSequence:O,autolink:d(),autolinkEmail:ve,autolinkProtocol:le,blockQuote:d(),characterEscapeValue:z,characterReferenceMarkerHexadecimal:ne,characterReferenceMarkerNumeric:ne,characterReferenceValue:re,characterReference:fe,codeFenced:d(S),codeFencedFence:k,codeFencedFenceInfo:b,codeFencedFenceMeta:y,codeFlowValue:z,codeIndented:d(_),codeText:d(q),codeTextData:z,data:z,definition:d(),definitionDestinationString:I,definitionLabelString:T,definitionTitleString:A,emphasis:d(),hardBreakEscape:d(W),hardBreakTrailing:d(W),htmlFlow:d($),htmlFlowData:z,htmlText:d(L),htmlTextData:z,image:d(X),label:xe,labelText:K,lineEnding:ee,link:d(D),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:H,resourceDestinationString:U,resourceTitleString:M,resource:Y,setextHeading:d(ae),setextHeadingLineSequence:F,setextHeadingText:B,strong:d(),thematicBreak:d()}};kA(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(Ne){let Ke={type:"root",children:[]};const St={stack:[Ke],tokenStack:[],config:t,enter:u,exit:h,buffer:l,resume:f,data:r},Tt=[];let sr=-1;for(;++sr<Ne.length;)if(Ne[sr][1].type==="listOrdered"||Ne[sr][1].type==="listUnordered")if(Ne[sr][0]==="enter")Tt.push(sr);else{const on=Tt.pop();sr=a(Ne,on,sr)}for(sr=-1;++sr<Ne.length;){const on=t[Ne[sr][0]];vA.call(on,Ne[sr][1].type)&&on[Ne[sr][1].type].call(Object.assign({sliceSerialize:Ne[sr][2].sliceSerialize},St),Ne[sr][1])}if(St.tokenStack.length>0){const on=St.tokenStack[St.tokenStack.length-1];(on[1]||nS).call(St,void 0,on[0])}for(Ke.position={start:Go(Ne.length>0?Ne[0][1].start:{line:1,column:1,offset:0}),end:Go(Ne.length>0?Ne[Ne.length-2][1].end:{line:1,column:1,offset:0})},sr=-1;++sr<t.transforms.length;)Ke=t.transforms[sr](Ke)||Ke;return Ke}function a(Ne,Ke,St){let Tt=Ke-1,sr=-1,on=!1,hn,Gr,Tr,pr;for(;++Tt<=St;){const Yt=Ne[Tt];switch(Yt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Yt[0]==="enter"?sr++:sr--,pr=void 0;break}case"lineEndingBlank":{Yt[0]==="enter"&&(hn&&!pr&&!sr&&!Tr&&(Tr=Tt),pr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pr=void 0}if(!sr&&Yt[0]==="enter"&&Yt[1].type==="listItemPrefix"||sr===-1&&Yt[0]==="exit"&&(Yt[1].type==="listUnordered"||Yt[1].type==="listOrdered")){if(hn){let gn=Tt;for(Gr=void 0;gn--;){const fn=Ne[gn];if(fn[1].type==="lineEnding"||fn[1].type==="lineEndingBlank"){if(fn[0]==="exit")continue;Gr&&(Ne[Gr][1].type="lineEndingBlank",on=!0),fn[1].type="lineEnding",Gr=gn}else if(!(fn[1].type==="linePrefix"||fn[1].type==="blockQuotePrefix"||fn[1].type==="blockQuotePrefixWhitespace"||fn[1].type==="blockQuoteMarker"||fn[1].type==="listItemIndent"))break}Tr&&(!Gr||Tr<Gr)&&(hn._spread=!0),hn.end=Object.assign({},Gr?Ne[Gr][1].start:Yt[1].end),Ne.splice(Gr||Tt,0,["exit",hn,Yt[2]]),Tt++,St++}if(Yt[1].type==="listItemPrefix"){const gn={type:"listItem",_spread:!1,start:Object.assign({},Yt[1].start),end:void 0};hn=gn,Ne.splice(Tt,0,["enter",gn,Yt[2]]),Tt++,St++,Tr=void 0,pr=!0}}}return Ne[Ke][1]._spread=on,St}function o(Ne,Ke){return St;function St(Tt){u.call(this,Ne(Tt),Tt),Ke&&Ke.call(this,Tt)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(Ne,Ke,St){this.stack[this.stack.length-1].children.push(Ne),this.stack.push(Ne),this.tokenStack.push([Ke,St||void 0]),Ne.position={start:Go(Ke.start),end:void 0}}function d(Ne){return Ke;function Ke(St){Ne&&Ne.call(this,St),h.call(this,St)}}function h(Ne,Ke){const St=this.stack.pop(),Tt=this.tokenStack.pop();if(Tt)Tt[0].type!==Ne.type&&(Ke?Ke.call(this,Ne,Tt[0]):(Tt[1]||nS).call(this,Ne,Tt[0]));else throw new Error("Cannot close `"+Ne.type+"` ("+Oh({start:Ne.start,end:Ne.end})+"): its not open");St.position.end=Go(Ne.end)}function f(){return Ev(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function x(Ne){if(this.data.expectingFirstListItemValue){const Ke=this.stack[this.stack.length-2];Ke.start=Number.parseInt(this.sliceSerialize(Ne),10),this.data.expectingFirstListItemValue=void 0}}function b(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.lang=Ne}function y(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.meta=Ne}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.value=Ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.value=Ne.replace(/(\r?\n|\r)$/g,"")}function T(Ne){const Ke=this.resume(),St=this.stack[this.stack.length-1];St.label=Ke,St.identifier=ni(this.sliceSerialize(Ne)).toLowerCase()}function A(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.title=Ne}function I(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.url=Ne}function O(Ne){const Ke=this.stack[this.stack.length-1];if(!Ke.depth){const St=this.sliceSerialize(Ne).length;Ke.depth=St}}function B(){this.data.setextHeadingSlurpLineEnding=!0}function F(Ne){const Ke=this.stack[this.stack.length-1];Ke.depth=this.sliceSerialize(Ne).codePointAt(0)===61?1:2}function ae(){this.data.setextHeadingSlurpLineEnding=void 0}function Z(Ne){const St=this.stack[this.stack.length-1].children;let Tt=St[St.length-1];(!Tt||Tt.type!=="text")&&(Tt=Ut(),Tt.position={start:Go(Ne.start),end:void 0},St.push(Tt)),this.stack.push(Tt)}function z(Ne){const Ke=this.stack.pop();Ke.value+=this.sliceSerialize(Ne),Ke.position.end=Go(Ne.end)}function ee(Ne){const Ke=this.stack[this.stack.length-1];if(this.data.atHardBreak){const St=Ke.children[Ke.children.length-1];St.position.end=Go(Ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ke.type)&&(Z.call(this,Ne),z.call(this,Ne))}function W(){this.data.atHardBreak=!0}function $(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.value=Ne}function L(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.value=Ne}function q(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.value=Ne}function D(){const Ne=this.stack[this.stack.length-1];if(this.data.inReference){const Ke=this.data.referenceType||"shortcut";Ne.type+="Reference",Ne.referenceType=Ke,delete Ne.url,delete Ne.title}else delete Ne.identifier,delete Ne.label;this.data.referenceType=void 0}function X(){const Ne=this.stack[this.stack.length-1];if(this.data.inReference){const Ke=this.data.referenceType||"shortcut";Ne.type+="Reference",Ne.referenceType=Ke,delete Ne.url,delete Ne.title}else delete Ne.identifier,delete Ne.label;this.data.referenceType=void 0}function K(Ne){const Ke=this.sliceSerialize(Ne),St=this.stack[this.stack.length-2];St.label=S7(Ke),St.identifier=ni(Ke).toLowerCase()}function xe(){const Ne=this.stack[this.stack.length-1],Ke=this.resume(),St=this.stack[this.stack.length-1];if(this.data.inReference=!0,St.type==="link"){const Tt=Ne.children;St.children=Tt}else St.alt=Ke}function U(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.url=Ne}function M(){const Ne=this.resume(),Ke=this.stack[this.stack.length-1];Ke.title=Ne}function Y(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function H(Ne){const Ke=this.resume(),St=this.stack[this.stack.length-1];St.label=Ke,St.identifier=ni(this.sliceSerialize(Ne)).toLowerCase(),this.data.referenceType="full"}function ne(Ne){this.data.characterReferenceType=Ne.type}function re(Ne){const Ke=this.sliceSerialize(Ne),St=this.data.characterReferenceType;let Tt;St?(Tt=uA(Ke,St==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Tt=_v(Ke);const sr=this.stack[this.stack.length-1];sr.value+=Tt}function fe(Ne){const Ke=this.stack.pop();Ke.position.end=Go(Ne.end)}function le(Ne){z.call(this,Ne);const Ke=this.stack[this.stack.length-1];Ke.url=this.sliceSerialize(Ne)}function ve(Ne){z.call(this,Ne);const Ke=this.stack[this.stack.length-1];Ke.url="mailto:"+this.sliceSerialize(Ne)}function ce(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function it(){return{type:"inlineCode",value:""}}function pt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function zt(){return{type:"emphasis",children:[]}}function Sr(){return{type:"heading",depth:0,children:[]}}function He(){return{type:"break"}}function Gt(){return{type:"html",value:""}}function rr(){return{type:"image",title:null,url:"",alt:null}}function Dt(){return{type:"link",title:null,url:"",children:[]}}function Ht(Ne){return{type:"list",ordered:Ne.type==="listOrdered",start:null,spread:Ne._spread,children:[]}}function Zt(Ne){return{type:"listItem",spread:Ne._spread,checked:null,children:[]}}function hr(){return{type:"paragraph",children:[]}}function ar(){return{type:"strong",children:[]}}function Ut(){return{type:"text",value:""}}function dn(){return{type:"thematicBreak"}}}function Go(e){return{line:e.line,column:e.column,offset:e.offset}}function kA(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?kA(e,n):A7(e,n)}}function A7(e,t){let r;for(r in t)if(vA.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function nS(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Oh({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Oh({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Oh({start:t.start,end:t.end})+") is still open")}function L7(e){const t=this;t.parser=r;function r(n){return C7(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function j7(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function M7(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function R7(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function O7(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function I7(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function D7(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),a=Ku(n.toLowerCase()),o=e.footnoteOrder.indexOf(n);let l,u=e.footnoteCounts.get(n);u===void 0?(u=0,e.footnoteOrder.push(n),l=e.footnoteOrder.length):l=o+1,u+=1,e.footnoteCounts.set(n,u);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function P7(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function B7(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function wA(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const a=e.all(t),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&l.type==="text"?l.value+=n:a.push({type:"text",value:n}),a}function F7(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return wA(e,t);const a={src:Ku(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(a.title=n.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,o),e.applyData(t,o)}function U7(e,t){const r={src:Ku(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function $7(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function z7(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return wA(e,t);const a={href:Ku(n.url||"")};n.title!==null&&n.title!==void 0&&(a.title=n.title);const o={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function H7(e,t){const r={href:Ku(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function q7(e,t,r){const n=e.all(t),a=r?G7(r):EA(t),o={},l=[];if(typeof t.checked=="boolean"){const f=n[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},n.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let u=-1;for(;++u<n.length;){const f=n[u];(a||u!==0||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?l.push(...f.children):l.push(f)}const d=n[n.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,h),e.applyData(t,h)}function G7(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=EA(r[n])}return t}function EA(e){const t=e.spread;return t??e.children.length>1}function Y7(e,t){const r={},n=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<n.length;){const l=n[a];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,o),e.applyData(t,o)}function W7(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function V7(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function K7(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function X7(e,t){const r=e.all(t),n=r.shift(),a=[];if(n){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],l),a.push(l)}if(r.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},u=ji(t.children[1]),d=Up(t.children[t.children.length-1]);u&&d&&(l.position={start:u,end:d}),a.push(l)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,o),e.applyData(t,o)}function Q7(e,t,r){const n=r?r.children:void 0,o=(n?n.indexOf(t):1)===0?"th":"td",l=r&&r.type==="table"?r.align:void 0,u=l?l.length:t.children.length;let d=-1;const h=[];for(;++d<u;){const p=t.children[d],x={},b=l?l[d]:void 0;b&&(x.align=b);let y={type:"element",tagName:o,properties:x,children:[]};p&&(y.children=e.all(p),e.patch(p,y),y=e.applyData(p,y)),h.push(y)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,f),e.applyData(t,f)}function Z7(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const aS=9,sS=32;function J7(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),a=0;const o=[];for(;n;)o.push(iS(t.slice(a,n.index),a>0,!0),n[0]),a=n.index+n[0].length,n=r.exec(t);return o.push(iS(t.slice(a),a>0,!1)),o.join("")}function iS(e,t,r){let n=0,a=e.length;if(t){let o=e.codePointAt(n);for(;o===aS||o===sS;)n++,o=e.codePointAt(n)}if(r){let o=e.codePointAt(a-1);for(;o===aS||o===sS;)a--,o=e.codePointAt(a-1)}return a>n?e.slice(n,a):""}function eF(e,t){const r={type:"text",value:J7(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function tF(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const rF={blockquote:j7,break:M7,code:R7,delete:O7,emphasis:I7,footnoteReference:D7,heading:P7,html:B7,imageReference:F7,image:U7,inlineCode:$7,linkReference:z7,link:H7,listItem:q7,list:Y7,paragraph:W7,root:V7,strong:K7,table:X7,tableCell:Z7,tableRow:Q7,text:eF,thematicBreak:tF,toml:Xf,yaml:Xf,definition:Xf,footnoteDefinition:Xf};function Xf(){}const _A=-1,Hp=0,Dh=1,q0=2,Tv=3,Cv=4,Nv=5,Av=6,SA=7,TA=8,oS=typeof self=="object"?self:globalThis,nF=(e,t)=>{const r=(a,o)=>(e.set(o,a),a),n=a=>{if(e.has(a))return e.get(a);const[o,l]=t[a];switch(o){case Hp:case _A:return r(l,a);case Dh:{const u=r([],a);for(const d of l)u.push(n(d));return u}case q0:{const u=r({},a);for(const[d,h]of l)u[n(d)]=n(h);return u}case Tv:return r(new Date(l),a);case Cv:{const{source:u,flags:d}=l;return r(new RegExp(u,d),a)}case Nv:{const u=r(new Map,a);for(const[d,h]of l)u.set(n(d),n(h));return u}case Av:{const u=r(new Set,a);for(const d of l)u.add(n(d));return u}case SA:{const{name:u,message:d}=l;return r(new oS[u](d),a)}case TA:return r(BigInt(l),a);case"BigInt":return r(Object(BigInt(l)),a);case"ArrayBuffer":return r(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return r(new DataView(u),l)}}return r(new oS[o](l),a)};return n},lS=e=>nF(new Map,e)(0),su="",{toString:aF}={},{keys:sF}=Object,nh=e=>{const t=typeof e;if(t!=="object"||!e)return[Hp,t];const r=aF.call(e).slice(8,-1);switch(r){case"Array":return[Dh,su];case"Object":return[q0,su];case"Date":return[Tv,su];case"RegExp":return[Cv,su];case"Map":return[Nv,su];case"Set":return[Av,su];case"DataView":return[Dh,r]}return r.includes("Array")?[Dh,r]:r.includes("Error")?[SA,r]:[q0,r]},Qf=([e,t])=>e===Hp&&(t==="function"||t==="symbol"),iF=(e,t,r,n)=>{const a=(l,u)=>{const d=n.push(l)-1;return r.set(u,d),d},o=l=>{if(r.has(l))return r.get(l);let[u,d]=nh(l);switch(u){case Hp:{let f=l;switch(d){case"bigint":u=TA,f=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);f=null;break;case"undefined":return a([_A],l)}return a([u,f],l)}case Dh:{if(d){let x=l;return d==="DataView"?x=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(x=new Uint8Array(l)),a([d,[...x]],l)}const f=[],p=a([u,f],l);for(const x of l)f.push(o(x));return p}case q0:{if(d)switch(d){case"BigInt":return a([d,l.toString()],l);case"Boolean":case"Number":case"String":return a([d,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const f=[],p=a([u,f],l);for(const x of sF(l))(e||!Qf(nh(l[x])))&&f.push([o(x),o(l[x])]);return p}case Tv:return a([u,l.toISOString()],l);case Cv:{const{source:f,flags:p}=l;return a([u,{source:f,flags:p}],l)}case Nv:{const f=[],p=a([u,f],l);for(const[x,b]of l)(e||!(Qf(nh(x))||Qf(nh(b))))&&f.push([o(x),o(b)]);return p}case Av:{const f=[],p=a([u,f],l);for(const x of l)(e||!Qf(nh(x)))&&f.push(o(x));return p}}const{message:h}=l;return a([u,{name:d,message:h}],l)};return o},cS=(e,{json:t,lossy:r}={})=>{const n=[];return iF(!(t||r),!!t,new Map,n)(e),n},Zl=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?lS(cS(e,t)):structuredClone(e):(e,t)=>lS(cS(e,t));function oF(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function lF(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function cF(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||oF,n=e.options.footnoteBackLabel||lF,a=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const f=e.all(h),p=String(h.identifier).toUpperCase(),x=Ku(p.toLowerCase());let b=0;const y=[],k=e.footnoteCounts.get(p);for(;k!==void 0&&++b<=k;){y.length>0&&y.push({type:"text",value:" "});let T=typeof r=="string"?r:r(d,b);typeof T=="string"&&(T={type:"text",value:T}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(d,b),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else f.push(...y);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(f,!0)};e.patch(h,_),u.push(_)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Zl(l),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const kg=(function(e){if(e==null)return gF;if(typeof e=="function")return qp(e);if(typeof e=="object")return Array.isArray(e)?uF(e):dF(e);if(typeof e=="string")return hF(e);throw new Error("Expected function, string, or object as test")});function uF(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=kg(e[r]);return qp(n);function n(...a){let o=-1;for(;++o<t.length;)if(t[o].apply(this,a))return!0;return!1}}function dF(e){const t=e;return qp(r);function r(n){const a=n;let o;for(o in e)if(a[o]!==t[o])return!1;return!0}}function hF(e){return qp(t);function t(r){return r&&r.type===e}}function qp(e){return t;function t(r,n,a){return!!(fF(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function gF(){return!0}function fF(e){return e!==null&&typeof e=="object"&&"type"in e}const CA=[],pF=!0,Ky=!1,mF="skip";function NA(e,t,r,n){let a;typeof t=="function"&&typeof r!="function"?(n=r,r=t):a=t;const o=kg(a),l=n?-1:1;u(e,void 0,[])();function u(d,h,f){const p=d&&typeof d=="object"?d:{};if(typeof p.type=="string"){const b=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(d.type+(b?"<"+b+">":""))+")"})}return x;function x(){let b=CA,y,k,S;if((!t||o(d,h,f[f.length-1]||void 0))&&(b=xF(r(d,f)),b[0]===Ky))return b;if("children"in d&&d.children){const _=d;if(_.children&&b[0]!==mF)for(k=(n?_.children.length:-1)+l,S=f.concat(_);k>-1&&k<_.children.length;){const T=_.children[k];if(y=u(T,k,S)(),y[0]===Ky)return y;k=typeof y[1]=="number"?y[1]:k+l}}return b}}}function xF(e){return Array.isArray(e)?e:typeof e=="number"?[pF,e]:e==null?CA:[e]}function wg(e,t,r,n){let a,o,l;typeof t=="function"&&typeof r!="function"?(o=void 0,l=t,a=r):(o=t,l=r,a=n),NA(e,o,u,a);function u(d,h){const f=h[h.length-1],p=f?f.children.indexOf(d):void 0;return l(d,p,f)}}const Xy={}.hasOwnProperty,bF={};function yF(e,t){const r=t||bF,n=new Map,a=new Map,o=new Map,l={...rF,...r.handlers},u={all:h,applyData:kF,definitionById:n,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:l,one:d,options:r,patch:vF,wrap:EF};return wg(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?n:a,x=String(f.identifier).toUpperCase();p.has(x)||p.set(x,f)}}),u;function d(f,p){const x=f.type,b=u.handlers[x];if(Xy.call(u.handlers,x)&&b)return b(u,f,p);if(u.options.passThrough&&u.options.passThrough.includes(x)){if("children"in f){const{children:k,...S}=f,_=Zl(S);return _.children=u.all(f),_}return Zl(f)}return(u.options.unknownHandler||wF)(u,f,p)}function h(f){const p=[];if("children"in f){const x=f.children;let b=-1;for(;++b<x.length;){const y=u.one(x[b],f);if(y){if(b&&x[b-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=uS(y.value)),!Array.isArray(y)&&y.type==="element")){const k=y.children[0];k&&k.type==="text"&&(k.value=uS(k.value))}Array.isArray(y)?p.push(...y):p.push(y)}}}return p}}function vF(e,t){e.position&&(t.position=nA(e))}function kF(e,t){let r=t;if(e&&e.data){const n=e.data.hName,a=e.data.hChildren,o=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const l="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:l}}r.type==="element"&&o&&Object.assign(r.properties,Zl(o)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function wF(e,t){const r=t.data||{},n="value"in t&&!(Xy.call(r,"hProperties")||Xy.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function EF(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function uS(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function dS(e,t){const r=yF(e,t),n=r.one(e,void 0),a=cF(r),o=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}function _F(e,t){return e&&"run"in e?async function(r,n){const a=dS(r,{file:n,...t});await e.run(a,n)}:function(r,n){return dS(r,{file:n,...e||t})}}function hS(e){if(e)throw e}var Fb,gS;function SF(){if(gS)return Fb;gS=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},o=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var f=e.call(h,"constructor"),p=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!f&&!p)return!1;var x;for(x in h);return typeof x>"u"||e.call(h,x)},l=function(h,f){r&&f.name==="__proto__"?r(h,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):h[f.name]=f.newValue},u=function(h,f){if(f==="__proto__")if(e.call(h,f)){if(n)return n(h,f).value}else return;return h[f]};return Fb=function d(){var h,f,p,x,b,y,k=arguments[0],S=1,_=arguments.length,T=!1;for(typeof k=="boolean"&&(T=k,k=arguments[1]||{},S=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});S<_;++S)if(h=arguments[S],h!=null)for(f in h)p=u(k,f),x=u(h,f),k!==x&&(T&&x&&(o(x)||(b=a(x)))?(b?(b=!1,y=p&&a(p)?p:[]):y=p&&o(p)?p:{},l(k,{name:f,newValue:d(T,y,x)})):typeof x<"u"&&l(k,{name:f,newValue:x}));return k},Fb}var TF=SF();const Ub=Hu(TF);function Qy(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function CF(){const e=[],t={run:r,use:n};return t;function r(...a){let o=-1;const l=a.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...a);function u(d,...h){const f=e[++o];let p=-1;if(d){l(d);return}for(;++p<a.length;)(h[p]===null||h[p]===void 0)&&(h[p]=a[p]);a=h,f?NF(f,u)(...h):l(null,...h)}}function n(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function NF(e,t){let r;return n;function n(...l){const u=e.length>l.length;let d;u&&l.push(a);try{d=e.apply(this,l)}catch(h){const f=h;if(u&&r)throw f;return a(f)}u||(d&&d.then&&typeof d.then=="function"?d.then(o,a):d instanceof Error?a(d):o(d))}function a(l,...u){r||(r=!0,t(l,...u))}function o(l){a(null,l)}}const Ei={basename:AF,dirname:LF,extname:jF,join:MF,sep:"/"};function AF(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Eg(e);let r=0,n=-1,a=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(o){r=a+1;break}}else n<0&&(o=!0,n=a+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let l=-1,u=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(o){r=a+1;break}}else l<0&&(o=!0,l=a+1),u>-1&&(e.codePointAt(a)===t.codePointAt(u--)?u<0&&(n=a):(u=-1,n=l));return r===n?n=l:n<0&&(n=e.length),e.slice(r,n)}function LF(e){if(Eg(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function jF(e){Eg(e);let t=e.length,r=-1,n=0,a=-1,o=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){n=t+1;break}continue}r<0&&(l=!0,r=t+1),u===46?a<0?a=t:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||r<0||o===0||o===1&&a===r-1&&a===n+1?"":e.slice(a,r)}function MF(...e){let t=-1,r;for(;++t<e.length;)Eg(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":RF(r)}function RF(e){Eg(e);const t=e.codePointAt(0)===47;let r=OF(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function OF(e,t){let r="",n=0,a=-1,o=0,l=-1,u,d;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(a===l-1||o===1))if(a!==l-1&&o===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),a=l,o=0;continue}}else if(r.length>0){r="",n=0,a=l,o=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(a+1,l):r=e.slice(a+1,l),n=l-a-1;a=l,o=0}else u===46&&o>-1?o++:o=-1}return r}function Eg(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const IF={cwd:DF};function DF(){return"/"}function Zy(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function PF(e){if(typeof e=="string")e=new URL(e);else if(!Zy(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return BF(e)}function BF(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const $b=["history","path","basename","stem","extname","dirname"];class AA{constructor(t){let r;t?Zy(t)?r={path:t}:typeof t=="string"||FF(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":IF.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<$b.length;){const o=$b[n];o in r&&r[o]!==void 0&&r[o]!==null&&(this[o]=o==="history"?[...r[o]]:r[o])}let a;for(a in r)$b.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Ei.basename(this.path):void 0}set basename(t){Hb(t,"basename"),zb(t,"basename"),this.path=Ei.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ei.dirname(this.path):void 0}set dirname(t){fS(this.basename,"dirname"),this.path=Ei.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ei.extname(this.path):void 0}set extname(t){if(zb(t,"extname"),fS(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ei.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Zy(t)&&(t=PF(t)),Hb(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ei.basename(this.path,this.extname):void 0}set stem(t){Hb(t,"stem"),zb(t,"stem"),this.path=Ei.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const a=this.message(t,r,n);throw a.fatal=!0,a}info(t,r,n){const a=this.message(t,r,n);return a.fatal=void 0,a}message(t,r,n){const a=new Sa(t,r,n);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zb(e,t){if(e&&e.includes(Ei.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ei.sep+"`")}function Hb(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function fS(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function FF(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const UF=(function(e){const n=this.constructor.prototype,a=n[e],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,n),o}),$F={}.hasOwnProperty;class Lv extends UF{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=CF()}copy(){const t=new Lv;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Ub(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(Yb("data",this.frozen),this.namespace[t]=r,this):$F.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Yb("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const a=r.call(t,...n);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Zf(t),n=this.parser||this.Parser;return qb("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),qb("process",this.parser||this.Parser),Gb("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(o,l){const u=Zf(t),d=n.parse(u);n.run(d,u,function(f,p,x){if(f||!p||!x)return h(f);const b=p,y=n.stringify(b,x);qF(y)?x.value=y:x.result=y,h(f,x)});function h(f,p){f||!p?l(f):o?o(p):r(void 0,p)}}}processSync(t){let r=!1,n;return this.freeze(),qb("processSync",this.parser||this.Parser),Gb("processSync",this.compiler||this.Compiler),this.process(t,a),mS("processSync","process",r),n;function a(o,l){r=!0,hS(o),n=l}}run(t,r,n){pS(t),this.freeze();const a=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?o(void 0,n):new Promise(o);function o(l,u){const d=Zf(r);a.run(t,d,h);function h(f,p,x){const b=p||t;f?u(f):l?l(b):n(void 0,b,x)}}}runSync(t,r){let n=!1,a;return this.run(t,r,o),mS("runSync","run",n),a;function o(l,u){hS(l),a=u,n=!0}}stringify(t,r){this.freeze();const n=Zf(r),a=this.compiler||this.Compiler;return Gb("stringify",a),pS(t),a(t,n)}use(t,...r){const n=this.attachers,a=this.namespace;if(Yb("use",this.frozen),t!=null)if(typeof t=="function")d(t,r);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[f,...p]=h;d(f,p)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(h.plugins),h.settings&&(a.settings=Ub(!0,a.settings,h.settings))}function u(h){let f=-1;if(h!=null)if(Array.isArray(h))for(;++f<h.length;){const p=h[f];o(p)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,f){let p=-1,x=-1;for(;++p<n.length;)if(n[p][0]===h){x=p;break}if(x===-1)n.push([h,...f]);else if(f.length>0){let[b,...y]=f;const k=n[x][1];Qy(k)&&Qy(b)&&(b=Ub(!0,k,b)),n[x]=[h,b,...y]}}}}const zF=new Lv().freeze();function qb(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Gb(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Yb(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pS(e){if(!Qy(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mS(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Zf(e){return HF(e)?e:new AA(e)}function HF(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function qF(e){return typeof e=="string"||GF(e)}function GF(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const YF="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xS=[],bS={allowDangerousHtml:!0},WF=/^(https?|ircs?|mailto|xmpp)$/i,VF=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function LA(e){const t=KF(e),r=XF(e);return QF(t.runSync(t.parse(r),r),e)}function KF(e){const t=e.rehypePlugins||xS,r=e.remarkPlugins||xS,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...bS}:bS;return zF().use(L7).use(r).use(_F,n).use(t)}function XF(e){const t=e.children||"",r=new AA;return typeof t=="string"&&(r.value=t),r}function QF(e,t){const r=t.allowedElements,n=t.allowElement,a=t.components,o=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||ZF;for(const f of VF)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+YF+f.id,void 0);return wg(e,h),g8(e,{Fragment:s.Fragment,components:a,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function h(f,p,x){if(f.type==="raw"&&x&&typeof p=="number")return l?x.children.splice(p,1):x.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let b;for(b in Db)if(Object.hasOwn(Db,b)&&Object.hasOwn(f.properties,b)){const y=f.properties[b],k=Db[b];(k===null||k.includes(f.tagName))&&(f.properties[b]=d(String(y||""),b,f))}}if(f.type==="element"){let b=r?!r.includes(f.tagName):o?o.includes(f.tagName):!1;if(!b&&n&&typeof p=="number"&&(b=!n(f,p,x)),b&&x&&typeof p=="number")return u&&f.children?x.children.splice(p,1,...f.children):x.children.splice(p,1),p}}}function ZF(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||n!==-1&&t>n||WF.test(e.slice(0,t))?e:""}function yS(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,a=r.indexOf(t);for(;a!==-1;)n++,a=r.indexOf(t,a+t.length);return n}function JF(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function eU(e,t,r){const a=kg((r||{}).ignore||[]),o=tU(t);let l=-1;for(;++l<o.length;)NA(e,"text",u);function u(h,f){let p=-1,x;for(;++p<f.length;){const b=f[p],y=x?x.children:void 0;if(a(b,y?y.indexOf(b):void 0,x))return;x=b}if(x)return d(h,f)}function d(h,f){const p=f[f.length-1],x=o[l][0],b=o[l][1];let y=0;const S=p.children.indexOf(h);let _=!1,T=[];x.lastIndex=0;let A=x.exec(h.value);for(;A;){const I=A.index,O={index:A.index,input:A.input,stack:[...f,h]};let B=b(...A,O);if(typeof B=="string"&&(B=B.length>0?{type:"text",value:B}:void 0),B===!1?x.lastIndex=I+1:(y!==I&&T.push({type:"text",value:h.value.slice(y,I)}),Array.isArray(B)?T.push(...B):B&&T.push(B),y=I+A[0].length,_=!0),!x.global)break;A=x.exec(h.value)}return _?(y<h.value.length&&T.push({type:"text",value:h.value.slice(y)}),p.children.splice(S,1,...T)):T=[h],S+T.length}}function tU(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const a=r[n];t.push([rU(a[0]),nU(a[1])])}return t}function rU(e){return typeof e=="string"?new RegExp(JF(e),"g"):e}function nU(e){return typeof e=="function"?e:function(){return e}}const Wb="phrasing",Vb=["autolink","link","image","label"];function aU(){return{transforms:[dU],enter:{literalAutolink:iU,literalAutolinkEmail:Kb,literalAutolinkHttp:Kb,literalAutolinkWww:Kb},exit:{literalAutolink:uU,literalAutolinkEmail:cU,literalAutolinkHttp:oU,literalAutolinkWww:lU}}}function sU(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Wb,notInConstruct:Vb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Wb,notInConstruct:Vb},{character:":",before:"[ps]",after:"\\/",inConstruct:Wb,notInConstruct:Vb}]}}function iU(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Kb(e){this.config.enter.autolinkProtocol.call(this,e)}function oU(e){this.config.exit.autolinkProtocol.call(this,e)}function lU(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function cU(e){this.config.exit.autolinkEmail.call(this,e)}function uU(e){this.exit(e)}function dU(e){eU(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,hU],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),gU]],{ignore:["link","linkReference"]})}function hU(e,t,r,n,a){let o="";if(!jA(a)||(/^w/i.test(t)&&(r=t+r,t="",o="http://"),!fU(r)))return!1;const l=pU(r+n);if(!l[0])return!1;const u={type:"link",title:null,url:o+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[u,{type:"text",value:l[1]}]:u}function gU(e,t,r,n){return!jA(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function fU(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function pU(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const a=yS(e,"(");let o=yS(e,")");for(;n!==-1&&a>o;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),o++;return[e,r]}function jA(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Ql(r)||$p(r))&&(!t||r!==47)}MA.peek=_U;function mU(){this.buffer()}function xU(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function bU(){this.buffer()}function yU(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function vU(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ni(this.sliceSerialize(e)).toLowerCase(),r.label=t}function kU(e){this.exit(e)}function wU(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ni(this.sliceSerialize(e)).toLowerCase(),r.label=t}function EU(e){this.exit(e)}function _U(){return"["}function MA(e,t,r,n){const a=r.createTracker(n);let o=a.move("[^");const l=r.enter("footnoteReference"),u=r.enter("reference");return o+=a.move(r.safe(r.associationId(e),{after:"]",before:o})),u(),l(),o+=a.move("]"),o}function SU(){return{enter:{gfmFootnoteCallString:mU,gfmFootnoteCall:xU,gfmFootnoteDefinitionLabelString:bU,gfmFootnoteDefinition:yU},exit:{gfmFootnoteCallString:vU,gfmFootnoteCall:kU,gfmFootnoteDefinitionLabelString:wU,gfmFootnoteDefinition:EU}}}function TU(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:MA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,a,o,l){const u=o.createTracker(l);let d=u.move("[^");const h=o.enter("footnoteDefinition"),f=o.enter("label");return d+=u.move(o.safe(o.associationId(n),{before:d,after:"]"})),f(),d+=u.move("]:"),n.children&&n.children.length>0&&(u.shift(4),d+=u.move((t?`
`:" ")+o.indentLines(o.containerFlow(n,u.current()),t?RA:CU))),h(),d}}function CU(e,t,r){return t===0?e:RA(e,t,r)}function RA(e,t,r){return(r?"":"    ")+e}const NU=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];OA.peek=RU;function AU(){return{canContainEols:["delete"],enter:{strikethrough:jU},exit:{strikethrough:MU}}}function LU(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:NU}],handlers:{delete:OA}}}function jU(e){this.enter({type:"delete",children:[]},e)}function MU(e){this.exit(e)}function OA(e,t,r,n){const a=r.createTracker(n),o=r.enter("strikethrough");let l=a.move("~~");return l+=r.containerPhrasing(e,{...a.current(),before:l,after:"~"}),l+=a.move("~~"),o(),l}function RU(){return"~"}function OU(e){return e.length}function IU(e,t){const r=t||{},n=(r.align||[]).concat(),a=r.stringLength||OU,o=[],l=[],u=[],d=[];let h=0,f=-1;for(;++f<e.length;){const k=[],S=[];let _=-1;for(e[f].length>h&&(h=e[f].length);++_<e[f].length;){const T=DU(e[f][_]);if(r.alignDelimiters!==!1){const A=a(T);S[_]=A,(d[_]===void 0||A>d[_])&&(d[_]=A)}k.push(T)}l[f]=k,u[f]=S}let p=-1;if(typeof n=="object"&&"length"in n)for(;++p<h;)o[p]=vS(n[p]);else{const k=vS(n);for(;++p<h;)o[p]=k}p=-1;const x=[],b=[];for(;++p<h;){const k=o[p];let S="",_="";k===99?(S=":",_=":"):k===108?S=":":k===114&&(_=":");let T=r.alignDelimiters===!1?1:Math.max(1,d[p]-S.length-_.length);const A=S+"-".repeat(T)+_;r.alignDelimiters!==!1&&(T=S.length+T+_.length,T>d[p]&&(d[p]=T),b[p]=T),x[p]=A}l.splice(1,0,x),u.splice(1,0,b),f=-1;const y=[];for(;++f<l.length;){const k=l[f],S=u[f];p=-1;const _=[];for(;++p<h;){const T=k[p]||"";let A="",I="";if(r.alignDelimiters!==!1){const O=d[p]-(S[p]||0),B=o[p];B===114?A=" ".repeat(O):B===99?O%2?(A=" ".repeat(O/2+.5),I=" ".repeat(O/2-.5)):(A=" ".repeat(O/2),I=A):I=" ".repeat(O)}r.delimiterStart!==!1&&!p&&_.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&T==="")&&(r.delimiterStart!==!1||p)&&_.push(" "),r.alignDelimiters!==!1&&_.push(A),_.push(T),r.alignDelimiters!==!1&&_.push(I),r.padding!==!1&&_.push(" "),(r.delimiterEnd!==!1||p!==h-1)&&_.push("|")}y.push(r.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function DU(e){return e==null?"":String(e)}function vS(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const kS={}.hasOwnProperty;function IA(e,t){const r=t||{};function n(a,...o){let l=n.invalid;const u=n.handlers;if(a&&kS.call(a,e)){const d=String(a[e]);l=kS.call(u,d)?u[d]:n.unknown}if(l)return l.call(this,a,...o)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}function PU(e,t,r,n){const a=r.enter("blockquote"),o=r.createTracker(n);o.move("> "),o.shift(2);const l=r.indentLines(r.containerFlow(e,o.current()),BU);return a(),l}function BU(e,t,r){return">"+(r?"":" ")+e}function FU(e,t){return wS(e,t.inConstruct,!0)&&!wS(e,t.notInConstruct,!1)}function wS(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function ES(e,t,r,n){let a=-1;for(;++a<r.unsafe.length;)if(r.unsafe[a].character===`
`&&FU(r.stack,r.unsafe[a]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function UU(e,t){const r=String(e);let n=r.indexOf(t),a=n,o=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===a?++o>l&&(l=o):o=1,a=n+t.length,n=r.indexOf(t,a);return l}function $U(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function zU(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function HU(e,t,r,n){const a=zU(r),o=e.value||"",l=a==="`"?"GraveAccent":"Tilde";if($U(e,r)){const p=r.enter("codeIndented"),x=r.indentLines(o,qU);return p(),x}const u=r.createTracker(n),d=a.repeat(Math.max(UU(o,a)+1,3)),h=r.enter("codeFenced");let f=u.move(d);if(e.lang){const p=r.enter(`codeFencedLang${l}`);f+=u.move(r.safe(e.lang,{before:f,after:" ",encode:["`"],...u.current()})),p()}if(e.lang&&e.meta){const p=r.enter(`codeFencedMeta${l}`);f+=u.move(" "),f+=u.move(r.safe(e.meta,{before:f,after:`
`,encode:["`"],...u.current()})),p()}return f+=u.move(`
`),o&&(f+=u.move(o+`
`)),f+=u.move(d),h(),f}function qU(e,t,r){return(r?"":"    ")+e}function jv(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function GU(e,t,r,n){const a=jv(r),o=a==='"'?"Quote":"Apostrophe",l=r.enter("definition");let u=r.enter("label");const d=r.createTracker(n);let h=d.move("[");return h+=d.move(r.safe(r.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),u(),!e.url||/[\0- \u007F]/.test(e.url)?(u=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(u=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),u(),e.title&&(u=r.enter(`title${o}`),h+=d.move(" "+a),h+=d.move(r.safe(e.title,{before:h,after:a,...d.current()})),h+=d.move(a),u()),l(),h}function YU(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Zh(e){return"&#x"+e.toString(16).toUpperCase()+";"}function G0(e,t,r){const n=ju(e),a=ju(t);return n===void 0?a===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}DA.peek=WU;function DA(e,t,r,n){const a=YU(r),o=r.enter("emphasis"),l=r.createTracker(n),u=l.move(a);let d=l.move(r.containerPhrasing(e,{after:a,before:u,...l.current()}));const h=d.charCodeAt(0),f=G0(n.before.charCodeAt(n.before.length-1),h,a);f.inside&&(d=Zh(h)+d.slice(1));const p=d.charCodeAt(d.length-1),x=G0(n.after.charCodeAt(0),p,a);x.inside&&(d=d.slice(0,-1)+Zh(p));const b=l.move(a);return o(),r.attentionEncodeSurroundingInfo={after:x.outside,before:f.outside},u+d+b}function WU(e,t,r){return r.options.emphasis||"*"}function VU(e,t){let r=!1;return wg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,Ky}),!!((!e.depth||e.depth<3)&&Ev(e)&&(t.options.setext||r))}function KU(e,t,r,n){const a=Math.max(Math.min(6,e.depth||1),1),o=r.createTracker(n);if(VU(e,r)){const f=r.enter("headingSetext"),p=r.enter("phrasing"),x=r.containerPhrasing(e,{...o.current(),before:`
`,after:`
`});return p(),f(),x+`
`+(a===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const l="#".repeat(a),u=r.enter("headingAtx"),d=r.enter("phrasing");o.move(l+" ");let h=r.containerPhrasing(e,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(h)&&(h=Zh(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,r.options.closeAtx&&(h+=" "+l),d(),u(),h}PA.peek=XU;function PA(e){return e.value||""}function XU(){return"<"}BA.peek=QU;function BA(e,t,r,n){const a=jv(r),o=a==='"'?"Quote":"Apostrophe",l=r.enter("image");let u=r.enter("label");const d=r.createTracker(n);let h=d.move("![");return h+=d.move(r.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(u=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),u(),e.title&&(u=r.enter(`title${o}`),h+=d.move(" "+a),h+=d.move(r.safe(e.title,{before:h,after:a,...d.current()})),h+=d.move(a),u()),h+=d.move(")"),l(),h}function QU(){return"!"}FA.peek=ZU;function FA(e,t,r,n){const a=e.referenceType,o=r.enter("imageReference");let l=r.enter("label");const u=r.createTracker(n);let d=u.move("![");const h=r.safe(e.alt,{before:d,after:"]",...u.current()});d+=u.move(h+"]["),l();const f=r.stack;r.stack=[],l=r.enter("reference");const p=r.safe(r.associationId(e),{before:d,after:"]",...u.current()});return l(),r.stack=f,o(),a==="full"||!h||h!==p?d+=u.move(p+"]"):a==="shortcut"?d=d.slice(0,-1):d+=u.move("]"),d}function ZU(){return"!"}UA.peek=JU;function UA(e,t,r){let n=e.value||"",a="`",o=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(n);)a+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++o<r.unsafe.length;){const l=r.unsafe[o],u=r.compilePattern(l);let d;if(l.atBreak)for(;d=u.exec(n);){let h=d.index;n.charCodeAt(h)===10&&n.charCodeAt(h-1)===13&&h--,n=n.slice(0,h)+" "+n.slice(d.index+1)}}return a+n+a}function JU(){return"`"}function $A(e,t){const r=Ev(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}zA.peek=e$;function zA(e,t,r,n){const a=jv(r),o=a==='"'?"Quote":"Apostrophe",l=r.createTracker(n);let u,d;if($A(e,r)){const f=r.stack;r.stack=[],u=r.enter("autolink");let p=l.move("<");return p+=l.move(r.containerPhrasing(e,{before:p,after:">",...l.current()})),p+=l.move(">"),u(),r.stack=f,p}u=r.enter("link"),d=r.enter("label");let h=l.move("[");return h+=l.move(r.containerPhrasing(e,{before:h,after:"](",...l.current()})),h+=l.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=r.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(r.safe(e.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(d=r.enter("destinationRaw"),h+=l.move(r.safe(e.url,{before:h,after:e.title?" ":")",...l.current()}))),d(),e.title&&(d=r.enter(`title${o}`),h+=l.move(" "+a),h+=l.move(r.safe(e.title,{before:h,after:a,...l.current()})),h+=l.move(a),d()),h+=l.move(")"),u(),h}function e$(e,t,r){return $A(e,r)?"<":"["}HA.peek=t$;function HA(e,t,r,n){const a=e.referenceType,o=r.enter("linkReference");let l=r.enter("label");const u=r.createTracker(n);let d=u.move("[");const h=r.containerPhrasing(e,{before:d,after:"]",...u.current()});d+=u.move(h+"]["),l();const f=r.stack;r.stack=[],l=r.enter("reference");const p=r.safe(r.associationId(e),{before:d,after:"]",...u.current()});return l(),r.stack=f,o(),a==="full"||!h||h!==p?d+=u.move(p+"]"):a==="shortcut"?d=d.slice(0,-1):d+=u.move("]"),d}function t$(){return"["}function Mv(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function r$(e){const t=Mv(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function n$(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function qA(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function a$(e,t,r,n){const a=r.enter("list"),o=r.bulletCurrent;let l=e.ordered?n$(r):Mv(r);const u=e.ordered?l==="."?")":".":r$(r);let d=t&&r.bulletLastUsed?l===r.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&f&&(!f.children||!f.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(d=!0),qA(r)===l&&f){let p=-1;for(;++p<e.children.length;){const x=e.children[p];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(l=u),r.bulletCurrent=l;const h=r.containerFlow(e,n);return r.bulletLastUsed=l,r.bulletCurrent=o,a(),h}function s$(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function i$(e,t,r,n){const a=s$(r);let o=r.bulletCurrent||Mv(r);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+o);let l=o.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const u=r.createTracker(n);u.move(o+" ".repeat(l-o.length)),u.shift(l);const d=r.enter("listItem"),h=r.indentLines(r.containerFlow(e,u.current()),f);return d(),h;function f(p,x,b){return x?(b?"":" ".repeat(l))+p:(b?o:o+" ".repeat(l-o.length))+p}}function o$(e,t,r,n){const a=r.enter("paragraph"),o=r.enter("phrasing"),l=r.containerPhrasing(e,n);return o(),a(),l}const l$=kg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function c$(e,t,r,n){return(e.children.some(function(l){return l$(l)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function u$(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}GA.peek=d$;function GA(e,t,r,n){const a=u$(r),o=r.enter("strong"),l=r.createTracker(n),u=l.move(a+a);let d=l.move(r.containerPhrasing(e,{after:a,before:u,...l.current()}));const h=d.charCodeAt(0),f=G0(n.before.charCodeAt(n.before.length-1),h,a);f.inside&&(d=Zh(h)+d.slice(1));const p=d.charCodeAt(d.length-1),x=G0(n.after.charCodeAt(0),p,a);x.inside&&(d=d.slice(0,-1)+Zh(p));const b=l.move(a+a);return o(),r.attentionEncodeSurroundingInfo={after:x.outside,before:f.outside},u+d+b}function d$(e,t,r){return r.options.strong||"*"}function h$(e,t,r,n){return r.safe(e.value,n)}function g$(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function f$(e,t,r){const n=(qA(r)+(r.options.ruleSpaces?" ":"")).repeat(g$(r));return r.options.ruleSpaces?n.slice(0,-1):n}const YA={blockquote:PU,break:ES,code:HU,definition:GU,emphasis:DA,hardBreak:ES,heading:KU,html:PA,image:BA,imageReference:FA,inlineCode:UA,link:zA,linkReference:HA,list:a$,listItem:i$,paragraph:o$,root:c$,strong:GA,text:h$,thematicBreak:f$};function p$(){return{enter:{table:m$,tableData:_S,tableHeader:_S,tableRow:b$},exit:{codeText:y$,table:x$,tableData:Xb,tableHeader:Xb,tableRow:Xb}}}function m$(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function x$(e){this.exit(e),this.data.inTable=void 0}function b$(e){this.enter({type:"tableRow",children:[]},e)}function Xb(e){this.exit(e)}function _S(e){this.enter({type:"tableCell",children:[]},e)}function y$(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,v$));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function v$(e,t){return t==="|"?t:e}function k$(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,a=t.stringLength,o=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:l,tableCell:d,tableRow:u}};function l(b,y,k,S){return h(f(b,k,S),b.align)}function u(b,y,k,S){const _=p(b,k,S),T=h([_]);return T.slice(0,T.indexOf(`
`))}function d(b,y,k,S){const _=k.enter("tableCell"),T=k.enter("phrasing"),A=k.containerPhrasing(b,{...S,before:o,after:o});return T(),_(),A}function h(b,y){return IU(b,{align:y,alignDelimiters:n,padding:r,stringLength:a})}function f(b,y,k){const S=b.children;let _=-1;const T=[],A=y.enter("table");for(;++_<S.length;)T[_]=p(S[_],y,k);return A(),T}function p(b,y,k){const S=b.children;let _=-1;const T=[],A=y.enter("tableRow");for(;++_<S.length;)T[_]=d(S[_],b,y,k);return A(),T}function x(b,y,k){let S=YA.inlineCode(b,y,k);return k.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function w$(){return{exit:{taskListCheckValueChecked:SS,taskListCheckValueUnchecked:SS,paragraph:_$}}}function E$(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:S$}}}function SS(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function _$(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const a=t.children;let o=-1,l;for(;++o<a.length;){const u=a[o];if(u.type==="paragraph"){l=u;break}}l===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function S$(e,t,r,n){const a=e.children[0],o=typeof e.checked=="boolean"&&a&&a.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",u=r.createTracker(n);o&&u.move(l);let d=YA.listItem(e,t,r,{...n,...u.current()});return o&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(f){return f+l}}function T$(){return[aU(),SU(),AU(),p$(),w$()]}function C$(e){return{extensions:[sU(),TU(e),LU(),k$(e),E$()]}}const N$={tokenize:O$,partial:!0},WA={tokenize:I$,partial:!0},VA={tokenize:D$,partial:!0},KA={tokenize:P$,partial:!0},A$={tokenize:B$,partial:!0},XA={name:"wwwAutolink",tokenize:M$,previous:ZA},QA={name:"protocolAutolink",tokenize:R$,previous:JA},bo={name:"emailAutolink",tokenize:j$,previous:e3},Mi={};function L$(){return{text:Mi}}let Ml=48;for(;Ml<123;)Mi[Ml]=bo,Ml++,Ml===58?Ml=65:Ml===91&&(Ml=97);Mi[43]=bo;Mi[45]=bo;Mi[46]=bo;Mi[95]=bo;Mi[72]=[bo,QA];Mi[104]=[bo,QA];Mi[87]=[bo,XA];Mi[119]=[bo,XA];function j$(e,t,r){const n=this;let a,o;return l;function l(p){return!Jy(p)||!e3.call(n,n.previous)||Rv(n.events)?r(p):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),u(p))}function u(p){return Jy(p)?(e.consume(p),u):p===64?(e.consume(p),d):r(p)}function d(p){return p===46?e.check(A$,f,h)(p):p===45||p===95||ka(p)?(o=!0,e.consume(p),d):f(p)}function h(p){return e.consume(p),a=!0,d}function f(p){return o&&a&&Ra(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(p)):r(p)}}function M$(e,t,r){const n=this;return a;function a(l){return l!==87&&l!==119||!ZA.call(n,n.previous)||Rv(n.events)?r(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(N$,e.attempt(WA,e.attempt(VA,o),r),r)(l))}function o(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function R$(e,t,r){const n=this;let a="",o=!1;return l;function l(p){return(p===72||p===104)&&JA.call(n,n.previous)&&!Rv(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(p),e.consume(p),u):r(p)}function u(p){if(Ra(p)&&a.length<5)return a+=String.fromCodePoint(p),e.consume(p),u;if(p===58){const x=a.toLowerCase();if(x==="http"||x==="https")return e.consume(p),d}return r(p)}function d(p){return p===47?(e.consume(p),o?h:(o=!0,d)):r(p)}function h(p){return p===null||H0(p)||sn(p)||Ql(p)||$p(p)?r(p):e.attempt(WA,e.attempt(VA,f),r)(p)}function f(p){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(p)}}function O$(e,t,r){let n=0;return a;function a(l){return(l===87||l===119)&&n<3?(n++,e.consume(l),a):l===46&&n===3?(e.consume(l),o):r(l)}function o(l){return l===null?r(l):t(l)}}function I$(e,t,r){let n,a,o;return l;function l(h){return h===46||h===95?e.check(KA,d,u)(h):h===null||sn(h)||Ql(h)||h!==45&&$p(h)?d(h):(o=!0,e.consume(h),l)}function u(h){return h===95?n=!0:(a=n,n=void 0),e.consume(h),l}function d(h){return a||n||!o?r(h):t(h)}}function D$(e,t){let r=0,n=0;return a;function a(l){return l===40?(r++,e.consume(l),a):l===41&&n<r?o(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(KA,t,o)(l):l===null||sn(l)||Ql(l)?t(l):(e.consume(l),a)}function o(l){return l===41&&n++,e.consume(l),a}}function P$(e,t,r){return n;function n(u){return u===33||u===34||u===39||u===41||u===42||u===44||u===46||u===58||u===59||u===63||u===95||u===126?(e.consume(u),n):u===38?(e.consume(u),o):u===93?(e.consume(u),a):u===60||u===null||sn(u)||Ql(u)?t(u):r(u)}function a(u){return u===null||u===40||u===91||sn(u)||Ql(u)?t(u):n(u)}function o(u){return Ra(u)?l(u):r(u)}function l(u){return u===59?(e.consume(u),n):Ra(u)?(e.consume(u),l):r(u)}}function B$(e,t,r){return n;function n(o){return e.consume(o),a}function a(o){return ka(o)?r(o):t(o)}}function ZA(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||sn(e)}function JA(e){return!Ra(e)}function e3(e){return!(e===47||Jy(e))}function Jy(e){return e===43||e===45||e===46||e===95||ka(e)}function Rv(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const F$={tokenize:W$,partial:!0};function U$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:q$,continuation:{tokenize:G$},exit:Y$}},text:{91:{name:"gfmFootnoteCall",tokenize:H$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$$,resolveTo:z$}}}}function $$(e,t,r){const n=this;let a=n.events.length;const o=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let l;for(;a--;){const d=n.events[a][1];if(d.type==="labelImage"){l=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return u;function u(d){if(!l||!l._balanced)return r(d);const h=ni(n.sliceSerialize({start:l.end,end:n.now()}));return h.codePointAt(0)!==94||!o.includes(h.slice(1))?r(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function z$(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},u=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",o,t],["enter",l,t],["exit",l,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...u),e}function H$(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o=0,l;return u;function u(p){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),d}function d(p){return p!==94?r(p):(e.enter("gfmFootnoteCallMarker"),e.consume(p),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(p){if(o>999||p===93&&!l||p===null||p===91||sn(p))return r(p);if(p===93){e.exit("chunkString");const x=e.exit("gfmFootnoteCallString");return a.includes(ni(n.sliceSerialize(x)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(p),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(p)}return sn(p)||(l=!0),o++,e.consume(p),p===92?f:h}function f(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}}function q$(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let o,l=0,u;return d;function d(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):r(y)}function f(y){if(l>999||y===93&&!u||y===null||y===91||sn(y))return r(y);if(y===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return o=ni(n.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),x}return sn(y)||(u=!0),l++,e.consume(y),y===92?p:f}function p(y){return y===91||y===92||y===93?(e.consume(y),l++,f):f(y)}function x(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),a.includes(o)||a.push(o),Mr(e,b,"gfmFootnoteDefinitionWhitespace")):r(y)}function b(y){return t(y)}}function G$(e,t,r){return e.check(vg,t,e.attempt(F$,t,r))}function Y$(e){e.exit("gfmFootnoteDefinition")}function W$(e,t,r){const n=this;return Mr(e,a,"gfmFootnoteDefinitionIndent",5);function a(o){const l=n.events[n.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(o):r(o)}}function V$(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:o,resolveAll:a};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function a(l,u){let d=-1;for(;++d<l.length;)if(l[d][0]==="enter"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._close){let h=d;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[d][1].end.offset-l[d][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[d][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[d][1].end)},p={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[d][1].start)},x=[["enter",f,u],["enter",l[h][1],u],["exit",l[h][1],u],["enter",p,u]],b=u.parser.constructs.insideSpan.null;b&&ms(x,x.length,0,zp(b,l.slice(h+1,d),u)),ms(x,x.length,0,[["exit",p,u],["enter",l[d][1],u],["exit",l[d][1],u],["exit",f,u]]),ms(l,h-1,d-h+3,x),d=h+x.length-2;break}}for(d=-1;++d<l.length;)l[d][1].type==="strikethroughSequenceTemporary"&&(l[d][1].type="data");return l}function o(l,u,d){const h=this.previous,f=this.events;let p=0;return x;function x(y){return h===126&&f[f.length-1][1].type!=="characterEscape"?d(y):(l.enter("strikethroughSequenceTemporary"),b(y))}function b(y){const k=ju(h);if(y===126)return p>1?d(y):(l.consume(y),p++,b);if(p<2&&!r)return d(y);const S=l.exit("strikethroughSequenceTemporary"),_=ju(y);return S._open=!_||_===2&&!!k,S._close=!k||k===2&&!!_,u(y)}}}class K${constructor(){this.map=[]}add(t,r,n){X$(this,t,r,n)}consume(t){if(this.map.sort(function(o,l){return o[0]-l[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let a=n.pop();for(;a;){for(const o of a)t.push(o);a=n.pop()}this.map.length=0}}function X$(e,t,r,n){let a=0;if(!(r===0&&n.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=r,e.map[a][2].push(...n);return}a+=1}e.map.push([t,r,n])}}function Q$(e,t){let r=!1;const n=[];for(;t<e.length;){const a=e[t];if(r){if(a[0]==="enter")a[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const o=n.length-1;n[o]=n[o]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function Z$(){return{flow:{null:{name:"table",tokenize:J$,resolveAll:ez}}}}function J$(e,t,r){const n=this;let a=0,o=0,l;return u;function u(z){let ee=n.events.length-1;for(;ee>-1;){const L=n.events[ee][1].type;if(L==="lineEnding"||L==="linePrefix")ee--;else break}const W=ee>-1?n.events[ee][1].type:null,$=W==="tableHead"||W==="tableRow"?B:d;return $===B&&n.parser.lazy[n.now().line]?r(z):$(z)}function d(z){return e.enter("tableHead"),e.enter("tableRow"),h(z)}function h(z){return z===124||(l=!0,o+=1),f(z)}function f(z){return z===null?r(z):Pt(z)?o>1?(o=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),b):r(z):Er(z)?Mr(e,f,"whitespace")(z):(o+=1,l&&(l=!1,a+=1),z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),l=!0,f):(e.enter("data"),p(z)))}function p(z){return z===null||z===124||sn(z)?(e.exit("data"),f(z)):(e.consume(z),z===92?x:p)}function x(z){return z===92||z===124?(e.consume(z),p):p(z)}function b(z){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(z):(e.enter("tableDelimiterRow"),l=!1,Er(z)?Mr(e,y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):y(z))}function y(z){return z===45||z===58?S(z):z===124?(l=!0,e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),k):O(z)}function k(z){return Er(z)?Mr(e,S,"whitespace")(z):S(z)}function S(z){return z===58?(o+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),_):z===45?(o+=1,_(z)):z===null||Pt(z)?I(z):O(z)}function _(z){return z===45?(e.enter("tableDelimiterFiller"),T(z)):O(z)}function T(z){return z===45?(e.consume(z),T):z===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(z),e.exit("tableDelimiterMarker"),A):(e.exit("tableDelimiterFiller"),A(z))}function A(z){return Er(z)?Mr(e,I,"whitespace")(z):I(z)}function I(z){return z===124?y(z):z===null||Pt(z)?!l||a!==o?O(z):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(z)):O(z)}function O(z){return r(z)}function B(z){return e.enter("tableRow"),F(z)}function F(z){return z===124?(e.enter("tableCellDivider"),e.consume(z),e.exit("tableCellDivider"),F):z===null||Pt(z)?(e.exit("tableRow"),t(z)):Er(z)?Mr(e,F,"whitespace")(z):(e.enter("data"),ae(z))}function ae(z){return z===null||z===124||sn(z)?(e.exit("data"),F(z)):(e.consume(z),z===92?Z:ae)}function Z(z){return z===92||z===124?(e.consume(z),ae):ae(z)}}function ez(e,t){let r=-1,n=!0,a=0,o=[0,0,0,0],l=[0,0,0,0],u=!1,d=0,h,f,p;const x=new K$;for(;++r<e.length;){const b=e[r],y=b[1];b[0]==="enter"?y.type==="tableHead"?(u=!1,d!==0&&(TS(x,t,d,h,f),f=void 0,d=0),h={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(r,0,[["enter",h,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(n=!0,p=void 0,o=[0,0,0,0],l=[0,r+1,0,0],u&&(u=!1,f={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(r,0,[["enter",f,t]])),a=y.type==="tableDelimiterRow"?2:f?3:1):a&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(n=!1,l[2]===0&&(o[1]!==0&&(l[0]=l[1],p=Jf(x,t,o,a,void 0,p),o=[0,0,0,0]),l[2]=r)):y.type==="tableCellDivider"&&(n?n=!1:(o[1]!==0&&(l[0]=l[1],p=Jf(x,t,o,a,void 0,p)),o=l,l=[o[1],r,0,0])):y.type==="tableHead"?(u=!0,d=r):y.type==="tableRow"||y.type==="tableDelimiterRow"?(d=r,o[1]!==0?(l[0]=l[1],p=Jf(x,t,o,a,r,p)):l[1]!==0&&(p=Jf(x,t,l,a,r,p)),a=0):a&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(l[3]=r)}for(d!==0&&TS(x,t,d,h,f),x.consume(t.events),r=-1;++r<t.events.length;){const b=t.events[r];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=Q$(t.events,r))}return e}function Jf(e,t,r,n,a,o){const l=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",u="tableContent";r[0]!==0&&(o.end=Object.assign({},uu(t.events,r[0])),e.add(r[0],0,[["exit",o,t]]));const d=uu(t.events,r[1]);if(o={type:l,start:Object.assign({},d),end:Object.assign({},d)},e.add(r[1],0,[["enter",o,t]]),r[2]!==0){const h=uu(t.events,r[2]),f=uu(t.events,r[3]),p={type:u,start:Object.assign({},h),end:Object.assign({},f)};if(e.add(r[2],0,[["enter",p,t]]),n!==2){const x=t.events[r[2]],b=t.events[r[3]];if(x[1].end=Object.assign({},b[1].end),x[1].type="chunkText",x[1].contentType="text",r[3]>r[2]+1){const y=r[2]+1,k=r[3]-r[2]-1;e.add(y,k,[])}}e.add(r[3]+1,0,[["exit",p,t]])}return a!==void 0&&(o.end=Object.assign({},uu(t.events,a)),e.add(a,0,[["exit",o,t]]),o=void 0),o}function TS(e,t,r,n,a){const o=[],l=uu(t.events,r);a&&(a.end=Object.assign({},l),o.push(["exit",a,t])),n.end=Object.assign({},l),o.push(["exit",n,t]),e.add(r+1,0,o)}function uu(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const tz={name:"tasklistCheck",tokenize:nz};function rz(){return{text:{91:tz}}}function nz(e,t,r){const n=this;return a;function a(d){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),o)}function o(d){return sn(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),l):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),l):r(d)}function l(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),u):r(d)}function u(d){return Pt(d)?t(d):Er(d)?e.check({tokenize:az},t,r)(d):r(d)}}function az(e,t,r){return Mr(e,n,"whitespace");function n(a){return a===null?r(a):t(a)}}function sz(e){return cA([L$(),U$(),V$(e),Z$(),rz()])}const iz={};function oz(e){const t=this,r=e||iz,n=t.data(),a=n.micromarkExtensions||(n.micromarkExtensions=[]),o=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),l=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);a.push(sz(r)),o.push(T$()),l.push(C$(r))}const CS=/[#.]/g;function lz(e,t){const r=e||"",n={};let a=0,o,l;for(;a<r.length;){CS.lastIndex=a;const u=CS.exec(r),d=r.slice(a,u?u.index:r.length);d&&(o?o==="#"?n.id=d:Array.isArray(n.className)?n.className.push(d):n.className=[d]:l=d,a+=d.length),u&&(o=u[0],a++)}return{type:"element",tagName:l||t||"div",properties:n,children:[]}}function t3(e,t,r){const n=r?hz(r):void 0;function a(o,l,...u){let d;if(o==null){d={type:"root",children:[]};const h=l;u.unshift(h)}else{d=lz(o,t);const h=d.tagName.toLowerCase(),f=n?n.get(h):void 0;if(d.tagName=f||h,cz(l))u.unshift(l);else for(const[p,x]of Object.entries(l))uz(e,d.properties,p,x)}for(const h of u)e1(d.children,h);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return a}function cz(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const n of r){const a=t[n];if(a&&typeof a=="object"){if(!Array.isArray(a))return!0;const o=a;for(const l of o)if(typeof l!="number"&&typeof l!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function uz(e,t,r,n){const a=yv(e,r);let o;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;o=n}else typeof n=="boolean"?o=n:typeof n=="string"?a.spaceSeparated?o=U_(n):a.commaSeparated?o=I_(n):a.commaOrSpaceSeparated?o=U_(I_(n).join(" ")):o=NS(a,a.property,n):Array.isArray(n)?o=[...n]:o=a.property==="style"?dz(n):String(n);if(Array.isArray(o)){const l=[];for(const u of o)l.push(NS(a,a.property,u));o=l}a.property==="className"&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[a.property]=o}}function e1(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)e1(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?e1(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function NS(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||Xh(r)===Xh(t)))return!0}return r}function dz(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function hz(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const gz=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],fz=t3(Fp,"div"),pz=t3(Vu,"g",gz);function mz(e){const t=String(e),r=[];return{toOffset:a,toPoint:n};function n(o){if(typeof o=="number"&&o>-1&&o<=t.length){let l=0;for(;;){let u=r[l];if(u===void 0){const d=AS(t,r[l-1]);u=d===-1?t.length+1:d+1,r[l]=u}if(u>o)return{line:l+1,column:o-(l>0?r[l-1]:0)+1,offset:o};l++}}}function a(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;r.length<o.line;){const u=r[r.length-1],d=AS(t,u),h=d===-1?t.length+1:d+1;if(u===h)break;r.push(h)}const l=(o.line>1?r[o.line-2]:0)+o.column-1;if(l<r[o.line-1])return l}}}function AS(e,t){const r=e.indexOf("\r",t),n=e.indexOf(`
`,t);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const Ul={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},r3={}.hasOwnProperty,xz=Object.prototype;function bz(e,t){const r=t||{};return Ov({file:r.file||void 0,location:!1,schema:r.space==="svg"?Vu:Fp,verbose:r.verbose||!1},e)}function Ov(e,t){let r;switch(t.nodeName){case"#comment":{const n=t;return r={type:"comment",value:n.data},E0(e,n,r),r}case"#document":case"#document-fragment":{const n=t,a="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:n3(e,t.childNodes),data:{quirksMode:a}},e.file&&e.location){const o=String(e.file),l=mz(o),u=l.toPoint(0),d=l.toPoint(o.length);r.position={start:u,end:d}}return r}case"#documentType":{const n=t;return r={type:"doctype"},E0(e,n,r),r}case"#text":{const n=t;return r={type:"text",value:n.value},E0(e,n,r),r}default:return r=yz(e,t),r}}function n3(e,t){let r=-1;const n=[];for(;++r<t.length;){const a=Ov(e,t[r]);n.push(a)}return n}function yz(e,t){const r=e.schema;e.schema=t.namespaceURI===Ul.svg?Vu:Fp;let n=-1;const a={};for(;++n<t.attrs.length;){const u=t.attrs[n],d=(u.prefix?u.prefix+":":"")+u.name;r3.call(xz,d)||(a[d]=u.value)}const l=(e.schema.space==="svg"?pz:fz)(t.tagName,a,n3(e,t.childNodes));if(E0(e,t,l),l.tagName==="template"){const u=t,d=u.sourceCodeLocation,h=d&&d.startTag&&pu(d.startTag),f=d&&d.endTag&&pu(d.endTag),p=Ov(e,u.content);h&&f&&e.file&&(p.position={start:h.end,end:f.start}),l.content=p}return e.schema=r,l}function E0(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=vz(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function vz(e,t,r){const n=pu(r);if(t.type==="element"){const a=t.children[t.children.length-1];if(n&&!r.endTag&&a&&a.position&&a.position.end&&(n.end=Object.assign({},a.position.end)),e.verbose){const o={};let l;if(r.attrs)for(l in r.attrs)r3.call(r.attrs,l)&&(o[yv(e.schema,l).property]=pu(r.attrs[l]));r.startTag;const u=pu(r.startTag),d=r.endTag?pu(r.endTag):void 0,h={opening:u};d&&(h.closing=d),h.properties=o,t.data={position:h}}}return n}function pu(e){const t=LS({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=LS({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function LS(e){return e.line&&e.column?e:void 0}class _g{constructor(t,r,n){this.property=t,this.normal=r,n&&(this.space=n)}}_g.prototype.property={};_g.prototype.normal={};_g.prototype.space=null;function a3(e,t){const r={},n={};let a=-1;for(;++a<e.length;)Object.assign(r,e[a].property),Object.assign(n,e[a].normal);return new _g(r,n,t)}function t1(e){return e.toLowerCase()}class zs{constructor(t,r){this.property=t,this.attribute=r}}zs.prototype.space=null;zs.prototype.boolean=!1;zs.prototype.booleanish=!1;zs.prototype.overloadedBoolean=!1;zs.prototype.number=!1;zs.prototype.commaSeparated=!1;zs.prototype.spaceSeparated=!1;zs.prototype.commaOrSpaceSeparated=!1;zs.prototype.mustUseProperty=!1;zs.prototype.defined=!1;let kz=0;const lr=cc(),Hn=cc(),s3=cc(),et=cc(),un=cc(),yu=cc(),fs=cc();function cc(){return 2**++kz}const r1=Object.freeze(Object.defineProperty({__proto__:null,boolean:lr,booleanish:Hn,commaOrSpaceSeparated:fs,commaSeparated:yu,number:et,overloadedBoolean:s3,spaceSeparated:un},Symbol.toStringTag,{value:"Module"})),Qb=Object.keys(r1);class Iv extends zs{constructor(t,r,n,a){let o=-1;if(super(t,r),jS(this,"space",a),typeof n=="number")for(;++o<Qb.length;){const l=Qb[o];jS(this,Qb[o],(n&r1[l])===r1[l])}}}Iv.prototype.defined=!0;function jS(e,t,r){r&&(e[t]=r)}const wz={}.hasOwnProperty;function Xu(e){const t={},r={};let n;for(n in e.properties)if(wz.call(e.properties,n)){const a=e.properties[n],o=new Iv(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(o.mustUseProperty=!0),t[n]=o,r[t1(n)]=n,r[t1(o.attribute)]=n}return new _g(t,r,e.space)}const i3=Xu({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),o3=Xu({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function l3(e,t){return t in e?e[t]:t}function c3(e,t){return l3(e,t.toLowerCase())}const u3=Xu({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:c3,properties:{xmlns:null,xmlnsXLink:null}}),d3=Xu({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Hn,ariaAutoComplete:null,ariaBusy:Hn,ariaChecked:Hn,ariaColCount:et,ariaColIndex:et,ariaColSpan:et,ariaControls:un,ariaCurrent:null,ariaDescribedBy:un,ariaDetails:null,ariaDisabled:Hn,ariaDropEffect:un,ariaErrorMessage:null,ariaExpanded:Hn,ariaFlowTo:un,ariaGrabbed:Hn,ariaHasPopup:null,ariaHidden:Hn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:un,ariaLevel:et,ariaLive:null,ariaModal:Hn,ariaMultiLine:Hn,ariaMultiSelectable:Hn,ariaOrientation:null,ariaOwns:un,ariaPlaceholder:null,ariaPosInSet:et,ariaPressed:Hn,ariaReadOnly:Hn,ariaRelevant:null,ariaRequired:Hn,ariaRoleDescription:un,ariaRowCount:et,ariaRowIndex:et,ariaRowSpan:et,ariaSelected:Hn,ariaSetSize:et,ariaSort:null,ariaValueMax:et,ariaValueMin:et,ariaValueNow:et,ariaValueText:null,role:null}}),Ez=Xu({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:c3,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yu,acceptCharset:un,accessKey:un,action:null,allow:null,allowFullScreen:lr,allowPaymentRequest:lr,allowUserMedia:lr,alt:null,as:null,async:lr,autoCapitalize:null,autoComplete:un,autoFocus:lr,autoPlay:lr,blocking:un,capture:null,charSet:null,checked:lr,cite:null,className:un,cols:et,colSpan:null,content:null,contentEditable:Hn,controls:lr,controlsList:un,coords:et|yu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:lr,defer:lr,dir:null,dirName:null,disabled:lr,download:s3,draggable:Hn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:lr,formTarget:null,headers:un,height:et,hidden:lr,high:et,href:null,hrefLang:null,htmlFor:un,httpEquiv:un,id:null,imageSizes:null,imageSrcSet:null,inert:lr,inputMode:null,integrity:null,is:null,isMap:lr,itemId:null,itemProp:un,itemRef:un,itemScope:lr,itemType:un,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:lr,low:et,manifest:null,max:null,maxLength:et,media:null,method:null,min:null,minLength:et,multiple:lr,muted:lr,name:null,nonce:null,noModule:lr,noValidate:lr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:lr,optimum:et,pattern:null,ping:un,placeholder:null,playsInline:lr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:lr,referrerPolicy:null,rel:un,required:lr,reversed:lr,rows:et,rowSpan:et,sandbox:un,scope:null,scoped:lr,seamless:lr,selected:lr,shadowRootClonable:lr,shadowRootDelegatesFocus:lr,shadowRootMode:null,shape:null,size:et,sizes:null,slot:null,span:et,spellCheck:Hn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:et,step:null,style:null,tabIndex:et,target:null,title:null,translate:null,type:null,typeMustMatch:lr,useMap:null,value:Hn,width:et,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:un,axis:null,background:null,bgColor:null,border:et,borderColor:null,bottomMargin:et,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:lr,declare:lr,event:null,face:null,frame:null,frameBorder:null,hSpace:et,leftMargin:et,link:null,longDesc:null,lowSrc:null,marginHeight:et,marginWidth:et,noResize:lr,noHref:lr,noShade:lr,noWrap:lr,object:null,profile:null,prompt:null,rev:null,rightMargin:et,rules:null,scheme:null,scrolling:Hn,standby:null,summary:null,text:null,topMargin:et,valueType:null,version:null,vAlign:null,vLink:null,vSpace:et,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:lr,disableRemotePlayback:lr,prefix:null,property:null,results:et,security:null,unselectable:null}}),_z=Xu({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:l3,properties:{about:fs,accentHeight:et,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:et,amplitude:et,arabicForm:null,ascent:et,attributeName:null,attributeType:null,azimuth:et,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:et,by:null,calcMode:null,capHeight:et,className:un,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:et,diffuseConstant:et,direction:null,display:null,dur:null,divisor:et,dominantBaseline:null,download:lr,dx:null,dy:null,edgeMode:null,editable:null,elevation:et,enableBackground:null,end:null,event:null,exponent:et,externalResourcesRequired:null,fill:null,fillOpacity:et,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yu,g2:yu,glyphName:yu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:et,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:et,horizOriginX:et,horizOriginY:et,id:null,ideographic:et,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:et,k:et,k1:et,k2:et,k3:et,k4:et,kernelMatrix:fs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:et,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:et,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:et,overlineThickness:et,paintOrder:null,panose1:null,path:null,pathLength:et,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:un,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:et,pointsAtY:et,pointsAtZ:et,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fs,rev:fs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fs,requiredFeatures:fs,requiredFonts:fs,requiredFormats:fs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:et,specularExponent:et,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:et,strikethroughThickness:et,string:null,stroke:null,strokeDashArray:fs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:et,strokeOpacity:et,strokeWidth:null,style:null,surfaceScale:et,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fs,tabIndex:et,tableValues:null,target:null,targetX:et,targetY:et,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:et,underlineThickness:et,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:et,values:null,vAlphabetic:et,vMathematical:et,vectorEffect:null,vHanging:et,vIdeographic:et,version:null,vertAdvY:et,vertOriginX:et,vertOriginY:et,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:et,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Sz=/^data[-\w.:]+$/i,MS=/-[a-z]/g,Tz=/[A-Z]/g;function Cz(e,t){const r=t1(t);let n=t,a=zs;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Sz.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(MS,Az);n="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!MS.test(o)){let l=o.replace(Tz,Nz);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}a=Iv}return new a(n,t)}function Nz(e){return"-"+e.toLowerCase()}function Az(e){return e.charAt(1).toUpperCase()}const Lz=a3([o3,i3,u3,d3,Ez],"html"),h3=a3([o3,i3,u3,d3,_z],"svg"),jz={},Mz={}.hasOwnProperty,g3=IA("type",{handlers:{root:Oz,element:Fz,text:Pz,comment:Bz,doctype:Dz}});function Rz(e,t){const n=(t||jz).space;return g3(e,n==="svg"?h3:Lz)}function Oz(e,t){const r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=Dv(e.children,r,t),Qu(e,r),r}function Iz(e,t){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=Dv(e.children,r,t),Qu(e,r),r}function Dz(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Qu(e,t),t}function Pz(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Qu(e,t),t}function Bz(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Qu(e,t),t}function Fz(e,t){const r=t;let n=r;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=h3);const a=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&Mz.call(e.properties,o)){const d=Uz(n,o,e.properties[o]);d&&a.push(d)}}const l=n.space,u={nodeName:e.tagName,tagName:e.tagName,attrs:a,namespaceURI:Ul[l],childNodes:[],parentNode:null};return u.childNodes=Dv(e.children,u,n),Qu(e,u),e.tagName==="template"&&e.content&&(u.content=Iz(e.content,n)),u}function Uz(e,t,r){const n=Cz(e,t);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?WN(r):tA(r));const a={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const o=a.name.indexOf(":");o<0?a.prefix="":(a.name=a.name.slice(o+1),a.prefix=n.attribute.slice(0,o)),a.namespace=Ul[n.space]}return a}function Dv(e,t,r){let n=-1;const a=[];if(e)for(;++n<e.length;){const o=g3(e[n],r);o.parentNode=t,a.push(o)}return a}function Qu(e,t){const r=e.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const $z=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],zz=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),wn="";var Q;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Q||(Q={}));const Wa={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function f3(e){return e>=55296&&e<=57343}function Hz(e){return e>=56320&&e<=57343}function qz(e,t){return(e-55296)*1024+9216+t}function p3(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function m3(e){return e>=64976&&e<=65007||zz.has(e)}var je;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(je||(je={}));const Gz=65536;class Yz{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Gz,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,r){const{line:n,col:a,offset:o}=this,l=a+r,u=o+r;return{code:t,startLine:n,endLine:n,startCol:l,endCol:l,startOffset:u,endOffset:u}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(Hz(r))return this.pos++,this._addGap(),qz(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Q.EOF;return this._err(je.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let n=0;n<t.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==t.charCodeAt(n))return!1;return!0}peek(t){const r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;const n=this.html.charCodeAt(r);return n===Q.CARRIAGE_RETURN?Q.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;let t=this.html.charCodeAt(this.pos);return t===Q.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Q.LINE_FEED):t===Q.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,f3(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Q.LINE_FEED||t===Q.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){p3(t)?this._err(je.controlCharacterInInputStream):m3(t)&&this._err(je.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var xr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(xr||(xr={}));function x3(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}const Wz=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Vz=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function Kz(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Vz.get(e))!==null&&t!==void 0?t:e}var na;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(na||(na={}));const Xz=32;var Zo;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Zo||(Zo={}));function n1(e){return e>=na.ZERO&&e<=na.NINE}function Qz(e){return e>=na.UPPER_A&&e<=na.UPPER_F||e>=na.LOWER_A&&e<=na.LOWER_F}function Zz(e){return e>=na.UPPER_A&&e<=na.UPPER_Z||e>=na.LOWER_A&&e<=na.LOWER_Z||n1(e)}function Jz(e){return e===na.EQUALS||Zz(e)}var ra;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ra||(ra={}));var oo;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(oo||(oo={}));class eH{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=ra.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=oo.Strict}startEntity(t){this.decodeMode=t,this.state=ra.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case ra.EntityStart:return t.charCodeAt(r)===na.NUM?(this.state=ra.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=ra.NamedEntity,this.stateNamedEntity(t,r));case ra.NumericStart:return this.stateNumericStart(t,r);case ra.NumericDecimal:return this.stateNumericDecimal(t,r);case ra.NumericHex:return this.stateNumericHex(t,r);case ra.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|Xz)===na.LOWER_X?(this.state=ra.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=ra.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,a){if(r!==n){const o=n-r;this.result=this.result*Math.pow(a,o)+Number.parseInt(t.substr(r,o),a),this.consumed+=o}}stateNumericHex(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(n1(a)||Qz(a))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(n1(a))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===na.SEMI)this.consumed+=1;else if(this.decodeMode===oo.Strict)return 0;return this.emitCodePoint(Kz(this.result),this.consumed),this.errors&&(t!==na.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:n}=this;let a=n[this.treeIndex],o=(a&Zo.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const l=t.charCodeAt(r);if(this.treeIndex=tH(n,a,this.treeIndex+Math.max(1,o),l),this.treeIndex<0)return this.result===0||this.decodeMode===oo.Attribute&&(o===0||Jz(l))?0:this.emitNotTerminatedNamedEntity();if(a=n[this.treeIndex],o=(a&Zo.VALUE_LENGTH)>>14,o!==0){if(l===na.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==oo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:n}=this,a=(n[r]&Zo.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){const{decodeTree:a}=this;return this.emitCodePoint(r===1?a[t]&~Zo.VALUE_LENGTH:a[t+1],n),r===3&&this.emitCodePoint(a[t+2],n),n}end(){var t;switch(this.state){case ra.NamedEntity:return this.result!==0&&(this.decodeMode!==oo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ra.NumericDecimal:return this.emitNumericEntity(0,2);case ra.NumericHex:return this.emitNumericEntity(0,3);case ra.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ra.EntityStart:return 0}}}function tH(e,t,r,n){const a=(t&Zo.BRANCH_LENGTH)>>7,o=t&Zo.JUMP_TABLE;if(a===0)return o!==0&&n===o?r:-1;if(o){const d=n-o;return d<0||d>=a?-1:e[r+d]-1}let l=r,u=l+a-1;for(;l<=u;){const d=l+u>>>1,h=e[d];if(h<n)l=d+1;else if(h>n)u=d-1;else return e[d+a]}return-1}var Ve;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ve||(Ve={}));var Wl;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Wl||(Wl={}));var Ps;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ps||(Ps={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we||(we={}));var E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(E||(E={}));const rH=new Map([[we.A,E.A],[we.ADDRESS,E.ADDRESS],[we.ANNOTATION_XML,E.ANNOTATION_XML],[we.APPLET,E.APPLET],[we.AREA,E.AREA],[we.ARTICLE,E.ARTICLE],[we.ASIDE,E.ASIDE],[we.B,E.B],[we.BASE,E.BASE],[we.BASEFONT,E.BASEFONT],[we.BGSOUND,E.BGSOUND],[we.BIG,E.BIG],[we.BLOCKQUOTE,E.BLOCKQUOTE],[we.BODY,E.BODY],[we.BR,E.BR],[we.BUTTON,E.BUTTON],[we.CAPTION,E.CAPTION],[we.CENTER,E.CENTER],[we.CODE,E.CODE],[we.COL,E.COL],[we.COLGROUP,E.COLGROUP],[we.DD,E.DD],[we.DESC,E.DESC],[we.DETAILS,E.DETAILS],[we.DIALOG,E.DIALOG],[we.DIR,E.DIR],[we.DIV,E.DIV],[we.DL,E.DL],[we.DT,E.DT],[we.EM,E.EM],[we.EMBED,E.EMBED],[we.FIELDSET,E.FIELDSET],[we.FIGCAPTION,E.FIGCAPTION],[we.FIGURE,E.FIGURE],[we.FONT,E.FONT],[we.FOOTER,E.FOOTER],[we.FOREIGN_OBJECT,E.FOREIGN_OBJECT],[we.FORM,E.FORM],[we.FRAME,E.FRAME],[we.FRAMESET,E.FRAMESET],[we.H1,E.H1],[we.H2,E.H2],[we.H3,E.H3],[we.H4,E.H4],[we.H5,E.H5],[we.H6,E.H6],[we.HEAD,E.HEAD],[we.HEADER,E.HEADER],[we.HGROUP,E.HGROUP],[we.HR,E.HR],[we.HTML,E.HTML],[we.I,E.I],[we.IMG,E.IMG],[we.IMAGE,E.IMAGE],[we.INPUT,E.INPUT],[we.IFRAME,E.IFRAME],[we.KEYGEN,E.KEYGEN],[we.LABEL,E.LABEL],[we.LI,E.LI],[we.LINK,E.LINK],[we.LISTING,E.LISTING],[we.MAIN,E.MAIN],[we.MALIGNMARK,E.MALIGNMARK],[we.MARQUEE,E.MARQUEE],[we.MATH,E.MATH],[we.MENU,E.MENU],[we.META,E.META],[we.MGLYPH,E.MGLYPH],[we.MI,E.MI],[we.MO,E.MO],[we.MN,E.MN],[we.MS,E.MS],[we.MTEXT,E.MTEXT],[we.NAV,E.NAV],[we.NOBR,E.NOBR],[we.NOFRAMES,E.NOFRAMES],[we.NOEMBED,E.NOEMBED],[we.NOSCRIPT,E.NOSCRIPT],[we.OBJECT,E.OBJECT],[we.OL,E.OL],[we.OPTGROUP,E.OPTGROUP],[we.OPTION,E.OPTION],[we.P,E.P],[we.PARAM,E.PARAM],[we.PLAINTEXT,E.PLAINTEXT],[we.PRE,E.PRE],[we.RB,E.RB],[we.RP,E.RP],[we.RT,E.RT],[we.RTC,E.RTC],[we.RUBY,E.RUBY],[we.S,E.S],[we.SCRIPT,E.SCRIPT],[we.SEARCH,E.SEARCH],[we.SECTION,E.SECTION],[we.SELECT,E.SELECT],[we.SOURCE,E.SOURCE],[we.SMALL,E.SMALL],[we.SPAN,E.SPAN],[we.STRIKE,E.STRIKE],[we.STRONG,E.STRONG],[we.STYLE,E.STYLE],[we.SUB,E.SUB],[we.SUMMARY,E.SUMMARY],[we.SUP,E.SUP],[we.TABLE,E.TABLE],[we.TBODY,E.TBODY],[we.TEMPLATE,E.TEMPLATE],[we.TEXTAREA,E.TEXTAREA],[we.TFOOT,E.TFOOT],[we.TD,E.TD],[we.TH,E.TH],[we.THEAD,E.THEAD],[we.TITLE,E.TITLE],[we.TR,E.TR],[we.TRACK,E.TRACK],[we.TT,E.TT],[we.U,E.U],[we.UL,E.UL],[we.SVG,E.SVG],[we.VAR,E.VAR],[we.WBR,E.WBR],[we.XMP,E.XMP]]);function Zu(e){var t;return(t=rH.get(e))!==null&&t!==void 0?t:E.UNKNOWN}const Qe=E,nH={[Ve.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Ve.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Ve.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Ve.XLINK]:new Set,[Ve.XML]:new Set,[Ve.XMLNS]:new Set},a1=new Set([Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6]);we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;var te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(te||(te={}));const Rn={DATA:te.DATA,RCDATA:te.RCDATA,RAWTEXT:te.RAWTEXT,SCRIPT_DATA:te.SCRIPT_DATA,PLAINTEXT:te.PLAINTEXT,CDATA_SECTION:te.CDATA_SECTION};function aH(e){return e>=Q.DIGIT_0&&e<=Q.DIGIT_9}function kh(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_Z}function sH(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_Z}function Yo(e){return sH(e)||kh(e)}function RS(e){return Yo(e)||aH(e)}function e0(e){return e+32}function b3(e){return e===Q.SPACE||e===Q.LINE_FEED||e===Q.TABULATION||e===Q.FORM_FEED}function OS(e){return b3(e)||e===Q.SOLIDUS||e===Q.GREATER_THAN_SIGN}function iH(e){return e===Q.NULL?je.nullCharacterReference:e>1114111?je.characterReferenceOutsideUnicodeRange:f3(e)?je.surrogateCharacterReference:m3(e)?je.noncharacterCharacterReference:p3(e)||e===Q.CARRIAGE_RETURN?je.controlCharacterReference:null}class oH{constructor(t,r){this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=te.DATA,this.returnState=te.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Yz(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new eH(Wz,(n,a)=>{this.preprocessor.pos=this.entityStartPos+a-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(je.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(je.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const a=iH(n);a&&this._err(a,1)}}:void 0)}_err(t,r=0){var n,a;(a=(n=this.handler).onParseError)===null||a===void 0||a.call(n,this.preprocessor.getError(t,r))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,r,n){this.active=!0,this.preprocessor.write(t,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let r=0;r<t;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,r){return this.preprocessor.startsWith(t,r)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:xr.START_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:xr.END_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:xr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:xr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,r){this.currentCharacterToken={type:t,chars:r,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,r;const n=this.currentToken;if(x3(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const a=(t=(r=n.location).attrs)!==null&&t!==void 0?t:r.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(je.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Zu(t.tagName),t.type===xr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(je.endTagWithAttributes),t.selfClosing&&this._err(je.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case xr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case xr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case xr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:xr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,r)}_emitCodePoint(t){const r=b3(t)?xr.WHITESPACE_CHARACTER:t===Q.NULL?xr.NULL_CHARACTER:xr.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(xr.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=te.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?oo.Attribute:oo.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case te.DATA:{this._stateData(t);break}case te.RCDATA:{this._stateRcdata(t);break}case te.RAWTEXT:{this._stateRawtext(t);break}case te.SCRIPT_DATA:{this._stateScriptData(t);break}case te.PLAINTEXT:{this._statePlaintext(t);break}case te.TAG_OPEN:{this._stateTagOpen(t);break}case te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case te.TAG_NAME:{this._stateTagName(t);break}case te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case te.COMMENT_START:{this._stateCommentStart(t);break}case te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case te.COMMENT:{this._stateComment(t);break}case te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case te.COMMENT_END:{this._stateCommentEnd(t);break}case te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case te.DOCTYPE:{this._stateDoctype(t);break}case te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case te.CDATA_SECTION:{this._stateCdataSection(t);break}case te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case te.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.TAG_OPEN;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitCodePoint(t);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Q.AMPERSAND:{this._startCharacterReference();break}case Q.LESS_THAN_SIGN:{this.state=te.RCDATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.RAWTEXT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Yo(t))this._createStartTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.EXCLAMATION_MARK:{this.state=te.MARKUP_DECLARATION_OPEN;break}case Q.SOLIDUS:{this.state=te.END_TAG_OPEN;break}case Q.QUESTION_MARK:{this._err(je.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t);break}case Q.EOF:{this._err(je.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(je.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Yo(t))this._createEndTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.GREATER_THAN_SIGN:{this._err(je.missingEndTagName),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(je.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.tagName+=wn;break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(kh(t)?e0(t):t)}}_stateRcdataLessThanSign(t){t===Q.SOLIDUS?this.state=te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Yo(t)?(this.state=te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=te.BEFORE_ATTRIBUTE_NAME,!1;case Q.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=te.SELF_CLOSING_START_TAG,!1;case Q.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Q.SOLIDUS?this.state=te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Yo(t)?(this.state=te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Q.SOLIDUS:{this.state=te.SCRIPT_DATA_END_TAG_OPEN;break}case Q.EXCLAMATION_MARK:{this.state=te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Yo(t)?(this.state=te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Q.SOLIDUS?this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Yo(t)?(this._emitChars("<"),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Yo(t)?(this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Wa.SCRIPT,!1)&&OS(this.preprocessor.peek(Wa.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<Wa.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(wn);break}case Q.EOF:{this._err(je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Q.SOLIDUS?(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Wa.SCRIPT,!1)&&OS(this.preprocessor.peek(Wa.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<Wa.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._err(je.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this._leaveAttrName(),this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._leaveAttrName(),this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:{this._err(je.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.currentAttr.name+=wn;break}default:this.currentAttr.name+=String.fromCodePoint(kh(t)?e0(t):t)}}_stateAfterAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.EQUALS_SIGN:{this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{this.state=te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this.state=te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingAttributeValue),this.state=te.DATA,this.emitCurrentTagToken();break}default:this.state=te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.currentAttr.value+=wn;break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.currentAttr.value+=wn;break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),this.currentAttr.value+=wn;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:case Q.EQUALS_SIGN:case Q.GRAVE_ACCENT:{this._err(je.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this._leaveAttrValue(),this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this._err(je.missingWhitespaceBetweenAttributes),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Q.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(je.eofInTag),this._emitEOFToken();break}default:this._err(je.unexpectedSolidusInTag),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.data+=wn;break}default:r.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Wa.DASH_DASH,!0)?(this._createCommentToken(Wa.DASH_DASH.length+1),this.state=te.COMMENT_START):this._consumeSequenceIfMatch(Wa.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Wa.DOCTYPE.length+1),this.state=te.DOCTYPE):this._consumeSequenceIfMatch(Wa.CDATA_START,!0)?this.inForeignNode?this.state=te.CDATA_SECTION:(this._err(je.cdataInHtmlContent),this._createCommentToken(Wa.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(je.incorrectlyOpenedComment),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_START_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptClosingOfEmptyComment),this.state=te.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptClosingOfEmptyComment),this.state=te.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this._err(je.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateComment(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END_DASH;break}case Q.LESS_THAN_SIGN:{r.data+="<",this.state=te.COMMENT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.data+=wn;break}case Q.EOF:{this._err(je.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const r=this.currentToken;switch(t){case Q.EXCLAMATION_MARK:{r.data+="!",this.state=te.COMMENT_LESS_THAN_SIGN_BANG;break}case Q.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Q.GREATER_THAN_SIGN&&t!==Q.EOF&&this._err(je.nestedComment),this.state=te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.EOF:{this._err(je.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(r);break}case Q.EXCLAMATION_MARK:{this.state=te.COMMENT_END_BANG;break}case Q.HYPHEN_MINUS:{r.data+="-";break}case Q.EOF:{this._err(je.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{r.data+="--!",this.state=te.COMMENT_END_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(je.incorrectlyClosedComment),this.state=te.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this._err(je.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Q.EOF:{this._err(je.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingWhitespaceBeforeDoctypeName),this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(kh(t))this._createDoctypeToken(String.fromCharCode(e0(t))),this.state=te.DOCTYPE_NAME;else switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.NULL:{this._err(je.unexpectedNullCharacter),this._createDoctypeToken(wn),this.state=te.DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=te.DOCTYPE_NAME}}_stateDoctypeName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.AFTER_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.name+=wn;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(kh(t)?e0(t):t)}}_stateAfterDoctypeName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Wa.PUBLIC,!1)?this.state=te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Wa.SYSTEM,!1)?this.state=te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(je.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(je.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(je.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{r.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.publicId+=wn;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.publicId+=wn;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.QUOTATION_MARK:{this._err(je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.QUOTATION_MARK:{r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(je.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(je.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(je.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.systemId+=wn;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(je.unexpectedNullCharacter),r.systemId+=wn;break}case Q.GREATER_THAN_SIGN:{this._err(je.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.EOF:{this._err(je.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(je.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=te.DATA;break}case Q.NULL:{this._err(je.unexpectedNullCharacter);break}case Q.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Q.RIGHT_SQUARE_BRACKET:{this.state=te.CDATA_SECTION_BRACKET;break}case Q.EOF:{this._err(je.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Q.RIGHT_SQUARE_BRACKET?this.state=te.CDATA_SECTION_END:(this._emitChars("]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA;break}case Q.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&RS(this.preprocessor.peek(1))?te.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){RS(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Q.SEMICOLON&&this._err(je.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const y3=new Set([E.DD,E.DT,E.LI,E.OPTGROUP,E.OPTION,E.P,E.RB,E.RP,E.RT,E.RTC]),IS=new Set([...y3,E.CAPTION,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]),Y0=new Set([E.APPLET,E.CAPTION,E.HTML,E.MARQUEE,E.OBJECT,E.TABLE,E.TD,E.TEMPLATE,E.TH]),lH=new Set([...Y0,E.OL,E.UL]),cH=new Set([...Y0,E.BUTTON]),DS=new Set([E.ANNOTATION_XML,E.MI,E.MN,E.MO,E.MS,E.MTEXT]),PS=new Set([E.DESC,E.FOREIGN_OBJECT,E.TITLE]),uH=new Set([E.TR,E.TEMPLATE,E.HTML]),dH=new Set([E.TBODY,E.TFOOT,E.THEAD,E.TEMPLATE,E.HTML]),hH=new Set([E.TABLE,E.TEMPLATE,E.HTML]),gH=new Set([E.TD,E.TH]);class fH{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=E.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===E.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ve.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){const n=this._indexOf(t);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(t,r,n){const a=this._indexOf(t)+1;this.items.splice(a,0,r),this.tagIDs.splice(a,0,n),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Ve.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(t){for(;this.stackTop>=t;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){const r=this._indexOf(t);this.shortenToLength(Math.max(r,0))}popUntilPopped(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(a1,Ve.HTML)}popUntilTableCellPopped(){this.popUntilPopped(gH,Ve.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let n=this.stackTop;n>=0;n--)if(t.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(hH,Ve.HTML)}clearBackToTableBodyContext(){this.clearBackTo(dH,Ve.HTML)}clearBackToTableRowContext(){this.clearBackTo(uH,Ve.HTML)}remove(t){const r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===E.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===E.HTML}hasInDynamicScope(t,r){for(let n=this.stackTop;n>=0;n--){const a=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Ve.HTML:{if(a===t)return!0;if(r.has(a))return!1;break}case Ve.SVG:{if(PS.has(a))return!1;break}case Ve.MATHML:{if(DS.has(a))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Y0)}hasInListItemScope(t){return this.hasInDynamicScope(t,lH)}hasInButtonScope(t){return this.hasInDynamicScope(t,cH)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case Ve.HTML:{if(a1.has(r))return!0;if(Y0.has(r))return!1;break}case Ve.SVG:{if(PS.has(r))return!1;break}case Ve.MATHML:{if(DS.has(r))return!1;break}}}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ve.HTML)switch(this.tagIDs[r]){case t:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Ve.HTML)switch(this.tagIDs[t]){case E.TBODY:case E.THEAD:case E.TFOOT:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ve.HTML)switch(this.tagIDs[r]){case t:return!0;case E.OPTION:case E.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&y3.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&IS.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&IS.has(this.currentTagId);)this.pop()}}const Zb=3;var Si;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Si||(Si={}));const BS={type:Si.Marker};class pH{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){const n=[],a=r.length,o=this.treeAdapter.getTagName(t),l=this.treeAdapter.getNamespaceURI(t);for(let u=0;u<this.entries.length;u++){const d=this.entries[u];if(d.type===Si.Marker)break;const{element:h}=d;if(this.treeAdapter.getTagName(h)===o&&this.treeAdapter.getNamespaceURI(h)===l){const f=this.treeAdapter.getAttrList(h);f.length===a&&n.push({idx:u,attrs:f})}}return n}_ensureNoahArkCondition(t){if(this.entries.length<Zb)return;const r=this.treeAdapter.getAttrList(t),n=this._getNoahArkConditionCandidates(t,r);if(n.length<Zb)return;const a=new Map(r.map(l=>[l.name,l.value]));let o=0;for(let l=0;l<n.length;l++){const u=n[l];u.attrs.every(d=>a.get(d.name)===d.value)&&(o+=1,o>=Zb&&this.entries.splice(u.idx,1))}}insertMarker(){this.entries.unshift(BS)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:Si.Element,element:t,token:r})}insertElementAfterBookmark(t,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:Si.Element,element:t,token:r})}removeEntry(t){const r=this.entries.indexOf(t);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){const t=this.entries.indexOf(BS);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const r=this.entries.find(n=>n.type===Si.Marker||this.treeAdapter.getTagName(n.element)===t);return r&&r.type===Si.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===Si.Element&&r.element===t)}}const Wo={createDocument(){return{nodeName:"#document",mode:Ps.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,n){const a=e.childNodes.find(o=>o.nodeName==="#documentType");if(a)a.name=t,a.publicId=r,a.systemId=n;else{const o={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};Wo.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(Wo.isTextNode(r)){r.value+=t;return}}Wo.appendChild(e,Wo.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&Wo.isTextNode(n)?n.value+=t:Wo.insertBefore(e,Wo.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(n=>n.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},v3="html",mH="about:legacy-compat",xH="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",k3=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],bH=[...k3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],yH=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),w3=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],vH=[...w3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function FS(e,t){return t.some(r=>e.startsWith(r))}function kH(e){return e.name===v3&&e.publicId===null&&(e.systemId===null||e.systemId===mH)}function wH(e){if(e.name!==v3)return Ps.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===xH)return Ps.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),yH.has(r))return Ps.QUIRKS;let n=t===null?bH:k3;if(FS(r,n))return Ps.QUIRKS;if(n=t===null?w3:vH,FS(r,n))return Ps.LIMITED_QUIRKS}return Ps.NO_QUIRKS}const US={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},EH="definitionurl",_H="definitionURL",SH=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),TH=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ve.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ve.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ve.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ve.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ve.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ve.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ve.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ve.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ve.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ve.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ve.XMLNS}]]),CH=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),NH=new Set([E.B,E.BIG,E.BLOCKQUOTE,E.BODY,E.BR,E.CENTER,E.CODE,E.DD,E.DIV,E.DL,E.DT,E.EM,E.EMBED,E.H1,E.H2,E.H3,E.H4,E.H5,E.H6,E.HEAD,E.HR,E.I,E.IMG,E.LI,E.LISTING,E.MENU,E.META,E.NOBR,E.OL,E.P,E.PRE,E.RUBY,E.S,E.SMALL,E.SPAN,E.STRONG,E.STRIKE,E.SUB,E.SUP,E.TABLE,E.TT,E.U,E.UL,E.VAR]);function AH(e){const t=e.tagID;return t===E.FONT&&e.attrs.some(({name:n})=>n===Wl.COLOR||n===Wl.SIZE||n===Wl.FACE)||NH.has(t)}function E3(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===EH){e.attrs[t].name=_H;break}}function _3(e){for(let t=0;t<e.attrs.length;t++){const r=SH.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function Pv(e){for(let t=0;t<e.attrs.length;t++){const r=TH.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function LH(e){const t=CH.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Zu(e.tagName))}function jH(e,t){return t===Ve.MATHML&&(e===E.MI||e===E.MO||e===E.MN||e===E.MS||e===E.MTEXT)}function MH(e,t,r){if(t===Ve.MATHML&&e===E.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===Wl.ENCODING){const a=r[n].value.toLowerCase();return a===US.TEXT_HTML||a===US.APPLICATION_XML}}return t===Ve.SVG&&(e===E.FOREIGN_OBJECT||e===E.DESC||e===E.TITLE)}function RH(e,t,r,n){return(!n||n===Ve.HTML)&&MH(e,t,r)||(!n||n===Ve.MATHML)&&jH(e,t)}const OH="hidden",IH=8,DH=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const PH={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},S3=new Set([E.TABLE,E.TBODY,E.TFOOT,E.THEAD,E.TR]),$S={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Wo,onParseError:null};class zS{constructor(t,r,n=null,a=null){this.fragmentContext=n,this.scriptHandler=a,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...$S,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new oH(this.options,this),this.activeFormattingElements=new pH(this.treeAdapter),this.fragmentContextID=n?Zu(this.treeAdapter.getTagName(n)):E.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new fH(this.document,this.treeAdapter,this)}static parse(t,r){const n=new this(r);return n.tokenizer.write(t,!0),n.document}static getFragmentParser(t,r){const n={...$S,...r};t??(t=n.treeAdapter.createElement(we.TEMPLATE,Ve.HTML,[]));const a=n.treeAdapter.createElement("documentmock",Ve.HTML,[]),o=new this(n,a,t);return o.fragmentContextID===E.TEMPLATE&&o.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,r),r}_err(t,r,n){var a;if(!this.onParseError)return;const o=(a=t.location)!==null&&a!==void 0?a:PH,l={code:r,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:n?o.startLine:o.endLine,endCol:n?o.startCol:o.endCol,endOffset:n?o.startOffset:o.endOffset};this.onParseError(l)}onItemPush(t,r,n){var a,o;(o=(a=this.treeAdapter).onItemPush)===null||o===void 0||o.call(a,t),n&&this.openElements.stackTop>0&&this._setContextModes(t,r)}onItemPop(t,r){var n,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(a=(n=this.treeAdapter).onItemPop)===null||a===void 0||a.call(n,t,this.openElements.current),r){let o,l;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,l=this.fragmentContextID):{current:o,currentTagId:l}=this.openElements,this._setContextModes(o,l)}}_setContextModes(t,r){const n=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===Ve.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&t!==void 0&&r!==void 0&&!this._isIntegrationPoint(r,t)}_switchToTextParsing(t,r){this._insertElement(t,Ve.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=Rn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ve.HTML))switch(this.fragmentContextID){case E.TITLE:case E.TEXTAREA:{this.tokenizer.state=Rn.RCDATA;break}case E.STYLE:case E.XMP:case E.IFRAME:case E.NOEMBED:case E.NOFRAMES:case E.NOSCRIPT:{this.tokenizer.state=Rn.RAWTEXT;break}case E.SCRIPT:{this.tokenizer.state=Rn.SCRIPT_DATA;break}case E.PLAINTEXT:{this.tokenizer.state=Rn.PLAINTEXT;break}}}_setDocumentType(t){const r=t.name||"",n=t.publicId||"",a=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,a),t.location){const l=this.treeAdapter.getChildNodes(this.document).find(u=>this.treeAdapter.isDocumentTypeNode(u));l&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}}_attachElementToTree(t,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(t,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,t)}}_appendElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location)}_insertElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID)}_insertFakeElement(t,r){const n=this.treeAdapter.createElement(t,Ve.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(t){const r=this.treeAdapter.createElement(t.tagName,Ve.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Ve.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,E.HTML)}_appendCommentNode(t,r){const n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,t.location)}_insertCharacters(t){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,t.chars,n):this.treeAdapter.insertText(r,t.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,t.chars)),!t.location)return;const a=this.treeAdapter.getChildNodes(r),o=n?a.lastIndexOf(n):a.length,l=a[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(l)){const{endLine:d,endCol:h,endOffset:f}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(l,{endLine:d,endCol:h,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}_adoptNodes(t,r){for(let n=this.treeAdapter.getFirstChild(t);n;n=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(t,r){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&r.location){const n=r.location,a=this.treeAdapter.getTagName(t),o=r.type===xr.END_TAG&&a===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,t.tagID===E.SVG&&this.treeAdapter.getTagName(r)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Ve.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===E.MGLYPH||t.tagID===E.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,r,Ve.HTML)}_processToken(t){switch(t.type){case xr.CHARACTER:{this.onCharacter(t);break}case xr.NULL_CHARACTER:{this.onNullCharacter(t);break}case xr.COMMENT:{this.onComment(t);break}case xr.DOCTYPE:{this.onDoctype(t);break}case xr.START_TAG:{this._processStartTag(t);break}case xr.END_TAG:{this.onEndTag(t);break}case xr.EOF:{this.onEof(t);break}case xr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,r,n){const a=this.treeAdapter.getNamespaceURI(r),o=this.treeAdapter.getAttrList(r);return RH(t,a,o,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const r=this.activeFormattingElements.entries.findIndex(a=>a.type===Si.Marker||this.openElements.contains(a.element)),n=r===-1?t-1:r-1;for(let a=n;a>=0;a--){const o=this.activeFormattingElements.entries[a];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(E.P),this.openElements.popUntilTagNamePopped(E.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case E.TR:{this.insertionMode=ie.IN_ROW;return}case E.TBODY:case E.THEAD:case E.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case E.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case E.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case E.TABLE:{this.insertionMode=ie.IN_TABLE;return}case E.BODY:{this.insertionMode=ie.IN_BODY;return}case E.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case E.SELECT:{this._resetInsertionModeForSelect(t);return}case E.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case E.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case E.TD:case E.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case E.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let r=t-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===E.TEMPLATE)break;if(n===E.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return S3.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case E.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Ve.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case E.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,t,r.beforeElement):this.treeAdapter.appendChild(r.parent,t)}_isSpecialElement(t,r){const n=this.treeAdapter.getNamespaceURI(t);return nH[n].has(r)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){gG(this,t);return}switch(this.insertionMode){case ie.INITIAL:{ah(this,t);break}case ie.BEFORE_HTML:{Ph(this,t);break}case ie.BEFORE_HEAD:{Bh(this,t);break}case ie.IN_HEAD:{Fh(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Uh(this,t);break}case ie.AFTER_HEAD:{$h(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{C3(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jb(this,t);break}case ie.IN_TABLE_TEXT:{R3(this,t);break}case ie.IN_COLUMN_GROUP:{W0(this,t);break}case ie.AFTER_BODY:{V0(this,t);break}case ie.AFTER_AFTER_BODY:{_0(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hG(this,t);return}switch(this.insertionMode){case ie.INITIAL:{ah(this,t);break}case ie.BEFORE_HTML:{Ph(this,t);break}case ie.BEFORE_HEAD:{Bh(this,t);break}case ie.IN_HEAD:{Fh(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Uh(this,t);break}case ie.AFTER_HEAD:{$h(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jb(this,t);break}case ie.IN_COLUMN_GROUP:{W0(this,t);break}case ie.AFTER_BODY:{V0(this,t);break}case ie.AFTER_AFTER_BODY:{_0(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){s1(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{s1(this,t);break}case ie.IN_TABLE_TEXT:{sh(this,t);break}case ie.AFTER_BODY:{qH(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{GH(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{YH(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,je.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{sh(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,je.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?fG(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{ah(this,t);break}case ie.BEFORE_HTML:{WH(this,t);break}case ie.BEFORE_HEAD:{KH(this,t);break}case ie.IN_HEAD:{oi(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{ZH(this,t);break}case ie.AFTER_HEAD:{eq(this,t);break}case ie.IN_BODY:{Ta(this,t);break}case ie.IN_TABLE:{Mu(this,t);break}case ie.IN_TABLE_TEXT:{sh(this,t);break}case ie.IN_CAPTION:{Xq(this,t);break}case ie.IN_COLUMN_GROUP:{Uv(this,t);break}case ie.IN_TABLE_BODY:{Wp(this,t);break}case ie.IN_ROW:{Vp(this,t);break}case ie.IN_CELL:{Jq(this,t);break}case ie.IN_SELECT:{D3(this,t);break}case ie.IN_SELECT_IN_TABLE:{tG(this,t);break}case ie.IN_TEMPLATE:{nG(this,t);break}case ie.AFTER_BODY:{sG(this,t);break}case ie.IN_FRAMESET:{iG(this,t);break}case ie.AFTER_FRAMESET:{lG(this,t);break}case ie.AFTER_AFTER_BODY:{uG(this,t);break}case ie.AFTER_AFTER_FRAMESET:{dG(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?pG(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{ah(this,t);break}case ie.BEFORE_HTML:{VH(this,t);break}case ie.BEFORE_HEAD:{XH(this,t);break}case ie.IN_HEAD:{QH(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{JH(this,t);break}case ie.AFTER_HEAD:{tq(this,t);break}case ie.IN_BODY:{Yp(this,t);break}case ie.TEXT:{Uq(this,t);break}case ie.IN_TABLE:{Jh(this,t);break}case ie.IN_TABLE_TEXT:{sh(this,t);break}case ie.IN_CAPTION:{Qq(this,t);break}case ie.IN_COLUMN_GROUP:{Zq(this,t);break}case ie.IN_TABLE_BODY:{i1(this,t);break}case ie.IN_ROW:{I3(this,t);break}case ie.IN_CELL:{eG(this,t);break}case ie.IN_SELECT:{P3(this,t);break}case ie.IN_SELECT_IN_TABLE:{rG(this,t);break}case ie.IN_TEMPLATE:{aG(this,t);break}case ie.AFTER_BODY:{F3(this,t);break}case ie.IN_FRAMESET:{oG(this,t);break}case ie.AFTER_FRAMESET:{cG(this,t);break}case ie.AFTER_AFTER_BODY:{_0(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{ah(this,t);break}case ie.BEFORE_HTML:{Ph(this,t);break}case ie.BEFORE_HEAD:{Bh(this,t);break}case ie.IN_HEAD:{Fh(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Uh(this,t);break}case ie.AFTER_HEAD:{$h(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{j3(this,t);break}case ie.TEXT:{$q(this,t);break}case ie.IN_TABLE_TEXT:{sh(this,t);break}case ie.IN_TEMPLATE:{B3(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Fv(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Q.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{T3(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jb(this,t);break}case ie.IN_TABLE_TEXT:{M3(this,t);break}}}}function BH(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):L3(e,t),r}function FH(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const a=e.openElements.items[n];if(a===t.element)break;e._isSpecialElement(a,e.openElements.tagIDs[n])&&(r=a)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function UH(e,t,r){let n=t,a=e.openElements.getCommonAncestor(t);for(let o=0,l=a;l!==r;o++,l=a){a=e.openElements.getCommonAncestor(l);const u=e.activeFormattingElements.getElementEntry(l),d=u&&o>=DH;!u||d?(d&&e.activeFormattingElements.removeEntry(u),e.openElements.remove(l)):(l=$H(e,u),n===t&&(e.activeFormattingElements.bookmark=u),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(l,n),n=l)}return n}function $H(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function zH(e,t,r){const n=e.treeAdapter.getTagName(t),a=Zu(n);if(e._isElementCausesFosterParenting(a))e._fosterParentElement(r);else{const o=e.treeAdapter.getNamespaceURI(t);a===E.TEMPLATE&&o===Ve.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function HH(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:a}=r,o=e.treeAdapter.createElement(a.tagName,n,a.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,a),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,o,a.tagID)}function Bv(e,t){for(let r=0;r<IH;r++){const n=BH(e,t);if(!n)break;const a=FH(e,n);if(!a)break;e.activeFormattingElements.bookmark=n;const o=UH(e,a,n.element),l=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(o),l&&zH(e,l,o),HH(e,a,n)}}function s1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function qH(e,t){e._appendCommentNode(t,e.openElements.items[0])}function GH(e,t){e._appendCommentNode(t,e.document)}function Fv(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],a=e.treeAdapter.getNodeSourceCodeLocation(n);if(a&&!a.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],l=e.treeAdapter.getNodeSourceCodeLocation(o);l&&!l.endTag&&e._setEndLocation(o,t)}}}}function YH(e,t){e._setDocumentType(t);const r=t.forceQuirks?Ps.QUIRKS:wH(t);kH(t)||e._err(t,je.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=ie.BEFORE_HTML}function ah(e,t){e._err(t,je.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ps.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function WH(e,t){t.tagID===E.HTML?(e._insertElement(t,Ve.HTML),e.insertionMode=ie.BEFORE_HEAD):Ph(e,t)}function VH(e,t){const r=t.tagID;(r===E.HTML||r===E.HEAD||r===E.BODY||r===E.BR)&&Ph(e,t)}function Ph(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function KH(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.HEAD:{e._insertElement(t,Ve.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:Bh(e,t)}}function XH(e,t){const r=t.tagID;r===E.HEAD||r===E.BODY||r===E.HTML||r===E.BR?Bh(e,t):e._err(t,je.endTagWithoutMatchingOpenElement)}function Bh(e,t){e._insertFakeElement(we.HEAD,E.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function oi(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:{e._appendElement(t,Ve.HTML),t.ackSelfClosing=!0;break}case E.TITLE:{e._switchToTextParsing(t,Rn.RCDATA);break}case E.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Rn.RAWTEXT):(e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case E.NOFRAMES:case E.STYLE:{e._switchToTextParsing(t,Rn.RAWTEXT);break}case E.SCRIPT:{e._switchToTextParsing(t,Rn.SCRIPT_DATA);break}case E.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case E.HEAD:{e._err(t,je.misplacedStartTagForHeadElement);break}default:Fh(e,t)}}function QH(e,t){switch(t.tagID){case E.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case E.BODY:case E.BR:case E.HTML:{Fh(e,t);break}case E.TEMPLATE:{uc(e,t);break}default:e._err(t,je.endTagWithoutMatchingOpenElement)}}function uc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==E.TEMPLATE&&e._err(t,je.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,je.endTagWithoutMatchingOpenElement)}function Fh(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function ZH(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.BASEFONT:case E.BGSOUND:case E.HEAD:case E.LINK:case E.META:case E.NOFRAMES:case E.STYLE:{oi(e,t);break}case E.NOSCRIPT:{e._err(t,je.nestedNoscriptInHead);break}default:Uh(e,t)}}function JH(e,t){switch(t.tagID){case E.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case E.BR:{Uh(e,t);break}default:e._err(t,je.endTagWithoutMatchingOpenElement)}}function Uh(e,t){const r=t.type===xr.EOF?je.openElementsLeftAfterEof:je.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function eq(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.BODY:{e._insertElement(t,Ve.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case E.FRAMESET:{e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_FRAMESET;break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{e._err(t,je.abandonedHeadElementChild),e.openElements.push(e.headElement,E.HEAD),oi(e,t),e.openElements.remove(e.headElement);break}case E.HEAD:{e._err(t,je.misplacedStartTagForHeadElement);break}default:$h(e,t)}}function tq(e,t){switch(t.tagID){case E.BODY:case E.HTML:case E.BR:{$h(e,t);break}case E.TEMPLATE:{uc(e,t);break}default:e._err(t,je.endTagWithoutMatchingOpenElement)}}function $h(e,t){e._insertFakeElement(we.BODY,E.BODY),e.insertionMode=ie.IN_BODY,Gp(e,t)}function Gp(e,t){switch(t.type){case xr.CHARACTER:{C3(e,t);break}case xr.WHITESPACE_CHARACTER:{T3(e,t);break}case xr.COMMENT:{s1(e,t);break}case xr.START_TAG:{Ta(e,t);break}case xr.END_TAG:{Yp(e,t);break}case xr.EOF:{j3(e,t);break}}}function T3(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function C3(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function rq(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function nq(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function aq(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_FRAMESET)}function sq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML)}function iq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&a1.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ve.HTML)}function oq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function lq(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML),r||(e.formElement=e.openElements.current))}function cq(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const a=e.openElements.tagIDs[n];if(r===E.LI&&a===E.LI||(r===E.DD||r===E.DT)&&(a===E.DD||a===E.DT)){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(a!==E.ADDRESS&&a!==E.DIV&&a!==E.P&&e._isSpecialElement(e.openElements.items[n],a))break}e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML)}function uq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML),e.tokenizer.state=Rn.PLAINTEXT}function dq(e,t){e.openElements.hasInScope(E.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML),e.framesetOk=!1}function hq(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);r&&(Bv(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function gq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function fq(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(E.NOBR)&&(Bv(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ve.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function pq(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function mq(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ps.QUIRKS&&e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ve.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function N3(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ve.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function A3(e){const t=x3(e,Wl.TYPE);return t!=null&&t.toLowerCase()===OH}function xq(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ve.HTML),A3(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function bq(e,t){e._appendElement(t,Ve.HTML),t.ackSelfClosing=!0}function yq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._appendElement(t,Ve.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function vq(e,t){t.tagName=we.IMG,t.tagID=E.IMG,N3(e,t)}function kq(e,t){e._insertElement(t,Ve.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Rn.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function wq(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Rn.RAWTEXT)}function Eq(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Rn.RAWTEXT)}function HS(e,t){e._switchToTextParsing(t,Rn.RAWTEXT)}function _q(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Sq(e,t){e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML)}function Tq(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ve.HTML)}function Cq(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(E.RTC),e._insertElement(t,Ve.HTML)}function Nq(e,t){e._reconstructActiveFormattingElements(),E3(t),Pv(t),t.selfClosing?e._appendElement(t,Ve.MATHML):e._insertElement(t,Ve.MATHML),t.ackSelfClosing=!0}function Aq(e,t){e._reconstructActiveFormattingElements(),_3(t),Pv(t),t.selfClosing?e._appendElement(t,Ve.SVG):e._insertElement(t,Ve.SVG),t.ackSelfClosing=!0}function qS(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ve.HTML)}function Ta(e,t){switch(t.tagID){case E.I:case E.S:case E.B:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.SMALL:case E.STRIKE:case E.STRONG:{gq(e,t);break}case E.A:{hq(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{iq(e,t);break}case E.P:case E.DL:case E.OL:case E.UL:case E.DIV:case E.DIR:case E.NAV:case E.MAIN:case E.MENU:case E.ASIDE:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.DETAILS:case E.ADDRESS:case E.ARTICLE:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{sq(e,t);break}case E.LI:case E.DD:case E.DT:{cq(e,t);break}case E.BR:case E.IMG:case E.WBR:case E.AREA:case E.EMBED:case E.KEYGEN:{N3(e,t);break}case E.HR:{yq(e,t);break}case E.RB:case E.RTC:{Tq(e,t);break}case E.RT:case E.RP:{Cq(e,t);break}case E.PRE:case E.LISTING:{oq(e,t);break}case E.XMP:{wq(e,t);break}case E.SVG:{Aq(e,t);break}case E.HTML:{rq(e,t);break}case E.BASE:case E.LINK:case E.META:case E.STYLE:case E.TITLE:case E.SCRIPT:case E.BGSOUND:case E.BASEFONT:case E.TEMPLATE:{oi(e,t);break}case E.BODY:{nq(e,t);break}case E.FORM:{lq(e,t);break}case E.NOBR:{fq(e,t);break}case E.MATH:{Nq(e,t);break}case E.TABLE:{mq(e,t);break}case E.INPUT:{xq(e,t);break}case E.PARAM:case E.TRACK:case E.SOURCE:{bq(e,t);break}case E.IMAGE:{vq(e,t);break}case E.BUTTON:{dq(e,t);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{pq(e,t);break}case E.IFRAME:{Eq(e,t);break}case E.SELECT:{_q(e,t);break}case E.OPTION:case E.OPTGROUP:{Sq(e,t);break}case E.NOEMBED:case E.NOFRAMES:{HS(e,t);break}case E.FRAMESET:{aq(e,t);break}case E.TEXTAREA:{kq(e,t);break}case E.NOSCRIPT:{e.options.scriptingEnabled?HS(e,t):qS(e,t);break}case E.PLAINTEXT:{uq(e,t);break}case E.COL:case E.TH:case E.TD:case E.TR:case E.HEAD:case E.FRAME:case E.TBODY:case E.TFOOT:case E.THEAD:case E.CAPTION:case E.COLGROUP:break;default:qS(e,t)}}function Lq(e,t){if(e.openElements.hasInScope(E.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function jq(e,t){e.openElements.hasInScope(E.BODY)&&(e.insertionMode=ie.AFTER_BODY,F3(e,t))}function Mq(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function Rq(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(E.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(E.FORM):r&&e.openElements.remove(r))}function Oq(e){e.openElements.hasInButtonScope(E.P)||e._insertFakeElement(we.P,E.P),e._closePElement()}function Iq(e){e.openElements.hasInListItemScope(E.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(E.LI),e.openElements.popUntilTagNamePopped(E.LI))}function Dq(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function Pq(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Bq(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function Fq(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,E.BR),e.openElements.pop(),e.framesetOk=!1}function L3(e,t){const r=t.tagName,n=t.tagID;for(let a=e.openElements.stackTop;a>0;a--){const o=e.openElements.items[a],l=e.openElements.tagIDs[a];if(n===l&&(n!==E.UNKNOWN||e.treeAdapter.getTagName(o)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=a&&e.openElements.shortenToLength(a);break}if(e._isSpecialElement(o,l))break}}function Yp(e,t){switch(t.tagID){case E.A:case E.B:case E.I:case E.S:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.NOBR:case E.SMALL:case E.STRIKE:case E.STRONG:{Bv(e,t);break}case E.P:{Oq(e);break}case E.DL:case E.UL:case E.OL:case E.DIR:case E.DIV:case E.NAV:case E.PRE:case E.MAIN:case E.MENU:case E.ASIDE:case E.BUTTON:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.ADDRESS:case E.ARTICLE:case E.DETAILS:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.LISTING:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{Mq(e,t);break}case E.LI:{Iq(e);break}case E.DD:case E.DT:{Dq(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{Pq(e);break}case E.BR:{Fq(e);break}case E.BODY:{Lq(e,t);break}case E.HTML:{jq(e,t);break}case E.FORM:{Rq(e);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{Bq(e,t);break}case E.TEMPLATE:{uc(e,t);break}default:L3(e,t)}}function j3(e,t){e.tmplInsertionModeStack.length>0?B3(e,t):Fv(e,t)}function Uq(e,t){var r;t.tagID===E.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function $q(e,t){e._err(t,je.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Jb(e,t){if(e.openElements.currentTagId!==void 0&&S3.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case xr.CHARACTER:{R3(e,t);break}case xr.WHITESPACE_CHARACTER:{M3(e,t);break}}else Sg(e,t)}function zq(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_CAPTION}function Hq(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function qq(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,E.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,Uv(e,t)}function Gq(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Yq(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,E.TBODY),e.insertionMode=ie.IN_TABLE_BODY,Wp(e,t)}function Wq(e,t){e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Vq(e,t){A3(t)?e._appendElement(t,Ve.HTML):Sg(e,t),t.ackSelfClosing=!0}function Kq(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ve.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Mu(e,t){switch(t.tagID){case E.TD:case E.TH:case E.TR:{Yq(e,t);break}case E.STYLE:case E.SCRIPT:case E.TEMPLATE:{oi(e,t);break}case E.COL:{qq(e,t);break}case E.FORM:{Kq(e,t);break}case E.TABLE:{Wq(e,t);break}case E.TBODY:case E.TFOOT:case E.THEAD:{Gq(e,t);break}case E.INPUT:{Vq(e,t);break}case E.CAPTION:{zq(e,t);break}case E.COLGROUP:{Hq(e,t);break}default:Sg(e,t)}}function Jh(e,t){switch(t.tagID){case E.TABLE:{e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode());break}case E.TEMPLATE:{uc(e,t);break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:Sg(e,t)}}function Sg(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Gp(e,t),e.fosterParentingEnabled=r}function M3(e,t){e.pendingCharacterTokens.push(t)}function R3(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function sh(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)Sg(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const O3=new Set([E.CAPTION,E.COL,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]);function Xq(e,t){const r=t.tagID;O3.has(r)?e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,Mu(e,t)):Ta(e,t)}function Qq(e,t){const r=t.tagID;switch(r){case E.CAPTION:case E.TABLE:{e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,r===E.TABLE&&Jh(e,t));break}case E.BODY:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:Yp(e,t)}}function Uv(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.COL:{e._appendElement(t,Ve.HTML),t.ackSelfClosing=!0;break}case E.TEMPLATE:{oi(e,t);break}default:W0(e,t)}}function Zq(e,t){switch(t.tagID){case E.COLGROUP:{e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case E.TEMPLATE:{uc(e,t);break}case E.COL:break;default:W0(e,t)}}function W0(e,t){e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function Wp(e,t){switch(t.tagID){case E.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_ROW;break}case E.TH:case E.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,E.TR),e.insertionMode=ie.IN_ROW,Vp(e,t);break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,Mu(e,t));break}default:Mu(e,t)}}function i1(e,t){const r=t.tagID;switch(t.tagID){case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case E.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,Jh(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:case E.TR:break;default:Jh(e,t)}}function Vp(e,t){switch(t.tagID){case E.TH:case E.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ve.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,Wp(e,t));break}default:Mu(e,t)}}function I3(e,t){switch(t.tagID){case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case E.TABLE:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,i1(e,t));break}case E.TBODY:case E.TFOOT:case E.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(E.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,i1(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:break;default:Jh(e,t)}}function Jq(e,t){const r=t.tagID;O3.has(r)?(e.openElements.hasInTableScope(E.TD)||e.openElements.hasInTableScope(E.TH))&&(e._closeTableCell(),Vp(e,t)):Ta(e,t)}function eG(e,t){const r=t.tagID;switch(r){case E.TD:case E.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case E.TABLE:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),I3(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:break;default:Yp(e,t)}}function D3(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._insertElement(t,Ve.HTML);break}case E.OPTGROUP:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ve.HTML);break}case E.HR:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Ve.HTML),t.ackSelfClosing=!0;break}case E.INPUT:case E.KEYGEN:case E.TEXTAREA:case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),t.tagID!==E.SELECT&&e._processStartTag(t));break}case E.SCRIPT:case E.TEMPLATE:{oi(e,t);break}}}function P3(e,t){switch(t.tagID){case E.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===E.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===E.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop();break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop();break}case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode());break}case E.TEMPLATE:{uc(e,t);break}}}function tG(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e._processStartTag(t)):D3(e,t)}function rG(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e.onEndTag(t)):P3(e,t)}function nG(e,t){switch(t.tagID){case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{oi(e,t);break}case E.CAPTION:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,Mu(e,t);break}case E.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,Uv(e,t);break}case E.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,Wp(e,t);break}case E.TD:case E.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,Vp(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ta(e,t)}}function aG(e,t){t.tagID===E.TEMPLATE&&uc(e,t)}function B3(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Fv(e,t)}function sG(e,t){t.tagID===E.HTML?Ta(e,t):V0(e,t)}function F3(e,t){var r;if(t.tagID===E.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===E.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&e._setEndLocation(n,t)}}else V0(e,t)}function V0(e,t){e.insertionMode=ie.IN_BODY,Gp(e,t)}function iG(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.FRAMESET:{e._insertElement(t,Ve.HTML);break}case E.FRAME:{e._appendElement(t,Ve.HTML),t.ackSelfClosing=!0;break}case E.NOFRAMES:{oi(e,t);break}}}function oG(e,t){t.tagID===E.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==E.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function lG(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.NOFRAMES:{oi(e,t);break}}}function cG(e,t){t.tagID===E.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function uG(e,t){t.tagID===E.HTML?Ta(e,t):_0(e,t)}function _0(e,t){e.insertionMode=ie.IN_BODY,Gp(e,t)}function dG(e,t){switch(t.tagID){case E.HTML:{Ta(e,t);break}case E.NOFRAMES:{oi(e,t);break}}}function hG(e,t){t.chars=wn,e._insertCharacters(t)}function gG(e,t){e._insertCharacters(t),e.framesetOk=!1}function U3(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ve.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function fG(e,t){if(AH(t))U3(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===Ve.MATHML?E3(t):n===Ve.SVG&&(LH(t),_3(t)),Pv(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function pG(e,t){if(t.tagID===E.P||t.tagID===E.BR){U3(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===Ve.HTML){e._endTagOutsideForeignContent(t);break}const a=e.treeAdapter.getTagName(n);if(a.toLowerCase()===t.tagName){t.tagName=a,e.openElements.shortenToLength(r);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const mG=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,xG=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),GS={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function $3(e,t){const r=CG(e),n=IA("type",{handlers:{root:bG,element:yG,text:vG,comment:H3,doctype:kG,raw:EG},unknown:_G}),a={parser:r?new zS(GS):zS.getFragmentParser(void 0,GS),handle(u){n(u,a)},stitches:!1,options:t||{}};n(e,a),Ju(a,ji());const o=r?a.parser.document:a.parser.getFragment(),l=bz(o,{file:a.options.file});return a.stitches&&wg(l,"comment",function(u,d,h){const f=u;if(f.value.stitch&&h&&d!==void 0){const p=h.children;return p[d]=f.value.stitch,d}}),l.type==="root"&&l.children.length===1&&l.children[0].type===e.type?l.children[0]:l}function z3(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function bG(e,t){z3(e.children,t)}function yG(e,t){SG(e,t),z3(e.children,t),TG(e,t)}function vG(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const r={type:xr.CHARACTER,chars:e.value,location:Tg(e)};Ju(t,ji(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function kG(e,t){const r={type:xr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Tg(e)};Ju(t,ji(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function wG(e,t){t.stitches=!0;const r=NG(e);if("children"in e&&"children"in r){const n=$3({type:"root",children:e.children},t.options);r.children=n.children}H3({type:"comment",value:{stitch:r}},t)}function H3(e,t){const r=e.value,n={type:xr.COMMENT,data:r,location:Tg(e)};Ju(t,ji(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function EG(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,q3(t,ji(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(mG,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=t.parser.tokenizer._consume();t.parser.tokenizer._callState(r)}}function _G(e,t){const r=e;if(t.options.passThrough&&t.options.passThrough.includes(r.type))wG(r,t);else{let n="";throw xG.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function Ju(e,t){q3(e,t);const r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Rn.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function q3(e,t){if(t&&t.offset!==void 0){const r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function SG(e,t){const r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Rn.PLAINTEXT)return;Ju(t,ji(e));const n=t.parser.openElements.current;let a="namespaceURI"in n?n.namespaceURI:Ul.html;a===Ul.html&&r==="svg"&&(a=Ul.svg);const o=Rz({...e,children:[]},{space:a===Ul.svg?"svg":"html"}),l={type:xr.START_TAG,tagName:r,tagID:Zu(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Tg(e)};t.parser.currentToken=l,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}function TG(e,t){const r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&$z.includes(r)||t.parser.tokenizer.state===Rn.PLAINTEXT)return;Ju(t,Up(e));const n={type:xr.END_TAG,tagName:r,tagID:Zu(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Tg(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Rn.RCDATA||t.parser.tokenizer.state===Rn.RAWTEXT||t.parser.tokenizer.state===Rn.SCRIPT_DATA)&&(t.parser.tokenizer.state=Rn.DATA)}function CG(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Tg(e){const t=ji(e)||{line:void 0,column:void 0,offset:void 0},r=Up(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function NG(e){return"children"in e?Zl({...e,children:[]}):Zl(e)}function AG(e){return function(t,r){return $3(t,{...e,file:r})}}const Rl=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],zh={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Rl,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Rl],h2:[["className","sr-only"]],img:[...Rl,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Rl,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Rl],table:[...Rl],ul:[...Rl,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Ko={}.hasOwnProperty;function LG(e,t){let r={type:"root",children:[]};const n={schema:t?{...zh,...t}:zh,stack:[]},a=G3(n,e);return a&&(Array.isArray(a)?a.length===1?r=a[0]:r.children=a:r=a),r}function G3(e,t){if(t&&typeof t=="object"){const r=t;switch(typeof r.type=="string"?r.type:""){case"comment":return jG(e,r);case"doctype":return MG(e,r);case"element":return RG(e,r);case"root":return OG(e,r);case"text":return IG(e,r)}}}function jG(e,t){if(e.schema.allowComments){const r=typeof t.value=="string"?t.value:"",n=r.indexOf("-->"),o={type:"comment",value:n<0?r:r.slice(0,n)};return Cg(o,t),o}}function MG(e,t){if(e.schema.allowDoctypes){const r={type:"doctype"};return Cg(r,t),r}}function RG(e,t){const r=typeof t.tagName=="string"?t.tagName:"";e.stack.push(r);const n=Y3(e,t.children),a=DG(e,t.properties);e.stack.pop();let o=!1;if(r&&r!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(r))&&(o=!0,e.schema.ancestors&&Ko.call(e.schema.ancestors,r))){const u=e.schema.ancestors[r];let d=-1;for(o=!1;++d<u.length;)e.stack.includes(u[d])&&(o=!0)}if(!o)return e.schema.strip&&!e.schema.strip.includes(r)?n:void 0;const l={type:"element",tagName:r,properties:a,children:n};return Cg(l,t),l}function OG(e,t){const n={type:"root",children:Y3(e,t.children)};return Cg(n,t),n}function IG(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return Cg(n,t),n}function Y3(e,t){const r=[];if(Array.isArray(t)){const n=t;let a=-1;for(;++a<n.length;){const o=G3(e,n[a]);o&&(Array.isArray(o)?r.push(...o):r.push(o))}}return r}function DG(e,t){const r=e.stack[e.stack.length-1],n=e.schema.attributes,a=e.schema.required,o=n&&Ko.call(n,r)?n[r]:void 0,l=n&&Ko.call(n,"*")?n["*"]:void 0,u=t&&typeof t=="object"?t:{},d={};let h;for(h in u)if(Ko.call(u,h)){const f=u[h];let p=YS(e,WS(o,h),h,f);p==null&&(p=YS(e,WS(l,h),h,f)),p!=null&&(d[h]=p)}if(a&&Ko.call(a,r)){const f=a[r];for(h in f)Ko.call(f,h)&&!Ko.call(d,h)&&(d[h]=f[h])}return d}function YS(e,t,r,n){return t?Array.isArray(n)?PG(e,t,r,n):W3(e,t,r,n):void 0}function PG(e,t,r,n){let a=-1;const o=[];for(;++a<n.length;){const l=W3(e,t,r,n[a]);(typeof l=="number"||typeof l=="string")&&o.push(l)}return o}function W3(e,t,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&BG(e,r,n)){if(typeof t=="object"&&t.length>1){let a=!1,o=0;for(;++o<t.length;){const l=t[o];if(l&&typeof l=="object"&&"flags"in l){if(l.test(String(n))){a=!0;break}}else if(l===n){a=!0;break}}if(!a)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(r)?e.schema.clobberPrefix+n:n}}function BG(e,t,r){const n=e.schema.protocols&&Ko.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!n||n.length===0)return!0;const a=String(r),o=a.indexOf(":"),l=a.indexOf("?"),u=a.indexOf("#"),d=a.indexOf("/");if(o<0||d>-1&&o>d||l>-1&&o>l||u>-1&&o>u)return!0;let h=-1;for(;++h<n.length;){const f=n[h];if(o===f.length&&a.slice(0,f.length)===f)return!0}return!1}function Cg(e,t){const r=nA(t);t.data&&(e.data=Zl(t.data)),r&&(e.position=r)}function WS(e,t){let r,n=-1;if(e)for(;++n<e.length;){const a=e[n],o=typeof a=="string"?a:a[0];if(o===t)return a;o==="data*"&&(r=a)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return r}function FG(e){return function(t){return LG(t,e)}}const VS=(function(e,t,r){const n=kg(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]}),dc=(function(e){if(e==null)return zG;if(typeof e=="string")return $G(e);if(typeof e=="object")return UG(e);if(typeof e=="function")return $v(e);throw new Error("Expected function, string, or array as `test`")});function UG(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=dc(e[r]);return $v(n);function n(...a){let o=-1;for(;++o<t.length;)if(t[o].apply(this,a))return!0;return!1}}function $G(e){return $v(t);function t(r){return r.tagName===e}}function $v(e){return t;function t(r,n,a){return!!(HG(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function zG(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function HG(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const KS=/\n/g,XS=/[\t ]+/g,o1=dc("br"),QS=dc(QG),qG=dc("p"),ZS=dc("tr"),GG=dc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",XG,ZG]),V3=dc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function YG(e,t){const r=t||{},n="children"in e?e.children:[],a=V3(e),o=Q3(e,{whitespace:r.whitespace||"normal"}),l=[];(e.type==="text"||e.type==="comment")&&l.push(...X3(e,{breakBefore:!0,breakAfter:!0}));let u=-1;for(;++u<n.length;)l.push(...K3(n[u],e,{whitespace:o,breakBefore:u?void 0:a,breakAfter:u<n.length-1?o1(n[u+1]):a}));const d=[];let h;for(u=-1;++u<l.length;){const f=l[u];typeof f=="number"?h!==void 0&&f>h&&(h=f):f&&(h!==void 0&&h>-1&&d.push(`
`.repeat(h)||" "),h=-1,d.push(f))}return d.join("")}function K3(e,t,r){return e.type==="element"?WG(e,t,r):e.type==="text"?r.whitespace==="normal"?X3(e,r):VG(e):[]}function WG(e,t,r){const n=Q3(e,r),a=e.children||[];let o=-1,l=[];if(GG(e))return l;let u,d;for(o1(e)||ZS(e)&&VS(t,e,ZS)?d=`
`:qG(e)?(u=2,d=2):V3(e)&&(u=1,d=1);++o<a.length;)l=l.concat(K3(a[o],e,{whitespace:n,breakBefore:o?void 0:u,breakAfter:o<a.length-1?o1(a[o+1]):d}));return QS(e)&&VS(t,e,QS)&&l.push("	"),u&&l.unshift(u),d&&l.push(d),l}function X3(e,t){const r=String(e.value),n=[],a=[];let o=0;for(;o<=r.length;){KS.lastIndex=o;const d=KS.exec(r),h=d&&"index"in d?d.index:r.length;n.push(KG(r.slice(o,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,h===r.length?t.breakAfter:!0)),o=h+1}let l=-1,u;for(;++l<n.length;)n[l].charCodeAt(n[l].length-1)===8203||l<n.length-1&&n[l+1].charCodeAt(0)===8203?(a.push(n[l]),u=void 0):n[l]?(typeof u=="number"&&a.push(u),a.push(n[l]),u=0):(l===0||l===n.length-1)&&a.push(0);return a}function VG(e){return[String(e.value)]}function KG(e,t,r){const n=[];let a=0,o;for(;a<e.length;){XS.lastIndex=a;const l=XS.exec(e);o=l?l.index:e.length,!a&&!o&&l&&!t&&n.push(""),a!==o&&n.push(e.slice(a,o)),a=l?o+l[0].length:o}return a!==o&&!r&&n.push(""),n.join(" ")}function Q3(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function XG(e){return!!(e.properties||{}).hidden}function QG(e){return e.tagName==="td"||e.tagName==="th"}function ZG(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function JG(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",l="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",u={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},f={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],k=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:k,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},O={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},B=[O,p,u,r,e.C_BLOCK_COMMENT_MODE,f,h],F={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:B.concat([{begin:/\(/,end:/\)/,keywords:I,contains:B.concat(["self"]),relevance:0}]),relevance:0},ae={className:"function",begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:I,relevance:0},{begin:b,returnBegin:!0,contains:[x],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,f]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,f,u,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,f,u]}]},u,r,e.C_BLOCK_COMMENT_MODE,p]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(F,ae,O,B,[p,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",u]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function eY(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},r=JG(e),n=r.keywords;return n.type=[...n.type,...t.type],n.literal=[...n.literal,...t.literal],n.built_in=[...n.built_in,...t.built_in],n._hints=t._hints,r.name="Arduino",r.aliases=["ino"],r.supersetOf="cpp",r}function tY(e){const t=e.regex,r={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),l={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},u={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r,a]};a.contains.push(u);const d={match:/\\"/},h={className:"string",begin:/'/,end:/'/},f={match:/\\'/},p={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,r]},x=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],b=e.SHEBANG({binary:`(${x.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},k=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],S=["true","false"],_={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],A=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],I=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],O=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:k,literal:S,built_in:[...T,...A,"set","shopt",...I,...O]},contains:[b,e.SHEBANG(),y,p,o,l,_,u,d,h,f,r]}}function rY(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",l="("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",u={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},f={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",S={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[p,u,r,e.C_BLOCK_COMMENT_MODE,f,h],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:_.concat([{begin:/\(/,end:/\)/,keywords:S,contains:_.concat(["self"]),relevance:0}]),relevance:0},A={begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:S,relevance:0},{begin:b,returnBegin:!0,contains:[e.inherit(x,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,f,u,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,f,u]}]},u,r,e.C_BLOCK_COMMENT_MODE,p]};return{name:"C",aliases:["h"],keywords:S,disableAutodetect:!0,illegal:"</",contains:[].concat(T,A,_,[p,{begin:e.IDENT_RE+"::",keywords:S},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:p,strings:h,keywords:S}}}function nY(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",l="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",u={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},f={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},p={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],k=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:k,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},O={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},B=[O,p,u,r,e.C_BLOCK_COMMENT_MODE,f,h],F={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:B.concat([{begin:/\(/,end:/\)/,keywords:I,contains:B.concat(["self"]),relevance:0}]),relevance:0},ae={className:"function",begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:I,relevance:0},{begin:b,returnBegin:!0,contains:[x],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,f]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,f,u,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,f,u]}]},u,r,e.C_BLOCK_COMMENT_MODE,p]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(F,ae,O,B,[p,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",u]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function aY(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],o=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],l={keyword:a.concat(o),built_in:t,literal:n},u=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},f={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},p=e.inherit(f,{illegal:/\n/}),x={className:"subst",begin:/\{/,end:/\}/,keywords:l},b=e.inherit(x,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,b]},k={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},x]},S=e.inherit(k,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},b]});x.contains=[k,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.C_BLOCK_COMMENT_MODE],b.contains=[S,y,p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[h,k,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},u]},A=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",I={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:l,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},u,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[u,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[u,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+A+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:l,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,relevance:0,contains:[_,d,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},I]}}const sY=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),iY=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],oY=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],lY=[...iY,...oY],cY=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),uY=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),dY=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),hY=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function gY(e){const t=e.regex,r=sY(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",o=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",u=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,n,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+uY.join("|")+")"},{begin:":(:)?("+dY.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+hY.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:cY.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+lY.join("|")+")\\b"}]}}function fY(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function pY(e){const o={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:o,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:o,illegal:/["']/}]}]}}function mY(e){const t=e.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(r,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function xY(e){const t=e.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},n=e.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},u={begin:/\[/,end:/\]/,contains:[n,o,a,l,r,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,f=/'[^']*'/,p=t.either(d,h,f),x=t.concat(p,"(\\s*\\.\\s*",p,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:x,className:"attr",starts:{end:/$/,contains:[n,u,o,a,l,r]}}]}}var du="[0-9](_*[0-9])*",t0=`\\.(${du})`,r0="[0-9a-fA-F](_*[0-9a-fA-F])*",JS={className:"number",variants:[{begin:`(\\b(${du})((${t0})|\\.)?|(${t0}))[eE][+-]?(${du})[fFdD]?\\b`},{begin:`\\b(${du})((${t0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t0})[fFdD]?\\b`},{begin:`\\b(${du})[fFdD]\\b`},{begin:`\\b0[xX]((${r0})\\.?|(${r0})?\\.(${r0}))[pP][+-]?(${du})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${r0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function Z3(e,t,r){return r===-1?"":e.replace(t,n=>Z3(e,t,r-1))}function bY(e){const t=e.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",n=r+Z3("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),d={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},f={className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:d,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[f,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:d,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,JS,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},JS,h]}}const eT="[A-Za-z$_][0-9A-Za-z$_]*",yY=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],vY=["true","false","null","undefined","NaN","Infinity"],J3=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],e4=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],t4=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],kY=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wY=[].concat(t4,J3,e4);function EY(e){const t=e.regex,r=(K,{after:xe})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,xe)!==-1},n=eT,a={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,xe)=>{const U=K[0].length+K.index,M=K.input[U];if(M==="<"||M===","){xe.ignoreMatch();return}M===">"&&(r(K,{after:U})||xe.ignoreMatch());let Y;const R=K.input.substring(U);if(Y=R.match(/^\s*=/)){xe.ignoreMatch();return}if((Y=R.match(/^\s+extends\s+/))&&Y.index===0){xe.ignoreMatch();return}}},u={$pattern:eT,keyword:yY,literal:vY,built_in:wY,"variable.language":kY},d="[0-9](_?[0-9])*",h=`\\.(${d})`,f="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${f})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${f})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,x]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,{match:/\$\d+/},p];x.contains=A.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(A)});const I=[].concat(T,x.contains),O=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(I)}]),B={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:O},F={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...J3,...e4]}},Z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},z={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},ee={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function W(K){return t.concat("(?!",K.join("|"),")")}const $={match:t.concat(/\b/,W([...t4,"super","import"].map(K=>`${K}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},L={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},q={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},D="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(D)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),Z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,T,{match:/\$\d+/},p,ae,{scope:"attr",match:n+t.lookahead(":"),relevance:0},X,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:D,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},L,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},$,ee,F,q,{match:/\$[(.]/}]}}function _Y(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],a={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[t,r,e.QUOTE_STRING_MODE,a,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var hu="[0-9](_*[0-9])*",n0=`\\.(${hu})`,a0="[0-9a-fA-F](_*[0-9a-fA-F])*",SY={className:"number",variants:[{begin:`(\\b(${hu})((${n0})|\\.)?|(${n0}))[eE][+-]?(${hu})[fFdD]?\\b`},{begin:`\\b(${hu})((${n0})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${n0})[fFdD]?\\b`},{begin:`\\b(${hu})[fFdD]\\b`},{begin:`\\b0[xX]((${a0})\\.?|(${a0})?\\.(${a0}))[pP][+-]?(${hu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${a0})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function TY(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},a={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},o={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},l={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[o,a]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,o,a]}]};a.contains.push(l);const u={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},d={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(l,{className:"string"}),"self"]}]},h=SY,f=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),p={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},x=p;return x.variants[1].contains=[p],p.variants[1].contains=[x],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,f,r,n,u,d,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[p,e.C_LINE_COMMENT_MODE,f],relevance:0},e.C_LINE_COMMENT_MODE,f,u,d,l,e.C_NUMBER_MODE]},f]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},u,d]},l,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const CY=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),NY=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],AY=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],LY=[...NY,...AY],jY=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),r4=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),n4=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),MY=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),RY=r4.concat(n4).sort().reverse();function OY(e){const t=CY(e),r=RY,n="and or not only",a="[\\w-]+",o="("+a+"|@\\{"+a+"\\})",l=[],u=[],d=function(A){return{className:"string",begin:"~?"+A+".*?"+A}},h=function(A,I,O){return{className:A,begin:I,relevance:O}},f={$pattern:/[a-z-]+/,keyword:n,attribute:jY.join(" ")},p={begin:"\\(",end:"\\)",contains:u,keywords:f,relevance:0};u.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,d("'"),d('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,p,h("variable","@@?"+a,10),h("variable","@\\{"+a+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:a+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const x=u.concat({begin:/\{/,end:/\}/,contains:l}),b={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(u)},y={begin:o+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+MY.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:u}}]},k={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:f,returnEnd:!0,contains:u,relevance:0}},S={className:"variable",variants:[{begin:"@"+a+"\\s*:",relevance:15},{begin:"@"+a}],starts:{end:"[;}]",returnEnd:!0,contains:x}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:o,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,b,h("keyword","all\\b"),h("variable","@\\{"+a+"\\}"),{begin:"\\b("+LY.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,h("selector-tag",o,0),h("selector-id","#"+o),h("selector-class","\\."+o,0),h("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+r4.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n4.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:x},{begin:"!important"},t.FUNCTION_DISPATCH]},T={begin:a+`:(:)?(${r.join("|")})`,returnBegin:!0,contains:[_]};return l.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,k,S,T,y,_,b,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:l}}function IY(e){const t="\\[=*\\[",r="\\]=*\\]",n={begin:t,end:r,contains:["self"]},a=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,r,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:r,contains:[n],relevance:5}])}}function DY(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,r]},a={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},l={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,r,n,a,o,l]}}function PY(e){const t=e.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},o={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},l={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},u=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,u,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},f={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},p=e.inherit(h,{contains:[]}),x=e.inherit(f,{contains:[]});h.contains.push(x),f.contains.push(p);let b=[r,d];return[h,f,p,x].forEach(_=>{_.contains=_.contains.concat(b)}),b=b.concat(h,f),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:b},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:b}]}]},r,o,h,f,{className:"quote",begin:"^>\\s+",contains:b,end:"$"},a,n,d,l,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function BY(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,u={"variable.language":["this","super"],$pattern:r,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:r,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:u,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function FY(e){const t=e.regex,r=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],n=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:r.join(" ")},o={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},l={begin:/->\{/,end:/\}/},u={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[u]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},f=[e.BACKSLASH_ESCAPE,o,d],p=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],x=(k,S,_="\\1")=>{const T=_==="\\1"?_:t.concat(_,S);return t.concat(t.concat("(?:",k,")"),S,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,_,n)},b=(k,S,_)=>t.concat(t.concat("(?:",k,")"),S,/(?:\\.|[^\\\/])*?/,_,n),y=[d,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),l,{className:"string",contains:f,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:x("s|tr|y",t.either(...p,{capture:!0}))},{begin:x("s|tr|y","\\(","\\)")},{begin:x("s|tr|y","\\[","\\]")},{begin:x("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:b("(?:m|qr)?",/\//,/\//)},{begin:b("m|qr",t.either(...p,{capture:!0}),/\1/)},{begin:b("m|qr",/\(/,/\)/)},{begin:b("m|qr",/\[/,/\]/)},{begin:b("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,u]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,u,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return o.contains=y,l.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:y}}function UY(e){const t=e.regex,r=/(?![A-Za-z0-9])(?![$])/,n=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),a=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),o=t.concat(/[A-Z]+/,r),l={scope:"variable",match:"\\$+"+n},u={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},d={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=e.inherit(e.APOS_STRING_MODE,{illegal:null}),f=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(d)}),p={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(d),"on:begin":(L,q)=>{q.data._beginMatch=L[1]||L[2]},"on:end":(L,q)=>{q.data._beginMatch!==L[1]&&q.ignoreMatch()}},x=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),b=`[ 	
]`,y={scope:"string",variants:[f,h,p,x]},k={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],I={keyword:_,literal:(L=>{const q=[];return L.forEach(D=>{q.push(D),D.toLowerCase()===D?q.push(D.toUpperCase()):q.push(D.toLowerCase())}),q})(S),built_in:T},O=L=>L.map(q=>q.replace(/\|\d+$/,"")),B={variants:[{match:[/new/,t.concat(b,"+"),t.concat("(?!",O(T).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},F=t.concat(n,"\\b(?!\\()"),ae={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),F],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,t.concat(/::/,t.lookahead(/(?!class\b)/)),F],scope:{1:"title.class",3:"variable.constant"}},{match:[a,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},Z={scope:"attr",match:t.concat(n,t.lookahead(":"),t.lookahead(/(?!::)/))},z={relevance:0,begin:/\(/,end:/\)/,keywords:I,contains:[Z,l,ae,e.C_BLOCK_COMMENT_MODE,y,k,B]},ee={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",O(_).join("\\b|"),"|",O(T).join("\\b|"),"\\b)"),n,t.concat(b,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[z]};z.contains.push(ee);const W=[Z,ae,e.C_BLOCK_COMMENT_MODE,y,k,B],$={begin:t.concat(/#\[\s*\\?/,t.either(a,o)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...W]},...W,{scope:"meta",variants:[{match:a},{match:o}]}]};return{case_insensitive:!1,keywords:I,contains:[$,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},u,{scope:"variable.language",match:/\$this\b/},l,ee,ae,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},B,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:I,contains:["self",$,l,ae,e.C_BLOCK_COMMENT_MODE,y,k]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},y,k]}}function $Y(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function zY(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function HY(e){const t=e.regex,r=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},f={begin:/\{\{/,relevance:0},p={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d,f,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d,f,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,f,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,f,h]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},x="[0-9](_?[0-9])*",b=`(\\b(${x}))?\\.(${x})|\\b(${x})\\.`,y=`\\b|${n.join("|")}`,k={className:"number",relevance:0,variants:[{begin:`(\\b(${x})|(${b}))[eE][+-]?(${x})[jJ]?(?=${y})`},{begin:`(${b})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${x})[jJ](?=${y})`}]},S={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",d,k,p,e.HASH_COMMENT_MODE]}]};return h.contains=[p,k,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[d,k,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},p,S,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[k,_,p]}]}}function qY(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function GY(e){const t=e.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[o,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function YY(e){const t=e.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=t.concat(n,/(::\w+)*/),l={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},u={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},h=[e.COMMENT("#","$",{contains:[u]}),e.COMMENT("^=begin","^=end",{contains:[u],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],f={className:"subst",begin:/#\{/,end:/\}/,keywords:l},p={className:"string",contains:[e.BACKSLASH_ESCAPE,f],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,f]})]}]},x="[1-9](_?[0-9])*|0",b="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${x})(\\.(${b}))?([eE][+-]?(${b})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},k={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:l}]},B=[p,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:l},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:l},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[k]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[p,{begin:r}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:l},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,f],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,h),relevance:0}].concat(d,h);f.contains=B,k.contains=B;const z=[{begin:/^\s*=>/,starts:{end:"$",contains:B}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:l,contains:B}}];return h.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:l,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(z).concat(h).concat(B)}}function WY(e){const t=e.regex,r=/(r#)?/,n=t.concat(r,e.UNDERSCORE_IDENT_RE),a=t.concat(r,e.IDENT_RE),o={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,t.lookahead(/\s*\(/))},l="([ui](8|16|32|64|128|size)|f(32|64))?",u=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],f=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:f,keyword:u,literal:d,built_in:h},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+l},{begin:"\\b0o([0-7_]+)"+l},{begin:"\\b0x([A-Fa-f0-9_]+)"+l},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+l}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:f}},{className:"punctuation",begin:"->"},o]}}const VY=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),KY=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],XY=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],QY=[...KY,...XY],ZY=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),JY=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),eW=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),tW=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function rW(e){const t=VY(e),r=eW,n=JY,a="@[a-z-]+",o="and or not only",u={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+QY.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+n.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+r.join("|")+")"},u,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+tW.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,u,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:a,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:ZY.join(" ")},contains:[{begin:a,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},u,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function nW(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function aW(e){const t=e.regex,r=e.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},a={begin:/"/,end:/"/,contains:[{match:/""/}]},o=["true","false","unknown"],l=["double precision","large object","with timezone","without timezone"],u=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],f=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],p=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],x=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],b=f,y=[...h,...d].filter(O=>!f.includes(O)),k={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},S={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:t.concat(/\b/,t.either(...b),/\s*\(/),relevance:0,keywords:{built_in:b}};function T(O){return t.concat(/\b/,t.either(...O.map(B=>B.replace(/\s+/,"\\s+"))),/\b/)}const A={scope:"keyword",match:T(x),relevance:0};function I(O,{exceptions:B,when:F}={}){const ae=F;return B=B||[],O.map(Z=>Z.match(/\|\d+$/)||B.includes(Z)?Z:ae(Z)?`${Z}|0`:Z)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:I(y,{when:O=>O.length<3}),literal:o,type:u,built_in:p},contains:[{scope:"type",match:T(l)},A,_,k,n,a,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,r,S]}}function a4(e){return e?typeof e=="string"?e:e.source:null}function ih(e){return rn("(?=",e,")")}function rn(...e){return e.map(r=>a4(r)).join("")}function sW(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function ja(...e){return"("+(sW(e).capture?"":"?:")+e.map(n=>a4(n)).join("|")+")"}const zv=e=>rn(/\b/,e,/\w$/.test(e)?/\b/:/\B/),iW=["Protocol","Type"].map(zv),tT=["init","self"].map(zv),oW=["Any","Self"],ey=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],rT=["false","nil","true"],lW=["assignment","associativity","higherThan","left","lowerThan","none","right"],cW=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],nT=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],s4=ja(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),i4=ja(s4,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),ty=rn(s4,i4,"*"),o4=ja(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),K0=ja(o4,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),vi=rn(o4,K0,"*"),s0=rn(/[A-Z]/,K0,"*"),uW=["attached","autoclosure",rn(/convention\(/,ja("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",rn(/objc\(/,vi,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],dW=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function hW(e){const t={match:/\s+/,relevance:0},r=e.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[e.C_LINE_COMMENT_MODE,r],a={match:[/\./,ja(...iW,...tT)],className:{2:"keyword"}},o={match:rn(/\./,ja(...ey)),relevance:0},l=ey.filter(He=>typeof He=="string").concat(["_|0"]),u=ey.filter(He=>typeof He!="string").concat(oW).map(zv),d={variants:[{className:"keyword",match:ja(...u,...tT)}]},h={$pattern:ja(/\b\w+/,/#\w+/),keyword:l.concat(cW),literal:rT},f=[a,o,d],p={match:rn(/\./,ja(...nT)),relevance:0},x={className:"built_in",match:rn(/\b/,ja(...nT),/(?=\()/)},b=[p,x],y={match:/->/,relevance:0},k={className:"operator",relevance:0,variants:[{match:ty},{match:`\\.(\\.|${i4})+`}]},S=[y,k],_="([0-9]_*)+",T="([0-9a-fA-F]_*)+",A={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${T})(\\.(${T}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},I=(He="")=>({className:"subst",variants:[{match:rn(/\\/,He,/[0\\tnr"']/)},{match:rn(/\\/,He,/u\{[0-9a-fA-F]{1,8}\}/)}]}),O=(He="")=>({className:"subst",match:rn(/\\/,He,/[\t ]*(?:[\r\n]|\r\n)/)}),B=(He="")=>({className:"subst",label:"interpol",begin:rn(/\\/,He,/\(/),end:/\)/}),F=(He="")=>({begin:rn(He,/"""/),end:rn(/"""/,He),contains:[I(He),O(He),B(He)]}),ae=(He="")=>({begin:rn(He,/"/),end:rn(/"/,He),contains:[I(He),B(He)]}),Z={className:"string",variants:[F(),F("#"),F("##"),F("###"),ae(),ae("#"),ae("##"),ae("###")]},z=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],ee={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:z},W=He=>{const Gt=rn(He,/\//),rr=rn(/\//,He);return{begin:Gt,end:rr,contains:[...z,{scope:"comment",begin:`#(?!.*${rr})`,end:/$/}]}},$={scope:"regexp",variants:[W("###"),W("##"),W("#"),ee]},L={match:rn(/`/,vi,/`/)},q={className:"variable",match:/\$\d+/},D={className:"variable",match:`\\$${K0}+`},X=[L,q,D],K={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:dW,contains:[...S,A,Z]}]}},xe={scope:"keyword",match:rn(/@/,ja(...uW),ih(ja(/\(/,/\s+/)))},U={scope:"meta",match:rn(/@/,vi)},M=[K,xe,U],Y={match:ih(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:rn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,K0,"+")},{className:"type",match:s0,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:rn(/\s+&\s+/,ih(s0)),relevance:0}]},R={begin:/</,end:/>/,keywords:h,contains:[...n,...f,...M,y,Y]};Y.contains.push(R);const H={match:rn(vi,/\s*:/),keywords:"_|0",relevance:0},ne={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",H,...n,$,...f,...b,...S,A,Z,...X,...M,Y]},re={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,Y]},fe={begin:ja(ih(rn(vi,/\s*:/)),ih(rn(vi,/\s+/,vi,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:vi}]},le={begin:/\(/,end:/\)/,keywords:h,contains:[fe,...n,...f,...S,A,Z,...M,Y,ne],endsParent:!0,illegal:/["']/},ve={match:[/(func|macro)/,/\s+/,ja(L.match,vi,ty)],className:{1:"keyword",3:"title.function"},contains:[re,le,t],illegal:[/\[/,/%/]},ce={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[re,le,t],illegal:/\[|%/},ke={match:[/operator/,/\s+/,ty],className:{1:"keyword",3:"title"}},it={begin:[/precedencegroup/,/\s+/,s0],className:{1:"keyword",3:"title"},contains:[Y],keywords:[...lW,...rT],end:/}/},pt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},zt={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Sr={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,vi,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[re,...f,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:s0},...f],relevance:0}]};for(const He of Z.variants){const Gt=He.contains.find(Dt=>Dt.label==="interpol");Gt.keywords=h;const rr=[...f,...b,...S,A,Z,...X];Gt.contains=[...rr,{begin:/\(/,end:/\)/,contains:["self",...rr]}]}return{name:"Swift",keywords:h,contains:[...n,ve,ce,pt,zt,Sr,ke,it,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},$,...f,...b,...S,A,Z,...X,...M,Y,ne]}}const X0="[A-Za-z$_][0-9A-Za-z$_]*",l4=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],c4=["true","false","null","undefined","NaN","Infinity"],u4=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],d4=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],h4=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],g4=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],f4=[].concat(h4,u4,d4);function gW(e){const t=e.regex,r=(K,{after:xe})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,xe)!==-1},n=X0,a={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,xe)=>{const U=K[0].length+K.index,M=K.input[U];if(M==="<"||M===","){xe.ignoreMatch();return}M===">"&&(r(K,{after:U})||xe.ignoreMatch());let Y;const R=K.input.substring(U);if(Y=R.match(/^\s*=/)){xe.ignoreMatch();return}if((Y=R.match(/^\s+extends\s+/))&&Y.index===0){xe.ignoreMatch();return}}},u={$pattern:X0,keyword:l4,literal:c4,built_in:f4,"variable.language":g4},d="[0-9](_?[0-9])*",h=`\\.(${d})`,f="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",p={className:"number",variants:[{begin:`(\\b(${f})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${f})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,x]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,{match:/\$\d+/},p];x.contains=A.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(A)});const I=[].concat(T,x.contains),O=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(I)}]),B={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:O},F={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...u4,...d4]}},Z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},z={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},ee={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function W(K){return t.concat("(?!",K.join("|"),")")}const $={match:t.concat(/\b/,W([...h4,"super","import"].map(K=>`${K}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},L={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},q={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},D="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(D)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),Z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,T,{match:/\$\d+/},p,ae,{scope:"attr",match:n+t.lookahead(":"),relevance:0},X,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:D,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},z,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},L,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},$,ee,F,q,{match:/\$[(.]/}]}}function fW(e){const t=e.regex,r=gW(e),n=X0,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[r.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:X0,keyword:l4.concat(d),literal:c4,built_in:f4.concat(a),"variable.language":g4},f={className:"meta",begin:"@"+n},p=(k,S,_)=>{const T=k.contains.findIndex(A=>A.label===S);if(T===-1)throw new Error("can not find mode to replace");k.contains.splice(T,1,_)};Object.assign(r.keywords,h),r.exports.PARAMS_CONTAINS.push(f);const x=r.contains.find(k=>k.scope==="attr"),b=Object.assign({},x,{match:t.concat(n,t.lookahead(/\s*\?:/))});r.exports.PARAMS_CONTAINS.push([r.exports.CLASS_REFERENCE,x,b]),r.contains=r.contains.concat([f,o,l,b]),p(r,"shebang",e.SHEBANG()),p(r,"use_strict",u);const y=r.contains.find(k=>k.label==="func.def");return y.relevance=0,Object.assign(r,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),r}function pW(e){const t=e.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,o=/\d{4}-\d{1,2}-\d{1,2}/,l=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,u=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:t.concat(/# */,t.either(o,a),/ *#/)},{begin:t.concat(/# */,u,/ *#/)},{begin:t.concat(/# */,l,/ *#/)},{begin:t.concat(/# */,t.either(o,a),/ +/,t.either(l,u),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},f={className:"label",begin:/^\w+:/},p=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),x=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,n,d,h,f,p,x,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[x]}]}}function mW(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const r=e.COMMENT(/;;/,/$/),n=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},o={className:"variable",begin:/\$[\w_]+/},l={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},u={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:n},contains:[r,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},o,l,a,e.QUOTE_STRING_MODE,d,h,u]}}function xW(e){const t=e.regex,r=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=e.inherit(o,{begin:/\(/,end:/\)/}),u=e.inherit(e.APOS_STRING_MODE,{className:"string"}),d=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,d,u,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,l,d,u]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(r,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function bW(e){const t="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},o={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},l={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,a]},u=e.inherit(l,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),x={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},b={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},y={begin:/\{/,end:/\}/,contains:[b],illegal:"\\n",relevance:0},k={begin:"\\[",end:"\\]",contains:[b],illegal:"\\n",relevance:0},S=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},x,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},y,k,o,l],_=[...S];return _.pop(),_.push(u),b.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}const yW={arduino:eY,bash:tY,c:rY,cpp:nY,csharp:aY,css:gY,diff:fY,go:pY,graphql:mY,ini:xY,java:bY,javascript:EY,json:_Y,kotlin:TY,less:OY,lua:IY,makefile:DY,markdown:PY,objectivec:BY,perl:FY,php:UY,"php-template":$Y,plaintext:zY,python:HY,"python-repl":qY,r:GY,ruby:YY,rust:WY,scss:rW,shell:nW,sql:aW,swift:hW,typescript:fW,vbnet:pW,wasm:mW,xml:xW,yaml:bW};var ry,aT;function vW(){if(aT)return ry;aT=1;function e(oe){return oe instanceof Map?oe.clear=oe.delete=oe.set=function(){throw new Error("map is read-only")}:oe instanceof Set&&(oe.add=oe.clear=oe.delete=function(){throw new Error("set is read-only")}),Object.freeze(oe),Object.getOwnPropertyNames(oe).forEach(Re=>{const qe=oe[Re],bt=typeof qe;(bt==="object"||bt==="function")&&!Object.isFrozen(qe)&&e(qe)}),oe}class t{constructor(Re){Re.data===void 0&&(Re.data={}),this.data=Re.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(oe){return oe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(oe,...Re){const qe=Object.create(null);for(const bt in oe)qe[bt]=oe[bt];return Re.forEach(function(bt){for(const Cr in bt)qe[Cr]=bt[Cr]}),qe}const a="</span>",o=oe=>!!oe.scope,l=(oe,{prefix:Re})=>{if(oe.startsWith("language:"))return oe.replace("language:","language-");if(oe.includes(".")){const qe=oe.split(".");return[`${Re}${qe.shift()}`,...qe.map((bt,Cr)=>`${bt}${"_".repeat(Cr+1)}`)].join(" ")}return`${Re}${oe}`};class u{constructor(Re,qe){this.buffer="",this.classPrefix=qe.classPrefix,Re.walk(this)}addText(Re){this.buffer+=r(Re)}openNode(Re){if(!o(Re))return;const qe=l(Re.scope,{prefix:this.classPrefix});this.span(qe)}closeNode(Re){o(Re)&&(this.buffer+=a)}value(){return this.buffer}span(Re){this.buffer+=`<span class="${Re}">`}}const d=(oe={})=>{const Re={children:[]};return Object.assign(Re,oe),Re};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Re){this.top.children.push(Re)}openNode(Re){const qe=d({scope:Re});this.add(qe),this.stack.push(qe)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Re){return this.constructor._walk(Re,this.rootNode)}static _walk(Re,qe){return typeof qe=="string"?Re.addText(qe):qe.children&&(Re.openNode(qe),qe.children.forEach(bt=>this._walk(Re,bt)),Re.closeNode(qe)),Re}static _collapse(Re){typeof Re!="string"&&Re.children&&(Re.children.every(qe=>typeof qe=="string")?Re.children=[Re.children.join("")]:Re.children.forEach(qe=>{h._collapse(qe)}))}}class f extends h{constructor(Re){super(),this.options=Re}addText(Re){Re!==""&&this.add(Re)}startScope(Re){this.openNode(Re)}endScope(){this.closeNode()}__addSublanguage(Re,qe){const bt=Re.root;qe&&(bt.scope=`language:${qe}`),this.add(bt)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function p(oe){return oe?typeof oe=="string"?oe:oe.source:null}function x(oe){return k("(?=",oe,")")}function b(oe){return k("(?:",oe,")*")}function y(oe){return k("(?:",oe,")?")}function k(...oe){return oe.map(qe=>p(qe)).join("")}function S(oe){const Re=oe[oe.length-1];return typeof Re=="object"&&Re.constructor===Object?(oe.splice(oe.length-1,1),Re):{}}function _(...oe){return"("+(S(oe).capture?"":"?:")+oe.map(bt=>p(bt)).join("|")+")"}function T(oe){return new RegExp(oe.toString()+"|").exec("").length-1}function A(oe,Re){const qe=oe&&oe.exec(Re);return qe&&qe.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function O(oe,{joinWith:Re}){let qe=0;return oe.map(bt=>{qe+=1;const Cr=qe;let br=p(bt),ut="";for(;br.length>0;){const lt=I.exec(br);if(!lt){ut+=br;break}ut+=br.substring(0,lt.index),br=br.substring(lt.index+lt[0].length),lt[0][0]==="\\"&&lt[1]?ut+="\\"+String(Number(lt[1])+Cr):(ut+=lt[0],lt[0]==="("&&qe++)}return ut}).map(bt=>`(${bt})`).join(Re)}const B=/\b\B/,F="[a-zA-Z]\\w*",ae="[a-zA-Z_]\\w*",Z="\\b\\d+(\\.\\d+)?",z="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ee="\\b(0b[01]+)",W="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",$=(oe={})=>{const Re=/^#![ ]*\//;return oe.binary&&(oe.begin=k(Re,/.*\b/,oe.binary,/\b.*/)),n({scope:"meta",begin:Re,end:/$/,relevance:0,"on:begin":(qe,bt)=>{qe.index!==0&&bt.ignoreMatch()}},oe)},L={begin:"\\\\[\\s\\S]",relevance:0},q={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[L]},D={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[L]},X={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},K=function(oe,Re,qe={}){const bt=n({scope:"comment",begin:oe,end:Re,contains:[]},qe);bt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Cr=_("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return bt.contains.push({begin:k(/[ ]+/,"(",Cr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),bt},xe=K("//","$"),U=K("/\\*","\\*/"),M=K("#","$"),Y={scope:"number",begin:Z,relevance:0},R={scope:"number",begin:z,relevance:0},H={scope:"number",begin:ee,relevance:0},ne={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[L,{begin:/\[/,end:/\]/,relevance:0,contains:[L]}]},re={scope:"title",begin:F,relevance:0},fe={scope:"title",begin:ae,relevance:0},le={begin:"\\.\\s*"+ae,relevance:0};var ce=Object.freeze({__proto__:null,APOS_STRING_MODE:q,BACKSLASH_ESCAPE:L,BINARY_NUMBER_MODE:H,BINARY_NUMBER_RE:ee,COMMENT:K,C_BLOCK_COMMENT_MODE:U,C_LINE_COMMENT_MODE:xe,C_NUMBER_MODE:R,C_NUMBER_RE:z,END_SAME_AS_BEGIN:function(oe){return Object.assign(oe,{"on:begin":(Re,qe)=>{qe.data._beginMatch=Re[1]},"on:end":(Re,qe)=>{qe.data._beginMatch!==Re[1]&&qe.ignoreMatch()}})},HASH_COMMENT_MODE:M,IDENT_RE:F,MATCH_NOTHING_RE:B,METHOD_GUARD:le,NUMBER_MODE:Y,NUMBER_RE:Z,PHRASAL_WORDS_MODE:X,QUOTE_STRING_MODE:D,REGEXP_MODE:ne,RE_STARTERS_RE:W,SHEBANG:$,TITLE_MODE:re,UNDERSCORE_IDENT_RE:ae,UNDERSCORE_TITLE_MODE:fe});function ke(oe,Re){oe.input[oe.index-1]==="."&&Re.ignoreMatch()}function it(oe,Re){oe.className!==void 0&&(oe.scope=oe.className,delete oe.className)}function pt(oe,Re){Re&&oe.beginKeywords&&(oe.begin="\\b("+oe.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",oe.__beforeBegin=ke,oe.keywords=oe.keywords||oe.beginKeywords,delete oe.beginKeywords,oe.relevance===void 0&&(oe.relevance=0))}function zt(oe,Re){Array.isArray(oe.illegal)&&(oe.illegal=_(...oe.illegal))}function Sr(oe,Re){if(oe.match){if(oe.begin||oe.end)throw new Error("begin & end are not supported with match");oe.begin=oe.match,delete oe.match}}function He(oe,Re){oe.relevance===void 0&&(oe.relevance=1)}const Gt=(oe,Re)=>{if(!oe.beforeMatch)return;if(oe.starts)throw new Error("beforeMatch cannot be used with starts");const qe=Object.assign({},oe);Object.keys(oe).forEach(bt=>{delete oe[bt]}),oe.keywords=qe.keywords,oe.begin=k(qe.beforeMatch,x(qe.begin)),oe.starts={relevance:0,contains:[Object.assign(qe,{endsParent:!0})]},oe.relevance=0,delete qe.beforeMatch},rr=["of","and","for","in","not","or","if","then","parent","list","value"],Dt="keyword";function Ht(oe,Re,qe=Dt){const bt=Object.create(null);return typeof oe=="string"?Cr(qe,oe.split(" ")):Array.isArray(oe)?Cr(qe,oe):Object.keys(oe).forEach(function(br){Object.assign(bt,Ht(oe[br],Re,br))}),bt;function Cr(br,ut){Re&&(ut=ut.map(lt=>lt.toLowerCase())),ut.forEach(function(lt){const At=lt.split("|");bt[At[0]]=[br,Zt(At[0],At[1])]})}}function Zt(oe,Re){return Re?Number(Re):hr(oe)?0:1}function hr(oe){return rr.includes(oe.toLowerCase())}const ar={},Ut=oe=>{console.error(oe)},dn=(oe,...Re)=>{console.log(`WARN: ${oe}`,...Re)},Ne=(oe,Re)=>{ar[`${oe}/${Re}`]||(console.log(`Deprecated as of ${oe}. ${Re}`),ar[`${oe}/${Re}`]=!0)},Ke=new Error;function St(oe,Re,{key:qe}){let bt=0;const Cr=oe[qe],br={},ut={};for(let lt=1;lt<=Re.length;lt++)ut[lt+bt]=Cr[lt],br[lt+bt]=!0,bt+=T(Re[lt-1]);oe[qe]=ut,oe[qe]._emit=br,oe[qe]._multi=!0}function Tt(oe){if(Array.isArray(oe.begin)){if(oe.skip||oe.excludeBegin||oe.returnBegin)throw Ut("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ke;if(typeof oe.beginScope!="object"||oe.beginScope===null)throw Ut("beginScope must be object"),Ke;St(oe,oe.begin,{key:"beginScope"}),oe.begin=O(oe.begin,{joinWith:""})}}function sr(oe){if(Array.isArray(oe.end)){if(oe.skip||oe.excludeEnd||oe.returnEnd)throw Ut("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ke;if(typeof oe.endScope!="object"||oe.endScope===null)throw Ut("endScope must be object"),Ke;St(oe,oe.end,{key:"endScope"}),oe.end=O(oe.end,{joinWith:""})}}function on(oe){oe.scope&&typeof oe.scope=="object"&&oe.scope!==null&&(oe.beginScope=oe.scope,delete oe.scope)}function hn(oe){on(oe),typeof oe.beginScope=="string"&&(oe.beginScope={_wrap:oe.beginScope}),typeof oe.endScope=="string"&&(oe.endScope={_wrap:oe.endScope}),Tt(oe),sr(oe)}function Gr(oe){function Re(ut,lt){return new RegExp(p(ut),"m"+(oe.case_insensitive?"i":"")+(oe.unicodeRegex?"u":"")+(lt?"g":""))}class qe{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(lt,At){At.position=this.position++,this.matchIndexes[this.matchAt]=At,this.regexes.push([At,lt]),this.matchAt+=T(lt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const lt=this.regexes.map(At=>At[1]);this.matcherRe=Re(O(lt,{joinWith:"|"}),!0),this.lastIndex=0}exec(lt){this.matcherRe.lastIndex=this.lastIndex;const At=this.matcherRe.exec(lt);if(!At)return null;const dt=At.findIndex((nn,ga)=>ga>0&&nn!==void 0),cr=this.matchIndexes[dt];return At.splice(0,dt),Object.assign(At,cr)}}class bt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(lt){if(this.multiRegexes[lt])return this.multiRegexes[lt];const At=new qe;return this.rules.slice(lt).forEach(([dt,cr])=>At.addRule(dt,cr)),At.compile(),this.multiRegexes[lt]=At,At}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(lt,At){this.rules.push([lt,At]),At.type==="begin"&&this.count++}exec(lt){const At=this.getMatcher(this.regexIndex);At.lastIndex=this.lastIndex;let dt=At.exec(lt);if(this.resumingScanAtSamePosition()&&!(dt&&dt.index===this.lastIndex)){const cr=this.getMatcher(0);cr.lastIndex=this.lastIndex+1,dt=cr.exec(lt)}return dt&&(this.regexIndex+=dt.position+1,this.regexIndex===this.count&&this.considerAll()),dt}}function Cr(ut){const lt=new bt;return ut.contains.forEach(At=>lt.addRule(At.begin,{rule:At,type:"begin"})),ut.terminatorEnd&&lt.addRule(ut.terminatorEnd,{type:"end"}),ut.illegal&&lt.addRule(ut.illegal,{type:"illegal"}),lt}function br(ut,lt){const At=ut;if(ut.isCompiled)return At;[it,Sr,hn,Gt].forEach(cr=>cr(ut,lt)),oe.compilerExtensions.forEach(cr=>cr(ut,lt)),ut.__beforeBegin=null,[pt,zt,He].forEach(cr=>cr(ut,lt)),ut.isCompiled=!0;let dt=null;return typeof ut.keywords=="object"&&ut.keywords.$pattern&&(ut.keywords=Object.assign({},ut.keywords),dt=ut.keywords.$pattern,delete ut.keywords.$pattern),dt=dt||/\w+/,ut.keywords&&(ut.keywords=Ht(ut.keywords,oe.case_insensitive)),At.keywordPatternRe=Re(dt,!0),lt&&(ut.begin||(ut.begin=/\B|\b/),At.beginRe=Re(At.begin),!ut.end&&!ut.endsWithParent&&(ut.end=/\B|\b/),ut.end&&(At.endRe=Re(At.end)),At.terminatorEnd=p(At.end)||"",ut.endsWithParent&&lt.terminatorEnd&&(At.terminatorEnd+=(ut.end?"|":"")+lt.terminatorEnd)),ut.illegal&&(At.illegalRe=Re(ut.illegal)),ut.contains||(ut.contains=[]),ut.contains=[].concat(...ut.contains.map(function(cr){return pr(cr==="self"?ut:cr)})),ut.contains.forEach(function(cr){br(cr,At)}),ut.starts&&br(ut.starts,lt),At.matcher=Cr(At),At}if(oe.compilerExtensions||(oe.compilerExtensions=[]),oe.contains&&oe.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return oe.classNameAliases=n(oe.classNameAliases||{}),br(oe)}function Tr(oe){return oe?oe.endsWithParent||Tr(oe.starts):!1}function pr(oe){return oe.variants&&!oe.cachedVariants&&(oe.cachedVariants=oe.variants.map(function(Re){return n(oe,{variants:null},Re)})),oe.cachedVariants?oe.cachedVariants:Tr(oe)?n(oe,{starts:oe.starts?n(oe.starts):null}):Object.isFrozen(oe)?n(oe):oe}var Yt="11.11.1";class gn extends Error{constructor(Re,qe){super(Re),this.name="HTMLInjectionError",this.html=qe}}const fn=r,rs=n,aa=Symbol("nomatch"),Gn=7,sa=function(oe){const Re=Object.create(null),qe=Object.create(null),bt=[];let Cr=!0;const br="Could not find the language '{}', did you forget to load/include a language module?",ut={disableAutodetect:!0,name:"Plain text",contains:[]};let lt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:f};function At(Ae){return lt.noHighlightRe.test(Ae)}function dt(Ae){let Ge=Ae.className+" ";Ge+=Ae.parentNode?Ae.parentNode.className:"";const gt=lt.languageDetectRe.exec(Ge);if(gt){const Ct=$e(gt[1]);return Ct||(dn(br.replace("{}",gt[1])),dn("Falling back to no-highlight mode for this block.",Ae)),Ct?gt[1]:"no-highlight"}return Ge.split(/\s+/).find(Ct=>At(Ct)||$e(Ct))}function cr(Ae,Ge,gt){let Ct="",Br="";typeof Ge=="object"?(Ct=Ae,gt=Ge.ignoreIllegals,Br=Ge.language):(Ne("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ne("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Br=Ae,Ct=Ge),gt===void 0&&(gt=!0);const ln={code:Ct,language:Br};Be("before:highlight",ln);const Xt=ln.result?ln.result:nn(ln.language,ln.code,gt);return Xt.code=ln.code,Be("after:highlight",Xt),Xt}function nn(Ae,Ge,gt,Ct){const Br=Object.create(null);function ln(tt,mt){return tt.keywords[mt]}function Xt(){if(!Ot.keywords){Or.addText(yr);return}let tt=0;Ot.keywordPatternRe.lastIndex=0;let mt=Ot.keywordPatternRe.exec(yr),Wt="";for(;mt;){Wt+=yr.substring(tt,mt.index);const mr=Wn.case_insensitive?mt[0].toLowerCase():mt[0],pn=ln(Ot,mr);if(pn){const[Ir,ko]=pn;if(Or.addText(Wt),Wt="",Br[mr]=(Br[mr]||0)+1,Br[mr]<=Gn&&(ui+=ko),Ir.startsWith("_"))Wt+=mt[0];else{const bc=Wn.classNameAliases[Ir]||Ir;Cn(mt[0],bc)}}else Wt+=mt[0];tt=Ot.keywordPatternRe.lastIndex,mt=Ot.keywordPatternRe.exec(yr)}Wt+=yr.substring(tt),Or.addText(Wt)}function ir(){if(yr==="")return;let tt=null;if(typeof Ot.subLanguage=="string"){if(!Re[Ot.subLanguage]){Or.addText(yr);return}tt=nn(Ot.subLanguage,yr,!0,gl[Ot.subLanguage]),gl[Ot.subLanguage]=tt._top}else tt=fa(yr,Ot.subLanguage.length?Ot.subLanguage:null);Ot.relevance>0&&(ui+=tt.relevance),Or.__addSublanguage(tt._emitter,tt.language)}function Jt(){Ot.subLanguage!=null?ir():Xt(),yr=""}function Cn(tt,mt){tt!==""&&(Or.startScope(mt),Or.addText(tt),Or.endScope())}function pa(tt,mt){let Wt=1;const mr=mt.length-1;for(;Wt<=mr;){if(!tt._emit[Wt]){Wt++;continue}const pn=Wn.classNameAliases[tt[Wt]]||tt[Wt],Ir=mt[Wt];pn?Cn(Ir,pn):(yr=Ir,Xt(),yr=""),Wt++}}function Qt(tt,mt){return tt.scope&&typeof tt.scope=="string"&&Or.openNode(Wn.classNameAliases[tt.scope]||tt.scope),tt.beginScope&&(tt.beginScope._wrap?(Cn(yr,Wn.classNameAliases[tt.beginScope._wrap]||tt.beginScope._wrap),yr=""):tt.beginScope._multi&&(pa(tt.beginScope,mt),yr="")),Ot=Object.create(tt,{parent:{value:Ot}}),Ot}function bs(tt,mt,Wt){let mr=A(tt.endRe,Wt);if(mr){if(tt["on:end"]){const pn=new t(tt);tt["on:end"](mt,pn),pn.isMatchIgnored&&(mr=!1)}if(mr){for(;tt.endsParent&&tt.parent;)tt=tt.parent;return tt}}if(tt.endsWithParent)return bs(tt.parent,mt,Wt)}function Ii(tt){return Ot.matcher.regexIndex===0?(yr+=tt[0],1):(Ys=!0,0)}function xc(tt){const mt=tt[0],Wt=tt.rule,mr=new t(Wt),pn=[Wt.__beforeBegin,Wt["on:begin"]];for(const Ir of pn)if(Ir&&(Ir(tt,mr),mr.isMatchIgnored))return Ii(mt);return Wt.skip?yr+=mt:(Wt.excludeBegin&&(yr+=mt),Jt(),!Wt.returnBegin&&!Wt.excludeBegin&&(yr=mt)),Qt(Wt,tt),Wt.returnBegin?0:mt.length}function ma(tt){const mt=tt[0],Wt=Ge.substring(tt.index),mr=bs(Ot,tt,Wt);if(!mr)return aa;const pn=Ot;Ot.endScope&&Ot.endScope._wrap?(Jt(),Cn(mt,Ot.endScope._wrap)):Ot.endScope&&Ot.endScope._multi?(Jt(),pa(Ot.endScope,tt)):pn.skip?yr+=mt:(pn.returnEnd||pn.excludeEnd||(yr+=mt),Jt(),pn.excludeEnd&&(yr=mt));do Ot.scope&&Or.closeNode(),!Ot.skip&&!Ot.subLanguage&&(ui+=Ot.relevance),Ot=Ot.parent;while(Ot!==mr.parent);return mr.starts&&Qt(mr.starts,tt),pn.returnEnd?0:mt.length}function ys(){const tt=[];for(let mt=Ot;mt!==Wn;mt=mt.parent)mt.scope&&tt.unshift(mt.scope);tt.forEach(mt=>Or.openNode(mt))}let vs={};function Di(tt,mt){const Wt=mt&&mt[0];if(yr+=tt,Wt==null)return Jt(),0;if(vs.type==="begin"&&mt.type==="end"&&vs.index===mt.index&&Wt===""){if(yr+=Ge.slice(mt.index,mt.index+1),!Cr){const mr=new Error(`0 width match regex (${Ae})`);throw mr.languageName=Ae,mr.badRule=vs.rule,mr}return 1}if(vs=mt,mt.type==="begin")return xc(mt);if(mt.type==="illegal"&&!gt){const mr=new Error('Illegal lexeme "'+Wt+'" for mode "'+(Ot.scope||"<unnamed>")+'"');throw mr.mode=Ot,mr}else if(mt.type==="end"){const mr=ma(mt);if(mr!==aa)return mr}if(mt.type==="illegal"&&Wt==="")return yr+=`
`,1;if(vo>1e5&&vo>mt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return yr+=Wt,Wt.length}const Wn=$e(Ae);if(!Wn)throw Ut(br.replace("{}",Ae)),new Error('Unknown language: "'+Ae+'"');const hl=Gr(Wn);let qs="",Ot=Ct||hl;const gl={},Or=new lt.__emitter(lt);ys();let yr="",ui=0,Gs=0,vo=0,Ys=!1;try{if(Wn.__emitTokens)Wn.__emitTokens(Ge,Or);else{for(Ot.matcher.considerAll();;){vo++,Ys?Ys=!1:Ot.matcher.considerAll(),Ot.matcher.lastIndex=Gs;const tt=Ot.matcher.exec(Ge);if(!tt)break;const mt=Ge.substring(Gs,tt.index),Wt=Di(mt,tt);Gs=tt.index+Wt}Di(Ge.substring(Gs))}return Or.finalize(),qs=Or.toHTML(),{language:Ae,value:qs,relevance:ui,illegal:!1,_emitter:Or,_top:Ot}}catch(tt){if(tt.message&&tt.message.includes("Illegal"))return{language:Ae,value:fn(Ge),illegal:!0,relevance:0,_illegalBy:{message:tt.message,index:Gs,context:Ge.slice(Gs-100,Gs+100),mode:tt.mode,resultSoFar:qs},_emitter:Or};if(Cr)return{language:Ae,value:fn(Ge),illegal:!1,relevance:0,errorRaised:tt,_emitter:Or,_top:Ot};throw tt}}function ga(Ae){const Ge={value:fn(Ae),illegal:!1,relevance:0,_top:ut,_emitter:new lt.__emitter(lt)};return Ge._emitter.addText(Ae),Ge}function fa(Ae,Ge){Ge=Ge||lt.languages||Object.keys(Re);const gt=ga(Ae),Ct=Ge.filter($e).filter(fr).map(Jt=>nn(Jt,Ae,!1));Ct.unshift(gt);const Br=Ct.sort((Jt,Cn)=>{if(Jt.relevance!==Cn.relevance)return Cn.relevance-Jt.relevance;if(Jt.language&&Cn.language){if($e(Jt.language).supersetOf===Cn.language)return 1;if($e(Cn.language).supersetOf===Jt.language)return-1}return 0}),[ln,Xt]=Br,ir=ln;return ir.secondBest=Xt,ir}function Tn(Ae,Ge,gt){const Ct=Ge&&qe[Ge]||gt;Ae.classList.add("hljs"),Ae.classList.add(`language-${Ct}`)}function Pr(Ae){let Ge=null;const gt=dt(Ae);if(At(gt))return;if(Be("before:highlightElement",{el:Ae,language:gt}),Ae.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ae);return}if(Ae.children.length>0&&(lt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ae)),lt.throwUnescapedHTML))throw new gn("One of your code blocks includes unescaped HTML.",Ae.innerHTML);Ge=Ae;const Ct=Ge.textContent,Br=gt?cr(Ct,{language:gt,ignoreIllegals:!0}):fa(Ct);Ae.innerHTML=Br.value,Ae.dataset.highlighted="yes",Tn(Ae,gt,Br.language),Ae.result={language:Br.language,re:Br.relevance,relevance:Br.relevance},Br.secondBest&&(Ae.secondBest={language:Br.secondBest.language,relevance:Br.secondBest.relevance}),Be("after:highlightElement",{el:Ae,result:Br,text:Ct})}function Rr(Ae){lt=rs(lt,Ae)}const Yn=()=>{Ua(),Ne("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Fa(){Ua(),Ne("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Hs=!1;function Ua(){function Ae(){Ua()}if(document.readyState==="loading"){Hs||window.addEventListener("DOMContentLoaded",Ae,!1),Hs=!0;return}document.querySelectorAll(lt.cssSelector).forEach(Pr)}function ci(Ae,Ge){let gt=null;try{gt=Ge(oe)}catch(Ct){if(Ut("Language definition for '{}' could not be registered.".replace("{}",Ae)),Cr)Ut(Ct);else throw Ct;gt=ut}gt.name||(gt.name=Ae),Re[Ae]=gt,gt.rawDefinition=Ge.bind(null,oe),gt.aliases&&ot(gt.aliases,{languageName:Ae})}function ft(Ae){delete Re[Ae];for(const Ge of Object.keys(qe))qe[Ge]===Ae&&delete qe[Ge]}function de(){return Object.keys(Re)}function $e(Ae){return Ae=(Ae||"").toLowerCase(),Re[Ae]||Re[qe[Ae]]}function ot(Ae,{languageName:Ge}){typeof Ae=="string"&&(Ae=[Ae]),Ae.forEach(gt=>{qe[gt.toLowerCase()]=Ge})}function fr(Ae){const Ge=$e(Ae);return Ge&&!Ge.disableAutodetect}function Hr(Ae){Ae["before:highlightBlock"]&&!Ae["before:highlightElement"]&&(Ae["before:highlightElement"]=Ge=>{Ae["before:highlightBlock"](Object.assign({block:Ge.el},Ge))}),Ae["after:highlightBlock"]&&!Ae["after:highlightElement"]&&(Ae["after:highlightElement"]=Ge=>{Ae["after:highlightBlock"](Object.assign({block:Ge.el},Ge))})}function Vt(Ae){Hr(Ae),bt.push(Ae)}function he(Ae){const Ge=bt.indexOf(Ae);Ge!==-1&&bt.splice(Ge,1)}function Be(Ae,Ge){const gt=Ae;bt.forEach(function(Ct){Ct[gt]&&Ct[gt](Ge)})}function st(Ae){return Ne("10.7.0","highlightBlock will be removed entirely in v12.0"),Ne("10.7.0","Please use highlightElement now."),Pr(Ae)}Object.assign(oe,{highlight:cr,highlightAuto:fa,highlightAll:Ua,highlightElement:Pr,highlightBlock:st,configure:Rr,initHighlighting:Yn,initHighlightingOnLoad:Fa,registerLanguage:ci,unregisterLanguage:ft,listLanguages:de,getLanguage:$e,registerAliases:ot,autoDetection:fr,inherit:rs,addPlugin:Vt,removePlugin:he}),oe.debugMode=function(){Cr=!1},oe.safeMode=function(){Cr=!0},oe.versionString=Yt,oe.regex={concat:k,lookahead:x,either:_,optional:y,anyNumberOfTimes:b};for(const Ae in ce)typeof ce[Ae]=="object"&&e(ce[Ae]);return Object.assign(oe,ce),oe},Qr=sa({});return Qr.newInstance=()=>sa({}),ry=Qr,Qr.HighlightJS=Qr,Qr.default=Qr,ry}var kW=vW();const wW=Hu(kW),sT={},EW="hljs-";function _W(e){const t=wW.newInstance();return e&&o(e),{highlight:r,highlightAuto:n,listLanguages:a,register:o,registerAlias:l,registered:u};function r(d,h,f){const p=f||sT,x=typeof p.prefix=="string"?p.prefix:EW;if(!t.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");t.configure({__emitter:SW,classPrefix:x});const b=t.highlight(h,{ignoreIllegals:!0,language:d});if(b.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:b.errorRaised});const y=b._emitter.root,k=y.data;return k.language=b.language,k.relevance=b.relevance,y}function n(d,h){const p=(h||sT).subset||a();let x=-1,b=0,y;for(;++x<p.length;){const k=p[x];if(!t.getLanguage(k))continue;const S=r(k,d,h);S.data&&S.data.relevance!==void 0&&S.data.relevance>b&&(b=S.data.relevance,y=S)}return y||{type:"root",children:[],data:{language:void 0,relevance:b}}}function a(){return t.listLanguages()}function o(d,h){if(typeof d=="string")t.registerLanguage(d,h);else{let f;for(f in d)Object.hasOwn(d,f)&&t.registerLanguage(f,d[f])}}function l(d,h){if(typeof d=="string")t.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let f;for(f in d)if(Object.hasOwn(d,f)){const p=d[f];t.registerAliases(typeof p=="string"?p:[...p],{languageName:f})}}}function u(d){return!!t.getLanguage(d)}}class SW{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const r=this.stack[this.stack.length-1],n=r.children[r.children.length-1];n&&n.type==="text"?n.value+=t:r.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,r){const n=this.stack[this.stack.length-1],a=t.root.children;r?n.children.push({type:"element",tagName:"span",properties:{className:[r]},children:a}):n.children.push(...a)}openNode(t){const r=this,n=t.split(".").map(function(l,u){return u?l+"_".repeat(u):r.options.classPrefix+l}),a=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:n},children:[]};a.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const TW={};function CW(e){const t=e||TW,r=t.aliases,n=t.detect||!1,a=t.languages||yW,o=t.plainText,l=t.prefix,u=t.subset;let d="hljs";const h=_W(a);if(r&&h.registerAlias(r),l){const f=l.indexOf("-");d=f===-1?l:l.slice(0,f)}return function(f,p){wg(f,"element",function(x,b,y){if(x.tagName!=="code"||!y||y.type!=="element"||y.tagName!=="pre")return;const k=NW(x);if(k===!1||!k&&!n||k&&o&&o.includes(k))return;Array.isArray(x.properties.className)||(x.properties.className=[]),x.properties.className.includes(d)||x.properties.className.unshift(d);const S=YG(x,{whitespace:"pre"});let _;try{_=k?h.highlight(k,S,{prefix:l}):h.highlightAuto(S,{prefix:l,subset:u})}catch(T){const A=T;if(k&&/Unknown language/.test(A.message)){p.message("Cannot highlight as `"+k+"`, its not registered",{ancestors:[y,x],cause:A,place:x.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw A}!k&&_.data&&_.data.language&&x.properties.className.push("language-"+_.data.language),_.children.length>0&&(x.children=_.children)})}}function NW(e){const t=e.properties.className;let r=-1;if(!Array.isArray(t))return;let n;for(;++r<t.length;){const a=String(t[r]);if(a==="no-highlight"||a==="nohighlight")return!1;!n&&a.slice(0,5)==="lang-"&&(n=a.slice(5)),!n&&a.slice(0,9)==="language-"&&(n=a.slice(9))}return n}var iT={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},S0={exports:{}},AW=S0.exports,oT;function LW(){return oT||(oT=1,(function(e,t){(function(r,n){e.exports=n()})(AW,(function(){var r=1e3,n=6e4,a=36e5,o="millisecond",l="second",u="minute",d="hour",h="day",f="week",p="month",x="quarter",b="year",y="date",k="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var q=["th","st","nd","rd"],D=L%100;return"["+L+(q[(D-20)%10]||q[D]||q[0])+"]"}},A=function(L,q,D){var X=String(L);return!X||X.length>=q?L:""+Array(q+1-X.length).join(D)+L},I={s:A,z:function(L){var q=-L.utcOffset(),D=Math.abs(q),X=Math.floor(D/60),K=D%60;return(q<=0?"+":"-")+A(X,2,"0")+":"+A(K,2,"0")},m:function L(q,D){if(q.date()<D.date())return-L(D,q);var X=12*(D.year()-q.year())+(D.month()-q.month()),K=q.clone().add(X,p),xe=D-K<0,U=q.clone().add(X+(xe?-1:1),p);return+(-(X+(D-K)/(xe?K-U:U-K))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:p,y:b,w:f,d:h,D:y,h:d,m:u,s:l,ms:o,Q:x}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},O="en",B={};B[O]=T;var F="$isDayjsObject",ae=function(L){return L instanceof W||!(!L||!L[F])},Z=function L(q,D,X){var K;if(!q)return O;if(typeof q=="string"){var xe=q.toLowerCase();B[xe]&&(K=xe),D&&(B[xe]=D,K=xe);var U=q.split("-");if(!K&&U.length>1)return L(U[0])}else{var M=q.name;B[M]=q,K=M}return!X&&K&&(O=K),K||!X&&O},z=function(L,q){if(ae(L))return L.clone();var D=typeof q=="object"?q:{};return D.date=L,D.args=arguments,new W(D)},ee=I;ee.l=Z,ee.i=ae,ee.w=function(L,q){return z(L,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var W=(function(){function L(D){this.$L=Z(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[F]=!0}var q=L.prototype;return q.parse=function(D){this.$d=(function(X){var K=X.date,xe=X.utc;if(K===null)return new Date(NaN);if(ee.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var U=K.match(S);if(U){var M=U[2]-1||0,Y=(U[7]||"0").substring(0,3);return xe?new Date(Date.UTC(U[1],M,U[3]||1,U[4]||0,U[5]||0,U[6]||0,Y)):new Date(U[1],M,U[3]||1,U[4]||0,U[5]||0,U[6]||0,Y)}}return new Date(K)})(D),this.init()},q.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},q.$utils=function(){return ee},q.isValid=function(){return this.$d.toString()!==k},q.isSame=function(D,X){var K=z(D);return this.startOf(X)<=K&&K<=this.endOf(X)},q.isAfter=function(D,X){return z(D)<this.startOf(X)},q.isBefore=function(D,X){return this.endOf(X)<z(D)},q.$g=function(D,X,K){return ee.u(D)?this[X]:this.set(K,D)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(D,X){var K=this,xe=!!ee.u(X)||X,U=ee.p(D),M=function(ve,ce){var ke=ee.w(K.$u?Date.UTC(K.$y,ce,ve):new Date(K.$y,ce,ve),K);return xe?ke:ke.endOf(h)},Y=function(ve,ce){return ee.w(K.toDate()[ve].apply(K.toDate("s"),(xe?[0,0,0,0]:[23,59,59,999]).slice(ce)),K)},R=this.$W,H=this.$M,ne=this.$D,re="set"+(this.$u?"UTC":"");switch(U){case b:return xe?M(1,0):M(31,11);case p:return xe?M(1,H):M(0,H+1);case f:var fe=this.$locale().weekStart||0,le=(R<fe?R+7:R)-fe;return M(xe?ne-le:ne+(6-le),H);case h:case y:return Y(re+"Hours",0);case d:return Y(re+"Minutes",1);case u:return Y(re+"Seconds",2);case l:return Y(re+"Milliseconds",3);default:return this.clone()}},q.endOf=function(D){return this.startOf(D,!1)},q.$set=function(D,X){var K,xe=ee.p(D),U="set"+(this.$u?"UTC":""),M=(K={},K[h]=U+"Date",K[y]=U+"Date",K[p]=U+"Month",K[b]=U+"FullYear",K[d]=U+"Hours",K[u]=U+"Minutes",K[l]=U+"Seconds",K[o]=U+"Milliseconds",K)[xe],Y=xe===h?this.$D+(X-this.$W):X;if(xe===p||xe===b){var R=this.clone().set(y,1);R.$d[M](Y),R.init(),this.$d=R.set(y,Math.min(this.$D,R.daysInMonth())).$d}else M&&this.$d[M](Y);return this.init(),this},q.set=function(D,X){return this.clone().$set(D,X)},q.get=function(D){return this[ee.p(D)]()},q.add=function(D,X){var K,xe=this;D=Number(D);var U=ee.p(X),M=function(H){var ne=z(xe);return ee.w(ne.date(ne.date()+Math.round(H*D)),xe)};if(U===p)return this.set(p,this.$M+D);if(U===b)return this.set(b,this.$y+D);if(U===h)return M(1);if(U===f)return M(7);var Y=(K={},K[u]=n,K[d]=a,K[l]=r,K)[U]||1,R=this.$d.getTime()+D*Y;return ee.w(R,this)},q.subtract=function(D,X){return this.add(-1*D,X)},q.format=function(D){var X=this,K=this.$locale();if(!this.isValid())return K.invalidDate||k;var xe=D||"YYYY-MM-DDTHH:mm:ssZ",U=ee.z(this),M=this.$H,Y=this.$m,R=this.$M,H=K.weekdays,ne=K.months,re=K.meridiem,fe=function(ce,ke,it,pt){return ce&&(ce[ke]||ce(X,xe))||it[ke].slice(0,pt)},le=function(ce){return ee.s(M%12||12,ce,"0")},ve=re||function(ce,ke,it){var pt=ce<12?"AM":"PM";return it?pt.toLowerCase():pt};return xe.replace(_,(function(ce,ke){return ke||(function(it){switch(it){case"YY":return String(X.$y).slice(-2);case"YYYY":return ee.s(X.$y,4,"0");case"M":return R+1;case"MM":return ee.s(R+1,2,"0");case"MMM":return fe(K.monthsShort,R,ne,3);case"MMMM":return fe(ne,R);case"D":return X.$D;case"DD":return ee.s(X.$D,2,"0");case"d":return String(X.$W);case"dd":return fe(K.weekdaysMin,X.$W,H,2);case"ddd":return fe(K.weekdaysShort,X.$W,H,3);case"dddd":return H[X.$W];case"H":return String(M);case"HH":return ee.s(M,2,"0");case"h":return le(1);case"hh":return le(2);case"a":return ve(M,Y,!0);case"A":return ve(M,Y,!1);case"m":return String(Y);case"mm":return ee.s(Y,2,"0");case"s":return String(X.$s);case"ss":return ee.s(X.$s,2,"0");case"SSS":return ee.s(X.$ms,3,"0");case"Z":return U}return null})(ce)||U.replace(":","")}))},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(D,X,K){var xe,U=this,M=ee.p(X),Y=z(D),R=(Y.utcOffset()-this.utcOffset())*n,H=this-Y,ne=function(){return ee.m(U,Y)};switch(M){case b:xe=ne()/12;break;case p:xe=ne();break;case x:xe=ne()/3;break;case f:xe=(H-R)/6048e5;break;case h:xe=(H-R)/864e5;break;case d:xe=H/a;break;case u:xe=H/n;break;case l:xe=H/r;break;default:xe=H}return K?xe:ee.a(xe)},q.daysInMonth=function(){return this.endOf(p).$D},q.$locale=function(){return B[this.$L]},q.locale=function(D,X){if(!D)return this.$L;var K=this.clone(),xe=Z(D,X,!0);return xe&&(K.$L=xe),K},q.clone=function(){return ee.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},L})(),$=W.prototype;return z.prototype=$,[["$ms",o],["$s",l],["$m",u],["$H",d],["$W",h],["$M",p],["$y",b],["$D",y]].forEach((function(L){$[L[1]]=function(q){return this.$g(q,L[0],L[1])}})),z.extend=function(L,q){return L.$i||(L(q,W,z),L.$i=!0),z},z.locale=Z,z.isDayjs=ae,z.unix=function(L){return z(1e3*L)},z.en=B[O],z.Ls=B,z.p={},z}))})(S0)),S0.exports}var jW=LW();const MW=Hu(jW);var p4=Object.defineProperty,N=(e,t)=>p4(e,"name",{value:t,configurable:!0}),RW=(e,t)=>{for(var r in t)p4(e,r,{get:t[r],enumerable:!0})},ro={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ze={trace:N((...e)=>{},"trace"),debug:N((...e)=>{},"debug"),info:N((...e)=>{},"info"),warn:N((...e)=>{},"warn"),error:N((...e)=>{},"error"),fatal:N((...e)=>{},"fatal")},Hv=N(function(e="fatal"){let t=ro.fatal;typeof e=="string"?e.toLowerCase()in ro&&(t=ro[e]):typeof e=="number"&&(t=e),ze.trace=()=>{},ze.debug=()=>{},ze.info=()=>{},ze.warn=()=>{},ze.error=()=>{},ze.fatal=()=>{},t<=ro.fatal&&(ze.fatal=console.error?console.error.bind(console,Rs("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Rs("FATAL"))),t<=ro.error&&(ze.error=console.error?console.error.bind(console,Rs("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Rs("ERROR"))),t<=ro.warn&&(ze.warn=console.warn?console.warn.bind(console,Rs("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Rs("WARN"))),t<=ro.info&&(ze.info=console.info?console.info.bind(console,Rs("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Rs("INFO"))),t<=ro.debug&&(ze.debug=console.debug?console.debug.bind(console,Rs("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Rs("DEBUG"))),t<=ro.trace&&(ze.trace=console.debug?console.debug.bind(console,Rs("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Rs("TRACE")))},"setLogLevel"),Rs=N(e=>`%c${MW().format("ss.SSS")} : ${e} : `,"format");const T0={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,o=2*r-a;switch(n){case"r":return T0.hue2rgb(o,a,e+1/3)*255;case"g":return T0.hue2rgb(o,a,e)*255;case"b":return T0.hue2rgb(o,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),o=Math.min(e,t,r),l=(a+o)/2;if(n==="l")return l*100;if(a===o)return 0;const u=a-o,d=l>.5?u/(2-a-o):u/(a+o);if(n==="s")return d*100;switch(a){case e:return((t-r)/u+(t<r?6:0))*60;case t:return((r-e)/u+2)*60;case r:return((e-t)/u+4)*60;default:return-1}}},OW={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},IW={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Kt={channel:T0,lang:OW,unit:IW},Vo={};for(let e=0;e<=255;e++)Vo[e]=Kt.unit.dec2hex(e);const ya={ALL:0,RGB:1,HSL:2};class DW{constructor(){this.type=ya.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=ya.ALL}is(t){return this.type===t}}class PW{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new DW}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=ya.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:a}=t;r===void 0&&(t.h=Kt.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=Kt.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=Kt.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:a}=t;r===void 0&&(t.r=Kt.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=Kt.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=Kt.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(ya.HSL)&&r!==void 0?r:(this._ensureHSL(),Kt.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(ya.HSL)&&r!==void 0?r:(this._ensureHSL(),Kt.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(ya.HSL)&&r!==void 0?r:(this._ensureHSL(),Kt.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(ya.RGB)&&r!==void 0?r:(this._ensureRGB(),Kt.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(ya.RGB)&&r!==void 0?r:(this._ensureRGB(),Kt.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(ya.RGB)&&r!==void 0?r:(this._ensureRGB(),Kt.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(ya.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(ya.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(ya.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(ya.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(ya.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(ya.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Kp=new PW({r:0,g:0,b:0,a:0},"transparent"),vu={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(vu.re);if(!t)return;const r=t[1],n=parseInt(r,16),a=r.length,o=a%4===0,l=a>4,u=l?1:17,d=l?8:4,h=o?0:-1,f=l?255:15;return Kp.set({r:(n>>d*(h+3)&f)*u,g:(n>>d*(h+2)&f)*u,b:(n>>d*(h+1)&f)*u,a:o?(n&f)*u/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`#${Vo[Math.round(t)]}${Vo[Math.round(r)]}${Vo[Math.round(n)]}${Vo[Math.round(a*255)]}`:`#${Vo[Math.round(t)]}${Vo[Math.round(r)]}${Vo[Math.round(n)]}`}},$l={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match($l.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return Kt.channel.clamp.h(parseFloat(r)*.9);case"rad":return Kt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return Kt.channel.clamp.h(parseFloat(r)*360)}}return Kt.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match($l.re);if(!r)return;const[,n,a,o,l,u]=r;return Kp.set({h:$l._hue2deg(n),s:Kt.channel.clamp.s(parseFloat(a)),l:Kt.channel.clamp.l(parseFloat(o)),a:l?Kt.channel.clamp.a(u?parseFloat(l)/100:parseFloat(l)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a}=e;return a<1?`hsla(${Kt.lang.round(t)}, ${Kt.lang.round(r)}%, ${Kt.lang.round(n)}%, ${a})`:`hsl(${Kt.lang.round(t)}, ${Kt.lang.round(r)}%, ${Kt.lang.round(n)}%)`}},Hh={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Hh.colors[e];if(t)return vu.parse(t)},stringify:e=>{const t=vu.stringify(e);for(const r in Hh.colors)if(Hh.colors[r]===t)return r}},wh={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(wh.re);if(!r)return;const[,n,a,o,l,u,d,h,f]=r;return Kp.set({r:Kt.channel.clamp.r(a?parseFloat(n)*2.55:parseFloat(n)),g:Kt.channel.clamp.g(l?parseFloat(o)*2.55:parseFloat(o)),b:Kt.channel.clamp.b(d?parseFloat(u)*2.55:parseFloat(u)),a:h?Kt.channel.clamp.a(f?parseFloat(h)/100:parseFloat(h)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`rgba(${Kt.lang.round(t)}, ${Kt.lang.round(r)}, ${Kt.lang.round(n)}, ${Kt.lang.round(a)})`:`rgb(${Kt.lang.round(t)}, ${Kt.lang.round(r)}, ${Kt.lang.round(n)})`}},Ni={format:{keyword:Hh,hex:vu,rgb:wh,rgba:wh,hsl:$l,hsla:$l},parse:e=>{if(typeof e!="string")return e;const t=vu.parse(e)||wh.parse(e)||$l.parse(e)||Hh.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(ya.HSL)||e.data.r===void 0?$l.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?wh.stringify(e):vu.stringify(e)},m4=(e,t)=>{const r=Ni.parse(e);for(const n in t)r[n]=Kt.channel.clamp[n](t[n]);return Ni.stringify(r)},qh=(e,t,r=0,n=1)=>{if(typeof e!="number")return m4(e,{a:t});const a=Kp.set({r:Kt.channel.clamp.r(e),g:Kt.channel.clamp.g(t),b:Kt.channel.clamp.b(r),a:Kt.channel.clamp.a(n)});return Ni.stringify(a)},BW=e=>{const{r:t,g:r,b:n}=Ni.parse(e),a=.2126*Kt.channel.toLinear(t)+.7152*Kt.channel.toLinear(r)+.0722*Kt.channel.toLinear(n);return Kt.lang.round(a)},FW=e=>BW(e)>=.5,Ng=e=>!FW(e),x4=(e,t,r)=>{const n=Ni.parse(e),a=n[t],o=Kt.channel.clamp[t](a+r);return a!==o&&(n[t]=o),Ni.stringify(n)},yt=(e,t)=>x4(e,"l",t),Rt=(e,t)=>x4(e,"l",-t),ye=(e,t)=>{const r=Ni.parse(e),n={};for(const a in t)t[a]&&(n[a]=r[a]+t[a]);return m4(e,n)},UW=(e,t,r=50)=>{const{r:n,g:a,b:o,a:l}=Ni.parse(e),{r:u,g:d,b:h,a:f}=Ni.parse(t),p=r/100,x=p*2-1,b=l-f,k=((x*b===-1?x:(x+b)/(1+x*b))+1)/2,S=1-k,_=n*k+u*S,T=a*k+d*S,A=o*k+h*S,I=l*p+f*(1-p);return qh(_,T,A,I)},ct=(e,t=100)=>{const r=Ni.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,UW(r,e,t)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:b4,setPrototypeOf:lT,isFrozen:$W,getPrototypeOf:zW,getOwnPropertyDescriptor:HW}=Object;let{freeze:Pa,seal:Bs,create:l1}=Object,{apply:c1,construct:u1}=typeof Reflect<"u"&&Reflect;Pa||(Pa=function(t){return t});Bs||(Bs=function(t){return t});c1||(c1=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return t.apply(r,a)});u1||(u1=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return new t(...n)});const i0=Ba(Array.prototype.forEach),qW=Ba(Array.prototype.lastIndexOf),cT=Ba(Array.prototype.pop),oh=Ba(Array.prototype.push),GW=Ba(Array.prototype.splice),C0=Ba(String.prototype.toLowerCase),ny=Ba(String.prototype.toString),ay=Ba(String.prototype.match),lh=Ba(String.prototype.replace),YW=Ba(String.prototype.indexOf),WW=Ba(String.prototype.trim),Zs=Ba(Object.prototype.hasOwnProperty),La=Ba(RegExp.prototype.test),ch=VW(TypeError);function Ba(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return c1(e,t,n)}}function VW(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u1(e,r)}}function wr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C0;lT&&lT(e,null);let n=t.length;for(;n--;){let a=t[n];if(typeof a=="string"){const o=r(a);o!==a&&($W(t)||(t[n]=o),a=o)}e[a]=!0}return e}function KW(e){for(let t=0;t<e.length;t++)Zs(e,t)||(e[t]=null);return e}function ao(e){const t=l1(null);for(const[r,n]of b4(e))Zs(e,r)&&(Array.isArray(n)?t[r]=KW(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=ao(n):t[r]=n);return t}function uh(e,t){for(;e!==null;){const n=HW(e,t);if(n){if(n.get)return Ba(n.get);if(typeof n.value=="function")return Ba(n.value)}e=zW(e)}function r(){return null}return r}const uT=Pa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sy=Pa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),iy=Pa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),XW=Pa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),oy=Pa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),QW=Pa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dT=Pa(["#text"]),hT=Pa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ly=Pa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gT=Pa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),o0=Pa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZW=Bs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),JW=Bs(/<%[\w\W]*|[\w\W]*%>/gm),eV=Bs(/\$\{[\w\W]*/gm),tV=Bs(/^data-[\-\w.\u00B7-\uFFFF]+$/),rV=Bs(/^aria-[\-\w]+$/),y4=Bs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nV=Bs(/^(?:\w+script|data):/i),aV=Bs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),v4=Bs(/^html$/i),sV=Bs(/^[a-z][.\w]*(-[.\w]+)+$/i);var fT=Object.freeze({__proto__:null,ARIA_ATTR:rV,ATTR_WHITESPACE:aV,CUSTOM_ELEMENT:sV,DATA_ATTR:tV,DOCTYPE_NAME:v4,ERB_EXPR:JW,IS_ALLOWED_URI:y4,IS_SCRIPT_OR_DATA:nV,MUSTACHE_EXPR:ZW,TMPLIT_EXPR:eV});const dh={element:1,text:3,progressingInstruction:7,comment:8,document:9},iV=function(){return typeof window>"u"?null:window},oV=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(n=r.getAttribute(a));const o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},pT=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function k4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iV();const t=ft=>k4(ft);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==dh.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,a=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:u,Element:d,NodeFilter:h,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:x,trustedTypes:b}=e,y=d.prototype,k=uh(y,"cloneNode"),S=uh(y,"remove"),_=uh(y,"nextSibling"),T=uh(y,"childNodes"),A=uh(y,"parentNode");if(typeof l=="function"){const ft=r.createElement("template");ft.content&&ft.content.ownerDocument&&(r=ft.content.ownerDocument)}let I,O="";const{implementation:B,createNodeIterator:F,createDocumentFragment:ae,getElementsByTagName:Z}=r,{importNode:z}=n;let ee=pT();t.isSupported=typeof b4=="function"&&typeof A=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:$,TMPLIT_EXPR:L,DATA_ATTR:q,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:xe}=fT;let{IS_ALLOWED_URI:U}=fT,M=null;const Y=wr({},[...uT,...sy,...iy,...oy,...dT]);let R=null;const H=wr({},[...hT,...ly,...gT,...o0]);let ne=Object.seal(l1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),re=null,fe=null;const le=Object.seal(l1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ve=!0,ce=!0,ke=!1,it=!0,pt=!1,zt=!0,Sr=!1,He=!1,Gt=!1,rr=!1,Dt=!1,Ht=!1,Zt=!0,hr=!1;const ar="user-content-";let Ut=!0,dn=!1,Ne={},Ke=null;const St=wr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Tt=null;const sr=wr({},["audio","video","img","source","image","track"]);let on=null;const hn=wr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gr="http://www.w3.org/1998/Math/MathML",Tr="http://www.w3.org/2000/svg",pr="http://www.w3.org/1999/xhtml";let Yt=pr,gn=!1,fn=null;const rs=wr({},[Gr,Tr,pr],ny);let aa=wr({},["mi","mo","mn","ms","mtext"]),Gn=wr({},["annotation-xml"]);const sa=wr({},["title","style","font","a","script"]);let Qr=null;const oe=["application/xhtml+xml","text/html"],Re="text/html";let qe=null,bt=null;const Cr=r.createElement("form"),br=function(de){return de instanceof RegExp||de instanceof Function},ut=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(bt&&bt===de)){if((!de||typeof de!="object")&&(de={}),de=ao(de),Qr=oe.indexOf(de.PARSER_MEDIA_TYPE)===-1?Re:de.PARSER_MEDIA_TYPE,qe=Qr==="application/xhtml+xml"?ny:C0,M=Zs(de,"ALLOWED_TAGS")?wr({},de.ALLOWED_TAGS,qe):Y,R=Zs(de,"ALLOWED_ATTR")?wr({},de.ALLOWED_ATTR,qe):H,fn=Zs(de,"ALLOWED_NAMESPACES")?wr({},de.ALLOWED_NAMESPACES,ny):rs,on=Zs(de,"ADD_URI_SAFE_ATTR")?wr(ao(hn),de.ADD_URI_SAFE_ATTR,qe):hn,Tt=Zs(de,"ADD_DATA_URI_TAGS")?wr(ao(sr),de.ADD_DATA_URI_TAGS,qe):sr,Ke=Zs(de,"FORBID_CONTENTS")?wr({},de.FORBID_CONTENTS,qe):St,re=Zs(de,"FORBID_TAGS")?wr({},de.FORBID_TAGS,qe):ao({}),fe=Zs(de,"FORBID_ATTR")?wr({},de.FORBID_ATTR,qe):ao({}),Ne=Zs(de,"USE_PROFILES")?de.USE_PROFILES:!1,ve=de.ALLOW_ARIA_ATTR!==!1,ce=de.ALLOW_DATA_ATTR!==!1,ke=de.ALLOW_UNKNOWN_PROTOCOLS||!1,it=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pt=de.SAFE_FOR_TEMPLATES||!1,zt=de.SAFE_FOR_XML!==!1,Sr=de.WHOLE_DOCUMENT||!1,rr=de.RETURN_DOM||!1,Dt=de.RETURN_DOM_FRAGMENT||!1,Ht=de.RETURN_TRUSTED_TYPE||!1,Gt=de.FORCE_BODY||!1,Zt=de.SANITIZE_DOM!==!1,hr=de.SANITIZE_NAMED_PROPS||!1,Ut=de.KEEP_CONTENT!==!1,dn=de.IN_PLACE||!1,U=de.ALLOWED_URI_REGEXP||y4,Yt=de.NAMESPACE||pr,aa=de.MATHML_TEXT_INTEGRATION_POINTS||aa,Gn=de.HTML_INTEGRATION_POINTS||Gn,ne=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&br(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ne.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&br(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ne.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ne.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pt&&(ce=!1),Dt&&(rr=!0),Ne&&(M=wr({},dT),R=[],Ne.html===!0&&(wr(M,uT),wr(R,hT)),Ne.svg===!0&&(wr(M,sy),wr(R,ly),wr(R,o0)),Ne.svgFilters===!0&&(wr(M,iy),wr(R,ly),wr(R,o0)),Ne.mathMl===!0&&(wr(M,oy),wr(R,gT),wr(R,o0))),de.ADD_TAGS&&(typeof de.ADD_TAGS=="function"?le.tagCheck=de.ADD_TAGS:(M===Y&&(M=ao(M)),wr(M,de.ADD_TAGS,qe))),de.ADD_ATTR&&(typeof de.ADD_ATTR=="function"?le.attributeCheck=de.ADD_ATTR:(R===H&&(R=ao(R)),wr(R,de.ADD_ATTR,qe))),de.ADD_URI_SAFE_ATTR&&wr(on,de.ADD_URI_SAFE_ATTR,qe),de.FORBID_CONTENTS&&(Ke===St&&(Ke=ao(Ke)),wr(Ke,de.FORBID_CONTENTS,qe)),Ut&&(M["#text"]=!0),Sr&&wr(M,["html","head","body"]),M.table&&(wr(M,["tbody"]),delete re.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw ch('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ch('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=de.TRUSTED_TYPES_POLICY,O=I.createHTML("")}else I===void 0&&(I=oV(b,a)),I!==null&&typeof O=="string"&&(O=I.createHTML(""));Pa&&Pa(de),bt=de}},lt=wr({},[...sy,...iy,...XW]),At=wr({},[...oy,...QW]),dt=function(de){let $e=A(de);(!$e||!$e.tagName)&&($e={namespaceURI:Yt,tagName:"template"});const ot=C0(de.tagName),fr=C0($e.tagName);return fn[de.namespaceURI]?de.namespaceURI===Tr?$e.namespaceURI===pr?ot==="svg":$e.namespaceURI===Gr?ot==="svg"&&(fr==="annotation-xml"||aa[fr]):!!lt[ot]:de.namespaceURI===Gr?$e.namespaceURI===pr?ot==="math":$e.namespaceURI===Tr?ot==="math"&&Gn[fr]:!!At[ot]:de.namespaceURI===pr?$e.namespaceURI===Tr&&!Gn[fr]||$e.namespaceURI===Gr&&!aa[fr]?!1:!At[ot]&&(sa[ot]||!lt[ot]):!!(Qr==="application/xhtml+xml"&&fn[de.namespaceURI]):!1},cr=function(de){oh(t.removed,{element:de});try{A(de).removeChild(de)}catch{S(de)}},nn=function(de,$e){try{oh(t.removed,{attribute:$e.getAttributeNode(de),from:$e})}catch{oh(t.removed,{attribute:null,from:$e})}if($e.removeAttribute(de),de==="is")if(rr||Dt)try{cr($e)}catch{}else try{$e.setAttribute(de,"")}catch{}},ga=function(de){let $e=null,ot=null;if(Gt)de="<remove></remove>"+de;else{const Vt=ay(de,/^[\r\n\t ]+/);ot=Vt&&Vt[0]}Qr==="application/xhtml+xml"&&Yt===pr&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const fr=I?I.createHTML(de):de;if(Yt===pr)try{$e=new x().parseFromString(fr,Qr)}catch{}if(!$e||!$e.documentElement){$e=B.createDocument(Yt,"template",null);try{$e.documentElement.innerHTML=gn?O:fr}catch{}}const Hr=$e.body||$e.documentElement;return de&&ot&&Hr.insertBefore(r.createTextNode(ot),Hr.childNodes[0]||null),Yt===pr?Z.call($e,Sr?"html":"body")[0]:Sr?$e.documentElement:Hr},fa=function(de){return F.call(de.ownerDocument||de,de,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Tn=function(de){return de instanceof p&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof f)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},Pr=function(de){return typeof u=="function"&&de instanceof u};function Rr(ft,de,$e){i0(ft,ot=>{ot.call(t,de,$e,bt)})}const Yn=function(de){let $e=null;if(Rr(ee.beforeSanitizeElements,de,null),Tn(de))return cr(de),!0;const ot=qe(de.nodeName);if(Rr(ee.uponSanitizeElement,de,{tagName:ot,allowedTags:M}),zt&&de.hasChildNodes()&&!Pr(de.firstElementChild)&&La(/<[/\w!]/g,de.innerHTML)&&La(/<[/\w!]/g,de.textContent)||de.nodeType===dh.progressingInstruction||zt&&de.nodeType===dh.comment&&La(/<[/\w]/g,de.data))return cr(de),!0;if(!(le.tagCheck instanceof Function&&le.tagCheck(ot))&&(!M[ot]||re[ot])){if(!re[ot]&&Hs(ot)&&(ne.tagNameCheck instanceof RegExp&&La(ne.tagNameCheck,ot)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(ot)))return!1;if(Ut&&!Ke[ot]){const fr=A(de)||de.parentNode,Hr=T(de)||de.childNodes;if(Hr&&fr){const Vt=Hr.length;for(let he=Vt-1;he>=0;--he){const Be=k(Hr[he],!0);Be.__removalCount=(de.__removalCount||0)+1,fr.insertBefore(Be,_(de))}}}return cr(de),!0}return de instanceof d&&!dt(de)||(ot==="noscript"||ot==="noembed"||ot==="noframes")&&La(/<\/no(script|embed|frames)/i,de.innerHTML)?(cr(de),!0):(pt&&de.nodeType===dh.text&&($e=de.textContent,i0([W,$,L],fr=>{$e=lh($e,fr," ")}),de.textContent!==$e&&(oh(t.removed,{element:de.cloneNode()}),de.textContent=$e)),Rr(ee.afterSanitizeElements,de,null),!1)},Fa=function(de,$e,ot){if(Zt&&($e==="id"||$e==="name")&&(ot in r||ot in Cr))return!1;if(!(ce&&!fe[$e]&&La(q,$e))){if(!(ve&&La(D,$e))){if(!(le.attributeCheck instanceof Function&&le.attributeCheck($e,de))){if(!R[$e]||fe[$e]){if(!(Hs(de)&&(ne.tagNameCheck instanceof RegExp&&La(ne.tagNameCheck,de)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(de))&&(ne.attributeNameCheck instanceof RegExp&&La(ne.attributeNameCheck,$e)||ne.attributeNameCheck instanceof Function&&ne.attributeNameCheck($e,de))||$e==="is"&&ne.allowCustomizedBuiltInElements&&(ne.tagNameCheck instanceof RegExp&&La(ne.tagNameCheck,ot)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(ot))))return!1}else if(!on[$e]){if(!La(U,lh(ot,K,""))){if(!(($e==="src"||$e==="xlink:href"||$e==="href")&&de!=="script"&&YW(ot,"data:")===0&&Tt[de])){if(!(ke&&!La(X,lh(ot,K,"")))){if(ot)return!1}}}}}}}return!0},Hs=function(de){return de!=="annotation-xml"&&ay(de,xe)},Ua=function(de){Rr(ee.beforeSanitizeAttributes,de,null);const{attributes:$e}=de;if(!$e||Tn(de))return;const ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let fr=$e.length;for(;fr--;){const Hr=$e[fr],{name:Vt,namespaceURI:he,value:Be}=Hr,st=qe(Vt),Ae=Be;let Ge=Vt==="value"?Ae:WW(Ae);if(ot.attrName=st,ot.attrValue=Ge,ot.keepAttr=!0,ot.forceKeepAttr=void 0,Rr(ee.uponSanitizeAttribute,de,ot),Ge=ot.attrValue,hr&&(st==="id"||st==="name")&&(nn(Vt,de),Ge=ar+Ge),zt&&La(/((--!?|])>)|<\/(style|title|textarea)/i,Ge)){nn(Vt,de);continue}if(st==="attributename"&&ay(Ge,"href")){nn(Vt,de);continue}if(ot.forceKeepAttr)continue;if(!ot.keepAttr){nn(Vt,de);continue}if(!it&&La(/\/>/i,Ge)){nn(Vt,de);continue}pt&&i0([W,$,L],Ct=>{Ge=lh(Ge,Ct," ")});const gt=qe(de.nodeName);if(!Fa(gt,st,Ge)){nn(Vt,de);continue}if(I&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!he)switch(b.getAttributeType(gt,st)){case"TrustedHTML":{Ge=I.createHTML(Ge);break}case"TrustedScriptURL":{Ge=I.createScriptURL(Ge);break}}if(Ge!==Ae)try{he?de.setAttributeNS(he,Vt,Ge):de.setAttribute(Vt,Ge),Tn(de)?cr(de):cT(t.removed)}catch{nn(Vt,de)}}Rr(ee.afterSanitizeAttributes,de,null)},ci=function ft(de){let $e=null;const ot=fa(de);for(Rr(ee.beforeSanitizeShadowDOM,de,null);$e=ot.nextNode();)Rr(ee.uponSanitizeShadowNode,$e,null),Yn($e),Ua($e),$e.content instanceof o&&ft($e.content);Rr(ee.afterSanitizeShadowDOM,de,null)};return t.sanitize=function(ft){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=null,ot=null,fr=null,Hr=null;if(gn=!ft,gn&&(ft="<!-->"),typeof ft!="string"&&!Pr(ft))if(typeof ft.toString=="function"){if(ft=ft.toString(),typeof ft!="string")throw ch("dirty is not a string, aborting")}else throw ch("toString is not a function");if(!t.isSupported)return ft;if(He||ut(de),t.removed=[],typeof ft=="string"&&(dn=!1),dn){if(ft.nodeName){const Be=qe(ft.nodeName);if(!M[Be]||re[Be])throw ch("root node is forbidden and cannot be sanitized in-place")}}else if(ft instanceof u)$e=ga("<!---->"),ot=$e.ownerDocument.importNode(ft,!0),ot.nodeType===dh.element&&ot.nodeName==="BODY"||ot.nodeName==="HTML"?$e=ot:$e.appendChild(ot);else{if(!rr&&!pt&&!Sr&&ft.indexOf("<")===-1)return I&&Ht?I.createHTML(ft):ft;if($e=ga(ft),!$e)return rr?null:Ht?O:""}$e&&Gt&&cr($e.firstChild);const Vt=fa(dn?ft:$e);for(;fr=Vt.nextNode();)Yn(fr),Ua(fr),fr.content instanceof o&&ci(fr.content);if(dn)return ft;if(rr){if(Dt)for(Hr=ae.call($e.ownerDocument);$e.firstChild;)Hr.appendChild($e.firstChild);else Hr=$e;return(R.shadowroot||R.shadowrootmode)&&(Hr=z.call(n,Hr,!0)),Hr}let he=Sr?$e.outerHTML:$e.innerHTML;return Sr&&M["!doctype"]&&$e.ownerDocument&&$e.ownerDocument.doctype&&$e.ownerDocument.doctype.name&&La(v4,$e.ownerDocument.doctype.name)&&(he="<!DOCTYPE "+$e.ownerDocument.doctype.name+`>
`+he),pt&&i0([W,$,L],Be=>{he=lh(he,Be," ")}),I&&Ht?I.createHTML(he):he},t.setConfig=function(){let ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ut(ft),He=!0},t.clearConfig=function(){bt=null,He=!1},t.isValidAttribute=function(ft,de,$e){bt||ut({});const ot=qe(ft),fr=qe(de);return Fa(ot,fr,$e)},t.addHook=function(ft,de){typeof de=="function"&&oh(ee[ft],de)},t.removeHook=function(ft,de){if(de!==void 0){const $e=qW(ee[ft],de);return $e===-1?void 0:GW(ee[ft],$e,1)[0]}return cT(ee[ft])},t.removeHooks=function(ft){ee[ft]=[]},t.removeAllHooks=function(){ee=pT()},t}var Ru=k4(),w4=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Gh=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,lV=/\s*%%.*\n/gm,Eu,E4=(Eu=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},N(Eu,"UnknownDiagramError"),Eu),Jl={},qv=N(function(e,t){e=e.replace(w4,"").replace(Gh,"").replace(lV,`
`);for(const[r,{detector:n}]of Object.entries(Jl))if(n(e,t))return r;throw new E4(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),d1=N((...e)=>{for(const{id:t,detector:r,loader:n}of e)_4(t,r,n)},"registerLazyLoadedDiagrams"),_4=N((e,t,r)=>{Jl[e]&&ze.warn(`Detector with key ${e} already exists. Overwriting.`),Jl[e]={detector:t,loader:r},ze.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),cV=N(e=>Jl[e].loader,"getDiagramLoader"),h1=N((e,t,{depth:r=2,clobber:n=!1}={})=>{const a={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(o=>h1(e,o,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(o=>{e.includes(o)||e.push(o)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(o=>{typeof t[o]=="object"&&(e[o]===void 0||typeof e[o]=="object")?(e[o]===void 0&&(e[o]=Array.isArray(t[o])?[]:{}),e[o]=h1(e[o],t[o],{depth:r-1,clobber:n})):(n||typeof e[o]!="object"&&typeof t[o]!="object")&&(e[o]=t[o])}),e)},"assignWithDepth"),Qn=h1,Xp="#ffffff",Qp="#f2f2f2",Oa=N((e,t)=>t?ye(e,{s:-40,l:10}):ye(e,{s:-40,l:-10}),"mkBorder"),_u,uV=(_u=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ye(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ye(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Oa(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Oa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Oa(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Oa(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ct(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ct(this.tertiaryColor),this.lineColor=this.lineColor||ct(this.background),this.arrowheadColor=this.arrowheadColor||ct(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Rt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ct(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||yt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Rt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Rt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||yt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||yt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Rt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Rt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||ct(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||yt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||Rt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||ye(this.mainBkg,{h:180,s:-15,l:t*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||ye(this.mainBkg,{h:180,s:-15,l:t*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ye(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ye(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ye(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ye(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ye(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ng(this.quadrant1Fill)?yt(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=yt(this.git0,25),this.git1=yt(this.git1,25),this.git2=yt(this.git2,25),this.git3=yt(this.git3,25),this.git4=yt(this.git4,25),this.git5=yt(this.git5,25),this.git6=yt(this.git6,25),this.git7=yt(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||ct(this.git0),this.gitInv1=this.gitInv1||ct(this.git1),this.gitInv2=this.gitInv2||ct(this.git2),this.gitInv3=this.gitInv3||ct(this.git3),this.gitInv4=this.gitInv4||ct(this.git4),this.gitInv5=this.gitInv5||ct(this.git5),this.gitInv6=this.gitInv6||ct(this.git6),this.gitInv7=this.gitInv7||ct(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xp,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qp}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(_u,"Theme"),_u),dV=N(e=>{const t=new uV;return t.calculate(e),t},"getThemeVariables"),Su,hV=(Su=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=yt(this.primaryColor,16),this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=ct(this.background),this.secondaryBorderColor=Oa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Oa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ct(this.primaryColor),this.secondaryTextColor=ct(this.secondaryColor),this.tertiaryTextColor=ct(this.tertiaryColor),this.lineColor=ct(this.background),this.textColor=ct(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=yt(ct("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=qh(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Rt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Rt(this.sectionBkgColor,10),this.taskBorderColor=qh(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=qh(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||yt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Rt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=yt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=yt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=yt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ct(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||yt(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(-10+t*4)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(-7+t*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ng(this.quadrant1Fill)?yt(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=yt(this.secondaryColor,20),this.git1=yt(this.pie2||this.secondaryColor,20),this.git2=yt(this.pie3||this.tertiaryColor,20),this.git3=yt(this.pie4||ye(this.primaryColor,{h:-30}),20),this.git4=yt(this.pie5||ye(this.primaryColor,{h:-60}),20),this.git5=yt(this.pie6||ye(this.primaryColor,{h:-90}),10),this.git6=yt(this.pie7||ye(this.primaryColor,{h:60}),10),this.git7=yt(this.pie8||ye(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ct(this.git0),this.gitInv1=this.gitInv1||ct(this.git1),this.gitInv2=this.gitInv2||ct(this.git2),this.gitInv3=this.gitInv3||ct(this.git3),this.gitInv4=this.gitInv4||ct(this.git4),this.gitInv5=this.gitInv5||ct(this.git5),this.gitInv6=this.gitInv6||ct(this.git6),this.gitInv7=this.gitInv7||ct(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ct(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ct(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||yt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||yt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(Su,"Theme"),Su),gV=N(e=>{const t=new hV;return t.calculate(e),t},"getThemeVariables"),Tu,fV=(Tu=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ye(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=Oa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Oa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Oa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ct(this.primaryColor),this.secondaryTextColor=ct(this.secondaryColor),this.tertiaryTextColor=ct(this.tertiaryColor),this.lineColor=ct(this.background),this.textColor=ct(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=qh(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Rt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Rt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ye(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,l:-(7+t*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ct(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ct(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=yt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||yt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||yt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ye(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ye(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ng(this.quadrant1Fill)?yt(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=yt(this.git0,25),this.git1=yt(this.git1,25),this.git2=yt(this.git2,25),this.git3=yt(this.git3,25),this.git4=yt(this.git4,25),this.git5=yt(this.git5,25),this.git6=yt(this.git6,25),this.git7=yt(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||Rt(ct(this.git0),25),this.gitInv1=this.gitInv1||ct(this.git1),this.gitInv2=this.gitInv2||ct(this.git2),this.gitInv3=this.gitInv3||ct(this.git3),this.gitInv4=this.gitInv4||ct(this.git4),this.gitInv5=this.gitInv5||ct(this.git5),this.gitInv6=this.gitInv6||ct(this.git6),this.gitInv7=this.gitInv7||ct(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ct(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ct(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xp,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qp}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(Tu,"Theme"),Tu),pV=N(e=>{const t=new fV;return t.calculate(e),t},"getThemeVariables"),Cu,mV=(Cu=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=yt("#cde498",10),this.primaryBorderColor=Oa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Oa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Oa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ct(this.primaryColor),this.secondaryTextColor=ct(this.secondaryColor),this.tertiaryTextColor=ct(this.primaryColor),this.lineColor=ct(this.background),this.textColor=ct(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Rt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Rt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Rt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ye(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||yt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||yt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-30}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ng(this.quadrant1Fill)?yt(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=yt(this.git0,25),this.git1=yt(this.git1,25),this.git2=yt(this.git2,25),this.git3=yt(this.git3,25),this.git4=yt(this.git4,25),this.git5=yt(this.git5,25),this.git6=yt(this.git6,25),this.git7=yt(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||ct(this.git0),this.gitInv1=this.gitInv1||ct(this.git1),this.gitInv2=this.gitInv2||ct(this.git2),this.gitInv3=this.gitInv3||ct(this.git3),this.gitInv4=this.gitInv4||ct(this.git4),this.gitInv5=this.gitInv5||ct(this.git5),this.gitInv6=this.gitInv6||ct(this.git6),this.gitInv7=this.gitInv7||ct(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ct(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ct(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xp,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qp}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(Cu,"Theme"),Cu),xV=N(e=>{const t=new mV;return t.calculate(e),t},"getThemeVariables"),Nu,bV=(Nu=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=yt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=Oa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Oa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Oa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ct(this.primaryColor),this.secondaryTextColor=ct(this.secondaryColor),this.tertiaryTextColor=ct(this.tertiaryColor),this.lineColor=ct(this.background),this.textColor=ct(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||yt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=yt(this.contrast,55),this.border2=this.contrast,this.actorBorder=yt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ct(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||yt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=yt(this.contrast,30),this.sectionBkgColor2=yt(this.contrast,30),this.taskBorderColor=Rt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=yt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Rt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ng(this.quadrant1Fill)?yt(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Rt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ye(this.primaryColor,{h:-30}),this.git4=this.pie5||ye(this.primaryColor,{h:-60}),this.git5=this.pie6||ye(this.primaryColor,{h:-90}),this.git6=this.pie7||ye(this.primaryColor,{h:60}),this.git7=this.pie8||ye(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ct(this.git0),this.gitInv1=this.gitInv1||ct(this.git1),this.gitInv2=this.gitInv2||ct(this.git2),this.gitInv3=this.gitInv3||ct(this.git3),this.gitInv4=this.gitInv4||ct(this.git4),this.gitInv5=this.gitInv5||ct(this.git5),this.gitInv6=this.gitInv6||ct(this.git6),this.gitInv7=this.gitInv7||ct(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Xp,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qp}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},N(Nu,"Theme"),Nu),yV=N(e=>{const t=new bV;return t.calculate(e),t},"getThemeVariables"),co={base:{getThemeVariables:dV},dark:{getThemeVariables:gV},default:{getThemeVariables:pV},forest:{getThemeVariables:xV},neutral:{getThemeVariables:yV}},yi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},S4={...yi,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:co.default.getThemeVariables(),sequence:{...yi.sequence,messageFont:N(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:N(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:N(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...yi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...yi.c4,useWidth:void 0,personFont:N(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...yi.flowchart,inheritDir:!1},external_personFont:N(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:N(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:N(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:N(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:N(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:N(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:N(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:N(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:N(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:N(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:N(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:N(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:N(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:N(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:N(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:N(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:N(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:N(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:N(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:N(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:N(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...yi.pie,useWidth:984},xyChart:{...yi.xyChart,useWidth:void 0},requirement:{...yi.requirement,useWidth:void 0},packet:{...yi.packet},radar:{...yi.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},T4=N((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...T4(e[n],"")]:[...r,t+n],[]),"keyify"),vV=new Set(T4(S4,"")),C4=S4,Q0=N(e=>{if(ze.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Q0(t));return}for(const t of Object.keys(e)){if(ze.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!vV.has(t)||e[t]==null){ze.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){ze.debug("sanitizing object",t),Q0(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(ze.debug("sanitizing css option",t),e[t]=kV(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}ze.debug("After sanitization",e)}},"sanitizeDirective"),kV=N(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Ou=Object.freeze(C4),Qa=Qn({},Ou),Z0,ec=[],Yh=Qn({},Ou),Zp=N((e,t)=>{let r=Qn({},e),n={};for(const a of t)L4(a),n=Qn(n,a);if(r=Qn(r,n),n.theme&&n.theme in co){const a=Qn({},Z0),o=Qn(a.themeVariables||{},n.themeVariables);r.theme&&r.theme in co&&(r.themeVariables=co[r.theme].getThemeVariables(o))}return Yh=r,j4(Yh),Yh},"updateCurrentConfig"),wV=N(e=>(Qa=Qn({},Ou),Qa=Qn(Qa,e),e.theme&&co[e.theme]&&(Qa.themeVariables=co[e.theme].getThemeVariables(e.themeVariables)),Zp(Qa,ec),Qa),"setSiteConfig"),EV=N(e=>{Z0=Qn({},e)},"saveConfigFromInitialize"),_V=N(e=>(Qa=Qn(Qa,e),Zp(Qa,ec),Qa),"updateSiteConfig"),N4=N(()=>Qn({},Qa),"getSiteConfig"),A4=N(e=>(j4(e),Qn(Yh,e),wa()),"setConfig"),wa=N(()=>Qn({},Yh),"getConfig"),L4=N(e=>{e&&(["secure",...Qa.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(ze.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&L4(e[t])}))},"sanitize"),SV=N(e=>{Q0(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),ec.push(e),Zp(Qa,ec)},"addDirective"),J0=N((e=Qa)=>{ec=[],Zp(e,ec)},"reset"),TV={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},mT={},CV=N(e=>{mT[e]||(ze.warn(TV[e]),mT[e]=!0)},"issueWarning"),j4=N(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&CV("LAZY_LOAD_DEPRECATED")},"checkConfig"),xce=N(()=>{let e={};Z0&&(e=Qn(e,Z0));for(const t of ec)e=Qn(e,t);return e},"getUserDefinedConfig"),Ag=/<br\s*\/?>/gi,NV=N(e=>e?O4(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),AV=(()=>{let e=!1;return()=>{e||(M4(),e=!0)}})();function M4(){const e="data-temp-href-target";Ru.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Ru.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}N(M4,"setupDompurifyHooks");var R4=N(e=>(AV(),Ru.sanitize(e)),"removeScript"),xT=N((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=R4(e):r!=="loose"&&(e=O4(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=RV(e))}return e},"sanitizeMore"),Fs=N((e,t)=>e&&(t.dompurifyConfig?e=Ru.sanitize(xT(e,t),t.dompurifyConfig).toString():e=Ru.sanitize(xT(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),LV=N((e,t)=>typeof e=="string"?Fs(e,t):e.flat().map(r=>Fs(r,t)),"sanitizeTextOrArray"),jV=N(e=>Ag.test(e),"hasBreaks"),MV=N(e=>e.split(Ag),"splitBreaks"),RV=N(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),O4=N(e=>e.replace(Ag,"#br#"),"breakToPlaceholder"),OV=N(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),Jn=N(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),IV=N(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),DV=N(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),bT=N(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let a=t[n];if(a===","&&n>0&&n+1<t.length){const o=t[n-1],l=t[n+1];PV(o,l)&&(a=o+","+l,n++,r.pop())}r.push(BV(a))}return r.join("")},"parseGenericTypes"),g1=N((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),PV=N((e,t)=>{const r=g1(e,"~"),n=g1(t,"~");return r===1&&n===1},"shouldCombineSets"),BV=N(e=>{const t=g1(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let a=n.indexOf("~"),o=n.lastIndexOf("~");for(;a!==-1&&o!==-1&&a!==o;)n[a]="<",n[o]=">",a=n.indexOf("~"),o=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),yT=N(()=>window.MathMLElement!==void 0,"isMathMLSupported"),f1=/\$\$(.*)\$\$/g,Iu=N(e=>(e.match(f1)?.length??0)>0,"hasKatex"),bce=N(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await Gv(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),FV=N(async(e,t)=>{if(!Iu(e))return e;if(!(yT()||t.legacyMathML||t.forceLegacyMathML))return e.replace(f1,"MathML is unsupported in this environment.");{const{default:r}=await tr(async()=>{const{default:a}=await import("./katex-qrhCpa0F.js");return{default:a}},[]),n=t.forceLegacyMathML||!yT()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(Ag).map(a=>Iu(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(f1,(a,o)=>r.renderToString(o,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),Gv=N(async(e,t)=>Fs(await FV(e,t),t),"renderKatexSanitized"),ed={getRows:NV,sanitizeText:Fs,sanitizeTextOrArray:LV,hasBreaks:jV,splitBreaks:MV,lineBreakRegex:Ag,removeScript:R4,getUrl:OV,evaluate:Jn,getMax:IV,getMin:DV},UV=N(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),$V=N(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),I4=N(function(e,t,r,n){const a=$V(t,r,n);UV(e,a)},"configureSvgSize"),zV=N(function(e,t,r,n){const a=t.node().getBBox(),o=a.width,l=a.height;ze.info(`SVG bounds: ${o}x${l}`,a);let u=0,d=0;ze.info(`Graph bounds: ${u}x${d}`,e),u=o+r*2,d=l+r*2,ze.info(`Calculated bounds: ${u}x${d}`),I4(t,d,u,n);const h=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",h)},"setupGraphViewbox"),N0={},HV=N((e,t,r)=>{let n="";return e in N0&&N0[e]?n=N0[e](r):ze.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),qV=N((e,t)=>{t!==void 0&&(N0[e]=t)},"addStylesForDiagram"),GV=HV,D4={};RW(D4,{clear:()=>YV,getAccDescription:()=>XV,getAccTitle:()=>VV,getDiagramTitle:()=>ZV,setAccDescription:()=>KV,setAccTitle:()=>WV,setDiagramTitle:()=>QV});var Yv="",Wv="",Vv="",Kv=N(e=>Fs(e,wa()),"sanitizeText"),YV=N(()=>{Yv="",Vv="",Wv=""},"clear"),WV=N(e=>{Yv=Kv(e).replace(/^\s+/g,"")},"setAccTitle"),VV=N(()=>Yv,"getAccTitle"),KV=N(e=>{Vv=Kv(e).replace(/\n\s+/g,`
`)},"setAccDescription"),XV=N(()=>Vv,"getAccDescription"),QV=N(e=>{Wv=Kv(e)},"setDiagramTitle"),ZV=N(()=>Wv,"getDiagramTitle"),vT=ze,JV=Hv,Yr=wa,yce=A4,vce=Ou,Xv=N(e=>Fs(e,Yr()),"sanitizeText"),eK=zV,tK=N(()=>D4,"getCommonDb"),ep={},tp=N((e,t,r)=>{ep[e]&&vT.warn(`Diagram with id ${e} already registered. Overwriting.`),ep[e]=t,r&&_4(e,r),qV(e,t.styles),t.injectUtils?.(vT,JV,Yr,Xv,eK,tK(),()=>{})},"registerDiagram"),p1=N(e=>{if(e in ep)return ep[e];throw new rK(e)},"getDiagram"),Au,rK=(Au=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},N(Au,"DiagramNotFoundError"),Au),nK={value:()=>{}};function P4(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new A0(r)}function A0(e){this._=e}function aK(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}A0.prototype=P4.prototype={constructor:A0,on:function(e,t){var r=this._,n=aK(e+"",r),a,o=-1,l=n.length;if(arguments.length<2){for(;++o<l;)if((a=(e=n[o]).type)&&(a=sK(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<l;)if(a=(e=n[o]).type)r[a]=kT(r[a],e.name,t);else if(t==null)for(a in r)r[a]=kT(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new A0(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,a=o.length;n<a;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,o=n.length;a<o;++a)n[a].value.apply(t,r)}};function sK(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function kT(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=nK,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var m1="http://www.w3.org/1999/xhtml";const wT={svg:"http://www.w3.org/2000/svg",xhtml:m1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jp(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),wT.hasOwnProperty(t)?{space:wT[t],local:e}:e}function iK(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===m1&&t.documentElement.namespaceURI===m1?t.createElement(e):t.createElementNS(r,e)}}function oK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function B4(e){var t=Jp(e);return(t.local?oK:iK)(t)}function lK(){}function Qv(e){return e==null?lK:function(){return this.querySelector(e)}}function cK(e){typeof e!="function"&&(e=Qv(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var o=t[a],l=o.length,u=n[a]=new Array(l),d,h,f=0;f<l;++f)(d=o[f])&&(h=e.call(d,d.__data__,f,o))&&("__data__"in d&&(h.__data__=d.__data__),u[f]=h);return new xs(n,this._parents)}function uK(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dK(){return[]}function F4(e){return e==null?dK:function(){return this.querySelectorAll(e)}}function hK(e){return function(){return uK(e.apply(this,arguments))}}function gK(e){typeof e=="function"?e=hK(e):e=F4(e);for(var t=this._groups,r=t.length,n=[],a=[],o=0;o<r;++o)for(var l=t[o],u=l.length,d,h=0;h<u;++h)(d=l[h])&&(n.push(e.call(d,d.__data__,h,l)),a.push(d));return new xs(n,a)}function U4(e){return function(){return this.matches(e)}}function $4(e){return function(t){return t.matches(e)}}var fK=Array.prototype.find;function pK(e){return function(){return fK.call(this.children,e)}}function mK(){return this.firstElementChild}function xK(e){return this.select(e==null?mK:pK(typeof e=="function"?e:$4(e)))}var bK=Array.prototype.filter;function yK(){return Array.from(this.children)}function vK(e){return function(){return bK.call(this.children,e)}}function kK(e){return this.selectAll(e==null?yK:vK(typeof e=="function"?e:$4(e)))}function wK(e){typeof e!="function"&&(e=U4(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var o=t[a],l=o.length,u=n[a]=[],d,h=0;h<l;++h)(d=o[h])&&e.call(d,d.__data__,h,o)&&u.push(d);return new xs(n,this._parents)}function z4(e){return new Array(e.length)}function EK(){return new xs(this._enter||this._groups.map(z4),this._parents)}function rp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rp.prototype={constructor:rp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _K(e){return function(){return e}}function SK(e,t,r,n,a,o){for(var l=0,u,d=t.length,h=o.length;l<h;++l)(u=t[l])?(u.__data__=o[l],n[l]=u):r[l]=new rp(e,o[l]);for(;l<d;++l)(u=t[l])&&(a[l]=u)}function TK(e,t,r,n,a,o,l){var u,d,h=new Map,f=t.length,p=o.length,x=new Array(f),b;for(u=0;u<f;++u)(d=t[u])&&(x[u]=b=l.call(d,d.__data__,u,t)+"",h.has(b)?a[u]=d:h.set(b,d));for(u=0;u<p;++u)b=l.call(e,o[u],u,o)+"",(d=h.get(b))?(n[u]=d,d.__data__=o[u],h.delete(b)):r[u]=new rp(e,o[u]);for(u=0;u<f;++u)(d=t[u])&&h.get(x[u])===d&&(a[u]=d)}function CK(e){return e.__data__}function NK(e,t){if(!arguments.length)return Array.from(this,CK);var r=t?TK:SK,n=this._parents,a=this._groups;typeof e!="function"&&(e=_K(e));for(var o=a.length,l=new Array(o),u=new Array(o),d=new Array(o),h=0;h<o;++h){var f=n[h],p=a[h],x=p.length,b=AK(e.call(f,f&&f.__data__,h,n)),y=b.length,k=u[h]=new Array(y),S=l[h]=new Array(y),_=d[h]=new Array(x);r(f,p,k,S,_,b,t);for(var T=0,A=0,I,O;T<y;++T)if(I=k[T]){for(T>=A&&(A=T+1);!(O=S[A])&&++A<y;);I._next=O||null}}return l=new xs(l,n),l._enter=u,l._exit=d,l}function AK(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function LK(){return new xs(this._exit||this._groups.map(z4),this._parents)}function jK(e,t,r){var n=this.enter(),a=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function MK(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,o=n.length,l=Math.min(a,o),u=new Array(a),d=0;d<l;++d)for(var h=r[d],f=n[d],p=h.length,x=u[d]=new Array(p),b,y=0;y<p;++y)(b=h[y]||f[y])&&(x[y]=b);for(;d<a;++d)u[d]=r[d];return new xs(u,this._parents)}function RK(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,o=n[a],l;--a>=0;)(l=n[a])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function OK(e){e||(e=IK);function t(p,x){return p&&x?e(p.__data__,x.__data__):!p-!x}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var l=r[o],u=l.length,d=a[o]=new Array(u),h,f=0;f<u;++f)(h=l[f])&&(d[f]=h);d.sort(t)}return new xs(a,this._parents).order()}function IK(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function DK(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function PK(){return Array.from(this)}function BK(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,o=n.length;a<o;++a){var l=n[a];if(l)return l}return null}function FK(){let e=0;for(const t of this)++e;return e}function UK(){return!this.node()}function $K(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],o=0,l=a.length,u;o<l;++o)(u=a[o])&&e.call(u,u.__data__,o,a);return this}function zK(e){return function(){this.removeAttribute(e)}}function HK(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qK(e,t){return function(){this.setAttribute(e,t)}}function GK(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function YK(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function WK(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function VK(e,t){var r=Jp(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?HK:zK:typeof t=="function"?r.local?WK:YK:r.local?GK:qK)(r,t))}function H4(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function KK(e){return function(){this.style.removeProperty(e)}}function XK(e,t,r){return function(){this.style.setProperty(e,t,r)}}function QK(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function ZK(e,t,r){return arguments.length>1?this.each((t==null?KK:typeof t=="function"?QK:XK)(e,t,r??"")):Du(this.node(),e)}function Du(e,t){return e.style.getPropertyValue(t)||H4(e).getComputedStyle(e,null).getPropertyValue(t)}function JK(e){return function(){delete this[e]}}function eX(e,t){return function(){this[e]=t}}function tX(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function rX(e,t){return arguments.length>1?this.each((t==null?JK:typeof t=="function"?tX:eX)(e,t)):this.node()[e]}function q4(e){return e.trim().split(/^|\s+/)}function Zv(e){return e.classList||new G4(e)}function G4(e){this._node=e,this._names=q4(e.getAttribute("class")||"")}G4.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Y4(e,t){for(var r=Zv(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function W4(e,t){for(var r=Zv(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function nX(e){return function(){Y4(this,e)}}function aX(e){return function(){W4(this,e)}}function sX(e,t){return function(){(t.apply(this,arguments)?Y4:W4)(this,e)}}function iX(e,t){var r=q4(e+"");if(arguments.length<2){for(var n=Zv(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?sX:t?nX:aX)(r,t))}function oX(){this.textContent=""}function lX(e){return function(){this.textContent=e}}function cX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function uX(e){return arguments.length?this.each(e==null?oX:(typeof e=="function"?cX:lX)(e)):this.node().textContent}function dX(){this.innerHTML=""}function hX(e){return function(){this.innerHTML=e}}function gX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fX(e){return arguments.length?this.each(e==null?dX:(typeof e=="function"?gX:hX)(e)):this.node().innerHTML}function pX(){this.nextSibling&&this.parentNode.appendChild(this)}function mX(){return this.each(pX)}function xX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bX(){return this.each(xX)}function yX(e){var t=typeof e=="function"?e:B4(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vX(){return null}function kX(e,t){var r=typeof e=="function"?e:B4(e),n=t==null?vX:typeof t=="function"?t:Qv(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function wX(){var e=this.parentNode;e&&e.removeChild(this)}function EX(){return this.each(wX)}function _X(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SX(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TX(e){return this.select(e?SX:_X)}function CX(e){return arguments.length?this.property("__data__",e):this.node().__data__}function NX(e){return function(t){e.call(this,t,this.__data__)}}function AX(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function LX(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,o;r<a;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function jX(e,t,r){return function(){var n=this.__on,a,o=NX(t);if(n){for(var l=0,u=n.length;l<u;++l)if((a=n[l]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=t;return}}this.addEventListener(e.type,o,r),a={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(a):this.__on=[a]}}function MX(e,t,r){var n=AX(e+""),a,o=n.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,h=u.length,f;d<h;++d)for(a=0,f=u[d];a<o;++a)if((l=n[a]).type===f.type&&l.name===f.name)return f.value}return}for(u=t?jX:LX,a=0;a<o;++a)this.each(u(n[a],t,r));return this}function V4(e,t,r){var n=H4(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function RX(e,t){return function(){return V4(this,e,t)}}function OX(e,t){return function(){return V4(this,e,t.apply(this,arguments))}}function IX(e,t){return this.each((typeof t=="function"?OX:RX)(e,t))}function*DX(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,o=n.length,l;a<o;++a)(l=n[a])&&(yield l)}var K4=[null];function xs(e,t){this._groups=e,this._parents=t}function Lg(){return new xs([[document.documentElement]],K4)}function PX(){return this}xs.prototype=Lg.prototype={constructor:xs,select:cK,selectAll:gK,selectChild:xK,selectChildren:kK,filter:wK,data:NK,enter:EK,exit:LK,join:jK,merge:MK,selection:PX,order:RK,sort:OK,call:DK,nodes:PK,node:BK,size:FK,empty:UK,each:$K,attr:VK,style:ZK,property:rX,classed:iX,text:uX,html:fX,raise:mX,lower:bX,append:yX,insert:kX,remove:EX,clone:TX,datum:CX,on:MX,dispatch:IX,[Symbol.iterator]:DX};function jr(e){return typeof e=="string"?new xs([[document.querySelector(e)]],[document.documentElement]):new xs([[e]],K4)}function Jv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function X4(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function jg(){}var eg=.7,np=1/eg,ku="\\s*([+-]?\\d+)\\s*",tg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BX=/^#([0-9a-f]{3,8})$/,FX=new RegExp(`^rgb\\(${ku},${ku},${ku}\\)$`),UX=new RegExp(`^rgb\\(${Ti},${Ti},${Ti}\\)$`),$X=new RegExp(`^rgba\\(${ku},${ku},${ku},${tg}\\)$`),zX=new RegExp(`^rgba\\(${Ti},${Ti},${Ti},${tg}\\)$`),HX=new RegExp(`^hsl\\(${tg},${Ti},${Ti}\\)$`),qX=new RegExp(`^hsla\\(${tg},${Ti},${Ti},${tg}\\)$`),ET={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jv(jg,rg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_T,formatHex:_T,formatHex8:GX,formatHsl:YX,formatRgb:ST,toString:ST});function _T(){return this.rgb().formatHex()}function GX(){return this.rgb().formatHex8()}function YX(){return Q4(this).formatHsl()}function ST(){return this.rgb().formatRgb()}function rg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=BX.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?TT(t):r===3?new Ja(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?l0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?l0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=FX.exec(e))?new Ja(t[1],t[2],t[3],1):(t=UX.exec(e))?new Ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$X.exec(e))?l0(t[1],t[2],t[3],t[4]):(t=zX.exec(e))?l0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HX.exec(e))?AT(t[1],t[2]/100,t[3]/100,1):(t=qX.exec(e))?AT(t[1],t[2]/100,t[3]/100,t[4]):ET.hasOwnProperty(e)?TT(ET[e]):e==="transparent"?new Ja(NaN,NaN,NaN,0):null}function TT(e){return new Ja(e>>16&255,e>>8&255,e&255,1)}function l0(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ja(e,t,r,n)}function WX(e){return e instanceof jg||(e=rg(e)),e?(e=e.rgb(),new Ja(e.r,e.g,e.b,e.opacity)):new Ja}function x1(e,t,r,n){return arguments.length===1?WX(e):new Ja(e,t,r,n??1)}function Ja(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Jv(Ja,x1,X4(jg,{brighter(e){return e=e==null?np:Math.pow(np,e),new Ja(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eg:Math.pow(eg,e),new Ja(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ja(Vl(this.r),Vl(this.g),Vl(this.b),ap(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CT,formatHex:CT,formatHex8:VX,formatRgb:NT,toString:NT}));function CT(){return`#${zl(this.r)}${zl(this.g)}${zl(this.b)}`}function VX(){return`#${zl(this.r)}${zl(this.g)}${zl(this.b)}${zl((isNaN(this.opacity)?1:this.opacity)*255)}`}function NT(){const e=ap(this.opacity);return`${e===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${e===1?")":`, ${e})`}`}function ap(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zl(e){return e=Vl(e),(e<16?"0":"")+e.toString(16)}function AT(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ti(e,t,r,n)}function Q4(e){if(e instanceof ti)return new ti(e.h,e.s,e.l,e.opacity);if(e instanceof jg||(e=rg(e)),!e)return new ti;if(e instanceof ti)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),l=NaN,u=o-a,d=(o+a)/2;return u?(t===o?l=(r-n)/u+(r<n)*6:r===o?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?o+a:2-o-a,l*=60):u=d>0&&d<1?0:l,new ti(l,u,d,e.opacity)}function KX(e,t,r,n){return arguments.length===1?Q4(e):new ti(e,t,r,n??1)}function ti(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Jv(ti,KX,X4(jg,{brighter(e){return e=e==null?np:Math.pow(np,e),new ti(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eg:Math.pow(eg,e),new ti(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ja(cy(e>=240?e-240:e+120,a,n),cy(e,a,n),cy(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ti(LT(this.h),c0(this.s),c0(this.l),ap(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ap(this.opacity);return`${e===1?"hsl(":"hsla("}${LT(this.h)}, ${c0(this.s)*100}%, ${c0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LT(e){return e=(e||0)%360,e<0?e+360:e}function c0(e){return Math.max(0,Math.min(1,e||0))}function cy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const e2=e=>()=>e;function Z4(e,t){return function(r){return e+r*t}}function XX(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function kce(e,t){var r=t-e;return r?Z4(e,r>180||r<-180?r-360*Math.round(r/360):r):e2(isNaN(e)?t:e)}function QX(e){return(e=+e)==1?J4:function(t,r){return r-t?XX(t,r,e):e2(isNaN(t)?r:t)}}function J4(e,t){var r=t-e;return r?Z4(e,r):e2(isNaN(e)?t:e)}const jT=(function e(t){var r=QX(t);function n(a,o){var l=r((a=x1(a)).r,(o=x1(o)).r),u=r(a.g,o.g),d=r(a.b,o.b),h=J4(a.opacity,o.opacity);return function(f){return a.r=l(f),a.g=u(f),a.b=d(f),a.opacity=h(f),a+""}}return n.gamma=e,n})(1);function Xo(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var b1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uy=new RegExp(b1.source,"g");function ZX(e){return function(){return e}}function JX(e){return function(t){return e(t)+""}}function eQ(e,t){var r=b1.lastIndex=uy.lastIndex=0,n,a,o,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=b1.exec(e))&&(a=uy.exec(t));)(o=a.index)>r&&(o=t.slice(r,o),u[l]?u[l]+=o:u[++l]=o),(n=n[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,d.push({i:l,x:Xo(n,a)})),r=uy.lastIndex;return r<t.length&&(o=t.slice(r),u[l]?u[l]+=o:u[++l]=o),u.length<2?d[0]?JX(d[0].x):ZX(t):(t=d.length,function(h){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(h);return u.join("")})}var MT=180/Math.PI,y1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eL(e,t,r,n,a,o){var l,u,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(u=Math.sqrt(r*r+n*n))&&(r/=u,n/=u,d/=u),e*n<t*r&&(e=-e,t=-t,d=-d,l=-l),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*MT,skewX:Math.atan(d)*MT,scaleX:l,scaleY:u}}var u0;function tQ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?y1:eL(t.a,t.b,t.c,t.d,t.e,t.f)}function rQ(e){return e==null||(u0||(u0=document.createElementNS("http://www.w3.org/2000/svg","g")),u0.setAttribute("transform",e),!(e=u0.transform.baseVal.consolidate()))?y1:(e=e.matrix,eL(e.a,e.b,e.c,e.d,e.e,e.f))}function tL(e,t,r,n){function a(h){return h.length?h.pop()+" ":""}function o(h,f,p,x,b,y){if(h!==p||f!==x){var k=b.push("translate(",null,t,null,r);y.push({i:k-4,x:Xo(h,p)},{i:k-2,x:Xo(f,x)})}else(p||x)&&b.push("translate("+p+t+x+r)}function l(h,f,p,x){h!==f?(h-f>180?f+=360:f-h>180&&(h+=360),x.push({i:p.push(a(p)+"rotate(",null,n)-2,x:Xo(h,f)})):f&&p.push(a(p)+"rotate("+f+n)}function u(h,f,p,x){h!==f?x.push({i:p.push(a(p)+"skewX(",null,n)-2,x:Xo(h,f)}):f&&p.push(a(p)+"skewX("+f+n)}function d(h,f,p,x,b,y){if(h!==p||f!==x){var k=b.push(a(b)+"scale(",null,",",null,")");y.push({i:k-4,x:Xo(h,p)},{i:k-2,x:Xo(f,x)})}else(p!==1||x!==1)&&b.push(a(b)+"scale("+p+","+x+")")}return function(h,f){var p=[],x=[];return h=e(h),f=e(f),o(h.translateX,h.translateY,f.translateX,f.translateY,p,x),l(h.rotate,f.rotate,p,x),u(h.skewX,f.skewX,p,x),d(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,x),h=f=null,function(b){for(var y=-1,k=x.length,S;++y<k;)p[(S=x[y]).i]=S.x(b);return p.join("")}}}var nQ=tL(tQ,"px, ","px)","deg)"),aQ=tL(rQ,", ",")",")"),Pu=0,Eh=0,hh=0,rL=1e3,sp,_h,ip=0,tc=0,em=0,ng=typeof performance=="object"&&performance.now?performance:Date,nL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function t2(){return tc||(nL(sQ),tc=ng.now()+em)}function sQ(){tc=0}function op(){this._call=this._time=this._next=null}op.prototype=aL.prototype={constructor:op,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?t2():+r)+(t==null?0:+t),!this._next&&_h!==this&&(_h?_h._next=this:sp=this,_h=this),this._call=e,this._time=r,v1()},stop:function(){this._call&&(this._call=null,this._time=1/0,v1())}};function aL(e,t,r){var n=new op;return n.restart(e,t,r),n}function iQ(){t2(),++Pu;for(var e=sp,t;e;)(t=tc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pu}function RT(){tc=(ip=ng.now())+em,Pu=Eh=0;try{iQ()}finally{Pu=0,lQ(),tc=0}}function oQ(){var e=ng.now(),t=e-ip;t>rL&&(em-=t,ip=e)}function lQ(){for(var e,t=sp,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:sp=r);_h=e,v1(n)}function v1(e){if(!Pu){Eh&&(Eh=clearTimeout(Eh));var t=e-tc;t>24?(e<1/0&&(Eh=setTimeout(RT,e-ng.now()-em)),hh&&(hh=clearInterval(hh))):(hh||(ip=ng.now(),hh=setInterval(oQ,rL)),Pu=1,nL(RT))}}function OT(e,t,r){var n=new op;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var cQ=P4("start","end","cancel","interrupt"),uQ=[],sL=0,IT=1,k1=2,L0=3,DT=4,w1=5,j0=6;function tm(e,t,r,n,a,o){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;dQ(e,r,{name:t,index:n,group:a,on:cQ,tween:uQ,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:sL})}function r2(e,t){var r=li(e,t);if(r.state>sL)throw new Error("too late; already scheduled");return r}function Ri(e,t){var r=li(e,t);if(r.state>L0)throw new Error("too late; already running");return r}function li(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function dQ(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=aL(o,0,r.time);function o(h){r.state=IT,r.timer.restart(l,r.delay,r.time),r.delay<=h&&l(h-r.delay)}function l(h){var f,p,x,b;if(r.state!==IT)return d();for(f in n)if(b=n[f],b.name===r.name){if(b.state===L0)return OT(l);b.state===DT?(b.state=j0,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[f]):+f<t&&(b.state=j0,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[f])}if(OT(function(){r.state===L0&&(r.state=DT,r.timer.restart(u,r.delay,r.time),u(h))}),r.state=k1,r.on.call("start",e,e.__data__,r.index,r.group),r.state===k1){for(r.state=L0,a=new Array(x=r.tween.length),f=0,p=-1;f<x;++f)(b=r.tween[f].value.call(e,e.__data__,r.index,r.group))&&(a[++p]=b);a.length=p+1}}function u(h){for(var f=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(d),r.state=w1,1),p=-1,x=a.length;++p<x;)a[p].call(e,f);r.state===w1&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=j0,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function hQ(e,t){var r=e.__transition,n,a,o=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((n=r[l]).name!==t){o=!1;continue}a=n.state>k1&&n.state<w1,n.state=j0,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[l]}o&&delete e.__transition}}function gQ(e){return this.each(function(){hQ(this,e)})}function fQ(e,t){var r,n;return function(){var a=Ri(this,e),o=a.tween;if(o!==r){n=r=o;for(var l=0,u=n.length;l<u;++l)if(n[l].name===t){n=n.slice(),n.splice(l,1);break}}a.tween=n}}function pQ(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=Ri(this,e),l=o.tween;if(l!==n){a=(n=l).slice();for(var u={name:t,value:r},d=0,h=a.length;d<h;++d)if(a[d].name===t){a[d]=u;break}d===h&&a.push(u)}o.tween=a}}function mQ(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=li(this.node(),r).tween,a=0,o=n.length,l;a<o;++a)if((l=n[a]).name===e)return l.value;return null}return this.each((t==null?fQ:pQ)(r,e,t))}function n2(e,t,r){var n=e._id;return e.each(function(){var a=Ri(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return li(a,n).value[t]}}function iL(e,t){var r;return(typeof t=="number"?Xo:t instanceof rg?jT:(r=rg(t))?(t=r,jT):eQ)(e,t)}function xQ(e){return function(){this.removeAttribute(e)}}function bQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yQ(e,t,r){var n,a=r+"",o;return function(){var l=this.getAttribute(e);return l===a?null:l===n?o:o=t(n=l,r)}}function vQ(e,t,r){var n,a=r+"",o;return function(){var l=this.getAttributeNS(e.space,e.local);return l===a?null:l===n?o:o=t(n=l,r)}}function kQ(e,t,r){var n,a,o;return function(){var l,u=r(this),d;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=u+"",l===d?null:l===n&&d===a?o:(a=d,o=t(n=l,u)))}}function wQ(e,t,r){var n,a,o;return function(){var l,u=r(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=u+"",l===d?null:l===n&&d===a?o:(a=d,o=t(n=l,u)))}}function EQ(e,t){var r=Jp(e),n=r==="transform"?aQ:iL;return this.attrTween(e,typeof t=="function"?(r.local?wQ:kQ)(r,n,n2(this,"attr."+e,t)):t==null?(r.local?bQ:xQ)(r):(r.local?vQ:yQ)(r,n,t))}function _Q(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function SQ(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function TQ(e,t){var r,n;function a(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&SQ(e,o)),r}return a._value=t,a}function CQ(e,t){var r,n;function a(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&_Q(e,o)),r}return a._value=t,a}function NQ(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Jp(e);return this.tween(r,(n.local?TQ:CQ)(n,t))}function AQ(e,t){return function(){r2(this,e).delay=+t.apply(this,arguments)}}function LQ(e,t){return t=+t,function(){r2(this,e).delay=t}}function jQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AQ:LQ)(t,e)):li(this.node(),t).delay}function MQ(e,t){return function(){Ri(this,e).duration=+t.apply(this,arguments)}}function RQ(e,t){return t=+t,function(){Ri(this,e).duration=t}}function OQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MQ:RQ)(t,e)):li(this.node(),t).duration}function IQ(e,t){if(typeof t!="function")throw new Error;return function(){Ri(this,e).ease=t}}function DQ(e){var t=this._id;return arguments.length?this.each(IQ(t,e)):li(this.node(),t).ease}function PQ(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Ri(this,e).ease=r}}function BQ(e){if(typeof e!="function")throw new Error;return this.each(PQ(this._id,e))}function FQ(e){typeof e!="function"&&(e=U4(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var o=t[a],l=o.length,u=n[a]=[],d,h=0;h<l;++h)(d=o[h])&&e.call(d,d.__data__,h,o)&&u.push(d);return new go(n,this._parents,this._name,this._id)}function UQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,o=Math.min(n,a),l=new Array(n),u=0;u<o;++u)for(var d=t[u],h=r[u],f=d.length,p=l[u]=new Array(f),x,b=0;b<f;++b)(x=d[b]||h[b])&&(p[b]=x);for(;u<n;++u)l[u]=t[u];return new go(l,this._parents,this._name,this._id)}function $Q(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function zQ(e,t,r){var n,a,o=$Q(t)?r2:Ri;return function(){var l=o(this,e),u=l.on;u!==n&&(a=(n=u).copy()).on(t,r),l.on=a}}function HQ(e,t){var r=this._id;return arguments.length<2?li(this.node(),r).on.on(e):this.each(zQ(r,e,t))}function qQ(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function GQ(){return this.on("end.remove",qQ(this._id))}function YQ(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Qv(e));for(var n=this._groups,a=n.length,o=new Array(a),l=0;l<a;++l)for(var u=n[l],d=u.length,h=o[l]=new Array(d),f,p,x=0;x<d;++x)(f=u[x])&&(p=e.call(f,f.__data__,x,u))&&("__data__"in f&&(p.__data__=f.__data__),h[x]=p,tm(h[x],t,r,x,h,li(f,r)));return new go(o,this._parents,t,r)}function WQ(e){var t=this._name,r=this._id;typeof e!="function"&&(e=F4(e));for(var n=this._groups,a=n.length,o=[],l=[],u=0;u<a;++u)for(var d=n[u],h=d.length,f,p=0;p<h;++p)if(f=d[p]){for(var x=e.call(f,f.__data__,p,d),b,y=li(f,r),k=0,S=x.length;k<S;++k)(b=x[k])&&tm(b,t,r,k,x,y);o.push(x),l.push(f)}return new go(o,l,t,r)}var VQ=Lg.prototype.constructor;function KQ(){return new VQ(this._groups,this._parents)}function XQ(e,t){var r,n,a;return function(){var o=Du(this,e),l=(this.style.removeProperty(e),Du(this,e));return o===l?null:o===r&&l===n?a:a=t(r=o,n=l)}}function oL(e){return function(){this.style.removeProperty(e)}}function QQ(e,t,r){var n,a=r+"",o;return function(){var l=Du(this,e);return l===a?null:l===n?o:o=t(n=l,r)}}function ZQ(e,t,r){var n,a,o;return function(){var l=Du(this,e),u=r(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),Du(this,e))),l===d?null:l===n&&d===a?o:(a=d,o=t(n=l,u))}}function JQ(e,t){var r,n,a,o="style."+t,l="end."+o,u;return function(){var d=Ri(this,e),h=d.on,f=d.value[o]==null?u||(u=oL(t)):void 0;(h!==r||a!==f)&&(n=(r=h).copy()).on(l,a=f),d.on=n}}function eZ(e,t,r){var n=(e+="")=="transform"?nQ:iL;return t==null?this.styleTween(e,XQ(e,n)).on("end.style."+e,oL(e)):typeof t=="function"?this.styleTween(e,ZQ(e,n,n2(this,"style."+e,t))).each(JQ(this._id,e)):this.styleTween(e,QQ(e,n,t),r).on("end.style."+e,null)}function tZ(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function rZ(e,t,r){var n,a;function o(){var l=t.apply(this,arguments);return l!==a&&(n=(a=l)&&tZ(e,l,r)),n}return o._value=t,o}function nZ(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,rZ(e,t,r??""))}function aZ(e){return function(){this.textContent=e}}function sZ(e){return function(){var t=e(this);this.textContent=t??""}}function iZ(e){return this.tween("text",typeof e=="function"?sZ(n2(this,"text",e)):aZ(e==null?"":e+""))}function oZ(e){return function(t){this.textContent=e.call(this,t)}}function lZ(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&oZ(a)),t}return n._value=e,n}function cZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,lZ(e))}function uZ(){for(var e=this._name,t=this._id,r=lL(),n=this._groups,a=n.length,o=0;o<a;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){var f=li(d,t);tm(d,e,r,h,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new go(n,this._parents,e,r)}function dZ(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(o,l){var u={value:l},d={value:function(){--a===0&&o()}};r.each(function(){var h=Ri(this,n),f=h.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),h.on=t}),a===0&&o()})}var hZ=0;function go(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function lL(){return++hZ}var no=Lg.prototype;go.prototype={constructor:go,select:YQ,selectAll:WQ,selectChild:no.selectChild,selectChildren:no.selectChildren,filter:FQ,merge:UQ,selection:KQ,transition:uZ,call:no.call,nodes:no.nodes,node:no.node,size:no.size,empty:no.empty,each:no.each,on:HQ,attr:EQ,attrTween:NQ,style:eZ,styleTween:nZ,text:iZ,textTween:cZ,remove:GQ,tween:mQ,delay:jQ,duration:OQ,ease:DQ,easeVarying:BQ,end:dZ,[Symbol.iterator]:no[Symbol.iterator]};function gZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var fZ={time:null,delay:0,duration:250,ease:gZ};function pZ(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function mZ(e){var t,r;e instanceof go?(t=e._id,e=e._name):(t=lL(),(r=fZ).time=t2(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)(d=l[h])&&tm(d,e,t,h,l,r||pZ(d,t));return new go(n,this._parents,e,t)}Lg.prototype.interrupt=gQ;Lg.prototype.transition=mZ;const E1=Math.PI,_1=2*E1,Dl=1e-6,xZ=_1-Dl;function cL(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function bZ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cL;const r=10**t;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class yZ{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cL:bZ(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,o,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+o},${this._y1=+l}`}arcTo(t,r,n,a,o){if(t=+t,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,u=this._y1,d=n-t,h=a-r,f=l-t,p=u-r,x=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Dl)if(!(Math.abs(p*d-h*f)>Dl)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-l,y=a-u,k=d*d+h*h,S=b*b+y*y,_=Math.sqrt(k),T=Math.sqrt(x),A=o*Math.tan((E1-Math.acos((k+x-S)/(2*_*T)))/2),I=A/T,O=A/_;Math.abs(I-1)>Dl&&this._append`L${t+I*f},${r+I*p}`,this._append`A${o},${o},0,0,${+(p*b>f*y)},${this._x1=t+O*d},${this._y1=r+O*h}`}}arc(t,r,n,a,o,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(a),d=n*Math.sin(a),h=t+u,f=r+d,p=1^l,x=l?a-o:o-a;this._x1===null?this._append`M${h},${f}`:(Math.abs(this._x1-h)>Dl||Math.abs(this._y1-f)>Dl)&&this._append`L${h},${f}`,n&&(x<0&&(x=x%_1+_1),x>xZ?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=h},${this._y1=f}`:x>Dl&&this._append`A${n},${n},0,${+(x>=E1)},${p},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function iu(e){return function(){return e}}const wce=Math.abs,Ece=Math.atan2,_ce=Math.cos,Sce=Math.max,Tce=Math.min,Cce=Math.sin,Nce=Math.sqrt,PT=1e-12,a2=Math.PI,BT=a2/2,Ace=2*a2;function Lce(e){return e>1?0:e<-1?a2:Math.acos(e)}function jce(e){return e>=1?BT:e<=-1?-BT:Math.asin(e)}function vZ(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new yZ(t)}function kZ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uL(e){this._context=e}uL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lp(e){return new uL(e)}function wZ(e){return e[0]}function EZ(e){return e[1]}function _Z(e,t){var r=iu(!0),n=null,a=lp,o=null,l=vZ(u);e=typeof e=="function"?e:e===void 0?wZ:iu(e),t=typeof t=="function"?t:t===void 0?EZ:iu(t);function u(d){var h,f=(d=kZ(d)).length,p,x=!1,b;for(n==null&&(o=a(b=l())),h=0;h<=f;++h)!(h<f&&r(p=d[h],h,d))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+e(p,h,d),+t(p,h,d));if(b)return o=null,b+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:iu(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:iu(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:iu(!!d),u):r},u.curve=function(d){return arguments.length?(a=d,n!=null&&(o=a(n)),u):a},u.context=function(d){return arguments.length?(d==null?n=o=null:o=a(n=d),u):n},u}class dL{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function hL(e){return new dL(e,!0)}function gL(e){return new dL(e,!1)}function tl(){}function cp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rm(e){this._context=e}rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M0(e){return new rm(e)}function fL(e){this._context=e}fL.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SZ(e){return new fL(e)}function pL(e){this._context=e}pL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TZ(e){return new pL(e)}function mL(e,t){this._basis=new rm(e),this._beta=t}mL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],a=t[0],o=e[r]-n,l=t[r]-a,u=-1,d;++u<=r;)d=u/r,this._basis.point(this._beta*e[u]+(1-this._beta)*(n+d*o),this._beta*t[u]+(1-this._beta)*(a+d*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const CZ=(function e(t){function r(n){return t===1?new rm(n):new mL(n,t)}return r.beta=function(n){return e(+n)},r})(.85);function up(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function s2(e,t){this._context=e,this._k=(1-t)/6}s2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:up(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:up(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xL=(function e(t){function r(n){return new s2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function i2(e,t){this._context=e,this._k=(1-t)/6}i2.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:up(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NZ=(function e(t){function r(n){return new i2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function o2(e,t){this._context=e,this._k=(1-t)/6}o2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:up(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const AZ=(function e(t){function r(n){return new o2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function l2(e,t,r){var n=e._x1,a=e._y1,o=e._x2,l=e._y2;if(e._l01_a>PT){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>PT){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*h+e._x1*e._l23_2a-t*e._l12_2a)/f,l=(l*h+e._y1*e._l23_2a-r*e._l12_2a)/f}e._context.bezierCurveTo(n,a,o,l,e._x2,e._y2)}function bL(e,t){this._context=e,this._alpha=t}bL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:l2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const yL=(function e(t){function r(n){return t?new bL(n,t):new s2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function vL(e,t){this._context=e,this._alpha=t}vL.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:l2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const LZ=(function e(t){function r(n){return t?new vL(n,t):new i2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function kL(e,t){this._context=e,this._alpha=t}kL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:l2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jZ=(function e(t){function r(n){return t?new kL(n,t):new o2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function wL(e){this._context=e}wL.prototype={areaStart:tl,areaEnd:tl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function MZ(e){return new wL(e)}function FT(e){return e<0?-1:1}function UT(e,t,r){var n=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),u=(o*a+l*n)/(n+a);return(FT(o)+FT(l))*Math.min(Math.abs(o),Math.abs(l),.5*Math.abs(u))||0}function $T(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dy(e,t,r){var n=e._x0,a=e._y0,o=e._x1,l=e._y1,u=(o-n)/3;e._context.bezierCurveTo(n+u,a+u*t,o-u,l-u*r,o,l)}function dp(e){this._context=e}dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dy(this,this._t0,$T(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dy(this,$T(this,r=UT(this,e,t)),r);break;default:dy(this,this._t0,r=UT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function EL(e){this._context=new _L(e)}(EL.prototype=Object.create(dp.prototype)).point=function(e,t){dp.prototype.point.call(this,t,e)};function _L(e){this._context=e}_L.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,o){this._context.bezierCurveTo(t,e,n,r,o,a)}};function SL(e){return new dp(e)}function TL(e){return new EL(e)}function CL(e){this._context=e}CL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=zT(e),a=zT(t),o=0,l=1;l<r;++o,++l)this._context.bezierCurveTo(n[0][o],a[0][o],n[1][o],a[1][o],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function zT(e){var t,r=e.length-1,n,a=new Array(r),o=new Array(r),l=new Array(r);for(a[0]=0,o[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function NL(e){return new CL(e)}function nm(e,t){this._context=e,this._t=t}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function AL(e){return new nm(e,.5)}function LL(e){return new nm(e,0)}function jL(e){return new nm(e,1)}function Sh(e,t,r){this.k=e,this.x=t,this.y=r}Sh.prototype={constructor:Sh,scale:function(e){return e===1?this:new Sh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Sh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Sh.prototype;var RZ=N(e=>{const{securityLevel:t}=Yr();let r=jr("body");if(t==="sandbox"){const o=jr(`#i${e}`).node()?.contentDocument??document;r=jr(o.body)}return r.select(`#${e}`)},"selectSvgElement");function c2(e){return typeof e>"u"||e===null}N(c2,"isNothing");function ML(e){return typeof e=="object"&&e!==null}N(ML,"isObject");function RL(e){return Array.isArray(e)?e:c2(e)?[]:[e]}N(RL,"toArray");function OL(e,t){var r,n,a,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)a=o[r],e[a]=t[a];return e}N(OL,"extend");function IL(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}N(IL,"repeat");function DL(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}N(DL,"isNegativeZero");var OZ=c2,IZ=ML,DZ=RL,PZ=IL,BZ=DL,FZ=OL,Zn={isNothing:OZ,isObject:IZ,toArray:DZ,repeat:PZ,isNegativeZero:BZ,extend:FZ};function u2(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}N(u2,"formatError");function Bu(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=u2(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}N(Bu,"YAMLException$1");Bu.prototype=Object.create(Error.prototype);Bu.prototype.constructor=Bu;Bu.prototype.toString=N(function(t){return this.name+": "+u2(this,t)},"toString");var Za=Bu;function R0(e,t,r,n,a){var o="",l="",u=Math.floor(a/2)-1;return n-t>u&&(o=" ... ",t=n-u+o.length),r-n>u&&(l=" ...",r=n+u-l.length),{str:o+e.slice(t,r).replace(/\t/g,"")+l,pos:n-t+o.length}}N(R0,"getLine");function O0(e,t){return Zn.repeat(" ",t-e.length)+e}N(O0,"padStart");function PL(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],a=[],o,l=-1;o=r.exec(e.buffer);)a.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var u="",d,h,f=Math.min(e.line+t.linesAfter,a.length).toString().length,p=t.maxLength-(t.indent+f+3);for(d=1;d<=t.linesBefore&&!(l-d<0);d++)h=R0(e.buffer,n[l-d],a[l-d],e.position-(n[l]-n[l-d]),p),u=Zn.repeat(" ",t.indent)+O0((e.line-d+1).toString(),f)+" | "+h.str+`
`+u;for(h=R0(e.buffer,n[l],a[l],e.position,p),u+=Zn.repeat(" ",t.indent)+O0((e.line+1).toString(),f)+" | "+h.str+`
`,u+=Zn.repeat("-",t.indent+f+3+h.pos)+`^
`,d=1;d<=t.linesAfter&&!(l+d>=a.length);d++)h=R0(e.buffer,n[l+d],a[l+d],e.position-(n[l]-n[l+d]),p),u+=Zn.repeat(" ",t.indent)+O0((e.line+d+1).toString(),f)+" | "+h.str+`
`;return u.replace(/\n$/,"")}N(PL,"makeSnippet");var UZ=PL,$Z=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zZ=["scalar","sequence","mapping"];function BL(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}N(BL,"compileStyleAliases");function FL(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if($Z.indexOf(r)===-1)throw new Za('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=BL(t.styleAliases||null),zZ.indexOf(this.kind)===-1)throw new Za('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}N(FL,"Type$1");var Ea=FL;function S1(e,t){var r=[];return e[t].forEach(function(n){var a=r.length;r.forEach(function(o,l){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(a=l)}),r[a]=n}),r}N(S1,"compileList");function UL(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(N(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}N(UL,"compileMap");function hp(e){return this.extend(e)}N(hp,"Schema$1");hp.prototype.extend=N(function(t){var r=[],n=[];if(t instanceof Ea)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Za("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ea))throw new Za("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Za("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Za("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ea))throw new Za("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(hp.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=S1(a,"implicit"),a.compiledExplicit=S1(a,"explicit"),a.compiledTypeMap=UL(a.compiledImplicit,a.compiledExplicit),a},"extend");var HZ=hp,qZ=new Ea("tag:yaml.org,2002:str",{kind:"scalar",construct:N(function(e){return e!==null?e:""},"construct")}),GZ=new Ea("tag:yaml.org,2002:seq",{kind:"sequence",construct:N(function(e){return e!==null?e:[]},"construct")}),YZ=new Ea("tag:yaml.org,2002:map",{kind:"mapping",construct:N(function(e){return e!==null?e:{}},"construct")}),WZ=new HZ({explicit:[qZ,GZ,YZ]});function $L(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}N($L,"resolveYamlNull");function zL(){return null}N(zL,"constructYamlNull");function HL(e){return e===null}N(HL,"isNull");var VZ=new Ea("tag:yaml.org,2002:null",{kind:"scalar",resolve:$L,construct:zL,predicate:HL,represent:{canonical:N(function(){return"~"},"canonical"),lowercase:N(function(){return"null"},"lowercase"),uppercase:N(function(){return"NULL"},"uppercase"),camelcase:N(function(){return"Null"},"camelcase"),empty:N(function(){return""},"empty")},defaultStyle:"lowercase"});function qL(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}N(qL,"resolveYamlBoolean");function GL(e){return e==="true"||e==="True"||e==="TRUE"}N(GL,"constructYamlBoolean");function YL(e){return Object.prototype.toString.call(e)==="[object Boolean]"}N(YL,"isBoolean");var KZ=new Ea("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qL,construct:GL,predicate:YL,represent:{lowercase:N(function(e){return e?"true":"false"},"lowercase"),uppercase:N(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:N(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function WL(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}N(WL,"isHexCode");function VL(e){return 48<=e&&e<=55}N(VL,"isOctCode");function KL(e){return 48<=e&&e<=57}N(KL,"isDecCode");function XL(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!WL(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!VL(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!KL(e.charCodeAt(r)))return!1;n=!0}return!(!n||a==="_")}N(XL,"resolveYamlInteger");function QL(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}N(QL,"constructYamlInteger");function ZL(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Zn.isNegativeZero(e)}N(ZL,"isInteger");var XZ=new Ea("tag:yaml.org,2002:int",{kind:"scalar",resolve:XL,construct:QL,predicate:ZL,represent:{binary:N(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:N(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:N(function(e){return e.toString(10)},"decimal"),hexadecimal:N(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),QZ=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function JL(e){return!(e===null||!QZ.test(e)||e[e.length-1]==="_")}N(JL,"resolveYamlFloat");function ej(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}N(ej,"constructYamlFloat");var ZZ=/^[-+]?[0-9]+e/;function tj(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Zn.isNegativeZero(e))return"-0.0";return r=e.toString(10),ZZ.test(r)?r.replace("e",".e"):r}N(tj,"representYamlFloat");function rj(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Zn.isNegativeZero(e))}N(rj,"isFloat");var JZ=new Ea("tag:yaml.org,2002:float",{kind:"scalar",resolve:JL,construct:ej,predicate:rj,represent:tj,defaultStyle:"lowercase"}),nj=WZ.extend({implicit:[VZ,KZ,XZ,JZ]}),eJ=nj,aj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),sj=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ij(e){return e===null?!1:aj.exec(e)!==null||sj.exec(e)!==null}N(ij,"resolveYamlTimestamp");function oj(e){var t,r,n,a,o,l,u,d=0,h=null,f,p,x;if(t=aj.exec(e),t===null&&(t=sj.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(o=+t[4],l=+t[5],u=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(f=+t[10],p=+(t[11]||0),h=(f*60+p)*6e4,t[9]==="-"&&(h=-h)),x=new Date(Date.UTC(r,n,a,o,l,u,d)),h&&x.setTime(x.getTime()-h),x}N(oj,"constructYamlTimestamp");function lj(e){return e.toISOString()}N(lj,"representYamlTimestamp");var tJ=new Ea("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ij,construct:oj,instanceOf:Date,represent:lj});function cj(e){return e==="<<"||e===null}N(cj,"resolveYamlMerge");var rJ=new Ea("tag:yaml.org,2002:merge",{kind:"scalar",resolve:cj}),d2=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function uj(e){if(e===null)return!1;var t,r,n=0,a=e.length,o=d2;for(r=0;r<a;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}N(uj,"resolveYamlBinary");function dj(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,o=d2,l=0,u=[];for(t=0;t<a;t++)t%4===0&&t&&(u.push(l>>16&255),u.push(l>>8&255),u.push(l&255)),l=l<<6|o.indexOf(n.charAt(t));return r=a%4*6,r===0?(u.push(l>>16&255),u.push(l>>8&255),u.push(l&255)):r===18?(u.push(l>>10&255),u.push(l>>2&255)):r===12&&u.push(l>>4&255),new Uint8Array(u)}N(dj,"constructYamlBinary");function hj(e){var t="",r=0,n,a,o=e.length,l=d2;for(n=0;n<o;n++)n%3===0&&n&&(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]),r=(r<<8)+e[n];return a=o%3,a===0?(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]):a===2?(t+=l[r>>10&63],t+=l[r>>4&63],t+=l[r<<2&63],t+=l[64]):a===1&&(t+=l[r>>2&63],t+=l[r<<4&63],t+=l[64],t+=l[64]),t}N(hj,"representYamlBinary");function gj(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}N(gj,"isBinary");var nJ=new Ea("tag:yaml.org,2002:binary",{kind:"scalar",resolve:uj,construct:dj,predicate:gj,represent:hj}),aJ=Object.prototype.hasOwnProperty,sJ=Object.prototype.toString;function fj(e){if(e===null)return!0;var t=[],r,n,a,o,l,u=e;for(r=0,n=u.length;r<n;r+=1){if(a=u[r],l=!1,sJ.call(a)!=="[object Object]")return!1;for(o in a)if(aJ.call(a,o))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}N(fj,"resolveYamlOmap");function pj(e){return e!==null?e:[]}N(pj,"constructYamlOmap");var iJ=new Ea("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fj,construct:pj}),oJ=Object.prototype.toString;function mj(e){if(e===null)return!0;var t,r,n,a,o,l=e;for(o=new Array(l.length),t=0,r=l.length;t<r;t+=1){if(n=l[t],oJ.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;o[t]=[a[0],n[a[0]]]}return!0}N(mj,"resolveYamlPairs");function xj(e){if(e===null)return[];var t,r,n,a,o,l=e;for(o=new Array(l.length),t=0,r=l.length;t<r;t+=1)n=l[t],a=Object.keys(n),o[t]=[a[0],n[a[0]]];return o}N(xj,"constructYamlPairs");var lJ=new Ea("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:mj,construct:xj}),cJ=Object.prototype.hasOwnProperty;function bj(e){if(e===null)return!0;var t,r=e;for(t in r)if(cJ.call(r,t)&&r[t]!==null)return!1;return!0}N(bj,"resolveYamlSet");function yj(e){return e!==null?e:{}}N(yj,"constructYamlSet");var uJ=new Ea("tag:yaml.org,2002:set",{kind:"mapping",resolve:bj,construct:yj}),vj=eJ.extend({implicit:[tJ,rJ],explicit:[nJ,iJ,lJ,uJ]}),rl=Object.prototype.hasOwnProperty,gp=1,kj=2,wj=3,fp=4,hy=1,dJ=2,HT=3,hJ=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,gJ=/[\x85\u2028\u2029]/,fJ=/[,\[\]\{\}]/,Ej=/^(?:!|!!|![a-z\-]+!)$/i,_j=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function T1(e){return Object.prototype.toString.call(e)}N(T1,"_class");function ai(e){return e===10||e===13}N(ai,"is_EOL");function el(e){return e===9||e===32}N(el,"is_WHITE_SPACE");function Ia(e){return e===9||e===32||e===10||e===13}N(Ia,"is_WS_OR_EOL");function Hl(e){return e===44||e===91||e===93||e===123||e===125}N(Hl,"is_FLOW_INDICATOR");function Sj(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}N(Sj,"fromHexCode");function Tj(e){return e===120?2:e===117?4:e===85?8:0}N(Tj,"escapedHexLen");function Cj(e){return 48<=e&&e<=57?e-48:-1}N(Cj,"fromDecimalCode");function C1(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}N(C1,"simpleEscapeSequence");function Nj(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}N(Nj,"charFromCodepoint");var Aj=new Array(256),Lj=new Array(256);for(Ol=0;Ol<256;Ol++)Aj[Ol]=C1(Ol)?1:0,Lj[Ol]=C1(Ol);var Ol;function jj(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||vj,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}N(jj,"State$1");function h2(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=UZ(r),new Za(t,r)}N(h2,"generateError");function jt(e,t){throw h2(e,t)}N(jt,"throwError");function ag(e,t){e.onWarning&&e.onWarning.call(null,h2(e,t))}N(ag,"throwWarning");var qT={YAML:N(function(t,r,n){var a,o,l;t.version!==null&&jt(t,"duplication of %YAML directive"),n.length!==1&&jt(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&jt(t,"ill-formed argument of the YAML directive"),o=parseInt(a[1],10),l=parseInt(a[2],10),o!==1&&jt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&ag(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:N(function(t,r,n){var a,o;n.length!==2&&jt(t,"TAG directive accepts exactly two arguments"),a=n[0],o=n[1],Ej.test(a)||jt(t,"ill-formed tag handle (first argument) of the TAG directive"),rl.call(t.tagMap,a)&&jt(t,'there is a previously declared suffix for "'+a+'" tag handle'),_j.test(o)||jt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{jt(t,"tag prefix is malformed: "+o)}t.tagMap[a]=o},"handleTagDirective")};function uo(e,t,r,n){var a,o,l,u;if(t<r){if(u=e.input.slice(t,r),n)for(a=0,o=u.length;a<o;a+=1)l=u.charCodeAt(a),l===9||32<=l&&l<=1114111||jt(e,"expected valid JSON character");else hJ.test(u)&&jt(e,"the stream contains non-printable characters");e.result+=u}}N(uo,"captureSegment");function N1(e,t,r,n){var a,o,l,u;for(Zn.isObject(r)||jt(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),l=0,u=a.length;l<u;l+=1)o=a[l],rl.call(t,o)||(t[o]=r[o],n[o]=!0)}N(N1,"mergeMappings");function ql(e,t,r,n,a,o,l,u,d){var h,f;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),h=0,f=a.length;h<f;h+=1)Array.isArray(a[h])&&jt(e,"nested arrays are not supported inside keys"),typeof a=="object"&&T1(a[h])==="[object Object]"&&(a[h]="[object Object]");if(typeof a=="object"&&T1(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(h=0,f=o.length;h<f;h+=1)N1(e,t,o[h],r);else N1(e,t,o,r);else!e.json&&!rl.call(r,a)&&rl.call(t,a)&&(e.line=l||e.line,e.lineStart=u||e.lineStart,e.position=d||e.position,jt(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[a]=o,delete r[a];return t}N(ql,"storeMappingPair");function am(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):jt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}N(am,"readLineBreak");function On(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;el(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(ai(a))for(am(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&ag(e,"deficient indentation"),n}N(On,"skipSeparationSpace");function Mg(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Ia(r)))}N(Mg,"testDocumentSeparator");function sm(e,t){t===1?e.result+=" ":t>1&&(e.result+=Zn.repeat(`
`,t-1))}N(sm,"writeFoldedLines");function Mj(e,t,r){var n,a,o,l,u,d,h,f,p=e.kind,x=e.result,b;if(b=e.input.charCodeAt(e.position),Ia(b)||Hl(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(a=e.input.charCodeAt(e.position+1),Ia(a)||r&&Hl(a)))return!1;for(e.kind="scalar",e.result="",o=l=e.position,u=!1;b!==0;){if(b===58){if(a=e.input.charCodeAt(e.position+1),Ia(a)||r&&Hl(a))break}else if(b===35){if(n=e.input.charCodeAt(e.position-1),Ia(n))break}else{if(e.position===e.lineStart&&Mg(e)||r&&Hl(b))break;if(ai(b))if(d=e.line,h=e.lineStart,f=e.lineIndent,On(e,!1,-1),e.lineIndent>=t){u=!0,b=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=d,e.lineStart=h,e.lineIndent=f;break}}u&&(uo(e,o,l,!1),sm(e,e.line-d),o=l=e.position,u=!1),el(b)||(l=e.position+1),b=e.input.charCodeAt(++e.position)}return uo(e,o,l,!1),e.result?!0:(e.kind=p,e.result=x,!1)}N(Mj,"readPlainScalar");function Rj(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(uo(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else ai(r)?(uo(e,n,a,!0),sm(e,On(e,!1,t)),n=a=e.position):e.position===e.lineStart&&Mg(e)?jt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);jt(e,"unexpected end of the stream within a single quoted scalar")}N(Rj,"readSingleQuotedScalar");function Oj(e,t){var r,n,a,o,l,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return uo(e,r,e.position,!0),e.position++,!0;if(u===92){if(uo(e,r,e.position,!0),u=e.input.charCodeAt(++e.position),ai(u))On(e,!1,t);else if(u<256&&Aj[u])e.result+=Lj[u],e.position++;else if((l=Tj(u))>0){for(a=l,o=0;a>0;a--)u=e.input.charCodeAt(++e.position),(l=Sj(u))>=0?o=(o<<4)+l:jt(e,"expected hexadecimal character");e.result+=Nj(o),e.position++}else jt(e,"unknown escape sequence");r=n=e.position}else ai(u)?(uo(e,r,n,!0),sm(e,On(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Mg(e)?jt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}jt(e,"unexpected end of the stream within a double quoted scalar")}N(Oj,"readDoubleQuotedScalar");function Ij(e,t){var r=!0,n,a,o,l=e.tag,u,d=e.anchor,h,f,p,x,b,y=Object.create(null),k,S,_,T;if(T=e.input.charCodeAt(e.position),T===91)f=93,b=!1,u=[];else if(T===123)f=125,b=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),T=e.input.charCodeAt(++e.position);T!==0;){if(On(e,!0,t),T=e.input.charCodeAt(e.position),T===f)return e.position++,e.tag=l,e.anchor=d,e.kind=b?"mapping":"sequence",e.result=u,!0;r?T===44&&jt(e,"expected the node content, but found ','"):jt(e,"missed comma between flow collection entries"),S=k=_=null,p=x=!1,T===63&&(h=e.input.charCodeAt(e.position+1),Ia(h)&&(p=x=!0,e.position++,On(e,!0,t))),n=e.line,a=e.lineStart,o=e.position,rc(e,t,gp,!1,!0),S=e.tag,k=e.result,On(e,!0,t),T=e.input.charCodeAt(e.position),(x||e.line===n)&&T===58&&(p=!0,T=e.input.charCodeAt(++e.position),On(e,!0,t),rc(e,t,gp,!1,!0),_=e.result),b?ql(e,u,y,S,k,_,n,a,o):p?u.push(ql(e,null,y,S,k,_,n,a,o)):u.push(k),On(e,!0,t),T=e.input.charCodeAt(e.position),T===44?(r=!0,T=e.input.charCodeAt(++e.position)):r=!1}jt(e,"unexpected end of the stream within a flow collection")}N(Ij,"readFlowCollection");function Dj(e,t){var r,n,a=hy,o=!1,l=!1,u=t,d=0,h=!1,f,p;if(p=e.input.charCodeAt(e.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)hy===a?a=p===43?HT:dJ:jt(e,"repeat of a chomping mode identifier");else if((f=Cj(p))>=0)f===0?jt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?jt(e,"repeat of an indentation width identifier"):(u=t+f-1,l=!0);else break;if(el(p)){do p=e.input.charCodeAt(++e.position);while(el(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!ai(p)&&p!==0)}for(;p!==0;){for(am(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!l||e.lineIndent<u)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>u&&(u=e.lineIndent),ai(p)){d++;continue}if(e.lineIndent<u){a===HT?e.result+=Zn.repeat(`
`,o?1+d:d):a===hy&&o&&(e.result+=`
`);break}for(n?el(p)?(h=!0,e.result+=Zn.repeat(`
`,o?1+d:d)):h?(h=!1,e.result+=Zn.repeat(`
`,d+1)):d===0?o&&(e.result+=" "):e.result+=Zn.repeat(`
`,d):e.result+=Zn.repeat(`
`,o?1+d:d),o=!0,l=!0,d=0,r=e.position;!ai(p)&&p!==0;)p=e.input.charCodeAt(++e.position);uo(e,r,e.position,!1)}return!0}N(Dj,"readBlockScalar");function A1(e,t){var r,n=e.tag,a=e.anchor,o=[],l,u=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),d=e.input.charCodeAt(e.position);d!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,jt(e,"tab characters must not be used in indentation")),!(d!==45||(l=e.input.charCodeAt(e.position+1),!Ia(l))));){if(u=!0,e.position++,On(e,!0,-1)&&e.lineIndent<=t){o.push(null),d=e.input.charCodeAt(e.position);continue}if(r=e.line,rc(e,t,wj,!1,!0),o.push(e.result),On(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&d!==0)jt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return u?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=o,!0):!1}N(A1,"readBlockSequence");function Pj(e,t,r){var n,a,o,l,u,d,h=e.tag,f=e.anchor,p={},x=Object.create(null),b=null,y=null,k=null,S=!1,_=!1,T;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),T=e.input.charCodeAt(e.position);T!==0;){if(!S&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,jt(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(T===63||T===58)&&Ia(n))T===63?(S&&(ql(e,p,x,b,y,null,l,u,d),b=y=k=null),_=!0,S=!0,a=!0):S?(S=!1,a=!0):jt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,T=n;else{if(l=e.line,u=e.lineStart,d=e.position,!rc(e,r,kj,!1,!0))break;if(e.line===o){for(T=e.input.charCodeAt(e.position);el(T);)T=e.input.charCodeAt(++e.position);if(T===58)T=e.input.charCodeAt(++e.position),Ia(T)||jt(e,"a whitespace character is expected after the key-value separator within a block mapping"),S&&(ql(e,p,x,b,y,null,l,u,d),b=y=k=null),_=!0,S=!1,a=!1,b=e.tag,y=e.result;else if(_)jt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=h,e.anchor=f,!0}else if(_)jt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=h,e.anchor=f,!0}if((e.line===o||e.lineIndent>t)&&(S&&(l=e.line,u=e.lineStart,d=e.position),rc(e,t,fp,!0,a)&&(S?y=e.result:k=e.result),S||(ql(e,p,x,b,y,k,l,u,d),b=y=k=null),On(e,!0,-1),T=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&T!==0)jt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return S&&ql(e,p,x,b,y,null,l,u,d),_&&(e.tag=h,e.anchor=f,e.kind="mapping",e.result=p),_}N(Pj,"readBlockMapping");function Bj(e){var t,r=!1,n=!1,a,o,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&jt(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(r=!0,l=e.input.charCodeAt(++e.position)):l===33?(n=!0,a="!!",l=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(o=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):jt(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!Ia(l);)l===33&&(n?jt(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),Ej.test(a)||jt(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),fJ.test(o)&&jt(e,"tag suffix cannot contain flow indicator characters")}o&&!_j.test(o)&&jt(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{jt(e,"tag name is malformed: "+o)}return r?e.tag=o:rl.call(e.tagMap,a)?e.tag=e.tagMap[a]+o:a==="!"?e.tag="!"+o:a==="!!"?e.tag="tag:yaml.org,2002:"+o:jt(e,'undeclared tag handle "'+a+'"'),!0}N(Bj,"readTagProperty");function Fj(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&jt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ia(r)&&!Hl(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&jt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}N(Fj,"readAnchorProperty");function Uj(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ia(n)&&!Hl(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&jt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),rl.call(e.anchorMap,r)||jt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],On(e,!0,-1),!0}N(Uj,"readAlias");function rc(e,t,r,n,a){var o,l,u,d=1,h=!1,f=!1,p,x,b,y,k,S;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=l=u=fp===r||wj===r,n&&On(e,!0,-1)&&(h=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),d===1)for(;Bj(e)||Fj(e);)On(e,!0,-1)?(h=!0,u=o,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):u=!1;if(u&&(u=h||a),(d===1||fp===r)&&(gp===r||kj===r?k=t:k=t+1,S=e.position-e.lineStart,d===1?u&&(A1(e,S)||Pj(e,S,k))||Ij(e,k)?f=!0:(l&&Dj(e,k)||Rj(e,k)||Oj(e,k)?f=!0:Uj(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&jt(e,"alias node should not have any properties")):Mj(e,k,gp===r)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d===0&&(f=u&&A1(e,S))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&jt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,x=e.implicitTypes.length;p<x;p+=1)if(y=e.implicitTypes[p],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(rl.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,b=e.typeMap.multi[e.kind||"fallback"],p=0,x=b.length;p<x;p+=1)if(e.tag.slice(0,b[p].tag.length)===b[p].tag){y=b[p];break}y||jt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&jt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):jt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}N(rc,"composeNode");function $j(e){var t=e.position,r,n,a,o=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(On(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(o=!0,l=e.input.charCodeAt(++e.position),r=e.position;l!==0&&!Ia(l);)l=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&jt(e,"directive name must not be less than one character in length");l!==0;){for(;el(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!ai(l));break}if(ai(l))break;for(r=e.position;l!==0&&!Ia(l);)l=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}l!==0&&am(e),rl.call(qT,n)?qT[n](e,n,a):ag(e,'unknown document directive "'+n+'"')}if(On(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,On(e,!0,-1)):o&&jt(e,"directives end mark is expected"),rc(e,e.lineIndent-1,fp,!1,!0),On(e,!0,-1),e.checkLineBreaks&&gJ.test(e.input.slice(t,e.position))&&ag(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Mg(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,On(e,!0,-1));return}if(e.position<e.length-1)jt(e,"end of the stream or a document separator is expected");else return}N($j,"readDocument");function g2(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new jj(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,jt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)$j(r);return r.documents}N(g2,"loadDocuments");function pJ(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=g2(e,r);if(typeof t!="function")return n;for(var a=0,o=n.length;a<o;a+=1)t(n[a])}N(pJ,"loadAll$1");function zj(e,t){var r=g2(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Za("expected a single document in the stream, but found more")}}N(zj,"load$1");var mJ=zj,xJ={load:mJ},Hj=Object.prototype.toString,qj=Object.prototype.hasOwnProperty,f2=65279,bJ=9,sg=10,yJ=13,vJ=32,kJ=33,wJ=34,L1=35,EJ=37,_J=38,SJ=39,TJ=42,Gj=44,CJ=45,pp=58,NJ=61,AJ=62,LJ=63,jJ=64,Yj=91,Wj=93,MJ=96,Vj=123,RJ=124,Kj=125,Ca={};Ca[0]="\\0";Ca[7]="\\a";Ca[8]="\\b";Ca[9]="\\t";Ca[10]="\\n";Ca[11]="\\v";Ca[12]="\\f";Ca[13]="\\r";Ca[27]="\\e";Ca[34]='\\"';Ca[92]="\\\\";Ca[133]="\\N";Ca[160]="\\_";Ca[8232]="\\L";Ca[8233]="\\P";var OJ=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],IJ=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Xj(e,t){var r,n,a,o,l,u,d;if(t===null)return{};for(r={},n=Object.keys(t),a=0,o=n.length;a<o;a+=1)l=n[a],u=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),d=e.compiledTypeMap.fallback[l],d&&qj.call(d.styleAliases,u)&&(u=d.styleAliases[u]),r[l]=u;return r}N(Xj,"compileStyleMap");function Qj(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Za("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Zn.repeat("0",n-t.length)+t}N(Qj,"encodeHex");var DJ=1,ig=2;function Zj(e){this.schema=e.schema||vj,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Zn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Xj(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?ig:DJ,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}N(Zj,"State");function j1(e,t){for(var r=Zn.repeat(" ",t),n=0,a=-1,o="",l,u=e.length;n<u;)a=e.indexOf(`
`,n),a===-1?(l=e.slice(n),n=u):(l=e.slice(n,a+1),n=a+1),l.length&&l!==`
`&&(o+=r),o+=l;return o}N(j1,"indentString");function mp(e,t){return`
`+Zn.repeat(" ",e.indent*t)}N(mp,"generateNextLine");function Jj(e,t){var r,n,a;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}N(Jj,"testImplicitResolving");function og(e){return e===vJ||e===bJ}N(og,"isWhitespace");function Fu(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==f2||65536<=e&&e<=1114111}N(Fu,"isPrintable");function M1(e){return Fu(e)&&e!==f2&&e!==yJ&&e!==sg}N(M1,"isNsCharOrWhitespace");function R1(e,t,r){var n=M1(e),a=n&&!og(e);return(r?n:n&&e!==Gj&&e!==Yj&&e!==Wj&&e!==Vj&&e!==Kj)&&e!==L1&&!(t===pp&&!a)||M1(t)&&!og(t)&&e===L1||t===pp&&a}N(R1,"isPlainSafe");function eM(e){return Fu(e)&&e!==f2&&!og(e)&&e!==CJ&&e!==LJ&&e!==pp&&e!==Gj&&e!==Yj&&e!==Wj&&e!==Vj&&e!==Kj&&e!==L1&&e!==_J&&e!==TJ&&e!==kJ&&e!==RJ&&e!==NJ&&e!==AJ&&e!==SJ&&e!==wJ&&e!==EJ&&e!==jJ&&e!==MJ}N(eM,"isPlainSafeFirst");function tM(e){return!og(e)&&e!==pp}N(tM,"isPlainSafeLast");function mu(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}N(mu,"codePointAt");function p2(e){var t=/^\n* /;return t.test(e)}N(p2,"needIndentIndicator");var rM=1,O1=2,nM=3,aM=4,gu=5;function sM(e,t,r,n,a,o,l,u){var d,h=0,f=null,p=!1,x=!1,b=n!==-1,y=-1,k=eM(mu(e,0))&&tM(mu(e,e.length-1));if(t||l)for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=mu(e,d),!Fu(h))return gu;k=k&&R1(h,f,u),f=h}else{for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=mu(e,d),h===sg)p=!0,b&&(x=x||d-y-1>n&&e[y+1]!==" ",y=d);else if(!Fu(h))return gu;k=k&&R1(h,f,u),f=h}x=x||b&&d-y-1>n&&e[y+1]!==" "}return!p&&!x?k&&!l&&!a(e)?rM:o===ig?gu:O1:r>9&&p2(e)?gu:l?o===ig?gu:O1:x?aM:nM}N(sM,"chooseScalarStyle");function iM(e,t,r,n,a){e.dump=(function(){if(t.length===0)return e.quotingType===ig?'""':"''";if(!e.noCompatMode&&(OJ.indexOf(t)!==-1||IJ.test(t)))return e.quotingType===ig?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),u=n||e.flowLevel>-1&&r>=e.flowLevel;function d(h){return Jj(e,h)}switch(N(d,"testAmbiguity"),sM(t,u,e.indent,l,d,e.quotingType,e.forceQuotes&&!n,a)){case rM:return t;case O1:return"'"+t.replace(/'/g,"''")+"'";case nM:return"|"+I1(t,e.indent)+D1(j1(t,o));case aM:return">"+I1(t,e.indent)+D1(j1(oM(t,l),o));case gu:return'"'+lM(t)+'"';default:throw new Za("impossible error: invalid scalar style")}})()}N(iM,"writeScalar");function I1(e,t){var r=p2(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),o=a?"+":n?"":"-";return r+o+`
`}N(I1,"blockHeader");function D1(e){return e[e.length-1]===`
`?e.slice(0,-1):e}N(D1,"dropEndingNewline");function oM(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var h=e.indexOf(`
`);return h=h!==-1?h:e.length,r.lastIndex=h,P1(e.slice(0,h),t)})(),a=e[0]===`
`||e[0]===" ",o,l;l=r.exec(e);){var u=l[1],d=l[2];o=d[0]===" ",n+=u+(!a&&!o&&d!==""?`
`:"")+P1(d,t),a=o}return n}N(oM,"foldString");function P1(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,a=0,o,l=0,u=0,d="";n=r.exec(e);)u=n.index,u-a>t&&(o=l>a?l:u,d+=`
`+e.slice(a,o),a=o+1),l=u;return d+=`
`,e.length-a>t&&l>a?d+=e.slice(a,l)+`
`+e.slice(l+1):d+=e.slice(a),d.slice(1)}N(P1,"foldLine");function lM(e){for(var t="",r=0,n,a=0;a<e.length;r>=65536?a+=2:a++)r=mu(e,a),n=Ca[r],!n&&Fu(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=n||Qj(r);return t}N(lM,"escapeString");function cM(e,t,r){var n="",a=e.tag,o,l,u;for(o=0,l=r.length;o<l;o+=1)u=r[o],e.replacer&&(u=e.replacer.call(r,String(o),u)),(Ai(e,t,u,!1,!1)||typeof u>"u"&&Ai(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}N(cM,"writeFlowSequence");function B1(e,t,r,n){var a="",o=e.tag,l,u,d;for(l=0,u=r.length;l<u;l+=1)d=r[l],e.replacer&&(d=e.replacer.call(r,String(l),d)),(Ai(e,t+1,d,!0,!0,!1,!0)||typeof d>"u"&&Ai(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=mp(e,t)),e.dump&&sg===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=o,e.dump=a||"[]"}N(B1,"writeBlockSequence");function uM(e,t,r){var n="",a=e.tag,o=Object.keys(r),l,u,d,h,f;for(l=0,u=o.length;l<u;l+=1)f="",n!==""&&(f+=", "),e.condenseFlow&&(f+='"'),d=o[l],h=r[d],e.replacer&&(h=e.replacer.call(r,d,h)),Ai(e,t,d,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ai(e,t,h,!1,!1)&&(f+=e.dump,n+=f));e.tag=a,e.dump="{"+n+"}"}N(uM,"writeFlowMapping");function dM(e,t,r,n){var a="",o=e.tag,l=Object.keys(r),u,d,h,f,p,x;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new Za("sortKeys must be a boolean or a function");for(u=0,d=l.length;u<d;u+=1)x="",(!n||a!=="")&&(x+=mp(e,t)),h=l[u],f=r[h],e.replacer&&(f=e.replacer.call(r,h,f)),Ai(e,t+1,h,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&sg===e.dump.charCodeAt(0)?x+="?":x+="? "),x+=e.dump,p&&(x+=mp(e,t)),Ai(e,t+1,f,!0,p)&&(e.dump&&sg===e.dump.charCodeAt(0)?x+=":":x+=": ",x+=e.dump,a+=x));e.tag=o,e.dump=a||"{}"}N(dM,"writeBlockMapping");function F1(e,t,r){var n,a,o,l,u,d;for(a=r?e.explicitTypes:e.implicitTypes,o=0,l=a.length;o<l;o+=1)if(u=a[o],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof t=="object"&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(r?u.multi&&u.representName?e.tag=u.representName(t):e.tag=u.tag:e.tag="?",u.represent){if(d=e.styleMap[u.tag]||u.defaultStyle,Hj.call(u.represent)==="[object Function]")n=u.represent(t,d);else if(qj.call(u.represent,d))n=u.represent[d](t,d);else throw new Za("!<"+u.tag+'> tag resolver accepts not "'+d+'" style');e.dump=n}return!0}return!1}N(F1,"detectType");function Ai(e,t,r,n,a,o,l){e.tag=null,e.dump=r,F1(e,r,!1)||F1(e,r,!0);var u=Hj.call(e.dump),d=n,h;n&&(n=e.flowLevel<0||e.flowLevel>t);var f=u==="[object Object]"||u==="[object Array]",p,x;if(f&&(p=e.duplicates.indexOf(r),x=p!==-1),(e.tag!==null&&e.tag!=="?"||x||e.indent!==2&&t>0)&&(a=!1),x&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(f&&x&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),u==="[object Object]")n&&Object.keys(e.dump).length!==0?(dM(e,t,e.dump,a),x&&(e.dump="&ref_"+p+e.dump)):(uM(e,t,e.dump),x&&(e.dump="&ref_"+p+" "+e.dump));else if(u==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?B1(e,t-1,e.dump,a):B1(e,t,e.dump,a),x&&(e.dump="&ref_"+p+e.dump)):(cM(e,t,e.dump),x&&(e.dump="&ref_"+p+" "+e.dump));else if(u==="[object String]")e.tag!=="?"&&iM(e,e.dump,t,o,d);else{if(u==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Za("unacceptable kind of an object to dump "+u)}e.tag!==null&&e.tag!=="?"&&(h=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",e.dump=h+" "+e.dump)}return!0}N(Ai,"writeNode");function hM(e,t){var r=[],n=[],a,o;for(xp(e,r,n),a=0,o=n.length;a<o;a+=1)t.duplicates.push(r[n[a]]);t.usedDuplicates=new Array(o)}N(hM,"getDuplicateReferences");function xp(e,t,r){var n,a,o;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,o=e.length;a<o;a+=1)xp(e[a],t,r);else for(n=Object.keys(e),a=0,o=n.length;a<o;a+=1)xp(e[n[a]],t,r)}N(xp,"inspectNode");function PJ(e,t){t=t||{};var r=new Zj(t);r.noRefs||hM(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ai(r,0,n,!0,!0)?r.dump+`
`:""}N(PJ,"dump$1");function BJ(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}N(BJ,"renamed");var FJ=nj,UJ=xJ.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var va={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},GT={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Th(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=En(e),t=En(t);const[r,n]=[e.x,e.y],[a,o]=[t.x,t.y],l=a-r,u=o-n;return{angle:Math.atan(u/l),deltaX:l,deltaY:u}}N(Th,"calculateDeltaAndAngle");var En=N(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),$J=N(e=>({x:N(function(t,r,n){let a=0;const o=En(n[0]).x<En(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(va,e.arrowTypeStart)){const{angle:b,deltaX:y}=Th(n[0],n[1]);a=va[e.arrowTypeStart]*Math.cos(b)*(y>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(va,e.arrowTypeEnd)){const{angle:b,deltaX:y}=Th(n[n.length-1],n[n.length-2]);a=va[e.arrowTypeEnd]*Math.cos(b)*(y>=0?1:-1)}const l=Math.abs(En(t).x-En(n[n.length-1]).x),u=Math.abs(En(t).y-En(n[n.length-1]).y),d=Math.abs(En(t).x-En(n[0]).x),h=Math.abs(En(t).y-En(n[0]).y),f=va[e.arrowTypeStart],p=va[e.arrowTypeEnd],x=1;if(l<p&&l>0&&u<p){let b=p+x-l;b*=o==="right"?-1:1,a-=b}if(d<f&&d>0&&h<f){let b=f+x-d;b*=o==="right"?-1:1,a+=b}return En(t).x+a},"x"),y:N(function(t,r,n){let a=0;const o=En(n[0]).y<En(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(va,e.arrowTypeStart)){const{angle:b,deltaY:y}=Th(n[0],n[1]);a=va[e.arrowTypeStart]*Math.abs(Math.sin(b))*(y>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(va,e.arrowTypeEnd)){const{angle:b,deltaY:y}=Th(n[n.length-1],n[n.length-2]);a=va[e.arrowTypeEnd]*Math.abs(Math.sin(b))*(y>=0?1:-1)}const l=Math.abs(En(t).y-En(n[n.length-1]).y),u=Math.abs(En(t).x-En(n[n.length-1]).x),d=Math.abs(En(t).y-En(n[0]).y),h=Math.abs(En(t).x-En(n[0]).x),f=va[e.arrowTypeStart],p=va[e.arrowTypeEnd],x=1;if(l<p&&l>0&&u<p){let b=p+x-l;b*=o==="up"?-1:1,a-=b}if(d<f&&d>0&&h<f){let b=f+x-d;b*=o==="up"?-1:1,a+=b}return En(t).y+a},"y")}),"getLineFunctionsWithOffset"),m2=N(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),zJ=N(e=>{const{handDrawnSeed:t}=Yr();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),td=N(e=>{const t=HJ([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),HJ=N(e=>{const t=new Map;return e.forEach(r=>{const[n,a]=r.split(":");t.set(n.trim(),a?.trim())}),t},"styles2Map"),gM=N(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),wt=N(e=>{const{stylesArray:t}=td(e),r=[],n=[],a=[],o=[];return t.forEach(l=>{const u=l[0];gM(u)?r.push(l.join(":")+" !important"):(n.push(l.join(":")+" !important"),u.includes("stroke")&&a.push(l.join(":")+" !important"),u==="fill"&&o.push(l.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:o}},"styles2String"),kt=N((e,t)=>{const{themeVariables:r,handDrawnSeed:n}=Yr(),{nodeBorder:a,mainBkg:o}=r,{stylesMap:l}=td(e);return Object.assign({roughness:.7,fill:l.get("fill")||o,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:l.get("stroke")||a,seed:n,strokeWidth:l.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:qJ(l.get("stroke-dasharray"))},t)},"userNodeOverrides"),qJ=N(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const a=isNaN(t[0])?0:t[0];return[a,a]}const r=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[r,n]},"getStrokeDashArray"),gh={},Xn={},YT;function GJ(){return YT||(YT=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.BLANK_URL=Xn.relativeFirstCharacters=Xn.whitespaceEscapeCharsRegex=Xn.urlSchemeRegex=Xn.ctrlCharactersRegex=Xn.htmlCtrlEntityRegex=Xn.htmlEntitiesRegex=Xn.invalidProtocolRegex=void 0,Xn.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Xn.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Xn.htmlCtrlEntityRegex=/&(newline|tab);/gi,Xn.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Xn.urlSchemeRegex=/^.+(:|&colon;)/gim,Xn.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Xn.relativeFirstCharacters=[".","/"],Xn.BLANK_URL="about:blank"),Xn}var WT;function YJ(){if(WT)return gh;WT=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.sanitizeUrl=void 0;var e=GJ();function t(l){return e.relativeFirstCharacters.indexOf(l[0])>-1}function r(l){var u=l.replace(e.ctrlCharactersRegex,"");return u.replace(e.htmlEntitiesRegex,function(d,h){return String.fromCharCode(h)})}function n(l){return URL.canParse(l)}function a(l){try{return decodeURIComponent(l)}catch{return l}}function o(l){if(!l)return e.BLANK_URL;var u,d=a(l.trim());do d=r(d).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),d=a(d),u=d.match(e.ctrlCharactersRegex)||d.match(e.htmlEntitiesRegex)||d.match(e.htmlCtrlEntityRegex)||d.match(e.whitespaceEscapeCharsRegex);while(u&&u.length>0);var h=d;if(!h)return e.BLANK_URL;if(t(h))return h;var f=h.trimStart(),p=f.match(e.urlSchemeRegex);if(!p)return h;var x=p[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(x))return e.BLANK_URL;var b=f.replace(/\\/g,"/");if(x==="mailto:"||x.includes("://"))return b;if(x==="http:"||x==="https:"){if(!n(b))return e.BLANK_URL;var y=new URL(b);return y.protocol=y.protocol.toLowerCase(),y.hostname=y.hostname.toLowerCase(),y.toString()}return b}return gh.sanitizeUrl=o,gh}var WJ=YJ(),fM=typeof global=="object"&&global&&global.Object===Object&&global,VJ=typeof self=="object"&&self&&self.Object===Object&&self,Oi=fM||VJ||Function("return this")(),bp=Oi.Symbol,pM=Object.prototype,KJ=pM.hasOwnProperty,XJ=pM.toString,fh=bp?bp.toStringTag:void 0;function QJ(e){var t=KJ.call(e,fh),r=e[fh];try{e[fh]=void 0;var n=!0}catch{}var a=XJ.call(e);return n&&(t?e[fh]=r:delete e[fh]),a}var ZJ=Object.prototype,JJ=ZJ.toString;function eee(e){return JJ.call(e)}var tee="[object Null]",ree="[object Undefined]",VT=bp?bp.toStringTag:void 0;function rd(e){return e==null?e===void 0?ree:tee:VT&&VT in Object(e)?QJ(e):eee(e)}function hc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var nee="[object AsyncFunction]",aee="[object Function]",see="[object GeneratorFunction]",iee="[object Proxy]";function x2(e){if(!hc(e))return!1;var t=rd(e);return t==aee||t==see||t==nee||t==iee}var gy=Oi["__core-js_shared__"],KT=(function(){var e=/[^.]+$/.exec(gy&&gy.keys&&gy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function oee(e){return!!KT&&KT in e}var lee=Function.prototype,cee=lee.toString;function gc(e){if(e!=null){try{return cee.call(e)}catch{}try{return e+""}catch{}}return""}var uee=/[\\^$.*+?()[\]{}|]/g,dee=/^\[object .+?Constructor\]$/,hee=Function.prototype,gee=Object.prototype,fee=hee.toString,pee=gee.hasOwnProperty,mee=RegExp("^"+fee.call(pee).replace(uee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xee(e){if(!hc(e)||oee(e))return!1;var t=x2(e)?mee:dee;return t.test(gc(e))}function bee(e,t){return e?.[t]}function fc(e,t){var r=bee(e,t);return xee(r)?r:void 0}var lg=fc(Object,"create");function yee(){this.__data__=lg?lg(null):{},this.size=0}function vee(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kee="__lodash_hash_undefined__",wee=Object.prototype,Eee=wee.hasOwnProperty;function _ee(e){var t=this.__data__;if(lg){var r=t[e];return r===kee?void 0:r}return Eee.call(t,e)?t[e]:void 0}var See=Object.prototype,Tee=See.hasOwnProperty;function Cee(e){var t=this.__data__;return lg?t[e]!==void 0:Tee.call(t,e)}var Nee="__lodash_hash_undefined__";function Aee(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=lg&&t===void 0?Nee:t,this}function nc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nc.prototype.clear=yee;nc.prototype.delete=vee;nc.prototype.get=_ee;nc.prototype.has=Cee;nc.prototype.set=Aee;function Lee(){this.__data__=[],this.size=0}function im(e,t){return e===t||e!==e&&t!==t}function om(e,t){for(var r=e.length;r--;)if(im(e[r][0],t))return r;return-1}var jee=Array.prototype,Mee=jee.splice;function Ree(e){var t=this.__data__,r=om(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Mee.call(t,r,1),--this.size,!0}function Oee(e){var t=this.__data__,r=om(t,e);return r<0?void 0:t[r][1]}function Iee(e){return om(this.__data__,e)>-1}function Dee(e,t){var r=this.__data__,n=om(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function yo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yo.prototype.clear=Lee;yo.prototype.delete=Ree;yo.prototype.get=Oee;yo.prototype.has=Iee;yo.prototype.set=Dee;var cg=fc(Oi,"Map");function Pee(){this.size=0,this.__data__={hash:new nc,map:new(cg||yo),string:new nc}}function Bee(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function lm(e,t){var r=e.__data__;return Bee(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Fee(e){var t=lm(this,e).delete(e);return this.size-=t?1:0,t}function Uee(e){return lm(this,e).get(e)}function $ee(e){return lm(this,e).has(e)}function zee(e,t){var r=lm(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ll(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ll.prototype.clear=Pee;ll.prototype.delete=Fee;ll.prototype.get=Uee;ll.prototype.has=$ee;ll.prototype.set=zee;var Hee="Expected a function";function Rg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Hee);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var l=e.apply(this,n);return r.cache=o.set(a,l)||o,l};return r.cache=new(Rg.Cache||ll),r}Rg.Cache=ll;function qee(){this.__data__=new yo,this.size=0}function Gee(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Yee(e){return this.__data__.get(e)}function Wee(e){return this.__data__.has(e)}var Vee=200;function Kee(e,t){var r=this.__data__;if(r instanceof yo){var n=r.__data__;if(!cg||n.length<Vee-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ll(n)}return r.set(e,t),this.size=r.size,this}function nd(e){var t=this.__data__=new yo(e);this.size=t.size}nd.prototype.clear=qee;nd.prototype.delete=Gee;nd.prototype.get=Yee;nd.prototype.has=Wee;nd.prototype.set=Kee;var yp=(function(){try{var e=fc(Object,"defineProperty");return e({},"",{}),e}catch{}})();function b2(e,t,r){t=="__proto__"&&yp?yp(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function U1(e,t,r){(r!==void 0&&!im(e[t],r)||r===void 0&&!(t in e))&&b2(e,t,r)}function Xee(e){return function(t,r,n){for(var a=-1,o=Object(t),l=n(t),u=l.length;u--;){var d=l[++a];if(r(o[d],d,o)===!1)break}return t}}var Qee=Xee(),mM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,XT=mM&&typeof module=="object"&&module&&!module.nodeType&&module,Zee=XT&&XT.exports===mM,QT=Zee?Oi.Buffer:void 0,ZT=QT?QT.allocUnsafe:void 0;function Jee(e,t){if(t)return e.slice();var r=e.length,n=ZT?ZT(r):new e.constructor(r);return e.copy(n),n}var JT=Oi.Uint8Array;function ete(e){var t=new e.constructor(e.byteLength);return new JT(t).set(new JT(e)),t}function tte(e,t){var r=t?ete(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function rte(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var eC=Object.create,nte=(function(){function e(){}return function(t){if(!hc(t))return{};if(eC)return eC(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function xM(e,t){return function(r){return e(t(r))}}var bM=xM(Object.getPrototypeOf,Object),ate=Object.prototype;function cm(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ate;return e===r}function ste(e){return typeof e.constructor=="function"&&!cm(e)?nte(bM(e)):{}}function Og(e){return e!=null&&typeof e=="object"}var ite="[object Arguments]";function tC(e){return Og(e)&&rd(e)==ite}var yM=Object.prototype,ote=yM.hasOwnProperty,lte=yM.propertyIsEnumerable,vp=tC((function(){return arguments})())?tC:function(e){return Og(e)&&ote.call(e,"callee")&&!lte.call(e,"callee")},kp=Array.isArray,cte=9007199254740991;function vM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=cte}function um(e){return e!=null&&vM(e.length)&&!x2(e)}function ute(e){return Og(e)&&um(e)}function dte(){return!1}var kM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rC=kM&&typeof module=="object"&&module&&!module.nodeType&&module,hte=rC&&rC.exports===kM,nC=hte?Oi.Buffer:void 0,gte=nC?nC.isBuffer:void 0,y2=gte||dte,fte="[object Object]",pte=Function.prototype,mte=Object.prototype,wM=pte.toString,xte=mte.hasOwnProperty,bte=wM.call(Object);function yte(e){if(!Og(e)||rd(e)!=fte)return!1;var t=bM(e);if(t===null)return!0;var r=xte.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&wM.call(r)==bte}var vte="[object Arguments]",kte="[object Array]",wte="[object Boolean]",Ete="[object Date]",_te="[object Error]",Ste="[object Function]",Tte="[object Map]",Cte="[object Number]",Nte="[object Object]",Ate="[object RegExp]",Lte="[object Set]",jte="[object String]",Mte="[object WeakMap]",Rte="[object ArrayBuffer]",Ote="[object DataView]",Ite="[object Float32Array]",Dte="[object Float64Array]",Pte="[object Int8Array]",Bte="[object Int16Array]",Fte="[object Int32Array]",Ute="[object Uint8Array]",$te="[object Uint8ClampedArray]",zte="[object Uint16Array]",Hte="[object Uint32Array]",yn={};yn[Ite]=yn[Dte]=yn[Pte]=yn[Bte]=yn[Fte]=yn[Ute]=yn[$te]=yn[zte]=yn[Hte]=!0;yn[vte]=yn[kte]=yn[Rte]=yn[wte]=yn[Ote]=yn[Ete]=yn[_te]=yn[Ste]=yn[Tte]=yn[Cte]=yn[Nte]=yn[Ate]=yn[Lte]=yn[jte]=yn[Mte]=!1;function qte(e){return Og(e)&&vM(e.length)&&!!yn[rd(e)]}function Gte(e){return function(t){return e(t)}}var EM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wh=EM&&typeof module=="object"&&module&&!module.nodeType&&module,Yte=Wh&&Wh.exports===EM,fy=Yte&&fM.process,aC=(function(){try{var e=Wh&&Wh.require&&Wh.require("util").types;return e||fy&&fy.binding&&fy.binding("util")}catch{}})(),sC=aC&&aC.isTypedArray,v2=sC?Gte(sC):qte;function $1(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Wte=Object.prototype,Vte=Wte.hasOwnProperty;function Kte(e,t,r){var n=e[t];(!(Vte.call(e,t)&&im(n,r))||r===void 0&&!(t in e))&&b2(e,t,r)}function Xte(e,t,r,n){var a=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var u=t[o],d=void 0;d===void 0&&(d=e[u]),a?b2(r,u,d):Kte(r,u,d)}return r}function Qte(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Zte=9007199254740991,Jte=/^(?:0|[1-9]\d*)$/;function _M(e,t){var r=typeof e;return t=t??Zte,!!t&&(r=="number"||r!="symbol"&&Jte.test(e))&&e>-1&&e%1==0&&e<t}var ere=Object.prototype,tre=ere.hasOwnProperty;function rre(e,t){var r=kp(e),n=!r&&vp(e),a=!r&&!n&&y2(e),o=!r&&!n&&!a&&v2(e),l=r||n||a||o,u=l?Qte(e.length,String):[],d=u.length;for(var h in e)(t||tre.call(e,h))&&!(l&&(h=="length"||a&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||_M(h,d)))&&u.push(h);return u}function nre(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var are=Object.prototype,sre=are.hasOwnProperty;function ire(e){if(!hc(e))return nre(e);var t=cm(e),r=[];for(var n in e)n=="constructor"&&(t||!sre.call(e,n))||r.push(n);return r}function SM(e){return um(e)?rre(e,!0):ire(e)}function ore(e){return Xte(e,SM(e))}function lre(e,t,r,n,a,o,l){var u=$1(e,r),d=$1(t,r),h=l.get(d);if(h){U1(e,r,h);return}var f=o?o(u,d,r+"",e,t,l):void 0,p=f===void 0;if(p){var x=kp(d),b=!x&&y2(d),y=!x&&!b&&v2(d);f=d,x||b||y?kp(u)?f=u:ute(u)?f=rte(u):b?(p=!1,f=Jee(d,!0)):y?(p=!1,f=tte(d,!0)):f=[]:yte(d)||vp(d)?(f=u,vp(u)?f=ore(u):(!hc(u)||x2(u))&&(f=ste(d))):p=!1}p&&(l.set(d,f),a(f,d,n,o,l),l.delete(d)),U1(e,r,f)}function TM(e,t,r,n,a){e!==t&&Qee(t,function(o,l){if(a||(a=new nd),hc(o))lre(e,t,l,r,TM,n,a);else{var u=n?n($1(e,l),o,l+"",e,t,a):void 0;u===void 0&&(u=o),U1(e,l,u)}},SM)}function CM(e){return e}function cre(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var iC=Math.max;function ure(e,t,r){return t=iC(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=iC(n.length-t,0),l=Array(o);++a<o;)l[a]=n[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=n[a];return u[t]=r(l),cre(e,this,u)}}function dre(e){return function(){return e}}var hre=yp?function(e,t){return yp(e,"toString",{configurable:!0,enumerable:!1,value:dre(t),writable:!0})}:CM,gre=800,fre=16,pre=Date.now;function mre(e){var t=0,r=0;return function(){var n=pre(),a=fre-(n-r);if(r=n,a>0){if(++t>=gre)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var xre=mre(hre);function bre(e,t){return xre(ure(e,t,CM),e+"")}function yre(e,t,r){if(!hc(r))return!1;var n=typeof t;return(n=="number"?um(r)&&_M(t,r.length):n=="string"&&t in r)?im(r[t],e):!1}function vre(e){return bre(function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:void 0,l=a>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(a--,o):void 0,l&&yre(r[0],r[1],l)&&(o=a<3?void 0:o,a=1),t=Object(t);++n<a;){var u=r[n];u&&e(t,u,n,o)}return t})}var kre=vre(function(e,t,r){TM(e,t,r)}),wre="",Ere={curveBasis:M0,curveBasisClosed:SZ,curveBasisOpen:TZ,curveBumpX:hL,curveBumpY:gL,curveBundle:CZ,curveCardinalClosed:NZ,curveCardinalOpen:AZ,curveCardinal:xL,curveCatmullRomClosed:LZ,curveCatmullRomOpen:jZ,curveCatmullRom:yL,curveLinear:lp,curveLinearClosed:MZ,curveMonotoneX:SL,curveMonotoneY:TL,curveNatural:NL,curveStep:AL,curveStepAfter:jL,curveStepBefore:LL},_re=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Sre=N(function(e,t){const r=NM(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const l=r.map(u=>u.args);Q0(l),n=Qn(n,[...l])}else n=r.args;if(!n)return;let a=qv(e,t);const o="config";return n[o]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),n[a]=n[o],delete n[o]),n},"detectInit"),NM=N(function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${_re.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),ze.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const a=[];for(;(n=Gh.exec(e))!==null;)if(n.index===Gh.lastIndex&&Gh.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const o=n[1]?n[1]:n[2],l=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;a.push({type:o,args:l})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(r){return ze.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),Tre=N(function(e){return e.replace(Gh,"")},"removeDirectives"),Cre=N(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function k2(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return Ere[r]??t}N(k2,"interpolateToCurve");function AM(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?WJ.sanitizeUrl(r):r}N(AM,"formatUrl");var Nre=N((e,...t)=>{const r=e.split("."),n=r.length-1,a=r[n];let o=window;for(let l=0;l<n;l++)if(o=o[r[l]],!o){ze.error(`Function name: ${e} not found in window`);return}o[a](...t)},"runFunc");function w2(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}N(w2,"distance");function LM(e){let t,r=0;e.forEach(a=>{r+=w2(a,t),t=a});const n=r/2;return E2(e,n)}N(LM,"traverseEdge");function jM(e){return e.length===1?e[0]:LM(e)}N(jM,"calcLabelPosition");var oC=N((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),E2=N((e,t)=>{let r,n=t;for(const a of e){if(r){const o=w2(a,r);if(o===0)return r;if(o<n)n-=o;else{const l=n/o;if(l<=0)return r;if(l>=1)return{x:a.x,y:a.y};if(l>0&&l<1)return{x:oC((1-l)*r.x+l*a.x,5),y:oC((1-l)*r.y+l*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Are=N((e,t,r)=>{ze.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=E2(t,25),o=e?10:5,l=Math.atan2(t[0].y-a.y,t[0].x-a.x),u={x:0,y:0};return u.x=Math.sin(l)*o+(t[0].x+a.x)/2,u.y=-Math.cos(l)*o+(t[0].y+a.y)/2,u},"calcCardinalityPosition");function MM(e,t,r){const n=structuredClone(r);ze.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const a=25+e,o=E2(n,a),l=10+e*.5,u=Math.atan2(n[0].y-o.y,n[0].x-o.x),d={x:0,y:0};return t==="start_left"?(d.x=Math.sin(u+Math.PI)*l+(n[0].x+o.x)/2,d.y=-Math.cos(u+Math.PI)*l+(n[0].y+o.y)/2):t==="end_right"?(d.x=Math.sin(u-Math.PI)*l+(n[0].x+o.x)/2-5,d.y=-Math.cos(u-Math.PI)*l+(n[0].y+o.y)/2-5):t==="end_left"?(d.x=Math.sin(u)*l+(n[0].x+o.x)/2-5,d.y=-Math.cos(u)*l+(n[0].y+o.y)/2-5):(d.x=Math.sin(u)*l+(n[0].x+o.x)/2,d.y=-Math.cos(u)*l+(n[0].y+o.y)/2),d}N(MM,"calcTerminalLabelPosition");function RM(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}N(RM,"getStylesFromArray");var lC=0,Lre=N(()=>(lC++,"id-"+Math.random().toString(36).substr(2,12)+"-"+lC),"generateId");function OM(e){let t="";const r="0123456789abcdef",n=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}N(OM,"makeRandomHex");var jre=N(e=>OM(e.length),"random"),Mre=N(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Rre=N(function(e,t){const r=t.text.replace(ed.lineBreakRegex," "),[,n]=dm(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",n),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const o=a.append("tspan");return o.attr("x",t.x+t.textMargin*2),o.attr("fill",t.fill),o.text(r),a},"drawSimpleText"),Ore=Rg((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),ed.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),a=[];let o="";return n.forEach((l,u)=>{const d=fo(`${l} `,r),h=fo(o,r);if(d>t){const{hyphenatedStrings:x,remainingWord:b}=Ire(l,t,"-",r);a.push(o,...x),o=b}else h+d>=t?(a.push(o),o=l):o=[o,l].filter(Boolean).join(" ");u+1===n.length&&a.push(o)}),a.filter(l=>l!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Ire=Rg((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const a=[...e],o=[];let l="";return a.forEach((u,d)=>{const h=`${l}${u}`;if(fo(h,n)>=t){const p=d+1,x=a.length===p,b=`${h}${r}`;o.push(x?h:b),l=""}else l=h}),{hyphenatedStrings:o,remainingWord:l}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function IM(e,t){return _2(e,t).height}N(IM,"calculateTextHeight");function fo(e,t){return _2(e,t).width}N(fo,"calculateTextWidth");var _2=Rg((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,o]=dm(r),l=["sans-serif",n],u=e.split(ed.lineBreakRegex),d=[],h=jr("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const f=h.append("svg");for(const x of l){let b=0;const y={width:0,height:0,lineHeight:0};for(const k of u){const S=Mre();S.text=k||wre;const _=Rre(f,S).style("font-size",o).style("font-weight",a).style("font-family",x),T=(_._groups||_)[0][0].getBBox();if(T.width===0&&T.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,T.width)),b=Math.round(T.height),y.height+=b,y.lineHeight=Math.round(Math.max(y.lineHeight,b))}d.push(y)}f.remove();const p=isNaN(d[1].height)||isNaN(d[1].width)||isNaN(d[1].lineHeight)||d[0].height>d[1].height&&d[0].width>d[1].width&&d[0].lineHeight>d[1].lineHeight?0:1;return d[p]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Lu,Dre=(Lu=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},N(Lu,"InitIDGenerator"),Lu),d0,Pre=N(function(e){return d0=d0||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),d0.innerHTML=e,unescape(d0.textContent)},"entityDecode");function S2(e){return"str"in e}N(S2,"isDetailedError");var Bre=N((e,t,r,n)=>{if(!n)return;const a=e.node()?.getBBox();a&&e.append("text").text(n).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),dm=N(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function T2(e,t){return kre({},e,t)}N(T2,"cleanAndMerge");var ri={assignWithDepth:Qn,wrapLabel:Ore,calculateTextHeight:IM,calculateTextWidth:fo,calculateTextDimensions:_2,cleanAndMerge:T2,detectInit:Sre,detectDirective:NM,isSubstringInArray:Cre,interpolateToCurve:k2,calcLabelPosition:jM,calcCardinalityPosition:Are,calcTerminalLabelPosition:MM,formatUrl:AM,getStylesFromArray:RM,generateId:Lre,random:jre,runFunc:Nre,entityDecode:Pre,insertTitle:Bre,isLabelCoordinateInPath:DM,parseFontSize:dm,InitIDGenerator:Dre},Fre=N(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),t},"encodeEntities"),pc=N(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Mce=N((e,t,{counter:r=0,prefix:n,suffix:a},o)=>o||`${n?`${n}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function _a(e){return e??null}N(_a,"handleUndefinedAttr");function DM(e,t){const r=Math.round(e.x),n=Math.round(e.y),a=t.replace(/(\d+\.\d+)/g,o=>Math.round(parseFloat(o)).toString());return a.includes(r.toString())||a.includes(n.toString())}N(DM,"isLabelCoordinateInPath");const Ure=Object.freeze({left:0,top:0,width:16,height:16}),wp=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),PM=Object.freeze({...Ure,...wp}),$re=Object.freeze({...PM,body:"",hidden:!1}),zre=Object.freeze({width:null,height:null}),Hre=Object.freeze({...zre,...wp}),qre=(e,t,r,n="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;n=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const u=a.pop(),d=a.pop(),h={provider:a.length>0?a[0]:n,prefix:d,name:u};return py(h)?h:null}const o=a[0],l=o.split("-");if(l.length>1){const u={provider:n,prefix:l.shift(),name:l.join("-")};return py(u)?u:null}if(r&&n===""){const u={provider:n,prefix:"",name:o};return py(u,r)?u:null}return null},py=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Gre(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function cC(e,t){const r=Gre(e,t);for(const n in $re)n in wp?n in e&&!(n in r)&&(r[n]=wp[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function Yre(e,t){const r=e.icons,n=e.aliases||Object.create(null),a=Object.create(null);function o(l){if(r[l])return a[l]=[];if(!(l in a)){a[l]=null;const u=n[l]&&n[l].parent,d=u&&o(u);d&&(a[l]=[u].concat(d))}return a[l]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(o),a}function uC(e,t,r){const n=e.icons,a=e.aliases||Object.create(null);let o={};function l(u){o=cC(n[u]||a[u],o)}return l(t),r.forEach(l),cC(e,o)}function Wre(e,t){if(e.icons[t])return uC(e,t,[]);const r=Yre(e,[t])[t];return r?uC(e,t,r):null}const Vre=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Kre=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function dC(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(Vre);if(n===null||!n.length)return e;const a=[];let o=n.shift(),l=Kre.test(o);for(;;){if(l){const u=parseFloat(o);isNaN(u)?a.push(o):a.push(Math.ceil(u*t*r)/r)}else a.push(o);if(o=n.shift(),o===void 0)return a.join("");l=!l}}function Xre(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const a=e.indexOf(">",n),o=e.indexOf("</"+t);if(a===-1||o===-1)break;const l=e.indexOf(">",o);if(l===-1)break;r+=e.slice(a+1,o).trim(),e=e.slice(0,n).trim()+e.slice(l+1)}return{defs:r,content:e}}function Qre(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Zre(e,t,r){const n=Xre(e);return Qre(n.defs,t+n.content+r)}const Jre=e=>e==="unset"||e==="undefined"||e==="none";function ene(e,t){const r={...PM,...e},n={...Hre,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let o=r.body;[r,n].forEach(k=>{const S=[],_=k.hFlip,T=k.vFlip;let A=k.rotate;_?T?A+=2:(S.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),S.push("scale(-1 1)"),a.top=a.left=0):T&&(S.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),S.push("scale(1 -1)"),a.top=a.left=0);let I;switch(A<0&&(A-=Math.floor(A/4)*4),A=A%4,A){case 1:I=a.height/2+a.top,S.unshift("rotate(90 "+I.toString()+" "+I.toString()+")");break;case 2:S.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:I=a.width/2+a.left,S.unshift("rotate(-90 "+I.toString()+" "+I.toString()+")");break}A%2===1&&(a.left!==a.top&&(I=a.left,a.left=a.top,a.top=I),a.width!==a.height&&(I=a.width,a.width=a.height,a.height=I)),S.length&&(o=Zre(o,'<g transform="'+S.join(" ")+'">',"</g>"))});const l=n.width,u=n.height,d=a.width,h=a.height;let f,p;l===null?(p=u===null?"1em":u==="auto"?h:u,f=dC(p,d/h)):(f=l==="auto"?d:l,p=u===null?dC(f,h/d):u==="auto"?h:u);const x={},b=(k,S)=>{Jre(S)||(x[k]=S.toString())};b("width",f),b("height",p);const y=[a.left,a.top,d,h];return x.viewBox=y.join(" "),{attributes:x,viewBox:y,body:o}}const tne=/\sid="(\S+)"/g,rne="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let nne=0;function ane(e,t=rne){const r=[];let n;for(;n=tne.exec(e);)r.push(n[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(o=>{const l=typeof t=="function"?t(o):t+(nne++).toString(),u=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+u+')([")]|\\.[a-z])',"g"),"$1"+l+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function sne(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function C2(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var mc=C2();function BM(e){mc=e}var Vh={exec:()=>null};function zr(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(a,o)=>{let l=typeof o=="string"?o:o.source;return l=l.replace(Da.caret,"$1"),r=r.replace(a,l),n},getRegex:()=>new RegExp(r,t)};return n}var Da={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ine=/^(?:[ \t]*(?:\n|$))+/,one=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,lne=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ig=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,cne=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,N2=/(?:[*+-]|\d{1,9}[.)])/,FM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,UM=zr(FM).replace(/bull/g,N2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),une=zr(FM).replace(/bull/g,N2).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),A2=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dne=/^[^\n]+/,L2=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,hne=zr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",L2).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),gne=zr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,N2).getRegex(),hm="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",j2=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,fne=zr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",j2).replace("tag",hm).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$M=zr(A2).replace("hr",Ig).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hm).getRegex(),pne=zr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$M).getRegex(),M2={blockquote:pne,code:one,def:hne,fences:lne,heading:cne,hr:Ig,html:fne,lheading:UM,list:gne,newline:ine,paragraph:$M,table:Vh,text:dne},hC=zr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ig).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hm).getRegex(),mne={...M2,lheading:une,table:hC,paragraph:zr(A2).replace("hr",Ig).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hC).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hm).getRegex()},xne={...M2,html:zr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",j2).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Vh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:zr(A2).replace("hr",Ig).replace("heading",` *#{1,6} *[^
]`).replace("lheading",UM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bne=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,yne=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zM=/^( {2,}|\\)\n(?!\s*$)/,vne=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,gm=/[\p{P}\p{S}]/u,R2=/[\s\p{P}\p{S}]/u,HM=/[^\s\p{P}\p{S}]/u,kne=zr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,R2).getRegex(),qM=/(?!~)[\p{P}\p{S}]/u,wne=/(?!~)[\s\p{P}\p{S}]/u,Ene=/(?:[^\s\p{P}\p{S}]|~)/u,_ne=zr(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),GM=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Sne=zr(GM,"u").replace(/punct/g,gm).getRegex(),Tne=zr(GM,"u").replace(/punct/g,qM).getRegex(),YM="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Cne=zr(YM,"gu").replace(/notPunctSpace/g,HM).replace(/punctSpace/g,R2).replace(/punct/g,gm).getRegex(),Nne=zr(YM,"gu").replace(/notPunctSpace/g,Ene).replace(/punctSpace/g,wne).replace(/punct/g,qM).getRegex(),Ane=zr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,HM).replace(/punctSpace/g,R2).replace(/punct/g,gm).getRegex(),Lne=zr(/\\(punct)/,"gu").replace(/punct/g,gm).getRegex(),jne=zr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Mne=zr(j2).replace("(?:-->|$)","-->").getRegex(),Rne=zr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Mne).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ep=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,One=zr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ep).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),WM=zr(/^!?\[(label)\]\[(ref)\]/).replace("label",Ep).replace("ref",L2).getRegex(),VM=zr(/^!?\[(ref)\](?:\[\])?/).replace("ref",L2).getRegex(),Ine=zr("reflink|nolink(?!\\()","g").replace("reflink",WM).replace("nolink",VM).getRegex(),gC=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,O2={_backpedal:Vh,anyPunctuation:Lne,autolink:jne,blockSkip:_ne,br:zM,code:yne,del:Vh,emStrongLDelim:Sne,emStrongRDelimAst:Cne,emStrongRDelimUnd:Ane,escape:bne,link:One,nolink:VM,punctuation:kne,reflink:WM,reflinkSearch:Ine,tag:Rne,text:vne,url:Vh},Dne={...O2,link:zr(/^!?\[(label)\]\((.*?)\)/).replace("label",Ep).getRegex(),reflink:zr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ep).getRegex()},z1={...O2,emStrongRDelimAst:Nne,emStrongLDelim:Tne,url:zr(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",gC).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:zr(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",gC).getRegex()},Pne={...z1,br:zr(zM).replace("{2,}","*").getRegex(),text:zr(z1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},h0={normal:M2,gfm:mne,pedantic:xne},ph={normal:O2,gfm:z1,breaks:Pne,pedantic:Dne},Bne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fC=e=>Bne[e];function ki(e,t){if(t){if(Da.escapeTest.test(e))return e.replace(Da.escapeReplace,fC)}else if(Da.escapeTestNoEncode.test(e))return e.replace(Da.escapeReplaceNoEncode,fC);return e}function pC(e){try{e=encodeURI(e).replace(Da.percentDecode,"%")}catch{return null}return e}function mC(e,t){let r=e.replace(Da.findPipe,(o,l,u)=>{let d=!1,h=l;for(;--h>=0&&u[h]==="\\";)d=!d;return d?"|":" |"}),n=r.split(Da.splitPipe),a=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(Da.slashPipe,"|");return n}function mh(e,t,r){let n=e.length;if(n===0)return"";let a=0;for(;a<n&&e.charAt(n-a-1)===t;)a++;return e.slice(0,n-a)}function Fne(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function xC(e,t,r,n,a){let o=t.href,l=t.title||null,u=e[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;let d={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:o,title:l,text:u,tokens:n.inlineTokens(u)};return n.state.inLink=!1,d}function Une(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let a=n[1];return t.split(`
`).map(o=>{let l=o.match(r.other.beginningSpace);if(l===null)return o;let[u]=l;return u.length>=a.length?o.slice(a.length):o}).join(`
`)}var _p=class{options;rules;lexer;constructor(t){this.options=t||mc}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:mh(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],a=Une(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let a=mh(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:mh(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=mh(r[0],`
`).split(`
`),a="",o="",l=[];for(;n.length>0;){let u=!1,d=[],h;for(h=0;h<n.length;h++)if(this.rules.other.blockquoteStart.test(n[h]))d.push(n[h]),u=!0;else if(!u)d.push(n[h]);else break;n=n.slice(h);let f=d.join(`
`),p=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${f}`:f,o=o?`${o}
${p}`:p;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,l,!0),this.lexer.state.top=x,n.length===0)break;let b=l.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let y=b,k=y.raw+`
`+n.join(`
`),S=this.blockquote(k);l[l.length-1]=S,a=a.substring(0,a.length-y.raw.length)+S.raw,o=o.substring(0,o.length-y.text.length)+S.text;break}else if(b?.type==="list"){let y=b,k=y.raw+`
`+n.join(`
`),S=this.list(k);l[l.length-1]=S,a=a.substring(0,a.length-b.raw.length)+S.raw,o=o.substring(0,o.length-y.raw.length)+S.raw,n=k.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:l,text:o}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),a=n.length>1,o={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");let l=this.rules.other.listItemRegex(n),u=!1;for(;t;){let h=!1,f="",p="";if(!(r=l.exec(t))||this.rules.block.hr.test(t))break;f=r[0],t=t.substring(f.length);let x=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),b=t.split(`
`,1)[0],y=!x.trim(),k=0;if(this.options.pedantic?(k=2,p=x.trimStart()):y?k=r[1].length+1:(k=r[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,p=x.slice(k),k+=r[1].length),y&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,t=t.substring(b.length+1),h=!0),!h){let T=this.rules.other.nextBulletRegex(k),A=this.rules.other.hrRegex(k),I=this.rules.other.fencesBeginRegex(k),O=this.rules.other.headingBeginRegex(k),B=this.rules.other.htmlBeginRegex(k);for(;t;){let F=t.split(`
`,1)[0],ae;if(b=F,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),ae=b):ae=b.replace(this.rules.other.tabCharGlobal,"    "),I.test(b)||O.test(b)||B.test(b)||T.test(b)||A.test(b))break;if(ae.search(this.rules.other.nonSpaceChar)>=k||!b.trim())p+=`
`+ae.slice(k);else{if(y||x.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(x)||O.test(x)||A.test(x))break;p+=`
`+b}!y&&!b.trim()&&(y=!0),f+=F+`
`,t=t.substring(F.length+1),x=ae.slice(k)}}o.loose||(u?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(u=!0));let S=null,_;this.options.gfm&&(S=this.rules.other.listIsTask.exec(p),S&&(_=S[0]!=="[ ] ",p=p.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:f,task:!!S,checked:_,loose:!1,text:p,tokens:[]}),o.raw+=f}let d=o.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let h=0;h<o.items.length;h++)if(this.lexer.state.top=!1,o.items[h].tokens=this.lexer.blockTokens(o.items[h].text,[]),!o.loose){let f=o.items[h].tokens.filter(x=>x.type==="space"),p=f.length>0&&f.some(x=>this.rules.other.anyLine.test(x.raw));o.loose=p}if(o.loose)for(let h=0;h<o.items.length;h++)o.items[h].loose=!0;return o}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:a,title:o}}}table(t){let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=mC(r[1]),a=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===a.length){for(let u of a)this.rules.other.tableAlignRight.test(u)?l.align.push("right"):this.rules.other.tableAlignCenter.test(u)?l.align.push("center"):this.rules.other.tableAlignLeft.test(u)?l.align.push("left"):l.align.push(null);for(let u=0;u<n.length;u++)l.header.push({text:n[u],tokens:this.lexer.inline(n[u]),header:!0,align:l.align[u]});for(let u of o)l.rows.push(mC(u,l.header.length).map((d,h)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:l.align[h]})));return l}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let l=mh(n.slice(0,-1),"\\");if((n.length-l.length)%2===0)return}else{let l=Fne(r[2],"()");if(l===-2)return;if(l>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+l;r[2]=r[2].substring(0,l),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let a=r[2],o="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(a);l&&(a=l[1],o=l[3])}else o=r[3]?r[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),xC(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=r[a.toLowerCase()];if(!o){let l=n[0].charAt(0);return{type:"text",raw:l,text:l}}return xC(n,o,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...a[0]].length-1,l,u,d=o,h=0,f=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,r=r.slice(-1*t.length+o);(a=f.exec(r))!=null;){if(l=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!l)continue;if(u=[...l].length,a[3]||a[4]){d+=u;continue}else if((a[5]||a[6])&&o%3&&!((o+u)%3)){h+=u;continue}if(d-=u,d>0)continue;u=Math.min(u,u+d+h);let p=[...a[0]][0].length,x=t.slice(0,o+a.index+p+u);if(Math.min(o,u)%2){let y=x.slice(1,-1);return{type:"em",raw:x,text:y,tokens:this.lexer.inlineTokens(y)}}let b=x.slice(2,-2);return{type:"strong",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,a;return r[2]==="@"?(n=r[1],a="mailto:"+n):(n=r[1],a=n),{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let n,a;if(r[2]==="@")n=r[0],a="mailto:"+n;else{let o;do o=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(o!==r[0]);n=r[0],r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},Js=class H1{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||mc,this.options.tokenizer=this.options.tokenizer||new _p,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Da,block:h0.normal,inline:ph.normal};this.options.pedantic?(r.block=h0.pedantic,r.inline=ph.pedantic):this.options.gfm&&(r.block=h0.gfm,this.options.breaks?r.inline=ph.breaks:r.inline=ph.gfm),this.tokenizer.rules=r}static get rules(){return{block:h0,inline:ph}}static lex(t,r){return new H1(r).lex(t)}static lexInline(t,r){return new H1(r).inlineTokens(t)}lex(t){t=t.replace(Da.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){for(this.options.pedantic&&(t=t.replace(Da.tabCharGlobal,"    ").replace(Da.spaceLine,""));t;){let a;if(this.options.extensions?.block?.some(l=>(a=l.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let l=r.at(-1);a.raw.length===1&&l!==void 0?l.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let l=r.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+a.raw,l.text+=`
`+a.text,this.inlineQueue.at(-1).src=l.text):r.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let l=r.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+a.raw,l.text+=`
`+a.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),r.push(a);continue}let o=t;if(this.options.extensions?.startBlock){let l=1/0,u=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(o=t.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(o))){let l=r.at(-1);n&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(a),n=o.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let l=r.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(a);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n=t,a=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let o=!1,l="";for(;t;){o||(l=""),o=!1;let u;if(this.options.extensions?.inline?.some(h=>(u=h.call({lexer:this},t,r))?(t=t.substring(u.raw.length),r.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let h=r.at(-1);u.type==="text"&&h?.type==="text"?(h.raw+=u.raw,h.text+=u.text):r.push(u);continue}if(u=this.tokenizer.emStrong(t,n,l)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),r.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),r.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),r.push(u);continue}let d=t;if(this.options.extensions?.startInline){let h=1/0,f=t.slice(1),p;this.options.extensions.startInline.forEach(x=>{p=x.call({lexer:this},f),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(u=this.tokenizer.inlineText(d)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(l=u.raw.slice(-1)),o=!0;let h=r.at(-1);h?.type==="text"?(h.raw+=u.raw,h.text+=u.text):r.push(u);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},Sp=class{options;parser;constructor(t){this.options=t||mc}space(t){return""}code({text:t,lang:r,escaped:n}){let a=(r||"").match(Da.notSpaceStart)?.[0],o=t.replace(Da.endingNewline,"")+`
`;return a?'<pre><code class="language-'+ki(a)+'">'+(n?o:ki(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:ki(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,a="";for(let u=0;u<t.items.length;u++){let d=t.items[u];a+=this.listitem(d)}let o=r?"ol":"ul",l=r&&n!==1?' start="'+n+'"':"";return"<"+o+l+`>
`+a+"</"+o+`>
`}listitem(t){let r="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+ki(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let o=0;o<t.header.length;o++)n+=this.tablecell(t.header[o]);r+=this.tablerow({text:n});let a="";for(let o=0;o<t.rows.length;o++){let l=t.rows[o];n="";for(let u=0;u<l.length;u++)n+=this.tablecell(l[u]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ki(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let a=this.parser.parseInline(n),o=pC(t);if(o===null)return a;t=o;let l='<a href="'+t+'"';return r&&(l+=' title="'+ki(r)+'"'),l+=">"+a+"</a>",l}image({href:t,title:r,text:n,tokens:a}){a&&(n=this.parser.parseInline(a,this.parser.textRenderer));let o=pC(t);if(o===null)return ki(n);t=o;let l=`<img src="${t}" alt="${n}"`;return r&&(l+=` title="${ki(r)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ki(t.text)}},I2=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ei=class q1{options;renderer;textRenderer;constructor(t){this.options=t||mc,this.options.renderer=this.options.renderer||new Sp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new I2}static parse(t,r){return new q1(r).parse(t)}static parseInline(t,r){return new q1(r).parseInline(t)}parse(t,r=!0){let n="";for(let a=0;a<t.length;a++){let o=t[a];if(this.options.extensions?.renderers?.[o.type]){let u=o,d=this.options.extensions.renderers[u.type].call({parser:this},u);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){n+=d||"";continue}}let l=o;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"def":{n+=this.renderer.def(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let u=l,d=this.renderer.text(u);for(;a+1<t.length&&t[a+1].type==="text";)u=t[++a],d+=`
`+this.renderer.text(u);r?n+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):n+=d;continue}default:{let u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}parseInline(t,r=this.renderer){let n="";for(let a=0;a<t.length;a++){let o=t[a];if(this.options.extensions?.renderers?.[o.type]){let u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=u||"";continue}}let l=o;switch(l.type){case"escape":{n+=r.text(l);break}case"html":{n+=r.html(l);break}case"link":{n+=r.link(l);break}case"image":{n+=r.image(l);break}case"strong":{n+=r.strong(l);break}case"em":{n+=r.em(l);break}case"codespan":{n+=r.codespan(l);break}case"br":{n+=r.br(l);break}case"del":{n+=r.del(l);break}case"text":{n+=r.text(l);break}default:{let u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return n}},Ch=class{options;block;constructor(t){this.options=t||mc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Js.lex:Js.lexInline}provideParser(){return this.block?ei.parse:ei.parseInline}},$ne=class{defaults=C2();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ei;Renderer=Sp;TextRenderer=I2;Lexer=Js;Tokenizer=_p;Hooks=Ch;constructor(...t){this.use(...t)}walkTokens(t,r){let n=[];for(let a of t)switch(n=n.concat(r.call(this,a)),a.type){case"table":{let o=a;for(let l of o.header)n=n.concat(this.walkTokens(l.tokens,r));for(let l of o.rows)for(let u of l)n=n.concat(this.walkTokens(u.tokens,r));break}case"list":{let o=a;n=n.concat(this.walkTokens(o.items,r));break}default:{let o=a;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{let u=o[l].flat(1/0);n=n.concat(this.walkTokens(u,r))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let l=r.renderers[o.name];l?r.renderers[o.name]=function(...u){let d=o.renderer.apply(this,u);return d===!1&&(d=l.apply(this,u)),d}:r.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=r[o.level];l?l.unshift(o.tokenizer):r[o.level]=[o.tokenizer],o.start&&(o.level==="block"?r.startBlock?r.startBlock.push(o.start):r.startBlock=[o.start]:o.level==="inline"&&(r.startInline?r.startInline.push(o.start):r.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(r.childTokens[o.name]=o.childTokens)}),a.extensions=r),n.renderer){let o=this.defaults.renderer||new Sp(this.defaults);for(let l in n.renderer){if(!(l in o))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let u=l,d=n.renderer[u],h=o[u];o[u]=(...f)=>{let p=d.apply(o,f);return p===!1&&(p=h.apply(o,f)),p||""}}a.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new _p(this.defaults);for(let l in n.tokenizer){if(!(l in o))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let u=l,d=n.tokenizer[u],h=o[u];o[u]=(...f)=>{let p=d.apply(o,f);return p===!1&&(p=h.apply(o,f)),p}}a.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Ch;for(let l in n.hooks){if(!(l in o))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let u=l,d=n.hooks[u],h=o[u];Ch.passThroughHooks.has(l)?o[u]=f=>{if(this.defaults.async&&Ch.passThroughHooksRespectAsync.has(l))return(async()=>{let x=await d.call(o,f);return h.call(o,x)})();let p=d.call(o,f);return h.call(o,p)}:o[u]=(...f)=>{if(this.defaults.async)return(async()=>{let x=await d.apply(o,f);return x===!1&&(x=await h.apply(o,f)),x})();let p=d.apply(o,f);return p===!1&&(p=h.apply(o,f)),p}}a.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,l=n.walkTokens;a.walkTokens=function(u){let d=[];return d.push(l.call(this,u)),o&&(d=d.concat(o.call(this,u))),d}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return Js.lex(t,r??this.defaults)}parser(t,r){return ei.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let a={...n},o={...this.defaults,...a},l=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&a.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let u=o.hooks?await o.hooks.preprocess(r):r,d=await(o.hooks?await o.hooks.provideLexer():t?Js.lex:Js.lexInline)(u,o),h=o.hooks?await o.hooks.processAllTokens(d):d;o.walkTokens&&await Promise.all(this.walkTokens(h,o.walkTokens));let f=await(o.hooks?await o.hooks.provideParser():t?ei.parse:ei.parseInline)(h,o);return o.hooks?await o.hooks.postprocess(f):f})().catch(l);try{o.hooks&&(r=o.hooks.preprocess(r));let u=(o.hooks?o.hooks.provideLexer():t?Js.lex:Js.lexInline)(r,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let d=(o.hooks?o.hooks.provideParser():t?ei.parse:ei.parseInline)(u,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(u){return l(u)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+ki(n.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(n);throw n}}},ac=new $ne;function Wr(e,t){return ac.parse(e,t)}Wr.options=Wr.setOptions=function(e){return ac.setOptions(e),Wr.defaults=ac.defaults,BM(Wr.defaults),Wr};Wr.getDefaults=C2;Wr.defaults=mc;Wr.use=function(...e){return ac.use(...e),Wr.defaults=ac.defaults,BM(Wr.defaults),Wr};Wr.walkTokens=function(e,t){return ac.walkTokens(e,t)};Wr.parseInline=ac.parseInline;Wr.Parser=ei;Wr.parser=ei.parse;Wr.Renderer=Sp;Wr.TextRenderer=I2;Wr.Lexer=Js;Wr.lexer=Js.lex;Wr.Tokenizer=_p;Wr.Hooks=Ch;Wr.parse=Wr;Wr.options;Wr.setOptions;Wr.use;Wr.walkTokens;Wr.parseInline;ei.parse;Js.lex;function KM(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var a=n.reduce(function(u,d){var h=d.match(/\n([\t ]+|(?!\s).)/g);return h?u.concat(h.map(function(f){var p,x;return(x=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&x!==void 0?x:0})):u},[]);if(a.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");n=n.map(function(u){return u.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var l=n[0];return t.forEach(function(u,d){var h=l.match(/(?:^|\n)( *)$/),f=h?h[1]:"",p=u;typeof u=="string"&&u.includes(`
`)&&(p=String(u).split(`
`).map(function(x,b){return b===0?x:""+f+x}).join(`
`)),l+=p+n[d+1]}),l}var zne={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},G1=new Map,XM=new Map,Hne=N(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ze.debug("Registering icon pack:",t.name),"loader"in t)XM.set(t.name,t.loader);else if("icons"in t)G1.set(t.name,t.icons);else throw ze.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),QM=N(async(e,t)=>{const r=qre(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let a=G1.get(n);if(!a){const l=XM.get(n);if(!l)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await l(),prefix:n},G1.set(n,a)}catch(u){throw ze.error(u),new Error(`Failed to load icon set: ${r.prefix}`)}}const o=Wre(a,r.name);if(!o)throw new Error(`Icon not found: ${e}`);return o},"getRegisteredIconData"),qne=N(async e=>{try{return await QM(e),!0}catch{return!1}},"isIconAvailable"),Dg=N(async(e,t,r)=>{let n;try{n=await QM(e,t?.fallbackPrefix)}catch(l){ze.error(l),n=zne}const a=ene(n,t),o=sne(ane(a.body),{...a.attributes,...r});return Fs(o,wa())},"getIconSVG");function ZM(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=KM(n);return t===!1?a.replace(/ /g,"&nbsp;"):a}N(ZM,"preprocessMarkdown");function JM(e,t={}){const r=ZM(e,t),n=Wr.lexer(r),a=[[]];let o=0;function l(u,d="normal"){u.type==="text"?u.text.split(`
`).forEach((f,p)=>{p!==0&&(o++,a.push([])),f.split(" ").forEach(x=>{x=x.replace(/&#39;/g,"'"),x&&a[o].push({content:x,type:d})})}):u.type==="strong"||u.type==="em"?u.tokens.forEach(h=>{l(h,u.type)}):u.type==="html"&&a[o].push({content:u.text,type:"normal"})}return N(l,"processNode"),n.forEach(u=>{u.type==="paragraph"?u.tokens?.forEach(d=>{l(d)}):u.type==="html"?a[o].push({content:u.text,type:"normal"}):a[o].push({content:u.raw,type:"normal"})}),a}N(JM,"markdownToLines");function eR(e,{markdownAutoWrap:t}={}){const r=Wr.lexer(e);function n(a){return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${a.tokens?.map(n).join("")}</strong>`:a.type==="em"?`<em>${a.tokens?.map(n).join("")}</em>`:a.type==="paragraph"?`<p>${a.tokens?.map(n).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:(ze.warn(`Unsupported markdown: ${a.type}`),a.raw)}return N(n,"output"),r.map(n).join("")}N(eR,"markdownToHTML");function tR(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}N(tR,"splitTextToChars");function rR(e,t){const r=tR(t.content);return D2(e,[],r,t.type)}N(rR,"splitWordToFitWidth");function D2(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[a,...o]=r,l=[...t,a];return e([{content:l.join(""),type:n}])?D2(e,l,o,n):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}N(D2,"splitWordToFitWidthRecursion");function nR(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Tp(e,t)}N(nR,"splitLineToFitWidth");function Tp(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const o=e.shift()??{content:" ",type:"normal"},l=[...n];if(a!==""&&l.push({content:a,type:"normal"}),l.push(o),t(l))return Tp(e,t,r,l);if(n.length>0)r.push(n),e.unshift(o);else if(o.content){const[u,d]=rR(t,o);r.push([u]),d.content&&e.unshift(d)}return Tp(e,t,r)}N(Tp,"splitLineToFitWidthRecursion");function Y1(e,t){t&&e.attr("style",t)}N(Y1,"applyStyle");async function aR(e,t,r,n,a=!1,o=wa()){const l=e.append("foreignObject");l.attr("width",`${10*r}px`),l.attr("height",`${10*r}px`);const u=l.append("xhtml:div"),d=Iu(t.label)?await Gv(t.label.replace(ed.lineBreakRegex,`
`),o):Fs(t.label,o),h=t.isNode?"nodeLabel":"edgeLabel",f=u.append("span");f.html(d),Y1(f,t.labelStyle),f.attr("class",`${h} ${n}`),Y1(u,t.labelStyle),u.style("display","table-cell"),u.style("white-space","nowrap"),u.style("line-height","1.5"),u.style("max-width",r+"px"),u.style("text-align","center"),u.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&u.attr("class","labelBkg");let p=u.node().getBoundingClientRect();return p.width===r&&(u.style("display","table"),u.style("white-space","break-spaces"),u.style("width",r+"px"),p=u.node().getBoundingClientRect()),l.node()}N(aR,"addHtmlSpan");function fm(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}N(fm,"createTspan");function sR(e,t,r){const n=e.append("text"),a=fm(n,1,t);pm(a,r);const o=a.node().getComputedTextLength();return n.remove(),o}N(sR,"computeWidthOfText");function Gne(e,t,r){const n=e.append("text"),a=fm(n,1,t);pm(a,[{content:r,type:"normal"}]);const o=a.node()?.getBoundingClientRect();return o&&n.remove(),o}N(Gne,"computeDimensionOfText");function iR(e,t,r,n=!1){const o=t.append("g"),l=o.insert("rect").attr("class","background").attr("style","stroke: none"),u=o.append("text").attr("y","-10.1");let d=0;for(const h of r){const f=N(x=>sR(o,1.1,x)<=e,"checkWidth"),p=f(h)?[h]:nR(h,f);for(const x of p){const b=fm(u,d,1.1);pm(b,x),d++}}if(n){const h=u.node().getBBox(),f=2;return l.attr("x",h.x-f).attr("y",h.y-f).attr("width",h.width+2*f).attr("height",h.height+2*f),o.node()}else return u.node()}N(iR,"createFormattedText");function pm(e,t){e.text(""),t.forEach((r,n)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?a.text(r.content):a.text(" "+r.content)})}N(pm,"updateTextContentAndStyles");async function oR(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(a,o,l)=>(r.push((async()=>{const u=`${o}:${l}`;return await qne(u)?await Dg(u,void 0,{class:"label-icon"}):`<i class='${Fs(a,t).replace(":"," ")}'></i>`})()),a));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}N(oR,"replaceIconSubstring");var cl=N(async(e,t="",{style:r="",isTitle:n=!1,classes:a="",useHtmlLabels:o=!0,isNode:l=!0,width:u=200,addSvgBackground:d=!1}={},h)=>{if(ze.debug("XYZ createText",t,r,n,a,o,l,"addSvgBackground: ",d),o){const f=eR(t,h),p=await oR(pc(f),h),x=t.replace(/\\\\/g,"\\"),b={isNode:l,label:Iu(t)?x:p,labelStyle:r.replace("fill:","color:")};return await aR(e,b,u,a,d,h)}else{const f=t.replace(/<br\s*\/?>/g,"<br/>"),p=JM(f.replace("<br>","<br/>"),h),x=iR(u,e,p,t?d:!1);if(l){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");jr(x).attr("style",b)}else{const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");jr(x).select("rect").attr("style",b.replace(/background:/g,"fill:"));const y=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");jr(x).select("text").attr("style",y)}return x}},"createText");function my(e,t,r){if(e&&e.length){const[n,a]=t,o=Math.PI/180*r,l=Math.cos(o),u=Math.sin(o);for(const d of e){const[h,f]=d;d[0]=(h-n)*l-(f-a)*u+n,d[1]=(h-n)*u+(f-a)*l+a}}}function Yne(e,t){return e[0]===t[0]&&e[1]===t[1]}function Wne(e,t,r,n=1){const a=r,o=Math.max(t,.1),l=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(a)for(const h of l)my(h,u,a);const d=(function(h,f,p){const x=[];for(const T of h){const A=[...T];Yne(A[0],A[A.length-1])||A.push([A[0][0],A[0][1]]),A.length>2&&x.push(A)}const b=[];f=Math.max(f,.1);const y=[];for(const T of x)for(let A=0;A<T.length-1;A++){const I=T[A],O=T[A+1];if(I[1]!==O[1]){const B=Math.min(I[1],O[1]);y.push({ymin:B,ymax:Math.max(I[1],O[1]),x:B===I[1]?I[0]:O[0],islope:(O[0]-I[0])/(O[1]-I[1])})}}if(y.sort(((T,A)=>T.ymin<A.ymin?-1:T.ymin>A.ymin?1:T.x<A.x?-1:T.x>A.x?1:T.ymax===A.ymax?0:(T.ymax-A.ymax)/Math.abs(T.ymax-A.ymax))),!y.length)return b;let k=[],S=y[0].ymin,_=0;for(;k.length||y.length;){if(y.length){let T=-1;for(let A=0;A<y.length&&!(y[A].ymin>S);A++)T=A;y.splice(0,T+1).forEach((A=>{k.push({s:S,edge:A})}))}if(k=k.filter((T=>!(T.edge.ymax<=S))),k.sort(((T,A)=>T.edge.x===A.edge.x?0:(T.edge.x-A.edge.x)/Math.abs(T.edge.x-A.edge.x))),(p!==1||_%f==0)&&k.length>1)for(let T=0;T<k.length;T+=2){const A=T+1;if(A>=k.length)break;const I=k[T].edge,O=k[A].edge;b.push([[Math.round(I.x),S],[Math.round(O.x),S]])}S+=p,k.forEach((T=>{T.edge.x=T.edge.x+p*T.edge.islope})),_++}return b})(l,o,n);if(a){for(const h of l)my(h,u,-a);(function(h,f,p){const x=[];h.forEach((b=>x.push(...b))),my(x,f,p)})(d,u,-a)}return d}function Pg(e,t){var r;const n=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let o=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(o=a),Wne(e,a,n,o||1)}class P2{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=Pg(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const a of t)n.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return n}}function mm(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class Vne extends P2{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const a=Pg(t,Object.assign({},r,{hachureGap:n})),o=Math.PI/180*r.hachureAngle,l=[],u=.5*n*Math.cos(o),d=.5*n*Math.sin(o);for(const[h,f]of a)mm([h,f])&&l.push([[h[0]-u,h[1]+d],[...f]],[[h[0]+u,h[1]-d],[...f]]);return{type:"fillSketch",ops:this.renderLines(l,r)}}}class Kne extends P2{fillPolygons(t,r){const n=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),o=this._fillPolygons(t,a);return n.ops=n.ops.concat(o.ops),n}}class Xne{constructor(t){this.helper=t}fillPolygons(t,r){const n=Pg(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let o=r.fillWeight;o<0&&(o=r.strokeWidth/2);const l=a/4;for(const u of t){const d=mm(u),h=d/a,f=Math.ceil(h)-1,p=d-f*a,x=(u[0][0]+u[1][0])/2-a/4,b=Math.min(u[0][1],u[1][1]);for(let y=0;y<f;y++){const k=b+p+y*a,S=x-l+2*Math.random()*l,_=k-l+2*Math.random()*l,T=this.helper.ellipse(S,_,o,o,r);n.push(...T.ops)}}return{type:"fillSketch",ops:n}}}class Qne{constructor(t){this.helper=t}fillPolygons(t,r){const n=Pg(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,o=[];return t.forEach((l=>{const u=mm(l),d=Math.floor(u/(n+a)),h=(u+a-d*(n+a))/2;let f=l[0],p=l[1];f[0]>p[0]&&(f=l[1],p=l[0]);const x=Math.atan((p[1]-f[1])/(p[0]-f[0]));for(let b=0;b<d;b++){const y=b*(n+a),k=y+n,S=[f[0]+y*Math.cos(x)+h*Math.cos(x),f[1]+y*Math.sin(x)+h*Math.sin(x)],_=[f[0]+k*Math.cos(x)+h*Math.cos(x),f[1]+k*Math.sin(x)+h*Math.sin(x)];o.push(...this.helper.doubleLineOps(S[0],S[1],_[0],_[1],r))}})),o}}class Zne{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?n:r.zigzagOffset,o=Pg(t,r=Object.assign({},r,{hachureGap:n+a}));return{type:"fillSketch",ops:this.zigzagLines(o,a,r)}}zigzagLines(t,r,n){const a=[];return t.forEach((o=>{const l=mm(o),u=Math.round(l/(2*r));let d=o[0],h=o[1];d[0]>h[0]&&(d=o[1],h=o[0]);const f=Math.atan((h[1]-d[1])/(h[0]-d[0]));for(let p=0;p<u;p++){const x=2*p*r,b=2*(p+1)*r,y=Math.sqrt(2*Math.pow(r,2)),k=[d[0]+x*Math.cos(f),d[1]+x*Math.sin(f)],S=[d[0]+b*Math.cos(f),d[1]+b*Math.sin(f)],_=[k[0]+y*Math.cos(f+Math.PI/4),k[1]+y*Math.sin(f+Math.PI/4)];a.push(...this.helper.doubleLineOps(k[0],k[1],_[0],_[1],n),...this.helper.doubleLineOps(_[0],_[1],S[0],S[1],n))}})),a}}const Va={};class Jne{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const eae=0,xy=1,bC=2,g0={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function by(e,t){return e.type===t}function B2(e){const t=[],r=(function(l){const u=new Array;for(;l!=="";)if(l.match(/^([ \t\r\n,]+)/))l=l.substr(RegExp.$1.length);else if(l.match(/^([aAcChHlLmMqQsStTvVzZ])/))u[u.length]={type:eae,text:RegExp.$1},l=l.substr(RegExp.$1.length);else{if(!l.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];u[u.length]={type:xy,text:`${parseFloat(RegExp.$1)}`},l=l.substr(RegExp.$1.length)}return u[u.length]={type:bC,text:""},u})(e);let n="BOD",a=0,o=r[a];for(;!by(o,bC);){let l=0;const u=[];if(n==="BOD"){if(o.text!=="M"&&o.text!=="m")return B2("M0,0"+e);a++,l=g0[o.text],n=o.text}else by(o,xy)?l=g0[n]:(a++,l=g0[o.text],n=o.text);if(!(a+l<r.length))throw new Error("Path data ended short");for(let d=a;d<a+l;d++){const h=r[d];if(!by(h,xy))throw new Error("Param not a number: "+n+","+h.text);u[u.length]=+h.text}if(typeof g0[n]!="number")throw new Error("Bad segment: "+n);{const d={key:n,data:u};t.push(d),a+=l,o=r[a],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function lR(e){let t=0,r=0,n=0,a=0;const o=[];for(const{key:l,data:u}of e)switch(l){case"M":o.push({key:"M",data:[...u]}),[t,r]=u,[n,a]=u;break;case"m":t+=u[0],r+=u[1],o.push({key:"M",data:[t,r]}),n=t,a=r;break;case"L":o.push({key:"L",data:[...u]}),[t,r]=u;break;case"l":t+=u[0],r+=u[1],o.push({key:"L",data:[t,r]});break;case"C":o.push({key:"C",data:[...u]}),t=u[4],r=u[5];break;case"c":{const d=u.map(((h,f)=>f%2?h+r:h+t));o.push({key:"C",data:d}),t=d[4],r=d[5];break}case"Q":o.push({key:"Q",data:[...u]}),t=u[2],r=u[3];break;case"q":{const d=u.map(((h,f)=>f%2?h+r:h+t));o.push({key:"Q",data:d}),t=d[2],r=d[3];break}case"A":o.push({key:"A",data:[...u]}),t=u[5],r=u[6];break;case"a":t+=u[5],r+=u[6],o.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],t,r]});break;case"H":o.push({key:"H",data:[...u]}),t=u[0];break;case"h":t+=u[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...u]}),r=u[0];break;case"v":r+=u[0],o.push({key:"V",data:[r]});break;case"S":o.push({key:"S",data:[...u]}),t=u[2],r=u[3];break;case"s":{const d=u.map(((h,f)=>f%2?h+r:h+t));o.push({key:"S",data:d}),t=d[2],r=d[3];break}case"T":o.push({key:"T",data:[...u]}),t=u[0],r=u[1];break;case"t":t+=u[0],r+=u[1],o.push({key:"T",data:[t,r]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=n,r=a}return o}function cR(e){const t=[];let r="",n=0,a=0,o=0,l=0,u=0,d=0;for(const{key:h,data:f}of e){switch(h){case"M":t.push({key:"M",data:[...f]}),[n,a]=f,[o,l]=f;break;case"C":t.push({key:"C",data:[...f]}),n=f[4],a=f[5],u=f[2],d=f[3];break;case"L":t.push({key:"L",data:[...f]}),[n,a]=f;break;case"H":n=f[0],t.push({key:"L",data:[n,a]});break;case"V":a=f[0],t.push({key:"L",data:[n,a]});break;case"S":{let p=0,x=0;r==="C"||r==="S"?(p=n+(n-u),x=a+(a-d)):(p=n,x=a),t.push({key:"C",data:[p,x,...f]}),u=f[0],d=f[1],n=f[2],a=f[3];break}case"T":{const[p,x]=f;let b=0,y=0;r==="Q"||r==="T"?(b=n+(n-u),y=a+(a-d)):(b=n,y=a);const k=n+2*(b-n)/3,S=a+2*(y-a)/3,_=p+2*(b-p)/3,T=x+2*(y-x)/3;t.push({key:"C",data:[k,S,_,T,p,x]}),u=b,d=y,n=p,a=x;break}case"Q":{const[p,x,b,y]=f,k=n+2*(p-n)/3,S=a+2*(x-a)/3,_=b+2*(p-b)/3,T=y+2*(x-y)/3;t.push({key:"C",data:[k,S,_,T,b,y]}),u=p,d=x,n=b,a=y;break}case"A":{const p=Math.abs(f[0]),x=Math.abs(f[1]),b=f[2],y=f[3],k=f[4],S=f[5],_=f[6];p===0||x===0?(t.push({key:"C",data:[n,a,S,_,S,_]}),n=S,a=_):(n!==S||a!==_)&&(uR(n,a,S,_,p,x,b,y,k).forEach((function(T){t.push({key:"C",data:T})})),n=S,a=_);break}case"Z":t.push({key:"Z",data:[]}),n=o,a=l}r=h}return t}function xh(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function uR(e,t,r,n,a,o,l,u,d,h){const f=(p=l,Math.PI*p/180);var p;let x=[],b=0,y=0,k=0,S=0;if(h)[b,y,k,S]=h;else{[e,t]=xh(e,t,-f),[r,n]=xh(r,n,-f);const $=(e-r)/2,L=(t-n)/2;let q=$*$/(a*a)+L*L/(o*o);q>1&&(q=Math.sqrt(q),a*=q,o*=q);const D=a*a,X=o*o,K=D*X-D*L*L-X*$*$,xe=D*L*L+X*$*$,U=(u===d?-1:1)*Math.sqrt(Math.abs(K/xe));k=U*a*L/o+(e+r)/2,S=U*-o*$/a+(t+n)/2,b=Math.asin(parseFloat(((t-S)/o).toFixed(9))),y=Math.asin(parseFloat(((n-S)/o).toFixed(9))),e<k&&(b=Math.PI-b),r<k&&(y=Math.PI-y),b<0&&(b=2*Math.PI+b),y<0&&(y=2*Math.PI+y),d&&b>y&&(b-=2*Math.PI),!d&&y>b&&(y-=2*Math.PI)}let _=y-b;if(Math.abs(_)>120*Math.PI/180){const $=y,L=r,q=n;y=d&&y>b?b+120*Math.PI/180*1:b+120*Math.PI/180*-1,x=uR(r=k+a*Math.cos(y),n=S+o*Math.sin(y),L,q,a,o,l,0,d,[y,$,k,S])}_=y-b;const T=Math.cos(b),A=Math.sin(b),I=Math.cos(y),O=Math.sin(y),B=Math.tan(_/4),F=4/3*a*B,ae=4/3*o*B,Z=[e,t],z=[e+F*A,t-ae*T],ee=[r+F*O,n-ae*I],W=[r,n];if(z[0]=2*Z[0]-z[0],z[1]=2*Z[1]-z[1],h)return[z,ee,W].concat(x);{x=[z,ee,W].concat(x);const $=[];for(let L=0;L<x.length;L+=3){const q=xh(x[L][0],x[L][1],f),D=xh(x[L+1][0],x[L+1][1],f),X=xh(x[L+2][0],x[L+2][1],f);$.push([q[0],q[1],D[0],D[1],X[0],X[1]])}return $}}const tae={randOffset:function(e,t){return qt(e,t)},randOffsetWithRange:function(e,t,r){return Cp(e,t,r)},ellipse:function(e,t,r,n,a){const o=hR(r,n,a);return W1(e,t,a,o).opset},doubleLineOps:function(e,t,r,n,a){return nl(e,t,r,n,a,!0)}};function dR(e,t,r,n,a){return{type:"path",ops:nl(e,t,r,n,a)}}function I0(e,t,r){const n=(e||[]).length;if(n>2){const a=[];for(let o=0;o<n-1;o++)a.push(...nl(e[o][0],e[o][1],e[o+1][0],e[o+1][1],r));return t&&a.push(...nl(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return n===2?dR(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function rae(e,t,r,n,a){return(function(o,l){return I0(o,!0,l)})([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],a)}function yC(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=f0(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:f0(r[0],1.5*(1+.22*t.roughness),wC(t));for(let o=1;o<r.length;o++){const l=r[o];if(l.length){const u=f0(l,1*(1+.2*t.roughness),t),d=t.disableMultiStroke?[]:f0(l,1.5*(1+.22*t.roughness),wC(t));for(const h of u)h.op!=="move"&&n.push(h);for(const h of d)h.op!=="move"&&a.push(h)}}return{type:"path",ops:n.concat(a)}}return{type:"path",ops:[]}}function hR(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),o=2*Math.PI/a;let l=Math.abs(e/2),u=Math.abs(t/2);const d=1-r.curveFitting;return l+=qt(l*d,r),u+=qt(u*d,r),{increment:o,rx:l,ry:u}}function W1(e,t,r,n){const[a,o]=EC(n.increment,e,t,n.rx,n.ry,1,n.increment*Cp(.1,Cp(.4,1,r),r),r);let l=Np(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[u]=EC(n.increment,e,t,n.rx,n.ry,1.5,0,r),d=Np(u,null,r);l=l.concat(d)}return{estimatedPoints:o,opset:{type:"path",ops:l}}}function vC(e,t,r,n,a,o,l,u,d){const h=e,f=t;let p=Math.abs(r/2),x=Math.abs(n/2);p+=qt(.01*p,d),x+=qt(.01*x,d);let b=a,y=o;for(;b<0;)b+=2*Math.PI,y+=2*Math.PI;y-b>2*Math.PI&&(b=0,y=2*Math.PI);const k=2*Math.PI/d.curveStepCount,S=Math.min(k/2,(y-b)/2),_=_C(S,h,f,p,x,b,y,1,d);if(!d.disableMultiStroke){const T=_C(S,h,f,p,x,b,y,1.5,d);_.push(...T)}return l&&(u?_.push(...nl(h,f,h+p*Math.cos(b),f+x*Math.sin(b),d),...nl(h,f,h+p*Math.cos(y),f+x*Math.sin(y),d)):_.push({op:"lineTo",data:[h,f]},{op:"lineTo",data:[h+p*Math.cos(b),f+x*Math.sin(b)]})),{type:"path",ops:_}}function kC(e,t){const r=cR(lR(B2(e))),n=[];let a=[0,0],o=[0,0];for(const{key:l,data:u}of r)switch(l){case"M":o=[u[0],u[1]],a=[u[0],u[1]];break;case"L":n.push(...nl(o[0],o[1],u[0],u[1],t)),o=[u[0],u[1]];break;case"C":{const[d,h,f,p,x,b]=u;n.push(...nae(d,h,f,p,x,b,o,t)),o=[x,b];break}case"Z":n.push(...nl(o[0],o[1],a[0],a[1],t)),o=[a[0],a[1]]}return{type:"path",ops:n}}function yy(e,t){const r=[];for(const n of e)if(n.length){const a=t.maxRandomnessOffset||0,o=n.length;if(o>2){r.push({op:"move",data:[n[0][0]+qt(a,t),n[0][1]+qt(a,t)]});for(let l=1;l<o;l++)r.push({op:"lineTo",data:[n[l][0]+qt(a,t),n[l][1]+qt(a,t)]})}}return{type:"fillPath",ops:r}}function ou(e,t){return(function(r,n){let a=r.fillStyle||"hachure";if(!Va[a])switch(a){case"zigzag":Va[a]||(Va[a]=new Vne(n));break;case"cross-hatch":Va[a]||(Va[a]=new Kne(n));break;case"dots":Va[a]||(Va[a]=new Xne(n));break;case"dashed":Va[a]||(Va[a]=new Qne(n));break;case"zigzag-line":Va[a]||(Va[a]=new Zne(n));break;default:a="hachure",Va[a]||(Va[a]=new P2(n))}return Va[a]})(t,tae).fillPolygons(e,t)}function wC(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function gR(e){return e.randomizer||(e.randomizer=new Jne(e.seed||0)),e.randomizer.next()}function Cp(e,t,r,n=1){return r.roughness*n*(gR(r)*(t-e)+e)}function qt(e,t,r=1){return Cp(-e,e,t,r)}function nl(e,t,r,n,a,o=!1){const l=o?a.disableMultiStrokeFill:a.disableMultiStroke,u=V1(e,t,r,n,a,!0,!1);if(l)return u;const d=V1(e,t,r,n,a,!0,!0);return u.concat(d)}function V1(e,t,r,n,a,o,l){const u=Math.pow(e-r,2)+Math.pow(t-n,2),d=Math.sqrt(u);let h=1;h=d<200?1:d>500?.4:-.0016668*d+1.233334;let f=a.maxRandomnessOffset||0;f*f*100>u&&(f=d/10);const p=f/2,x=.2+.2*gR(a);let b=a.bowing*a.maxRandomnessOffset*(n-t)/200,y=a.bowing*a.maxRandomnessOffset*(e-r)/200;b=qt(b,a,h),y=qt(y,a,h);const k=[],S=()=>qt(p,a,h),_=()=>qt(f,a,h),T=a.preserveVertices;return l?k.push({op:"move",data:[e+(T?0:S()),t+(T?0:S())]}):k.push({op:"move",data:[e+(T?0:qt(f,a,h)),t+(T?0:qt(f,a,h))]}),l?k.push({op:"bcurveTo",data:[b+e+(r-e)*x+S(),y+t+(n-t)*x+S(),b+e+2*(r-e)*x+S(),y+t+2*(n-t)*x+S(),r+(T?0:S()),n+(T?0:S())]}):k.push({op:"bcurveTo",data:[b+e+(r-e)*x+_(),y+t+(n-t)*x+_(),b+e+2*(r-e)*x+_(),y+t+2*(n-t)*x+_(),r+(T?0:_()),n+(T?0:_())]}),k}function f0(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+qt(t,r),e[0][1]+qt(t,r)]),n.push([e[0][0]+qt(t,r),e[0][1]+qt(t,r)]);for(let a=1;a<e.length;a++)n.push([e[a][0]+qt(t,r),e[a][1]+qt(t,r)]),a===e.length-1&&n.push([e[a][0]+qt(t,r),e[a][1]+qt(t,r)]);return Np(n,null,r)}function Np(e,t,r){const n=e.length,a=[];if(n>3){const o=[],l=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<n;u++){const d=e[u];o[0]=[d[0],d[1]],o[1]=[d[0]+(l*e[u+1][0]-l*e[u-1][0])/6,d[1]+(l*e[u+1][1]-l*e[u-1][1])/6],o[2]=[e[u+1][0]+(l*e[u][0]-l*e[u+2][0])/6,e[u+1][1]+(l*e[u][1]-l*e[u+2][1])/6],o[3]=[e[u+1][0],e[u+1][1]],a.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else n===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&a.push(...V1(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function EC(e,t,r,n,a,o,l,u){const d=[],h=[];if(u.roughness===0){e/=4,h.push([t+n*Math.cos(-e),r+a*Math.sin(-e)]);for(let f=0;f<=2*Math.PI;f+=e){const p=[t+n*Math.cos(f),r+a*Math.sin(f)];d.push(p),h.push(p)}h.push([t+n*Math.cos(0),r+a*Math.sin(0)]),h.push([t+n*Math.cos(e),r+a*Math.sin(e)])}else{const f=qt(.5,u)-Math.PI/2;h.push([qt(o,u)+t+.9*n*Math.cos(f-e),qt(o,u)+r+.9*a*Math.sin(f-e)]);const p=2*Math.PI+f-.01;for(let x=f;x<p;x+=e){const b=[qt(o,u)+t+n*Math.cos(x),qt(o,u)+r+a*Math.sin(x)];d.push(b),h.push(b)}h.push([qt(o,u)+t+n*Math.cos(f+2*Math.PI+.5*l),qt(o,u)+r+a*Math.sin(f+2*Math.PI+.5*l)]),h.push([qt(o,u)+t+.98*n*Math.cos(f+l),qt(o,u)+r+.98*a*Math.sin(f+l)]),h.push([qt(o,u)+t+.9*n*Math.cos(f+.5*l),qt(o,u)+r+.9*a*Math.sin(f+.5*l)])}return[h,d]}function _C(e,t,r,n,a,o,l,u,d){const h=o+qt(.1,d),f=[];f.push([qt(u,d)+t+.9*n*Math.cos(h-e),qt(u,d)+r+.9*a*Math.sin(h-e)]);for(let p=h;p<=l;p+=e)f.push([qt(u,d)+t+n*Math.cos(p),qt(u,d)+r+a*Math.sin(p)]);return f.push([t+n*Math.cos(l),r+a*Math.sin(l)]),f.push([t+n*Math.cos(l),r+a*Math.sin(l)]),Np(f,null,d)}function nae(e,t,r,n,a,o,l,u){const d=[],h=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3];let f=[0,0];const p=u.disableMultiStroke?1:2,x=u.preserveVertices;for(let b=0;b<p;b++)b===0?d.push({op:"move",data:[l[0],l[1]]}):d.push({op:"move",data:[l[0]+(x?0:qt(h[0],u)),l[1]+(x?0:qt(h[0],u))]}),f=x?[a,o]:[a+qt(h[b],u),o+qt(h[b],u)],d.push({op:"bcurveTo",data:[e+qt(h[b],u),t+qt(h[b],u),r+qt(h[b],u),n+qt(h[b],u),f[0],f[1]]});return d}function bh(e){return[...e]}function SC(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(bh(e[0]),bh(e[1]),bh(e[2]),bh(e[2]));else{const a=[];a.push(e[0],e[0]);for(let u=1;u<e.length;u++)a.push(e[u]),u===e.length-1&&a.push(e[u]);const o=[],l=1-t;n.push(bh(a[0]));for(let u=1;u+2<a.length;u++){const d=a[u];o[0]=[d[0],d[1]],o[1]=[d[0]+(l*a[u+1][0]-l*a[u-1][0])/6,d[1]+(l*a[u+1][1]-l*a[u-1][1])/6],o[2]=[a[u+1][0]+(l*a[u][0]-l*a[u+2][0])/6,a[u+1][1]+(l*a[u][1]-l*a[u+2][1])/6],o[3]=[a[u+1][0],a[u+1][1]],n.push(o[1],o[2],o[3])}}return n}function D0(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function aae(e,t,r){const n=D0(t,r);if(n===0)return D0(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return a=Math.max(0,Math.min(1,a)),D0(e,Pl(t,r,a))}function Pl(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function K1(e,t,r,n){const a=n||[];if((function(u,d){const h=u[d+0],f=u[d+1],p=u[d+2],x=u[d+3];let b=3*f[0]-2*h[0]-x[0];b*=b;let y=3*f[1]-2*h[1]-x[1];y*=y;let k=3*p[0]-2*x[0]-h[0];k*=k;let S=3*p[1]-2*x[1]-h[1];return S*=S,b<k&&(b=k),y<S&&(y=S),b+y})(e,t)<r){const u=e[t+0];a.length?(o=a[a.length-1],l=u,Math.sqrt(D0(o,l))>1&&a.push(u)):a.push(u),a.push(e[t+3])}else{const d=e[t+0],h=e[t+1],f=e[t+2],p=e[t+3],x=Pl(d,h,.5),b=Pl(h,f,.5),y=Pl(f,p,.5),k=Pl(x,b,.5),S=Pl(b,y,.5),_=Pl(k,S,.5);K1([d,x,k,_],0,r,a),K1([_,S,y,p],0,r,a)}var o,l;return a}function sae(e,t){return Ap(e,0,e.length,t)}function Ap(e,t,r,n,a){const o=a||[],l=e[t],u=e[r-1];let d=0,h=1;for(let f=t+1;f<r-1;++f){const p=aae(e[f],l,u);p>d&&(d=p,h=f)}return Math.sqrt(d)>n?(Ap(e,t,h+1,n,o),Ap(e,h,r,n,o)):(o.length||o.push(l),o.push(u)),o}function vy(e,t=.15,r){const n=[],a=(e.length-1)/3;for(let o=0;o<a;o++)K1(e,3*o,t,n);return r&&r>0?Ap(n,0,n.length,r):n}const hs="none";class Lp{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,a,o){const l=this._o(o);return this._d("line",[dR(t,r,n,a,l)],l)}rectangle(t,r,n,a,o){const l=this._o(o),u=[],d=rae(t,r,n,a,l);if(l.fill){const h=[[t,r],[t+n,r],[t+n,r+a],[t,r+a]];l.fillStyle==="solid"?u.push(yy([h],l)):u.push(ou([h],l))}return l.stroke!==hs&&u.push(d),this._d("rectangle",u,l)}ellipse(t,r,n,a,o){const l=this._o(o),u=[],d=hR(n,a,l),h=W1(t,r,l,d);if(l.fill)if(l.fillStyle==="solid"){const f=W1(t,r,l,d).opset;f.type="fillPath",u.push(f)}else u.push(ou([h.estimatedPoints],l));return l.stroke!==hs&&u.push(h.opset),this._d("ellipse",u,l)}circle(t,r,n,a){const o=this.ellipse(t,r,n,n,a);return o.shape="circle",o}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[I0(t,!1,n)],n)}arc(t,r,n,a,o,l,u=!1,d){const h=this._o(d),f=[],p=vC(t,r,n,a,o,l,u,!0,h);if(u&&h.fill)if(h.fillStyle==="solid"){const x=Object.assign({},h);x.disableMultiStroke=!0;const b=vC(t,r,n,a,o,l,!0,!1,x);b.type="fillPath",f.push(b)}else f.push((function(x,b,y,k,S,_,T){const A=x,I=b;let O=Math.abs(y/2),B=Math.abs(k/2);O+=qt(.01*O,T),B+=qt(.01*B,T);let F=S,ae=_;for(;F<0;)F+=2*Math.PI,ae+=2*Math.PI;ae-F>2*Math.PI&&(F=0,ae=2*Math.PI);const Z=(ae-F)/T.curveStepCount,z=[];for(let ee=F;ee<=ae;ee+=Z)z.push([A+O*Math.cos(ee),I+B*Math.sin(ee)]);return z.push([A+O*Math.cos(ae),I+B*Math.sin(ae)]),z.push([A,I]),ou([z],T)})(t,r,n,a,o,l,h));return h.stroke!==hs&&f.push(p),this._d("arc",f,h)}curve(t,r){const n=this._o(r),a=[],o=yC(t,n);if(n.fill&&n.fill!==hs)if(n.fillStyle==="solid"){const l=yC(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(l.ops)})}else{const l=[],u=t;if(u.length){const d=typeof u[0][0]=="number"?[u]:u;for(const h of d)h.length<3?l.push(...h):h.length===3?l.push(...vy(SC([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):l.push(...vy(SC(h),10,(1+n.roughness)/2))}l.length&&a.push(ou([l],n))}return n.stroke!==hs&&a.push(o),this._d("curve",a,n)}polygon(t,r){const n=this._o(r),a=[],o=I0(t,!0,n);return n.fill&&(n.fillStyle==="solid"?a.push(yy([t],n)):a.push(ou([t],n))),n.stroke!==hs&&a.push(o),this._d("polygon",a,n)}path(t,r){const n=this._o(r),a=[];if(!t)return this._d("path",a,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=n.fill&&n.fill!=="transparent"&&n.fill!==hs,l=n.stroke!==hs,u=!!(n.simplification&&n.simplification<1),d=(function(f,p,x){const b=cR(lR(B2(f))),y=[];let k=[],S=[0,0],_=[];const T=()=>{_.length>=4&&k.push(...vy(_,p)),_=[]},A=()=>{T(),k.length&&(y.push(k),k=[])};for(const{key:O,data:B}of b)switch(O){case"M":A(),S=[B[0],B[1]],k.push(S);break;case"L":T(),k.push([B[0],B[1]]);break;case"C":if(!_.length){const F=k.length?k[k.length-1]:S;_.push([F[0],F[1]])}_.push([B[0],B[1]]),_.push([B[2],B[3]]),_.push([B[4],B[5]]);break;case"Z":T(),k.push([S[0],S[1]])}if(A(),!x)return y;const I=[];for(const O of y){const B=sae(O,x);B.length&&I.push(B)}return I})(t,1,u?4-4*(n.simplification||1):(1+n.roughness)/2),h=kC(t,n);if(o)if(n.fillStyle==="solid")if(d.length===1){const f=kC(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(f.ops)})}else a.push(yy(d,n));else a.push(ou(d,n));return l&&(u?d.forEach((f=>{a.push(I0(f,!1,n))})):a.push(h)),this._d("path",a,n)}opsToPath(t,r){let n="";for(const a of t.ops){const o=typeof r=="number"&&r>=0?a.data.map((l=>+l.toFixed(r))):a.data;switch(a.op){case"move":n+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":n+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":n+=`L${o[0]} ${o[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,a=[];for(const o of r){let l=null;switch(o.type){case"path":l={d:this.opsToPath(o),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:hs};break;case"fillPath":l={d:this.opsToPath(o),stroke:hs,strokeWidth:0,fill:n.fill||hs};break;case"fillSketch":l=this.fillSketch(o,n)}l&&a.push(l)}return a}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||hs,strokeWidth:n,fill:hs}}_mergedShape(t){return t.filter(((r,n)=>n===0||r.op!=="move"))}}class iae{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Lp(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const l of r)switch(l.type){case"path":a.save(),a.strokeStyle=n.stroke==="none"?"transparent":n.stroke,a.lineWidth=n.strokeWidth,n.strokeLineDash&&a.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(a.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(a,l,o),a.restore();break;case"fillPath":{a.save(),a.fillStyle=n.fill||"";const u=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,l,o,u),a.restore();break}case"fillSketch":this.fillSketch(a,l,n)}}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=a,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,a="nonzero"){t.beginPath();for(const o of r.ops){const l=typeof n=="number"&&n>=0?o.data.map((u=>+u.toFixed(n))):o.data;switch(o.op){case"move":t.moveTo(l[0],l[1]);break;case"bcurveTo":t.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"lineTo":t.lineTo(l[0],l[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,a,o){const l=this.gen.line(t,r,n,a,o);return this.draw(l),l}rectangle(t,r,n,a,o){const l=this.gen.rectangle(t,r,n,a,o);return this.draw(l),l}ellipse(t,r,n,a,o){const l=this.gen.ellipse(t,r,n,a,o);return this.draw(l),l}circle(t,r,n,a){const o=this.gen.circle(t,r,n,a);return this.draw(o),o}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,a,o,l,u=!1,d){const h=this.gen.arc(t,r,n,a,o,l,u,d);return this.draw(h),h}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const p0="http://www.w3.org/2000/svg";class oae{constructor(t,r){this.svg=t,this.gen=new Lp(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,o=a.createElementNS(p0,"g"),l=t.options.fixedDecimalPlaceDigits;for(const u of r){let d=null;switch(u.type){case"path":d=a.createElementNS(p0,"path"),d.setAttribute("d",this.opsToPath(u,l)),d.setAttribute("stroke",n.stroke),d.setAttribute("stroke-width",n.strokeWidth+""),d.setAttribute("fill","none"),n.strokeLineDash&&d.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&d.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":d=a.createElementNS(p0,"path"),d.setAttribute("d",this.opsToPath(u,l)),d.setAttribute("stroke","none"),d.setAttribute("stroke-width","0"),d.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||d.setAttribute("fill-rule","evenodd");break;case"fillSketch":d=this.fillSketch(a,u,n)}d&&o.appendChild(d)}return o}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2);const o=t.createElementNS(p0,"path");return o.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),o.setAttribute("stroke",n.fill||""),o.setAttribute("stroke-width",a+""),o.setAttribute("fill","none"),n.fillLineDash&&o.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,a,o){const l=this.gen.line(t,r,n,a,o);return this.draw(l)}rectangle(t,r,n,a,o){const l=this.gen.rectangle(t,r,n,a,o);return this.draw(l)}ellipse(t,r,n,a,o){const l=this.gen.ellipse(t,r,n,a,o);return this.draw(l)}circle(t,r,n,a){const o=this.gen.circle(t,r,n,a);return this.draw(o)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,a,o,l,u=!1,d){const h=this.gen.arc(t,r,n,a,o,l,u,d);return this.draw(h)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var vt={canvas:(e,t)=>new iae(e,t),svg:(e,t)=>new oae(e,t),generator:e=>new Lp(e),newSeed:()=>Lp.newSeed()},Ft=N(async(e,t,r)=>{let n;const a=t.useHtmlLabels||Jn(Yr()?.htmlLabels);r?n=r:n="node default";const o=e.insert("g").attr("class",n).attr("id",t.domId||t.id),l=o.insert("g").attr("class","label").attr("style",_a(t.labelStyle));let u;t.label===void 0?u="":u=typeof t.label=="string"?t.label:t.label[0];const d=await cl(l,Fs(pc(u),Yr()),{useHtmlLabels:a,width:t.width||Yr().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let h=d.getBBox();const f=(t?.padding??0)/2;if(a){const p=d.children[0],x=jr(d),b=p.getElementsByTagName("img");if(b){const y=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(k=>new Promise(S=>{function _(){if(k.style.display="flex",k.style.flexDirection="column",y){const T=Yr().fontSize?Yr().fontSize:window.getComputedStyle(document.body).fontSize,A=5,[I=C4.fontSize]=dm(T),O=I*A+"px";k.style.minWidth=O,k.style.maxWidth=O}else k.style.width="100%";S(k)}N(_,"setupImage"),setTimeout(()=>{k.complete&&_()}),k.addEventListener("error",_),k.addEventListener("load",_)})))}h=p.getBoundingClientRect(),x.attr("width",h.width),x.attr("height",h.height)}return a?l.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):l.attr("transform","translate(0, "+-h.height/2+")"),t.centerLabel&&l.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:o,bbox:h,halfPadding:f,label:l}},"labelHelper"),ky=N(async(e,t,r)=>{const n=r.useHtmlLabels||Jn(Yr()?.flowchart?.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),o=await cl(a,Fs(pc(t),Yr()),{useHtmlLabels:n,width:r.width||Yr()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let l=o.getBBox();const u=r.padding/2;if(Jn(Yr()?.flowchart?.htmlLabels)){const d=o.children[0],h=jr(o);l=d.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}return n?a.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"):a.attr("transform","translate(0, "+-l.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:l,halfPadding:u,label:a}},"insertLabel"),Et=N((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),It=N((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function _r(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}N(_r,"createPathFromPoints");function al(e,t,r,n,a,o){const l=[],d=r-e,h=n-t,f=d/o,p=2*Math.PI/f,x=t+h/2;for(let b=0;b<=50;b++){const y=b/50,k=e+y*d,S=x+a*Math.sin(p*(k-e));l.push({x:k,y:S})}return l}N(al,"generateFullSineWavePoints");function ug(e,t,r,n,a,o){const l=[],u=a*Math.PI/180,f=(o*Math.PI/180-u)/(n-1);for(let p=0;p<n;p++){const x=u+p*f,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}N(ug,"generateCirclePoints");var lae=N((e,t)=>{var r=e.x,n=e.y,a=t.x-r,o=t.y-n,l=e.width/2,u=e.height/2,d,h;return Math.abs(o)*l>Math.abs(a)*u?(o<0&&(u=-u),d=o===0?0:u*a/o,h=u):(a<0&&(l=-l),d=l,h=a===0?0:l*o/a),{x:r+d,y:n+h}},"intersectRect"),ad=lae;function fR(e,t){t&&e.attr("style",t)}N(fR,"applyStyle");async function pR(e){const t=jr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=Yr();let a=e.label;e.label&&Iu(e.label)&&(a=await Gv(e.label.replace(ed.lineBreakRegex,`
`),n));const l='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+a+"</span>";return r.html(Fs(l,n)),fR(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}N(pR,"addHtmlLabel");var cae=N(async(e,t,r,n)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),Jn(Yr().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),ze.info("vertexText"+a);const o={isNode:n,label:pc(a).replace(/fa[blrs]?:fa-[\w-]+/g,u=>`<i class='${u.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await pR(o)}else{const o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttribute("style",t.replace("color:","fill:"));let l=[];typeof a=="string"?l=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?l=a:l=[];for(const u of l){const d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),r?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=u.trim(),o.appendChild(d)}return o}},"createLabel"),Gl=cae,ul=N((e,t,r,n,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+n-a,"A",a,a,0,0,1,e+r-a,t+n,"H",e+a,"A",a,a,0,0,1,e,t+n-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),mR=N(async(e,t)=>{ze.info("Creating subgraph rect for ",t.id,t);const r=Yr(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:o,clusterBorder:l}=n,{labelStyles:u,nodeStyles:d,borderStyles:h,backgroundStyles:f}=wt(t),p=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),x=Jn(r.flowchart.htmlLabels),b=p.insert("g").attr("class","cluster-label "),y=await cl(b,t.label,{style:t.labelStyle,useHtmlLabels:x,isNode:!0});let k=y.getBBox();if(Jn(r.flowchart.htmlLabels)){const F=y.children[0],ae=jr(y);k=F.getBoundingClientRect(),ae.attr("width",k.width),ae.attr("height",k.height)}const S=t.width<=k.width+t.padding?k.width+t.padding:t.width;t.width<=k.width+t.padding?t.diff=(S-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,T=t.x-S/2,A=t.y-_/2;ze.trace("Data ",t,JSON.stringify(t));let I;if(t.look==="handDrawn"){const F=vt.svg(p),ae=kt(t,{roughness:.7,fill:o,stroke:l,fillWeight:3,seed:a}),Z=F.path(ul(T,A,S,_,0),ae);I=p.insert(()=>(ze.debug("Rough node insert CXC",Z),Z),":first-child"),I.select("path:nth-child(2)").attr("style",h.join(";")),I.select("path").attr("style",f.join(";").replace("fill","stroke"))}else I=p.insert("rect",":first-child"),I.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",T).attr("y",A).attr("width",S).attr("height",_);const{subGraphTitleTopMargin:O}=m2(r);if(b.attr("transform",`translate(${t.x-k.width/2}, ${t.y-t.height/2+O})`),u){const F=b.select("span");F&&F.attr("style",u)}const B=I.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=k.height-t.padding/2,t.intersect=function(F){return ad(t,F)},{cluster:p,labelBBox:k}},"rect"),uae=N((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),a=0*t.padding,o=a/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-o).attr("y",t.y-t.height/2-o).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const l=n.node().getBBox();return t.width=l.width,t.height=l.height,t.intersect=function(u){return ad(t,u)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),dae=N(async(e,t)=>{const r=Yr(),{themeVariables:n,handDrawnSeed:a}=r,{altBackground:o,compositeBackground:l,compositeTitleBackground:u,nodeBorder:d}=n,h=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),f=h.insert("g",":first-child"),p=h.insert("g").attr("class","cluster-label");let x=h.append("rect");const b=p.node().appendChild(await Gl(t.label,t.labelStyle,void 0,!0));let y=b.getBBox();if(Jn(r.flowchart.htmlLabels)){const Z=b.children[0],z=jr(b);y=Z.getBoundingClientRect(),z.attr("width",y.width),z.attr("height",y.height)}const k=0*t.padding,S=k/2,_=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+k;t.width<=y.width+t.padding?t.diff=(_-t.width)/2-t.padding:t.diff=-t.padding;const T=t.height+k,A=t.height+k-y.height-6,I=t.x-_/2,O=t.y-T/2;t.width=_;const B=t.y-t.height/2-S+y.height+2;let F;if(t.look==="handDrawn"){const Z=t.cssClasses.includes("statediagram-cluster-alt"),z=vt.svg(h),ee=t.rx||t.ry?z.path(ul(I,O,_,T,10),{roughness:.7,fill:u,fillStyle:"solid",stroke:d,seed:a}):z.rectangle(I,O,_,T,{seed:a});F=h.insert(()=>ee,":first-child");const W=z.rectangle(I,B,_,A,{fill:Z?o:l,fillStyle:Z?"hachure":"solid",stroke:d,seed:a});F=h.insert(()=>ee,":first-child"),x=h.insert(()=>W)}else F=f.insert("rect",":first-child"),F.attr("class","outer").attr("x",I).attr("y",O).attr("width",_).attr("height",T).attr("data-look",t.look),x.attr("class","inner").attr("x",I).attr("y",B).attr("width",_).attr("height",A);p.attr("transform",`translate(${t.x-y.width/2}, ${O+1-(Jn(r.flowchart.htmlLabels)?0:3)})`);const ae=F.node().getBBox();return t.height=ae.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(Z){return ad(t,Z)},{cluster:h,labelBBox:y}},"roundedWithTitle"),hae=N(async(e,t)=>{ze.info("Creating subgraph rect for ",t.id,t);const r=Yr(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:o,clusterBorder:l}=n,{labelStyles:u,nodeStyles:d,borderStyles:h,backgroundStyles:f}=wt(t),p=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),x=Jn(r.flowchart.htmlLabels),b=p.insert("g").attr("class","cluster-label "),y=await cl(b,t.label,{style:t.labelStyle,useHtmlLabels:x,isNode:!0,width:t.width});let k=y.getBBox();if(Jn(r.flowchart.htmlLabels)){const F=y.children[0],ae=jr(y);k=F.getBoundingClientRect(),ae.attr("width",k.width),ae.attr("height",k.height)}const S=t.width<=k.width+t.padding?k.width+t.padding:t.width;t.width<=k.width+t.padding?t.diff=(S-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,T=t.x-S/2,A=t.y-_/2;ze.trace("Data ",t,JSON.stringify(t));let I;if(t.look==="handDrawn"){const F=vt.svg(p),ae=kt(t,{roughness:.7,fill:o,stroke:l,fillWeight:4,seed:a}),Z=F.path(ul(T,A,S,_,t.rx),ae);I=p.insert(()=>(ze.debug("Rough node insert CXC",Z),Z),":first-child"),I.select("path:nth-child(2)").attr("style",h.join(";")),I.select("path").attr("style",f.join(";").replace("fill","stroke"))}else I=p.insert("rect",":first-child"),I.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",T).attr("y",A).attr("width",S).attr("height",_);const{subGraphTitleTopMargin:O}=m2(r);if(b.attr("transform",`translate(${t.x-k.width/2}, ${t.y-t.height/2+O})`),u){const F=b.select("span");F&&F.attr("style",u)}const B=I.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=k.height-t.padding/2,t.intersect=function(F){return ad(t,F)},{cluster:p,labelBBox:k}},"kanbanSection"),gae=N((e,t)=>{const r=Yr(),{themeVariables:n,handDrawnSeed:a}=r,{nodeBorder:o}=n,l=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),u=l.insert("g",":first-child"),d=0*t.padding,h=t.width+d;t.diff=-t.padding;const f=t.height+d,p=t.x-h/2,x=t.y-f/2;t.width=h;let b;if(t.look==="handDrawn"){const S=vt.svg(l).rectangle(p,x,h,f,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:o,seed:a});b=l.insert(()=>S,":first-child")}else b=u.insert("rect",":first-child"),b.attr("class","divider").attr("x",p).attr("y",x).attr("width",h).attr("height",f).attr("data-look",t.look);const y=b.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(k){return ad(t,k)},{cluster:l,labelBBox:{}}},"divider"),fae=mR,pae={rect:mR,squareRect:fae,roundedWithTitle:dae,noteGroup:uae,divider:gae,kanbanSection:hae},xR=new Map,mae=N(async(e,t)=>{const r=t.shape||"rect",n=await pae[r](e,t);return xR.set(t.id,n),n},"insertCluster"),Bce=N(()=>{xR=new Map},"clear");function bR(e,t){return e.intersect(t)}N(bR,"intersectNode");var xae=bR;function yR(e,t,r,n){var a=e.x,o=e.y,l=a-n.x,u=o-n.y,d=Math.sqrt(t*t*u*u+r*r*l*l),h=Math.abs(t*r*l/d);n.x<a&&(h=-h);var f=Math.abs(t*r*u/d);return n.y<o&&(f=-f),{x:a+h,y:o+f}}N(yR,"intersectEllipse");var vR=yR;function kR(e,t,r){return vR(e,t,t,r)}N(kR,"intersectCircle");var bae=kR;function wR(e,t,r,n){{const a=t.y-e.y,o=e.x-t.x,l=t.x*e.y-e.x*t.y,u=a*r.x+o*r.y+l,d=a*n.x+o*n.y+l,h=1e-6;if(u!==0&&d!==0&&X1(u,d))return;const f=n.y-r.y,p=r.x-n.x,x=n.x*r.y-r.x*n.y,b=f*e.x+p*e.y+x,y=f*t.x+p*t.y+x;if(Math.abs(b)<h&&Math.abs(y)<h&&X1(b,y))return;const k=a*p-f*o;if(k===0)return;const S=Math.abs(k/2);let _=o*x-p*l;const T=_<0?(_-S)/k:(_+S)/k;_=f*l-a*x;const A=_<0?(_-S)/k:(_+S)/k;return{x:T,y:A}}}N(wR,"intersectLine");function X1(e,t){return e*t>0}N(X1,"sameSign");var yae=wR;function ER(e,t,r){let n=e.x,a=e.y,o=[],l=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(f){l=Math.min(l,f.x),u=Math.min(u,f.y)}):(l=Math.min(l,t.x),u=Math.min(u,t.y));let d=n-e.width/2-l,h=a-e.height/2-u;for(let f=0;f<t.length;f++){let p=t[f],x=t[f<t.length-1?f+1:0],b=yae(e,r,{x:d+p.x,y:h+p.y},{x:d+x.x,y:h+x.y});b&&o.push(b)}return o.length?(o.length>1&&o.sort(function(f,p){let x=f.x-r.x,b=f.y-r.y,y=Math.sqrt(x*x+b*b),k=p.x-r.x,S=p.y-r.y,_=Math.sqrt(k*k+S*S);return y<_?-1:y===_?0:1}),o[0]):e}N(ER,"intersectPolygon");var vae=ER,ht={node:xae,circle:bae,ellipse:vR,polygon:vae,rect:ad};function _R(e,t){const{labelStyles:r}=wt(t);t.labelStyle=r;const n=It(t);let a=n;n||(a="anchor");const o=e.insert("g").attr("class",a).attr("id",t.domId||t.id),l=1,{cssStyles:u}=t,d=vt.svg(o),h=kt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const f=d.circle(0,0,l*2,h),p=o.insert(()=>f,":first-child");return p.attr("class","anchor").attr("style",_a(u)),Et(t,p),t.intersect=function(x){return ze.info("Circle intersect",t,l,x),ht.circle(t,l,x)},o}N(_R,"anchor");function Q1(e,t,r,n,a,o,l){const d=(e+r)/2,h=(t+n)/2,f=Math.atan2(n-t,r-e),p=(r-e)/2,x=(n-t)/2,b=p/a,y=x/o,k=Math.sqrt(b**2+y**2);if(k>1)throw new Error("The given radii are too small to create an arc between the points.");const S=Math.sqrt(1-k**2),_=d+S*o*Math.sin(f)*(l?-1:1),T=h-S*a*Math.cos(f)*(l?-1:1),A=Math.atan2((t-T)/o,(e-_)/a);let O=Math.atan2((n-T)/o,(r-_)/a)-A;l&&O<0&&(O+=2*Math.PI),!l&&O>0&&(O-=2*Math.PI);const B=[];for(let F=0;F<20;F++){const ae=F/19,Z=A+ae*O,z=_+a*Math.cos(Z),ee=T+o*Math.sin(Z);B.push({x:z,y:ee})}return B}N(Q1,"generateArcPoints");async function SR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.width+t.padding+20,u=o.height+t.padding,d=u/2,h=d/(2.5+u/50),{cssStyles:f}=t,p=[{x:l/2,y:-u/2},{x:-l/2,y:-u/2},...Q1(-l/2,-u/2,-l/2,u/2,h,d,!1),{x:l/2,y:u/2},...Q1(l/2,u/2,l/2,-u/2,h,d,!0)],x=vt.svg(a),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=_r(p),k=x.path(y,b),S=a.insert(()=>k,":first-child");return S.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),S.attr("transform",`translate(${h/2}, 0)`),Et(t,S),t.intersect=function(_){return ht.polygon(t,p,_)},a}N(SR,"bowTieRect");function dl(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}N(dl,"insertPolygonShape");async function TR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.height+t.padding,u=12,d=o.width+t.padding+u,h=0,f=d,p=-l,x=0,b=[{x:h+u,y:p},{x:f,y:p},{x:f,y:x},{x:h,y:x},{x:h,y:p+u},{x:h+u,y:p}];let y;const{cssStyles:k}=t;if(t.look==="handDrawn"){const S=vt.svg(a),_=kt(t,{}),T=_r(b),A=S.path(T,_);y=a.insert(()=>A,":first-child").attr("transform",`translate(${-d/2}, ${l/2})`),k&&y.attr("style",k)}else y=dl(a,d,l,b);return n&&y.attr("style",n),Et(t,y),t.intersect=function(S){return ht.polygon(t,b,S)},a}N(TR,"card");function CR(e,t){const{nodeStyles:r}=wt(t);t.label="";const n=e.insert("g").attr("class",It(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,o=Math.max(28,t.width??0),l=[{x:0,y:o/2},{x:o/2,y:0},{x:0,y:-o/2},{x:-o/2,y:0}],u=vt.svg(n),d=kt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=_r(l),f=u.path(h,d),p=n.insert(()=>f,":first-child");return a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(x){return ht.polygon(t,l,x)},n}N(CR,"choice");async function F2(e,t,r){const{labelStyles:n,nodeStyles:a}=wt(t);t.labelStyle=n;const{shapeSvg:o,bbox:l,halfPadding:u}=await Ft(e,t,It(t)),d=r?.padding??u,h=l.width/2+d;let f;const{cssStyles:p}=t;if(t.look==="handDrawn"){const x=vt.svg(o),b=kt(t,{}),y=x.circle(0,0,h*2,b);f=o.insert(()=>y,":first-child"),f.attr("class","basic label-container").attr("style",_a(p))}else f=o.insert("circle",":first-child").attr("class","basic label-container").attr("style",a).attr("r",h).attr("cx",0).attr("cy",0);return Et(t,f),t.calcIntersect=function(x,b){const y=x.width/2;return ht.circle(x,y,b)},t.intersect=function(x){return ze.info("Circle intersect",t,h,x),ht.circle(t,h,x)},o}N(F2,"circle");function NR(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,a={x:n/2*t,y:n/2*r},o={x:-(n/2)*t,y:n/2*r},l={x:-(n/2)*t,y:-(n/2)*r},u={x:n/2*t,y:-(n/2)*r};return`M ${o.x},${o.y} L ${u.x},${u.y}
                   M ${a.x},${a.y} L ${l.x},${l.y}`}N(NR,"createLine");function AR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",It(t)).attr("id",t.domId??t.id),o=Math.max(30,t?.width??0),{cssStyles:l}=t,u=vt.svg(a),d=kt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=u.circle(0,0,o*2,d),f=NR(o),p=u.path(f,d),x=a.insert(()=>h,":first-child");return x.insert(()=>p),l&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",l),n&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",n),Et(t,x),t.intersect=function(b){return ze.info("crossedCircle intersect",t,{radius:o,point:b}),ht.circle(t,o,b)},a}N(AR,"crossedCircle");function so(e,t,r,n=100,a=0,o=180){const l=[],u=a*Math.PI/180,f=(o*Math.PI/180-u)/(n-1);for(let p=0;p<n;p++){const x=u+p*f,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}N(so,"generateCirclePoints");async function LR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=o.width+(t.padding??0),d=o.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:f}=t,p=[...so(u/2,-d/2,h,30,-90,0),{x:-u/2-h,y:h},...so(u/2+h*2,-h,h,20,-180,-270),...so(u/2+h*2,h,h,20,-90,-180),{x:-u/2-h,y:-d/2},...so(u/2,d/2,h,20,0,90)],x=[{x:u/2,y:-d/2-h},{x:-u/2,y:-d/2-h},...so(u/2,-d/2,h,20,-90,0),{x:-u/2-h,y:-h},...so(u/2+u*.1,-h,h,20,-180,-270),...so(u/2+u*.1,h,h,20,-90,-180),{x:-u/2-h,y:d/2},...so(u/2,d/2,h,20,0,90),{x:-u/2,y:d/2+h},{x:u/2,y:d/2+h}],b=vt.svg(a),y=kt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const S=_r(p).replace("Z",""),_=b.path(S,y),T=_r(x),A=b.path(T,{...y}),I=a.insert("g",":first-child");return I.insert(()=>A,":first-child").attr("stroke-opacity",0),I.insert(()=>_,":first-child"),I.attr("class","text"),f&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${h}, 0)`),l.attr("transform",`translate(${-u/2+h-(o.x-(o.left??0))},${-d/2+(t.padding??0)/2-(o.y-(o.top??0))})`),Et(t,I),t.intersect=function(O){return ht.polygon(t,x,O)},a}N(LR,"curlyBraceLeft");function io(e,t,r,n=100,a=0,o=180){const l=[],u=a*Math.PI/180,f=(o*Math.PI/180-u)/(n-1);for(let p=0;p<n;p++){const x=u+p*f,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:b,y})}return l}N(io,"generateCirclePoints");async function jR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=o.width+(t.padding??0),d=o.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:f}=t,p=[...io(u/2,-d/2,h,20,-90,0),{x:u/2+h,y:-h},...io(u/2+h*2,-h,h,20,-180,-270),...io(u/2+h*2,h,h,20,-90,-180),{x:u/2+h,y:d/2},...io(u/2,d/2,h,20,0,90)],x=[{x:-u/2,y:-d/2-h},{x:u/2,y:-d/2-h},...io(u/2,-d/2,h,20,-90,0),{x:u/2+h,y:-h},...io(u/2+h*2,-h,h,20,-180,-270),...io(u/2+h*2,h,h,20,-90,-180),{x:u/2+h,y:d/2},...io(u/2,d/2,h,20,0,90),{x:u/2,y:d/2+h},{x:-u/2,y:d/2+h}],b=vt.svg(a),y=kt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const S=_r(p).replace("Z",""),_=b.path(S,y),T=_r(x),A=b.path(T,{...y}),I=a.insert("g",":first-child");return I.insert(()=>A,":first-child").attr("stroke-opacity",0),I.insert(()=>_,":first-child"),I.attr("class","text"),f&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${-h}, 0)`),l.attr("transform",`translate(${-u/2+(t.padding??0)/2-(o.x-(o.left??0))},${-d/2+(t.padding??0)/2-(o.y-(o.top??0))})`),Et(t,I),t.intersect=function(O){return ht.polygon(t,x,O)},a}N(jR,"curlyBraceRight");function da(e,t,r,n=100,a=0,o=180){const l=[],u=a*Math.PI/180,f=(o*Math.PI/180-u)/(n-1);for(let p=0;p<n;p++){const x=u+p*f,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}N(da,"generateCirclePoints");async function MR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=o.width+(t.padding??0),d=o.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:f}=t,p=[...da(u/2,-d/2,h,30,-90,0),{x:-u/2-h,y:h},...da(u/2+h*2,-h,h,20,-180,-270),...da(u/2+h*2,h,h,20,-90,-180),{x:-u/2-h,y:-d/2},...da(u/2,d/2,h,20,0,90)],x=[...da(-u/2+h+h/2,-d/2,h,20,-90,-180),{x:u/2-h/2,y:h},...da(-u/2-h/2,-h,h,20,0,90),...da(-u/2-h/2,h,h,20,-90,0),{x:u/2-h/2,y:-h},...da(-u/2+h+h/2,d/2,h,30,-180,-270)],b=[{x:u/2,y:-d/2-h},{x:-u/2,y:-d/2-h},...da(u/2,-d/2,h,20,-90,0),{x:-u/2-h,y:-h},...da(u/2+h*2,-h,h,20,-180,-270),...da(u/2+h*2,h,h,20,-90,-180),{x:-u/2-h,y:d/2},...da(u/2,d/2,h,20,0,90),{x:-u/2,y:d/2+h},{x:u/2-h-h/2,y:d/2+h},...da(-u/2+h+h/2,-d/2,h,20,-90,-180),{x:u/2-h/2,y:h},...da(-u/2-h/2,-h,h,20,0,90),...da(-u/2-h/2,h,h,20,-90,0),{x:u/2-h/2,y:-h},...da(-u/2+h+h/2,d/2,h,30,-180,-270)],y=vt.svg(a),k=kt(t,{fill:"none"});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const _=_r(p).replace("Z",""),T=y.path(_,k),I=_r(x).replace("Z",""),O=y.path(I,k),B=_r(b),F=y.path(B,{...k}),ae=a.insert("g",":first-child");return ae.insert(()=>F,":first-child").attr("stroke-opacity",0),ae.insert(()=>T,":first-child"),ae.insert(()=>O,":first-child"),ae.attr("class","text"),f&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",n),ae.attr("transform",`translate(${h-h/4}, 0)`),l.attr("transform",`translate(${-u/2+(t.padding??0)/2-(o.x-(o.left??0))},${-d/2+(t.padding??0)/2-(o.y-(o.top??0))})`),Et(t,ae),t.intersect=function(Z){return ht.polygon(t,b,Z)},a}N(MR,"curlyBraces");async function RR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=80,u=20,d=Math.max(l,(o.width+(t.padding??0)*2)*1.25,t?.width??0),h=Math.max(u,o.height+(t.padding??0)*2,t?.height??0),f=h/2,{cssStyles:p}=t,x=vt.svg(a),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=d,k=h,S=y-f,_=k/4,T=[{x:S,y:0},{x:_,y:0},{x:0,y:k/2},{x:_,y:k},{x:S,y:k},...ug(-S,-k/2,f,50,270,90)],A=_r(T),I=x.path(A,b),O=a.insert(()=>I,":first-child");return O.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&O.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&O.selectChildren("path").attr("style",n),O.attr("transform",`translate(${-d/2}, ${-h/2})`),Et(t,O),t.intersect=function(B){return ht.polygon(t,T,B)},a}N(RR,"curvedTrapezoid");var kae=N((e,t,r,n,a,o)=>[`M${e},${t+o}`,`a${a},${o} 0,0,0 ${r},0`,`a${a},${o} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${o} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),wae=N((e,t,r,n,a,o)=>[`M${e},${t+o}`,`M${e+r},${t+o}`,`a${a},${o} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${o} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),Eae=N((e,t,r,n,a,o)=>[`M${e-r/2},${-n/2}`,`a${a},${o} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function OR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+t.padding,t.width??0),d=u/2,h=d/(2.5+u/50),f=Math.max(o.height+h+t.padding,t.height??0);let p;const{cssStyles:x}=t;if(t.look==="handDrawn"){const b=vt.svg(a),y=wae(0,0,u,f,d,h),k=Eae(0,h,u,f,d,h),S=b.path(y,kt(t,{})),_=b.path(k,kt(t,{fill:"none"}));p=a.insert(()=>_,":first-child"),p=a.insert(()=>S,":first-child"),p.attr("class","basic label-container"),x&&p.attr("style",x)}else{const b=kae(0,0,u,f,d,h);p=a.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",_a(x)).attr("style",n)}return p.attr("label-offset-y",h),p.attr("transform",`translate(${-u/2}, ${-(f/2+h)})`),Et(t,p),l.attr("transform",`translate(${-(o.width/2)-(o.x-(o.left??0))}, ${-(o.height/2)+(t.padding??0)/1.5-(o.y-(o.top??0))})`),t.intersect=function(b){const y=ht.rect(t,b),k=y.x-(t.x??0);if(d!=0&&(Math.abs(k)<(t.width??0)/2||Math.abs(k)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-h)){let S=h*h*(1-k*k/(d*d));S>0&&(S=Math.sqrt(S)),S=h-S,b.y-(t.y??0)>0&&(S=-S),y.y+=S}return y},a}N(OR,"cylinder");async function IR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=o.width+t.padding,d=o.height+t.padding,h=d*.2,f=-u/2,p=-d/2-h/2,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:f,y:p+h},{x:-f,y:p+h},{x:-f,y:-p},{x:f,y:-p},{x:f,y:p},{x:-f,y:p},{x:-f,y:p+h}],S=b.polygon(k.map(T=>[T.x,T.y]),y),_=a.insert(()=>S,":first-child");return _.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),l.attr("transform",`translate(${f+(t.padding??0)/2-(o.x-(o.left??0))}, ${p+h+(t.padding??0)/2-(o.y-(o.top??0))})`),Et(t,_),t.intersect=function(T){return ht.rect(t,T)},a}N(IR,"dividedRectangle");async function DR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,halfPadding:l}=await Ft(e,t,It(t)),d=o.width/2+l+5,h=o.width/2+l;let f;const{cssStyles:p}=t;if(t.look==="handDrawn"){const x=vt.svg(a),b=kt(t,{roughness:.2,strokeWidth:2.5}),y=kt(t,{roughness:.2,strokeWidth:1.5}),k=x.circle(0,0,d*2,b),S=x.circle(0,0,h*2,y);f=a.insert("g",":first-child"),f.attr("class",_a(t.cssClasses)).attr("style",_a(p)),f.node()?.appendChild(k),f.node()?.appendChild(S)}else{f=a.insert("g",":first-child");const x=f.insert("circle",":first-child"),b=f.insert("circle");f.attr("class","basic label-container").attr("style",n),x.attr("class","outer-circle").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0)}return Et(t,f),t.intersect=function(x){return ze.info("DoubleCircle intersect",t,d,x),ht.circle(t,d,x)},a}N(DR,"doublecircle");function PR(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=wt(t);t.label="",t.labelStyle=n;const o=e.insert("g").attr("class",It(t)).attr("id",t.domId??t.id),l=7,{cssStyles:u}=t,d=vt.svg(o),{nodeBorder:h}=r,f=kt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(f.roughness=0);const p=d.circle(0,0,l*2,f),x=o.insert(()=>p,":first-child");return x.selectAll("path").attr("style",`fill: ${h} !important;`),u&&u.length>0&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",u),a&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",a),Et(t,x),t.intersect=function(b){return ze.info("filledCircle intersect",t,{radius:l,point:b}),ht.circle(t,l,b)},o}N(PR,"filledCircle");async function BR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=o.width+(t.padding??0),d=u+o.height,h=u+o.height,f=[{x:0,y:-d},{x:h,y:-d},{x:h/2,y:0}],{cssStyles:p}=t,x=vt.svg(a),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=_r(f),k=x.path(y,b),S=a.insert(()=>k,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return p&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),t.width=u,t.height=d,Et(t,S),l.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${-d/2+(t.padding??0)/2+(o.y-(o.top??0))})`),t.intersect=function(_){return ze.info("Triangle intersect",t,f,_),ht.polygon(t,f,_)},a}N(BR,"flippedTriangle");function FR(e,t,{dir:r,config:{state:n,themeVariables:a}}){const{nodeStyles:o}=wt(t);t.label="";const l=e.insert("g").attr("class",It(t)).attr("id",t.domId??t.id),{cssStyles:u}=t;let d=Math.max(70,t?.width??0),h=Math.max(10,t?.height??0);r==="LR"&&(d=Math.max(10,t?.width??0),h=Math.max(70,t?.height??0));const f=-1*d/2,p=-1*h/2,x=vt.svg(l),b=kt(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=x.rectangle(f,p,d,h,b),k=l.insert(()=>y,":first-child");u&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",u),o&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",o),Et(t,k);const S=n?.padding??0;return t.width&&t.height&&(t.width+=S/2||0,t.height+=S/2||0),t.intersect=function(_){return ht.rect(t,_)},l}N(FR,"forkJoin");async function UR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const a=80,o=50,{shapeSvg:l,bbox:u}=await Ft(e,t,It(t)),d=Math.max(a,u.width+(t.padding??0)*2,t?.width??0),h=Math.max(o,u.height+(t.padding??0)*2,t?.height??0),f=h/2,{cssStyles:p}=t,x=vt.svg(l),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:-d/2,y:-h/2},{x:d/2-f,y:-h/2},...ug(-d/2+f,0,f,50,90,270),{x:d/2-f,y:h/2},{x:-d/2,y:h/2}],k=_r(y),S=x.path(k,b),_=l.insert(()=>S,":first-child");return _.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),Et(t,_),t.intersect=function(T){return ze.info("Pill intersect",t,{radius:f,point:T}),ht.polygon(t,y,T)},l}N(UR,"halfRoundedRectangle");async function $R(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.height+(t.padding??0),u=o.width+(t.padding??0)*2.5,{cssStyles:d}=t,h=vt.svg(a),f=kt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");let p=u/2;const x=p/6;p=p+x;const b=l/2,y=b/2,k=p-y,S=[{x:-k,y:-b},{x:0,y:-b},{x:k,y:-b},{x:p,y:0},{x:k,y:b},{x:0,y:b},{x:-k,y:b},{x:-p,y:0}],_=_r(S),T=h.path(_,f),A=a.insert(()=>T,":first-child");return A.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",n),t.width=u,t.height=l,Et(t,A),t.intersect=function(I){return ht.polygon(t,S,I)},a}N($R,"hexagon");async function zR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await Ft(e,t,It(t)),o=Math.max(30,t?.width??0),l=Math.max(30,t?.height??0),{cssStyles:u}=t,d=vt.svg(a),h=kt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const f=[{x:0,y:0},{x:o,y:0},{x:0,y:l},{x:o,y:l}],p=_r(f),x=d.path(p,h),b=a.insert(()=>x,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),n&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),b.attr("transform",`translate(${-o/2}, ${-l/2})`),Et(t,b),t.intersect=function(y){return ze.info("Pill intersect",t,{points:f}),ht.polygon(t,f,y)},a}N(zR,"hourglass");async function HR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=wt(t);t.labelStyle=a;const o=t.assetHeight??48,l=t.assetWidth??48,u=Math.max(o,l),d=n?.wrappingWidth;t.width=Math.max(u,d??0);const{shapeSvg:h,bbox:f,label:p}=await Ft(e,t,"icon-shape default"),x=t.pos==="t",b=u,y=u,{nodeBorder:k}=r,{stylesMap:S}=td(t),_=-y/2,T=-b/2,A=t.label?8:0,I=vt.svg(h),O=kt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(O.roughness=0,O.fillStyle="solid");const B=I.rectangle(_,T,y,b,O),F=Math.max(y,f.width),ae=b+f.height+A,Z=I.rectangle(-F/2,-ae/2,F,ae,{...O,fill:"transparent",stroke:"none"}),z=h.insert(()=>B,":first-child"),ee=h.insert(()=>Z);if(t.icon){const W=h.append("g");W.html(`<g>${await Dg(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);const $=W.node().getBBox(),L=$.width,q=$.height,D=$.x,X=$.y;W.attr("transform",`translate(${-L/2-D},${x?f.height/2+A/2-q/2-X:-f.height/2-A/2-q/2-X})`),W.attr("style",`color: ${S.get("stroke")??k};`)}return p.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${x?-ae/2:ae/2-f.height})`),z.attr("transform",`translate(0,${x?f.height/2+A/2:-f.height/2-A/2})`),Et(t,ee),t.intersect=function(W){if(ze.info("iconSquare intersect",t,W),!t.label)return ht.rect(t,W);const $=t.x??0,L=t.y??0,q=t.height??0;let D=[];return x?D=[{x:$-f.width/2,y:L-q/2},{x:$+f.width/2,y:L-q/2},{x:$+f.width/2,y:L-q/2+f.height+A},{x:$+y/2,y:L-q/2+f.height+A},{x:$+y/2,y:L+q/2},{x:$-y/2,y:L+q/2},{x:$-y/2,y:L-q/2+f.height+A},{x:$-f.width/2,y:L-q/2+f.height+A}]:D=[{x:$-y/2,y:L-q/2},{x:$+y/2,y:L-q/2},{x:$+y/2,y:L-q/2+b},{x:$+f.width/2,y:L-q/2+b},{x:$+f.width/2/2,y:L+q/2},{x:$-f.width/2,y:L+q/2},{x:$-f.width/2,y:L-q/2+b},{x:$-y/2,y:L-q/2+b}],ht.polygon(t,D,W)},h}N(HR,"icon");async function qR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=wt(t);t.labelStyle=a;const o=t.assetHeight??48,l=t.assetWidth??48,u=Math.max(o,l),d=n?.wrappingWidth;t.width=Math.max(u,d??0);const{shapeSvg:h,bbox:f,label:p}=await Ft(e,t,"icon-shape default"),x=20,b=t.label?8:0,y=t.pos==="t",{nodeBorder:k,mainBkg:S}=r,{stylesMap:_}=td(t),T=vt.svg(h),A=kt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const I=_.get("fill");A.stroke=I??S;const O=h.append("g");t.icon&&O.html(`<g>${await Dg(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);const B=O.node().getBBox(),F=B.width,ae=B.height,Z=B.x,z=B.y,ee=Math.max(F,ae)*Math.SQRT2+x*2,W=T.circle(0,0,ee,A),$=Math.max(ee,f.width),L=ee+f.height+b,q=T.rectangle(-$/2,-L/2,$,L,{...A,fill:"transparent",stroke:"none"}),D=h.insert(()=>W,":first-child"),X=h.insert(()=>q);return O.attr("transform",`translate(${-F/2-Z},${y?f.height/2+b/2-ae/2-z:-f.height/2-b/2-ae/2-z})`),O.attr("style",`color: ${_.get("stroke")??k};`),p.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${y?-L/2:L/2-f.height})`),D.attr("transform",`translate(0,${y?f.height/2+b/2:-f.height/2-b/2})`),Et(t,X),t.intersect=function(K){return ze.info("iconSquare intersect",t,K),ht.rect(t,K)},h}N(qR,"iconCircle");async function GR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=wt(t);t.labelStyle=a;const o=t.assetHeight??48,l=t.assetWidth??48,u=Math.max(o,l),d=n?.wrappingWidth;t.width=Math.max(u,d??0);const{shapeSvg:h,bbox:f,halfPadding:p,label:x}=await Ft(e,t,"icon-shape default"),b=t.pos==="t",y=u+p*2,k=u+p*2,{nodeBorder:S,mainBkg:_}=r,{stylesMap:T}=td(t),A=-k/2,I=-y/2,O=t.label?8:0,B=vt.svg(h),F=kt(t,{});t.look!=="handDrawn"&&(F.roughness=0,F.fillStyle="solid");const ae=T.get("fill");F.stroke=ae??_;const Z=B.path(ul(A,I,k,y,5),F),z=Math.max(k,f.width),ee=y+f.height+O,W=B.rectangle(-z/2,-ee/2,z,ee,{...F,fill:"transparent",stroke:"none"}),$=h.insert(()=>Z,":first-child").attr("class","icon-shape2"),L=h.insert(()=>W);if(t.icon){const q=h.append("g");q.html(`<g>${await Dg(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);const D=q.node().getBBox(),X=D.width,K=D.height,xe=D.x,U=D.y;q.attr("transform",`translate(${-X/2-xe},${b?f.height/2+O/2-K/2-U:-f.height/2-O/2-K/2-U})`),q.attr("style",`color: ${T.get("stroke")??S};`)}return x.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${b?-ee/2:ee/2-f.height})`),$.attr("transform",`translate(0,${b?f.height/2+O/2:-f.height/2-O/2})`),Et(t,L),t.intersect=function(q){if(ze.info("iconSquare intersect",t,q),!t.label)return ht.rect(t,q);const D=t.x??0,X=t.y??0,K=t.height??0;let xe=[];return b?xe=[{x:D-f.width/2,y:X-K/2},{x:D+f.width/2,y:X-K/2},{x:D+f.width/2,y:X-K/2+f.height+O},{x:D+k/2,y:X-K/2+f.height+O},{x:D+k/2,y:X+K/2},{x:D-k/2,y:X+K/2},{x:D-k/2,y:X-K/2+f.height+O},{x:D-f.width/2,y:X-K/2+f.height+O}]:xe=[{x:D-k/2,y:X-K/2},{x:D+k/2,y:X-K/2},{x:D+k/2,y:X-K/2+y},{x:D+f.width/2,y:X-K/2+y},{x:D+f.width/2/2,y:X+K/2},{x:D-f.width/2,y:X+K/2},{x:D-f.width/2,y:X-K/2+y},{x:D-k/2,y:X-K/2+y}],ht.polygon(t,xe,q)},h}N(GR,"iconRounded");async function YR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=wt(t);t.labelStyle=a;const o=t.assetHeight??48,l=t.assetWidth??48,u=Math.max(o,l),d=n?.wrappingWidth;t.width=Math.max(u,d??0);const{shapeSvg:h,bbox:f,halfPadding:p,label:x}=await Ft(e,t,"icon-shape default"),b=t.pos==="t",y=u+p*2,k=u+p*2,{nodeBorder:S,mainBkg:_}=r,{stylesMap:T}=td(t),A=-k/2,I=-y/2,O=t.label?8:0,B=vt.svg(h),F=kt(t,{});t.look!=="handDrawn"&&(F.roughness=0,F.fillStyle="solid");const ae=T.get("fill");F.stroke=ae??_;const Z=B.path(ul(A,I,k,y,.1),F),z=Math.max(k,f.width),ee=y+f.height+O,W=B.rectangle(-z/2,-ee/2,z,ee,{...F,fill:"transparent",stroke:"none"}),$=h.insert(()=>Z,":first-child"),L=h.insert(()=>W);if(t.icon){const q=h.append("g");q.html(`<g>${await Dg(t.icon,{height:u,width:u,fallbackPrefix:""})}</g>`);const D=q.node().getBBox(),X=D.width,K=D.height,xe=D.x,U=D.y;q.attr("transform",`translate(${-X/2-xe},${b?f.height/2+O/2-K/2-U:-f.height/2-O/2-K/2-U})`),q.attr("style",`color: ${T.get("stroke")??S};`)}return x.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${b?-ee/2:ee/2-f.height})`),$.attr("transform",`translate(0,${b?f.height/2+O/2:-f.height/2-O/2})`),Et(t,L),t.intersect=function(q){if(ze.info("iconSquare intersect",t,q),!t.label)return ht.rect(t,q);const D=t.x??0,X=t.y??0,K=t.height??0;let xe=[];return b?xe=[{x:D-f.width/2,y:X-K/2},{x:D+f.width/2,y:X-K/2},{x:D+f.width/2,y:X-K/2+f.height+O},{x:D+k/2,y:X-K/2+f.height+O},{x:D+k/2,y:X+K/2},{x:D-k/2,y:X+K/2},{x:D-k/2,y:X-K/2+f.height+O},{x:D-f.width/2,y:X-K/2+f.height+O}]:xe=[{x:D-k/2,y:X-K/2},{x:D+k/2,y:X-K/2},{x:D+k/2,y:X-K/2+y},{x:D+f.width/2,y:X-K/2+y},{x:D+f.width/2/2,y:X+K/2},{x:D-f.width/2,y:X+K/2},{x:D-f.width/2,y:X-K/2+y},{x:D-k/2,y:X-K/2+y}],ht.polygon(t,xe,q)},h}N(YR,"iconSquare");async function WR(e,t,{config:{flowchart:r}}){const n=new Image;n.src=t?.img??"",await n.decode();const a=Number(n.naturalWidth.toString().replace("px","")),o=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/o;const{labelStyles:l}=wt(t);t.labelStyle=l;const u=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;const d=Math.max(t.label?u??0:0,t?.assetWidth??a),h=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:d,f=t.constraint==="on"?h/t.imageAspectRatio:t?.assetHeight??o;t.width=Math.max(h,u??0);const{shapeSvg:p,bbox:x,label:b}=await Ft(e,t,"image-shape default"),y=t.pos==="t",k=-h/2,S=-f/2,_=t.label?8:0,T=vt.svg(p),A=kt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const I=T.rectangle(k,S,h,f,A),O=Math.max(h,x.width),B=f+x.height+_,F=T.rectangle(-O/2,-B/2,O,B,{...A,fill:"none",stroke:"none"}),ae=p.insert(()=>I,":first-child"),Z=p.insert(()=>F);if(t.img){const z=p.append("image");z.attr("href",t.img),z.attr("width",h),z.attr("height",f),z.attr("preserveAspectRatio","none"),z.attr("transform",`translate(${-h/2},${y?B/2-f:-B/2})`)}return b.attr("transform",`translate(${-x.width/2-(x.x-(x.left??0))},${y?-f/2-x.height/2-_/2:f/2-x.height/2+_/2})`),ae.attr("transform",`translate(0,${y?x.height/2+_/2:-x.height/2-_/2})`),Et(t,Z),t.intersect=function(z){if(ze.info("iconSquare intersect",t,z),!t.label)return ht.rect(t,z);const ee=t.x??0,W=t.y??0,$=t.height??0;let L=[];return y?L=[{x:ee-x.width/2,y:W-$/2},{x:ee+x.width/2,y:W-$/2},{x:ee+x.width/2,y:W-$/2+x.height+_},{x:ee+h/2,y:W-$/2+x.height+_},{x:ee+h/2,y:W+$/2},{x:ee-h/2,y:W+$/2},{x:ee-h/2,y:W-$/2+x.height+_},{x:ee-x.width/2,y:W-$/2+x.height+_}]:L=[{x:ee-h/2,y:W-$/2},{x:ee+h/2,y:W-$/2},{x:ee+h/2,y:W-$/2+f},{x:ee+x.width/2,y:W-$/2+f},{x:ee+x.width/2/2,y:W+$/2},{x:ee-x.width/2,y:W+$/2},{x:ee-x.width/2,y:W-$/2+f},{x:ee-h/2,y:W-$/2+f}],ht.polygon(t,L,z)},p}N(WR,"imageSquare");async function VR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=Math.max(o.width+(t.padding??0)*2,t?.width??0),u=Math.max(o.height+(t.padding??0)*2,t?.height??0),d=[{x:0,y:0},{x:l,y:0},{x:l+3*u/6,y:-u},{x:-3*u/6,y:-u}];let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=vt.svg(a),x=kt(t,{}),b=_r(d),y=p.path(b,x);h=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${u/2})`),f&&h.attr("style",f)}else h=dl(a,l,u,d);return n&&h.attr("style",n),t.width=l,t.height=u,Et(t,h),t.intersect=function(p){return ht.polygon(t,d,p)},a}N(VR,"inv_trapezoid");async function xm(e,t,r){const{labelStyles:n,nodeStyles:a}=wt(t);t.labelStyle=n;const{shapeSvg:o,bbox:l}=await Ft(e,t,It(t)),u=Math.max(l.width+r.labelPaddingX*2,t?.width||0),d=Math.max(l.height+r.labelPaddingY*2,t?.height||0),h=-u/2,f=-d/2;let p,{rx:x,ry:b}=t;const{cssStyles:y}=t;if(r?.rx&&r.ry&&(x=r.rx,b=r.ry),t.look==="handDrawn"){const k=vt.svg(o),S=kt(t,{}),_=x||b?k.path(ul(h,f,u,d,x||0),S):k.rectangle(h,f,u,d,S);p=o.insert(()=>_,":first-child"),p.attr("class","basic label-container").attr("style",_a(y))}else p=o.insert("rect",":first-child"),p.attr("class","basic label-container").attr("style",a).attr("rx",_a(x)).attr("ry",_a(b)).attr("x",h).attr("y",f).attr("width",u).attr("height",d);return Et(t,p),t.calcIntersect=function(k,S){return ht.rect(k,S)},t.intersect=function(k){return ht.rect(t,k)},o}N(xm,"drawRect");async function KR(e,t){const{shapeSvg:r,bbox:n,label:a}=await Ft(e,t,"label"),o=r.insert("rect",":first-child");return o.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),Et(t,o),t.intersect=function(d){return ht.rect(t,d)},r}N(KR,"labelRect");async function XR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=Math.max(o.width+(t.padding??0),t?.width??0),u=Math.max(o.height+(t.padding??0),t?.height??0),d=[{x:0,y:0},{x:l+3*u/6,y:0},{x:l,y:-u},{x:-(3*u)/6,y:-u}];let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=vt.svg(a),x=kt(t,{}),b=_r(d),y=p.path(b,x);h=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${u/2})`),f&&h.attr("style",f)}else h=dl(a,l,u,d);return n&&h.attr("style",n),t.width=l,t.height=u,Et(t,h),t.intersect=function(p){return ht.polygon(t,d,p)},a}N(XR,"lean_left");async function QR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=Math.max(o.width+(t.padding??0),t?.width??0),u=Math.max(o.height+(t.padding??0),t?.height??0),d=[{x:-3*u/6,y:0},{x:l,y:0},{x:l+3*u/6,y:-u},{x:0,y:-u}];let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=vt.svg(a),x=kt(t,{}),b=_r(d),y=p.path(b,x);h=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${u/2})`),f&&h.attr("style",f)}else h=dl(a,l,u,d);return n&&h.attr("style",n),t.width=l,t.height=u,Et(t,h),t.intersect=function(p){return ht.polygon(t,d,p)},a}N(QR,"lean_right");function ZR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",It(t)).attr("id",t.domId??t.id),{cssStyles:o}=t,l=Math.max(35,t?.width??0),u=Math.max(35,t?.height??0),d=7,h=[{x:l,y:0},{x:0,y:u+d/2},{x:l-2*d,y:u+d/2},{x:0,y:2*u},{x:l,y:u-d/2},{x:2*d,y:u-d/2}],f=vt.svg(a),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=_r(h),b=f.path(x,p),y=a.insert(()=>b,":first-child");return o&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),y.attr("transform",`translate(-${l/2},${-u})`),Et(t,y),t.intersect=function(k){return ze.info("lightningBolt intersect",t,k),ht.polygon(t,h,k)},a}N(ZR,"lightningBolt");var _ae=N((e,t,r,n,a,o,l)=>[`M${e},${t+o}`,`a${a},${o} 0,0,0 ${r},0`,`a${a},${o} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${o} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+o+l}`,`a${a},${o} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),Sae=N((e,t,r,n,a,o,l)=>[`M${e},${t+o}`,`M${e+r},${t+o}`,`a${a},${o} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${o} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+o+l}`,`a${a},${o} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Tae=N((e,t,r,n,a,o)=>[`M${e-r/2},${-n/2}`,`a${a},${o} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function JR(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0),t.width??0),d=u/2,h=d/(2.5+u/50),f=Math.max(o.height+h+(t.padding??0),t.height??0),p=f*.1;let x;const{cssStyles:b}=t;if(t.look==="handDrawn"){const y=vt.svg(a),k=Sae(0,0,u,f,d,h,p),S=Tae(0,h,u,f,d,h),_=kt(t,{}),T=y.path(k,_),A=y.path(S,_);a.insert(()=>A,":first-child").attr("class","line"),x=a.insert(()=>T,":first-child"),x.attr("class","basic label-container"),b&&x.attr("style",b)}else{const y=_ae(0,0,u,f,d,h,p);x=a.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",_a(b)).attr("style",n)}return x.attr("label-offset-y",h),x.attr("transform",`translate(${-u/2}, ${-(f/2+h)})`),Et(t,x),l.attr("transform",`translate(${-(o.width/2)-(o.x-(o.left??0))}, ${-(o.height/2)+h-(o.y-(o.top??0))})`),t.intersect=function(y){const k=ht.rect(t,y),S=k.x-(t.x??0);if(d!=0&&(Math.abs(S)<(t.width??0)/2||Math.abs(S)==(t.width??0)/2&&Math.abs(k.y-(t.y??0))>(t.height??0)/2-h)){let _=h*h*(1-S*S/(d*d));_>0&&(_=Math.sqrt(_)),_=h-_,y.y-(t.y??0)>0&&(_=-_),k.y+=_}return k},a}N(JR,"linedCylinder");async function eO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=d/4,f=d+h,{cssStyles:p}=t,x=vt.svg(a),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:-u/2-u/2*.1,y:-f/2},{x:-u/2-u/2*.1,y:f/2},...al(-u/2-u/2*.1,f/2,u/2+u/2*.1,f/2,h,.8),{x:u/2+u/2*.1,y:-f/2},{x:-u/2-u/2*.1,y:-f/2},{x:-u/2,y:-f/2},{x:-u/2,y:f/2*1.1},{x:-u/2,y:-f/2}],k=x.polygon(y.map(_=>[_.x,_.y]),b),S=a.insert(()=>k,":first-child");return S.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),S.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-u/2+(t.padding??0)+u/2*.1/2-(o.x-(o.left??0))},${-d/2+(t.padding??0)-h/2-(o.y-(o.top??0))})`),Et(t,S),t.intersect=function(_){return ht.polygon(t,y,_)},a}N(eO,"linedWaveEdgedRect");async function tO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=5,f=-u/2,p=-d/2,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{}),k=[{x:f-h,y:p+h},{x:f-h,y:p+d+h},{x:f+u-h,y:p+d+h},{x:f+u-h,y:p+d},{x:f+u,y:p+d},{x:f+u,y:p+d-h},{x:f+u+h,y:p+d-h},{x:f+u+h,y:p-h},{x:f+h,y:p-h},{x:f+h,y:p},{x:f,y:p},{x:f,y:p+h}],S=[{x:f,y:p+h},{x:f+u-h,y:p+h},{x:f+u-h,y:p+d},{x:f+u,y:p+d},{x:f+u,y:p},{x:f,y:p}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=_r(k),T=b.path(_,y),A=_r(S),I=b.path(A,{...y,fill:"none"}),O=a.insert(()=>I,":first-child");return O.insert(()=>T,":first-child"),O.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",n),l.attr("transform",`translate(${-(o.width/2)-h-(o.x-(o.left??0))}, ${-(o.height/2)+h-(o.y-(o.top??0))})`),Et(t,O),t.intersect=function(B){return ht.polygon(t,k,B)},a}N(tO,"multiRect");async function rO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=d/4,f=d+h,p=-u/2,x=-f/2,b=5,{cssStyles:y}=t,k=al(p-b,x+f+b,p+u-b,x+f+b,h,.8),S=k?.[k.length-1],_=[{x:p-b,y:x+b},{x:p-b,y:x+f+b},...k,{x:p+u-b,y:S.y-b},{x:p+u,y:S.y-b},{x:p+u,y:S.y-2*b},{x:p+u+b,y:S.y-2*b},{x:p+u+b,y:x-b},{x:p+b,y:x-b},{x:p+b,y:x},{x:p,y:x},{x:p,y:x+b}],T=[{x:p,y:x+b},{x:p+u-b,y:x+b},{x:p+u-b,y:S.y-b},{x:p+u,y:S.y-b},{x:p+u,y:x},{x:p,y:x}],A=vt.svg(a),I=kt(t,{});t.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const O=_r(_),B=A.path(O,I),F=_r(T),ae=A.path(F,I),Z=a.insert(()=>B,":first-child");return Z.insert(()=>ae),Z.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&Z.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&Z.selectAll("path").attr("style",n),Z.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-(o.width/2)-b-(o.x-(o.left??0))}, ${-(o.height/2)+b-h/2-(o.y-(o.top??0))})`),Et(t,Z),t.intersect=function(z){return ht.polygon(t,_,z)},a}N(rO,"multiWaveEdgedRectangle");async function nO(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=wt(t);t.labelStyle=n,t.useHtmlLabels||wa().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:l,bbox:u,label:d}=await Ft(e,t,It(t)),h=Math.max(u.width+(t.padding??0)*2,t?.width??0),f=Math.max(u.height+(t.padding??0)*2,t?.height??0),p=-h/2,x=-f/2,{cssStyles:b}=t,y=vt.svg(l),k=kt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=y.rectangle(p,x,h,f,k),_=l.insert(()=>S,":first-child");return _.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",b),a&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",a),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))}, ${-(u.height/2)-(u.y-(u.top??0))})`),Et(t,_),t.intersect=function(T){return ht.rect(t,T)},l}N(nO,"note");var Cae=N((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function aO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.width+t.padding,u=o.height+t.padding,d=l+u,h=.5,f=[{x:d/2,y:0},{x:d,y:-d/2},{x:d/2,y:-d},{x:0,y:-d/2}];let p;const{cssStyles:x}=t;if(t.look==="handDrawn"){const b=vt.svg(a),y=kt(t,{}),k=Cae(0,0,d),S=b.path(k,y);p=a.insert(()=>S,":first-child").attr("transform",`translate(${-d/2+h}, ${d/2})`),x&&p.attr("style",x)}else p=dl(a,d,d,f),p.attr("transform",`translate(${-d/2+h}, ${d/2})`);return n&&p.attr("style",n),Et(t,p),t.calcIntersect=function(b,y){const k=b.width,S=[{x:k/2,y:0},{x:k,y:-k/2},{x:k/2,y:-k},{x:0,y:-k/2}],_=ht.polygon(b,S,y);return{x:_.x-.5,y:_.y-.5}},t.intersect=function(b){return this.calcIntersect(t,b)},a}N(aO,"question");async function sO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0),t?.width??0),d=Math.max(o.height+(t.padding??0),t?.height??0),h=-u/2,f=-d/2,p=f/2,x=[{x:h+p,y:f},{x:h,y:0},{x:h+p,y:-f},{x:-h,y:-f},{x:-h,y:f}],{cssStyles:b}=t,y=vt.svg(a),k=kt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=_r(x),_=y.path(S,k),T=a.insert(()=>_,":first-child");return T.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${-p/2},0)`),l.attr("transform",`translate(${-p/2-o.width/2-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),Et(t,T),t.intersect=function(A){return ht.polygon(t,x,A)},a}N(sO,"rect_left_inv_arrow");async function iO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const o=e.insert("g").attr("class",a).attr("id",t.domId||t.id),l=o.insert("g"),u=o.insert("g").attr("class","label").attr("style",n),d=t.description,h=t.label,f=u.node().appendChild(await Gl(h,t.labelStyle,!0,!0));let p={width:0,height:0};if(Jn(Yr()?.flowchart?.htmlLabels)){const ae=f.children[0],Z=jr(f);p=ae.getBoundingClientRect(),Z.attr("width",p.width),Z.attr("height",p.height)}ze.info("Text 2",d);const x=d||[],b=f.getBBox(),y=u.node().appendChild(await Gl(x.join?x.join("<br/>"):x,t.labelStyle,!0,!0)),k=y.children[0],S=jr(y);p=k.getBoundingClientRect(),S.attr("width",p.width),S.attr("height",p.height);const _=(t.padding||0)/2;jr(y).attr("transform","translate( "+(p.width>b.width?0:(b.width-p.width)/2)+", "+(b.height+_+5)+")"),jr(f).attr("transform","translate( "+(p.width<b.width?0:-(b.width-p.width)/2)+", 0)"),p=u.node().getBBox(),u.attr("transform","translate("+-p.width/2+", "+(-p.height/2-_+3)+")");const T=p.width+(t.padding||0),A=p.height+(t.padding||0),I=-p.width/2-_,O=-p.height/2-_;let B,F;if(t.look==="handDrawn"){const ae=vt.svg(o),Z=kt(t,{}),z=ae.path(ul(I,O,T,A,t.rx||0),Z),ee=ae.line(-p.width/2-_,-p.height/2-_+b.height+_,p.width/2+_,-p.height/2-_+b.height+_,Z);F=o.insert(()=>(ze.debug("Rough node insert CXC",z),ee),":first-child"),B=o.insert(()=>(ze.debug("Rough node insert CXC",z),z),":first-child")}else B=l.insert("rect",":first-child"),F=l.insert("line"),B.attr("class","outer title-state").attr("style",n).attr("x",-p.width/2-_).attr("y",-p.height/2-_).attr("width",p.width+(t.padding||0)).attr("height",p.height+(t.padding||0)),F.attr("class","divider").attr("x1",-p.width/2-_).attr("x2",p.width/2+_).attr("y1",-p.height/2-_+b.height+_).attr("y2",-p.height/2-_+b.height+_);return Et(t,B),t.intersect=function(ae){return ht.rect(t,ae)},o}N(iO,"rectWithTitle");function Nh(e,t,r,n,a,o,l){const d=(e+r)/2,h=(t+n)/2,f=Math.atan2(n-t,r-e),p=(r-e)/2,x=(n-t)/2,b=p/a,y=x/o,k=Math.sqrt(b**2+y**2);if(k>1)throw new Error("The given radii are too small to create an arc between the points.");const S=Math.sqrt(1-k**2),_=d+S*o*Math.sin(f)*(l?-1:1),T=h-S*a*Math.cos(f)*(l?-1:1),A=Math.atan2((t-T)/o,(e-_)/a);let O=Math.atan2((n-T)/o,(r-_)/a)-A;l&&O<0&&(O+=2*Math.PI),!l&&O>0&&(O-=2*Math.PI);const B=[];for(let F=0;F<20;F++){const ae=F/19,Z=A+ae*O,z=_+a*Math.cos(Z),ee=T+o*Math.sin(Z);B.push({x:z,y:ee})}return B}N(Nh,"generateArcPoints");async function oO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=t?.padding??0,u=t?.padding??0,d=(t?.width?t?.width:o.width)+l*2,h=(t?.height?t?.height:o.height)+u*2,f=t.radius||5,p=t.taper||5,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{});t.stroke&&(y.stroke=t.stroke),t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:-d/2+p,y:-h/2},{x:d/2-p,y:-h/2},...Nh(d/2-p,-h/2,d/2,-h/2+p,f,f,!0),{x:d/2,y:-h/2+p},{x:d/2,y:h/2-p},...Nh(d/2,h/2-p,d/2-p,h/2,f,f,!0),{x:d/2-p,y:h/2},{x:-d/2+p,y:h/2},...Nh(-d/2+p,h/2,-d/2,h/2-p,f,f,!0),{x:-d/2,y:h/2-p},{x:-d/2,y:-h/2+p},...Nh(-d/2,-h/2+p,-d/2+p,-h/2,f,f,!0)],S=_r(k),_=b.path(S,y),T=a.insert(()=>_,":first-child");return T.attr("class","basic label-container outer-path"),x&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",x),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),Et(t,T),t.intersect=function(A){return ht.polygon(t,k,A)},a}N(oO,"roundedRect");async function lO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=t?.padding??0,d=Math.max(o.width+(t.padding??0)*2,t?.width??0),h=Math.max(o.height+(t.padding??0)*2,t?.height??0),f=-o.width/2-u,p=-o.height/2-u,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:f,y:p},{x:f+d+8,y:p},{x:f+d+8,y:p+h},{x:f-8,y:p+h},{x:f-8,y:p},{x:f,y:p},{x:f,y:p+h}],S=b.polygon(k.map(T=>[T.x,T.y]),y),_=a.insert(()=>S,":first-child");return _.attr("class","basic label-container").attr("style",_a(x)),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),x&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),l.attr("transform",`translate(${-d/2+4+(t.padding??0)-(o.x-(o.left??0))},${-h/2+(t.padding??0)-(o.y-(o.top??0))})`),Et(t,_),t.intersect=function(T){return ht.rect(t,T)},a}N(lO,"shadedProcess");async function cO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=-u/2,f=-d/2,{cssStyles:p}=t,x=vt.svg(a),b=kt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:h,y:f},{x:h,y:f+d},{x:h+u,y:f+d},{x:h+u,y:f-d/2}],k=_r(y),S=x.path(k,b),_=a.insert(()=>S,":first-child");return _.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),_.attr("transform",`translate(0, ${d/4})`),l.attr("transform",`translate(${-u/2+(t.padding??0)-(o.x-(o.left??0))}, ${-d/4+(t.padding??0)-(o.y-(o.top??0))})`),Et(t,_),t.intersect=function(T){return ht.polygon(t,y,T)},a}N(cO,"slopedRect");async function uO(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return xm(e,t,r)}N(uO,"squareRect");async function dO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.height+t.padding,u=o.width+l/4+t.padding,d=l/2,{cssStyles:h}=t,f=vt.svg(a),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=[{x:-u/2+d,y:-l/2},{x:u/2-d,y:-l/2},...ug(-u/2+d,0,d,50,90,270),{x:u/2-d,y:l/2},...ug(u/2-d,0,d,50,270,450)],b=_r(x),y=f.path(b,p),k=a.insert(()=>y,":first-child");return k.attr("class","basic label-container outer-path"),h&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),Et(t,k),t.intersect=function(S){return ht.polygon(t,x,S)},a}N(dO,"stadium");async function hO(e,t){return xm(e,t,{rx:5,ry:5})}N(hO,"state");function gO(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=wt(t);t.labelStyle=n;const{cssStyles:o}=t,{lineColor:l,stateBorder:u,nodeBorder:d}=r,h=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),f=vt.svg(h),p=kt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=f.circle(0,0,14,{...p,stroke:l,strokeWidth:2}),b=u??d,y=f.circle(0,0,5,{...p,fill:b,stroke:b,strokeWidth:2,fillStyle:"solid"}),k=h.insert(()=>x,":first-child");return k.insert(()=>y),o&&k.selectAll("path").attr("style",o),a&&k.selectAll("path").attr("style",a),Et(t,k),t.intersect=function(S){return ht.circle(t,7,S)},h}N(gO,"stateEnd");function fO(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let o;if(t.look==="handDrawn"){const u=vt.svg(a).circle(0,0,14,zJ(n));o=a.insert(()=>u),o.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else o=a.insert("circle",":first-child"),o.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Et(t,o),t.intersect=function(l){return ht.circle(t,7,l)},a}N(fO,"stateStart");async function pO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=(t?.padding||0)/2,u=o.width+t.padding,d=o.height+t.padding,h=-o.width/2-l,f=-o.height/2-l,p=[{x:0,y:0},{x:u,y:0},{x:u,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:u+8,y:0},{x:u+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if(t.look==="handDrawn"){const x=vt.svg(a),b=kt(t,{}),y=x.rectangle(h-8,f,u+16,d,b),k=x.line(h,f,h,f+d,b),S=x.line(h+u,f,h+u,f+d,b);a.insert(()=>k,":first-child"),a.insert(()=>S,":first-child");const _=a.insert(()=>y,":first-child"),{cssStyles:T}=t;_.attr("class","basic label-container").attr("style",_a(T)),Et(t,_)}else{const x=dl(a,u,d,p);n&&x.attr("style",n),Et(t,x)}return t.intersect=function(x){return ht.polygon(t,p,x)},a}N(pO,"subroutine");async function mO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=Math.max(o.width+(t.padding??0)*2,t?.width??0),u=Math.max(o.height+(t.padding??0)*2,t?.height??0),d=-l/2,h=-u/2,f=.2*u,p=.2*u,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{}),k=[{x:d-f/2,y:h},{x:d+l+f/2,y:h},{x:d+l+f/2,y:h+u},{x:d-f/2,y:h+u}],S=[{x:d+l-f/2,y:h+u},{x:d+l+f/2,y:h+u},{x:d+l+f/2,y:h+u-p}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=_r(k),T=b.path(_,y),A=_r(S),I=b.path(A,{...y,fillStyle:"solid"}),O=a.insert(()=>I,":first-child");return O.insert(()=>T,":first-child"),O.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",n),Et(t,O),t.intersect=function(B){return ht.polygon(t,k,B)},a}N(mO,"taggedRect");async function xO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=d/4,f=.2*u,p=.2*d,x=d+h,{cssStyles:b}=t,y=vt.svg(a),k=kt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=[{x:-u/2-u/2*.1,y:x/2},...al(-u/2-u/2*.1,x/2,u/2+u/2*.1,x/2,h,.8),{x:u/2+u/2*.1,y:-x/2},{x:-u/2-u/2*.1,y:-x/2}],_=-u/2+u/2*.1,T=-x/2-p*.4,A=[{x:_+u-f,y:(T+d)*1.4},{x:_+u,y:T+d-p},{x:_+u,y:(T+d)*.9},...al(_+u,(T+d)*1.3,_+u-f,(T+d)*1.5,-d*.03,.5)],I=_r(S),O=y.path(I,k),B=_r(A),F=y.path(B,{...k,fillStyle:"solid"}),ae=a.insert(()=>F,":first-child");return ae.insert(()=>O,":first-child"),ae.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",n),ae.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-u/2+(t.padding??0)-(o.x-(o.left??0))},${-d/2+(t.padding??0)-h/2-(o.y-(o.top??0))})`),Et(t,ae),t.intersect=function(Z){return ht.polygon(t,S,Z)},a}N(xO,"taggedWaveEdgedRectangle");async function bO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=Math.max(o.width+t.padding,t?.width||0),u=Math.max(o.height+t.padding,t?.height||0),d=-l/2,h=-u/2,f=a.insert("rect",":first-child");return f.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",d).attr("y",h).attr("width",l).attr("height",u),Et(t,f),t.intersect=function(p){return ht.rect(t,p)},a}N(bO,"text");var Nae=N((e,t,r,n,a,o)=>`M${e},${t}
    a${a},${o} 0,0,1 0,${-n}
    l${r},0
    a${a},${o} 0,0,1 0,${n}
    M${r},${-n}
    a${a},${o} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),Aae=N((e,t,r,n,a,o)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${o} 0,0,0 0,${-n}`,`l${-r},0`,`a${a},${o} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),Lae=N((e,t,r,n,a,o)=>[`M${e+r/2},${-n/2}`,`a${a},${o} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function yO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l,halfPadding:u}=await Ft(e,t,It(t)),d=t.look==="neo"?u*2:u,h=o.height+d,f=h/2,p=f/(2.5+h/50),x=o.width+p+d,{cssStyles:b}=t;let y;if(t.look==="handDrawn"){const k=vt.svg(a),S=Aae(0,0,x,h,p,f),_=Lae(0,0,x,h,p,f),T=k.path(S,kt(t,{})),A=k.path(_,kt(t,{fill:"none"}));y=a.insert(()=>A,":first-child"),y=a.insert(()=>T,":first-child"),y.attr("class","basic label-container"),b&&y.attr("style",b)}else{const k=Nae(0,0,x,h,p,f);y=a.insert("path",":first-child").attr("d",k).attr("class","basic label-container").attr("style",_a(b)).attr("style",n),y.attr("class","basic label-container"),b&&y.selectAll("path").attr("style",b),n&&y.selectAll("path").attr("style",n)}return y.attr("label-offset-x",p),y.attr("transform",`translate(${-x/2}, ${h/2} )`),l.attr("transform",`translate(${-(o.width/2)-p-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),Et(t,y),t.intersect=function(k){const S=ht.rect(t,k),_=S.y-(t.y??0);if(f!=0&&(Math.abs(_)<(t.height??0)/2||Math.abs(_)==(t.height??0)/2&&Math.abs(S.x-(t.x??0))>(t.width??0)/2-p)){let T=p*p*(1-_*_/(f*f));T!=0&&(T=Math.sqrt(Math.abs(T))),T=p-T,k.x-(t.x??0)>0&&(T=-T),S.x+=T}return S},a}N(yO,"tiltedCylinder");async function vO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=o.width+t.padding,u=o.height+t.padding,d=[{x:-3*u/6,y:0},{x:l+3*u/6,y:0},{x:l,y:-u},{x:0,y:-u}];let h;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=vt.svg(a),x=kt(t,{}),b=_r(d),y=p.path(b,x);h=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${u/2})`),f&&h.attr("style",f)}else h=dl(a,l,u,d);return n&&h.attr("style",n),t.width=l,t.height=u,Et(t,h),t.intersect=function(p){return ht.polygon(t,d,p)},a}N(vO,"trapezoid");async function kO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=60,u=20,d=Math.max(l,o.width+(t.padding??0)*2,t?.width??0),h=Math.max(u,o.height+(t.padding??0)*2,t?.height??0),{cssStyles:f}=t,p=vt.svg(a),x=kt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-d/2*.8,y:-h/2},{x:d/2*.8,y:-h/2},{x:d/2,y:-h/2*.6},{x:d/2,y:h/2},{x:-d/2,y:h/2},{x:-d/2,y:-h/2*.6}],y=_r(b),k=p.path(y,x),S=a.insert(()=>k,":first-child");return S.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),Et(t,S),t.intersect=function(_){return ht.polygon(t,b,_)},a}N(kO,"trapezoidalPentagon");async function wO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Jn(Yr().flowchart?.htmlLabels),d=o.width+(t.padding??0),h=d+o.height,f=d+o.height,p=[{x:0,y:0},{x:f,y:0},{x:f/2,y:-h}],{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=_r(p),S=b.path(k,y),_=a.insert(()=>S,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return x&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",x),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),t.width=d,t.height=h,Et(t,_),l.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${h/2-(o.height+(t.padding??0)/(u?2:1)-(o.y-(o.top??0)))})`),t.intersect=function(T){return ze.info("Triangle intersect",t,p,T),ht.polygon(t,p,T)},a}N(wO,"triangle");async function EO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=d/8,f=d+h,{cssStyles:p}=t,b=70-u,y=b>0?b/2:0,k=vt.svg(a),S=kt(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const _=[{x:-u/2-y,y:f/2},...al(-u/2-y,f/2,u/2+y,f/2,h,.8),{x:u/2+y,y:-f/2},{x:-u/2-y,y:-f/2}],T=_r(_),A=k.path(T,S),I=a.insert(()=>A,":first-child");return I.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-u/2+(t.padding??0)-(o.x-(o.left??0))},${-d/2+(t.padding??0)-h-(o.y-(o.top??0))})`),Et(t,I),t.intersect=function(O){return ht.polygon(t,_,O)},a}N(EO,"waveEdgedRectangle");async function _O(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o}=await Ft(e,t,It(t)),l=100,u=50,d=Math.max(o.width+(t.padding??0)*2,t?.width??0),h=Math.max(o.height+(t.padding??0)*2,t?.height??0),f=d/h;let p=d,x=h;p>x*f?x=p/f:p=x*f,p=Math.max(p,l),x=Math.max(x,u);const b=Math.min(x*.2,x/4),y=x+b*2,{cssStyles:k}=t,S=vt.svg(a),_=kt(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const T=[{x:-p/2,y:y/2},...al(-p/2,y/2,p/2,y/2,b,1),{x:p/2,y:-y/2},...al(p/2,-y/2,-p/2,-y/2,b,-1)],A=_r(T),I=S.path(A,_),O=a.insert(()=>I,":first-child");return O.attr("class","basic label-container"),k&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",k),n&&t.look!=="handDrawn"&&O.selectAll("path").attr("style",n),Et(t,O),t.intersect=function(B){return ht.polygon(t,T,B)},a}N(_O,"waveRectangle");async function SO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,label:l}=await Ft(e,t,It(t)),u=Math.max(o.width+(t.padding??0)*2,t?.width??0),d=Math.max(o.height+(t.padding??0)*2,t?.height??0),h=5,f=-u/2,p=-d/2,{cssStyles:x}=t,b=vt.svg(a),y=kt(t,{}),k=[{x:f-h,y:p-h},{x:f-h,y:p+d},{x:f+u,y:p+d},{x:f+u,y:p-h}],S=`M${f-h},${p-h} L${f+u},${p-h} L${f+u},${p+d} L${f-h},${p+d} L${f-h},${p-h}
                M${f-h},${p} L${f+u},${p}
                M${f},${p-h} L${f},${p+d}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=b.path(S,y),T=a.insert(()=>_,":first-child");return T.attr("transform",`translate(${h/2}, ${h/2})`),T.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),l.attr("transform",`translate(${-(o.width/2)+h/2-(o.x-(o.left??0))}, ${-(o.height/2)+h/2-(o.y-(o.top??0))})`),Et(t,T),t.intersect=function(A){return ht.polygon(t,k,A)},a}N(SO,"windowPane");async function U2(e,t){const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:Y}=wa(),{background:R}=Y,H={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${R}`]};await U2(e,H)}const n=wa();t.useHtmlLabels=n.htmlLabels;let a=n.er?.diagramPadding??10,o=n.er?.entityPadding??6;const{cssStyles:l}=t,{labelStyles:u,nodeStyles:d}=wt(t);if(r.attributes.length===0&&t.label){const Y={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};fo(t.label,n)+Y.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const R=await xm(e,t,Y);if(!Jn(n.htmlLabels)){const H=R.select("text"),ne=H.node()?.getBBox();H.attr("transform",`translate(${-ne.width/2}, 0)`)}return R}n.htmlLabels||(a*=1.25,o*=1.25);let h=It(t);h||(h="node default");const f=e.insert("g").attr("class",h).attr("id",t.domId||t.id),p=await fu(f,t.label??"",n,0,0,["name"],u);p.height+=o;let x=0;const b=[],y=[];let k=0,S=0,_=0,T=0,A=!0,I=!0;for(const Y of r.attributes){const R=await fu(f,Y.type,n,0,x,["attribute-type"],u);k=Math.max(k,R.width+a);const H=await fu(f,Y.name,n,0,x,["attribute-name"],u);S=Math.max(S,H.width+a);const ne=await fu(f,Y.keys.join(),n,0,x,["attribute-keys"],u);_=Math.max(_,ne.width+a);const re=await fu(f,Y.comment,n,0,x,["attribute-comment"],u);T=Math.max(T,re.width+a);const fe=Math.max(R.height,H.height,ne.height,re.height)+o;y.push({yOffset:x,rowHeight:fe}),x+=fe}let O=4;_<=a&&(A=!1,_=0,O--),T<=a&&(I=!1,T=0,O--);const B=f.node().getBBox();if(p.width+a*2-(k+S+_+T)>0){const Y=p.width+a*2-(k+S+_+T);k+=Y/O,S+=Y/O,_>0&&(_+=Y/O),T>0&&(T+=Y/O)}const F=k+S+_+T,ae=vt.svg(f),Z=kt(t,{});t.look!=="handDrawn"&&(Z.roughness=0,Z.fillStyle="solid");let z=0;y.length>0&&(z=y.reduce((Y,R)=>Y+(R?.rowHeight??0),0));const ee=Math.max(B.width+a*2,t?.width||0,F),W=Math.max((z??0)+p.height,t?.height||0),$=-ee/2,L=-W/2;f.selectAll("g:not(:first-child)").each((Y,R,H)=>{const ne=jr(H[R]),re=ne.attr("transform");let fe=0,le=0;if(re){const ce=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(re);ce&&(fe=parseFloat(ce[1]),le=parseFloat(ce[2]),ne.attr("class").includes("attribute-name")?fe+=k:ne.attr("class").includes("attribute-keys")?fe+=k+S:ne.attr("class").includes("attribute-comment")&&(fe+=k+S+_))}ne.attr("transform",`translate(${$+a/2+fe}, ${le+L+p.height+o/2})`)}),f.select(".name").attr("transform","translate("+-p.width/2+", "+(L+o/2)+")");const q=ae.rectangle($,L,ee,W,Z),D=f.insert(()=>q,":first-child").attr("style",l.join("")),{themeVariables:X}=wa(),{rowEven:K,rowOdd:xe,nodeBorder:U}=X;b.push(0);for(const[Y,R]of y.entries()){const ne=(Y+1)%2===0&&R.yOffset!==0,re=ae.rectangle($,p.height+L+R?.yOffset,ee,R?.rowHeight,{...Z,fill:ne?K:xe,stroke:U});f.insert(()=>re,"g.label").attr("style",l.join("")).attr("class",`row-rect-${ne?"even":"odd"}`)}let M=ae.line($,p.height+L,ee+$,p.height+L,Z);f.insert(()=>M).attr("class","divider"),M=ae.line(k+$,p.height+L,k+$,W+L,Z),f.insert(()=>M).attr("class","divider"),A&&(M=ae.line(k+S+$,p.height+L,k+S+$,W+L,Z),f.insert(()=>M).attr("class","divider")),I&&(M=ae.line(k+S+_+$,p.height+L,k+S+_+$,W+L,Z),f.insert(()=>M).attr("class","divider"));for(const Y of b)M=ae.line($,p.height+L+Y,ee+$,p.height+L+Y,Z),f.insert(()=>M).attr("class","divider");if(Et(t,D),d&&t.look!=="handDrawn"){const R=d.split(";")?.filter(H=>H.includes("stroke"))?.map(H=>`${H}`).join("; ");f.selectAll("path").attr("style",R??""),f.selectAll(".row-rect-even path").attr("style",d)}return t.intersect=function(Y){return ht.rect(t,Y)},f}N(U2,"erBox");async function fu(e,t,r,n=0,a=0,o=[],l=""){const u=e.insert("g").attr("class",`label ${o.join(" ")}`).attr("transform",`translate(${n}, ${a})`).attr("style",l);t!==bT(t)&&(t=bT(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const d=u.node().appendChild(await cl(u,t,{width:fo(t,r)+100,style:l,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let f=d.children[0];for(f.textContent=f.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");f.childNodes[0];)f=f.childNodes[0],f.textContent=f.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=d.getBBox();if(Jn(r.htmlLabels)){const f=d.children[0];f.style.textAlign="start";const p=jr(d);h=f.getBoundingClientRect(),p.attr("width",h.width),p.attr("height",h.height)}return h}N(fu,"addText");async function TO(e,t,r,n,a=r.class.padding??12){const o=n?0:3,l=e.insert("g").attr("class",It(t)).attr("id",t.domId||t.id);let u=null,d=null,h=null,f=null,p=0,x=0,b=0;if(u=l.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const T=t.annotations[0];await Ah(u,{text:`${T}`},0),p=u.node().getBBox().height}d=l.insert("g").attr("class","label-group text"),await Ah(d,t,0,["font-weight: bolder"]);const y=d.node().getBBox();x=y.height,h=l.insert("g").attr("class","members-group text");let k=0;for(const T of t.members){const A=await Ah(h,T,k,[T.parseClassifier()]);k+=A+o}b=h.node().getBBox().height,b<=0&&(b=a/2),f=l.insert("g").attr("class","methods-group text");let S=0;for(const T of t.methods){const A=await Ah(f,T,S,[T.parseClassifier()]);S+=A+o}let _=l.node().getBBox();if(u!==null){const T=u.node().getBBox();u.attr("transform",`translate(${-T.width/2})`)}return d.attr("transform",`translate(${-y.width/2}, ${p})`),_=l.node().getBBox(),h.attr("transform",`translate(0, ${p+x+a*2})`),_=l.node().getBBox(),f.attr("transform",`translate(0, ${p+x+(b?b+a*4:a*2)})`),_=l.node().getBBox(),{shapeSvg:l,bbox:_}}N(TO,"textHelper");async function Ah(e,t,r,n=[]){const a=e.insert("g").attr("class","label").attr("style",n.join("; ")),o=wa();let l="useHtmlLabels"in t?t.useHtmlLabels:Jn(o.htmlLabels)??!0,u="";"text"in t?u=t.text:u=t.label,!l&&u.startsWith("\\")&&(u=u.substring(1)),Iu(u)&&(l=!0);const d=await cl(a,Xv(pc(u)),{width:fo(u,o)+50,classes:"markdown-node-label",useHtmlLabels:l},o);let h,f=1;if(l){const p=d.children[0],x=jr(d);f=p.innerHTML.split("<br>").length,p.innerHTML.includes("</math>")&&(f+=p.innerHTML.split("<mrow>").length-1);const b=p.getElementsByTagName("img");if(b){const y=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(k=>new Promise(S=>{function _(){if(k.style.display="flex",k.style.flexDirection="column",y){const T=o.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,I=parseInt(T,10)*5+"px";k.style.minWidth=I,k.style.maxWidth=I}else k.style.width="100%";S(k)}N(_,"setupImage"),setTimeout(()=>{k.complete&&_()}),k.addEventListener("error",_),k.addEventListener("load",_)})))}h=p.getBoundingClientRect(),x.attr("width",h.width),x.attr("height",h.height)}else{n.includes("font-weight: bolder")&&jr(d).selectAll("tspan").attr("font-weight",""),f=d.children.length;const p=d.children[0];(d.textContent===""||d.textContent.includes("&gt"))&&(p.textContent=u[0]+u.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),u[1]===" "&&(p.textContent=p.textContent[0]+" "+p.textContent.substring(1))),p.textContent==="undefined"&&(p.textContent=""),h=d.getBBox()}return a.attr("transform","translate(0,"+(-h.height/(2*f)+r)+")"),h.height}N(Ah,"addText");async function CO(e,t){const r=Yr(),n=r.class.padding??12,a=n,o=t.useHtmlLabels??Jn(r.htmlLabels)??!0,l=t;l.annotations=l.annotations??[],l.members=l.members??[],l.methods=l.methods??[];const{shapeSvg:u,bbox:d}=await TO(e,t,r,o,a),{labelStyles:h,nodeStyles:f}=wt(t);t.labelStyle=h,t.cssStyles=l.styles||"";const p=l.styles?.join(";")||f||"";t.cssStyles||(t.cssStyles=p.replaceAll("!important","").split(";"));const x=l.members.length===0&&l.methods.length===0&&!r.class?.hideEmptyMembersBox,b=vt.svg(u),y=kt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=d.width;let S=d.height;l.members.length===0&&l.methods.length===0?S+=a:l.members.length>0&&l.methods.length===0&&(S+=a*2);const _=-k/2,T=-S/2,A=b.rectangle(_-n,T-n-(x?n:l.members.length===0&&l.methods.length===0?-n/2:0),k+2*n,S+2*n+(x?n*2:l.members.length===0&&l.methods.length===0?-n:0),y),I=u.insert(()=>A,":first-child");I.attr("class","basic label-container");const O=I.node().getBBox();u.selectAll(".text").each((Z,z,ee)=>{const W=jr(ee[z]),$=W.attr("transform");let L=0;if($){const K=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);K&&(L=parseFloat(K[2]))}let q=L+T+n-(x?n:l.members.length===0&&l.methods.length===0?-n/2:0);o||(q-=4);let D=_;(W.attr("class").includes("label-group")||W.attr("class").includes("annotation-group"))&&(D=-W.node()?.getBBox().width/2||0,u.selectAll("text").each(function(X,K,xe){window.getComputedStyle(xe[K]).textAnchor==="middle"&&(D=0)})),W.attr("transform",`translate(${D}, ${q})`)});const B=u.select(".annotation-group").node().getBBox().height-(x?n/2:0)||0,F=u.select(".label-group").node().getBBox().height-(x?n/2:0)||0,ae=u.select(".members-group").node().getBBox().height-(x?n/2:0)||0;if(l.members.length>0||l.methods.length>0||x){const Z=b.line(O.x,B+F+T+n,O.x+O.width,B+F+T+n,y);u.insert(()=>Z).attr("class","divider").attr("style",p)}if(x||l.members.length>0||l.methods.length>0){const Z=b.line(O.x,B+F+ae+T+a*2+n,O.x+O.width,B+F+ae+T+n+a*2,y);u.insert(()=>Z).attr("class","divider").attr("style",p)}if(l.look!=="handDrawn"&&u.selectAll("path").attr("style",p),I.select(":nth-child(2)").attr("style",p),u.selectAll(".divider").select("path").attr("style",p),t.labelStyle?u.selectAll("span").attr("style",t.labelStyle):u.selectAll("span").attr("style",p),!o){const Z=RegExp(/color\s*:\s*([^;]*)/),z=Z.exec(p);if(z){const ee=z[0].replace("color","fill");u.selectAll("tspan").attr("style",ee)}else if(h){const ee=Z.exec(h);if(ee){const W=ee[0].replace("color","fill");u.selectAll("tspan").attr("style",W)}}}return Et(t,I),t.intersect=function(Z){return ht.rect(t,Z)},u}N(CO,"classBox");async function NO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const a=t,o=t,l=20,u=20,d="verifyMethod"in t,h=It(t),f=e.insert("g").attr("class",h).attr("id",t.domId??t.id);let p;d?p=await wi(f,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):p=await wi(f,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let x=p;const b=await wi(f,a.name,x,t.labelStyle+"; font-weight: bold;");if(x+=b+u,d){const B=await wi(f,`${a.requirementId?`ID: ${a.requirementId}`:""}`,x,t.labelStyle);x+=B;const F=await wi(f,`${a.text?`Text: ${a.text}`:""}`,x,t.labelStyle);x+=F;const ae=await wi(f,`${a.risk?`Risk: ${a.risk}`:""}`,x,t.labelStyle);x+=ae,await wi(f,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,x,t.labelStyle)}else{const B=await wi(f,`${o.type?`Type: ${o.type}`:""}`,x,t.labelStyle);x+=B,await wi(f,`${o.docRef?`Doc Ref: ${o.docRef}`:""}`,x,t.labelStyle)}const y=(f.node()?.getBBox().width??200)+l,k=(f.node()?.getBBox().height??200)+l,S=-y/2,_=-k/2,T=vt.svg(f),A=kt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const I=T.rectangle(S,_,y,k,A),O=f.insert(()=>I,":first-child");if(O.attr("class","basic label-container").attr("style",n),f.selectAll(".label").each((B,F,ae)=>{const Z=jr(ae[F]),z=Z.attr("transform");let ee=0,W=0;if(z){const D=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(z);D&&(ee=parseFloat(D[1]),W=parseFloat(D[2]))}const $=W-k/2;let L=S+l/2;(F===0||F===1)&&(L=ee),Z.attr("transform",`translate(${L}, ${$+l})`)}),x>p+b+u){const B=T.line(S,_+p+b+u,S+y,_+p+b+u,A);f.insert(()=>B).attr("style",n)}return Et(t,O),t.intersect=function(B){return ht.rect(t,B)},f}N(NO,"requirementBox");async function wi(e,t,r,n=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",n),o=Yr(),l=o.htmlLabels??!0,u=await cl(a,Xv(pc(t)),{width:fo(t,o)+50,classes:"markdown-node-label",useHtmlLabels:l,style:n},o);let d;if(l){const h=u.children[0],f=jr(u);d=h.getBoundingClientRect(),f.attr("width",d.width),f.attr("height",d.height)}else{const h=u.children[0];for(const f of h.children)f.textContent=f.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&f.setAttribute("style",n);d=u.getBBox(),d.height+=6}return a.attr("transform",`translate(${-d.width/2},${-d.height/2+r})`),d.height}N(wi,"addText");var jae=N(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function AO(e,t,{config:r}){const{labelStyles:n,nodeStyles:a}=wt(t);t.labelStyle=n||"";const o=10,l=t.width;t.width=(t.width??200)-10;const{shapeSvg:u,bbox:d,label:h}=await Ft(e,t,It(t)),f=t.padding||10;let p="",x;"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(p=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),x=u.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",p).attr("target","_blank"));const b={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,k;x?{label:y,bbox:k}=await ky(x,"ticket"in t&&t.ticket||"",b):{label:y,bbox:k}=await ky(u,"ticket"in t&&t.ticket||"",b);const{label:S,bbox:_}=await ky(u,"assigned"in t&&t.assigned||"",b);t.width=l;const T=10,A=t?.width||0,I=Math.max(k.height,_.height)/2,O=Math.max(d.height+T*2,t?.height||0)+I,B=-A/2,F=-O/2;h.attr("transform","translate("+(f-A/2)+", "+(-I-d.height/2)+")"),y.attr("transform","translate("+(f-A/2)+", "+(-I+d.height/2)+")"),S.attr("transform","translate("+(f+A/2-_.width-2*o)+", "+(-I+d.height/2)+")");let ae;const{rx:Z,ry:z}=t,{cssStyles:ee}=t;if(t.look==="handDrawn"){const W=vt.svg(u),$=kt(t,{}),L=Z||z?W.path(ul(B,F,A,O,Z||0),$):W.rectangle(B,F,A,O,$);ae=u.insert(()=>L,":first-child"),ae.attr("class","basic label-container").attr("style",ee||null)}else{ae=u.insert("rect",":first-child"),ae.attr("class","basic label-container __APA__").attr("style",a).attr("rx",Z??5).attr("ry",z??5).attr("x",B).attr("y",F).attr("width",A).attr("height",O);const W="priority"in t&&t.priority;if(W){const $=u.append("line"),L=B+2,q=F+Math.floor((Z??0)/2),D=F+O-Math.floor((Z??0)/2);$.attr("x1",L).attr("y1",q).attr("x2",L).attr("y2",D).attr("stroke-width","4").attr("stroke",jae(W))}}return Et(t,ae),t.height=O,t.intersect=function(W){return ht.rect(t,W)},u}N(AO,"kanbanItem");async function LO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,halfPadding:l,label:u}=await Ft(e,t,It(t)),d=o.width+10*l,h=o.height+8*l,f=.15*d,{cssStyles:p}=t,x=o.width+20,b=o.height+20,y=Math.max(d,x),k=Math.max(h,b);u.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`);let S;const _=`M0 0 
    a${f},${f} 1 0,0 ${y*.25},${-1*k*.1}
    a${f},${f} 1 0,0 ${y*.25},0
    a${f},${f} 1 0,0 ${y*.25},0
    a${f},${f} 1 0,0 ${y*.25},${k*.1}

    a${f},${f} 1 0,0 ${y*.15},${k*.33}
    a${f*.8},${f*.8} 1 0,0 0,${k*.34}
    a${f},${f} 1 0,0 ${-1*y*.15},${k*.33}

    a${f},${f} 1 0,0 ${-1*y*.25},${k*.15}
    a${f},${f} 1 0,0 ${-1*y*.25},0
    a${f},${f} 1 0,0 ${-1*y*.25},0
    a${f},${f} 1 0,0 ${-1*y*.25},${-1*k*.15}

    a${f},${f} 1 0,0 ${-1*y*.1},${-1*k*.33}
    a${f*.8},${f*.8} 1 0,0 0,${-1*k*.34}
    a${f},${f} 1 0,0 ${y*.1},${-1*k*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const T=vt.svg(a),A=kt(t,{}),I=T.path(_,A);S=a.insert(()=>I,":first-child"),S.attr("class","basic label-container").attr("style",_a(p))}else S=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",_);return S.attr("transform",`translate(${-y/2}, ${-k/2})`),Et(t,S),t.calcIntersect=function(T,A){return ht.rect(T,A)},t.intersect=function(T){return ze.info("Bang intersect",t,T),ht.rect(t,T)},a}N(LO,"bang");async function jO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,halfPadding:l,label:u}=await Ft(e,t,It(t)),d=o.width+2*l,h=o.height+2*l,f=.15*d,p=.25*d,x=.35*d,b=.2*d,{cssStyles:y}=t;let k;const S=`M0 0 
    a${f},${f} 0 0,1 ${d*.25},${-1*d*.1}
    a${x},${x} 1 0,1 ${d*.4},${-1*d*.1}
    a${p},${p} 1 0,1 ${d*.35},${d*.2}

    a${f},${f} 1 0,1 ${d*.15},${h*.35}
    a${b},${b} 1 0,1 ${-1*d*.15},${h*.65}

    a${p},${f} 1 0,1 ${-1*d*.25},${d*.15}
    a${x},${x} 1 0,1 ${-1*d*.5},0
    a${f},${f} 1 0,1 ${-1*d*.25},${-1*d*.15}

    a${f},${f} 1 0,1 ${-1*d*.1},${-1*h*.35}
    a${b},${b} 1 0,1 ${d*.1},${-1*h*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const _=vt.svg(a),T=kt(t,{}),A=_.path(S,T);k=a.insert(()=>A,":first-child"),k.attr("class","basic label-container").attr("style",_a(y))}else k=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",S);return u.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`),k.attr("transform",`translate(${-d/2}, ${-h/2})`),Et(t,k),t.calcIntersect=function(_,T){return ht.rect(_,T)},t.intersect=function(_){return ze.info("Cloud intersect",t,_),ht.rect(t,_)},a}N(jO,"cloud");async function MO(e,t){const{labelStyles:r,nodeStyles:n}=wt(t);t.labelStyle=r;const{shapeSvg:a,bbox:o,halfPadding:l,label:u}=await Ft(e,t,It(t)),d=o.width+8*l,h=o.height+2*l,f=5,p=`
    M${-d/2} ${h/2-f}
    v${-h+2*f}
    q0,-${f} ${f},-${f}
    h${d-2*f}
    q${f},0 ${f},${f}
    v${h-2*f}
    q0,${f} -${f},${f}
    h${-d+2*f}
    q-${f},0 -${f},-${f}
    Z
  `,x=a.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",p);return a.append("line").attr("class","node-line-").attr("x1",-d/2).attr("y1",h/2).attr("x2",d/2).attr("y2",h/2),u.attr("transform",`translate(${-o.width/2}, ${-o.height/2})`),a.append(()=>u.node()),Et(t,x),t.calcIntersect=function(b,y){return ht.rect(b,y)},t.intersect=function(b){return ht.rect(t,b)},a}N(MO,"defaultMindmapNode");async function RO(e,t){const r={padding:t.padding??0};return F2(e,t,r)}N(RO,"mindmapCircle");var Mae=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:uO},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:oO},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:dO},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:pO},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:OR},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:F2},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:LO},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:jO},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:aO},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:$R},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:QR},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:XR},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:vO},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:VR},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:DR},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:bO},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:TR},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:lO},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:fO},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:gO},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:FR},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:zR},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:LR},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:jR},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:MR},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:ZR},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:EO},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:UR},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:yO},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:JR},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:RR},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:IR},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:wO},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:SO},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:PR},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:kO},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:BR},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:cO},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:rO},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:tO},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:SR},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:AR},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:xO},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:mO},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:_O},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:sO},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:eO}],Rae=N(()=>{const t=[...Object.entries({state:hO,choice:CR,note:nO,rectWithTitle:iO,labelRect:KR,iconSquare:YR,iconCircle:qR,icon:HR,iconRounded:GR,imageSquare:WR,anchor:_R,kanbanItem:AO,mindmapCircle:RO,defaultMindmapNode:MO,classBox:CO,erBox:U2,requirementBox:NO}),...Mae.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),OO=Rae();function Oae(e){return e in OO}N(Oae,"isValidShape");var bm=new Map;async function IO(e,t,r){let n,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const o=t.shape?OO[t.shape]:void 0;if(!o)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let l;r.config.securityLevel==="sandbox"?l="_top":t.linkTarget&&(l=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",l??null),a=await o(n,t,r)}else a=await o(e,t,r),n=a;return t.tooltip&&a.attr("title",t.tooltip),bm.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}N(IO,"insertNode");var Fce=N((e,t)=>{bm.set(t.id,e)},"setNodeElem"),Uce=N(()=>{bm.clear()},"clear"),$ce=N(e=>{const t=bm.get(e.id);ze.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),Iae=N((e,t,r,n,a,o)=>{t.arrowTypeStart&&TC(e,"start",t.arrowTypeStart,r,n,a,o),t.arrowTypeEnd&&TC(e,"end",t.arrowTypeEnd,r,n,a,o)},"addEdgeMarkers"),Dae={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},TC=N((e,t,r,n,a,o,l)=>{const u=Dae[r];if(!u){ze.warn(`Unknown arrow type: ${r}`);return}const d=u.type,f=`${a}_${o}-${d}${t==="start"?"Start":"End"}`;if(l&&l.trim()!==""){const p=l.replace(/[^\dA-Za-z]/g,"_"),x=`${f}_${p}`;if(!document.getElementById(x)){const b=document.getElementById(f);if(b){const y=b.cloneNode(!0);y.id=x,y.querySelectorAll("path, circle, line").forEach(S=>{S.setAttribute("stroke",l),u.fill&&S.setAttribute("fill",l)}),b.parentNode?.appendChild(y)}}e.attr(`marker-${t}`,`url(${n}#${x})`)}else e.attr(`marker-${t}`,`url(${n}#${f})`)},"addEdgeMarker"),jp=new Map,ha=new Map,zce=N(()=>{jp.clear(),ha.clear()},"clear"),m0=N(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),Pae=N(async(e,t)=>{let r=Jn(Yr().flowchart.htmlLabels);const{labelStyles:n}=wt(t);t.labelStyle=n;const a=await cl(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});ze.info("abc82",t,t.labelType);const o=e.insert("g").attr("class","edgeLabel"),l=o.insert("g").attr("class","label").attr("data-id",t.id);l.node().appendChild(a);let u=a.getBBox();if(r){const h=a.children[0],f=jr(a);u=h.getBoundingClientRect(),f.attr("width",u.width),f.attr("height",u.height)}l.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),jp.set(t.id,o),t.width=u.width,t.height=u.height;let d;if(t.startLabelLeft){const h=await Gl(t.startLabelLeft,m0(t.labelStyle)),f=e.insert("g").attr("class","edgeTerminals"),p=f.insert("g").attr("class","inner");d=p.node().appendChild(h);const x=h.getBBox();p.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),ha.get(t.id)||ha.set(t.id,{}),ha.get(t.id).startLeft=f,Lh(d,t.startLabelLeft)}if(t.startLabelRight){const h=await Gl(t.startLabelRight,m0(t.labelStyle)),f=e.insert("g").attr("class","edgeTerminals"),p=f.insert("g").attr("class","inner");d=f.node().appendChild(h),p.node().appendChild(h);const x=h.getBBox();p.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),ha.get(t.id)||ha.set(t.id,{}),ha.get(t.id).startRight=f,Lh(d,t.startLabelRight)}if(t.endLabelLeft){const h=await Gl(t.endLabelLeft,m0(t.labelStyle)),f=e.insert("g").attr("class","edgeTerminals"),p=f.insert("g").attr("class","inner");d=p.node().appendChild(h);const x=h.getBBox();p.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),f.node().appendChild(h),ha.get(t.id)||ha.set(t.id,{}),ha.get(t.id).endLeft=f,Lh(d,t.endLabelLeft)}if(t.endLabelRight){const h=await Gl(t.endLabelRight,m0(t.labelStyle)),f=e.insert("g").attr("class","edgeTerminals"),p=f.insert("g").attr("class","inner");d=p.node().appendChild(h);const x=h.getBBox();p.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),f.node().appendChild(h),ha.get(t.id)||ha.set(t.id,{}),ha.get(t.id).endRight=f,Lh(d,t.endLabelRight)}return a},"insertEdgeLabel");function Lh(e,t){Yr().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}N(Lh,"setTerminalWidth");var Bae=N((e,t)=>{ze.debug("Moving label abc88 ",e.id,e.label,jp.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=Yr(),{subGraphTitleTotalMargin:a}=m2(n);if(e.label){const o=jp.get(e.id);let l=e.x,u=e.y;if(r){const d=ri.calcLabelPosition(r);ze.debug("Moving label "+e.label+" from (",l,",",u,") to (",d.x,",",d.y,") abc88"),t.updatedPath&&(l=d.x,u=d.y)}o.attr("transform",`translate(${l}, ${u+a/2})`)}if(e.startLabelLeft){const o=ha.get(e.id).startLeft;let l=e.x,u=e.y;if(r){const d=ri.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);l=d.x,u=d.y}o.attr("transform",`translate(${l}, ${u})`)}if(e.startLabelRight){const o=ha.get(e.id).startRight;let l=e.x,u=e.y;if(r){const d=ri.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);l=d.x,u=d.y}o.attr("transform",`translate(${l}, ${u})`)}if(e.endLabelLeft){const o=ha.get(e.id).endLeft;let l=e.x,u=e.y;if(r){const d=ri.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);l=d.x,u=d.y}o.attr("transform",`translate(${l}, ${u})`)}if(e.endLabelRight){const o=ha.get(e.id).endRight;let l=e.x,u=e.y;if(r){const d=ri.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);l=d.x,u=d.y}o.attr("transform",`translate(${l}, ${u})`)}},"positionEdgeLabel"),Fae=N((e,t)=>{const r=e.x,n=e.y,a=Math.abs(t.x-r),o=Math.abs(t.y-n),l=e.width/2,u=e.height/2;return a>=l||o>=u},"outsideNode"),Uae=N((e,t,r)=>{ze.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,a=e.y,o=Math.abs(n-r.x),l=e.width/2;let u=r.x<t.x?l-o:l+o;const d=e.height/2,h=Math.abs(t.y-r.y),f=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*l>Math.abs(n-t.x)*d){let p=r.y<t.y?t.y-d-a:a-d-t.y;u=f*p/h;const x={x:r.x<t.x?r.x+u:r.x-f+u,y:r.y<t.y?r.y+h-p:r.y-h+p};return u===0&&(x.x=t.x,x.y=t.y),f===0&&(x.x=t.x),h===0&&(x.y=t.y),ze.debug(`abc89 top/bottom calc, Q ${h}, q ${p}, R ${f}, r ${u}`,x),x}else{r.x<t.x?u=t.x-l-n:u=n-l-t.x;let p=h*u/f,x=r.x<t.x?r.x+f-u:r.x-f+u,b=r.y<t.y?r.y+p:r.y-p;return ze.debug(`sides calc abc89, Q ${h}, q ${p}, R ${f}, r ${u}`,{_x:x,_y:b}),u===0&&(x=t.x,b=t.y),f===0&&(x=t.x),h===0&&(b=t.y),{x,y:b}}},"intersection"),CC=N((e,t)=>{ze.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],a=!1;return e.forEach(o=>{if(ze.info("abc88 checking point",o,t),!Fae(t,o)&&!a){const l=Uae(t,n,o);ze.debug("abc88 inside",o,n,l),ze.debug("abc88 intersection",l,t);let u=!1;r.forEach(d=>{u=u||d.x===l.x&&d.y===l.y}),r.some(d=>d.x===l.x&&d.y===l.y)?ze.warn("abc88 no intersect",l,r):r.push(l),a=!0}else ze.warn("abc88 outside",o,n),n=o,a||r.push(o)}),ze.debug("returning points",r),r},"cutPathAtIntersect");function DO(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const a=e[n-1],o=e[n],l=e[n+1];(a.x===o.x&&o.y===l.y&&Math.abs(o.x-l.x)>5&&Math.abs(o.y-a.y)>5||a.y===o.y&&o.x===l.x&&Math.abs(o.x-a.x)>5&&Math.abs(o.y-l.y)>5)&&(t.push(o),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}N(DO,"extractCornerPoints");var NC=N(function(e,t,r){const n=t.x-e.x,a=t.y-e.y,o=Math.sqrt(n*n+a*a),l=r/o;return{x:t.x-l*n,y:t.y-l*a}},"findAdjacentPoint"),$ae=N(function(e){const{cornerPointPositions:t}=DO(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const a=e[n-1],o=e[n+1],l=e[n],u=NC(a,l,5),d=NC(o,l,5),h=d.x-u.x,f=d.y-u.y;r.push(u);const p=Math.sqrt(2)*2;let x={x:l.x,y:l.y};if(Math.abs(o.x-a.x)>10&&Math.abs(o.y-a.y)>=10){ze.debug("Corner point fixing",Math.abs(o.x-a.x),Math.abs(o.y-a.y));const b=5;l.x===u.x?x={x:h<0?u.x-b+p:u.x+b-p,y:f<0?u.y-p:u.y+p}:x={x:h<0?u.x-p:u.x+p,y:f<0?u.y-b+p:u.y+b-p}}else ze.debug("Corner point skipping fixing",Math.abs(o.x-a.x),Math.abs(o.y-a.y));r.push(x,d)}else r.push(e[n]);return r},"fixCorners"),zae=N((e,t,r)=>{const n=e-t-r,a=2,o=2,l=a+o,u=Math.floor(n/l),d=Array(u).fill(`${a} ${o}`).join(" ");return`0 ${t} ${d} ${r}`},"generateDashArray"),Hae=N(function(e,t,r,n,a,o,l,u=!1){const{handDrawnSeed:d}=Yr();let h=t.points,f=!1;const p=a;var x=o;const b=[];for(const L in t.cssCompiledStyles)gM(L)||b.push(t.cssCompiledStyles[L]);ze.debug("UIO intersect check",t.points,x.x,p.x),x.intersect&&p.intersect&&!u&&(h=h.slice(1,t.points.length-1),h.unshift(p.intersect(h[0])),ze.debug("Last point UIO",t.start,"-->",t.end,h[h.length-1],x,x.intersect(h[h.length-1])),h.push(x.intersect(h[h.length-1])));const y=btoa(JSON.stringify(h));t.toCluster&&(ze.info("to cluster abc88",r.get(t.toCluster)),h=CC(t.points,r.get(t.toCluster).node),f=!0),t.fromCluster&&(ze.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(h,null,2)),h=CC(h.reverse(),r.get(t.fromCluster).node).reverse(),f=!0);let k=h.filter(L=>!Number.isNaN(L.y));k=$ae(k);let S=M0;switch(S=lp,t.curve){case"linear":S=lp;break;case"basis":S=M0;break;case"cardinal":S=xL;break;case"bumpX":S=hL;break;case"bumpY":S=gL;break;case"catmullRom":S=yL;break;case"monotoneX":S=SL;break;case"monotoneY":S=TL;break;case"natural":S=NL;break;case"step":S=AL;break;case"stepAfter":S=jL;break;case"stepBefore":S=LL;break;default:S=M0}const{x:_,y:T}=$J(t),A=_Z().x(_).y(T).curve(S);let I;switch(t.thickness){case"normal":I="edge-thickness-normal";break;case"thick":I="edge-thickness-thick";break;case"invisible":I="edge-thickness-invisible";break;default:I="edge-thickness-normal"}switch(t.pattern){case"solid":I+=" edge-pattern-solid";break;case"dotted":I+=" edge-pattern-dotted";break;case"dashed":I+=" edge-pattern-dashed";break;default:I+=" edge-pattern-solid"}let O,B=t.curve==="rounded"?PO(BO(k,t),5):A(k);const F=Array.isArray(t.style)?t.style:[t.style];let ae=F.find(L=>L?.startsWith("stroke:")),Z=!1;if(t.look==="handDrawn"){const L=vt.svg(e);Object.assign([],k);const q=L.path(B,{roughness:.3,seed:d});I+=" transition",O=jr(q).select("path").attr("id",t.id).attr("class"," "+I+(t.classes?" "+t.classes:"")).attr("style",F?F.reduce((X,K)=>X+";"+K,""):"");let D=O.attr("d");O.attr("d",D),e.node().appendChild(O.node())}else{const L=b.join(";"),q=F?F.reduce((Y,R)=>Y+R+";",""):"";let D="";t.animate&&(D=" edge-animation-fast"),t.animation&&(D=" edge-animation-"+t.animation);const X=(L?L+";"+q+";":q)+";"+(F?F.reduce((Y,R)=>Y+";"+R,""):"");O=e.append("path").attr("d",B).attr("id",t.id).attr("class"," "+I+(t.classes?" "+t.classes:"")+(D??"")).attr("style",X),ae=X.match(/stroke:([^;]+)/)?.[1],Z=t.animate===!0||!!t.animation||L.includes("animation");const K=O.node(),xe=typeof K.getTotalLength=="function"?K.getTotalLength():0,U=GT[t.arrowTypeStart]||0,M=GT[t.arrowTypeEnd]||0;if(t.look==="neo"&&!Z){const R=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?zae(xe,U,M):`0 ${U} ${xe-U-M} ${M}`}; stroke-dashoffset: 0;`;O.attr("style",R+O.attr("style"))}}O.attr("data-edge",!0),O.attr("data-et","edge"),O.attr("data-id",t.id),O.attr("data-points",y),t.showPoints&&k.forEach(L=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",L.x).attr("cy",L.y)});let z="";(Yr().flowchart.arrowMarkerAbsolute||Yr().state.arrowMarkerAbsolute)&&(z=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,z=z.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ze.info("arrowTypeStart",t.arrowTypeStart),ze.info("arrowTypeEnd",t.arrowTypeEnd),Iae(O,t,z,l,n,ae);const ee=Math.floor(h.length/2),W=h[ee];ri.isLabelCoordinateInPath(W,O.attr("d"))||(f=!0);let $={};return f&&($.updatedPath=h),$.originalPath=t.points,$},"insertEdge");function PO(e,t){if(e.length<2)return"";let r="";const n=e.length,a=1e-5;for(let o=0;o<n;o++){const l=e[o],u=e[o-1],d=e[o+1];if(o===0)r+=`M${l.x},${l.y}`;else if(o===n-1)r+=`L${l.x},${l.y}`;else{const h=l.x-u.x,f=l.y-u.y,p=d.x-l.x,x=d.y-l.y,b=Math.hypot(h,f),y=Math.hypot(p,x);if(b<a||y<a){r+=`L${l.x},${l.y}`;continue}const k=h/b,S=f/b,_=p/y,T=x/y,A=k*_+S*T,I=Math.max(-1,Math.min(1,A)),O=Math.acos(I);if(O<a||Math.abs(Math.PI-O)<a){r+=`L${l.x},${l.y}`;continue}const B=Math.min(t/Math.sin(O/2),b/2,y/2),F=l.x-k*B,ae=l.y-S*B,Z=l.x+_*B,z=l.y+T*B;r+=`L${F},${ae}`,r+=`Q${l.x},${l.y} ${Z},${z}`}}return r}N(PO,"generateRoundedPath");function Z1(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}N(Z1,"calculateDeltaAndAngle");function BO(e,t){const r=e.map(a=>({...a}));if(e.length>=2&&va[t.arrowTypeStart]){const a=va[t.arrowTypeStart],o=e[0],l=e[1],{angle:u}=Z1(o,l),d=a*Math.cos(u),h=a*Math.sin(u);r[0].x=o.x+d,r[0].y=o.y+h}const n=e.length;if(n>=2&&va[t.arrowTypeEnd]){const a=va[t.arrowTypeEnd],o=e[n-1],l=e[n-2],{angle:u}=Z1(l,o),d=a*Math.cos(u),h=a*Math.sin(u);r[n-1].x=o.x-d,r[n-1].y=o.y-h}return r}N(BO,"applyMarkerOffsetsToPoints");var qae=N((e,t,r,n)=>{t.forEach(a=>{ise[a](e,r,n)})},"insertMarkers"),Gae=N((e,t,r)=>{ze.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),Yae=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),Wae=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Vae=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),Kae=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),Xae=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Qae=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),Zae=N((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Jae=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),ese=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),tse=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),rse=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),nse=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),ase=N((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),sse=N((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),ise={extension:Gae,composition:Yae,aggregation:Wae,dependency:Vae,lollipop:Kae,point:Xae,circle:Qae,cross:Zae,barb:Jae,only_one:ese,zero_or_one:tse,one_or_more:rse,zero_or_more:nse,requirement_arrow:ase,requirement_contains:sse},ose=qae,lse={common:ed,getConfig:wa,insertCluster:mae,insertEdge:Hae,insertEdgeLabel:Pae,insertMarkers:ose,insertNode:IO,interpolateToCurve:k2,labelHelper:Ft,log:ze,positionEdgeLabel:Bae},dg={},FO=N(e=>{for(const t of e)dg[t.name]=t},"registerLayoutLoaders"),cse=N(()=>{FO([{name:"dagre",loader:N(async()=>await tr(()=>import("./dagre-6UL2VRFP-WlI3BDXm.js"),__vite__mapDeps([5,6,7,8,9,10])),"loader")},{name:"cose-bilkent",loader:N(async()=>await tr(()=>import("./cose-bilkent-S5V4N54A-Y21l8uwM.js"),__vite__mapDeps([11,12])),"loader")}])},"registerDefaultLayoutLoaders");cse();var Hce=N(async(e,t)=>{if(!(e.layoutAlgorithm in dg))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=dg[e.layoutAlgorithm];return(await r.loader()).render(e,t,lse,{algorithm:r.algorithm})},"render"),qce=N((e="",{fallback:t="dagre"}={})=>{if(e in dg)return e;if(t in dg)return ze.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),UO="comm",$O="rule",zO="decl",use="@import",dse="@namespace",hse="@keyframes",gse="@layer",HO=Math.abs,$2=String.fromCharCode;function qO(e){return e.trim()}function P0(e,t,r){return e.replace(t,r)}function fse(e,t,r){return e.indexOf(t,r)}function wu(e,t){return e.charCodeAt(t)|0}function Uu(e,t,r){return e.slice(t,r)}function _i(e){return e.length}function pse(e){return e.length}function x0(e,t){return t.push(e),e}var ym=1,$u=1,GO=0,Us=0,qn=0,sd="";function z2(e,t,r,n,a,o,l,u){return{value:e,root:t,parent:r,type:n,props:a,children:o,line:ym,column:$u,length:l,return:"",siblings:u}}function mse(){return qn}function xse(){return qn=Us>0?wu(sd,--Us):0,$u--,qn===10&&($u=1,ym--),qn}function si(){return qn=Us<GO?wu(sd,Us++):0,$u++,qn===10&&($u=1,ym++),qn}function Jo(){return wu(sd,Us)}function B0(){return Us}function vm(e,t){return Uu(sd,e,t)}function hg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bse(e){return ym=$u=1,GO=_i(sd=e),Us=0,[]}function yse(e){return sd="",e}function wy(e){return qO(vm(Us-1,J1(e===91?e+2:e===40?e+1:e)))}function vse(e){for(;(qn=Jo())&&qn<33;)si();return hg(e)>2||hg(qn)>3?"":" "}function kse(e,t){for(;--t&&si()&&!(qn<48||qn>102||qn>57&&qn<65||qn>70&&qn<97););return vm(e,B0()+(t<6&&Jo()==32&&si()==32))}function J1(e){for(;si();)switch(qn){case e:return Us;case 34:case 39:e!==34&&e!==39&&J1(qn);break;case 40:e===41&&J1(e);break;case 92:si();break}return Us}function wse(e,t){for(;si()&&e+qn!==57;)if(e+qn===84&&Jo()===47)break;return"/*"+vm(t,Us-1)+"*"+$2(e===47?e:si())}function Ese(e){for(;!hg(Jo());)si();return vm(e,Us)}function _se(e){return yse(F0("",null,null,null,[""],e=bse(e),0,[0],e))}function F0(e,t,r,n,a,o,l,u,d){for(var h=0,f=0,p=l,x=0,b=0,y=0,k=1,S=1,_=1,T=0,A="",I=a,O=o,B=n,F=A;S;)switch(y=T,T=si()){case 40:if(y!=108&&wu(F,p-1)==58){fse(F+=P0(wy(T),"&","&\f"),"&\f",HO(h?u[h-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:F+=wy(T);break;case 9:case 10:case 13:case 32:F+=vse(y);break;case 92:F+=kse(B0()-1,7);continue;case 47:switch(Jo()){case 42:case 47:x0(Sse(wse(si(),B0()),t,r,d),d),(hg(y||1)==5||hg(Jo()||1)==5)&&_i(F)&&Uu(F,-1,void 0)!==" "&&(F+=" ");break;default:F+="/"}break;case 123*k:u[h++]=_i(F)*_;case 125*k:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:_==-1&&(F=P0(F,/\f/g,"")),b>0&&(_i(F)-p||k===0&&y===47)&&x0(b>32?LC(F+";",n,r,p-1,d):LC(P0(F," ","")+";",n,r,p-2,d),d);break;case 59:F+=";";default:if(x0(B=AC(F,t,r,h,f,a,u,A,I=[],O=[],p,o),o),T===123)if(f===0)F0(F,t,B,B,I,o,p,u,O);else{switch(x){case 99:if(wu(F,3)===110)break;case 108:if(wu(F,2)===97)break;default:f=0;case 100:case 109:case 115:}f?F0(e,B,B,n&&x0(AC(e,B,B,0,0,a,u,A,a,I=[],p,O),O),a,O,p,u,n?I:O):F0(F,B,B,B,[""],O,0,u,O)}}h=f=b=0,k=_=1,A=F="",p=l;break;case 58:p=1+_i(F),b=y;default:if(k<1){if(T==123)--k;else if(T==125&&k++==0&&xse()==125)continue}switch(F+=$2(T),T*k){case 38:_=f>0?1:(F+="\f",-1);break;case 44:u[h++]=(_i(F)-1)*_,_=1;break;case 64:Jo()===45&&(F+=wy(si())),x=Jo(),f=p=_i(A=F+=Ese(B0())),T++;break;case 45:y===45&&_i(F)==2&&(k=0)}}return o}function AC(e,t,r,n,a,o,l,u,d,h,f,p){for(var x=a-1,b=a===0?o:[""],y=pse(b),k=0,S=0,_=0;k<n;++k)for(var T=0,A=Uu(e,x+1,x=HO(S=l[k])),I=e;T<y;++T)(I=qO(S>0?b[T]+" "+A:P0(A,/&\f/g,b[T])))&&(d[_++]=I);return z2(e,t,r,a===0?$O:u,d,h,f,p)}function Sse(e,t,r,n){return z2(e,t,r,UO,$2(mse()),Uu(e,2,-2),0,n)}function LC(e,t,r,n,a){return z2(e,t,r,zO,Uu(e,0,n),Uu(e,n+1,-1),n,a)}function ev(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function Tse(e,t,r,n){switch(e.type){case gse:if(e.children.length)break;case use:case dse:case zO:return e.return=e.return||e.value;case UO:return"";case hse:return e.return=e.value+"{"+ev(e.children,n)+"}";case $O:if(!_i(e.value=e.props.join(",")))return""}return _i(r=ev(e.children,n))?e.return=e.value+"{"+r+"}":""}var Cse=xM(Object.keys,Object),Nse=Object.prototype,Ase=Nse.hasOwnProperty;function Lse(e){if(!cm(e))return Cse(e);var t=[];for(var r in Object(e))Ase.call(e,r)&&r!="constructor"&&t.push(r);return t}var tv=fc(Oi,"DataView"),rv=fc(Oi,"Promise"),nv=fc(Oi,"Set"),av=fc(Oi,"WeakMap"),jC="[object Map]",jse="[object Object]",MC="[object Promise]",RC="[object Set]",OC="[object WeakMap]",IC="[object DataView]",Mse=gc(tv),Rse=gc(cg),Ose=gc(rv),Ise=gc(nv),Dse=gc(av),Bl=rd;(tv&&Bl(new tv(new ArrayBuffer(1)))!=IC||cg&&Bl(new cg)!=jC||rv&&Bl(rv.resolve())!=MC||nv&&Bl(new nv)!=RC||av&&Bl(new av)!=OC)&&(Bl=function(e){var t=rd(e),r=t==jse?e.constructor:void 0,n=r?gc(r):"";if(n)switch(n){case Mse:return IC;case Rse:return jC;case Ose:return MC;case Ise:return RC;case Dse:return OC}return t});var Pse="[object Map]",Bse="[object Set]",Fse=Object.prototype,Use=Fse.hasOwnProperty;function DC(e){if(e==null)return!0;if(um(e)&&(kp(e)||typeof e=="string"||typeof e.splice=="function"||y2(e)||v2(e)||vp(e)))return!e.length;var t=Bl(e);if(t==Pse||t==Bse)return!e.size;if(cm(e))return!Lse(e).length;for(var r in e)if(Use.call(e,r))return!1;return!0}var YO="c4",$se=N(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),zse=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-u6NeRFy9.js");return{diagram:t}},__vite__mapDeps([13,14]));return{id:YO,diagram:e}},"loader"),Hse={id:YO,detector:$se,loader:zse},qse=Hse,WO="flowchart",Gse=N((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),Yse=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BeIeTt2h.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:WO,diagram:e}},"loader"),Wse={id:WO,detector:Gse,loader:Yse},Vse=Wse,VO="flowchart-v2",Kse=N((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),Xse=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BeIeTt2h.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:VO,diagram:e}},"loader"),Qse={id:VO,detector:Kse,loader:Xse},Zse=Qse,KO="er",Jse=N(e=>/^\s*erDiagram/.test(e),"detector"),eie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-C46H1YK5.js");return{diagram:t}},__vite__mapDeps([20,17,18,19]));return{id:KO,diagram:e}},"loader"),tie={id:KO,detector:Jse,loader:eie},rie=tie,XO="gitGraph",nie=N(e=>/^\s*gitGraph/.test(e),"detector"),aie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-X5gwygfV.js");return{diagram:t}},__vite__mapDeps([21,22,23,24,7,9,10]));return{id:XO,diagram:e}},"loader"),sie={id:XO,detector:nie,loader:aie},iie=sie,QO="gantt",oie=N(e=>/^\s*gantt/.test(e),"detector"),lie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./ganttDiagram-LVOFAZNH-CXYqBIx4.js");return{diagram:t}},__vite__mapDeps([25,26,27,28]));return{id:QO,diagram:e}},"loader"),cie={id:QO,detector:oie,loader:lie},uie=cie,ZO="info",die=N(e=>/^\s*info/.test(e),"detector"),hie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./infoDiagram-F6ZHWCRC-DZJZwvTR.js");return{diagram:t}},__vite__mapDeps([29,24,7,9,10]));return{id:ZO,diagram:e}},"loader"),gie={id:ZO,detector:die,loader:hie},JO="pie",fie=N(e=>/^\s*pie/.test(e),"detector"),pie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-DQMa4bWl.js");return{diagram:t}},__vite__mapDeps([30,22,24,7,9,10,31,32,27]));return{id:JO,diagram:e}},"loader"),mie={id:JO,detector:fie,loader:pie},eI="quadrantChart",xie=N(e=>/^\s*quadrantChart/.test(e),"detector"),bie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-BeoGtsLz.js");return{diagram:t}},__vite__mapDeps([33,26,27,28]));return{id:eI,diagram:e}},"loader"),yie={id:eI,detector:xie,loader:bie},vie=yie,tI="xychart",kie=N(e=>/^\s*xychart(-beta)?/.test(e),"detector"),wie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-BBueQarb.js");return{diagram:t}},__vite__mapDeps([34,27,32,26,28]));return{id:tI,diagram:e}},"loader"),Eie={id:tI,detector:kie,loader:wie},_ie=Eie,rI="requirement",Sie=N(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Tie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-DaeR3n35.js");return{diagram:t}},__vite__mapDeps([35,17,18]));return{id:rI,diagram:e}},"loader"),Cie={id:rI,detector:Sie,loader:Tie},Nie=Cie,nI="sequence",Aie=N(e=>/^\s*sequenceDiagram/.test(e),"detector"),Lie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-DSuOUt8w.js");return{diagram:t}},__vite__mapDeps([36,14,23]));return{id:nI,diagram:e}},"loader"),jie={id:nI,detector:Aie,loader:Lie},Mie=jie,aI="class",Rie=N((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),Oie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-CeaNHho-.js");return{diagram:t}},__vite__mapDeps([37,38,16,17,18]));return{id:aI,diagram:e}},"loader"),Iie={id:aI,detector:Rie,loader:Oie},Die=Iie,sI="classDiagram",Pie=N((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),Bie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-CeaNHho-.js");return{diagram:t}},__vite__mapDeps([39,38,16,17,18]));return{id:sI,diagram:e}},"loader"),Fie={id:sI,detector:Pie,loader:Bie},Uie=Fie,iI="state",$ie=N((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),zie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-n7c31U58.js");return{diagram:t}},__vite__mapDeps([40,41,17,18,6,7,8,9]));return{id:iI,diagram:e}},"loader"),Hie={id:iI,detector:$ie,loader:zie},qie=Hie,oI="stateDiagram",Gie=N((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),Yie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-B_-_vMty.js");return{diagram:t}},__vite__mapDeps([42,41,17,18]));return{id:oI,diagram:e}},"loader"),Wie={id:oI,detector:Gie,loader:Yie},Vie=Wie,lI="journey",Kie=N(e=>/^\s*journey/.test(e),"detector"),Xie=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-D8UQEYGo.js");return{diagram:t}},__vite__mapDeps([43,14,16,31]));return{id:lI,diagram:e}},"loader"),Qie={id:lI,detector:Kie,loader:Xie},Zie=Qie,Jie=N((e,t,r)=>{ze.debug(`rendering svg for syntax error
`);const n=RZ(t),a=n.append("g");n.attr("viewBox","0 0 2412 512"),I4(n,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),cI={draw:Jie},eoe=cI,toe={db:{},renderer:cI,parser:{parse:N(()=>{},"parse")}},roe=toe,uI="flowchart-elk",noe=N((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),aoe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BeIeTt2h.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:uI,diagram:e}},"loader"),soe={id:uI,detector:noe,loader:aoe},ioe=soe,dI="timeline",ooe=N(e=>/^\s*timeline/.test(e),"detector"),loe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-jcp9NHXV.js");return{diagram:t}},__vite__mapDeps([44,31]));return{id:dI,diagram:e}},"loader"),coe={id:dI,detector:ooe,loader:loe},uoe=coe,hI="mindmap",doe=N(e=>/^\s*mindmap/.test(e),"detector"),hoe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-BhW6gDgD.js");return{diagram:t}},__vite__mapDeps([45,17,18]));return{id:hI,diagram:e}},"loader"),goe={id:hI,detector:doe,loader:hoe},foe=goe,gI="kanban",poe=N(e=>/^\s*kanban/.test(e),"detector"),moe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-DvHVO7n1.js");return{diagram:t}},__vite__mapDeps([46,16]));return{id:gI,diagram:e}},"loader"),xoe={id:gI,detector:poe,loader:moe},boe=xoe,fI="sankey",yoe=N(e=>/^\s*sankey(-beta)?/.test(e),"detector"),voe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-DFPDgTor.js");return{diagram:t}},__vite__mapDeps([47,32,27]));return{id:fI,diagram:e}},"loader"),koe={id:fI,detector:yoe,loader:voe},woe=koe,pI="packet",Eoe=N(e=>/^\s*packet(-beta)?/.test(e),"detector"),_oe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-DVfxd0wK.js");return{diagram:t}},__vite__mapDeps([48,22,24,7,9,10]));return{id:pI,diagram:e}},"loader"),Soe={id:pI,detector:Eoe,loader:_oe},mI="radar",Toe=N(e=>/^\s*radar-beta/.test(e),"detector"),Coe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-DVFzKOGh.js");return{diagram:t}},__vite__mapDeps([49,22,24,7,9,10]));return{id:mI,diagram:e}},"loader"),Noe={id:mI,detector:Toe,loader:Coe},xI="block",Aoe=N(e=>/^\s*block(-beta)?/.test(e),"detector"),Loe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-BUjQx_D9.js");return{diagram:t}},__vite__mapDeps([50,16,10,7,6,19]));return{id:xI,diagram:e}},"loader"),joe={id:xI,detector:Aoe,loader:Loe},Moe=joe,bI="architecture",Roe=N(e=>/^\s*architecture/.test(e),"detector"),Ooe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-BHIOFW9T.js");return{diagram:t}},__vite__mapDeps([51,22,24,7,9,10,12]));return{id:bI,diagram:e}},"loader"),Ioe={id:bI,detector:Roe,loader:Ooe},Doe=Ioe,yI="treemap",Poe=N(e=>/^\s*treemap/.test(e),"detector"),Boe=N(async()=>{const{diagram:e}=await tr(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-p3557TFv.js");return{diagram:t}},__vite__mapDeps([52,18,22,24,7,9,10,28,32,27]));return{id:yI,diagram:e}},"loader"),Foe={id:yI,detector:Poe,loader:Boe},PC=!1,km=N(()=>{PC||(PC=!0,tp("error",roe,e=>e.toLowerCase().trim()==="error"),tp("---",{db:{clear:N(()=>{},"clear")},styles:{},renderer:{draw:N(()=>{},"draw")},parser:{parse:N(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:N(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),d1(ioe,foe,Doe),d1(qse,boe,Uie,Die,rie,uie,gie,mie,Nie,Mie,Zse,Vse,uoe,iie,Vie,qie,Zie,vie,woe,Soe,_ie,Moe,Noe,Foe))},"addDiagrams"),Uoe=N(async()=>{ze.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Jl).map(async([r,{detector:n,loader:a}])=>{if(a)try{p1(r)}catch{try{const{diagram:o,id:l}=await a();tp(l,o,n)}catch(o){throw ze.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete Jl[r],o}}}))).filter(r=>r.status==="rejected");if(t.length>0){ze.error(`Failed to load ${t.length} external diagrams`);for(const r of t)ze.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),$oe="graphics-document document";function vI(e,t){e.attr("role",$oe),t!==""&&e.attr("aria-roledescription",t)}N(vI,"setA11yDiagramInfo");function kI(e,t,r,n){if(e.insert!==void 0){if(r){const a=`chart-desc-${n}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${n}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}N(kI,"addSVGa11yTitleDescription");var Kl,sv=(Kl=class{constructor(t,r,n,a,o){this.type=t,this.text=r,this.db=n,this.parser=a,this.renderer=o}static async fromText(t,r={}){const n=wa(),a=qv(t,n);t=Fre(t)+`
`;try{p1(a)}catch{const h=cV(a);if(!h)throw new E4(`Diagram ${a} not found.`);const{id:f,diagram:p}=await h();tp(f,p)}const{db:o,parser:l,renderer:u,init:d}=p1(a);return l.parser&&(l.parser.yy=o),o.clear?.(),d?.(n),r.title&&o.setDiagramTitle?.(r.title),await l.parse(t),new Kl(a,t,o,l,u)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},N(Kl,"Diagram"),Kl),BC=[],zoe=N(()=>{BC.forEach(e=>{e()}),BC=[]},"attachFunctions"),Hoe=N(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function wI(e){const t=e.match(w4);if(!t)return{text:e,metadata:{}};let r=UJ(t[1],{schema:FJ})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}N(wI,"extractFrontMatter");var qoe=N(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),Goe=N(e=>{const{text:t,metadata:r}=wI(e),{displayMode:n,title:a,config:o={}}=r;return n&&(o.gantt||(o.gantt={}),o.gantt.displayMode=n),{title:a,config:o,text:t}},"processFrontmatter"),Yoe=N(e=>{const t=ri.detectInit(e)??{},r=ri.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:Tre(e),directive:t}},"processDirectives");function H2(e){const t=qoe(e),r=Goe(t),n=Yoe(r.text),a=T2(r.config,n.directive);return e=Hoe(n.text),{code:e,title:r.title,config:a}}N(H2,"preprocessDiagram");function EI(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}N(EI,"toBase64");var Woe=5e4,Voe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Koe="sandbox",Xoe="loose",Qoe="http://www.w3.org/2000/svg",Zoe="http://www.w3.org/1999/xlink",Joe="http://www.w3.org/1999/xhtml",ele="100%",tle="100%",rle="border:0;margin:0;",nle="margin:0",ale="allow-top-navigation-by-user-activation allow-popups",sle='The "iframe" tag is not supported by your browser.',ile=["foreignobject"],ole=["dominant-baseline"];function q2(e){const t=H2(e);return J0(),SV(t.config??{}),t}N(q2,"processAndSetConfigs");async function _I(e,t){km();try{const{code:r,config:n}=q2(e);return{diagramType:(await TI(r)).type,config:n}}catch(r){if(t?.suppressErrors)return!1;throw r}}N(_I,"parse");var FC=N((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),lle=N((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const l=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(u=>{DC(u.styles)||l.forEach(d=>{r+=FC(u.id,d,u.styles)}),DC(u.textStyles)||(r+=FC(u.id,"tspan",(u?.textStyles||[]).map(d=>d.replace("color","fill"))))})}return r},"createCssStyles"),cle=N((e,t,r,n)=>{const a=lle(e,r),o=GV(t,a,e.themeVariables);return ev(_se(`${n}{${o}}`),Tse)},"createUserStyles"),ule=N((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=pc(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),dle=N((e="",t)=>{const r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":tle,n=EI(`<body style="${nle}">${e}</body>`);return`<iframe style="width:${ele};height:${r};${rle}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${ale}">
  ${sle}
</iframe>`},"putIntoIFrame"),UC=N((e,t,r,n,a)=>{const o=e.append("div");o.attr("id",r),n&&o.attr("style",n);const l=o.append("svg").attr("id",t).attr("width","100%").attr("xmlns",Qoe);return a&&l.attr("xmlns:xlink",a),l.append("g"),e},"appendDivSvgG");function iv(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}N(iv,"sandboxedIframe");var hle=N((e,t,r,n)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),gle=N(async function(e,t,r){km();const n=q2(t);t=n.code;const a=wa();ze.debug(a),t.length>(a?.maxTextSize??Woe)&&(t=Voe);const o="#"+e,l="i"+e,u="#"+l,d="d"+e,h="#"+d,f=N(()=>{const $=jr(x?u:h).node();$&&"remove"in $&&$.remove()},"removeTempElements");let p=jr("body");const x=a.securityLevel===Koe,b=a.securityLevel===Xoe,y=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),x){const W=iv(jr(r),l);p=jr(W.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=jr(r);UC(p,e,d,`font-family: ${y}`,Zoe)}else{if(hle(document,e,d,l),x){const W=iv(jr("body"),l);p=jr(W.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=jr("body");UC(p,e,d)}let k,S;try{k=await sv.fromText(t,{title:n.title})}catch(W){if(a.suppressErrorRendering)throw f(),W;k=await sv.fromText("error"),S=W}const _=p.select(h).node(),T=k.type,A=_.firstChild,I=A.firstChild,O=k.renderer.getClasses?.(t,k),B=cle(a,T,O,o),F=document.createElement("style");F.innerHTML=B,A.insertBefore(F,I);try{await k.renderer.draw(t,e,iT.version,k)}catch(W){throw a.suppressErrorRendering?f():eoe.draw(t,e,iT.version),W}const ae=p.select(`${h} svg`),Z=k.db.getAccTitle?.(),z=k.db.getAccDescription?.();CI(T,ae,Z,z),p.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Joe);let ee=p.select(h).node().innerHTML;if(ze.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),ee=ule(ee,x,Jn(a.arrowMarkerAbsolute)),x){const W=p.select(h+" svg").node();ee=dle(ee,W)}else b||(ee=Ru.sanitize(ee,{ADD_TAGS:ile,ADD_ATTR:ole,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(zoe(),S)throw S;return f(),{diagramType:T,svg:ee,bindFunctions:k.db.bindFunctions}},"render");function SI(e={}){const t=Qn({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),EV(t),t?.theme&&t.theme in co?t.themeVariables=co[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=co.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?wV(t):N4();Hv(r.logLevel),km()}N(SI,"initialize");var TI=N((e,t={})=>{const{code:r}=H2(e);return sv.fromText(r,t)},"getDiagramFromText");function CI(e,t,r,n){vI(t,e),kI(t,r,n,t.attr("id"))}N(CI,"addA11yInfo");var sc=Object.freeze({render:gle,parse:_I,getDiagramFromText:TI,initialize:SI,getConfig:wa,setConfig:A4,getSiteConfig:N4,updateSiteConfig:_V,reset:N(()=>{J0()},"reset"),globalReset:N(()=>{J0(Ou)},"globalReset"),defaultConfig:Ou});Hv(wa().logLevel);J0(wa());var fle=N((e,t,r)=>{ze.warn(e),S2(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),NI=N(async function(e={querySelector:".mermaid"}){try{await ple(e)}catch(t){if(S2(t)&&ze.error(t.str),po.parseError&&po.parseError(t),!e.suppressErrors)throw ze.error("Use the suppressErrors option to suppress these errors"),t}},"run"),ple=N(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=sc.getConfig();ze.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");ze.debug(`Found ${a.length} diagrams`),n?.startOnLoad!==void 0&&(ze.debug("Start On Load: "+n?.startOnLoad),sc.updateSiteConfig({startOnLoad:n?.startOnLoad}));const o=new ri.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let l;const u=[];for(const d of Array.from(a)){if(ze.info("Rendering diagram: "+d.id),d.getAttribute("data-processed"))continue;d.setAttribute("data-processed","true");const h=`mermaid-${o.next()}`;l=d.innerHTML,l=KM(ri.entityDecode(l)).trim().replace(/<br\s*\/?>/gi,"<br/>");const f=ri.detectInit(l);f&&ze.debug("Detected early reinit: ",f);try{const{svg:p,bindFunctions:x}=await MI(h,l,d);d.innerHTML=p,e&&await e(h),x&&x(d)}catch(p){fle(p,u,po.parseError)}}if(u.length>0)throw u[0]},"runThrowsErrors"),AI=N(function(e){sc.initialize(e)},"initialize"),mle=N(async function(e,t,r){ze.warn("mermaid.init is deprecated. Please use run instead."),e&&AI(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await NI(n)},"init"),xle=N(async(e,{lazyLoad:t=!0}={})=>{km(),d1(...e),t===!1&&await Uoe()},"registerExternalDiagrams"),LI=N(function(){if(po.startOnLoad){const{startOnLoad:e}=sc.getConfig();e&&po.run().catch(t=>ze.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",LI,!1);var ble=N(function(e){po.parseError=e},"setParseErrorHandler"),Mp=[],Ey=!1,jI=N(async()=>{if(!Ey){for(Ey=!0;Mp.length>0;){const e=Mp.shift();if(e)try{await e()}catch(t){ze.error("Error executing queue",t)}}Ey=!1}},"executeQueue"),yle=N(async(e,t)=>new Promise((r,n)=>{const a=N(()=>new Promise((o,l)=>{sc.parse(e,t).then(u=>{o(u),r(u)},u=>{ze.error("Error parsing",u),po.parseError?.(u),l(u),n(u)})}),"performCall");Mp.push(a),jI().catch(n)}),"parse"),MI=N((e,t,r)=>new Promise((n,a)=>{const o=N(()=>new Promise((l,u)=>{sc.render(e,t,r).then(d=>{l(d),n(d)},d=>{ze.error("Error parsing",d),po.parseError?.(d),u(d),a(d)})}),"performCall");Mp.push(o),jI().catch(a)}),"render"),vle=N(()=>Object.keys(Jl).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),po={startOnLoad:!0,mermaidAPI:sc,parse:yle,render:MI,init:mle,run:NI,registerExternalDiagrams:xle,registerLayoutLoaders:FO,initialize:AI,parseError:void 0,contentLoaded:LI,setParseErrorHandler:ble,detectType:qv,registerIconPacks:Hne,getRegisteredDiagramsMetadata:vle},$C=po;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const zu=({data:e,name:t,level:r=0,defaultExpanded:n=!0})=>{const[a,o]=C.useState(n),l=r*16;if(e==null)return s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsx("span",{className:"text-gray-500 dark:text-gray-500 italic",children:"null"})]});const u=typeof e;if(u==="string"||u==="number"||u==="boolean")return s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsx("span",{className:u==="string"?"text-green-600 dark:text-green-400":u==="number"?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:u==="string"?`"${e}"`:String(e)})]});if(Array.isArray(e))return e.length===0?s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"[]"})]}):s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[s.jsxs("button",{onClick:()=>o(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"":""}),t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["[",e.length," ",e.length===1?"item":"items","]"]})]}),a&&s.jsx("div",{className:"ml-2",children:e.map((d,h)=>s.jsx(zu,{data:d,name:String(h),level:r+1,defaultExpanded:r<1},h))})]});if(u==="object"){const d=Object.keys(e);return d.length===0?s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"{}"})]}):s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[s.jsxs("button",{onClick:()=>o(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"":""}),t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["{",d.length," ",d.length===1?"key":"keys","}"]})]}),a&&s.jsx("div",{className:"ml-2",children:d.map(h=>s.jsx(zu,{data:e[h],name:h,level:r+1,defaultExpanded:r<1},h))})]})}return s.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),s.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:String(e)})]})},_y=({content:e})=>{try{const t=JSON.parse(e);return s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsx(zu,{data:t,defaultExpanded:!0})})}catch{return s.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto text-sm",children:e})}},b0=({data:e,title:t})=>{const[r,n]=C.useState(!1),[a,o]=C.useState(!1),l=f=>{if(typeof f=="string")try{const p=JSON.parse(f);return l(p)}catch{return f}else{if(Array.isArray(f))return f.map(p=>l(p));if(f!==null&&typeof f=="object"){const p={};for(const x in f)p[x]=l(f[x]);return p}}return f},u=l(e),d=()=>{navigator.clipboard.writeText(JSON.stringify(u,null,2)),n(!0),setTimeout(()=>n(!1),2e3)},h=()=>{o(!0)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-3",children:s.jsxs("button",{onClick:h,className:"flex items-center justify-between w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[s.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t}),s.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium",children:" Click to View"})]})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>o(!1),children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl w-full h-full max-w-7xl max-h-[90vh] flex flex-col shadow-2xl",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:r?" Copied!":" Copy All"}),s.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:" Close"})]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-50 dark:bg-gray-950",children:s.jsx(zu,{data:u,defaultExpanded:!0})})]})})]})};function kle(e){switch(e.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-50 dark:bg-pink-900/20",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",icon:""};case"transcription":return{label:"Whisper Transcription",color:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-300 dark:border-indigo-700",text:"text-indigo-700 dark:text-indigo-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",icon:""};case"assessment":return{label:"Self-Assessment",color:"bg-teal-50 dark:bg-teal-900/20",border:"border-teal-300 dark:border-teal-700",text:"text-teal-700 dark:text-teal-300",icon:""};default:return{label:"Chat",color:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-700 dark:text-gray-300",icon:""}}}const wle=({call:e,index:t})=>{const r=kle(e),n=e.response?.usage?.prompt_tokens||0,a=e.response?.usage?.completion_tokens||0,o=e.response?.usage?.total_tokens||n+a,l=e.cost??0;return s.jsxs("div",{className:`border-2 ${r.border} ${r.color} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:r.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:`font-bold text-lg ${r.text}`,children:r.label}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.model]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-2xl font-bold ${l>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:xv(l)}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",t+1]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prompt Tokens"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completion Tokens"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Tokens"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"}),s.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.durationMs?`${(e.durationMs/1e3).toFixed(2)}s`:"N/A"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e.success!==void 0&&s.jsx("span",{className:`px-2 py-1 rounded-full ${e.success?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:e.success?" Success":" Failed"}),e.httpStatus&&s.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:["HTTP ",e.httpStatus]})]}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),s.jsxs("div",{className:"space-y-2",children:[e.request&&s.jsx(b0,{data:e.request,title:" Request Body"}),e.response&&s.jsx(b0,{data:e.response,title:" Response Body"}),e.httpHeaders&&s.jsx(b0,{data:e.httpHeaders,title:" HTTP Headers"}),e.metadata&&s.jsx(b0,{data:e.metadata,title:" Metadata"})]})]})},RI=({apiCalls:e,onClose:t})=>{const r=oc(!0,t),n=e.reduce((d,h)=>d+(h.response?.usage?.prompt_tokens||0),0),a=e.reduce((d,h)=>d+(h.response?.usage?.completion_tokens||0),0),o=n+a,l=e.reduce((d,h)=>d+(h.cost||0),0),u=e.reduce((d,h)=>d+(h.durationMs||0),0);return s.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" LLM API Transparency"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," API call",e.length!==1?"s":""]})]}),s.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Close",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:e.length===0?s.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((d,h)=>s.jsx(wle,{call:d,index:h},h))}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Grand Totals"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Prompt Tokens"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Completion Tokens"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:a.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Tokens"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:o.toLocaleString()})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Duration"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(u/1e3).toFixed(2),"s"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-green-200 dark:border-green-700 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-gray-800",children:[s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Cost"}),s.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:xv(l)})]})]})]})]})})},Ele=({chart:e,description:t,onLlmApiCall:r})=>{const n=C.useRef(null),[a,o]=C.useState(null),[l,u]=C.useState(!1),[d,h]=C.useState([]),[f,p]=C.useState(e),[x,b]=C.useState(!1),[y,k]=C.useState(!1),[S,_]=C.useState(!1),{accessToken:T}=$s(),{settings:A}=ii(),{addCost:I}=Pp(),{addSnippet:O}=xg(),{showSuccess:B,showError:F}=xo(),ae=async()=>{if(n.current)try{const W=n.current.querySelector("svg");if(!W){F("Chart not found");return}const $=document.createElement("canvas"),L=new XMLSerializer().serializeToString(W),q=new Image,D=new Blob([L],{type:"image/svg+xml;charset=utf-8"}),X=URL.createObjectURL(D);q.onload=async()=>{$.width=W.clientWidth||800,$.height=W.clientHeight||600;const K=$.getContext("2d");K&&(K.fillStyle="white",K.fillRect(0,0,$.width,$.height),K.drawImage(q,0,0),$.toBlob(async xe=>{if(xe)try{await navigator.clipboard.write([new ClipboardItem({"image/png":xe})]),_(!0),setTimeout(()=>_(!1),2e3),B("Chart image copied to clipboard!")}catch(U){console.error("Failed to copy to clipboard:",U),F("Failed to copy image to clipboard")}})),URL.revokeObjectURL(X)},q.onerror=()=>{F("Failed to process chart image"),URL.revokeObjectURL(X)},q.src=X}catch(W){console.error("Failed to copy image:",W),F("Failed to copy chart image")}},Z=async()=>{if(n.current)try{const W=n.current.querySelector("svg");if(!W){F("Chart not found");return}const $=t||"Chart diagram",L=document.createElement("canvas"),q=new XMLSerializer().serializeToString(W),D=new Image,X=new Blob([q],{type:"image/svg+xml;charset=utf-8"}),K=URL.createObjectURL(X);D.onload=async()=>{try{L.width=W.clientWidth||800,L.height=W.clientHeight||600;const xe=L.getContext("2d");if(xe){xe.fillStyle="white",xe.fillRect(0,0,L.width,L.height),xe.drawImage(D,0,0);const M=`<img src="${L.toDataURL("image/png")}" alt="${$}" class="max-w-full h-auto rounded-lg" />`;await O(M,"tool",`Chart: ${$}`),B("Chart saved to Swag!")}URL.revokeObjectURL(K)}catch(xe){console.error("Failed to convert to PNG:",xe),F("Failed to save chart to Swag"),URL.revokeObjectURL(K)}},D.onerror=()=>{F("Failed to process chart image"),URL.revokeObjectURL(K)},D.src=K}catch(W){console.error("Failed to grab image:",W),F("Failed to save chart to Swag")}};C.useEffect(()=>{$C.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit",logLevel:"error"})},[]),C.useEffect(()=>{(async()=>{if(n.current)try{o(null),n.current.innerHTML="";const $=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:L}=await $C.render($,f);n.current.innerHTML=L,document.querySelectorAll('div[id^="d"]').forEach(D=>{const X=D.textContent||"";(X.includes("Syntax error in text")||X.includes("mermaid version"))&&D.remove()}),console.log(" Mermaid chart rendered successfully")}catch($){console.error(" Mermaid rendering error:",$);const L=$.message||String($);o(L),document.querySelectorAll('div[id^="d"]').forEach(D=>{const X=D.textContent||"";(X.includes("Syntax error in text")||X.includes("mermaid version"))&&D.remove()}),d.length<3&&await z(L)}})()},[f]);const z=async W=>{if(!T){console.warn("No access token available for chart fix");return}if(d.length>=3){console.log("Max fix attempts (3) reached");return}u(!0);const $=d.length+1;console.log(` Attempting to fix chart (attempt ${$}/3)`);try{const{getCachedApiBase:L,resetApiBase:q}=await tr(async()=>{const{getCachedApiBase:U,resetApiBase:M}=await Promise.resolve().then(()=>dP);return{getCachedApiBase:U,resetApiBase:M}},void 0);q();const D=await L(),X=await fetch(`${D}/fix-mermaid-chart`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({chart:f,error:W,providers:A.providers})});if(!X.ok)throw new Error(`Fix request failed: ${X.statusText}`);const K=await X.json();if(K.error)throw new Error(K.error);const xe={attemptNumber:$,error:W,fixedChart:K.fixedChart,usage:K.usage,llmApiCall:K.llmApiCall};h(U=>[...U,xe]),K.usage&&I&&I(K.usage.cost||0),r&&K.usage&&r({model:K.usage.model,provider:K.usage.provider,prompt_tokens:K.usage.prompt_tokens,completion_tokens:K.usage.completion_tokens,total_tokens:K.usage.total_tokens,cost:K.usage.cost,duration_ms:K.usage.duration_ms,purpose:`chart-fix-attempt-${$}`}),console.log(` Chart fix attempt ${$} successful`),console.log(` Cost: $${K.usage?.cost?.toFixed(6)||"0.000000"}`),console.log(` Tokens: ${K.usage?.total_tokens||0}`),p(K.fixedChart),o(null)}catch(L){console.error(` Chart fix attempt ${$} failed:`,L);const q={attemptNumber:$,error:W};h(D=>[...D,q]),$>=3&&o(`Failed to fix chart after 3 attempts. Last error: ${W}`)}finally{u(!1)}},ee=()=>{d.length<3&&a&&z(a)};return s.jsxs("div",{className:"my-4 border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden group",children:[s.jsxs("div",{className:"relative bg-white dark:bg-gray-900",children:[s.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d.some(W=>W.llmApiCall)&&s.jsxs("button",{onClick:()=>k(!0),className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-blue-600 dark:text-blue-400 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"View LLM transparency info for chart fixes",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-[10px]",children:"LLM"})]}),s.jsx("button",{onClick:ae,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Copy chart image to clipboard",children:S?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("span",{className:"text-[10px]",children:"Copied!"})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px]",children:"Copy"})]})}),s.jsxs("button",{onClick:Z,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Grab chart as base64 markdown",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),s.jsx("span",{className:"text-[10px]",children:"Grab"})]})]}),s.jsx("div",{ref:n,className:"p-4 flex items-center justify-center min-h-[200px]",style:{fontSize:"14px",overflow:"auto"}})]}),a&&!l&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-t border-red-300 dark:border-red-700 p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-1",children:"Chart Rendering Error"}),s.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-mono break-all",children:a}),d.length<3&&s.jsxs("button",{onClick:ee,className:"mt-2 text-xs btn-secondary px-3 py-1",children:[" Try to Fix (",d.length,"/3 attempts)"]}),d.length>=3&&s.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:" Maximum fix attempts reached. The chart may have unsupported syntax."})]})]})}),l&&s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-t border-blue-300 dark:border-blue-700 p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("svg",{className:"w-5 h-5 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Attempting to fix chart (attempt ",d.length+1,"/3)..."]})]})}),d.length>0&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700",children:[s.jsxs("button",{onClick:()=>b(!x),className:"w-full px-4 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-750 flex items-center justify-between",children:[s.jsxs("span",{children:[" Chart Auto-Fix Details (",d.length," attempt",d.length>1?"s":"",")"]}),s.jsx("svg",{className:`w-4 h-4 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[d.map(W=>s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded p-3 text-xs",children:[s.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Attempt ",W.attemptNumber]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Error:"}),s.jsx("div",{className:"text-red-600 dark:text-red-400 font-mono text-[10px] break-all mt-1",children:W.error})]}),W.usage&&s.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LLM Usage:"}),s.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Provider:"}),s.jsx("div",{className:"font-medium",children:W.usage.provider})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Model:"}),s.jsx("div",{className:"font-medium",children:W.usage.model})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Tokens:"}),s.jsx("div",{className:"font-medium",children:W.usage.total_tokens.toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Cost:"}),s.jsxs("div",{className:"font-medium text-green-600 dark:text-green-400",children:["$",W.usage.cost.toFixed(6)]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Duration:"}),s.jsxs("div",{className:"font-medium",children:[W.usage.duration_ms,"ms"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Result:"}),s.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:W.fixedChart?" Fixed":" Failed"})]})]})]})]})]},W.attemptNumber)),d.some(W=>W.usage)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 text-xs",children:[s.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:" Total Cost"}),s.jsxs("div",{className:"text-blue-800 dark:text-blue-300",children:["$",d.reduce((W,$)=>W+($.usage?.cost||0),0).toFixed(6)," ","(",d.reduce((W,$)=>W+($.usage?.total_tokens||0),0).toLocaleString()," tokens)"]})]})]})]}),y&&s.jsx(RI,{apiCalls:d.filter(W=>W.llmApiCall).map(W=>W.llmApiCall),onClose:()=>k(!1)})]})},_le={...zh,attributes:{...zh.attributes,"*":["className","style","id"],a:["href","title","target","rel"],img:["src","alt","title","width","height"],table:["className"],td:["align","colspan","rowspan"],th:["align","colspan","rowspan"]},tagNames:[...zh.tagNames||[],"table","thead","tbody","tr","th","td","tfoot","div","span","br","hr"]};function Sle(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/shorts\/([^&\n?#]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function Tle({href:e,children:t}){const{addTracksToStart:r,playTrackByVideoId:n}=ic(),a=Sle(e),o=l=>{if(l.preventDefault(),a){const u=typeof t=="string"?t:`YouTube Video ${a}`;r([{videoId:a,title:u,url:e}]),n(a)}};return s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:t}),s.jsxs("button",{onClick:o,className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors",title:"Play now",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})}),"Play"]})]})}function Cle({images:e}){const[t,r]=C.useState(null);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"image-gallery grid grid-cols-2 md:grid-cols-4 gap-4 my-6",children:e.map((n,a)=>s.jsxs("div",{className:"gallery-item cursor-pointer overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all hover:shadow-lg",onClick:()=>r(n.src),children:[s.jsx("img",{src:n.src,alt:n.alt,className:"w-full h-48 object-cover hover:scale-105 transition-transform",loading:"lazy"}),n.alt&&s.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 truncate",children:n.alt})]},a))}),t&&s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>r(null),children:[s.jsx("button",{className:"absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300",onClick:()=>r(null),"aria-label":"Close",children:""}),s.jsx("img",{src:t,alt:"Expanded view",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})]})}function xu({content:e,className:t="",chartDescription:r,onLlmApiCall:n}){if(/^<img\s+[^>]*src="data:image\/[^"]+"/i.test(e.trim()))return s.jsx("div",{className:`markdown-content ${t}`,dangerouslySetInnerHTML:{__html:e}});let o=e.replace(/```html\n([\s\S]*?)\n```/g,(f,p)=>p.includes("<table")?`

${p.replace(/<table/g,'<table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700 border border-gray-300 dark:border-gray-700 my-4"').replace(/<th/g,'<th class="px-4 py-2 bg-gray-100 dark:bg-gray-800 font-semibold text-left border border-gray-300 dark:border-gray-700"').replace(/<td/g,'<td class="px-4 py-2 border border-gray-300 dark:border-gray-700"')}

`:f);const l=/<!-- GALLERY_START -->([\s\S]*?)<!-- GALLERY_END -->/g,u=l.exec(o);let d=o,h=[];if(u){const f=u[1],p=/!\[(.*?)\]\((.*?)\)/g;let x;for(;(x=p.exec(f))!==null;)h.push({alt:x[1],src:x[2]});d=e.replace(l,"").trim()}return s.jsxs("div",{className:`markdown-content ${t}`,children:[s.jsx(LA,{remarkPlugins:[oz],rehypePlugins:[AG,[FG,_le],CW],components:{h1:({children:f})=>s.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-gray-900 dark:text-gray-100",children:f}),h2:({children:f})=>s.jsx("h2",{className:"text-xl font-bold mt-5 mb-3 text-gray-900 dark:text-gray-100",children:f}),h3:({children:f})=>s.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-100",children:f}),h4:({children:f})=>s.jsx("h4",{className:"text-base font-semibold mt-3 mb-2 text-gray-900 dark:text-gray-100",children:f}),p:({children:f})=>s.jsx("p",{className:"mb-4 leading-relaxed text-gray-800 dark:text-gray-200",children:f}),ul:({children:f})=>s.jsx("ul",{className:"list-disc list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:f}),ol:({children:f})=>s.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:f}),li:({children:f})=>s.jsx("li",{className:"ml-4",children:f}),code:({className:f,children:p,...x})=>{const b=!f,y=/language-(\w+)/.exec(f||"");if((y?y[1]:"")==="mermaid"&&!b){const S=String(p).replace(/\n$/,""),_=S.split(`
`)[0].trim(),T=r||`${_} diagram`;return s.jsx(Ele,{chart:S,description:T,onLlmApiCall:n})}return b?s.jsx("code",{className:"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-pink-600 dark:text-pink-400 text-sm font-mono",...x,children:p}):s.jsx("code",{className:`${f} text-sm`,...x,children:p})},pre:({children:f})=>f?.props?.className?.includes("language-mermaid")?f:s.jsx("pre",{className:"mb-4 p-4 rounded-lg bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:f}),a:({href:f,children:p})=>f&&(f.includes("youtube.com/watch")||f.includes("youtu.be/")||f.includes("youtube.com/embed/")||f.includes("youtube.com/shorts/"))&&f?s.jsx(Tle,{href:f,children:p}):s.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:p}),blockquote:({children:f})=>s.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4 text-gray-700 dark:text-gray-300",children:f}),table:({children:f})=>s.jsx("div",{className:"overflow-x-auto mb-4",children:s.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:f})}),thead:({children:f})=>s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:f}),tbody:({children:f})=>s.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:f}),tr:({children:f})=>s.jsx("tr",{children:f}),th:({children:f})=>s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:f}),td:({children:f})=>s.jsx("td",{className:"px-4 py-2 text-sm text-gray-800 dark:text-gray-200",children:f}),hr:()=>s.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-700"}),strong:({children:f})=>s.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",children:f}),em:({children:f})=>s.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",children:f}),img:({src:f,alt:p})=>{const x=typeof f=="string"&&f.trim()!==""?f:null;return x?s.jsx("img",{src:x,alt:p||"",className:"max-w-full h-auto rounded-lg my-4 border border-gray-200 dark:border-gray-700",loading:"lazy",onError:b=>{console.error("Image failed to load:",{src:x,alt:p}),b.target.style.display="none"}}):null}},children:d}),h.length>0&&s.jsx(Cle,{images:h})]})}const Ka={YOUTUBE_DOWNLOAD_START:"youtube_download_start",YOUTUBE_DOWNLOAD_PROGRESS:"youtube_download_progress",YOUTUBE_DOWNLOAD_COMPLETE:"youtube_download_complete",DOWNLOAD_START:"download_start",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_COMPLETE:"download_complete",METADATA:"metadata",CHUNKING_START:"chunking_start",CHUNK_READY:"chunk_ready",TRANSCRIBE_START:"transcribe_start",TRANSCRIBE_CHUNK_COMPLETE:"transcribe_chunk_complete",TRANSCRIBE_COMPLETE:"transcribe_complete",TRANSCRIPTION_STOPPED:"transcription_stopped",ERROR:"error"},tn={DOWNLOADING:"Downloading",CHUNKING:"Chunking",TRANSCRIBING:"Transcribing",COMPLETE:"Complete",STOPPED:"Stopped",ERROR:"Error"},Nle=({toolCallId:e,url:t,events:r,onStop:n})=>{const[a,o]=C.useState(!1),[l,u]=C.useState(!1),d=C.useMemo(()=>{let y=tn.DOWNLOADING,k=0,S=null,_="",T=0,A=1,I=null;r.length>0&&console.log(`[TranscriptionProgress] Processing ${r.length} events for ${e}:`,r.map(O=>({type:O.progress_type||O.data?.type,data:O.data})));for(const O of r)switch(O.progress_type||O.data?.type||""){case Ka.YOUTUBE_DOWNLOAD_START:case Ka.DOWNLOAD_START:y=tn.DOWNLOADING,k=0;break;case Ka.YOUTUBE_DOWNLOAD_PROGRESS:case Ka.DOWNLOAD_PROGRESS:y=tn.DOWNLOADING,k=O.data?.percent||0;break;case Ka.YOUTUBE_DOWNLOAD_COMPLETE:case Ka.DOWNLOAD_COMPLETE:y=tn.DOWNLOADING,k=100;break;case Ka.METADATA:S=O.data||null;break;case Ka.CHUNKING_START:y=tn.CHUNKING,A=O.data?.chunks||1,k=0;break;case Ka.CHUNK_READY:y=tn.CHUNKING,T=O.data?.chunkIndex||0,A=O.data?.totalChunks||1,k=T/A*100;break;case Ka.TRANSCRIBE_START:y=tn.TRANSCRIBING,T=O.data?.chunkIndex||0;break;case Ka.TRANSCRIBE_CHUNK_COMPLETE:y=tn.TRANSCRIBING,O.data?.text&&(_+=(_?`

`:"")+O.data.text),T=O.data?.chunkIndex||0,A=O.data?.totalChunks||1,k=T/A*100;break;case Ka.TRANSCRIBE_COMPLETE:y=tn.COMPLETE,k=100;break;case Ka.TRANSCRIPTION_STOPPED:y=tn.STOPPED,T=O.data?.completedChunks||0,A=O.data?.totalChunks||1,k=A>0?T/A*100:0;break;case Ka.ERROR:y=tn.ERROR,I=O.data?.error||"Unknown error";break}return{stage:y,progress:Math.min(100,Math.max(0,k)),metadata:S,partialText:_,currentChunk:T,totalChunks:A,error:I}},[r]),h=async()=>{u(!0);try{await n(e)}catch(y){console.error("Failed to stop transcription:",y)}finally{setTimeout(()=>u(!1),5e3)}},f=y=>{const k=Math.floor(y/3600),S=Math.floor(y%3600/60),_=y%60;return k>0?`${k}:${S.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`:`${S}:${_.toString().padStart(2,"0")}`},p=y=>{switch(y){case tn.DOWNLOADING:return"text-blue-600 dark:text-blue-400";case tn.CHUNKING:return"text-purple-600 dark:text-purple-400";case tn.TRANSCRIBING:return"text-green-600 dark:text-green-400";case tn.COMPLETE:return"text-green-700 dark:text-green-300";case tn.STOPPED:return"text-yellow-600 dark:text-yellow-400";case tn.ERROR:return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},x=y=>{switch(y){case tn.DOWNLOADING:return"bg-blue-500";case tn.CHUNKING:return"bg-purple-500";case tn.TRANSCRIBING:return"bg-green-500";case tn.COMPLETE:return"bg-green-600";case tn.STOPPED:return"bg-yellow-500";case tn.ERROR:return"bg-red-500";default:return"bg-gray-500"}},b=d.stage===tn.DOWNLOADING||d.stage===tn.CHUNKING||d.stage===tn.TRANSCRIBING;return s.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 mb-4 bg-white dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[d.metadata?.thumbnail&&s.jsx("img",{src:d.metadata.thumbnail,alt:"Video thumbnail",className:"w-24 h-16 object-cover rounded flex-shrink-0"}),s.jsx("div",{className:"flex-1 min-w-0",children:d.metadata?.title?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:d.metadata.title}),d.metadata.author&&s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:d.metadata.author}),d.metadata.duration&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Duration: ",f(d.metadata.duration)]})]}):s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t})}),b&&!l&&s.jsx("button",{onClick:h,className:"px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors flex-shrink-0",title:"Stop transcription",children:"Stop"}),l&&s.jsx("div",{className:"px-3 py-1 text-sm bg-gray-400 text-white rounded flex-shrink-0",children:"Stopping..."})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`text-sm font-medium ${p(d.stage)}`,children:d.stage}),d.totalChunks>1&&b&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(Chunk ",d.currentChunk," of ",d.totalChunks,")"]}),b&&s.jsx("div",{className:"ml-auto",children:s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full"})})]}),s.jsx("div",{className:"relative w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3",children:s.jsx("div",{className:`absolute left-0 top-0 h-full ${x(d.stage)} transition-all duration-300 ease-out`,style:{width:`${d.progress}%`}})}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:[d.progress.toFixed(0),"% complete"]}),d.error&&s.jsxs("div",{className:"mb-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-700 dark:text-red-300",children:["Error: ",d.error]}),d.partialText&&s.jsxs("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:[s.jsxs("button",{onClick:()=>o(!a),className:"flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors mb-2",children:[s.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsxs("span",{children:[a?"Hide":"Show"," Partial Transcript",d.totalChunks>1&&` (${d.currentChunk} of ${d.totalChunks} chunks)`]})]}),a&&s.jsx("div",{className:"max-h-60 overflow-y-auto bg-gray-50 dark:bg-gray-900 rounded p-3 text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.partialText})]}),d.stage===tn.COMPLETE&&s.jsxs("div",{className:"mt-3 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Transcription complete!"]}),d.stage===tn.STOPPED&&s.jsxs("div",{className:"mt-3 text-sm text-yellow-600 dark:text-yellow-400 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Transcription stopped (",d.currentChunk," of ",d.totalChunks," chunks completed)"]})]})},Ale=({toolCallId:e,url:t,events:r})=>{if(!r||r.length===0)return null;const n=r[r.length-1],a=n.progress_type||n.data?.type||"",o=a==="scrape_complete"||a==="scrape_error",l=a==="scrape_error",u=[{type:"scrape_launching",icon:"",label:"Launching browser"},{type:"scrape_launched",icon:"",label:"Browser ready"},{type:"scrape_navigating",icon:"",label:"Loading page"},{type:"scrape_page_loaded",icon:"",label:"Page loaded"},{type:"scrape_extracting",icon:"",label:"Extracting content"},{type:"scrape_extracted",icon:"",label:"Content extracted"},{type:"scrape_complete",icon:"",label:"Complete"}],d=u.findIndex(_=>_.type===a),h=u[d]||u[0],f=r.find(_=>(_.progress_type||_.data?.type)==="scrape_extracted"),p=r.find(_=>(_.progress_type||_.data?.type)==="scrape_complete"),x=r.find(_=>(_.progress_type||_.data?.type)==="scrape_error"),b=f?.data?.textLength||p?.data?.textLength||0,y=f?.data?.linkCount||p?.data?.linkCount||0,k=f?.data?.imageCount||p?.data?.imageCount||0,S=p?.data?.totalTime||0;return s.jsxs("div",{className:`p-4 rounded-lg border ${l?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":o?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:h.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:l?" Scraping Failed":o?" Scraping Complete":h.label}),s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate max-w-md",children:t})]})]}),S>0&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(S/1e3).toFixed(1),"s"]})]}),l&&x?.data?.error&&s.jsxs("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 rounded text-sm text-red-800 dark:text-red-200",children:[s.jsx("div",{className:"font-semibold mb-1",children:"Error:"}),s.jsx("div",{className:"text-xs font-mono",children:x.data.error})]}),!l&&s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"flex items-center gap-1",children:u.slice(0,-1).map((_,T)=>{const A=T<=d,I=T===d;return s.jsx(Mn.Fragment,{children:s.jsx("div",{className:`h-1 flex-1 rounded transition-all duration-300 ${A?I?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400":"bg-gray-300 dark:bg-gray-600"}`})},_.type)})})}),(b>0||y>0||k>0)&&s.jsxs("div",{className:"flex gap-4 text-xs text-gray-700 dark:text-gray-300",children:[b>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[b," chars"]})]}),y>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[y," links"]})]}),k>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[k," images"]})]})]}),!o&&r.length>1&&s.jsxs("details",{className:"mt-3",children:[s.jsxs("summary",{className:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",children:["Show timeline (",r.length," events)"]}),s.jsx("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:r.map((_,T)=>{const A=_.progress_type||_.data?.type||"",I=u.find(B=>B.type===A),O=_.timestamp?new Date(_.timestamp).toLocaleTimeString():"";return s.jsxs("div",{className:"text-xs flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:I?.icon||""}),s.jsx("span",{className:"flex-1",children:I?.label||A}),O&&s.jsx("span",{className:"text-[10px]",children:O})]},T)})})]})]})},Lle=({data:e})=>{switch(e.phase){case"searching":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Searching ",e.service==="tavily"?"Tavily":"DuckDuckGo","..."]})]});case"results_found":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Found results for: ",e.query]})]});case"loading_content":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Loading content from ",e.result_count," results..."]})]});case"fetching_result":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.url})]})]});case"result_loaded":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Loaded ",Math.round((e.content_size||0)/1024),"KB in ",e.fetch_time_ms,"ms"]})]})]});case"result_failed":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] Failed: ",e.title]}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:e.error})]})]});default:return null}},jle=({data:e})=>{switch(e.phase){case"searching":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Searching YouTube for: ",s.jsx("span",{className:"font-medium",children:e.query})]})]});case"results_found":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Found ",s.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," for: ",e.query]})]});case"complete":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" YouTube search complete - ",s.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," added to playlist"]})]});case"fetching_transcripts":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e.message||`Found ${e.totalVideos} videos, fetching transcripts...`]})]});case"fetching_transcript":const t=e.totalVideos&&e.currentVideo?Math.round(e.currentVideo/e.totalVideos*100):0;return s.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsxs("div",{className:"font-medium",children:[" ",e.message||`Fetching transcript ${e.currentVideo}/${e.totalVideos}`]}),e.videoId&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:["Video ID: ",e.videoId]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:[t,"% complete"]})]});case"transcript_fetched":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:e.message||"Transcript fetched"}),e.transcriptLength&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",e.transcriptLength.toLocaleString()," characters)"]})]})]});case"transcript_failed":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[s.jsx("span",{className:"font-medium",children:e.message||"Transcript unavailable"}),e.error&&s.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:e.error})]})]});default:return null}},Mle=({data:e})=>{switch(e.phase){case"starting":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Starting JavaScript execution (",e.code_length," characters, ",(e.timeout_ms||0)/1e3,"s timeout)..."]})]});case"executing":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:" Executing JavaScript code..."})]});case"console_output":return s.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-900/50 rounded text-sm font-mono border-l-4 border-purple-500",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsxs("span",{children:["Console Output #",e.output_number,":"]})]}),s.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.output})]});case"completed":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Execution completed",e.output_lines!==void 0&&e.output_lines>0&&s.jsxs("span",{className:"ml-1",children:["(",e.output_lines," console output",e.output_lines!==1?"s":"",")"]}),e.has_result&&!e.output_lines&&s.jsx("span",{className:"ml-1",children:"(returned value)"})]})]});case"error":return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[s.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:" Execution Error"}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-mono mt-1",children:e.error})]})]});default:return null}},Rle=({data:e})=>{const r=(()=>{switch(e.phase){case"analyzing_prompt":return{icon:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),label:"Analyzing prompt",description:e.prompt?`"${e.prompt.substring(0,60)}${e.prompt.length>60?"...":""}"`:"",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"quality_selected":return{icon:s.jsx("span",{className:"text-purple-500",children:""}),label:`Quality tier: ${e.quality||"standard"}`,description:e.quality==="ultra"?"Highest quality, slower generation":e.quality==="high"?"High quality output":e.quality==="standard"?"Balanced quality and speed":"Fast generation",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};case"selecting_provider":return{icon:s.jsx("span",{className:"text-indigo-500",children:""}),label:`Selected: ${e.provider||"provider"} ${e.model||""}`,description:`Size: ${e.size||"1024x1024"}  ${e.estimated_cost?`~$${e.estimated_cost.toFixed(4)}`:"Calculating cost..."}`,bgColor:"bg-indigo-50 dark:bg-indigo-900/20",textColor:"text-indigo-700 dark:text-indigo-300"};case"generating":const n=e.remaining_seconds??e.estimated_seconds??15,a=e.estimated_seconds&&e.remaining_seconds!==void 0?Math.min(100,Math.max(0,(e.estimated_seconds-e.remaining_seconds)/e.estimated_seconds*100)):0;return{icon:s.jsx("div",{className:"w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),label:"Generating image...",description:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{children:n>0?`~${n}s remaining`:"Finishing up..."})]}),e.estimated_seconds&&s.jsx("div",{className:"w-full bg-pink-200 dark:bg-pink-800 rounded-full h-1.5",children:s.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-1.5 rounded-full transition-all duration-1000 ease-linear",style:{width:`${a}%`}})}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.quality," quality  ",e.size]})]}),bgColor:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"completed":return{icon:s.jsx("span",{className:"text-green-500",children:""}),label:"Image generated successfully",description:`${e.provider}  ${e.quality} quality  ${e.size}${e.estimated_cost?`  $${e.estimated_cost.toFixed(4)}`:""}`,bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300"};case"error":return{icon:s.jsx("span",{className:"text-red-500",children:""}),label:"Image generation failed",description:e.error||"Unknown error occurred",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-700 dark:text-red-300"};default:return{icon:s.jsx("div",{className:"w-4 h-4 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),label:"Processing...",description:"",bgColor:"bg-gray-50 dark:bg-gray-900/20",textColor:"text-gray-700 dark:text-gray-300"}}})();return s.jsx("div",{className:`rounded-lg ${r.bgColor} p-3 shadow-sm`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`font-medium text-sm ${r.textColor}`,children:r.label}),r.description&&s.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:typeof r.description=="string"?s.jsx("span",{children:r.description}):r.description})]})]})})},Ole=({data:e})=>e.phase==="preparing"?s.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-medium text-sm text-blue-700 dark:text-blue-300",children:["Preparing ",e.chart_type||"chart"," diagram"]}),e.description&&s.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]})}):e.phase==="completed"?s.jsx("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-green-500",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"font-medium text-sm text-green-700 dark:text-green-300",children:[e.chart_type||"Chart"," diagram ready"]}),s.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Diagram will appear below"})]})]})}):null,Ile=({data:e})=>s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-sm space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Content Extracted"})]}),e.title&&s.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium truncate",children:e.title}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.format&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.format==="markdown"?" Markdown":" Plain Text"})]}),e.compressionRatio!=null&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",s.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Number(e.compressionRatio).toFixed(1),"x"]})]}),e.originalLength!==void 0&&e.extractedLength!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Size:"})," ",s.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[(e.originalLength/1024).toFixed(1),"KB  ",(e.extractedLength/1024).toFixed(1),"KB"]})]}),e.wordCount!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Words:"})," ",s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.wordCount.toLocaleString()})]}),e.language&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language:"})," ",s.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.language})]}),e.duration!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"})," ",s.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]})]})]}),(e.images||e.videos||e.youtube||e.links)&&s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[(e.images??0)>0&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.images," ",e.images===1?"image":"images"]}),(e.videos??0)>0&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.videos," ",e.videos===1?"video":"videos"]}),(e.youtube??0)>0&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.youtube," YouTube ",e.youtube===1?"video":"videos"]}),(e.links??0)>0&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.links," ",e.links===1?"link":"links"]})]}),e.warning&&s.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:[" ",e.warning]})]}),jh=({data:e,level:t=0})=>{const[r,n]=Mn.useState(t<2);if(e===null)return s.jsx("span",{className:"text-gray-500",children:"null"});if(e===void 0)return s.jsx("span",{className:"text-gray-500",children:"undefined"});if(typeof e!="object")return typeof e=="string"?s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:['"',e,'"']}):typeof e=="number"?s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e}):typeof e=="boolean"?s.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:String(e)}):s.jsx("span",{children:String(e)});const a=Array.isArray(e),o=a?e.map((l,u)=>u):Object.keys(e);return o.length===0?s.jsx("span",{className:"text-gray-500",children:a?"[]":"{}"}):s.jsxs("div",{className:"ml-4",children:[s.jsxs("button",{onClick:()=>n(!r),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r?"":""," ",a?`Array[${o.length}]`:`Object{${o.length}}`]}),r&&s.jsx("div",{className:"ml-4 border-l border-gray-300 dark:border-gray-600 pl-2",children:o.map(l=>s.jsxs("div",{className:"my-1",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-mono",children:String(l)}),s.jsx("span",{className:"text-gray-500",children:": "}),s.jsx(jh,{data:e[l],level:t+1})]},String(l)))})]})},Dle=({errorData:e,llmApiCalls:t,onClose:r})=>{const n=oc(!0,r),{showSuccess:a,showError:o}=xo();return s.jsx("div",{ref:n,className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Details"]}),s.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-4",children:[e?.message&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"Error Message"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 font-mono text-sm whitespace-pre-wrap",children:e.message})]}),(e?.type||e?.code||e?.statusCode)&&s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-200 mb-2",children:"Error Classification"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[e.type&&s.jsxs("div",{children:[s.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Type:"})," ",s.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.type})]}),e.code&&s.jsxs("div",{children:[s.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Code:"})," ",s.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.code})]}),e.statusCode&&s.jsxs("div",{children:[s.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Status Code:"})," ",s.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.statusCode})]})]})]}),e?.stack&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Stack Trace"}),s.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap overflow-x-auto",children:e.stack})]}),(e?.errorType||e?.errorMessage)&&s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-300 dark:border-purple-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Lambda Error"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[e.errorType&&s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Type:"})," ",s.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorType})]}),e.errorMessage&&s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Message:"})," ",s.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorMessage})]})]})]}),(e?.error?.message||e?.error?.type||e?.error?.code)&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Upstream LLM Provider Error"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[e.error.message&&s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Message:"})," ",s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.message})]}),e.error.type&&s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Type:"})," ",s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.type})]}),e.error.code&&s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Code:"})," ",s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.code})]})]})]}),(e?.request||e?.requestId||e?.timestamp)&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Request Context"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[e.requestId&&s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request ID:"})," ",s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:e.requestId})]}),e.timestamp&&s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Timestamp:"})," ",s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(e.timestamp).toLocaleString()})]}),e.request&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request Data:"}),s.jsx("div",{className:"mt-1 bg-white dark:bg-gray-800 rounded p-2 max-h-48 overflow-auto",children:s.jsx(jh,{data:e.request})})]})]})]}),t&&t.length>0&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:" LLM Request Details"}),s.jsxs("span",{className:"text-xs font-normal text-blue-600 dark:text-blue-400",children:["(",t.length," call",t.length!==1?"s":"",")"]})]}),s.jsx("div",{className:"space-y-3",children:t.map((l,u)=>{const d=l.response?.usage?.prompt_tokens||0,h=l.response?.usage?.completion_tokens||0,f=d+h;return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Model:"}),s.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded font-mono",children:l.model}),l.provider&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:l.provider})]}),l.phase&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:l.phase})]})]}),f>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Tokens:"}),s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:[f.toLocaleString()," total"]}),s.jsxs("span",{className:"text-gray-400",children:["(",d.toLocaleString()," in, ",h.toLocaleString()," out)"]})]}),l.cost!==void 0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Cost:"}),s.jsxs("span",{className:"text-green-600 dark:text-green-400 font-mono",children:["$",l.cost.toFixed(6)]})]}),l.timestamp&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Time:"}),s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(l.timestamp).toLocaleTimeString()})]}),l.httpStatus&&s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"HTTP Status:"}),s.jsx("span",{className:`font-mono ${l.httpStatus>=400?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:l.httpStatus})]}),l.request&&s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Request Details "}),s.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:s.jsx(jh,{data:l.request})})]}),l.response&&s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Response Details "}),s.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:s.jsx(jh,{data:l.response})})]})]})},u)})})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2 flex items-center justify-between",children:[s.jsx("span",{children:"Complete Error Object (Expandable Tree)"}),s.jsxs("button",{onClick:()=>{const l=JSON.stringify(e,null,2);navigator.clipboard.writeText(l).then(()=>a("Copied to clipboard!")).catch(()=>o("Failed to copy"))},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 flex items-center gap-1",title:"Copy full JSON to clipboard",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy JSON"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3 max-h-96 overflow-auto font-mono text-xs",children:s.jsx(jh,{data:e})})]})]})}),s.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>{const l=JSON.stringify(e,null,2);navigator.clipboard.writeText(l).then(()=>a("Copied to clipboard!")).catch(()=>o("Failed to copy"))},className:"btn-secondary",children:"Copy Full JSON"}),s.jsx("button",{onClick:r,className:"btn-primary",children:"Close"})]})]})})},Ple=({isOpen:e,onClose:t,onTranscriptionComplete:r,accessToken:n,apiEndpoint:a})=>{const o=oc(e,t,!1),{providers:l}=GN(),[u,d]=C.useState(!1),[h,f]=C.useState(0),[p,x]=C.useState(""),[b,y]=C.useState(null),[k,S]=C.useState(!1),_=C.useRef(null),T=C.useRef(null),A=C.useRef(null),I=C.useRef([]),O=C.useRef(null),B=C.useRef(null),F=C.useRef(null),ae=C.useCallback(()=>{O.current&&cancelAnimationFrame(O.current),B.current&&clearTimeout(B.current),_.current&&_.current.state!=="inactive"&&_.current.stop(),F.current&&F.current.getTracks().forEach(L=>L.stop()),T.current&&T.current.state!=="closed"&&T.current.close().catch(L=>{console.warn("Failed to close AudioContext:",L)}),d(!1),f(0)},[]),Z=async()=>{try{y(null),I.current=[];const L=await navigator.mediaDevices.getUserMedia({audio:!0});F.current=L;const q=new(window.AudioContext||window.webkitAudioContext);T.current=q;const D=q.createMediaStreamSource(L),X=q.createAnalyser();X.fftSize=256,A.current=X,D.connect(X);const K=new MediaRecorder(L);_.current=K,K.ondataavailable=xe=>{xe.data.size>0&&I.current.push(xe.data)},K.onstop=async()=>{const xe=new Blob(I.current,{type:"audio/webm"});await $(xe)},K.start(),d(!0),z(),ee()}catch(L){console.error("Error starting recording:",L),y("Failed to access microphone. Please check permissions.")}},z=()=>{if(!A.current||!u)return;const L=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(L);const q=L.reduce((X,K)=>X+K)/L.length,D=Math.min(q/128,1);f(D),O.current=requestAnimationFrame(z)},ee=()=>{if(!A.current)return;const L=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(L);const q=L.reduce((K,xe)=>K+xe)/L.length,D=10,X=2e3;q<D?B.current||(B.current=setTimeout(()=>{console.log("Silence detected, stopping recording..."),W()},X)):B.current&&(clearTimeout(B.current),B.current=null),u&&setTimeout(ee,100)},W=()=>{ae()},$=async L=>{if(!n){y("Not authenticated. Please sign in.");return}S(!0);const q=`web-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log(" Generated request ID for voice transcription:",q);const D=l.find(U=>U.type==="groq"||U.type==="groq-free"),X=l.find(U=>U.type==="openai"),K=D?.apiKey||X?.apiKey||null,xe=D?"groq":X?"openai":null;console.log(" Transcription provider:",xe,"hasKey:",!!K);try{const U=new FormData;U.append("audio",L,"recording.webm"),K&&xe&&(U.append("apiKey",K),U.append("provider",xe));const Y=`${a.replace("/openai/v1","")}/transcribe`;console.log("Transcribing audio:",{url:Y,blobSize:L.size,blobType:L.type,hasToken:!!n,requestId:q,provider:xe,hasApiKey:!!K});const R=await fetch(Y,{method:"POST",headers:{Authorization:`Bearer ${n}`,"X-Request-Id":q},body:U}),H=await R.json();if(!R.ok){let fe="Unknown error";throw H.error?fe=typeof H.error=="string"?H.error:JSON.stringify(H.error):R.statusText&&(fe=R.statusText),console.error("Transcription failed:",{status:R.status,data:H}),new Error(`Transcription failed: ${fe}`)}const ne=H.text||H.transcription||"",re=H.llmApiCall||null;x(ne),setTimeout(()=>{r(ne,q,re),t()},500)}catch(U){console.error("Transcription error:",U);let M="Transcription failed";U instanceof TypeError&&U.message.includes("Failed to fetch")?(M="Network error: Could not reach transcription service. Check your internet connection and API endpoint configuration.",console.error("Network error details:",{message:U.message,apiEndpoint:a,transcribeUrl:`${a.replace("/openai/v1","")}/transcribe`})):U instanceof Error&&(M=U.message),y(M)}finally{S(!1)}};return C.useEffect(()=>(e||ae(),ae),[e,ae]),C.useEffect(()=>{e&&(x(""),y(null),!u&&!k&&Z())},[e]),e?s.jsx("div",{ref:o,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:k?" Processing...":u?" Listening...":" Voice Input"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k?"Transcribing your audio...":u?"Speak now. Will auto-stop after 2 seconds of silence.":"Click start to begin recording"})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex items-end justify-center gap-1 p-4",children:[...Array(20)].map((L,q)=>{const D=Math.max(.1,h*(1-Math.abs(q-10)/10)*(.8+Math.random()*.4));return s.jsx("div",{className:`flex-1 rounded-t transition-all duration-100 ${u?h>.3?"bg-gradient-to-t from-green-500 to-green-300":"bg-gradient-to-t from-blue-500 to-blue-300":"bg-gray-400"}`,style:{height:`${D*100}%`,opacity:u?1:.3}},q)})}),u&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${h>.3?"bg-green-500/20 animate-pulse":"bg-blue-500/20"}`,children:s.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),s.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})})]})}),p&&s.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"Transcription:"})," ",p]})}),b&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:s.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[s.jsx("strong",{children:"Error:"})," ",b]})}),s.jsxs("div",{className:"flex gap-3",children:[u&&!k&&s.jsxs("button",{onClick:W,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),"Stop"]}),s.jsx("button",{onClick:t,disabled:k,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Processing...":"Cancel"})]}),s.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 dark:text-gray-400",children:["Press ",s.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to cancel"]})]})}):null},zC=({data:e,title:t})=>{const[r,n]=C.useState(!1);return s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded",children:[s.jsxs("button",{onClick:()=>n(!r),className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[s.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:t}),s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&s.jsx("pre",{className:"p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(e,null,2)})]})},Ble=({data:e,accessToken:t,providerApiKeys:r,onCopy:n,onGrab:a,onLlmInfo:o,onStatusChange:l})=>{console.log(" GeneratedImageBlock render:",{status:e.status,hasImageUrl:!!e.imageUrl,hasBase64:!!e.base64,data:e});const[u,d]=C.useState(!1),[h,f]=C.useState(null),[p,x]=C.useState(!1),[b,y]=C.useState(!1),[k,S]=C.useState(!1),_=F=>{switch(F.toLowerCase()){case"openai":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300";case"together":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";case"replicate":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300";case"gemini":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},T=F=>{switch(F.toLowerCase()){case"openai":return"OpenAI";case"together":return"Together AI";case"replicate":return"Replicate";case"gemini":return"Google Gemini";default:return F}},A=async()=>{if(!t){f("Authentication required");return}d(!0),f(null),l?.(e.id,"generating");try{const F=await CN(e.prompt,e.provider,e.model,e.modelKey||"",e.size||"",e.qualityTier||"",e.style||"",t,r);if(F.success&&F.imageUrl){let ae=F.imageUrl;F.base64&&!F.base64.startsWith("data:")?ae=`data:image/png;base64,${F.base64}`:F.base64&&(ae=F.base64),l?.(e.id,"complete",ae,F.llmApiCall)}else{const ae=F.error||"Image generation failed";f(ae),l?.(e.id,"error")}}catch(F){const ae=F instanceof Error?F.message:"Image generation failed";f(ae),l?.(e.id,"error")}finally{d(!1)}},I=()=>{e.imageUrl&&n&&n(e.imageUrl)},O=()=>{if(e.imageUrl&&a){const F=`![${e.prompt.substring(0,100)}](${e.imageUrl})`;a(F)}},B=()=>{e.llmApiCall&&o&&o(e.llmApiCall)};return e.status==="pending"||!e.imageUrl&&!u&&!h?s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("button",{onClick:A,disabled:u,className:"btn-primary flex items-center justify-center gap-2 py-3",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsxs("span",{children:["Generate Image for $",e.cost.toFixed(4)]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(e.provider)}`,children:T(e.provider)}),s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:e.model}),e.qualityTier&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:e.qualityTier}),e.size&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",children:e.size})]}),e.constraints&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[s.jsxs("button",{onClick:()=>x(!p),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),s.jsx("span",{children:"Model Constraints"})]}),p&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1 pl-6",children:[e.constraints.maxSize&&s.jsxs("div",{children:[" Max size: ",e.constraints.maxSize]}),e.constraints.supportedSizes&&e.constraints.supportedSizes.length>0&&s.jsxs("div",{children:[" Supported sizes: ",e.constraints.supportedSizes.join(", ")]}),e.constraints.supportsStyle!==void 0&&s.jsxs("div",{children:[" Style support: ",e.constraints.supportsStyle?"Yes":"No"]})]})]}),e.availableAlternatives&&e.availableAlternatives.length>0&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[s.jsxs("button",{onClick:()=>y(!b),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),s.jsxs("span",{children:["Available Alternatives (",e.availableAlternatives.length,")"]})]}),b&&s.jsx("div",{className:"mt-2 space-y-2 pl-6",children:e.availableAlternatives.map((F,ae)=>s.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${_(F.provider)}`,children:T(F.provider)}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:F.model})]}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["$",F.cost.toFixed(4)]})]},ae))})]})]})}):u||e.status==="generating"?s.jsx("div",{className:"bg-white dark:bg-gray-800 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Generating image with ",T(e.provider),"..."]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This may take a few seconds"})]})]})}):h||e.status==="error"?s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-red-900 dark:text-red-200",children:"Image Generation Failed"}),s.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h||e.error||"An unknown error occurred"}),s.jsxs("button",{onClick:A,className:"mt-3 btn-secondary text-sm flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Retry"})]})]})]})}):e.status==="complete"&&e.imageUrl?s.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[e.fallbackUsed&&s.jsxs("div",{className:"mx-4 mt-4 mb-2 flex items-center gap-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded px-3 py-2",children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Primary provider unavailable, fallback provider used"})]}),k&&s.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 mb-3",children:" IMAGE GENERATION DETAILS"}),s.jsx("table",{className:"w-full text-sm mb-4",children:s.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Title"}),s.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:"Generated Image"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Final Prompt"}),s.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100 break-words",children:e.revisedPrompt||e.prompt})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Size"}),s.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.size||"1024x1024"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Model"}),s.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.model})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Provider"}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(e.provider)}`,children:T(e.provider)})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Quality"}),s.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.qualityTier||"standard"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Cost"}),s.jsxs("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:["$",e.cost.toFixed(4)]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Status"}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Success"})})]})]})}),e.llmApiCall&&s.jsxs("div",{className:"space-y-3",children:[e.llmApiCall.request&&s.jsx(zC,{data:e.llmApiCall.request,title:"Request Data"}),e.llmApiCall.response&&s.jsx(zC,{data:e.llmApiCall.response,title:"Response Data"})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:e.imageUrl,alt:e.prompt,className:"w-full"}),s.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n&&s.jsx("button",{onClick:I,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy image URL",children:s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a&&s.jsx("button",{onClick:O,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy as markdown",children:s.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>S(!k),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[s.jsx("svg",{className:`w-4 h-4 transform transition-transform ${k?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),s.jsxs("span",{className:"font-medium",children:[k?"Hide":"Show"," Details"]})]}),o&&e.llmApiCall&&s.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 border border-gray-300 dark:border-gray-600 rounded transition-colors",title:"View LLM call details",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"LLM Info"})]})]})]}):null},gg=({data:e,level:t=0,expanded:r=!1,expandPaths:n=[],currentPath:a="",expandAll:o=!1})=>{const l=o||r||n.some(y=>a===y||a.startsWith(y+".")),[u,d]=C.useState(l),f=(y=>y===null?"null":Array.isArray(y)?"array":typeof y)(e);if(f!=="object"&&f!=="array")return s.jsx("span",{className:`json-value json-${f}`,children:f==="string"?`"${e}"`:String(e)});const p=Array.isArray(e)?e.map((y,k)=>[k,y]):Object.entries(e),x=p.length===0,b=Array.isArray(e)?`Array(${e.length})`:`Object{${p.length}}`;return s.jsxs("div",{className:"json-tree",children:[s.jsxs("div",{className:"json-line",children:[!x&&s.jsx("button",{onClick:()=>d(!u),className:"json-toggle","aria-label":u?"Collapse":"Expand",children:u?"":""}),s.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"[":"{"}),!u&&!x&&s.jsxs("span",{className:"json-preview",children:[" ",b," "]}),!u&&s.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"]":"}"})]}),u&&s.jsxs("div",{className:"json-content",style:{marginLeft:`${t*20+20}px`},children:[p.map(([y,k],S)=>{const _=a?`${a}.${y}`:String(y);return s.jsxs("div",{className:"json-item",children:[!Array.isArray(e)&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"json-key",children:['"',y,'"']}),s.jsx("span",{className:"json-colon",children:": "})]}),s.jsx(gg,{data:k,level:t+1,expanded:!1,expandPaths:n,currentPath:_,expandAll:o}),S<p.length-1&&s.jsx("span",{className:"json-comma",children:","})]},y)}),s.jsx("div",{style:{marginLeft:"-20px"},className:"json-bracket",children:Array.isArray(e)?"]":"}"})]})]})},ov=e=>{if(typeof e!="string")return!1;const t=e.trim();if(!t||!(t.startsWith("{")||t.startsWith("[")))return!1;try{const r=JSON.parse(t);return typeof r=="object"&&r!==null}catch{return!1}},OI=e=>{try{return JSON.parse(e.trim())}catch{return null}},Fle=({content:e,className:t=""})=>{if(ov(e)){const r=OI(e);if(r!==null)return s.jsx("div",{className:`json-container ${t}`,children:s.jsx(gg,{data:r,expanded:!1})})}return s.jsx("div",{className:t,children:e})},Ule=({images:e,maxDisplay:t=3,onImageClick:r,onGrabImage:n})=>{const[a,o]=C.useState(new Set),u=e.map(h=>typeof h=="string"?{src:h,alt:void 0}:h).slice(0,t);if(!e||e.length===0)return null;const d=(h,f,p)=>{h.stopPropagation(),n?.(f,p)};return s.jsx("div",{className:"my-4 flex gap-2 flex-wrap",children:u.map((h,f)=>a.has(f)?null:s.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors w-32 h-32",children:[s.jsx("img",{src:h.src,alt:h.alt||`Search result ${f+1}`,className:"w-full h-full object-cover cursor-pointer",loading:"lazy",onError:()=>o(p=>new Set(p).add(f)),onClick:()=>r?.(h.src)}),n&&s.jsx("button",{onClick:p=>d(p,h.src,h.alt||`Search result ${f+1}`),className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded shadow-lg z-10",title:"Add to SWAG",children:" Grab"})]},`${h.src}-${f}`))})},$le=({selectedSnippetIds:e,onSelectionChange:t,userEmail:r})=>{const{getToken:n}=$s(),{snippets:a,getAllTags:o}=xg(),[l,u]=C.useState("text"),[d,h]=C.useState(""),[f,p]=C.useState(""),[x,b]=C.useState([]),[y,k]=C.useState(!1),[S,_]=C.useState(!1),[T,A]=C.useState([]),[I,O]=C.useState(.5);C.useEffect(()=>{const L=()=>{const D=localStorage.getItem("rag_config");if(D)try{const X=JSON.parse(D);X.similarityThreshold!==void 0&&O(X.similarityThreshold)}catch(X){console.error("Failed to parse RAG config:",X)}};L();const q=()=>L();return window.addEventListener("rag_config_updated",q),()=>{window.removeEventListener("rag_config_updated",q)}},[]);const B=async()=>{if(f.trim()){k(!0),_(!0);try{const L=await es(),q=await n(),D=await fetch(`${L}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...q?{Authorization:`Bearer ${q}`}:{}},body:JSON.stringify({query:f})});if(!D.ok)throw new Error("Failed to get query embedding");const{embedding:X}=await D.json(),K=await Ma.vectorSearch(X,20,I);console.log(` Vector search found ${K.length} results with threshold ${I}`),b(K)}catch(L){console.error("Vector search error:",L),alert("Vector search failed. Make sure snippets have embeddings generated.")}finally{k(!1)}}},F=()=>{let L=a;if(T.length>0&&(L=L.filter(q=>T.every(D=>q.tags?.includes(D)))),l==="text"&&d.trim()){const q=d.toLowerCase();L=L.filter(D=>D.title?.toLowerCase().includes(q)||D.content.toLowerCase().includes(q))}else if(l==="vector"&&S){const q=new Set(x.map(D=>String(D.snippet_id)));L=L.filter(D=>q.has(D.id))}return L},ae=L=>{if(l!=="vector"||!S)return null;const q=x.find(D=>String(D.snippet_id)===L);return q?q.score:null},Z=L=>{const q=new Set(e);q.has(L)?q.delete(L):q.add(L),t(q)},z=()=>{const L=F(),q=new Set;L.forEach(D=>q.add(D.id)),t(q)},ee=()=>{t(new Set)},W=F(),$=o();return s.jsxs("div",{className:"snippet-selector flex flex-col h-full bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:" Attach Context"}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size>0&&`${e.size} selected`})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:z,disabled:W.length===0,className:"px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Select All"}),s.jsx("button",{onClick:ee,disabled:e.size===0,className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),s.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800",children:s.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[" Select snippets to include as ",s.jsx("strong",{children:"full context"})," in your message. Unlike automatic RAG which finds relevant fragments, selected snippets are included in their entirety."]})}),s.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{u("text"),_(!1),b([])},className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="text"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Text Search"}),s.jsx("button",{onClick:()=>u("vector"),className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="vector"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Semantic Search"})]})}),s.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-2",children:[l==="text"?s.jsx("input",{type:"text",placeholder:"Search by title or content...",value:d,onChange:L=>h(L.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Enter semantic search query...",value:f,onChange:L=>p(L.target.value),onKeyDown:L=>L.key==="Enter"&&B(),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:B,disabled:y||!f.trim(),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"":""})]}),l==="vector"&&S&&s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Found ",x.length," results with similarity  ",I.toFixed(2)]})]}),$.length>0&&s.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[s.jsx("div",{className:"flex flex-wrap gap-1.5",children:$.map(L=>s.jsx("button",{onClick:()=>{A(q=>q.includes(L)?q.filter(D=>D!==L):[...q,L])},className:`px-2 py-1 text-xs rounded transition-colors ${T.includes(L)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:L},L))}),T.length>0&&s.jsx("button",{onClick:()=>A([]),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear tag filters"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:W.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:a.length===0?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-medium",children:"No snippets in knowledge base"}),s.jsx("p",{className:"text-xs mt-2",children:"Visit the Swag page to add snippets"})]}):l==="vector"&&!S?s.jsx("p",{className:"text-sm",children:"Enter a query and click Search to find semantically similar snippets"}):s.jsx("p",{className:"text-sm",children:"No snippets match your filters"})}):W.map(L=>{const q=e.has(L.id),D=ae(L.id);return s.jsx("div",{onClick:()=>Z(L.id),className:`border rounded p-3 cursor-pointer transition-all ${q?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-700 hover:shadow-md"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:q,onChange:()=>{},className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:L.title||"Untitled"}),D!==null&&s.jsxs("span",{className:"text-xs font-mono text-blue-600 dark:text-blue-400 whitespace-nowrap",children:[(D*100).toFixed(1),"%"]})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:L.content}),L.tags&&L.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:L.tags.map(X=>s.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:X},X))}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{className:"capitalize",children:L.sourceType}),L.hasEmbedding&&s.jsx("span",{title:"Has embeddings",children:""})]})]})]})},L.id)})}),s.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900",children:s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:" Tip: Click a snippet to toggle selection. Selected snippets will be included as context when you send your message."})})]})},II=({text:e,variant:t="icon",size:r="md",onStart:n,onEnd:a,shouldSummarize:o=!1,className:l=""})=>{const{state:u,speak:d,stop:h}=Bp(),[f,p]=C.useState(!1),x=u.isPlaying||f;console.log("ReadButton render - isReading:",x,"state.isPlaying:",u.isPlaying,"localIsReading:",f),C.useEffect(()=>{p(u.isPlaying)},[u.isPlaying]),C.useEffect(()=>{f&&!u.isPlaying&&(console.log("ReadButton: Syncing local state with global state"),p(!1))},[f,u.isPlaying]);const b=C.useCallback(async()=>{if(x)console.log("ReadButton: Stop clicked"),p(!1),h(),a?.();else{console.log("ReadButton: Start clicked"),p(!0),n?.();try{await d(e,{shouldSummarize:o,onStart:()=>{console.log("TTS started"),p(!0)},onEnd:()=>{console.log("TTS ended"),p(!1),a?.()},onError:T=>{console.error("TTS error in callback:",T),p(!1)}})}catch(T){console.error("TTS error:",T),p(!1),a?.()}}},[x,e,o,d,h,n,a]);if(!u.isEnabled)return null;const y={sm:{icon:"w-4 h-4",button:"px-2 py-1 text-xs",fab:"w-10 h-10"},md:{icon:"w-5 h-5",button:"px-3 py-1.5 text-sm",fab:"w-12 h-12"},lg:{icon:"w-6 h-6",button:"px-4 py-2 text-base",fab:"w-16 h-16"}},k=y[r].icon,S=()=>s.jsx("svg",{className:k,fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),_=()=>s.jsx("svg",{className:k,fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})});return t==="icon"?s.jsx("button",{onClick:b,className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${l}`,title:x?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:u.isPlaying&&!x,children:x?s.jsx(_,{}):s.jsx(S,{})}):t==="button"?s.jsx("button",{onClick:b,className:`${y[r].button} rounded-lg flex items-center gap-2 transition-colors ${x?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} ${l}`,title:x?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:u.isPlaying&&!x,children:x?s.jsxs(s.Fragment,{children:[s.jsx(_,{}),"Stop"]}):s.jsxs(s.Fragment,{children:[s.jsx(S,{}),"Read"]})}):t==="fab"?s.jsx("button",{onClick:b,className:`${y[r].fab} fixed bottom-20 right-6 rounded-full shadow-lg flex items-center justify-center z-40 transition-colors ${x?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white ${l}`,title:x?"Stop reading":"Read aloud",disabled:u.isPlaying&&!x,children:x?s.jsx(_,{}):s.jsx(S,{})}):null},zle=()=>{const{state:e,stop:t}=Bp();return e.isPlaying?s.jsxs("button",{onClick:t,className:"fixed top-4 right-20 z-[60] px-4 py-2 bg-red-600 text-white rounded-lg shadow-lg hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Reading"]}):null},HC=({rawResponse:e,extractionMetadata:t})=>{const[r,n]=C.useState(null);let a=null,o=[];try{e&&(a=JSON.parse(e),a.results&&Array.isArray(a.results)&&(o=a.results))}catch(l){console.log("Failed to parse rawResponse:",l)}return console.log(" ToolTransparency received:",{hasRawResponse:!!e,rawResponseLength:e?.length,hasExtraction:!!t,parsedResults:o.length,rawResponsePreview:e?e.substring(0,100)+"...":"none"}),!e&&!t?(console.log(" ToolTransparency: No data, returning null"),null):(console.log(" ToolTransparency: Rendering with",o.length,"results"),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-3 pt-3 border-t-4 border-purple-400 dark:border-purple-600 bg-purple-50 dark:bg-purple-950 p-3 rounded",children:[s.jsxs("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:[" Search Results Transparency",s.jsxs("span",{className:"text-xs font-normal opacity-75",children:["(",o.length," results)"]})]}),s.jsxs("div",{className:"space-y-4",children:[o.map((l,u)=>{const d=l.rawHtml||l.rawContent||"",h=l.content||"";return s.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[s.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:["Result ",u+1,": ",l.title||l.url]}),d&&s.jsx("div",{className:"mb-3",children:s.jsxs("button",{onClick:()=>n({content:d,title:`Raw Content: ${l.title||l.url}`}),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded flex items-center gap-2",children:[" View Full Raw Scraped Content",s.jsxs("span",{className:"opacity-75",children:["(",d.length.toLocaleString()," chars)"]})]})}),h&&s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1 flex items-center gap-2",children:[" Content Sent to LLM",s.jsxs("span",{className:"opacity-75",children:["(",h.length.toLocaleString()," chars)"]})]}),s.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-300 dark:border-green-700 rounded p-3 max-h-96 overflow-y-auto",children:s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:s.jsx(LA,{children:h})})})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-400 mb-1",children:" Parsed Page Structure & Metadata"}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:s.jsx(zu,{data:{url:l.url,title:l.title,snippet:l.snippet,images:l.page_content?.images||l.images||[],youtube:l.youtube||[],media:l.media||[],links:l.links||[],page_content:l.page_content,summary:l.page_content?.summary,structure:l.page_content?.structure,metadata:{contentLength:h.length,rawContentLength:d.length,hasImages:!!(l.page_content?.images?.length||l.images?.length),hasYouTube:!!l.youtube?.length,hasMedia:!!l.media?.length,hasLinks:!!l.links?.length}}})})]})]},u)}),t&&s.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[s.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:" Overall Extraction Metadata"}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:s.jsx(zu,{data:t})})]})]})]}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:r.title}),s.jsx("button",{onClick:()=>n(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm",children:" Close"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 font-mono",children:r.content})}),s.jsxs("div",{className:"p-4 border-t border-gray-300 dark:border-gray-700 flex gap-2",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.content),alert("Copied to clipboard!")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:" Copy to Clipboard"}),s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[r.content.length.toLocaleString()," characters"]})]})]})})]}))},qC=({content:e,chartCode:t})=>{const[r,n]=Mn.useState(!1),[a,o]=Mn.useState(!1);try{const l=typeof e=="string"?JSON.parse(e):e,d=t||(p=>{if(!p)return null;const x=p.match(/```mermaid\s*([\s\S]*?)```/);if(x&&x[1]){const b=x[1].trim();return b.includes("[Your Mermaid diagram code here]")||b.includes("Your Mermaid diagram code here")?null:b}return null})(l.instructions||""),h=()=>{l.instructions&&navigator.clipboard.writeText(l.instructions).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},f=()=>{d&&navigator.clipboard.writeText(d).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})};return s.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-950/30 dark:to-indigo-950/30 rounded-lg border border-purple-200 dark:border-purple-700 overflow-hidden",children:s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[s.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 w-32 bg-purple-100/50 dark:bg-purple-900/30",children:" Chart Type"}),s.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded-full text-xs font-medium border border-purple-300 dark:border-purple-600",children:l.chart_type||"N/A"})})]}),s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[s.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30",children:" Description"}),s.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:l.description||"N/A"})]}),d&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[s.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Chart Code"}),s.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[s.jsx("button",{onClick:f,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy Mermaid code to clipboard",children:a?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})}),s.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-gray-900 dark:bg-gray-950 text-green-400 dark:text-green-300 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:d})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Full Instructions"}),s.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[s.jsx("button",{onClick:h,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy full instructions to clipboard",children:r?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy All"]})}),s.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:l.instructions||"No instructions available"})]})]})]})})})}catch(l){return console.error("Error parsing generate_chart result:",l),s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:typeof e=="string"?e:JSON.stringify(e,null,2)})}},Hle=({videos:e,onOpenPlayer:t})=>{const{playTrack:r,addTracksToStart:n}=ic(),a=o=>{n([{videoId:o.videoId,title:o.title,url:o.url,thumbnail:o.thumbnail,channel:o.channel,duration:o.duration}]),setTimeout(()=>{r(0),t&&t()},0)};return e.length===0?null:s.jsxs("div",{className:"youtube-video-results my-4 space-y-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:[" YouTube Videos (",e.length,")"]}),e.map((o,l)=>s.jsxs("div",{className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[o.thumbnail&&s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:o.thumbnail,alt:o.title,className:"w-32 h-20 object-cover rounded"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:o.title}),o.channel&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:o.channel}),o.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:o.description}),o.duration&&s.jsxs("span",{className:"inline-block text-xs text-gray-500 dark:text-gray-500 mt-1",children:[" ",o.duration]})]}),s.jsx("div",{className:"flex-shrink-0 flex items-center",children:s.jsxs("button",{onClick:()=>a(o),className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Play video",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm font-medium",children:"Play"})]})})]},o.videoId||l)),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:" All videos have been added to your playlist"})]})},qle=({results:e})=>{const[t,r]=C.useState(new Set),[n,a]=C.useState(new Set),o=u=>{r(d=>{const h=new Set(d);return h.has(u)?h.delete(u):h.add(u),h})},l=u=>{a(d=>{const h=new Set(d);return h.has(u)?h.delete(u):h.add(u),h})};return!e||e.length===0?null:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200",children:[" Search Results (",e.length,")"]}),e.map((u,d)=>{const h=t.has(d),f=n.has(d),p={url:u.url,title:u.title,description:u.description,score:u.score,duckduckgoScore:u.duckduckgoScore,state:u.state,contentLength:u.contentLength,fetchTimeMs:u.fetchTimeMs,originalLength:u.originalLength,intelligentlyExtracted:u.intelligentlyExtracted,truncated:u.truncated,images_count:u.images?.length||0,youtube_count:u.youtube?.length||0,media_count:u.media?.length||0,links_count:u.links?.length||0,contentError:u.contentError};return s.jsxs("div",{className:"border border-purple-200 dark:border-purple-700 rounded-lg p-3 bg-purple-50/30 dark:bg-purple-900/10",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsxs("span",{className:"flex-shrink-0 text-purple-600 dark:text-purple-400 font-bold text-sm",children:["#",d+1]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 text-sm mb-1",children:u.title||`Result ${d+1}`}),u.url&&s.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block",children:u.url})]})]}),(u.description||u.snippet)&&s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2 italic",children:u.description||u.snippet}),u.contentError&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2 mb-2",children:s.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:[" ",u.contentError]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[u.contentLength!==void 0&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded",children:[(u.contentLength/1024).toFixed(1)," KB"]}),u.fetchTimeMs!==void 0&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded",children:[u.fetchTimeMs,"ms"]}),u.images&&u.images.length>0&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded",children:[" ",u.images.length]}),u.links&&u.links.length>0&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 rounded",children:[" ",u.links.length]}),u.truncated&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded",children:" Truncated"})]}),s.jsxs("div",{className:"flex gap-2",children:[u.content&&s.jsxs("button",{onClick:()=>o(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors font-medium",children:[s.jsx("span",{children:h?"":""}),s.jsx("span",{children:"Content Sent to LLM"}),u.originalLength&&s.jsxs("span",{className:"opacity-75",children:["(",(u.originalLength/1024).toFixed(1)," KB)"]})]}),s.jsxs("button",{onClick:()=>l(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors font-medium",children:[s.jsx("span",{children:f?"":""}),s.jsx("span",{children:"Metadata JSON"})]})]}),h&&u.content&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-800 dark:text-purple-200 mb-2",children:[" Content Sent to LLM:",u.intelligentlyExtracted&&s.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:" Intelligently Extracted"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-700 p-3 max-h-96 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 leading-relaxed font-mono",children:u.content})})]}),f&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Scrape Metadata:"}),s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-96 overflow-y-auto",children:s.jsx(gg,{data:p})})]})]},d)})]})},Gle=({isOpen:e,onClose:t,onExampleClick:r,location:n,locationLoading:a,requestLocation:o,clearLocation:l})=>{if(!e)return null;const u=d=>{r(d),t()};return Mn.useEffect(()=>{const d=h=>{h.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:t,children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" Example Prompts"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Search & Research"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("What are the latest developments in artificial intelligence this week?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Latest AI developments"}),s.jsx("button",{onClick:()=>u("Find current news about climate change policy updates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Climate change policy news"}),s.jsx("button",{onClick:()=>u("What is the current stock price of Tesla and recent news about the company?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Stock price lookup with news"}),s.jsx("button",{onClick:()=>u("Search for recent scientific breakthroughs in quantum computing"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scientific research updates"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" YouTube Search & Transcripts"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Find YouTube videos about TypeScript best practices"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search YouTube videos"}),s.jsx("button",{onClick:()=>u("Get transcript with timestamps from https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Get YouTube transcript (with timestamps)"}),s.jsx("button",{onClick:()=>u("Find the top 5 Python tutorial videos and summarize their content"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search + batch summarize videos"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 3 YouTube tools available"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Audio/Video Transcription (Whisper AI)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Transcribe this: http://localhost:3000/samples/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:" Local Dev: AI & ML discussion (~4min)"}),s.jsx("button",{onClick:()=>u("Transcribe this: https://llmproxy-media-samples.s3.amazonaws.com/audio/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe: AI & ML discussion (~4min)"}),s.jsx("button",{onClick:()=>u("Transcribe this YouTube video: https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe YouTube video"}),s.jsx("button",{onClick:()=>u("Transcribe this audio file: https://llmproxy-media-samples.s3.amazonaws.com/audio/hello-test.wav and summarize it"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe + auto-summarize"}),s.jsxs("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:[" OpenAI Whisper with progress tracking",s.jsx("br",{})," Local dev example only works with localhost backend"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Math & Calculations (JavaScript Sandbox)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Calculate compound interest on $10,000 at 7% annual rate for 15 years"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compound interest calculator"}),s.jsx("button",{onClick:()=>u("Generate a multiplication table for numbers 1-12"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Multiplication table"}),s.jsx("button",{onClick:()=>u("Calculate the Fibonacci sequence up to the 20th number"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Fibonacci sequence"}),s.jsx("button",{onClick:()=>u("Convert 100 USD to EUR, GBP, and JPY at current exchange rates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Currency conversion"}),s.jsx("button",{onClick:()=>u("Calculate my BMI if I weigh 70kg and am 175cm tall"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"BMI calculator"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Secure sandbox execution"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Charts & Diagrams (Mermaid.js)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Create a flowchart showing the software development lifecycle from planning to deployment"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Flowchart: Dev lifecycle"}),s.jsx("button",{onClick:()=>u("Show a sequence diagram for user authentication with OAuth 2.0"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Sequence: OAuth flow"}),s.jsx("button",{onClick:()=>u("Generate a Gantt chart for a 3-month web app project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Gantt: Project timeline"}),s.jsx("button",{onClick:()=>u("Create a class diagram for an e-commerce system with User, Order, and Product"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Class diagram: E-commerce"}),s.jsx("button",{onClick:()=>u("Show a state diagram for an order processing system"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"State diagram: Order processing"}),s.jsx("button",{onClick:()=>u("Create an ER diagram for a blog database with Users, Posts, Comments"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"ER diagram: Blog schema"}),s.jsx("button",{onClick:()=>u("Show a pie chart of renewable energy distribution: Solar 30%, Wind 35%, Hydro 25%, Geo 10%"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Pie chart: Energy sources"}),s.jsx("button",{onClick:()=>u("Create a mindmap for planning a mobile app development project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Mindmap: App planning"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 9 chart types with auto-fix"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Scraping & Content Extraction"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Scrape and summarize https://news.ycombinator.com"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: Hacker News"}),s.jsx("button",{onClick:()=>u("Extract key points from https://en.wikipedia.org/wiki/Artificial_intelligence"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Extract: Wikipedia article"}),s.jsx("button",{onClick:()=>u("Get the full documentation from https://react.dev/learn"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: React docs"}),s.jsx("button",{onClick:()=>u("Analyze this GitHub repo: https://github.com/microsoft/TypeScript"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: GitHub repository"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Universal scraper"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Browser Automation (Selenium)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Scrape https://www.linkedin.com/login and tell me what you see - this requires login"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: LinkedIn"}),s.jsx("button",{onClick:()=>u("Access https://twitter.com/home and get the latest tweets - requires authentication"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Twitter/X"}),s.jsx("button",{onClick:()=>u("Get content from https://www.instagram.com/instagram/ - login needed to view posts"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Instagram"}),s.jsx("button",{onClick:()=>u("Scrape https://www.google.com/recaptcha/api2/demo and complete the captcha challenge"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: Google reCAPTCHA v2"}),s.jsx("button",{onClick:()=>u("Access https://2captcha.com/demo/recaptcha-v2 and solve the captcha"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: reCAPTCHA Demo Site"}),s.jsx("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-400 italic",children:" Opens browser for manual login/CAPTCHA solving"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Tier 3/4: Selenium with interactive mode (local only)"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400",children:" Location-Based Services"}),s.jsx("button",{onClick:async()=>{n?l():await o()},className:`px-2 py-1 text-xs rounded transition-colors ${n?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:n?"Location enabled - Click to disable":"Location disabled - Click to enable",children:a?"":n?" Enabled":" Disabled"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Find the top 5 restaurants near my current location"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearby restaurants"}),s.jsx("button",{onClick:()=>u("Search for coffee shops within 2 miles that are open now"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find open coffee shops"}),s.jsx("button",{onClick:()=>u("What is the weather forecast for my location for the next 3 days?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Local weather forecast"}),s.jsx("button",{onClick:()=>u("Find the nearest hospital or emergency room"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearest hospital"}),s.jsx("button",{onClick:()=>u("What tourist attractions are in my area?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find local attractions"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Privacy-first location"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" AI Image Generation"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Generate an image of a serene mountain landscape at sunset with golden light"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Landscape: Mountain sunset"}),s.jsx("button",{onClick:()=>u("Create a photorealistic portrait of a professional business woman smiling"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Portrait: Business professional"}),s.jsx("button",{onClick:()=>u("Generate a cartoon-style illustration of a friendly robot helping humans"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Cartoon: Friendly robot"}),s.jsx("button",{onClick:()=>u("Create a fast sketch of a coffee cup on a desk"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Quick sketch: Coffee cup"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Smart model selection"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Internal Knowledge Base (RAG)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("How do I configure OpenAI embeddings in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: OpenAI config"}),s.jsx("button",{onClick:()=>u("What is the RAG implementation in this codebase?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: RAG system"}),s.jsx("button",{onClick:()=>u("How do I deploy Lambda functions in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Lambda deployment"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Semantic search with RAG"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Data Analysis & Comparison"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Compare population growth rates of the top 5 most populous countries"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Population growth"}),s.jsx("button",{onClick:()=>u("What are the key differences between Python and JavaScript?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Python vs JavaScript"}),s.jsx("button",{onClick:()=>u("Analyze pros and cons of renewable energy sources"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Analyze: Renewable energy"}),s.jsx("button",{onClick:()=>u("Compare the performance benchmarks of React, Vue, and Angular"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: JS frameworks"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Multi-Step Workflows (Backend Todos)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Create a complete React blog application with authentication, post creation, and comments. Break this down into steps and implement each one."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Build: React blog app"}),s.jsx("button",{onClick:()=>u("Help me set up a full CI/CD pipeline for my Node.js app. Plan out all the steps needed and execute them in order."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Setup: CI/CD pipeline"}),s.jsx("button",{onClick:()=>u("Migrate my Express server from JavaScript to TypeScript. Create a step-by-step plan and execute each phase."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Migrate: JS to TypeScript"}),s.jsx("button",{onClick:()=>u("Set up a complete AWS deployment for my application including VPC, RDS database, Lambda functions, and API Gateway. Plan and implement this step by step."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Deploy: AWS infrastructure"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Auto-progresses through steps (max 5 iterations)"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Knowledge Snippets (Google Sheets)"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u('Save this code example to my snippets with tags "javascript" and "async": async function fetchData() { const response = await fetch(url); return response.json(); }'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Code snippet"}),s.jsx("button",{onClick:()=>u("Remember this information: TypeScript 5.0 introduced const type parameters for generic functions"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Quick note"}),s.jsx("button",{onClick:()=>u('Search my snippets for "react hooks"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Saved snippets"}),s.jsx("button",{onClick:()=>u('Find all my snippets tagged with "python"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: By tag"}),s.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Stored in your personal Google Sheet"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-amber-300 dark:border-amber-600",children:[s.jsx("h3",{className:"text-sm font-bold text-amber-600 dark:text-amber-400",children:" Recursive Agent (ask_llm)"}),s.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-amber-200 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300 rounded font-semibold",children:" HIGH TOKENS"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Search for recent quantum computing research papers, scrape the top 3, analyze their methodologies, and create a comprehensive comparison table"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Multi-step research + analysis"}),s.jsx("button",{onClick:()=>u("Find Python async/await tutorials, analyze the best one, extract code examples, and generate a beginner-friendly explanation with working examples"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Tutorial extraction + synthesis"}),s.jsx("button",{onClick:()=>u("Search for the latest TypeScript features, create a detailed summary, generate code examples, and save the best practices to my snippets"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Research + documentation + save"}),s.jsxs("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-500 italic bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[" Spawns sub-agent with full tool access",s.jsx("br",{})," Uses 5-10x more tokens",s.jsx("br",{})," Enable in Settings first"]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-red-400 dark:border-red-600",children:[s.jsx("h3",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:" Advanced Reasoning (o1/DeepSeek-R1)"}),s.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-red-300 dark:bg-red-900/50 text-red-900 dark:text-red-300 rounded font-bold animate-pulse",children:" EXTREME"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>u("Prove that the square root of 2 is irrational using a step-by-step logical proof with explicit reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Mathematical proof (irrationality)"}),s.jsx("button",{onClick:()=>u("Analyze the time complexity of quicksort and prove why it is O(n log n) on average with detailed step-by-step reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Algorithm complexity proof"}),s.jsx("button",{onClick:()=>u("Design a normalized database schema for an e-commerce platform with explicit reasoning about normalization tradeoffs, performance implications, and scalability considerations"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Architecture design + reasoning"}),s.jsx("button",{onClick:()=>u("Debug this code and explain the logical steps to identify the bug: function fibonacci(n) { if (n <= 1) return n; return fibonacci(n-1) + fibonacci(n-3); }"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Logical debugging analysis"}),s.jsxs("p",{className:"px-3 py-2 text-xs text-red-700 dark:text-red-500 italic bg-red-50 dark:bg-red-900/20 rounded border border-red-300 dark:border-red-800 font-semibold",children:[" Uses OpenAI o1 or DeepSeek-R1",s.jsx("br",{})," Maximum reasoning depth",s.jsx("br",{})," Uses 10-50x MORE tokens",s.jsx("br",{})," Enable in Settings first"]})]})]})]})]})})]})})};function Yle(e){return typeof e=="string"?e:Array.isArray(e)?e.filter(t=>t.type==="text"&&t.text).map(t=>t.text).join(`
`):""}function GC(){return`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async function Sy(){try{return(await Xl.getAllChats()).sort((t,r)=>r.timestamp-t.timestamp).map(t=>({id:t.id,timestamp:t.timestamp,firstUserPrompt:t.title||"New chat",messages:t.messages}))}catch(e){return console.error("Error loading chat history from IndexedDB:",e),[]}}async function Wle(e,t,r){try{const n=e.find(l=>l.role==="user"),a=n?Yle(n.content):"",o=a?a.substring(0,100):"New chat";return t||(t=GC()),await Xl.saveChat(t,e,o,r),t}catch(n){return console.error("Error saving chat to history:",n),t||GC()}}async function YC(e){try{const t=await Xl.getChatWithMetadata(e);return t?{messages:t.messages,systemPrompt:t.systemPrompt,planningQuery:t.planningQuery,generatedSystemPrompt:t.generatedSystemPrompt,generatedUserQuery:t.generatedUserQuery,selectedSnippetIds:t.selectedSnippetIds}:null}catch(t){return console.error("Error loading chat with metadata from IndexedDB:",t),null}}async function WC(e){try{await Xl.deleteChat(e)}catch(t){console.error("Error deleting chat from IndexedDB:",t)}}async function Vle(){try{await Xl.clearAllChats()}catch(e){console.error("Error clearing chat history from IndexedDB:",e)}}const Kle=({transferData:e,enabledTools:t,showMCPDialog:r,setShowMCPDialog:n,onLoadingChange:a})=>{const{accessToken:o,user:l,getToken:u}=$s(),{getAccessToken:d}=IN(),{addSearchResult:h,clearSearchResults:f}=zD(),{addTracksToStart:p}=ic(),{addSnippet:x,snippets:b,syncSnippetFromGoogleSheets:y}=xg(),{showError:k,showWarning:S,showSuccess:_,clearAllToasts:T}=xo(),{settings:A}=ii(),{addCost:I,usage:O}=Pp(),{isConnected:B,sendMessages:F,sendScrollPosition:ae}=bg(),{location:Z,isLoading:z,requestLocation:ee,clearLocation:W}=FN(),[$,L]=C.useState([]),[q,D]=C.useState(!1),[X,K]=ps("chat_input",""),[xe,U]=ps("chat_system_prompt",""),[M,Y]=C.useState(!1),[R,H]=C.useState(!1),[ne,re]=C.useState(!1),[fe,le]=C.useState(!1),[ve,ce]=C.useState(new Set),[ke,it]=C.useState(""),[pt,zt]=C.useState(""),[Sr,He]=C.useState(""),[Gt,rr]=ps("chat_mcp_servers",[]),[Dt,Ht]=C.useState({name:"",url:""});C.useEffect(()=>{a?.(M)},[M,a]);const[Zt,hr]=C.useState([]),[ar,Ut]=C.useState(""),[dn,Ne]=C.useState(new Set),[Ke,St]=C.useState(!1),[Tt,sr]=C.useState(null),[on,hn]=C.useState(!1),[Gr,Tr]=C.useState(null),[pr,Yt]=C.useState([]),[gn,fn]=C.useState(new Map),[rs,aa]=C.useState(new Map),[Gn,sa]=C.useState(new Map),[Qr,oe]=C.useState(new Map),[Re,qe]=C.useState(new Map),[bt,Cr]=C.useState(new Map),[br,ut]=C.useState(new Map),[lt,At]=C.useState(new Map),[dt,cr]=C.useState(null),[nn,ga]=C.useState(null),[fa,Tn]=C.useState(null),[Pr,Rr]=C.useState(null),[Yn,Fa]=C.useState(null),[Hs,Ua]=C.useState(!1),[ci,ft]=C.useState(""),[de,$e]=C.useState(!1),[ot,fr]=C.useState(null),[Hr,Vt]=C.useState(0),[he,Be]=C.useState([]),[st,Ae]=C.useState(!1),Ge=C.useRef(null),gt=C.useRef(null),Ct=C.useRef(null),Br=C.useRef(!1),ln=C.useRef(null),Xt=C.useRef(null),ir=C.useRef(null),[Jt,Cn]=ps("chat_prompt_history",[]),[pa,Qt]=C.useState(-1),[bs]=ps("chat_use_rag",!1),[,Ii]=C.useState(!1),[xc,ma]=C.useState(.3),[ys,vs]=C.useState(null),[Di,Wn]=C.useState(!1),[hl,qs]=C.useState(null),[Ot,gl]=C.useState(!1),[Or,yr]=C.useState(new Set);C.useEffect(()=>{const P=localStorage.getItem("rag_config");if(P)try{const se=JSON.parse(P);se.similarityThreshold!==void 0&&ma(se.similarityThreshold)}catch(se){console.error("Failed to parse RAG config:",se)}},[]),C.useEffect(()=>{const P=Array.from(bt.values()).find(Me=>Me.phase==="generating"&&Me.estimated_seconds);if(!P||P.remaining_seconds===0)return;const se=setInterval(()=>{Cr(Me=>{const at=new Map(Me),Fe="img_generating",J=at.get(Fe);if(J&&J.phase==="generating"){const Xe=J.remaining_seconds??J.estimated_seconds??0;Xe>0&&at.set(Fe,{...J,remaining_seconds:Xe-1})}return at})},1e3);return()=>clearInterval(se)},[bt]);const ui=Mn.useMemo(()=>{const P={};return A.providers.forEach(se=>{if(se.enabled&&se.apiKey)switch(se.type){case"openai":P.openaiApiKey||(P.openaiApiKey=se.apiKey);break;case"together":P.togetherApiKey||(P.togetherApiKey=se.apiKey);break;case"gemini":case"gemini-free":P.geminiApiKey||(P.geminiApiKey=se.apiKey);break;case"replicate":P.replicateApiKey||(P.replicateApiKey=se.apiKey);break}}),P},[A.providers]),Gs=()=>{Ge.current?.scrollIntoView({behavior:"smooth"})},vo=(P,se)=>{let Me=P;const at=[],Fe=[],J=[],Xe=/!\[([^\]]*)\]\(([^\)]+)\)/g;let Se;for(;(Se=Xe.exec(P))!==null;)at.includes(Se[2])||at.push(Se[2]);const Ie=/\[([^\]]+)\]\(([^\)]+)\)/g;for(;(Se=Ie.exec(P))!==null;){const Ye=Se[2];Ye.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?J.includes(Ye)||J.push(Ye):Fe.includes(Ye)||Fe.push(Ye)}const pe=/<img[^>]+src=["']([^"']+)["'][^>]*>/g;for(;(Se=pe.exec(P))!==null;)at.includes(Se[1])||at.push(Se[1]);const Ze=/<a[^>]+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/g;for(;(Se=Ze.exec(P))!==null;){const Ye=Se[1];Ye.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?J.includes(Ye)||J.push(Ye):Fe.includes(Ye)||Fe.push(Ye)}return se?(Me+=`

---
`,se.images&&se.images.length>0&&(Me+=`

## Extracted Images

`,se.images.forEach(Ye=>{Me+=`![${Ye.alt||"Image"}](${Ye.src})
`,Me+=`<img src="${Ye.src}" alt="${Ye.alt||"Image"}" style="max-width:100%;height:auto;" />
`,Ye.source&&(Me+=`*Source: [${Ye.source}](${Ye.source})*

`)})),se.youtubeVideos&&se.youtubeVideos.length>0&&(Me+=`

## YouTube Videos

`,se.youtubeVideos.forEach(Ye=>{Me+=`### ${Ye.title||"YouTube Video"}

`,Me+=`[Watch on YouTube](${Ye.src})

`;const Ce=Ye.src.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/");Me+=`<iframe width="560" height="315" src="${Ce}" frameborder="0" allowfullscreen></iframe>

`,Ye.source&&(Me+=`*Source: [${Ye.source}](${Ye.source})*

`)})),se.otherVideos&&se.otherVideos.length>0&&(Me+=`

## Videos

`,se.otherVideos.forEach(Ye=>{Me+=`### ${Ye.title||"Video"}

`,Me+=`[Download Video](${Ye.src})

`,Me+=`<video controls style="max-width:100%;height:auto;">
`,Me+=`  <source src="${Ye.src}" type="video/mp4">
`,Me+=`  Your browser does not support the video tag.
`,Me+=`</video>

`,Ye.source&&(Me+=`*Source: [${Ye.source}](${Ye.source})*

`)})),se.media&&se.media.length>0&&(Me+=`

## Media

`,se.media.forEach(Ye=>{Me+=`### ${Ye.type}

`,Me+=`[Download Media](${Ye.src})

`,Ye.type.toLowerCase().includes("audio")?(Me+=`<audio controls style="width:100%;">
`,Me+=`  <source src="${Ye.src}">
`,Me+=`  Your browser does not support the audio tag.
`,Me+=`</audio>

`):Ye.type.toLowerCase().includes("video")&&(Me+=`<video controls style="max-width:100%;height:auto;">
`,Me+=`  <source src="${Ye.src}">
`,Me+=`  Your browser does not support the video tag.
`,Me+=`</video>

`),Ye.source&&(Me+=`*Source: [${Ye.source}](${Ye.source})*

`)})),se.sources&&se.sources.length>0&&(Me+=`

## Sources & References

`,se.sources.forEach((Ye,Ce)=>{Me+=`${Ce+1}. **[${Ye.title}](${Ye.url})**
`,Ye.snippet&&(Me+=`   > ${Ye.snippet}
`),Me+=`   - URL: [${Ye.url}](${Ye.url})

`})),Me):(at.length>0&&(Me+=`

---

## Inline Images

`,at.forEach(Ye=>{Me+=`![Image](${Ye})
`})),J.length>0&&(Me+=`

## Inline YouTube Videos

`,J.forEach(Ye=>{Me+=`- [YouTube Video](${Ye})
`,Me+=`  <iframe width="560" height="315" src="${Ye.replace("watch?v=","embed/")}" frameborder="0" allowfullscreen></iframe>

`})),Fe.length>0&&(Me+=`

## Inline Links

`,Fe.forEach(Ye=>{Me+=`- [${Ye}](${Ye})
`})),Me)},Ys=async(P,se)=>{try{const{imageUrlToBase64:Me}=await tr(async()=>{const{imageUrlToBase64:Xe}=await import("./imageUtils-DosmAaVd.js");return{imageUrlToBase64:Xe}},[]),at=await Me(P),Fe=se||"Image",J=`<img src="${at}" alt="${Fe}" style="max-width: 100%; height: auto;" />`;await x(J,"assistant",Fe),_("Image added to Swag!")}catch(Me){console.error("Failed to grab image:",Me);const at=se||"Image",Fe=`<img src="${P}" alt="${at}" style="max-width: 100%; height: auto;" />`;await x(Fe,"assistant",at),_("Image added to Swag (without conversion)!")}},tt=async(P,se,Me,at,Fe)=>{try{let J=at;if(Fe&&Fe.length>0){const pe=bc({toolResults:Fe});(pe.images.length>0||pe.links.length>0||pe.youtubeLinks.length>0||pe.otherMedia.length>0)&&(J={...at,images:[...at?.images||[],...pe.images.map(Ze=>({src:Ze,alt:"",source:""}))],youtubeVideos:[...at?.youtubeVideos||[],...pe.youtubeLinks.map(Ze=>({src:Ze.url,title:Ze.title||"",source:Ze.url}))],otherVideos:[...at?.otherVideos||[],...pe.otherMedia.filter(Ze=>Ze.type.includes("video")).map(Ze=>({src:Ze.url,title:"",source:Ze.url}))],media:[...at?.media||[],...pe.otherMedia.filter(Ze=>Ze.type.includes("audio")).map(Ze=>({src:Ze.url,type:Ze.type,source:Ze.url}))],sources:[...at?.sources||[],...pe.links.map(Ze=>({url:Ze.url,title:Ze.title||Ze.url,snippet:""}))]})}const Xe=vo(P,J),{convertHtmlImagesToBase64:Se}=await tr(async()=>{const{convertHtmlImagesToBase64:pe}=await import("./imageUtils-DosmAaVd.js");return{convertHtmlImagesToBase64:pe}},[]),Ie=await Se(Xe);await x(Ie,se,Me),_("Content captured to Swag!")}catch(J){console.error("Failed to capture content with base64 conversion:",J);const Xe=vo(P,at);await x(Xe,se,Me),_("Content captured to Swag (without image conversion)!")}},mt=C.useRef(null),Wt=C.useRef(null),mr=(P,se,Me)=>{console.log(" Voice transcription received:",{text:P,requestId:se,textLength:P.length,hasLlmApiCall:!!Me}),K(P),mt.current=se,Wt.current=Me||null,console.log(" Voice transcription complete, stored request ID:",se),setTimeout(()=>{console.log(" Auto-submitting with transcribed text:",P.substring(0,50)),Bi(P)},150)};C.useEffect(()=>{Gs()},[$]),C.useEffect(()=>{es().then(P=>{ft(P),console.log(" API endpoint for voice input:",P)})},[]),C.useEffect(()=>{B&&$.length>0&&(console.log("Syncing messages to Chromecast:",$.length),F($))},[$,B,F]),C.useEffect(()=>{if(!B||!gt.current)return;const P=gt.current;let se;const Me=()=>{clearTimeout(se),se=setTimeout(()=>{P&&ae&&ae(P.scrollTop)},100)};return P.addEventListener("scroll",Me),()=>{P.removeEventListener("scroll",Me),clearTimeout(se)}},[B,ae]),C.useEffect(()=>{const P=se=>{ln.current&&!ln.current.contains(se.target)&&hn(!1)};if(on)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[on]),C.useEffect(()=>{Br.current&&X.trim()&&!M&&o&&(Br.current=!1,Bi())},[X]);const pn=P=>{Ct.current&&(Ct.current.abort(),Ct.current=null),L([]),U(""),K(P),hn(!1),hr([]),Ut(""),sr(null),fn(new Map),aa(new Map),sa(new Map),oe(new Map),cr(null),Tr(null),localStorage.removeItem("last_active_chat_id"),T(),setTimeout(()=>{Bi(P)},0)},Ir=P=>typeof P=="string"?P:Array.isArray(P)?P.filter(se=>se.type==="text"&&se.text).map(se=>se.text).join(`
`):"",ko=P=>{const se=Ir(P);if(!se)return null;const Me=se.match(/```mermaid\s*([\s\S]*?)```/);return Me&&Me[1]?Me[1].trim():null},bc=P=>{const se={images:[],links:[],youtubeLinks:[],otherMedia:[]};return P.toolResults&&P.toolResults.forEach(Me=>{try{const at=typeof Me.content=="string"?JSON.parse(Me.content):Me.content;at.results&&Array.isArray(at.results)&&at.results.forEach(Fe=>{Fe.images&&Array.isArray(Fe.images)&&Fe.images.forEach(J=>{typeof J=="string"?se.images.push(J):J&&J.src?se.images.push(J.src):J&&J.url&&se.images.push(J.url)}),Fe.url&&se.links.push({url:Fe.url,title:Fe.title}),Fe.links&&Array.isArray(Fe.links)&&Fe.links.forEach(J=>{typeof J=="string"?se.links.push({url:J}):J&&J.href?se.links.push({url:J.href,title:J.text}):J&&J.url&&se.links.push({url:J.url,title:J.text||J.title})})}),at.videos&&Array.isArray(at.videos)&&at.videos.forEach(Fe=>{Fe.url&&se.youtubeLinks.push({url:Fe.url,title:Fe.title})}),at.images&&Array.isArray(at.images)&&at.images.forEach(Fe=>{typeof Fe=="string"?se.images.push(Fe):Fe&&Fe.src?se.images.push(Fe.src):Fe&&Fe.url&&se.images.push(Fe.url)}),at.page_content?.images&&Array.isArray(at.page_content.images)&&at.page_content.images.forEach(Fe=>{typeof Fe=="string"?se.images.push(Fe):Fe&&Fe.src?se.images.push(Fe.src):Fe&&Fe.url&&se.images.push(Fe.url)}),at.results&&Array.isArray(at.results)&&at.results.forEach(Fe=>{Fe.page_content?.images&&Array.isArray(Fe.page_content.images)&&Fe.page_content.images.forEach(J=>{typeof J=="string"?se.images.push(J):J&&J.src?se.images.push(J.src):J&&J.url&&se.images.push(J.url)})})}catch{}}),se.images=[...new Set(se.images)].filter(Boolean),se.links=Array.from(new Map(se.links.filter(Me=>Me.url).map(Me=>[Me.url,Me])).values()),se.youtubeLinks=Array.from(new Map(se.youtubeLinks.filter(Me=>Me.url).map(Me=>[Me.url,Me])).values()),se},wo=P=>P<1e-4?"<$0.0001":P<.01?`$${P.toFixed(4)}`:`$${P.toFixed(3)}`,Ws=P=>{if(!P||P.length===0)return 0;const se={"gemini-2.0-flash":{input:0,output:0},"gemini-2.5-flash":{input:0,output:0},"gemini-2.5-pro":{input:0,output:0},"gemini-1.5-flash":{input:0,output:0},"gemini-1.5-pro":{input:0,output:0},"gpt-4o":{input:2.5,output:10},"gpt-4o-mini":{input:.15,output:.6},"gpt-4-turbo":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"llama-3.1-8b-instant":{input:0,output:0},"llama-3.3-70b-versatile":{input:0,output:0},"llama-3.1-70b-versatile":{input:0,output:0},"mixtral-8x7b-32768":{input:0,output:0}};let Me=0;for(const at of P){const Fe=at.model,J=at.response?.usage;if(!Fe||!J)continue;const Xe=se[Fe]||{input:0,output:0},Se=J.prompt_tokens||0,Ie=J.completion_tokens||0,pe=Se/1e6*Xe.input,Ze=Ie/1e6*Xe.output;Me+=pe+Ze}return Me},di=P=>!P.llmApiCalls||P.llmApiCalls.length===0?0:Ws(P.llmApiCalls),ks=P=>P===0?"$0":P<1e-4?"<$0.0001":P<.01?`$${P.toFixed(4)}`:P<1?`$${P.toFixed(3)}`:`$${P.toFixed(2)}`,hi=P=>{P.preventDefault(),P.stopPropagation(),P.dataTransfer.types.includes("Files")&&Ae(!0)},id=P=>{P.preventDefault(),P.stopPropagation(),P.currentTarget===P.target&&Ae(!1)},yc=P=>{P.preventDefault(),P.stopPropagation()},Bg=P=>{P.preventDefault(),P.stopPropagation(),Ae(!1);const se=P.dataTransfer.files;Fg(se)},vc=P=>{if(P){P.style.height="auto";const Me=Math.min(P.scrollHeight,300);P.style.height=Me+"px"}};C.useEffect(()=>{vc(Xt.current)},[X]),C.useEffect(()=>{e&&(K(e.prompt),e.persona&&U(e.persona))},[e]),C.useEffect(()=>{q||(async()=>{try{const P=localStorage.getItem("last_active_chat_id");if(P){console.log(" Attempting to restore last chat:",P);const se=await YC(P);if(se&&se.messages&&se.messages.length>0){se.systemPrompt&&U(se.systemPrompt),se.planningQuery&&it(se.planningQuery),se.generatedSystemPrompt&&zt(se.generatedSystemPrompt),se.generatedUserQuery&&He(se.generatedUserQuery),se.selectedSnippetIds&&Array.isArray(se.selectedSnippetIds)&&(yr(new Set(se.selectedSnippetIds)),console.log(` Restored ${se.selectedSnippetIds.length} attached snippets`));const at=se.messages.map(Fe=>(Fe._attachments&&Array.isArray(Fe._attachments)&&(Fe._attachments=Fe._attachments.map(J=>({name:J.name||"file",type:J.type||"application/octet-stream",size:J.size||0,preview:J.preview}))),Fe)).filter(Fe=>Fe&&Fe.role);console.log(" Restored chat session with planning metadata:",P,"with",at.length,"messages"),L(at),Tr(P)}else console.log(" No previous chat to restore")}}catch(P){console.error(" Error loading last chat:",P),localStorage.removeItem("last_active_chat_id")}D(!0)})()},[q]),C.useEffect(()=>{$.length>0&&q&&(async()=>{try{const P=await Wle($,Gr||void 0,{systemPrompt:xe||void 0,planningQuery:ke||void 0,generatedSystemPrompt:pt||void 0,generatedUserQuery:Sr||void 0,selectedSnippetIds:Array.from(Or)});Gr||Tr(P),localStorage.setItem("last_active_chat_id",P),console.log(" Chat auto-saved with planning metadata:",P)}catch(P){console.error(" Failed to auto-save chat:",P)}})()},[$,Gr,q,xe,ke,pt,Sr]),C.useEffect(()=>{R&&(async()=>{const P=await Sy();Yt(P)})()},[R]);const ws=C.useRef(new Set),od=C.useRef(p);C.useEffect(()=>{od.current=p},[p]),C.useEffect(()=>{const P=$.filter(at=>at.role==="assistant"&&!at.isStreaming&&at.toolResults);if(P.length===0)return;const se=[],Me=new Set;if(P.forEach(at=>{at.toolResults?.forEach(Fe=>{if(Fe.name!=="search_youtube"||!Fe.content)return;const J=Fe.tool_call_id||`${Fe.name}-${JSON.stringify(Fe.content).substring(0,100)}`;if(!ws.current.has(J))try{const Xe=typeof Fe.content=="string"?JSON.parse(Fe.content):Fe.content;Xe.videos&&Array.isArray(Xe.videos)&&(Xe.videos.forEach(Se=>{Se.videoId&&!Me.has(Se.videoId)&&(Me.add(Se.videoId),se.push(Se))}),ws.current.add(J))}catch(Xe){console.error("[ChatTab] Failed to parse YouTube results:",Xe)}})}),se.length>0){const at=se.map(J=>({videoId:J.videoId,url:J.url,title:J.title||"Untitled Video",description:J.description||"",duration:J.duration||"",channel:J.channel||"",thumbnail:J.thumbnail||""}));console.log(`[ChatTab] Adding ${at.length} new YouTube videos to playlist (${ws.current.size} tool results processed total)`),od.current(at);const Fe=$[$.length-1];Fe?.role==="assistant"&&!Fe.isStreaming&&Fe.toolResults?.some(Xe=>Xe.name==="search_youtube"&&!ws.current.has(Xe.tool_call_id||""))&&_(`Added ${at.length} video${at.length!==1?"s":""} to playlist`)}if(ws.current.size>500){const at=Array.from(ws.current);ws.current=new Set(at.slice(-500))}},[$,_]);const xa=()=>{Ct.current&&(Ct.current.abort(),Ct.current=null,Y(!1))},Pi=()=>{const P=[];return t.web_search&&P.push({type:"function",function:{name:"search_web",description:"Search the web using DuckDuckGo to find current information, news, articles, and real-time data. USE THIS whenever users ask for current/latest information, news, or anything requiring up-to-date web content. Automatically fetches full page content including images and links from all search results. Returns comprehensive search results with titles, URLs, snippets, full content, images, and links. **CRITICAL: You MUST include relevant URLs from search results in your response using markdown links [Title](URL).**",parameters:{type:"object",properties:{query:{type:"string",description:"Search query - be specific and include relevant keywords"},limit:{type:"integer",minimum:1,maximum:50,default:5,description:"Number of results to return (default: 5)"},timeout:{type:"integer",minimum:1,maximum:60,default:15,description:"Timeout in seconds for fetching each page"},generate_summary:{type:"boolean",default:!0,description:"Generate an LLM summary of the search results (highly recommended)"}},required:["query"]}}}),t.execute_js&&P.push({type:"function",function:{name:"execute_javascript",description:" Execute JavaScript code in a sandbox for: 1) Complex mathematical calculations that require computation (factorial, compound interest, statistics, algorithms), 2) Generating formatted tables/grids (multiplication tables, calendars), 3) Data transformations or array processing, 4) ASCII art or text-based visualizations, 5) Custom algorithms. **DO NOT use for**: simple text output, explanations, or answers you already know. Only use when actual computation adds value.",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute. Include console.log() to display results."},timeout:{type:"integer",minimum:1,maximum:10,default:5,description:"Execution timeout in seconds (default: 5)"}},required:["code"]}}}),t.scrape_url&&P.push({type:"function",function:{name:"scrape_web_content",description:"Fetch and extract readable content from any URL. Excellent for getting detailed information from webpages.",parameters:{type:"object",properties:{url:{type:"string",description:"Fully qualified URL to fetch"},timeout:{type:"integer",minimum:1,maximum:60,default:15}},required:["url"]}}}),t.youtube&&P.push({type:"function",function:{name:"search_youtube",description:' SEARCH/FIND YouTube videos (NOT for transcription). Use when user wants to FIND or SEARCH for videos. **DO NOT USE if user wants to transcribe, get transcript, or extract text from a specific YouTube URL** - use transcribe_url instead. Use search_youtube for: "find YouTube videos about X", "search YouTube for X", "show me videos about X". Returns video titles, descriptions, links, and caption availability. Results are automatically added to a playlist. **CRITICAL: You MUST include ALL video URLs in your response as a formatted markdown list with [Title](URL) format.**',parameters:{type:"object",properties:{query:{type:"string",description:'Search query for YouTube videos (e.g., "javascript tutorial", "bach cello suites", "machine learning course")'},limit:{type:"integer",minimum:1,maximum:50,default:10,description:"Maximum number of video results to return (default 10, max 50)"},order:{type:"string",enum:["relevance","date","viewCount","rating"],default:"relevance",description:"Sort order for results: relevance (default), date (newest first), viewCount (most viewed), rating (highest rated)"}},required:["query"]}}}),t.transcribe&&P.push({type:"function",function:{name:"transcribe_url",description:' **PRIMARY TOOL FOR GETTING VIDEO/AUDIO TEXT CONTENT**: Transcribe audio or video content from URLs using OpenAI Whisper. **MANDATORY USE** when user says: "transcribe", "transcript", "get text from", "what does the video say", "extract dialogue", "convert to text", OR provides a specific YouTube/video URL and asks about its content. **YOUTUBE SUPPORT**: Can transcribe directly from YouTube URLs (youtube.com, youtu.be, youtube.com/shorts). Also supports direct media URLs (.mp3, .mp4, .wav, .m4a, etc.). **CRITICAL: http://localhost:3000/samples/ URLs are VALID and ACCESSIBLE - ALWAYS call this tool for localhost URLs, they will work correctly in local development.** Automatically handles large files by chunking. Shows real-time progress with stop capability. Returns full transcription text.',parameters:{type:"object",properties:{url:{type:"string",description:"URL to transcribe. Can be YouTube URL (youtube.com, youtu.be), direct media URL (.mp3, .mp4, .wav, .m4a, etc.), or localhost URL for local development (http://localhost:3000/samples/...)"},language:{type:"string",pattern:"^[a-z]{2}$",description:'Optional: 2-letter ISO language code (e.g., "en", "es", "fr"). Improves accuracy if known.'},prompt:{type:"string",description:'Optional: Context or expected words to improve accuracy (e.g., "Technical discussion about AI and machine learning")'}},required:["url"]}}}),t.generate_chart&&P.push({type:"function",function:{name:"generate_chart",description:" **PRIMARY TOOL FOR ALL DIAGRAMS, CHARTS, AND VISUALIZATIONS**: Generate professional Mermaid diagrams automatically rendered as interactive SVG in the UI. **MANDATORY USE** when user requests: flowcharts, sequence diagrams, class diagrams, state diagrams, ER diagrams, Gantt charts, pie charts, mindmaps, git graphs, or ANY visual diagram/chart/visualization. **DO NOT use execute_javascript to generate charts - ALWAYS use this tool instead**. Keywords: diagram, chart, flowchart, visualization, graph, workflow, UML, ERD, timeline, mindmap.",parameters:{type:"object",properties:{description:{type:"string",description:'Clear description of what the chart should visualize (e.g., "User login flow", "Database schema for blog platform", "Project timeline")'},chart_type:{type:"string",enum:["flowchart","sequence","class","state","er","gantt","pie","git","mindmap"],default:"flowchart",description:"Type of diagram to generate. Choose based on use case: flowchart (processes), sequence (interactions), class (UML), state (FSM), er (database), gantt (timeline), pie (data), git (commits), mindmap (concepts)"}},required:["description"]}}}),t.generate_image&&P.push({type:"function",function:{name:"generate_image",description:' Generate images using AI (DALL-E, Stable Diffusion). Use when user requests: "generate image", "create picture", "draw", "make photo". Supports quality tiers: ultra (photorealistic, $0.08-0.12), high (detailed/artistic, $0.02-0.04), standard (illustrations, $0.001-0.002), fast (quick drafts, <$0.001). Returns button for user confirmation before generation.',parameters:{type:"object",properties:{prompt:{type:"string",description:'Detailed description of the image to generate (e.g., "a low resolution image of a cat sitting on a windowsill")'},quality:{type:"string",enum:["ultra","high","standard","fast"],default:"standard",description:'Quality tier: ultra (photorealistic), high (detailed), standard (illustrations), fast (drafts). Infer from prompt keywords like "low res"=fast, "photorealistic"=ultra, "simple"=standard'},size:{type:"string",enum:["256x256","512x512","1024x1024","1792x1024","1024x1792"],default:"1024x1024",description:'Image dimensions. Use smaller sizes (256x256, 512x512) for "low res" requests'},style:{type:"string",enum:["natural","vivid"],default:"natural",description:"Style: natural (realistic) or vivid (dramatic). DALL-E 3 only"}},required:["prompt"]}}}),t.search_knowledge_base&&P.push({type:"function",function:{name:"search_knowledge_base",description:" **SEARCH INTERNAL KNOWLEDGE BASE**: Perform vector similarity search against the ingested documentation and knowledge base. **USE THIS when user asks about**: project documentation, API references, implementation guides, architecture, deployment procedures, RAG system, embedding models, or any topics covered in the knowledge base. **EXCELLENT for**: finding specific code examples, configuration details, API endpoints, best practices, and technical documentation. Returns relevant text chunks with source file names and similarity scores. **Always use this BEFORE search_web when the question might be answered by internal documentation.**",parameters:{type:"object",properties:{query:{type:"string",description:'Natural language search query. Be specific and include key terms. Examples: "How do I configure OpenAI embeddings?", "What is the RAG implementation?", "How to deploy Lambda functions?"'},top_k:{type:"integer",minimum:1,maximum:20,default:5,description:"Number of most relevant results to return (default: 5, max: 20)"},threshold:{type:"number",minimum:0,maximum:1,default:.3,description:"Minimum similarity score threshold (0-1). Higher values = more strict matching. Default: 0.3 (relaxed for better recall)"},source_type:{type:"string",enum:["file","url","text"],description:"Optional: Filter results by source type (file, url, or text)"}},required:["query"]}}}),t.manage_todos&&P.push({type:"function",function:{name:"manage_todos",description:' **MANAGE BACKEND TODO QUEUE**: Add or delete actionable steps for multi-step tasks. The backend maintains a server-side todo queue that tracks progress through complex workflows. When todos exist, they auto-progress after each successful completion (assessor "OK"). **USE THIS when**: user requests a multi-step plan, breaking down complex tasks, tracking implementation progress, or managing sequential workflows. **DO NOT use for simple single-step tasks.** After adding todos, the system will automatically advance through them, appending each next step as it completes. **Keywords**: plan, steps, todo list, break down task, multi-step workflow, implementation phases.',parameters:{type:"object",properties:{add:{type:"array",items:{type:"string"},description:'Array of todo descriptions to add to the queue. Descriptions should be clear, actionable steps in order. Example: ["Install dependencies", "Configure environment", "Run tests", "Deploy application"]'},delete:{type:"array",items:{oneOf:[{type:"string",description:"Exact todo description to delete"},{type:"number",description:"Todo ID to delete"}]},description:"Array of todo IDs (numbers) or exact descriptions (strings) to remove from the queue"}},additionalProperties:!1}}}),t.manage_snippets&&P.push({type:"function",function:{name:"manage_snippets",description:' **MANAGE KNOWLEDGE SNIPPETS**: Insert, retrieve, search, or delete knowledge snippets stored in your personal Google Sheet ("Research Agent/Research Agent Swag"). Use this to save important information, code examples, procedures, references, or any content you want to preserve and search later. **USE THIS when**: user wants to save/capture content, create a knowledge base, store code snippets, bookmark important info, or search previous saved content. Each snippet can have a title, content, tags for organization, and source tracking (chat/url/file/manual). **Keywords**: save this, remember this, add to knowledge base, store snippet, save for later, search my snippets, find my notes.',parameters:{type:"object",required:["action"],properties:{action:{type:"string",enum:["insert","capture","get","search","delete"],description:'Operation to perform: "insert" (add new snippet), "capture" (save from chat/url/file), "get" (retrieve by ID/title), "search" (find by query/tags), "delete" (remove by ID/title)'},payload:{type:"object",description:"Action-specific parameters",properties:{title:{type:"string",description:"Snippet title (required for insert/capture)"},content:{type:"string",description:"Snippet content/body (required for insert)"},tags:{type:"array",items:{type:"string"},description:'Array of tags for categorization (optional, e.g., ["javascript", "async", "tutorial"])'},source:{type:"string",enum:["chat","url","file","manual"],description:"Source type (for capture action)"},url:{type:"string",description:'Source URL if source="url"'},id:{type:"number",description:"Snippet ID (for get/delete)"},query:{type:"string",description:"Text search query (searches title and content)"}}}},additionalProperties:!1}}}),Gt.filter(se=>se.enabled).forEach(se=>{console.log("MCP Server enabled:",se.name,se.url)}),P},kc=async P=>{try{const Me=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/stop-transcription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({tool_call_id:P})});if(!Me.ok){const at=await Me.json();throw new Error(at.error||"Failed to stop transcription")}_("Transcription stopped"),console.log("Transcription stopped:",P)}catch(se){console.error("Failed to stop transcription:",se),k("Failed to stop transcription: "+(se instanceof Error?se.message:"Unknown error"))}},fl=(P,se=2048)=>new Promise((Me,at)=>{const Fe=new FileReader;Fe.onload=J=>{const Xe=new Image;Xe.onload=()=>{const Se=document.createElement("canvas");let Ie=Xe.width,pe=Xe.height;Ie>pe&&Ie>se?(pe=pe/Ie*se,Ie=se):pe>se&&(Ie=Ie/pe*se,pe=se),Se.width=Ie,Se.height=pe,Se.getContext("2d")?.drawImage(Xe,0,0,Ie,pe);const Ye=Se.toDataURL(P.type||"image/jpeg",.85);Me(Ye.split(",")[1])},Xe.onerror=at,Xe.src=J.target?.result},Fe.onerror=at,Fe.readAsDataURL(P)}),Fg=async P=>{if(!P||P.length===0)return;const se=5*1024*1024,Me=10*1024*1024,at=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];for(let Fe=0;Fe<P.length;Fe++){const J=P[Fe];if(!at.includes(J.type)){S(`File type not supported: ${J.name}. Supported types: JPEG, PNG, GIF, WebP, PDF`);continue}const Xe=J.type==="application/pdf"?Me:se;if(J.size>Xe){S(`File too large: ${J.name} (${(J.size/1024/1024).toFixed(2)}MB). Max size: ${Xe/1024/1024}MB`);continue}try{let Se,Ie;if(J.type.startsWith("image/")){Se=await fl(J),Ie=`data:${J.type};base64,${Se}`;const pe=Se.length/1e3;pe>2e4&&S(`Image ${J.name} may use many tokens (~${Math.round(pe/1e3)}k). Consider using a smaller image.`)}else{const pe=new FileReader;Se=await new Promise((Ze,Ye)=>{pe.onload=Ce=>{const rt=Ce.target?.result;Ze(rt.split(",")[1])},pe.onerror=Ye,pe.readAsDataURL(J)})}Be(pe=>[...pe,{name:J.name,type:J.type,size:J.size,base64:Se,preview:Ie}]),_(`Added ${J.name}`)}catch(Se){console.error("Error processing file:",Se),k(`Failed to process ${J.name}`)}}},ld=P=>{Be(se=>se.filter((Me,at)=>at!==P))},Bi=async P=>{const se=P!==void 0?P:X;if(!se.trim()&&he.length===0||M)return;if(!o){k("Please sign in to send messages");return}let Me;if(he.length>0){const Ie=[{type:"text",text:se||"Please analyze these files."}];for(const pe of he)pe.type&&pe.type.startsWith("image/")?Ie.push({type:"image_url",image_url:{url:`data:${pe.type};base64,${pe.base64}`,detail:"auto"}}):pe.type==="application/pdf"&&Ie.push({type:"text",text:`[PDF attachment: ${pe.name}]`});Me={role:"user",content:Ie,_attachments:he}}else Me={role:"user",content:se};Wt.current&&(Me.llmApiCalls=[Wt.current],console.log(" Added voice transcription llmApiCall to user message"),Wt.current=null),console.log(" Adding user message:",typeof Me.content=="string"?Me.content.substring(0,50):`${he.length} attachments`);let at=$.length;L(Ie=>{console.log(" Current messages count before adding user:",Ie.length),at=Ie.length;const pe=[...Ie,Me];return console.log(" Messages after adding user:",pe.length,"User message at index:",at),pe});const Fe=se.trim();Fe&&Cn(Ie=>{const pe=Ie.filter(Ye=>Ye!==Fe);return[Fe,...pe].slice(0,50)}),K(""),Qt(-1),Be([]),yr(new Set),Y(!0),hr([]),Ut(""),Vt(0),Ne(new Set),sa(new Map),oe(new Map),fn(new Map),aa(new Map),At(new Map);let J=null;if(bs&&se.trim()){Ii(!0);try{let Ie;const pe=await Ma.getCachedQueryEmbedding(se.trim());if(pe)console.log(" Using cached query embedding"),Ie=pe.embedding;else{console.log(" Fetching new query embedding from backend");const Ze=await es(),Ye=await u(),Ce=await fetch(`${Ze}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...Ye?{Authorization:`Bearer ${Ye}`}:{}},body:JSON.stringify({query:se})});if(!Ce.ok)throw new Error("Failed to get query embedding");const rt=await Ce.json();Ie=rt.embedding;const nr=rt.model||"unknown";await Ma.cacheQueryEmbedding(se.trim(),Ie,nr),console.log(" Cached query embedding for future use")}if(Ie){console.log(` RAG search with threshold: ${xc}`);const Ze=await Ma.vectorSearch(Ie,5,xc);if(Ze.length>0){let Ye=`**KNOWLEDGE BASE CONTEXT:**

The following information from the user's knowledge base may be relevant to this query:

`;for(let Ce=0;Ce<Ze.length;Ce++){const rt=Ze[Ce];Ye+=`**[Context ${Ce+1} - Similarity: ${rt.score.toFixed(3)}]**
`,Ye+=`${rt.chunk_text}

`;try{const nr=await Ma.getEmbeddingDetails(rt.snippet_id);nr.metadata&&(Ye+=`*Source: ${nr.metadata.source_type||"Unknown"}`,nr.metadata.title&&(Ye+=` - "${nr.metadata.title}"`),Ye+=`*

`)}catch{}Ye+=`---

`}Ye+=`**USER QUESTION:** ${se}

`,Ye+="Please answer the user's question using the context provided above. If the context is relevant, reference it in your answer. If the context is not helpful, you may answer based on your general knowledge.",J={role:"system",content:Ye},_(` Found ${Ze.length} relevant chunks from knowledge base`)}else S("No relevant context found in knowledge base")}}catch(Ie){console.error("RAG context error:",Ie),S("Failed to retrieve RAG context, continuing without it")}finally{Ii(!1)}}Ct.current=new AbortController;const Xe=Pi();let Se=null;Xe.length>0&&(Se=setTimeout(()=>{Ct.current&&(console.warn("Request timeout - aborting after 4 minutes due to tool execution"),Ct.current.abort())},24e4));try{const Ie=new Date,pe=Ie.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ze=Ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}),Ye=Ie.toISOString(),Ce=`${pe}, ${Ze} (ISO: ${Ye})`;let rt=xe.trim()||"You are a helpful assistant";if(rt=`**CURRENT DATE AND TIME:**
${Ce}

You have access to the current date and time above. Use this information when responding to temporal queries about "today", "current date", "what time is it", "this week", "this month", "this year", etc. You do not need to use tools to get the current date/time as it is provided in this system prompt.

${rt}

**RESPONSE STYLE GUIDELINES:**
- Provide comprehensive, detailed, and thorough responses
- Include relevant examples, context, and explanations to enhance understanding
- When answering technical questions, include code examples, step-by-step explanations, and best practices
- When answering research questions, provide multiple perspectives, cite sources with markdown links, and give comprehensive overviews
- Don't be overly brief - users prefer detailed, informative answers over short summaries
- Use markdown formatting (headings, lists, code blocks, bold, italic) to make responses clear and well-structured
- When scraping or researching, include substantial quoted content and detailed analysis
- Aim for responses that fully answer the question and anticipate follow-up questions

**IMAGE PLACEMENT GUIDELINES:**
- When including images in your response, distribute them naturally throughout the content next to relevant text sections
- Place images near the paragraphs or sections they illustrate or relate to
- AVOID placing all images at the top or bottom of your response in a single block
- Intersperse images with text to create a more engaging, magazine-style layout
- Use markdown image syntax: ![description](url) inline with your content where contextually appropriate`,Xe.length>0){const $t=Xe.map(V=>V.function.name).join(", ");rt+=`

You have access to these tools: ${$t}.

CRITICAL TOOL USAGE RULES:
- When users ask to TRANSCRIBE or get TRANSCRIPT from video/audio, you MUST call transcribe_url (NOT search_youtube)
- When users say "transcribe this video [URL]", "get transcript", "what does the video say", you MUST call transcribe_url
- When users want to FIND or SEARCH for videos, use search_youtube (e.g., "find videos about X")
- When users ask to "scrape", "get content from", "read", "fetch", "extract", "analyze", or "summarize" a website/URL, you MUST call the scrape_web_content tool
- When users provide ANY URL (http/https) and ask questions about it, you MUST call scrape_web_content with that URL FIRST
- MANDATORY: If a message contains a URL and asks to extract/analyze/summarize/get key points, you MUST call scrape_web_content - DO NOT provide an answer without first fetching the content
- When users ask for current information, news, or web content, you MUST use search_web
- **execute_javascript USAGE RULES**:
  -  USE for: Complex calculations requiring computation (factorial, fibonacci, statistics, algorithms)
  -  USE for: Generating formatted tables/grids (multiplication tables, calendars, data matrices)
  -  USE for: Data transformations, array processing, sorting, filtering large datasets
  -  USE for: ASCII art, text-based visualizations, formatted output
  -  USE for: Custom algorithms or mathematical operations you cannot compute mentally
  -  DO NOT USE for: Simple answers you already know (like "Lambda deployment not supported")
  -  DO NOT USE for: Just printing text or explanations
  -  DO NOT USE for: Answers that don't require computation
  -  DO NOT USE for: Simple arithmetic you can answer directly (like 2+2=4)
  - Rule: Only use execute_javascript when the computation or formatting adds actual value
- DO NOT output tool parameters as JSON text in your response (e.g., don't write {"url": "...", "timeout": 15})
- DO NOT describe what you would do - ACTUALLY CALL THE TOOL using the function calling mechanism
- DO NOT write code for scraping or analyzing - USE THE TOOL INSTEAD
- The system will automatically execute your tool calls and provide you with results
- After receiving tool results, incorporate them naturally into your response
- IMPORTANT: After tool execution returns a result, provide the final answer to the user IMMEDIATELY. Do NOT make additional tool calls unless absolutely necessary or the user asks a follow-up question.

Examples when you MUST use tools:
- "transcribe this video https://youtube.com/watch?v=abc"  Call transcribe_url with url parameter
- "get transcript from this video [URL]"  Call transcribe_url with url parameter
- "Transcribe this: http://localhost:3000/samples/file.mp3"  Call transcribe_url (localhost URLs work in local dev!)
- "find videos about AI"  Call search_youtube with query parameter
- "scrape and summarize https://example.com"  Call scrape_web_content with url parameter
- "get content from https://github.com/user/repo"  Call scrape_web_content with url parameter
- "Extract and analyze the key points from https://example.com/article"  Call scrape_web_content with url parameter
- "What does this page say: https://example.com"  Call scrape_web_content with url parameter
- "Summarize this article https://example.com/news"  Call scrape_web_content with url parameter
- "Read and analyze https://en.wikipedia.org/wiki/Topic"  Call scrape_web_content with url parameter
- "Find current news about X"  Call search_web with query parameter
- "What's the latest on X"  Call search_web with query parameter
- "calculate 5 factorial"  Call execute_javascript (requires computation)
- "Generate a multiplication table for numbers 1-12"  Call execute_javascript (formatted table)
- "Calculate compound interest on $10k at 7% for 15 years"  Call execute_javascript (complex calculation)
- "Sort this array and find median: [45,23,67,12,89]"  Call execute_javascript (data processing)
- "What is 2+2?"  Answer directly with "4" (DON'T use execute_javascript for trivial math)
- "How do I deploy a Lambda?"  Answer directly (DON'T use execute_javascript to print explanations)

Remember: Use the function calling mechanism, not text output. The API will handle execution automatically.`}const nr=$.map($t=>{const{llmApiCalls:V,isStreaming:In,toolResults:mn,...ml}=$t;return ml});let vn=0,ns=0,as=0;const ea=nr.map($t=>{if($t.role==="tool")return vn++,null;if($t.role==="assistant"){const V=Ir($t.content),In=$t.content&&V.trim().length>0,mn=$t.tool_calls&&Array.isArray($t.tool_calls)&&$t.tool_calls.length>0;if(In){if(mn){ns++;const{tool_calls:ml,...Ui}=$t;return Ui}return $t}else return as++,null}return $t}).filter($t=>$t!==null);(vn>0||ns>0||as>0)&&(console.log(` UI filtered: ${vn} tool messages, ${ns} tool_calls stripped, ${as} empty assistants removed`),console.log(`   Sending ${ea.length} clean messages + new user message to Lambda`));const Fi=[];if(Or.size>0){const $t=Array.from(Or).map(In=>b.find(mn=>mn.id===In)).filter(In=>In!==void 0),V=In=>{let mn=In;return mn=mn.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,"[Image: $1]"),mn=mn.replace(/<img[^>]*src="data:image\/[^"]*"[^>]*>/gi,"[Base64 Image]"),mn=mn.replace(/<img[^>]*>/gi,"[Image]"),mn=mn.replace(/data:image\/[^;]+;base64,[A-Za-z0-9+/=]+/g,"[Base64 Image Data]"),mn};for(const In of $t){const mn=V(In.content);Fi.push({role:"user",content:`**KNOWLEDGE BASE CONTEXT** (manually attached by user):

**Title:** ${In.title||"Untitled"}

${mn}

---
`})}console.log(` Attached ${Fi.length} manual context snippets (full content, images stripped)`)}const Am=[{role:"system",content:rt},...J?[J]:[],...Fi,...ea,Me];J&&console.log(" RAG context included in request (automatic fragments)");const Hg=Am.map($t=>{const{_attachments:V,llmApiCalls:In,isStreaming:mn,toolResults:ml,isRetryable:Ui,retryCount:gd,originalUserPromptIndex:ss,originalErrorMessage:Sc,extractedContent:We,rawResult:be,evaluations:De,errorData:Nt,imageGenerations:Lt,...nt}=$t;return nt}),qg=A.providers.filter($t=>$t.enabled===!0),ud=localStorage.getItem("proxy_settings");let Ec,_c;if(ud)try{const $t=JSON.parse(ud);$t.enabled&&$t.username&&$t.password&&(Ec=$t.username,_c=$t.password,console.log(" Proxy settings loaded from localStorage:",$t.username))}catch($t){console.error("Failed to parse proxy settings:",$t)}const Na={providers:qg,messages:Hg,temperature:.7,stream:!0,optimization:A.optimization||"cheap"};console.log(` Model selection optimization: ${Na.optimization}`),Z&&(Na.location={latitude:Z.latitude,longitude:Z.longitude,accuracy:Z.accuracy,address:Z.address,timestamp:Z.timestamp},console.log(" Including location in request:",Z.address?.city||`${Z.latitude.toFixed(4)}, ${Z.longitude.toFixed(4)}`)),Ec&&_c&&(Na.proxyUsername=Ec,Na.proxyPassword=_c,console.log(" Including proxy credentials in request")),A.tavilyApiKey&&A.tavilyApiKey.trim()&&(Na.tavilyApiKey=A.tavilyApiKey,console.log("Including Tavily API key in request")),Xe.length>0&&(Na.tools=Xe,console.log("Sending streaming request with tools:",Xe.map($t=>$t.function.name)));const dd=Gt.filter($t=>$t.enabled);dd.length>0&&(Na.mcp_servers=dd.map($t=>({name:$t.name,url:$t.url})),console.log("[MCP] Sending MCP servers:",dd.map($t=>$t.name).join(", ")));const Lm=await d(),hd=mt.current;hd&&(console.log(" Using request ID from voice transcription:",hd),mt.current=null),await By(Na,o,($t,V)=>{switch(console.log("SSE Event:",$t,V),$t){case"status":break;case"delta":V.content&&(Ut(We=>We+V.content),L(We=>{const be=We.length-1,De=We[be];console.log(" Delta received, lastMessage role:",De?.role,"isStreaming:",De?.isStreaming,"hasContent:",!!De?.content,"contentLength:",De?.content?.length||0);const Nt=De?.role==="tool";if(De&&De.role==="assistant"&&!Nt){const Lt=[...We];return Lt[be]={...De,content:(De.content||"")+V.content,isStreaming:!0},console.log(" Updating assistant at index:",be,"newContentLength:",Lt[be].content.length),Lt}else{const Lt={role:"assistant",content:V.content,isStreaming:!0};return console.log(" Creating NEW streaming block, reason:",Nt?"tool execution":"no assistant message"),[...We,Lt]}}),L(We=>{const be=We.length-1,De=We[be];return De&&De.role==="assistant"&&De.isStreaming&&(sr(be),console.log(" Set currentStreamingBlockIndex to:",be)),We}));break;case"tool_call_start":console.log(" Tool call starting:",V.name,"currentStreamingBlockIndex:",Tt),hr(We=>[...We,{id:V.id,name:V.name,status:"starting"}]),console.log(" Adding tool_call to assistant message:",{id:V.id,name:V.name,hasArguments:!!V.arguments,argumentsLength:V.arguments?.length}),L(We=>{const be=[...We];for(let De=be.length-1;De>=0;De--)if(be[De].role==="assistant"){if(console.log(" Found assistant message at index",De,"current tool_calls:",be[De].tool_calls),be[De].tool_calls||(be[De]={...be[De],tool_calls:[]}),be[De].tool_calls?.find(nt=>nt.id===V.id)){console.log(" Tool call already exists, skipping:",V.id);break}const Lt={id:V.id,type:"function",function:{name:V.name,arguments:V.arguments||"{}"}};be[De].tool_calls=[...be[De].tool_calls||[],Lt],console.log(" Added tool_call:",Lt),console.log(" Updated message tool_calls:",be[De].tool_calls);break}return be});break;case"tool_call_progress":hr(We=>We.map(be=>be.id===V.id?{...be,status:"executing"}:be));break;case"image_generation_progress":console.log(" Image generation progress event:",V),L(We=>{const be=[...We];for(let De=be.length-1;De>=0;De--)if(be[De].role==="assistant"){be[De].imageGenerations||(be[De].imageGenerations=[]);const Nt=be[De].imageGenerations,Lt=Nt.findIndex(nt=>nt.id===V.id||V.prompt&&nt.prompt===V.prompt);if(Lt>=0){const nt=Nt[Lt];Nt[Lt]={...nt,phase:V.phase,provider:V.provider||nt.provider,model:V.model||nt.model,estimatedSeconds:V.estimated_seconds||nt.estimatedSeconds,status:V.phase==="error"?"error":"generating"}}else Nt.push({id:V.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,provider:V.provider||"unknown",model:V.model||"unknown",cost:V.estimated_cost||0,prompt:V.prompt||"",size:V.size||"1024x1024",qualityTier:V.quality||"standard",status:"generating",phase:V.phase,estimatedSeconds:V.estimated_seconds,ready:!1});break}return be});break;case"image_complete":console.log(" Image complete event:",{hasUrl:!!V.url,url:V.url,provider:V.provider,model:V.model,quality:V.qualityTier}),L(We=>{const be=[...We];for(let De=be.length-1;De>=0;De--)if(be[De].role==="assistant"){be[De].imageGenerations||(be[De].imageGenerations=[]);const Nt=be[De].imageGenerations,Lt=V.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,nt=Nt.findIndex(Vn=>Vn.id===Lt),Dr={id:Lt,provider:V.provider||"unknown",model:V.model||"unknown",modelKey:V.model,cost:V.cost||0,prompt:V.prompt||"",size:V.size||"1024x1024",style:V.style||"natural",qualityTier:V.qualityTier||"standard",status:"downloading",imageUrl:V.url,base64:void 0,ready:!1,llmApiCall:V.llmApiCall,revisedPrompt:V.revisedPrompt};nt>=0?Nt[nt]=Dr:Nt.push(Dr);break}return be}),V.url&&V.id&&(async()=>{try{console.log(" Downloading image via Lambda proxy:",V.url);const We=localStorage.getItem("api_endpoint")||"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws",be=await fetch(`${We}/proxy-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:V.url,format:"base64"})});if(!be.ok)throw new Error(`Proxy fetch failed: ${be.status}`);const De=await be.json();if(!De.success||!De.dataUri)throw new Error("Invalid proxy response");console.log(" Image downloaded via proxy, size:",De.size,"bytes"),console.log(" Proxy data keys:",Object.keys(De)),console.log(" Data URI prefix:",De.dataUri?.substring(0,50));const Nt=De.dataUri;L(Lt=>{const nt=[...Lt];console.log(" Updating messages, total:",nt.length);for(let Dr=nt.length-1;Dr>=0;Dr--)if(nt[Dr].role==="assistant"&&nt[Dr].imageGenerations){const Vn=nt[Dr].imageGenerations;console.log(` Checking message ${Dr}, imageGenerations:`,Vn.length);const _n=Vn.findIndex(gr=>gr.id===V.id);if(console.log(` Found image at index: ${_n}, searching for ID: ${V.id}`),_n>=0){const gr={...Vn[_n]};Vn[_n]={...Vn[_n],status:"complete",base64:Nt,imageUrl:Nt,ready:!0};const Fr=Vn[_n];console.log(" Updated image with base64 data"),console.log("   Before:",{status:gr.status,hasBase64:!!gr.base64,ready:gr.ready}),console.log("   After:",{status:Fr.status,hasBase64:!!Fr.base64,ready:Fr.ready});break}}return nt})}catch(We){console.error(" Failed to download/convert image:",We),L(be=>{const De=[...be];for(let Nt=De.length-1;Nt>=0;Nt--)if(De[Nt].role==="assistant"&&De[Nt].imageGenerations){const Lt=De[Nt].imageGenerations,nt=Lt.findIndex(Dr=>Dr.id===V.id);if(nt>=0){Lt[nt]={...Lt[nt],status:"error",ready:!1};break}}return De})}})();break;case"tool_call_result":if(hr(We=>We.map(be=>be.id===V.id?{...be,status:V.error?"error":"complete",result:V.content}:be)),V.name==="search_web"&&(console.log(" Clearing search progress after search_web completion"),sa(new Map)),V.name==="search_youtube"&&(console.log(" Clearing YouTube search progress after search_youtube completion"),oe(new Map)),V.name==="execute_javascript"&&(console.log(" Clearing JavaScript execution progress after execute_javascript completion"),qe(new Map)),V.name==="generate_image"&&(console.log(" Clearing image generation progress after generate_image completion"),Cr(new Map)),V.name==="generate_chart"&&(console.log(" Clearing chart generation progress after generate_chart completion"),ut(new Map)),L(We=>{console.log(" Embedding tool result in assistant message, tool:",V.name,"tool_call_id:",V.id),console.log(" Current messages array length:",We.length);const be=[...We];let De=[];console.log(" Assistant messages in array:"),We.forEach((nt,Dr)=>{nt.role==="assistant"&&console.log(`  [${Dr}] has tool_calls:`,!!nt.tool_calls,nt.tool_calls?`(${nt.tool_calls.length} calls: ${nt.tool_calls.map(Vn=>Vn.id).join(", ")})`:"")});let Nt=-1;for(let nt=0;nt<be.length;nt++)if(be[nt].role==="assistant"&&be[nt].tool_calls){if(be[nt].tool_calls?.some(Vn=>Vn.id===V.id)){Nt=nt,console.log("  Found FIRST assistant with matching tool call at index:",nt,"of",be.length);const Vn=be[nt].llmApiCalls?.filter(gr=>gr.phase&&gr.tool==="search_web"&&(gr.phase==="page_summary"||gr.phase==="synthesis_summary"||gr.phase==="description_summary"))||[];Vn.length>0&&(De=Vn);const _n={role:"tool",content:V.content,tool_call_id:V.id,name:V.name,...De.length>0&&{llmApiCalls:De}};if(be[nt].toolResults?be[nt]={...be[nt],toolResults:[...be[nt].toolResults||[],_n]}:be[nt]={...be[nt],toolResults:[_n]},console.log(" Embedded tool result in assistant message at index",nt,", total toolResults:",be[nt].toolResults?.length),V.name==="execute_javascript"){const gr=(be[nt].toolResults?.length||1)-1,Fr=nt*1e3+gr;console.log(" Auto-expanding execute_javascript result at key:",Fr),Ne(Es=>{const Vr=new Set(Es);return Vr.add(Fr),Vr})}Nt=nt;break}}else be[nt].role==="assistant"&&console.log(`  [${nt}] is assistant but has no tool_calls`);return Nt!==-1||(console.warn("  Could not find assistant message with matching tool_call_id:",V.id),console.warn(" Available tool_call_ids:",be.filter(nt=>nt.role==="assistant"&&nt.tool_calls).flatMap(nt=>nt.tool_calls?.map(Dr=>Dr.id)||[]))),be}),V.name==="search_web"&&V.content){const We=OB(V.name,V.content);We&&(h(We),console.log("Search result added to SearchTab:",We))}break;case"tool_progress":console.log(" Tool progress event:",V),V.tool_call_id&&(V.tool_name==="scrape_web_content"?aa(We=>{const be=new Map(We),De=be.get(V.tool_call_id)||[];return be.set(V.tool_call_id,[...De,V]),be}):fn(We=>{const be=new Map(We),De=be.get(V.tool_call_id)||[];return be.set(V.tool_call_id,[...De,V]),be}));break;case"search_progress":if(console.log(" Search progress event:",V),console.log(" Current searchProgress size:",Gn.size),console.log(" isLoading:",M),V.tool==="search_web"){V.phase==="searching"&&sa(new Map);let We;V.phase==="fetching_result"||V.phase==="result_loaded"||V.phase==="result_failed"?We=`search_web_result_${V.result_index||0}`:We=`search_web_${V.phase}`,sa(be=>{const De=new Map(be);return De.set(We,V),console.log(" Updated searchProgress, new size:",De.size,"key:",We),De}),(V.phase==="searching"||V.phase==="results_found")&&L(be=>{for(let De=be.length-1;De>=0;De--){const Nt=be[De];if(Nt.role==="assistant"&&Nt.tool_calls&&Nt.tool_calls.findIndex(nt=>nt.function.name==="search_web")!==-1){Ne(nt=>{const Dr=new Set(nt);return Dr.add(De),Dr});break}}return be})}break;case"youtube_search_progress":console.log(" YouTube search progress event:",V),V.phase==="searching"&&oe(new Map);const In=`youtube_${V.phase}`;oe(We=>{const be=new Map(We);return be.set(In,V),be}),V.phase==="complete"&&setTimeout(()=>{oe(new Map)},1e3),V.phase==="searching"&&L(We=>{for(let be=We.length-1;be>=0;be--){const De=We[be];if(De.role==="assistant"&&De.tool_calls&&De.tool_calls.findIndex(Lt=>Lt.function.name==="search_youtube")!==-1){Ne(Lt=>{const nt=new Set(Lt);return nt.add(be),nt});break}}return We});break;case"javascript_execution_progress":console.log(" JavaScript execution progress:",V);const mn=V.phase==="console_output"?`js_output_${V.output_number||Date.now()}`:`js_${V.phase}`;qe(We=>{const be=new Map(We);return be.set(mn,V),be}),(V.phase==="completed"||V.phase==="error")&&setTimeout(()=>{qe(new Map)},2e3);break;case"image_generation_progress":console.log(" Image generation progress:",V);const ml=`img_${V.phase}`;Cr(We=>{const be=new Map(We);return be.set(ml,V),be}),(V.phase==="completed"||V.phase==="error")&&setTimeout(()=>{Cr(new Map)},2e3);break;case"chart_generation_progress":console.log(" Chart generation progress:",V);const Ui=`chart_${V.phase}`;ut(We=>{const be=new Map(We);return be.set(Ui,V),be}),V.phase==="completed"&&setTimeout(()=>{ut(new Map)},2e3);break;case"scrape_progress":case"transcript_extracted":if($t==="transcript_extracted"){console.log(" Skipping transcript_extracted event (hidden from UI):",V);break}console.log(" Content extraction event:",V),V.phase==="content_extracted"&&At(We=>{const be=new Map(We),De=V.url||`extraction_${Date.now()}`;return be.set(De,V),be});break;case"message_complete":V.tool_calls&&V.tool_calls.length>0&&console.log(" message_complete with tool_calls:",V.tool_calls.map(We=>({id:We.id,name:We.function.name}))),console.log(" message_complete imageGenerations:",V.imageGenerations?.length||0,"imageGenerations:",V.imageGenerations),Tt!==null?(L(We=>{const be=[...We];if(be[Tt]){let De=be[Tt].imageGenerations||[];V.imageGenerations&&V.imageGenerations.length>0&&(De=[...De],V.imageGenerations.forEach(Lt=>{const nt=De.findIndex(Dr=>Dr.id===Lt.id);nt>=0?De[nt]={...De[nt],...Lt}:De.push(Lt)}));const Nt={...be[Tt],content:V.content||be[Tt].content||"",tool_calls:V.tool_calls||be[Tt].tool_calls,extractedContent:V.extractedContent||be[Tt].extractedContent,imageGenerations:De,llmApiCalls:V.llmApiCalls||be[Tt].llmApiCalls,evaluations:V.evaluations||be[Tt].evaluations,isStreaming:!1};V.toolResults&&Nt.toolResults&&(Nt.toolResults=Nt.toolResults.map(Lt=>{const nt=V.toolResults.find(Dr=>Dr.tool_call_id===Lt.tool_call_id);return nt?{...Lt,rawResponse:nt.rawResponse,extractionMetadata:nt.extractionMetadata}:Lt})),be[Tt]=Nt}return be}),sr(null),Ut("")):(V.content||V.tool_calls)&&(L(We=>{const be=We[We.length-1],De=We.length-1,Nt=(V.content||"").trim(),Lt=be?.content?Ir(be.content).trim():"";let nt=!1;for(let _n=We.length-1;_n>=0&&We[_n].role!=="assistant";_n--)if(We[_n].role==="tool"){nt=!0;break}if(nt){if(be?.role==="assistant"&&be.isStreaming){console.log(" Updating last assistant message with message_complete data");const gr=[...We];let Fr=be.imageGenerations||[];V.imageGenerations&&V.imageGenerations.length>0&&(Fr=[...Fr],V.imageGenerations.forEach(Vr=>{const Dn=Fr.findIndex(Vs=>Vs.id===Vr.id);Dn>=0?Fr[Dn]={...Fr[Dn],...Vr}:Fr.push(Vr)}));const Es={...be,content:V.content||be.content||"",tool_calls:V.tool_calls||be.tool_calls,extractedContent:V.extractedContent||be.extractedContent,imageGenerations:Fr,llmApiCalls:V.llmApiCalls||be.llmApiCalls,evaluations:V.evaluations||be.evaluations,isStreaming:!1};return V.toolResults&&Es.toolResults&&(Es.toolResults=Es.toolResults.map(Vr=>{const Dn=V.toolResults.find(Vs=>Vs.tool_call_id===Vr.tool_call_id);return Dn?(console.log(" Updating embedded toolResult with rawResponse:",{tool_call_id:Vr.tool_call_id,hasRawResponse:!!Dn.rawResponse,rawResponseLength:Dn.rawResponse?.length}),{...Vr,rawResponse:Dn.rawResponse,extractionMetadata:Dn.extractionMetadata}):Vr})),gr[De]=Es,gr}console.log(" Creating new assistant message for new iteration");const _n={role:"assistant",content:V.content||"",...V.tool_calls&&{tool_calls:V.tool_calls},...V.extractedContent&&{extractedContent:V.extractedContent},...V.imageGenerations&&{imageGenerations:V.imageGenerations},...V.llmApiCalls&&{llmApiCalls:V.llmApiCalls},...V.evaluations&&{evaluations:V.evaluations}};return[...We,_n]}if(be?.role==="assistant"&&(be.isStreaming||!Lt||Lt&&Nt.startsWith(Lt))){console.log(" Updating last assistant message with message_complete data"),console.log(" lastMessage.imageGenerations:",be.imageGenerations),console.log(" data.imageGenerations:",V.imageGenerations);const gr=[...We];let Fr=be.imageGenerations||[];console.log(" mergedImageGenerations BEFORE merge:",Fr),V.imageGenerations&&V.imageGenerations.length>0&&(Fr=[...Fr],V.imageGenerations.forEach(Vr=>{console.log(" Processing imageGeneration from message_complete:",{id:Vr.id,hasBase64:!!Vr.base64,base64Length:Vr.base64?.length,hasImageUrl:!!Vr.imageUrl});const Dn=Fr.findIndex(Vs=>Vs.id===Vr.id);if(Dn>=0){const Vs=Fr[Dn].base64;console.log(" Merging - existing has base64:",!!Vs,"new has base64:",!!Vr.base64),Fr[Dn]={...Fr[Dn],...Vr,base64:Vr.base64||Vs},console.log(" After merge - has base64:",!!Fr[Dn].base64)}else Fr.push(Vr),console.log(" Added new image to merge")})),console.log(" mergedImageGenerations AFTER merge:",Fr);const Es={...be,content:V.content||be.content||"",tool_calls:V.tool_calls||be.tool_calls,extractedContent:V.extractedContent||be.extractedContent,imageGenerations:Fr,llmApiCalls:V.llmApiCalls||be.llmApiCalls,evaluations:V.evaluations||be.evaluations,isStreaming:!1};return console.log(" updatedMessage.imageGenerations:",Es.imageGenerations),gr[De]=Es,console.log(" newMessages[lastMessageIndex].imageGenerations:",gr[De].imageGenerations),console.log(" RETURNING newMessages array:",gr.map((Vr,Dn)=>({idx:Dn,role:Vr.role,hasImageGenerations:!!Vr.imageGenerations,imageGenerationsLength:Vr.imageGenerations?.length,actualImageGenerations:Vr.imageGenerations}))),gr}if(be?.role==="assistant"&&!be.isStreaming&&Lt===Nt)return console.log(" Skipping duplicate final message block (content matches non-streaming block)"),We;const Dr={role:"assistant",content:V.content||"",...V.tool_calls&&{tool_calls:V.tool_calls},...V.extractedContent&&{extractedContent:V.extractedContent},...V.imageGenerations&&{imageGenerations:V.imageGenerations},...V.llmApiCalls&&{llmApiCalls:V.llmApiCalls},...V.evaluations&&{evaluations:V.evaluations}};if(V.content?.includes("Based on the search results above")||V.content?.includes("I apologize, but I was unable to generate a response")||V.content?.includes("I was unable to provide")||!V.content&&!V.tool_calls||V.content&&V.content.trim().length<10&&!V.tool_calls){let _n=-1;for(let gr=We.length-1;gr>=0;gr--)if(We[gr].role==="user"){_n=gr;break}Dr.isRetryable=!0,Dr.originalErrorMessage="Incomplete or fallback response",Dr.originalUserPromptIndex=_n>=0?_n:void 0,Dr.retryCount=0}return[...We,Dr]}),Ut(""));break;case"provider_fallback":console.log(" Provider fallback:",V);const gd=` ${V.originalModel} hit rate limit, switching to ${V.fallbackModel} (attempt ${V.attempt})`;L(We=>[...We,{role:"system",content:gd,timestamp:new Date().toISOString(),metadata:{type:"provider_fallback",originalModel:V.originalModel,fallbackModel:V.fallbackModel,fallbackProvider:V.fallbackProvider,reason:V.reason,attempt:V.attempt,phase:V.phase,iteration:V.iteration}}]);break;case"complete":console.log("Stream complete:",V),V.extractedContent&&(console.log(" Attaching extractedContent from complete event:",{hasAllImages:!!V.extractedContent.allImages,allImagesCount:V.extractedContent.allImages?.length||0,hasImages:!!V.extractedContent.images,imagesCount:V.extractedContent.images?.length||0}),L(We=>{const be=[...We];for(let De=be.length-1;De>=0;De--)if(be[De].role==="assistant"){be[De]={...be[De],extractedContent:V.extractedContent},console.log(` Attached extractedContent to assistant message at index ${De}`);break}return be})),V.cost&&typeof V.cost=="number"&&(I(V.cost),Vt(V.cost),console.log(` Request cost: $${V.cost.toFixed(4)}`));break;case"error":const ss=V.error;if(V.type==="input_moderation_error"){console.warn(" Input moderation error:",V.reason);const be={role:"assistant",content:` **Content Moderation Alert**

${ss}

**Reason**: ${V.reason}

**Violations**: ${V.violations?.join(", ")||"Unknown"}`,llmApiCalls:V.llmApiCalls||[]};if(L(De=>[...De,be]),V.suggestedRevision){K(V.suggestedRevision);const De={role:"assistant",content:` **Suggested Revision**

We've updated your message to comply with content policies. You can edit and send it again.`};L(Nt=>[...Nt,De])}else K("");break}if(V.type==="output_moderation_error"){console.warn(" Output moderation error:",V.reason);const We=` **Content Moderation Alert**

The generated response was flagged by our content moderation system and cannot be displayed.

**Reason**: ${V.reason}

Please try rephrasing your question.`;L(be=>{const De=[...be];for(let Nt=De.length-1;Nt>=0;Nt--)if(De[Nt].role==="assistant"){De[Nt]={...De[Nt],content:We,guardrailFailed:!0,guardrailReason:V.reason,guardrailViolations:V.violations,llmApiCalls:V.llmApiCalls||De[Nt].llmApiCalls||[],isStreaming:!1},console.log(` Replaced assistant message content at index ${Nt} with guardrail error`);break}return De});break}if(V.type==="guardrail_configuration_error"||V.type==="guardrail_system_error"){console.error(" Guardrail system error:",V.error);const be={role:"assistant",content:` **System Error**

${ss}

The content moderation system is experiencing issues. Please contact support if this persists.`};L(De=>[...De,be]),k(ss);break}k(ss),(ss.includes("Authentication")||ss.includes("UNAUTHORIZED")||V.code==="UNAUTHORIZED")&&(console.warn(" Authentication error detected, logging out..."),S("Your session has expired. Please sign in again.")),V.code==="MAX_ITERATIONS"&&V.showContinueButton&&V.continueContext&&(console.log(" Continue button enabled for MAX_ITERATIONS error:",ss),$e(!0),fr(V.continueContext));const Sc={role:"assistant",content:` Error: ${ss}`,errorData:V,isRetryable:!0,originalErrorMessage:ss,originalUserPromptIndex:at,retryCount:0};L(We=>[...We,Sc]);break;case"llm_request":console.log(" LLM API Request:",V),L(We=>{const be=[...We],Nt=be[be.length-1]?.role==="tool";let Lt=!1;if(!Nt){for(let nt=be.length-1;nt>=0;nt--)if(be[nt].role==="assistant"){const Dr=Ir(be[nt].content);be[nt].isStreaming||!be[nt].content||Dr.trim().length===0?(console.log(" Attaching llmApiCalls to active assistant at index:",nt,"phase:",V.phase,"provider:",V.provider,"model:",V.model),be[nt]={...be[nt],llmApiCalls:[...be[nt].llmApiCalls||[],{phase:V.phase,provider:V.provider||"Unknown",model:V.model||"Unknown",request:V.request,timestamp:V.timestamp}]},Lt=!0):console.log(" Skipping completed assistant at index:",nt,"(from previous query)");break}}return Lt||(console.log(" Creating new placeholder for llm_request, reason:",Nt?"tools executed":"no active assistant","provider:",V.provider,"model:",V.model),be.push({role:"assistant",content:"",isStreaming:!0,llmApiCalls:[{phase:V.phase,provider:V.provider||"Unknown",model:V.model||"Unknown",request:V.request,timestamp:V.timestamp}]})),be});break;case"llm_response":console.log(" LLM API Response:",V),L(We=>{const be=[...We];for(let De=be.length-1;De>=0;De--)if(be[De].role==="assistant"&&be[De].llmApiCalls){const Nt=be[De].llmApiCalls,Lt=Nt[Nt.length-1];Lt&&Lt.phase===V.phase&&!Lt.response&&(Lt.response=V.response,Lt.httpHeaders=V.httpHeaders,Lt.httpStatus=V.httpStatus,V.provider&&(Lt.provider=V.provider),V.model&&(Lt.model=V.model),console.log(" Updated llmApiCall response for phase:",V.phase,"provider:",Lt.provider,"model:",Lt.model),be[De]={...be[De],llmApiCalls:[...Nt]});break}return be});break;case"todos_updated":console.log(" Todos updated:",V),vs({total:V.total??0,remaining:V.remaining??0,current:V.current??null,items:Array.isArray(V.items)?V.items:[]});break;case"todos_current":console.log(" Todos current update:",V),vs(We=>({total:V.total??We?.total??0,remaining:V.remaining??We?.remaining??0,current:V.current??We?.current??null,items:We?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",V),qs(V?.next||V?.state?.current?.description||null),setTimeout(()=>qs(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",V),S(V.message||"Todo auto-progression limit reached. Please continue manually.");break;case"snippet_inserted":console.log(" Snippet inserted:",V),window.dispatchEvent(new CustomEvent("snippet_inserted",{detail:V})),_(`Saved snippet: ${V.title}`),V.id&&(console.log(" Triggering snippet sync from Google Sheets for ID:",V.id),setTimeout(async()=>{try{await y(V.id)}catch(We){console.error(" Failed to sync snippet:",We)}},500));break;case"snippet_deleted":console.log(" Snippet deleted:",V),window.dispatchEvent(new CustomEvent("snippet_deleted",{detail:V})),_(`Deleted snippet: ${V.title}`);break;case"snippet_updated":console.log(" Snippet updated:",V),window.dispatchEvent(new CustomEvent("snippet_updated",{detail:V})),_(`Updated snippet: ${V.title}`);break}},()=>{Se&&clearTimeout(Se),Y(!1),hr([]),Ut(""),sr(null),Ct.current=null},$t=>{Se&&clearTimeout(Se),console.error("Streaming error:",$t),k(`Streaming error: ${$t.message}`),Y(!1),hr([]),Ct.current=null},Ct.current.signal,Lm,hd)}catch(Ie){if(console.error("Chat error:",Ie),Se&&clearTimeout(Se),Ie instanceof Error&&Ie.name==="AbortError"){const pe={role:"assistant",content:" Request timed out after 4 minutes. This may happen when tools take too long to execute. Try simplifying your request or disabling some tools.",isRetryable:!0,originalErrorMessage:"Request timed out",originalUserPromptIndex:at,retryCount:0};L(Ze=>[...Ze,pe]),S("Request timed out after 4 minutes. Try disabling some tools or simplifying your request.")}else{const pe=Ie instanceof Error?Ie.message:"Unknown error",Ze={role:"assistant",content:` Error: ${pe}`,errorData:Ie instanceof Error?{...Ie,message:Ie.message,name:Ie.name,stack:Ie.stack}:{message:String(Ie)},isRetryable:!0,originalErrorMessage:pe,originalUserPromptIndex:at,retryCount:0};L(Ye=>[...Ye,Ze]),k(`Chat error: ${pe}`)}Y(!1),hr([]),Ct.current=null}},pl=async P=>{const se=$[P];if(!se||!se.isRetryable){k("This message cannot be retried");return}const Me=se.retryCount||0;if(Me>=3){k("Maximum retry attempts (3) reached");return}const at=se.originalUserPromptIndex;if(at===void 0||at<0){k("Cannot find original user prompt for retry");return}const Fe=$[at];if(!Fe||Fe.role!=="user"){k("Invalid user prompt for retry");return}const J=$.slice(at+1,P),Xe=J.filter(pe=>pe.role==="tool"),Se=J.filter(pe=>pe.role==="assistant"||pe.role==="tool");console.log(" Retrying request:",{userPromptIndex:at,messageIndex:P,retryCount:Me+1,previousToolResults:Xe.length,intermediateMessages:Se.length,failureReason:se.originalErrorMessage}),_(`Retrying request (attempt ${Me+2}) with full context...`),L(pe=>pe.slice(0,P));const Ie=Ir(Fe.content);K(Ie),Br.current=!0},wc=async P=>{const se=await YC(P.id);se&&se.messages?(L(se.messages),Tr(P.id),localStorage.setItem("last_active_chat_id",P.id),se.systemPrompt&&U(se.systemPrompt),se.planningQuery&&it(se.planningQuery),se.generatedSystemPrompt&&zt(se.generatedSystemPrompt),se.generatedUserQuery&&He(se.generatedUserQuery),se.selectedSnippetIds&&Array.isArray(se.selectedSnippetIds)?(yr(new Set(se.selectedSnippetIds)),console.log(` Restored ${se.selectedSnippetIds.length} attached snippets`)):yr(new Set),H(!1),_("Chat loaded successfully")):k("Failed to load chat")},Ug=async P=>{await WC(P);const se=await Sy();Yt(se),_("Chat deleted")},wm=async()=>{if(ve.size===0)return;const P=ve.size;for(const Me of ve)await WC(Me);const se=await Sy();Yt(se),ce(new Set),_(`${P} chat${P>1?"s":""} deleted`)},Em=()=>{const P=new Set(pr.map(se=>se.id));ce(P)},_m=()=>{ce(new Set)},cd=P=>{const se=new Set(ve);se.has(P)?se.delete(P):se.add(P),ce(se)},Sm=async()=>{await Vle(),Yt([]),ce(new Set),re(!1),H(!1),_("All chat history cleared")},Tm=async()=>{if(!ot){k("No continuation context available");return}console.log(" Continuing from error/limit with context:",ot),$e(!1),T();const P=[];t.web_search&&P.push({type:"function",function:{name:"web_search",description:"Search the web for information",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"}},required:["query"]}}}),t.execute_js&&P.push({type:"function",function:{name:"execute_js",description:"Execute JavaScript code",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute"}},required:["code"]}}}),t.scrape_url&&P.push({type:"function",function:{name:"scrape_web_content",description:"Scrape content from a URL",parameters:{type:"object",properties:{url:{type:"string",description:"URL to scrape"}},required:["url"]}}});const Me={providers:A.providers.filter(Fe=>Fe.enabled===!0),messages:ot.messages,temperature:.7,stream:!0,isContinuation:!0,optimization:A.optimization||"cheap"};console.log(` Continuation request with optimization: ${Me.optimization}`),Z&&(Me.location={latitude:Z.latitude,longitude:Z.longitude,accuracy:Z.accuracy,address:Z.address,timestamp:Z.timestamp},console.log(" Including location in continuation request:",Z.address?.city||`${Z.latitude.toFixed(4)}, ${Z.longitude.toFixed(4)}`)),P.length>0&&(Me.tools=P),ot.extractedContent&&(Me.extractedContent=ot.extractedContent);const at=Gt.filter(Fe=>Fe.enabled);if(at.length>0&&(Me.mcp_servers=at.map(Fe=>({name:Fe.name,url:Fe.url}))),Y(!0),!o){k("Please sign in to continue"),$e(!0),Y(!1);return}try{await By(Me,o,(Fe,J)=>{switch(console.log("SSE Event (continuation):",Fe,J),Fe){case"delta":J.content&&(Ut(Ie=>Ie+J.content),L(Ie=>{const pe=Ie.length-1,Ze=Ie[pe],Ye=Ze?.role==="tool";if(Ze&&Ze.role==="assistant"&&!Ye){const Ce=[...Ie];return Ce[pe]={...Ze,content:(Ze.content||"")+J.content,isStreaming:!0},Ce}else{const Ce={role:"assistant",content:J.content,isStreaming:!0};return[...Ie,Ce]}}));break;case"error":const Xe=J.error;k(Xe),J.showContinueButton&&J.continueContext&&($e(!0),fr(J.continueContext));const Se={role:"assistant",content:` Error: ${Xe}`,errorData:J,isRetryable:!0,originalErrorMessage:Xe,retryCount:0};L(Ie=>[...Ie,Se]);break;case"complete":console.log("Continuation complete:",J),J.cost&&typeof J.cost=="number"&&I(J.cost);break;case"todos_updated":console.log(" Todos updated:",J),vs({total:J.total??0,remaining:J.remaining??0,current:J.current??null,items:Array.isArray(J.items)?J.items:[]});break;case"todos_current":console.log(" Todos current update:",J),vs(Ie=>({total:J.total??Ie?.total??0,remaining:J.remaining??Ie?.remaining??0,current:J.current??Ie?.current??null,items:Ie?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",J),qs(J?.next||J?.state?.current?.description||null),setTimeout(()=>qs(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",J),S(J.message||"Todo auto-progression limit reached. Please continue manually.");break;default:console.log("Unhandled event in continuation:",Fe,J)}},void 0,void 0,Ct.current?.signal)}catch(Fe){console.error("Error during continuation:",Fe),k(Fe instanceof Error?Fe.message:"Failed to continue"),$e(!0)}finally{Y(!1)}},$g=()=>{L([]),K(""),U(""),it(""),zt(""),He(""),yr(new Set),f(),Ne(new Set),Tr(null),localStorage.removeItem("last_active_chat_id"),setTimeout(()=>{Xt.current?.focus()},0),console.log("Started new chat - all prompts cleared")},Cm=()=>{!Dt.name.trim()||!Dt.url.trim()||(rr([...Gt,{id:`mcp_${Date.now()}`,name:Dt.name,url:Dt.url,enabled:!0}]),Ht({name:"",url:""}))},Nm=P=>{rr(Gt.map(se=>se.id===P?{...se,enabled:!se.enabled}:se))},zg=P=>{rr(Gt.filter(se=>se.id!==P))};return s.jsxs("div",{className:"flex flex-col h-full relative",onDragEnter:hi,onDragOver:yc,onDragLeave:id,onDrop:Bg,children:[st&&s.jsx("div",{className:"absolute inset-0 z-50 bg-blue-500/20 dark:bg-blue-400/20 backdrop-blur-sm flex items-center justify-center border-4 border-dashed border-blue-500 dark:border-blue-400",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-2xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Drop files here"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Images (JPEG, PNG, GIF, WebP) and PDFs supported"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Max: 5MB for images, 10MB for PDFs"})]})})}),xe&&s.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:s.jsx("div",{className:"flex items-center gap-2 max-w-screen-2xl mx-auto",children:s.jsx("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded transition-colors",onClick:()=>St(!Ke),title:Ke?"Click to collapse":"Click to expand",children:Ke?xe:xe.length>200?xe.substring(0,200)+"...":xe})})}),s.jsx("div",{className:"flex flex-wrap items-center gap-2 p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[s.jsx("button",{onClick:$g,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded font-medium text-sm transition-colors",children:" New Chat"}),s.jsx("button",{onClick:()=>H(!0),className:"btn-secondary text-sm",children:" History"}),s.jsx("button",{onClick:()=>le(!0),className:"btn-secondary text-sm",title:xe?"Edit system prompt and planning":"Add system prompt and planning",children:xe?" Edit Plan":" Make A Plan"}),s.jsx("button",{onClick:()=>hn(!0),className:"btn-secondary text-sm",children:" Examples"}),s.jsxs("button",{onClick:()=>gl(!Ot),className:`text-sm px-3 py-1.5 rounded font-medium transition-colors ${Ot?"bg-blue-600 hover:bg-blue-700 text-white":"btn-secondary"}`,title:"Attach knowledge base snippets as context for this conversation",children:[" Attach Context",Or.size>0&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-white text-blue-600 rounded-full font-bold",children:Or.size})]})]})}),s.jsxs("div",{ref:gt,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[$.length===0&&s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:"No messages yet. Start a conversation!"}),(console.log(" RENDER: messages array:",$.map((P,se)=>({idx:se,role:P.role,hasImageGenerations:!!P.imageGenerations,imageGenerationsLength:P.imageGenerations?.length,actualImageGenerations:P.imageGenerations}))),null),$.map((P,se)=>{const Me=dn.has(se),at=P.content?Ir(P.content):"";console.log(`Rendering message ${se}:`,P.role,at.substring(0,50)),console.log(` Message ${se} imageGenerations:`,P.imageGenerations),P.role==="assistant"&&P.tool_calls&&console.log(`  Message ${se} has ${P.tool_calls.length} tool_calls:`,P.tool_calls.map(J=>({id:J.id,name:J.function?.name})));const Fe=P.role==="assistant"&&P.tool_calls?.some(J=>{if(J.function.name!=="transcribe_url")return!1;const Xe=gn.get(J.id);if(!Xe||Xe.length===0)return!1;const Se=Xe[Xe.length-1],Ie=Se.progress_type||Se.data?.type||"";return!(Ie==="transcribe_complete"||Ie==="transcription_stopped"||Ie==="error")});return P.role==="assistant"&&!P.content&&!Fe&&!P.tool_calls&&!P.isStreaming?null:s.jsx("div",{className:`flex gap-2 ${P.role==="user"?"flex-row-reverse":(P.role==="tool","")}`,children:s.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${P.role==="user"?"bg-blue-500 text-white":P.role==="tool"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700":P.content&&Ir(P.content).startsWith(" Error:")?"bg-pink-100 dark:bg-pink-900/30 border-2 border-pink-400 dark:border-pink-600 text-gray-900 dark:text-gray-100":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[P.role==="tool"&&(()=>{let J=null;console.log(" Searching for tool_call_id:",P.tool_call_id,"in",$.length,"messages");for(let pe=se-1;pe>=0;pe--)if($[pe].tool_calls&&(console.log("  Found message at index",pe,"with",$[pe].tool_calls?.length,"tool_calls"),J=$[pe].tool_calls?.find(Ze=>Ze.id===P.tool_call_id),J)){console.log(" Found tool call for",P.name,":",J);break}J||console.log(" No tool call found for",P.tool_call_id);let Xe=null;if(P.name==="search_web"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);pe.results&&Array.isArray(pe.results)&&(Xe=pe.results)}catch{}let Se=null;if(P.name==="scrape_web_content"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);(pe.url||pe.content||pe.error)&&(Se=pe)}catch{}let Ie=null;if(P.name==="execute_javascript"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);(pe.result!==void 0||pe.error)&&(Ie=pe)}catch{}return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[s.jsxs("span",{children:[" ",P.name||"Tool Result"]}),J&&(P.name==="search_web"||P.name==="search_youtube")&&(()=>{try{const pe=JSON.parse(J.function.arguments);if(pe.query)return s.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',pe.query,'"']})}catch{}return null})()]}),s.jsx("button",{onClick:()=>{const pe=new Set(dn);Me?pe.delete(se):pe.add(se),Ne(pe)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Me?"Collapse":"Expand",children:Me?"":""})]}),Me&&s.jsxs("div",{className:"text-xs space-y-2",children:[J&&s.jsx("div",{className:"mb-3 bg-purple-50 dark:bg-purple-950/50 p-3 rounded border border-purple-200 dark:border-purple-800",children:J.function.name==="search_web"?s.jsxs(s.Fragment,{children:[J.function.arguments&&(()=>{try{const pe=JSON.parse(J.function.arguments);if(pe.query)return s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:" Search Query:"}),s.jsxs("div",{className:"text-purple-900 dark:text-purple-100 italic",children:['"',pe.query,'"']})]})}catch(pe){console.error("Error parsing search arguments:",pe)}return null})(),(()=>{try{if(!P.content)return null;const Ze=(typeof P.content=="string"?JSON.parse(P.content):P.content)?.searchService;if(Ze&&typeof Ze=="string"){const Ye=Ze==="tavily";return s.jsxs("div",{className:"mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Search Provider:"}),s.jsx("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${Ye?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border border-blue-300 dark:border-blue-700":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border border-green-300 dark:border-green-700"}`,children:Ye?" Tavily API":" DuckDuckGo"})]})}}catch(pe){console.error("Error parsing search provider:",pe)}return null})()]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"Function Call:"}),s.jsx("div",{className:"font-mono text-xs mb-2",children:s.jsx("span",{className:"text-purple-900 dark:text-purple-100",children:J.function.name})}),J.function.arguments&&(()=>{try{const pe=JSON.parse(J.function.arguments);return pe.code?s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Code:"}),s.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:pe.code})})]}):s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Arguments:"}),s.jsx("div",{className:"bg-gray-900 dark:bg-gray-950 p-3 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:s.jsx(gg,{data:pe,expandAll:!0})})]})}catch(pe){console.error("Error parsing tool arguments:",pe)}return null})()]})}),P.tool_call_id&&P.name!=="search_web"&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Call ID:"}),s.jsx("div",{className:"font-mono text-xs bg-purple-50 dark:bg-purple-950 p-1 rounded mt-1 break-all",children:P.tool_call_id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Result:"}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950 p-2 rounded mt-1 max-h-96 overflow-y-auto",children:[Xe?s.jsx(qle,{results:Xe}):Se?s.jsxs("div",{className:"space-y-2",children:[Se.url&&s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"URL:"}),s.jsx("a",{href:Se.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block mt-1",children:Se.url})]}),Se.rawHtml&&s.jsx("button",{onClick:()=>ga({url:Se.url,html:Se.rawHtml}),className:"flex-shrink-0 px-3 py-1.5 text-xs bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors font-medium",title:"View raw uncompressed HTML",children:" Raw HTML"})]}),Se.error&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[s.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"Error:"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1",children:Se.error})]}),Se.content&&s.jsxs("div",{children:[s.jsxs("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:[" Page Content (",Se.content.length.toLocaleString()," characters)",Se.format&&s.jsxs("span",{className:"ml-2 text-xs text-purple-600 dark:text-purple-400",children:["[",Se.format,"]"]})]}),s.jsx("div",{className:"mt-2 p-3 bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 max-h-80 overflow-y-auto",children:Se.format==="markdown"?s.jsx("div",{className:"text-xs",children:s.jsx(xu,{content:Se.content})}):s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:Se.content})})]}),(Se.images||Se.allImages||Se.youtube||Se.media||Se.links)&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-3",children:" Extracted Content"}),s.jsxs("div",{className:"space-y-3",children:[Se.images&&Se.images.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Prioritized Images (sent to LLM): ",Se.images.length]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Se.images.map((pe,Ze)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[s.jsx("img",{src:pe.src,alt:pe.alt||`Image ${Ze+1}`,className:"w-full h-24 object-cover rounded mb-1",loading:"lazy"}),pe.alt&&s.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 truncate",children:pe.alt})]},Ze))})]}),Se.allImages&&Se.allImages.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" All Images: ",Se.allImages.length]}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:Se.allImages.slice(0,24).map((pe,Ze)=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-1",children:s.jsx("img",{src:pe.src,alt:pe.alt||`Image ${Ze+1}`,className:"w-full h-16 object-cover rounded",loading:"lazy"})},Ze))}),Se.allImages.length>24&&s.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Se.allImages.length-24," more"]})]}),Se.youtube&&Se.youtube.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" YouTube Videos: ",Se.youtube.length]}),s.jsx("div",{className:"space-y-1",children:Se.youtube.map((pe,Ze)=>s.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},Ze))})]}),Se.media&&Se.media.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Media (Audio/Video): ",Se.media.length]}),s.jsx("div",{className:"space-y-1",children:Se.media.map((pe,Ze)=>s.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},Ze))})]}),Se.links&&Se.links.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Links: ",Se.links.length]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:Se.links.slice(0,20).map((pe,Ze)=>s.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},Ze))}),Se.links.length>20&&s.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Se.links.length-20," more links"]})]})]})]})]}):Ie?s.jsxs("div",{className:"space-y-3",children:[Ie.error&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[s.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:Ie.error})]}),Ie.result!==void 0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:" Output:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(Ie.result)),_("Output copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),s.jsx("button",{onClick:()=>{tt(String(Ie.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),J?.executedAt&&s.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mb-2",children:["(",J.runtime||"N/A",")"]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(Ie.result)})})]})]}):P.name==="generate_chart"?(()=>{let pe=null;for(let Ze=se-1;Ze>=0&&!($[Ze].role==="assistant"&&$[Ze].content&&(pe=ko($[Ze].content),pe));Ze--);return s.jsx(qC,{content:P.content,chartCode:pe||void 0})})():s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:Ir(P.content)}),s.jsx(HC,{rawResponse:P.rawResponse,extractionMetadata:P.extractionMetadata}),P.content&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[s.jsxs("button",{onClick:()=>tt(Ir(P.content),"tool",P.name),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),P.name==="search_web"&&s.jsx("button",{onClick:()=>P.llmApiCalls&&P.llmApiCalls.length>0?Tn(se):null,className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${P.llmApiCalls&&P.llmApiCalls.length>0?"bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 cursor-pointer":"text-gray-500 dark:text-gray-500 cursor-default"}`,title:P.llmApiCalls&&P.llmApiCalls.length>0?`View LLM summarization info  ${ks(di(P))}`:"No LLM summarization used",children:P.llmApiCalls&&P.llmApiCalls.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",ks(di(P))]}),s.jsx("span",{className:"ml-0.5",children:""})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-[10px]",children:"No summarization"})]})}),P.name!=="search_web"&&P.llmApiCalls&&P.llmApiCalls.length>0&&s.jsxs("button",{onClick:()=>Tn(se),className:"text-xs px-1.5 py-0.5 rounded bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 flex items-center gap-1 transition-colors",title:`View LLM transparency info  ${ks(di(P))}`,children:[s.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",ks(di(P))]}),s.jsx("span",{className:"ml-0.5",children:""})]})]})]})]})]})]})})(),P.role!=="tool"&&s.jsxs(s.Fragment,{children:[P.role==="assistant"?s.jsxs("div",{children:[se===$.length-1&&Gn.size>0&&s.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Gn.values()).map((J,Xe)=>s.jsx(Lle,{data:J},Xe))}),se===$.length-1&&Qr.size>0&&s.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Qr.values()).map((J,Xe)=>s.jsx(jle,{data:J},Xe))}),se===$.length-1&&Re.size>0&&s.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Re.values()).map((J,Xe)=>s.jsx(Mle,{data:J},Xe))}),se===$.length-1&&bt.size>0&&s.jsx("div",{className:"mb-3 space-y-2",children:Array.from(bt.values()).map((J,Xe)=>s.jsx(Rle,{data:J},Xe))}),se===$.length-1&&br.size>0&&s.jsx("div",{className:"mb-3 space-y-2",children:Array.from(br.values()).map((J,Xe)=>s.jsx(Ole,{data:J},Xe))}),P.tool_calls&&P.tool_calls.map((J,Xe)=>{if(J.function.name==="transcribe_url"&&gn.has(J.id)){console.log(`    Rendering TranscriptionProgress for tool_call ${Xe}: ${J.id}`);const Se=gn.get(J.id);if(!Se||Se.length===0)return console.log(`      No events for ${J.id}, skipping`),null;const Ie=Se[Se.length-1],pe=Ie.progress_type||Ie.data?.type||"",Ze=pe==="transcribe_complete"||pe==="transcription_stopped"||pe==="error";if(console.log(`      Last event type: ${pe}, isComplete: ${Ze}`),Ze)return console.log("      Transcription complete, skipping progress render"),null;console.log(`       Rendering progress component for ${J.id}`);const Ye=JSON.parse(J.function.arguments||"{}");return s.jsx("div",{className:"mb-3",children:s.jsx(Nle,{toolCallId:J.id,url:Ye.url||"",events:Se||[],onStop:kc})},J.id)}if(J.function.name==="scrape_web_content"&&rs.has(J.id)){console.log(`    Rendering ScrapingProgress for tool_call ${Xe}: ${J.id}`);const Se=rs.get(J.id);if(!Se||Se.length===0)return console.log(`      No events for ${J.id}, skipping`),null;const Ie=Se[Se.length-1],pe=Ie.progress_type||Ie.data?.type||"",Ze=pe==="scrape_complete"||pe==="scrape_error";if(console.log(`      Last event type: ${pe}, isComplete: ${Ze}`),Ze)return console.log("      Scraping complete, skipping progress render"),null;console.log(`       Rendering scraping progress component for ${J.id}`);const Ye=JSON.parse(J.function.arguments||"{}");return s.jsx("div",{className:"mb-3",children:s.jsx(Ale,{toolCallId:J.id,url:Ye.url||"",events:Se||[]})},J.id)}return null}),P.tool_calls&&!P.toolResults&&!P.isStreaming&&s.jsxs("div",{className:"mb-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[" Executing ",P.tool_calls.length," tool",P.tool_calls.length>1?"s":"","..."]})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"flex-1",children:P.content&&(()=>{let J;if(P.toolResults){const Xe=P.toolResults.find(Se=>Se.name==="generate_chart");if(Xe)try{const Se=typeof Xe.content=="string"?JSON.parse(Xe.content):Xe.content;J=Se.description||Se.chart_type}catch{}}return s.jsx(xu,{content:Ir(P.content),chartDescription:J})})()}),P.content&&!P.isStreaming&&s.jsx(II,{text:Ir(P.content),variant:"icon",shouldSummarize:Ir(P.content).length>500})]}),P.isStreaming&&s.jsx("span",{className:"inline-block w-2 h-4 bg-gray-500 animate-pulse ml-1"}),(()=>{const J=$[se+1];if(J&&J.role==="tool"){const Xe=[];if(P.tool_calls&&P.tool_calls.forEach(Se=>{if(Se.function?.name==="search_youtube"){const Ie=$.find((pe,Ze)=>Ze>se&&pe.role==="tool"&&pe.tool_call_id===Se.id);if(Ie&&Ie.content)try{const pe=typeof Ie.content=="string"?JSON.parse(Ie.content):Ie.content;pe.videos&&Array.isArray(pe.videos)&&Xe.push(...pe.videos)}catch(pe){console.error("Failed to parse YouTube results:",pe)}}}),Xe.length>0)return s.jsx(Hle,{videos:Xe})}return null})(),(()=>{if(!P.extractedContent)return null;const J=P.extractedContent;return J.prioritizedImages&&J.prioritizedImages.length>0||J.allLinks&&J.allLinks.length>0||J.allImages&&J.allImages.length>0||J.youtubeVideos&&J.youtubeVideos.length>0||J.otherVideos&&J.otherVideos.length>0||J.media&&J.media.length>0?s.jsxs("div",{className:"mt-4 space-y-4",children:[J.prioritizedImages&&J.prioritizedImages.length>0&&s.jsx(Ule,{images:J.prioritizedImages.map(Se=>Se.src),maxDisplay:3,onImageClick:Se=>window.open(Se,"_blank"),onGrabImage:Ys}),J.allLinks&&J.allLinks.length>0&&s.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[s.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Links (",J.allLinks.length,")"]}),s.jsx("div",{className:"p-4 space-y-2",children:J.allLinks.map((Se,Ie)=>s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-2 last:border-b-0",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("a",{href:Se.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium break-words",children:Se.title}),Se.snippet&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 italic",children:Se.snippet})]})]})},Ie))})]}),J.allImages&&J.allImages.length>0&&s.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[s.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Images (",J.allImages.length,")"]}),s.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:J.allImages.map((Se,Ie)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:Se.src,alt:Se.alt||`Image ${Ie+1}`,className:"w-full h-32 object-cover rounded border border-gray-300 dark:border-gray-700 cursor-pointer hover:opacity-80",onClick:()=>window.open(Se.src,"_blank"),loading:"lazy"}),s.jsx("button",{onClick:()=>Ys(Se.src,Se.alt||`Image ${Ie+1}`),className:"absolute top-2 right-2 p-1.5 bg-white dark:bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",title:"Grab image",children:s.jsx("svg",{className:"w-4 h-4 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},Ie))})]}),J.youtubeVideos&&J.youtubeVideos.length>0&&s.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[s.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" YouTube Videos (",J.youtubeVideos.length,")"]}),s.jsx("div",{className:"p-4 space-y-2",children:J.youtubeVideos.map((Se,Ie)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),s.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.title})]},Ie))})]}),J.otherVideos&&J.otherVideos.length>0&&s.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[s.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Other Videos (",J.otherVideos.length,")"]}),s.jsx("div",{className:"p-4 space-y-2",children:J.otherVideos.map((Se,Ie)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),s.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.title})]},Ie))})]}),J.media&&J.media.length>0&&s.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[s.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Audio & Other Media (",J.media.length,")"]}),s.jsx("div",{className:"p-4 space-y-2",children:J.media.map((Se,Ie)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Ie+1,"."]}),s.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.type||"Media"})]},Ie))})]})]}):null})(),P.toolResults&&P.toolResults.length>0&&s.jsx("div",{className:"mt-4 space-y-3",children:P.toolResults.filter(J=>{if(J.name==="generate_image")try{if(JSON.parse(J.content).error)return!1}catch{}return!0}).map((J,Xe)=>{const Se=dn.has(se*1e3+Xe);let Ie=null;if(J.name==="search_web"&&typeof J.content=="string")try{const Ce=JSON.parse(J.content);Ce.results&&Array.isArray(Ce.results)&&(Ie=Ce.results)}catch{}let pe=null;if(J.name==="scrape_web_content"&&typeof J.content=="string")try{const Ce=JSON.parse(J.content);(Ce.content||Ce.url)&&(pe=Ce)}catch{}let Ze=null,Ye="";if(J.name==="execute_javascript"&&typeof J.content=="string")try{const Ce=JSON.parse(J.content);if(Ce.result!==void 0||Ce.error){Ze=Ce;const rt=P.tool_calls?.find(nr=>nr.id===J.tool_call_id);if(rt)try{Ye=JSON.parse(rt.function.arguments).code||""}catch{}}}catch{}return s.jsxs("div",{className:"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[s.jsxs("span",{children:[" ",J.name||"Tool Result"]}),P.tool_calls&&(J.name==="search_web"||J.name==="search_youtube")&&(()=>{const Ce=P.tool_calls.find(rt=>rt.id===J.tool_call_id);if(Ce)try{const rt=JSON.parse(Ce.function.arguments);if(rt.query)return s.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',rt.query,'"']})}catch{}return null})(),J.name==="scrape_web_content"&&(()=>{try{const Ce=typeof J.content=="string"?JSON.parse(J.content):J.content;if(Ce.url||Ce.scrapeService||Ce.proxyUsed!==void 0)return s.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 flex items-center gap-1",children:[Ce.url&&s.jsxs("a",{href:Ce.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["- ",new URL(Ce.url).hostname]}),Ce.scrapeService&&s.jsx("span",{className:"text-[10px] bg-purple-200 dark:bg-purple-800 px-1.5 py-0.5 rounded",children:Ce.scrapeService}),Ce.proxyUsed&&s.jsx("span",{className:"text-[10px] bg-green-200 dark:bg-green-800 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded",title:"Using proxy for enhanced privacy and bot detection evasion",children:" proxy"})]})}catch{}return null})()]}),s.jsx("button",{onClick:()=>{const Ce=new Set(dn),rt=se*1e3+Xe;Se?Ce.delete(rt):Ce.add(rt),Ne(Ce)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Se?"Collapse":"Expand",children:Se?"":""})]}),Se&&s.jsxs("div",{className:"text-xs space-y-2",children:[lt.size>0&&Array.from(lt.values()).filter(()=>J.name==="search_web"||J.name==="scrape_web_content"||J.name==="transcribe_url").map((Ce,rt)=>s.jsx(Ile,{data:Ce},rt)),Ie&&Ie.length>0?s.jsx("div",{className:"space-y-3",children:Ie.map((Ce,rt)=>{const nr=se*1e6+Xe*1e3+rt,vn=dn.has(nr),ns=Ce.content||Ce.page_content,as=typeof Ce.content=="string"?Ce.content:typeof Ce.page_content=="string"?Ce.page_content:JSON.stringify(Ce.page_content||Ce.content,null,2);return s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 overflow-hidden",children:[s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("a",{href:Ce.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-purple-700 dark:text-purple-300 hover:underline block mb-1",children:Ce.title}),(Ce.snippet||Ce.description)&&s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2",children:Ce.snippet||Ce.description}),s.jsx("a",{href:Ce.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-[10px] break-all block",children:Ce.url})]}),ns&&s.jsx("button",{onClick:()=>{const ea=new Set(dn);vn?ea.delete(nr):ea.add(nr),Ne(ea)},className:"flex-shrink-0 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-xs",title:vn?"Hide details":"Show details",children:vn?"":""})]}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[Ce.state&&s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${Ce.state==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"}`,children:Ce.state}),Ce.fetchTimeMs!==void 0&&s.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded",children:[" ",Ce.fetchTimeMs,"ms"]}),Ce.contentFormat&&s.jsx("span",{className:"text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:Ce.contentFormat}),Ce.intelligentlyExtracted&&s.jsx("span",{className:"text-[10px] bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-1.5 py-0.5 rounded",title:"Content intelligently extracted",children:" smart"}),Ce.truncated&&s.jsx("span",{className:"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-1.5 py-0.5 rounded",title:"Truncated to fit model",children:" truncated"})]})]}),vn&&ns&&s.jsxs("div",{className:"border-t border-purple-200 dark:border-purple-800 bg-purple-50/50 dark:bg-purple-900/10",children:[s.jsxs("div",{className:"px-3 py-2 border-b border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Scraping & Compression Details:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-[10px]",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Scrape Method:"})," ",s.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Ce.tier!==void 0?s.jsxs(s.Fragment,{children:["Tier ",Ce.tier," - ",Ce.scrapeMethod||Ce.scrapeService]}):"Direct HTTP Fetch"}),Ce.tier!==void 0&&s.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-[9px] block mt-0.5",children:[Ce.tier===0&&"(Simple HTTP GET - fast, no browser)",Ce.tier===1&&"(Puppeteer - browser automation with stealth)",Ce.tier===2&&"(Playwright - advanced browser automation)",Ce.tier===3&&"(Selenium - complex interactions)",Ce.tier===4&&"(Interactive - manual CAPTCHA/login)"]})]}),Ce.responseTime!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Scrape Time:"})," ",s.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ce.responseTime,"ms"]})]}),Ce.fetchTimeMs!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Time:"})," ",s.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ce.fetchTimeMs,"ms"]})]}),Ce.contentFormat&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",s.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:Ce.contentFormat})]}),(Ce.originalLength||Ce.originalContentLength)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Original Size:"})," ",s.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[((Ce.originalLength||Ce.originalContentLength)/1024).toFixed(1),"KB"]})]}),as&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compressed Size:"})," ",s.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[(as.length/1024).toFixed(1),"KB"]})]}),Ce.compressionRatio&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",s.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:[Ce.compressionRatio.toFixed(2),"x"]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression Strategy:"})," ",s.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:Ce.intelligentlyExtracted?s.jsxs("span",{children:["Smart extraction",Ce.contentFormat==="markdown"?"  Markdown":"  Plain text",Ce.truncated&&"  Truncated to model limits"]}):s.jsx("span",{children:"Basic extraction"})})]}),s.jsx("div",{className:"col-span-2 mt-1 text-gray-500 dark:text-gray-400 italic",children:"Note: No LLM calls used for compression (rule-based extraction only)"})]})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[Ce.rawHtml&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[s.jsx("span",{children:" Stage 1: Raw HTML from Scraper"}),s.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ce.rawHtml.length.toLocaleString()," chars"]})]}),s.jsx("button",{onClick:()=>{const ea=document.createElement("div");ea.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",ea.innerHTML=`
                                                                <div class="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col">
                                                                  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Raw HTML (${Ce.rawHtml.length.toLocaleString()} chars)</h3>
                                                                    <button class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="this.closest('.fixed').remove()">
                                                                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                                                      </svg>
                                                                    </button>
                                                                  </div>
                                                                  <div class="flex-1 overflow-auto p-4">
                                                                    <pre class="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap">${Ce.rawHtml.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>
                                                                  </div>
                                                                </div>
                                                              `,document.body.appendChild(ea)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full HTML"})]}),Ce.rawText&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[s.jsx("span",{children:" Stage 2: Raw Text (innerText)"}),s.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ce.rawText.length.toLocaleString()," chars"]})]}),s.jsx("button",{onClick:()=>{const ea=document.createElement("div");ea.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",ea.innerHTML=`
                                                                <div class="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col">
                                                                  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Raw Text (${Ce.rawText.length.toLocaleString()} chars)</h3>
                                                                    <button class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="this.closest('.fixed').remove()">
                                                                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                                                      </svg>
                                                                    </button>
                                                                  </div>
                                                                  <div class="flex-1 overflow-auto p-4">
                                                                    <pre class="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap">${Ce.rawText}</pre>
                                                                  </div>
                                                                </div>
                                                              `,document.body.appendChild(ea)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full Text"})]}),Ce.afterSmartExtraction&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[s.jsx("span",{children:" Stage 3: After Smart Extraction (Headers/Nav/Footers Removed)"}),s.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ce.afterSmartExtraction.length.toLocaleString()," chars"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-48 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ce.afterSmartExtraction})})]}),Ce.afterSummarization&&Ce.beforeSummarization&&Ce.afterSummarization!==Ce.beforeSummarization&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[s.jsx("span",{children:" Stage 4: After AI Summarization"}),s.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ce.afterSummarization.length.toLocaleString()," chars"]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-amber-200 dark:border-amber-700 max-h-48 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ce.afterSummarization})})]}),Ce.sentToLLM&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-300 mb-2 flex items-center justify-between",children:[s.jsx("span",{children:" Stage 5: SENT TO LLM (Tool Result)"}),s.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ce.sentToLLM.length.toLocaleString()," chars"]})]}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded border-2 border-green-500 dark:border-green-600 max-h-64 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ce.sentToLLM})})]}),s.jsx("div",{className:"pt-2 border-t border-purple-200 dark:border-purple-800",children:s.jsxs("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 space-y-1",children:[s.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Content Processing Pipeline:"}),Ce.rawHtml&&s.jsxs("div",{children:[" Raw HTML: ",Ce.rawHtml.length.toLocaleString()," chars"]}),Ce.rawText&&s.jsxs("div",{children:[" Raw Text: ",Ce.rawText.length.toLocaleString()," chars"]}),Ce.afterSmartExtraction&&s.jsxs("div",{children:[" Smart Extraction: ",Ce.afterSmartExtraction.length.toLocaleString()," chars"]}),Ce.afterSummarization&&Ce.beforeSummarization&&Ce.afterSummarization!==Ce.beforeSummarization&&s.jsxs("div",{children:[" After Summarization: ",Ce.afterSummarization.length.toLocaleString()," chars"]}),Ce.sentToLLM&&s.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:[" Sent to LLM: ",Ce.sentToLLM.length.toLocaleString()," chars"]})]})})]})]})]},rt)})}):pe?s.jsxs("div",{className:"space-y-3",children:[pe.error&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-3",children:[s.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Scraping Error:"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono whitespace-pre-wrap",children:pe.error})]}),pe.warning&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-2",children:[s.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:" Warning:"}),s.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-xs mt-1",children:pe.warning})]}),(pe.format||pe.compressionRatio||pe.originalLength||pe.extractedLength)&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Metadata:"}),(()=>{const rt=Array.from(lt.values()).find(nr=>nr.url===pe.url)?.rawHtml;return rt?s.jsx("button",{onClick:()=>Fa({html:rt,url:pe.url}),className:"text-xs px-2 py-1 bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-300 dark:hover:bg-purple-700",children:"View Raw HTML"}):null})()]}),s.jsx("table",{className:"w-full text-xs border-collapse",children:s.jsxs("tbody",{children:[pe.format&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Format:"}),s.jsx("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:pe.format==="markdown"?" Markdown":" Plain Text"})]}),typeof pe.originalLength=="number"&&typeof pe.extractedLength=="number"&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Size:"}),s.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[(pe.originalLength/1024).toFixed(1),"KB  ",(pe.extractedLength/1024).toFixed(1),"KB"]})]}),pe.compressionRatio&&typeof pe.compressionRatio=="number"&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Compression:"}),s.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[pe.compressionRatio.toFixed(1),"x"]})]})]})})]}),pe.content&&s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Content:"}),s.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-800 max-h-96 overflow-y-auto",children:pe.format==="markdown"?s.jsx(xu,{content:pe.content}):s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 leading-relaxed",children:pe.content})})]})]}):Ze?s.jsxs("div",{className:"space-y-3",children:[Ye&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Code:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ye),_("Code copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy code to clipboard",children:"Copy"}),s.jsx("button",{onClick:()=>{tt(Ye,"tool","JavaScript Code")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture code to Swag",children:"Grab"})]})]}),s.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:s.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:Ye})})]}),Ze.error&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[s.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),s.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:Ze.error})]}),Ze.result!==void 0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Output:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(Ze.result)),_("Output copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),s.jsx("button",{onClick:()=>{tt(String(Ze.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(Ze.result)})})]})]}):J.name==="generate_chart"?s.jsx(qC,{content:J.content,chartCode:ko(P.content)||void 0}):J.name==="generate_image"?(()=>{const Ce=J.tool_call_id||J.id,rt=P.imageGenerations?.find(nr=>nr.id===Ce);if(rt)return s.jsxs("div",{className:"space-y-3 mt-3",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx("table",{className:"w-full text-sm border-collapse border border-purple-200 dark:border-purple-800 rounded",children:s.jsxs("tbody",{children:[rt.prompt&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20 w-1/3",children:"Title/Prompt"}),s.jsx("td",{className:"py-2 px-3",children:rt.prompt})]}),rt.revisedPrompt&&rt.revisedPrompt!==rt.prompt&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Final Prompt"}),s.jsx("td",{className:"py-2 px-3",children:rt.revisedPrompt})]}),rt.size&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Size"}),s.jsx("td",{className:"py-2 px-3",children:rt.size})]}),rt.model&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Model"}),s.jsxs("td",{className:"py-2 px-3",children:[rt.provider,"/",rt.model]})]}),rt.qualityTier&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Quality"}),s.jsx("td",{className:"py-2 px-3 capitalize",children:rt.qualityTier})]}),rt.cost!==void 0&&s.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Cost"}),s.jsxs("td",{className:"py-2 px-3",children:["$",rt.cost.toFixed(4)]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Status"}),s.jsx("td",{className:"py-2 px-3",children:rt.status==="complete"?s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:" Success"}):rt.status==="error"?s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:" Failed"}):s.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:rt.status})})]})]})})}),rt.llmApiCall?.request&&s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[s.jsxs("button",{onClick:()=>{const nr=`img-req-${rt.id}`,vn=document.getElementById(nr);vn&&vn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[s.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Request Data"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsx("pre",{id:`img-req-${rt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(rt.llmApiCall.request,null,2)})]}),rt.llmApiCall?.response&&s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[s.jsxs("button",{onClick:()=>{const nr=`img-res-${rt.id}`,vn=document.getElementById(nr);vn&&vn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[s.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Response Data"}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsx("pre",{id:`img-res-${rt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(rt.llmApiCall.response,null,2)})]})]});try{return typeof J.content=="string"?JSON.parse(J.content):J.content,s.jsx(_y,{content:J.content})}catch{return s.jsx(_y,{content:J.content})}})():s.jsx(_y,{content:J.content})]}),J.name==="generate_image"&&(()=>{const Ce=J.tool_call_id||J.id,rt=P.imageGenerations?.find(nr=>nr.id===Ce);if(rt&&(rt.status==="generating"||rt.status==="downloading")){const nr=rt.phase||"generating",vn=rt.estimatedSeconds||15;let ns=" Generating image...",as="This may take 10-30 seconds for high-quality images";return nr==="selecting_provider"?(ns=" Selecting image provider...",as="Finding best available model"):nr==="generating"?(ns=` Generating image... (~${vn}s)`,as=`Using ${rt.provider||"selected"} ${rt.model||"model"}`):rt.status==="downloading"&&(ns=" Downloading image...",as="Converting to base64 for offline storage"),s.jsx("div",{className:"mt-3 relative",children:s.jsxs("div",{className:"w-full rounded border border-purple-300 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20 flex flex-col items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mb-4"}),s.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold mb-2",children:ns}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center max-w-md",children:as}),rt.prompt&&s.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center max-w-md mt-3 italic",children:['"',rt.prompt.substring(0,100),rt.prompt.length>100?"...":"",'"']})]})})}if(rt&&(rt.imageUrl||rt.base64)){let nr;rt.base64?nr=rt.base64.startsWith("data:image/")?rt.base64:`data:image/png;base64,${rt.base64}`:rt.imageUrl?.startsWith("data:image/")?nr=rt.imageUrl:nr=rt.imageUrl||"";const vn=`<img src="${nr}" alt="${rt.prompt||"Generated image"}" />`;return s.jsxs("div",{className:"mt-3 relative group",children:[s.jsx("img",{src:nr,alt:rt.prompt||"Generated image",className:"w-full rounded border border-purple-300 dark:border-purple-700",style:{maxHeight:"512px",objectFit:"contain"}}),s.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(nr||""),_("Image copied to clipboard")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Copy image data URL",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s.jsx("button",{onClick:async()=>{await x(vn,"assistant",rt.prompt||"Generated image"),_("Image grabbed to swag")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Grab to swag",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})})})]})]})}return null})(),s.jsx(HC,{rawResponse:J.rawResponse,extractionMetadata:J.extractionMetadata})]},Xe)})}),P.isStreaming&&P.toolResults&&P.toolResults.length>0&&s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-3 text-blue-700 dark:text-blue-300",children:[s.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-base",children:"Generating LLM Response..."}),s.jsx("div",{className:"text-sm opacity-80",children:"The AI is analyzing the tool results and composing a response"})]})]})})]}):s.jsxs("div",{className:"whitespace-pre-wrap",children:[Ir(P.content),P._attachments&&P._attachments.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:P._attachments.filter(J=>J&&J.name).map((J,Xe)=>s.jsx("div",{className:"bg-white/20 dark:bg-gray-700/30 rounded-lg overflow-hidden border border-white/30 dark:border-gray-600",children:J.preview?s.jsx("img",{src:J.preview,alt:J.name,className:"w-32 h-32 object-cover cursor-pointer hover:opacity-80 transition-opacity",title:`${J.name} (${(J.size/1024).toFixed(1)} KB)`,onClick:()=>window.open(J.preview,"_blank")}):s.jsxs("div",{className:"w-32 h-32 flex flex-col items-center justify-center p-2 bg-red-50 dark:bg-red-900/20",children:[s.jsxs("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),s.jsx("text",{x:"8",y:"16",fontSize:"8",fill:"currentColor",fontWeight:"bold",children:"PDF"})]}),s.jsx("span",{className:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium truncate max-w-full px-1",children:J.name})]})},Xe))}),(console.log(" Checking imageGenerations:",{hasImageGenerations:!!P.imageGenerations,length:P.imageGenerations?.length,imageGenerations:P.imageGenerations}),null),P.imageGenerations&&P.imageGenerations.length>0&&s.jsx("div",{className:"mt-3",children:(console.log(" About to render imageGenerations:",P.imageGenerations),P.imageGenerations.map(J=>(console.log(" Mapping imageGen:",J),s.jsx(Ble,{data:J,accessToken:o,providerApiKeys:ui,onCopy:Xe=>{navigator.clipboard.writeText(Xe).then(()=>{_("Image URL copied to clipboard!")}).catch(()=>{k("Failed to copy")})},onGrab:Xe=>{navigator.clipboard.writeText(Xe).then(()=>{_("Markdown copied to clipboard!")}).catch(()=>{k("Failed to copy")})},onLlmInfo:()=>{Tn(se)},onStatusChange:(Xe,Se,Ie,pe)=>{L(Ze=>Ze.map((Ye,Ce)=>{if(Ye.imageGenerations){const rt=Ye.imageGenerations.map(vn=>vn.id===Xe?{...vn,status:Se,imageUrl:Ie,llmApiCall:pe}:vn),nr={...Ye,imageGenerations:rt};return pe&&Ce===se&&(nr.llmApiCalls=[...Ye.llmApiCalls||[],pe]),nr}return Ye}))}},J.id))))})]}),P.role==="assistant"&&!M&&Hr>0&&se===$.length-1&&s.jsx("div",{className:"mt-2 flex items-center justify-end",children:s.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-50 dark:bg-green-900/20 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Request cost: ",wo(Hr),O&&s.jsxs("span",{className:"ml-1 opacity-75",children:["(Total: ",wo(O.totalCost),")"]})]})}),P.role==="assistant"&&(P.content||P.llmApiCalls)&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("button",{onClick:()=>{const J=Ir(P.content);navigator.clipboard.writeText(J).then(()=>{_("Copied to clipboard!")}).catch(()=>{k("Failed to copy")})},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Copy to clipboard",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]}),s.jsxs("button",{onClick:()=>{const J=Ir(P.content),Xe="Shared from LLM Proxy",Se=encodeURIComponent(J);window.open(`https://mail.google.com/mail/?view=cm&fs=1&su=${encodeURIComponent(Xe)}&body=${Se}`,"_blank")},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Share via Gmail",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Gmail"]}),s.jsxs("button",{onClick:()=>tt(Ir(P.content),"assistant",void 0,P.extractedContent,P.toolResults),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),P.llmApiCalls&&P.llmApiCalls.length>0&&(()=>{let J=0,Xe=0;P.llmApiCalls.forEach(Ie=>{J+=Ie.response?.usage?.prompt_tokens||0,Xe+=Ie.response?.usage?.completion_tokens||0});const Se=J+Xe;return s.jsxs("button",{onClick:()=>Tn(se),className:"text-xs px-2 py-1 rounded bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 flex items-center gap-1.5 transition-colors",title:`View LLM transparency info  ${Se.toLocaleString()} tokens (${J.toLocaleString()} in, ${Xe.toLocaleString()} out)  ${P.llmApiCalls.length} call${P.llmApiCalls.length!==1?"s":""}  ${ks(di(P))}`,children:[s.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",ks(di(P))]}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden sm:inline",children:[" ",Se.toLocaleString()," token",Se!==1?"s":""," (",J.toLocaleString()," in, ",Xe.toLocaleString()," out)"]}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden lg:inline",children:[" ",P.llmApiCalls.length," call",P.llmApiCalls.length!==1?"s":""]}),s.jsx("span",{className:"ml-0.5",children:""})]})})(),P.errorData&&Ir(P.content).startsWith(" Error:")&&!P.guardrailFailed&&s.jsxs("button",{onClick:()=>Rr(se),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-100 flex items-center gap-1",title:"View full error details",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Info"]}),P.isRetryable&&(!P.retryCount||P.retryCount<3)&&s.jsxs("button",{onClick:()=>pl(se),disabled:M,className:"text-xs text-orange-600 dark:text-orange-400 hover:text-orange-900 dark:hover:text-orange-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Retry this request with full context",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again",(P.retryCount??0)>0&&s.jsxs("span",{className:"text-[10px] opacity-75",children:["(",(P.retryCount??0)+1,")"]})]})]}),P.role==="user"&&s.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[s.jsxs("button",{onClick:()=>{K(Ir(P.content)),L($.slice(0,se)),hr([]),Ut("")},disabled:M,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset chat to this message",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l3-3m0 0l3 3m-3-3v12"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-3 3m0 0l-3-3",opacity:"0.3"})]}),"Reset"]}),s.jsxs("button",{onClick:()=>{Br.current=!0,L($.slice(0,se)),hr([]),Ut(""),K(Ir(P.content))},disabled:M,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry this message (clears subsequent messages and resubmits)",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"})}),"Retry"]}),s.jsxs("button",{onClick:()=>tt(Ir(P.content),"user"),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]})]})]})]})},se)}),M&&Tt!==null&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"streaming..."]})}),M&&!ar&&Zt.length===0&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:Ge})]}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:s.jsxs(s.Fragment,{children:[he.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:he.map((P,se)=>s.jsxs("div",{className:"relative group bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 p-2 flex items-center gap-2",children:[P.preview?s.jsx("img",{src:P.preview,alt:P.name,className:"w-12 h-12 object-cover rounded"}):s.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded",children:s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate max-w-[150px]",children:P.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(P.size/1024).toFixed(1)," KB"]})]}),s.jsx("button",{onClick:()=>ld(se),className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",title:"Remove file",children:""})]},se))}),ys&&ys.total>0&&s.jsxs("div",{className:"mb-3 p-3 border border-yellow-200 dark:border-yellow-800 rounded bg-yellow-50 dark:bg-yellow-900/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-yellow-900 dark:text-yellow-200 font-semibold text-sm",children:[s.jsx("span",{children:" Todos"}),s.jsxs("span",{className:"text-xs font-normal text-yellow-700 dark:text-yellow-300",children:[ys.total," total  ",ys.remaining," remaining"]}),hl&&s.jsxs("span",{className:"ml-2 text-xs italic text-yellow-800 dark:text-yellow-300 animate-pulse",children:[" Continuing: ",hl]})]}),s.jsx("button",{className:"text-xs text-yellow-800 dark:text-yellow-300 hover:underline focus:outline-none",onClick:()=>Wn(P=>!P),children:Di?" Collapse":" Expand"})]}),s.jsxs("div",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:[s.jsx("span",{className:"font-medium",children:"Current:"})," ",ys.current?.description||""]}),Di&&s.jsx("ul",{className:"mt-2 max-h-48 overflow-y-auto text-sm divide-y divide-yellow-200 dark:divide-yellow-800 bg-white dark:bg-gray-800 rounded p-2",children:ys.items.map((P,se)=>s.jsxs("li",{className:"py-1.5 flex items-start gap-2 text-gray-900 dark:text-gray-100",children:[s.jsx("span",{className:"mt-0.5 text-xs flex-shrink-0",children:P.status==="done"?"":P.status==="current"?"":""}),s.jsx("span",{className:`flex-1 ${P.status==="done"?"line-through opacity-60":""}`,children:P.description})]},String(P.id)||se))})]}),de&&ot&&s.jsxs("div",{className:"flex flex-col items-center gap-3 py-3 px-4",children:[s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-400 dark:border-orange-600 rounded-lg p-4 max-w-2xl w-full",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-6 h-6 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:" Maximum Iteration Limit Reached"}),s.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["The conversation has reached the maximum number of tool execution iterations (",ot?.maxIterations||"?"," iterations). This limit prevents infinite loops and excessive API usage."]}),s.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"Would you like to continue processing from where it stopped?"})]})]})}),s.jsxs("button",{onClick:()=>{confirm(` Continue processing?

This will resume tool execution and may incur additional API costs. The iteration limit helps prevent runaway processes.

Click OK to continue or Cancel to stop here.`)&&Tm()},disabled:M,className:"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg font-semibold text-base transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",title:"Continue from where the iteration limit was reached",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),"Continue Processing"]})]}),s.jsxs("div",{className:"flex gap-2 relative",children:[s.jsx("input",{ref:ir,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,application/pdf",multiple:!0,onChange:P=>Fg(P.target.files),className:"hidden"}),s.jsx("button",{onClick:()=>ir.current?.click(),disabled:M,className:"btn-secondary px-3 disabled:opacity-50 disabled:cursor-not-allowed",title:"Attach images or PDFs",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),s.jsx("button",{onClick:()=>Ua(!0),disabled:M||!o,className:"btn-secondary px-3 disabled:opacity-50 disabled:cursor-not-allowed",title:o?"Voice input (speech-to-text)":"Please sign in to use voice input",children:s.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),s.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})}),Or.size>0&&s.jsx("div",{className:"absolute -top-12 left-0 right-0 px-4",children:s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:[" ",Or.size," ",Or.size===1?"snippet":"snippets"," attached"]}),s.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[Array.from(Or).slice(0,3).map(P=>{const se=b.find(Me=>Me.id===P);return se?s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-200 px-2 py-0.5 rounded truncate max-w-[200px]",title:se.title||"Untitled",children:se.title||"Untitled"},P):null}),Or.size>3&&s.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-300",children:["+",Or.size-3," more"]})]})]}),s.jsx("button",{onClick:()=>yr(new Set),className:"ml-2 p-1 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800 rounded transition-colors",title:"Clear all attached snippets",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),s.jsx("textarea",{ref:Xt,value:X,onChange:P=>{K(P.target.value),Qt(-1)},onKeyDown:P=>{if(P.key==="Enter"&&!P.shiftKey)P.preventDefault(),Bi();else if(P.key==="ArrowUp"&&!P.shiftKey){if(P.preventDefault(),Jt.length>0){const se=Math.min(pa+1,Jt.length-1);Qt(se),K(Jt[se])}}else if(P.key==="ArrowDown"&&!P.shiftKey)if(P.preventDefault(),pa>0){const se=pa-1;Qt(se),K(Jt[se])}else pa===0&&(Qt(-1),K(""))},placeholder:"Type your message... (Shift+Enter for new line,  for history)",className:"input-field flex-1 resize-none overflow-y-auto",style:{minHeight:"2.5rem",maxHeight:"300px"}}),s.jsx("button",{onClick:M?xa:()=>Bi(),disabled:!M&&(!X.trim()||!o),className:"btn-primary self-end",title:o?X.trim()?"Send message":"Type a message first":"Please sign in to send messages",children:M?" Stop":X.trim()?" Send":" Type a message"})]})]})}),R&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"card max-w-2xl w-full p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Chat History"}),pr.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:Em,className:"btn-secondary text-xs px-3 py-1",children:" Select All"}),s.jsx("button",{onClick:_m,className:"btn-secondary text-xs px-3 py-1",children:" Select None"})]})]}),s.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[pr.map(P=>{const se=new Date(P.timestamp).toLocaleString(),Me=ve.has(P.id);return s.jsx("div",{className:`border ${Me?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"} rounded-lg p-3`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:Me,onChange:()=>cd(P.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-1 truncate",children:P.firstUserPrompt}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:se})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>wc(P),className:"btn-primary text-xs px-3 py-1",children:"Load"}),s.jsx("button",{onClick:()=>Ug(P.id),className:"btn-secondary text-red-500 text-xs px-3 py-1",children:"Delete"})]})]})},P.id)}),pr.length===0&&s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No chat history found. Start a conversation to save it automatically."})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[ve.size>0&&s.jsxs("button",{onClick:wm,className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[" Delete Selected (",ve.size,")"]}),pr.length>0&&s.jsx("button",{onClick:()=>re(!0),className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:" Clear All History"}),s.jsx("button",{onClick:()=>H(!1),className:"btn-primary flex-1",children:"Close"})]})]})}),ne&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"card max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Clear All History?"}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Are you sure you want to delete all ",pr.length," chat",pr.length!==1?"s":""," from history? This action cannot be undone."]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>re(!1),className:"btn-secondary flex-1",children:"Cancel"}),s.jsx("button",{onClick:Sm,className:"btn-primary flex-1 bg-red-600 hover:bg-red-700",children:"Clear All"})]})]})}),r&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:s.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"MCP Server Configuration"}),s.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:"Add MCP Server"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",value:Dt.name,onChange:P=>Ht({...Dt,name:P.target.value}),placeholder:"Server Name (e.g., filesystem, github)",className:"input-field w-full"}),s.jsx("input",{type:"text",value:Dt.url,onChange:P=>Ht({...Dt,url:P.target.value}),placeholder:"Server URL (e.g., http://localhost:3000)",className:"input-field w-full"}),s.jsx("button",{onClick:Cm,disabled:!Dt.name.trim()||!Dt.url.trim(),className:"btn-primary w-full",children:" Add Server"})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:["Configured Servers (",Gt.length,")"]}),s.jsxs("div",{className:"space-y-2",children:[Gt.map(P=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsx("input",{type:"checkbox",checked:P.enabled,onChange:()=>Nm(P.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:P.name}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.url})]}),s.jsx("button",{onClick:()=>zg(P.id),className:"text-red-500 hover:text-red-700 px-3 py-1",children:""})]},P.id)),Gt.length===0&&s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No MCP servers configured"})]})]}),s.jsx("div",{className:"mt-6 flex gap-2",children:s.jsx("button",{onClick:()=>n(!1),className:"btn-primary flex-1",children:"Done"})})]})}),s.jsx(HB,{isOpen:fe,onClose:()=>le(!1),onTransferToChat:P=>{$g();try{const se=JSON.parse(P);K(se.prompt),se.persona&&U(se.persona),se.planningQuery&&it(se.planningQuery),se.generatedSystemPrompt&&zt(se.generatedSystemPrompt),se.generatedUserQuery&&He(se.generatedUserQuery),console.log(" Transferred planning context to chat")}catch{K(P)}le(!1)}}),dt&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 pr-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:dt.result.title}),s.jsx("a",{href:dt.result.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:dt.result.url}),s.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[" ",(dt.result.content?.length/1024).toFixed(1)," KB"]}),dt.result.contentFormat&&s.jsxs("span",{children:[" ",dt.result.contentFormat]}),dt.result.images?.length>0&&s.jsxs("span",{children:[" ",dt.result.images.length," images"]}),dt.result.links?.length>0&&s.jsxs("span",{children:[" ",dt.result.links.length," links"]})]})]}),s.jsx("button",{onClick:()=>cr(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Page Content"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:dt.result.contentFormat==="markdown"?s.jsx(xu,{content:dt.result.content}):s.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300",children:dt.result.content})})]}),dt.result.images&&dt.result.images.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Images (",dt.result.images.length,")"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:dt.result.images.map((P,se)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[s.jsx("img",{src:P.src,alt:P.alt||`Image ${se+1}`,className:"w-full h-32 object-cover",loading:"lazy"}),P.alt&&s.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:P.alt})]},se))})]}),dt.result.links&&dt.result.links.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Links (",dt.result.links.length,")"]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:s.jsxs("ul",{className:"space-y-2",children:[dt.result.links.slice(0,50).map((P,se)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("a",{href:P.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:P.text||P.href}),P.context&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:P.context})]})]},se)),dt.result.links.length>50&&s.jsxs("li",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["... and ",dt.result.links.length-50," more links"]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" Full Scraped Data (JSON)"}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:s.jsx(gg,{data:{url:dt.result.url,title:dt.result.title,description:dt.result.description,snippet:dt.result.snippet,fullScrapedContent:dt.result.content,contentFormat:dt.result.contentFormat,summarizedContent:dt.result.summary||dt.result.description,links:dt.result.links||[],images:dt.result.images||[],youtubeLinks:dt.result.youtube||dt.result.videos||[],otherMedia:dt.result.media||dt.result.audio||[],metadata:{contentLength:dt.result.content?.length||0,linkCount:dt.result.links?.length||0,imageCount:dt.result.images?.length||0,youtubeCount:(dt.result.youtube||dt.result.videos||[]).length,mediaCount:(dt.result.media||dt.result.audio||[]).length}},expanded:!1})})]})]})}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:s.jsx("button",{onClick:()=>cr(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),nn&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 pr-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Raw HTML Content"}),s.jsx("a",{href:nn.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:nn.url}),s.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[" ",(nn.html.length/1024).toFixed(1)," KB uncompressed"]}),s.jsx("span",{children:" Raw HTML"})]})]}),s.jsx("button",{onClick:()=>ga(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:s.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 font-mono",children:nn.html})})}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(nn.html)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:" Copy to Clipboard"}),s.jsx("button",{onClick:()=>ga(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})}),fa!==null&&$[fa]?.llmApiCalls&&s.jsx(RI,{apiCalls:$[fa].llmApiCalls,evaluations:$[fa].evaluations,onClose:()=>Tn(null)}),Pr!==null&&$[Pr]?.errorData&&s.jsx(Dle,{errorData:$[Pr].errorData,llmApiCalls:$[Pr].llmApiCalls,onClose:()=>Rr(null)}),s.jsx(Ple,{isOpen:Hs,onClose:()=>Ua(!1),onTranscriptionComplete:mr,accessToken:o,apiEndpoint:ci}),s.jsx(Gle,{isOpen:on,onClose:()=>hn(!1),onExampleClick:pn,location:Z,locationLoading:z,requestLocation:ee,clearLocation:W}),Ot&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-2/3 z-40 bg-white dark:bg-gray-800 shadow-2xl border-t border-gray-300 dark:border-gray-600 overflow-hidden",children:s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:" Attach Context Snippets"}),s.jsx("button",{onClick:()=>gl(!1),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Close Snippet Selector",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx($le,{selectedSnippetIds:Or,onSelectionChange:yr,userEmail:l?.email})})]})}),Yn&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:"Raw HTML"}),Yn.url&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate mt-1",children:Yn.url})]}),s.jsx("button",{onClick:()=>Fa(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Yn.html)},className:"absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded",children:"Copy"}),s.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 font-mono whitespace-pre",children:Yn.html})})]})}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:s.jsx("button",{onClick:()=>Fa(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Close"})})]})})]})},Xle=({totalSize:e,limit:t,percentUsed:r})=>{const n=o=>o<1024?o+" B":o<1048576?(o/1024).toFixed(2)+" KB":(o/1048576).toFixed(2)+" MB",a=()=>r<50?"bg-green-500":r<80?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Storage Usage"}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-2",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-300 ${a()}`,style:{width:`${Math.min(r,100)}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[n(e)," used"]}),s.jsxs("span",{children:[n(t)," limit"]})]}),s.jsxs("div",{className:"mt-1 text-xs text-center text-gray-500 dark:text-gray-400",children:[r.toFixed(1),"% used"]}),r>80&&s.jsx("div",{className:"mt-3 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded text-xs text-yellow-800 dark:text-yellow-200",children:" Storage is getting full. Consider deleting old snippets."}),r>95&&s.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded text-xs text-red-800 dark:text-red-200",children:" Storage almost full! You may not be able to save new snippets."})]})};function Qle(e,t){C.useEffect(()=>{const r=n=>{!e.current||e.current.contains(n.target)||t()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[e,t])}const Ty=({existingTags:e,currentTags:t,onAddTag:r,placeholder:n="Type to add tag...",className:a=""})=>{const[o,l]=C.useState(""),[u,d]=C.useState(!1),[h,f]=C.useState(0),p=C.useRef(null),x=C.useRef(null);Qle(p,()=>d(!1));const b=Mn.useMemo(()=>{const O=o.toLowerCase().trim();return!e||!Array.isArray(e)?[]:O?e.filter(B=>B.toLowerCase().includes(O)&&!t.includes(B)).slice(0,10):e.filter(B=>!t.includes(B)).slice(0,10)},[o,e,t]),y=b.some(O=>O.toLowerCase()===o.toLowerCase().trim()),k=o.trim()&&!y,S=b.length+(k?1:0);C.useEffect(()=>{f(0)},[b.length,k]);const _=O=>{const B=O.trim();B&&!t.includes(B)&&(r(B),l(""),d(!1),f(0),x.current?.focus())},T=O=>{if(!u&&O.key!=="Enter"){d(!0);return}switch(O.key){case"ArrowDown":O.preventDefault(),f(B=>Math.min(B+1,S-1));break;case"ArrowUp":O.preventDefault(),f(B=>Math.max(B-1,0));break;case"Enter":O.preventDefault(),S===0?o.trim()&&_(o.trim()):h<b.length?_(b[h]):_(o.trim());break;case"Escape":O.preventDefault(),d(!1),f(0);break}},A=O=>{l(O.target.value),u||d(!0)},I=u&&(b.length>0||k);return s.jsxs("div",{ref:p,className:`relative ${a}`,children:[s.jsx("input",{ref:x,type:"text",value:o,onChange:A,onKeyDown:T,onFocus:()=>d(!0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",placeholder:n,autoComplete:"off"}),I&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[b.map((O,B)=>s.jsxs("div",{className:`px-4 py-2 cursor-pointer flex items-center justify-between ${B===h?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>_(O),onMouseEnter:()=>f(B),children:[s.jsx("span",{className:"font-medium",children:O}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(existing)"})]},O)),k&&s.jsxs("div",{className:`px-4 py-2 cursor-pointer border-t border-gray-200 dark:border-gray-700 ${h===b.length?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>_(o.trim()),onMouseEnter:()=>f(b.length),children:[s.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"+ Create new: "}),s.jsx("span",{className:"font-medium",children:o.trim()})]}),b.length===0&&!k&&o.trim()&&s.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:['No matching tags. Press Enter to create "',o.trim(),'"']})]})]})},Zle=({isOpen:e,title:t,message:r,confirmLabel:n="Confirm",cancelLabel:a="Cancel",onConfirm:o,onCancel:l,variant:u="warning"})=>{const d=oc(e,l);if(C.useEffect(()=>{if(!e)return;const f=p=>{p.key==="Enter"?(p.preventDefault(),o()):p.key==="Escape"&&(p.preventDefault(),l())};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,o,l]),!e)return null;const h={danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{ref:d,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",role:"dialog","aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{id:"confirm-dialog-title",className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t}),s.jsx("p",{id:"confirm-dialog-description",className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":a,children:a}),s.jsx("button",{onClick:o,className:`px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 ${h[u]}`,"aria-label":n,autoFocus:!0,children:n})]})]})})})},Jle=({isOpen:e,onClose:t,onUpload:r})=>{const[n,a]=C.useState("file"),[o,l]=C.useState(""),[u,d]=C.useState(null),[h,f]=C.useState(!1),[p,x]=C.useState(!1),[b,y]=C.useState(0),[k,S]=C.useState(null),_=C.useRef(null),{showError:T,showSuccess:A}=xo();if(!e)return null;const I=[".pdf",".docx",".txt",".md",".html",".csv",".json",".png",".jpg",".jpeg",".gif",".webp"],O=L=>{try{const q=new URL(L);return q.protocol==="http:"||q.protocol==="https:"}catch{return!1}},B=L=>L.size/4/1e6*.02,F=L=>{const q="."+L.name.split(".").pop()?.toLowerCase();if(!I.includes(q)){T(`File type ${q} not supported`);return}if(L.size>10*1024*1024){T("File size exceeds 10 MB limit");return}d(L);const D=B(L);S(D)},ae=L=>{const q=L.target.files?.[0];q&&F(q)},Z=L=>{L.preventDefault(),L.stopPropagation(),f(!0)},z=L=>{L.preventDefault(),L.stopPropagation(),f(!1)},ee=L=>{L.preventDefault(),L.stopPropagation(),f(!1);const q=L.dataTransfer.files?.[0];q&&F(q)},W=async()=>{if(n==="file"&&!u){T("Please select a file");return}if(n==="url"&&!o.trim()){T("Please enter a URL");return}if(n==="url"&&!O(o)){T("Invalid URL format");return}x(!0),y(0);try{const L=setInterval(()=>{y(q=>Math.min(q+10,90))},300);n==="file"&&u?await r(u):await r(o),clearInterval(L),y(100),A("File uploaded and processed successfully"),setTimeout(()=>{d(null),l(""),S(null),y(0),x(!1),t()},500)}catch(L){console.error("Upload error:",L),T(`Upload failed: ${L instanceof Error?L.message:"Unknown error"}`),x(!1),y(0)}},$=()=>{p||(d(null),l(""),S(null),y(0),t())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload Document"}),s.jsx("button",{onClick:$,disabled:p,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>a("file"),disabled:p,className:`flex-1 px-6 py-3 font-medium ${n==="file"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"} disabled:opacity-50`,children:" Upload File"}),s.jsx("button",{onClick:()=>a("url"),disabled:p,className:`flex-1 px-6 py-3 font-medium ${n==="url"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"} disabled:opacity-50`,children:" Paste URL"})]}),s.jsxs("div",{className:"p-6",children:[n==="file"?s.jsx("div",{children:s.jsxs("div",{onDragOver:Z,onDragLeave:z,onDrop:ee,onClick:()=>!p&&_.current?.click(),className:`
                  border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                  transition-colors duration-200
                  ${h?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}
                  ${p?"opacity-50 cursor-not-allowed":""}
                `,children:[s.jsx("input",{ref:_,type:"file",accept:I.join(","),onChange:ae,disabled:p,className:"hidden"}),s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),u?s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:u.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(u.size/1024).toFixed(2)," KB"]})]}):s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Drag and drop a file here, or click to browse"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported: PDF, DOCX, TXT, MD, HTML, CSV, JSON, Images"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Max size: 10 MB"})]})]})}):s.jsx("div",{children:s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"url-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Document URL"}),s.jsx("input",{id:"url-input",type:"url",value:o,onChange:L=>l(L.target.value),disabled:p,placeholder:"https://example.com/document.pdf",className:`
                    w-full px-4 py-2 border border-gray-300 dark:border-gray-600 
                    rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400
                    bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                    disabled:opacity-50 disabled:cursor-not-allowed
                  `}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"The document will be fetched and processed. Original URL will be preserved as the source."})]})}),k!==null&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("strong",{children:"Estimated embedding cost:"})," $",k.toFixed(4)]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"This estimate is based on file size and may vary depending on actual content."})]}),p&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.jsx("span",{children:"Uploading and processing..."}),s.jsxs("span",{children:[b,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:$,disabled:p,className:`
              px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 
              rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed
            `,children:"Cancel"}),s.jsx("button",{onClick:W,disabled:p||n==="file"&&!u||n==="url"&&!o.trim(),className:`
              px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed
              font-medium
            `,children:p?"Processing...":n==="file"?"Upload":"Fetch & Process"})]})]})})},ece=()=>{const{showSuccess:e,showError:t,showWarning:r}=xo(),{getToken:n}=$s(),{snippets:a,addSnippet:o,updateSnippet:l,deleteSnippets:u,mergeSnippets:d,toggleSelection:h,selectAll:f,selectNone:p,getSelectedSnippets:x,getAllTags:b,addTagsToSnippets:y,removeTagsFromSnippets:k,storageStats:S,getEmbeddingDetails:_,generateEmbeddings:T}=xg(),{isAvailable:A,isConnected:I,castSnippet:O,sendSnippetScrollPosition:B,isCastingSnippet:F}=bg(),{state:ae,stop:Z}=Bp(),[z,ee]=C.useState(()=>{try{const he=localStorage.getItem("swag-google-docs-cache");if(he)return JSON.parse(he)}catch(he){console.error("Failed to load Google Docs cache:",he)}return[]}),[W,$]=C.useState(null),[L,q]=C.useState(null),[D,X]=C.useState(""),[K,xe]=C.useState(""),[U,M]=C.useState([]),[Y,R]=C.useState(""),[H,ne]=C.useState(!1),[re,fe]=C.useState(!1),[le,ve]=C.useState("add"),[ce,ke]=C.useState([]),[it,pt]=C.useState(""),[zt,Sr]=C.useState(""),[He,Gt]=C.useState([]),[rr,Dt]=C.useState(!1),[Ht,Zt]=C.useState(!1),[hr,ar]=C.useState("text"),[Ut,dn]=C.useState([]),[Ne,Ke]=C.useState(!1),[St,Tt]=C.useState(!1),[sr,on]=C.useState(!1),[hn,Gr]=C.useState(null),[Tr,pr]=C.useState(!1),[Yt,gn]=C.useState(null),[fn,rs]=C.useState(!1),[aa,Gn]=C.useState(0),[sa,Qr]=C.useState(!1),[oe,Re]=C.useState({});C.useEffect(()=>{const he=()=>{const Ae=localStorage.getItem("rag_config");if(Ae)try{Re(JSON.parse(Ae))}catch(Ge){console.error("Failed to parse RAG config:",Ge)}};he();const Be=Ae=>{Ae.key==="rag_config"&&he()};window.addEventListener("storage",Be);const st=()=>{he()};return window.addEventListener("rag_config_updated",st),()=>{window.removeEventListener("storage",Be),window.removeEventListener("rag_config_updated",st)}},[]);const[qe,bt]=C.useState(null),[Cr,br]=C.useState(null),[ut,lt]=C.useState({}),[At,dt]=C.useState(!1),cr=C.useRef(null);C.useEffect(()=>{AN().catch(console.error),z.length===0&&!Ht&&nn()},[]),C.useEffect(()=>{L&&I&&!F&&(console.log("Auto-casting snippet to Chromecast:",L.title),O({id:L.id,content:L.content,title:L.title,tags:L.tags,created:new Date(L.timestamp),modified:L.updateDate?new Date(L.updateDate):new Date(L.timestamp)}))},[L,I,F,O]);const nn=async(he=!1)=>{if(!(Ht&&!he))try{Dt(!0);const Be=await bP();ee(Be),Zt(!0);try{localStorage.setItem("swag-google-docs-cache",JSON.stringify(Be))}catch(st){console.error("Failed to cache Google Docs:",st)}}catch(Be){console.error("Failed to load Google Docs:",Be),t("Failed to load Google Docs. Please try again.")}finally{Dt(!1)}},ga=async()=>{if(!Y.trim()){r("Please enter a document name");return}try{Dt(!0);const he=await EP(Y),Be=[he,...z];ee(Be);try{localStorage.setItem("swag-google-docs-cache",JSON.stringify(Be))}catch(st){console.error("Failed to update Google Docs cache:",st)}R(""),ne(!1),e(`Document "${he.name}" created successfully in Research Agent folder!`)}catch(he){console.error("Failed to create document:",he),t("Failed to create document. Please grant permissions and try again.")}finally{Dt(!1)}},fa=async he=>{const Be=x();if(Be.length===0){r("No snippets selected");return}try{Dt(!0);const st=Be.map(Ae=>{let Ge="";if(Ae.title&&(Ge+=`# ${Ae.title}

`),ov(Ae.content)){const gt=OI(Ae.content);gt!==null?Ge+=JSON.stringify(gt,null,2):Ge+=Ae.content}else Ge+=Ae.content;return Ge+=`

---
Source: ${Ae.sourceType} | ${new Date(Ae.timestamp).toLocaleString()}`,Ge}).join(`

`);await yP(he,st),p(),e(`${Be.length} snippet(s) appended to document successfully!`)}catch(st){console.error("Failed to append to document:",st),t("Failed to append to document. Please try again.")}finally{Dt(!1)}},Tn=async he=>{console.log(" handleBulkOperation called with:",he);const Be=x();if(he.startsWith("append-")){const st=he.substring(7);await fa(st);return}switch(he){case"new-doc":ne(!0);break;case"append":z.length===0&&await nn(!0);break;case"merge":if(Be.length===0){r("No snippets selected");return}if(Be.length<2){r("Select at least 2 snippets to combine");return}d(Be.map(st=>st.id)),p(),e(`${Be.length} snippets combined`);break;case"delete":if(Be.length===0){r("No snippets selected");return}confirm(`Delete ${Be.length} snippet(s)?`)&&(u(Be.map(st=>st.id)),e(`${Be.length} snippet(s) deleted`));break;case"generate-embeddings":console.log(" Generate embeddings case triggered"),await Pr();break;case"force-embeddings":console.log(" Force re-embed case triggered"),await Pr(!0);break;case"tag":if(Be.length===0){r("No snippets selected");return}ve("add"),ke([]),fe(!0);break;case"untag":if(Be.length===0){r("No snippets selected");return}ve("remove"),ke([]),fe(!0);break;case"tag-all":f(),setTimeout(()=>{ve("add"),ke([]),fe(!0)},100);break;case"untag-all":f(),setTimeout(()=>{ve("remove"),ke([]),fe(!0)},100);break;default:console.warn(" Unknown operation:",he)}},Pr=async(he=!1)=>{const Be=x();if(Be.length===0){r("No snippets selected");return}try{on(!0),Gr({current:0,total:Be.length});const st=await T(Be.map(Ge=>Ge.id),(Ge,gt)=>{Gr({current:Ge,total:gt})},he);p();const Ae={};for(const Ge of Be){const gt=await _(Ge.id);Ae[Ge.id]=gt.hasEmbedding}lt(Ge=>({...Ge,...Ae})),st.embedded>0||st.skipped>0?e(` Added to index: ${st.embedded}   Skipped: ${st.skipped}${st.failed>0?`   Failed: ${st.failed}`:""}`):r("No items were added to search index")}catch(st){console.error("Embedding error:",st),t(st instanceof Error?st.message:"Failed to add to search index")}finally{on(!1),Gr(null)}},Rr=async(he,Be)=>{try{Dt(!0);const st=he.length+Be.length;let Ae=0;gn({current:0,total:st,status:"Starting..."});const Ge=50*1024*1024,gt=10*1024*1024,Ct="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws",Br=he.filter(Xt=>Xt.size>Ge);if(Br.length>0){const Xt=Br.map(ir=>`${ir.name} (${(ir.size/1024/1024).toFixed(1)}MB)`).join(", ");t(`Files too large (max 50MB): ${Xt}`),Dt(!1),gn(null);return}const ln=he.filter(Xt=>Xt.size>gt&&Xt.size<=Ge);if(ln.length>0){const Xt=ln.map(ir=>`${ir.name} (${(ir.size/1024/1024).toFixed(1)}MB)`).join(", ");r(`Large files detected - processing may be slow: ${Xt}`)}for(const Xt of he){gn({current:Ae,total:st,status:`Converting ${Xt.name}...`});try{let ir;const Jt=Xt.name.split(".").pop()?.toLowerCase();if(["pdf","docx","doc","png","jpg","jpeg","gif","webp","html","htm"].includes(Jt||"")){const Cn=new FormData;Cn.append("file",Xt);const pa=await fetch(`${Ct}/convert-to-markdown`,{method:"POST",body:Cn});if(!pa.ok){const bs=await pa.text();throw console.error(`Conversion failed for ${Xt.name}:`,bs),new Error(`Server error (${pa.status}): ${bs.substring(0,100)}`)}let Qt=await pa.json();if(console.log(` Received response for ${Xt.name}:`,{hasBody:!!Qt.body,bodyType:typeof Qt.body,hasMarkdown:!!Qt.markdown,hasContent:!!Qt.content,resultKeys:Object.keys(Qt),bodyPreview:typeof Qt.body=="string"?Qt.body.substring(0,200):Qt.body}),Qt.body&&typeof Qt.body=="string")try{console.log(` Parsing nested body JSON for ${Xt.name}...`),Qt=JSON.parse(Qt.body),console.log(" Parsed body, keys:",Object.keys(Qt)),console.log(" Parsed body content:",{hasMarkdown:!!Qt.markdown,hasContent:!!Qt.content,markdownType:typeof Qt.markdown,contentType:typeof Qt.content,markdownValue:Qt.markdown,contentValue:Qt.content})}catch(bs){console.error("Failed to parse response body:",bs)}if(console.log(` Final result for ${Xt.name}:`,{hasMarkdown:!!Qt.markdown,hasContent:!!Qt.content,markdownLength:Qt.markdown?.length||0,contentLength:Qt.content?.length||0,markdownPreview:Qt.markdown?Qt.markdown.substring(0,100):"(none)",contentPreview:Qt.content?Qt.content.substring(0,100):"(none)"}),!Qt.markdown&&!Qt.content)throw console.error(" No markdown or content in result:",JSON.stringify(Qt,null,2)),new Error("No content returned from conversion - PDF may be empty or image-based");if(ir=Qt.markdown||Qt.content,!ir||ir.trim().length===0)throw console.error(" Markdown content is empty:",{markdownContent:ir,type:typeof ir,length:ir?.length}),new Error("Converted content is empty - PDF may contain only images")}else ir=await Xt.text();await o(ir,"user",Xt.name)}catch(ir){console.error(`Failed to process ${Xt.name}:`,ir);const Jt=ir instanceof Error?ir.message:"Unknown error";r(`Could not process ${Xt.name}: ${Jt}`)}Ae++}for(const Xt of Be){gn({current:Ae,total:st,status:`Fetching ${Xt}...`});try{const ir=await fetch(`${Ct}/convert-to-markdown`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:Xt})});if(!ir.ok)throw new Error(`Failed to fetch ${Xt}`);let Jt=await ir.json();if(Jt.body&&typeof Jt.body=="string")try{Jt=JSON.parse(Jt.body)}catch(pa){console.error("Failed to parse response body:",pa)}const Cn=Jt.markdown||Jt.content;if(!Cn||Cn.trim().length===0)throw new Error("No content extracted from URL");await o(Cn,"user",Xt)}catch(ir){console.error(`Failed to fetch ${Xt}:`,ir),r(`Could not fetch ${Xt}`)}Ae++}gn({current:st,total:st,status:"Complete!"}),e(`Successfully added ${he.length} file(s) and ${Be.length} URL(s) as snippets`),pr(!1)}catch(st){console.error("Upload error:",st),t(st instanceof Error?st.message:"Upload failed")}finally{Dt(!1),gn(null)}},Yn=async he=>{typeof he=="string"?await Rr([],[he]):await Rr([he],[])},Fa=he=>{he.preventDefault(),he.stopPropagation(),Gn(Be=>Be+1),he.dataTransfer.items&&he.dataTransfer.items.length>0&&rs(!0)},Hs=he=>{he.preventDefault(),he.stopPropagation(),Gn(Be=>{const st=Be-1;return st===0&&rs(!1),st})},Ua=he=>{he.preventDefault(),he.stopPropagation()},ci=async he=>{he.preventDefault(),he.stopPropagation(),rs(!1),Gn(0);const Be=Array.from(he.dataTransfer.files);Be.length>0&&(console.log(` Dropped ${Be.length} file(s)`),await Rr(Be,[]))},ft=()=>{if(le==="filter"){Gt(ce),fe(!1),ke([]);return}const he=x();if(he.length===0||ce.length===0){r("Please select tags");return}le==="add"?(y(he.map(Be=>Be.id),ce),e(`Added ${ce.length} tag(s) to ${he.length} snippet(s)`)):(k(he.map(Be=>Be.id),ce),e(`Removed ${ce.length} tag(s) from ${he.length} snippet(s)`)),fe(!1),ke([])},de=he=>{$(he),X(he.content),xe(he.title||""),M(he.tags||[])},$e=async()=>{const he=await o("","user","New Snippet");he&&de(he)},ot=async()=>{W&&(await l(W.id,{content:D,title:K.trim()||void 0,tags:U.length>0?U:void 0}),He.length>0&&(He.every(Be=>U.includes(Be))||r("This snippet is now hidden by current filters.")),$(null))},fr=async()=>{if(!(!zt.trim()||hr!=="vector")){Ke(!0);try{let he;const Be=await Ma.getCachedQueryEmbedding(zt.trim());if(Be)console.log(" Using cached query embedding"),he=Be.embedding;else{console.log(" Fetching new query embedding from backend");const Ct=await es(),Br=await n();console.log(" Using API URL for embed-query:",Ct);const ln=await fetch(`${Ct}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...Br?{Authorization:`Bearer ${Br}`}:{}},body:JSON.stringify({query:zt})});if(!ln.ok)throw new Error(`Backend error: ${ln.status}`);he=(await ln.json()).embedding;const Jt=JSON.parse(localStorage.getItem("rag_config")||"{}").embeddingModel||"text-embedding-3-small";await Ma.cacheQueryEmbedding(zt.trim(),he,Jt),console.log(" Cached query embedding for future use")}const Ae=JSON.parse(localStorage.getItem("rag_config")||"{}").similarityThreshold??.3;console.log(` Vector search with threshold: ${Ae}, query: "${zt}"`);const Ge=await Ma.getAllChunks();if(console.log(` Total chunks in IndexedDB: ${Ge.length}`),Ge.length===0){r('No embeddings found in database. Generate embeddings first using "Add to Search Index".'),dn([]),Tt(!0);return}const gt=await Ma.vectorSearch(he,10,Ae);console.log(" Vector search results:",{resultsCount:gt.length,threshold:Ae,scores:gt.map(Ct=>Ct.score.toFixed(3)),snippetIds:gt.map(Ct=>Ct.snippet_id)}),dn(gt),Tt(!0),gt.length===0?r(`No similar content found with threshold ${Ae}. Try lowering the threshold in RAG settings or generate more embeddings.`):e(`Found ${gt.length} similar chunks (scores: ${gt[0].score.toFixed(3)}-${gt[gt.length-1].score.toFixed(3)})`)}catch(he){console.error("Vector search error:",he),t("Failed to perform vector search. Make sure embeddings are generated.")}finally{Ke(!1)}}},Hr=he=>{switch(he){case"user":return"bg-blue-500";case"assistant":return"bg-green-500";case"tool":return"bg-purple-500";default:return"bg-gray-500"}},Vt=(()=>{if(hr==="vector"){if(console.log(" Vector search mode active",{hasRunVectorSearch:St,vectorSearchResultsCount:Ut.length,snippetsCount:a.length}),!St)return console.log(" No vector search run yet, showing empty"),[];if(Ut.length===0)return console.log(" Vector search returned no results"),[];const he=new Map;console.log(" Processing vector search results:",Ut.map(st=>({snippet_id:st.snippet_id,score:st.score,chunk_id:st.chunk_id})));for(const st of Ut){const Ae=a.find(gt=>gt.id===st.snippet_id);if(!Ae){console.warn(" Snippet not found for ID:",st.snippet_id,"Available IDs:",a.map(gt=>gt.id).slice(0,5));continue}if(He.length>0&&(!Ae.tags||Ae.tags.length===0||!He.every(Ct=>Ae.tags?.includes(Ct))))continue;const Ge=he.get(st.snippet_id);(!Ge||st.score>Ge.score)&&he.set(st.snippet_id,{snippet:Ae,score:st.score})}const Be=Array.from(he.values()).map(({snippet:st,score:Ae})=>({...st,_searchScore:Ae})).sort((st,Ae)=>Ae._searchScore-st._searchScore);return console.log(" Returning vector search results:",Be.length,"snippets"),Be}return a.filter(he=>{if(it.trim()){const Be=it.toLowerCase(),st=he.content.toLowerCase().includes(Be),Ae=he.title?.toLowerCase().includes(Be);if(!st&&!Ae)return!1}return!(He.length>0&&(!he.tags||he.tags.length===0||!He.every(st=>he.tags?.includes(st))))})})();return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900 relative",onDragEnter:Fa,onDragLeave:Hs,onDragOver:Ua,onDrop:ci,children:[fn&&s.jsx("div",{className:"absolute inset-0 bg-blue-500/20 backdrop-blur-sm z-40 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 border-4 border-dashed border-blue-500 dark:border-blue-400",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx("svg",{className:"w-16 h-16 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Drop Documents Here"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Upload files to add them as snippets"})]})]})})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Content Swag"}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.length," snippet",a.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:$e,className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors flex items-center gap-2",title:"Create a new blank snippet",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Snippet"]}),s.jsxs("button",{onClick:()=>pr(!0),className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center gap-2",title:"Upload documents as snippets (auto-embeds if enabled)",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Documents"]}),S&&s.jsx("div",{className:"w-48",children:s.jsx(Xle,{totalSize:S.totalSize,limit:S.limit,percentUsed:S.percentUsed})})]})]}),a.length>0&&s.jsxs("div",{children:[He.length>0&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Filtering:"}),He.map(he=>s.jsxs("button",{onClick:()=>Gt(He.filter(Be=>Be!==he)),className:"px-2 py-0.5 text-xs rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-1",children:[he,s.jsx("span",{children:""})]},he)),s.jsx("button",{onClick:()=>Gt([]),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear"})]}),s.jsxs("div",{className:"flex gap-2 items-start max-w-2xl",children:[s.jsxs("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-700 rounded p-1 flex-shrink-0",children:[s.jsx("button",{onClick:()=>{ar("text")},className:`px-3 py-1.5 text-sm rounded transition-colors ${hr==="text"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Text"}),s.jsx("button",{onClick:()=>{ar("vector")},className:`px-3 py-1.5 text-sm rounded transition-colors ${hr==="vector"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,title:"Semantic search using embeddings",children:" Vector"})]}),s.jsxs("div",{className:"flex gap-2 items-center flex-1",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"text",value:hr==="text"?it:zt,onChange:he=>{hr==="text"?pt(he.target.value):Sr(he.target.value)},onKeyDown:he=>{he.key==="Enter"&&hr==="vector"&&fr()},placeholder:hr==="vector"?"Semantic search...":"Search snippets...",className:"w-full px-3 py-1.5 pl-8 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.jsx("svg",{className:"w-4 h-4 absolute left-2.5 top-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(hr==="text"?it:zt)&&s.jsx("button",{onClick:()=>{hr==="text"?pt(""):(Sr(""),dn([]),Tt(!1))},className:"absolute right-2.5 top-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),hr==="vector"&&s.jsx("button",{onClick:fr,disabled:Ne||!zt.trim(),className:"px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium transition-colors flex-shrink-0",children:Ne?"Searching...":"Search"}),b().length>0&&s.jsx("button",{onClick:()=>{fe(!0),ve("filter"),ke([...He])},className:"w-8 h-8 flex items-center justify-center rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors flex-shrink-0",title:"Filter by tags",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})})]})]})]}),a.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:f,className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"Select All"}),s.jsx("button",{onClick:p,className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"Select None"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:[x().length," selected"]}),s.jsxs("select",{className:"px-3 py-1.5 text-sm min-w-[200px] border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",onChange:he=>{const Be=he.target.value;console.log(" Dropdown changed:",Be),Be&&(Tn(Be),he.target.value="")},value:"",disabled:x().length===0||sr,children:[s.jsx("option",{value:"",children:"Bulk Operations..."}),s.jsxs("optgroup",{label:"With Selected Snippets",children:[s.jsx("option",{value:"generate-embeddings",children:" Add To Search Index"}),s.jsx("option",{value:"force-embeddings",children:" Force Re-embed"}),s.jsx("option",{value:"tag",children:"Add Tags..."}),s.jsx("option",{value:"untag",children:"Remove Tags..."}),s.jsx("option",{value:"tag-all",children:"Tag All Snippets..."}),s.jsx("option",{value:"untag-all",children:"Untag All Snippets..."}),s.jsx("option",{value:"merge",children:"Combine Snippets"}),s.jsx("option",{value:"delete",children:"Delete Selected"})]}),s.jsxs("optgroup",{label:"Add to Google Doc",children:[z.length===0?s.jsx("option",{value:"append",children:"Load Existing..."}):z.map(he=>s.jsx("option",{value:`append-${he.id}`,children:he.name},he.id)),s.jsx("option",{value:"new-doc",children:" New Google Doc"})]})]})]})]}),hn&&s.jsxs("div",{className:"mx-6 mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:" Adding to Search Index..."}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[hn.current," / ",hn.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${hn.current/hn.total*100}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"This may take a moment. Embeddings enable semantic search over your snippets."})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 min-h-0",children:a.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),s.jsx("p",{className:"text-lg",children:"No content snippets yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Use the grab button in chat to save content here"})]}):Vt.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("p",{className:"text-lg",children:"No matching snippets"}),s.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or tag filters"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Vt].sort((he,Be)=>(Be.updateDate||Be.timestamp)-(he.updateDate||he.timestamp)).map(he=>s.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 transition-all ${he.selected?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700"}`,children:[s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("input",{type:"checkbox",checked:he.selected||!1,onChange:()=>h(he.id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})}),A&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("button",{onClick:()=>{O({id:he.id,content:he.content,title:he.title,tags:he.tags,created:new Date(he.timestamp),modified:he.updateDate?new Date(he.updateDate):new Date(he.timestamp)}),e(`Casting snippet to ${I?"TV":"Chromecast"}`)},className:"p-2 text-sm bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors shadow-md",title:"Cast to TV",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})}),s.jsxs("div",{className:"p-4 pt-10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white ${Hr(he.sourceType)}`,children:he.sourceType}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(he.timestamp).toLocaleString()}),"_searchScore"in he&&s.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 font-medium",children:[" ",he._searchScore.toFixed(3)]})]}),he.title&&s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:he.title}),s.jsx("div",{className:"mb-2",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[(he.tags||[]).map((Be,st)=>s.jsxs("span",{className:"group px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-1",children:[s.jsx("span",{className:"cursor-pointer hover:underline",onClick:Ae=>{Ae.stopPropagation(),He.includes(Be)||Gt([...He,Be])},title:"Filter by this tag",children:Be}),s.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),bt(Be),br(he.id),Qr(!0)},className:"opacity-60 hover:opacity-100 hover:text-red-600 dark:hover:text-red-400 transition-opacity",title:"Remove tag",children:""})]},st)),s.jsx("div",{className:"inline-block",onClick:Be=>Be.stopPropagation(),children:s.jsx(Ty,{existingTags:b(),currentTags:he.tags||[],onAddTag:async Be=>{await l(he.id,{tags:[...he.tags||[],Be]}),e(`Added tag "${Be}"`)},placeholder:"+ tag",className:"text-xs w-20"})})]})}),s.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 max-h-48 overflow-hidden cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded p-2 -m-2 transition-colors",onClick:()=>q(he),children:s.jsx("div",{className:"line-clamp-6",children:s.jsx(xu,{content:he.content})})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:async()=>{dt(!0);try{const Be=await _(he.id);if(lt(st=>({...st,[he.id]:Be.hasEmbedding})),Be.hasEmbedding){const st=` Embeddings found: ${Be.chunkCount} chunk${Be.chunkCount!==1?"s":""}`;e(st)}else r('No embeddings found. Use "Add to Search Index" to create them.')}catch(Be){console.error("Failed to check embedding status:",Be),t("Failed to check embedding status")}finally{dt(!1)}},className:`p-2 text-sm rounded transition-colors ${ut[he.id]===!0?"bg-green-600 text-white hover:bg-green-700":ut[he.id]===!1?"bg-gray-400 text-white hover:bg-gray-500":"bg-blue-500 text-white hover:bg-blue-600"}`,title:ut[he.id]===!0?"Has embeddings (click for details)":ut[he.id]===!1?"No embeddings (click to check)":"Check embedding status",disabled:At,children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"})})}),s.jsx("button",{onClick:()=>de(he),className:"flex-1 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Edit"})]})]})]},he.id))})}),W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Snippet"}),s.jsx("button",{onClick:()=>$(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),s.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (optional)"}),s.jsx("input",{type:"text",value:K,onChange:he=>xe(he.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg",placeholder:"Enter a title..."})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:U.map(he=>s.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-2 group",children:[he,s.jsx("button",{onClick:()=>{bt(he),Qr(!0)},className:"hover:text-red-600 dark:hover:text-red-400 opacity-60 group-hover:opacity-100 transition-opacity",title:"Remove tag",children:""})]},he))}),s.jsx(Ty,{existingTags:b(),currentTags:U,onAddTag:he=>{U.includes(he)||M([...U,he])},placeholder:"Type to add tag..."})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),s.jsx("textarea",{value:D,onChange:he=>X(he.target.value),className:"w-full h-[calc(100vh-28rem)] min-h-[400px] px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm resize-none",placeholder:"Enter content..."})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>$(null),className:"px-6 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:ot,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}),s.jsx(Zle,{isOpen:sa,title:"Remove Tag?",message:`Remove tag "${qe}"?`,confirmLabel:"Remove Tag",cancelLabel:"Cancel",variant:"danger",onConfirm:async()=>{if(qe){if(Cr){const he=a.find(Be=>Be.id===Cr);he&&(await l(Cr,{tags:(he.tags||[]).filter(Be=>Be!==qe)}),e(`Removed tag "${qe}"`)),br(null)}else M(U.filter(he=>he!==qe));Qr(!1),bt(null)}},onCancel:()=>{Qr(!1),bt(null),br(null)}}),H&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create New Google Doc"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Document Name"}),s.jsx("input",{type:"text",value:Y,onChange:he=>R(he.target.value),onKeyPress:he=>he.key==="Enter"&&ga(),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"My Swag Document",autoFocus:!0})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{ne(!1),R("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",disabled:rr,children:"Cancel"}),s.jsx("button",{onClick:ga,disabled:rr||!Y.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:rr?"Creating...":"Create"})]})]})}),L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[L.title&&s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:L.title}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white ${Hr(L.sourceType)}`,children:L.sourceType}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(L.timestamp).toLocaleString()}),ae.isPlaying&&s.jsxs("button",{onClick:Z,className:"px-3 py-1.5 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",title:"Stop reading aloud",children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Reading"]})]})]}),s.jsx("button",{onClick:()=>q(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),s.jsx("div",{ref:cr,className:"flex-1 overflow-y-auto p-6",onScroll:he=>{if(F&&I){const Be=he.currentTarget,st=Be.scrollTop/(Be.scrollHeight-Be.clientHeight)*100;B(st)}},children:s.jsx("div",{className:"text-gray-800 dark:text-gray-200",children:(()=>{const he=L.content;return ov(he)?s.jsx(Fle,{content:he}):s.jsx(xu,{content:he})})()})}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[I&&F&&s.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})}),"Casting to TV"]}),s.jsxs("div",{className:"flex gap-3 ml-auto",children:[A&&s.jsx("button",{onClick:()=>{O({id:L.id,content:L.content,title:L.title,tags:L.tags,created:new Date(L.timestamp),modified:L.updateDate?new Date(L.updateDate):new Date(L.timestamp)}),e(`Casting snippet to ${I?"TV":"Chromecast"}`)},className:"p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",title:"Cast to TV",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})}),s.jsx(II,{text:L.content,variant:"button",className:"px-4 py-2"}),s.jsx("button",{onClick:()=>{q(null),de(L)},className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Edit"}),s.jsx("button",{onClick:()=>q(null),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})]})}),re&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:le==="add"?"Add Tags":le==="remove"?"Remove Tags":"Filter by Tags"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:le==="add"?"Select or create tags to add to selected snippets":le==="remove"?"Select tags to remove from selected snippets":"Select tags to filter snippets"})]}),s.jsxs("div",{className:"p-6",children:[ce.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:ce.map(he=>s.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-2",children:[he,s.jsx("button",{onClick:()=>ke(ce.filter(Be=>Be!==he)),className:"hover:text-red-600 dark:hover:text-red-400",children:""})]},he))}),le==="add"&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Tag"}),s.jsx(Ty,{existingTags:b(),currentTags:ce,onAddTag:he=>{ce.includes(he)||ke([...ce,he])},placeholder:"Type to search or create tags...",className:"w-full"})]}),b().length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:le==="add"?"Or Select Existing":le==="remove"?"Select Tags to Remove":"Select Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto",children:b().map(he=>s.jsx("button",{onClick:()=>{ce.includes(he)?ke(ce.filter(Be=>Be!==he)):ke([...ce,he])},className:`px-3 py-1 text-sm rounded-full transition-colors ${ce.includes(he)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:he},he))})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{fe(!1),ke([])},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),s.jsx("button",{onClick:ft,disabled:le!=="filter"&&ce.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:le==="add"?"Add Tags":le==="remove"?"Remove Tags":"Apply Filter"})]})]})}),rr&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"Processing..."})]})}),Yt&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl min-w-[300px]",children:s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx("span",{children:Yt.status}),s.jsxs("span",{children:[Yt.current," / ",Yt.total]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Yt.current/Yt.total*100}%`}})})]})})}),Tr&&s.jsx(Jle,{isOpen:Tr,onClose:()=>pr(!1),onUpload:Yn})]})},tce=({isOpen:e,onClose:t,onConfirm:r,providers:n})=>{const[a,o]=C.useState("all"),[l,u]=C.useState(""),[d,h]=C.useState(""),[f,p]=C.useState(""),[x,b]=C.useState(!1);if(!e)return null;const y=()=>{const S={};a==="provider"?S.provider=l:a==="dateRange"&&(d&&(S.startDate=d),f&&(S.endDate=f)),r(a,S),b(!1),t()},k=()=>!(!x||a==="provider"&&!l||a==="dateRange"&&!d&&!f);return s.jsx("div",{className:"modal-overlay",onClick:t,children:s.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h2",{children:"Clear Billing Data"}),s.jsx("button",{className:"modal-close",onClick:t,children:""})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"warning-banner",children:[" ",s.jsx("strong",{children:"Warning:"})," This action cannot be undone. Your billing data will be permanently deleted."]}),s.jsxs("div",{className:"clear-mode-tabs",children:[s.jsx("button",{className:a==="all"?"active":"",onClick:()=>o("all"),children:"Clear All"}),s.jsx("button",{className:a==="provider"?"active":"",onClick:()=>o("provider"),children:"Clear by Provider"}),s.jsx("button",{className:a==="dateRange"?"active":"",onClick:()=>o("dateRange"),children:"Clear by Date Range"})]}),s.jsxs("div",{className:"clear-mode-content",children:[a==="all"&&s.jsxs("div",{className:"clear-mode-description",children:[s.jsxs("p",{children:["This will delete ",s.jsx("strong",{children:"all"})," transactions from your billing sheet."]}),s.jsx("p",{children:"Consider exporting to CSV first for your records."})]}),a==="provider"&&s.jsxs("div",{className:"clear-mode-options",children:[s.jsxs("label",{children:["Select Provider:",s.jsxs("select",{value:l,onChange:S=>u(S.target.value),children:[s.jsx("option",{value:"",children:"-- Select Provider --"}),n.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),s.jsx("p",{className:"hint",children:"Useful for aligning with provider billing cycles (e.g., clear monthly)."})]}),a==="dateRange"&&s.jsxs("div",{className:"clear-mode-options",children:[s.jsxs("label",{children:["Start Date:",s.jsx("input",{type:"date",value:d,onChange:S=>h(S.target.value)})]}),s.jsxs("label",{children:["End Date:",s.jsx("input",{type:"date",value:f,onChange:S=>p(S.target.value)})]}),s.jsx("p",{className:"hint",children:"Leave blank to clear from beginning/to end. Both can be used together."})]}),s.jsx("div",{className:"confirmation-checkbox",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",checked:x,onChange:S=>b(S.target.checked)}),s.jsx("span",{children:"I understand this action cannot be undone"})]})})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:t,children:"Cancel"}),s.jsx("button",{className:"btn-danger",onClick:y,disabled:!k(),children:"Clear Data"})]})]})})},rce=()=>{const{accessToken:e,isAuthenticated:t}=$s(),{refreshUsage:r}=Pp(),[n,a]=C.useState(null),[o,l]=C.useState(!0),[u,d]=C.useState(null),[h,f]=C.useState(""),[p,x]=C.useState(""),[b,y]=C.useState(""),[k,S]=C.useState(""),[_,T]=C.useState(!1),[A,I]=C.useState("overview"),[O,B]=C.useState(!0),[F,ae]=C.useState(new Set),[Z,z]=C.useState(0),ee=async()=>{l(!0),d(null);try{if(console.log(" [BillingPage] fetchBillingData called"),console.log(" [BillingPage] accessToken present:",!!e),console.log(" [BillingPage] isAuthenticated:",t),!e||!t){const ce="Not authenticated. Please sign in.";throw console.error(" [BillingPage] Authentication check failed:",ce),new Error(ce)}const H=await L(),ne=`${H}/billing`;console.log(" [BillingPage] API Base:",H),console.log(" [BillingPage] Request URL:",ne);const re={Authorization:`Bearer ${e}`,"Content-Type":"application/json"};console.log(" [BillingPage] Sending request to:",ne),console.log(" [BillingPage] Request headers:",Object.keys(re));const fe=await fetch(ne,{method:"GET",headers:re});if(console.log(" [BillingPage] Response received:",{status:fe.status,statusText:fe.statusText,ok:fe.ok,headers:Object.fromEntries(fe.headers.entries())}),!fe.ok){let ce;try{ce=await fe.json()}catch(ke){throw console.error(" [BillingPage] Failed to parse error response:",ke),new Error(`HTTP ${fe.status}: ${fe.statusText}`)}throw console.error(" [BillingPage] Backend returned error:",ce),new Error(ce.message||ce.error||`HTTP ${fe.status}`)}const le=await fe.json();if(console.log(" Billing data received:",{source:le.source,transactionCount:le.transactions?.length,hasByType:!!le.totals?.byType,hasByProvider:!!le.totals?.byProvider,hasByModel:!!le.totals?.byModel,byTypeKeys:le.totals?.byType?Object.keys(le.totals.byType):[],byProviderKeys:le.totals?.byProvider?Object.keys(le.totals.byProvider):[],byModelKeys:le.totals?.byModel?Object.keys(le.totals.byModel):[]}),le.transactions&&le.transactions.length>0){const ce=[...new Set(le.transactions.map(ke=>ke.type))];console.log(" Unique transaction types in data:",ce),console.log(" Sample transactions:",le.transactions.slice(0,3))}le.source==="service"&&le.message&&(console.log(" Billing data source: Service key sheet"),console.log(" Message:",le.message)),a(le),console.log(" [BillingPage] Billing data loaded successfully");let ve=0;if(le.transactions)for(const ce of le.transactions)ce.type==="credit_added"?(ve+=Math.abs(ce.cost),console.log(` Found credit: +$${Math.abs(ce.cost).toFixed(2)}, new balance: $${ve.toFixed(2)}`)):ve-=ce.cost;z(ve),console.log(` Final credit balance: $${ve.toFixed(4)}`),r()}catch(H){console.error(" [BillingPage] Error fetching billing data:",{message:H.message,stack:H.stack,name:H.name,error:H});const ne=H.message||"Failed to load billing data";d(ne),H.message?.includes("Not authenticated")?d(" Not authenticated. Please sign in with Google to view billing data."):H.message?.includes("NetworkError")||H.message?.includes("Failed to fetch")?d(" Network error. Please check your connection and ensure the backend server is running."):d(` Failed to load billing data: ${ne}`)}finally{l(!1),console.log(" [BillingPage] fetchBillingData completed, loading:",!1)}},W=async(H,ne)=>{try{if(!e||!t)throw new Error("Not authenticated");const re=localStorage.getItem("google_drive_access_token");if(!re)throw new Error("Google Drive access not granted. Please enable cloud sync in Swag page first.");const fe=new URLSearchParams({mode:H});H==="provider"&&ne.provider&&fe.append("provider",ne.provider),H==="dateRange"&&(ne.startDate&&fe.append("startDate",ne.startDate),ne.endDate&&fe.append("endDate",ne.endDate));const le=await L(),ve=await fetch(`${le}/billing/clear?${fe.toString()}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"X-Google-Access-Token":re,"Content-Type":"application/json"}});if(!ve.ok){const ke=await ve.json();throw new Error(ke.message||"Failed to clear data")}const ce=await ve.json();alert(` Success: Cleared ${ce.deletedCount} transactions. ${ce.remainingCount} remaining.`),ee()}catch(re){console.error("Error clearing data:",re),alert(` Error: ${re.message}`)}},$=()=>{if(!n||q.length===0){alert("No data to export");return}const H=["Timestamp","Type","Provider","Model","Tokens In","Tokens Out","Total Tokens","Cost ($)","Duration (ms)","Memory Limit (MB)","Memory Used (MB)","Request ID","Status","Error"],ne=q.map(ce=>[ce.timestamp,ce.type,ce.provider,ce.model,ce.tokensIn,ce.tokensOut,ce.totalTokens,ce.cost.toFixed(6),ce.durationMs,ce.memoryLimitMB||"",ce.memoryUsedMB||"",ce.requestId||"",ce.status,ce.error||""]),re=[H.join(","),...ne.map(ce=>ce.map(ke=>`"${ke}"`).join(","))].join(`
`),fe=new Blob([re],{type:"text/csv"}),le=URL.createObjectURL(fe),ve=document.createElement("a");ve.href=le,ve.download=`billing-${new Date().toISOString().split("T")[0]}.csv`,ve.click(),URL.revokeObjectURL(le)},L=async()=>{const H=window.location.hostname;if(H==="localhost"||H==="127.0.0.1"){const ne="http://localhost:3000";try{if((await fetch(`${ne}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return ne}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"};if(C.useEffect(()=>{t&&e&&ee()},[t,e]),o)return s.jsx("div",{className:"billing-page",children:s.jsx("div",{className:"loading",children:"Loading billing data..."})});if(u){const H=u.includes("Cloud sync not enabled")||u.includes("Google Drive access");return s.jsx("div",{className:"billing-page",children:s.jsxs("div",{className:"error-message",children:[s.jsxs("h3",{children:[" ",H?"Cloud Sync Required":"Error Loading Billing Data"]}),s.jsx("p",{children:u}),H&&s.jsxs("div",{className:"info-box",style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",textAlign:"left"},children:[s.jsx("h4",{style:{marginTop:0,color:"#1976d2"},children:" How to Enable Cloud Sync:"}),s.jsxs("ol",{style:{marginLeft:"20px",color:"#424242"},children:[s.jsxs("li",{children:["Go to the ",s.jsx("strong",{children:"Swag"})," page (button in top navigation)"]}),s.jsx("li",{children:'Look for the " Enable Cloud Sync" button'}),s.jsx("li",{children:"Click it and authorize Google Drive & Sheets access"}),s.jsx("li",{children:"Come back to this Billing page - it will load automatically"})]}),s.jsx("p",{style:{marginTop:"15px",color:"#666",fontSize:"0.9em"},children:' Cloud sync stores your billing data in a Google Sheet in your Google Drive (folder: "Research Agent"). This allows you to track API costs across devices and export data to other tools.'})]}),s.jsx("button",{onClick:ee,style:{marginTop:"15px"},children:" Retry"})]})})}if(!n)return s.jsx("div",{className:"billing-page",children:s.jsx("div",{className:"loading",children:"No billing data available. Please wait..."})});if(!n.transactions||n.transactions.length===0)return s.jsxs("div",{className:"billing-page",children:[s.jsxs("div",{className:"billing-header",children:[s.jsx("h1",{children:" Billing Dashboard"}),s.jsx("p",{style:{color:"#666",marginTop:"8px"},children:n.message||"No transactions found"})]}),s.jsxs("div",{className:"info-box",style:{marginTop:"20px",padding:"20px",background:"#f5f5f5",borderRadius:"8px"},children:[s.jsx("h3",{style:{marginTop:0},children:" No Billing Data Yet"}),s.jsx("p",{children:"Start using the chat to generate billing records. All API usage is automatically tracked."}),s.jsx("button",{onClick:ee,style:{marginTop:"15px"},children:" Refresh"})]})]});const q=n.transactions.filter(H=>{if(h||p){const ne=new Date(H.timestamp);if(h&&ne<new Date(h)||p&&ne>new Date(p))return!1}return!(b&&String(H.type).toLowerCase()!==b.toLowerCase()||k&&H.provider.toLowerCase()!==k.toLowerCase())}),X=((H,ne=!1)=>{const re={},fe={},le={};let ve=0,ce=0,ke=0,it=0;const zt=new Set(H.filter(He=>He.requestId&&He.requestId!=="").map(He=>He.requestId)).size,Sr=H.length;return H.forEach(He=>{(!ne||String(He.type)!=="credit_added")&&(ve+=He.cost),ce+=He.totalTokens||0,ke+=He.tokensIn||0,it+=He.tokensOut||0;const Gt=String(He.type);re[Gt]||(re[Gt]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0}),re[Gt].cost+=He.cost,re[Gt].tokens+=He.totalTokens||0,re[Gt].tokensIn+=He.tokensIn||0,re[Gt].tokensOut+=He.tokensOut||0,re[Gt].count+=1,fe[He.provider]||(fe[He.provider]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0}),fe[He.provider].cost+=He.cost,fe[He.provider].tokens+=He.totalTokens||0,fe[He.provider].tokensIn+=He.tokensIn||0,fe[He.provider].tokensOut+=He.tokensOut||0,fe[He.provider].count+=1,le[He.model]||(le[He.model]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0,provider:He.provider}),le[He.model].cost+=He.cost,le[He.model].tokens+=He.totalTokens||0,le[He.model].tokensIn+=He.tokensIn||0,le[He.model].tokensOut+=He.tokensOut||0,le[He.model].count+=1}),{totalCost:ve,totalTokens:ce,totalTokensIn:ke,totalTokensOut:it,totalUserQueries:zt,totalLLMCalls:Sr,byType:re,byProvider:fe,byModel:le}})(q,!0),K=Array.from(new Set(n.transactions.map(H=>H.provider))).sort(),xe=Array.from(new Set(n.transactions.map(H=>String(H.type)))),U=H=>{const ne=new Map,re=[];H.forEach(le=>{if(le.requestId&&le.requestId!==""){const ve=ne.get(le.requestId)||[];ve.push(le),ne.set(le.requestId,ve)}else re.push(le)}),ne.forEach(le=>{le.sort((ve,ce)=>new Date(ve.timestamp).getTime()-new Date(ce.timestamp).getTime())}),re.sort((le,ve)=>new Date(ve.timestamp).getTime()-new Date(le.timestamp).getTime());const fe=Array.from(ne.entries()).sort(([,le],[,ve])=>{const ce=le[0].timestamp,ke=ve[0].timestamp;return new Date(ke).getTime()-new Date(ce).getTime()});return{grouped:new Map(fe),ungrouped:re}},{grouped:M,ungrouped:Y}=U(q),R=H=>{ae(ne=>{const re=new Set(ne);return re.has(H)?re.delete(H):re.add(H),re})};return s.jsx("div",{className:"billing-page-container",children:s.jsxs("div",{className:"billing-page",children:[s.jsxs("div",{className:"billing-header",children:[s.jsx("div",{className:"billing-title",children:s.jsx("h1",{children:" Billing Dashboard"})}),s.jsxs("div",{className:"billing-actions",children:[s.jsx("button",{className:"btn-secondary",onClick:$,children:" Export CSV"}),n.source!=="service"&&s.jsx("button",{className:"btn-danger",onClick:()=>T(!0),children:" Clear Data"})]})]}),s.jsxs("div",{className:"billing-filters",children:[s.jsxs("div",{className:"filter-group",children:[s.jsxs("label",{children:[" Start Date:",s.jsx("input",{type:"date",value:h,onChange:H=>f(H.target.value),placeholder:"Select start date",max:p||void 0})]}),s.jsxs("label",{children:[" End Date:",s.jsx("input",{type:"date",value:p,onChange:H=>x(H.target.value),placeholder:"Select end date",min:h||void 0})]}),s.jsxs("label",{children:[" Type:",s.jsxs("select",{value:b,onChange:H=>y(H.target.value),children:[s.jsx("option",{value:"",children:"All Types"}),xe.map(H=>s.jsx("option",{value:H,children:H==="chat"?"Chat":H==="embedding"?"Embedding":H==="guardrail_input"?"Guardrail Input":H==="guardrail_output"?"Guardrail Output":H==="planning"?"Planning":H==="assessment"?"Assessment":H==="image_generation"?"Image Generation":H==="tts"?"Text-to-Speech":H==="chat_iteration"?"Chat Iteration":typeof H=="string"?H.replace(/_/g," ").replace(/\b\w/g,ne=>ne.toUpperCase()):String(H)},H))]})]}),s.jsxs("label",{children:[" Provider:",s.jsxs("select",{value:k,onChange:H=>S(H.target.value),children:[s.jsx("option",{value:"",children:"All Providers"}),K.map(H=>s.jsx("option",{value:H,children:H},H))]})]}),(h||p||b||k)&&s.jsx("button",{className:"btn-clear-filters",onClick:()=>{f(""),x(""),y(""),S("")},children:"Clear Filters"})]}),s.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e0e0e0",display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.85rem",color:"#666",fontWeight:500},children:"Quick ranges:"}),s.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const H=new Date;f(H.toISOString().split("T")[0]),x(H.toISOString().split("T")[0])},children:"Today"}),s.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const H=new Date,ne=new Date(H);ne.setDate(H.getDate()-7),f(ne.toISOString().split("T")[0]),x(H.toISOString().split("T")[0])},children:"Last 7 Days"}),s.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const H=new Date,ne=new Date(H);ne.setMonth(H.getMonth()-1),f(ne.toISOString().split("T")[0]),x(H.toISOString().split("T")[0])},children:"Last 30 Days"}),s.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const H=new Date,ne=new Date(H.getFullYear(),H.getMonth(),1);f(ne.toISOString().split("T")[0]),x(H.toISOString().split("T")[0])},children:"This Month"})]})]}),s.jsxs("div",{className:"billing-tabs",children:[s.jsx("button",{className:A==="overview"?"active":"",onClick:()=>I("overview"),children:"Overview"}),s.jsxs("button",{className:A==="transactions"?"active":"",onClick:()=>I("transactions"),children:["Transactions (",q.length,")"]})]}),A==="overview"&&s.jsxs("div",{className:"billing-overview",children:[s.jsxs("div",{className:"summary-cards",children:[s.jsxs("div",{className:"summary-card",style:{background:Z>0?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"2px solid rgba(255,255,255,0.3)"},children:[s.jsx("div",{className:"summary-label",style:{color:"rgba(255,255,255,0.9)"},children:" Credit Balance"}),s.jsxs("div",{className:"summary-value",style:{fontSize:"2rem",fontWeight:"bold"},children:["$",Z.toFixed(2)]}),s.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.8)",marginTop:"4px"},children:Z>0?`$${Z.toFixed(2)} available`:"Add credit to continue"}),Z<=0&&s.jsx("button",{style:{background:"white",color:"#764ba2",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"bold",cursor:"pointer",marginTop:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onClick:()=>alert("PayPal integration coming soon!"),children:" Add Credit"})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Cost"}),s.jsxs("div",{className:"summary-value",children:["$",X.totalCost.toFixed(4)]}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Usage only (excl. credits)"})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Tokens"}),s.jsx("div",{className:"summary-value",children:X.totalTokens.toLocaleString()}),s.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:["In: ",X.totalTokensIn.toLocaleString()," | Out: ",X.totalTokensOut.toLocaleString()]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Requests"}),s.jsxs("div",{className:"summary-value",children:[X.totalUserQueries," / ",X.totalLLMCalls]}),s.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"User Queries / LLM Calls"})]})]}),X.byType&&Object.keys(X.byType).length>0&&s.jsxs("div",{className:"breakdown-section",children:[s.jsx("h3",{children:"By Type"}),s.jsxs("table",{className:"breakdown-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Requests"}),s.jsx("th",{children:"Tokens In"}),s.jsx("th",{children:"Tokens Out"}),s.jsx("th",{children:"Total Tokens"}),s.jsx("th",{children:"Cost"})]})}),s.jsx("tbody",{children:Object.entries(X.byType).map(([H,ne])=>s.jsxs("tr",{children:[s.jsx("td",{children:H}),s.jsx("td",{children:ne.count}),s.jsx("td",{children:ne.tokensIn.toLocaleString()}),s.jsx("td",{children:ne.tokensOut.toLocaleString()}),s.jsx("td",{children:ne.tokens.toLocaleString()}),s.jsxs("td",{children:["$",ne.cost.toFixed(4)]})]},H))})]})]}),X.byProvider&&Object.keys(X.byProvider).length>0&&s.jsxs("div",{className:"breakdown-section",children:[s.jsx("h3",{children:"By Provider"}),s.jsxs("table",{className:"breakdown-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Provider"}),s.jsx("th",{children:"Requests"}),s.jsx("th",{children:"Tokens In"}),s.jsx("th",{children:"Tokens Out"}),s.jsx("th",{children:"Total Tokens"}),s.jsx("th",{children:"Cost"})]})}),s.jsx("tbody",{children:Object.entries(X.byProvider).map(([H,ne])=>s.jsxs("tr",{children:[s.jsx("td",{children:H}),s.jsx("td",{children:ne.count}),s.jsx("td",{children:ne.tokensIn.toLocaleString()}),s.jsx("td",{children:ne.tokensOut.toLocaleString()}),s.jsx("td",{children:ne.tokens.toLocaleString()}),s.jsxs("td",{children:["$",ne.cost.toFixed(4)]})]},H))})]})]}),X.byModel&&Object.keys(X.byModel).length>0&&s.jsxs("div",{className:"breakdown-section",children:[s.jsx("h3",{children:"By Model"}),s.jsxs("table",{className:"breakdown-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Provider"}),s.jsx("th",{children:"Model"}),s.jsx("th",{children:"Requests"}),s.jsx("th",{children:"Tokens In"}),s.jsx("th",{children:"Tokens Out"}),s.jsx("th",{children:"Total Tokens"}),s.jsx("th",{children:"Cost"})]})}),s.jsx("tbody",{children:Object.entries(X.byModel).sort((H,ne)=>{const re=H[1].provider.localeCompare(ne[1].provider);return re!==0?re:H[0].localeCompare(ne[0])}).map(([H,ne])=>s.jsxs("tr",{children:[s.jsx("td",{children:ne.provider}),s.jsx("td",{children:H}),s.jsx("td",{children:ne.count}),s.jsx("td",{children:ne.tokensIn.toLocaleString()}),s.jsx("td",{children:ne.tokensOut.toLocaleString()}),s.jsx("td",{children:ne.tokens.toLocaleString()}),s.jsxs("td",{children:["$",ne.cost.toFixed(4)]})]},H))})]})]})]}),A==="transactions"&&s.jsxs("div",{className:"billing-transactions",children:[s.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#f5f5f5",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:O,onChange:H=>B(H.target.checked),style:{cursor:"pointer"}}),s.jsx("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:" Group by Request ID"})]}),s.jsx("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"auto"},children:O?`${M.size} request groups, ${Y.length} ungrouped`:`${n.transactions.length} total transactions`})]}),s.jsx("div",{className:"transactions-table-container",children:s.jsxs("table",{className:"transactions-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[O&&s.jsx("th",{style:{width:"40px"},children:""}),s.jsx("th",{children:"Timestamp"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Provider"}),s.jsx("th",{children:"Model"}),s.jsx("th",{children:"Tokens"}),s.jsx("th",{children:"Cost"}),s.jsx("th",{children:"Duration"}),s.jsx("th",{children:"Status"})]})}),s.jsx("tbody",{children:O?s.jsxs(s.Fragment,{children:[Array.from(M.entries()).map(([H,ne])=>{const re=F.has(H),fe=ne.reduce((ke,it)=>ke+it.cost,0),le=ne.reduce((ke,it)=>ke+it.totalTokens,0),ve=ne.reduce((ke,it)=>ke+it.durationMs,0),ce=ne[0];return s.jsxs(Mn.Fragment,{children:[s.jsxs("tr",{onClick:()=>R(H),style:{background:"#f0f0f0",fontWeight:500,cursor:"pointer",userSelect:"none"},children:[s.jsx("td",{style:{textAlign:"center"},children:re?"":""}),s.jsx("td",{children:new Date(ce.timestamp).toLocaleString()}),s.jsx("td",{colSpan:3,children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsxs("span",{children:[" Request Group (",ne.length," transactions)"]}),s.jsxs("code",{style:{fontSize:"0.75rem",background:"#fff",padding:"2px 6px",borderRadius:"4px",color:"#666"},children:[H.substring(0,12),"..."]})]})}),s.jsx("td",{children:le.toLocaleString()}),s.jsx("td",{children:s.jsxs("strong",{children:["$",fe.toFixed(6)]})}),s.jsxs("td",{children:[ve,"ms"]}),s.jsx("td",{className:ne.every(ke=>ke.status==="success")?"status-success":"status-error",children:ne.every(ke=>ke.status==="success")?"success":"partial"})]}),re&&ne.map((ke,it)=>s.jsxs("tr",{style:{...String(ke.type)==="guardrail_input"||String(ke.type)==="guardrail_output"?{background:"#fffde7"}:String(ke.type)==="image_generation"?{background:"#e3f2fd"}:String(ke.type)==="tts"?{background:"#f3e5f5"}:{background:"#fafafa"},borderLeft:"3px solid #ddd"},children:[s.jsx("td",{style:{textAlign:"center",color:"#ccc"},children:""}),s.jsx("td",{style:{paddingLeft:"2rem",fontSize:"0.9rem"},children:new Date(ke.timestamp).toLocaleString()}),s.jsx("td",{children:String(ke.type)==="guardrail_input"?" Guardrail Input":String(ke.type)==="guardrail_output"?" Guardrail Output":String(ke.type)==="image_generation"?" Image Generation":String(ke.type)==="tts"?" Text-to-Speech":String(ke.type)==="chat"?"Chat":String(ke.type)==="embedding"?"Embedding":String(ke.type)==="planning"?"Planning":typeof ke.type=="string"?String(ke.type).replace(/_/g," ").replace(/\b\w/g,pt=>pt.toUpperCase()):String(ke.type)}),s.jsx("td",{children:ke.provider}),s.jsx("td",{children:ke.model}),s.jsx("td",{children:ke.totalTokens.toLocaleString()}),s.jsxs("td",{children:["$",ke.cost.toFixed(6)]}),s.jsxs("td",{children:[ke.durationMs,"ms"]}),s.jsx("td",{className:ke.status==="success"?"status-success":"status-error",children:ke.status})]},`${H}-${it}`))]},H)}),Y.map((H,ne)=>s.jsxs("tr",{style:String(H.type)==="guardrail_input"||String(H.type)==="guardrail_output"?{background:"#fffde7"}:String(H.type)==="image_generation"?{background:"#e3f2fd"}:String(H.type)==="tts"?{background:"#f3e5f5"}:{},children:[s.jsx("td",{style:{textAlign:"center",color:"#ccc"},children:""}),s.jsx("td",{children:new Date(H.timestamp).toLocaleString()}),s.jsx("td",{children:String(H.type)==="guardrail_input"?" Guardrail Input":String(H.type)==="guardrail_output"?" Guardrail Output":String(H.type)==="image_generation"?" Image Generation":String(H.type)==="tts"?" Text-to-Speech":String(H.type)==="chat"?"Chat":String(H.type)==="embedding"?"Embedding":String(H.type)==="planning"?"Planning":typeof H.type=="string"?String(H.type).replace(/_/g," ").replace(/\b\w/g,re=>re.toUpperCase()):String(H.type)}),s.jsx("td",{children:H.provider}),s.jsx("td",{children:H.model}),s.jsx("td",{children:H.totalTokens.toLocaleString()}),s.jsxs("td",{children:["$",H.cost.toFixed(6)]}),s.jsxs("td",{children:[H.durationMs,"ms"]}),s.jsx("td",{className:H.status==="success"?"status-success":"status-error",children:H.status})]},`ungrouped-${ne}`))]}):n.transactions.map((H,ne)=>s.jsxs("tr",{style:String(H.type)==="guardrail_input"||String(H.type)==="guardrail_output"?{background:"#fffde7"}:String(H.type)==="image_generation"?{background:"#e3f2fd"}:String(H.type)==="tts"?{background:"#f3e5f5"}:{},children:[s.jsx("td",{children:new Date(H.timestamp).toLocaleString()}),s.jsx("td",{children:String(H.type)==="guardrail_input"?" Guardrail Input":String(H.type)==="guardrail_output"?" Guardrail Output":String(H.type)==="image_generation"?" Image Generation":String(H.type)==="tts"?" Text-to-Speech":String(H.type)==="chat"?"Chat":String(H.type)==="embedding"?"Embedding":String(H.type)==="planning"?"Planning":typeof H.type=="string"?String(H.type).replace(/_/g," ").replace(/\b\w/g,re=>re.toUpperCase()):String(H.type)}),s.jsx("td",{children:H.provider}),s.jsx("td",{children:H.model}),s.jsx("td",{children:H.totalTokens.toLocaleString()}),s.jsxs("td",{children:["$",H.cost.toFixed(6)]}),s.jsxs("td",{children:[H.durationMs,"ms"]}),s.jsx("td",{className:H.status==="success"?"status-success":"status-error",children:H.status})]},ne))})]})})]}),s.jsx(tce,{isOpen:_,onClose:()=>T(!1),onConfirm:W,providers:K})]})})};function nce(){const e=Op(),[t,r]=C.useState("features"),n=[{id:"features",label:"Features & Advantages",icon:""},{id:"planning",label:"Planning & SWAG",icon:""},{id:"tools",label:"Backend LLM Tools",icon:""},{id:"rag",label:"Browser RAG",icon:""},{id:"pricing",label:"Pricing",icon:""},{id:"privacy",label:"Privacy Policy",icon:""}];return s.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[s.jsx("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Back to Chat",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Help & Documentation"})]})}),s.jsx("div",{className:"flex gap-1 p-2 border-b dark:border-gray-700 overflow-x-auto bg-gray-50 dark:bg-gray-800",children:n.map(a=>s.jsxs("button",{onClick:()=>r(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[s.jsx("span",{children:a.icon}),s.jsx("span",{className:"text-sm font-medium",children:a.label})]},a.id))}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[t==="features"&&s.jsx(ace,{}),t==="planning"&&s.jsx(sce,{}),t==="tools"&&s.jsx(ice,{}),t==="rag"&&s.jsx(oce,{}),t==="pricing"&&s.jsx(lce,{}),t==="privacy"&&s.jsx(cce,{})]})})]})}function ace(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Features & Advantages"}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Multi-Provider LLM Access"}),s.jsx("p",{children:"Access multiple AI providers in one place:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"OpenAI:"})," GPT-4, GPT-4o, GPT-4 Turbo"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Google Gemini:"})," Gemini 1.5 Pro, Flash models (with free tier)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Groq:"})," Ultra-fast inference with Llama, Mixtral, Gemma models"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Together AI:"})," Open source models with trial credits"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Custom Endpoints:"})," Bring your own OpenAI-compatible API"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Web Search Integration"}),s.jsx("p",{children:"Get real-time information with:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"DuckDuckGo Search:"})," Privacy-focused web search"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Tavily AI:"})," Advanced AI-powered research (requires API key)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Automatic Citation:"})," Sources are cited in responses"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Intelligent Planning Mode"}),s.jsx("p",{children:"Complex queries benefit from planning before execution:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Research Planning:"})," Break down complex questions"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Multi-Step Execution:"})," Execute searches and analyze results"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cost Optimization:"})," Efficient use of API credits"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Rich Media Support"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Image Generation:"})," DALL-E 3, Stable Diffusion, Flux models"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chart Generation:"})," Mermaid diagrams for flowcharts, sequences, etc."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"YouTube Integration:"})," Search, transcript extraction, video analysis"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Audio Transcription:"})," Convert audio/video to text with Whisper"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Knowledge Management"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Content Swag:"})," Save snippets, images, links for later"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Browser RAG:"})," Search your saved content with embeddings"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chat History:"})," Persistent storage with search"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Google Drive Sync:"})," Backup to your own Google Drive"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Media Playback"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Background Player:"})," Play audio from YouTube, podcasts, etc."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Playlists:"})," Queue multiple tracks"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chromecast Support:"})," Cast to TV or speakers"]})]})]})]})}function sce(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Planning, Todos & SWAG for Long-Term Thinking"}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Planning Mode"}),s.jsx("p",{children:"Enable planning mode in chat for complex, multi-step research tasks:"}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("p",{className:"font-medium mb-2",children:"How it works:"}),s.jsxs("ol",{className:"list-decimal pl-6 space-y-2",children:[s.jsx("li",{children:"AI analyzes your question and creates a research plan"}),s.jsx("li",{children:"Executes searches and gathers information"}),s.jsx("li",{children:"Synthesizes findings into a comprehensive answer"}),s.jsx("li",{children:"Cites all sources used"})]})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Best for:"})," Research questions, comparative analysis, multi-part queries"]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Backend Todo Management"}),s.jsxs("p",{children:["The ",s.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:"manage_todos"})," tool allows AI to maintain a persistent todo list:"]}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Task Tracking:"})," AI can create, update, and complete tasks"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Multi-Turn Context:"})," Todos persist across chat sessions"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Project Management:"})," Break down large tasks into steps"]})]}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("p",{className:"font-medium",children:" Example Usage:"}),s.jsx("p",{className:"mt-2 italic",children:'"Create a todo list for building a web scraper: research libraries, write code, test, deploy"'})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Content SWAG"}),s.jsx("p",{children:"SWAG (Stuff We All Get) is your personal knowledge repository:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Save Anything:"})," Text snippets, images, code, links"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Organize with Tags:"})," Categorize content for easy retrieval"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Search & Filter:"})," Find content by text, tags, or type"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Generate Embeddings:"})," Enable semantic search across your content"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Sync:"})," Backup to Google Drive for persistence"]})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("p",{className:"font-medium",children:" Long-Term Thinking:"}),s.jsx("p",{className:"mt-2",children:"Combine Planning Mode + Todos + SWAG to build a knowledge base over time. Save research findings to SWAG, reference them in future chats using RAG, and track progress with todos."})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Google Sheets Integration"}),s.jsxs("p",{children:["The ",s.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:"manage_snippets"})," tool syncs with Google Sheets:"]}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Storage:"})," Snippets saved to your Google Drive"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Collaborative:"})," Share sheets with team members"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Persistent:"})," Never lose your data"]})]})]})]})}function ice(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Backend LLM Tools"}),s.jsxs("p",{className:"text-lg",children:["The AI has access to powerful backend tools that it can call automatically when needed. Enable/disable tools in ",s.jsx("strong",{children:"Settings  Tools"}),"."]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Available Tools"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Os,{name:"web_search",icon:"",description:"Search the web using DuckDuckGo",trigger:"Automatically triggered when current information is needed",example:`User: "What's the weather in Tokyo?"`}),s.jsx(Os,{name:"execute_js",icon:"",description:"Execute JavaScript code for calculations, data processing, etc.",trigger:"Triggered when computation or data manipulation is needed",example:'User: "Calculate the Fibonacci sequence up to 100"'}),s.jsx(Os,{name:"scrape_url",icon:"",description:"Extract content from any URL",trigger:"Triggered when a specific webpage needs to be analyzed",example:'User: "Summarize the content at example.com/article"'}),s.jsx(Os,{name:"youtube",icon:"",description:"Search YouTube and extract video transcripts",trigger:"Triggered when YouTube content is mentioned",example:'User: "Find videos about machine learning"'}),s.jsx(Os,{name:"transcribe",icon:"",description:"Transcribe audio/video files using Whisper",trigger:"User uploads an audio/video file",example:"Upload an MP3 file and ask to transcribe it"}),s.jsx(Os,{name:"generate_chart",icon:"",description:"Create diagrams using Mermaid syntax",trigger:"Triggered when visualization is requested",example:'User: "Create a flowchart for user authentication"'}),s.jsx(Os,{name:"generate_image",icon:"",description:"Generate images using DALL-E 3, Stable Diffusion, or Flux",trigger:"Triggered when image generation is requested",example:'User: "Generate an image of a sunset over mountains"'}),s.jsx(Os,{name:"search_knowledge_base",icon:"",description:"Search server-side knowledge base (separate from local RAG)",trigger:"Manually enabled tool - searches backend embeddings",example:"Enable in Settings for access to server-stored documents"}),s.jsx(Os,{name:"manage_todos",icon:"",description:"Create, update, and manage a persistent todo list",trigger:"Triggered when task management is discussed",example:'User: "Add a todo to finish the report by Friday"'}),s.jsx(Os,{name:"manage_snippets",icon:"",description:"Save and retrieve snippets to Google Sheets",trigger:"Triggered when snippet storage is requested",example:'User: "Save this code snippet for later"'}),s.jsx(Os,{name:"ask_llm",icon:"",description:"Recursive LLM agent for complex multi-step reasoning",trigger:" DISABLED by default - HIGH token usage",example:"Enable in Settings for advanced AI-to-AI reasoning",warning:"Can result in very high API costs"}),s.jsx(Os,{name:"generate_reasoning_chain",icon:"",description:"Deep reasoning chains for complex problem-solving",trigger:" DISABLED by default - EXTREME token usage",example:"Enable for academic-level reasoning tasks",warning:"Can result in extremely high API costs"})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How to Use Tools"}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("ol",{className:"list-decimal pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Enable tools"})," in Settings  Tools"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Ask naturally"})," - AI will automatically call the right tool"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Check responses"})," - Tool calls are shown in the chat"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Review costs"})," - Tool usage affects API billing"]})]})})]})]})}function Os({name:e,icon:t,description:r,trigger:n,example:a,warning:o}){return s.jsx("div",{className:"border dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-2xl",children:t}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-lg",children:s.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-sm",children:e})}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:r}),s.jsxs("div",{className:"mt-3 text-sm",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("strong",{children:"Triggered:"})," ",n]}),s.jsxs("p",{className:"text-blue-600 dark:text-blue-400 mt-1 italic",children:[" ",a]})]}),o&&s.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800",children:[" ",o]})]})]})})}function oce(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Browser-Based RAG (Retrieval Augmented Generation)"}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" What is RAG?"}),s.jsx("p",{children:"RAG enhances AI responses by retrieving relevant information from your personal knowledge base before generating answers. Everything runs in your browser - no data sent to servers."})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How to Use Browser RAG"}),s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("ol",{className:"list-decimal pl-6 space-y-3",children:[s.jsxs("li",{className:"font-medium",children:[s.jsx("strong",{children:"Save Content to SWAG"}),s.jsx("p",{className:"font-normal text-sm mt-1 text-gray-700 dark:text-gray-300",children:"Navigate to the SWAG page and add text snippets, code, notes, or any content you want to reference later."})]}),s.jsxs("li",{className:"font-medium",children:[s.jsx("strong",{children:"Generate Embeddings"}),s.jsx("p",{className:"font-normal text-sm mt-1 text-gray-700 dark:text-gray-300",children:'In SWAG, select snippets and click "Generate Embeddings". This creates vector representations for semantic search.'})]}),s.jsxs("li",{className:"font-medium",children:[s.jsx("strong",{children:"Enable RAG in Chat"}),s.jsx("p",{className:"font-normal text-sm mt-1 text-gray-700 dark:text-gray-300",children:'In the chat interface, check "Use Knowledge Base Context" to search your SWAG content during conversations.'})]}),s.jsxs("li",{className:"font-medium",children:[s.jsx("strong",{children:"Ask Questions"}),s.jsx("p",{className:"font-normal text-sm mt-1 text-gray-700 dark:text-gray-300",children:"The AI will automatically search your knowledge base and include relevant snippets in its context."})]})]})})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Features"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Local Processing:"})," Embeddings generated in your browser using Transformers.js"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Privacy First:"})," Your content never leaves your device"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Semantic Search:"})," Find content by meaning, not just keywords"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Smart Ranking:"})," Most relevant snippets are prioritized"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chunk Management:"})," Large content automatically split for better retrieval"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Storage & Sync"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"IndexedDB:"})," Local browser storage for snippets and embeddings"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Google Drive Backup:"})," Optional cloud sync for persistence"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Size Limits:"})," Store as much as your browser allows"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Best Practices"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:" Do:"}),s.jsxs("ul",{className:"list-disc pl-6 mt-2 space-y-1 text-sm",children:[s.jsx("li",{children:"Save well-organized, focused snippets"}),s.jsx("li",{children:"Use descriptive tags for categorization"}),s.jsx("li",{children:"Generate embeddings for content you'll reference often"}),s.jsx("li",{children:"Keep snippets under 10,000 characters for best results"})]})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("p",{className:"font-medium text-red-800 dark:text-red-200",children:" Don't:"}),s.jsxs("ul",{className:"list-disc pl-6 mt-2 space-y-1 text-sm",children:[s.jsx("li",{children:"Save duplicate or redundant content"}),s.jsx("li",{children:"Store sensitive passwords or credentials"}),s.jsx("li",{children:"Expect perfect recall with low-quality snippets"})]})]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Browser RAG vs Server Knowledge Base"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full border dark:border-gray-700",children:[s.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left",children:"Feature"}),s.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left",children:"Browser RAG"}),s.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left",children:"Server KB Tool"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Data Location"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Your browser"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Backend server"})]}),s.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:[s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Privacy"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"100% private"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Shared with backend"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Content Source"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Your SWAG"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Server documents"})]}),s.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:[s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Setup"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Automatic"}),s.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Enable in Settings"})]})]})]})})]})]})}function lce(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Pricing"}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Credit-Based System"}),s.jsx("p",{children:"LLM Proxy uses a prepaid credit system. You purchase credits via PayPal and they're deducted as you use API services."}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsx("p",{className:"font-medium",children:" Welcome Bonus: $0.50 in free credits for new users!"})})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Purchasing Credits"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Minimum Purchase:"})," $5.00 USD"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Payment Method:"})," PayPal (secure checkout)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Expiration:"})," Credits never expire"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Refunds:"})," All sales are final"]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visit the Billing page to check your balance and purchase more credits."})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Cost Structure"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"LLM API Costs"}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"Pass-through pricing:"})," You pay exactly what the provider charges. No markup on LLM API calls."]}),s.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm space-y-1",children:[s.jsx("li",{children:"OpenAI GPT-4: ~$0.01-0.03 per 1K tokens"}),s.jsx("li",{children:"Gemini Pro: ~$0.00035 per 1K tokens (free tier available)"}),s.jsx("li",{children:"Groq: Free tier available, very fast"})]})]}),s.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Infrastructure Costs"}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[s.jsx("strong",{children:"4x profit margin"})," on Lambda/server costs to maintain the service."]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Example: If a request costs $0.0001 in Lambda fees, you're charged $0.0004 ($0.0003 markup)."})]}),s.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Total Cost Example"}),s.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm font-mono",children:[s.jsx("div",{children:"LLM API:        $0.1000 (OpenAI charge)"}),s.jsx("div",{children:"Lambda fees:    $0.0001 (AWS charge)"}),s.jsx("div",{className:"border-t dark:border-gray-600 mt-2 pt-2",children:"Infrastructure: $0.0004 (4x markup)"}),s.jsx("div",{className:"font-bold mt-2 text-blue-600 dark:text-blue-400",children:"Total:          $0.1004"})]})]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Usage Tracking"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Real-Time Balance:"})," Check credits remaining in Billing page"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Transaction History:"})," Detailed log of all API calls"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cost Breakdown:"})," See exactly what you paid for"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Google Sheets Export:"})," Download your usage data"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Cost Optimization Tips"}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:["Use ",s.jsx("strong",{children:"Groq free tier"})," for fast, free inference"]}),s.jsxs("li",{children:["Choose ",s.jsx("strong",{children:"smaller models"})," (GPT-4o-mini, Gemini Flash) for simple tasks"]}),s.jsxs("li",{children:["Enable only ",s.jsx("strong",{children:"necessary tools"})," to reduce API calls"]}),s.jsxs("li",{children:["Use ",s.jsx("strong",{children:"planning mode"})," strategically for complex queries only"]}),s.jsxs("li",{children:["Disable ",s.jsx("strong",{children:"ask_llm"})," and ",s.jsx("strong",{children:"reasoning chains"})," unless absolutely needed"]})]})})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" FAQs"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("details",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("summary",{className:"font-medium cursor-pointer",children:"What happens if I run out of credits?"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:"Chat requests will be rejected with a 402 Payment Required error. Simply purchase more credits to continue."})]}),s.jsxs("details",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("summary",{className:"font-medium cursor-pointer",children:"Do I need credits if I provide my own API keys?"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:"Yes. Credits cover infrastructure costs (Lambda, storage, etc.) even when using your own LLM API keys."})]}),s.jsxs("details",{className:"border dark:border-gray-700 rounded-lg p-4",children:[s.jsx("summary",{className:"font-medium cursor-pointer",children:"Can I get a refund?"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:"No, all credit purchases are final and non-refundable."})]})]})]})]})}function cce(){return s.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Privacy Policy"}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Last Updated"}),s.jsx("p",{children:"October 24, 2025"})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Information We Collect"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Authentication Data:"})," Google OAuth tokens, email address, profile information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Usage Data:"})," API requests, model selections, token counts, costs, timestamps"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chat History:"})," Messages sent to and from LLM providers (stored locally in your browser)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Billing Data:"})," PayPal transaction IDs, purchase amounts, credit balances (logged to Google Sheets)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Content Data:"})," SWAG snippets, embeddings, tags (stored locally in IndexedDB, optionally synced to your Google Drive)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Optional Data:"})," Location (if you grant permission), Google Drive file access (if you use sync features)"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How We Use Your Information"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Authentication:"})," Verify your identity and provide access to the service"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"API Routing:"})," Forward your requests to selected LLM providers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Billing:"})," Track credit usage, process payments, generate transaction records"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Service Improvement:"})," Monitor performance, debug issues, optimize infrastructure"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Communication:"})," Send service updates or respond to support requests"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Data Sharing"}),s.jsx("p",{children:"We share your data with:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"LLM Providers:"})," Your prompts and chat history are sent to OpenAI, Google, Groq, or other providers you select"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Payment Processors:"})," PayPal handles payment processing (subject to their privacy policy)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Services:"})," AWS Lambda hosts our backend, Google Sheets stores billing logs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Your Google Drive:"})," If you enable sync, content is saved to your personal Google Drive"]})]}),s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-3 rounded border border-red-200 dark:border-red-800",children:[" ",s.jsx("strong",{children:"Important:"})," We do NOT sell or rent your personal information to third parties for marketing purposes."]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Data Storage & Security"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Local Storage:"})," Chat history, SWAG content, and embeddings are stored in your browser's IndexedDB"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Storage:"})," Billing transactions logged to Google Sheets in your Google Drive"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Encryption:"})," HTTPS for all data transmission, OAuth2 for authentication"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Access Control:"})," Only you can access your personal data (via Google authentication)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Retention:"})," We retain billing logs for accounting purposes; chat history is stored locally and you can delete it anytime"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Your Privacy Rights"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Access:"})," View your billing transactions and usage data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Deletion:"})," Clear your local chat history and SWAG content anytime"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Portability:"})," Export your data from Google Sheets"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-Out:"})," Disconnect Google Drive sync, disable location access, or close your account"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Disclaimer of Liability"}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("p",{className:"font-semibold mb-2",children:"IMPORTANT - PLEASE READ CAREFULLY:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-sm",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"AI-Generated Content:"})," Responses from LLM providers are generated by artificial intelligence and may contain errors, biases, or inappropriate content."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Warranties:"}),' We provide the service "AS IS" without warranties of any kind, express or implied.']}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Responsibility:"})," We are NOT responsible for the accuracy, completeness, safety, or legality of AI-generated outputs."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"User Responsibility:"})," YOU are responsible for verifying any information before acting on it."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Third-Party Services:"})," We are not liable for issues with OpenAI, Google, Groq, PayPal, or other third-party services."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Loss:"})," We are not responsible for loss of local data (chat history, SWAG content) due to browser issues, cache clearing, or device failure."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Limitation of Liability:"})," Our total liability shall not exceed the amount you paid for credits in the past 30 days."]})]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Changes to This Policy"}),s.jsx("p",{children:'We may update this privacy policy from time to time. We will notify you of significant changes by posting a notice in the application or updating the "Last Updated" date above.'})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Contact Us"}),s.jsx("p",{children:"If you have questions about this privacy policy or your data, please contact us via GitHub issues at the project repository."})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mt-6",children:s.jsx("p",{className:"text-sm font-medium",children:"By using LLM Proxy, you acknowledge that you have read, understood, and agree to this privacy policy and disclaimer of liability."})})]})}function uce(){const e=Op();return s.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[s.jsx("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Back to Chat",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Privacy Policy"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 text-gray-800 dark:text-gray-200",children:[s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Last Updated"}),s.jsx("p",{children:"October 24, 2025"})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Information We Collect"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Authentication Data:"})," Google OAuth tokens, email address, profile information"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Usage Data:"})," API requests, model selections, token counts, costs, timestamps"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Chat History:"})," Messages sent to and from LLM providers (stored locally in your browser)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Billing Data:"})," PayPal transaction IDs, purchase amounts, credit balances (logged to Google Sheets)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Content Data:"})," SWAG snippets, embeddings, tags (stored locally in IndexedDB, optionally synced to your Google Drive)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Optional Data:"})," Location (if you grant permission), Google Drive file access (if you use sync features)"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How We Use Your Information"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Authentication:"})," Verify your identity and provide access to the service"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"API Routing:"})," Forward your requests to selected LLM providers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Billing:"})," Track credit usage, process payments, generate transaction records"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Service Improvement:"})," Monitor performance, debug issues, optimize infrastructure"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Communication:"})," Send service updates or respond to support requests"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Data Sharing"}),s.jsx("p",{children:"We share your data with:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"LLM Providers:"})," Your prompts and chat history are sent to OpenAI, Google, Groq, or other providers you select"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Payment Processors:"})," PayPal handles payment processing (subject to their privacy policy)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Services:"})," AWS Lambda hosts our backend, Google Sheets stores billing logs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Your Google Drive:"})," If you enable sync, content is saved to your personal Google Drive"]})]}),s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-3 rounded border border-red-200 dark:border-red-800",children:[" ",s.jsx("strong",{children:"Important:"})," We do NOT sell or rent your personal information to third parties for marketing purposes."]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Data Storage & Security"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Local Storage:"})," Chat history, SWAG content, and embeddings are stored in your browser's IndexedDB"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Cloud Storage:"})," Billing transactions logged to Google Sheets in your Google Drive"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Encryption:"})," HTTPS for all data transmission, OAuth2 for authentication"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Access Control:"})," Only you can access your personal data (via Google authentication)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Retention:"})," We retain billing logs for accounting purposes; chat history is stored locally and you can delete it anytime"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Your Privacy Rights"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Access:"})," View your billing transactions and usage data"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Deletion:"})," Clear your local chat history and SWAG content anytime"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Portability:"})," Export your data from Google Sheets"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Opt-Out:"})," Disconnect Google Drive sync, disable location access, or close your account"]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Disclaimer of Liability"}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("p",{className:"font-semibold mb-2",children:"IMPORTANT - PLEASE READ CAREFULLY:"}),s.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-sm",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"AI-Generated Content:"})," Responses from LLM providers are generated by artificial intelligence and may contain errors, biases, or inappropriate content."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Warranties:"}),' We provide the service "AS IS" without warranties of any kind, express or implied.']}),s.jsxs("li",{children:[s.jsx("strong",{children:"No Responsibility:"})," We are NOT responsible for the accuracy, completeness, safety, or legality of AI-generated outputs."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"User Responsibility:"})," YOU are responsible for verifying any information before acting on it."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Third-Party Services:"})," We are not liable for issues with OpenAI, Google, Groq, PayPal, or other third-party services."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data Loss:"})," We are not responsible for loss of local data (chat history, SWAG content) due to browser issues, cache clearing, or device failure."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Limitation of Liability:"})," Our total liability shall not exceed the amount you paid for credits in the past 30 days."]})]})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Changes to This Policy"}),s.jsx("p",{children:'We may update this privacy policy from time to time. We will notify you of significant changes by posting a notice in the application or updating the "Last Updated" date above.'})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Contact Us"}),s.jsx("p",{children:"If you have questions about this privacy policy or your data, please contact us via GitHub issues at the project repository."})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mt-6",children:s.jsx("p",{className:"text-sm font-medium",children:"By using LLM Proxy, you acknowledge that you have read, understood, and agree to this privacy policy and disclaimer of liability."})})]})})]})}const dce=({isBlocked:e,onUnblock:t})=>{const{settings:r}=ii(),[n,a]=C.useState(!1);return C.useEffect(()=>{e&&r.providers&&r.providers.length>0&&(console.log(" User has providers configured, unblocking UI"),t())},[e,r.providers,t]),C.useEffect(()=>{const o=l=>{console.log(" Provider added:",l.detail),setTimeout(()=>{r.providers&&r.providers.length>0&&t()},100)};return window.addEventListener("provider-added",o),()=>{window.removeEventListener("provider-added",o)}},[r.providers,t]),e?s.jsxs("div",{className:"provider-setup-gate",children:[s.jsx("div",{className:"gate-overlay",children:s.jsxs("div",{className:"gate-content",children:[s.jsxs("div",{className:"gate-header",children:[s.jsx("h1",{children:" Provider Setup Required"}),s.jsx("p",{className:"gate-subtitle",children:"To use this service, you need to configure at least one LLM provider with your own API key."})]}),s.jsxs("div",{className:"gate-info",children:[s.jsxs("div",{className:"info-box",children:[s.jsx("h3",{children:"Why do I need to add a provider?"}),s.jsx("p",{children:"This service requires API credentials to access Large Language Models (LLMs). You can use free tier providers like Groq or Gemini to get started at no cost."})]}),s.jsxs("div",{className:"info-box",children:[s.jsx("h3",{children:"Recommended: Free Tier Providers"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Groq (Free):"})," Fast inference with generous free tier",s.jsx("br",{}),s.jsx("a",{href:"https://console.groq.com/",target:"_blank",rel:"noopener noreferrer",children:"Get API key "})]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Gemini (Free):"})," Google's LLM with free tier",s.jsx("br",{}),s.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",children:"Get API key "})]})]})]}),s.jsxs("div",{className:"info-box",children:[s.jsx("h3",{children:"Your API keys are secure"}),s.jsx("p",{children:"All API keys are stored locally in your browser and transmitted securely to our backend. We never store your API keys on our servers."})]})]}),s.jsx("div",{className:"gate-action",children:n?s.jsxs("div",{className:"gate-form",children:[s.jsx("h3",{children:"Configure Provider"}),s.jsx(YN,{onSave:()=>{console.log(" Provider added successfully"),a(!1)},onCancel:()=>a(!1)})]}):s.jsx("button",{className:"btn-primary btn-large",onClick:()=>a(!0),children:"Add Your First Provider"})}),s.jsx("div",{className:"gate-footer",children:s.jsx("p",{className:"text-muted",children:"Once you add a provider, you'll be able to use all features of the application."})})]})}),s.jsx("style",{children:`
        .provider-setup-gate {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 10000;
          background: rgba(0, 0, 0, 0.95);
          display: flex;
          align-items: center;
          justify-content: center;
          backdrop-filter: blur(10px);
        }

        .gate-overlay {
          width: 100%;
          height: 100%;
          overflow-y: auto;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 2rem;
        }

        .gate-content {
          max-width: 800px;
          width: 100%;
          background: #1a1a1a;
          border-radius: 12px;
          padding: 3rem;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
          border: 1px solid #333;
        }

        .gate-header {
          text-align: center;
          margin-bottom: 2rem;
        }

        .gate-header h1 {
          font-size: 2rem;
          margin: 0 0 1rem 0;
          color: #fff;
        }

        .gate-subtitle {
          font-size: 1.1rem;
          color: #bbb;
          margin: 0;
        }

        .gate-info {
          margin-bottom: 2rem;
        }

        .info-box {
          background: #252525;
          border-radius: 8px;
          padding: 1.5rem;
          margin-bottom: 1rem;
          border: 1px solid #333;
        }

        .info-box h3 {
          margin: 0 0 0.75rem 0;
          color: #fff;
          font-size: 1.1rem;
        }

        .info-box p {
          margin: 0;
          color: #bbb;
          line-height: 1.6;
        }

        .info-box ul {
          margin: 0.5rem 0 0 0;
          padding-left: 1.5rem;
          color: #bbb;
        }

        .info-box li {
          margin-bottom: 0.75rem;
          line-height: 1.6;
        }

        .info-box a {
          color: #4a9eff;
          text-decoration: none;
          font-size: 0.95rem;
        }

        .info-box a:hover {
          text-decoration: underline;
        }

        .gate-action {
          text-align: center;
          margin-bottom: 2rem;
        }

        .gate-form {
          background: #252525;
          border-radius: 8px;
          padding: 2rem;
          border: 1px solid #333;
        }

        .gate-form h3 {
          margin: 0 0 1.5rem 0;
          color: #fff;
        }

        .btn-primary {
          background: #4a9eff;
          color: white;
          border: none;
          padding: 1rem 2rem;
          border-radius: 8px;
          font-size: 1.1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .btn-primary:hover {
          background: #357ac9;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(74, 158, 255, 0.3);
        }

        .btn-large {
          padding: 1.25rem 2.5rem;
          font-size: 1.2rem;
        }

        .gate-footer {
          text-align: center;
          border-top: 1px solid #333;
          padding-top: 1.5rem;
        }

        .text-muted {
          color: #888;
          font-size: 0.95rem;
          margin: 0;
        }

        @media (max-width: 768px) {
          .gate-content {
            padding: 2rem 1.5rem;
          }

          .gate-header h1 {
            font-size: 1.5rem;
          }

          .gate-subtitle {
            font-size: 1rem;
          }
        }
      `})]}):null};function hce(){const{isAuthenticated:e,getToken:t}=$s(),{settings:r}=ii(),{usage:n,loading:a}=Pp(),o=Op(),l=sl(),[u,d]=C.useState(!1),[h,f]=C.useState(!1),[p,x]=C.useState(!1),[b,y]=C.useState(!1),[k,S]=C.useState(!1),[_,T]=ps("chat_enabled_tools",{web_search:!0,execute_js:!0,scrape_url:!0,youtube:!0,transcribe:!0,generate_chart:!0,generate_image:!0,search_knowledge_base:!1,manage_todos:!0,manage_snippets:!0,ask_llm:!1,generate_reasoning_chain:!1});if(C.useEffect(()=>{(async()=>{try{console.log("Starting migration from localStorage to IndexedDB...");const O=await Xl.migrateFromLocalStorage();console.log(`Migration complete: ${O} chats migrated`),await Xl.cleanupOldChats(100),console.log("Cleanup complete: kept 100 most recent chats")}catch(O){console.error("Error during migration:",O)}})()},[]),C.useEffect(()=>{const I="927667106833-7od90q7nh5oage0shc3kka5s9vtg2loj.apps.googleusercontent.com";if(window.google)E_(I);else{const O=setInterval(()=>{window.google&&(E_(I),clearInterval(O))},100);setTimeout(()=>clearInterval(O),5e3)}},[]),C.useEffect(()=>{e&&!b&&(async()=>{if(!e){y(!0);return}try{const O=await t();if(!O){y(!0);return}const B=await es(),F=await fetch(`${B}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({messages:[{role:"user",content:"test"}],providers:r.providers||[]})});F.status===403&&(await F.json()).requiresProviderSetup&&(console.log(" User needs to configure providers"),x(!0))}catch{console.log("Unable to verify provider setup status (this is not critical)")}finally{y(!0)}})()},[e,t,r.providers,b]),!e)return s.jsx(KP,{});if(!b)return s.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})});const A=n?.exceeded||!1;return p||A?s.jsx(dce,{isBlocked:p||A,onUnblock:()=>x(!1)}):s.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:s.jsxs("div",{className:"flex justify-between items-center max-w-screen-2xl mx-auto",children:[s.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"h-12 w-auto object-contain"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(tB,{}),l.pathname!=="/billing"&&s.jsxs("button",{onClick:()=>o("/billing"),disabled:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium ${k?"bg-gray-300 dark:bg-gray-800 text-gray-500 dark:text-gray-600 cursor-not-allowed opacity-50":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:k?"Cannot navigate during active chat request":n?`You have $${n.creditBalance.toFixed(2)} remaining of $${n.totalCredits.toFixed(2)} total credits`:"View billing and usage details",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),n&&!a&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&s.jsxs("span",{className:`text-xs font-medium ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]}),l.pathname==="/billing"?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>o("/"),className:"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium",title:"Back to Chat",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s.jsx("span",{className:"text-sm",children:"Back to Chat"})]}),s.jsxs("button",{onClick:()=>o("/swag"),disabled:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium ${k?"bg-blue-400 text-white cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700 text-white"}`,title:k?"Cannot navigate during active chat request":"Content Swag - Save and manage snippets",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),s.jsx("span",{className:"text-sm",children:"Swag"})]})]}):l.pathname==="/swag"?s.jsxs("button",{onClick:()=>o("/"),className:"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium",title:"Back to Chat",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),s.jsx("span",{className:"text-sm",children:"Back to Chat"})]}):s.jsxs("button",{onClick:()=>o("/swag"),disabled:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium ${k?"bg-blue-400 text-white cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700 text-white"}`,title:k?"Cannot navigate during active chat request":"Content Swag - Save and manage snippets",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),s.jsx("span",{className:"text-sm",children:"Swag"})]}),l.pathname==="/help"||l.pathname==="/privacy"?null:s.jsxs("button",{onClick:()=>o("/help"),disabled:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium ${k?"bg-purple-400 text-white cursor-not-allowed opacity-50":"bg-purple-600 hover:bg-purple-700 text-white"}`,title:k?"Cannot navigate during active chat request":"Help & Documentation",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-sm",children:"Help"})]}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Settings",children:s.jsxs("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),s.jsx(XP,{})]})]})}),s.jsx(zle,{}),s.jsx(yB,{}),s.jsx("main",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"h-full max-w-screen-2xl mx-auto",children:s.jsxs(tD,{children:[s.jsx(lu,{path:"/",element:s.jsx(Kle,{enabledTools:_,setEnabledTools:T,showMCPDialog:h,setShowMCPDialog:f,onLoadingChange:S})}),s.jsx(lu,{path:"/swag",element:s.jsx(ece,{})}),s.jsx(lu,{path:"/billing",element:s.jsx(rce,{})}),s.jsx(lu,{path:"/help",element:s.jsx(nce,{})}),s.jsx(lu,{path:"/privacy",element:s.jsx(uce,{})})]})})}),s.jsx(LB,{isOpen:u,onClose:()=>d(!1),enabledTools:_,setEnabledTools:T,onOpenMCPDialog:()=>f(!0)}),s.jsx(zN,{})]})}function gce(){return s.jsx(_D,{basename:"/",children:s.jsx(oP,{children:s.jsx(UD,{children:s.jsx(OP,{children:s.jsx(SP,{children:s.jsx(DP,{children:s.jsx(GP,{children:s.jsx(IP,{children:s.jsx(RP,{children:s.jsx(rP,{children:s.jsx(nP,{children:s.jsx($D,{children:s.jsx(MP,{children:s.jsx(hce,{})})})})})})})})})})})})})})}typeof window<"u"&&(window.ragDB=Ma,console.log(" ragDB exposed to window.ragDB for debugging"));const Cy=new URLSearchParams(window.location.search);if(Cy.get("reset")==="true"){console.log(" Reset parameter detected - clearing remote Lambda preference"),SN(),Cy.delete("reset");const e=Cy.toString(),t=window.location.pathname+(e?"?"+e:"");window.history.replaceState({},"",t)}d6.createRoot(document.getElementById("root")).render(s.jsx(gce,{}));export{yt as $,vce as A,qh as B,RW as C,eK as D,T2 as E,wa as F,C4 as G,jre as H,RZ as I,FJ as J,iT as K,pV as L,Iu as M,bce as N,dm as O,OV as P,Gv as Q,Mn as R,bT as S,_Z as T,M0 as U,Lre as V,Ag as W,zV as X,Ng as Y,wre as Z,N as _,VV as a,_M as a$,Rt as a0,D4 as a1,vZ as a2,BT as a3,PT as a4,Ace as a5,_ce as a6,Cce as a7,Tce as a8,wce as a9,Uce as aA,zce as aB,Bce as aC,Et as aD,Fce as aE,Hae as aF,Bae as aG,Pae as aH,Gne as aI,kZ as aJ,xce as aK,Hu as aL,Dg as aM,Hne as aN,zne as aO,e2 as aP,Xo as aQ,jT as aR,eQ as aS,rg as aT,hc as aU,yre as aV,SM as aW,im as aX,um as aY,kp as aZ,CM as a_,iu as aa,a2 as ab,Nce as ac,Ece as ad,jce as ae,Lce as af,Sce as ag,Kt as ah,Ni as ai,mae as aj,IO as ak,$ce as al,$J as am,Jn as an,cl as ao,m2 as ap,oR as aq,pc as ar,RM as as,tr as at,bre as au,ute as av,dre as aw,x2 as ax,DC as ay,ose as az,WV as b,Kte as b0,wt as b1,gM as b2,Ja as b3,WX as b4,Jv as b5,X4 as b6,jg as b7,J4 as b8,kce as b9,JT as bA,v2 as bB,vM as bC,nv as bD,vre as bE,cm as bF,MW as ba,xre as bb,ure as bc,Qee as bd,b2 as be,Gte as bf,kre as bg,Og as bh,rd as bi,bp as bj,rre as bk,Lse as bl,Rg as bm,vp as bn,Xte as bo,bM as bp,ete as bq,tte as br,Bl as bs,aC as bt,rte as bu,y2 as bv,Jee as bw,ste as bx,nd as by,ll as bz,Yr as c,jr as d,I4 as e,Qn as f,XV as g,fo as h,Fs as i,WJ as j,ed as k,ze as l,IM as m,yce as n,qce as o,Hce as p,QV as q,C as r,KV as s,ZV as t,ri as u,UJ as v,Ore as w,Oae as x,Mce as y,YV as z};
