import{u as p,b as u,a as f,r as l,j as e,M as y,l as j}from"./index-DW0FqHv7.js";const N=()=>{try{const s=window.location.pathname.match(/\/feed\/share\/(.+)/);if(s&&s[1]){const d=s[1],t=j.decompressFromEncodedURIComponent(d);return t?JSON.parse(t):(console.error("Failed to decompress feed item data"),null)}return null}catch(a){return console.error("Error decoding feed item data:",a),null}},v=()=>{const a=p(),[s]=u(),{isAuthenticated:d}=f(),[t,c]=l.useState(null),[m,x]=l.useState(!0),[o,i]=l.useState(null);l.useEffect(()=>{try{const r=N();r?(c(r),console.log("ðŸ“° Loaded shared feed item:",r.title||"Untitled")):i("Invalid or missing feed item data in URL")}catch(r){console.error("Failed to load shared feed item:",r),i("Failed to decode feed item data")}finally{x(!1)}},[s]);const h=()=>{a(d?"/?tab=feed":"/login?redirect=/?tab=feed")};return m?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading shared feed item..."})]})}):o||!t?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"âš ï¸"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Unable to Load Feed Item"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o||"The shared feed item could not be found or loaded."}),e.jsx("button",{onClick:h,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:d?"Go to Feed":"Go to Login"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Shared Feed Item"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Read-only preview"})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>a("/login?redirect="+encodeURIComponent(window.location.href)),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"Login"})})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.image&&e.jsx("div",{className:"w-full h-64 bg-gray-100 dark:bg-gray-700 overflow-hidden",children:e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover",onError:r=>{r.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:t.title}),t.topics&&t.topics.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.topics.map((r,n)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-sm rounded-full",children:r},n))}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Summary"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx(y,{content:t.content})})]}),t.mnemonic&&e.jsx("div",{className:"mb-6 bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-400 dark:border-purple-600 p-4 rounded",children:e.jsxs("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:["ðŸ’¡ ",t.mnemonic]})}),t.expandedContent&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"ðŸ“– Deep Dive"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none whitespace-pre-line text-gray-700 dark:text-gray-300 leading-relaxed",children:t.expandedContent})]}),t.sources&&t.sources.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"ðŸ“š Sources"}),e.jsx("ul",{className:"space-y-2",children:t.sources.map((r,n)=>{const g=typeof r=="string"?r:r.url,b=typeof r=="string"?r:r.title||r.url;return e.jsx("li",{children:e.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all text-sm",children:b})},n)})})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Want to explore more AI-curated content? Login using the button at the top-right to continue."})})]})]})};export{v as SharedFeedItemViewer};
