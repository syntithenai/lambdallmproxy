import{u as j,r as s,j as e}from"./index-Drh4wbhL.js";import{g as f}from"./quizShareUtils-CcdAYuAq.js";import{Q as p}from"./QuizCard-DStxwZsr.js";function k(){const a=j(),[r,d]=s.useState(null),[o,l]=s.useState(!0),[n,c]=s.useState(null),[i,u]=s.useState(null),[x,m]=s.useState(0);s.useEffect(()=>{const t=f();if(!t){c("Invalid or missing quiz data in URL"),l(!1);return}d(t),u(t.quiz),m(Date.now()),l(!1)},[]);const h=(t,b)=>{const g=Math.floor((Date.now()-x)/1e3);console.log("Quiz completed (shared, not saved):",{score:t,totalQuestions:b,duration:g,quiz:i?.title})};return o?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Loading quiz..."})]})}):n?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-600 dark:text-red-400 mb-4",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h2",{className:"text-xl font-semibold",children:"Unable to Load Quiz"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:n}),e.jsx("button",{onClick:()=>a("/"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Go to Home"})]})})}):!r||!i?null:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Shared Quiz"})}),e.jsx("div",{children:e.jsx("button",{onClick:()=>a("/login?redirect="+encodeURIComponent(window.location.href)),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:"Login"})})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Shared Quiz"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"This quiz was shared with you. Your results will only be stored locally on your device."}),r.metadata?.sharedBy&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["Shared by: ",r.metadata.sharedBy]}),r.metadata?.enrichment&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"âœ¨ This quiz includes AI-enriched questions"})]})]})}),e.jsx(p,{quiz:i,onClose:()=>a("/"),onComplete:h})]})]})}export{k as default};
