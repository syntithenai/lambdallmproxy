const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-Ba5yuCNh.js","assets/mixin-D3UDm--6.js","assets/hls-Bm3F2dIq.js","assets/react-B83jZhe5.js","assets/index-C3ZBIr4T.js","assets/dagre-6UL2VRFP-BjgZXCZ2.js","assets/graph-EKFrtjRy.js","assets/_baseUniq-C1XUdvdb.js","assets/layout-DonD3OJf.js","assets/_basePickBy-DCsmA5_Q.js","assets/clone-DZv82Ra_.js","assets/cose-bilkent-S5V4N54A-DVdNU9Ub.js","assets/cytoscape.esm-DtBltrT8.js","assets/c4Diagram-YG6GDRKO-8o9cuqc-.js","assets/chunk-TZMSLE5B-DapPBiVv.js","assets/flowDiagram-NV44I4VS-BfT1h5MV.js","assets/chunk-FMBD7UC4-De2EsRJg.js","assets/chunk-55IACEB6-Id6yBJzL.js","assets/chunk-QN33PNHL-JcnJEqON.js","assets/channel-COnlxlDl.js","assets/erDiagram-Q2GNP2WA-xn4rDrbc.js","assets/gitGraphDiagram-NY62KEGX-CESeNpTr.js","assets/chunk-4BX2VUAB-UieP3D_f.js","assets/chunk-QZHKN3VN-DVP6VbV9.js","assets/treemap-KMMF4GRG-BQlK1ca2.js","assets/ganttDiagram-LVOFAZNH-Dw1IKSaW.js","assets/linear-B4gXmKrc.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-F6ZHWCRC-nMEri5iD.js","assets/pieDiagram-ADFJNKIX-DrXpqPt1.js","assets/arc-DgqG9FJd.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-nkqfGW7b.js","assets/xychartDiagram-PRI3JC2R-CosmtLYY.js","assets/requirementDiagram-UZGBJVZJ-DgWnFORH.js","assets/sequenceDiagram-WL72ISMW-BV08jCdu.js","assets/classDiagram-2ON5EDUG-CLJiYTgZ.js","assets/chunk-B4BG7PRW-CEGt5_Bo.js","assets/classDiagram-v2-WZHVMYZB-CLJiYTgZ.js","assets/stateDiagram-FKZM4ZOC-CjEkM4NL.js","assets/chunk-DI55MBZ5-Dh_x7CuI.js","assets/stateDiagram-v2-4FDKWEC3-CluRuJ2L.js","assets/journeyDiagram-XKPGCS4Q-CZfbi-yz.js","assets/timeline-definition-IT6M3QCI-7Ai9crnA.js","assets/mindmap-definition-VGOIOE7T-Dsd_nTI6.js","assets/kanban-definition-3W4ZIXB7-CyMlC4Aq.js","assets/sankeyDiagram-TZEHDZUN-B3VAO84q.js","assets/diagram-S2PKOQOG-DD5ZgxBx.js","assets/diagram-QEK2KX5R-BVRLHGol.js","assets/blockDiagram-VD42YOAC-wTERfLuo.js","assets/architectureDiagram-VXUJARFQ-DrzKK4V8.js","assets/diagram-PSM6KHXK-CTV-V8fm.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hb={exports:{}},nh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function mD(){if(OE)return nh;OE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,i){var l=null;if(i!==void 0&&(l=""+i),s.key!==void 0&&(l=""+s.key),"key"in s){i={};for(var c in s)c!=="key"&&(i[c]=s[c])}else i=s;return s=i.ref,{$$typeof:e,type:n,key:l,ref:s!==void 0?s:null,props:i}}return nh.Fragment=t,nh.jsx=r,nh.jsxs=r,nh}var RE;function xD(){return RE||(RE=1,Hb.exports=mD()),Hb.exports}var a=xD(),qb={exports:{}},ah={},Gb={exports:{}},Yb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function bD(){return IE||(IE=1,(function(e){function t(O,q){var V=O.length;O.push(q);e:for(;0<V;){var ue=V-1>>>1,H=O[ue];if(0<s(H,q))O[ue]=q,O[V]=H,V=ue;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var q=O[0],V=O.pop();if(V!==q){O[0]=V;e:for(var ue=0,H=O.length,D=H>>>1;ue<D;){var z=2*(ue+1)-1,M=O[z],le=z+1,me=O[le];if(0>s(M,V))le<H&&0>s(me,M)?(O[ue]=me,O[le]=V,ue=le):(O[ue]=M,O[z]=V,ue=z);else if(le<H&&0>s(me,V))O[ue]=me,O[le]=V,ue=le;else break e}}return q}function s(O,q){var V=O.sortIndex-q.sortIndex;return V!==0?V:O.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],h=[],g=1,f=null,x=3,b=!1,y=!1,k=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(O){for(var q=r(h);q!==null;){if(q.callback===null)n(h);else if(q.startTime<=O)n(h),q.sortIndex=q.expirationTime,t(d,q);else break;q=r(h)}}function R(O){if(k=!1,I(O),!y)if(r(d)!==null)y=!0,B||(B=!0,ee());else{var q=r(h);q!==null&&U(R,q.startTime-O)}}var B=!1,F=-1,ae=5,G=-1;function $(){return S?!0:!(e.unstable_now()-G<ae)}function J(){if(S=!1,B){var O=e.unstable_now();G=O;var q=!0;try{e:{y=!1,k&&(k=!1,T(F),F=-1),b=!0;var V=x;try{t:{for(I(O),f=r(d);f!==null&&!(f.expirationTime>O&&$());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,x=f.priorityLevel;var H=ue(f.expirationTime<=O);if(O=e.unstable_now(),typeof H=="function"){f.callback=H,I(O),q=!0;break t}f===r(d)&&n(d),I(O)}else n(d);f=r(d)}if(f!==null)q=!0;else{var D=r(h);D!==null&&U(R,D.startTime-O),q=!1}}break e}finally{f=null,x=V,b=!1}q=void 0}}finally{q?ee():B=!1}}}var ee;if(typeof N=="function")ee=function(){N(J)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=J,ee=function(){j.postMessage(null)}}else ee=function(){_(J,0)};function U(O,q){F=_(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(O){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var V=x;x=q;try{return O()}finally{x=V}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=x;x=O;try{return q()}finally{x=V}},e.unstable_scheduleCallback=function(O,q,V){var ue=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ue+V:ue):V=ue,O){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,O={id:g++,callback:q,priorityLevel:O,startTime:V,expirationTime:H,sortIndex:-1},V>ue?(O.sortIndex=V,t(h,O),r(d)===null&&O===r(h)&&(k?(T(F),F=-1):k=!0,U(R,V-ue))):(O.sortIndex=H,t(d,O),y||b||(y=!0,B||(B=!0,ee()))),O},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(O){var q=x;return function(){var V=x;x=q;try{return O.apply(this,arguments)}finally{x=V}}}})(Yb)),Yb}var DE;function yD(){return DE||(DE=1,Gb.exports=bD()),Gb.exports}var Wb={exports:{}},cr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function vD(){if(PE)return cr;PE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),x=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function _(D,z,M){this.props=D,this.context=z,this.refs=S,this.updater=M||y}_.prototype.isReactComponent={},_.prototype.setState=function(D,z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,z,"setState")},_.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=_.prototype;function N(D,z,M){this.props=D,this.context=z,this.refs=S,this.updater=M||y}var I=N.prototype=new T;I.constructor=N,k(I,_.prototype),I.isPureReactComponent=!0;var R=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function G(D,z,M){var le=M.ref;return{$$typeof:e,type:D,key:z,ref:le!==void 0?le:null,props:M}}function $(D,z){return G(D.type,z,D.props)}function J(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function ee(D){var z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(M){return z[M]})}var W=/\/+/g;function j(D,z){return typeof D=="object"&&D!==null&&D.key!=null?ee(""+D.key):z.toString(36)}function U(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(B,B):(D.status="pending",D.then(function(z){D.status==="pending"&&(D.status="fulfilled",D.value=z)},function(z){D.status==="pending"&&(D.status="rejected",D.reason=z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function O(D,z,M,le,me){var Ee=typeof D;(Ee==="undefined"||Ee==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(Ee){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case e:case t:Ae=!0;break;case g:return Ae=D._init,O(Ae(D._payload),z,M,le,me)}}if(Ae)return me=me(D),Ae=le===""?"."+j(D,0):le,R(me)?(M="",Ae!=null&&(M=Ae.replace(W,"$&/")+"/"),O(me,z,M,"",function(ge){return ge})):me!=null&&(J(me)&&(me=$(me,M+(me.key==null||D&&D.key===me.key?"":(""+me.key).replace(W,"$&/")+"/")+Ae)),z.push(me)),1;Ae=0;var ve=le===""?".":le+":";if(R(D))for(var Pe=0;Pe<D.length;Pe++)le=D[Pe],Ee=ve+j(le,Pe),Ae+=O(le,z,M,Ee,me);else if(Pe=b(D),typeof Pe=="function")for(D=Pe.call(D),Pe=0;!(le=D.next()).done;)le=le.value,Ee=ve+j(le,Pe++),Ae+=O(le,z,M,Ee,me);else if(Ee==="object"){if(typeof D.then=="function")return O(U(D),z,M,le,me);throw z=String(D),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function q(D,z,M){if(D==null)return D;var le=[],me=0;return O(D,le,"","",function(Ee){return z.call(M,Ee,me++)}),le}function V(D){if(D._status===-1){var z=D._result;z=z(),z.then(function(M){(D._status===0||D._status===-1)&&(D._status=1,D._result=M)},function(M){(D._status===0||D._status===-1)&&(D._status=2,D._result=M)}),D._status===-1&&(D._status=0,D._result=z)}if(D._status===1)return D._result.default;throw D._result}var ue=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},H={map:q,forEach:function(D,z,M){q(D,function(){z.apply(this,arguments)},M)},count:function(D){var z=0;return q(D,function(){z++}),z},toArray:function(D){return q(D,function(z){return z})||[]},only:function(D){if(!J(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return cr.Activity=f,cr.Children=H,cr.Component=_,cr.Fragment=r,cr.Profiler=s,cr.PureComponent=N,cr.StrictMode=n,cr.Suspense=d,cr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,cr.__COMPILER_RUNTIME={__proto__:null,c:function(D){return F.H.useMemoCache(D)}},cr.cache=function(D){return function(){return D.apply(null,arguments)}},cr.cacheSignal=function(){return null},cr.cloneElement=function(D,z,M){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var le=k({},D.props),me=D.key;if(z!=null)for(Ee in z.key!==void 0&&(me=""+z.key),z)!ae.call(z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&z.ref===void 0||(le[Ee]=z[Ee]);var Ee=arguments.length-2;if(Ee===1)le.children=M;else if(1<Ee){for(var Ae=Array(Ee),ve=0;ve<Ee;ve++)Ae[ve]=arguments[ve+2];le.children=Ae}return G(D.type,me,le)},cr.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},cr.createElement=function(D,z,M){var le,me={},Ee=null;if(z!=null)for(le in z.key!==void 0&&(Ee=""+z.key),z)ae.call(z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=z[le]);var Ae=arguments.length-2;if(Ae===1)me.children=M;else if(1<Ae){for(var ve=Array(Ae),Pe=0;Pe<Ae;Pe++)ve[Pe]=arguments[Pe+2];me.children=ve}if(D&&D.defaultProps)for(le in Ae=D.defaultProps,Ae)me[le]===void 0&&(me[le]=Ae[le]);return G(D,Ee,me)},cr.createRef=function(){return{current:null}},cr.forwardRef=function(D){return{$$typeof:c,render:D}},cr.isValidElement=J,cr.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:V}},cr.memo=function(D,z){return{$$typeof:h,type:D,compare:z===void 0?null:z}},cr.startTransition=function(D){var z=F.T,M={};F.T=M;try{var le=D(),me=F.S;me!==null&&me(M,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(B,ue)}catch(Ee){ue(Ee)}finally{z!==null&&M.types!==null&&(z.types=M.types),F.T=z}},cr.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},cr.use=function(D){return F.H.use(D)},cr.useActionState=function(D,z,M){return F.H.useActionState(D,z,M)},cr.useCallback=function(D,z){return F.H.useCallback(D,z)},cr.useContext=function(D){return F.H.useContext(D)},cr.useDebugValue=function(){},cr.useDeferredValue=function(D,z){return F.H.useDeferredValue(D,z)},cr.useEffect=function(D,z){return F.H.useEffect(D,z)},cr.useEffectEvent=function(D){return F.H.useEffectEvent(D)},cr.useId=function(){return F.H.useId()},cr.useImperativeHandle=function(D,z,M){return F.H.useImperativeHandle(D,z,M)},cr.useInsertionEffect=function(D,z){return F.H.useInsertionEffect(D,z)},cr.useLayoutEffect=function(D,z){return F.H.useLayoutEffect(D,z)},cr.useMemo=function(D,z){return F.H.useMemo(D,z)},cr.useOptimistic=function(D,z){return F.H.useOptimistic(D,z)},cr.useReducer=function(D,z,M){return F.H.useReducer(D,z,M)},cr.useRef=function(D){return F.H.useRef(D)},cr.useState=function(D){return F.H.useState(D)},cr.useSyncExternalStore=function(D,z,M){return F.H.useSyncExternalStore(D,z,M)},cr.useTransition=function(){return F.H.useTransition()},cr.version="19.2.0",cr}var BE;function J0(){return BE||(BE=1,Wb.exports=vD()),Wb.exports}var Vb={exports:{}},Ma={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function kD(){if(FE)return Ma;FE=1;var e=J0();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(d,h,g){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:d,containerInfo:h,implementation:g}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ma.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ma.createPortal=function(d,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(d,h,null,g)},Ma.flushSync=function(d){var h=l.T,g=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=g,n.d.f()}},Ma.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Ma.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ma.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var g=h.as,f=c(g,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:x,fetchPriority:b}):g==="script"&&n.d.X(d,{crossOrigin:f,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ma.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Ma.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,f=c(g,h.crossOrigin);n.d.L(d,g,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ma.preloadModule=function(d,h){if(typeof d=="string")if(h){var g=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Ma.requestFormReset=function(d){n.d.r(d)},Ma.unstable_batchedUpdates=function(d,h){return d(h)},Ma.useFormState=function(d,h,g){return l.H.useFormState(d,h,g)},Ma.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ma.version="19.2.0",Ma}var $E;function QN(){if($E)return Vb.exports;$E=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vb.exports=kD(),Vb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function wD(){if(UE)return ah;UE=1;var e=yD(),t=J0(),r=QN();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var u=o,p=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(p=u.return),o=u.return;while(o)}return u.tag===3?p:null}function l(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function d(o){if(i(o)!==o)throw Error(n(188))}function h(o){var u=o.alternate;if(!u){if(u=i(o),u===null)throw Error(n(188));return u!==o?null:o}for(var p=o,m=u;;){var v=p.return;if(v===null)break;var w=v.alternate;if(w===null){if(m=v.return,m!==null){p=m;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===p)return d(v),o;if(w===m)return d(v),u;w=w.sibling}throw Error(n(188))}if(p.return!==m.return)p=v,m=w;else{for(var L=!1,Y=v.child;Y;){if(Y===p){L=!0,p=v,m=w;break}if(Y===m){L=!0,m=v,p=w;break}Y=Y.sibling}if(!L){for(Y=w.child;Y;){if(Y===p){L=!0,p=w,m=v;break}if(Y===m){L=!0,m=w,p=v;break}Y=Y.sibling}if(!L)throw Error(n(189))}}if(p.alternate!==m)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:u}function g(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=g(o),u!==null)return u;o=o.sibling}return null}var f=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ee(o){return o===null||typeof o!="object"?null:(o=J&&o[J]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function j(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case B:return"SuspenseList";case G:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case y:return"Portal";case N:return o.displayName||"Context";case T:return(o._context.displayName||"Context")+".Consumer";case I:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return u=o.displayName||null,u!==null?u:j(o.type)||"Memo";case ae:u=o._payload,o=o._init;try{return j(o(u))}catch{}}return null}var U=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ue=[],H=-1;function D(o){return{current:o}}function z(o){0>H||(o.current=ue[H],ue[H]=null,H--)}function M(o,u){H++,ue[H]=o.current,o.current=u}var le=D(null),me=D(null),Ee=D(null),Ae=D(null);function ve(o,u){switch(M(Ee,u),M(me,o),M(le,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?rE(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=rE(u),o=nE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}z(le),M(le,o)}function Pe(){z(le),z(me),z(Ee)}function ge(o){o.memoizedState!==null&&M(Ae,o);var u=le.current,p=nE(u,o.type);u!==p&&(M(me,o),M(le,p))}function Be(o){me.current===o&&(z(le),z(me)),Ae.current===o&&(z(Ae),Zd._currentValue=V)}var ht,ye;function ut(o){if(ht===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);ht=u&&u[1]||"",ye=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+o+ye}var Et=!1;function Ze(o,u){if(!o||Et)return"";Et=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(je){var Ce=je}Reflect.construct(o,[],ze)}else{try{ze.call()}catch(je){Ce=je}o.call(ze.prototype)}}else{try{throw Error()}catch(je){Ce=je}(ze=o())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(je){if(je&&Ce&&typeof je.stack=="string")return[je.stack,Ce.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),L=w[0],Y=w[1];if(L&&Y){var oe=L.split(`
`),_e=Y.split(`
`);for(v=m=0;m<oe.length&&!oe[m].includes("DetermineComponentFrameRoot");)m++;for(;v<_e.length&&!_e[v].includes("DetermineComponentFrameRoot");)v++;if(m===oe.length||v===_e.length)for(m=oe.length-1,v=_e.length-1;1<=m&&0<=v&&oe[m]!==_e[v];)v--;for(;1<=m&&0<=v;m--,v--)if(oe[m]!==_e[v]){if(m!==1||v!==1)do if(m--,v--,0>v||oe[m]!==_e[v]){var Ie=`
`+oe[m].replace(" at new "," at ");return o.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",o.displayName)),Ie}while(1<=m&&0<=v);break}}}finally{Et=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?ut(p):""}function kt(o,u){switch(o.tag){case 26:case 27:case 5:return ut(o.type);case 16:return ut("Lazy");case 13:return o.child!==u&&u!==null?ut("Suspense Fallback"):ut("Suspense");case 19:return ut("SuspenseList");case 0:case 15:return Ze(o.type,!1);case 11:return Ze(o.type.render,!1);case 1:return Ze(o.type,!0);case 31:return ut("Activity");default:return""}}function Rt(o){try{var u="",p=null;do u+=kt(o,p),p=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var ur=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,bt=e.unstable_cancelCallback,tn=e.unstable_shouldYield,ar=e.unstable_requestPaint,Kt=e.unstable_now,On=e.unstable_getCurrentPriorityLevel,X=e.unstable_ImmediatePriority,he=e.unstable_UserBlockingPriority,Re=e.unstable_NormalPriority,gt=e.unstable_LowPriority,Qe=e.unstable_IdlePriority,zt=e.log,Gt=e.unstable_setDisableYieldValue,dt=null,jt=null;function Zt(o){if(typeof zt=="function"&&Gt(o),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(dt,o)}catch{}}var Jt=Math.clz32?Math.clz32:Bt,Rn=Math.log,zr=Math.LN2;function Bt(o){return o>>>=0,o===0?32:31-(Rn(o)/zr|0)|0}var rn=256,ma=262144,xa=4194304;function Sn(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ie(o,u,p){var m=o.pendingLanes;if(m===0)return 0;var v=0,w=o.suspendedLanes,L=o.pingedLanes;o=o.warmLanes;var Y=m&134217727;return Y!==0?(m=Y&~w,m!==0?v=Sn(m):(L&=Y,L!==0?v=Sn(L):p||(p=Y&~o,p!==0&&(v=Sn(p))))):(Y=m&~w,Y!==0?v=Sn(Y):L!==0?v=Sn(L):p||(p=m&~o,p!==0&&(v=Sn(p)))),v===0?0:u!==0&&u!==v&&(u&w)===0&&(w=v&-v,p=u&-u,w>=p||w===32&&(p&4194048)!==0)?u:v}function Oe(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Ye(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(){var o=xa;return xa<<=1,(xa&62914560)===0&&(xa=4194304),o}function xr(o){for(var u=[],p=0;31>p;p++)u.push(o);return u}function wr(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function xt(o,u,p,m,v,w){var L=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var Y=o.entanglements,oe=o.expirationTimes,_e=o.hiddenUpdates;for(p=L&~p;0<p;){var Ie=31-Jt(p),ze=1<<Ie;Y[Ie]=0,oe[Ie]=-1;var Ce=_e[Ie];if(Ce!==null)for(_e[Ie]=null,Ie=0;Ie<Ce.length;Ie++){var je=Ce[Ie];je!==null&&(je.lane&=-536870913)}p&=~ze}m!==0&&pt(o,m,0),w!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=w&~(L&~u))}function pt(o,u,p){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-Jt(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|p&261930}function _t(o,u){var p=o.entangledLanes|=u;for(o=o.entanglements;p;){var m=31-Jt(p),v=1<<m;v&u|o[m]&u&&(o[m]|=u),p&=~v}}function Kr(o,u){var p=u&-u;return p=(p&42)!==0?1:pr(p),(p&(o.suspendedLanes|u))!==0?0:p}function pr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function En(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Na(){var o=q.p;return o!==0?o:(o=window.event,o===void 0?32:TE(o.type))}function Ft(o,u){var p=q.p;try{return q.p=o,u()}finally{q.p=p}}var Fn=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Fn,Sr="__reactProps$"+Fn,$n="__reactContainer$"+Fn,Aa="__reactEvents$"+Fn,ts="__reactListeners$"+Fn,Ha="__reactHandles$"+Fn,qa="__reactResources$"+Fn,wt="__reactMarker$"+Fn;function ce(o){delete o[Fr],delete o[Sr],delete o[Aa],delete o[ts],delete o[Ha]}function He(o){var u=o[Fr];if(u)return u;for(var p=o.parentNode;p;){if(u=p[$n]||p[Fr]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(o=uE(o);o!==null;){if(p=o[Fr])return p;o=uE(o)}return u}o=p,p=o.parentNode}return null}function mt(o){if(o=o[Fr]||o[$n]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Er(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function nn(o){var u=o[qa];return u||(u=o[qa]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function er(o){o[wt]=!0}var an=new Set,In={};function Un(o,u){Ge(o,u),Ge(o+"Capture",u)}function Ge(o,u){for(In[o]=u,o=0;o<u.length;o++)an.add(u[o])}var lt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rr={},vr={};function sn(o){return ur.call(vr,o)?!0:ur.call(rr,o)?!1:lt.test(o)?vr[o]=!0:(rr[o]=!0,!1)}function Dn(o,u,p){if(sn(u))if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+p)}}function Vn(o,u,p){if(p===null)o.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+p)}}function Hr(o,u,p,m){if(m===null)o.removeAttribute(p);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(u,p,""+m)}}function ne(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function we(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function We(o,u,p){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,w=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return v.call(this)},set:function(L){p=""+L,w.call(this,L)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ct(o){if(!o._valueTracker){var u=we(o)?"checked":"value";o._valueTracker=We(o,u,""+o[u])}}function dr(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var p=u.getValue(),m="";return o&&(m=we(o)?o.checked?"true":"false":o.value),o=m,o!==p?(u.setValue(o),!0):!1}function Mr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var An=/[\n"\\]/g;function $r(o){return o.replace(An,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function rs(o,u,p,m,v,w,L,Y){o.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.type=L:o.removeAttribute("type"),u!=null?L==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+ne(u)):o.value!==""+ne(u)&&(o.value=""+ne(u)):L!=="submit"&&L!=="reset"||o.removeAttribute("value"),u!=null?Rr(o,L,ne(u)):p!=null?Rr(o,L,ne(p)):m!=null&&o.removeAttribute("value"),v==null&&w!=null&&(o.defaultChecked=!!w),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.name=""+ne(Y):o.removeAttribute("name")}function br(o,u,p,m,v,w,L,Y){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),u!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||u!=null)){Ct(o);return}p=p!=null?""+ne(p):"",u=u!=null?""+ne(u):p,Y||u===o.value||(o.value=u),o.defaultValue=u}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=Y?o.checked:!!m,o.defaultChecked=!!m,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.name=L),Ct(o)}function Rr(o,u,p){u==="number"&&Mr(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function qr(o,u,p,m){if(o=o.options,u){u={};for(var v=0;v<p.length;v++)u["$"+p[v]]=!0;for(p=0;p<o.length;p++)v=u.hasOwnProperty("$"+o[p].value),o[p].selected!==v&&(o[p].selected=v),v&&m&&(o[p].defaultSelected=!0)}else{for(p=""+ne(p),u=null,v=0;v<o.length;v++){if(o[v].value===p){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}u!==null||o[v].disabled||(u=o[v])}u!==null&&(u.selected=!0)}}function ca(o,u,p){if(u!=null&&(u=""+ne(u),u!==o.value&&(o.value=u),p==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=p!=null?""+ne(p):""}function ua(o,u,p,m){if(u==null){if(m!=null){if(p!=null)throw Error(n(92));if(U(m)){if(1<m.length)throw Error(n(93));m=m[0]}p=m}p==null&&(p=""),u=p}p=ne(u),o.defaultValue=p,m=o.textContent,m===p&&m!==""&&m!==null&&(o.value=m),Ct(o)}function ot(o,u){if(u){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=u;return}}o.textContent=u}var ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jn(o,u,p){var m=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,p):typeof p!="number"||p===0||ri.has(u)?u==="float"?o.cssFloat=p:o[u]=(""+p).trim():o[u]=p+"px"}function Ir(o,u,p){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,p!=null){for(var m in p)!p.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var v in u)m=u[v],u.hasOwnProperty(v)&&p[v]!==m&&jn(o,v,m)}else for(var w in u)u.hasOwnProperty(w)&&jn(o,w,u[w])}function Rs(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Is=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),da=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(o){return da.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ct(){}var Lt=null;function sr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yr=null,Xr=null;function ja(o){var u=mt(o);if(u&&(o=u.stateNode)){var p=o[Sr]||null;e:switch(o=u.stateNode,u.type){case"input":if(rs(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+$r(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var m=p[u];if(m!==o&&m.form===o.form){var v=m[Sr]||null;if(!v)throw Error(n(90));rs(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<p.length;u++)m=p[u],m.form===o.form&&dr(m)}break e;case"textarea":ca(o,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&qr(o,!!p.multiple,u,!1)}}}var vi=!1;function Ac(o,u,p){if(vi)return o(u,p);vi=!0;try{var m=o(u);return m}finally{if(vi=!1,(yr!==null||Xr!==null)&&(Fp(),yr&&(u=yr,o=Xr,Xr=yr=null,ja(u),o)))for(u=0;u<o.length;u++)ja(o[u])}}function vl(o,u){var p=o.stateNode;if(p===null)return null;var m=p[Sr]||null;if(m===null)return null;p=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=!1;if(Qr)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){jc=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{jc=!1}var ni=null,xd=null,ai=null;function Yi(){if(ai)return ai;var o,u=xd,p=u.length,m,v="value"in ni?ni.value:ni.textContent,w=v.length;for(o=0;o<p&&u[o]===v[o];o++);var L=p-o;for(m=1;m<=L&&u[p-m]===v[w-m];m++);return ai=v.slice(o,1<m?1-m:void 0)}function Lc(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Mc(){return!0}function Jg(){return!1}function La(o){function u(p,m,v,w,L){this._reactName=p,this._targetInst=v,this.type=m,this.nativeEvent=w,this.target=L,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(p=o[Y],this[Y]=p?p(w):w[Y]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Mc:Jg,this.isPropagationStopped=Jg,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),u}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=La(Wi),jo=f({},Wi,{view:0,detail:0}),zm=La(jo),bd,yd,wl,Sl=f({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==wl&&(wl&&o.type==="mousemove"?(bd=o.screenX-wl.screenX,yd=o.screenY-wl.screenY):yd=bd=0,wl=o),bd)},movementY:function(o){return"movementY"in o?o.movementY:yd}}),Zg=La(Sl),El=f({},Sl,{dataTransfer:0}),Hm=La(El),qm=f({},jo,{relatedTarget:0}),vd=La(qm),Gm=f({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ym=La(Gm),Wm=f({},Wi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Vm=La(Wm),Km=f({},Wi,{data:0}),ep=La(Km),tp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jm(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Qm[o])?!!u[o]:!1}function P(){return Jm}var te=f({},jo,{key:function(o){if(o.key){var u=tp[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Lc(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Xm[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P,charCode:function(o){return o.type==="keypress"?Lc(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Lc(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Le=La(te),it=f({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ue=La(it),Z=f({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P}),Ke=La(Z),Te=f({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),De=La(Te),pe=f({},Sl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),et=La(pe),Ve=f({},Wi,{newState:0,oldState:0}),Ne=La(Ve),nt=[9,13,27,32],ir=Qr&&"CompositionEvent"in window,xn=null;Qr&&"documentMode"in document&&(xn=document.documentMode);var ys=Qr&&"TextEvent"in window&&!xn,ns=Qr&&(!ir||xn&&8<xn&&11>=xn),ha=" ",kd=!1;function Oc(o,u){switch(o){case"keyup":return nt.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Lo=!1;function Zm(o,u){switch(o){case"compositionend":return rp(u);case"keypress":return u.which!==32?null:(kd=!0,ha);case"textInput":return o=u.data,o===ha&&kd?null:o;default:return null}}function np(o,u){if(Lo)return o==="compositionend"||!ir&&Oc(o,u)?(o=Yi(),ai=xd=ni=null,Lo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ns&&u.locale!=="ko"?null:u.data;default:return null}}var wd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!wd[o.type]:u==="textarea"}function Ps(o,u,p,m){yr?Xr?Xr.push(m):Xr=[m]:yr=m,u=Yp(u,"onChange"),0<u.length&&(p=new Ds("onChange","change",null,p,m),o.push({event:p,listeners:u}))}var Vi=null,_l=null;function Sd(o){XS(o,0)}function Wt(o){var u=Er(o);if(dr(u))return o}function K(o,u){if(o==="change")return u}var ya=!1;if(Qr){var Ln;if(Qr){var Ki="oninput"in document;if(!Ki){var Tl=document.createElement("div");Tl.setAttribute("oninput","return;"),Ki=typeof Tl.oninput=="function"}Ln=Ki}else Ln=!1;ya=Ln&&(!document.documentMode||9<document.documentMode)}function Ed(){Vi&&(Vi.detachEvent("onpropertychange",vs),_l=Vi=null)}function vs(o){if(o.propertyName==="value"&&Wt(_l)){var u=[];Ps(u,_l,o,sr(o)),Ac(Sd,u)}}function ap(o,u,p){o==="focusin"?(Ed(),Vi=u,_l=p,Vi.attachEvent("onpropertychange",vs)):o==="focusout"&&Ed()}function Je(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Wt(_l)}function xe(o,u){if(o==="click")return Wt(u)}function Fe(o,u){if(o==="input"||o==="change")return Wt(u)}function $t(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var St=typeof Object.is=="function"?Object.is:$t;function rt(o,u){if(St(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var p=Object.keys(o),m=Object.keys(u);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++){var v=p[m];if(!ur.call(u,v)||!St(o[v],u[v]))return!1}return!0}function Dr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Kn(o,u){var p=Dr(o);o=0;for(var m;p;){if(p.nodeType===3){if(m=o+p.textContent.length,o<=u&&m>=u)return{node:p,offset:u-o};o=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Dr(p)}}function _n(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?_n(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function on(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Mr(o.document);u instanceof o.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)o=u.contentWindow;else break;u=Mr(o.document)}return u}function Jr(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var si=Qr&&"documentMode"in document&&11>=document.documentMode,Ur=null,zn=null,as=null,ex=!1;function Ek(o,u,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ex||Ur==null||Ur!==Mr(m)||(m=Ur,"selectionStart"in m&&Jr(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),as&&rt(as,m)||(as=m,m=Yp(zn,"onSelect"),0<m.length&&(u=new Ds("onSelect","select",null,u,p),o.push({event:u,listeners:m}),u.target=Ur)))}function Cl(o,u){var p={};return p[o.toLowerCase()]=u.toLowerCase(),p["Webkit"+o]="webkit"+u,p["Moz"+o]="moz"+u,p}var Ic={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionrun:Cl("Transition","TransitionRun"),transitionstart:Cl("Transition","TransitionStart"),transitioncancel:Cl("Transition","TransitionCancel"),transitionend:Cl("Transition","TransitionEnd")},tx={},_k={};Qr&&(_k=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Nl(o){if(tx[o])return tx[o];if(!Ic[o])return o;var u=Ic[o],p;for(p in u)if(u.hasOwnProperty(p)&&p in _k)return tx[o]=u[p];return o}var Tk=Nl("animationend"),Ck=Nl("animationiteration"),Nk=Nl("animationstart"),XI=Nl("transitionrun"),QI=Nl("transitionstart"),JI=Nl("transitioncancel"),Ak=Nl("transitionend"),jk=new Map,rx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rx.push("scrollEnd");function ii(o,u){jk.set(o,u),Un(u,[o])}var sp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Bs=[],Dc=0,nx=0;function ip(){for(var o=Dc,u=nx=Dc=0;u<o;){var p=Bs[u];Bs[u++]=null;var m=Bs[u];Bs[u++]=null;var v=Bs[u];Bs[u++]=null;var w=Bs[u];if(Bs[u++]=null,m!==null&&v!==null){var L=m.pending;L===null?v.next=v:(v.next=L.next,L.next=v),m.pending=v}w!==0&&Lk(p,v,w)}}function op(o,u,p,m){Bs[Dc++]=o,Bs[Dc++]=u,Bs[Dc++]=p,Bs[Dc++]=m,nx|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function ax(o,u,p,m){return op(o,u,p,m),lp(o)}function Al(o,u){return op(o,null,null,u),lp(o)}function Lk(o,u,p){o.lanes|=p;var m=o.alternate;m!==null&&(m.lanes|=p);for(var v=!1,w=o.return;w!==null;)w.childLanes|=p,m=w.alternate,m!==null&&(m.childLanes|=p),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(v=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,v&&u!==null&&(v=31-Jt(p),o=w.hiddenUpdates,m=o[v],m===null?o[v]=[u]:m.push(u),u.lane=p|536870912),w):null}function lp(o){if(50<Yd)throw Yd=0,gb=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Pc={};function ZI(o,u,p,m){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(o,u,p,m){return new ZI(o,u,p,m)}function sx(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Xi(o,u){var p=o.alternate;return p===null?(p=ks(o.tag,u,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=u,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,u=o.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function Mk(o,u){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,u=p.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function cp(o,u,p,m,v,w){var L=0;if(m=o,typeof o=="function")sx(o)&&(L=1);else if(typeof o=="string")L=aD(o,p,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case G:return o=ks(31,p,u,v),o.elementType=G,o.lanes=w,o;case k:return jl(p.children,v,w,u);case S:L=8,v|=24;break;case _:return o=ks(12,p,u,v|2),o.elementType=_,o.lanes=w,o;case R:return o=ks(13,p,u,v),o.elementType=R,o.lanes=w,o;case B:return o=ks(19,p,u,v),o.elementType=B,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:L=10;break e;case T:L=9;break e;case I:L=11;break e;case F:L=14;break e;case ae:L=16,m=null;break e}L=29,p=Error(n(130,o===null?"null":typeof o,"")),m=null}return u=ks(L,p,u,v),u.elementType=o,u.type=m,u.lanes=w,u}function jl(o,u,p,m){return o=ks(7,o,m,u),o.lanes=p,o}function ix(o,u,p){return o=ks(6,o,null,u),o.lanes=p,o}function Ok(o){var u=ks(18,null,null,0);return u.stateNode=o,u}function ox(o,u,p){return u=ks(4,o.children!==null?o.children:[],o.key,u),u.lanes=p,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Rk=new WeakMap;function Fs(o,u){if(typeof o=="object"&&o!==null){var p=Rk.get(o);return p!==void 0?p:(u={value:o,source:u,stack:Rt(u)},Rk.set(o,u),u)}return{value:o,source:u,stack:Rt(u)}}var Bc=[],Fc=0,up=null,_d=0,$s=[],Us=0,Mo=null,ki=1,wi="";function Qi(o,u){Bc[Fc++]=_d,Bc[Fc++]=up,up=o,_d=u}function Ik(o,u,p){$s[Us++]=ki,$s[Us++]=wi,$s[Us++]=Mo,Mo=o;var m=ki;o=wi;var v=32-Jt(m)-1;m&=~(1<<v),p+=1;var w=32-Jt(u)+v;if(30<w){var L=v-v%5;w=(m&(1<<L)-1).toString(32),m>>=L,v-=L,ki=1<<32-Jt(u)+v|p<<v|m,wi=w+o}else ki=1<<w|p<<v|m,wi=o}function lx(o){o.return!==null&&(Qi(o,1),Ik(o,1,0))}function cx(o){for(;o===up;)up=Bc[--Fc],Bc[Fc]=null,_d=Bc[--Fc],Bc[Fc]=null;for(;o===Mo;)Mo=$s[--Us],$s[Us]=null,wi=$s[--Us],$s[Us]=null,ki=$s[--Us],$s[Us]=null}function Dk(o,u){$s[Us++]=ki,$s[Us++]=wi,$s[Us++]=Mo,ki=u.id,wi=u.overflow,Mo=o}var va=null,vn=null,Or=!1,Oo=null,zs=!1,ux=Error(n(519));function Ro(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Td(Fs(u,o)),ux}function Pk(o){var u=o.stateNode,p=o.type,m=o.memoizedProps;switch(u[Fr]=o,u[Sr]=m,p){case"dialog":Tr("cancel",u),Tr("close",u);break;case"iframe":case"object":case"embed":Tr("load",u);break;case"video":case"audio":for(p=0;p<Vd.length;p++)Tr(Vd[p],u);break;case"source":Tr("error",u);break;case"img":case"image":case"link":Tr("error",u),Tr("load",u);break;case"details":Tr("toggle",u);break;case"input":Tr("invalid",u),br(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Tr("invalid",u);break;case"textarea":Tr("invalid",u),ua(u,m.value,m.defaultValue,m.children)}p=m.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||m.suppressHydrationWarning===!0||eE(u.textContent,p)?(m.popover!=null&&(Tr("beforetoggle",u),Tr("toggle",u)),m.onScroll!=null&&Tr("scroll",u),m.onScrollEnd!=null&&Tr("scrollend",u),m.onClick!=null&&(u.onclick=ct),u=!0):u=!1,u||Ro(o,!0)}function Bk(o){for(va=o.return;va;)switch(va.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:va=va.return}}function $c(o){if(o!==va)return!1;if(!Or)return Bk(o),Or=!0,!1;var u=o.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||Nb(o.type,o.memoizedProps)),p=!p),p&&vn&&Ro(o),Bk(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));vn=cE(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));vn=cE(o)}else u===27?(u=vn,Vo(o.type)?(o=Ob,Ob=null,vn=o):vn=u):vn=va?qs(o.stateNode.nextSibling):null;return!0}function Ll(){vn=va=null,Or=!1}function dx(){var o=Oo;return o!==null&&(ls===null?ls=o:ls.push.apply(ls,o),Oo=null),o}function Td(o){Oo===null?Oo=[o]:Oo.push(o)}var hx=D(null),Ml=null,Ji=null;function Io(o,u,p){M(hx,u._currentValue),u._currentValue=p}function Zi(o){o._currentValue=hx.current,z(hx)}function gx(o,u,p){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===p)break;o=o.return}}function px(o,u,p,m){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var w=v.dependencies;if(w!==null){var L=v.child;w=w.firstContext;e:for(;w!==null;){var Y=w;w=v;for(var oe=0;oe<u.length;oe++)if(Y.context===u[oe]){w.lanes|=p,Y=w.alternate,Y!==null&&(Y.lanes|=p),gx(w.return,p,o),m||(L=null);break e}w=Y.next}}else if(v.tag===18){if(L=v.return,L===null)throw Error(n(341));L.lanes|=p,w=L.alternate,w!==null&&(w.lanes|=p),gx(L,p,o),L=null}else L=v.child;if(L!==null)L.return=v;else for(L=v;L!==null;){if(L===o){L=null;break}if(v=L.sibling,v!==null){v.return=L.return,L=v;break}L=L.return}v=L}}function Uc(o,u,p,m){o=null;for(var v=u,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var L=v.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var Y=v.type;St(v.pendingProps.value,L.value)||(o!==null?o.push(Y):o=[Y])}}else if(v===Ae.current){if(L=v.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Zd):o=[Zd])}v=v.return}o!==null&&px(u,o,p,m),u.flags|=262144}function dp(o){for(o=o.firstContext;o!==null;){if(!St(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ol(o){Ml=o,Ji=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ka(o){return Fk(Ml,o)}function hp(o,u){return Ml===null&&Ol(o),Fk(o,u)}function Fk(o,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},Ji===null){if(o===null)throw Error(n(308));Ji=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Ji=Ji.next=u;return p}var e6=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(p,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(p){return p()})}},t6=e.unstable_scheduleCallback,r6=e.unstable_NormalPriority,Xn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fx(){return{controller:new e6,data:new Map,refCount:0}}function Cd(o){o.refCount--,o.refCount===0&&t6(r6,function(){o.controller.abort()})}var Nd=null,mx=0,zc=0,Hc=null;function n6(o,u){if(Nd===null){var p=Nd=[];mx=0,zc=yb(),Hc={status:"pending",value:void 0,then:function(m){p.push(m)}}}return mx++,u.then($k,$k),u}function $k(){if(--mx===0&&Nd!==null){Hc!==null&&(Hc.status="fulfilled");var o=Nd;Nd=null,zc=0,Hc=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function a6(o,u){var p=[],m={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var v=0;v<p.length;v++)(0,p[v])(u)},function(v){for(m.status="rejected",m.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),m}var Uk=O.S;O.S=function(o,u){ES=Kt(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&n6(o,u),Uk!==null&&Uk(o,u)};var Rl=D(null);function xx(){var o=Rl.current;return o!==null?o:fn.pooledCache}function gp(o,u){u===null?M(Rl,Rl.current):M(Rl,u.pool)}function zk(){var o=xx();return o===null?null:{parent:Xn._currentValue,pool:o}}var qc=Error(n(460)),bx=Error(n(474)),pp=Error(n(542)),fp={then:function(){}};function Hk(o){return o=o.status,o==="fulfilled"||o==="rejected"}function qk(o,u,p){switch(p=o[p],p===void 0?o.push(u):p!==u&&(u.then(ct,ct),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Yk(o),o;default:if(typeof u.status=="string")u.then(ct,ct);else{if(o=fn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=m}},function(m){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Yk(o),o}throw Dl=u,qc}}function Il(o){try{var u=o._init;return u(o._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Dl=p,qc):p}}var Dl=null;function Gk(){if(Dl===null)throw Error(n(459));var o=Dl;return Dl=null,o}function Yk(o){if(o===qc||o===pp)throw Error(n(483))}var Gc=null,Ad=0;function mp(o){var u=Ad;return Ad+=1,Gc===null&&(Gc=[]),qk(Gc,o,u)}function jd(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function xp(o,u){throw u.$$typeof===x?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Wk(o){function u(fe,de){if(o){var Se=fe.deletions;Se===null?(fe.deletions=[de],fe.flags|=16):Se.push(de)}}function p(fe,de){if(!o)return null;for(;de!==null;)u(fe,de),de=de.sibling;return null}function m(fe){for(var de=new Map;fe!==null;)fe.key!==null?de.set(fe.key,fe):de.set(fe.index,fe),fe=fe.sibling;return de}function v(fe,de){return fe=Xi(fe,de),fe.index=0,fe.sibling=null,fe}function w(fe,de,Se){return fe.index=Se,o?(Se=fe.alternate,Se!==null?(Se=Se.index,Se<de?(fe.flags|=67108866,de):Se):(fe.flags|=67108866,de)):(fe.flags|=1048576,de)}function L(fe){return o&&fe.alternate===null&&(fe.flags|=67108866),fe}function Y(fe,de,Se,$e){return de===null||de.tag!==6?(de=ix(Se,fe.mode,$e),de.return=fe,de):(de=v(de,Se),de.return=fe,de)}function oe(fe,de,Se,$e){var Ht=Se.type;return Ht===k?Ie(fe,de,Se.props.children,$e,Se.key):de!==null&&(de.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===ae&&Il(Ht)===de.type)?(de=v(de,Se.props),jd(de,Se),de.return=fe,de):(de=cp(Se.type,Se.key,Se.props,null,fe.mode,$e),jd(de,Se),de.return=fe,de)}function _e(fe,de,Se,$e){return de===null||de.tag!==4||de.stateNode.containerInfo!==Se.containerInfo||de.stateNode.implementation!==Se.implementation?(de=ox(Se,fe.mode,$e),de.return=fe,de):(de=v(de,Se.children||[]),de.return=fe,de)}function Ie(fe,de,Se,$e,Ht){return de===null||de.tag!==7?(de=jl(Se,fe.mode,$e,Ht),de.return=fe,de):(de=v(de,Se),de.return=fe,de)}function ze(fe,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=ix(""+de,fe.mode,Se),de.return=fe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return Se=cp(de.type,de.key,de.props,null,fe.mode,Se),jd(Se,de),Se.return=fe,Se;case y:return de=ox(de,fe.mode,Se),de.return=fe,de;case ae:return de=Il(de),ze(fe,de,Se)}if(U(de)||ee(de))return de=jl(de,fe.mode,Se,null),de.return=fe,de;if(typeof de.then=="function")return ze(fe,mp(de),Se);if(de.$$typeof===N)return ze(fe,hp(fe,de),Se);xp(fe,de)}return null}function Ce(fe,de,Se,$e){var Ht=de!==null?de.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Ht!==null?null:Y(fe,de,""+Se,$e);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:return Se.key===Ht?oe(fe,de,Se,$e):null;case y:return Se.key===Ht?_e(fe,de,Se,$e):null;case ae:return Se=Il(Se),Ce(fe,de,Se,$e)}if(U(Se)||ee(Se))return Ht!==null?null:Ie(fe,de,Se,$e,null);if(typeof Se.then=="function")return Ce(fe,de,mp(Se),$e);if(Se.$$typeof===N)return Ce(fe,de,hp(fe,Se),$e);xp(fe,Se)}return null}function je(fe,de,Se,$e,Ht){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return fe=fe.get(Se)||null,Y(de,fe,""+$e,Ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return fe=fe.get($e.key===null?Se:$e.key)||null,oe(de,fe,$e,Ht);case y:return fe=fe.get($e.key===null?Se:$e.key)||null,_e(de,fe,$e,Ht);case ae:return $e=Il($e),je(fe,de,Se,$e,Ht)}if(U($e)||ee($e))return fe=fe.get(Se)||null,Ie(de,fe,$e,Ht,null);if(typeof $e.then=="function")return je(fe,de,Se,mp($e),Ht);if($e.$$typeof===N)return je(fe,de,Se,hp(de,$e),Ht);xp(de,$e)}return null}function Tt(fe,de,Se,$e){for(var Ht=null,Gr=null,Dt=de,fr=de=0,Lr=null;Dt!==null&&fr<Se.length;fr++){Dt.index>fr?(Lr=Dt,Dt=null):Lr=Dt.sibling;var Yr=Ce(fe,Dt,Se[fr],$e);if(Yr===null){Dt===null&&(Dt=Lr);break}o&&Dt&&Yr.alternate===null&&u(fe,Dt),de=w(Yr,de,fr),Gr===null?Ht=Yr:Gr.sibling=Yr,Gr=Yr,Dt=Lr}if(fr===Se.length)return p(fe,Dt),Or&&Qi(fe,fr),Ht;if(Dt===null){for(;fr<Se.length;fr++)Dt=ze(fe,Se[fr],$e),Dt!==null&&(de=w(Dt,de,fr),Gr===null?Ht=Dt:Gr.sibling=Dt,Gr=Dt);return Or&&Qi(fe,fr),Ht}for(Dt=m(Dt);fr<Se.length;fr++)Lr=je(Dt,fe,fr,Se[fr],$e),Lr!==null&&(o&&Lr.alternate!==null&&Dt.delete(Lr.key===null?fr:Lr.key),de=w(Lr,de,fr),Gr===null?Ht=Lr:Gr.sibling=Lr,Gr=Lr);return o&&Dt.forEach(function(Zo){return u(fe,Zo)}),Or&&Qi(fe,fr),Ht}function Xt(fe,de,Se,$e){if(Se==null)throw Error(n(151));for(var Ht=null,Gr=null,Dt=de,fr=de=0,Lr=null,Yr=Se.next();Dt!==null&&!Yr.done;fr++,Yr=Se.next()){Dt.index>fr?(Lr=Dt,Dt=null):Lr=Dt.sibling;var Zo=Ce(fe,Dt,Yr.value,$e);if(Zo===null){Dt===null&&(Dt=Lr);break}o&&Dt&&Zo.alternate===null&&u(fe,Dt),de=w(Zo,de,fr),Gr===null?Ht=Zo:Gr.sibling=Zo,Gr=Zo,Dt=Lr}if(Yr.done)return p(fe,Dt),Or&&Qi(fe,fr),Ht;if(Dt===null){for(;!Yr.done;fr++,Yr=Se.next())Yr=ze(fe,Yr.value,$e),Yr!==null&&(de=w(Yr,de,fr),Gr===null?Ht=Yr:Gr.sibling=Yr,Gr=Yr);return Or&&Qi(fe,fr),Ht}for(Dt=m(Dt);!Yr.done;fr++,Yr=Se.next())Yr=je(Dt,fe,fr,Yr.value,$e),Yr!==null&&(o&&Yr.alternate!==null&&Dt.delete(Yr.key===null?fr:Yr.key),de=w(Yr,de,fr),Gr===null?Ht=Yr:Gr.sibling=Yr,Gr=Yr);return o&&Dt.forEach(function(fD){return u(fe,fD)}),Or&&Qi(fe,fr),Ht}function hn(fe,de,Se,$e){if(typeof Se=="object"&&Se!==null&&Se.type===k&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:e:{for(var Ht=Se.key;de!==null;){if(de.key===Ht){if(Ht=Se.type,Ht===k){if(de.tag===7){p(fe,de.sibling),$e=v(de,Se.props.children),$e.return=fe,fe=$e;break e}}else if(de.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===ae&&Il(Ht)===de.type){p(fe,de.sibling),$e=v(de,Se.props),jd($e,Se),$e.return=fe,fe=$e;break e}p(fe,de);break}else u(fe,de);de=de.sibling}Se.type===k?($e=jl(Se.props.children,fe.mode,$e,Se.key),$e.return=fe,fe=$e):($e=cp(Se.type,Se.key,Se.props,null,fe.mode,$e),jd($e,Se),$e.return=fe,fe=$e)}return L(fe);case y:e:{for(Ht=Se.key;de!==null;){if(de.key===Ht)if(de.tag===4&&de.stateNode.containerInfo===Se.containerInfo&&de.stateNode.implementation===Se.implementation){p(fe,de.sibling),$e=v(de,Se.children||[]),$e.return=fe,fe=$e;break e}else{p(fe,de);break}else u(fe,de);de=de.sibling}$e=ox(Se,fe.mode,$e),$e.return=fe,fe=$e}return L(fe);case ae:return Se=Il(Se),hn(fe,de,Se,$e)}if(U(Se))return Tt(fe,de,Se,$e);if(ee(Se)){if(Ht=ee(Se),typeof Ht!="function")throw Error(n(150));return Se=Ht.call(Se),Xt(fe,de,Se,$e)}if(typeof Se.then=="function")return hn(fe,de,mp(Se),$e);if(Se.$$typeof===N)return hn(fe,de,hp(fe,Se),$e);xp(fe,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,de!==null&&de.tag===6?(p(fe,de.sibling),$e=v(de,Se),$e.return=fe,fe=$e):(p(fe,de),$e=ix(Se,fe.mode,$e),$e.return=fe,fe=$e),L(fe)):p(fe,de)}return function(fe,de,Se,$e){try{Ad=0;var Ht=hn(fe,de,Se,$e);return Gc=null,Ht}catch(Dt){if(Dt===qc||Dt===pp)throw Dt;var Gr=ks(29,Dt,null,fe.mode);return Gr.lanes=$e,Gr.return=fe,Gr}finally{}}}var Pl=Wk(!0),Vk=Wk(!1),Do=!1;function yx(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vx(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Po(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bo(o,u,p){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Vr&2)!==0){var v=m.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),m.pending=u,u=lp(o),Lk(o,null,p),u}return op(o,m,u,p),lp(o)}function Ld(o,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,p|=m,u.lanes=p,_t(o,p)}}function kx(o,u){var p=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var v=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var L={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?v=w=L:w=w.next=L,p=p.next}while(p!==null);w===null?v=w=u:w=w.next=u}else v=w=u;p={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=u:o.next=u,p.lastBaseUpdate=u}var wx=!1;function Md(){if(wx){var o=Hc;if(o!==null)throw o}}function Od(o,u,p,m){wx=!1;var v=o.updateQueue;Do=!1;var w=v.firstBaseUpdate,L=v.lastBaseUpdate,Y=v.shared.pending;if(Y!==null){v.shared.pending=null;var oe=Y,_e=oe.next;oe.next=null,L===null?w=_e:L.next=_e,L=oe;var Ie=o.alternate;Ie!==null&&(Ie=Ie.updateQueue,Y=Ie.lastBaseUpdate,Y!==L&&(Y===null?Ie.firstBaseUpdate=_e:Y.next=_e,Ie.lastBaseUpdate=oe))}if(w!==null){var ze=v.baseState;L=0,Ie=_e=oe=null,Y=w;do{var Ce=Y.lane&-536870913,je=Ce!==Y.lane;if(je?(jr&Ce)===Ce:(m&Ce)===Ce){Ce!==0&&Ce===zc&&(wx=!0),Ie!==null&&(Ie=Ie.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Tt=o,Xt=Y;Ce=u;var hn=p;switch(Xt.tag){case 1:if(Tt=Xt.payload,typeof Tt=="function"){ze=Tt.call(hn,ze,Ce);break e}ze=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Xt.payload,Ce=typeof Tt=="function"?Tt.call(hn,ze,Ce):Tt,Ce==null)break e;ze=f({},ze,Ce);break e;case 2:Do=!0}}Ce=Y.callback,Ce!==null&&(o.flags|=64,je&&(o.flags|=8192),je=v.callbacks,je===null?v.callbacks=[Ce]:je.push(Ce))}else je={lane:Ce,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ie===null?(_e=Ie=je,oe=ze):Ie=Ie.next=je,L|=Ce;if(Y=Y.next,Y===null){if(Y=v.shared.pending,Y===null)break;je=Y,Y=je.next,je.next=null,v.lastBaseUpdate=je,v.shared.pending=null}}while(!0);Ie===null&&(oe=ze),v.baseState=oe,v.firstBaseUpdate=_e,v.lastBaseUpdate=Ie,w===null&&(v.shared.lanes=0),Ho|=L,o.lanes=L,o.memoizedState=ze}}function Kk(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function Xk(o,u){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)Kk(p[o],u)}var Yc=D(null),bp=D(0);function Qk(o,u){o=lo,M(bp,o),M(Yc,u),lo=o|u.baseLanes}function Sx(){M(bp,lo),M(Yc,Yc.current)}function Ex(){lo=bp.current,z(Yc),z(bp)}var ws=D(null),Hs=null;function Fo(o){var u=o.alternate;M(Hn,Hn.current&1),M(ws,o),Hs===null&&(u===null||Yc.current!==null||u.memoizedState!==null)&&(Hs=o)}function _x(o){M(Hn,Hn.current),M(ws,o),Hs===null&&(Hs=o)}function Jk(o){o.tag===22?(M(Hn,Hn.current),M(ws,o),Hs===null&&(Hs=o)):$o()}function $o(){M(Hn,Hn.current),M(ws,ws.current)}function Ss(o){z(ws),Hs===o&&(Hs=null),z(Hn)}var Hn=D(0);function yp(o){for(var u=o;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Lb(p)||Mb(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var eo=0,hr=null,un=null,Qn=null,vp=!1,Wc=!1,Bl=!1,kp=0,Rd=0,Vc=null,s6=0;function Pn(){throw Error(n(321))}function Tx(o,u){if(u===null)return!1;for(var p=0;p<u.length&&p<o.length;p++)if(!St(o[p],u[p]))return!1;return!0}function Cx(o,u,p,m,v,w){return eo=w,hr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,O.H=o===null||o.memoizedState===null?Iw:zx,Bl=!1,w=p(m,v),Bl=!1,Wc&&(w=ew(u,p,m,v)),Zk(o),w}function Zk(o){O.H=Pd;var u=un!==null&&un.next!==null;if(eo=0,Qn=un=hr=null,vp=!1,Rd=0,Vc=null,u)throw Error(n(300));o===null||Jn||(o=o.dependencies,o!==null&&dp(o)&&(Jn=!0))}function ew(o,u,p,m){hr=o;var v=0;do{if(Wc&&(Vc=null),Rd=0,Wc=!1,25<=v)throw Error(n(301));if(v+=1,Qn=un=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}O.H=Dw,w=u(p,m)}while(Wc);return w}function i6(){var o=O.H,u=o.useState()[0];return u=typeof u.then=="function"?Id(u):u,o=o.useState()[0],(un!==null?un.memoizedState:null)!==o&&(hr.flags|=1024),u}function Nx(){var o=kp!==0;return kp=0,o}function Ax(o,u,p){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~p}function jx(o){if(vp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}vp=!1}eo=0,Qn=un=hr=null,Wc=!1,Rd=kp=0,Vc=null}function Ga(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?hr.memoizedState=Qn=o:Qn=Qn.next=o,Qn}function qn(){if(un===null){var o=hr.alternate;o=o!==null?o.memoizedState:null}else o=un.next;var u=Qn===null?hr.memoizedState:Qn.next;if(u!==null)Qn=u,un=o;else{if(o===null)throw hr.alternate===null?Error(n(467)):Error(n(310));un=o,o={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},Qn===null?hr.memoizedState=Qn=o:Qn=Qn.next=o}return Qn}function wp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Id(o){var u=Rd;return Rd+=1,Vc===null&&(Vc=[]),o=qk(Vc,o,u),u=hr,(Qn===null?u.memoizedState:Qn.next)===null&&(u=u.alternate,O.H=u===null||u.memoizedState===null?Iw:zx),o}function Sp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Id(o);if(o.$$typeof===N)return ka(o)}throw Error(n(438,String(o)))}function Lx(o){var u=null,p=hr.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var m=hr.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=wp(),hr.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(o),m=0;m<o;m++)p[m]=$;return u.index++,p}function to(o,u){return typeof u=="function"?u(o):u}function Ep(o){var u=qn();return Mx(u,un,o)}function Mx(o,u,p){var m=o.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=p;var v=o.baseQueue,w=m.pending;if(w!==null){if(v!==null){var L=v.next;v.next=w.next,w.next=L}u.baseQueue=v=w,m.pending=null}if(w=o.baseState,v===null)o.memoizedState=w;else{u=v.next;var Y=L=null,oe=null,_e=u,Ie=!1;do{var ze=_e.lane&-536870913;if(ze!==_e.lane?(jr&ze)===ze:(eo&ze)===ze){var Ce=_e.revertLane;if(Ce===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ze===zc&&(Ie=!0);else if((eo&Ce)===Ce){_e=_e.next,Ce===zc&&(Ie=!0);continue}else ze={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},oe===null?(Y=oe=ze,L=w):oe=oe.next=ze,hr.lanes|=Ce,Ho|=Ce;ze=_e.action,Bl&&p(w,ze),w=_e.hasEagerState?_e.eagerState:p(w,ze)}else Ce={lane:ze,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},oe===null?(Y=oe=Ce,L=w):oe=oe.next=Ce,hr.lanes|=ze,Ho|=ze;_e=_e.next}while(_e!==null&&_e!==u);if(oe===null?L=w:oe.next=Y,!St(w,o.memoizedState)&&(Jn=!0,Ie&&(p=Hc,p!==null)))throw p;o.memoizedState=w,o.baseState=L,o.baseQueue=oe,m.lastRenderedState=w}return v===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Ox(o){var u=qn(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var m=p.dispatch,v=p.pending,w=u.memoizedState;if(v!==null){p.pending=null;var L=v=v.next;do w=o(w,L.action),L=L.next;while(L!==v);St(w,u.memoizedState)||(Jn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),p.lastRenderedState=w}return[w,m]}function tw(o,u,p){var m=hr,v=qn(),w=Or;if(w){if(p===void 0)throw Error(n(407));p=p()}else p=u();var L=!St((un||v).memoizedState,p);if(L&&(v.memoizedState=p,Jn=!0),v=v.queue,Dx(aw.bind(null,m,v,o),[o]),v.getSnapshot!==u||L||Qn!==null&&Qn.memoizedState.tag&1){if(m.flags|=2048,Kc(9,{destroy:void 0},nw.bind(null,m,v,p,u),null),fn===null)throw Error(n(349));w||(eo&127)!==0||rw(m,u,p)}return p}function rw(o,u,p){o.flags|=16384,o={getSnapshot:u,value:p},u=hr.updateQueue,u===null?(u=wp(),hr.updateQueue=u,u.stores=[o]):(p=u.stores,p===null?u.stores=[o]:p.push(o))}function nw(o,u,p,m){u.value=p,u.getSnapshot=m,sw(u)&&iw(o)}function aw(o,u,p){return p(function(){sw(u)&&iw(o)})}function sw(o){var u=o.getSnapshot;o=o.value;try{var p=u();return!St(o,p)}catch{return!0}}function iw(o){var u=Al(o,2);u!==null&&cs(u,o,2)}function Rx(o){var u=Ga();if(typeof o=="function"){var p=o;if(o=p(),Bl){Zt(!0);try{p()}finally{Zt(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:o},u}function ow(o,u,p,m){return o.baseState=p,Mx(o,un,typeof m=="function"?m:to)}function o6(o,u,p,m,v){if(Cp(o))throw Error(n(485));if(o=u.action,o!==null){var w={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){w.listeners.push(L)}};O.T!==null?p(!0):w.isTransition=!1,m(w),p=u.pending,p===null?(w.next=u.pending=w,lw(u,w)):(w.next=p.next,u.pending=p.next=w)}}function lw(o,u){var p=u.action,m=u.payload,v=o.state;if(u.isTransition){var w=O.T,L={};O.T=L;try{var Y=p(v,m),oe=O.S;oe!==null&&oe(L,Y),cw(o,u,Y)}catch(_e){Ix(o,u,_e)}finally{w!==null&&L.types!==null&&(w.types=L.types),O.T=w}}else try{w=p(v,m),cw(o,u,w)}catch(_e){Ix(o,u,_e)}}function cw(o,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(m){uw(o,u,m)},function(m){return Ix(o,u,m)}):uw(o,u,p)}function uw(o,u,p){u.status="fulfilled",u.value=p,dw(u),o.state=p,u=o.pending,u!==null&&(p=u.next,p===u?o.pending=null:(p=p.next,u.next=p,lw(o,p)))}function Ix(o,u,p){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=p,dw(u),u=u.next;while(u!==m)}o.action=null}function dw(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function hw(o,u){return u}function gw(o,u){if(Or){var p=fn.formState;if(p!==null){e:{var m=hr;if(Or){if(vn){t:{for(var v=vn,w=zs;v.nodeType!==8;){if(!w){v=null;break t}if(v=qs(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){vn=qs(v.nextSibling),m=v.data==="F!";break e}}Ro(m)}m=!1}m&&(u=p[0])}}return p=Ga(),p.memoizedState=p.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hw,lastRenderedState:u},p.queue=m,p=Mw.bind(null,hr,m),m.dispatch=p,m=Rx(!1),w=Ux.bind(null,hr,!1,m.queue),m=Ga(),v={state:u,dispatch:null,action:o,pending:null},m.queue=v,p=o6.bind(null,hr,v,w,p),v.dispatch=p,m.memoizedState=o,[u,p,!1]}function pw(o){var u=qn();return fw(u,un,o)}function fw(o,u,p){if(u=Mx(o,u,hw)[0],o=Ep(to)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Id(u)}catch(L){throw L===qc?pp:L}else m=u;u=qn();var v=u.queue,w=v.dispatch;return p!==u.memoizedState&&(hr.flags|=2048,Kc(9,{destroy:void 0},l6.bind(null,v,p),null)),[m,w,o]}function l6(o,u){o.action=u}function mw(o){var u=qn(),p=un;if(p!==null)return fw(u,p,o);qn(),u=u.memoizedState,p=qn();var m=p.queue.dispatch;return p.memoizedState=o,[u,m,!1]}function Kc(o,u,p,m){return o={tag:o,create:p,deps:m,inst:u,next:null},u=hr.updateQueue,u===null&&(u=wp(),hr.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=o.next=o:(m=p.next,p.next=o,o.next=m,u.lastEffect=o),o}function xw(){return qn().memoizedState}function _p(o,u,p,m){var v=Ga();hr.flags|=o,v.memoizedState=Kc(1|u,{destroy:void 0},p,m===void 0?null:m)}function Tp(o,u,p,m){var v=qn();m=m===void 0?null:m;var w=v.memoizedState.inst;un!==null&&m!==null&&Tx(m,un.memoizedState.deps)?v.memoizedState=Kc(u,w,p,m):(hr.flags|=o,v.memoizedState=Kc(1|u,w,p,m))}function bw(o,u){_p(8390656,8,o,u)}function Dx(o,u){Tp(2048,8,o,u)}function c6(o){hr.flags|=4;var u=hr.updateQueue;if(u===null)u=wp(),hr.updateQueue=u,u.events=[o];else{var p=u.events;p===null?u.events=[o]:p.push(o)}}function yw(o){var u=qn().memoizedState;return c6({ref:u,nextImpl:o}),function(){if((Vr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function vw(o,u){return Tp(4,2,o,u)}function kw(o,u){return Tp(4,4,o,u)}function ww(o,u){if(typeof u=="function"){o=o();var p=u(o);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Sw(o,u,p){p=p!=null?p.concat([o]):null,Tp(4,4,ww.bind(null,u,o),p)}function Px(){}function Ew(o,u){var p=qn();u=u===void 0?null:u;var m=p.memoizedState;return u!==null&&Tx(u,m[1])?m[0]:(p.memoizedState=[o,u],o)}function _w(o,u){var p=qn();u=u===void 0?null:u;var m=p.memoizedState;if(u!==null&&Tx(u,m[1]))return m[0];if(m=o(),Bl){Zt(!0);try{o()}finally{Zt(!1)}}return p.memoizedState=[m,u],m}function Bx(o,u,p){return p===void 0||(eo&1073741824)!==0&&(jr&261930)===0?o.memoizedState=u:(o.memoizedState=p,o=TS(),hr.lanes|=o,Ho|=o,p)}function Tw(o,u,p,m){return St(p,u)?p:Yc.current!==null?(o=Bx(o,p,m),St(o,u)||(Jn=!0),o):(eo&42)===0||(eo&1073741824)!==0&&(jr&261930)===0?(Jn=!0,o.memoizedState=p):(o=TS(),hr.lanes|=o,Ho|=o,u)}function Cw(o,u,p,m,v){var w=q.p;q.p=w!==0&&8>w?w:8;var L=O.T,Y={};O.T=Y,Ux(o,!1,u,p);try{var oe=v(),_e=O.S;if(_e!==null&&_e(Y,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Ie=a6(oe,m);Dd(o,u,Ie,Ts(o))}else Dd(o,u,m,Ts(o))}catch(ze){Dd(o,u,{then:function(){},status:"rejected",reason:ze},Ts())}finally{q.p=w,L!==null&&Y.types!==null&&(L.types=Y.types),O.T=L}}function u6(){}function Fx(o,u,p,m){if(o.tag!==5)throw Error(n(476));var v=Nw(o).queue;Cw(o,v,u,V,p===null?u6:function(){return Aw(o),p(m)})}function Nw(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:V},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:p},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Aw(o){var u=Nw(o);u.next===null&&(u=o.alternate.memoizedState),Dd(o,u.next.queue,{},Ts())}function $x(){return ka(Zd)}function jw(){return qn().memoizedState}function Lw(){return qn().memoizedState}function d6(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var p=Ts();o=Po(p);var m=Bo(u,o,p);m!==null&&(cs(m,u,p),Ld(m,u,p)),u={cache:fx()},o.payload=u;return}u=u.return}}function h6(o,u,p){var m=Ts();p={lane:m,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Cp(o)?Ow(u,p):(p=ax(o,u,p,m),p!==null&&(cs(p,o,m),Rw(p,u,m)))}function Mw(o,u,p){var m=Ts();Dd(o,u,p,m)}function Dd(o,u,p,m){var v={lane:m,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Cp(o))Ow(u,v);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var L=u.lastRenderedState,Y=w(L,p);if(v.hasEagerState=!0,v.eagerState=Y,St(Y,L))return op(o,u,v,0),fn===null&&ip(),!1}catch{}finally{}if(p=ax(o,u,v,m),p!==null)return cs(p,o,m),Rw(p,u,m),!0}return!1}function Ux(o,u,p,m){if(m={lane:2,revertLane:yb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Cp(o)){if(u)throw Error(n(479))}else u=ax(o,p,m,2),u!==null&&cs(u,o,2)}function Cp(o){var u=o.alternate;return o===hr||u!==null&&u===hr}function Ow(o,u){Wc=vp=!0;var p=o.pending;p===null?u.next=u:(u.next=p.next,p.next=u),o.pending=u}function Rw(o,u,p){if((p&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,p|=m,u.lanes=p,_t(o,p)}}var Pd={readContext:ka,use:Sp,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};Pd.useEffectEvent=Pn;var Iw={readContext:ka,use:Sp,useCallback:function(o,u){return Ga().memoizedState=[o,u===void 0?null:u],o},useContext:ka,useEffect:bw,useImperativeHandle:function(o,u,p){p=p!=null?p.concat([o]):null,_p(4194308,4,ww.bind(null,u,o),p)},useLayoutEffect:function(o,u){return _p(4194308,4,o,u)},useInsertionEffect:function(o,u){_p(4,2,o,u)},useMemo:function(o,u){var p=Ga();u=u===void 0?null:u;var m=o();if(Bl){Zt(!0);try{o()}finally{Zt(!1)}}return p.memoizedState=[m,u],m},useReducer:function(o,u,p){var m=Ga();if(p!==void 0){var v=p(u);if(Bl){Zt(!0);try{p(u)}finally{Zt(!1)}}}else v=u;return m.memoizedState=m.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},m.queue=o,o=o.dispatch=h6.bind(null,hr,o),[m.memoizedState,o]},useRef:function(o){var u=Ga();return o={current:o},u.memoizedState=o},useState:function(o){o=Rx(o);var u=o.queue,p=Mw.bind(null,hr,u);return u.dispatch=p,[o.memoizedState,p]},useDebugValue:Px,useDeferredValue:function(o,u){var p=Ga();return Bx(p,o,u)},useTransition:function(){var o=Rx(!1);return o=Cw.bind(null,hr,o.queue,!0,!1),Ga().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,p){var m=hr,v=Ga();if(Or){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),fn===null)throw Error(n(349));(jr&127)!==0||rw(m,u,p)}v.memoizedState=p;var w={value:p,getSnapshot:u};return v.queue=w,bw(aw.bind(null,m,w,o),[o]),m.flags|=2048,Kc(9,{destroy:void 0},nw.bind(null,m,w,p,u),null),p},useId:function(){var o=Ga(),u=fn.identifierPrefix;if(Or){var p=wi,m=ki;p=(m&~(1<<32-Jt(m)-1)).toString(32)+p,u="_"+u+"R_"+p,p=kp++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=s6++,u="_"+u+"r_"+p.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:$x,useFormState:gw,useActionState:gw,useOptimistic:function(o){var u=Ga();u.memoizedState=u.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Ux.bind(null,hr,!0,p),p.dispatch=u,[o,u]},useMemoCache:Lx,useCacheRefresh:function(){return Ga().memoizedState=d6.bind(null,hr)},useEffectEvent:function(o){var u=Ga(),p={impl:o};return u.memoizedState=p,function(){if((Vr&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},zx={readContext:ka,use:Sp,useCallback:Ew,useContext:ka,useEffect:Dx,useImperativeHandle:Sw,useInsertionEffect:vw,useLayoutEffect:kw,useMemo:_w,useReducer:Ep,useRef:xw,useState:function(){return Ep(to)},useDebugValue:Px,useDeferredValue:function(o,u){var p=qn();return Tw(p,un.memoizedState,o,u)},useTransition:function(){var o=Ep(to)[0],u=qn().memoizedState;return[typeof o=="boolean"?o:Id(o),u]},useSyncExternalStore:tw,useId:jw,useHostTransitionStatus:$x,useFormState:pw,useActionState:pw,useOptimistic:function(o,u){var p=qn();return ow(p,un,o,u)},useMemoCache:Lx,useCacheRefresh:Lw};zx.useEffectEvent=yw;var Dw={readContext:ka,use:Sp,useCallback:Ew,useContext:ka,useEffect:Dx,useImperativeHandle:Sw,useInsertionEffect:vw,useLayoutEffect:kw,useMemo:_w,useReducer:Ox,useRef:xw,useState:function(){return Ox(to)},useDebugValue:Px,useDeferredValue:function(o,u){var p=qn();return un===null?Bx(p,o,u):Tw(p,un.memoizedState,o,u)},useTransition:function(){var o=Ox(to)[0],u=qn().memoizedState;return[typeof o=="boolean"?o:Id(o),u]},useSyncExternalStore:tw,useId:jw,useHostTransitionStatus:$x,useFormState:mw,useActionState:mw,useOptimistic:function(o,u){var p=qn();return un!==null?ow(p,un,o,u):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:Lx,useCacheRefresh:Lw};Dw.useEffectEvent=yw;function Hx(o,u,p,m){u=o.memoizedState,p=p(m,u),p=p==null?u:f({},u,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var qx={enqueueSetState:function(o,u,p){o=o._reactInternals;var m=Ts(),v=Po(m);v.payload=u,p!=null&&(v.callback=p),u=Bo(o,v,m),u!==null&&(cs(u,o,m),Ld(u,o,m))},enqueueReplaceState:function(o,u,p){o=o._reactInternals;var m=Ts(),v=Po(m);v.tag=1,v.payload=u,p!=null&&(v.callback=p),u=Bo(o,v,m),u!==null&&(cs(u,o,m),Ld(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var p=Ts(),m=Po(p);m.tag=2,u!=null&&(m.callback=u),u=Bo(o,m,p),u!==null&&(cs(u,o,p),Ld(u,o,p))}};function Pw(o,u,p,m,v,w,L){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,w,L):u.prototype&&u.prototype.isPureReactComponent?!rt(p,m)||!rt(v,w):!0}function Bw(o,u,p,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,m),u.state!==o&&qx.enqueueReplaceState(u,u.state,null)}function Fl(o,u){var p=u;if("ref"in u){p={};for(var m in u)m!=="ref"&&(p[m]=u[m])}if(o=o.defaultProps){p===u&&(p=f({},p));for(var v in o)p[v]===void 0&&(p[v]=o[v])}return p}function Fw(o){sp(o)}function $w(o){console.error(o)}function Uw(o){sp(o)}function Np(o,u){try{var p=o.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function zw(o,u,p){try{var m=o.onCaughtError;m(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Gx(o,u,p){return p=Po(p),p.tag=3,p.payload={element:null},p.callback=function(){Np(o,u)},p}function Hw(o){return o=Po(o),o.tag=3,o}function qw(o,u,p,m){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var w=m.value;o.payload=function(){return v(w)},o.callback=function(){zw(u,p,m)}}var L=p.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(o.callback=function(){zw(u,p,m),typeof v!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var Y=m.stack;this.componentDidCatch(m.value,{componentStack:Y!==null?Y:""})})}function g6(o,u,p,m,v){if(p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=p.alternate,u!==null&&Uc(u,p,v,!0),p=ws.current,p!==null){switch(p.tag){case 31:case 13:return Hs===null?$p():p.alternate===null&&Bn===0&&(Bn=3),p.flags&=-257,p.flags|=65536,p.lanes=v,m===fp?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([m]):u.add(m),mb(o,m,v)),!1;case 22:return p.flags|=65536,m===fp?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([m]):p.add(m)),mb(o,m,v)),!1}throw Error(n(435,p.tag))}return mb(o,m,v),$p(),!1}if(Or)return u=ws.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,m!==ux&&(o=Error(n(422),{cause:m}),Td(Fs(o,p)))):(m!==ux&&(u=Error(n(423),{cause:m}),Td(Fs(u,p))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,m=Fs(m,p),v=Gx(o.stateNode,m,v),kx(o,v),Bn!==4&&(Bn=2)),!1;var w=Error(n(520),{cause:m});if(w=Fs(w,p),Gd===null?Gd=[w]:Gd.push(w),Bn!==4&&(Bn=2),u===null)return!0;m=Fs(m,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,o=v&-v,p.lanes|=o,o=Gx(p.stateNode,m,o),kx(p,o),!1;case 1:if(u=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qo===null||!qo.has(w))))return p.flags|=65536,v&=-v,p.lanes|=v,v=Hw(v),qw(v,o,p,m),kx(p,v),!1}p=p.return}while(p!==null);return!1}var Yx=Error(n(461)),Jn=!1;function wa(o,u,p,m){u.child=o===null?Vk(u,null,p,m):Pl(u,o.child,p,m)}function Gw(o,u,p,m,v){p=p.render;var w=u.ref;if("ref"in m){var L={};for(var Y in m)Y!=="ref"&&(L[Y]=m[Y])}else L=m;return Ol(u),m=Cx(o,u,p,L,w,v),Y=Nx(),o!==null&&!Jn?(Ax(o,u,v),ro(o,u,v)):(Or&&Y&&lx(u),u.flags|=1,wa(o,u,m,v),u.child)}function Yw(o,u,p,m,v){if(o===null){var w=p.type;return typeof w=="function"&&!sx(w)&&w.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=w,Ww(o,u,w,m,v)):(o=cp(p.type,null,m,u,u.mode,v),o.ref=u.ref,o.return=u,u.child=o)}if(w=o.child,!eb(o,v)){var L=w.memoizedProps;if(p=p.compare,p=p!==null?p:rt,p(L,m)&&o.ref===u.ref)return ro(o,u,v)}return u.flags|=1,o=Xi(w,m),o.ref=u.ref,o.return=u,u.child=o}function Ww(o,u,p,m,v){if(o!==null){var w=o.memoizedProps;if(rt(w,m)&&o.ref===u.ref)if(Jn=!1,u.pendingProps=m=w,eb(o,v))(o.flags&131072)!==0&&(Jn=!0);else return u.lanes=o.lanes,ro(o,u,v)}return Wx(o,u,p,m,v)}function Vw(o,u,p,m){var v=m.children,w=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|p:p,o!==null){for(m=u.child=o.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~w}else m=0,u.child=null;return Kw(o,u,w,p,m)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&gp(u,w!==null?w.cachePool:null),w!==null?Qk(u,w):Sx(),Jk(u);else return m=u.lanes=536870912,Kw(o,u,w!==null?w.baseLanes|p:p,p,m)}else w!==null?(gp(u,w.cachePool),Qk(u,w),$o(),u.memoizedState=null):(o!==null&&gp(u,null),Sx(),$o());return wa(o,u,v,p),u.child}function Bd(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Kw(o,u,p,m,v){var w=xx();return w=w===null?null:{parent:Xn._currentValue,pool:w},u.memoizedState={baseLanes:p,cachePool:w},o!==null&&gp(u,null),Sx(),Jk(u),o!==null&&Uc(o,u,m,!0),u.childLanes=v,null}function Ap(o,u){return u=Lp({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Xw(o,u,p){return Pl(u,o.child,null,p),o=Ap(u,u.pendingProps),o.flags|=2,Ss(u),u.memoizedState=null,o}function p6(o,u,p){var m=u.pendingProps,v=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Or){if(m.mode==="hidden")return o=Ap(u,m),u.lanes=536870912,Bd(null,o);if(_x(u),(o=vn)?(o=lE(o,zs),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Mo!==null?{id:ki,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},p=Ok(o),p.return=u,u.child=p,va=u,vn=null)):o=null,o===null)throw Ro(u);return u.lanes=536870912,null}return Ap(u,m)}var w=o.memoizedState;if(w!==null){var L=w.dehydrated;if(_x(u),v)if(u.flags&256)u.flags&=-257,u=Xw(o,u,p);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(Jn||Uc(o,u,p,!1),v=(p&o.childLanes)!==0,Jn||v){if(m=fn,m!==null&&(L=Kr(m,p),L!==0&&L!==w.retryLane))throw w.retryLane=L,Al(o,L),cs(m,o,L),Yx;$p(),u=Xw(o,u,p)}else o=w.treeContext,vn=qs(L.nextSibling),va=u,Or=!0,Oo=null,zs=!1,o!==null&&Dk(u,o),u=Ap(u,m),u.flags|=4096;return u}return o=Xi(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function jp(o,u){var p=u.ref;if(p===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(u.flags|=4194816)}}function Wx(o,u,p,m,v){return Ol(u),p=Cx(o,u,p,m,void 0,v),m=Nx(),o!==null&&!Jn?(Ax(o,u,v),ro(o,u,v)):(Or&&m&&lx(u),u.flags|=1,wa(o,u,p,v),u.child)}function Qw(o,u,p,m,v,w){return Ol(u),u.updateQueue=null,p=ew(u,m,p,v),Zk(o),m=Nx(),o!==null&&!Jn?(Ax(o,u,w),ro(o,u,w)):(Or&&m&&lx(u),u.flags|=1,wa(o,u,p,w),u.child)}function Jw(o,u,p,m,v){if(Ol(u),u.stateNode===null){var w=Pc,L=p.contextType;typeof L=="object"&&L!==null&&(w=ka(L)),w=new p(m,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=qx,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=m,w.state=u.memoizedState,w.refs={},yx(u),L=p.contextType,w.context=typeof L=="object"&&L!==null?ka(L):Pc,w.state=u.memoizedState,L=p.getDerivedStateFromProps,typeof L=="function"&&(Hx(u,p,L,m),w.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(L=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),L!==w.state&&qx.enqueueReplaceState(w,w.state,null),Od(u,m,w,v),Md(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){w=u.stateNode;var Y=u.memoizedProps,oe=Fl(p,Y);w.props=oe;var _e=w.context,Ie=p.contextType;L=Pc,typeof Ie=="object"&&Ie!==null&&(L=ka(Ie));var ze=p.getDerivedStateFromProps;Ie=typeof ze=="function"||typeof w.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Y||_e!==L)&&Bw(u,w,m,L),Do=!1;var Ce=u.memoizedState;w.state=Ce,Od(u,m,w,v),Md(),_e=u.memoizedState,Y||Ce!==_e||Do?(typeof ze=="function"&&(Hx(u,p,ze,m),_e=u.memoizedState),(oe=Do||Pw(u,p,oe,m,Ce,_e,L))?(Ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=_e),w.props=m,w.state=_e,w.context=L,m=oe):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{w=u.stateNode,vx(o,u),L=u.memoizedProps,Ie=Fl(p,L),w.props=Ie,ze=u.pendingProps,Ce=w.context,_e=p.contextType,oe=Pc,typeof _e=="object"&&_e!==null&&(oe=ka(_e)),Y=p.getDerivedStateFromProps,(_e=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L!==ze||Ce!==oe)&&Bw(u,w,m,oe),Do=!1,Ce=u.memoizedState,w.state=Ce,Od(u,m,w,v),Md();var je=u.memoizedState;L!==ze||Ce!==je||Do||o!==null&&o.dependencies!==null&&dp(o.dependencies)?(typeof Y=="function"&&(Hx(u,p,Y,m),je=u.memoizedState),(Ie=Do||Pw(u,p,Ie,m,Ce,je,oe)||o!==null&&o.dependencies!==null&&dp(o.dependencies))?(_e||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,je,oe),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,je,oe)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||L===o.memoizedProps&&Ce===o.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&Ce===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=je),w.props=m,w.state=je,w.context=oe,m=Ie):(typeof w.componentDidUpdate!="function"||L===o.memoizedProps&&Ce===o.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&Ce===o.memoizedState||(u.flags|=1024),m=!1)}return w=m,jp(o,u),m=(u.flags&128)!==0,w||m?(w=u.stateNode,p=m&&typeof p.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,o!==null&&m?(u.child=Pl(u,o.child,null,v),u.child=Pl(u,null,p,v)):wa(o,u,p,v),u.memoizedState=w.state,o=u.child):o=ro(o,u,v),o}function Zw(o,u,p,m){return Ll(),u.flags|=256,wa(o,u,p,m),u.child}var Vx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kx(o){return{baseLanes:o,cachePool:zk()}}function Xx(o,u,p){return o=o!==null?o.childLanes&~p:0,u&&(o|=_s),o}function eS(o,u,p){var m=u.pendingProps,v=!1,w=(u.flags&128)!==0,L;if((L=w)||(L=o!==null&&o.memoizedState===null?!1:(Hn.current&2)!==0),L&&(v=!0,u.flags&=-129),L=(u.flags&32)!==0,u.flags&=-33,o===null){if(Or){if(v?Fo(u):$o(),(o=vn)?(o=lE(o,zs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Mo!==null?{id:ki,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},p=Ok(o),p.return=u,u.child=p,va=u,vn=null)):o=null,o===null)throw Ro(u);return Mb(o)?u.lanes=32:u.lanes=536870912,null}var Y=m.children;return m=m.fallback,v?($o(),v=u.mode,Y=Lp({mode:"hidden",children:Y},v),m=jl(m,v,p,null),Y.return=u,m.return=u,Y.sibling=m,u.child=Y,m=u.child,m.memoizedState=Kx(p),m.childLanes=Xx(o,L,p),u.memoizedState=Vx,Bd(null,m)):(Fo(u),Qx(u,Y))}var oe=o.memoizedState;if(oe!==null&&(Y=oe.dehydrated,Y!==null)){if(w)u.flags&256?(Fo(u),u.flags&=-257,u=Jx(o,u,p)):u.memoizedState!==null?($o(),u.child=o.child,u.flags|=128,u=null):($o(),Y=m.fallback,v=u.mode,m=Lp({mode:"visible",children:m.children},v),Y=jl(Y,v,p,null),Y.flags|=2,m.return=u,Y.return=u,m.sibling=Y,u.child=m,Pl(u,o.child,null,p),m=u.child,m.memoizedState=Kx(p),m.childLanes=Xx(o,L,p),u.memoizedState=Vx,u=Bd(null,m));else if(Fo(u),Mb(Y)){if(L=Y.nextSibling&&Y.nextSibling.dataset,L)var _e=L.dgst;L=_e,m=Error(n(419)),m.stack="",m.digest=L,Td({value:m,source:null,stack:null}),u=Jx(o,u,p)}else if(Jn||Uc(o,u,p,!1),L=(p&o.childLanes)!==0,Jn||L){if(L=fn,L!==null&&(m=Kr(L,p),m!==0&&m!==oe.retryLane))throw oe.retryLane=m,Al(o,m),cs(L,o,m),Yx;Lb(Y)||$p(),u=Jx(o,u,p)}else Lb(Y)?(u.flags|=192,u.child=o.child,u=null):(o=oe.treeContext,vn=qs(Y.nextSibling),va=u,Or=!0,Oo=null,zs=!1,o!==null&&Dk(u,o),u=Qx(u,m.children),u.flags|=4096);return u}return v?($o(),Y=m.fallback,v=u.mode,oe=o.child,_e=oe.sibling,m=Xi(oe,{mode:"hidden",children:m.children}),m.subtreeFlags=oe.subtreeFlags&65011712,_e!==null?Y=Xi(_e,Y):(Y=jl(Y,v,p,null),Y.flags|=2),Y.return=u,m.return=u,m.sibling=Y,u.child=m,Bd(null,m),m=u.child,Y=o.child.memoizedState,Y===null?Y=Kx(p):(v=Y.cachePool,v!==null?(oe=Xn._currentValue,v=v.parent!==oe?{parent:oe,pool:oe}:v):v=zk(),Y={baseLanes:Y.baseLanes|p,cachePool:v}),m.memoizedState=Y,m.childLanes=Xx(o,L,p),u.memoizedState=Vx,Bd(o.child,m)):(Fo(u),p=o.child,o=p.sibling,p=Xi(p,{mode:"visible",children:m.children}),p.return=u,p.sibling=null,o!==null&&(L=u.deletions,L===null?(u.deletions=[o],u.flags|=16):L.push(o)),u.child=p,u.memoizedState=null,p)}function Qx(o,u){return u=Lp({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Lp(o,u){return o=ks(22,o,null,u),o.lanes=0,o}function Jx(o,u,p){return Pl(u,o.child,null,p),o=Qx(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function tS(o,u,p){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),gx(o.return,u,p)}function Zx(o,u,p,m,v,w){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:v,treeForkCount:w}:(L.isBackwards=u,L.rendering=null,L.renderingStartTime=0,L.last=m,L.tail=p,L.tailMode=v,L.treeForkCount=w)}function rS(o,u,p){var m=u.pendingProps,v=m.revealOrder,w=m.tail;m=m.children;var L=Hn.current,Y=(L&2)!==0;if(Y?(L=L&1|2,u.flags|=128):L&=1,M(Hn,L),wa(o,u,m,p),m=Or?_d:0,!Y&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&tS(o,p,u);else if(o.tag===19)tS(o,p,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(p=u.child,v=null;p!==null;)o=p.alternate,o!==null&&yp(o)===null&&(v=p),p=p.sibling;p=v,p===null?(v=u.child,u.child=null):(v=p.sibling,p.sibling=null),Zx(u,!1,v,p,w,m);break;case"backwards":case"unstable_legacy-backwards":for(p=null,v=u.child,u.child=null;v!==null;){if(o=v.alternate,o!==null&&yp(o)===null){u.child=v;break}o=v.sibling,v.sibling=p,p=v,v=o}Zx(u,!0,p,null,w,m);break;case"together":Zx(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function ro(o,u,p){if(o!==null&&(u.dependencies=o.dependencies),Ho|=u.lanes,(p&u.childLanes)===0)if(o!==null){if(Uc(o,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,p=Xi(o,o.pendingProps),u.child=p,p.return=u;o.sibling!==null;)o=o.sibling,p=p.sibling=Xi(o,o.pendingProps),p.return=u;p.sibling=null}return u.child}function eb(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&dp(o)))}function f6(o,u,p){switch(u.tag){case 3:ve(u,u.stateNode.containerInfo),Io(u,Xn,o.memoizedState.cache),Ll();break;case 27:case 5:ge(u);break;case 4:ve(u,u.stateNode.containerInfo);break;case 10:Io(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,_x(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(Fo(u),u.flags|=128,null):(p&u.child.childLanes)!==0?eS(o,u,p):(Fo(u),o=ro(o,u,p),o!==null?o.sibling:null);Fo(u);break;case 19:var v=(o.flags&128)!==0;if(m=(p&u.childLanes)!==0,m||(Uc(o,u,p,!1),m=(p&u.childLanes)!==0),v){if(m)return rS(o,u,p);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),M(Hn,Hn.current),m)break;return null;case 22:return u.lanes=0,Vw(o,u,p,u.pendingProps);case 24:Io(u,Xn,o.memoizedState.cache)}return ro(o,u,p)}function nS(o,u,p){if(o!==null)if(o.memoizedProps!==u.pendingProps)Jn=!0;else{if(!eb(o,p)&&(u.flags&128)===0)return Jn=!1,f6(o,u,p);Jn=(o.flags&131072)!==0}else Jn=!1,Or&&(u.flags&1048576)!==0&&Ik(u,_d,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=Il(u.elementType),u.type=o,typeof o=="function")sx(o)?(m=Fl(o,m),u.tag=1,u=Jw(null,u,o,m,p)):(u.tag=0,u=Wx(null,u,o,m,p));else{if(o!=null){var v=o.$$typeof;if(v===I){u.tag=11,u=Gw(null,u,o,m,p);break e}else if(v===F){u.tag=14,u=Yw(null,u,o,m,p);break e}}throw u=j(o)||o,Error(n(306,u,""))}}return u;case 0:return Wx(o,u,u.type,u.pendingProps,p);case 1:return m=u.type,v=Fl(m,u.pendingProps),Jw(o,u,m,v,p);case 3:e:{if(ve(u,u.stateNode.containerInfo),o===null)throw Error(n(387));m=u.pendingProps;var w=u.memoizedState;v=w.element,vx(o,u),Od(u,m,null,p);var L=u.memoizedState;if(m=L.cache,Io(u,Xn,m),m!==w.cache&&px(u,[Xn],p,!0),Md(),m=L.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:L.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=Zw(o,u,m,p);break e}else if(m!==v){v=Fs(Error(n(424)),u),Td(v),u=Zw(o,u,m,p);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(vn=qs(o.firstChild),va=u,Or=!0,Oo=null,zs=!0,p=Vk(u,null,m,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Ll(),m===v){u=ro(o,u,p);break e}wa(o,u,m,p)}u=u.child}return u;case 26:return jp(o,u),o===null?(p=pE(u.type,null,u.pendingProps,null))?u.memoizedState=p:Or||(p=u.type,o=u.pendingProps,m=Wp(Ee.current).createElement(p),m[Fr]=u,m[Sr]=o,Sa(m,p,o),er(m),u.stateNode=m):u.memoizedState=pE(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return ge(u),o===null&&Or&&(m=u.stateNode=dE(u.type,u.pendingProps,Ee.current),va=u,zs=!0,v=vn,Vo(u.type)?(Ob=v,vn=qs(m.firstChild)):vn=v),wa(o,u,u.pendingProps.children,p),jp(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Or&&((v=m=vn)&&(m=G6(m,u.type,u.pendingProps,zs),m!==null?(u.stateNode=m,va=u,vn=qs(m.firstChild),zs=!1,v=!0):v=!1),v||Ro(u)),ge(u),v=u.type,w=u.pendingProps,L=o!==null?o.memoizedProps:null,m=w.children,Nb(v,w)?m=null:L!==null&&Nb(v,L)&&(u.flags|=32),u.memoizedState!==null&&(v=Cx(o,u,i6,null,null,p),Zd._currentValue=v),jp(o,u),wa(o,u,m,p),u.child;case 6:return o===null&&Or&&((o=p=vn)&&(p=Y6(p,u.pendingProps,zs),p!==null?(u.stateNode=p,va=u,vn=null,o=!0):o=!1),o||Ro(u)),null;case 13:return eS(o,u,p);case 4:return ve(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=Pl(u,null,m,p):wa(o,u,m,p),u.child;case 11:return Gw(o,u,u.type,u.pendingProps,p);case 7:return wa(o,u,u.pendingProps,p),u.child;case 8:return wa(o,u,u.pendingProps.children,p),u.child;case 12:return wa(o,u,u.pendingProps.children,p),u.child;case 10:return m=u.pendingProps,Io(u,u.type,m.value),wa(o,u,m.children,p),u.child;case 9:return v=u.type._context,m=u.pendingProps.children,Ol(u),v=ka(v),m=m(v),u.flags|=1,wa(o,u,m,p),u.child;case 14:return Yw(o,u,u.type,u.pendingProps,p);case 15:return Ww(o,u,u.type,u.pendingProps,p);case 19:return rS(o,u,p);case 31:return p6(o,u,p);case 22:return Vw(o,u,p,u.pendingProps);case 24:return Ol(u),m=ka(Xn),o===null?(v=xx(),v===null&&(v=fn,w=fx(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=p),v=w),u.memoizedState={parent:m,cache:v},yx(u),Io(u,Xn,v)):((o.lanes&p)!==0&&(vx(o,u),Od(u,null,null,p),Md()),v=o.memoizedState,w=u.memoizedState,v.parent!==m?(v={parent:m,cache:m},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),Io(u,Xn,m)):(m=w.cache,Io(u,Xn,m),m!==v.cache&&px(u,[Xn],p,!0))),wa(o,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function no(o){o.flags|=4}function tb(o,u,p,m,v){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(jS())o.flags|=8192;else throw Dl=fp,bx}else o.flags&=-16777217}function aS(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!yE(u))if(jS())o.flags|=8192;else throw Dl=fp,bx}function Mp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Pt():536870912,o.lanes|=u,Zc|=u)}function Fd(o,u){if(!Or)switch(o.tailMode){case"hidden":u=o.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function kn(o){var u=o.alternate!==null&&o.alternate.child===o.child,p=0,m=0;if(u)for(var v=o.child;v!==null;)p|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)p|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=p,u}function m6(o,u,p){var m=u.pendingProps;switch(cx(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(u),null;case 1:return kn(u),null;case 3:return p=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Zi(Xn),Pe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&($c(u)?no(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,dx())),kn(u),null;case 26:var v=u.type,w=u.memoizedState;return o===null?(no(u),w!==null?(kn(u),aS(u,w)):(kn(u),tb(u,v,null,m,p))):w?w!==o.memoizedState?(no(u),kn(u),aS(u,w)):(kn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&no(u),kn(u),tb(u,v,o,m,p)),null;case 27:if(Be(u),p=Ee.current,v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&no(u);else{if(!m){if(u.stateNode===null)throw Error(n(166));return kn(u),null}o=le.current,$c(u)?Pk(u):(o=dE(v,m,p),u.stateNode=o,no(u))}return kn(u),null;case 5:if(Be(u),v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&no(u);else{if(!m){if(u.stateNode===null)throw Error(n(166));return kn(u),null}if(w=le.current,$c(u))Pk(u);else{var L=Wp(Ee.current);switch(w){case 1:w=L.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=L.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=L.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=L.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?L.createElement("select",{is:m.is}):L.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?L.createElement(v,{is:m.is}):L.createElement(v)}}w[Fr]=u,w[Sr]=m;e:for(L=u.child;L!==null;){if(L.tag===5||L.tag===6)w.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===u)break e;for(;L.sibling===null;){if(L.return===null||L.return===u)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}u.stateNode=w;e:switch(Sa(w,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&no(u)}}return kn(u),tb(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,p),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&no(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(n(166));if(o=Ee.current,$c(u)){if(o=u.stateNode,p=u.memoizedProps,m=null,v=va,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}o[Fr]=u,o=!!(o.nodeValue===p||m!==null&&m.suppressHydrationWarning===!0||eE(o.nodeValue,p)),o||Ro(u,!0)}else o=Wp(o).createTextNode(m),o[Fr]=u,u.stateNode=o}return kn(u),null;case 31:if(p=u.memoizedState,o===null||o.memoizedState!==null){if(m=$c(u),p!==null){if(o===null){if(!m)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Fr]=u}else Ll(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;kn(u),o=!1}else p=dx(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=p),o=!0;if(!o)return u.flags&256?(Ss(u),u):(Ss(u),null);if((u.flags&128)!==0)throw Error(n(558))}return kn(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=$c(u),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(n(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Fr]=u}else Ll(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;kn(u),v=!1}else v=dx(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(Ss(u),u):(Ss(u),null)}return Ss(u),(u.flags&128)!==0?(u.lanes=p,u):(p=m!==null,o=o!==null&&o.memoizedState!==null,p&&(m=u.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==v&&(m.flags|=2048)),p!==o&&p&&(u.child.flags|=8192),Mp(u,u.updateQueue),kn(u),null);case 4:return Pe(),o===null&&Sb(u.stateNode.containerInfo),kn(u),null;case 10:return Zi(u.type),kn(u),null;case 19:if(z(Hn),m=u.memoizedState,m===null)return kn(u),null;if(v=(u.flags&128)!==0,w=m.rendering,w===null)if(v)Fd(m,!1);else{if(Bn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(w=yp(o),w!==null){for(u.flags|=128,Fd(m,!1),o=w.updateQueue,u.updateQueue=o,Mp(u,o),u.subtreeFlags=0,o=p,p=u.child;p!==null;)Mk(p,o),p=p.sibling;return M(Hn,Hn.current&1|2),Or&&Qi(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Kt()>Pp&&(u.flags|=128,v=!0,Fd(m,!1),u.lanes=4194304)}else{if(!v)if(o=yp(w),o!==null){if(u.flags|=128,v=!0,o=o.updateQueue,u.updateQueue=o,Mp(u,o),Fd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Or)return kn(u),null}else 2*Kt()-m.renderingStartTime>Pp&&p!==536870912&&(u.flags|=128,v=!0,Fd(m,!1),u.lanes=4194304);m.isBackwards?(w.sibling=u.child,u.child=w):(o=m.last,o!==null?o.sibling=w:u.child=w,m.last=w)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Kt(),o.sibling=null,p=Hn.current,M(Hn,v?p&1|2:p&1),Or&&Qi(u,m.treeForkCount),o):(kn(u),null);case 22:case 23:return Ss(u),Ex(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(p&536870912)!==0&&(u.flags&128)===0&&(kn(u),u.subtreeFlags&6&&(u.flags|=8192)):kn(u),p=u.updateQueue,p!==null&&Mp(u,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048),o!==null&&z(Rl),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Zi(Xn),kn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function x6(o,u){switch(cx(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Zi(Xn),Pe(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Be(u),null;case 31:if(u.memoizedState!==null){if(Ss(u),u.alternate===null)throw Error(n(340));Ll()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Ss(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Ll()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return z(Hn),null;case 4:return Pe(),null;case 10:return Zi(u.type),null;case 22:case 23:return Ss(u),Ex(),o!==null&&z(Rl),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Zi(Xn),null;case 25:return null;default:return null}}function sS(o,u){switch(cx(u),u.tag){case 3:Zi(Xn),Pe();break;case 26:case 27:case 5:Be(u);break;case 4:Pe();break;case 31:u.memoizedState!==null&&Ss(u);break;case 13:Ss(u);break;case 19:z(Hn);break;case 10:Zi(u.type);break;case 22:case 23:Ss(u),Ex(),o!==null&&z(Rl);break;case 24:Zi(Xn)}}function $d(o,u){try{var p=u.updateQueue,m=p!==null?p.lastEffect:null;if(m!==null){var v=m.next;p=v;do{if((p.tag&o)===o){m=void 0;var w=p.create,L=p.inst;m=w(),L.destroy=m}p=p.next}while(p!==v)}}catch(Y){cn(u,u.return,Y)}}function Uo(o,u,p){try{var m=u.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var w=v.next;m=w;do{if((m.tag&o)===o){var L=m.inst,Y=L.destroy;if(Y!==void 0){L.destroy=void 0,v=u;var oe=p,_e=Y;try{_e()}catch(Ie){cn(v,oe,Ie)}}}m=m.next}while(m!==w)}}catch(Ie){cn(u,u.return,Ie)}}function iS(o){var u=o.updateQueue;if(u!==null){var p=o.stateNode;try{Xk(u,p)}catch(m){cn(o,o.return,m)}}}function oS(o,u,p){p.props=Fl(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(m){cn(o,u,m)}}function Ud(o,u){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof p=="function"?o.refCleanup=p(m):p.current=m}}catch(v){cn(o,u,v)}}function Si(o,u){var p=o.ref,m=o.refCleanup;if(p!==null)if(typeof m=="function")try{m()}catch(v){cn(o,u,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){cn(o,u,v)}else p.current=null}function lS(o){var u=o.type,p=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&m.focus();break e;case"img":p.src?m.src=p.src:p.srcSet&&(m.srcset=p.srcSet)}}catch(v){cn(o,o.return,v)}}function rb(o,u,p){try{var m=o.stateNode;F6(m,o.type,p,u),m[Sr]=u}catch(v){cn(o,o.return,v)}}function cS(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Vo(o.type)||o.tag===4}function nb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Vo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ab(o,u,p){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(o),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=ct));else if(m!==4&&(m===27&&Vo(o.type)&&(p=o.stateNode,u=null),o=o.child,o!==null))for(ab(o,u,p),o=o.sibling;o!==null;)ab(o,u,p),o=o.sibling}function Op(o,u,p){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?p.insertBefore(o,u):p.appendChild(o);else if(m!==4&&(m===27&&Vo(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(Op(o,u,p),o=o.sibling;o!==null;)Op(o,u,p),o=o.sibling}function uS(o){var u=o.stateNode,p=o.memoizedProps;try{for(var m=o.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);Sa(u,m,p),u[Fr]=o,u[Sr]=p}catch(w){cn(o,o.return,w)}}var ao=!1,Zn=!1,sb=!1,dS=typeof WeakSet=="function"?WeakSet:Set,ga=null;function b6(o,u){if(o=o.containerInfo,Tb=ef,o=on(o),Jr(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var m=p.getSelection&&p.getSelection();if(m&&m.rangeCount!==0){p=m.anchorNode;var v=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var L=0,Y=-1,oe=-1,_e=0,Ie=0,ze=o,Ce=null;t:for(;;){for(var je;ze!==p||v!==0&&ze.nodeType!==3||(Y=L+v),ze!==w||m!==0&&ze.nodeType!==3||(oe=L+m),ze.nodeType===3&&(L+=ze.nodeValue.length),(je=ze.firstChild)!==null;)Ce=ze,ze=je;for(;;){if(ze===o)break t;if(Ce===p&&++_e===v&&(Y=L),Ce===w&&++Ie===m&&(oe=L),(je=ze.nextSibling)!==null)break;ze=Ce,Ce=ze.parentNode}ze=je}p=Y===-1||oe===-1?null:{start:Y,end:oe}}else p=null}p=p||{start:0,end:0}}else p=null;for(Cb={focusedElem:o,selectionRange:p},ef=!1,ga=u;ga!==null;)if(u=ga,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,ga=o;else for(;ga!==null;){switch(u=ga,w=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(p=0;p<o.length;p++)v=o[p],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,p=u,v=w.memoizedProps,w=w.memoizedState,m=p.stateNode;try{var Tt=Fl(p.type,v);o=m.getSnapshotBeforeUpdate(Tt,w),m.__reactInternalSnapshotBeforeUpdate=o}catch(Xt){cn(p,p.return,Xt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,p=o.nodeType,p===9)jb(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":jb(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,ga=o;break}ga=u.return}}function hS(o,u,p){var m=p.flags;switch(p.tag){case 0:case 11:case 15:io(o,p),m&4&&$d(5,p);break;case 1:if(io(o,p),m&4)if(o=p.stateNode,u===null)try{o.componentDidMount()}catch(L){cn(p,p.return,L)}else{var v=Fl(p.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(v,u,o.__reactInternalSnapshotBeforeUpdate)}catch(L){cn(p,p.return,L)}}m&64&&iS(p),m&512&&Ud(p,p.return);break;case 3:if(io(o,p),m&64&&(o=p.updateQueue,o!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{Xk(o,u)}catch(L){cn(p,p.return,L)}}break;case 27:u===null&&m&4&&uS(p);case 26:case 5:io(o,p),u===null&&m&4&&lS(p),m&512&&Ud(p,p.return);break;case 12:io(o,p);break;case 31:io(o,p),m&4&&fS(o,p);break;case 13:io(o,p),m&4&&mS(o,p),m&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=C6.bind(null,p),W6(o,p))));break;case 22:if(m=p.memoizedState!==null||ao,!m){u=u!==null&&u.memoizedState!==null||Zn,v=ao;var w=Zn;ao=m,(Zn=u)&&!w?oo(o,p,(p.subtreeFlags&8772)!==0):io(o,p),ao=v,Zn=w}break;case 30:break;default:io(o,p)}}function gS(o){var u=o.alternate;u!==null&&(o.alternate=null,gS(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&ce(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Tn=null,ss=!1;function so(o,u,p){for(p=p.child;p!==null;)pS(o,u,p),p=p.sibling}function pS(o,u,p){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(dt,p)}catch{}switch(p.tag){case 26:Zn||Si(p,u),so(o,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Zn||Si(p,u);var m=Tn,v=ss;Vo(p.type)&&(Tn=p.stateNode,ss=!1),so(o,u,p),Xd(p.stateNode),Tn=m,ss=v;break;case 5:Zn||Si(p,u);case 6:if(m=Tn,v=ss,Tn=null,so(o,u,p),Tn=m,ss=v,Tn!==null)if(ss)try{(Tn.nodeType===9?Tn.body:Tn.nodeName==="HTML"?Tn.ownerDocument.body:Tn).removeChild(p.stateNode)}catch(w){cn(p,u,w)}else try{Tn.removeChild(p.stateNode)}catch(w){cn(p,u,w)}break;case 18:Tn!==null&&(ss?(o=Tn,iE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),ou(o)):iE(Tn,p.stateNode));break;case 4:m=Tn,v=ss,Tn=p.stateNode.containerInfo,ss=!0,so(o,u,p),Tn=m,ss=v;break;case 0:case 11:case 14:case 15:Uo(2,p,u),Zn||Uo(4,p,u),so(o,u,p);break;case 1:Zn||(Si(p,u),m=p.stateNode,typeof m.componentWillUnmount=="function"&&oS(p,u,m)),so(o,u,p);break;case 21:so(o,u,p);break;case 22:Zn=(m=Zn)||p.memoizedState!==null,so(o,u,p),Zn=m;break;default:so(o,u,p)}}function fS(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{ou(o)}catch(p){cn(u,u.return,p)}}}function mS(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{ou(o)}catch(p){cn(u,u.return,p)}}function y6(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new dS),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new dS),u;default:throw Error(n(435,o.tag))}}function Rp(o,u){var p=y6(o);u.forEach(function(m){if(!p.has(m)){p.add(m);var v=N6.bind(null,o,m);m.then(v,v)}})}function is(o,u){var p=u.deletions;if(p!==null)for(var m=0;m<p.length;m++){var v=p[m],w=o,L=u,Y=L;e:for(;Y!==null;){switch(Y.tag){case 27:if(Vo(Y.type)){Tn=Y.stateNode,ss=!1;break e}break;case 5:Tn=Y.stateNode,ss=!1;break e;case 3:case 4:Tn=Y.stateNode.containerInfo,ss=!0;break e}Y=Y.return}if(Tn===null)throw Error(n(160));pS(w,L,v),Tn=null,ss=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)xS(u,o),u=u.sibling}var oi=null;function xS(o,u){var p=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:is(u,o),os(o),m&4&&(Uo(3,o,o.return),$d(3,o),Uo(5,o,o.return));break;case 1:is(u,o),os(o),m&512&&(Zn||p===null||Si(p,p.return)),m&64&&ao&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?m:p.concat(m))));break;case 26:var v=oi;if(is(u,o),os(o),m&512&&(Zn||p===null||Si(p,p.return)),m&4){var w=p!==null?p.memoizedState:null;if(m=o.memoizedState,p===null)if(m===null)if(o.stateNode===null){e:{m=o.type,p=o.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":w=v.getElementsByTagName("title")[0],(!w||w[wt]||w[Fr]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(m),v.head.insertBefore(w,v.querySelector("head > title"))),Sa(w,m,p),w[Fr]=o,er(w),m=w;break e;case"link":var L=xE("link","href",v).get(m+(p.href||""));if(L){for(var Y=0;Y<L.length;Y++)if(w=L[Y],w.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){L.splice(Y,1);break t}}w=v.createElement(m),Sa(w,m,p),v.head.appendChild(w);break;case"meta":if(L=xE("meta","content",v).get(m+(p.content||""))){for(Y=0;Y<L.length;Y++)if(w=L[Y],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){L.splice(Y,1);break t}}w=v.createElement(m),Sa(w,m,p),v.head.appendChild(w);break;default:throw Error(n(468,m))}w[Fr]=o,er(w),m=w}o.stateNode=m}else bE(v,o.type,o.stateNode);else o.stateNode=mE(v,m,o.memoizedProps);else w!==m?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,m===null?bE(v,o.type,o.stateNode):mE(v,m,o.memoizedProps)):m===null&&o.stateNode!==null&&rb(o,o.memoizedProps,p.memoizedProps)}break;case 27:is(u,o),os(o),m&512&&(Zn||p===null||Si(p,p.return)),p!==null&&m&4&&rb(o,o.memoizedProps,p.memoizedProps);break;case 5:if(is(u,o),os(o),m&512&&(Zn||p===null||Si(p,p.return)),o.flags&32){v=o.stateNode;try{ot(v,"")}catch(Tt){cn(o,o.return,Tt)}}m&4&&o.stateNode!=null&&(v=o.memoizedProps,rb(o,v,p!==null?p.memoizedProps:v)),m&1024&&(sb=!0);break;case 6:if(is(u,o),os(o),m&4){if(o.stateNode===null)throw Error(n(162));m=o.memoizedProps,p=o.stateNode;try{p.nodeValue=m}catch(Tt){cn(o,o.return,Tt)}}break;case 3:if(Xp=null,v=oi,oi=Vp(u.containerInfo),is(u,o),oi=v,os(o),m&4&&p!==null&&p.memoizedState.isDehydrated)try{ou(u.containerInfo)}catch(Tt){cn(o,o.return,Tt)}sb&&(sb=!1,bS(o));break;case 4:m=oi,oi=Vp(o.stateNode.containerInfo),is(u,o),os(o),oi=m;break;case 12:is(u,o),os(o);break;case 31:is(u,o),os(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Rp(o,m)));break;case 13:is(u,o),os(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Dp=Kt()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Rp(o,m)));break;case 22:v=o.memoizedState!==null;var oe=p!==null&&p.memoizedState!==null,_e=ao,Ie=Zn;if(ao=_e||v,Zn=Ie||oe,is(u,o),Zn=Ie,ao=_e,os(o),m&8192)e:for(u=o.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(p===null||oe||ao||Zn||$l(o)),p=null,u=o;;){if(u.tag===5||u.tag===26){if(p===null){oe=p=u;try{if(w=oe.stateNode,v)L=w.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{Y=oe.stateNode;var ze=oe.memoizedProps.style,Ce=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;Y.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Tt){cn(oe,oe.return,Tt)}}}else if(u.tag===6){if(p===null){oe=u;try{oe.stateNode.nodeValue=v?"":oe.memoizedProps}catch(Tt){cn(oe,oe.return,Tt)}}}else if(u.tag===18){if(p===null){oe=u;try{var je=oe.stateNode;v?oE(je,!0):oE(oe.stateNode,!1)}catch(Tt){cn(oe,oe.return,Tt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(p=m.retryQueue,p!==null&&(m.retryQueue=null,Rp(o,p))));break;case 19:is(u,o),os(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Rp(o,m)));break;case 30:break;case 21:break;default:is(u,o),os(o)}}function os(o){var u=o.flags;if(u&2){try{for(var p,m=o.return;m!==null;){if(cS(m)){p=m;break}m=m.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var v=p.stateNode,w=nb(o);Op(o,w,v);break;case 5:var L=p.stateNode;p.flags&32&&(ot(L,""),p.flags&=-33);var Y=nb(o);Op(o,Y,L);break;case 3:case 4:var oe=p.stateNode.containerInfo,_e=nb(o);ab(o,_e,oe);break;default:throw Error(n(161))}}catch(Ie){cn(o,o.return,Ie)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function bS(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;bS(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function io(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hS(o,u.alternate,u),u=u.sibling}function $l(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Uo(4,u,u.return),$l(u);break;case 1:Si(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&oS(u,u.return,p),$l(u);break;case 27:Xd(u.stateNode);case 26:case 5:Si(u,u.return),$l(u);break;case 22:u.memoizedState===null&&$l(u);break;case 30:$l(u);break;default:$l(u)}o=o.sibling}}function oo(o,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,v=o,w=u,L=w.flags;switch(w.tag){case 0:case 11:case 15:oo(v,w,p),$d(4,w);break;case 1:if(oo(v,w,p),m=w,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(_e){cn(m,m.return,_e)}if(m=w,v=m.updateQueue,v!==null){var Y=m.stateNode;try{var oe=v.shared.hiddenCallbacks;if(oe!==null)for(v.shared.hiddenCallbacks=null,v=0;v<oe.length;v++)Kk(oe[v],Y)}catch(_e){cn(m,m.return,_e)}}p&&L&64&&iS(w),Ud(w,w.return);break;case 27:uS(w);case 26:case 5:oo(v,w,p),p&&m===null&&L&4&&lS(w),Ud(w,w.return);break;case 12:oo(v,w,p);break;case 31:oo(v,w,p),p&&L&4&&fS(v,w);break;case 13:oo(v,w,p),p&&L&4&&mS(v,w);break;case 22:w.memoizedState===null&&oo(v,w,p),Ud(w,w.return);break;case 30:break;default:oo(v,w,p)}u=u.sibling}}function ib(o,u){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Cd(p))}function ob(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Cd(o))}function li(o,u,p,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)yS(o,u,p,m),u=u.sibling}function yS(o,u,p,m){var v=u.flags;switch(u.tag){case 0:case 11:case 15:li(o,u,p,m),v&2048&&$d(9,u);break;case 1:li(o,u,p,m);break;case 3:li(o,u,p,m),v&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Cd(o)));break;case 12:if(v&2048){li(o,u,p,m),o=u.stateNode;try{var w=u.memoizedProps,L=w.id,Y=w.onPostCommit;typeof Y=="function"&&Y(L,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(oe){cn(u,u.return,oe)}}else li(o,u,p,m);break;case 31:li(o,u,p,m);break;case 13:li(o,u,p,m);break;case 23:break;case 22:w=u.stateNode,L=u.alternate,u.memoizedState!==null?w._visibility&2?li(o,u,p,m):zd(o,u):w._visibility&2?li(o,u,p,m):(w._visibility|=2,Xc(o,u,p,m,(u.subtreeFlags&10256)!==0||!1)),v&2048&&ib(L,u);break;case 24:li(o,u,p,m),v&2048&&ob(u.alternate,u);break;default:li(o,u,p,m)}}function Xc(o,u,p,m,v){for(v=v&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=o,L=u,Y=p,oe=m,_e=L.flags;switch(L.tag){case 0:case 11:case 15:Xc(w,L,Y,oe,v),$d(8,L);break;case 23:break;case 22:var Ie=L.stateNode;L.memoizedState!==null?Ie._visibility&2?Xc(w,L,Y,oe,v):zd(w,L):(Ie._visibility|=2,Xc(w,L,Y,oe,v)),v&&_e&2048&&ib(L.alternate,L);break;case 24:Xc(w,L,Y,oe,v),v&&_e&2048&&ob(L.alternate,L);break;default:Xc(w,L,Y,oe,v)}u=u.sibling}}function zd(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=o,m=u,v=m.flags;switch(m.tag){case 22:zd(p,m),v&2048&&ib(m.alternate,m);break;case 24:zd(p,m),v&2048&&ob(m.alternate,m);break;default:zd(p,m)}u=u.sibling}}var Hd=8192;function Qc(o,u,p){if(o.subtreeFlags&Hd)for(o=o.child;o!==null;)vS(o,u,p),o=o.sibling}function vS(o,u,p){switch(o.tag){case 26:Qc(o,u,p),o.flags&Hd&&o.memoizedState!==null&&sD(p,oi,o.memoizedState,o.memoizedProps);break;case 5:Qc(o,u,p);break;case 3:case 4:var m=oi;oi=Vp(o.stateNode.containerInfo),Qc(o,u,p),oi=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Hd,Hd=16777216,Qc(o,u,p),Hd=m):Qc(o,u,p));break;default:Qc(o,u,p)}}function kS(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function qd(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var m=u[p];ga=m,SS(m,o)}kS(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wS(o),o=o.sibling}function wS(o){switch(o.tag){case 0:case 11:case 15:qd(o),o.flags&2048&&Uo(9,o,o.return);break;case 3:qd(o);break;case 12:qd(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Ip(o)):qd(o);break;default:qd(o)}}function Ip(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var m=u[p];ga=m,SS(m,o)}kS(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Uo(8,u,u.return),Ip(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Ip(u));break;default:Ip(u)}o=o.sibling}}function SS(o,u){for(;ga!==null;){var p=ga;switch(p.tag){case 0:case 11:case 15:Uo(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var m=p.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Cd(p.memoizedState.cache)}if(m=p.child,m!==null)m.return=p,ga=m;else e:for(p=o;ga!==null;){m=ga;var v=m.sibling,w=m.return;if(gS(m),m===p){ga=null;break e}if(v!==null){v.return=w,ga=v;break e}ga=w}}}var v6={getCacheForType:function(o){var u=ka(Xn),p=u.data.get(o);return p===void 0&&(p=o(),u.data.set(o,p)),p},cacheSignal:function(){return ka(Xn).controller.signal}},k6=typeof WeakMap=="function"?WeakMap:Map,Vr=0,fn=null,_r=null,jr=0,ln=0,Es=null,zo=!1,Jc=!1,lb=!1,lo=0,Bn=0,Ho=0,Ul=0,cb=0,_s=0,Zc=0,Gd=null,ls=null,ub=!1,Dp=0,ES=0,Pp=1/0,Bp=null,qo=null,aa=0,Go=null,eu=null,co=0,db=0,hb=null,_S=null,Yd=0,gb=null;function Ts(){return(Vr&2)!==0&&jr!==0?jr&-jr:O.T!==null?yb():Na()}function TS(){if(_s===0)if((jr&536870912)===0||Or){var o=ma;ma<<=1,(ma&3932160)===0&&(ma=262144),_s=o}else _s=536870912;return o=ws.current,o!==null&&(o.flags|=32),_s}function cs(o,u,p){(o===fn&&(ln===2||ln===9)||o.cancelPendingCommit!==null)&&(tu(o,0),Yo(o,jr,_s,!1)),wr(o,p),((Vr&2)===0||o!==fn)&&(o===fn&&((Vr&2)===0&&(Ul|=p),Bn===4&&Yo(o,jr,_s,!1)),Ei(o))}function CS(o,u,p){if((Vr&6)!==0)throw Error(n(327));var m=!p&&(u&127)===0&&(u&o.expiredLanes)===0||Oe(o,u),v=m?E6(o,u):fb(o,u,!0),w=m;do{if(v===0){Jc&&!m&&Yo(o,u,0,!1);break}else{if(p=o.current.alternate,w&&!w6(p)){v=fb(o,u,!1),w=!1;continue}if(v===2){if(w=u,o.errorRecoveryDisabledLanes&w)var L=0;else L=o.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){u=L;e:{var Y=o;v=Gd;var oe=Y.current.memoizedState.isDehydrated;if(oe&&(tu(Y,L).flags|=256),L=fb(Y,L,!1),L!==2){if(lb&&!oe){Y.errorRecoveryDisabledLanes|=w,Ul|=w,v=4;break e}w=ls,ls=v,w!==null&&(ls===null?ls=w:ls.push.apply(ls,w))}v=L}if(w=!1,v!==2)continue}}if(v===1){tu(o,0),Yo(o,u,0,!0);break}e:{switch(m=o,w=v,w){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Yo(m,u,_s,!zo);break e;case 2:ls=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(v=Dp+300-Kt(),10<v)){if(Yo(m,u,_s,!zo),ie(m,0,!0)!==0)break e;co=u,m.timeoutHandle=aE(NS.bind(null,m,p,ls,Bp,ub,u,_s,Ul,Zc,zo,w,"Throttled",-0,0),v);break e}NS(m,p,ls,Bp,ub,u,_s,Ul,Zc,zo,w,null,-0,0)}}break}while(!0);Ei(o)}function NS(o,u,p,m,v,w,L,Y,oe,_e,Ie,ze,Ce,je){if(o.timeoutHandle=-1,ze=u.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ct},vS(u,w,ze);var Tt=(w&62914560)===w?Dp-Kt():(w&4194048)===w?ES-Kt():0;if(Tt=iD(ze,Tt),Tt!==null){co=w,o.cancelPendingCommit=Tt(DS.bind(null,o,u,w,p,m,v,L,Y,oe,Ie,ze,null,Ce,je)),Yo(o,w,L,!_e);return}}DS(o,u,w,p,m,v,L,Y,oe)}function w6(o){for(var u=o;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var m=0;m<p.length;m++){var v=p[m],w=v.getSnapshot;v=v.value;try{if(!St(w(),v))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Yo(o,u,p,m){u&=~cb,u&=~Ul,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var v=u;0<v;){var w=31-Jt(v),L=1<<w;m[w]=-1,v&=~L}p!==0&&pt(o,p,u)}function Fp(){return(Vr&6)===0?(Wd(0),!1):!0}function pb(){if(_r!==null){if(ln===0)var o=_r.return;else o=_r,Ji=Ml=null,jx(o),Gc=null,Ad=0,o=_r;for(;o!==null;)sS(o.alternate,o),o=o.return;_r=null}}function tu(o,u){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,z6(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),co=0,pb(),fn=o,_r=p=Xi(o.current,null),jr=u,ln=0,Es=null,zo=!1,Jc=Oe(o,u),lb=!1,Zc=_s=cb=Ul=Ho=Bn=0,ls=Gd=null,ub=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var v=31-Jt(m),w=1<<v;u|=o[v],m&=~w}return lo=u,ip(),p}function AS(o,u){hr=null,O.H=Pd,u===qc||u===pp?(u=Gk(),ln=3):u===bx?(u=Gk(),ln=4):ln=u===Yx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Es=u,_r===null&&(Bn=1,Np(o,Fs(u,o.current)))}function jS(){var o=ws.current;return o===null?!0:(jr&4194048)===jr?Hs===null:(jr&62914560)===jr||(jr&536870912)!==0?o===Hs:!1}function LS(){var o=O.H;return O.H=Pd,o===null?Pd:o}function MS(){var o=O.A;return O.A=v6,o}function $p(){Bn=4,zo||(jr&4194048)!==jr&&ws.current!==null||(Jc=!0),(Ho&134217727)===0&&(Ul&134217727)===0||fn===null||Yo(fn,jr,_s,!1)}function fb(o,u,p){var m=Vr;Vr|=2;var v=LS(),w=MS();(fn!==o||jr!==u)&&(Bp=null,tu(o,u)),u=!1;var L=Bn;e:do try{if(ln!==0&&_r!==null){var Y=_r,oe=Es;switch(ln){case 8:pb(),L=6;break e;case 3:case 2:case 9:case 6:ws.current===null&&(u=!0);var _e=ln;if(ln=0,Es=null,ru(o,Y,oe,_e),p&&Jc){L=0;break e}break;default:_e=ln,ln=0,Es=null,ru(o,Y,oe,_e)}}S6(),L=Bn;break}catch(Ie){AS(o,Ie)}while(!0);return u&&o.shellSuspendCounter++,Ji=Ml=null,Vr=m,O.H=v,O.A=w,_r===null&&(fn=null,jr=0,ip()),L}function S6(){for(;_r!==null;)OS(_r)}function E6(o,u){var p=Vr;Vr|=2;var m=LS(),v=MS();fn!==o||jr!==u?(Bp=null,Pp=Kt()+500,tu(o,u)):Jc=Oe(o,u);e:do try{if(ln!==0&&_r!==null){u=_r;var w=Es;t:switch(ln){case 1:ln=0,Es=null,ru(o,u,w,1);break;case 2:case 9:if(Hk(w)){ln=0,Es=null,RS(u);break}u=function(){ln!==2&&ln!==9||fn!==o||(ln=7),Ei(o)},w.then(u,u);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:Hk(w)?(ln=0,Es=null,RS(u)):(ln=0,Es=null,ru(o,u,w,7));break;case 5:var L=null;switch(_r.tag){case 26:L=_r.memoizedState;case 5:case 27:var Y=_r;if(L?yE(L):Y.stateNode.complete){ln=0,Es=null;var oe=Y.sibling;if(oe!==null)_r=oe;else{var _e=Y.return;_e!==null?(_r=_e,Up(_e)):_r=null}break t}}ln=0,Es=null,ru(o,u,w,5);break;case 6:ln=0,Es=null,ru(o,u,w,6);break;case 8:pb(),Bn=6;break e;default:throw Error(n(462))}}_6();break}catch(Ie){AS(o,Ie)}while(!0);return Ji=Ml=null,O.H=m,O.A=v,Vr=p,_r!==null?0:(fn=null,jr=0,ip(),Bn)}function _6(){for(;_r!==null&&!tn();)OS(_r)}function OS(o){var u=nS(o.alternate,o,lo);o.memoizedProps=o.pendingProps,u===null?Up(o):_r=u}function RS(o){var u=o,p=u.alternate;switch(u.tag){case 15:case 0:u=Qw(p,u,u.pendingProps,u.type,void 0,jr);break;case 11:u=Qw(p,u,u.pendingProps,u.type.render,u.ref,jr);break;case 5:jx(u);default:sS(p,u),u=_r=Mk(u,lo),u=nS(p,u,lo)}o.memoizedProps=o.pendingProps,u===null?Up(o):_r=u}function ru(o,u,p,m){Ji=Ml=null,jx(u),Gc=null,Ad=0;var v=u.return;try{if(g6(o,v,u,p,jr)){Bn=1,Np(o,Fs(p,o.current)),_r=null;return}}catch(w){if(v!==null)throw _r=v,w;Bn=1,Np(o,Fs(p,o.current)),_r=null;return}u.flags&32768?(Or||m===1?o=!0:Jc||(jr&536870912)!==0?o=!1:(zo=o=!0,(m===2||m===9||m===3||m===6)&&(m=ws.current,m!==null&&m.tag===13&&(m.flags|=16384))),IS(u,o)):Up(u)}function Up(o){var u=o;do{if((u.flags&32768)!==0){IS(u,zo);return}o=u.return;var p=m6(u.alternate,u,lo);if(p!==null){_r=p;return}if(u=u.sibling,u!==null){_r=u;return}_r=u=o}while(u!==null);Bn===0&&(Bn=5)}function IS(o,u){do{var p=x6(o.alternate,o);if(p!==null){p.flags&=32767,_r=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(o=o.sibling,o!==null)){_r=o;return}_r=o=p}while(o!==null);Bn=6,_r=null}function DS(o,u,p,m,v,w,L,Y,oe){o.cancelPendingCommit=null;do zp();while(aa!==0);if((Vr&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(w=u.lanes|u.childLanes,w|=nx,xt(o,p,w,L,Y,oe),o===fn&&(_r=fn=null,jr=0),eu=u,Go=o,co=p,db=w,hb=v,_S=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,A6(Re,function(){return US(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=O.T,O.T=null,v=q.p,q.p=2,L=Vr,Vr|=4;try{b6(o,u,p)}finally{Vr=L,q.p=v,O.T=m}}aa=1,PS(),BS(),FS()}}function PS(){if(aa===1){aa=0;var o=Go,u=eu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=O.T,O.T=null;var m=q.p;q.p=2;var v=Vr;Vr|=4;try{xS(u,o);var w=Cb,L=on(o.containerInfo),Y=w.focusedElem,oe=w.selectionRange;if(L!==Y&&Y&&Y.ownerDocument&&_n(Y.ownerDocument.documentElement,Y)){if(oe!==null&&Jr(Y)){var _e=oe.start,Ie=oe.end;if(Ie===void 0&&(Ie=_e),"selectionStart"in Y)Y.selectionStart=_e,Y.selectionEnd=Math.min(Ie,Y.value.length);else{var ze=Y.ownerDocument||document,Ce=ze&&ze.defaultView||window;if(Ce.getSelection){var je=Ce.getSelection(),Tt=Y.textContent.length,Xt=Math.min(oe.start,Tt),hn=oe.end===void 0?Xt:Math.min(oe.end,Tt);!je.extend&&Xt>hn&&(L=hn,hn=Xt,Xt=L);var fe=Kn(Y,Xt),de=Kn(Y,hn);if(fe&&de&&(je.rangeCount!==1||je.anchorNode!==fe.node||je.anchorOffset!==fe.offset||je.focusNode!==de.node||je.focusOffset!==de.offset)){var Se=ze.createRange();Se.setStart(fe.node,fe.offset),je.removeAllRanges(),Xt>hn?(je.addRange(Se),je.extend(de.node,de.offset)):(Se.setEnd(de.node,de.offset),je.addRange(Se))}}}}for(ze=[],je=Y;je=je.parentNode;)je.nodeType===1&&ze.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<ze.length;Y++){var $e=ze[Y];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}ef=!!Tb,Cb=Tb=null}finally{Vr=v,q.p=m,O.T=p}}o.current=u,aa=2}}function BS(){if(aa===2){aa=0;var o=Go,u=eu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=O.T,O.T=null;var m=q.p;q.p=2;var v=Vr;Vr|=4;try{hS(o,u.alternate,u)}finally{Vr=v,q.p=m,O.T=p}}aa=3}}function FS(){if(aa===4||aa===3){aa=0,ar();var o=Go,u=eu,p=co,m=_S;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?aa=5:(aa=0,eu=Go=null,$S(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(qo=null),En(p),u=u.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(dt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=O.T,v=q.p,q.p=2,O.T=null;try{for(var w=o.onRecoverableError,L=0;L<m.length;L++){var Y=m[L];w(Y.value,{componentStack:Y.stack})}}finally{O.T=u,q.p=v}}(co&3)!==0&&zp(),Ei(o),v=o.pendingLanes,(p&261930)!==0&&(v&42)!==0?o===gb?Yd++:(Yd=0,gb=o):Yd=0,Wd(0)}}function $S(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Cd(u)))}function zp(){return PS(),BS(),FS(),US()}function US(){if(aa!==5)return!1;var o=Go,u=db;db=0;var p=En(co),m=O.T,v=q.p;try{q.p=32>p?32:p,O.T=null,p=hb,hb=null;var w=Go,L=co;if(aa=0,eu=Go=null,co=0,(Vr&6)!==0)throw Error(n(331));var Y=Vr;if(Vr|=4,wS(w.current),yS(w,w.current,L,p),Vr=Y,Wd(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(dt,w)}catch{}return!0}finally{q.p=v,O.T=m,$S(o,u)}}function zS(o,u,p){u=Fs(p,u),u=Gx(o.stateNode,u,2),o=Bo(o,u,2),o!==null&&(wr(o,2),Ei(o))}function cn(o,u,p){if(o.tag===3)zS(o,o,p);else for(;u!==null;){if(u.tag===3){zS(u,o,p);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(qo===null||!qo.has(m))){o=Fs(p,o),p=Hw(2),m=Bo(u,p,2),m!==null&&(qw(p,m,u,o),wr(m,2),Ei(m));break}}u=u.return}}function mb(o,u,p){var m=o.pingCache;if(m===null){m=o.pingCache=new k6;var v=new Set;m.set(u,v)}else v=m.get(u),v===void 0&&(v=new Set,m.set(u,v));v.has(p)||(lb=!0,v.add(p),o=T6.bind(null,o,u,p),u.then(o,o))}function T6(o,u,p){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,fn===o&&(jr&p)===p&&(Bn===4||Bn===3&&(jr&62914560)===jr&&300>Kt()-Dp?(Vr&2)===0&&tu(o,0):cb|=p,Zc===jr&&(Zc=0)),Ei(o)}function HS(o,u){u===0&&(u=Pt()),o=Al(o,u),o!==null&&(wr(o,u),Ei(o))}function C6(o){var u=o.memoizedState,p=0;u!==null&&(p=u.retryLane),HS(o,p)}function N6(o,u){var p=0;switch(o.tag){case 31:case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(p=v.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(u),HS(o,p)}function A6(o,u){return yt(o,u)}var Hp=null,nu=null,xb=!1,qp=!1,bb=!1,Wo=0;function Ei(o){o!==nu&&o.next===null&&(nu===null?Hp=nu=o:nu=nu.next=o),qp=!0,xb||(xb=!0,L6())}function Wd(o,u){if(!bb&&qp){bb=!0;do for(var p=!1,m=Hp;m!==null;){if(o!==0){var v=m.pendingLanes;if(v===0)var w=0;else{var L=m.suspendedLanes,Y=m.pingedLanes;w=(1<<31-Jt(42|o)+1)-1,w&=v&~(L&~Y),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(p=!0,WS(m,w))}else w=jr,w=ie(m,m===fn?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Oe(m,w)||(p=!0,WS(m,w));m=m.next}while(p);bb=!1}}function j6(){qS()}function qS(){qp=xb=!1;var o=0;Wo!==0&&U6()&&(o=Wo);for(var u=Kt(),p=null,m=Hp;m!==null;){var v=m.next,w=GS(m,u);w===0?(m.next=null,p===null?Hp=v:p.next=v,v===null&&(nu=p)):(p=m,(o!==0||(w&3)!==0)&&(qp=!0)),m=v}aa!==0&&aa!==5||Wd(o),Wo!==0&&(Wo=0)}function GS(o,u){for(var p=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var L=31-Jt(w),Y=1<<L,oe=v[L];oe===-1?((Y&p)===0||(Y&m)!==0)&&(v[L]=Ye(Y,u)):oe<=u&&(o.expiredLanes|=Y),w&=~Y}if(u=fn,p=jr,p=ie(o,o===u?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,p===0||o===u&&(ln===2||ln===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&bt(m),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||Oe(o,p)){if(u=p&-p,u===o.callbackPriority)return u;switch(m!==null&&bt(m),En(p)){case 2:case 8:p=he;break;case 32:p=Re;break;case 268435456:p=Qe;break;default:p=Re}return m=YS.bind(null,o),p=yt(p,m),o.callbackPriority=u,o.callbackNode=p,u}return m!==null&&m!==null&&bt(m),o.callbackPriority=2,o.callbackNode=null,2}function YS(o,u){if(aa!==0&&aa!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(zp()&&o.callbackNode!==p)return null;var m=jr;return m=ie(o,o===fn?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(CS(o,m,u),GS(o,Kt()),o.callbackNode!=null&&o.callbackNode===p?YS.bind(null,o):null)}function WS(o,u){if(zp())return null;CS(o,u,!0)}function L6(){H6(function(){(Vr&6)!==0?yt(X,j6):qS()})}function yb(){if(Wo===0){var o=zc;o===0&&(o=rn,rn<<=1,(rn&261888)===0&&(rn=256)),Wo=o}return Wo}function VS(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ba(""+o)}function KS(o,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,o.id&&p.setAttribute("form",o.id),u.parentNode.insertBefore(p,u),o=new FormData(o),p.parentNode.removeChild(p),o}function M6(o,u,p,m,v){if(u==="submit"&&p&&p.stateNode===v){var w=VS((v[Sr]||null).action),L=m.submitter;L&&(u=(u=L[Sr]||null)?VS(u.formAction):L.getAttribute("formAction"),u!==null&&(w=u,L=null));var Y=new Ds("action","action",null,m,v);o.push({event:Y,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Wo!==0){var oe=L?KS(v,L):new FormData(v);Fx(p,{pending:!0,data:oe,method:v.method,action:w},null,oe)}}else typeof w=="function"&&(Y.preventDefault(),oe=L?KS(v,L):new FormData(v),Fx(p,{pending:!0,data:oe,method:v.method,action:w},w,oe))},currentTarget:v}]})}}for(var vb=0;vb<rx.length;vb++){var kb=rx[vb],O6=kb.toLowerCase(),R6=kb[0].toUpperCase()+kb.slice(1);ii(O6,"on"+R6)}ii(Tk,"onAnimationEnd"),ii(Ck,"onAnimationIteration"),ii(Nk,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(XI,"onTransitionRun"),ii(QI,"onTransitionStart"),ii(JI,"onTransitionCancel"),ii(Ak,"onTransitionEnd"),Ge("onMouseEnter",["mouseout","mouseover"]),Ge("onMouseLeave",["mouseout","mouseover"]),Ge("onPointerEnter",["pointerout","pointerover"]),Ge("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vd));function XS(o,u){u=(u&4)!==0;for(var p=0;p<o.length;p++){var m=o[p],v=m.event;m=m.listeners;e:{var w=void 0;if(u)for(var L=m.length-1;0<=L;L--){var Y=m[L],oe=Y.instance,_e=Y.currentTarget;if(Y=Y.listener,oe!==w&&v.isPropagationStopped())break e;w=Y,v.currentTarget=_e;try{w(v)}catch(Ie){sp(Ie)}v.currentTarget=null,w=oe}else for(L=0;L<m.length;L++){if(Y=m[L],oe=Y.instance,_e=Y.currentTarget,Y=Y.listener,oe!==w&&v.isPropagationStopped())break e;w=Y,v.currentTarget=_e;try{w(v)}catch(Ie){sp(Ie)}v.currentTarget=null,w=oe}}}}function Tr(o,u){var p=u[Aa];p===void 0&&(p=u[Aa]=new Set);var m=o+"__bubble";p.has(m)||(QS(u,o,2,!1),p.add(m))}function wb(o,u,p){var m=0;u&&(m|=4),QS(p,o,m,u)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function Sb(o){if(!o[Gp]){o[Gp]=!0,an.forEach(function(p){p!=="selectionchange"&&(I6.has(p)||wb(p,!1,o),wb(p,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Gp]||(u[Gp]=!0,wb("selectionchange",!1,u))}}function QS(o,u,p,m){switch(TE(u)){case 2:var v=cD;break;case 8:v=uD;break;default:v=Bb}p=v.bind(null,u,p,o),v=void 0,!jc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(u,p,{capture:!0,passive:v}):o.addEventListener(u,p,!0):v!==void 0?o.addEventListener(u,p,{passive:v}):o.addEventListener(u,p,!1)}function Eb(o,u,p,m,v){var w=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var L=m.tag;if(L===3||L===4){var Y=m.stateNode.containerInfo;if(Y===v)break;if(L===4)for(L=m.return;L!==null;){var oe=L.tag;if((oe===3||oe===4)&&L.stateNode.containerInfo===v)return;L=L.return}for(;Y!==null;){if(L=He(Y),L===null)return;if(oe=L.tag,oe===5||oe===6||oe===26||oe===27){m=w=L;continue e}Y=Y.parentNode}}m=m.return}Ac(function(){var _e=w,Ie=sr(p),ze=[];e:{var Ce=jk.get(o);if(Ce!==void 0){var je=Ds,Tt=o;switch(o){case"keypress":if(Lc(p)===0)break e;case"keydown":case"keyup":je=Le;break;case"focusin":Tt="focus",je=vd;break;case"focusout":Tt="blur",je=vd;break;case"beforeblur":case"afterblur":je=vd;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=Hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Ke;break;case Tk:case Ck:case Nk:je=Ym;break;case Ak:je=De;break;case"scroll":case"scrollend":je=zm;break;case"wheel":je=et;break;case"copy":case"cut":case"paste":je=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Ue;break;case"toggle":case"beforetoggle":je=Ne}var Xt=(u&4)!==0,hn=!Xt&&(o==="scroll"||o==="scrollend"),fe=Xt?Ce!==null?Ce+"Capture":null:Ce;Xt=[];for(var de=_e,Se;de!==null;){var $e=de;if(Se=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Se===null||fe===null||($e=vl(de,fe),$e!=null&&Xt.push(Kd(de,$e,Se))),hn)break;de=de.return}0<Xt.length&&(Ce=new je(Ce,Tt,null,p,Ie),ze.push({event:Ce,listeners:Xt}))}}if((u&7)===0){e:{if(Ce=o==="mouseover"||o==="pointerover",je=o==="mouseout"||o==="pointerout",Ce&&p!==Lt&&(Tt=p.relatedTarget||p.fromElement)&&(He(Tt)||Tt[$n]))break e;if((je||Ce)&&(Ce=Ie.window===Ie?Ie:(Ce=Ie.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,je?(Tt=p.relatedTarget||p.toElement,je=_e,Tt=Tt?He(Tt):null,Tt!==null&&(hn=i(Tt),Xt=Tt.tag,Tt!==hn||Xt!==5&&Xt!==27&&Xt!==6)&&(Tt=null)):(je=null,Tt=_e),je!==Tt)){if(Xt=Zg,$e="onMouseLeave",fe="onMouseEnter",de="mouse",(o==="pointerout"||o==="pointerover")&&(Xt=Ue,$e="onPointerLeave",fe="onPointerEnter",de="pointer"),hn=je==null?Ce:Er(je),Se=Tt==null?Ce:Er(Tt),Ce=new Xt($e,de+"leave",je,p,Ie),Ce.target=hn,Ce.relatedTarget=Se,$e=null,He(Ie)===_e&&(Xt=new Xt(fe,de+"enter",Tt,p,Ie),Xt.target=Se,Xt.relatedTarget=hn,$e=Xt),hn=$e,je&&Tt)t:{for(Xt=D6,fe=je,de=Tt,Se=0,$e=fe;$e;$e=Xt($e))Se++;$e=0;for(var Ht=de;Ht;Ht=Xt(Ht))$e++;for(;0<Se-$e;)fe=Xt(fe),Se--;for(;0<$e-Se;)de=Xt(de),$e--;for(;Se--;){if(fe===de||de!==null&&fe===de.alternate){Xt=fe;break t}fe=Xt(fe),de=Xt(de)}Xt=null}else Xt=null;je!==null&&JS(ze,Ce,je,Xt,!1),Tt!==null&&hn!==null&&JS(ze,hn,Tt,Xt,!0)}}e:{if(Ce=_e?Er(_e):window,je=Ce.nodeName&&Ce.nodeName.toLowerCase(),je==="select"||je==="input"&&Ce.type==="file")var Gr=K;else if(Rc(Ce))if(ya)Gr=Fe;else{Gr=Je;var Dt=ap}else je=Ce.nodeName,!je||je.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?_e&&Rs(_e.elementType)&&(Gr=K):Gr=xe;if(Gr&&(Gr=Gr(o,_e))){Ps(ze,Gr,p,Ie);break e}Dt&&Dt(o,Ce,_e),o==="focusout"&&_e&&Ce.type==="number"&&_e.memoizedProps.value!=null&&Rr(Ce,"number",Ce.value)}switch(Dt=_e?Er(_e):window,o){case"focusin":(Rc(Dt)||Dt.contentEditable==="true")&&(Ur=Dt,zn=_e,as=null);break;case"focusout":as=zn=Ur=null;break;case"mousedown":ex=!0;break;case"contextmenu":case"mouseup":case"dragend":ex=!1,Ek(ze,p,Ie);break;case"selectionchange":if(si)break;case"keydown":case"keyup":Ek(ze,p,Ie)}var fr;if(ir)e:{switch(o){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else Lo?Oc(o,p)&&(Lr="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Lr="onCompositionStart");Lr&&(ns&&p.locale!=="ko"&&(Lo||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&Lo&&(fr=Yi()):(ni=Ie,xd="value"in ni?ni.value:ni.textContent,Lo=!0)),Dt=Yp(_e,Lr),0<Dt.length&&(Lr=new ep(Lr,o,null,p,Ie),ze.push({event:Lr,listeners:Dt}),fr?Lr.data=fr:(fr=rp(p),fr!==null&&(Lr.data=fr)))),(fr=ys?Zm(o,p):np(o,p))&&(Lr=Yp(_e,"onBeforeInput"),0<Lr.length&&(Dt=new ep("onBeforeInput","beforeinput",null,p,Ie),ze.push({event:Dt,listeners:Lr}),Dt.data=fr)),M6(ze,o,_e,p,Ie)}XS(ze,u)})}function Kd(o,u,p){return{instance:o,listener:u,currentTarget:p}}function Yp(o,u){for(var p=u+"Capture",m=[];o!==null;){var v=o,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=vl(o,p),v!=null&&m.unshift(Kd(o,v,w)),v=vl(o,u),v!=null&&m.push(Kd(o,v,w))),o.tag===3)return m;o=o.return}return[]}function D6(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function JS(o,u,p,m,v){for(var w=u._reactName,L=[];p!==null&&p!==m;){var Y=p,oe=Y.alternate,_e=Y.stateNode;if(Y=Y.tag,oe!==null&&oe===m)break;Y!==5&&Y!==26&&Y!==27||_e===null||(oe=_e,v?(_e=vl(p,w),_e!=null&&L.unshift(Kd(p,_e,oe))):v||(_e=vl(p,w),_e!=null&&L.push(Kd(p,_e,oe)))),p=p.return}L.length!==0&&o.push({event:u,listeners:L})}var P6=/\r\n?/g,B6=/\u0000|\uFFFD/g;function ZS(o){return(typeof o=="string"?o:""+o).replace(P6,`
`).replace(B6,"")}function eE(o,u){return u=ZS(u),ZS(o)===u}function dn(o,u,p,m,v,w){switch(p){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||ot(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&ot(o,""+m);break;case"className":Vn(o,"class",m);break;case"tabIndex":Vn(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(o,p,m);break;case"style":Ir(o,m,w);break;case"data":if(u!=="object"){Vn(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||p!=="href")){o.removeAttribute(p);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(p);break}m=ba(""+m),o.setAttribute(p,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(u!=="input"&&dn(o,u,"name",v.name,v,null),dn(o,u,"formEncType",v.formEncType,v,null),dn(o,u,"formMethod",v.formMethod,v,null),dn(o,u,"formTarget",v.formTarget,v,null)):(dn(o,u,"encType",v.encType,v,null),dn(o,u,"method",v.method,v,null),dn(o,u,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(p);break}m=ba(""+m),o.setAttribute(p,m);break;case"onClick":m!=null&&(o.onclick=ct);break;case"onScroll":m!=null&&Tr("scroll",o);break;case"onScrollEnd":m!=null&&Tr("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(p=m.__html,p!=null){if(v.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}p=ba(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(p,""+m):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":m===!0?o.setAttribute(p,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(p,m):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(p,m):o.removeAttribute(p);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(p):o.setAttribute(p,m);break;case"popover":Tr("beforetoggle",o),Tr("toggle",o),Dn(o,"popover",m);break;case"xlinkActuate":Hr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Hr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Hr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Hr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Hr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Hr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Dn(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Is.get(p)||p,Dn(o,p,m))}}function _b(o,u,p,m,v,w){switch(p){case"style":Ir(o,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(p=m.__html,p!=null){if(v.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof m=="string"?ot(o,m):(typeof m=="number"||typeof m=="bigint")&&ot(o,""+m);break;case"onScroll":m!=null&&Tr("scroll",o);break;case"onScrollEnd":m!=null&&Tr("scrollend",o);break;case"onClick":m!=null&&(o.onclick=ct);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!In.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),u=p.slice(2,v?p.length-7:void 0),w=o[Sr]||null,w=w!=null?w[p]:null,typeof w=="function"&&o.removeEventListener(u,w,v),typeof m=="function")){typeof w!="function"&&w!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(u,m,v);break e}p in o?o[p]=m:m===!0?o.setAttribute(p,""):Dn(o,p,m)}}}function Sa(o,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tr("error",o),Tr("load",o);var m=!1,v=!1,w;for(w in p)if(p.hasOwnProperty(w)){var L=p[w];if(L!=null)switch(w){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:dn(o,u,w,L,p,null)}}v&&dn(o,u,"srcSet",p.srcSet,p,null),m&&dn(o,u,"src",p.src,p,null);return;case"input":Tr("invalid",o);var Y=w=L=v=null,oe=null,_e=null;for(m in p)if(p.hasOwnProperty(m)){var Ie=p[m];if(Ie!=null)switch(m){case"name":v=Ie;break;case"type":L=Ie;break;case"checked":oe=Ie;break;case"defaultChecked":_e=Ie;break;case"value":w=Ie;break;case"defaultValue":Y=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,u));break;default:dn(o,u,m,Ie,p,null)}}br(o,w,Y,oe,_e,L,v,!1);return;case"select":Tr("invalid",o),m=L=w=null;for(v in p)if(p.hasOwnProperty(v)&&(Y=p[v],Y!=null))switch(v){case"value":w=Y;break;case"defaultValue":L=Y;break;case"multiple":m=Y;default:dn(o,u,v,Y,p,null)}u=w,p=L,o.multiple=!!m,u!=null?qr(o,!!m,u,!1):p!=null&&qr(o,!!m,p,!0);return;case"textarea":Tr("invalid",o),w=v=m=null;for(L in p)if(p.hasOwnProperty(L)&&(Y=p[L],Y!=null))switch(L){case"value":m=Y;break;case"defaultValue":v=Y;break;case"children":w=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:dn(o,u,L,Y,p,null)}ua(o,m,v,w);return;case"option":for(oe in p)if(p.hasOwnProperty(oe)&&(m=p[oe],m!=null))switch(oe){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dn(o,u,oe,m,p,null)}return;case"dialog":Tr("beforetoggle",o),Tr("toggle",o),Tr("cancel",o),Tr("close",o);break;case"iframe":case"object":Tr("load",o);break;case"video":case"audio":for(m=0;m<Vd.length;m++)Tr(Vd[m],o);break;case"image":Tr("error",o),Tr("load",o);break;case"details":Tr("toggle",o);break;case"embed":case"source":case"link":Tr("error",o),Tr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in p)if(p.hasOwnProperty(_e)&&(m=p[_e],m!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:dn(o,u,_e,m,p,null)}return;default:if(Rs(u)){for(Ie in p)p.hasOwnProperty(Ie)&&(m=p[Ie],m!==void 0&&_b(o,u,Ie,m,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(m=p[Y],m!=null&&dn(o,u,Y,m,p,null))}function F6(o,u,p,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,L=null,Y=null,oe=null,_e=null,Ie=null;for(je in p){var ze=p[je];if(p.hasOwnProperty(je)&&ze!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":oe=ze;default:m.hasOwnProperty(je)||dn(o,u,je,null,m,ze)}}for(var Ce in m){var je=m[Ce];if(ze=p[Ce],m.hasOwnProperty(Ce)&&(je!=null||ze!=null))switch(Ce){case"type":w=je;break;case"name":v=je;break;case"checked":_e=je;break;case"defaultChecked":Ie=je;break;case"value":L=je;break;case"defaultValue":Y=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,u));break;default:je!==ze&&dn(o,u,Ce,je,m,ze)}}rs(o,L,Y,oe,_e,Ie,w,v);return;case"select":je=L=Y=Ce=null;for(w in p)if(oe=p[w],p.hasOwnProperty(w)&&oe!=null)switch(w){case"value":break;case"multiple":je=oe;default:m.hasOwnProperty(w)||dn(o,u,w,null,m,oe)}for(v in m)if(w=m[v],oe=p[v],m.hasOwnProperty(v)&&(w!=null||oe!=null))switch(v){case"value":Ce=w;break;case"defaultValue":Y=w;break;case"multiple":L=w;default:w!==oe&&dn(o,u,v,w,m,oe)}u=Y,p=L,m=je,Ce!=null?qr(o,!!p,Ce,!1):!!m!=!!p&&(u!=null?qr(o,!!p,u,!0):qr(o,!!p,p?[]:"",!1));return;case"textarea":je=Ce=null;for(Y in p)if(v=p[Y],p.hasOwnProperty(Y)&&v!=null&&!m.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:dn(o,u,Y,null,m,v)}for(L in m)if(v=m[L],w=p[L],m.hasOwnProperty(L)&&(v!=null||w!=null))switch(L){case"value":Ce=v;break;case"defaultValue":je=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==w&&dn(o,u,L,v,m,w)}ca(o,Ce,je);return;case"option":for(var Tt in p)if(Ce=p[Tt],p.hasOwnProperty(Tt)&&Ce!=null&&!m.hasOwnProperty(Tt))switch(Tt){case"selected":o.selected=!1;break;default:dn(o,u,Tt,null,m,Ce)}for(oe in m)if(Ce=m[oe],je=p[oe],m.hasOwnProperty(oe)&&Ce!==je&&(Ce!=null||je!=null))switch(oe){case"selected":o.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:dn(o,u,oe,Ce,m,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in p)Ce=p[Xt],p.hasOwnProperty(Xt)&&Ce!=null&&!m.hasOwnProperty(Xt)&&dn(o,u,Xt,null,m,Ce);for(_e in m)if(Ce=m[_e],je=p[_e],m.hasOwnProperty(_e)&&Ce!==je&&(Ce!=null||je!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(137,u));break;default:dn(o,u,_e,Ce,m,je)}return;default:if(Rs(u)){for(var hn in p)Ce=p[hn],p.hasOwnProperty(hn)&&Ce!==void 0&&!m.hasOwnProperty(hn)&&_b(o,u,hn,void 0,m,Ce);for(Ie in m)Ce=m[Ie],je=p[Ie],!m.hasOwnProperty(Ie)||Ce===je||Ce===void 0&&je===void 0||_b(o,u,Ie,Ce,m,je);return}}for(var fe in p)Ce=p[fe],p.hasOwnProperty(fe)&&Ce!=null&&!m.hasOwnProperty(fe)&&dn(o,u,fe,null,m,Ce);for(ze in m)Ce=m[ze],je=p[ze],!m.hasOwnProperty(ze)||Ce===je||Ce==null&&je==null||dn(o,u,ze,Ce,m,je)}function tE(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $6(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,p=performance.getEntriesByType("resource"),m=0;m<p.length;m++){var v=p[m],w=v.transferSize,L=v.initiatorType,Y=v.duration;if(w&&Y&&tE(L)){for(L=0,Y=v.responseEnd,m+=1;m<p.length;m++){var oe=p[m],_e=oe.startTime;if(_e>Y)break;var Ie=oe.transferSize,ze=oe.initiatorType;Ie&&tE(ze)&&(oe=oe.responseEnd,L+=Ie*(oe<Y?1:(Y-_e)/(oe-_e)))}if(--m,u+=8*(w+L)/(v.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Tb=null,Cb=null;function Wp(o){return o.nodeType===9?o:o.ownerDocument}function rE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Nb(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ab=null;function U6(){var o=window.event;return o&&o.type==="popstate"?o===Ab?!1:(Ab=o,!0):(Ab=null,!1)}var aE=typeof setTimeout=="function"?setTimeout:void 0,z6=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,H6=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(o){return sE.resolve(null).then(o).catch(q6)}:aE;function q6(o){setTimeout(function(){throw o})}function Vo(o){return o==="head"}function iE(o,u){var p=u,m=0;do{var v=p.nextSibling;if(o.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"||p==="/&"){if(m===0){o.removeChild(v),ou(u);return}m--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")m++;else if(p==="html")Xd(o.ownerDocument.documentElement);else if(p==="head"){p=o.ownerDocument.head,Xd(p);for(var w=p.firstChild;w;){var L=w.nextSibling,Y=w.nodeName;w[wt]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&w.rel.toLowerCase()==="stylesheet"||p.removeChild(w),w=L}}else p==="body"&&Xd(o.ownerDocument.body);p=v}while(p);ou(u)}function oE(o,u){var p=o;o=0;do{var m=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),m&&m.nodeType===8)if(p=m.data,p==="/$"){if(o===0)break;o--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||o++;p=m}while(p)}function jb(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":jb(p),ce(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function G6(o,u,p,m){for(;o.nodeType===1;){var v=p;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[wt])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=qs(o.nextSibling),o===null)break}return null}function Y6(o,u,p){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=qs(o.nextSibling),o===null))return null;return o}function lE(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=qs(o.nextSibling),o===null))return null;return o}function Lb(o){return o.data==="$?"||o.data==="$~"}function Mb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function W6(o,u){var p=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||p.readyState!=="loading")u();else{var m=function(){u(),p.removeEventListener("DOMContentLoaded",m)};p.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function qs(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Ob=null;function cE(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"||p==="/&"){if(u===0)return qs(o.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}o=o.nextSibling}return null}function uE(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return o;u--}else p!=="/$"&&p!=="/&"||u++}o=o.previousSibling}return null}function dE(o,u,p){switch(u=Wp(p),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Xd(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);ce(o)}var Gs=new Map,hE=new Set;function Vp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var uo=q.d;q.d={f:V6,r:K6,D:X6,C:Q6,L:J6,m:Z6,X:tD,S:eD,M:rD};function V6(){var o=uo.f(),u=Fp();return o||u}function K6(o){var u=mt(o);u!==null&&u.tag===5&&u.type==="form"?Aw(u):uo.r(o)}var au=typeof document>"u"?null:document;function gE(o,u,p){var m=au;if(m&&typeof u=="string"&&u){var v=$r(u);v='link[rel="'+o+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),hE.has(v)||(hE.add(v),o={rel:o,crossOrigin:p,href:u},m.querySelector(v)===null&&(u=m.createElement("link"),Sa(u,"link",o),er(u),m.head.appendChild(u)))}}function X6(o){uo.D(o),gE("dns-prefetch",o,null)}function Q6(o,u){uo.C(o,u),gE("preconnect",o,u)}function J6(o,u,p){uo.L(o,u,p);var m=au;if(m&&o&&u){var v='link[rel="preload"][as="'+$r(u)+'"]';u==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+$r(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+$r(p.imageSizes)+'"]')):v+='[href="'+$r(o)+'"]';var w=v;switch(u){case"style":w=su(o);break;case"script":w=iu(o)}Gs.has(w)||(o=f({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:o,as:u},p),Gs.set(w,o),m.querySelector(v)!==null||u==="style"&&m.querySelector(Qd(w))||u==="script"&&m.querySelector(Jd(w))||(u=m.createElement("link"),Sa(u,"link",o),er(u),m.head.appendChild(u)))}}function Z6(o,u){uo.m(o,u);var p=au;if(p&&o){var m=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+$r(m)+'"][href="'+$r(o)+'"]',w=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=iu(o)}if(!Gs.has(w)&&(o=f({rel:"modulepreload",href:o},u),Gs.set(w,o),p.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Jd(w)))return}m=p.createElement("link"),Sa(m,"link",o),er(m),p.head.appendChild(m)}}}function eD(o,u,p){uo.S(o,u,p);var m=au;if(m&&o){var v=nn(m).hoistableStyles,w=su(o);u=u||"default";var L=v.get(w);if(!L){var Y={loading:0,preload:null};if(L=m.querySelector(Qd(w)))Y.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":u},p),(p=Gs.get(w))&&Rb(o,p);var oe=L=m.createElement("link");er(oe),Sa(oe,"link",o),oe._p=new Promise(function(_e,Ie){oe.onload=_e,oe.onerror=Ie}),oe.addEventListener("load",function(){Y.loading|=1}),oe.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Kp(L,u,m)}L={type:"stylesheet",instance:L,count:1,state:Y},v.set(w,L)}}}function tD(o,u){uo.X(o,u);var p=au;if(p&&o){var m=nn(p).hoistableScripts,v=iu(o),w=m.get(v);w||(w=p.querySelector(Jd(v)),w||(o=f({src:o,async:!0},u),(u=Gs.get(v))&&Ib(o,u),w=p.createElement("script"),er(w),Sa(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function rD(o,u){uo.M(o,u);var p=au;if(p&&o){var m=nn(p).hoistableScripts,v=iu(o),w=m.get(v);w||(w=p.querySelector(Jd(v)),w||(o=f({src:o,async:!0,type:"module"},u),(u=Gs.get(v))&&Ib(o,u),w=p.createElement("script"),er(w),Sa(w,"link",o),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function pE(o,u,p,m){var v=(v=Ee.current)?Vp(v):null;if(!v)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=su(p.href),p=nn(v).hoistableStyles,m=p.get(u),m||(m={type:"style",instance:null,count:0,state:null},p.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=su(p.href);var w=nn(v).hoistableStyles,L=w.get(o);if(L||(v=v.ownerDocument||v,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,L),(w=v.querySelector(Qd(o)))&&!w._p&&(L.instance=w,L.state.loading=5),Gs.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Gs.set(o,p),w||nD(v,o,p,L.state))),u&&m===null)throw Error(n(528,""));return L}if(u&&m!==null)throw Error(n(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=iu(p),p=nn(v).hoistableScripts,m=p.get(u),m||(m={type:"script",instance:null,count:0,state:null},p.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function su(o){return'href="'+$r(o)+'"'}function Qd(o){return'link[rel="stylesheet"]['+o+"]"}function fE(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function nD(o,u,p,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Sa(u,"link",p),er(u),o.head.appendChild(u))}function iu(o){return'[src="'+$r(o)+'"]'}function Jd(o){return"script[async]"+o}function mE(o,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+$r(p.href)+'"]');if(m)return u.instance=m,er(m),m;var v=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),er(m),Sa(m,"style",v),Kp(m,p.precedence,o),u.instance=m;case"stylesheet":v=su(p.href);var w=o.querySelector(Qd(v));if(w)return u.state.loading|=4,u.instance=w,er(w),w;m=fE(p),(v=Gs.get(v))&&Rb(m,v),w=(o.ownerDocument||o).createElement("link"),er(w);var L=w;return L._p=new Promise(function(Y,oe){L.onload=Y,L.onerror=oe}),Sa(w,"link",m),u.state.loading|=4,Kp(w,p.precedence,o),u.instance=w;case"script":return w=iu(p.src),(v=o.querySelector(Jd(w)))?(u.instance=v,er(v),v):(m=p,(v=Gs.get(w))&&(m=f({},p),Ib(m,v)),o=o.ownerDocument||o,v=o.createElement("script"),er(v),Sa(v,"link",m),o.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,Kp(m,p.precedence,o));return u.instance}function Kp(o,u,p){for(var m=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,w=v,L=0;L<m.length;L++){var Y=m[L];if(Y.dataset.precedence===u)w=Y;else if(w!==v)break}w?w.parentNode.insertBefore(o,w.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(o,u.firstChild))}function Rb(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Ib(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Xp=null;function xE(o,u,p){if(Xp===null){var m=new Map,v=Xp=new Map;v.set(p,m)}else v=Xp,m=v.get(p),m||(m=new Map,v.set(p,m));if(m.has(o))return m;for(m.set(o,null),p=p.getElementsByTagName(o),v=0;v<p.length;v++){var w=p[v];if(!(w[wt]||w[Fr]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var L=w.getAttribute(u)||"";L=o+L;var Y=m.get(L);Y?Y.push(w):m.set(L,[w])}}return m}function bE(o,u,p){o=o.ownerDocument||o,o.head.insertBefore(p,u==="title"?o.querySelector("head > title"):null)}function aD(o,u,p){if(p===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function yE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function sD(o,u,p,m){if(p.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var v=su(m.href),w=u.querySelector(Qd(v));if(w){u=w._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Qp.bind(o),u.then(o,o)),p.state.loading|=4,p.instance=w,er(w);return}w=u.ownerDocument||u,m=fE(m),(v=Gs.get(v))&&Rb(m,v),w=w.createElement("link"),er(w);var L=w;L._p=new Promise(function(Y,oe){L.onload=Y,L.onerror=oe}),Sa(w,"link",m),p.instance=w}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(o.count++,p=Qp.bind(o),u.addEventListener("load",p),u.addEventListener("error",p))}}var Db=0;function iD(o,u){return o.stylesheets&&o.count===0&&Zp(o,o.stylesheets),0<o.count||0<o.imgCount?function(p){var m=setTimeout(function(){if(o.stylesheets&&Zp(o,o.stylesheets),o.unsuspend){var w=o.unsuspend;o.unsuspend=null,w()}},6e4+u);0<o.imgBytes&&Db===0&&(Db=62500*$6());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Zp(o,o.stylesheets),o.unsuspend)){var w=o.unsuspend;o.unsuspend=null,w()}},(o.imgBytes>Db?50:800)+u);return o.unsuspend=p,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function Qp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Jp=null;function Zp(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Jp=new Map,u.forEach(oD,o),Jp=null,Qp.call(o))}function oD(o,u){if(!(u.state.loading&4)){var p=Jp.get(o);if(p)var m=p.get(null);else{p=new Map,Jp.set(o,p);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var L=v[w];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(p.set(L.dataset.precedence,L),m=L)}m&&p.set(null,m)}v=u.instance,L=v.getAttribute("data-precedence"),w=p.get(L)||m,w===m&&p.set(null,v),p.set(L,v),this.count++,m=Qp.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),w?w.parentNode.insertBefore(v,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),u.state.loading|=4}}var Zd={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function lD(o,u,p,m,v,w,L,Y,oe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function vE(o,u,p,m,v,w,L,Y,oe,_e,Ie,ze){return o=new lD(o,u,p,L,oe,_e,Ie,ze,Y),u=1,w===!0&&(u|=24),w=ks(3,null,null,u),o.current=w,w.stateNode=o,u=fx(),u.refCount++,o.pooledCache=u,u.refCount++,w.memoizedState={element:m,isDehydrated:p,cache:u},yx(w),o}function kE(o){return o?(o=Pc,o):Pc}function wE(o,u,p,m,v,w){v=kE(v),m.context===null?m.context=v:m.pendingContext=v,m=Po(u),m.payload={element:p},w=w===void 0?null:w,w!==null&&(m.callback=w),p=Bo(o,m,u),p!==null&&(cs(p,o,u),Ld(p,o,u))}function SE(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<u?p:u}}function Pb(o,u){SE(o,u),(o=o.alternate)&&SE(o,u)}function EE(o){if(o.tag===13||o.tag===31){var u=Al(o,67108864);u!==null&&cs(u,o,67108864),Pb(o,67108864)}}function _E(o){if(o.tag===13||o.tag===31){var u=Ts();u=pr(u);var p=Al(o,u);p!==null&&cs(p,o,u),Pb(o,u)}}var ef=!0;function cD(o,u,p,m){var v=O.T;O.T=null;var w=q.p;try{q.p=2,Bb(o,u,p,m)}finally{q.p=w,O.T=v}}function uD(o,u,p,m){var v=O.T;O.T=null;var w=q.p;try{q.p=8,Bb(o,u,p,m)}finally{q.p=w,O.T=v}}function Bb(o,u,p,m){if(ef){var v=Fb(m);if(v===null)Eb(o,u,m,tf,p),CE(o,m);else if(hD(v,o,u,p,m))m.stopPropagation();else if(CE(o,m),u&4&&-1<dD.indexOf(o)){for(;v!==null;){var w=mt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var L=Sn(w.pendingLanes);if(L!==0){var Y=w;for(Y.pendingLanes|=2,Y.entangledLanes|=2;L;){var oe=1<<31-Jt(L);Y.entanglements[1]|=oe,L&=~oe}Ei(w),(Vr&6)===0&&(Pp=Kt()+500,Wd(0))}}break;case 31:case 13:Y=Al(w,2),Y!==null&&cs(Y,w,2),Fp(),Pb(w,2)}if(w=Fb(m),w===null&&Eb(o,u,m,tf,p),w===v)break;v=w}v!==null&&m.stopPropagation()}else Eb(o,u,m,null,p)}}function Fb(o){return o=sr(o),$b(o)}var tf=null;function $b(o){if(tf=null,o=He(o),o!==null){var u=i(o);if(u===null)o=null;else{var p=u.tag;if(p===13){if(o=l(u),o!==null)return o;o=null}else if(p===31){if(o=c(u),o!==null)return o;o=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return tf=o,null}function TE(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(On()){case X:return 2;case he:return 8;case Re:case gt:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var Ub=!1,Ko=null,Xo=null,Qo=null,eh=new Map,th=new Map,Jo=[],dD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CE(o,u){switch(o){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":eh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(u.pointerId)}}function rh(o,u,p,m,v,w){return o===null||o.nativeEvent!==w?(o={blockedOn:u,domEventName:p,eventSystemFlags:m,nativeEvent:w,targetContainers:[v]},u!==null&&(u=mt(u),u!==null&&EE(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),o)}function hD(o,u,p,m,v){switch(u){case"focusin":return Ko=rh(Ko,o,u,p,m,v),!0;case"dragenter":return Xo=rh(Xo,o,u,p,m,v),!0;case"mouseover":return Qo=rh(Qo,o,u,p,m,v),!0;case"pointerover":var w=v.pointerId;return eh.set(w,rh(eh.get(w)||null,o,u,p,m,v)),!0;case"gotpointercapture":return w=v.pointerId,th.set(w,rh(th.get(w)||null,o,u,p,m,v)),!0}return!1}function NE(o){var u=He(o.target);if(u!==null){var p=i(u);if(p!==null){if(u=p.tag,u===13){if(u=l(p),u!==null){o.blockedOn=u,Ft(o.priority,function(){_E(p)});return}}else if(u===31){if(u=c(p),u!==null){o.blockedOn=u,Ft(o.priority,function(){_E(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function rf(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var p=Fb(o.nativeEvent);if(p===null){p=o.nativeEvent;var m=new p.constructor(p.type,p);Lt=m,p.target.dispatchEvent(m),Lt=null}else return u=mt(p),u!==null&&EE(u),o.blockedOn=p,!1;u.shift()}return!0}function AE(o,u,p){rf(o)&&p.delete(u)}function gD(){Ub=!1,Ko!==null&&rf(Ko)&&(Ko=null),Xo!==null&&rf(Xo)&&(Xo=null),Qo!==null&&rf(Qo)&&(Qo=null),eh.forEach(AE),th.forEach(AE)}function nf(o,u){o.blockedOn===u&&(o.blockedOn=null,Ub||(Ub=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gD)))}var af=null;function jE(o){af!==o&&(af=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){af===o&&(af=null);for(var u=0;u<o.length;u+=3){var p=o[u],m=o[u+1],v=o[u+2];if(typeof m!="function"){if($b(m||p)===null)continue;break}var w=mt(p);w!==null&&(o.splice(u,3),u-=3,Fx(w,{pending:!0,data:v,method:p.method,action:m},m,v))}}))}function ou(o){function u(oe){return nf(oe,o)}Ko!==null&&nf(Ko,o),Xo!==null&&nf(Xo,o),Qo!==null&&nf(Qo,o),eh.forEach(u),th.forEach(u);for(var p=0;p<Jo.length;p++){var m=Jo[p];m.blockedOn===o&&(m.blockedOn=null)}for(;0<Jo.length&&(p=Jo[0],p.blockedOn===null);)NE(p),p.blockedOn===null&&Jo.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(m=0;m<p.length;m+=3){var v=p[m],w=p[m+1],L=v[Sr]||null;if(typeof w=="function")L||jE(p);else if(L){var Y=null;if(w&&w.hasAttribute("formAction")){if(v=w,L=w[Sr]||null)Y=L.formAction;else if($b(v)!==null)continue}else Y=L.action;typeof Y=="function"?p[m+1]=Y:(p.splice(m,3),m-=3),jE(p)}}}function LE(){function o(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(L){return v=L})},focusReset:"manual",scroll:"manual"})}function u(){v!==null&&(v(),v=null),m||setTimeout(p,20)}function p(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),v!==null&&(v(),v=null)}}}function zb(o){this._internalRoot=o}sf.prototype.render=zb.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var p=u.current,m=Ts();wE(p,m,o,u,null,null)},sf.prototype.unmount=zb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;wE(o.current,2,null,o,null,null),Fp(),u[$n]=null}};function sf(o){this._internalRoot=o}sf.prototype.unstable_scheduleHydration=function(o){if(o){var u=Na();o={blockedOn:null,target:o,priority:u};for(var p=0;p<Jo.length&&u!==0&&u<Jo[p].priority;p++);Jo.splice(p,0,o),p===0&&NE(o)}};var ME=t.version;if(ME!=="19.2.0")throw Error(n(527,ME,"19.2.0"));q.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(u),o=o!==null?g(o):null,o=o===null?null:o.stateNode,o};var pD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{dt=of.inject(pD),jt=of}catch{}}return ah.createRoot=function(o,u){if(!s(o))throw Error(n(299));var p=!1,m="",v=Fw,w=$w,L=Uw;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(L=u.onRecoverableError)),u=vE(o,1,!1,null,null,p,m,null,v,w,L,LE),o[$n]=u.current,Sb(o),new zb(u)},ah.hydrateRoot=function(o,u,p){if(!s(o))throw Error(n(299));var m=!1,v="",w=Fw,L=$w,Y=Uw,oe=null;return p!=null&&(p.unstable_strictMode===!0&&(m=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&(L=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.formState!==void 0&&(oe=p.formState)),u=vE(o,1,!0,u,p??null,m,v,oe,w,L,Y,LE),u.context=kE(null),p=u.current,m=Ts(),m=pr(m),v=Po(m),v.callback=null,Bo(p,v,m),p=m,u.current.lanes=p,wr(u,p),Ei(u),o[$n]=u.current,Sb(o),new sf(u)},ah.version="19.2.0",ah}var zE;function SD(){if(zE)return qb.exports;zE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),qb.exports=wD(),qb.exports}var ED=SD();const or=e=>typeof e=="string",sh=()=>{let e,t;const r=new Promise((n,s)=>{e=n,t=s});return r.resolve=e,r.reject=t,r},HE=e=>e==null?"":""+e,_D=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},TD=/###/g,qE=e=>e&&e.indexOf("###")>-1?e.replace(TD,"."):e,GE=e=>!e||or(e),Hh=(e,t,r)=>{const n=or(t)?t.split("."):t;let s=0;for(;s<n.length-1;){if(GE(e))return{};const i=qE(n[s]);!e[i]&&r&&(e[i]=new r),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++s}return GE(e)?{}:{obj:e,k:qE(n[s])}},YE=(e,t,r)=>{const{obj:n,k:s}=Hh(e,t,Object);if(n!==void 0||t.length===1){n[s]=r;return}let i=t[t.length-1],l=t.slice(0,t.length-1),c=Hh(e,l,Object);for(;c.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),c=Hh(e,l,Object),c?.obj&&typeof c.obj[`${c.k}.${i}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${i}`]=r},CD=(e,t,r,n)=>{const{obj:s,k:i}=Hh(e,t,Object);s[i]=s[i]||[],s[i].push(r)},r0=(e,t)=>{const{obj:r,k:n}=Hh(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},ND=(e,t,r)=>{const n=r0(e,r);return n!==void 0?n:r0(t,r)},JN=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?or(e[n])||e[n]instanceof String||or(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):JN(e[n],t[n],r):e[n]=t[n]);return e},lu=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var AD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jD=e=>or(e)?e.replace(/[&<>"'\/]/g,t=>AD[t]):e;class LD{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const MD=[" ",",","?","!",";"],OD=new LD(20),RD=(e,t,r)=>{t=t||"",r=r||"";const n=MD.filter(l=>t.indexOf(l)<0&&r.indexOf(l)<0);if(n.length===0)return!0;const s=OD.getRegExp(`(${n.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!s.test(e);if(!i){const l=e.indexOf(r);l>0&&!s.test(e.substring(0,l))&&(i=!0)}return i},t1=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let s=e;for(let i=0;i<n.length;){if(!s||typeof s!="object")return;let l,c="";for(let d=i;d<n.length;++d)if(d!==i&&(c+=r),c+=n[d],l=s[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<n.length-1)continue;i+=d-i+1;break}s=l}return s},ig=e=>e?.replace("_","-"),ID={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class n0{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||ID,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,s){return s&&!this.debug?null:(or(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new n0(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n0(this.logger,t)}}var Ri=new n0;class Z0{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const s=this.observers[n].get(r)||0;this.observers[n].set(r,s+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([s,i])=>{for(let l=0;l<i;l++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let l=0;l<i;l++)s.apply(s,[t,...r])})}}class WE extends Z0{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,s={}){const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;t.indexOf(".")>-1?c=t.split("."):(c=[t,r],n&&(Array.isArray(n)?c.push(...n):or(n)&&i?c.push(...n.split(i)):c.push(n)));const d=r0(this.data,c);return!d&&!r&&!n&&t.indexOf(".")>-1&&(t=c[0],r=c[1],n=c.slice(2).join(".")),d||!l||!or(n)?d:t1(this.data?.[t]?.[r],n,i)}addResource(t,r,n,s,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let c=[t,r];n&&(c=c.concat(l?n.split(l):n)),t.indexOf(".")>-1&&(c=t.split("."),s=r,r=c[1]),this.addNamespaces(r),YE(this.data,c,s),i.silent||this.emit("added",t,r,n,s)}addResources(t,r,n,s={silent:!1}){for(const i in n)(or(n[i])||Array.isArray(n[i]))&&this.addResource(t,r,i,n[i],{silent:!0});s.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,s,i,l={silent:!1,skipCopy:!1}){let c=[t,r];t.indexOf(".")>-1&&(c=t.split("."),s=n,n=r,r=c[1]),this.addNamespaces(r);let d=r0(this.data,c)||{};l.skipCopy||(n=JSON.parse(JSON.stringify(n))),s?JN(d,n,i):d={...d,...n},YE(this.data,c,d),l.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(s=>r[s]&&Object.keys(r[s]).length>0)}toJSON(){return this.data}}var ZN={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,s){return e.forEach(i=>{t=this.processors[i]?.process(t,r,n,s)??t}),t}};const eA=Symbol("i18next/PATH_KEY");function DD(){const e=[],t=Object.create(null);let r;return t.get=(n,s)=>(r?.revoke?.(),s===eA?e:(e.push(s),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function r1(e,t){const{[eA]:r}=e(DD());return r.join(t?.keySeparator??".")}const VE={},Kb=e=>!or(e)&&typeof e!="boolean"&&typeof e!="number";class a0 extends Z0{constructor(t,r={}){super(),_D(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ri.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const s=this.resolve(t,n);if(s?.res===void 0)return!1;const i=Kb(s.res);return!(n.returnObjects===!1&&i)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const l=n&&t.indexOf(n)>-1,c=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!RD(t,n,s);if(l&&!c){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:or(i)?[i]:i};const h=t.split(n);(n!==s||n===s&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),t=h.join(s)}return{key:t,namespaces:or(i)?[i]:i}}translate(t,r,n){let s=typeof r=="object"?{...r}:r;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),t==null)return"";typeof t=="function"&&(t=r1(t,{...this.options,...s})),Array.isArray(t)||(t=[String(t)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(t[t.length-1],s),h=d[d.length-1];let g=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;g===void 0&&(g=":");const f=s.lng||this.language,x=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return x?i?{res:`${h}${g}${c}`,usedKey:c,exactUsedKey:c,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(s)}:`${h}${g}${c}`:i?{res:c,usedKey:c,exactUsedKey:c,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(s)}:c;const b=this.resolve(t,s);let y=b?.res;const k=b?.usedKey||c,S=b?.exactUsedKey||c,_=["[object Number]","[object Function]","[object RegExp]"],T=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,I=s.count!==void 0&&!or(s.count),R=a0.hasDefaultValue(s),B=I?this.pluralResolver.getSuffix(f,s.count,s):"",F=s.ordinal&&I?this.pluralResolver.getSuffix(f,s.count,{ordinal:!1}):"",ae=I&&!s.ordinal&&s.count===0,G=ae&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${B}`]||s[`defaultValue${F}`]||s.defaultValue;let $=y;N&&!y&&R&&($=G);const J=Kb($),ee=Object.prototype.toString.apply($);if(N&&$&&J&&_.indexOf(ee)<0&&!(or(T)&&Array.isArray($))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,$,{...s,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return i?(b.res=W,b.usedParams=this.getUsedParamsDetails(s),b):W}if(l){const W=Array.isArray($),j=W?[]:{},U=W?S:k;for(const O in $)if(Object.prototype.hasOwnProperty.call($,O)){const q=`${U}${l}${O}`;R&&!y?j[O]=this.translate(q,{...s,defaultValue:Kb(G)?G[O]:void 0,joinArrays:!1,ns:d}):j[O]=this.translate(q,{...s,joinArrays:!1,ns:d}),j[O]===q&&(j[O]=$[O])}y=j}}else if(N&&or(T)&&Array.isArray(y))y=y.join(T),y&&(y=this.extendTranslation(y,t,s,n));else{let W=!1,j=!1;!this.isValidLookup(y)&&R&&(W=!0,y=G),this.isValidLookup(y)||(j=!0,y=c);const O=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&j?void 0:y,q=R&&G!==y&&this.options.updateMissing;if(j||W||q){if(this.logger.log(q?"updateKey":"missingKey",f,h,c,q?G:y),l){const D=this.resolve(c,{...s,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let V=[];const ue=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ue&&ue[0])for(let D=0;D<ue.length;D++)V.push(ue[D]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(s.lng||this.language):V.push(s.lng||this.language);const H=(D,z,M)=>{const le=R&&M!==y?M:O;this.options.missingKeyHandler?this.options.missingKeyHandler(D,h,z,le,q,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(D,h,z,le,q,s),this.emit("missingKey",D,h,z,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?V.forEach(D=>{const z=this.pluralResolver.getSuffixes(D,s);ae&&s[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(M=>{H([D],c+M,s[`defaultValue${M}`]||G)})}):H(V,c,G))}y=this.extendTranslation(y,t,s,b,n),j&&y===c&&this.options.appendNamespaceToMissingKey&&(y=`${h}${g}${c}`),(j||W)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${g}${c}`:c,W?y:void 0,s))}return i?(b.res=y,b.usedParams=this.getUsedParamsDetails(s),b):y}extendTranslation(t,r,n,s,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=or(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const f=t.match(this.interpolator.nestingRegexp);h=f&&f.length}let g=n.replace&&!or(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),t=this.interpolator.interpolate(t,g,n.lng||this.language||s.usedLng,n),d){const f=t.match(this.interpolator.nestingRegexp),x=f&&f.length;h<x&&(n.nest=!1)}!n.lng&&s&&s.res&&(n.lng=this.language||s.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>i?.[0]===f[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):this.translate(...f,r),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=or(l)?[l]:l;return t!=null&&c?.length&&n.applyPostProcessor!==!1&&(t=ZN.handle(c,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,s,i,l,c;return or(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(d,r),g=h.key;s=g;let f=h.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const x=r.count!==void 0&&!or(r.count),b=x&&!r.ordinal&&r.count===0,y=r.context!==void 0&&(or(r.context)||typeof r.context=="number")&&r.context!=="",k=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);f.forEach(S=>{this.isValidLookup(n)||(c=S,!VE[`${k[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(VE[`${k[0]}-${S}`]=!0,this.logger.warn(`key "${s}" for languages "${k.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(_=>{if(this.isValidLookup(n))return;l=_;const T=[g];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(T,g,_,S,r);else{let I;x&&(I=this.pluralResolver.getSuffix(_,r.count,r));const R=`${this.options.pluralSeparator}zero`,B=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(r.ordinal&&I.indexOf(B)===0&&T.push(g+I.replace(B,this.options.pluralSeparator)),T.push(g+I),b&&T.push(g+R)),y){const F=`${g}${this.options.contextSeparator||"_"}${r.context}`;T.push(F),x&&(r.ordinal&&I.indexOf(B)===0&&T.push(F+I.replace(B,this.options.pluralSeparator)),T.push(F+I),b&&T.push(F+R))}}let N;for(;N=T.pop();)this.isValidLookup(n)||(i=N,n=this.getResource(_,S,N,r))}))})}),{res:n,usedKey:s,exactUsedKey:i,usedLng:l,usedNS:c}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,s):this.resourceStore.getResource(t,r,n,s)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!or(t.replace);let s=n?t.replace:t;if(n&&typeof t.count<"u"&&(s.count=t.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!n){s={...s};for(const i of r)delete s[i]}return s}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class KE{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ri.create("languageUtils")}getScriptPartFromCode(t){if(t=ig(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=ig(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(or(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const s=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(s))&&(r=s)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const s=this.getScriptPartFromCode(n);if(this.isSupportedCode(s))return r=s;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),or(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),s=[],i=l=>{l&&(this.isSupportedCode(l)?s.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return or(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):or(t)&&i(this.formatLanguageCode(t)),n.forEach(l=>{s.indexOf(l)<0&&i(this.formatLanguageCode(l))}),s}}const XE={zero:0,one:1,two:2,few:3,many:4,other:5},QE={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PD{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Ri.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=ig(t==="dev"?"en":t),s=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(n,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),QE;if(!t.match(/-|_/))return QE;const d=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(d,r)}return this.pluralRulesCache[i]=l,l}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(s=>`${r}${s}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((s,i)=>XE[s]-XE[i]).map(s=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(t,r,n={}){const s=this.getRule(t,n);return s?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const JE=(e,t,r,n=".",s=!0)=>{let i=ND(e,t,r);return!i&&s&&or(r)&&(i=t1(e,r,n),i===void 0&&(i=t1(t,r,n))),i},Xb=e=>e.replace(/\$/g,"$$$$");class BD{constructor(t={}){this.logger=Ri.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:s,prefix:i,prefixEscaped:l,suffix:c,suffixEscaped:d,formatSeparator:h,unescapeSuffix:g,unescapePrefix:f,nestingPrefix:x,nestingPrefixEscaped:b,nestingSuffix:y,nestingSuffixEscaped:k,nestingOptionsSeparator:S,maxReplaces:_,alwaysFormat:T}=t.interpolation;this.escape=r!==void 0?r:jD,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?lu(i):l||"{{",this.suffix=c?lu(c):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=g?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=x?lu(x):b||lu("$t("),this.nestingSuffix=y?lu(y):k||lu(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=_||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,s){let i,l,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=b=>{if(b.indexOf(this.formatSeparator)<0){const _=JE(r,d,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,n,{...s,...r,interpolationkey:b}):_}const y=b.split(this.formatSeparator),k=y.shift().trim(),S=y.join(this.formatSeparator).trim();return this.format(JE(r,d,k,this.options.keySeparator,this.options.ignoreJSONStructure),S,n,{...s,...r,interpolationkey:k})};this.resetRegExp();const g=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>Xb(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?Xb(this.escape(b)):Xb(b)}].forEach(b=>{for(c=0;i=b.regex.exec(t);){const y=i[1].trim();if(l=h(y),l===void 0)if(typeof g=="function"){const S=g(t,i,s);l=or(S)?S:""}else if(s&&Object.prototype.hasOwnProperty.call(s,y))l="";else if(f){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${t}`),l="";else!or(l)&&!this.useRawValueToEscape&&(l=HE(l));const k=b.safeValue(l);if(t=t.replace(i[0],k),f?(b.regex.lastIndex+=l.length,b.regex.lastIndex-=i[0].length):b.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),t}nest(t,r,n={}){let s,i,l;const c=(d,h)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const f=d.split(new RegExp(`${g}[ ]*{`));let x=`{${f[1]}`;d=f[0],x=this.interpolate(x,l);const b=x.match(/'/g),y=x.match(/"/g);((b?.length??0)%2===0&&!y||y.length%2!==0)&&(x=x.replace(/'/g,'"'));try{l=JSON.parse(x),h&&(l={...h,...l})}catch(k){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,k),`${d}${g}${x}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;s=this.nestingRegexp.exec(t);){let d=[];l={...n},l=l.replace&&!or(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(h!==-1&&(d=s[1].slice(h).split(this.formatSeparator).map(g=>g.trim()).filter(Boolean),s[1]=s[1].slice(0,h)),i=r(c.call(this,s[1].trim(),l),l),i&&s[0]===t&&!or(i))return i;or(i)||(i=HE(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${t}`),i=""),d.length&&(i=d.reduce((g,f)=>this.format(g,f,n.lng,{...n,interpolationkey:s[1].trim()}),i.trim())),t=t.replace(s[0],i),this.regexp.lastIndex=0}return t}}const FD=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);t==="currency"&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):t==="relativetime"&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(l=>{if(l){const[c,...d]=l.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),g=c.trim();r[g]||(r[g]=h),h==="false"&&(r[g]=!1),h==="true"&&(r[g]=!0),isNaN(h)||(r[g]=parseInt(h,10))}})}return{formatName:t,formatOptions:r}},ZE=e=>{const t={};return(r,n,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const l=n+JSON.stringify(i);let c=t[l];return c||(c=e(ig(n),s),t[l]=c),c(r)}},$D=e=>(t,r,n)=>e(ig(r),n)(t);class UD{constructor(t={}){this.logger=Ri.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?ZE:$D;this.formats={number:n((s,i)=>{const l=new Intl.NumberFormat(s,{...i});return c=>l.format(c)}),currency:n((s,i)=>{const l=new Intl.NumberFormat(s,{...i,style:"currency"});return c=>l.format(c)}),datetime:n((s,i)=>{const l=new Intl.DateTimeFormat(s,{...i});return c=>l.format(c)}),relativetime:n((s,i)=>{const l=new Intl.RelativeTimeFormat(s,{...i});return c=>l.format(c,i.range||"day")}),list:n((s,i)=>{const l=new Intl.ListFormat(s,{...i});return c=>l.format(c)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=ZE(r)}format(t,r,n,s={}){const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(c=>c.indexOf(")")>-1)){const c=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,c)].join(this.formatSeparator)}return i.reduce((c,d)=>{const{formatName:h,formatOptions:g}=FD(d);if(this.formats[h]){let f=c;try{const x=s?.formatParams?.[s.interpolationkey]||{},b=x.locale||x.lng||s.locale||s.lng||n;f=this.formats[h](c,b,{...g,...s,...x})}catch(x){this.logger.warn(x)}return f}else this.logger.warn(`there was no format function for ${h}`);return c},t)}}const zD=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class HD extends Z0{constructor(t,r,n,s={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=s,this.logger=Ri.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,s.backend,s)}queueLoad(t,r,n,s){const i={},l={},c={},d={};return t.forEach(h=>{let g=!0;r.forEach(f=>{const x=`${h}|${f}`;!n.reload&&this.store.hasResourceBundle(h,f)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?l[x]===void 0&&(l[x]=!0):(this.state[x]=1,g=!1,l[x]===void 0&&(l[x]=!0),i[x]===void 0&&(i[x]=!0),d[f]===void 0&&(d[f]=!0)))}),g||(c[h]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(t,r,n){const s=t.split("|"),i=s[0],l=s[1];r&&this.emit("failedLoading",i,l,r),!r&&n&&this.store.addResourceBundle(i,l,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const c={};this.queue.forEach(d=>{CD(d.loaded,[i],l),zD(d,t),r&&d.errors.push(r),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{c[h]||(c[h]={});const g=d.loaded[h];g.length&&g.forEach(f=>{c[h][f]===void 0&&(c[h][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(t,r,n,s=0,i=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:s,wait:i,callback:l});return}this.readingCalls++;const c=(h,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(h&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,s+1,i*2,l)},i);return}l(h,g)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const h=d(t,r);h&&typeof h.then=="function"?h.then(g=>c(null,g)).catch(c):c(null,h)}catch(h){c(h)}return}return d(t,r,c)}prepareLoading(t,r,n={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();or(t)&&(t=this.languageUtils.toResolveHierarchy(t)),or(r)&&(r=[r]);const i=this.queueLoad(t,r,n,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),s=n[0],i=n[1];this.read(s,i,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${r}loading namespace ${i} for language ${s} failed`,l),!l&&c&&this.logger.log(`${r}loaded namespace ${i} for language ${s}`,c),this.loaded(t,l,c)})}saveMissing(t,r,n,s,i,l={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...l,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let g;h.length===5?g=h(t,r,n,s,d):g=h(t,r,n,s),g&&typeof g.then=="function"?g.then(f=>c(null,f)).catch(c):c(null,g)}catch(g){c(g)}else h(t,r,n,s,c,d)}!t||!t[0]||this.store.addResource(t[0],r,n,s)}}}const e_=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),or(e[1])&&(t.defaultValue=e[1]),or(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),t_=e=>(or(e.ns)&&(e.ns=[e.ns]),or(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),or(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),lf=()=>{},qD=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class og extends Z0{constructor(t={},r){if(super(),this.options=t_(t),this.services={},this.logger=Ri,this.modules={external:[]},qD(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(or(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=e_();this.options={...n,...this.options,...t_(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Ri.init(s(this.modules.logger),this.options):Ri.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=UD;const g=new KE(this.options);this.store=new WE(this.options.resources,this.options);const f=this.services;f.logger=Ri,f.resourceStore=this.store,f.languageUtils=g,f.pluralResolver=new PD(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=s(h),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new BD(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new HD(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(b,...y)=>{this.emit(b,...y)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new a0(this.services,this.options),this.translator.on("*",(b,...y)=>{this.emit(b,...y)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=lf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...g)=>this.store[h](...g)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...g)=>(this.store[h](...g),this)});const c=sh(),d=()=>{const h=(g,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(f),r(g,f)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(t,r=lf){let n=r;const s=or(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&i.indexOf(h)<0&&i.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(c=>l(c)),this.services.backendConnector.load(i,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(t,r,n){const s=sh();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=lf),this.services.backendConnector.reload(t,r,i=>{s.resolve(),n(i)}),s}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&ZN.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=sh();this.emit("languageChanging",t);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},i=(c,d)=>{d?this.isLanguageChangingTo===t&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),r&&r(c,(...h)=>this.t(...h))},l=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=or(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(or(c)?[c]:c);h&&(this.language||s(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,g=>{i(g,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),n}getFixedT(t,r,n){const s=(i,l,...c)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([i,l].concat(c)):d={...l},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||s.keyPrefix);const h=this.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(i)?g=i.map(f=>(typeof f=="function"&&(f=r1(f,{...this.options,...l})),`${d.keyPrefix}${h}${f}`)):(typeof i=="function"&&(i=r1(i,{...this.options,...l})),g=d.keyPrefix?`${d.keyPrefix}${h}${i}`:i),this.t(g,d)};return or(t)?s.lng=t:s.lngs=t,s.ns=r,s.keyPrefix=n,s}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const l=(c,d)=>{const h=this.services.backendConnector.state[`${c}|${d}`];return h===-1||h===0||h===2};if(r.precheck){const c=r.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(n,t)&&(!s||l(i,t)))}loadNamespaces(t,r){const n=sh();return this.options.ns?(or(t)&&(t=[t]),t.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=sh();or(t)&&(t=[t]);const s=this.options.preload||[],i=t.filter(l=>s.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=s.concat(i),this.loadResources(l=>{n.resolve(),r&&r(l)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const s=new Intl.Locale(t);if(s&&s.getTextInfo){const i=s.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new KE(e_());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new og(t,r)}cloneInstance(t={},r=lf){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const s={...this.options,...t,isClone:!0},i=new og(s);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(c=>{i[c]=this[c]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const c=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((g,f)=>(g[f]={...d[h][f]},g),d[h]),d),{});i.store=new WE(c,s),i.services.resourceStore=i.store}return i.translator=new a0(i.services,s),i.translator.on("*",(c,...d)=>{i.emit(c,...d)}),i.init(s,r),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Fa=og.createInstance();Fa.createInstance=og.createInstance;Fa.createInstance;Fa.dir;Fa.init;Fa.loadResources;Fa.reloadResources;Fa.use;Fa.changeLanguage;Fa.getFixedT;Fa.t;Fa.exists;Fa.setDefaultNamespace;Fa.hasLoadedNamespace;Fa.loadNamespaces;Fa.loadLanguages;var C=J0();const Gn=ed(C),GD=(e,t,r,n)=>{const s=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);oc(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...s):console?.warn&&console.warn(...s)},r_={},tA=(e,t,r,n)=>{oc(r)&&r_[r]||(oc(r)&&(r_[r]=new Date),GD(e,t,r,n))},rA=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},n1=(e,t,r)=>{e.loadNamespaces(t,rA(e,r))},n_=(e,t,r,n)=>{if(oc(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return n1(e,r,n);r.forEach(s=>{e.options.ns.indexOf(s)<0&&e.options.ns.push(s)}),e.loadLanguages(t,rA(e,n))},YD=(e,t,r={})=>!t.languages||!t.languages.length?(tA(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!s(n.isLanguageChangingTo,e))return!1}}),oc=e=>typeof e=="string",WD=e=>typeof e=="object"&&e!==null,VD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,KD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},XD=e=>KD[e],QD=e=>e.replace(VD,XD);let a1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:QD};const JD=(e={})=>{a1={...a1,...e}},ZD=()=>a1;let nA;const eP=e=>{nA=e},tP=()=>nA,rP={type:"3rdParty",init(e){JD(e.options.react),eP(e)}},nP=C.createContext();class aP{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Qb={exports:{}},Jb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function sP(){if(a_)return Jb;a_=1;var e=J0();function t(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function c(f,x){var b=x(),y=n({inst:{value:b,getSnapshot:x}}),k=y[0].inst,S=y[1];return i(function(){k.value=b,k.getSnapshot=x,d(k)&&S({inst:k})},[f,b,x]),s(function(){return d(k)&&S({inst:k}),f(function(){d(k)&&S({inst:k})})},[f]),l(b),b}function d(f){var x=f.getSnapshot;f=f.value;try{var b=x();return!r(f,b)}catch{return!0}}function h(f,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Jb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,Jb}var s_;function iP(){return s_||(s_=1,Qb.exports=sP()),Qb.exports}var oP=iP();const lP=(e,t)=>oc(t)?t:WD(t)&&oc(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,cP={t:lP,ready:!1},uP=()=>()=>{},aA=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:s}=C.useContext(nP)||{},i=r||n||tP();i&&!i.reportNamespaces&&(i.reportNamespaces=new aP),i||tA(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=C.useMemo(()=>({...ZD(),...i?.options?.react,...t}),[i,t]),{useSuspense:c,keyPrefix:d}=l,h=C.useMemo(()=>{const N=s||i?.options?.defaultNS;return oc(N)?[N]:N||["translation"]},[e,s,i]);i?.reportNamespaces?.addUsedNamespaces?.(h);const g=C.useCallback(N=>{if(!i)return uP;const{bindI18n:I,bindI18nStore:R}=l;return I&&i.on(I,N),R&&i.store.on(R,N),()=>{I&&I.split(" ").forEach(B=>i.off(B,N)),R&&R.split(" ").forEach(B=>i.store.off(B,N))}},[i,l]),f=C.useRef(),x=C.useCallback(()=>{if(!i)return cP;const N=!!(i.isInitialized||i.initializedStoreOnce)&&h.every(F=>YD(F,i,l)),I=i.getFixedT(t.lng||i.language,l.nsMode==="fallback"?h:h[0],d),R=f.current;if(R&&R.ready===N&&R.lng===(t.lng||i.language)&&R.keyPrefix===d)return R;const B={t:I,ready:N,lng:t.lng||i.language,keyPrefix:d};return f.current=B,B},[i,h,d,l,t.lng]),[b,y]=C.useState(0),{t:k,ready:S}=oP.useSyncExternalStore(g,x,x);C.useEffect(()=>{if(i&&!S&&!c){const N=()=>y(I=>I+1);t.lng?n_(i,t.lng,h,N):n1(i,h,N)}},[i,t.lng,h,S,c,b]);const _=i||{},T=C.useMemo(()=>{const N=[k,_,S];return N.t=k,N.i18n=_,N.ready=S,N},[k,_,S]);if(i&&c&&!S)throw new Promise(N=>{const I=()=>N();t.lng?n_(i,t.lng,h,I):n1(i,h,I)});return T},{slice:dP,forEach:hP}=[];function gP(e){return hP.call(dP.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function pP(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const i_=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,fP=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(t);let i=`${e}=${s}`;if(n.maxAge>0){const l=n.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(n.domain){if(!i_.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!i_.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},o_={create(e,t,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),n&&(s.domain=n),document.cookie=fP(e,t,s)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let s=r[n];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var mP={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return o_.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:s,cookieOptions:i}=t;r&&typeof document<"u"&&o_.create(r,e,n,s,i)}},xP={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const i=n.substring(1).split("&");for(let l=0;l<i.length;l++){const c=i[l].indexOf("=");c>0&&i[l].substring(0,c)===t&&(r=i[l].substring(c+1))}}return r}},bP={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const i=s.substring(1);if(t){const l=i.split("&");for(let c=0;c<l.length;c++){const d=l[c].indexOf("=");d>0&&l[c].substring(0,d)===t&&(n=l[c].substring(d+1))}}if(n)return n;if(!n&&r>-1){const l=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let cu=null;const l_=()=>{if(cu!==null)return cu;try{if(cu=typeof window<"u"&&window.localStorage!==null,!cu)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{cu=!1}return cu};var yP={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&l_())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&l_()&&window.localStorage.setItem(r,e)}};let uu=null;const c_=()=>{if(uu!==null)return uu;try{if(uu=typeof window<"u"&&window.sessionStorage!==null,!uu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{uu=!1}return uu};var vP={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&c_())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&c_()&&window.sessionStorage.setItem(r,e)}},kP={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:s}=navigator;if(r)for(let i=0;i<r.length;i++)t.push(r[i]);n&&t.push(n),s&&t.push(s)}return t.length>0?t:void 0}},wP={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},SP={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},EP={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let sA=!1;try{document.cookie,sA=!0}catch{}const iA=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];sA||iA.splice(1,1);const _P=()=>({order:iA,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class oA{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=gP(r,this.options||{},_P()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(mP),this.addDetector(xP),this.addDetector(yP),this.addDetector(vP),this.addDetector(kP),this.addDetector(wP),this.addDetector(SP),this.addDetector(EP),this.addDetector(bP)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let s=this.detectors[n].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(r=r.concat(s))}}),r=r.filter(n=>n!=null&&!pP(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}oA.type="languageDetector";const TP={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",clear:"Clear",search:"Search",filter:"Filter",export:"Export",import:"Import",download:"Download",upload:"Upload",copy:"Copy",paste:"Paste",cut:"Cut",undo:"Undo",redo:"Redo",select:"Select",selectAll:"Select All",deselectAll:"Deselect All"},CP={signIn:"Sign in with Google",signOut:"Sign Out",authRequired:"Authentication required",tokenExpired:"Your session has expired. Please sign in again.",welcomeBack:"Welcome back!",signInPrompt:"Please sign in with Google to continue",signInRequired:"You must sign in to use this feature",signingIn:"Signing in...",signingOut:"Signing out..."},NP={placeholder:"Type your message here...",send:"Send",retry:"Retry",stop:"Stop",thinking:"Thinking...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"Edit",delete:"Delete",copy:"Copy",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required"},AP={title:"Research Planning",query:"Research Query",generatePlan:"Generate Plan",savePlan:"Save Plan",transferToChat:"Transfer to Chat",clearAll:"Clear All",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome"},jP={title:"Settings",language:"Language",selectLanguage:"Select Language",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},LP={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},MP={title:"Billing",balance:"Balance",addCredits:"Add Credits",usage:"Usage",transactions:"Transactions",cost:"Cost",tokens:"Tokens",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Purchase Credits",amount:"Amount",paymentMethod:"Payment Method"},OP={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},RP={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},IP={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},DP={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},PP={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},BP={common:TP,auth:CP,chat:NP,planning:AP,settings:jP,languages:LP,billing:MP,errors:OP,swag:RP,tts:IP,playlist:DP,tools:PP},FP={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",close:"Cerrar",loading:"Cargando...",error:"Error",success:"xito",confirm:"Confirmar",back:"Atrs",next:"Siguiente",submit:"Enviar",clear:"Limpiar",search:"Buscar",filter:"Filtrar"},$P={signIn:"Iniciar sesin con Google",signOut:"Cerrar sesin",authRequired:"Autenticacin requerida",tokenExpired:"Tu sesin ha expirado. Por favor inicia sesin nuevamente.",signInPrompt:"Por favor inicia sesin con Google para continuar"},UP={placeholder:"Escribe tu mensaje aqu...",send:"Enviar",retry:"Reintentar",stop:"Detener",thinking:"Pensando...",generating:"Generando respuesta..."},zP={title:"Planificacin de Investigacin",query:"Consulta de Investigacin",generatePlan:"Generar Plan",savePlan:"Guardar Plan",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo"},HP={title:"Configuracin",language:"Idioma",selectLanguage:"Seleccionar Idioma",providers:"Proveedores",cloudSync:"Sincronizacin en la Nube",billing:"Facturacin"},qP={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},GP={title:"Facturacin",balance:"Saldo",addCredits:"Agregar Crditos",usage:"Uso"},YP={generic:"Ocurri un error",tryAgain:"Por favor intenta nuevamente"},WP={common:FP,auth:$P,chat:UP,planning:zP,settings:HP,languages:qP,billing:GP,errors:YP},VP={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",close:"Fermer",loading:"Chargement...",error:"Erreur",success:"Succs"},KP={signIn:"Se connecter avec Google",signOut:"Se dconnecter",authRequired:"Authentification requise",signInPrompt:"Veuillez vous connecter avec Google pour continuer"},XP={placeholder:"Tapez votre message ici...",send:"Envoyer",stop:"Arrter",thinking:"Rflexion..."},QP={title:"Planification de la Recherche",generatePlan:"Gnrer un Plan"},JP={title:"Paramtres",language:"Langue",selectLanguage:"Slectionner la Langue"},ZP={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},eB={common:VP,auth:KP,chat:XP,planning:QP,settings:JP,languages:ZP},tB={save:"Speichern",cancel:"Abbrechen",delete:"Lschen",edit:"Bearbeiten",close:"Schlieen",loading:"Laden...",error:"Fehler",success:"Erfolg"},rB={signIn:"Mit Google anmelden",signOut:"Abmelden",authRequired:"Authentifizierung erforderlich",signInPrompt:"Bitte melden Sie sich mit Google an, um fortzufahren"},nB={placeholder:"Geben Sie Ihre Nachricht hier ein...",send:"Senden",stop:"Stoppen",thinking:"Denken..."},aB={title:"Forschungsplanung",generatePlan:"Plan Generieren"},sB={title:"Einstellungen",language:"Sprache",selectLanguage:"Sprache Auswhlen"},iB={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},oB={common:tB,auth:rB,chat:nB,planning:aB,settings:sB,languages:iB},lB={save:"",cancel:"",delete:"",edit:"",close:"",loading:"...",error:"",success:""},cB={signIn:" Google ",signOut:"",authRequired:"",signInPrompt:" Google "},uB={placeholder:"...",send:"",stop:"",thinking:"..."},dB={title:"",generatePlan:""},hB={title:"",language:"",selectLanguage:""},gB={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},pB={common:lB,auth:cB,chat:uB,planning:dB,settings:hB,languages:gB},fB={save:"",cancel:"",delete:"",edit:"",close:"",loading:"...",error:"",success:""},mB={signIn:"Google",signOut:"",authRequired:"",signInPrompt:"Google"},xB={placeholder:"...",send:"",stop:"",thinking:"..."},bB={title:"",generatePlan:""},yB={title:"",language:"",selectLanguage:""},vB={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},kB={common:fB,auth:mB,chat:xB,planning:bB,settings:yB,languages:vB},wB={save:"",cancel:"",delete:"",edit:"",close:"",loading:" ...",error:"",success:""},SB={signIn:"   Google",signOut:" ",authRequired:" ",signInPrompt:"    Google "},EB={placeholder:"  ...",send:"",stop:"",thinking:" ..."},_B={title:" ",generatePlan:" "},TB={title:"",language:"",selectLanguage:" "},CB={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:""},NB={common:wB,auth:SB,chat:EB,planning:_B,settings:TB,languages:CB};Fa.use(oA).use(rP).init({resources:{en:{translation:BP},es:{translation:WP},fr:{translation:eB},de:{translation:oB},zh:{translation:pB},ja:{translation:kB},ar:{translation:NB}},fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var u_="popstate";function AB(e={}){function t(n,s){let{pathname:i,search:l,hash:c}=n.location;return s1("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:lg(s)}return LB(t,r,null,e)}function Mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Di(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jB(){return Math.random().toString(36).substring(2,10)}function d_(e,t){return{usr:e.state,key:e.key,idx:t}}function s1(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?td(t):t,state:r,key:t&&t.key||n||jB()}}function lg({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function td(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function LB(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,c="POP",d=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function f(){c="POP";let S=g(),_=S==null?null:S-h;h=S,d&&d({action:c,location:k.location,delta:_})}function x(S,_){c="PUSH";let T=s1(k.location,S,_);h=g()+1;let N=d_(T,h),I=k.createHref(T);try{l.pushState(N,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(I)}i&&d&&d({action:c,location:k.location,delta:1})}function b(S,_){c="REPLACE";let T=s1(k.location,S,_);h=g();let N=d_(T,h),I=k.createHref(T);l.replaceState(N,"",I),i&&d&&d({action:c,location:k.location,delta:0})}function y(S){return MB(S)}let k={get action(){return c},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u_,f),d=S,()=>{s.removeEventListener(u_,f),d=null}},createHref(S){return t(s,S)},createURL:y,encodeLocation(S){let _=y(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:b,go(S){return l.go(S)}};return k}function MB(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Mn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:lg(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function lA(e,t,r="/"){return OB(e,t,r,!1)}function OB(e,t,r,n){let s=typeof t=="string"?td(t):t,i=wo(s.pathname||"/",r);if(i==null)return null;let l=cA(e);RB(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=GB(i);c=HB(l[d],h,n)}return c}function cA(e,t=[],r=[],n="",s=!1){let i=(l,c,d=s,h)=>{let g={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&d)return;Mn(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let f=yo([n,g.relativePath]),x=r.concat(g);l.children&&l.children.length>0&&(Mn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cA(l.children,t,x,f,d)),!(l.path==null&&!l.index)&&t.push({path:f,score:UB(f,l.index),routesMeta:x})};return e.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))i(l,c);else for(let d of uA(l.path))i(l,c,!0,d)}),t}function uA(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=uA(n.join("/")),c=[];return c.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&c.push(...l),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function RB(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:zB(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var IB=/^:[\w-]+$/,DB=3,PB=2,BB=1,FB=10,$B=-2,h_=e=>e==="*";function UB(e,t){let r=e.split("/"),n=r.length;return r.some(h_)&&(n+=$B),t&&(n+=PB),r.filter(s=>!h_(s)).reduce((s,i)=>s+(IB.test(i)?DB:i===""?BB:FB),n)}function zB(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function HB(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,g=i==="/"?t:t.slice(i.length)||"/",f=s0({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},g),x=d.route;if(!f&&h&&r&&!n[n.length-1].route.index&&(f=s0({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:yo([i,f.pathname]),pathnameBase:KB(yo([i,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(i=yo([i,f.pathnameBase]))}return l}function s0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=qB(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((h,{paramName:g,isOptional:f},x)=>{if(g==="*"){let y=c[x]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[x];return f&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function qB(e,t=!1,r=!0){Di(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function GB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Di(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function YB(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?td(e):e;return{pathname:r?r.startsWith("/")?r:WB(r,t):t,search:XB(n),hash:QB(s)}}function WB(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Zb(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function dA(e){let t=VB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function hA(e,t,r,n=!1){let s;typeof e=="string"?s=td(e):(s={...e},Mn(!s.pathname||!s.pathname.includes("?"),Zb("?","pathname","search",s)),Mn(!s.pathname||!s.pathname.includes("#"),Zb("#","pathname","hash",s)),Mn(!s.search||!s.search.includes("#"),Zb("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,c;if(l==null)c=r;else{let f=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}c=f>=0?t[f]:"/"}let d=YB(s,c),h=l&&l!=="/"&&l.endsWith("/"),g=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}var yo=e=>e.join("/").replace(/\/\/+/g,"/"),KB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,QB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gA=["POST","PUT","PATCH","DELETE"];new Set(gA);var ZB=["GET",...gA];new Set(ZB);var rd=C.createContext(null);rd.displayName="DataRouter";var em=C.createContext(null);em.displayName="DataRouterState";C.createContext(!1);var pA=C.createContext({isTransitioning:!1});pA.displayName="ViewTransition";var e8=C.createContext(new Map);e8.displayName="Fetchers";var t8=C.createContext(null);t8.displayName="Await";var Fi=C.createContext(null);Fi.displayName="Navigation";var Cg=C.createContext(null);Cg.displayName="Location";var To=C.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var Hv=C.createContext(null);Hv.displayName="RouteError";function r8(e,{relative:t}={}){Mn(Ng(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(Fi),{hash:s,pathname:i,search:l}=Ag(e,{relative:t}),c=i;return r!=="/"&&(c=i==="/"?r:yo([r,i])),n.createHref({pathname:c,search:l,hash:s})}function Ng(){return C.useContext(Cg)!=null}function Co(){return Mn(Ng(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Cg).location}var fA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(e){C.useContext(Fi).static||C.useLayoutEffect(e)}function pl(){let{isDataRoute:e}=C.useContext(To);return e?f8():n8()}function n8(){Mn(Ng(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(rd),{basename:t,navigator:r}=C.useContext(Fi),{matches:n}=C.useContext(To),{pathname:s}=Co(),i=JSON.stringify(dA(n)),l=C.useRef(!1);return mA(()=>{l.current=!0}),C.useCallback((d,h={})=>{if(Di(l.current,fA),!l.current)return;if(typeof d=="number"){r.go(d);return}let g=hA(d,JSON.parse(i),s,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:yo([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,i,s,e])}C.createContext(null);function Ag(e,{relative:t}={}){let{matches:r}=C.useContext(To),{pathname:n}=Co(),s=JSON.stringify(dA(r));return C.useMemo(()=>hA(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function a8(e,t){return xA(e,t)}function xA(e,t,r,n,s){Mn(Ng(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(Fi),{matches:l}=C.useContext(To),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",g=c?c.pathnameBase:"/",f=c&&c.route;{let T=f&&f.path||"";bA(h,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let x=Co(),b;if(t){let T=typeof t=="string"?td(t):t;Mn(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=x;let y=b.pathname||"/",k=y;if(g!=="/"){let T=g.replace(/^\//,"").split("/");k="/"+y.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=lA(e,{pathname:k});Di(f||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Di(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=c8(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:yo([g,i.encodeLocation?i.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:yo([g,i.encodeLocation?i.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,r,n,s);return t&&_?C.createElement(Cg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},_):_}function s8(){let e=p8(),t=JB(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:s},r):null,l)}var i8=C.createElement(s8,null),o8=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?C.createElement(To.Provider,{value:this.props.routeContext},C.createElement(Hv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function l8({routeContext:e,match:t,children:r}){let n=C.useContext(rd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(To.Provider,{value:e},r)}function c8(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r?.errors;if(l!=null){let h=i.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Mn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(r)for(let h=0;h<i.length;h++){let g=i[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:f,errors:x}=r,b=g.route.loader&&!f.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,g,f)=>{let x,b=!1,y=null,k=null;r&&(x=l&&g.route.id?l[g.route.id]:void 0,y=g.route.errorElement||i8,c&&(d<0&&f===0?(bA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,k=null):d===f&&(b=!0,k=g.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,f+1)),_=()=>{let T;return x?T=y:b?T=k:g.route.Component?T=C.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=h,C.createElement(l8,{match:g,routeContext:{outlet:h,matches:S,isDataRoute:r!=null},children:T})};return r&&(g.route.ErrorBoundary||g.route.errorElement||f===0)?C.createElement(o8,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function qv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function u8(e){let t=C.useContext(rd);return Mn(t,qv(e)),t}function d8(e){let t=C.useContext(em);return Mn(t,qv(e)),t}function h8(e){let t=C.useContext(To);return Mn(t,qv(e)),t}function Gv(e){let t=h8(e),r=t.matches[t.matches.length-1];return Mn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function g8(){return Gv("useRouteId")}function p8(){let e=C.useContext(Hv),t=d8("useRouteError"),r=Gv("useRouteError");return e!==void 0?e:t.errors?.[r]}function f8(){let{router:e}=u8("useNavigate"),t=Gv("useNavigate"),r=C.useRef(!1);return mA(()=>{r.current=!0}),C.useCallback(async(s,i={})=>{Di(r.current,fA),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var g_={};function bA(e,t,r){!t&&!g_[e]&&(g_[e]=!0,Di(!1,r))}C.memo(m8);function m8({routes:e,future:t,state:r,unstable_onError:n}){return xA(e,void 0,r,n,t)}function Gl(e){Mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x8({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Mn(!Ng(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=td(r));let{pathname:d="/",search:h="",hash:g="",state:f=null,key:x="default"}=r,b=C.useMemo(()=>{let y=wo(d,l);return y==null?null:{location:{pathname:y,search:h,hash:g,state:f,key:x},navigationType:n}},[l,d,h,g,f,x,n]);return Di(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:C.createElement(Fi.Provider,{value:c},C.createElement(Cg.Provider,{children:t,value:b}))}function b8({children:e,location:t}){return a8(i1(e),t)}function i1(e,t=[]){let r=[];return C.Children.forEach(e,(n,s)=>{if(!C.isValidElement(n))return;let i=[...t,s];if(n.type===C.Fragment){r.push.apply(r,i1(n.props.children,i));return}Mn(n.type===Gl,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=i1(n.props.children,i)),r.push(l)}),r}var If="get",Df="application/x-www-form-urlencoded";function tm(e){return e!=null&&typeof e.tagName=="string"}function y8(e){return tm(e)&&e.tagName.toLowerCase()==="button"}function v8(e){return tm(e)&&e.tagName.toLowerCase()==="form"}function k8(e){return tm(e)&&e.tagName.toLowerCase()==="input"}function w8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function S8(e,t){return e.button===0&&(!t||t==="_self")&&!w8(e)}var cf=null;function E8(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var _8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ey(e){return e!=null&&!_8.has(e)?(Di(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Df}"`),null):e}function T8(e,t){let r,n,s,i,l;if(v8(e)){let c=e.getAttribute("action");n=c?wo(c,t):null,r=e.getAttribute("method")||If,s=ey(e.getAttribute("enctype"))||Df,i=new FormData(e)}else if(y8(e)||k8(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||c.getAttribute("action");if(n=d?wo(d,t):null,r=e.getAttribute("formmethod")||c.getAttribute("method")||If,s=ey(e.getAttribute("formenctype"))||ey(c.getAttribute("enctype"))||Df,i=new FormData(c,e),!E8()){let{name:h,type:g,value:f}=e;if(g==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,f)}}else{if(tm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=If,n=null,s=Df,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function C8(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&wo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function N8(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function A8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function j8(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await N8(i,r);return l.links?l.links():[]}return[]}));return R8(n.flat(1).filter(A8).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function p_(e,t,r,n,s,i){let l=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,c=(d,h)=>r[h].pathname!==d.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==d.params["*"];return i==="assets"?t.filter((d,h)=>l(d,h)||c(d,h)):i==="data"?t.filter((d,h)=>{let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let f=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function L8(e,t,{includeHydrateFallback:r}={}){return M8(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function M8(e){return[...new Set(e)]}function O8(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function R8(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(O8(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function yA(){let e=C.useContext(rd);return Yv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function I8(){let e=C.useContext(em);return Yv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Wv=C.createContext(void 0);Wv.displayName="FrameworkContext";function vA(){let e=C.useContext(Wv);return Yv(e,"You must render this element inside a <HydratedRouter> element"),e}function D8(e,t){let r=C.useContext(Wv),[n,s]=C.useState(!1),[i,l]=C.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:g,onTouchStart:f}=t,x=C.useRef(null);C.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let k=_=>{_.forEach(T=>{l(T.isIntersecting)})},S=new IntersectionObserver(k,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),C.useEffect(()=>{if(n){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[n]);let b=()=>{s(!0)},y=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,x,{}]:[i,x,{onFocus:ih(c,b),onBlur:ih(d,y),onMouseEnter:ih(h,b),onMouseLeave:ih(g,y),onTouchStart:ih(f,b)}]:[!1,x,{}]}function ih(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function P8({page:e,...t}){let{router:r}=yA(),n=C.useMemo(()=>lA(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(F8,{page:e,matches:n,...t}):null}function B8(e){let{manifest:t,routeModules:r}=vA(),[n,s]=C.useState([]);return C.useEffect(()=>{let i=!1;return j8(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function F8({page:e,matches:t,...r}){let n=Co(),{manifest:s,routeModules:i}=vA(),{basename:l}=yA(),{loaderData:c,matches:d}=I8(),h=C.useMemo(()=>p_(e,t,d,s,n,"data"),[e,t,d,s,n]),g=C.useMemo(()=>p_(e,t,d,s,n,"assets"),[e,t,d,s,n]),f=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,k=!1;if(t.forEach(_=>{let T=s.routes[_.route.id];!T||!T.hasLoader||(!h.some(N=>N.route.id===_.route.id)&&_.route.id in c&&i[_.route.id]?.shouldRevalidate||T.hasClientLoader?k=!0:y.add(_.route.id))}),y.size===0)return[];let S=C8(e,l,"data");return k&&y.size>0&&S.searchParams.set("_routes",t.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,c,n,s,h,t,e,i]),x=C.useMemo(()=>L8(g,s),[g,s]),b=B8(g);return C.createElement(C.Fragment,null,f.map(y=>C.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),x.map(y=>C.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),b.map(({key:y,link:k})=>C.createElement("link",{key:y,nonce:r.nonce,...k})))}function $8(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var kA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kA&&(window.__reactRouterVersion="7.9.4")}catch{}function U8({basename:e,children:t,window:r}){let n=C.useRef();n.current==null&&(n.current=AB({window:r,v5Compat:!0}));let s=n.current,[i,l]=C.useState({action:s.action,location:s.location}),c=C.useCallback(d=>{C.startTransition(()=>l(d))},[l]);return C.useLayoutEffect(()=>s.listen(c),[s,c]),C.createElement(x8,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SA=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:c,target:d,to:h,preventScrollReset:g,viewTransition:f,...x},b){let{basename:y}=C.useContext(Fi),k=typeof h=="string"&&wA.test(h),S,_=!1;if(typeof h=="string"&&k&&(S=h,kA))try{let G=new URL(window.location.href),$=h.startsWith("//")?new URL(G.protocol+h):new URL(h),J=wo($.pathname,y);$.origin===G.origin&&J!=null?h=J+$.search+$.hash:_=!0}catch{Di(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=r8(h,{relative:s}),[N,I,R]=D8(n,x),B=G8(h,{replace:l,state:c,target:d,preventScrollReset:g,relative:s,viewTransition:f});function F(G){t&&t(G),G.defaultPrevented||B(G)}let ae=C.createElement("a",{...x,...R,href:S||T,onClick:_||i?t:F,ref:$8(b,I),target:d,"data-discover":!k&&r==="render"?"true":void 0});return N&&!k?C.createElement(C.Fragment,null,ae,C.createElement(P8,{page:T})):ae});SA.displayName="Link";var z8=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:c,children:d,...h},g){let f=Ag(l,{relative:h.relative}),x=Co(),b=C.useContext(em),{navigator:y,basename:k}=C.useContext(Fi),S=b!=null&&X8(f)&&c===!0,_=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,T=x.pathname,N=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(T=T.toLowerCase(),N=N?N.toLowerCase():null,_=_.toLowerCase()),N&&k&&(N=wo(N,k)||N);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let R=T===_||!s&&T.startsWith(_)&&T.charAt(I)==="/",B=N!=null&&(N===_||!s&&N.startsWith(_)&&N.charAt(_.length)==="/"),F={isActive:R,isPending:B,isTransitioning:S},ae=R?t:void 0,G;typeof n=="function"?G=n(F):G=[n,R?"active":null,B?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let $=typeof i=="function"?i(F):i;return C.createElement(SA,{...h,"aria-current":ae,className:G,ref:g,style:$,to:l,viewTransition:c},typeof d=="function"?d(F):d)});z8.displayName="NavLink";var H8=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=If,action:c,onSubmit:d,relative:h,preventScrollReset:g,viewTransition:f,...x},b)=>{let y=V8(),k=K8(c,{relative:h}),S=l.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&wA.test(c),T=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,R=I?.getAttribute("formmethod")||l;y(I||N.currentTarget,{fetcherKey:t,method:R,navigate:r,replace:s,state:i,relative:h,preventScrollReset:g,viewTransition:f})};return C.createElement("form",{ref:b,method:S,action:k,onSubmit:n?d:T,...x,"data-discover":!_&&e==="render"?"true":void 0})});H8.displayName="Form";function q8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EA(e){let t=C.useContext(rd);return Mn(t,q8(e)),t}function G8(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let c=pl(),d=Co(),h=Ag(e,{relative:i});return C.useCallback(g=>{if(S8(g,t)){g.preventDefault();let f=r!==void 0?r:lg(d)===lg(h);c(e,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,c,h,r,n,t,e,s,i,l])}var Y8=0,W8=()=>`__${String(++Y8)}__`;function V8(){let{router:e}=EA("useSubmit"),{basename:t}=C.useContext(Fi),r=g8();return C.useCallback(async(n,s={})=>{let{action:i,method:l,encType:c,formData:d,body:h}=T8(n,t);if(s.navigate===!1){let g=s.fetcherKey||W8();await e.fetch(g,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function K8(e,{relative:t}={}){let{basename:r}=C.useContext(Fi),n=C.useContext(To);Mn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ag(e||".",{relative:t})},l=Co();if(e==null){i.search=l.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(g=>g==="")){c.delete("index"),d.filter(f=>f).forEach(f=>c.append("index",f));let g=c.toString();i.search=g?`?${g}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:yo([r,i.pathname])),lg(i)}function X8(e,{relative:t}={}){let r=C.useContext(pA);Mn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=EA("useViewTransitionState"),s=Ag(e,{relative:t});if(!r.isTransitioning)return!1;let i=wo(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=wo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return s0(s.pathname,l)!=null||s0(s.pathname,i)!=null}var Q8=QN();const J8=ed(Q8),Z8="modulepreload",e9=function(e){return"/"+e},f_={},lr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let d=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=d(r.map(h=>{if(h=e9(h),h in f_)return;f_[h]=!0;const g=h.endsWith(".css"),f=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":Z8,g||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),g)return new Promise((b,y)=>{x.addEventListener("load",b),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},_A="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",TA=(e,t,r,n)=>{const s=t.trim().replace(/[\r\n]/g,""),i=r?.trim().replace(/[\r\n]/g,"");if(localStorage.setItem("google_user",JSON.stringify(e)),localStorage.setItem("google_access_token",s),i&&localStorage.setItem("google_refresh_token",i),n){const l=Date.now()+n*1e3;localStorage.setItem("google_token_expiration",l.toString())}else try{const l=nd(s);l?.exp&&localStorage.setItem("google_token_expiration",(l.exp*1e3).toString())}catch{const c=Date.now()+36e5;localStorage.setItem("google_token_expiration",c.toString())}},o1=()=>{const e=localStorage.getItem("google_user"),t=localStorage.getItem("google_access_token"),r=localStorage.getItem("google_refresh_token");return e&&t?{user:JSON.parse(e),accessToken:t,isAuthenticated:!0,refreshToken:r||void 0}:{user:null,accessToken:null,isAuthenticated:!1}},l1=()=>{localStorage.removeItem("google_user"),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_refresh_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("last_token_refresh")},nd=e=>{try{if(!e||typeof e!="string"||e.split(".").length!==3)return console.warn("Token is not a valid JWT format"),null;const t=e.split(".")[1];if(!t)return null;const r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return console.warn("Failed to decode JWT (token may be an access token, not an ID token):",t),null}},CA=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const c=parseInt(t,10)-Date.now();return Math.max(0,c)}const r=nd(e);if(!r||!r.exp)return 0;const n=r.exp*1e3,s=Date.now(),i=n-s;return Math.max(0,i)}catch(t){return console.error("Failed to get token time remaining:",t),0}},bu=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const c=parseInt(t,10),d=Date.now(),h=300*1e3;return c-d<h}const r=nd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration, assuming valid"),!1;const n=r.exp*1e3,s=Date.now(),i=300*1e3,l=n-s;if(l>0&&l<600*1e3&&l>=i){const c=Math.floor(l/6e4);console.warn(` Token expires in ${c} minutes`)}return l<i}catch(t){return console.error("Failed to check token expiration:",t),!0}},c1=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const c=parseInt(t,10),d=Date.now(),h=900*1e3;return c-d<h}const r=nd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration for refresh check, assuming no refresh needed"),!1;const n=r.exp*1e3,s=Date.now(),i=900*1e3;return n-s<i}catch(t){return console.error("Failed to check if token should refresh:",t),!1}},t9=async e=>{try{const t=localStorage.getItem("google_refresh_token");if(t){console.log(" Refreshing token via OAuth refresh endpoint...");const n=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({refresh_token:t})});if(n.ok){const s=await n.json();return console.log(" Token refreshed successfully via OAuth"),{accessToken:s.access_token,refreshToken:s.refresh_token||t}}else console.log("OAuth refresh failed:",n.status)}return console.log(" Attempting silent sign-in fallback..."),new Promise(r=>{if(typeof google>"u"||!google.accounts){console.log("Google API not loaded"),r(null);return}let n=!1;const s=setTimeout(()=>{n||(n=!0,console.log("Silent sign-in not available"),r(null))},5e3);google.accounts.id.initialize({client_id:_A,callback:i=>{!n&&i.credential&&(n=!0,clearTimeout(s),console.log(" Silent sign-in successful"),r({accessToken:i.credential}))},auto_select:!0,cancel_on_tap_outside:!0})})}catch(t){return console.error("Token refresh failed:",t),null}},r9=Object.freeze(Object.defineProperty({__proto__:null,GOOGLE_CLIENT_ID:_A,clearAuthState:l1,decodeJWT:nd,getTokenTimeRemaining:CA,isTokenExpiringSoon:bu,loadAuthState:o1,refreshGoogleToken:t9,saveAuthState:TA,shouldRefreshToken:c1},Symbol.toStringTag,{value:"Module"})),NA=C.createContext(void 0),Os=()=>{const e=C.useContext(NA);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},n9=({children:e})=>{const[t,r]=C.useState(()=>o1()),[n,s]=C.useState(!1),i=C.useCallback(h=>{try{const g=nd(h);if(!g||!g.email){console.error("Login failed: Invalid token or missing user info");return}const f={email:g.email,name:g.name,picture:g.picture,sub:g.sub};TA(f,h),r({user:f,accessToken:h,isAuthenticated:!0}),console.log("User logged in:",f.email)}catch(g){console.error("Login failed:",g)}},[]),l=C.useCallback(()=>{l1(),r({user:null,accessToken:null,isAuthenticated:!1}),console.log("User logged out")},[]),c=C.useCallback(async()=>{try{if(!t.accessToken)return console.log("No token to refresh"),!1;console.log(" Attempting token refresh...");const{refreshGoogleToken:h,decodeJWT:g,saveAuthState:f}=await lr(async()=>{const{refreshGoogleToken:b,decodeJWT:y,saveAuthState:k}=await Promise.resolve().then(()=>r9);return{refreshGoogleToken:b,decodeJWT:y,saveAuthState:k}},[]),x=await h(t.accessToken);if(x){const b=g(x.accessToken);if(b){const y={email:b.email,name:b.name,picture:b.picture,sub:b.sub};return f(y,x.accessToken,x.refreshToken),r({user:y,accessToken:x.accessToken,isAuthenticated:!0}),console.log(" Token refreshed successfully"),!0}}return console.log(" Token refresh not available (user may need to re-authenticate manually)"),!1}catch(h){return console.log(" Token refresh unavailable:",h instanceof Error?h.message:"Unknown error"),!1}},[t.accessToken]),d=C.useCallback(async()=>t.accessToken?bu(t.accessToken)?(console.log("Token expired, logging out"),l(),null):t.accessToken:null,[t.accessToken,l]);return C.useEffect(()=>{(async()=>{if(n||(s(!0),t.isAuthenticated))return;const g=o1();if(!g.accessToken||!g.user){console.log("No saved auth state found");return}console.log("Attempting auto-login for:",g.user.email),bu(g.accessToken)?(console.log("Saved token expired, clearing auth state"),l1()):(r(g),console.log("Auto-login successful with existing token"))})()},[n,t.isAuthenticated,i]),C.useEffect(()=>{if(!t.isAuthenticated||!t.accessToken)return;const h=t.accessToken;c1(h)?(console.log(" Token should be refreshed on mount (less than 15 min remaining)"),c().then(f=>{!f&&bu(h)&&(console.warn(" Token refresh failed and token expiring soon, logging out..."),l())})):bu(h)&&(console.warn(" Token critically close to expiring on mount, attempting refresh..."),c().then(f=>{f||(console.warn(" Critical token refresh failed on mount, logging out..."),l())}));const g=setInterval(async()=>{if(!t.accessToken)return;const f=t.accessToken;if(c1(f)){const x=CA(f),b=Math.floor(x/6e4);console.log(` Token expires in ${b} minutes, attempting proactive refresh...`);const y=await c();!y&&bu(f)?(console.warn(" Token expiring soon and refresh unavailable. Please re-authenticate."),l()):y||console.log(` Silent refresh not available, but token still valid for ${b} minutes`)}},120*1e3);return()=>clearInterval(g)},[t.isAuthenticated,t.accessToken,l,c]),a.jsx(NA.Provider,{value:{...t,login:i,logout:l,refreshToken:c,getToken:d},children:e})},AA=C.createContext(void 0),a9=({children:e})=>{const[t,r]=C.useState([]),[n,s]=C.useState(!1),i=d=>{s(!1),r(h=>{const g=h.findIndex(f=>f.query.toLowerCase()===d.query.toLowerCase());if(g>=0){const f=[...h];return f[g]=d,f}else return[...h,d]})},l=d=>{r(d)},c=()=>{s(!0),r([])};return a.jsx(AA.Provider,{value:{searchResults:t,addSearchResult:i,setSearchResults:l,clearSearchResults:c,wasCleared:n},children:e})},s9=()=>{const e=C.useContext(AA);if(e===void 0)throw new Error("useSearchResults must be used within a SearchResultsProvider");return e},u1=(e,t)=>t.some(r=>e instanceof r);let m_,x_;function i9(){return m_||(m_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o9(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d1=new WeakMap,ty=new WeakMap,rm=new WeakMap;function l9(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",l)},i=()=>{r(nc(e.result)),s()},l=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",l)});return rm.set(t,e),t}function c9(e){if(d1.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",l),e.removeEventListener("abort",l)},i=()=>{r(),s()},l=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",l),e.addEventListener("abort",l)});d1.set(e,t)}let h1={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return d1.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return nc(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function jA(e){h1=e(h1)}function u9(e){return o9().includes(e)?function(...t){return e.apply(g1(this),t),nc(this.request)}:function(...t){return nc(e.apply(g1(this),t))}}function d9(e){return typeof e=="function"?u9(e):(e instanceof IDBTransaction&&c9(e),u1(e,i9())?new Proxy(e,h1):e)}function nc(e){if(e instanceof IDBRequest)return l9(e);if(ty.has(e))return ty.get(e);const t=d9(e);return t!==e&&(ty.set(e,t),rm.set(t,e)),t}const g1=e=>rm.get(e);function h9(e,t,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const l=indexedDB.open(e,t),c=nc(l);return n&&l.addEventListener("upgradeneeded",d=>{n(nc(l.result),d.oldVersion,d.newVersion,nc(l.transaction),d)}),r&&l.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const g9=["get","getKey","getAll","getAllKeys","count"],p9=["put","add","delete","clear"],ry=new Map;function b_(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ry.get(t))return ry.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=p9.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||g9.includes(r)))return;const i=async function(l,...c){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),s&&d.done]))[0]};return ry.set(t,i),i}jA(e=>({...e,get:(t,r,n)=>b_(t,r)||e.get(t,r,n),has:(t,r)=>!!b_(t,r)||e.has(t,r)}));const f9=["continue","continuePrimaryKey","advance"],y_={},p1=new WeakMap,LA=new WeakMap,m9={get(e,t){if(!f9.includes(t))return e[t];let r=y_[t];return r||(r=y_[t]=function(...n){p1.set(this,LA.get(this)[t](...n))}),r}};async function*x9(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,m9);for(LA.set(r,t),rm.set(r,g1(t));t;)yield r,t=await(p1.get(r)||t.continue()),p1.delete(r)}function v_(e,t){return t===Symbol.asyncIterator&&u1(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&u1(e,[IDBIndex,IDBObjectStore])}jA(e=>({...e,get(t,r,n){return v_(t,r)?x9:e.get(t,r,n)},has(t,r){return v_(t,r)||e.has(t,r)}}));class b9{db=null;DB_NAME="youtube-playlist-db";DB_VERSION=1;async init(){if(!this.db)try{this.db=await h9(this.DB_NAME,this.DB_VERSION,{upgrade(t){if(t.objectStoreNames.contains("currentPlaylist")||t.createObjectStore("currentPlaylist",{keyPath:"id"}),!t.objectStoreNames.contains("savedPlaylists")){const r=t.createObjectStore("savedPlaylists",{keyPath:"id",autoIncrement:!0});r.createIndex("by-name","name",{unique:!1}),r.createIndex("by-date","createdAt",{unique:!1})}}}),await this.migrateFromLocalStorage()}catch(t){throw console.error("Failed to initialize playlist database:",t),t}}async migrateFromLocalStorage(){try{const t=localStorage.getItem("youtube_playlist"),r=localStorage.getItem("youtube_current_track");if(t){const n=JSON.parse(t),s=r?parseInt(r,10):null,i=await this.db.get("currentPlaylist","current");(!i||i.tracks.length===0)&&(await this.saveCurrentPlaylist(n,s),console.log(" Migrated playlist from localStorage to IndexedDB"))}}catch(t){console.error("Failed to migrate from localStorage:",t)}}async saveCurrentPlaylist(t,r){await this.init(),await this.db.put("currentPlaylist",{id:"current",tracks:t,currentIndex:r,isPlaying:!1,updatedAt:Date.now()})}async loadCurrentPlaylist(){await this.init();const t=await this.db.get("currentPlaylist","current");return t?{tracks:t.tracks||[],currentIndex:t.currentIndex}:{tracks:[],currentIndex:null}}async clearCurrentPlaylist(){await this.init(),await this.db.delete("currentPlaylist","current")}async savePlaylist(t,r){if(await this.init(),!t||t.trim().length===0)throw new Error("Playlist name cannot be empty");return await this.db.add("savedPlaylists",{id:0,name:t.trim(),tracks:r,createdAt:Date.now(),updatedAt:Date.now()})}async updatePlaylist(t,r,n){await this.init();const s=await this.db.get("savedPlaylists",t);if(!s)throw new Error("Playlist not found");await this.db.put("savedPlaylists",{...s,name:r.trim(),tracks:n,updatedAt:Date.now()})}async loadPlaylist(t){return await this.init(),(await this.db.get("savedPlaylists",t))?.tracks||[]}async getPlaylist(t){return await this.init(),await this.db.get("savedPlaylists",t)}async listPlaylists(){return await this.init(),(await this.db.getAll("savedPlaylists")).map(r=>({id:r.id,name:r.name,trackCount:r.tracks.length,createdAt:r.createdAt,updatedAt:r.updatedAt})).sort((r,n)=>n.updatedAt-r.updatedAt)}async deletePlaylist(t){await this.init(),await this.db.delete("savedPlaylists",t)}async playlistExists(t){return await this.init(),(await this.db.getAllFromIndex("savedPlaylists","by-name",t.trim())).length>0}async searchPlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=t.toLowerCase();return r.filter(s=>s.name.toLowerCase().includes(n)).map(s=>({id:s.id,name:s.name,trackCount:s.tracks.length,createdAt:s.createdAt,updatedAt:s.updatedAt})).sort((s,i)=>i.updatedAt-s.updatedAt)}async exportPlaylist(t){await this.init();const r=await this.db.get("savedPlaylists",t);if(!r)throw new Error("Playlist not found");return JSON.stringify({name:r.name,tracks:r.tracks,exportedAt:Date.now(),version:1},null,2)}async importPlaylist(t){await this.init();try{const r=JSON.parse(t);if(!r.name||!Array.isArray(r.tracks))throw new Error("Invalid playlist format");const n=r.tracks.filter(s=>s.videoId&&s.url&&s.title);if(n.length===0)throw new Error("No valid tracks found in playlist");return await this.savePlaylist(r.name,n)}catch(r){throw r instanceof SyntaxError?new Error("Invalid JSON format"):r}}async getStats(){await this.init();const t=await this.db.get("currentPlaylist","current"),r=await this.db.getAll("savedPlaylists"),n=r.reduce((s,i)=>s+i.tracks.length,0);return{currentPlaylistSize:t?.tracks.length||0,savedPlaylistCount:r.length,totalSavedTracks:n,databaseSize:await this.estimateSize()}}async estimateSize(){await this.init();try{if("estimate"in navigator.storage)return`~${(((await navigator.storage.estimate()).usage||0)/(1024*1024)).toFixed(2)} MB`}catch{}return"Unknown"}async exportAllPlaylists(){return await this.init(),await this.db.getAll("savedPlaylists")}async importAndMergePlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=new Map(r.map(i=>[i.name.toLowerCase(),i]));let s=0;for(const i of t){const l=i.name.toLowerCase(),c=n.get(l);c?i.updatedAt>c.updatedAt&&(await this.db.put("savedPlaylists",{id:c.id,name:i.name,tracks:i.tracks,createdAt:c.createdAt,updatedAt:i.updatedAt}),s++):(await this.db.add("savedPlaylists",{id:0,name:i.name,tracks:i.tracks,createdAt:i.createdAt,updatedAt:i.updatedAt}),s++)}return s}async getPlaylistsModifiedSince(t){return await this.init(),(await this.db.getAll("savedPlaylists")).filter(n=>n.updatedAt>t)}async getLastModified(){await this.init();const t=await this.db.getAll("savedPlaylists");return t.length===0?0:Math.max(...t.map(r=>r.updatedAt))}close(){this.db&&(this.db.close(),this.db=null)}}const xo=new b9,MA=C.createContext(void 0),bc=()=>{const e=C.useContext(MA);if(!e)throw new Error("usePlaylist must be used within PlaylistProvider");return e},y9=({children:e})=>{const[t,r]=C.useState([]),[n,s]=C.useState(null),[i,l]=C.useState(!1),[c,d]=C.useState([]),[h,g]=C.useState(!1),[f,x]=C.useState(!1),[b,y]=C.useState([]),[k,S]=C.useState("none"),[_,T]=C.useState(1),[N,I]=C.useState(1),[R,B]=C.useState("auto");C.useEffect(()=>{try{const ge=localStorage.getItem("playbackRate");ge&&T(parseFloat(ge));const Be=localStorage.getItem("volume");Be&&I(parseFloat(Be));const ht=localStorage.getItem("repeatMode");ht&&(ht==="none"||ht==="all"||ht==="one")&&S(ht);const ye=localStorage.getItem("shuffleMode");ye&&x(ye==="true");const ut=localStorage.getItem("videoQuality");ut&&B(ut)}catch(ge){console.error("Failed to load preferences:",ge)}},[]),C.useEffect(()=>{(async()=>{try{const{tracks:Be,currentIndex:ht}=await xo.loadCurrentPlaylist();r(Be),s(ht),g(!0)}catch(Be){console.error("Failed to load playlist:",Be),g(!0)}})()},[]),C.useEffect(()=>{H()},[]),C.useEffect(()=>{if(!h)return;const ge=async()=>{try{await xo.saveCurrentPlaylist(t,n)}catch(ht){console.error("Failed to save playlist:",ht)}},Be=setTimeout(()=>{ge()},500);return()=>clearTimeout(Be)},[t,n,h]);const F=C.useCallback(ge=>{const Be={...ge,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()};r(ht=>[...ht,Be])},[]),ae=C.useCallback(ge=>{r(Be=>{const ht=[],ye=new Set(Be.map(Ze=>Ze.videoId)),ut=new Set;return ge.forEach((Ze,kt)=>{ye.has(Ze.videoId)||ut.has(Ze.videoId)||(ut.add(Ze.videoId),ht.push({...Ze,id:`${Date.now()}-${kt}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()}))}),[...ht,...Be].slice(0,500)})},[]),G=C.useCallback(ge=>{r(Be=>{const ht=[],ye=[],ut=[],Et=new Set;ge.forEach((Rt,ur)=>{if(Et.has(Rt.videoId))return;Et.add(Rt.videoId);const yt=Be.findIndex(bt=>bt.videoId===Rt.videoId);yt!==-1?ht.push({...Be[yt],addedAt:Date.now()}):ye.push({...Rt,id:`${Date.now()}-${ur}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()})}),Be.forEach(Rt=>{Et.has(Rt.videoId)||ut.push(Rt)});const kt=[...ht,...ye,...ut].slice(0,500);if(n!==null&&Be[n]){const Rt=Be[n].videoId,ur=kt.findIndex(yt=>yt.videoId===Rt);ur!==-1?s(ur):(s(null),l(!1))}return kt})},[n]),$=C.useCallback(ge=>{r(Be=>{const ht=Be.findIndex(ye=>ye.id===ge);return ht===-1?Be:(n!==null&&(ht===n?(l(!1),s(null)):ht<n&&s(n-1)),Be.filter(ye=>ye.id!==ge))})},[n]),J=C.useCallback(()=>{r([]),s(null),l(!1)},[]),ee=C.useCallback(ge=>{ge>=0&&ge<t.length&&(s(ge),l(!0))},[t.length]),W=C.useCallback(()=>{const ge=t.map((Be,ht)=>ht);n!==null&&ge.splice(ge.indexOf(n),1);for(let Be=ge.length-1;Be>0;Be--){const ht=Math.floor(Math.random()*(Be+1));[ge[Be],ge[ht]]=[ge[ht],ge[Be]]}return n!==null&&ge.unshift(n),ge},[t,n]);C.useEffect(()=>{f&&y(W())},[f,t,W]);const j=C.useCallback(()=>{if(t.length===0)return;if(n===null){s(0),l(!0);return}if(k==="one"){l(!0);return}const ge=f?b:t.map((ht,ye)=>ye),Be=ge.indexOf(n);Be<ge.length-1?(s(ge[Be+1]),l(!0)):k==="all"?(s(ge[0]),l(!0)):l(!1)},[t,n,f,b,k]),U=C.useCallback(()=>{if(t.length===0)return;if(n===null){s(t.length-1),l(!0);return}const ge=f?b:t.map((ht,ye)=>ye),Be=ge.indexOf(n);Be>0?(s(ge[Be-1]),l(!0)):(s(ge[ge.length-1]),l(!0))},[t,n,f,b]),O=C.useCallback(()=>{t.length!==0&&(n===null?(s(0),l(!0)):l(ge=>!ge))},[t.length,n]),q=C.useCallback(()=>{t.length!==0&&(n===null&&s(0),l(!0))},[t.length,n]),V=C.useCallback(()=>{l(!1)},[]),ue=C.useCallback(ge=>{const Be=t.findIndex(ht=>ht.videoId===ge);return Be!==-1?(s(Be),l(!0),!0):!1},[t]),H=C.useCallback(async()=>{try{const ge=await xo.listPlaylists();d(ge)}catch(ge){console.error("Failed to load saved playlists:",ge)}},[]),D=C.useCallback(async ge=>{try{await xo.savePlaylist(ge,t),await H()}catch(Be){throw console.error("Failed to save playlist:",Be),Be}},[t,H]),z=C.useCallback(async ge=>{try{const Be=await xo.loadPlaylist(ge);r(Be),s(null),l(!1)}catch(Be){throw console.error("Failed to load playlist:",Be),Be}},[]),M=C.useCallback(async ge=>{try{await xo.deletePlaylist(ge),await H()}catch(Be){throw console.error("Failed to delete playlist:",Be),Be}},[H]),le=C.useCallback(()=>{const ge=!f;x(ge),localStorage.setItem("shuffleMode",String(ge)),ge&&y(W())},[f,W]),me=C.useCallback(ge=>{S(ge),localStorage.setItem("repeatMode",ge)},[]),Ee=C.useCallback(ge=>{T(ge),localStorage.setItem("playbackRate",String(ge))},[]),Ae=C.useCallback(ge=>{I(ge),localStorage.setItem("volume",String(ge))},[]),ve=C.useCallback(ge=>{B(ge),localStorage.setItem("videoQuality",ge)},[]),Pe=n!==null&&t[n]?t[n]:null;return a.jsx(MA.Provider,{value:{playlist:t,currentTrackIndex:n,isPlaying:i,addTrack:F,addTracks:ae,addTracksToStart:G,removeTrack:$,clearPlaylist:J,playTrack:ee,playTrackByVideoId:ue,nextTrack:j,previousTrack:U,togglePlayPause:O,play:q,pause:V,currentTrack:Pe,savedPlaylists:c,savePlaylistAs:D,loadPlaylist:z,deletePlaylist:M,refreshSavedPlaylists:H,shuffleMode:f,toggleShuffle:le,repeatMode:k,setRepeatMode:me,playbackRate:_,setPlaybackRate:Ee,volume:N,setVolume:Ae,videoQuality:R,setVideoQuality:ve},children:e})},OA=C.createContext(void 0),RA=()=>{const e=C.useContext(OA);if(!e)throw new Error("usePlayer must be used within PlayerProvider");return e},v9=({children:e})=>{const t=C.useRef(null),{isPlaying:r,currentTrack:n,play:s,pause:i}=bc(),[l,c]=C.useState(!1),[d,h]=C.useState(0),[g,f]=C.useState(0),x=C.useCallback(N=>{console.log("[PlayerContext] Registering player:",N),t.current=N},[]),b=C.useCallback(()=>{console.log("[PlayerContext] Unregistering player"),t.current=null},[]),y=C.useCallback(()=>{t.current?(console.log("[PlayerContext] Playing video via ref"),s()):(console.warn("[PlayerContext] Cannot play - no player registered"),s())},[s]),k=C.useCallback(()=>{t.current?(console.log("[PlayerContext] Pausing video via ref"),i()):(console.warn("[PlayerContext] Cannot pause - no player registered"),i())},[i]),S=C.useCallback(N=>{t.current&&t.current.seekTo?(console.log("[PlayerContext] Seeking to:",N),t.current.seekTo(N,"seconds")):console.warn("[PlayerContext] Cannot seek - no player registered")},[]),_=C.useCallback(()=>t.current&&t.current.getCurrentTime?t.current.getCurrentTime():0,[]),T=C.useCallback(()=>t.current&&t.current.getDuration?t.current.getDuration():0,[]);return C.useEffect(()=>{t.current&&console.log("[PlayerContext] Syncing player state - isPlaying:",r,"currentTrack:",n?.title)},[r,n]),a.jsx(OA.Provider,{value:{playerRef:t,registerPlayer:x,unregisterPlayer:b,playVideo:y,pauseVideo:k,seekTo:S,getCurrentTime:_,getDuration:T,isLoading:l,setIsLoading:c,currentTime:d,duration:g,setCurrentTime:h,setDuration:f},children:e})},k9="lambdallmproxy",w9=1,Ys="app_data",du=5*1024*1024,oh=250*1024*1024;class Yl extends Error{code;estimatedSize;limit;constructor(t,r,n,s){super(t),this.name="StorageError",this.code=r,this.estimatedSize=n,this.limit=s}}class S9{db=null;initPromise=null;useIndexedDB=!0;async initDB(){return this.initPromise?this.initPromise:(this.initPromise=new Promise(t=>{if(!window.indexedDB){console.warn("IndexedDB not supported, falling back to localStorage"),this.useIndexedDB=!1,t();return}const r=indexedDB.open(k9,w9);r.onerror=()=>{console.error("IndexedDB error:",r.error),this.useIndexedDB=!1,t()},r.onsuccess=()=>{this.db=r.result,this.useIndexedDB=!0,t()},r.onupgradeneeded=n=>{const s=n.target.result;s.objectStoreNames.contains(Ys)||s.createObjectStore(Ys)}}),this.initPromise)}getDataSize(t){try{return new Blob([JSON.stringify(t)]).size}catch{return JSON.stringify(t).length*2}}async getItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{return await this.getFromIndexedDB(t)}catch(r){console.warn("IndexedDB read failed, trying localStorage:",r)}try{const r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.error("Failed to read from localStorage:",r),null}}async setItem(t,r){await this.initDB();const n=this.getDataSize(r);if(this.useIndexedDB&&this.db)try{if(n>oh)throw new Yl(`Data size (${this.formatBytes(n)}) exceeds IndexedDB limit (${this.formatBytes(oh)}). Consider reducing the amount of stored data.`,"QUOTA_EXCEEDED",n,oh);await this.setToIndexedDB(t,r);return}catch(s){if(s instanceof Yl)throw s;console.warn("IndexedDB write failed, trying localStorage:",s),this.useIndexedDB=!1}try{if(n>du)throw new Yl(`Data size (${this.formatBytes(n)}) exceeds localStorage limit (${this.formatBytes(du)}). Try using fewer or smaller snippets, or clear old data.`,"QUOTA_EXCEEDED",n,du);localStorage.setItem(t,JSON.stringify(r))}catch(s){throw s instanceof Yl?s:s instanceof DOMException&&(s.name==="QuotaExceededError"||s.code===22)?new Yl(`Storage quota exceeded (${this.formatBytes(n)}). Please delete some snippets to free up space.`,"QUOTA_EXCEEDED",n,du):new Yl(`Failed to save data: ${s instanceof Error?s.message:"Unknown error"}`,"UNKNOWN")}}async removeItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.removeFromIndexedDB(t)}catch(r){console.warn("Failed to remove from IndexedDB:",r)}try{localStorage.removeItem(t)}catch(r){console.warn("Failed to remove from localStorage:",r)}}async clear(){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.clearIndexedDB()}catch(t){console.warn("Failed to clear IndexedDB:",t)}try{localStorage.clear()}catch(t){console.warn("Failed to clear localStorage:",t)}}async getStats(){await this.initDB();const t=[];let r=0;if(this.useIndexedDB&&this.db){const n=await this.getAllKeysFromIndexedDB();for(const s of n){const i=await this.getFromIndexedDB(s);t.push(s),r+=this.getDataSize(i)}return{type:"indexeddb",keys:t,totalSize:r,limit:oh,percentUsed:r/oh*100}}else{for(let n=0;n<localStorage.length;n++){const s=localStorage.key(n);if(s){t.push(s);const i=localStorage.getItem(s);i&&(r+=this.getDataSize(i))}}return{type:"localstorage",keys:t,totalSize:r,limit:du,percentUsed:r/du*100}}}getFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const l=this.db.transaction([Ys],"readonly").objectStore(Ys).get(t);l.onsuccess=()=>{r(l.result??null)},l.onerror=()=>{n(l.error)}})}setToIndexedDB(t,r){return new Promise((n,s)=>{if(!this.db){s(new Error("Database not initialized"));return}const c=this.db.transaction([Ys],"readwrite").objectStore(Ys).put(r,t);c.onsuccess=()=>{n()},c.onerror=()=>{s(c.error)}})}removeFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const l=this.db.transaction([Ys],"readwrite").objectStore(Ys).delete(t);l.onsuccess=()=>{r()},l.onerror=()=>{n(l.error)}})}clearIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Ys],"readwrite").objectStore(Ys).clear();i.onsuccess=()=>{t()},i.onerror=()=>{r(i.error)}})}getAllKeysFromIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Ys],"readonly").objectStore(Ys).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{r(i.error)}})}formatBytes(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}}const ny=new S9,IA=C.createContext(void 0),$i=()=>{const e=C.useContext(IA);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},E9=({children:e})=>{const[t,r]=C.useState([]),n=C.useCallback(x=>{r(b=>b.filter(y=>y.id!==x))},[]),s=C.useCallback(()=>{r([])},[]),i=C.useCallback((x,b="info",y=5e3)=>{const k=`toast-${Date.now()}-${Math.random()}`,S={id:k,message:x,type:b,duration:y};r(_=>[..._,S]),y>0&&setTimeout(()=>n(k),y)},[n]),l=C.useCallback(x=>i(x,"error",7e3),[i]),c=C.useCallback(x=>i(x,"success",3e3),[i]),d=C.useCallback(x=>i(x,"warning",5e3),[i]),h=C.useCallback(x=>i(x,"info",4e3),[i]),g=x=>`flex items-start gap-3 p-4 rounded-lg shadow-lg border backdrop-blur-sm transition-all duration-300 animate-slide-in ${{success:"bg-green-50/95 dark:bg-green-900/95 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50/95 dark:bg-red-900/95 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50/95 dark:bg-yellow-900/95 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50/95 dark:bg-blue-900/95 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"}[x]}`,f=x=>({success:"",error:"",warning:"",info:""})[x];return a.jsxs(IA.Provider,{value:{showToast:i,showError:l,showSuccess:c,showWarning:d,showInfo:h,clearAllToasts:s},children:[e,a.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:t.map(x=>a.jsxs("div",{className:g(x.type),children:[a.jsx("span",{className:"text-xl font-bold",children:f(x.type)}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-sm font-medium",children:x.message})}),a.jsx("button",{onClick:()=>n(x.id),className:"text-current opacity-50 hover:opacity-100 transition-opacity",children:""})]},x.id))}),a.jsx("style",{children:`
        @keyframes slide-in {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in {
          animation: slide-in 0.3s ease-out;
        }
      `})]})};function k_(e){const t=[],r=e.split(`
`);let n={};for(const s of r)if(s.startsWith("event:"))n.event=s.substring(6).trim();else if(s.startsWith("data:"))n.data=s.substring(5).trim();else if(s===""&&n.event&&n.data){try{const i=JSON.parse(n.data);t.push({event:n.event,data:i})}catch(i){console.error("Failed to parse SSE data:",n.data,i)}n={}}return t}async function DA(e,t,r,n){if(!e.body)throw new Error("Response body is null");const s=e.body.getReader(),i=new TextDecoder;let l="";try{for(;;){const{done:c,value:d}=await s.read();if(c){l.trim()&&k_(l).forEach(f=>t(f.event,f.data)),r&&r();break}l+=i.decode(d,{stream:!0});const h=l.split(`

`);l=h.pop()||"";for(const g of h)g.trim()&&k_(g+`

`).forEach(x=>t(x.event,x.data))}}catch(c){console.error("SSE stream error:",c),n&&n(c instanceof Error?c:new Error("Stream error"))}}async function PA(e,t,r,n,s,i=3,l=1e3,c){const h={"Content-Type":"application/json",Authorization:`Bearer ${r.trim().replace(/[\r\n]/g,"")}`,Accept:"text/event-stream"};c&&(h["X-Request-Id"]=c,console.log(" Using request ID for log grouping:",c)),s&&(h["X-YouTube-Token"]=s);const g=["google_access_token","gapi_access_token","google_drive_access_token"];let f=null,x="none";for(const _ of g){const T=localStorage.getItem(_);if(T){f=T.trim().replace(/[\r\n]/g,""),x=_;break}}const b=localStorage.getItem("google_refresh_token");console.log(" Drive token check:",{hasDriveToken:!!f,hasRefreshToken:!!b,tokenLength:f?.length||0,source:x,availableKeys:g.filter(_=>!!localStorage.getItem(_))}),f?(h["X-Google-Access-Token"]=f,console.log(` Including Drive access token for Google Sheets operations (source: ${x})`)):(console.log(" No Drive access token available - snippet management will not work"),console.log("   Checked keys:",g)),b&&(h["X-Google-Refresh-Token"]=b.trim().replace(/[\r\n]/g,""),console.log(" Including Google refresh token for automatic token refresh"));let y=null;for(let _=0;_<i;_++)try{console.log(` SSE Request attempt ${_+1}/${i}:`,{url:e,method:"POST",hasToken:!!r,hasYoutubeToken:!!s,bodyKeys:t?Object.keys(t):[]});const T=await fetch(e,{method:"POST",headers:h,body:JSON.stringify(t),signal:n});if(console.log(" SSE Response received:",{status:T.status,statusText:T.statusText,ok:T.ok,headers:Object.fromEntries(T.headers.entries())}),!T.ok){if(T.status===429&&_<i-1){const N=T.headers.get("Retry-After");let I;if(N){const R=parseInt(N);if(!isNaN(R))I=R*1e3;else{const B=new Date(N);isNaN(B.getTime())?I=l*Math.pow(2,_):I=Math.max(0,B.getTime()-Date.now())}}else I=l*Math.pow(2,_);console.warn(` Rate limited (429), retrying in ${(I/1e3).toFixed(1)}s... (attempt ${_+1}/${i})`),await new Promise(R=>setTimeout(R,I));continue}throw new Error(`Request failed: ${T.status} ${T.statusText}`)}return T}catch(T){if(y=T,console.error(` SSE Request failed (attempt ${_+1}/${i}):`,{error:T instanceof Error?T.message:String(T),errorName:T instanceof Error?T.name:"Unknown",stack:T instanceof Error?T.stack:void 0,url:e,attempt:_+1,maxRetries:i}),n?.aborted)throw console.log(" Request aborted by user"),new Error("Request aborted by user");if(_>=i-1){console.error(" Max retries reached, giving up");break}const N=l*Math.pow(2,_);console.warn(` Request failed, retrying in ${(N/1e3).toFixed(1)}s... (attempt ${_+1}/${i})`,T),await new Promise(I=>setTimeout(I,N))}const k=e.includes("localhost")||e.includes("127.0.0.1"),S=y?.message||"Unknown error";throw k&&(S.includes("fetch")||S.includes("ECONNREFUSED")||S.includes("NetworkError"))?new Error(" Dev server not running. Please start your dev server with `make dev` or `npm run dev`"):S.includes("fetch")||S.includes("NetworkError")?new Error(" Lambda API error: Cannot connect to server. Please check your internet connection or try again later."):y||new Error(`Request failed after ${i} attempts`)}const _9="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log(" API Module Loading - Version: 2024-10-22-DYNAMIC-HOSTNAME");function T9(){const e=window.location.protocol,t=window.location.hostname,r="3000";console.log(" getLocalLambdaUrl() called:",{protocol:e,hostname:t,port:r});const n=`${e}//${t}:${r}`;return console.log(" getLocalLambdaUrl() returning:",n),n}console.log(" API Configuration:",{hostname:window.location.hostname,remote:_9,local:T9(),source:"env"});async function C9(){return console.log(" Using VITE_API_BASE:","https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"),"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}let jh=null,Lh=null,lh=null;async function Ca(){return lh&&lh!==window.location.hostname&&(console.log(` Hostname changed from ${lh} to ${window.location.hostname}, clearing API cache`),jh=null,Lh=null,lh=null),jh||(Lh||(lh=window.location.hostname,Lh=C9().then(e=>(jh=e,e))),Lh)}function BA(){jh=null,Lh=null,console.log(" API base cache reset")}const f1=async(e,t,r,n,s,i,l,c)=>{const d=await Ca(),h=r.filter(b=>b.enabled!==!1),g={};h.forEach(b=>{const{type:y,enabled:k,...S}=b;g[y]=S});const f={query:e,providers:g};c?.temperature!==void 0&&(f.temperature=c.temperature),c?.maxTokens!==void 0&&(f.max_tokens=c.maxTokens),c?.reasoningDepth!==void 0&&(f.reasoning_depth=c.reasoningDepth),c?.clarificationAnswers&&(f.clarificationAnswers=c.clarificationAnswers),c?.previousContext&&(f.previousContext=c.previousContext),c?.forcePlan&&(f.forcePlan=!0),c?.language&&(f.language=c.language);const x=await PA(`${d}/planning`,f,t,c?.signal);await DA(x,s,i,l)},m1=async(e,t,r,n,s,i,l,c)=>{const d=await Ca(),h=await PA(`${d}/chat`,e,t,i,l,3,1e3,c);await DA(h,r,n,s)},FA=async(e,t,r,n,s,i,l,c,d)=>{const h=await Ca(),g={prompt:e,provider:t,model:r,modelKey:n,size:s,quality:i,style:l,accessToken:c,...d||{}};try{const f=await fetch(`${h}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g),credentials:"include"}),x=await f.json();return f.ok?x:{success:!1,error:x.error||`HTTP ${f.status}: ${f.statusText}`}}catch(f){return console.error("Image generation request failed:",f),{success:!1,error:f.message||"Failed to generate image"}}},$A=async(e,t)=>{const r=await Ca();try{const n=await fetch(`${r}/paypal/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({amount:e}),credentials:"include"}),s=await n.json();return n.ok?{success:!0,orderId:s.orderId}:{success:!1,error:s.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order creation failed:",n),{success:!1,error:n.message||"Failed to create PayPal order"}}},UA=async(e,t)=>{const r=await Ca();try{const n=await fetch(`${r}/paypal/capture-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({orderId:e}),credentials:"include"}),s=await n.json();return n.ok?{success:!0,creditsAdded:s.creditsAdded,newBalance:s.newBalance}:{success:!1,error:s.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order capture failed:",n),{success:!1,error:n.message||"Failed to capture PayPal order"}}},N9=Object.freeze(Object.defineProperty({__proto__:null,capturePayPalOrder:UA,createPayPalOrder:$A,generateImage:FA,generatePlan:f1,getCachedApiBase:Ca,resetApiBase:BA,sendChatMessageStreaming:m1},Symbol.toStringTag,{value:"Module"}));class A9{config=null;status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0};syncQueue=[];syncInterval=null;apiUrl=null;eventCallbacks={onStart:[],onComplete:[],onError:[]};constructor(){this.initializeApiUrl(),this.initializeDeviceId(),this.loadQueueFromStorage()}async initializeApiUrl(){this.apiUrl=await Ca()}async getApiUrl(){return this.apiUrl?this.apiUrl:(await this.initializeApiUrl(),this.apiUrl)}initializeDeviceId(){let t=localStorage.getItem("rag_device_id");t||(t=`device-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("rag_device_id",t))}getDeviceId(){return localStorage.getItem("rag_device_id")||"unknown"}async initialize(t){this.config={...t,deviceId:this.getDeviceId()},localStorage.setItem("rag_sync_config",JSON.stringify(this.config)),console.log(" RAG Sync Service initialized:",this.config),t.autoSync&&this.startAutoSync()}getStatus(){return{...this.status}}async pushSnippets(t,r){if(!this.config)throw new Error("Sync service not initialized");try{console.log(` Pushing ${t.length} snippets to Sheets...`);const n=await this.getApiUrl(),s=await fetch(`${n}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"push-snippets",userEmail:r,deviceId:this.config.deviceId,data:t})});if(!s.ok){const l=await s.json();throw new Error(l.error||"Failed to push snippets")}const i=await s.json();console.log(` Pushed ${i.count||t.length} snippets`)}catch(n){throw console.error(" Error pushing snippets:",n),n}}async pullSnippets(t){if(!this.config)throw new Error("Sync service not initialized");try{console.log(" Pulling snippets from Sheets...");const r=await this.getApiUrl(),n=await fetch(`${r}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"pull-snippets",userEmail:t,deviceId:this.config.deviceId})});if(!n.ok){const l=await n.json();throw new Error(l.error||"Failed to pull snippets")}const i=(await n.json()).snippets||[];return console.log(` Pulled ${i.length} snippets`),i}catch(r){throw console.error(" Error pulling snippets:",r),r}}async fullSync(t,r){if(!this.config)throw new Error("Sync service not initialized");this.status.inProgress=!0,this.notifyStart();const n={snippetsPushed:0,snippetsPulled:0,embeddingsPushed:0,embeddingsPulled:0,conflicts:0,errors:[]};try{console.log(" Starting full sync...");const s=await this.pullSnippets(t),{toUpload:i,toDownload:l,conflicts:c}=this.mergeSnippets(r,s);return n.conflicts=c.length,this.status.conflictsResolved+=c.length,i.length>0&&(await this.pushSnippets(i,t),n.snippetsPushed=i.length),n.snippetsPulled=l.length,this.status.lastSync=Date.now(),this.status.lastError=null,localStorage.setItem("rag_last_sync",this.status.lastSync.toString()),console.log(" Full sync complete:",n),this.notifyComplete(n),n}catch(s){throw console.error(" Full sync failed:",s),this.status.lastError=s.message,n.errors.push(s.message),this.notifyError(s),s}finally{this.status.inProgress=!1}}mergeSnippets(t,r){const n=new Map(t.map(d=>[d.id,d])),s=new Map(r.map(d=>[d.id,d])),i=[],l=[],c=[];for(const d of t){const h=s.get(d.id);if(!h)i.push(d);else{const g=d.updateDate||d.timestamp,f=h.updateDate||h.timestamp;g>f?i.push(d):f>g&&l.push(h)}}for(const d of r)n.has(d.id)||l.push(d);return console.log(` Merge result: ${i.length} to upload, ${l.length} to download, ${c.length} conflicts`),{toUpload:i,toDownload:l,conflicts:c}}queueSync(t){const r={...t,timestamp:Date.now()};this.syncQueue.push(r),this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queued ${t.type} operation (${this.syncQueue.length} pending)`),this.config?.autoSync&&!this.status.inProgress&&setTimeout(()=>{this.syncQueue.length>0&&!this.status.inProgress&&this.processSyncQueue().catch(console.error)},2e3)}async processSyncQueue(){if(!(!this.config||this.syncQueue.length===0)){console.log(` Processing ${this.syncQueue.length} queued operations...`),this.status.inProgress=!0;try{const t=this.syncQueue.filter(r=>r.type==="push-snippet");if(t.length>0){const r=t.map(s=>s.data),n=t[0].userEmail;await this.pushSnippets(r,n),this.syncQueue=this.syncQueue.filter(s=>s.type!=="push-snippet")}this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queue processed, ${this.syncQueue.length} remaining`)}catch(t){console.error(" Error processing queue:",t)}finally{this.status.inProgress=!1}}}startAutoSync(){if(!this.syncInterval){if(!this.config){console.warn("Cannot start auto-sync: service not initialized");return}console.log(` Starting auto-sync (interval: ${this.config.syncInterval}ms)`),this.syncInterval=setInterval(()=>{!this.status.inProgress&&this.syncQueue.length>0&&this.processSyncQueue().catch(console.error)},this.config.syncInterval)}}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log(" Auto-sync stopped"))}saveQueueToStorage(){try{localStorage.setItem("rag_sync_queue",JSON.stringify(this.syncQueue))}catch(t){console.error("Failed to save sync queue:",t)}}loadQueueFromStorage(){try{const t=localStorage.getItem("rag_sync_queue");t&&(this.syncQueue=JSON.parse(t),this.status.pendingChanges=this.syncQueue.length,console.log(` Loaded ${this.syncQueue.length} queued operations from storage`))}catch(t){console.error("Failed to load sync queue:",t)}}async pushEmbeddings(t,r){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const n=localStorage.getItem("rag_spreadsheet_id");if(!n)throw new Error("No spreadsheet ID found. User may not be logged in.");let s=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!s)throw new Error("Not authenticated");const i=100,l=Math.ceil(t.length/i);for(let c=0;c<l;c++){const d=t.slice(c*i,(c+1)*i);r&&r(Math.min((c+1)*i,t.length),t.length);const h=await this.getApiUrl(),g=await fetch(`${h}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({operation:"push",spreadsheetId:n,chunks:d})});if(!g.ok)throw new Error(`Failed to push embeddings: ${g.status}`)}console.log(` Pushed ${t.length} chunks to Google Sheets`)}catch(n){throw console.error("Failed to push embeddings:",n),n}}async pullEmbeddings(t){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const r=localStorage.getItem("rag_spreadsheet_id");if(!r)throw new Error("No spreadsheet ID found. User may not be logged in.");let n=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!n)throw new Error("Not authenticated");const s=await this.getApiUrl(),i=await fetch(`${s}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({operation:"pull",spreadsheetId:r,snippetIds:t})});if(!i.ok)throw new Error(`Failed to pull embeddings: ${i.status}`);const{chunks:l}=await i.json();return console.log(` Pulled ${l?.length||0} chunks from Google Sheets`),l||[]}catch(r){throw console.error("Failed to pull embeddings:",r),r}}onSyncStart(t){this.eventCallbacks.onStart.push(t)}onSyncComplete(t){this.eventCallbacks.onComplete.push(t)}onSyncError(t){this.eventCallbacks.onError.push(t)}notifyStart(){this.eventCallbacks.onStart.forEach(t=>t())}notifyComplete(t){this.eventCallbacks.onComplete.forEach(r=>r(t))}notifyError(t){this.eventCallbacks.onError.forEach(r=>r(void 0,t))}clear(){this.syncQueue=[],this.status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0},localStorage.removeItem("rag_sync_queue"),localStorage.removeItem("rag_last_sync"),console.log(" Sync service cleared")}}const Ea=new A9;let Xl=null,ay=null,w_=0;function S_(e){const t=window.google;if(!t?.accounts?.oauth2){console.warn(" Google Identity Services not loaded - include GIS script in index.html");return}if(Xl){console.log(" Google Identity already initialized");return}try{Xl=t.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/drive.file",callback:()=>{console.log(" Token response received")}}),console.log(" Google Identity Services initialized")}catch(r){console.error(" Failed to initialize Google Identity Services:",r)}}function j9(){return Xl!==null}async function Vv(e){if(!Xl)throw new Error("Google Identity Services not initialized. Call initGoogleIdentity() first.");const t=Date.now();return ay&&w_>t+6e4?(console.log(" Using cached access token"),ay):new Promise((r,n)=>{if(!Xl)return n(new Error("Token client not initialized"));Xl.callback=s=>{if("error"in s)return console.error(" OAuth error:",s.error),n(new Error(`OAuth error: ${s.error}`));if(!s.access_token)return n(new Error("No access token received"));ay=s.access_token,w_=Date.now()+s.expires_in*1e3,console.log(" Access token obtained (expires in",s.expires_in,"seconds)"),r(s.access_token)},Xl.requestAccessToken(e)})}async function L9(e,t,r){if(!e)throw new Error("Spreadsheet ID is required");if(!r||r.length===0)throw new Error("No values to append");const n=await Vv(),s=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}:append?valueInputOption=RAW`,i={values:r};console.log(` Appending ${r.length} rows to sheet: ${t}`);const l=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok){const d=await l.text();throw console.error(" Sheets API error:",{status:l.status,statusText:l.statusText,body:d}),new Error(`Sheets API error: ${l.status} ${l.statusText}. ${d}`)}const c=await l.json();return console.log(` Appended ${c.updates.updatedRows} rows to Google Sheets`),c}async function M9(e,t){const r=await Vv(),n=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}`,s=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!s.ok){const l=await s.text();throw new Error(`Sheets API error: ${s.status} ${s.statusText}. ${l}`)}return(await s.json()).values||[]}function O9(e){return e.map(t=>[t.id||"",t.snippet_id||"",t.snippet_name||"",t.chunk_text||"",JSON.stringify(t.embedding||[]),t.chunk_index??0,t.embedding_model||"",t.embedding_provider||"",t.embedding_dimensions||0,t.source_type||"text",t.created_at||new Date().toISOString()])}function js(e,t){const[r,n]=C.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return[r,i=>{try{n(l=>{const c=i instanceof Function?i(l):i;try{window.localStorage.setItem(e,JSON.stringify(c))}catch(d){if(d?.name==="QuotaExceededError"){console.warn(`localStorage quota exceeded for key "${e}". Attempting cleanup...`);try{const h=R9("chat_history_");if(h.length>5){const g=h.sort().slice(0,h.length-5);g.forEach(f=>window.localStorage.removeItem(f)),console.log(`Removed ${g.length} old chat history items`)}window.localStorage.setItem(e,JSON.stringify(c)),console.log("Successfully saved after cleanup")}catch(h){if(console.error("Failed to save even after cleanup:",h),e==="app_settings"){const g={version:c.version,providers:[],tavilyApiKey:""};window.localStorage.setItem(e,JSON.stringify(g)),console.warn("Saved minimal settings due to quota")}}}else throw d}return c})}catch(l){console.error(`Error saving localStorage key "${e}":`,l)}}]}function R9(e){try{return Object.keys(localStorage).filter(t=>t.startsWith(e))}catch(t){return console.error("Error getting localStorage keys:",t),[]}}const zA={groq:"https://api.groq.com/openai/v1",openai:"https://api.openai.com/v1",gemini:"https://generativelanguage.googleapis.com/v1beta",together:"https://api.together.xyz/v1",replicate:"https://api.replicate.com/v1",atlascloud:"https://api.atlascloud.ai/v1"},x1={groq:{name:"Groq",icon:"",description:"Fast inference with LLaMA and Mixtral models"},openai:{name:"OpenAI",icon:"",description:"GPT-4, GPT-4o, and other OpenAI models"},gemini:{name:"Google Gemini",icon:"",description:"Google's Gemini models"},together:{name:"Together AI",icon:"",description:"Open source models including FLUX image generation"},replicate:{name:"Replicate",icon:"",description:"Run ML models via API"},atlascloud:{name:"Atlas Cloud",icon:"",description:"API marketplace for various LLM models"},"openai-compatible":{name:"OpenAI Compatible (Custom)",icon:"",description:"Custom endpoint with OpenAI-compatible API"}},Pf="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",b1="https://www.googleapis.com/auth/drive.file";let il=null,Ks=null;const i0="google_access_token";Ks=localStorage.getItem(i0);const HA=()=>new Promise((e,t)=>{if(console.log(" Initializing Google Auth..."),console.log(" Client ID configured:","YES"),console.log(" Client ID value:",Pf.substring(0,20)+"..."),typeof google<"u"&&google.accounts){console.log(" Google Identity Services already loaded"),il||(il=google.accounts.oauth2.initTokenClient({client_id:Pf,scope:b1,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const s=n.access_token.trim().replace(/[\r\n]/g,"");if(Ks=s,localStorage.setItem(i0,s),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log(" Access token received and stored:",s.substring(0,20)+"..."),e(s)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}})),e(il);return}console.log(" Loading Google Identity Services library...");const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{console.log(" Google Identity Services library loaded"),il=google.accounts.oauth2.initTokenClient({client_id:Pf,scope:b1,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const s=n.access_token.trim().replace(/[\r\n]/g,"");if(Ks=s,localStorage.setItem(i0,s),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log(" Access token received and stored:",s.substring(0,20)+"..."),e(s)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}}),console.log(" Token client initialized"),e(il)},r.onerror=()=>{console.error(" Failed to load Google Identity Services library"),t(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)}),pi=async()=>{if(console.log(" Requesting Google Auth..."),console.log(" Current token:",Ks?Ks.substring(0,20)+"...":"NONE"),Ks){console.log(" Validating existing token...");try{if((await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:"Bearer "+Ks}})).ok)return console.log(" Token is still valid"),Ks;console.warn(" Token invalid, clearing..."),Ks=null}catch(e){console.error(" Token validation failed:",e),Ks=null}}return il||(console.log(" Token client not initialized, initializing..."),await HA()),new Promise((e,t)=>{try{console.log(" Setting up token callback..."),il.callback=r=>{if(console.log(" Token callback triggered:",{hasToken:!!r.access_token,error:r.error,errorDescription:r.error_description}),r.error){const n="Authentication failed: "+r.error+(r.error_description?" - "+r.error_description:"")+". Please grant permissions and try again.";console.error("",n),t(new Error(n));return}r.access_token?(Ks=r.access_token,localStorage.setItem(i0,r.access_token),console.log(" New access token received and stored:",r.access_token.substring(0,20)+"..."),e(r.access_token)):(console.error(" No access token in response"),t(new Error("No access token received. Please grant permissions and try again.")))},console.log(" Requesting access token from Google..."),console.log(" Scopes requested:",b1),console.log(" Using Client ID:",Pf?.substring(0,30)+"..."),console.log(" Current origin:",window.location.origin),il.requestAccessToken({prompt:""}),console.log(" Waiting for user to grant permissions...")}catch(r){console.error(" Failed to request access token:",r),t(new Error("Failed to request access token. Please grant permissions and try again."))}})},I9=async()=>{console.log(" Listing Google Docs...");const e=await pi();console.log(" Using token:",e.substring(0,20)+"...");const t="mimeType='application/vnd.google-apps.document' and trashed=false and properties has { key='createdByApp' and value='LambdaLLMProxy-Swag' }";console.log(" Query:",t),console.log(" Making API request to Google Drive...");const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name,modifiedTime,properties,description)&orderBy=modifiedTime desc",{headers:{Authorization:"Bearer "+e}});if(console.log(" Response status:",r.status,r.statusText),!r.ok){const i=await r.json().catch(()=>({}));console.error(" API Error:",i);const c="Failed to list documents: "+(i.error?.message||r.statusText)+". Please grant permissions and try again.";throw console.error("",c),new Error(c)}const n=await r.json();console.log(" Documents retrieved:",n.files?.length||0);const s=n.files.filter(i=>i.properties?.createdByApp==="LambdaLLMProxy-Swag"||i.description?.includes("Created by LLM Proxy Swag feature"));return console.log(" App-created documents:",s.length),s.map(i=>({id:i.id,name:i.name,modifiedTime:i.modifiedTime}))},D9=async(e,t)=>{console.log(" Appending to Google Doc:",e);const r=await pi();console.log(" Using token:",r.substring(0,20)+"..."),console.log(" Getting document details...");const n=await fetch("https://docs.googleapis.com/v1/documents/"+e,{headers:{Authorization:"Bearer "+r}});if(!n.ok){const c=await n.json().catch(()=>({}));console.error(" API Error:",c);const h="Failed to get document: "+(c.error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}const s=await n.json(),i=s.body.content[s.body.content.length-1].endIndex-1;console.log(" End index:",i),console.log(" Appending content...");const l=await fetch("https://docs.googleapis.com/v1/documents/"+e+":batchUpdate",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({requests:[{insertText:{location:{index:i},text:`

`+t+`
`}}]})});if(!l.ok){const c=await l.json().catch(()=>({}));console.error(" API Error:",c);const h="Failed to append to document: "+(c.error?.message||l.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}console.log(" Content appended successfully")},y1=()=>!!Ks,E_="Research Agent",qA="Research Agent Settings",Kv=async()=>{console.log(" Finding or creating Research Agent folder...");const e=await pi(),t=`mimeType='application/vnd.google-apps.folder' and name='${E_}' and trashed=false`;console.log(" Searching for folder:",t);const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+e}});if(!r.ok){const l=await r.json().catch(()=>({}));throw new Error("Failed to search for folder: "+(l.error?.message||r.statusText))}const n=await r.json();if(n.files&&n.files.length>0){const l=n.files[0].id;return console.log(" Found existing folder:",l),l}console.log(" Creating new folder...");const s=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:E_,mimeType:"application/vnd.google-apps.folder",description:"Storage for Research Agent settings and snippets"})});if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error("Failed to create folder: "+(l.error?.message||s.statusText))}const i=await s.json();return console.log(" Created new folder:",i.id),i.id},GA=async e=>{console.log(" Searching for settings file in folder:",e);const t=await pi(),r=`name='${qA}' and '${e}' in parents and trashed=false`;console.log(" Query:",r);const n=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(r)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+t}});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error("Failed to search for settings file: "+(i.error?.message||n.statusText))}const s=await n.json();return s.files&&s.files.length>0?(console.log(" Found settings file:",s.files[0].id),s.files[0].id):(console.log("  No settings file found"),null)},P9=async(e,t)=>{console.log(" Creating settings file in folder:",e);const r=await pi(),n="-------314159265358979323846",s=`\r
--`+n+`\r
`,i=`\r
--`+n+"--",l={name:qA,mimeType:"text/plain",parents:[e],description:"Research Agent Settings - Contains API keys and provider configuration"},c=s+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(l)+s+`Content-Type: text/plain\r
\r
`+t+i,d=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"multipart/related; boundary="+n},body:c});if(!d.ok){const g=await d.json().catch(()=>({}));throw new Error("Failed to create settings file: "+(g.error?.message||d.statusText))}const h=await d.json();return console.log(" Settings file created:",h.id),h.id},B9=async(e,t)=>{console.log(" Updating settings file:",e);const r=await pi(),n=await fetch("https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media",{method:"PATCH",headers:{Authorization:"Bearer "+r,"Content-Type":"text/plain"},body:t});if(!n.ok){const s=await n.json().catch(()=>({}));throw new Error("Failed to update settings file: "+(s.error?.message||n.statusText))}console.log(" Settings file updated")},__=async()=>{try{console.log(" Loading settings from Google Drive...");const e=await Kv(),t=await GA(e);if(!t)return console.log("  No settings file found in Google Drive"),null;const r=await pi(),n=await fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+r}});if(!n.ok)throw new Error("Failed to download settings: "+n.statusText);const s=await n.text();return console.log(" Settings loaded from Google Drive"),s}catch(e){throw console.error(" Failed to load settings from Google Drive:",e),e}},T_=async e=>{try{console.log(" Saving settings to Google Drive...");const t=await Kv(),r=await GA(t);r?await B9(r,e):await P9(t,e),console.log(" Settings saved to Google Drive")}catch(t){throw console.error(" Failed to save settings to Google Drive:",t),t}},F9=async e=>{console.log(" Creating Google Doc in Research Agent folder:",e);const t=await pi(),r=await Kv();console.log(" Making API request to Google Docs...");const n=await fetch("https://docs.googleapis.com/v1/documents",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(console.log(" Response status:",n.status,n.statusText),!n.ok){const d="Failed to create document: "+((await n.json().catch(()=>({}))).error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",d),new Error(d)}const i=(await n.json()).documentId;try{console.log(" Moving document to Research Agent folder..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?addParents=${r}&fields=id,parents`,{method:"PATCH",headers:{Authorization:"Bearer "+t}})).ok?console.log(" Document moved to folder"):console.warn(" Could not move document to folder (document still created)")}catch(l){console.warn(" Could not move document to folder:",l)}try{console.log("  Adding app metadata to document..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=id`,{method:"PATCH",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({properties:{createdByApp:"LambdaLLMProxy-Swag",appVersion:"1.0"},description:"Created by LLM Proxy Swag feature"})})).ok?console.log(" Metadata added successfully"):console.warn(" Could not add metadata (document still created)")}catch(l){console.warn(" Could not add metadata:",l)}return{id:i,name:e,modifiedTime:new Date().toISOString()}},YA=C.createContext(void 0);function $9(e){if(e.version==="2.0.0")return e;const t=[];if(e.provider&&e.llmApiKey){const r=e.provider==="groq"?"groq":"openai";t.push({id:crypto.randomUUID(),type:r,apiEndpoint:zA[r],apiKey:e.llmApiKey})}return{version:"2.0.0",providers:t,tavilyApiKey:e.tavilyApiKey||""}}const U9=({children:e})=>{const[t,r]=js("app_settings",{version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!0,language:"en"}),[n,s]=C.useState(!1),i=$9(t);C.useEffect(()=>{t!==i&&r(i)},[t,i,r]),C.useEffect(()=>{(async()=>{if(y1()&&!n)try{s(!0),console.log(" Auto-loading settings from Google Drive...");const f=await __();if(f){const x=JSON.parse(f);r(x),console.log(" Settings auto-loaded from Google Drive")}}catch(f){console.error(" Failed to auto-load settings from Google Drive:",f)}finally{s(!1)}})()},[]);const l=g=>{r(g),y1()&&T_(JSON.stringify(g,null,2)).catch(f=>{console.error(" Failed to auto-save settings to Google Drive:",f)})},c=async()=>{try{console.log(" Manually loading settings from Google Drive...");const g=await __();if(g){const f=JSON.parse(g);r(f),console.log(" Settings loaded from Google Drive")}else throw new Error("No settings found in Google Drive")}catch(g){throw console.error(" Failed to load settings from Google Drive:",g),g}},d=async()=>{try{console.log(" Manually saving settings to Google Drive..."),await T_(JSON.stringify(i,null,2)),console.log(" Settings saved to Google Drive")}catch(g){throw console.error(" Failed to save settings to Google Drive:",g),g}},h=()=>{r({version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!1}),console.log("  Settings cleared")};return a.jsx(YA.Provider,{value:{settings:i,setSettings:l,loadFromGoogleDrive:c,saveToGoogleDrive:d,clearSettings:h},children:e})},Ui=()=>{const e=C.useContext(YA);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},C_="rag_embeddings",z9=2,us="chunks",_i="metadata",hu="search_cache";class H9{db=null;initPromise=null;async resetDatabase(){console.log(" Deleting and recreating RAG database..."),this.db&&(this.db.close(),this.db=null),this.initPromise=null,await new Promise((t,r)=>{const n=indexedDB.deleteDatabase(C_);n.onsuccess=()=>{console.log(" Database deleted successfully"),t()},n.onerror=()=>{console.error(" Failed to delete database:",n.error),r(n.error)},n.onblocked=()=>{console.warn(" Database deletion blocked - close all tabs using this database")}}),await this.init(),console.log(" Database recreated successfully")}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{if(!window.indexedDB){console.warn("IndexedDB not supported"),r(new Error("IndexedDB not supported"));return}const n=indexedDB.open(C_,z9);n.onerror=()=>{console.error("RAG IndexedDB error:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("RAG IndexedDB initialized"),t()},n.onupgradeneeded=s=>{const i=s.target.result,l=s.oldVersion;if(!i.objectStoreNames.contains(us)){const c=i.createObjectStore(us,{keyPath:"id"});c.createIndex("snippet_id","snippet_id",{unique:!1}),c.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(_i)||i.createObjectStore(_i,{keyPath:"snippet_id"}),l<2&&!i.objectStoreNames.contains(hu)&&i.createObjectStore(hu,{keyPath:"query"}).createIndex("created_at","created_at",{unique:!1})}}),this.initPromise)}async hasEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const c=this.db.transaction([us],"readonly").objectStore(us).index("snippet_id").count(IDBKeyRange.only(t));c.onsuccess=()=>{r(c.result>0)},c.onerror=()=>{console.error("Error checking embedding:",c.error),n(c.error)}}):!1}async getEmbeddingDetails(t){return await this.init(),this.db?new Promise((r,n)=>{const s=this.db.transaction([us,_i],"readonly"),c=s.objectStore(us).index("snippet_id").getAll(IDBKeyRange.only(t)),h=s.objectStore(_i).get(t);s.oncomplete=()=>{const g=c.result,f=h.result;r({hasEmbedding:g.length>0,chunkCount:g.length,chunks:g.sort((x,b)=>x.chunk_index-b.chunk_index),metadata:f})},s.onerror=()=>{console.error("Error getting embedding details:",s.error),n(s.error)}}):{hasEmbedding:!1,chunkCount:0,chunks:[]}}async bulkCheckEmbeddings(t){if(await this.init(),!this.db)return{};const r={};for(const n of t)try{r[n]=await this.hasEmbedding(n)}catch(s){console.error(`Error checking embedding for ${n}:`,s),r[n]=!1}return r}async saveChunks(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return console.log(" saveChunks called with:",{chunkCount:t.length,firstChunk:t[0],firstChunkKeys:t[0]?Object.keys(t[0]):[],hasId:t[0]?.id!==void 0,idValue:t[0]?.id,idType:typeof t[0]?.id,chunkStringified:JSON.stringify(t[0],null,2)}),new Promise(async(n,s)=>{const i=t[0]?.snippet_id||r?.snippet_id;if(i)try{console.log(` Deleting old chunks for snippet: ${i}`),await this.deleteChunks(i),console.log(" Deleted old chunks for snippet")}catch(d){console.warn(" Failed to delete old chunks:",d)}const l=this.db.transaction([us,_i],"readwrite"),c=l.objectStore(us);console.log(" IndexedDB Store Info:",{storeName:c.name,keyPath:c.keyPath,autoIncrement:c.autoIncrement,indexNames:Array.from(c.indexNames)});for(let d=0;d<t.length;d++){const h=t[d];try{const g=h.snippet_id||r?.snippet_id||"unknown",f=h.chunk_index??d,x=h.id||`${g}_chunk_${f}`;if(!x||x==="undefined_chunk_0"||x==="_chunk_0")throw console.error(" Invalid chunk ID generated:",{chunkId:x,snippetId:g,chunkIndex:f,chunk:h}),new Error(`Invalid chunk ID: ${x}`);const b=Array.isArray(h.embedding)?[...h.embedding]:Array.from(h.embedding||[]),y={id:x,snippet_id:g,chunk_text:h.chunk_text||"",embedding:b,chunk_index:f,embedding_model:h.embedding_model||"text-embedding-3-small",created_at:h.created_at||new Date().toISOString()};if(!y.id)throw new Error(`Chunk missing id property after normalization: ${JSON.stringify(Object.keys(y))}`);const k=y.id;if(!k)throw new Error(`Cannot access id property via bracket notation: ${k}`);const S=Object.getPrototypeOf(y);if(S!==Object.prototype)throw new Error(`Chunk has non-plain prototype: ${S?.constructor?.name}`);console.log(" Putting chunk:",{id:y.id,snippetId:y.snippet_id,chunkIndex:y.chunk_index,embeddingLength:y.embedding.length,embeddingType:y.embedding.constructor.name,allKeys:Object.keys(y),idDescriptor:Object.getOwnPropertyDescriptor(y,"id"),objectType:typeof y,prototypeChainDepth:(()=>{let N=0,I=y;for(;I&&N<10;)I=Object.getPrototypeOf(I),N++;return N})()});const _=JSON.stringify(y),T=JSON.parse(_);if(!T.id)throw new Error(`Chunk id lost during JSON serialization! Original: ${y.id}`);console.log(" Chunk survived JSON round-trip with id:",T.id),await new Promise((N,I)=>{const R=c.put(T);R.onsuccess=()=>{N()},R.onerror=()=>{console.error(" PUT request failed:",{chunk:y,error:R.error,errorName:R.error?.name,errorMessage:R.error?.message,chunkKeys:Object.keys(y),hasIdProperty:"id"in y,idValue:y.id}),I(R.error)}})}catch(g){throw console.error(" Error putting chunk:",{chunk:h,error:g}),g}}r&&l.objectStore(_i).put(r),l.oncomplete=()=>{console.log(`Saved ${t.length} chunks to IndexedDB`),n()},l.onerror=()=>{console.error("Error saving chunks:",l.error),s(l.error)}})}async deleteChunks(t){if(await this.init(),!!this.db)return new Promise((r,n)=>{const s=this.db.transaction([us,_i],"readwrite"),c=s.objectStore(us).index("snippet_id").openCursor(IDBKeyRange.only(t));c.onsuccess=h=>{const g=h.target.result;g&&(g.delete(),g.continue())},s.objectStore(_i).delete(t),s.oncomplete=()=>{console.log(`Deleted chunks for snippet ${t}`),r()},s.onerror=()=>{console.error("Error deleting chunks:",s.error),n(s.error)}})}async getAllEmbeddedSnippetIds(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([_i],"readonly").objectStore(_i).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting embedded snippet IDs:",i.error),r(i.error)}}):[]}async cacheQueryEmbedding(t,r,n){if(await this.init(),!!this.db)return new Promise((s,i)=>{const l=this.db.transaction([hu],"readwrite"),c=l.objectStore(hu),d={query:t,embedding:r,model:n,created_at:Date.now()};c.put(d),l.oncomplete=()=>{s()},l.onerror=()=>{console.error("Error caching query embedding:",l.error),i(l.error)}})}async getCachedQueryEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const l=this.db.transaction([hu],"readonly").objectStore(hu).get(t);l.onsuccess=()=>{const c=l.result;r(c?{embedding:c.embedding,model:c.model}:null)},l.onerror=()=>{console.error("Error getting cached query:",l.error),n(l.error)}}):null}cosineSimilarity(t,r){if(t.length!==r.length)throw new Error("Vectors must have same length");let n=0,s=0,i=0;for(let l=0;l<t.length;l++)n+=t[l]*r[l],s+=t[l]*t[l],i+=r[l]*r[l];return n/(Math.sqrt(s)*Math.sqrt(i))}async vectorSearch(t,r=5,n=.5){return await this.init(),this.db?new Promise((s,i)=>{const d=this.db.transaction([us],"readonly").objectStore(us).getAll();d.onsuccess=()=>{const g=d.result.map(b=>({snippet_id:b.snippet_id,chunk_id:b.id,chunk_text:b.chunk_text,chunk_index:b.chunk_index,score:this.cosineSimilarity(t,b.embedding)})),f=[...g].sort((b,y)=>y.score-b.score);console.log(` Vector search - Top 10 scores (threshold: ${n}):`,f.slice(0,10).map(b=>({score:b.score.toFixed(4),snippet_id:b.snippet_id,chunk_preview:b.chunk_text.substring(0,100)+"..."})));const x=g.filter(b=>b.score>=n).sort((b,y)=>y.score-b.score).slice(0,r);console.log(` Returning ${x.length} results above threshold ${n}`),s(x)},d.onerror=()=>{console.error("Error performing vector search:",d.error),i(d.error)}}):[]}async getAllChunks(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([us],"readonly").objectStore(us).getAll();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting all chunks:",i.error),r(i.error)}}):[]}}const Va=new H9,q9="Snippets";async function G9(e){try{const t=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${encodeURIComponent("Research Agent Swag")}' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false&fields=files(id,name)`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Drive API error: ${t.statusText}`);const n=(await t.json()).files||[];if(n.length===0)return console.warn(' "Research Agent Swag" spreadsheet not found'),null;const s=n[0].id;return console.log(` Found "Research Agent Swag" spreadsheet: ${s}`),s}catch(t){throw console.error(" Error finding snippets spreadsheet:",t),t}}function Y9(e){if(!e||e.length<5)return null;const[t,r,n,s,i,l,c]=e;if(!t||t==="id"||!i)return null;const d=l?l.split(",").map(x=>x.trim()).filter(Boolean):[],h=r?new Date(r).getTime():Date.now(),g=n?new Date(n).getTime():h,f=c==="chat"||c==="assistant"?"assistant":c==="user"?"user":"tool";return{id:`sheet-${t}`,content:i||"",title:s||void 0,timestamp:h,updateDate:g,sourceType:f,selected:!1,tags:d,hasEmbedding:!1}}async function W9(e,t){try{const r=await G9(t);if(!r)throw new Error("Snippets spreadsheet not found");const n=await M9(r,`${q9}!A:H`);if(!n||n.length<2)return console.warn(" No snippets found in spreadsheet"),null;for(let s=1;s<n.length;s++){const i=n[s];if(parseInt(i[0],10)===e){const c=Y9(i);if(c)return console.log(` Fetched snippet #${e} from Google Sheets:`,c.title),c}}return console.warn(` Snippet #${e} not found in Google Sheets`),null}catch(r){throw console.error(` Error fetching snippet #${e}:`,r),r}}const WA=C.createContext(void 0),jg=()=>{const e=C.useContext(WA);if(!e)throw new Error("useSwag must be used within SwagProvider");return e},V9=({children:e})=>{const[t,r]=C.useState([]),[n,s]=C.useState(!1),[i,l]=C.useState(null),[c,d]=C.useState(null),{showError:h,showWarning:g,showSuccess:f}=$i(),{user:x,getToken:b}=Os(),{settings:y}=Ui();C.useEffect(()=>{(async()=>{try{const z=await ny.getItem("swag-snippets");z&&r(z),s(!0)}catch(z){console.error("Failed to load snippets:",z),h("Failed to load snippets from storage"),s(!0)}})()},[h]);const k=D=>D<1024?D+" B":D<1024*1024?(D/1024).toFixed(2)+" KB":(D/(1024*1024)).toFixed(2)+" MB";C.useEffect(()=>{if(!n)return;(async()=>{try{await ny.setItem("swag-snippets",t);const z=await ny.getStats();l({totalSize:z.totalSize,limit:z.limit,percentUsed:z.percentUsed}),z.percentUsed>80&&g(`Storage is ${z.percentUsed.toFixed(0)}% full. Consider deleting old snippets.`)}catch(z){if(z instanceof Yl)if(z.code==="QUOTA_EXCEEDED"){const M=z.estimatedSize&&z.limit?`Current size: ${k(z.estimatedSize)}, Limit: ${k(z.limit)}`:"";h(`Storage Quota Exceeded! ${z.message} ${M}`)}else h(`Storage error: ${z.message}`);else console.error("Failed to save snippets:",z),h("Failed to save snippets to storage")}})()},[t,n,h,g]);const S=()=>{try{const D=localStorage.getItem("google_drive_access_token");return!!D&&D.length>0}catch(D){console.error("Failed to check authentication:",D)}return!1},_=async()=>{try{const D=localStorage.getItem("rag_spreadsheet_id");if(D)return console.log("Using cached spreadsheet ID:",D),D;let z=localStorage.getItem("google_drive_access_token");if(z)console.log(" Using cached Drive API access token");else{if(console.log(" Requesting Google Drive API access token..."),typeof window>"u"||!window.google?.accounts?.oauth2)throw console.error(" Google Identity Services not available. The library may not have loaded yet."),console.log(" This usually happens if the page loads before Google GSI library is ready."),console.log(" Try: 1) Refresh the page, 2) Check internet connection, 3) Check browser console for script loading errors"),new Error("Google Identity Services not available - library not loaded");try{const Ee=window.google.accounts.oauth2.initTokenClient({client_id:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file",callback:async Ae=>{if(Ae.access_token){const ve=Ae.access_token.trim().replace(/[\r\n]/g,"");localStorage.setItem("google_drive_access_token",ve),console.log(" Got Drive API access token")}}});if(!Ee)throw new Error("Failed to initialize Google token client");await new Promise((Ae,ve)=>{Ee.callback=Pe=>{if(Pe.error){console.error("OAuth error:",Pe.error),ve(new Error(`OAuth error: ${Pe.error}`));return}if(Pe.access_token){const ge=Pe.access_token.trim().replace(/[\r\n]/g,"");z=ge,localStorage.setItem("google_drive_access_token",ge),console.log(" Got Drive API access token"),Ae()}else ve(new Error("No access token received"))},console.log(" Requesting Google Drive & Sheets permissions..."),Ee.requestAccessToken({prompt:""})})}catch(Ee){throw console.error("Failed to get Drive API token:",Ee),new Error("Please grant access to Google Drive and Sheets to enable cloud sync")}}if(!z)throw console.error("No Drive API access token available"),new Error("No Drive API access token - unable to access Google Sheets");const M=await Ca();console.log(" Calling getUserRagSpreadsheet at:",M);const le=await fetch(`${M}/rag/user-spreadsheet`,{method:"GET",headers:{Authorization:`Bearer ${z}`}});if(!le.ok){const Ee=await le.text();console.error(" Backend error response:",{status:le.status,statusText:le.statusText,body:Ee});let Ae=`Failed to get spreadsheet: ${le.status}`;try{const ve=JSON.parse(Ee);ve.error&&(Ae=ve.error)}catch{}throw new Error(Ae)}const me=await le.json();return localStorage.setItem("rag_spreadsheet_id",me.spreadsheetId),me.created?(console.log(" Created new RAG spreadsheet:",me.spreadsheetId),g('Created new "Research Agent Swag" spreadsheet in your Google Drive')):console.log(" Found existing RAG spreadsheet:",me.spreadsheetId),me.spreadsheetId}catch(D){return console.error("Failed to get user RAG spreadsheet:",D),null}};C.useEffect(()=>((async()=>{if(!(!x?.email||!S()||!n))try{if(!await _()){console.warn("Could not get user RAG spreadsheet - sync disabled"),g("Cannot access Google Sheets. Please check your Google Drive connection in Settings > Cloud Sync.");return}await Ea.initialize({enabled:!0,autoSync:!0,syncInterval:6e4,batchSize:50,retryAttempts:3,deviceId:Ea.getDeviceId()}),Ea.onSyncStart(()=>{d(Ea.getStatus())}),Ea.onSyncComplete(le=>{d(Ea.getStatus()),le&&le.snippetsPulled>0&&console.log(`Synced ${le.snippetsPulled} snippets from cloud`)}),Ea.onSyncError((le,me)=>{console.error("Sync error:",me),d(Ea.getStatus()),me&&h(`Sync failed: ${me.message}`)}),console.log("Performing initial sync...");const M=await Ea.pullSnippets(x.email);M&&M.length>0&&(r(le=>{const me=new Set(le.map(ve=>ve.id)),Ee=M.filter(ve=>!me.has(ve.id)),Ae=le.map(ve=>{const Pe=M.find(ge=>ge.id===ve.id);return Pe&&Pe.updateDate>ve.updateDate?Pe:ve});return[...Ee,...Ae].sort((ve,Pe)=>Pe.updateDate-ve.updateDate)}),console.log(`Downloaded ${M.length} snippets from cloud`)),t.length>0&&await Ea.pushSnippets(t,x.email),Ea.startAutoSync(),console.log(" RAG sync initialized and auto-sync started")}catch(z){console.error("Failed to initialize sync:",z),h("Cloud sync failed to initialize. Check your Google Drive connection in Settings > Cloud Sync.")}})(),()=>{S()&&Ea.stopAutoSync()}),[x?.email,n,h]);const T=()=>{try{const D=localStorage.getItem("rag_config");if(D){const z=JSON.parse(D);return z.enabled&&z.autoEmbed}}catch(D){console.error("Failed to check RAG config:",D)}return!1},N=async(D,z,M)=>{if(T())try{const le=await Ca(),me=await fetch(`${le}/rag/ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:z,sourceType:"snippet",title:M||`Snippet ${D}`,snippetId:D})});if(!me.ok){console.error("Failed to auto-embed snippet");return}const Ee=me.body?.getReader(),Ae=new TextDecoder;if(Ee)for(;;){const{done:ve,value:Pe}=await Ee.read();if(ve)break;const Be=Ae.decode(Pe).split(`
`);for(const ht of Be)if(ht.startsWith("data: ")){const ye=JSON.parse(ht.substring(6));ye.error&&console.error("Auto-embed error:",ye.error),ye.message&&console.log("Auto-embed:",ye.message)}}r(ve=>ve.map(Pe=>Pe.id===D?{...Pe,hasEmbedding:!0}:Pe))}catch(le){console.error("Auto-embed failed:",le)}},I=async(D,z,M)=>{const le=t.find(Ae=>Ae.content.trim()===D.trim());if(le)return await R(le.id,{updateDate:Date.now()}),le;const me=Date.now(),Ee={id:`snippet-${me}-${Math.random().toString(36).substr(2,9)}`,content:D,title:M,sourceType:z,timestamp:me,updateDate:me,selected:!1};return r(Ae=>[Ee,...Ae]),S()&&x?.email&&Ea.queueSync({type:"push-snippet",data:Ee,userEmail:x.email}),await N(Ee.id,D,M),Ee},R=async(D,z)=>{const M=t.find(me=>me.id===D),le={...M,...z,updateDate:Date.now()};if(r(me=>me.map(Ee=>Ee.id===D?le:Ee)),S()&&x?.email&&Ea.queueSync({type:"push-snippet",data:le,userEmail:x.email}),M&&z.content&&z.content!==M.content){const me=z.title!==void 0?z.title:M.title;await N(D,z.content,me)}},B=D=>{r(z=>z.filter(M=>!D.includes(M.id))),S()&&x?.email&&D.forEach(z=>{Ea.queueSync({type:"delete-snippet",data:{id:z},userEmail:x.email})})},F=D=>{if(D.length<2)return;const z=t.filter(Ae=>D.includes(Ae.id)).sort((Ae,ve)=>Ae.timestamp-ve.timestamp),M=z.map(Ae=>Ae.content).join(`

---

`),le=z.filter(Ae=>Ae.title).map(Ae=>Ae.title).join(" + "),me=Date.now(),Ee={id:`snippet-${me}-${Math.random().toString(36).substr(2,9)}`,content:M,title:le||void 0,sourceType:z[0].sourceType,timestamp:me,updateDate:me,selected:!1};r(Ae=>[Ee,...Ae.filter(ve=>!D.includes(ve.id))])},ae=D=>{r(z=>z.map(M=>M.id===D?{...M,selected:!M.selected}:M))},G=()=>{r(D=>D.map(z=>({...z,selected:!0})))},$=()=>{r(D=>D.map(z=>({...z,selected:!1})))},J=()=>t.filter(D=>D.selected),ee=()=>{const D=new Set;return t.forEach(z=>{z.tags&&z.tags.forEach(M=>D.add(M))}),Array.from(D).sort()},W=(D,z)=>{r(M=>M.map(le=>{if(D.includes(le.id)){const me=le.tags||[],Ee=[...new Set([...me,...z])];return{...le,tags:Ee,updateDate:Date.now()}}return le}))},j=(D,z)=>{r(M=>M.map(le=>{if(D.includes(le.id)&&le.tags){const me=le.tags.filter(Ee=>!z.includes(Ee));return{...le,tags:me.length>0?me:void 0,updateDate:Date.now()}}return le}))},U=async D=>{try{return await Va.hasEmbedding(D)}catch(z){return console.error("Error checking embedding status:",z),!1}},O=async D=>{try{const z=await Va.getEmbeddingDetails(D);return z.hasEmbedding?z:t.find(le=>le.id===D)?.hasEmbedding?{hasEmbedding:!0,chunkCount:1,chunks:[]}:{hasEmbedding:!1,chunkCount:0,chunks:[]}}catch(z){return console.error("Error getting embedding details:",z),{hasEmbedding:!1,chunkCount:0,chunks:[]}}},q=async()=>{try{const D=t.map(M=>M.id);if(D.length===0)return;const z=await Va.bulkCheckEmbeddings(D);r(M=>M.map(le=>({...le,hasEmbedding:z[le.id]||!1})))}catch(D){console.error("Failed to check embedding status:",D)}},V=async(D,z,M=!1)=>{const le=t.filter(Ae=>D.includes(Ae.id));if(le.length===0)return{embedded:0,skipped:0,failed:0};let me=le,Ee=0;if(!M){const Ae=await Va.bulkCheckEmbeddings(D),ve=D.filter(Pe=>Ae[Pe]);if(ve.length>0){if(console.log(` Skipping ${ve.length} already indexed snippets:`,ve),me=le.filter(Pe=>!Ae[Pe.id]),Ee=ve.length,me.length===0)return console.log(" All selected snippets already have embeddings"),g(` All ${le.length} snippets already indexed`),{embedded:0,skipped:Ee,failed:0};g(` Skipping ${Ee} already indexed, generating ${me.length} new embeddings`)}}try{let Ae,ve=0;const Pe=3;for(;ve<=Pe;)try{const yt=await Ca(),bt=await b(),tn=y.providers.filter(ar=>ar.enabled!==!1&&ar.capabilities?.embedding!==!1).map(ar=>({type:ar.type,apiKey:ar.apiKey,apiEndpoint:ar.apiEndpoint,modelName:ar.modelName,allowedModels:ar.allowedModels,maxImageQuality:ar.maxImageQuality}));if(Ae=await fetch(`${yt}/rag/embed-snippets`,{method:"POST",headers:{"Content-Type":"application/json",...bt?{Authorization:`Bearer ${bt}`}:{}},body:JSON.stringify({snippets:me.map(ar=>({id:ar.id,content:ar.content,title:ar.title,tags:ar.tags,timestamp:ar.timestamp})),providers:tn,force:M})}),Ae.status===429&&ve<Pe){const ar=Math.pow(2,ve)*1e3;console.warn(` Rate limited, retrying in ${ar/1e3}s... (attempt ${ve+1}/${Pe})`),g(` Rate limited, retrying in ${ar/1e3}s...`),await new Promise(Kt=>setTimeout(Kt,ar)),ve++;continue}break}catch(yt){if(ve<Pe){const bt=Math.pow(2,ve)*1e3;console.warn(` Fetch error, retrying in ${bt/1e3}s...`,yt),await new Promise(tn=>setTimeout(tn,bt)),ve++;continue}throw yt}if(!Ae||!Ae.ok){const yt=await Ae?.text()||"No response";let bt;try{bt=JSON.parse(yt)}catch{bt={error:yt}}throw bt.requiredAction==="CONFIGURE_EMBEDDING_PROVIDER"||bt.error&&bt.error.includes("No embedding provider")?new Error(` Embedding Provider Required

To use Swag embeddings and vector search, you need to configure a provider that supports embeddings.

 Steps:
1. Go to Settings (gear icon)
2. Click "Providers" tab
3. Add a provider: OpenAI, Together.AI, Cohere, or Voyage
4. Enable the " Embeddings" capability
5. Save and try again

 Note: Swag embeddings work independently of the RAG system. You just need one embedding-capable provider configured.`):new Error(`Failed to generate embeddings: ${Ae?.status} ${Ae?.statusText}. ${yt}`)}const ge=await Ae.json(),Be=ge.results?.[0]?.chunks?.[0]?.embedding;console.log(" Backend response:",{success:ge.success,resultsCount:ge.results?.length,firstResult:ge.results?.[0],firstChunk:ge.results?.[0]?.chunks?.[0],firstChunkKeys:ge.results?.[0]?.chunks?.[0]?Object.keys(ge.results[0].chunks[0]):[],firstChunkEmbeddingLength:Be?.length,firstChunkEmbeddingType:Be?.constructor?.name,firstChunkEmbeddingFirst5:Array.isArray(Be)?Be.slice(0,5):"NOT_AN_ARRAY"});const{success:ht,results:ye,error:ut}=ge;if(!ht)throw new Error(ut||"Failed to generate embeddings");const Et=[];let Ze=0,kt=0,Rt=0;for(let yt=0;yt<ye.length;yt++){const bt=ye[yt];if(bt.status==="success"&&bt.chunks.length>0){console.log(" Chunk structure check:",{chunkCount:bt.chunks.length,firstChunk:bt.chunks[0],hasId:bt.chunks[0]?.id!==void 0,hasSnippetId:bt.chunks[0]?.snippet_id!==void 0});try{await Va.saveChunks(bt.chunks,{snippet_id:bt.id,created_at:Date.now(),updated_at:Date.now()}),Et.push(bt.id),Ze+=bt.chunks.length,kt++,console.log(` Saved ${bt.chunks.length} chunks for snippet ${bt.id}`)}catch(tn){Rt++,console.error(` Failed to save chunks for snippet ${bt.id}:`,tn)}z&&z(yt+1,ye.length)}else bt.status==="failed"&&(Rt++,console.error(`Failed to embed snippet ${bt.id}:`,bt.error))}r(yt=>yt.map(bt=>Et.includes(bt.id)?{...bt,hasEmbedding:!0}:bt));const ur=ye.filter(yt=>yt.status==="success").flatMap(yt=>yt.chunks);if(console.log(" Google Sheets sync check:",{chunksToSync:ur.length,userEmail:x?.email,spreadsheetId:localStorage.getItem("rag_spreadsheet_id"),googleLinked:localStorage.getItem("rag_google_linked")}),ur.length>0&&x?.email)try{const yt=localStorage.getItem("rag_spreadsheet_id");if(!yt)console.warn(" No spreadsheet ID found. Skipping Google Sheets sync."),console.log(" To enable sync: Go to Settings > Cloud Sync and connect Google Drive"),g(" Embeddings saved locally. Connect Google Drive in Cloud Sync settings to enable automatic backup.");else{const tn=localStorage.getItem("rag_google_linked")==="true"&&j9();if(console.log(` Sync method: ${tn?"Client-side direct":"Backend"}`),tn){console.log(` Using direct Google Sheets sync for ${ur.length} chunks (client-side)...`);try{const ar=O9(ur);console.log(` Formatted ${ar.length} rows for Google Sheets`),await L9(yt,"RAG_Embeddings_v1!A:K",ar),console.log(" Synced to Google Sheets (client-side)"),g(` Synced ${ur.length} embeddings to Google Sheets`)}catch(ar){console.error(" Client-side sync failed, falling back to backend:",ar),g(" Direct sync failed, using backend fallback..."),setTimeout(async()=>{try{await Ea.pushEmbeddings(ur,(Kt,On)=>{console.log(` Backend sync: ${Kt}/${On} chunks`)}),console.log(" Synced to Google Sheets (backend fallback)"),g(` Synced ${ur.length} embeddings to Google Sheets (backend)`)}catch(Kt){console.error("Backend sync also failed:",Kt),g(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}else console.log(` Using backend sync for ${ur.length} chunks (with 2s delay)...`),setTimeout(async()=>{try{console.log(" Starting backend Google Sheets sync..."),await Ea.pushEmbeddings(ur,(ar,Kt)=>{console.log(` Syncing: ${ar}/${Kt} chunks`)}),console.log(" Synced to Google Sheets (backend)"),g(` Synced ${ur.length} embeddings to Google Sheets`)}catch(ar){console.error("Failed to sync to Google Sheets:",ar),g(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}catch(yt){console.error("Failed to queue sync:",yt)}return console.log(` Generated ${Ze} embeddings for ${kt} snippets`),{embedded:kt,skipped:Ee+(ye.length-kt-Rt),failed:Rt}}catch(Ae){throw console.error("Failed to generate embeddings:",Ae),Ae}},ue=async()=>{if(!x?.email){g("Please sign in with Google to sync");return}if(!S()){g("Cloud sync requires Google Drive connection. Go to Settings > Cloud Sync to connect.");return}try{console.log(" Manual sync triggered"),console.log(" Ensuring spreadsheet exists...");const D=await _();if(!D){h("Failed to create or access Google Sheets spreadsheet");return}console.log(" Spreadsheet ready:",D),console.log(" Pulling remote snippets...");try{const z=localStorage.getItem("google_drive_access_token");if(!z)console.warn("No Drive token available for pull");else{const M=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${D}/values/RAG_Snippets_v1!A2:J10000`,{headers:{Authorization:`Bearer ${z}`}}).then(le=>le.json()).then(le=>le.values||[]);if(M.length>0){console.log(` Received ${M.length} rows from Sheets`);const le=new Map;M.forEach(Ee=>{const Ae=Ee[0];le.has(Ae)||le.set(Ae,[]),le.get(Ae).push(Ee)});const me=[];le.forEach((Ee,Ae)=>{Ee.sort((ge,Be)=>parseInt(ge[8]||"1")-parseInt(Be[8]||"1"));const ve=Ee[0],Pe=Ee.map(ge=>ge[2]||"").join("");me.push({id:Ae,title:ve[1]||"",content:Pe,timestamp:parseInt(ve[5])||Date.now(),updateDate:parseInt(ve[6])||Date.now(),sourceType:ve[7]||"user",tags:ve[4]?JSON.parse(ve[4]):[]})}),console.log(` Reassembled ${me.length} snippets from ${M.length} rows`),r(Ee=>{const Ae=new Set(Ee.map(ge=>ge.id)),ve=me.filter(ge=>!Ae.has(ge.id)),Pe=Ee.map(ge=>{const Be=me.find(ht=>ht.id===ge.id);return Be&&Be.updateDate>ge.updateDate?Be:ge});return[...ve,...Pe].sort((ge,Be)=>Be.updateDate-ge.updateDate)})}else console.log(" No remote snippets found")}}catch(z){console.error(" Pull failed:",z)}if(console.log(" Pushing local snippets..."),t.length>0){const z=localStorage.getItem("google_drive_access_token");if(!z){h("No Drive API access token available");return}const M=49e3,le=[];t.forEach(ve=>{const Pe=ve.content||"";if(Pe.length<=M)le.push([ve.id,ve.title||"",Pe,"",JSON.stringify(ve.tags||[]),ve.timestamp.toString(),ve.updateDate.toString(),ve.sourceType,"1","1"]);else{const ge=Math.ceil(Pe.length/M);for(let Be=0;Be<ge;Be++){const ht=Be*M,ye=Math.min((Be+1)*M,Pe.length),ut=Pe.substring(ht,ye);le.push([ve.id,Be===0&&ve.title||"",ut,"",Be===0?JSON.stringify(ve.tags||[]):"[]",ve.timestamp.toString(),ve.updateDate.toString(),ve.sourceType,(Be+1).toString(),ge.toString()])}}}),console.log(` Prepared ${le.length} rows from ${t.length} snippets`),console.log(" Clearing existing data...");const me=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${D}/values/RAG_Snippets_v1!A2:J10000:clear`,{method:"POST",headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"}});if(!me.ok){const ve=await me.text();console.error("Clear error:",ve)}console.log(` Writing ${le.length} rows...`);const Ee=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${D}/values/RAG_Snippets_v1!A2?valueInputOption=RAW`,{method:"PUT",headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"},body:JSON.stringify({values:le})});if(!Ee.ok){const ve=await Ee.text();throw console.error(" Update error:",ve),new Error(`Failed to update sheet: ${Ee.status} ${ve}`)}const Ae=await Ee.json();console.log(` Pushed ${t.length} snippets (${le.length} rows) to Google Sheets`,Ae)}else console.log(" No local snippets to push");console.log(" Manual sync complete"),f(`Synced ${t.length} snippets with Google Sheets`)}catch(D){console.error(" Manual sync failed:",D),h(`Manual sync failed: ${D instanceof Error?D.message:"Unknown error"}`)}},H=async D=>{try{console.log(` Syncing snippet #${D} from Google Sheets...`);const z=await Vv();if(!z)throw new Error("No Drive access token available");const M=await W9(D,z);if(!M){console.warn(` Snippet #${D} not found in Google Sheets`);return}const le=t.find(me=>me.id===M.id||me.content.trim()===M.content.trim());if(le){console.log(` Snippet #${D} already exists in localStorage, updating timestamp`),await R(le.id,{updateDate:Date.now()}),f(`Snippet "${M.title||"Untitled"}" synced from Google Sheets`);return}r(me=>[M,...me]),f(`Snippet "${M.title||"Untitled"}" synced from Google Sheets`),console.log(` Synced snippet #${D} from Google Sheets:`,M.title),await N(M.id,M.content,M.title)}catch(z){console.error(` Failed to sync snippet #${D}:`,z),h(`Failed to sync snippet: ${z instanceof Error?z.message:"Unknown error"}`)}};return a.jsx(WA.Provider,{value:{snippets:t,addSnippet:I,updateSnippet:R,deleteSnippets:B,mergeSnippets:F,toggleSelection:ae,selectAll:G,selectNone:$,getSelectedSnippets:J,getAllTags:ee,addTagsToSnippets:W,removeTagsFromSnippets:j,storageStats:i,checkEmbeddingStatus:U,getEmbeddingDetails:O,bulkCheckEmbeddingStatus:q,generateEmbeddings:V,syncStatus:c,triggerManualSync:ue,getUserRagSpreadsheet:_,syncSnippetFromGoogleSheets:H},children:e})},VA=C.createContext(void 0),ch={clientId:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",redirectUri:"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/callback",scope:"https://www.googleapis.com/auth/youtube.force-ssl",authUrl:"https://accounts.google.com/o/oauth2/v2/auth"},K9=({children:e})=>{const[t,r]=js("youtube_oauth_tokens",null),[n,s]=C.useState(!1),[i,l]=C.useState(null),c=C.useMemo(()=>t?Date.now()<t.expires_at-3e5:!1,[t]);C.useEffect(()=>{if(!t||!c)return;const b=t.expires_at-Date.now(),y=Math.max(0,b-6e5);if(y<=0){g();return}const k=setTimeout(()=>{g()},y);return()=>clearTimeout(k)},[t,c]);const d=C.useCallback(()=>{const b=localStorage.getItem("auth");if(!b)return null;try{return JSON.parse(b).token||null}catch{return null}},[]),h=C.useCallback(async()=>{s(!0),l(null);try{const b=crypto.randomUUID();sessionStorage.setItem("oauth_state",b);const y=new URLSearchParams({client_id:ch.clientId,redirect_uri:ch.redirectUri,response_type:"code",scope:ch.scope,access_type:"offline",prompt:"consent",state:b}),k=`${ch.authUrl}?${y}`,S=600,_=700,T=window.screenX+(window.outerWidth-S)/2,N=window.screenY+(window.outerHeight-_)/2,I=window.open(k,"oauth",`width=${S},height=${_},left=${T},top=${N}`);if(!I)throw new Error("Popup blocked. Please allow popups for this site.");const R=F=>{const ae=new URL(ch.redirectUri).origin;if(F.origin!==ae){console.warn("Ignoring message from unexpected origin:",F.origin);return}if(F.data.type==="oauth_success"){const G=sessionStorage.getItem("oauth_state");if(F.data.data.state!==G){l("Invalid state parameter - possible CSRF attack"),s(!1);return}const $={access_token:F.data.data.tokens.access_token,refresh_token:F.data.data.tokens.refresh_token,expires_at:F.data.data.tokens.expires_at,scope:F.data.data.tokens.scope,token_type:F.data.data.tokens.token_type};console.log("Successfully obtained YouTube OAuth tokens"),r($),s(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",R)}else F.data.type==="oauth_error"&&(console.error("OAuth error:",F.data.data.error),l(F.data.data.message||F.data.data.error||"Authorization failed"),s(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",R))};window.addEventListener("message",R);const B=setInterval(()=>{I.closed&&(clearInterval(B),s(!1),window.removeEventListener("message",R),sessionStorage.getItem("oauth_state")&&(l("Authorization cancelled"),sessionStorage.removeItem("oauth_state")))},500)}catch(b){console.error("OAuth flow error:",b),l(b instanceof Error?b.message:"Failed to initiate OAuth flow"),s(!1)}},[r]),g=C.useCallback(async()=>{if(!t?.refresh_token){console.warn("No refresh token available");return}try{const b=d();if(!b){console.log("Cannot refresh YouTube tokens: JWT authentication not available");return}const y="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Refreshing YouTube OAuth tokens...");const k=await fetch(`${y}/oauth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({refresh_token:t.refresh_token})});if(!k.ok){const _=await k.json().catch(()=>({}));throw new Error(_.message||`Token refresh failed: ${k.status}`)}const S=await k.json();r({access_token:S.access_token,refresh_token:S.refresh_token,expires_at:S.expires_at,scope:S.scope,token_type:S.token_type}),console.log("Successfully refreshed YouTube OAuth tokens"),l(null)}catch(b){console.error("Token refresh error:",b);const y=b instanceof Error?b.message:"Token refresh failed";y.includes("invalid_grant")?(console.warn("Refresh token invalid, clearing tokens"),r(null),l("YouTube access expired. Please reconnect.")):l(y)}},[t,r,d]),f=C.useCallback(async()=>{if(!t)return null;if(Date.now()>=t.expires_at-3e5){console.log("Access token expired or expiring soon, refreshing..."),await g();const b=localStorage.getItem("youtube_oauth_tokens");if(b)try{return JSON.parse(b).access_token}catch{return null}return null}return t.access_token},[t,g]),x=C.useCallback(async()=>{if(t)try{const b=d();if(b){const y="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Revoking YouTube OAuth tokens..."),await fetch(`${y}/oauth/revoke`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({token:t.access_token})})}}catch(b){console.error("Revoke error:",b)}finally{r(null),l(null),console.log("YouTube OAuth tokens cleared")}},[t,r,d]);return a.jsx(VA.Provider,{value:{isConnected:c,isLoading:n,tokens:t,error:i,initiateOAuthFlow:h,disconnect:x,refreshTokens:g,getAccessToken:f},children:e})},KA=()=>{const e=C.useContext(VA);if(!e)throw new Error("useYouTubeAuth must be used within a YouTubeAuthProvider");return e},XA=C.createContext(void 0);function X9({children:e}){const{accessToken:t,isAuthenticated:r}=Os(),[n,s]=C.useState(null),[i,l]=C.useState(!1),[c,d]=C.useState(null),[h,g]=C.useState(null),f=async()=>{if(!t||!r){s(null);return}l(!0),d(null);try{const y=await Ca(),k={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},S=await fetch(`${y}/billing`,{method:"GET",headers:k});if(!S.ok){const F=await S.json().catch(()=>({}));throw new Error(F.message||`HTTP ${S.status}`)}const _=await S.json();_.ttsCapabilities&&(g(_.ttsCapabilities),console.log(" Server TTS capabilities:",_.ttsCapabilities));let T=0,N=0;if(_.transactions)for(const F of _.transactions)F.type==="credit_added"?T+=Math.abs(F.cost):N+=F.cost;const I=T-N,R=I<-.01,B={userEmail:"",totalCost:parseFloat(N.toFixed(4)),creditBalance:parseFloat(Math.max(0,I).toFixed(2)),totalCredits:parseFloat(T.toFixed(2)),exceeded:R,timestamp:new Date().toISOString()};s(B),console.log(" Usage calculated from billing data:",{...B,rawTotalCredits:T,rawTotalUsage:N,rawCreditBalance:I})}catch(y){const k=y instanceof Error?y.message:"Failed to load usage";console.error(" Failed to fetch usage:",k),d(k),s(null)}finally{l(!1)}},x=y=>{if(!n)return;const k=n.totalCost+y,S=n.totalCredits-k,_=S<-.01;s({...n,totalCost:k,creditBalance:S,exceeded:_,timestamp:new Date().toISOString()}),console.log(` Added $${y.toFixed(4)} to usage - New balance: $${S.toFixed(4)}`)};C.useEffect(()=>{r&&t?f():s(null)},[r,t]);const b={usage:n,loading:i,error:c,refreshUsage:f,addCost:x,isLocked:n?.exceeded||!1,ttsCapabilities:h};return a.jsx(XA.Provider,{value:b,children:e})}function Lg(){const e=C.useContext(XA);if(e===void 0)throw new Error("useUsage must be used within a UsageProvider");return e}const QA=C.createContext(void 0),Mg=()=>{const e=C.useContext(QA);if(!e)throw new Error("useCast must be used within a CastProvider");return e},Q9=({children:e})=>{const[t,r]=C.useState(!1),[n,s]=C.useState(!1),[i,l]=C.useState(null),[c,d]=C.useState(null),[h,g]=C.useState(!1),[f,x]=C.useState(!1),b="DE7507EF",y=C.useCallback(()=>{if(!window.chrome?.cast){console.log("Cast API not available yet, will retry...");return}const G=new chrome.cast.SessionRequest(b),$=new chrome.cast.ApiConfig(G,J=>{console.log("Cast session started:",J),d(J),s(!0),l(J.receiver.friendlyName)},J=>{console.log("Cast receiver availability:",J),r(J===chrome.cast.ReceiverAvailability.AVAILABLE)});chrome.cast.initialize($,()=>console.log("Cast initialized successfully"),J=>console.error("Cast initialization failed:",J))},[b]),k=C.useCallback(()=>{if(!chrome?.cast){console.error("Cast API not available");return}chrome.cast.requestSession(G=>{console.log("Cast session requested successfully:",G),d(G),s(!0),l(G.receiver.friendlyName),G.addUpdateListener($=>{console.log("Cast session update:",$),$||(s(!1),d(null),l(null))})},G=>{console.error("Error requesting cast session:",G)})},[]),S=C.useCallback(()=>{c&&c.stop(()=>{console.log("Cast session stopped"),s(!1),d(null),l(null)},G=>console.error("Error stopping session:",G))},[c]),_=C.useCallback(G=>{if(!c||!n){console.log("No active cast session");return}try{const $="urn:x-cast:com.lambdallmproxy.chat",J={type:"MESSAGES_UPDATE",messages:G.map(ee=>({role:ee.role,content:ee.content,name:ee.name,tool_call_id:ee.tool_call_id,isStreaming:ee.isStreaming}))};c.sendMessage($,J,()=>console.log("Messages sent to receiver"),ee=>console.error("Error sending messages:",ee))}catch($){console.error("Error in sendMessages:",$)}},[c,n]),T=C.useCallback(G=>{if(!(!c||!n))try{const $="urn:x-cast:com.lambdallmproxy.chat",J={type:"SCROLL_UPDATE",position:G};c.sendMessage($,J,()=>console.log("Scroll position sent:",G),ee=>console.error("Error sending scroll:",ee))}catch($){console.error("Error in sendScrollPosition:",$)}},[c,n]),N=C.useCallback((G,$=0)=>{if(!c||!n){console.log("No active cast session for video");return}try{const J="urn:x-cast:com.lambdallmproxy.video",ee={type:"VIDEO_COMMAND",command:"load",data:{videoId:G.videoId,url:G.url,title:G.title,channel:G.channel,thumbnail:G.thumbnail,duration:G.duration,position:$},timestamp:Date.now()};c.sendMessage(J,ee,()=>{console.log("Video cast command sent:",G.title),g(!0)},W=>console.error("Error casting video:",W))}catch(J){console.error("Error in castVideo:",J)}},[c,n]),I=C.useCallback((G,$={})=>{if(!(!c||!n))try{const J="urn:x-cast:com.lambdallmproxy.video",ee={type:"VIDEO_COMMAND",command:G,data:$,timestamp:Date.now()};c.sendMessage(J,ee,()=>console.log("Video command sent:",G),W=>console.error("Error sending video command:",W)),G==="stop"&&g(!1)}catch(J){console.error("Error in sendVideoCommand:",J)}},[c,n]),R=C.useCallback(G=>{if(!c||!n){console.log("No active cast session for snippet");return}try{const $="urn:x-cast:com.lambdallmproxy.snippet",J={type:"SNIPPET_COMMAND",command:"load",data:{id:G.id,content:G.content,title:G.title||"Untitled Snippet",tags:G.tags||[],created:G.created,modified:G.modified},timestamp:Date.now()};c.sendMessage($,J,()=>{console.log("Snippet cast successfully:",G.title),x(!0)},ee=>console.error("Error casting snippet:",ee))}catch($){console.error("Error in castSnippet:",$)}},[c,n]),B=C.useCallback(G=>{if(!(!c||!n||!f))try{const $="urn:x-cast:com.lambdallmproxy.snippet",J={type:"SNIPPET_COMMAND",command:"scroll",data:{position:G},timestamp:Date.now()};c.sendMessage($,J,()=>console.log("Snippet scroll position sent:",G),ee=>console.error("Error sending snippet scroll:",ee))}catch($){console.error("Error in sendSnippetScrollPosition:",$)}},[c,n,f]),F=C.useCallback(()=>{if(!(!c||!n||!f))try{const G="urn:x-cast:com.lambdallmproxy.snippet",$={type:"SNIPPET_COMMAND",command:"stop",data:{},timestamp:Date.now()};c.sendMessage(G,$,()=>{console.log("Snippet cast stopped"),x(!1)},J=>console.error("Error stopping snippet cast:",J))}catch(G){console.error("Error in stopSnippetCast:",G)}},[c,n,f]);C.useEffect(()=>{if(document.getElementById("cast-sdk")){window.chrome?.cast&&y();return}const G=document.createElement("script");return G.id="cast-sdk",G.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",G.async=!0,G.onload=()=>{console.log("Cast SDK loaded");const $=setInterval(()=>{window.chrome?.cast&&(clearInterval($),y())},100);setTimeout(()=>clearInterval($),1e4)},document.head.appendChild(G),()=>{}},[y]);const ae={isAvailable:t,isConnected:n,deviceName:i,initializeCast:y,requestSession:k,endSession:S,sendMessages:_,sendScrollPosition:T,castVideo:N,sendVideoCommand:I,isCastingVideo:h,castSnippet:R,sendSnippetScrollPosition:B,stopSnippetCast:F,isCastingSnippet:f};return a.jsx(QA.Provider,{value:ae,children:e})},JA=C.createContext(void 0),ZA=()=>{const e=C.useContext(JA);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},J9=({children:e})=>{const[t,r]=C.useState(null),[n,s]=C.useState(!1),[i,l]=C.useState(null),[c,d]=C.useState("unknown");C.useEffect(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(b=>{d(b.state),b.addEventListener("change",()=>{d(b.state)})}).catch(()=>{d("unknown")})},[]);const h=async(b,y)=>{try{const k=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b}&lon=${y}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"LLMProxyChat/1.0"}});if(!k.ok){console.warn("Reverse geocoding failed:",k.statusText);return}const S=await k.json();if(S.address)return{city:S.address.city||S.address.town||S.address.village,state:S.address.state,country:S.address.country,postalCode:S.address.postcode,formatted:S.display_name}}catch(k){console.warn("Error reverse geocoding:",k)}},g=C.useCallback(async()=>{if(!navigator.geolocation){l("Geolocation is not supported by your browser");return}s(!0),l(null);try{const b=await new Promise((N,I)=>{navigator.geolocation.getCurrentPosition(N,I,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:y,longitude:k,accuracy:S}=b.coords,_=await h(y,k),T={latitude:y,longitude:k,accuracy:S,address:_,timestamp:Date.now()};r(T),d("granted"),localStorage.setItem("user_location",JSON.stringify(T)),console.log("Location updated:",T)}catch(b){let y="Failed to get location";b.code===1?(y="Location permission denied",d("denied")):b.code===2?y="Location unavailable":b.code===3&&(y="Location request timed out"),l(y),console.error("Geolocation error:",b)}finally{s(!1)}},[]),f=C.useCallback(()=>{r(null),l(null),localStorage.removeItem("user_location")},[]);C.useEffect(()=>{const b=localStorage.getItem("user_location");if(b)try{const y=JSON.parse(b);Date.now()-(y.timestamp||0)<1440*60*1e3?r(y):localStorage.removeItem("user_location")}catch(y){console.error("Error loading stored location:",y),localStorage.removeItem("user_location")}},[]);const x={location:t,isLoading:n,error:i,permissionState:c,requestLocation:g,clearLocation:f};return a.jsx(JA.Provider,{value:x,children:e})},Z9={version:"1.0.0",isEnabled:!1,currentProvider:"llm",currentVoice:null,rate:1,pitch:1,volume:1,autoSummarize:!0,elevenlabsApiKey:""};class gu{name="llm";provider=null;audio=null;currentOnEnd=null;constructor(t){this.provider=t||null}setProvider(t){this.provider=t}async isAvailable(){return this.provider?["openai","gemini","groq","together"].includes(this.provider.type):!1}async getVoices(){if(!this.provider)return[];switch(this.provider.type){case"openai":return[{id:"alloy",name:"Alloy",language:"en",gender:"neutral",provider:"openai"},{id:"echo",name:"Echo",language:"en",gender:"male",provider:"openai"},{id:"fable",name:"Fable",language:"en",gender:"neutral",provider:"openai"},{id:"onyx",name:"Onyx",language:"en",gender:"male",provider:"openai"},{id:"nova",name:"Nova",language:"en",gender:"female",provider:"openai"},{id:"shimmer",name:"Shimmer",language:"en",gender:"female",provider:"openai"}];case"gemini":return[{id:"en-US-Neural2-A",name:"Neural2 A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-C",name:"Neural2 C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-D",name:"Neural2 D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-E",name:"Neural2 E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-F",name:"Neural2 F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-G",name:"Neural2 G (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-H",name:"Neural2 H (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-I",name:"Neural2 I (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-J",name:"Neural2 J (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-A",name:"WaveNet A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-B",name:"WaveNet B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-C",name:"WaveNet C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-D",name:"WaveNet D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-E",name:"WaveNet E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-F",name:"WaveNet F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-A",name:"Standard A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-B",name:"Standard B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-C",name:"Standard C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-D",name:"Standard D (Male)",language:"en-US",gender:"male",provider:"google"}];case"groq":return[{id:"Aaliyah-PlayAI",name:"Aaliyah",language:"en-US",gender:"female",provider:"groq"},{id:"Adelaide-PlayAI",name:"Adelaide",language:"en-US",gender:"female",provider:"groq"},{id:"Angelo-PlayAI",name:"Angelo",language:"en-US",gender:"male",provider:"groq"},{id:"Arista-PlayAI",name:"Arista",language:"en-US",gender:"female",provider:"groq"},{id:"Atlas-PlayAI",name:"Atlas",language:"en-US",gender:"male",provider:"groq"},{id:"Basil-PlayAI",name:"Basil",language:"en-US",gender:"male",provider:"groq"},{id:"Briggs-PlayAI",name:"Briggs",language:"en-US",gender:"male",provider:"groq"},{id:"Calum-PlayAI",name:"Calum",language:"en-US",gender:"male",provider:"groq"},{id:"Celeste-PlayAI",name:"Celeste",language:"en-US",gender:"female",provider:"groq"},{id:"Cheyenne-PlayAI",name:"Cheyenne",language:"en-US",gender:"female",provider:"groq"},{id:"Chip-PlayAI",name:"Chip",language:"en-US",gender:"male",provider:"groq"},{id:"Cillian-PlayAI",name:"Cillian",language:"en-US",gender:"male",provider:"groq"},{id:"Deedee-PlayAI",name:"Deedee",language:"en-US",gender:"female",provider:"groq"},{id:"Eleanor-PlayAI",name:"Eleanor",language:"en-US",gender:"female",provider:"groq"},{id:"Fritz-PlayAI",name:"Fritz",language:"en-US",gender:"male",provider:"groq"},{id:"Gail-PlayAI",name:"Gail",language:"en-US",gender:"female",provider:"groq"},{id:"Indigo-PlayAI",name:"Indigo",language:"en-US",gender:"neutral",provider:"groq"},{id:"Jennifer-PlayAI",name:"Jennifer",language:"en-US",gender:"female",provider:"groq"},{id:"Judy-PlayAI",name:"Judy",language:"en-US",gender:"female",provider:"groq"},{id:"Mamaw-PlayAI",name:"Mamaw",language:"en-US",gender:"female",provider:"groq"},{id:"Mason-PlayAI",name:"Mason",language:"en-US",gender:"male",provider:"groq"},{id:"Mikail-PlayAI",name:"Mikail",language:"en-US",gender:"male",provider:"groq"},{id:"Mitch-PlayAI",name:"Mitch",language:"en-US",gender:"male",provider:"groq"},{id:"Nia-PlayAI",name:"Nia",language:"en-US",gender:"female",provider:"groq"},{id:"Quinn-PlayAI",name:"Quinn",language:"en-US",gender:"neutral",provider:"groq"},{id:"Ruby-PlayAI",name:"Ruby",language:"en-US",gender:"female",provider:"groq"},{id:"Thunder-PlayAI",name:"Thunder",language:"en-US",gender:"male",provider:"groq"}];case"together":return[];default:return[]}}async speak(t,r={}){if(!this.provider)throw new Error("No provider configured for TTS");console.log("LLMProviderTTSProvider: speak() called, stopping any existing audio"),this.stop();const n=await this.speakViaProxy(t,r);return this.playAudio(n,r)}async speakViaProxy(t,r){const n=await this.getApiBase();let s=this.provider.type;s==="gemini"?s="google":s==="groq"&&(s="groq");const i=localStorage.getItem("google_access_token");if(!i)throw new Error("Authentication required. Please sign in.");const l=await fetch(`${n}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:s,text:t,voice:r.voice,rate:r.rate||1,pitch:r.pitch||1,model:s==="openai"?"tts-1":void 0,apiKey:this.provider.apiKey})});if(!l.ok){const c=await l.text();throw new Error(`TTS Proxy API error: ${l.status} - ${c}`)}return await l.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(`${r}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((s,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,s()},this.audio.onerror=()=>{const l=new Error("Audio playback failed");r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)},this.audio.play().catch(l=>{const c=new Error(`Failed to start audio playback: ${l.message}`);r.onError?.(c),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(c)})})}stop(){if(console.log("LLMProviderTTSProvider: stop() called",{hasAudio:!!this.audio}),this.audio){console.log("LLMProviderTTSProvider: Stopping audio",{paused:this.audio.paused,currentTime:this.audio.currentTime,duration:this.audio.duration,src:this.audio.src?.substring(0,50)}),this.audio.onended=null,this.audio.onerror=null,this.audio.oncanplaythrough=null,this.audio.pause(),this.audio.currentTime=0;const t=this.audio;this.audio=null,t.src&&t.src.startsWith("blob:")&&(console.log("LLMProviderTTSProvider: Revoking blob URL"),URL.revokeObjectURL(t.src),t.src="");try{t.remove()}catch(r){console.warn("Failed to remove audio element:",r)}if(console.log("LLMProviderTTSProvider: Audio stopped and cleaned up"),this.currentOnEnd){console.log("LLMProviderTTSProvider: Triggering onEnd callback");const r=this.currentOnEnd;this.currentOnEnd=null,r()}}else console.log("LLMProviderTTSProvider: No audio to stop")}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop()}}class N_{name="elevenlabs";apiKey;audio=null;cachedVoices=null;currentOnEnd=null;constructor(t){this.apiKey=t}setApiKey(t){this.apiKey=t,this.cachedVoices=null}async isAvailable(){return!!this.apiKey}async getVoices(){if(this.cachedVoices)return this.cachedVoices;if(!this.apiKey)return[];try{const t=await fetch("https://api.elevenlabs.io/v1/voices",{headers:{"xi-api-key":this.apiKey,"Content-Type":"application/json"}});if(!t.ok)return console.error("Failed to fetch ElevenLabs voices:",t.status,t.statusText),[];const r=await t.json();return this.cachedVoices=r.voices.map(n=>({id:n.voice_id,name:n.name,language:n.labels?.language||"en",gender:this.detectGender(n.name,n.labels),provider:"elevenlabs"})),this.cachedVoices}catch(t){return console.error("Failed to fetch ElevenLabs voices:",t),[]}}detectGender(t,r){if(r?.gender)return r.gender.toLowerCase();const n=t.toLowerCase();return n.includes("bella")||n.includes("elli")||n.includes("rachel")||n.includes("domi")||n.includes("sarah")||n.includes("nicole")||n.includes("female")?"female":n.includes("adam")||n.includes("antoni")||n.includes("arnold")||n.includes("josh")||n.includes("sam")||n.includes("male")?"male":"neutral"}async speak(t,r={}){if(!this.apiKey)throw new Error("ElevenLabs API key not configured");const n=await this.getVoices();let s=r.voice;if(!s||!n.find(i=>i.id===s)){if(n.length===0)throw new Error("No ElevenLabs voices available");s=n[0].id}try{const i=await this.speakViaProxy(t,s,r);return this.playAudio(i,r)}catch(i){const l=i instanceof Error?i.message:"Unknown error";throw new Error(`ElevenLabs TTS failed: ${l}`)}}async speakViaProxy(t,r,n){const s=await this.getApiBase(),i=localStorage.getItem("google_id_token");if(!i)throw new Error("Authentication required. Please sign in.");const l=await fetch(`${s}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:"elevenlabs",text:t,voice:r,rate:n.rate||1,apiKey:this.apiKey})});if(!l.ok){const c=await l.text();throw new Error(`TTS Proxy API error: ${l.status} - ${c}`)}return await l.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(`${r}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((s,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,s()},this.audio.onerror=()=>{const l=new Error("Audio playback failed");r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)},this.audio.play().catch(l=>{const c=new Error(`Failed to start audio playback: ${l.message}`);r.onError?.(c),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(c)})})}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src&&this.audio.src.startsWith("blob:")&&URL.revokeObjectURL(this.audio.src),this.audio=null,this.currentOnEnd&&(console.log("ElevenLabsProvider: stop() triggering onEnd callback"),this.currentOnEnd(),this.currentOnEnd=null))}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop(),this.cachedVoices=null}}function Cu(e){let t=e;return t=t.replace(/#{1,6}\s/g,""),t=t.replace(/\*\*\*(.*?)\*\*\*/g,"$1"),t=t.replace(/\*\*(.*?)\*\*/g,"$1"),t=t.replace(/\*(.*?)\*/g,"$1"),t=t.replace(/`{1,3}[^`]*`{1,3}/g,"code"),t=t.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),t=t.replace(/<[^>]+>/g,""),t=t.replace(/&/g," and "),t=t.replace(/@/g," at "),t=t.replace(/#/g," hashtag "),t=t.replace(/\$/g," dollar "),t=t.replace(/%/g," percent "),t=t.replace(/[^\w\s.,!?;:'"()[\]{}\-]/g," "),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\. /g,". ... "),t=t.replace(/, /g,", .. "),t=t.replace(/: /g,": .. "),t=t.replace(/; /g,"; .. "),t}function e7(e){if(typeof e=="string")return Cu(e);if(Array.isArray(e)){const t=e.filter(r=>r.type==="text").map(r=>r.text||r.content||"");return Cu(t.join(" "))}if(e&&typeof e=="object"){const t=e.text||e.content||"";return Cu(String(t))}return""}function v1(e,t=500){if(e.length<=t)return e;const r=e.substring(0,t),n=Math.max(r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));return n>t*.7?r.substring(0,n+1)+" ... Content truncated for speech.":r+"... Content truncated for speech."}function t7(e,t,r=500){return t?e.length>r:!1}function e3(e){const t=e.toLowerCase();return t.includes("female")||t.includes("woman")||t.includes("alice")||t.includes("emma")||t.includes("nova")||t.includes("shimmer")||t.includes("samantha")||t.includes("victoria")||t.includes("alloy")?"female":t.includes("male")||t.includes("man")||t.includes("alex")||t.includes("daniel")||t.includes("onyx")||t.includes("echo")||t.includes("thomas")||t.includes("david")?"male":"neutral"}class r7{name="Browser Speech";synth;utterance=null;isStoppedIntentionally=!1;currentOnEndCallback=null;pollingInterval=null;constructor(){this.synth=window.speechSynthesis}async isAvailable(){return"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}async getVoices(){return await this.waitForVoices(),this.synth.getVoices().map(r=>({id:r.voiceURI,name:r.name,language:r.lang,gender:e3(r.name),provider:"browser"}))}waitForVoices(){return new Promise(t=>{if(this.synth.getVoices().length>0){t();return}const n=()=>{this.synth.removeEventListener("voiceschanged",n),t()};this.synth.addEventListener("voiceschanged",n),setTimeout(()=>{this.synth.removeEventListener("voiceschanged",n),t()},1e3)})}async speak(t,r={}){if(!t||t.trim().length===0){const i=new Error("Cannot speak empty text");throw r.onError?.(i),i}this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null;let n=Cu(t);n=v1(n,500);const s=(i,l)=>new Promise((c,d)=>{if(!i||i.trim().length===0){const g=new Error("Cannot speak empty text after preprocessing");return r.onError?.(g),d(g)}this.utterance=new SpeechSynthesisUtterance(i);const h=this.utterance;if(h.rate=r.rate||1,h.pitch=r.pitch||1,h.volume=r.volume||1,r.voice){const g=this.synth.getVoices();h.voice=g.find(f=>f.voiceURI===r.voice)||null}this.utterance.onstart=()=>r.onStart?.(),this.currentOnEndCallback=r.onEnd||null,this.utterance.onend=()=>{this.stopPolling(),r.onEnd?.(),this.currentOnEndCallback=null,this.utterance=null,c()},this.utterance.onerror=g=>{if(g.error==="synthesis-failed"&&l){const x=v1(i,200);return s(x,!1).then(c).catch(d)}const f=new Error(`Speech synthesis error: ${g.error}`);r.onError?.(f),this.currentOnEndCallback=null,this.utterance=null,d(f)},r.onBoundary&&(this.utterance.onboundary=g=>{const f=i.substring(g.charIndex,g.charIndex+g.charLength);r.onBoundary(f,g.charIndex)});try{this.synth.speak(this.utterance),this.startPolling()}catch(g){const f=new Error(`Failed to start speech: ${g}`);r.onError?.(f),this.utterance=null,d(f)}});return s(n,!0)}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval(()=>{if(this.utterance&&!this.synth.speaking&&!this.synth.pending&&(console.log("BrowserSpeechProvider: Polling detected speech stopped, triggering onEnd"),this.stopPolling(),this.currentOnEndCallback)){const t=this.currentOnEndCallback;this.currentOnEndCallback=null,this.utterance=null,t()}},500)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}stop(){if(console.log("BrowserSpeechProvider: stop() called",{hasUtterance:!!this.utterance,hasCallback:!!this.currentOnEndCallback,isStoppedIntentionally:this.isStoppedIntentionally}),this.stopPolling(),this.utterance||this.currentOnEndCallback){this.isStoppedIntentionally=!0;const t=this.currentOnEndCallback;this.synth.pause(),this.synth.cancel(),setTimeout(()=>{this.synth.speaking&&this.synth.cancel()},0),this.utterance=null,this.currentOnEndCallback=null,t&&(console.log("BrowserSpeechProvider: Manually calling onEnd callback"),setTimeout(()=>t(),0))}}pause(){this.synth.speaking&&!this.synth.paused&&this.synth.pause()}resume(){this.synth.paused&&this.synth.resume()}cleanup(){this.stopPolling(),this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null}}class n7{name="speakjs";speech=null;isPlaying=!1;isInitialized=!1;async initialize(){if(!this.isInitialized)try{const t=(await lr(async()=>{const{default:r}=await import("./speak-tts-CSiegmpO.js").then(n=>n.s);return{default:r}},[])).default;this.speech=new t,await this.speech.init({volume:1,lang:"en-US",rate:1,pitch:1,splitSentences:!0}),this.isInitialized=!0,console.log(" speak.js: Initialized successfully")}catch(t){console.warn(" speak.js: Failed to initialize, will use silent fallback:",t)}}async isAvailable(){return!0}async getVoices(){if(await this.initialize(),this.speech&&this.isInitialized)try{return this.speech.voices().map(r=>({id:r.voiceURI||r.name,name:r.name,language:r.lang,gender:e3(r.name),provider:"speakjs"}))}catch(t){console.warn(" speak.js: Failed to get voices:",t)}return[{id:"speakjs-en",name:"speak.js English",language:"en-US",gender:"neutral",provider:"speakjs"}]}async speak(t,r={}){return this.stop(),await this.initialize(),this.speech&&this.isInitialized?new Promise((n,s)=>{this.isPlaying=!0,r.onStart?.(),this.speech.speak({text:t,queue:!1,listeners:{onstart:()=>{console.log(" speak.js: Started speaking")},onend:()=>{console.log(" speak.js: Finished speaking"),this.isPlaying=!1,r.onEnd?.(),n()},onerror:i=>{console.error(" speak.js: Error:",i),this.isPlaying=!1,r.onError?.(i),s(i)}}}).catch(i=>{console.error(" speak.js: speak() failed:",i),this.isPlaying=!1,r.onError?.(i),s(i)})}):(console.warn(" speak.js: Library not available, using silent fallback"),this.silentFallback(t,r))}async silentFallback(t,r={}){return new Promise(n=>{r.onStart?.(),this.isPlaying=!0;const s=Math.min(t.length*80,1e4);setTimeout(()=>{this.isPlaying&&(r.onEnd?.(),this.isPlaying=!1,n())},s)})}stop(){if(this.isPlaying=!1,this.speech&&this.isInitialized)try{this.speech.cancel()}catch(t){console.warn(" speak.js: Error stopping speech:",t)}}pause(){if(this.speech&&this.isInitialized)try{this.speech.pause()}catch{console.warn(" speak.js: Pause not supported")}}resume(){if(this.speech&&this.isInitialized)try{this.speech.resume()}catch{console.warn(" speak.js: Resume not supported")}}cleanup(){this.stop(),this.speech=null,this.isInitialized=!1}}class a7{providers=new Map;llmProviders=[];async initializeProviders(t,r){this.llmProviders=t,this.providers.clear(),await this.initializeLLMProviders();const n=this.getBestLLMProviderForTTS();if(n){const l=new gu(n);await l.isAvailable()&&this.providers.set("llm",l)}if(r){const l=new N_(r);await l.isAvailable()&&this.providers.set("elevenlabs",l)}const s=new r7;await s.isAvailable()&&this.providers.set("browser",s);const i=new n7;await i.isAvailable()&&this.providers.set("speakjs",i)}async initializeLLMProviders(){const t=this.llmProviders.find(i=>i.type==="openai"&&i.enabled!==!1);if(t){const i=new gu(t);await i.isAvailable()&&this.providers.set("openai-tts",i)}const r=this.llmProviders.find(i=>i.type==="groq"&&i.enabled!==!1);if(r){const i=new gu(r);await i.isAvailable()&&this.providers.set("groq-tts",i)}const n=this.llmProviders.find(i=>i.type==="gemini"&&i.enabled!==!1);if(n){const i=new gu(n);await i.isAvailable()&&this.providers.set("gemini-tts",i)}const s=this.llmProviders.find(i=>i.type==="together"&&i.enabled!==!1);if(s){const i=new gu(s);await i.isAvailable()&&this.providers.set("together-tts",i)}}getBestLLMProviderForTTS(){const t=["openai","gemini","groq","together"];for(const r of t){const n=this.llmProviders.find(s=>s.type===r&&s.enabled!==!1);if(n)return n}return null}getProvider(t){return this.providers.get(t)}getAvailableProviders(){const t=Array.from(this.providers.keys());t.includes("elevenlabs")||t.push("elevenlabs");const r=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];return t.sort((n,s)=>{const i=r.indexOf(n),l=r.indexOf(s);return(i===-1?999:i)-(l===-1?999:l)})}getAvailableLLMProviders(){return this.llmProviders.filter(t=>t.enabled!==!1&&["openai","gemini","groq","together"].includes(t.type)).map(t=>({type:t.type,name:this.getLLMProviderDisplayName(t.type)}))}getLLMProviderByType(t){return this.llmProviders.find(r=>r.type===t&&r.enabled!==!1)||null}getLLMProviderDisplayName(t){return{openai:"OpenAI",gemini:"Gemini",groq:"Groq",together:"Together AI"}[t]||t}getDefaultProvider(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t){const n=this.providers.get(r);if(n)return n}return null}getDefaultProviderType(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t)if(this.providers.has(r))return r;return null}async updateLLMProviders(t){this.llmProviders=t;const r=this.getBestLLMProviderForTTS();if(r){const n=this.providers.get("llm");if(n)n.setProvider(r);else{const s=new gu(r);await s.isAvailable()&&this.providers.set("llm",s)}}else this.providers.delete("llm")}async updateElevenLabsApiKey(t){if(t){const r=this.providers.get("elevenlabs");if(r)r.setApiKey(t);else{const n=new N_(t);await n.isAvailable()&&this.providers.set("elevenlabs",n)}}else this.providers.delete("elevenlabs")}cleanup(){this.providers.forEach(t=>{if(t&&typeof t.stop=="function")try{t.stop()}catch(r){console.warn("Error stopping TTS provider:",r)}if(t&&typeof t.cleanup=="function")try{t.cleanup()}catch(r){console.warn("Error cleaning up TTS provider:",r)}}),this.providers.clear()}getCurrentLLMProviderInfo(){const t=this.getBestLLMProviderForTTS();return t?{name:{openai:"OpenAI",gemini:"Google Gemini",groq:"Groq",together:"Together AI",atlascloud:"Atlas Cloud"}[t.type]||t.type,type:t.type}:null}}class s7{async generateSpeakableSummary(t,r){if(t.length<500)return Cu(t);const n=`Convert the following text into a concise, natural-sounding spoken summary. 
The summary should:
- Be 2-3 sentences maximum
- Sound natural when read aloud
- Capture the key points
- Avoid technical jargon or formatting
- Use conversational language

Text to summarize:
${t}

Speakable summary:`;try{const s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a helpful assistant that creates concise, natural-sounding spoken summaries."},{role:"user",content:n}],provider:r.type,apiKey:r.apiKey,maxTokens:200,temperature:.7,ttsMode:!0})});if(!s.ok)throw new Error(`Summary API error: ${s.status}`);const i=await s.json();let l="";if(i.choices&&i.choices[0]?.message?.content)l=i.choices[0].message.content;else if(i.content)l=i.content;else throw new Error("No summary content in response");return Cu(l)}catch(s){return console.error("Failed to generate speakable summary:",s),v1(t,500)}}shouldSummarize(t,r,n=500){return r?t.length>n:!1}}const t3=C.createContext(void 0),i7=({children:e})=>{const{settings:t}=Ui(),{ttsCapabilities:r}=Lg(),[n,s]=js("tts_settings",Z9),[i]=C.useState(()=>new a7),[l]=C.useState(()=>new s7),[c,d]=C.useState(null),h=C.useRef(!1),[g,f]=C.useState({isEnabled:n.isEnabled,isPlaying:!1,currentText:null,currentProvider:n.currentProvider,currentVoice:n.currentVoice,rate:n.rate,pitch:n.pitch,volume:n.volume,providers:[],voices:[],autoSummarize:n.autoSummarize,elevenlabsApiKey:n.elevenlabsApiKey});C.useEffect(()=>((async()=>{try{i.cleanup();const j=[...t.providers];r?.groq&&!j.some(ue=>ue.type==="groq")&&(console.log(" TTS: Adding Groq TTS from backend"),j.push({id:"backend-groq",type:"groq",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.openai&&!j.some(ue=>ue.type==="openai")&&(console.log(" TTS: Adding OpenAI TTS from backend"),j.push({id:"backend-openai",type:"openai",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.gemini&&!j.some(ue=>ue.type==="gemini")&&(console.log(" TTS: Adding Gemini TTS from backend"),j.push({id:"backend-gemini",type:"gemini",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.together&&!j.some(ue=>ue.type==="together")&&(console.log(" TTS: Adding Together TTS from backend"),j.push({id:"backend-together",type:"together",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),await i.initializeProviders(j,n.elevenlabsApiKey);const U=i.getAvailableProviders();console.log(" TTS: Available providers:",U);let O=n.currentProvider;U.includes(O)||(O=i.getDefaultProviderType()||"speakjs");const q=i.getProvider(O),V=q?await q.getVoices():[];f(ue=>({...ue,currentProvider:O,providers:[],voices:V})),O!==n.currentProvider&&s(ue=>({...ue,currentProvider:O}))}catch(j){console.error("Failed to initialize TTS providers:",j)}})(),()=>{i.cleanup()}),[t.providers,n.elevenlabsApiKey,r]),C.useEffect(()=>{(async()=>{const j=i.getProvider(n.currentProvider);if(j)try{const U=await j.getVoices();f(O=>({...O,voices:U,currentVoice:U.find(q=>q.id===O.currentVoice)?O.currentVoice:null}))}catch(U){console.error("Failed to load voices:",U),f(O=>({...O,voices:[]}))}})()},[n.currentProvider]);const x=C.useCallback(async(W,j={})=>{if(!g.isEnabled)throw new Error("TTS is disabled");console.log("TTSContext.speak() - Resetting isStoppingIntentionally flag (starting new speech)"),h.current=!1;let U=e7(W);if(j.shouldSummarize||t7(U,g.autoSummarize))try{const z=t.providers.find(M=>M.enabled!==!1&&M.apiKey);z&&(U=await l.generateSpeakableSummary(U,z))}catch(z){console.warn("Failed to generate summary, using original text:",z)}f(z=>({...z,isPlaying:!0,currentText:U})),c&&(clearTimeout(c),d(null));const O=setTimeout(()=>{console.log("TTSContext: Fallback timeout triggered - forcing isPlaying to false"),f(z=>({...z,isPlaying:!1,currentText:null})),d(null)},3e4);d(O);const V=(z=>z==="browser"?["browser","speakjs"]:z==="speakjs"?["speakjs"]:[z])(g.currentProvider),ue={voice:g.currentVoice||void 0,rate:g.rate,pitch:g.pitch,volume:g.volume,onStart:()=>{j.onStart?.()},onEnd:()=>{if(console.log("TTSContext speak onEnd callback - checking if intentional stop:",h.current),h.current){console.log("TTSContext speak onEnd - INTENTIONAL STOP, skipping onEnd callback and ensuring clean state"),c&&(clearTimeout(c),d(null)),f(z=>({...z,isPlaying:!1,currentText:null}));return}console.log("TTSContext speak onEnd callback - setting isPlaying to false"),c&&(clearTimeout(c),d(null)),f(z=>(console.log("TTSContext speak onEnd - prev state:",{isPlaying:z.isPlaying}),{...z,isPlaying:!1,currentText:null})),j.onEnd?.()},onError:z=>{f(M=>({...M,isPlaying:!1,currentText:null})),j.onError?.(z)},onBoundary:j.onBoundary,...j};let H=null,D=null;for(const z of V){const M=i.getProvider(z);if(M)try{z!==g.currentProvider?console.warn(`TTS: ${g.currentProvider} failed, falling back to ${z}`):console.log(`TTS: Using primary provider ${z}`),await M.speak(U,ue),D=z,console.log(`TTS: Successfully used provider ${z}`);break}catch(le){console.warn(`TTS provider ${z} failed:`,le),H=le;continue}}if(!D)throw f(z=>({...z,isPlaying:!1,currentText:null})),H||new Error("All TTS providers failed")},[g,t.providers,i,l]),b=C.useCallback(()=>{console.log("TTSContext.stop() called - INTENTIONAL STOP"),h.current=!0,c&&(clearTimeout(c),d(null)),typeof window<"u"&&window.speechSynthesis&&(console.log("TTSContext.stop() - Stopping speechSynthesis"),window.speechSynthesis.cancel());const W=document.querySelectorAll("audio");console.log("TTSContext.stop() - Found",W.length,"audio elements"),W.forEach(j=>{j.paused||(console.log("TTSContext.stop() - Force stopping audio element"),j.pause(),j.currentTime=0,j.src&&j.src.startsWith("blob:")&&(URL.revokeObjectURL(j.src),j.src=""))}),f(j=>{console.log("TTSContext.stop() - stopping, prev state:",{isPlaying:j.isPlaying,currentProvider:j.currentProvider});const U=i.getProvider(j.currentProvider);if(U){console.log("TTSContext.stop() - calling provider.stop()");try{U.stop()}catch(O){console.error("TTSContext.stop() - Error calling provider.stop():",O)}}else console.warn("TTSContext.stop() - no provider found for:",j.currentProvider);return{...j,isPlaying:!1,currentText:null}})},[i,c]),y=C.useCallback(()=>{f(W=>{const j=i.getProvider(W.currentProvider);return j&&j.pause&&j.pause(),W})},[i]),k=C.useCallback(()=>{f(W=>{const j=i.getProvider(W.currentProvider);return j&&j.resume&&j.resume(),W})},[i]),S=C.useCallback(W=>{f(j=>({...j,isEnabled:W})),s(j=>({...j,isEnabled:W}))},[s]),_=C.useCallback(async W=>{const j=i.getProvider(W);if(j){b();try{const U=await j.getVoices();f(O=>({...O,currentProvider:W,voices:U,currentVoice:null})),s(O=>({...O,currentProvider:W,currentVoice:null}))}catch(U){console.error("Failed to switch provider:",U)}}},[i,b,s]),T=C.useCallback(W=>{f(j=>({...j,currentVoice:W})),s(j=>({...j,currentVoice:W}))},[s]),N=C.useCallback(W=>{f(j=>({...j,rate:W})),s(j=>({...j,rate:W}))},[s]),I=C.useCallback(W=>{f(j=>({...j,pitch:W})),s(j=>({...j,pitch:W}))},[s]),R=C.useCallback(W=>{f(j=>({...j,volume:W})),s(j=>({...j,volume:W}))},[s]),B=C.useCallback(W=>{f(j=>({...j,autoSummarize:W})),s(j=>({...j,autoSummarize:W}))},[s]),F=C.useCallback(async W=>{f(U=>({...U,elevenlabsApiKey:W})),s(U=>({...U,elevenlabsApiKey:W})),await i.updateElevenLabsApiKey(W);const j=i.getAvailableProviders();console.log("Available TTS providers after ElevenLabs update:",j)},[s,i]),ae=C.useCallback(()=>i.getAvailableProviders(),[i]),G=C.useCallback(async W=>{const j=i.getProvider(W);return j?await j.getVoices():[]},[i]),$=C.useCallback(async(W,j)=>x(W,{shouldSummarize:j}),[x]),J=C.useCallback(async(W,j)=>x(W,{shouldSummarize:j}),[x]),ee={state:g,speak:x,stop:b,pause:y,resume:k,setEnabled:S,setProvider:_,setVoice:T,setRate:N,setPitch:I,setVolume:R,setAutoSummarize:B,setElevenLabsApiKey:F,getAvailableProviders:ae,getVoicesForProvider:G,speakResponse:$,speakSnippet:J};return a.jsx(t3.Provider,{value:ee,children:e})},nm=()=>{const e=C.useContext(t3);if(!e)throw new Error("useTTS must be used within a TTSProvider");return e},o7="ChatHistoryDB",l7=1,ea="chats";class c7{db=null;initPromise=null;async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(o7,l7);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("IndexedDB initialized successfully"),t(this.db)},n.onupgradeneeded=s=>{const i=s.target.result;i.objectStoreNames.contains(ea)||(i.createObjectStore(ea,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("Created chat history object store"))}}),this.initPromise)}async saveChat(t,r,n,s){try{const c=(await this.init()).transaction([ea],"readwrite").objectStore(ea),d={id:t,messages:r,timestamp:Date.now(),title:n,...s?.systemPrompt&&{systemPrompt:s.systemPrompt},...s?.planningQuery&&{planningQuery:s.planningQuery},...s?.generatedSystemPrompt&&{generatedSystemPrompt:s.generatedSystemPrompt},...s?.generatedUserQuery&&{generatedUserQuery:s.generatedUserQuery},...s?.selectedSnippetIds&&{selectedSnippetIds:s.selectedSnippetIds},...s?.todosState&&{todosState:s.todosState}};await new Promise((h,g)=>{const f=c.put(d);f.onsuccess=()=>h(),f.onerror=()=>g(f.error)}),console.log(`Saved chat ${t} to IndexedDB with planning/todos metadata`)}catch(i){throw console.error("Error saving chat to IndexedDB:",i),i}}async getChat(t){try{const s=(await this.init()).transaction([ea],"readonly").objectStore(ea);return new Promise((i,l)=>{const c=s.get(t);c.onsuccess=()=>{const d=c.result;i(d?d.messages:null)},c.onerror=()=>l(c.error)})}catch(r){return console.error("Error getting chat from IndexedDB:",r),null}}async getChatWithMetadata(t){try{const s=(await this.init()).transaction([ea],"readonly").objectStore(ea);return new Promise((i,l)=>{const c=s.get(t);c.onsuccess=()=>{const d=c.result;i(d||null)},c.onerror=()=>l(c.error)})}catch(r){return console.error("Error getting chat with metadata from IndexedDB:",r),null}}async getAllChats(){try{const n=(await this.init()).transaction([ea],"readonly").objectStore(ea);return new Promise((s,i)=>{const l=n.getAll();l.onsuccess=()=>s(l.result||[]),l.onerror=()=>i(l.error)})}catch(t){return console.error("Error getting all chats from IndexedDB:",t),[]}}async deleteChat(t){try{const s=(await this.init()).transaction([ea],"readwrite").objectStore(ea);await new Promise((i,l)=>{const c=s.delete(t);c.onsuccess=()=>i(),c.onerror=()=>l(c.error)}),console.log(`Deleted chat ${t} from IndexedDB`)}catch(r){throw console.error("Error deleting chat from IndexedDB:",r),r}}async clearAllChats(){try{const n=(await this.init()).transaction([ea],"readwrite").objectStore(ea);await new Promise((s,i)=>{const l=n.clear();l.onsuccess=()=>s(),l.onerror=()=>i(l.error)}),console.log("Cleared all chats from IndexedDB")}catch(t){throw console.error("Error clearing all chats from IndexedDB:",t),t}}async getOldestChats(t){try{const i=(await this.init()).transaction([ea],"readonly").objectStore(ea).index("timestamp");return new Promise((l,c)=>{const d=i.openCursor(),h=[];d.onsuccess=g=>{const f=g.target.result;f&&h.length<t?(h.push(f.value),f.continue()):l(h)},d.onerror=()=>c(d.error)})}catch(r){return console.error("Error getting oldest chats:",r),[]}}async getCount(){try{const n=(await this.init()).transaction([ea],"readonly").objectStore(ea);return new Promise((s,i)=>{const l=n.count();l.onsuccess=()=>s(l.result),l.onerror=()=>i(l.error)})}catch(t){return console.error("Error getting chat count:",t),0}}async cleanupOldChats(t){try{const r=await this.getAllChats();if(r.length<=t)return 0;const s=r.sort((d,h)=>d.timestamp-h.timestamp).slice(0,r.length-t),l=(await this.init()).transaction([ea],"readwrite"),c=l.objectStore(ea);for(const d of s)c.delete(d.id);return await new Promise((d,h)=>{l.oncomplete=()=>d(),l.onerror=()=>h(l.error)}),console.log(`Cleaned up ${s.length} old chats`),s.length}catch(r){return console.error("Error cleaning up old chats:",r),0}}async migrateFromLocalStorage(){try{let t=0;const r=Object.keys(localStorage).filter(n=>n.startsWith("chat_history_"));for(const n of r)try{const s=localStorage.getItem(n);if(s){const i=JSON.parse(s),l=n.replace("chat_history_","");await this.saveChat(l,i),localStorage.removeItem(n),t++}}catch(s){console.error(`Error migrating ${n}:`,s)}return t>0&&console.log(`Migrated ${t} chat histories from localStorage to IndexedDB`),t}catch(t){return console.error("Error during migration:",t),0}}}const lc=new c7,r3=({onOpenSettings:e,hideGitHub:t=!1})=>{const r=pl(),n=Co(),s=n.pathname==="/help"||n.pathname==="/privacy";return a.jsxs("div",{className:"hidden md:flex fixed bottom-4 right-4 flex-col gap-2 z-50",style:{zIndex:9999},children:[e&&a.jsx("button",{onClick:e,className:"p-3 bg-purple-600 hover:bg-purple-500 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Settings",children:a.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e&&!s&&a.jsx("button",{onClick:()=>r("/help"),className:"p-3 bg-blue-600 hover:bg-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Help & Documentation",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e&&a.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-green-600 hover:bg-green-500 dark:bg-green-700 dark:hover:bg-green-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Privacy Policy",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),!t&&a.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-gray-800 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"View on GitHub",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})},u7=()=>{const{login:e}=Os(),t=C.useRef(null),[r,n]=C.useState(!1);return C.useEffect(()=>{if(t.current){const s=()=>{if(typeof google<"u"&&google.accounts){const i="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";if(console.log("LoginScreen: Initializing Google Sign-In"),google.accounts.id.initialize({client_id:i,callback:l=>{l.credential&&(console.log("LoginScreen: Login successful"),e(l.credential))},auto_select:!1,cancel_on_tap_outside:!1}),google.accounts.id.renderButton(t.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",width:300}),r)console.log("LoginScreen: Skipping One Tap (already attempted this mount)");else{n(!0),console.log("LoginScreen: Attempting One Tap sign-in (first time this mount)");try{google.accounts.id.prompt()}catch(l){console.log("LoginScreen: One Tap prompt failed silently:",l)}}}else console.log("LoginScreen: Google SDK not loaded yet, retrying..."),setTimeout(s,100)};s()}},[e,r]),a.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:a.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"w-24 h-24 object-contain"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Research Agent"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"AI-powered research assistant"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 text-center",children:"Sign in to continue"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mb-6",children:"Authentication is required to use this application"})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{ref:t,id:"login-screen-google-signin",className:"min-w-[300px] min-h-[44px]",style:{display:"flex",alignItems:"center",justifyContent:"center"}})}),a.jsx("div",{className:"mt-6 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Secure authentication powered by Google"})]}),a.jsx(r3,{hideGitHub:!0})]})},A_=()=>{const{user:e,logout:t}=Os(),{isAvailable:r,isConnected:n,deviceName:s,requestSession:i,endSession:l}=Mg();if(!e)return null;const c=()=>{n?l():i()};return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:t,className:"btn-secondary px-3 py-2 flex items-center gap-2",title:`Sign out ${e.email}`,"aria-label":"Logout",children:[e.picture&&a.jsx("img",{src:e.picture,alt:e.name||e.email,className:"w-6 h-6 rounded-full",referrerPolicy:"no-referrer"}),a.jsx("span",{children:"Logout"})]}),r&&a.jsx("button",{onClick:c,className:`btn-secondary p-2 ${n?"bg-blue-500 text-white hover:bg-blue-600":""}`,title:n?`Casting to ${s}`:"Cast to TV","aria-label":n?`Casting to ${s}`:"Cast to TV",children:a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M1,18 v3 h3 c0,-1.66 -1.34,-3 -3,-3 z M1,14 v2 c2.76,0 5,2.24 5,5 h2 c0,-3.87 -3.13,-7 -7,-7 z M1,10 v2 c4.97,0 9,4.03 9,9 h2 c0,-6.08 -4.93,-11 -11,-11 z M21,3 H3 C1.9,3 1,3.9 1,5 v3 h2 V5 h18 v14 h-7 v2 h7 c1.1,0 2,-0.9 2,-2 V5 c0,-1.1 -0.9,-2 -2,-2 z"})})})]})};function yc(e,t,r=!0){const n=C.useRef(null),s=C.useCallback(l=>{l.key==="Escape"&&t()},[t]),i=C.useCallback(l=>{r&&n.current&&l.target===n.current&&t()},[t,r]);return C.useEffect(()=>{if(e)return document.addEventListener("keydown",s),document.addEventListener("mousedown",i),()=>{document.removeEventListener("keydown",s),document.removeEventListener("mousedown",i)}},[e,s,i]),n}const d7=({isOpen:e,onClose:t})=>{const r=yc(e,t),{playlist:n,currentTrackIndex:s,isPlaying:i,playTrack:l,removeTrack:c,clearPlaylist:d,currentTrack:h,savedPlaylists:g,savePlaylistAs:f,loadPlaylist:x,deletePlaylist:b,previousTrack:y,nextTrack:k,togglePlayPause:S,shuffleMode:_,toggleShuffle:T,repeatMode:N,setRepeatMode:I,playbackRate:R,setPlaybackRate:B,volume:F,setVolume:ae}=bc(),{isAvailable:G,deviceName:$,castVideo:J,sendVideoCommand:ee,isCastingVideo:W}=Mg(),{showSuccess:j,showError:U}=$i(),O=C.useRef(null),[q,V]=C.useState(!1),[ue,H]=C.useState(!1),[D,z]=C.useState(""),[M,le]=C.useState("");C.useEffect(()=>{if(!e)return;const ve=Pe=>{Pe.key==="Escape"&&t()};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[e,t]);const me=C.useMemo(()=>{if(!M.trim())return n;const ve=M.toLowerCase();return n.filter(Pe=>Pe.title.toLowerCase().includes(ve)||Pe.channel?.toLowerCase().includes(ve)||Pe.description?.toLowerCase().includes(ve))},[n,M]),Ee=h7(me),Ae=me.length;return e?a.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:[" YouTube Playlist",a.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400",children:M?a.jsxs(a.Fragment,{children:["(",Ae," of ",n.length," ",n.length===1?"video":"videos",")"]}):a.jsxs(a.Fragment,{children:["(",n.length," ",n.length===1?"video":"videos",")"]})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[h&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:y,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Previous track",children:a.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),a.jsx("button",{onClick:S,className:"p-2 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors",title:i?"Pause":"Play",children:i?a.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsx("button",{onClick:k,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Next track",children:a.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1",title:"Close (Esc)",children:a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h&&a.jsxs("div",{className:"w-2/3 mx-auto flex-shrink-0 mt-4 relative",children:[a.jsx("div",{id:"dialog-player-container",className:"w-full relative"}),W&&a.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"text-center p-6",children:[a.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),a.jsxs("h3",{className:"text-white text-xl font-semibold mb-2",children:["Casting to ",$]}),a.jsx("p",{className:"text-gray-300 text-sm mb-4",children:h.title}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:()=>ee(i?"pause":"play"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded transition-colors",children:i?" Pause":" Play"}),a.jsx("button",{onClick:()=>ee("stop"),className:"px-4 py-2 bg-red-500/80 hover:bg-red-600/80 text-white rounded transition-colors",children:" Stop Casting"})]})]})}),a.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 text-white",children:[a.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1",children:h.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-300",children:[h.channel&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.channel]}),a.jsx("span",{children:""})]}),h.duration&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.duration]}),a.jsx("span",{children:""})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[" Added ",g7(h.addedAt)]})]}),h.description&&a.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-400 line-clamp-2",children:h.description})]})]}),a.jsx("div",{className:"p-3 sm:p-4",children:n.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),a.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Playlist is empty"}),a.jsx("p",{className:"text-sm mt-2",children:"Search for YouTube videos using the chat to add tracks"})]}):Ee.map(([ve,Pe])=>a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[" ",ve,a.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",Pe.length," ",Pe.length===1?"video":"videos",")"]})]}),a.jsx("div",{className:"space-y-2",children:Pe.map(ge=>{const Be=n.findIndex(ye=>ye.id===ge.id),ht=Be===s;return a.jsxs("div",{onClick:()=>{Be===s?S():l(Be)},className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg transition-all cursor-pointer ${ht?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-500":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent"}`,children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-colors",title:ht?i?"Pause":"Play":"Play this track",children:ht&&i?a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),ge.thumbnail&&a.jsx("img",{src:ge.thumbnail,alt:"",className:"w-16 h-12 object-cover rounded flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:ge.title}),ge.channel&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:ge.channel})]}),ge.duration&&a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:ge.duration}),a.jsx("button",{onClick:ye=>{ye.stopPropagation(),confirm(`Remove "${ge.title}" from playlist?`)&&c(ge.id)},className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ge.id)})})]},ve))})]}),n.length>0&&a.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:a.jsxs("div",{className:"flex-1 min-w-[200px] flex items-center gap-2",children:[a.jsx("input",{type:"text",value:M,onChange:ve=>le(ve.target.value),placeholder:" Search playlist...",className:"flex-1 px-3 py-1.5 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),M&&a.jsx("button",{onClick:()=>le(""),className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",title:"Clear search",children:""})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("button",{onClick:()=>T(),className:`px-3 py-1.5 text-xs sm:text-sm rounded transition-colors ${_?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:"Toggle shuffle",children:" Shuffle"}),a.jsxs("button",{onClick:()=>{const ve=["none","all","one"],Pe=ve.indexOf(N),ge=ve[(Pe+1)%ve.length];I(ge)},className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:`Repeat: ${N}`,children:[N==="none"&&" Repeat: Off",N==="all"&&" Repeat: All",N==="one"&&" Repeat: One"]}),a.jsxs("select",{value:R,onChange:ve=>B(parseFloat(ve.target.value)),className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:"Playback speed",children:[a.jsx("option",{value:.25,children:" 0.25x"}),a.jsx("option",{value:.5,children:" 0.5x"}),a.jsx("option",{value:.75,children:" 0.75x"}),a.jsx("option",{value:1,children:" 1x"}),a.jsx("option",{value:1.25,children:" 1.25x"}),a.jsx("option",{value:1.5,children:" 1.5x"}),a.jsx("option",{value:1.75,children:" 1.75x"}),a.jsx("option",{value:2,children:" 2x"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:""}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:F,onChange:ve=>ae(parseFloat(ve.target.value)),className:"w-16 sm:w-24",title:"Volume"})]}),G&&h&&a.jsx("button",{onClick:()=>{if(W)ee("stop");else{const ve=O.current?.getCurrentTime()||0;J({videoId:h.videoId,url:h.url,title:h.title,channel:h.channel,thumbnail:h.thumbnail,duration:h.duration},ve)}},className:`p-2 rounded transition-colors ${W?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:W?`Stop casting to ${$}`:`Cast to ${$}`,children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[a.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",onClick:()=>V(!0),children:"Save"}),a.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-green-500 hover:bg-green-600 text-white rounded transition-colors",onClick:()=>H(!0),children:"Load"}),n.length>0&&a.jsx("button",{onClick:()=>{confirm("Clear entire playlist? This cannot be undone.")&&(d(),j("Playlist cleared successfully!"))},className:"px-3 py-1.5 text-xs sm:text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:" Clear All"})]})]}),q&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Save Playlist"}),a.jsx("input",{type:"text",placeholder:"Enter playlist name...",value:D,onChange:ve=>z(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(D.trim())try{await f(D),z(""),V(!1),j(`Playlist "${D}" saved successfully!`)}catch(ve){U("Failed to save playlist: "+ve.message)}},className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",disabled:!D.trim(),children:"Save"}),a.jsx("button",{onClick:()=>{z(""),V(!1)},className:"flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"})]})]})}),ue&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Load Playlist"}),g.length===0?a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No saved playlists found."}):a.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:g.map(ve=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:ve.name}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[ve.trackCount," tracks  ",new Date(ve.updatedAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{try{await x(ve.id),H(!1),j(`Playlist "${ve.name}" loaded successfully!`)}catch(Pe){U("Failed to load playlist: "+Pe.message)}},className:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded",children:"Load"}),a.jsx("button",{onClick:async()=>{if(confirm(`Delete "${ve.name}"?`))try{await b(ve.id),j(`Playlist "${ve.name}" deleted!`)}catch(Pe){U("Failed to delete playlist: "+Pe.message)}},className:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded",children:"Delete"})]})]},ve.id))}),a.jsx("button",{onClick:()=>H(!1),className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Close"})]})})]})}):null};function h7(e){const t=new Map,r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()-1);const s=new Date(r);return s.setDate(s.getDate()-7),e.forEach(i=>{const l=new Date(i.addedAt);l.setHours(0,0,0,0);let c;l.getTime()===r.getTime()?c="Today":l.getTime()===n.getTime()?c="Yesterday":l>s?c="This Week":c=l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:l.getFullYear()!==r.getFullYear()?"numeric":void 0}),t.has(c)||t.set(c,[]),t.get(c).push(i)}),Array.from(t.entries())}function g7(e){const t=new Date(e),n=new Date().getTime()-t.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),l=Math.floor(n/864e5);return s<1?"just now":s<60?`${s}m ago`:i<24?`${i}h ago`:l<7?`${l}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function j_(e){if(!e||!isFinite(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`}const p7=()=>{const{playlist:e,isPlaying:t,currentTrack:r,togglePlayPause:n,nextTrack:s,previousTrack:i}=bc(),{isLoading:l,currentTime:c,duration:d}=RA(),[h,g]=C.useState(!1);if(e.length===0)return null;const f=()=>{console.log("[PlaylistButton] Play/Pause clicked - current isPlaying:",t),n()},x=()=>{i()},b=()=>{s()};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-sm",children:[a.jsx("button",{onClick:x,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Previous track",children:a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"})})}),a.jsx("button",{onClick:f,className:`p-1.5 sm:p-2 transition-colors ${t?"bg-blue-500 hover:bg-blue-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,title:t?"Pause":"Play",children:t?a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsx("button",{onClick:b,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Next track",children:a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z"})})}),a.jsx("div",{className:"hidden sm:flex flex-col items-start px-2 py-1 min-w-0 max-w-[150px] md:max-w-[250px]",children:l&&t?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("svg",{className:"animate-spin h-3 w-3 text-gray-700 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate w-full",children:r?.title?r.title.slice(0,10):"No track"}),d>0&&a.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono",children:[j_(c)," / ",j_(d)]})]})}),a.jsxs("button",{onClick:y=>{y.stopPropagation(),console.log("[PlaylistButton] Opening dialog, playlist size:",e.length),g(!0)},className:"p-1.5 sm:p-2 bg-purple-500 hover:bg-purple-600 text-white transition-colors flex items-center gap-1",title:"View playlist",children:[a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),a.jsx("span",{className:"hidden md:inline text-xs font-medium",children:e.length})]})]}),a.jsx(d7,{isOpen:h,onClose:()=>g(!1)})]})},f7=p7,n3=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,L_=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,M_=/\.(m3u8)($|\?)/i,m7=/\.(mpd)($|\?)/i,x7=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,b7=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,y7=/vimeo\.com\/(?!progressive_redirect).+/,v7=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,k7=/open\.spotify\.com\/(\w+)\/(\w+)/i,w7=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,S7=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,qh=(e,t)=>{if(Array.isArray(e)){for(const r of e)if(typeof r=="string"&&qh(r,t)||qh(r.src,t))return!0;return!1}return t(e)},Ti={html:e=>qh(e,t=>n3.test(t)||L_.test(t)),hls:e=>qh(e,t=>M_.test(t)),dash:e=>qh(e,t=>m7.test(t)),mux:e=>x7.test(e),youtube:e=>b7.test(e),vimeo:e=>y7.test(e)&&!L_.test(e)&&!M_.test(e),wistia:e=>v7.test(e),spotify:e=>k7.test(e),twitch:e=>w7.test(e),tiktok:e=>S7.test(e)},E7=Gn.forwardRef((e,t)=>{const r=n3.test(`${e.src}`)?"audio":"video";return Gn.createElement(r,{...e,ref:t},e.children)});var _7=E7;const T7=[{key:"hls",name:"hls.js",canPlay:Ti.hls,canEnablePIP:()=>!0,player:C.lazy(()=>lr(()=>import("./react-Ba5yuCNh.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:Ti.dash,canEnablePIP:()=>!0,player:C.lazy(()=>lr(()=>import("./react-B83jZhe5.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:Ti.mux,canEnablePIP:()=>!0,player:C.lazy(()=>lr(()=>import("./index-C3ZBIr4T.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:Ti.youtube,player:C.lazy(()=>lr(()=>import("./react-C-6DnNfR.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:Ti.vimeo,player:C.lazy(()=>lr(()=>import("./react-yEmigk4p.js"),[]))},{key:"wistia",name:"Wistia",canPlay:Ti.wistia,canEnablePIP:()=>!0,player:C.lazy(()=>lr(()=>import("./react-CiJMj0G5.js"),[]))},{key:"spotify",name:"Spotify",canPlay:Ti.spotify,canEnablePIP:()=>!1,player:C.lazy(()=>lr(()=>import("./react-CANvYP8t.js"),[]))},{key:"twitch",name:"Twitch",canPlay:Ti.twitch,canEnablePIP:()=>!1,player:C.lazy(()=>lr(()=>import("./react-DrPfG6U9.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:Ti.tiktok,canEnablePIP:()=>!1,player:C.lazy(()=>lr(()=>import("./react-C9oiSaM3.js"),[]))},{key:"html",name:"html",canPlay:Ti.html,canEnablePIP:()=>!0,player:_7}];var k1=T7;const C7={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},a3=Gn.forwardRef((e,t)=>{const{playing:r,pip:n}=e,s=e.activePlayer,i=C.useRef(null),l=C.useRef(!0);C.useEffect(()=>{var f,x;i.current&&(i.current.paused&&r===!0&&i.current.play(),!i.current.paused&&r===!1&&i.current.pause(),i.current.playbackRate=(f=e.playbackRate)!=null?f:1,i.current.volume=(x=e.volume)!=null?x:1)}),C.useEffect(()=>{var f,x,b,y,k;if(!(!i.current||!globalThis.document)){if(n&&!document.pictureInPictureElement)try{(x=(f=i.current).requestPictureInPicture)==null||x.call(f)}catch{}if(!n&&document.pictureInPictureElement)try{(y=(b=i.current).exitPictureInPicture)==null||y.call(b),(k=document.exitPictureInPicture)==null||k.call(document)}catch{}}},[n]);const c=f=>{var x,b;l.current=!0,(x=e.onReady)==null||x.call(e),(b=e.onLoadStart)==null||b.call(e,f)},d=f=>{var x,b;l.current&&(l.current=!1,(x=e.onStart)==null||x.call(e,f)),(b=e.onPlay)==null||b.call(e,f)};if(!s)return null;const h={},g=["onReady","onStart"];for(const f in e)f.startsWith("on")&&!g.includes(f)&&(h[f]=e[f]);return Gn.createElement(s,{...h,style:e.style,className:e.className,slot:e.slot,ref:C.useCallback(f=>{i.current=f,typeof t=="function"?t(f):t!==null&&(t.current=f)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:c,onPlay:d},e.children)});a3.displayName="Player";var N7=a3;const A7=C.lazy(()=>lr(()=>import("./Preview-CFnGbxmy.js"),[])),uh=[],j7=(e,t)=>{const r=s=>{for(const i of[...uh,...e])if(s&&i.canPlay(s))return i;return t||null},n=Gn.forwardRef((s,i)=>{const l={...C7,...s},{src:c,slot:d,className:h,style:g,width:f,height:x,fallback:b,wrapper:y}=l,[k,S]=C.useState(!!l.light);C.useEffect(()=>{l.light?S(!0):S(!1)},[l.light]);const _=B=>{var F;S(!1),(F=l.onClickPreview)==null||F.call(l,B)},T=B=>{if(!B)return null;const{light:F,playIcon:ae,previewTabIndex:G,oEmbedUrl:$,previewAriaLabel:J}=l;return Gn.createElement(A7,{src:B,light:F,playIcon:ae,previewTabIndex:G,previewAriaLabel:J,oEmbedUrl:$,onClickPreview:_})},N=B=>{var F,ae;const G=r(B);if(!G)return null;const{style:$,width:J,height:ee,wrapper:W}=l,j=(F=l.config)==null?void 0:F[G.key];return Gn.createElement(N7,{...l,ref:i,activePlayer:(ae=G.player)!=null?ae:G,slot:W?void 0:d,className:W?void 0:h,style:W?{display:"block",width:"100%",height:"100%"}:{display:"block",width:J,height:ee,...$},config:j})},I=y??O_,R=b===!1?O_:C.Suspense;return Gn.createElement(I,{slot:d,className:h,style:{width:f,height:x,...g}},Gn.createElement(R,{fallback:b},k?T(c):N(c)))});return n.displayName="ReactPlayer",n.addCustomPlayer=s=>{uh.push(s)},n.removeCustomPlayers=()=>{uh.length=0},n.canPlay=s=>{if(s){for(const i of[...uh,...e])if(i.canPlay(s))return!0}return!1},n.canEnablePIP=s=>{var i;if(s){for(const l of[...uh,...e])if(l.canPlay(s)&&((i=l.canEnablePIP)!=null&&i.call(l)))return!0}return!1},n},O_=({children:e})=>e,L7=k1[k1.length-1];var M7=j7(k1,L7);const O7=()=>{const e=C.useRef(null),{currentTrack:t,isPlaying:r,nextTrack:n,play:s,pause:i}=bc(),{registerPlayer:l,unregisterPlayer:c,setIsLoading:d,setCurrentTime:h,setDuration:g}=RA(),{isCastingVideo:f}=Mg();C.useEffect(()=>(e.current&&(console.log("[BackgroundPlayer] Registering player"),l(e.current)),()=>{console.log("[BackgroundPlayer] Unregistering player"),c()}),[l,c]),C.useEffect(()=>{console.log("[BackgroundPlayer] Track or playing state changed - isPlaying:",r,"currentTrack:",t?.title),t&&r?d(!0):r||d(!1)},[t,r,d]);const[x,b]=Gn.useState(!1),y=Gn.useRef(0),k=Gn.useRef(!1);if(Gn.useEffect(()=>{const N=()=>{const R=document.getElementById("dialog-player-container"),B=x,F=!!R;B!==F&&(console.log("[BackgroundPlayer] Dialog opening, last tracked position:",y.current,"isPlaying:",r),k.current=r),b(F)};N();const I=new MutationObserver(()=>{setTimeout(N,10)});return I.observe(document.body,{childList:!0,subtree:!0}),()=>I.disconnect()},[x,r]),!t)return null;const S=a.jsx(M7,{ref:N=>{e.current=N,N&&(console.log("[BackgroundPlayer] ReactPlayer ref set, registering player, dialogOpen:",x),l(N))},src:t.url,playing:r&&!f,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},className:"react-player-hide-controls",onReady:()=>{console.log("[BackgroundPlayer] ReactPlayer ready, URL:",t.url,"isPlaying:",r,"dialogOpen:",x,"savedPosition:",y.current);const N=e.current;N&&N.duration&&g(N.duration)},onTimeUpdate:N=>{const I=N.currentTarget.currentTime,R=N.currentTarget.duration;I>0&&(y.current=I,h(I),console.log("[BackgroundPlayer] Position:",I.toFixed(2))),R>0&&g(R)},onPlay:()=>{console.log("[BackgroundPlayer] Playback started - syncing play state"),r||s(),setTimeout(()=>d(!1),500)},onStart:()=>{if(console.log("[BackgroundPlayer] Media started, savedPosition:",y.current),y.current>1){const N=y.current;console.log("[BackgroundPlayer] Will seek to saved position:",N),setTimeout(()=>{const I=e.current;I&&typeof I.currentTime=="number"?(console.log("[BackgroundPlayer] Setting currentTime from",I.currentTime,"to",N),I.currentTime=N,y.current=0):console.log("[BackgroundPlayer]  Cannot seek - video element not ready")},300)}setTimeout(()=>d(!1),500)},onPause:()=>{console.log("[BackgroundPlayer]  PLAYBACK PAUSED - syncing pause state, isPlaying:",r),r&&i()},onEnded:n,onError:N=>{console.error("[BackgroundPlayer] Playback error:",N),d(!1)}},`player-${t.videoId}`);let _=document.getElementById("background-player-mount");_||(_=document.createElement("div"),_.id="background-player-mount",_.className="fixed bottom-0 left-0",_.style.cssText="width: 1px; height: 1px; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;",document.body.appendChild(_));const T=x?document.getElementById("dialog-player-container"):_;return T?J8.createPortal(a.jsx("div",{className:"w-full h-full relative bg-black",style:{aspectRatio:"16/9"},children:S}),T):null},R7={groq:/^gsk_[a-zA-Z0-9]{32,}$/,openai:/^sk-[a-zA-Z0-9_-]{20,}$/,gemini:/^AIza[a-zA-Z0-9_-]{35}$/,together:/^[a-zA-Z0-9_-]{32,}$/,atlascloud:/^apikey-[a-f0-9]{32}$/,"openai-compatible":/.+/,replicate:/^r8_[a-zA-Z0-9]{40}$/};function I7(e,t){return!e||e.trim()===""?{valid:!1,error:"API key is required"}:R7[t].test(e)?{valid:!0}:{valid:!1,error:{groq:'Groq API key must start with "gsk_" followed by at least 32 characters',openai:'OpenAI API key must start with "sk-" followed by at least 20 characters',gemini:'Gemini API key must start with "AIza" followed by 35 characters',together:"Together AI API key must be at least 32 characters",atlascloud:'Atlas Cloud API key must start with "apikey-" followed by 32 hex characters',"openai-compatible":"API key cannot be empty",replicate:'Replicate API key must start with "r8_" followed by 40 characters'}[t]}}function D7(e){if(!e||e.trim()==="")return{valid:!1,error:"Endpoint URL is required"};try{return new URL(e).protocol!=="https:"?{valid:!1,error:"Endpoint must use HTTPS protocol"}:{valid:!0}}catch{return{valid:!1,error:"Invalid URL format"}}}function P7(e){return!e||e.trim()===""?{valid:!1,error:"Model name is required for OpenAI-compatible providers"}:{valid:!0}}function B7(e){return e!==void 0&&(isNaN(e)||e<0)?{valid:!1,error:"Rate limit must be a positive number or empty"}:{valid:!0}}function w1(e){const t={};if(e.type||(t.type="Provider type is required"),e.type){const r=I7(e.apiKey||"",e.type);r.valid||(t.apiKey=r.error)}if(e.type==="openai-compatible"){const r=D7(e.apiEndpoint||"");r.valid||(t.apiEndpoint=r.error);const n=P7(e.modelName);n.valid||(t.modelName=n.error);const s=B7(e.rateLimitTPM);s.valid||(t.rateLimitTPM=s.error)}return{valid:Object.keys(t).length===0,errors:t}}function F7(e){if(!e||e.length<12)return"";const t=e.slice(0,4),r=e.slice(-4),n=Math.max(8,e.length-8);return`${t}${"".repeat(n)}${r}`}function R_(e,t){return e.type===t.type&&e.apiKey===t.apiKey}function s3(){const{settings:e,setSettings:t}=Ui(),r=C.useCallback(l=>{const c=w1(l);if(!c.valid)return{success:!1,error:Object.values(c.errors)[0]};const d={...l,id:crypto.randomUUID(),enabled:!0};return e.providers.find(g=>R_(g,d))?{success:!1,error:"A provider with this type and API key already exists"}:(t({...e,providers:[...e.providers,d]}),{success:!0})},[e,t]),n=C.useCallback((l,c)=>{const d=e.providers.find(f=>f.id===l);if(!d)return{success:!1,error:"Provider not found"};const h={...d,...c};if(!("enabled"in c&&Object.keys(c).length===1)){const f=w1(h);if(!f.valid)return{success:!1,error:Object.values(f.errors)[0]};if(e.providers.find(b=>b.id!==l&&R_(b,h)))return{success:!1,error:"A provider with this type and API key already exists"}}const g=e.providers.map(f=>f.id===l?h:f);return t({...e,providers:g}),{success:!0}},[e,t]),s=C.useCallback(l=>{t({...e,providers:e.providers.filter(c=>c.id!==l)})},[e,t]),i=C.useCallback(l=>e.providers.find(c=>c.id===l),[e.providers]);return{providers:e.providers,addProvider:r,updateProvider:n,deleteProvider:s,getProvider:i}}function $7({initialProvider:e,onSave:t,onCancel:r}){const[n,s]=C.useState(e?.type||""),[i,l]=C.useState(e?.apiKey||""),[c,d]=C.useState(e?.apiEndpoint||""),[h,g]=C.useState(e?.modelName||""),[f,x]=C.useState(e?.rateLimitTPM?.toString()||""),[b,y]=C.useState({chat:e?.capabilities?.chat!==!1,image:e?.capabilities?.image!==!1,embedding:e?.capabilities?.embedding!==!1,voice:e?.capabilities?.voice!==!1,tts:e?.capabilities?.tts!==!1}),[k,S]=C.useState(e?.allowedModels?.join(", ")||""),[_,T]=C.useState(e?.maxImageQuality||"fast"),[N,I]=C.useState({});C.useEffect(()=>{n&&n!=="openai-compatible"?d(zA[n]):n==="openai-compatible"&&d(e?.apiEndpoint||"https://")},[n,e]);const R=F=>{if(F.preventDefault(),!n){I({type:"Please select a provider type"});return}const ae={type:n,apiKey:i,apiEndpoint:c,capabilities:b};n==="openai-compatible"&&(ae.modelName=h,f&&(ae.rateLimitTPM=parseInt(f,10))),k.trim()?ae.allowedModels=k.split(",").map($=>$.trim()).filter($=>$.length>0):ae.allowedModels=null,b.image&&_&&(ae.maxImageQuality=_);const G=w1(ae);if(!G.valid){I(G.errors);return}t(ae)},B=["groq","openai","gemini","together","openai-compatible"];return a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Provider Type"}),a.jsxs("select",{value:n,onChange:F=>s(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select provider type..."}),B.map(F=>{const ae=x1[F];return a.jsxs("option",{value:F,children:[ae.icon," ",ae.name]},F)})]}),N.type&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.type})]}),n&&a.jsx("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-700",children:a.jsx("p",{className:"text-sm text-gray-400",children:x1[n].description})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Endpoint"}),a.jsx("input",{type:"text",value:c,onChange:F=>d(F.target.value),disabled:n!=="openai-compatible",className:`w-full px-3 py-2 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 ${n!=="openai-compatible"?"bg-gray-900 cursor-not-allowed":"bg-gray-800"}`,placeholder:"https://",required:!0}),n!=="openai-compatible"&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Auto-filled, not editable"}),n==="openai-compatible"&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" EDITABLE - Enter custom endpoint"}),N.apiEndpoint&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.apiEndpoint})]}),n==="openai-compatible"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Model Name"}),a.jsx("input",{type:"text",value:h,onChange:F=>g(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"llama-3.1-70b-instruct",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" REQUIRED - Exact model name for API"}),N.modelName&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.modelName})]}),n==="openai-compatible"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Rate Limit (Tokens Per Minute)"}),a.jsx("input",{type:"number",value:f,onChange:F=>x(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Leave empty for no rate limiting",min:"0"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Optional - Leave empty to disable rate limiting"}),N.rateLimitTPM&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.rateLimitTPM})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Key"}),a.jsx("input",{type:"password",value:i,onChange:F=>l(F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your API key",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Your API key for this provider"}),N.apiKey&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.apiKey})]}),a.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:"Service Capabilities"}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select which services this provider can be used for. By default, all are enabled."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.chat,onChange:F=>y({...b,chat:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:" Chat / Text Completion"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.image,onChange:F=>y({...b,image:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:" Image Generation"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.embedding,onChange:F=>y({...b,embedding:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:" Embeddings"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.voice,onChange:F=>y({...b,voice:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:" Voice / Transcription"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.tts,onChange:F=>y({...b,tts:F.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:" Text-to-Speech"})]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:" Model Access Restrictions"}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Restrict which models can be used for ALL LLM operations (chat, image generation, etc.). Leave empty to allow all models."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Allowed Models (comma-separated)"}),a.jsx("input",{type:"text",value:k,onChange:F=>S(F.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",placeholder:"Leave empty for all models, or: llama-3.1-8b-instant, gpt-4o-mini"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[" ",a.jsx("strong",{children:"Empty"})," = allow all models | ",a.jsx("strong",{children:"Non-empty"})," = exact model name must match"]}),a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Examples: ",a.jsx("code",{className:"text-blue-400",children:"llama-3.1-8b-instant"}),", ",a.jsx("code",{className:"text-blue-400",children:"black-forest-labs/FLUX.1-schnell-Free"})]})]})]}),b.image&&a.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-3",children:" Image Generation Quality Cap"}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:'Limit maximum image quality to control costs. Works together with "Allowed Models" above.'}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Maximum Quality Tier"}),a.jsxs("select",{value:_,onChange:F=>T(F.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"fast",children:"Fast (draft, <$0.001/image) - DEFAULT"}),a.jsx("option",{value:"standard",children:"Standard (normal, ~$0.002/image)"}),a.jsx("option",{value:"high",children:"High (detailed, ~$0.04/image)"}),a.jsx("option",{value:"ultra",children:"Ultra (photorealistic, ~$0.12/image)"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:" Prevents generating images above this quality tier"})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e?"Update Provider":"Save Provider"})]})]})}function U7({onEditingChange:e}={}){const{providers:t,addProvider:r,updateProvider:n,deleteProvider:s}=s3(),{loadFromGoogleDrive:i,saveToGoogleDrive:l}=Ui(),[c,d]=C.useState(!1),[h,g]=C.useState(null);C.useEffect(()=>{e&&e(c||h!==null)},[c,h,e]);const[f,x]=C.useState(null),[b,y]=C.useState(null),[k,S]=C.useState(!1),_=()=>{d(!0),g(null),x(null),y(null)},T=G=>{g(G),d(!1),x(null),y(null)},N=G=>{window.confirm("Are you sure you want to delete this provider?")&&(s(G),y("Provider deleted successfully"),setTimeout(()=>y(null),3e3))},I=G=>{if(h){const $=n(h,G);$.success?(y("Provider updated successfully"),g(null),setTimeout(()=>y(null),3e3)):x($.error||"Failed to update provider")}else{const $=r(G);$.success?(y("Provider added successfully"),d(!1),setTimeout(()=>y(null),3e3),window.dispatchEvent(new CustomEvent("provider-added"))):x($.error||"Failed to add provider")}},R=()=>{d(!1),g(null),x(null)},B=async()=>{try{S(!0),x(null),await i(),y("Settings loaded successfully from Google Drive!"),setTimeout(()=>y(null),3e3)}catch(G){x(G.message||"Failed to load settings from Google Drive")}finally{S(!1)}},F=async()=>{try{S(!0),x(null),await l(),y("Settings saved successfully to Google Drive!"),setTimeout(()=>y(null),3e3)}catch(G){x(G.message||"Failed to save settings to Google Drive")}finally{S(!1)}},ae=h?t.find(G=>G.id===h):void 0;return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Cloud Sync for Provider Credentials"}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:["Connect to Google Drive in the ",a.jsx("strong",{children:"Cloud Sync"})," tab to enable automatic synchronization of your provider settings.",y1()&&a.jsx("span",{className:"block mt-1 text-green-700 dark:text-green-400 font-medium",children:" Cloud sync is active - changes are saved automatically"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:B,disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:k?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):a.jsx(a.Fragment,{children:" Load from Drive"})}),a.jsx("button",{onClick:F,disabled:k,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm flex items-center gap-2",children:k?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):a.jsx(a.Fragment,{children:" Save to Drive"})})]})]})]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Configured Providers"}),!c&&!h&&a.jsx("button",{onClick:_,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ Add Provider"})]}),b&&a.jsx("div",{className:"p-3 bg-green-700 border border-green-400 rounded-lg",children:a.jsxs("p",{className:"text-sm text-white font-bold",children:[" ",b]})}),f&&a.jsx("div",{className:"p-3 bg-red-900/30 border border-red-700 rounded-lg",children:a.jsxs("p",{className:"text-sm text-red-400",children:[" ",f]})}),(c||h)&&a.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:[a.jsx("h4",{className:"text-md font-medium text-white mb-4",children:h?"Edit Provider":"Add Provider"}),a.jsx($7,{initialProvider:ae,onSave:I,onCancel:R})]}),!c&&!h&&a.jsx(a.Fragment,{children:t.length===0?a.jsxs("div",{className:"p-6 bg-gray-800 rounded-lg border border-gray-700 text-center",children:[a.jsx("p",{className:"text-gray-400",children:"No providers configured yet"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Click "Add Provider" to configure your first LLM provider'})]}):a.jsx("div",{className:"space-y-3",children:t.map(G=>{const $=x1[G.type]||{name:G.type||"Unknown Provider",icon:""},J=G.type==="together",ee=typeof G.enabled=="boolean"?G.enabled:!J;return a.jsxs("div",{className:`p-4 rounded-lg border transition-colors ${ee?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-gray-900 border-gray-800 hover:border-gray-700 opacity-80 grayscale"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:$.icon}),a.jsx("span",{className:`font-medium ${ee?"text-white":"text-gray-500"}`,children:$.name})]}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("button",{onClick:()=>{n(G.id,{enabled:!ee}),y(ee?`${$.name} disabled`:`${$.name} enabled`),setTimeout(()=>y(null),2e3)},className:`px-3 py-1 rounded transition-colors text-sm font-bold ${ee?"bg-green-600 hover:bg-green-700 text-white":"bg-red-700 hover:bg-red-800 text-red-100 border border-red-400"}`,title:ee?"Click to disable":"Click to enable",children:ee?"Enabled":"Disabled"}),a.jsx("button",{onClick:()=>T(G.id),className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors text-sm",title:"Edit provider",children:"Edit"}),a.jsx("button",{onClick:()=>N(G.id),className:"px-3 py-1 bg-red-700 text-white rounded hover:bg-red-600 transition-colors text-sm",title:"Delete provider",children:"Delete"})]})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Endpoint:"}),a.jsx("span",{className:"text-gray-300 break-all",children:G.apiEndpoint})]}),G.modelName&&a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Model:"}),a.jsx("span",{className:"text-gray-300",children:G.modelName})]}),G.rateLimitTPM&&a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"Rate Limit:"}),a.jsxs("span",{className:"text-gray-300",children:[G.rateLimitTPM.toLocaleString()," TPM"]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-400 min-w-[80px]",children:"API Key:"}),a.jsx("span",{className:"text-gray-300 font-mono",children:F7(G.apiKey)})]})]})]},G.id)})})}),!c&&!h&&a.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:" How Provider Selection Works:"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-400",children:[a.jsx("li",{children:" Free tier providers () are used first"}),a.jsx("li",{children:" Paid providers () are used when free tier rate limits are exceeded"}),a.jsx("li",{children:" The backend automatically selects the best model for each request"}),a.jsx("li",{children:" No need to configure rate limits or priorities - it's all automatic!"})]})]})]})}const z7=()=>{const{state:e,setEnabled:t,setProvider:r,setVoice:n,setRate:s,setPitch:i,setVolume:l,setAutoSummarize:c,setElevenLabsApiKey:d,getAvailableProviders:h}=nm(),[g,f]=C.useState([]),[x,b]=C.useState(e.voices),[y,k]=C.useState(!1);C.useEffect(()=>{const N=h();f(N)},[h]),C.useEffect(()=>{b(e.voices)},[e.voices]);const S=async N=>{k(!0);try{await r(N)}catch(I){console.error("Failed to change provider:",I)}finally{k(!1)}},_=N=>({llm:"LLM Provider (Auto)","openai-tts":"OpenAI TTS","groq-tts":"Groq TTS","gemini-tts":"Gemini TTS","together-tts":"Together AI TTS (Not Available)",elevenlabs:e.elevenlabsApiKey?"ElevenLabs (Specialized TTS)":"ElevenLabs (Needs API Key)",browser:"Browser (Web Speech API)",speakjs:"speak.js (Offline)"})[N],T=N=>({llm:"Automatically selects best available LLM provider (fallback option)","openai-tts":"OpenAI's text-to-speech model (high quality, fast)","groq-tts":"Groq's PlayAI TTS model (fast inference)","gemini-tts":"Google Gemini text-to-speech (natural voices)","together-tts":"Together AI does not provide TTS API - please use another provider",elevenlabs:e.elevenlabsApiKey?"Ultra-realistic AI voices":"Ultra-realistic AI voices (configure API key below)",browser:"Uses your browser's built-in voices",speakjs:"Offline synthesis, basic quality"})[N];return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"card bg-white dark:bg-gray-800 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Enable Text-to-Speech"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allow AI responses and snippets to be read aloud"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:N=>t(N.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),e.isEnabled&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card bg-white dark:bg-gray-800 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Auto-Summarize Long Content"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use LLM to generate concise, speakable summaries for long responses"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.autoSummarize,onChange:N=>c(N.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice Provider"}),a.jsx("div",{className:"space-y-3",children:g.map(N=>a.jsxs("label",{className:`flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 ${e.currentProvider===N?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"}`,children:[a.jsx("input",{type:"radio",name:"tts-provider",value:N,checked:e.currentProvider===N,onChange:()=>S(N),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-2",children:[_(N),N==="elevenlabs"&&!e.elevenlabsApiKey&&a.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 px-2 py-1 rounded-full",children:"Configure"})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:T(N)})]})]},N))})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Voice"}),y?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading voices..."})]}):x.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No voices available for this provider"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:x.map(N=>a.jsxs("button",{onClick:()=>n(N.id),className:`p-3 text-left border rounded-lg transition-colors ${e.currentVoice===N.id?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}`,children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:N.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[N.language,"  ",N.gender||"neutral"]})]},N.id))})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Playback Settings"}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Speed: ",e.rate.toFixed(1),"x"]}),a.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:e.rate,onChange:N=>s(parseFloat(N.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{children:"0.5x Slower"}),a.jsx("span",{children:"1.0x Normal"}),a.jsx("span",{children:"2.0x Faster"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Pitch: ",e.pitch.toFixed(1)]}),a.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:e.pitch,onChange:N=>i(parseFloat(N.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{children:"0.5 Lower"}),a.jsx("span",{children:"1.0 Normal"}),a.jsx("span",{children:"2.0 Higher"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Volume: ",Math.round(e.volume*100),"%"]}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:e.volume,onChange:N=>l(parseFloat(N.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 slider"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{children:"0% Silent"}),a.jsx("span",{children:"50%"}),a.jsx("span",{children:"100% Max"})]})]})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"ElevenLabs Authentication"}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Specialized TTS Service"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"ElevenLabs provides TTS-only services and requires separate authentication from your LLM providers."})]})]})}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key:"}),a.jsx("input",{type:"password",placeholder:"Enter ElevenLabs API key",value:e.elevenlabsApiKey,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsxs("div",{className:"mt-3 space-y-2",children:[a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Get your API key from ",a.jsx("a",{href:"https://elevenlabs.io/speech-synthesis",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ElevenLabs Dashboard"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Free tier: 10,000 characters/month"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Starter: $1/month for 30,000 characters"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Creator: $22/month for 100,000 characters"})]})]}),["llm","openai-tts","groq-tts","gemini-tts","together-tts"].includes(e.currentProvider)&&a.jsxs("div",{className:"card bg-white dark:bg-gray-800 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e.currentProvider==="llm"?"LLM Provider TTS":`${_(e.currentProvider)}`}),e.currentProvider==="together-tts"&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"TTS Not Available"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Together AI does not provide a Text-to-Speech API. Please select a different TTS provider like OpenAI TTS, Groq TTS, or Gemini TTS."})]})]})}),e.currentProvider!=="together-tts"&&a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Using Existing Configuration"}),a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:e.currentProvider==="llm"?"TTS will use your currently configured LLM provider and API key. No additional authentication required.":`TTS will use your ${_(e.currentProvider)} configuration and API key. No additional authentication required.`})]})]})})]})]})]})},uf={enabled:!1,autoEmbed:!1,embeddingModel:"text-embedding-3-small",embeddingProvider:"openai",chunkSize:1e3,chunkOverlap:200,topK:5,similarityThreshold:.3},I_=[{name:"text-embedding-3-small",provider:"openai",cost:"$0.02/1M tokens",recommended:!0},{name:"text-embedding-3-large",provider:"openai",cost:"$0.13/1M tokens"},{name:"embed-english-v3.0",provider:"cohere",cost:"$0.10/1M tokens"},{name:"m2-bert-80M-8k-retrieval",provider:"together",cost:"$0.008/1M tokens"}],H7=()=>{const{showSuccess:e,showError:t,showWarning:r}=$i(),{getUserRagSpreadsheet:n}=jg(),{user:s}=Os(),[i,l]=C.useState(uf),[c,d]=C.useState(!1),[h,g]=C.useState(!1);C.useEffect(()=>{f()},[]);const f=async()=>{try{const y=localStorage.getItem("rag_config");if(y){const k=JSON.parse(y);l({...uf,...k})}else l(uf)}catch(y){console.error("Failed to load RAG config:",y),l(uf)}},x=(y,k)=>{l(S=>({...S,[y]:k})),g(!0)},b=async()=>{try{if(d(!0),localStorage.setItem("rag_config",JSON.stringify(i)),window.dispatchEvent(new Event("rag_config_updated")),s){console.log(" User authenticated - ensuring spreadsheet exists...");const y=await n();y?(console.log(" Spreadsheet ready:",y),e("RAG settings saved! Your embeddings will sync to Google Sheets when you connect Google Drive.")):(console.warn(" Failed to get spreadsheet ID"),r("Settings saved. Connect Google Drive in Cloud Sync tab to enable automatic backup."))}else e("RAG settings saved successfully");g(!1)}catch(y){console.error("Failed to save RAG config:",y),t("Failed to save RAG settings")}finally{d(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" RAG (Retrieval-Augmented Generation)"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable semantic search over your saved snippets using embeddings. Enhances LLM responses with relevant context from your content."})]}),a.jsx("div",{className:"card p-4",children:a.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Enable RAG System"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically search your snippets when asking questions"})]}),a.jsx("input",{type:"checkbox",checked:i.enabled,onChange:y=>x("enabled",y.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})}),a.jsx("div",{className:"card p-4",children:a.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Auto-Embed New Snippets"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically generate embeddings when saving snippets"})]}),a.jsx("input",{type:"checkbox",checked:i.autoEmbed,onChange:y=>x("autoEmbed",y.target.checked),disabled:!i.enabled,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]})}),a.jsxs("div",{className:"card p-4",children:[a.jsx("label",{className:"block mb-2",children:a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Embedding Model"})}),a.jsx("select",{value:i.embeddingModel,onChange:y=>{const k=I_.find(S=>S.name===y.target.value);k&&(x("embeddingModel",k.name),x("embeddingProvider",k.provider))},disabled:!i.enabled,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:I_.map(y=>a.jsxs("option",{value:y.name,children:[y.name," (",y.cost,") ",y.recommended?" Recommended":""]},y.name))}),a.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-2",children:" Changing models requires re-embedding all content"})]}),a.jsxs("div",{className:"card p-4 space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Chunking Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2",children:a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Size: ",i.chunkSize||1e3," characters (",Math.round((i.chunkSize||1e3)/4)," tokens)"]})}),a.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:i.chunkSize||1e3,onChange:y=>x("chunkSize",parseInt(y.target.value)),disabled:!i.enabled,className:"w-full disabled:opacity-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2",children:a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Chunk Overlap: ",i.chunkOverlap||200," characters (",Math.round((i.chunkOverlap||200)/(i.chunkSize||1e3)*100),"%)"]})}),a.jsx("input",{type:"range",min:"0",max:"500",step:"50",value:i.chunkOverlap||200,onChange:y=>x("chunkOverlap",parseInt(y.target.value)),disabled:!i.enabled,className:"w-full disabled:opacity-50"})]})]}),a.jsxs("div",{className:"card p-4 space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Search Settings"}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2",children:a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Top-K Results: ",i.topK||5]})}),a.jsx("input",{type:"range",min:"1",max:"20",step:"1",value:i.topK||5,onChange:y=>x("topK",parseInt(y.target.value)),disabled:!i.enabled,className:"w-full disabled:opacity-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2",children:a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Similarity Threshold: ",(i.similarityThreshold||.3).toFixed(2)]})}),a.jsx("input",{type:"range",min:"0.3",max:"0.95",step:"0.05",value:i.similarityThreshold||.3,onChange:y=>x("similarityThreshold",parseFloat(y.target.value)),disabled:!i.enabled,className:"w-full disabled:opacity-50"})]})]}),a.jsx("div",{className:"flex gap-3",children:a.jsx("button",{onClick:b,disabled:!h||c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Saving...":"Save Settings"})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsxs("p",{children:[" ",a.jsx("strong",{children:"Tip:"})," Start with default settings (text-embedding-3-small, 1000 char chunks, 200 overlap)"]}),a.jsxs("p",{children:[" ",a.jsx("strong",{children:"Learn more:"})," Check src/rag/README.md for detailed documentation"]})]})]})},am="llm_proxy_planning_cache";function q7(){return`plan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function Uu(){try{const e=localStorage.getItem(am);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading planning cache:",e),[]}}function i3(e,t,r,n){try{const s=Uu(),i=e.trim().toLowerCase(),l=s.filter(h=>h.query.trim().toLowerCase()!==i),c={id:q7(),query:e.trim(),plan:t,systemPrompt:r,userPrompt:n,timestamp:Date.now()};l.unshift(c);const d=l.slice(0,50);localStorage.setItem(am,JSON.stringify(d)),console.log(`Plan saved (${l.length>s.length?"new":"replaced duplicate"}):`,e.trim())}catch(s){throw console.error("Error saving plan to cache:",s),s instanceof DOMException&&(s.name==="QuotaExceededError"||s.code===22)?(console.error("Storage quota exceeded. Consider:",`
1. Deleting old saved plans`,`
2. Clearing browser data`,`
3. Using persistent storage (navigator.storage.persist())`),new Error("Storage quota exceeded. Please delete some old plans to free up space, or clear your browser cache.")):s}}function G7(e){try{const r=Uu().filter(n=>n.id!==e);localStorage.setItem(am,JSON.stringify(r))}catch(t){console.error("Error deleting cached plan:",t)}}function Y7(){try{localStorage.removeItem(am)}catch(e){console.error("Error clearing planning cache:",e)}}async function W7(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate(),t=e.usage||0,r=e.quota||0,n=r>0?t/r*100:0;return{usage:t,quota:r,percentage:n}}catch(e){return console.error("Error getting storage estimate:",e),null}return null}const D_="LLM Proxy App Data",sy="saved_plans.json",iy="saved_playlists.json",P_="sync_metadata.json";let df=null;class V7{async isAuthenticated(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking authentication:",t),!1}}async getAppFolder(){if(df)return df;const t=await pi(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${D_}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Failed to search for app folder");const n=await r.json();if(n.files&&n.files.length>0)return df=n.files[0].id,n.files[0].id;const s=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:D_,mimeType:"application/vnd.google-apps.folder"})});if(!s.ok)throw new Error("Failed to create app folder");const i=await s.json();return df=i.id,i.id}async uploadFile(t,r){const n=await pi(),s=await this.getAppFolder(),i=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${s}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${n}`}});if(!i.ok)throw new Error(`Failed to search for file: ${t}`);const l=await i.json();if(l.files&&l.files.length>0){const c=l.files[0].id;if(!(await fetch(`https://www.googleapis.com/upload/drive/v3/files/${c}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:r})).ok)throw new Error(`Failed to update file: ${t}`)}else{const c={name:t,parents:[s]},d=new FormData;if(d.append("metadata",new Blob([JSON.stringify(c)],{type:"application/json"})),d.append("file",new Blob([r],{type:"application/json"})),!(await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:d})).ok)throw new Error(`Failed to create file: ${t}`)}}async downloadFile(t){try{const r=await pi(),n=await this.getAppFolder(),s=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!s.ok)throw new Error(`Failed to search for file: ${t}`);const i=await s.json();if(!i.files||i.files.length===0)return null;const l=i.files[0].id,c=await fetch(`https://www.googleapis.com/drive/v3/files/${l}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!c.ok)throw new Error(`Failed to download file: ${t}`);return await c.text()}catch(r){return console.error(`Error downloading file ${t}:`,r),null}}async syncPlans(){try{const t=Uu(),r=t.length>0?Math.max(...t.map(l=>l.timestamp)):0,n=await this.downloadFile(sy);if(!n)return t.length>0?(await this.uploadPlans(t),await this.updateSyncMetadata("plans",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const s=JSON.parse(n),i=s.length>0?Math.max(...s.map(l=>l.timestamp)):0;return i>r?(this.mergePlans(s),await this.updateSyncMetadata("plans",s.length),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:s.length}):r>i?(await this.uploadPlans(t),await this.updateSyncMetadata("plans",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length}}catch(t){return console.error("Error syncing plans:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async uploadPlans(t){const r=JSON.stringify(t,null,2);await this.uploadFile(sy,r)}async downloadPlans(){const t=await this.downloadFile(sy);return t?JSON.parse(t):[]}mergePlans(t){const r=Uu(),n=new Map;r.forEach(i=>{const l=i.query.trim().toLowerCase();n.set(l,i)}),t.forEach(i=>{const l=i.query.trim().toLowerCase(),c=n.get(l);(!c||i.timestamp>c.timestamp)&&n.set(l,i)});const s=Array.from(n.values()).sort((i,l)=>l.timestamp-i.timestamp).slice(0,50);Y7(),s.forEach(i=>{i3(i.query,i.plan,i.systemPrompt,i.userPrompt)})}async syncPlaylists(){try{await xo.init();const t=await xo.exportAllPlaylists(),r=t.length>0?Math.max(...t.map(l=>l.updatedAt)):0,n=await this.downloadFile(iy);if(!n)return t.length>0?(await this.uploadPlaylists(t),await this.updateSyncMetadata("playlists",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const s=JSON.parse(n),i=s.length>0?Math.max(...s.map(l=>l.updatedAt)):0;if(i>r){const l=await xo.importAndMergePlaylists(s);return await this.updateSyncMetadata("playlists",l),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:l}}else return r>i?(await this.uploadPlaylists(t),await this.updateSyncMetadata("playlists",t.length),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:t.length}):{success:!0,action:"no-change",timestamp:Date.now(),itemCount:t.length}}catch(t){return console.error("Error syncing playlists:",t),{success:!1,action:"error",timestamp:Date.now(),itemCount:0,error:t instanceof Error?t.message:"Unknown error"}}}async uploadPlaylists(t){const r=JSON.stringify(t,null,2);await this.uploadFile(iy,r)}async downloadPlaylists(){const t=await this.downloadFile(iy);return t?JSON.parse(t):[]}async syncAll(){const[t,r]=await Promise.all([this.syncPlans(),this.syncPlaylists()]);return{plans:t,playlists:r}}async getLastSyncTime(){return(await this.getSyncMetadata()).lastSyncTime}async getSyncMetadata(){const t=await this.downloadFile(P_);return t?JSON.parse(t):{lastSyncTime:0,lastPlansSync:0,lastPlaylistsSync:0,plansCount:0,playlistsCount:0}}async updateSyncMetadata(t,r){const n=await this.getSyncMetadata();n.lastSyncTime=Date.now(),t==="plans"?(n.lastPlansSync=Date.now(),n.plansCount=r):(n.lastPlaylistsSync=Date.now(),n.playlistsCount=r);const s=JSON.stringify(n,null,2);await this.uploadFile(P_,s)}}const o0=new V7,K7=({onClose:e})=>{const[t,r]=C.useState(!1),[n,s]=C.useState(!1),[i,l]=C.useState(null),[c,d]=C.useState(null),[h,g]=C.useState(!1),[f,x]=C.useState(null),[b,y]=C.useState(0),[k,S]=C.useState({plansCount:0,playlistsCount:0}),[_,T]=C.useState(localStorage.getItem("auto_sync_enabled")==="true");C.useEffect(()=>{const G=localStorage.getItem("google_drive_access_token"),$=localStorage.getItem("user_email");G&&G.length>0&&(r(!0),d($),N())},[]);const N=async()=>{try{const G=await o0.getSyncMetadata();y(G.lastSyncTime),S({plansCount:G.plansCount,playlistsCount:G.playlistsCount})}catch(G){console.error("Failed to load sync metadata:",G)}},I=async()=>{g(!0),x(null),l(null);try{const G=await o0.syncAll(),$=[];G.plans.action==="uploaded"?$.push(`Uploaded ${G.plans.itemCount} plan(s)`):G.plans.action==="downloaded"&&$.push(`Downloaded ${G.plans.itemCount} plan(s)`),G.playlists.action==="uploaded"?$.push(`Uploaded ${G.playlists.itemCount} playlist(s)`):G.playlists.action==="downloaded"&&$.push(`Downloaded ${G.playlists.itemCount} playlist(s)`),$.length===0?x("Everything is up to date"):x($.join(", ")),await N(),console.log(" Sync completed:",G)}catch(G){l(G.message||"Sync failed"),console.error("Sync error:",G)}finally{g(!1)}},R=()=>{const G=!_;T(G),localStorage.setItem("auto_sync_enabled",String(G))},B=G=>{if(G===0)return"Never";const J=Date.now()-G;return J<6e4?"Just now":J<36e5?`${Math.floor(J/6e4)} minutes ago`:J<864e5?`${Math.floor(J/36e5)} hours ago`:`${Math.floor(J/864e5)} days ago`},F=async()=>{s(!0),l(null);try{if(!window.google?.accounts?.oauth2)throw new Error("Google Identity Services not loaded. Please refresh the page.");const G="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";window.google.accounts.oauth2.initTokenClient({client_id:G,scope:"https://www.googleapis.com/auth/drive.file",callback:J=>{if(J.error){l(`Authentication failed: ${J.error}`),s(!1);return}if(J.access_token){const ee=J.access_token.trim().replace(/[\r\n]/g,"");if(localStorage.setItem("google_drive_access_token",ee),J.id_token)try{const j=J.id_token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),U=decodeURIComponent(atob(j).split("").map(q=>"%"+("00"+q.charCodeAt(0).toString(16)).slice(-2)).join("")),O=JSON.parse(U);O.email&&(localStorage.setItem("user_email",O.email),d(O.email))}catch(W){console.error("Failed to decode ID token:",W)}r(!0),s(!1),console.log(" Successfully authenticated with Google Drive"),window.dispatchEvent(new CustomEvent("billing-settings-changed"))}},error_callback:J=>{l(`Authentication error: ${J.message||"Unknown error"}`),s(!1)}}).requestAccessToken({prompt:"consent"})}catch(G){l(G.message||"Failed to authenticate with Google"),s(!1)}},ae=()=>{localStorage.removeItem("google_drive_access_token"),localStorage.removeItem("user_email"),r(!1),d(null),l(null)};return a.jsxs("div",{className:"cloud-sync-settings",children:[a.jsx("h2",{children:"Cloud Sync Settings"}),a.jsxs("div",{className:"auth-section",children:[a.jsx("h3",{children:"Google Drive Authentication"}),t?a.jsxs("div",{className:"auth-status",children:[a.jsxs("div",{className:"connected-info",children:[a.jsx("span",{className:"status-indicator",children:""}),a.jsxs("div",{children:[a.jsx("strong",{children:"Connected"}),c&&a.jsx("div",{className:"user-email",children:c})]})]}),a.jsx("button",{onClick:ae,className:"disconnect-button",children:"Disconnect"})]}):a.jsxs("div",{className:"auth-prompt",children:[a.jsx("p",{children:"Connect your Google account to enable automatic cloud synchronization of your settings, API keys, SWAG content, and usage logs."}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Note:"})," All sync features are automatically enabled when you connect your Google account. No additional configuration needed!"]}),a.jsx("button",{onClick:F,disabled:n,className:"google-auth-button",children:n?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{fill:"#4285F4",d:"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"}),a.jsx("path",{fill:"#34A853",d:"M9.003 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9.003 18z"}),a.jsx("path",{fill:"#FBBC05",d:"M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"}),a.jsx("path",{fill:"#EA4335",d:"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.428 0 9.003 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z"})]}),"Connect to Google Drive"]})}),i&&a.jsxs("div",{className:"error-message",children:[a.jsx("strong",{children:"Error:"})," ",i]})]})]}),t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 mt-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Plans & Playlists Sync"}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Last synced:"}),a.jsx("strong",{children:B(b)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Saved plans:"}),a.jsxs("strong",{children:[k.plansCount," items"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Saved playlists:"}),a.jsxs("strong",{children:[k.playlistsCount," items"]})]}),f&&a.jsxs("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded text-green-800 dark:text-green-100",children:[" ",f]}),a.jsx("div",{className:"flex gap-2 mt-3",children:a.jsx("button",{onClick:I,disabled:h,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Syncing..."]}):a.jsx(a.Fragment,{children:" Sync Now"})})}),a.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-blue-100 dark:bg-blue-800 rounded",children:[a.jsx("input",{type:"checkbox",id:"auto-sync",checked:_,onChange:R,className:"w-4 h-4"}),a.jsx("label",{htmlFor:"auto-sync",className:"cursor-pointer",children:"Auto-sync every 5 minutes"})]})]})]})]})}),a.jsx("div",{className:"card p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 mt-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-green-900 dark:text-green-100 mb-2",children:"Cloud Sync Enabled"}),a.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[a.jsx("p",{children:"All sync features are now active:"}),a.jsxs("ul",{className:"list-disc ml-5 mt-2 space-y-1",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Settings & Preferences:"})," Automatically synced across devices"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"API Keys (SWAG):"})," Securely backed up to your Google Drive"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"RAG Content:"})," Snippets and embeddings synced to Google Sheets"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Usage Logs:"})," Billing and transaction history backed up"]})]})]})]})]})})]})]})},X7=({isOpen:e,onClose:t,enabledTools:r,setEnabledTools:n,onOpenMCPDialog:s})=>{const i=yc(e,t),{settings:l,setSettings:c}=Ui(),{t:d,i18n:h}=aA(),{isConnected:g,isLoading:f,error:x,initiateOAuthFlow:b,disconnect:y}=KA(),{location:k,isLoading:S,error:_,permissionState:T,requestLocation:N,clearLocation:I}=ZA(),[R,B]=C.useState("general"),[F,ae]=C.useState(!1),[G,$]=C.useState(""),[J,ee]=C.useState(""),[W,j]=C.useState(!1);C.useEffect(()=>{const q=localStorage.getItem("proxy_settings");if(q)try{const V=JSON.parse(q);$(V.username||""),ee(V.password||""),j(V.enabled!==!1)}catch(V){console.error("Failed to parse proxy settings:",V)}},[e]);const U=(q,V,ue)=>{localStorage.setItem("proxy_settings",JSON.stringify({username:q,password:V,enabled:ue}))},O=q=>{h.changeLanguage(q),c({...l,language:q})};return e?a.jsx("div",{ref:i,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:a.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto",children:[a.jsx("button",{onClick:()=>B("general"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${R==="general"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" General"}),a.jsx("button",{onClick:()=>B("provider"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${R==="provider"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Provider"}),a.jsx("button",{onClick:()=>B("cloud"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="cloud"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Cloud Sync"}),a.jsx("button",{onClick:()=>B("tools"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="tools"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Tools"}),a.jsx("button",{onClick:()=>B("proxy"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="proxy"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Proxy"}),a.jsx("button",{onClick:()=>B("location"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="location"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" Location"}),a.jsx("button",{onClick:()=>B("tts"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="tts"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" TTS"}),a.jsx("button",{onClick:()=>B("rag"),className:`px-6 py-3 text-sm font-medium transition-colors border-b-2 ${R==="rag"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:" RAG"})]}),R==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:d("settings.general")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure general application settings including language and display preferences."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[" ",d("settings.language")]}),a.jsxs("select",{value:l.language||"en",onChange:q=>O(q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsxs("option",{value:"en",children:[d("languages.en")," - English"]}),a.jsxs("option",{value:"es",children:[d("languages.es")," - Spanish"]}),a.jsxs("option",{value:"fr",children:[d("languages.fr")," - French"]}),a.jsxs("option",{value:"de",children:[d("languages.de")," - German"]}),a.jsxs("option",{value:"zh",children:[d("languages.zh")," - Chinese"]}),a.jsxs("option",{value:"ja",children:[d("languages.ja")," - Japanese"]}),a.jsxs("option",{value:"ar",children:[d("languages.ar")," - Arabic"]})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Changes the interface language and instructs the AI to respond in your selected language."})]})]}),R==="provider"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" Provider Credentials"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Configure your LLM provider API keys. The backend automatically selects the best model for each request."})]}),a.jsx(U7,{onEditingChange:ae}),!F&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:" Model Selection Strategy"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Choose how the system selects models for your requests. This balances cost, quality, and performance."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[a.jsx("input",{type:"radio",name:"optimization",value:"cheap",checked:(l.optimization||"cheap")==="cheap",onChange:q=>c({...l,optimization:q.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Cheap (Recommended)"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[a.jsx("input",{type:"radio",name:"optimization",value:"balanced",checked:l.optimization==="balanced",onChange:q=>c({...l,optimization:q.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Balanced"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[a.jsx("input",{type:"radio",name:"optimization",value:"powerful",checked:l.optimization==="powerful",onChange:q=>c({...l,optimization:q.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Powerful"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer p-4 rounded-lg border-2 transition-all hover:border-blue-300 dark:hover:border-blue-700 has-[:checked]:border-blue-500 dark:has-[:checked]:border-blue-400 has-[:checked]:bg-blue-50 dark:has-[:checked]:bg-blue-900/20",children:[a.jsx("input",{type:"radio",name:"optimization",value:"fastest",checked:l.optimization==="fastest",onChange:q=>c({...l,optimization:q.target.value}),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1",children:" Fastest"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions."})]})]})]})]})]}),R==="tools"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tavily API Key (Optional)"}),a.jsx("input",{type:"password",value:l.tavilyApiKey,onChange:q=>c({...l,tavilyApiKey:q.target.value}),className:"input-field",placeholder:"tvly-..."}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided."})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Enabled Tools"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.web_search,onChange:q=>n({...r,web_search:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Web Search"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search the web for current information, news, and articles"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.execute_js,onChange:q=>n({...r,execute_js:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" JavaScript Execution"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Execute JavaScript code for calculations and data processing"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.scrape_url,onChange:q=>n({...r,scrape_url:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Web Scraping"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Extract content from specific URLs and websites"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.youtube,onChange:q=>n({...r,youtube:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" YouTube Search"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Search YouTube for videos with transcript support"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.transcribe,onChange:q=>n({...r,transcribe:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Transcribe Audio/Video"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transcribe audio/video from URLs (YouTube, MP3, MP4, etc.) using Whisper"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.generate_chart,onChange:q=>n({...r,generate_chart:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Generate Charts & Diagrams"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create interactive flowcharts, sequence diagrams, ER diagrams, Gantt charts, and more"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.generate_image,onChange:q=>n({...r,generate_image:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Generate Images (AI)"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create images using DALL-E, Stable Diffusion, and other AI models with quality tier selection"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.search_knowledge_base,onChange:q=>n({...r,search_knowledge_base:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Search Knowledge Base (Server-Side)"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Server-side RAG tool for searching project documentation and ingested content"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.manage_todos,onChange:q=>n({...r,manage_todos:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Manage Todos (Backend Queue)"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Backend todo queue management with auto-progression for multi-step workflows"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.manage_snippets,onChange:q=>n({...r,manage_snippets:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Manage Snippets (Google Sheets)"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save and search code snippets and knowledge in your personal Google Sheet"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors border-2 border-amber-200 dark:border-amber-900/50 bg-amber-50 dark:bg-amber-900/10",children:[a.jsx("input",{type:"checkbox",checked:r.ask_llm,onChange:q=>n({...r,ask_llm:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[" Recursive LLM Agent",a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium text-amber-700 bg-amber-200 dark:bg-amber-900/50 dark:text-amber-400 rounded-full",children:" HIGH TOKEN USAGE"})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium mb-1",children:"Spawn sub-agent with full tool access for complex multi-step queries"}),a.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/30 p-2 rounded border border-amber-300 dark:border-amber-800",children:[a.jsx("strong",{children:"WARNING:"})," This tool creates complete recursive conversations with all available tools and multiple iterations. Can consume ",a.jsx("strong",{children:"5-10x more tokens"})," than direct responses. Use ONLY for complex queries requiring multiple steps with different tools. Limited to 5 iterations with token budget safeguards."]})]})]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-red-50 dark:hover:bg-red-950/30 transition-colors border-3 border-red-400 dark:border-red-900 bg-red-50 dark:bg-red-950/20 shadow-md",children:[a.jsx("input",{type:"checkbox",checked:r.generate_reasoning_chain,onChange:q=>n({...r,generate_reasoning_chain:q.target.checked}),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-red-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[" Deep Reasoning Chain",a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-bold text-red-800 bg-red-300 dark:bg-red-900/70 dark:text-red-300 rounded-full animate-pulse",children:" EXTREME TOKEN USAGE"})]}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200 font-semibold mb-1",children:"Generate transparent reasoning chains with advanced reasoning models (o1, DeepSeek-R1)"}),a.jsxs("div",{className:"text-xs text-red-800 dark:text-red-300 bg-red-100 dark:bg-red-950/50 p-3 rounded border-2 border-red-400 dark:border-red-800 space-y-1",children:[a.jsx("div",{className:"font-bold text-sm mb-2",children:" CRITICAL WARNINGS:"}),a.jsxs("div",{children:[" Can consume ",a.jsx("strong",{className:"text-red-900 dark:text-red-200",children:"10-50x MORE tokens"})," than normal responses"]}),a.jsxs("div",{children:[" Uses ",a.jsx("strong",{children:"maximum reasoning depth"})," - models think extensively before responding"]}),a.jsxs("div",{children:[" May trigger ",a.jsx("strong",{children:"PARALLEL ASYNCHRONOUS TOOL CALLS"})," causing rapid token consumption"]}),a.jsxs("div",{children:[" Reasoning models charge for ",a.jsx("strong",{children:"both reasoning AND output tokens"})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-red-300 dark:border-red-800",children:[a.jsx("strong",{children:"USE ONLY FOR:"})," Complex problems requiring deep logical analysis, multi-step proofs, mathematical derivations, or strategic planning where explicit reasoning transparency is essential."]})]})]})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:g,onChange:q=>{q.preventDefault()},className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:" Use YouTube Captions API"}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Direct access to YouTube transcripts (faster than Whisper transcription)"})]}),g&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connected"]})]})}),!g&&a.jsxs("div",{className:"ml-11 mb-4",children:[a.jsx("button",{onClick:b,disabled:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors",children:f?"Connecting...":"Connect YouTube Account"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Requires Google account authorization (read-only access)"})]}),g&&a.jsx("div",{className:"ml-11 mb-4",children:a.jsx("button",{onClick:()=>{confirm("Are you sure you want to disconnect YouTube access?")&&y()},className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 border border-red-300 dark:border-red-700 rounded-lg transition-colors",children:"Disconnect YouTube Access"})}),x&&a.jsxs("div",{className:"ml-11 mb-4 text-sm text-red-600 dark:text-red-400 flex items-start gap-2",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a.jsx("span",{children:x})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"MCP Servers"}),a.jsx("button",{onClick:()=>{s(),t()},className:"btn-secondary text-sm px-4 py-2",title:"Configure Model Context Protocol Servers",children:" Configure MCP"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add and manage Model Context Protocol servers for extended functionality"})]})]}),R==="proxy"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Webshare Proxy Configuration"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Configure residential proxy for YouTube, DuckDuckGo, and content scraping to avoid rate limiting"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Username"}),a.jsx("input",{type:"text",value:G,onChange:q=>{const V=q.target.value;$(V),U(V,J,W)},placeholder:"exrihquq",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"Password"}),a.jsx("input",{type:"password",value:J,onChange:q=>{const V=q.target.value;ee(V),U(G,V,W)},placeholder:"Enter password",className:"input w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"proxyEnabled",checked:W,onChange:q=>{const V=q.target.checked;j(V),U(G,J,V)},className:"w-4 h-4"}),a.jsx("label",{htmlFor:"proxyEnabled",className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable proxy for all requests"})]})]}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 space-y-1 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:[a.jsx("p",{children:" Rotating residential IPs via p.webshare.io:80"}),a.jsx("p",{children:" Avoids rate limiting from Google and other services"}),a.jsxs("p",{children:[" Get credentials from ",a.jsx("a",{href:"https://dashboard.webshare.io/dashboard",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Webshare Dashboard"})]}),a.jsx("p",{children:" UI settings override environment variables"})]})]})}),R==="location"&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:" Location Services"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Enable location services to provide context-aware responses for local queries (weather, restaurants, directions, etc.)"}),a.jsx("div",{className:`p-6 rounded-lg border-2 ${k?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":T==="denied"?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700"}`,children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:S?a.jsxs("svg",{className:"w-12 h-12 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):k?a.jsx("svg",{className:"w-12 h-12 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}):T==="denied"?a.jsx("svg",{className:"w-12 h-12 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm1 13h-2v-2h2v2zm0-4h-2V7h2v4z"})}):a.jsx("svg",{className:"w-12 h-12 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.5",children:a.jsx("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"mb-3",children:S?a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Getting your location..."}):k?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-lg font-semibold text-green-700 dark:text-green-400 mb-2",children:"Location Enabled"}),k.address&&a.jsxs("div",{className:"space-y-1",children:[k.address.formatted&&a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:k.address.formatted}),!k.address.formatted&&a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[k.address.city,k.address.state,k.address.country].filter(Boolean).join(", ")})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsxs("div",{children:["Coordinates: ",k.latitude.toFixed(6),", ",k.longitude.toFixed(6)]}),a.jsxs("div",{children:["Accuracy: ",k.accuracy.toFixed(0)," meters"]}),a.jsxs("div",{children:["Updated: ",new Date(k.timestamp).toLocaleString()]})]})]}):T==="denied"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-lg font-semibold text-red-700 dark:text-red-400 mb-2",children:"Location Access Denied"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"You have denied location access. To enable it, please update your browser settings and reload the page."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location Not Enabled"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Click the button below to share your location. This helps provide better responses for location-specific queries."})]})}),_&&a.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:a.jsxs("div",{className:"text-sm text-red-700 dark:text-red-400 flex items-start gap-2",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a.jsx("span",{children:_})]})}),a.jsxs("div",{className:"mt-4 flex gap-3",children:[!k&&T!=="denied"&&a.jsx("button",{onClick:N,disabled:S,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Getting Location...":"Enable Location"}),k&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:N,disabled:S,className:"btn-secondary px-4 py-2",children:" Refresh"}),a.jsx("button",{onClick:I,className:"btn-secondary px-4 py-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20",children:" Clear"})]})]})]})]})}),a.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Privacy & Usage"}),a.jsxs("div",{className:"text-xs text-blue-800 dark:text-blue-300 space-y-1",children:[a.jsx("p",{children:" Your location is stored locally in your browser (not on our servers)"}),a.jsx("p",{children:" Location data is only sent to the Lambda function when you send a chat message"}),a.jsx("p",{children:" Automatically expires after 24 hours"}),a.jsx("p",{children:" You can clear your location data at any time"}),a.jsx("p",{children:" Used for: weather, local businesses, directions, time zones, regional info"})]})]})]})})]})}),R==="tts"&&a.jsx(z7,{}),R==="rag"&&a.jsx(H7,{}),R==="cloud"&&a.jsx(K7,{}),a.jsx("div",{className:"flex justify-end gap-3 mt-8",children:a.jsx("button",{onClick:t,className:"btn-primary",children:"Close"})})]})}):null},S1="llm_proxy_search_cache",Q7=7;function J7(){try{const e=localStorage.getItem(S1);if(!e)return{};const t=JSON.parse(e),r=Date.now(),n=Q7*24*60*60*1e3,s={};for(const[i,l]of Object.entries(t)){const c=l;r-c.timestamp<n&&(s[i]=c)}return Object.keys(s).length!==Object.keys(t).length&&localStorage.setItem(S1,JSON.stringify(s)),s}catch(e){return console.error("Error reading search cache:",e),{}}}function Z7(e,t){try{const r=J7(),n=e.toLowerCase().trim();r[n]={query:e.trim(),results:t,timestamp:Date.now()},localStorage.setItem(S1,JSON.stringify(r))}catch(r){console.error("Error saving search to cache:",r)}}function eF(e,t){if(e!=="search_web")return null;try{const r=JSON.parse(t);return r.query&&Array.isArray(r.results)?(Z7(r.query,r.results),{query:r.query,results:r.results}):null}catch(r){return console.error("Error extracting search result from tool call:",r),null}}const tF=({onClose:e})=>a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"LLM Transparency Info"}),a.jsx("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",onClick:e,children:""})]});function Xv(e,t=!0){if(e===null)return"N/A";const r=t?"$":"";return e<1e-4?`${r}${e.toFixed(6)}`:e<.01?`${r}${e.toFixed(4)}`:`${r}${e.toFixed(4)}`}const rF=({call:e})=>{function t(n){switch(n.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-400",text:"text-pink-700 dark:text-pink-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-400",text:"text-blue-700 dark:text-blue-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-400",text:"text-indigo-700 dark:text-indigo-300",icon:""};default:return{label:"Chat",color:"bg-gray-100 dark:bg-gray-900/30",border:"border-gray-400",text:"text-gray-700 dark:text-gray-300",icon:""}}}const r=t(e);return a.jsxs("div",{className:`border rounded-lg p-4 mb-2 ${r.color} ${r.border||""}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:`font-semibold ${r.text}`,children:[r.icon," ",r.label]}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.provider,"  ",e.model]})]}),a.jsx("div",{className:"mb-2",children:a.jsxs("span",{className:"font-mono text-sm",children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]})}),a.jsxs("div",{className:"mb-2",children:[e.cost!==void 0&&a.jsxs("span",{className:"font-semibold text-pink-700 dark:text-pink-300",children:[" ",Xv(e.cost)]}),e.durationMs&&a.jsxs("span",{className:"ml-2",children:[" ",(e.durationMs/1e3).toFixed(2),"s"]}),e.success!==void 0&&a.jsx("span",{className:e.success?"text-green-600 dark:text-green-400 ml-2":"text-red-600 dark:text-red-400 ml-2",children:e.success?" Success":" Failed"})]})]})},nF=({totalTokens:e,totalPromptTokens:t,totalCompletionTokens:r,totalActualCost:n,totalPaidEquivalent:s,hasPricing:i,hasFreeModels:l,onClose:c})=>a.jsxs("div",{className:"mt-6 border-t pt-4 text-sm text-gray-700 dark:text-gray-300",children:[a.jsxs("div",{className:"mb-2",children:["Total tokens: ",a.jsx("span",{className:"font-mono font-semibold",children:e})]}),a.jsxs("div",{className:"mb-2",children:["Prompt tokens: ",a.jsx("span",{className:"font-mono",children:t})," | Completion tokens: ",a.jsx("span",{className:"font-mono",children:r})]}),a.jsxs("div",{className:"mb-2",children:["Actual cost: ",a.jsx("span",{className:"font-mono font-semibold",children:n})]}),i&&a.jsxs("div",{className:"mb-2",children:["Paid equivalent: ",a.jsx("span",{className:"font-mono",children:s})]}),l&&a.jsx("div",{className:"mb-2 text-green-600 dark:text-green-400",children:"Some calls used free tier models."}),a.jsx("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors mt-4",onClick:c,children:"Close"})]}),aF=({apiCalls:e,onClose:t})=>a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 dark:bg-opacity-60",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl p-6 relative",children:[a.jsx(tF,{onClose:t}),a.jsx("div",{className:"space-y-4",children:e.length===0?a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((h,g)=>a.jsx(rF,{call:h},g))}),a.jsx(nF,{totalTokens:0,totalPromptTokens:0,totalCompletionTokens:0,totalActualCost:0,totalPaidEquivalent:0,hasPricing:!1,hasFreeModels:!1,onClose:t})]})}),o3=({isOpen:e,onClose:t,onTransferToChat:r})=>{const n=yc(e,t),{getToken:s,isAuthenticated:i}=Os(),{settings:l}=Ui(),{showError:c,showSuccess:d}=$i(),[h,g]=js("planning_query",""),[f,x]=js("planning_result",null),[b,y]=C.useState(!1),[k,S]=C.useState(""),[_,T]=C.useState(!1),[N,I]=C.useState([]),[R,B]=C.useState(null),[F,ae]=C.useState(null),[G,$]=C.useState(!1),J=C.useRef(null),ee=C.useRef(null),W=C.useRef(null),[j,U]=js("planning_dialog_generated_system_prompt",""),[O,q]=js("planning_dialog_generated_user_query",""),[V,ue]=C.useState(""),[H,D]=C.useState(""),[z,M]=C.useState(""),le=ye=>{ye&&(ye.style.height="auto",ye.style.height=ye.scrollHeight+"px")};C.useEffect(()=>{le(J.current)},[h]),C.useEffect(()=>{le(ee.current)},[j]),C.useEffect(()=>{le(W.current)},[O]),C.useEffect(()=>{_&&(I(Uu()),me())},[_]);const me=async()=>{const ye=await W7();B(ye)};C.useEffect(()=>{f&&f.queryType==="guidance"?(h&&ue(h),j&&D(j),O&&M(O),U(""),q("")):f&&f.queryType!=="guidance"&&V&&(H&&U(H),z&&q(z),ue(""),D(""),M(""))},[f]);const Ee=async()=>{if(!i){console.error("User not authenticated"),c("Please sign in with Google to use the planning feature"),x({error:"Authentication required. Please sign in with Google to continue."});return}if(!h.trim()){c("Please enter a research question");return}if(!b){y(!0),x(null),S("Initializing...");try{const ye=await s();if(!ye){console.error("No valid token available"),c("Authentication expired. Please sign out and sign in again to continue."),x({error:"Authentication expired. Please sign out and sign in again to continue."}),y(!1);return}console.log(" Planning with token:",{tokenLength:ye.length,tokenPrefix:ye.substring(0,20)+"...",isAuthenticated:i,hasProviders:l.providers.length});const ut=l.providers.filter(Et=>Et.enabled===!0);console.log(` Enabled providers: ${ut.length} (server may have additional credentials)`),await f1(h,ye,ut,void 0,(Et,Ze)=>{switch(console.log("Planning SSE event:",Et,Ze),Et){case"status":console.log("Status:",Ze.message),S(Ze.message||"Processing...");break;case"result":x(Ze),Ze.enhancedSystemPrompt&&U(Ze.enhancedSystemPrompt),Ze.enhancedUserPrompt&&q(Ze.enhancedUserPrompt);break;case"llm_response":ae(Ze),console.log("Captured LLM transparency info:",Ze);break;case"error":const kt=Ze.error||"Unknown error",Rt=Ze.provider&&Ze.model?` (Provider: ${Ze.provider}, Model: ${Ze.model})`:"",ur=`${kt}${Rt}`;let yt="";kt.includes("Invalid API Key")||kt.includes("401")?yt=`

 Tip: Check your API key in Settings. Make sure it's valid and hasn't expired.`:(Ze.isRateLimit||kt.includes("rate limit"))&&(yt=`

 Tip: You've hit the rate limit. Try again in a few moments or use a different provider.`),x({error:ur+yt}),c(`Planning error: ${ur}${yt}`);break;case"llm_error":console.error("LLM Error:",Ze);const bt=Ze.error||"LLM request failed",tn=Ze.provider&&Ze.modelName?` (${Ze.provider}:${Ze.modelName})`:"";c(`LLM Error${tn}: ${bt}`);break}},()=>{console.log("Planning stream complete"),y(!1),S("")},Et=>{console.error("Planning stream error:",Et),x({error:Et.message}),c(`Planning failed: ${Et.message}`),y(!1),S("")},{language:l.language||"en"})}catch(ye){console.error("Planning error:",ye);const ut=ye instanceof Error?ye.message:"Unknown error";x({error:ut}),c(`Planning error: ${ut}`),y(!1),S("")}}},Ae=()=>{if(!O||!r)return;const ye={prompt:O,persona:j||"",planningQuery:h,generatedSystemPrompt:j,generatedUserQuery:O};console.log(" PlanningDialog - Creating transfer data:",ye);const ut=JSON.stringify(ye);console.log(" PlanningDialog - JSON string length:",ut.length),r(ut),t()},ve=()=>{const ye={query:h,result:f,generatedSystemPrompt:j,generatedUserPrompt:O,llmInfo:F,timestamp:new Date().toISOString()},ut=`=== Planning Debug Info for Copilot ===
Generated at: ${ye.timestamp}

--- User Query ---
${ye.query||"(none)"}

--- Planning Result (Full Response) ---
${JSON.stringify(ye.result,null,2)}

--- Generated System Prompt ---
${ye.generatedSystemPrompt||"(none)"}

--- Generated User Query ---
${ye.generatedUserPrompt||"(none)"}

--- LLM Request/Response Details ---
${JSON.stringify(ye.llmInfo,null,2)}

=== End Debug Info ===`;navigator.clipboard.writeText(ut).then(()=>{d("Debug info copied to clipboard!")},()=>{c("Failed to copy debug info")})},Pe=ye=>{g(ye.query),x(ye.plan),ye.plan&&!ye.plan.error&&(ye.plan.enhancedSystemPrompt&&U(ye.plan.enhancedSystemPrompt),ye.plan.enhancedUserPrompt&&q(ye.plan.enhancedUserPrompt)),ye.systemPrompt&&U(ye.systemPrompt),ye.userPrompt&&q(ye.userPrompt),T(!1)},ge=ye=>{G7(ye),I(Uu())},Be=()=>{if(!f||f.error){c("Cannot save plan: No valid plan generated");return}try{i3(h,f,f.enhancedSystemPrompt||j||"",f.enhancedUserPrompt||O||""),d("Plan saved successfully"),console.log("Plan manually saved to cache with system and user prompts")}catch(ye){c(ye instanceof Error?ye.message:"Failed to save plan")}},ht=()=>{g(""),x(null),U(""),q(""),localStorage.removeItem("planning_dialog_generated_system_prompt"),localStorage.removeItem("planning_dialog_generated_user_query"),localStorage.removeItem("planning_query"),localStorage.removeItem("planning_result"),console.log("Planning dialog cleared completely")};return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:n,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Research Planning"}),a.jsx("div",{className:"ml-4",children:a.jsxs("button",{onClick:Be,disabled:!f||f.error,className:"btn-primary text-sm flex items-center gap-1.5",title:"Save the current plan to your saved plans list",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Plan"]})}),a.jsxs("button",{onClick:()=>T(!0),className:"btn-secondary text-sm flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Load Saved"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:ve,disabled:!h&&!f,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:"Copy debug info for Copilot troubleshooting",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Debug"]}),r&&a.jsxs("button",{onClick:Ae,disabled:!O||!O.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Transfer to Chat"]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[b&&k&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-blue-700",children:k})})]})}),!(f&&f.queryType==="guidance")&&a.jsxs("div",{className:"card p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Research Query"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:Ee,disabled:b||!h.trim(),title:i?h.trim()?b?"Generating plan...":"Generate research plan":"Please enter a research question":"Please sign in with Google first",className:`${i?"bg-green-600 hover:bg-green-700":"bg-yellow-500 hover:bg-yellow-600"} disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5`,children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),b?"Generating...":i?"Generate Plan":"Sign in to Generate Plan"]}),a.jsxs("button",{onClick:ht,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:"Clear all planning data and start fresh",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Clear All"]})]})]}),i?a.jsx(a.Fragment,{children:a.jsx("textarea",{ref:J,value:h,onChange:ye=>g(ye.target.value),placeholder:"Enter your research question or topic...",className:"input-field resize-none overflow-hidden",style:{minHeight:"120px"}})}):a.jsx("div",{className:"text-center text-red-500 py-4",children:"Please sign in to use planning"})]}),j&&!(f&&f.queryType==="guidance")&&a.jsxs("div",{className:"card p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Generated Prompts"}),F&&a.jsxs("button",{onClick:()=>$(!0),className:"btn-secondary text-xs px-3 py-1.5 flex items-center gap-1",title:"View LLM transparency info (model, tokens, cost)",children:[" $",(F.cost||0).toFixed(4),"  ",F.calls||1," call",F.calls>1?"s":""," "]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Generated System Prompt (Editable):"}),a.jsx("textarea",{ref:ee,value:j,onChange:ye=>U(ye.target.value),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This defines the AI's role and behavior. Edit as needed before transferring to chat."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Generated User Query (Editable):"}),a.jsx("textarea",{ref:W,value:O,onChange:ye=>q(ye.target.value),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This is the message that will be sent to the chat. Edit to refine your query."})]})]})]}),f&&!f.error&&a.jsx("div",{className:"card p-4",children:a.jsxs("div",{className:"space-y-4",children:[f.queryType==="SIMPLE"&&a.jsxs("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20",children:[a.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Simple Query Detected"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:f.simpleInstruction}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"This query can be answered directly without extensive planning."})]}),f.queryType==="OVERVIEW"&&a.jsxs("div",{className:"card p-4 space-y-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:" Comprehensive Research Plan"}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-800 dark:text-gray-200",children:" Analysis Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Query Type:"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:f.queryType})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Complexity:"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded",children:f.complexityAssessment})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Research Approach:"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:f.researchApproach})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Estimated Sources:"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded",children:f.estimatedSources||"N/A"})]})]}),f.reasoning&&a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Reasoning:"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:f.reasoning})]})]}),f.persona&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:" Expert Persona"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:f.persona})]}),f.searchStrategies?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Search Queries:"}),a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:a.jsx("ul",{className:"space-y-1",children:f.searchStrategies.map((ye,ut)=>a.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300 flex items-start",children:[a.jsx("span",{className:"text-green-500 mr-2",children:""}),a.jsxs("span",{children:['"',ye,'"']})]},ut))})})]}),f.researchQuestions?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Research Questions:"}),a.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:a.jsx("ul",{className:"list-decimal list-inside space-y-1 text-sm",children:f.researchQuestions.map((ye,ut)=>a.jsx("li",{className:"text-purple-700 dark:text-purple-300",children:ye},ut))})})]}),f.suggestedSources?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Suggested Sources:"}),a.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg",children:a.jsx("div",{className:"space-y-2",children:f.suggestedSources.map((ye,ut)=>a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"font-medium text-teal-800 dark:text-teal-200 capitalize",children:[ye.type," Sources:"]}),a.jsx("div",{className:"text-teal-700 dark:text-teal-300 ml-2",children:ye.examples?ye.examples.join(", "):"Various relevant sources"})]},ut))})})]}),f.methodology&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Research Methodology:"}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:f.methodology})})]}),f.enhancedSystemPrompt&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced System Prompt:"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:a.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:f.enhancedSystemPrompt})})]}),f.enhancedUserPrompt&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced User Prompt:"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:a.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:f.enhancedUserPrompt})})]}),a.jsxs("details",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",children:[a.jsx("summary",{className:"text-sm font-medium cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:" Debug: Raw LLM Response Fields"}),a.jsx("div",{className:"mt-3 space-y-2 text-xs",children:Object.entries(f).map(([ye,ut])=>ye.startsWith("_")||typeof ut=="object"?null:a.jsxs("div",{className:"flex",children:[a.jsxs("span",{className:"font-mono text-gray-500 dark:text-gray-400 w-32 flex-shrink-0",children:[ye,":"]}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-all",children:typeof ut=="string"?ut:JSON.stringify(ut)})]},ye))})]})]}),f.queryType==="LONG_FORM"&&a.jsxs("div",{className:"card p-4 space-y-4",children:[a.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:" Long-Form Document Plan"}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded text-sm",children:[a.jsx("strong",{children:"Note:"})," This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document."]}),f.documentSections?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Document Structure:"}),f.documentSections.map((ye,ut)=>a.jsxs("div",{className:"ml-4 mb-3 p-2 bg-gray-50 dark:bg-gray-900 rounded",children:[a.jsxs("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:[ut+1,". ",ye.title]}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Keywords: ",ye.keywords.join(", ")]}),ye.questions?.length>0&&a.jsx("ul",{className:"text-xs mt-1 ml-4 list-disc list-inside",children:ye.questions.map((Et,Ze)=>a.jsx("li",{children:Et},Ze))})]},ut))]}),f.snippetWorkflow&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Workflow:"}),a.jsx("div",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded whitespace-pre-wrap",children:f.snippetWorkflow})]})]}),f.queryType==="NEEDS_CLARIFICATION"&&a.jsxs("div",{className:"card p-4 space-y-4 bg-orange-50 dark:bg-orange-900/20",children:[a.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:" Need More Information"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:f.reasoning}),f.clarificationQuestions?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Please clarify:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:f.clarificationQuestions.map((ye,ut)=>a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:ye},ut))})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Update your query with more details:"}),a.jsx("textarea",{value:h,onChange:ye=>g(ye.target.value),className:"input-field",rows:4,placeholder:"Provide more specific details..."}),a.jsx("button",{onClick:Ee,className:"btn-primary mt-2 w-full",children:"Regenerate Plan with Clarifications"})]})]}),f.queryType==="guidance"&&a.jsxs("div",{className:"card p-4 space-y-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[a.jsxs("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," More Info Required"]}),f.planType&&a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Plan Type:"}),a.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm font-medium",children:f.planType.replace(/-/g," ").toUpperCase()})]}),f.detectedPatterns?.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-800 dark:text-purple-200",children:" Detected Complexity Patterns:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.detectedPatterns.map((ye,ut)=>a.jsx("span",{className:"px-2 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:ye},ut))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.estimatedIterations&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Estimated Iterations"}),a.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:f.estimatedIterations})]}),f.toolsRequired?.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[a.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Tools Required"}),a.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:f.toolsRequired.length})]})]}),f.suggestedWorkflow&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:" Suggested Workflow:"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:f.suggestedWorkflow})]}),f.toolsRequired?.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:" Required Tools:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.toolsRequired.map((ye,ut)=>a.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-mono",children:ye},ut))})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700",children:[a.jsxs("h4",{className:"text-sm font-medium mb-3 text-yellow-900 dark:text-yellow-100 flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""})," Please answer these questions to refine your plan:"]}),f.guidanceQuestions?.length>0&&a.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm mb-4",children:f.guidanceQuestions.map((ye,ut)=>a.jsx("li",{className:"text-yellow-800 dark:text-yellow-200 font-medium",children:ye},ut))}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-yellow-900 dark:text-yellow-100",children:"Update your research prompt with answers:"}),a.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-2",children:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples."}),a.jsx("textarea",{value:h,onChange:ye=>g(ye.target.value),className:"input-field",rows:6,placeholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx("button",{onClick:Ee,className:"btn-primary flex-1",children:" Generate Detailed Execution Plan"}),a.jsx("button",{onClick:async()=>{if(!i){c("Please sign in to use planning");return}if(!b){y(!0),S("Forcing plan generation...");try{const ye=await s();if(!ye){c("Authentication expired. Please sign out and sign in again."),y(!1);return}const ut=l.providers.filter(Ze=>Ze.enabled===!0),Et=f.guidanceQuestions?.map((Ze,kt)=>`Q${kt+1}: ${Ze}
A${kt+1}: Please use your best judgment based on the original query.`).join(`

`)||"";await f1(h,ye,ut,void 0,(Ze,kt)=>{switch(console.log("Force Plan SSE event:",Ze,kt),Ze){case"status":S(kt.message||"Processing...");break;case"result":x(kt),kt.enhancedSystemPrompt&&U(kt.enhancedSystemPrompt),kt.enhancedUserPrompt&&q(kt.enhancedUserPrompt);break;case"llm_response":ae(kt);break;case"error":const Rt=kt.error||"Unknown error";x({error:Rt}),c(`Force plan error: ${Rt}`);break}},()=>{console.log("Force plan complete"),y(!1),S("")},Ze=>{console.error("Force plan error:",Ze),x({error:Ze.message}),c(`Force plan failed: ${Ze.message}`),y(!1),S("")},{clarificationAnswers:Et,previousContext:f,forcePlan:!0,language:l.language||"en"})}catch(ye){console.error("Force plan error:",ye);const ut=ye instanceof Error?ye.message:"Unknown error";x({error:ut}),c(`Force plan error: ${ut}`),y(!1),S("")}}},disabled:b,className:"btn-secondary flex-1",title:"Let AI answer the questions and force plan generation",children:" Force Plan"}),a.jsx("button",{onClick:()=>{x(null),S(""),H&&U(H),z&&q(z),ue(""),D(""),M("")},className:"btn-secondary",title:"Clear guidance mode and return to previous state",children:" Reset"})]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-300 dark:border-blue-700",children:a.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[a.jsx("strong",{children:"About Guidance Mode:"})," This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration."]})})]})]})})]})]})}),_&&a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:a.jsxs("div",{className:"card p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Load Saved Plan"}),R&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Storage: ",(R.usage/(1024*1024)).toFixed(2)," MB / ",(R.quota/(1024*1024)).toFixed(0)," MB (",R.percentage.toFixed(1),"%)"]})]}),R&&R.percentage>80&&a.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[a.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-semibold mb-2",children:[" Storage is ",R.percentage.toFixed(1),"% full"]}),a.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Consider deleting old plans to free up space."})]}),N.length===0?a.jsx("p",{className:"text-gray-500",children:"No saved plans found"}):a.jsx("div",{className:"space-y-3",children:N.map(ye=>{const ut=new Date(ye.timestamp).toLocaleString();return a.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-3",children:a.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 mb-1 truncate",title:ye.query,children:ye.query.length>100?ye.query.substring(0,100)+"...":ye.query}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Saved: ",ut]})]}),a.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[a.jsx("button",{onClick:()=>Pe(ye),className:"btn-primary text-xs",children:"Load"}),a.jsx("button",{onClick:()=>ge(ye.id),className:"btn-secondary text-red-500 text-xs",children:"Delete"})]})]})},ye.id)})}),a.jsx("button",{onClick:()=>T(!1),className:"btn-primary w-full mt-4",children:"Close"})]})}),G&&F&&a.jsx(aF,{apiCalls:[F],onClose:()=>$(!1)}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{className:"btn-secondary text-xs",onClick:ve,title:"Copy conversation, LLM, and tool debug info for Copilot support",children:" Copy Debug Info"})})]}):null};function B_(e){const t=[],r=String(e||"");let n=r.indexOf(","),s=0,i=!1;for(;!i;){n===-1&&(n=r.length,i=!0);const l=r.slice(s,n).trim();(l||!i)&&t.push(l),s=n+1,n=r.indexOf(",",s)}return t}function l3(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const sF=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iF=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oF={};function F_(e,t){return(oF.jsx?iF:sF).test(e)}const lF=/[ \t\n\f\r]/g;function cF(e){return typeof e=="object"?e.type==="text"?$_(e.value):!1:$_(e)}function $_(e){return e.replace(lF,"")===""}let Og=class{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}};Og.prototype.normal={};Og.prototype.property={};Og.prototype.space=void 0;function c3(e,t){const r={},n={};for(const s of e)Object.assign(r,s.property),Object.assign(n,s.normal);return new Og(r,n,t)}function cg(e){return e.toLowerCase()}let bs=class{constructor(t,r){this.attribute=r,this.property=t}};bs.prototype.attribute="";bs.prototype.booleanish=!1;bs.prototype.boolean=!1;bs.prototype.commaOrSpaceSeparated=!1;bs.prototype.commaSeparated=!1;bs.prototype.defined=!1;bs.prototype.mustUseProperty=!1;bs.prototype.number=!1;bs.prototype.overloadedBoolean=!1;bs.prototype.property="";bs.prototype.spaceSeparated=!1;bs.prototype.space=void 0;let uF=0;const mr=vc(),ta=vc(),E1=vc(),at=vc(),bn=vc(),Nu=vc(),Ns=vc();function vc(){return 2**++uF}const _1=Object.freeze(Object.defineProperty({__proto__:null,boolean:mr,booleanish:ta,commaOrSpaceSeparated:Ns,commaSeparated:Nu,number:at,overloadedBoolean:E1,spaceSeparated:bn},Symbol.toStringTag,{value:"Module"})),oy=Object.keys(_1);let Qv=class extends bs{constructor(t,r,n,s){let i=-1;if(super(t,r),U_(this,"space",s),typeof n=="number")for(;++i<oy.length;){const l=oy[i];U_(this,oy[i],(n&_1[l])===_1[l])}}};Qv.prototype.defined=!0;function U_(e,t,r){r&&(e[t]=r)}function ad(e){const t={},r={};for(const[n,s]of Object.entries(e.properties)){const i=new Qv(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[cg(n)]=n,r[cg(i.attribute)]=n}return new Og(t,r,e.space)}const u3=ad({properties:{ariaActiveDescendant:null,ariaAtomic:ta,ariaAutoComplete:null,ariaBusy:ta,ariaChecked:ta,ariaColCount:at,ariaColIndex:at,ariaColSpan:at,ariaControls:bn,ariaCurrent:null,ariaDescribedBy:bn,ariaDetails:null,ariaDisabled:ta,ariaDropEffect:bn,ariaErrorMessage:null,ariaExpanded:ta,ariaFlowTo:bn,ariaGrabbed:ta,ariaHasPopup:null,ariaHidden:ta,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bn,ariaLevel:at,ariaLive:null,ariaModal:ta,ariaMultiLine:ta,ariaMultiSelectable:ta,ariaOrientation:null,ariaOwns:bn,ariaPlaceholder:null,ariaPosInSet:at,ariaPressed:ta,ariaReadOnly:ta,ariaRelevant:null,ariaRequired:ta,ariaRoleDescription:bn,ariaRowCount:at,ariaRowIndex:at,ariaRowSpan:at,ariaSelected:ta,ariaSetSize:at,ariaSort:null,ariaValueMax:at,ariaValueMin:at,ariaValueNow:at,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function d3(e,t){return t in e?e[t]:t}function h3(e,t){return d3(e,t.toLowerCase())}const dF=ad({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Nu,acceptCharset:bn,accessKey:bn,action:null,allow:null,allowFullScreen:mr,allowPaymentRequest:mr,allowUserMedia:mr,alt:null,as:null,async:mr,autoCapitalize:null,autoComplete:bn,autoFocus:mr,autoPlay:mr,blocking:bn,capture:null,charSet:null,checked:mr,cite:null,className:bn,cols:at,colSpan:null,content:null,contentEditable:ta,controls:mr,controlsList:bn,coords:at|Nu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mr,defer:mr,dir:null,dirName:null,disabled:mr,download:E1,draggable:ta,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mr,formTarget:null,headers:bn,height:at,hidden:E1,high:at,href:null,hrefLang:null,htmlFor:bn,httpEquiv:bn,id:null,imageSizes:null,imageSrcSet:null,inert:mr,inputMode:null,integrity:null,is:null,isMap:mr,itemId:null,itemProp:bn,itemRef:bn,itemScope:mr,itemType:bn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mr,low:at,manifest:null,max:null,maxLength:at,media:null,method:null,min:null,minLength:at,multiple:mr,muted:mr,name:null,nonce:null,noModule:mr,noValidate:mr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mr,optimum:at,pattern:null,ping:bn,placeholder:null,playsInline:mr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mr,referrerPolicy:null,rel:bn,required:mr,reversed:mr,rows:at,rowSpan:at,sandbox:bn,scope:null,scoped:mr,seamless:mr,selected:mr,shadowRootClonable:mr,shadowRootDelegatesFocus:mr,shadowRootMode:null,shape:null,size:at,sizes:null,slot:null,span:at,spellCheck:ta,src:null,srcDoc:null,srcLang:null,srcSet:null,start:at,step:null,style:null,tabIndex:at,target:null,title:null,translate:null,type:null,typeMustMatch:mr,useMap:null,value:ta,width:at,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bn,axis:null,background:null,bgColor:null,border:at,borderColor:null,bottomMargin:at,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mr,declare:mr,event:null,face:null,frame:null,frameBorder:null,hSpace:at,leftMargin:at,link:null,longDesc:null,lowSrc:null,marginHeight:at,marginWidth:at,noResize:mr,noHref:mr,noShade:mr,noWrap:mr,object:null,profile:null,prompt:null,rev:null,rightMargin:at,rules:null,scheme:null,scrolling:ta,standby:null,summary:null,text:null,topMargin:at,valueType:null,version:null,vAlign:null,vLink:null,vSpace:at,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mr,disableRemotePlayback:mr,prefix:null,property:null,results:at,security:null,unselectable:null},space:"html",transform:h3}),hF=ad({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ns,accentHeight:at,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:at,amplitude:at,arabicForm:null,ascent:at,attributeName:null,attributeType:null,azimuth:at,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:at,by:null,calcMode:null,capHeight:at,className:bn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:at,diffuseConstant:at,direction:null,display:null,dur:null,divisor:at,dominantBaseline:null,download:mr,dx:null,dy:null,edgeMode:null,editable:null,elevation:at,enableBackground:null,end:null,event:null,exponent:at,externalResourcesRequired:null,fill:null,fillOpacity:at,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Nu,g2:Nu,glyphName:Nu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:at,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:at,horizOriginX:at,horizOriginY:at,id:null,ideographic:at,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:at,k:at,k1:at,k2:at,k3:at,k4:at,kernelMatrix:Ns,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:at,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:at,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:at,overlineThickness:at,paintOrder:null,panose1:null,path:null,pathLength:at,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:at,pointsAtY:at,pointsAtZ:at,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ns,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ns,rev:Ns,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ns,requiredFeatures:Ns,requiredFonts:Ns,requiredFormats:Ns,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:at,specularExponent:at,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:at,strikethroughThickness:at,string:null,stroke:null,strokeDashArray:Ns,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:at,strokeOpacity:at,strokeWidth:null,style:null,surfaceScale:at,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ns,tabIndex:at,tableValues:null,target:null,targetX:at,targetY:at,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ns,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:at,underlineThickness:at,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:at,values:null,vAlphabetic:at,vMathematical:at,vectorEffect:null,vHanging:at,vIdeographic:at,version:null,vertAdvY:at,vertOriginX:at,vertOriginY:at,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:at,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:d3}),g3=ad({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),p3=ad({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:h3}),f3=ad({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),gF={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},pF=/[A-Z]/g,z_=/-[a-z]/g,fF=/^data[-\w.:]+$/i;function Jv(e,t){const r=cg(t);let n=t,s=bs;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&fF.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(z_,xF);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!z_.test(i)){let l=i.replace(pF,mF);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}s=Qv}return new s(n,t)}function mF(e){return"-"+e.toLowerCase()}function xF(e){return e.charAt(1).toUpperCase()}const sm=c3([u3,dF,g3,p3,f3],"html"),sd=c3([u3,hF,g3,p3,f3],"svg");function H_(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function m3(e){return e.join(" ").trim()}var pu={},ly,q_;function bF(){if(q_)return ly;q_=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,h="/",g="*",f="",x="comment",b="declaration";ly=function(k,S){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];S=S||{};var _=1,T=1;function N(W){var j=W.match(t);j&&(_+=j.length);var U=W.lastIndexOf(d);T=~U?W.length-U:T+W.length}function I(){var W={line:_,column:T};return function(j){return j.position=new R(W),ae(),j}}function R(W){this.start=W,this.end={line:_,column:T},this.source=S.source}R.prototype.content=k;function B(W){var j=new Error(S.source+":"+_+":"+T+": "+W);if(j.reason=W,j.filename=S.source,j.line=_,j.column=T,j.source=k,!S.silent)throw j}function F(W){var j=W.exec(k);if(j){var U=j[0];return N(U),k=k.slice(U.length),j}}function ae(){F(r)}function G(W){var j;for(W=W||[];j=$();)j!==!1&&W.push(j);return W}function $(){var W=I();if(!(h!=k.charAt(0)||g!=k.charAt(1))){for(var j=2;f!=k.charAt(j)&&(g!=k.charAt(j)||h!=k.charAt(j+1));)++j;if(j+=2,f===k.charAt(j-1))return B("End of comment missing");var U=k.slice(2,j-2);return T+=2,N(U),k=k.slice(j),T+=2,W({type:x,comment:U})}}function J(){var W=I(),j=F(n);if(j){if($(),!F(s))return B("property missing ':'");var U=F(i),O=W({type:b,property:y(j[0].replace(e,f)),value:U?y(U[0].replace(e,f)):f});return F(l),O}}function ee(){var W=[];G(W);for(var j;j=J();)j!==!1&&(W.push(j),G(W));return W}return ae(),ee()};function y(k){return k?k.replace(c,f):f}return ly}var G_;function yF(){if(G_)return pu;G_=1;var e=pu&&pu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pu,"__esModule",{value:!0}),pu.default=r;const t=e(bF());function r(n,s){let i=null;if(!n||typeof n!="string")return i;const l=(0,t.default)(n),c=typeof s=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:g}=d;c?s(h,g,d):g&&(i=i||{},i[h]=g)}),i}return pu}var dh={},Y_;function vF(){if(Y_)return dh;Y_=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,i=function(h){return!h||r.test(h)||e.test(h)},l=function(h,g){return g.toUpperCase()},c=function(h,g){return"".concat(g,"-")},d=function(h,g){return g===void 0&&(g={}),i(h)?h:(h=h.toLowerCase(),g.reactCompat?h=h.replace(s,c):h=h.replace(n,c),h.replace(t,l))};return dh.camelCase=d,dh}var hh,W_;function kF(){if(W_)return hh;W_=1;var e=hh&&hh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(yF()),r=vF();function n(s,i){var l={};return!s||typeof s!="string"||(0,t.default)(s,function(c,d){c&&d&&(l[(0,r.camelCase)(c,i)]=d)}),l}return n.default=n,hh=n,hh}var wF=kF();const SF=ed(wF),im=x3("end"),zi=x3("start");function x3(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function b3(e){const t=zi(e),r=im(e);if(t&&r)return{start:t,end:r}}function Gh(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?V_(e.position):"start"in e||"end"in e?V_(e):"line"in e||"column"in e?T1(e):""}function T1(e){return K_(e&&e.line)+":"+K_(e&&e.column)}function V_(e){return T1(e&&e.start)+"-"+T1(e&&e.end)}function K_(e){return e&&typeof e=="number"?e:1}class $a extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let s="",i={},l=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?s=t:!i.cause&&t&&(l=!0,s=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const d=n.indexOf(":");d===-1?i.ruleId=n:(i.source=n.slice(0,d),i.ruleId=n.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=c?c.line:void 0,this.name=Gh(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=l&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}$a.prototype.file="";$a.prototype.name="";$a.prototype.reason="";$a.prototype.message="";$a.prototype.stack="";$a.prototype.column=void 0;$a.prototype.line=void 0;$a.prototype.ancestors=void 0;$a.prototype.cause=void 0;$a.prototype.fatal=void 0;$a.prototype.place=void 0;$a.prototype.ruleId=void 0;$a.prototype.source=void 0;const Zv={}.hasOwnProperty,EF=new Map,_F=/[A-Z]/g,TF=new Set(["table","tbody","thead","tfoot","tr"]),CF=new Set(["td","th"]),y3="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function NF(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=DF(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=IF(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?sd:sm,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=v3(s,e,void 0);return i&&typeof i!="string"?i:s.create(e,s.Fragment,{children:i||void 0},void 0)}function v3(e,t,r){if(t.type==="element")return AF(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return jF(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return MF(e,t,r);if(t.type==="mdxjsEsm")return LF(e,t);if(t.type==="root")return OF(e,t,r);if(t.type==="text")return RF(e,t)}function AF(e,t,r){const n=e.schema;let s=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=sd,e.schema=s),e.ancestors.push(t);const i=w3(e,t.tagName,!1),l=PF(e,t);let c=t2(e,t);return TF.has(t.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!cF(d):!0})),k3(e,l,i,t),e2(l,c),e.ancestors.pop(),e.schema=n,e.create(t,i,l,r)}function jF(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}ug(e,t.position)}function LF(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ug(e,t.position)}function MF(e,t,r){const n=e.schema;let s=n;t.name==="svg"&&n.space==="html"&&(s=sd,e.schema=s),e.ancestors.push(t);const i=t.name===null?e.Fragment:w3(e,t.name,!0),l=BF(e,t),c=t2(e,t);return k3(e,l,i,t),e2(l,c),e.ancestors.pop(),e.schema=n,e.create(t,i,l,r)}function OF(e,t,r){const n={};return e2(n,t2(e,t)),e.create(t,e.Fragment,n,r)}function RF(e,t){return t.value}function k3(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function e2(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function IF(e,t,r){return n;function n(s,i,l,c){const h=Array.isArray(l.children)?r:t;return c?h(i,l,c):h(i,l)}}function DF(e,t){return r;function r(n,s,i,l){const c=Array.isArray(i.children),d=zi(n);return t(s,i,l,c,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function PF(e,t){const r={};let n,s;for(s in t.properties)if(s!=="children"&&Zv.call(t.properties,s)){const i=FF(e,s,t.properties[s]);if(i){const[l,c]=i;e.tableCellAlignToStyle&&l==="align"&&typeof c=="string"&&CF.has(t.tagName)?n=c:r[l]=c}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function BF(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const l=i.expression;l.type;const c=l.properties[0];c.type,Object.assign(r,e.evaluater.evaluateExpression(c.argument))}else ug(e,t.position);else{const s=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const c=n.value.data.estree.body[0];c.type,i=e.evaluater.evaluateExpression(c.expression)}else ug(e,t.position);else i=n.value===null?!0:n.value;r[s]=i}return r}function t2(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:EF;for(;++n<t.children.length;){const i=t.children[n];let l;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const h=s.get(d)||0;l=d+"-"+h,s.set(d,h+1)}}const c=v3(e,i,l);c!==void 0&&r.push(c)}return r}function FF(e,t,r){const n=Jv(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?l3(r):m3(r)),n.property==="style"){let s=typeof r=="object"?r:$F(e,String(r));return e.stylePropertyNameCase==="css"&&(s=UF(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&n.space?gF[n.property]||n.property:n.attribute,r]}}function $F(e,t){try{return SF(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,s=new $a("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=y3+"#cannot-parse-style-attribute",s}}function w3(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let i=-1,l;for(;++i<s.length;){const c=F_(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};l=l?{type:"MemberExpression",object:l,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}n=l}else n=F_(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const s=n.value;return Zv.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(n);ug(e)}function ug(e,t){const r=new $a("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=y3+"#cannot-handle-mdx-estrees-without-createevaluater",r}function UF(e){const t={};let r;for(r in e)Zv.call(e,r)&&(t[zF(r)]=e[r]);return t}function zF(e){let t=e.replace(_F,HF);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function HF(e){return"-"+e.toLowerCase()}const cy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},qF={};function r2(e,t){const r=qF,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,s=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return S3(e,n,s)}function S3(e,t,r){if(GF(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return X_(e.children,t,r)}return Array.isArray(e)?X_(e,t,r):""}function X_(e,t,r){const n=[];let s=-1;for(;++s<e.length;)n[s]=S3(e[s],t,r);return n.join("")}function GF(e){return!!(e&&typeof e=="object")}const Q_=document.createElement("i");function n2(e){const t="&"+e+";";Q_.innerHTML=t;const r=Q_.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Ls(e,t,r,n){const s=e.length;let i=0,l;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,r=r>0?r:0,n.length<1e4)l=Array.from(n),l.unshift(t,r),e.splice(...l);else for(r&&e.splice(t,r);i<n.length;)l=n.slice(i,i+1e4),l.unshift(t,0),e.splice(...l),i+=1e4,t+=1e4}function Xs(e,t){return e.length>0?(Ls(e,e.length,0,t),e):t}const J_={}.hasOwnProperty;function E3(e){const t={};let r=-1;for(;++r<e.length;)YF(t,e[r]);return t}function YF(e,t){let r;for(r in t){const s=(J_.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let l;if(i)for(l in i){J_.call(s,l)||(s[l]=[]);const c=i[l];WF(s[l],Array.isArray(c)?c:c?[c]:[])}}}function WF(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Ls(e,0,0,n)}function _3(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function fi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ka=fl(/[A-Za-z]/),Ia=fl(/[\dA-Za-z]/),VF=fl(/[#-'*+\--9=?A-Z^-~]/);function l0(e){return e!==null&&(e<32||e===127)}const C1=fl(/\d/),KF=fl(/[\dA-Fa-f]/),XF=fl(/[!-/:-@[-`{-~]/);function Vt(e){return e!==null&&e<-2}function mn(e){return e!==null&&(e<0||e===32)}function Nr(e){return e===-2||e===-1||e===32}const om=fl(new RegExp("\\p{P}|\\p{S}","u")),cc=fl(/\s/);function fl(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function id(e){const t=[];let r=-1,n=0,s=0;for(;++r<e.length;){const i=e.charCodeAt(r);let l="";if(i===37&&Ia(e.charCodeAt(r+1))&&Ia(e.charCodeAt(r+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(l=String.fromCharCode(i));else if(i>55295&&i<57344){const c=e.charCodeAt(r+1);i<56320&&c>56319&&c<57344?(l=String.fromCharCode(i,c),s=1):l=""}else l=String.fromCharCode(i);l&&(t.push(e.slice(n,r),encodeURIComponent(l)),n=r+s+1,l=""),s&&(r+=s,s=0)}return t.join("")+e.slice(n)}function Br(e,t,r,n){const s=n?n-1:Number.POSITIVE_INFINITY;let i=0;return l;function l(d){return Nr(d)?(e.enter(r),c(d)):t(d)}function c(d){return Nr(d)&&i++<s?(e.consume(d),c):(e.exit(r),t(d))}}const QF={tokenize:JF};function JF(e){const t=e.attempt(this.parser.constructs.contentInitial,n,s);let r;return t;function n(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Br(e,t,"linePrefix")}function s(c){return e.enter("paragraph"),i(c)}function i(c){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,l(c)}function l(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return Vt(c)?(e.consume(c),e.exit("chunkText"),i):(e.consume(c),l)}}const ZF={tokenize:e$},Z_={tokenize:t$};function e$(e){const t=this,r=[];let n=0,s,i,l;return c;function c(N){if(n<r.length){const I=r[n];return t.containerState=I[1],e.attempt(I[0].continuation,d,h)(N)}return h(N)}function d(N){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&T();const I=t.events.length;let R=I,B;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){B=t.events[R][1].end;break}_(n);let F=I;for(;F<t.events.length;)t.events[F][1].end={...B},F++;return Ls(t.events,R+1,0,t.events.slice(I)),t.events.length=F,h(N)}return c(N)}function h(N){if(n===r.length){if(!s)return x(N);if(s.currentConstruct&&s.currentConstruct.concrete)return y(N);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Z_,g,f)(N)}function g(N){return s&&T(),_(n),x(N)}function f(N){return t.parser.lazy[t.now().line]=n!==r.length,l=t.now().offset,y(N)}function x(N){return t.containerState={},e.attempt(Z_,b,y)(N)}function b(N){return n++,r.push([t.currentConstruct,t.containerState]),x(N)}function y(N){if(N===null){s&&T(),_(0),e.consume(N);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),k(N)}function k(N){if(N===null){S(e.exit("chunkFlow"),!0),_(0),e.consume(N);return}return Vt(N)?(e.consume(N),S(e.exit("chunkFlow")),n=0,t.interrupt=void 0,c):(e.consume(N),k)}function S(N,I){const R=t.sliceStream(N);if(I&&R.push(null),N.previous=i,i&&(i.next=N),i=N,s.defineSkip(N.start),s.write(R),t.parser.lazy[N.start.line]){let B=s.events.length;for(;B--;)if(s.events[B][1].start.offset<l&&(!s.events[B][1].end||s.events[B][1].end.offset>l))return;const F=t.events.length;let ae=F,G,$;for(;ae--;)if(t.events[ae][0]==="exit"&&t.events[ae][1].type==="chunkFlow"){if(G){$=t.events[ae][1].end;break}G=!0}for(_(n),B=F;B<t.events.length;)t.events[B][1].end={...$},B++;Ls(t.events,ae+1,0,t.events.slice(F)),t.events.length=B}}function _(N){let I=r.length;for(;I-- >N;){const R=r[I];t.containerState=R[1],R[0].exit.call(t,e)}r.length=N}function T(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}function t$(e,t,r){return Br(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function zu(e){if(e===null||mn(e)||cc(e))return 1;if(om(e))return 2}function lm(e,t,r){const n=[];let s=-1;for(;++s<e.length;){const i=e[s].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const N1={name:"attention",resolveAll:r$,tokenize:n$};function r$(e,t){let r=-1,n,s,i,l,c,d,h,g;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const f={...e[n][1].end},x={...e[r][1].start};eT(f,-d),eT(x,d),l={type:d>1?"strongSequence":"emphasisSequence",start:f,end:{...e[n][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:x},i={type:d>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},s={type:d>1?"strong":"emphasis",start:{...l.start},end:{...c.end}},e[n][1].end={...l.start},e[r][1].start={...c.end},h=[],e[n][1].end.offset-e[n][1].start.offset&&(h=Xs(h,[["enter",e[n][1],t],["exit",e[n][1],t]])),h=Xs(h,[["enter",s,t],["enter",l,t],["exit",l,t],["enter",i,t]]),h=Xs(h,lm(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),h=Xs(h,[["exit",i,t],["enter",c,t],["exit",c,t],["exit",s,t]]),e[r][1].end.offset-e[r][1].start.offset?(g=2,h=Xs(h,[["enter",e[r][1],t],["exit",e[r][1],t]])):g=0,Ls(e,n-1,r-n+3,h),r=n+h.length-g-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function n$(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,s=zu(n);let i;return l;function l(d){return i=d,e.enter("attentionSequence"),c(d)}function c(d){if(d===i)return e.consume(d),c;const h=e.exit("attentionSequence"),g=zu(d),f=!g||g===2&&s||r.includes(d),x=!s||s===2&&g||r.includes(n);return h._open=!!(i===42?f:f&&(s||!x)),h._close=!!(i===42?x:x&&(g||!f)),t(d)}}function eT(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const a$={name:"autolink",tokenize:s$};function s$(e,t,r){let n=0;return s;function s(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(b){return Ka(b)?(e.consume(b),l):b===64?r(b):h(b)}function l(b){return b===43||b===45||b===46||Ia(b)?(n=1,c(b)):h(b)}function c(b){return b===58?(e.consume(b),n=0,d):(b===43||b===45||b===46||Ia(b))&&n++<32?(e.consume(b),c):(n=0,h(b))}function d(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||l0(b)?r(b):(e.consume(b),d)}function h(b){return b===64?(e.consume(b),g):VF(b)?(e.consume(b),h):r(b)}function g(b){return Ia(b)?f(b):r(b)}function f(b){return b===46?(e.consume(b),n=0,g):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):x(b)}function x(b){if((b===45||Ia(b))&&n++<63){const y=b===45?x:f;return e.consume(b),y}return r(b)}}const Rg={partial:!0,tokenize:i$};function i$(e,t,r){return n;function n(i){return Nr(i)?Br(e,s,"linePrefix")(i):s(i)}function s(i){return i===null||Vt(i)?t(i):r(i)}}const T3={continuation:{tokenize:l$},exit:c$,name:"blockQuote",tokenize:o$};function o$(e,t,r){const n=this;return s;function s(l){if(l===62){const c=n.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),i}return r(l)}function i(l){return Nr(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function l$(e,t,r){const n=this;return s;function s(l){return Nr(l)?Br(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):i(l)}function i(l){return e.attempt(T3,t,r)(l)}}function c$(e){e.exit("blockQuote")}const C3={name:"characterEscape",tokenize:u$};function u$(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),s}function s(i){return XF(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const N3={name:"characterReference",tokenize:d$};function d$(e,t,r){const n=this;let s=0,i,l;return c;function c(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),d}function d(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,l=Ia,g(f))}function h(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,l=KF,g):(e.enter("characterReferenceValue"),i=7,l=C1,g(f))}function g(f){if(f===59&&s){const x=e.exit("characterReferenceValue");return l===Ia&&!n2(n.sliceSerialize(x))?r(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(f)&&s++<i?(e.consume(f),g):r(f)}}const tT={partial:!0,tokenize:g$},rT={concrete:!0,name:"codeFenced",tokenize:h$};function h$(e,t,r){const n=this,s={partial:!0,tokenize:R};let i=0,l=0,c;return d;function d(B){return h(B)}function h(B){const F=n.events[n.events.length-1];return i=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,c=B,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),g(B)}function g(B){return B===c?(l++,e.consume(B),g):l<3?r(B):(e.exit("codeFencedFenceSequence"),Nr(B)?Br(e,f,"whitespace")(B):f(B))}function f(B){return B===null||Vt(B)?(e.exit("codeFencedFence"),n.interrupt?t(B):e.check(tT,k,I)(B)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(B))}function x(B){return B===null||Vt(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(B)):Nr(B)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Br(e,b,"whitespace")(B)):B===96&&B===c?r(B):(e.consume(B),x)}function b(B){return B===null||Vt(B)?f(B):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(B))}function y(B){return B===null||Vt(B)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(B)):B===96&&B===c?r(B):(e.consume(B),y)}function k(B){return e.attempt(s,I,S)(B)}function S(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),_}function _(B){return i>0&&Nr(B)?Br(e,T,"linePrefix",i+1)(B):T(B)}function T(B){return B===null||Vt(B)?e.check(tT,k,I)(B):(e.enter("codeFlowValue"),N(B))}function N(B){return B===null||Vt(B)?(e.exit("codeFlowValue"),T(B)):(e.consume(B),N)}function I(B){return e.exit("codeFenced"),t(B)}function R(B,F,ae){let G=0;return $;function $(U){return B.enter("lineEnding"),B.consume(U),B.exit("lineEnding"),J}function J(U){return B.enter("codeFencedFence"),Nr(U)?Br(B,ee,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):ee(U)}function ee(U){return U===c?(B.enter("codeFencedFenceSequence"),W(U)):ae(U)}function W(U){return U===c?(G++,B.consume(U),W):G>=l?(B.exit("codeFencedFenceSequence"),Nr(U)?Br(B,j,"whitespace")(U):j(U)):ae(U)}function j(U){return U===null||Vt(U)?(B.exit("codeFencedFence"),F(U)):ae(U)}}}function g$(e,t,r){const n=this;return s;function s(l){return l===null?r(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i)}function i(l){return n.parser.lazy[n.now().line]?r(l):t(l)}}const uy={name:"codeIndented",tokenize:f$},p$={partial:!0,tokenize:m$};function f$(e,t,r){const n=this;return s;function s(h){return e.enter("codeIndented"),Br(e,i,"linePrefix",5)(h)}function i(h){const g=n.events[n.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?l(h):r(h)}function l(h){return h===null?d(h):Vt(h)?e.attempt(p$,l,d)(h):(e.enter("codeFlowValue"),c(h))}function c(h){return h===null||Vt(h)?(e.exit("codeFlowValue"),l(h)):(e.consume(h),c)}function d(h){return e.exit("codeIndented"),t(h)}}function m$(e,t,r){const n=this;return s;function s(l){return n.parser.lazy[n.now().line]?r(l):Vt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s):Br(e,i,"linePrefix",5)(l)}function i(l){const c=n.events[n.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):Vt(l)?s(l):r(l)}}const x$={name:"codeText",previous:y$,resolve:b$,tokenize:v$};function b$(e){let t=e.length-4,r=3,n,s;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)s===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(s=n):(n===t||e[n][1].type==="lineEnding")&&(e[s][1].type="codeTextData",n!==s+2&&(e[s][1].end=e[n-1][1].end,e.splice(s+2,n-s-2),t-=n-s-2,n=s+2),s=void 0);return e}function y$(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function v$(e,t,r){let n=0,s,i;return l;function l(f){return e.enter("codeText"),e.enter("codeTextSequence"),c(f)}function c(f){return f===96?(e.consume(f),n++,c):(e.exit("codeTextSequence"),d(f))}function d(f){return f===null?r(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),d):f===96?(i=e.enter("codeTextSequence"),s=0,g(f)):Vt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||Vt(f)?(e.exit("codeTextData"),d(f)):(e.consume(f),h)}function g(f){return f===96?(e.consume(f),s++,g):s===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",h(f))}}class k${constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const s=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&gh(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),gh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),gh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);gh(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);gh(this.left,r.reverse())}}}function gh(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function A3(e){const t={};let r=-1,n,s,i,l,c,d,h;const g=new k$(e);for(;++r<g.length;){for(;r in t;)r=t[r];if(n=g.get(r),r&&n[1].type==="chunkFlow"&&g.get(r-1)[1].type==="listItemPrefix"&&(d=n[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,w$(g,r)),r=t[r],h=!0);else if(n[1]._container){for(i=r,s=void 0;i--;)if(l=g.get(i),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(s&&(g.get(s)[1].type="lineEndingBlank"),l[1].type="lineEnding",s=i);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;s&&(n[1].end={...g.get(s)[1].start},c=g.slice(s,r),c.unshift(n),g.splice(s,r-s+1,c))}}return Ls(e,0,Number.POSITIVE_INFINITY,g.slice(0)),!h}function w$(e,t){const r=e.get(t)[1],n=e.get(t)[2];let s=t-1;const i=[];let l=r._tokenizer;l||(l=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const c=l.events,d=[],h={};let g,f,x=-1,b=r,y=0,k=0;const S=[k];for(;b;){for(;e.get(++s)[1]!==b;);i.push(s),b._tokenizer||(g=n.sliceStream(b),b.next||g.push(null),f&&l.defineSkip(b.start),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(g),b._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),f=b,b=b.next}for(b=r;++x<c.length;)c[x][0]==="exit"&&c[x-1][0]==="enter"&&c[x][1].type===c[x-1][1].type&&c[x][1].start.line!==c[x][1].end.line&&(k=x+1,S.push(k),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(l.events=[],b?(b._tokenizer=void 0,b.previous=void 0):S.pop(),x=S.length;x--;){const _=c.slice(S[x],S[x+1]),T=i.pop();d.push([T,T+_.length-1]),e.splice(T,2,_)}for(d.reverse(),x=-1;++x<d.length;)h[y+d[x][0]]=y+d[x][1],y+=d[x][1]-d[x][0]-1;return h}const S$={resolve:_$,tokenize:T$},E$={partial:!0,tokenize:C$};function _$(e){return A3(e),e}function T$(e,t){let r;return n;function n(c){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?i(c):Vt(c)?e.check(E$,l,i)(c):(e.consume(c),s)}function i(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function l(c){return e.consume(c),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,s}}function C$(e,t,r){const n=this;return s;function s(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Br(e,i,"linePrefix")}function i(l){if(l===null||Vt(l))return r(l);const c=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(l):e.interrupt(n.parser.constructs.flow,r,t)(l)}}function j3(e,t,r,n,s,i,l,c,d){const h=d||Number.POSITIVE_INFINITY;let g=0;return f;function f(_){return _===60?(e.enter(n),e.enter(s),e.enter(i),e.consume(_),e.exit(i),x):_===null||_===32||_===41||l0(_)?r(_):(e.enter(n),e.enter(l),e.enter(c),e.enter("chunkString",{contentType:"string"}),k(_))}function x(_){return _===62?(e.enter(i),e.consume(_),e.exit(i),e.exit(s),e.exit(n),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===62?(e.exit("chunkString"),e.exit(c),x(_)):_===null||_===60||Vt(_)?r(_):(e.consume(_),_===92?y:b)}function y(_){return _===60||_===62||_===92?(e.consume(_),b):b(_)}function k(_){return!g&&(_===null||_===41||mn(_))?(e.exit("chunkString"),e.exit(c),e.exit(l),e.exit(n),t(_)):g<h&&_===40?(e.consume(_),g++,k):_===41?(e.consume(_),g--,k):_===null||_===32||_===40||l0(_)?r(_):(e.consume(_),_===92?S:k)}function S(_){return _===40||_===41||_===92?(e.consume(_),k):k(_)}}function L3(e,t,r,n,s,i){const l=this;let c=0,d;return h;function h(b){return e.enter(n),e.enter(s),e.consume(b),e.exit(s),e.enter(i),g}function g(b){return c>999||b===null||b===91||b===93&&!d||b===94&&!c&&"_hiddenFootnoteSupport"in l.parser.constructs?r(b):b===93?(e.exit(i),e.enter(s),e.consume(b),e.exit(s),e.exit(n),t):Vt(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),g):(e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===null||b===91||b===93||Vt(b)||c++>999?(e.exit("chunkString"),g(b)):(e.consume(b),d||(d=!Nr(b)),b===92?x:f)}function x(b){return b===91||b===92||b===93?(e.consume(b),c++,f):f(b)}}function M3(e,t,r,n,s,i){let l;return c;function c(x){return x===34||x===39||x===40?(e.enter(n),e.enter(s),e.consume(x),e.exit(s),l=x===40?41:x,d):r(x)}function d(x){return x===l?(e.enter(s),e.consume(x),e.exit(s),e.exit(n),t):(e.enter(i),h(x))}function h(x){return x===l?(e.exit(i),d(l)):x===null?r(x):Vt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),Br(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===l||x===null||Vt(x)?(e.exit("chunkString"),h(x)):(e.consume(x),x===92?f:g)}function f(x){return x===l||x===92?(e.consume(x),g):g(x)}}function Yh(e,t){let r;return n;function n(s){return Vt(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),r=!0,n):Nr(s)?Br(e,n,r?"linePrefix":"lineSuffix")(s):t(s)}}const N$={name:"definition",tokenize:j$},A$={partial:!0,tokenize:L$};function j$(e,t,r){const n=this;let s;return i;function i(b){return e.enter("definition"),l(b)}function l(b){return L3.call(n,e,c,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function c(b){return s=fi(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),d):r(b)}function d(b){return mn(b)?Yh(e,h)(b):h(b)}function h(b){return j3(e,g,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function g(b){return e.attempt(A$,f,f)(b)}function f(b){return Nr(b)?Br(e,x,"whitespace")(b):x(b)}function x(b){return b===null||Vt(b)?(e.exit("definition"),n.parser.defined.push(s),t(b)):r(b)}}function L$(e,t,r){return n;function n(c){return mn(c)?Yh(e,s)(c):r(c)}function s(c){return M3(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return Nr(c)?Br(e,l,"whitespace")(c):l(c)}function l(c){return c===null||Vt(c)?t(c):r(c)}}const M$={name:"hardBreakEscape",tokenize:O$};function O$(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),s}function s(i){return Vt(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const R$={name:"headingAtx",resolve:I$,tokenize:D$};function I$(e,t){let r=e.length-2,n=3,s,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(s={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Ls(e,n,r-n+1,[["enter",s,t],["enter",i,t],["exit",i,t],["exit",s,t]])),e}function D$(e,t,r){let n=0;return s;function s(g){return e.enter("atxHeading"),i(g)}function i(g){return e.enter("atxHeadingSequence"),l(g)}function l(g){return g===35&&n++<6?(e.consume(g),l):g===null||mn(g)?(e.exit("atxHeadingSequence"),c(g)):r(g)}function c(g){return g===35?(e.enter("atxHeadingSequence"),d(g)):g===null||Vt(g)?(e.exit("atxHeading"),t(g)):Nr(g)?Br(e,c,"whitespace")(g):(e.enter("atxHeadingText"),h(g))}function d(g){return g===35?(e.consume(g),d):(e.exit("atxHeadingSequence"),c(g))}function h(g){return g===null||g===35||mn(g)?(e.exit("atxHeadingText"),c(g)):(e.consume(g),h)}}const P$=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nT=["pre","script","style","textarea"],B$={concrete:!0,name:"htmlFlow",resolveTo:U$,tokenize:z$},F$={partial:!0,tokenize:q$},$$={partial:!0,tokenize:H$};function U$(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function z$(e,t,r){const n=this;let s,i,l,c,d;return h;function h(M){return g(M)}function g(M){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(M),f}function f(M){return M===33?(e.consume(M),x):M===47?(e.consume(M),i=!0,k):M===63?(e.consume(M),s=3,n.interrupt?t:H):Ka(M)?(e.consume(M),l=String.fromCharCode(M),S):r(M)}function x(M){return M===45?(e.consume(M),s=2,b):M===91?(e.consume(M),s=5,c=0,y):Ka(M)?(e.consume(M),s=4,n.interrupt?t:H):r(M)}function b(M){return M===45?(e.consume(M),n.interrupt?t:H):r(M)}function y(M){const le="CDATA[";return M===le.charCodeAt(c++)?(e.consume(M),c===le.length?n.interrupt?t:ee:y):r(M)}function k(M){return Ka(M)?(e.consume(M),l=String.fromCharCode(M),S):r(M)}function S(M){if(M===null||M===47||M===62||mn(M)){const le=M===47,me=l.toLowerCase();return!le&&!i&&nT.includes(me)?(s=1,n.interrupt?t(M):ee(M)):P$.includes(l.toLowerCase())?(s=6,le?(e.consume(M),_):n.interrupt?t(M):ee(M)):(s=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(M):i?T(M):N(M))}return M===45||Ia(M)?(e.consume(M),l+=String.fromCharCode(M),S):r(M)}function _(M){return M===62?(e.consume(M),n.interrupt?t:ee):r(M)}function T(M){return Nr(M)?(e.consume(M),T):$(M)}function N(M){return M===47?(e.consume(M),$):M===58||M===95||Ka(M)?(e.consume(M),I):Nr(M)?(e.consume(M),N):$(M)}function I(M){return M===45||M===46||M===58||M===95||Ia(M)?(e.consume(M),I):R(M)}function R(M){return M===61?(e.consume(M),B):Nr(M)?(e.consume(M),R):N(M)}function B(M){return M===null||M===60||M===61||M===62||M===96?r(M):M===34||M===39?(e.consume(M),d=M,F):Nr(M)?(e.consume(M),B):ae(M)}function F(M){return M===d?(e.consume(M),d=null,G):M===null||Vt(M)?r(M):(e.consume(M),F)}function ae(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||mn(M)?R(M):(e.consume(M),ae)}function G(M){return M===47||M===62||Nr(M)?N(M):r(M)}function $(M){return M===62?(e.consume(M),J):r(M)}function J(M){return M===null||Vt(M)?ee(M):Nr(M)?(e.consume(M),J):r(M)}function ee(M){return M===45&&s===2?(e.consume(M),O):M===60&&s===1?(e.consume(M),q):M===62&&s===4?(e.consume(M),D):M===63&&s===3?(e.consume(M),H):M===93&&s===5?(e.consume(M),ue):Vt(M)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(F$,z,W)(M)):M===null||Vt(M)?(e.exit("htmlFlowData"),W(M)):(e.consume(M),ee)}function W(M){return e.check($$,j,z)(M)}function j(M){return e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),U}function U(M){return M===null||Vt(M)?W(M):(e.enter("htmlFlowData"),ee(M))}function O(M){return M===45?(e.consume(M),H):ee(M)}function q(M){return M===47?(e.consume(M),l="",V):ee(M)}function V(M){if(M===62){const le=l.toLowerCase();return nT.includes(le)?(e.consume(M),D):ee(M)}return Ka(M)&&l.length<8?(e.consume(M),l+=String.fromCharCode(M),V):ee(M)}function ue(M){return M===93?(e.consume(M),H):ee(M)}function H(M){return M===62?(e.consume(M),D):M===45&&s===2?(e.consume(M),H):ee(M)}function D(M){return M===null||Vt(M)?(e.exit("htmlFlowData"),z(M)):(e.consume(M),D)}function z(M){return e.exit("htmlFlow"),t(M)}}function H$(e,t,r){const n=this;return s;function s(l){return Vt(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),i):r(l)}function i(l){return n.parser.lazy[n.now().line]?r(l):t(l)}}function q$(e,t,r){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Rg,t,r)}}const G$={name:"htmlText",tokenize:Y$};function Y$(e,t,r){const n=this;let s,i,l;return c;function c(H){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(H),d}function d(H){return H===33?(e.consume(H),h):H===47?(e.consume(H),R):H===63?(e.consume(H),N):Ka(H)?(e.consume(H),ae):r(H)}function h(H){return H===45?(e.consume(H),g):H===91?(e.consume(H),i=0,y):Ka(H)?(e.consume(H),T):r(H)}function g(H){return H===45?(e.consume(H),b):r(H)}function f(H){return H===null?r(H):H===45?(e.consume(H),x):Vt(H)?(l=f,q(H)):(e.consume(H),f)}function x(H){return H===45?(e.consume(H),b):f(H)}function b(H){return H===62?O(H):H===45?x(H):f(H)}function y(H){const D="CDATA[";return H===D.charCodeAt(i++)?(e.consume(H),i===D.length?k:y):r(H)}function k(H){return H===null?r(H):H===93?(e.consume(H),S):Vt(H)?(l=k,q(H)):(e.consume(H),k)}function S(H){return H===93?(e.consume(H),_):k(H)}function _(H){return H===62?O(H):H===93?(e.consume(H),_):k(H)}function T(H){return H===null||H===62?O(H):Vt(H)?(l=T,q(H)):(e.consume(H),T)}function N(H){return H===null?r(H):H===63?(e.consume(H),I):Vt(H)?(l=N,q(H)):(e.consume(H),N)}function I(H){return H===62?O(H):N(H)}function R(H){return Ka(H)?(e.consume(H),B):r(H)}function B(H){return H===45||Ia(H)?(e.consume(H),B):F(H)}function F(H){return Vt(H)?(l=F,q(H)):Nr(H)?(e.consume(H),F):O(H)}function ae(H){return H===45||Ia(H)?(e.consume(H),ae):H===47||H===62||mn(H)?G(H):r(H)}function G(H){return H===47?(e.consume(H),O):H===58||H===95||Ka(H)?(e.consume(H),$):Vt(H)?(l=G,q(H)):Nr(H)?(e.consume(H),G):O(H)}function $(H){return H===45||H===46||H===58||H===95||Ia(H)?(e.consume(H),$):J(H)}function J(H){return H===61?(e.consume(H),ee):Vt(H)?(l=J,q(H)):Nr(H)?(e.consume(H),J):G(H)}function ee(H){return H===null||H===60||H===61||H===62||H===96?r(H):H===34||H===39?(e.consume(H),s=H,W):Vt(H)?(l=ee,q(H)):Nr(H)?(e.consume(H),ee):(e.consume(H),j)}function W(H){return H===s?(e.consume(H),s=void 0,U):H===null?r(H):Vt(H)?(l=W,q(H)):(e.consume(H),W)}function j(H){return H===null||H===34||H===39||H===60||H===61||H===96?r(H):H===47||H===62||mn(H)?G(H):(e.consume(H),j)}function U(H){return H===47||H===62||mn(H)?G(H):r(H)}function O(H){return H===62?(e.consume(H),e.exit("htmlTextData"),e.exit("htmlText"),t):r(H)}function q(H){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(H),e.exit("lineEnding"),V}function V(H){return Nr(H)?Br(e,ue,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):ue(H)}function ue(H){return e.enter("htmlTextData"),l(H)}}const a2={name:"labelEnd",resolveAll:X$,resolveTo:Q$,tokenize:J$},W$={tokenize:Z$},V$={tokenize:eU},K$={tokenize:tU};function X$(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const s=n.type==="labelImage"?4:2;n.type="data",t+=s}}return e.length!==r.length&&Ls(e,0,e.length,r),e}function Q$(e,t){let r=e.length,n=0,s,i,l,c;for(;r--;)if(s=e[r][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[r][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(l){if(e[r][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=r,s.type!=="labelLink")){n=2;break}}else s.type==="labelEnd"&&(l=r);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[i][1].start},end:{...e[l][1].end}},g={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[l-2][1].start}};return c=[["enter",d,t],["enter",h,t]],c=Xs(c,e.slice(i+1,i+n+3)),c=Xs(c,[["enter",g,t]]),c=Xs(c,lm(t.parser.constructs.insideSpan.null,e.slice(i+n+4,l-3),t)),c=Xs(c,[["exit",g,t],e[l-2],e[l-1],["exit",h,t]]),c=Xs(c,e.slice(l+1)),c=Xs(c,[["exit",d,t]]),Ls(e,i,e.length,c),e}function J$(e,t,r){const n=this;let s=n.events.length,i,l;for(;s--;)if((n.events[s][1].type==="labelImage"||n.events[s][1].type==="labelLink")&&!n.events[s][1]._balanced){i=n.events[s][1];break}return c;function c(x){return i?i._inactive?f(x):(l=n.parser.defined.includes(fi(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),d):r(x)}function d(x){return x===40?e.attempt(W$,g,l?g:f)(x):x===91?e.attempt(V$,g,l?h:f)(x):l?g(x):f(x)}function h(x){return e.attempt(K$,g,f)(x)}function g(x){return t(x)}function f(x){return i._balanced=!0,r(x)}}function Z$(e,t,r){return n;function n(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return mn(f)?Yh(e,i)(f):i(f)}function i(f){return f===41?g(f):j3(e,l,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function l(f){return mn(f)?Yh(e,d)(f):g(f)}function c(f){return r(f)}function d(f){return f===34||f===39||f===40?M3(e,h,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):g(f)}function h(f){return mn(f)?Yh(e,g)(f):g(f)}function g(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):r(f)}}function eU(e,t,r){const n=this;return s;function s(c){return L3.call(n,e,i,l,"reference","referenceMarker","referenceString")(c)}function i(c){return n.parser.defined.includes(fi(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(c):r(c)}function l(c){return r(c)}}function tU(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),s}function s(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const rU={name:"labelStartImage",resolveAll:a2.resolveAll,tokenize:nU};function nU(e,t,r){const n=this;return s;function s(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),i}function i(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),l):r(c)}function l(c){return c===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(c):t(c)}}const aU={name:"labelStartLink",resolveAll:a2.resolveAll,tokenize:sU};function sU(e,t,r){const n=this;return s;function s(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),i}function i(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const dy={name:"lineEnding",tokenize:iU};function iU(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Br(e,t,"linePrefix")}}const Bf={name:"thematicBreak",tokenize:oU};function oU(e,t,r){let n=0,s;return i;function i(h){return e.enter("thematicBreak"),l(h)}function l(h){return s=h,c(h)}function c(h){return h===s?(e.enter("thematicBreakSequence"),d(h)):n>=3&&(h===null||Vt(h))?(e.exit("thematicBreak"),t(h)):r(h)}function d(h){return h===s?(e.consume(h),n++,d):(e.exit("thematicBreakSequence"),Nr(h)?Br(e,c,"whitespace")(h):c(h))}}const ps={continuation:{tokenize:dU},exit:gU,name:"list",tokenize:uU},lU={partial:!0,tokenize:pU},cU={partial:!0,tokenize:hU};function uU(e,t,r){const n=this,s=n.events[n.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,l=0;return c;function c(b){const y=n.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!n.containerState.marker||b===n.containerState.marker:C1(b)){if(n.containerState.type||(n.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(Bf,r,h)(b):h(b);if(!n.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(b)}return r(b)}function d(b){return C1(b)&&++l<10?(e.consume(b),d):(!n.interrupt||l<2)&&(n.containerState.marker?b===n.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),h(b)):r(b)}function h(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||b,e.check(Rg,n.interrupt?r:g,e.attempt(lU,x,f))}function g(b){return n.containerState.initialBlankLine=!0,i++,x(b)}function f(b){return Nr(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),x):r(b)}function x(b){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function dU(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(Rg,s,i);function s(c){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Br(e,t,"listItemIndent",n.containerState.size+1)(c)}function i(c){return n.containerState.furtherBlankLines||!Nr(c)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,l(c)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(cU,t,l)(c))}function l(c){return n.containerState._closeFlow=!0,n.interrupt=void 0,Br(e,e.attempt(ps,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function hU(e,t,r){const n=this;return Br(e,s,"listItemIndent",n.containerState.size+1);function s(i){const l=n.events[n.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===n.containerState.size?t(i):r(i)}}function gU(e){e.exit(this.containerState.type)}function pU(e,t,r){const n=this;return Br(e,s,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const l=n.events[n.events.length-1];return!Nr(i)&&l&&l[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const aT={name:"setextUnderline",resolveTo:fU,tokenize:mU};function fU(e,t){let r=e.length,n,s,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(s=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const l={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",l,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=l,e.push(["exit",l,t]),e}function mU(e,t,r){const n=this;let s;return i;function i(h){let g=n.events.length,f;for(;g--;)if(n.events[g][1].type!=="lineEnding"&&n.events[g][1].type!=="linePrefix"&&n.events[g][1].type!=="content"){f=n.events[g][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||f)?(e.enter("setextHeadingLine"),s=h,l(h)):r(h)}function l(h){return e.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===s?(e.consume(h),c):(e.exit("setextHeadingLineSequence"),Nr(h)?Br(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||Vt(h)?(e.exit("setextHeadingLine"),t(h)):r(h)}}const xU={tokenize:bU};function bU(e){const t=this,r=e.attempt(Rg,n,e.attempt(this.parser.constructs.flowInitial,s,Br(e,e.attempt(this.parser.constructs.flow,s,e.attempt(S$,s)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function s(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const yU={resolveAll:R3()},vU=O3("string"),kU=O3("text");function O3(e){return{resolveAll:R3(e==="text"?wU:void 0),tokenize:t};function t(r){const n=this,s=this.parser.constructs[e],i=r.attempt(s,l,c);return l;function l(g){return h(g)?i(g):c(g)}function c(g){if(g===null){r.consume(g);return}return r.enter("data"),r.consume(g),d}function d(g){return h(g)?(r.exit("data"),i(g)):(r.consume(g),d)}function h(g){if(g===null)return!0;const f=s[g];let x=-1;if(f)for(;++x<f.length;){const b=f[x];if(!b.previous||b.previous.call(n,n.previous))return!0}return!1}}}function R3(e){return t;function t(r,n){let s=-1,i;for(;++s<=r.length;)i===void 0?r[s]&&r[s][1].type==="data"&&(i=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==i+2&&(r[i][1].end=r[s-1][1].end,r.splice(i+2,s-i-2),s=i+2),i=void 0);return e?e(r,n):r}}function wU(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],s=t.sliceStream(n);let i=s.length,l=-1,c=0,d;for(;i--;){const h=s[i];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)c++,l--;if(l)break;l=-1}else if(h===-2)d=!0,c++;else if(h!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(c=0),c){const h={type:r===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?l:n.start._bufferIndex+l,_index:n.start._index+i,line:n.end.line,column:n.end.column-c,offset:n.end.offset-c},end:{...n.end}};n.end={...h.start},n.start.offset===n.end.offset?Object.assign(n,h):(e.splice(r,0,["enter",h,t],["exit",h,t]),r+=2)}r++}return e}const SU={42:ps,43:ps,45:ps,48:ps,49:ps,50:ps,51:ps,52:ps,53:ps,54:ps,55:ps,56:ps,57:ps,62:T3},EU={91:N$},_U={[-2]:uy,[-1]:uy,32:uy},TU={35:R$,42:Bf,45:[aT,Bf],60:B$,61:aT,95:Bf,96:rT,126:rT},CU={38:N3,92:C3},NU={[-5]:dy,[-4]:dy,[-3]:dy,33:rU,38:N3,42:N1,60:[a$,G$],91:aU,92:[M$,C3],93:a2,95:N1,96:x$},AU={null:[N1,yU]},jU={null:[42,95]},LU={null:[]},MU=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jU,contentInitial:EU,disable:LU,document:SU,flow:TU,flowInitial:_U,insideSpan:AU,string:CU,text:NU},Symbol.toStringTag,{value:"Module"}));function OU(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const s={},i=[];let l=[],c=[];const d={attempt:F(R),check:F(B),consume:T,enter:N,exit:I,interrupt:F(B,{interrupt:!0})},h={code:null,containerState:{},defineSkip:k,events:[],now:y,parser:e,previous:null,sliceSerialize:x,sliceStream:b,write:f};let g=t.tokenize.call(h,d);return t.resolveAll&&i.push(t),h;function f(J){return l=Xs(l,J),S(),l[l.length-1]!==null?[]:(ae(t,0),h.events=lm(i,h.events,h),h.events)}function x(J,ee){return IU(b(J),ee)}function b(J){return RU(l,J)}function y(){const{_bufferIndex:J,_index:ee,line:W,column:j,offset:U}=n;return{_bufferIndex:J,_index:ee,line:W,column:j,offset:U}}function k(J){s[J.line]=J.column,$()}function S(){let J;for(;n._index<l.length;){const ee=l[n._index];if(typeof ee=="string")for(J=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===J&&n._bufferIndex<ee.length;)_(ee.charCodeAt(n._bufferIndex));else _(ee)}}function _(J){g=g(J)}function T(J){Vt(J)?(n.line++,n.column=1,n.offset+=J===-3?2:1,$()):J!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===l[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=J}function N(J,ee){const W=ee||{};return W.type=J,W.start=y(),h.events.push(["enter",W,h]),c.push(W),W}function I(J){const ee=c.pop();return ee.end=y(),h.events.push(["exit",ee,h]),ee}function R(J,ee){ae(J,ee.from)}function B(J,ee){ee.restore()}function F(J,ee){return W;function W(j,U,O){let q,V,ue,H;return Array.isArray(j)?z(j):"tokenize"in j?z([j]):D(j);function D(Ee){return Ae;function Ae(ve){const Pe=ve!==null&&Ee[ve],ge=ve!==null&&Ee.null,Be=[...Array.isArray(Pe)?Pe:Pe?[Pe]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return z(Be)(ve)}}function z(Ee){return q=Ee,V=0,Ee.length===0?O:M(Ee[V])}function M(Ee){return Ae;function Ae(ve){return H=G(),ue=Ee,Ee.partial||(h.currentConstruct=Ee),Ee.name&&h.parser.constructs.disable.null.includes(Ee.name)?me():Ee.tokenize.call(ee?Object.assign(Object.create(h),ee):h,d,le,me)(ve)}}function le(Ee){return J(ue,H),U}function me(Ee){return H.restore(),++V<q.length?M(q[V]):O}}}function ae(J,ee){J.resolveAll&&!i.includes(J)&&i.push(J),J.resolve&&Ls(h.events,ee,h.events.length-ee,J.resolve(h.events.slice(ee),h)),J.resolveTo&&(h.events=J.resolveTo(h.events,h))}function G(){const J=y(),ee=h.previous,W=h.currentConstruct,j=h.events.length,U=Array.from(c);return{from:j,restore:O};function O(){n=J,h.previous=ee,h.currentConstruct=W,h.events.length=j,c=U,$()}}function $(){n.line in s&&n.column<2&&(n.column=s[n.line],n.offset+=s[n.line]-1)}}function RU(e,t){const r=t.start._index,n=t.start._bufferIndex,s=t.end._index,i=t.end._bufferIndex;let l;if(r===s)l=[e[r].slice(n,i)];else{if(l=e.slice(r,s),n>-1){const c=l[0];typeof c=="string"?l[0]=c.slice(n):l.shift()}i>0&&l.push(e[s].slice(0,i))}return l}function IU(e,t){let r=-1;const n=[];let s;for(;++r<e.length;){const i=e[r];let l;if(typeof i=="string")l=i;else switch(i){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&s)continue;l=" ";break}default:l=String.fromCharCode(i)}s=i===-2,n.push(l)}return n.join("")}function DU(e){const n={constructs:E3([MU,...(e||{}).extensions||[]]),content:s(QF),defined:[],document:s(ZF),flow:s(xU),lazy:{},string:s(vU),text:s(kU)};return n;function s(i){return l;function l(c){return OU(n,i,c)}}}function PU(e){for(;!A3(e););return e}const sT=/[\0\t\n\r]/g;function BU(){let e=1,t="",r=!0,n;return s;function s(i,l,c){const d=[];let h,g,f,x,b;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(l||void 0).decode(i)),f=0,t="",r&&(i.charCodeAt(0)===65279&&f++,r=void 0);f<i.length;){if(sT.lastIndex=f,h=sT.exec(i),x=h&&h.index!==void 0?h.index:i.length,b=i.charCodeAt(x),!h){t=i.slice(f);break}if(b===10&&f===x&&n)d.push(-3),n=void 0;else switch(n&&(d.push(-5),n=void 0),f<x&&(d.push(i.slice(f,x)),e+=x-f),b){case 0:{d.push(65533),e++;break}case 9:{for(g=Math.ceil(e/4)*4,d.push(-2);e++<g;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:n=!0,e=1}f=x+1}return c&&(n&&d.push(-5),t&&d.push(t),d.push(null)),d}}const FU=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function $U(e){return e.replace(FU,UU)}function UU(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const s=r.charCodeAt(1),i=s===120||s===88;return _3(r.slice(i?2:1),i?16:10)}return n2(r)||e}const I3={}.hasOwnProperty;function zU(e,t,r){return typeof t!="string"&&(r=t,t=void 0),HU(r)(PU(DU(r).document().write(BU()(e,t,!0))))}function HU(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ur),autolinkProtocol:G,autolinkEmail:G,atxHeading:i(Et),blockQuote:i(ge),characterEscape:G,characterReference:G,codeFenced:i(Be),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:i(Be,l),codeText:i(ht,l),codeTextData:G,data:G,codeFlowValue:G,definition:i(ye),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:i(ut),hardBreakEscape:i(Ze),hardBreakTrailing:i(Ze),htmlFlow:i(kt,l),htmlFlowData:G,htmlText:i(kt,l),htmlTextData:G,image:i(Rt),label:l,link:i(ur),listItem:i(bt),listItemValue:x,listOrdered:i(yt,f),listUnordered:i(yt),paragraph:i(tn),reference:M,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:i(Et),strong:i(ar),thematicBreak:i(On)},exit:{atxHeading:d(),atxHeadingSequence:R,autolink:d(),autolinkEmail:Pe,autolinkProtocol:ve,blockQuote:d(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:Ee,characterReference:Ae,codeFenced:d(S),codeFencedFence:k,codeFencedFenceInfo:b,codeFencedFenceMeta:y,codeFlowValue:$,codeIndented:d(_),codeText:d(U),codeTextData:$,data:$,definition:d(),definitionDestinationString:I,definitionLabelString:T,definitionTitleString:N,emphasis:d(),hardBreakEscape:d(ee),hardBreakTrailing:d(ee),htmlFlow:d(W),htmlFlowData:$,htmlText:d(j),htmlTextData:$,image:d(q),label:ue,labelText:V,lineEnding:J,link:d(O),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:le,resourceDestinationString:H,resourceTitleString:D,resource:z,setextHeading:d(ae),setextHeadingLineSequence:F,setextHeadingText:B,strong:d(),thematicBreak:d()}};D3(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(X){let he={type:"root",children:[]};const Re={stack:[he],tokenStack:[],config:t,enter:c,exit:h,buffer:l,resume:g,data:r},gt=[];let Qe=-1;for(;++Qe<X.length;)if(X[Qe][1].type==="listOrdered"||X[Qe][1].type==="listUnordered")if(X[Qe][0]==="enter")gt.push(Qe);else{const zt=gt.pop();Qe=s(X,zt,Qe)}for(Qe=-1;++Qe<X.length;){const zt=t[X[Qe][0]];I3.call(zt,X[Qe][1].type)&&zt[X[Qe][1].type].call(Object.assign({sliceSerialize:X[Qe][2].sliceSerialize},Re),X[Qe][1])}if(Re.tokenStack.length>0){const zt=Re.tokenStack[Re.tokenStack.length-1];(zt[1]||iT).call(Re,void 0,zt[0])}for(he.position={start:el(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:el(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},Qe=-1;++Qe<t.transforms.length;)he=t.transforms[Qe](he)||he;return he}function s(X,he,Re){let gt=he-1,Qe=-1,zt=!1,Gt,dt,jt,Zt;for(;++gt<=Re;){const Jt=X[gt];switch(Jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Jt[0]==="enter"?Qe++:Qe--,Zt=void 0;break}case"lineEndingBlank":{Jt[0]==="enter"&&(Gt&&!Zt&&!Qe&&!jt&&(jt=gt),Zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Zt=void 0}if(!Qe&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||Qe===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(Gt){let Rn=gt;for(dt=void 0;Rn--;){const zr=X[Rn];if(zr[1].type==="lineEnding"||zr[1].type==="lineEndingBlank"){if(zr[0]==="exit")continue;dt&&(X[dt][1].type="lineEndingBlank",zt=!0),zr[1].type="lineEnding",dt=Rn}else if(!(zr[1].type==="linePrefix"||zr[1].type==="blockQuotePrefix"||zr[1].type==="blockQuotePrefixWhitespace"||zr[1].type==="blockQuoteMarker"||zr[1].type==="listItemIndent"))break}jt&&(!dt||jt<dt)&&(Gt._spread=!0),Gt.end=Object.assign({},dt?X[dt][1].start:Jt[1].end),X.splice(dt||gt,0,["exit",Gt,Jt[2]]),gt++,Re++}if(Jt[1].type==="listItemPrefix"){const Rn={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start),end:void 0};Gt=Rn,X.splice(gt,0,["enter",Rn,Jt[2]]),gt++,Re++,jt=void 0,Zt=!0}}}return X[he][1]._spread=zt,Re}function i(X,he){return Re;function Re(gt){c.call(this,X(gt),gt),he&&he.call(this,gt)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(X,he,Re){this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([he,Re||void 0]),X.position={start:el(he.start),end:void 0}}function d(X){return he;function he(Re){X&&X.call(this,Re),h.call(this,Re)}}function h(X,he){const Re=this.stack.pop(),gt=this.tokenStack.pop();if(gt)gt[0].type!==X.type&&(he?he.call(this,X,gt[0]):(gt[1]||iT).call(this,X,gt[0]));else throw new Error("Cannot close `"+X.type+"` ("+Gh({start:X.start,end:X.end})+"): its not open");Re.position.end=el(X.end)}function g(){return r2(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function x(X){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(X),10),this.data.expectingFirstListItemValue=void 0}}function b(){const X=this.resume(),he=this.stack[this.stack.length-1];he.lang=X}function y(){const X=this.resume(),he=this.stack[this.stack.length-1];he.meta=X}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const X=this.resume(),he=this.stack[this.stack.length-1];he.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const X=this.resume(),he=this.stack[this.stack.length-1];he.value=X.replace(/(\r?\n|\r)$/g,"")}function T(X){const he=this.resume(),Re=this.stack[this.stack.length-1];Re.label=he,Re.identifier=fi(this.sliceSerialize(X)).toLowerCase()}function N(){const X=this.resume(),he=this.stack[this.stack.length-1];he.title=X}function I(){const X=this.resume(),he=this.stack[this.stack.length-1];he.url=X}function R(X){const he=this.stack[this.stack.length-1];if(!he.depth){const Re=this.sliceSerialize(X).length;he.depth=Re}}function B(){this.data.setextHeadingSlurpLineEnding=!0}function F(X){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(X).codePointAt(0)===61?1:2}function ae(){this.data.setextHeadingSlurpLineEnding=void 0}function G(X){const Re=this.stack[this.stack.length-1].children;let gt=Re[Re.length-1];(!gt||gt.type!=="text")&&(gt=Kt(),gt.position={start:el(X.start),end:void 0},Re.push(gt)),this.stack.push(gt)}function $(X){const he=this.stack.pop();he.value+=this.sliceSerialize(X),he.position.end=el(X.end)}function J(X){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Re=he.children[he.children.length-1];Re.position.end=el(X.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(G.call(this,X),$.call(this,X))}function ee(){this.data.atHardBreak=!0}function W(){const X=this.resume(),he=this.stack[this.stack.length-1];he.value=X}function j(){const X=this.resume(),he=this.stack[this.stack.length-1];he.value=X}function U(){const X=this.resume(),he=this.stack[this.stack.length-1];he.value=X}function O(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=he,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function q(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=he,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function V(X){const he=this.sliceSerialize(X),Re=this.stack[this.stack.length-2];Re.label=$U(he),Re.identifier=fi(he).toLowerCase()}function ue(){const X=this.stack[this.stack.length-1],he=this.resume(),Re=this.stack[this.stack.length-1];if(this.data.inReference=!0,Re.type==="link"){const gt=X.children;Re.children=gt}else Re.alt=he}function H(){const X=this.resume(),he=this.stack[this.stack.length-1];he.url=X}function D(){const X=this.resume(),he=this.stack[this.stack.length-1];he.title=X}function z(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function le(X){const he=this.resume(),Re=this.stack[this.stack.length-1];Re.label=he,Re.identifier=fi(this.sliceSerialize(X)).toLowerCase(),this.data.referenceType="full"}function me(X){this.data.characterReferenceType=X.type}function Ee(X){const he=this.sliceSerialize(X),Re=this.data.characterReferenceType;let gt;Re?(gt=_3(he,Re==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):gt=n2(he);const Qe=this.stack[this.stack.length-1];Qe.value+=gt}function Ae(X){const he=this.stack.pop();he.position.end=el(X.end)}function ve(X){$.call(this,X);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(X)}function Pe(X){$.call(this,X);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(X)}function ge(){return{type:"blockquote",children:[]}}function Be(){return{type:"code",lang:null,meta:null,value:""}}function ht(){return{type:"inlineCode",value:""}}function ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function Et(){return{type:"heading",depth:0,children:[]}}function Ze(){return{type:"break"}}function kt(){return{type:"html",value:""}}function Rt(){return{type:"image",title:null,url:"",alt:null}}function ur(){return{type:"link",title:null,url:"",children:[]}}function yt(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function bt(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function tn(){return{type:"paragraph",children:[]}}function ar(){return{type:"strong",children:[]}}function Kt(){return{type:"text",value:""}}function On(){return{type:"thematicBreak"}}}function el(e){return{line:e.line,column:e.column,offset:e.offset}}function D3(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?D3(e,n):qU(e,n)}}function qU(e,t){let r;for(r in t)if(I3.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function iT(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Gh({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Gh({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Gh({start:t.start,end:t.end})+") is still open")}function GU(e){const t=this;t.parser=r;function r(n){return zU(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function YU(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function WU(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function VU(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function KU(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function XU(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function QU(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),s=id(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let l,c=e.footnoteCounts.get(n);c===void 0?(c=0,e.footnoteOrder.push(n),l=e.footnoteOrder.length):l=i+1,c+=1,e.footnoteCounts.set(n,c);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+s,id:r+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function JU(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ZU(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function P3(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const s=e.all(t),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const l=s[s.length-1];return l&&l.type==="text"?l.value+=n:s.push({type:"text",value:n}),s}function ez(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return P3(e,t);const s={src:id(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,i),e.applyData(t,i)}function tz(e,t){const r={src:id(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function rz(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function nz(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return P3(e,t);const s={href:id(n.url||"")};n.title!==null&&n.title!==void 0&&(s.title=n.title);const i={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function az(e,t){const r={href:id(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function sz(e,t,r){const n=e.all(t),s=r?iz(r):B3(t),i={},l=[];if(typeof t.checked=="boolean"){const g=n[0];let f;g&&g.type==="element"&&g.tagName==="p"?f=g:(f={type:"element",tagName:"p",properties:{},children:[]},n.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<n.length;){const g=n[c];(s||c!==0||g.type!=="element"||g.tagName!=="p")&&l.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!s?l.push(...g.children):l.push(g)}const d=n[n.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:l};return e.patch(t,h),e.applyData(t,h)}function iz(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=B3(r[n])}return t}function B3(e){const t=e.spread;return t??e.children.length>1}function oz(e,t){const r={},n=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++s<n.length;){const l=n[s];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function lz(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cz(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function uz(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function dz(e,t){const r=e.all(t),n=r.shift(),s=[];if(n){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],l),s.push(l)}if(r.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},c=zi(t.children[1]),d=im(t.children[t.children.length-1]);c&&d&&(l.position={start:c,end:d}),s.push(l)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function hz(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",l=r&&r.type==="table"?r.align:void 0,c=l?l.length:t.children.length;let d=-1;const h=[];for(;++d<c;){const f=t.children[d],x={},b=l?l[d]:void 0;b&&(x.align=b);let y={type:"element",tagName:i,properties:x,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),h.push(y)}const g={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,g),e.applyData(t,g)}function gz(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const oT=9,lT=32;function pz(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),s=0;const i=[];for(;n;)i.push(cT(t.slice(s,n.index),s>0,!0),n[0]),s=n.index+n[0].length,n=r.exec(t);return i.push(cT(t.slice(s),s>0,!1)),i.join("")}function cT(e,t,r){let n=0,s=e.length;if(t){let i=e.codePointAt(n);for(;i===oT||i===lT;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(s-1);for(;i===oT||i===lT;)s--,i=e.codePointAt(s-1)}return s>n?e.slice(n,s):""}function fz(e,t){const r={type:"text",value:pz(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function mz(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const xz={blockquote:YU,break:WU,code:VU,delete:KU,emphasis:XU,footnoteReference:QU,heading:JU,html:ZU,imageReference:ez,image:tz,inlineCode:rz,linkReference:nz,link:az,listItem:sz,list:oz,paragraph:lz,root:cz,strong:uz,table:dz,tableCell:gz,tableRow:hz,text:fz,thematicBreak:mz,toml:hf,yaml:hf,definition:hf,footnoteDefinition:hf};function hf(){}const F3=-1,cm=0,Wh=1,c0=2,s2=3,i2=4,o2=5,l2=6,$3=7,U3=8,uT=typeof self=="object"?self:globalThis,bz=(e,t)=>{const r=(s,i)=>(e.set(i,s),s),n=s=>{if(e.has(s))return e.get(s);const[i,l]=t[s];switch(i){case cm:case F3:return r(l,s);case Wh:{const c=r([],s);for(const d of l)c.push(n(d));return c}case c0:{const c=r({},s);for(const[d,h]of l)c[n(d)]=n(h);return c}case s2:return r(new Date(l),s);case i2:{const{source:c,flags:d}=l;return r(new RegExp(c,d),s)}case o2:{const c=r(new Map,s);for(const[d,h]of l)c.set(n(d),n(h));return c}case l2:{const c=r(new Set,s);for(const d of l)c.add(n(d));return c}case $3:{const{name:c,message:d}=l;return r(new uT[c](d),s)}case U3:return r(BigInt(l),s);case"BigInt":return r(Object(BigInt(l)),s);case"ArrayBuffer":return r(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:c}=new Uint8Array(l);return r(new DataView(c),l)}}return r(new uT[i](l),s)};return n},dT=e=>bz(new Map,e)(0),fu="",{toString:yz}={},{keys:vz}=Object,ph=e=>{const t=typeof e;if(t!=="object"||!e)return[cm,t];const r=yz.call(e).slice(8,-1);switch(r){case"Array":return[Wh,fu];case"Object":return[c0,fu];case"Date":return[s2,fu];case"RegExp":return[i2,fu];case"Map":return[o2,fu];case"Set":return[l2,fu];case"DataView":return[Wh,r]}return r.includes("Array")?[Wh,r]:r.includes("Error")?[$3,r]:[c0,r]},gf=([e,t])=>e===cm&&(t==="function"||t==="symbol"),kz=(e,t,r,n)=>{const s=(l,c)=>{const d=n.push(l)-1;return r.set(c,d),d},i=l=>{if(r.has(l))return r.get(l);let[c,d]=ph(l);switch(c){case cm:{let g=l;switch(d){case"bigint":c=U3,g=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);g=null;break;case"undefined":return s([F3],l)}return s([c,g],l)}case Wh:{if(d){let x=l;return d==="DataView"?x=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(x=new Uint8Array(l)),s([d,[...x]],l)}const g=[],f=s([c,g],l);for(const x of l)g.push(i(x));return f}case c0:{if(d)switch(d){case"BigInt":return s([d,l.toString()],l);case"Boolean":case"Number":case"String":return s([d,l.valueOf()],l)}if(t&&"toJSON"in l)return i(l.toJSON());const g=[],f=s([c,g],l);for(const x of vz(l))(e||!gf(ph(l[x])))&&g.push([i(x),i(l[x])]);return f}case s2:return s([c,l.toISOString()],l);case i2:{const{source:g,flags:f}=l;return s([c,{source:g,flags:f}],l)}case o2:{const g=[],f=s([c,g],l);for(const[x,b]of l)(e||!(gf(ph(x))||gf(ph(b))))&&g.push([i(x),i(b)]);return f}case l2:{const g=[],f=s([c,g],l);for(const x of l)(e||!gf(ph(x)))&&g.push(i(x));return f}}const{message:h}=l;return s([c,{name:d,message:h}],l)};return i},hT=(e,{json:t,lossy:r}={})=>{const n=[];return kz(!(t||r),!!t,new Map,n)(e),n},uc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?dT(hT(e,t)):structuredClone(e):(e,t)=>dT(hT(e,t));function wz(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function Sz(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Ez(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||wz,n=e.options.footnoteBackLabel||Sz,s=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const g=e.all(h),f=String(h.identifier).toUpperCase(),x=id(f.toLowerCase());let b=0;const y=[],k=e.footnoteCounts.get(f);for(;k!==void 0&&++b<=k;){y.length>0&&y.push({type:"text",value:" "});let T=typeof r=="string"?r:r(d,b);typeof T=="string"&&(T={type:"text",value:T}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(d,b),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const S=g[g.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const T=S.children[S.children.length-1];T&&T.type==="text"?T.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else g.push(...y);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(g,!0)};e.patch(h,_),c.push(_)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...uc(l),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Ig=(function(e){if(e==null)return Nz;if(typeof e=="function")return um(e);if(typeof e=="object")return Array.isArray(e)?_z(e):Tz(e);if(typeof e=="string")return Cz(e);throw new Error("Expected function, string, or object as test")});function _z(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Ig(e[r]);return um(n);function n(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function Tz(e){const t=e;return um(r);function r(n){const s=n;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}function Cz(e){return um(t);function t(r){return r&&r.type===e}}function um(e){return t;function t(r,n,s){return!!(Az(r)&&e.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function Nz(){return!0}function Az(e){return e!==null&&typeof e=="object"&&"type"in e}const z3=[],jz=!0,A1=!1,Lz="skip";function H3(e,t,r,n){let s;typeof t=="function"&&typeof r!="function"?(n=r,r=t):s=t;const i=Ig(s),l=n?-1:1;c(e,void 0,[])();function c(d,h,g){const f=d&&typeof d=="object"?d:{};if(typeof f.type=="string"){const b=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(d.type+(b?"<"+b+">":""))+")"})}return x;function x(){let b=z3,y,k,S;if((!t||i(d,h,g[g.length-1]||void 0))&&(b=Mz(r(d,g)),b[0]===A1))return b;if("children"in d&&d.children){const _=d;if(_.children&&b[0]!==Lz)for(k=(n?_.children.length:-1)+l,S=g.concat(_);k>-1&&k<_.children.length;){const T=_.children[k];if(y=c(T,k,S)(),y[0]===A1)return y;k=typeof y[1]=="number"?y[1]:k+l}}return b}}}function Mz(e){return Array.isArray(e)?e:typeof e=="number"?[jz,e]:e==null?z3:[e]}function Dg(e,t,r,n){let s,i,l;typeof t=="function"&&typeof r!="function"?(i=void 0,l=t,s=r):(i=t,l=r,s=n),H3(e,i,c,s);function c(d,h){const g=h[h.length-1],f=g?g.children.indexOf(d):void 0;return l(d,f,g)}}const j1={}.hasOwnProperty,Oz={};function Rz(e,t){const r=t||Oz,n=new Map,s=new Map,i=new Map,l={...xz,...r.handlers},c={all:h,applyData:Dz,definitionById:n,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:l,one:d,options:r,patch:Iz,wrap:Bz};return Dg(e,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const f=g.type==="definition"?n:s,x=String(g.identifier).toUpperCase();f.has(x)||f.set(x,g)}}),c;function d(g,f){const x=g.type,b=c.handlers[x];if(j1.call(c.handlers,x)&&b)return b(c,g,f);if(c.options.passThrough&&c.options.passThrough.includes(x)){if("children"in g){const{children:k,...S}=g,_=uc(S);return _.children=c.all(g),_}return uc(g)}return(c.options.unknownHandler||Pz)(c,g,f)}function h(g){const f=[];if("children"in g){const x=g.children;let b=-1;for(;++b<x.length;){const y=c.one(x[b],g);if(y){if(b&&x[b-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=gT(y.value)),!Array.isArray(y)&&y.type==="element")){const k=y.children[0];k&&k.type==="text"&&(k.value=gT(k.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function Iz(e,t){e.position&&(t.position=b3(e))}function Dz(e,t){let r=t;if(e&&e.data){const n=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const l="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:l}}r.type==="element"&&i&&Object.assign(r.properties,uc(i)),"children"in r&&r.children&&s!==null&&s!==void 0&&(r.children=s)}return r}function Pz(e,t){const r=t.data||{},n="value"in t&&!(j1.call(r,"hProperties")||j1.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Bz(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function gT(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function pT(e,t){const r=Rz(e,t),n=r.one(e,void 0),s=Ez(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function Fz(e,t){return e&&"run"in e?async function(r,n){const s=pT(r,{file:n,...t});await e.run(s,n)}:function(r,n){return pT(r,{file:n,...e||t})}}function fT(e){if(e)throw e}var hy,mT;function $z(){if(mT)return hy;mT=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,s=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},i=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var g=e.call(h,"constructor"),f=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!g&&!f)return!1;var x;for(x in h);return typeof x>"u"||e.call(h,x)},l=function(h,g){r&&g.name==="__proto__"?r(h,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):h[g.name]=g.newValue},c=function(h,g){if(g==="__proto__")if(e.call(h,g)){if(n)return n(h,g).value}else return;return h[g]};return hy=function d(){var h,g,f,x,b,y,k=arguments[0],S=1,_=arguments.length,T=!1;for(typeof k=="boolean"&&(T=k,k=arguments[1]||{},S=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});S<_;++S)if(h=arguments[S],h!=null)for(g in h)f=c(k,g),x=c(h,g),k!==x&&(T&&x&&(i(x)||(b=s(x)))?(b?(b=!1,y=f&&s(f)?f:[]):y=f&&i(f)?f:{},l(k,{name:g,newValue:d(T,y,x)})):typeof x<"u"&&l(k,{name:g,newValue:x}));return k},hy}var Uz=$z();const gy=ed(Uz);function L1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zz(){const e=[],t={run:r,use:n};return t;function r(...s){let i=-1;const l=s.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);c(null,...s);function c(d,...h){const g=e[++i];let f=-1;if(d){l(d);return}for(;++f<s.length;)(h[f]===null||h[f]===void 0)&&(h[f]=s[f]);s=h,g?Hz(g,c)(...h):l(null,...h)}}function n(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function Hz(e,t){let r;return n;function n(...l){const c=e.length>l.length;let d;c&&l.push(s);try{d=e.apply(this,l)}catch(h){const g=h;if(c&&r)throw g;return s(g)}c||(d&&d.then&&typeof d.then=="function"?d.then(i,s):d instanceof Error?s(d):i(d))}function s(l,...c){r||(r=!0,t(l,...c))}function i(l){s(null,l)}}const Li={basename:qz,dirname:Gz,extname:Yz,join:Wz,sep:"/"};function qz(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Pg(e);let r=0,n=-1,s=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else n<0&&(i=!0,n=s+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let l=-1,c=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(i){r=s+1;break}}else l<0&&(i=!0,l=s+1),c>-1&&(e.codePointAt(s)===t.codePointAt(c--)?c<0&&(n=s):(c=-1,n=l));return r===n?n=l:n<0&&(n=e.length),e.slice(r,n)}function Gz(e){if(Pg(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Yz(e){Pg(e);let t=e.length,r=-1,n=0,s=-1,i=0,l;for(;t--;){const c=e.codePointAt(t);if(c===47){if(l){n=t+1;break}continue}r<0&&(l=!0,r=t+1),c===46?s<0?s=t:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||r<0||i===0||i===1&&s===r-1&&s===n+1?"":e.slice(s,r)}function Wz(...e){let t=-1,r;for(;++t<e.length;)Pg(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":Vz(r)}function Vz(e){Pg(e);const t=e.codePointAt(0)===47;let r=Kz(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function Kz(e,t){let r="",n=0,s=-1,i=0,l=-1,c,d;for(;++l<=e.length;){if(l<e.length)c=e.codePointAt(l);else{if(c===47)break;c=47}if(c===47){if(!(s===l-1||i===1))if(s!==l-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),s=l,i=0;continue}}else if(r.length>0){r="",n=0,s=l,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(s+1,l):r=e.slice(s+1,l),n=l-s-1;s=l,i=0}else c===46&&i>-1?i++:i=-1}return r}function Pg(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Xz={cwd:Qz};function Qz(){return"/"}function M1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Jz(e){if(typeof e=="string")e=new URL(e);else if(!M1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Zz(e)}function Zz(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const py=["history","path","basename","stem","extname","dirname"];class q3{constructor(t){let r;t?M1(t)?r={path:t}:typeof t=="string"||eH(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":Xz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<py.length;){const i=py[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let s;for(s in r)py.includes(s)||(this[s]=r[s])}get basename(){return typeof this.path=="string"?Li.basename(this.path):void 0}set basename(t){my(t,"basename"),fy(t,"basename"),this.path=Li.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Li.dirname(this.path):void 0}set dirname(t){xT(this.basename,"dirname"),this.path=Li.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Li.extname(this.path):void 0}set extname(t){if(fy(t,"extname"),xT(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Li.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){M1(t)&&(t=Jz(t)),my(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Li.basename(this.path,this.extname):void 0}set stem(t){my(t,"stem"),fy(t,"stem"),this.path=Li.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const s=this.message(t,r,n);throw s.fatal=!0,s}info(t,r,n){const s=this.message(t,r,n);return s.fatal=void 0,s}message(t,r,n){const s=new $a(t,r,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function fy(e,t){if(e&&e.includes(Li.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Li.sep+"`")}function my(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function xT(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function eH(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const tH=(function(e){const n=this.constructor.prototype,s=n[e],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),rH={}.hasOwnProperty;class c2 extends tH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zz()}copy(){const t=new c2;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(gy(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(yy("data",this.frozen),this.namespace[t]=r,this):rH.call(this.namespace,t)&&this.namespace[t]||void 0:t?(yy("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const s=r.call(t,...n);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=pf(t),n=this.parser||this.Parser;return xy("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),xy("process",this.parser||this.Parser),by("process",this.compiler||this.Compiler),r?s(void 0,r):new Promise(s);function s(i,l){const c=pf(t),d=n.parse(c);n.run(d,c,function(g,f,x){if(g||!f||!x)return h(g);const b=f,y=n.stringify(b,x);sH(y)?x.value=y:x.result=y,h(g,x)});function h(g,f){g||!f?l(g):i?i(f):r(void 0,f)}}}processSync(t){let r=!1,n;return this.freeze(),xy("processSync",this.parser||this.Parser),by("processSync",this.compiler||this.Compiler),this.process(t,s),yT("processSync","process",r),n;function s(i,l){r=!0,fT(i),n=l}}run(t,r,n){bT(t),this.freeze();const s=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(l,c){const d=pf(r);s.run(t,d,h);function h(g,f,x){const b=f||t;g?c(g):l?l(b):n(void 0,b,x)}}}runSync(t,r){let n=!1,s;return this.run(t,r,i),yT("runSync","run",n),s;function i(l,c){fT(l),s=c,n=!0}}stringify(t,r){this.freeze();const n=pf(r),s=this.compiler||this.Compiler;return by("stringify",s),bT(t),s(t,n)}use(t,...r){const n=this.attachers,s=this.namespace;if(yy("use",this.frozen),t!=null)if(typeof t=="function")d(t,r);else if(typeof t=="object")Array.isArray(t)?c(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[g,...f]=h;d(g,f)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(s.settings=gy(!0,s.settings,h.settings))}function c(h){let g=-1;if(h!=null)if(Array.isArray(h))for(;++g<h.length;){const f=h[g];i(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,g){let f=-1,x=-1;for(;++f<n.length;)if(n[f][0]===h){x=f;break}if(x===-1)n.push([h,...g]);else if(g.length>0){let[b,...y]=g;const k=n[x][1];L1(k)&&L1(b)&&(b=gy(!0,k,b)),n[x]=[h,b,...y]}}}}const nH=new c2().freeze();function xy(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function by(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function yy(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bT(e){if(!L1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function yT(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function pf(e){return aH(e)?e:new q3(e)}function aH(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function sH(e){return typeof e=="string"||iH(e)}function iH(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const oH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",vT=[],kT={allowDangerousHtml:!0},lH=/^(https?|ircs?|mailto|xmpp)$/i,cH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function G3(e){const t=uH(e),r=dH(e);return hH(t.runSync(t.parse(r),r),e)}function uH(e){const t=e.rehypePlugins||vT,r=e.remarkPlugins||vT,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...kT}:kT;return nH().use(GU).use(r).use(Fz,n).use(t)}function dH(e){const t=e.children||"",r=new q3;return typeof t=="string"&&(r.value=t),r}function hH(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,i=t.disallowedElements,l=t.skipHtml,c=t.unwrapDisallowed,d=t.urlTransform||gH;for(const g of cH)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+oH+g.id,void 0);return Dg(e,h),NF(e,{Fragment:a.Fragment,components:s,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function h(g,f,x){if(g.type==="raw"&&x&&typeof f=="number")return l?x.children.splice(f,1):x.children[f]={type:"text",value:g.value},f;if(g.type==="element"){let b;for(b in cy)if(Object.hasOwn(cy,b)&&Object.hasOwn(g.properties,b)){const y=g.properties[b],k=cy[b];(k===null||k.includes(g.tagName))&&(g.properties[b]=d(String(y||""),b,g))}}if(g.type==="element"){let b=r?!r.includes(g.tagName):i?i.includes(g.tagName):!1;if(!b&&n&&typeof f=="number"&&(b=!n(g,f,x)),b&&x&&typeof f=="number")return c&&g.children?x.children.splice(f,1,...g.children):x.children.splice(f,1),f}}}function gH(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||r!==-1&&t>r||n!==-1&&t>n||lH.test(e.slice(0,t))?e:""}function wT(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,s=r.indexOf(t);for(;s!==-1;)n++,s=r.indexOf(t,s+t.length);return n}function pH(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function fH(e,t,r){const s=Ig((r||{}).ignore||[]),i=mH(t);let l=-1;for(;++l<i.length;)H3(e,"text",c);function c(h,g){let f=-1,x;for(;++f<g.length;){const b=g[f],y=x?x.children:void 0;if(s(b,y?y.indexOf(b):void 0,x))return;x=b}if(x)return d(h,g)}function d(h,g){const f=g[g.length-1],x=i[l][0],b=i[l][1];let y=0;const S=f.children.indexOf(h);let _=!1,T=[];x.lastIndex=0;let N=x.exec(h.value);for(;N;){const I=N.index,R={index:N.index,input:N.input,stack:[...g,h]};let B=b(...N,R);if(typeof B=="string"&&(B=B.length>0?{type:"text",value:B}:void 0),B===!1?x.lastIndex=I+1:(y!==I&&T.push({type:"text",value:h.value.slice(y,I)}),Array.isArray(B)?T.push(...B):B&&T.push(B),y=I+N[0].length,_=!0),!x.global)break;N=x.exec(h.value)}return _?(y<h.value.length&&T.push({type:"text",value:h.value.slice(y)}),f.children.splice(S,1,...T)):T=[h],S+T.length}}function mH(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const s=r[n];t.push([xH(s[0]),bH(s[1])])}return t}function xH(e){return typeof e=="string"?new RegExp(pH(e),"g"):e}function bH(e){return typeof e=="function"?e:function(){return e}}const vy="phrasing",ky=["autolink","link","image","label"];function yH(){return{transforms:[TH],enter:{literalAutolink:kH,literalAutolinkEmail:wy,literalAutolinkHttp:wy,literalAutolinkWww:wy},exit:{literalAutolink:_H,literalAutolinkEmail:EH,literalAutolinkHttp:wH,literalAutolinkWww:SH}}}function vH(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:vy,notInConstruct:ky},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:vy,notInConstruct:ky},{character:":",before:"[ps]",after:"\\/",inConstruct:vy,notInConstruct:ky}]}}function kH(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function wy(e){this.config.enter.autolinkProtocol.call(this,e)}function wH(e){this.config.exit.autolinkProtocol.call(this,e)}function SH(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function EH(e){this.config.exit.autolinkEmail.call(this,e)}function _H(e){this.exit(e)}function TH(e){fH(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),NH]],{ignore:["link","linkReference"]})}function CH(e,t,r,n,s){let i="";if(!Y3(s)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!AH(r)))return!1;const l=jH(r+n);if(!l[0])return!1;const c={type:"link",title:null,url:i+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[c,{type:"text",value:l[1]}]:c}function NH(e,t,r,n){return!Y3(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function AH(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function jH(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const s=wT(e,"(");let i=wT(e,")");for(;n!==-1&&s>i;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[e,r]}function Y3(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||cc(r)||om(r))&&(!t||r!==47)}W3.peek=FH;function LH(){this.buffer()}function MH(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function OH(){this.buffer()}function RH(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function IH(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=fi(this.sliceSerialize(e)).toLowerCase(),r.label=t}function DH(e){this.exit(e)}function PH(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=fi(this.sliceSerialize(e)).toLowerCase(),r.label=t}function BH(e){this.exit(e)}function FH(){return"["}function W3(e,t,r,n){const s=r.createTracker(n);let i=s.move("[^");const l=r.enter("footnoteReference"),c=r.enter("reference");return i+=s.move(r.safe(r.associationId(e),{after:"]",before:i})),c(),l(),i+=s.move("]"),i}function $H(){return{enter:{gfmFootnoteCallString:LH,gfmFootnoteCall:MH,gfmFootnoteDefinitionLabelString:OH,gfmFootnoteDefinition:RH},exit:{gfmFootnoteCallString:IH,gfmFootnoteCall:DH,gfmFootnoteDefinitionLabelString:PH,gfmFootnoteDefinition:BH}}}function UH(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:W3},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,s,i,l){const c=i.createTracker(l);let d=c.move("[^");const h=i.enter("footnoteDefinition"),g=i.enter("label");return d+=c.move(i.safe(i.associationId(n),{before:d,after:"]"})),g(),d+=c.move("]:"),n.children&&n.children.length>0&&(c.shift(4),d+=c.move((t?`
`:" ")+i.indentLines(i.containerFlow(n,c.current()),t?V3:zH))),h(),d}}function zH(e,t,r){return t===0?e:V3(e,t,r)}function V3(e,t,r){return(r?"":"    ")+e}const HH=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];K3.peek=VH;function qH(){return{canContainEols:["delete"],enter:{strikethrough:YH},exit:{strikethrough:WH}}}function GH(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:HH}],handlers:{delete:K3}}}function YH(e){this.enter({type:"delete",children:[]},e)}function WH(e){this.exit(e)}function K3(e,t,r,n){const s=r.createTracker(n),i=r.enter("strikethrough");let l=s.move("~~");return l+=r.containerPhrasing(e,{...s.current(),before:l,after:"~"}),l+=s.move("~~"),i(),l}function VH(){return"~"}function KH(e){return e.length}function XH(e,t){const r=t||{},n=(r.align||[]).concat(),s=r.stringLength||KH,i=[],l=[],c=[],d=[];let h=0,g=-1;for(;++g<e.length;){const k=[],S=[];let _=-1;for(e[g].length>h&&(h=e[g].length);++_<e[g].length;){const T=QH(e[g][_]);if(r.alignDelimiters!==!1){const N=s(T);S[_]=N,(d[_]===void 0||N>d[_])&&(d[_]=N)}k.push(T)}l[g]=k,c[g]=S}let f=-1;if(typeof n=="object"&&"length"in n)for(;++f<h;)i[f]=ST(n[f]);else{const k=ST(n);for(;++f<h;)i[f]=k}f=-1;const x=[],b=[];for(;++f<h;){const k=i[f];let S="",_="";k===99?(S=":",_=":"):k===108?S=":":k===114&&(_=":");let T=r.alignDelimiters===!1?1:Math.max(1,d[f]-S.length-_.length);const N=S+"-".repeat(T)+_;r.alignDelimiters!==!1&&(T=S.length+T+_.length,T>d[f]&&(d[f]=T),b[f]=T),x[f]=N}l.splice(1,0,x),c.splice(1,0,b),g=-1;const y=[];for(;++g<l.length;){const k=l[g],S=c[g];f=-1;const _=[];for(;++f<h;){const T=k[f]||"";let N="",I="";if(r.alignDelimiters!==!1){const R=d[f]-(S[f]||0),B=i[f];B===114?N=" ".repeat(R):B===99?R%2?(N=" ".repeat(R/2+.5),I=" ".repeat(R/2-.5)):(N=" ".repeat(R/2),I=N):I=" ".repeat(R)}r.delimiterStart!==!1&&!f&&_.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&T==="")&&(r.delimiterStart!==!1||f)&&_.push(" "),r.alignDelimiters!==!1&&_.push(N),_.push(T),r.alignDelimiters!==!1&&_.push(I),r.padding!==!1&&_.push(" "),(r.delimiterEnd!==!1||f!==h-1)&&_.push("|")}y.push(r.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function QH(e){return e==null?"":String(e)}function ST(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const ET={}.hasOwnProperty;function X3(e,t){const r=t||{};function n(s,...i){let l=n.invalid;const c=n.handlers;if(s&&ET.call(s,e)){const d=String(s[e]);l=ET.call(c,d)?c[d]:n.unknown}if(l)return l.call(this,s,...i)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}function JH(e,t,r,n){const s=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const l=r.indentLines(r.containerFlow(e,i.current()),ZH);return s(),l}function ZH(e,t,r){return">"+(r?"":" ")+e}function eq(e,t){return _T(e,t.inConstruct,!0)&&!_T(e,t.notInConstruct,!1)}function _T(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function TT(e,t,r,n){let s=-1;for(;++s<r.unsafe.length;)if(r.unsafe[s].character===`
`&&eq(r.stack,r.unsafe[s]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function tq(e,t){const r=String(e);let n=r.indexOf(t),s=n,i=0,l=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===s?++i>l&&(l=i):i=1,s=n+t.length,n=r.indexOf(t,s);return l}function rq(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function nq(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function aq(e,t,r,n){const s=nq(r),i=e.value||"",l=s==="`"?"GraveAccent":"Tilde";if(rq(e,r)){const f=r.enter("codeIndented"),x=r.indentLines(i,sq);return f(),x}const c=r.createTracker(n),d=s.repeat(Math.max(tq(i,s)+1,3)),h=r.enter("codeFenced");let g=c.move(d);if(e.lang){const f=r.enter(`codeFencedLang${l}`);g+=c.move(r.safe(e.lang,{before:g,after:" ",encode:["`"],...c.current()})),f()}if(e.lang&&e.meta){const f=r.enter(`codeFencedMeta${l}`);g+=c.move(" "),g+=c.move(r.safe(e.meta,{before:g,after:`
`,encode:["`"],...c.current()})),f()}return g+=c.move(`
`),i&&(g+=c.move(i+`
`)),g+=c.move(d),h(),g}function sq(e,t,r){return(r?"":"    ")+e}function u2(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function iq(e,t,r,n){const s=u2(r),i=s==='"'?"Quote":"Apostrophe",l=r.enter("definition");let c=r.enter("label");const d=r.createTracker(n);let h=d.move("[");return h+=d.move(r.safe(r.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),c(),e.title&&(c=r.enter(`title${i}`),h+=d.move(" "+s),h+=d.move(r.safe(e.title,{before:h,after:s,...d.current()})),h+=d.move(s),c()),l(),h}function oq(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function dg(e){return"&#x"+e.toString(16).toUpperCase()+";"}function u0(e,t,r){const n=zu(e),s=zu(t);return n===void 0?s===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Q3.peek=lq;function Q3(e,t,r,n){const s=oq(r),i=r.enter("emphasis"),l=r.createTracker(n),c=l.move(s);let d=l.move(r.containerPhrasing(e,{after:s,before:c,...l.current()}));const h=d.charCodeAt(0),g=u0(n.before.charCodeAt(n.before.length-1),h,s);g.inside&&(d=dg(h)+d.slice(1));const f=d.charCodeAt(d.length-1),x=u0(n.after.charCodeAt(0),f,s);x.inside&&(d=d.slice(0,-1)+dg(f));const b=l.move(s);return i(),r.attentionEncodeSurroundingInfo={after:x.outside,before:g.outside},c+d+b}function lq(e,t,r){return r.options.emphasis||"*"}function cq(e,t){let r=!1;return Dg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,A1}),!!((!e.depth||e.depth<3)&&r2(e)&&(t.options.setext||r))}function uq(e,t,r,n){const s=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(n);if(cq(e,r)){const g=r.enter("headingSetext"),f=r.enter("phrasing"),x=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return f(),g(),x+`
`+(s===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const l="#".repeat(s),c=r.enter("headingAtx"),d=r.enter("phrasing");i.move(l+" ");let h=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=dg(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,r.options.closeAtx&&(h+=" "+l),d(),c(),h}J3.peek=dq;function J3(e){return e.value||""}function dq(){return"<"}Z3.peek=hq;function Z3(e,t,r,n){const s=u2(r),i=s==='"'?"Quote":"Apostrophe",l=r.enter("image");let c=r.enter("label");const d=r.createTracker(n);let h=d.move("![");return h+=d.move(r.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(c=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),c(),e.title&&(c=r.enter(`title${i}`),h+=d.move(" "+s),h+=d.move(r.safe(e.title,{before:h,after:s,...d.current()})),h+=d.move(s),c()),h+=d.move(")"),l(),h}function hq(){return"!"}ej.peek=gq;function ej(e,t,r,n){const s=e.referenceType,i=r.enter("imageReference");let l=r.enter("label");const c=r.createTracker(n);let d=c.move("![");const h=r.safe(e.alt,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),l();const g=r.stack;r.stack=[],l=r.enter("reference");const f=r.safe(r.associationId(e),{before:d,after:"]",...c.current()});return l(),r.stack=g,i(),s==="full"||!h||h!==f?d+=c.move(f+"]"):s==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function gq(){return"!"}tj.peek=pq;function tj(e,t,r){let n=e.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(n);)s+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const l=r.unsafe[i],c=r.compilePattern(l);let d;if(l.atBreak)for(;d=c.exec(n);){let h=d.index;n.charCodeAt(h)===10&&n.charCodeAt(h-1)===13&&h--,n=n.slice(0,h)+" "+n.slice(d.index+1)}}return s+n+s}function pq(){return"`"}function rj(e,t){const r=r2(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}nj.peek=fq;function nj(e,t,r,n){const s=u2(r),i=s==='"'?"Quote":"Apostrophe",l=r.createTracker(n);let c,d;if(rj(e,r)){const g=r.stack;r.stack=[],c=r.enter("autolink");let f=l.move("<");return f+=l.move(r.containerPhrasing(e,{before:f,after:">",...l.current()})),f+=l.move(">"),c(),r.stack=g,f}c=r.enter("link"),d=r.enter("label");let h=l.move("[");return h+=l.move(r.containerPhrasing(e,{before:h,after:"](",...l.current()})),h+=l.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=r.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(r.safe(e.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(d=r.enter("destinationRaw"),h+=l.move(r.safe(e.url,{before:h,after:e.title?" ":")",...l.current()}))),d(),e.title&&(d=r.enter(`title${i}`),h+=l.move(" "+s),h+=l.move(r.safe(e.title,{before:h,after:s,...l.current()})),h+=l.move(s),d()),h+=l.move(")"),c(),h}function fq(e,t,r){return rj(e,r)?"<":"["}aj.peek=mq;function aj(e,t,r,n){const s=e.referenceType,i=r.enter("linkReference");let l=r.enter("label");const c=r.createTracker(n);let d=c.move("[");const h=r.containerPhrasing(e,{before:d,after:"]",...c.current()});d+=c.move(h+"]["),l();const g=r.stack;r.stack=[],l=r.enter("reference");const f=r.safe(r.associationId(e),{before:d,after:"]",...c.current()});return l(),r.stack=g,i(),s==="full"||!h||h!==f?d+=c.move(f+"]"):s==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function mq(){return"["}function d2(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function xq(e){const t=d2(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function bq(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function sj(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function yq(e,t,r,n){const s=r.enter("list"),i=r.bulletCurrent;let l=e.ordered?bq(r):d2(r);const c=e.ordered?l==="."?")":".":xq(r);let d=t&&r.bulletLastUsed?l===r.bulletLastUsed:!1;if(!e.ordered){const g=e.children?e.children[0]:void 0;if((l==="*"||l==="-")&&g&&(!g.children||!g.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(d=!0),sj(r)===l&&g){let f=-1;for(;++f<e.children.length;){const x=e.children[f];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(l=c),r.bulletCurrent=l;const h=r.containerFlow(e,n);return r.bulletLastUsed=l,r.bulletCurrent=i,s(),h}function vq(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function kq(e,t,r,n){const s=vq(r);let i=r.bulletCurrent||d2(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let l=i.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(l=Math.ceil(l/4)*4);const c=r.createTracker(n);c.move(i+" ".repeat(l-i.length)),c.shift(l);const d=r.enter("listItem"),h=r.indentLines(r.containerFlow(e,c.current()),g);return d(),h;function g(f,x,b){return x?(b?"":" ".repeat(l))+f:(b?i:i+" ".repeat(l-i.length))+f}}function wq(e,t,r,n){const s=r.enter("paragraph"),i=r.enter("phrasing"),l=r.containerPhrasing(e,n);return i(),s(),l}const Sq=Ig(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Eq(e,t,r,n){return(e.children.some(function(l){return Sq(l)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function _q(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}ij.peek=Tq;function ij(e,t,r,n){const s=_q(r),i=r.enter("strong"),l=r.createTracker(n),c=l.move(s+s);let d=l.move(r.containerPhrasing(e,{after:s,before:c,...l.current()}));const h=d.charCodeAt(0),g=u0(n.before.charCodeAt(n.before.length-1),h,s);g.inside&&(d=dg(h)+d.slice(1));const f=d.charCodeAt(d.length-1),x=u0(n.after.charCodeAt(0),f,s);x.inside&&(d=d.slice(0,-1)+dg(f));const b=l.move(s+s);return i(),r.attentionEncodeSurroundingInfo={after:x.outside,before:g.outside},c+d+b}function Tq(e,t,r){return r.options.strong||"*"}function Cq(e,t,r,n){return r.safe(e.value,n)}function Nq(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Aq(e,t,r){const n=(sj(r)+(r.options.ruleSpaces?" ":"")).repeat(Nq(r));return r.options.ruleSpaces?n.slice(0,-1):n}const oj={blockquote:JH,break:TT,code:aq,definition:iq,emphasis:Q3,hardBreak:TT,heading:uq,html:J3,image:Z3,imageReference:ej,inlineCode:tj,link:nj,linkReference:aj,list:yq,listItem:kq,paragraph:wq,root:Eq,strong:ij,text:Cq,thematicBreak:Aq};function jq(){return{enter:{table:Lq,tableData:CT,tableHeader:CT,tableRow:Oq},exit:{codeText:Rq,table:Mq,tableData:Sy,tableHeader:Sy,tableRow:Sy}}}function Lq(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function Mq(e){this.exit(e),this.data.inTable=void 0}function Oq(e){this.enter({type:"tableRow",children:[]},e)}function Sy(e){this.exit(e)}function CT(e){this.enter({type:"tableCell",children:[]},e)}function Rq(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Iq));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function Iq(e,t){return t==="|"?t:e}function Dq(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,s=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:l,tableCell:d,tableRow:c}};function l(b,y,k,S){return h(g(b,k,S),b.align)}function c(b,y,k,S){const _=f(b,k,S),T=h([_]);return T.slice(0,T.indexOf(`
`))}function d(b,y,k,S){const _=k.enter("tableCell"),T=k.enter("phrasing"),N=k.containerPhrasing(b,{...S,before:i,after:i});return T(),_(),N}function h(b,y){return XH(b,{align:y,alignDelimiters:n,padding:r,stringLength:s})}function g(b,y,k){const S=b.children;let _=-1;const T=[],N=y.enter("table");for(;++_<S.length;)T[_]=f(S[_],y,k);return N(),T}function f(b,y,k){const S=b.children;let _=-1;const T=[],N=y.enter("tableRow");for(;++_<S.length;)T[_]=d(S[_],b,y,k);return N(),T}function x(b,y,k){let S=oj.inlineCode(b,y,k);return k.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function Pq(){return{exit:{taskListCheckValueChecked:NT,taskListCheckValueUnchecked:NT,paragraph:Fq}}}function Bq(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:$q}}}function NT(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Fq(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const s=t.children;let i=-1,l;for(;++i<s.length;){const c=s[i];if(c.type==="paragraph"){l=c;break}}l===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function $q(e,t,r,n){const s=e.children[0],i=typeof e.checked=="boolean"&&s&&s.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",c=r.createTracker(n);i&&c.move(l);let d=oj.listItem(e,t,r,{...n,...c.current()});return i&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(g){return g+l}}function Uq(){return[yH(),$H(),qH(),jq(),Pq()]}function zq(e){return{extensions:[vH(),UH(e),GH(),Dq(e),Bq()]}}const Hq={tokenize:Kq,partial:!0},lj={tokenize:Xq,partial:!0},cj={tokenize:Qq,partial:!0},uj={tokenize:Jq,partial:!0},qq={tokenize:Zq,partial:!0},dj={name:"wwwAutolink",tokenize:Wq,previous:gj},hj={name:"protocolAutolink",tokenize:Vq,previous:pj},No={name:"emailAutolink",tokenize:Yq,previous:fj},Hi={};function Gq(){return{text:Hi}}let zl=48;for(;zl<123;)Hi[zl]=No,zl++,zl===58?zl=65:zl===91&&(zl=97);Hi[43]=No;Hi[45]=No;Hi[46]=No;Hi[95]=No;Hi[72]=[No,hj];Hi[104]=[No,hj];Hi[87]=[No,dj];Hi[119]=[No,dj];function Yq(e,t,r){const n=this;let s,i;return l;function l(f){return!O1(f)||!fj.call(n,n.previous)||h2(n.events)?r(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(f))}function c(f){return O1(f)?(e.consume(f),c):f===64?(e.consume(f),d):r(f)}function d(f){return f===46?e.check(qq,g,h)(f):f===45||f===95||Ia(f)?(i=!0,e.consume(f),d):g(f)}function h(f){return e.consume(f),s=!0,d}function g(f){return i&&s&&Ka(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):r(f)}}function Wq(e,t,r){const n=this;return s;function s(l){return l!==87&&l!==119||!gj.call(n,n.previous)||h2(n.events)?r(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Hq,e.attempt(lj,e.attempt(cj,i),r),r)(l))}function i(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function Vq(e,t,r){const n=this;let s="",i=!1;return l;function l(f){return(f===72||f===104)&&pj.call(n,n.previous)&&!h2(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(f),e.consume(f),c):r(f)}function c(f){if(Ka(f)&&s.length<5)return s+=String.fromCodePoint(f),e.consume(f),c;if(f===58){const x=s.toLowerCase();if(x==="http"||x==="https")return e.consume(f),d}return r(f)}function d(f){return f===47?(e.consume(f),i?h:(i=!0,d)):r(f)}function h(f){return f===null||l0(f)||mn(f)||cc(f)||om(f)?r(f):e.attempt(lj,e.attempt(cj,g),r)(f)}function g(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function Kq(e,t,r){let n=0;return s;function s(l){return(l===87||l===119)&&n<3?(n++,e.consume(l),s):l===46&&n===3?(e.consume(l),i):r(l)}function i(l){return l===null?r(l):t(l)}}function Xq(e,t,r){let n,s,i;return l;function l(h){return h===46||h===95?e.check(uj,d,c)(h):h===null||mn(h)||cc(h)||h!==45&&om(h)?d(h):(i=!0,e.consume(h),l)}function c(h){return h===95?n=!0:(s=n,n=void 0),e.consume(h),l}function d(h){return s||n||!i?r(h):t(h)}}function Qq(e,t){let r=0,n=0;return s;function s(l){return l===40?(r++,e.consume(l),s):l===41&&n<r?i(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(uj,t,i)(l):l===null||mn(l)||cc(l)?t(l):(e.consume(l),s)}function i(l){return l===41&&n++,e.consume(l),s}}function Jq(e,t,r){return n;function n(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),n):c===38?(e.consume(c),i):c===93?(e.consume(c),s):c===60||c===null||mn(c)||cc(c)?t(c):r(c)}function s(c){return c===null||c===40||c===91||mn(c)||cc(c)?t(c):n(c)}function i(c){return Ka(c)?l(c):r(c)}function l(c){return c===59?(e.consume(c),n):Ka(c)?(e.consume(c),l):r(c)}}function Zq(e,t,r){return n;function n(i){return e.consume(i),s}function s(i){return Ia(i)?r(i):t(i)}}function gj(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||mn(e)}function pj(e){return!Ka(e)}function fj(e){return!(e===47||O1(e))}function O1(e){return e===43||e===45||e===46||e===95||Ia(e)}function h2(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const eG={tokenize:lG,partial:!0};function tG(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:sG,continuation:{tokenize:iG},exit:oG}},text:{91:{name:"gfmFootnoteCall",tokenize:aG},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:rG,resolveTo:nG}}}}function rG(e,t,r){const n=this;let s=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let l;for(;s--;){const d=n.events[s][1];if(d.type==="labelImage"){l=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!l||!l._balanced)return r(d);const h=fi(n.sliceSerialize({start:l.end,end:n.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?r(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function nG(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",s,t],["exit",s,t],["enter",i,t],["enter",l,t],["exit",l,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...c),e}function aG(e,t,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i=0,l;return c;function c(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),d}function d(f){return f!==94?r(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(f){if(i>999||f===93&&!l||f===null||f===91||mn(f))return r(f);if(f===93){e.exit("chunkString");const x=e.exit("gfmFootnoteCallString");return s.includes(fi(n.sliceSerialize(x)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(f)}return mn(f)||(l=!0),i++,e.consume(f),f===92?g:h}function g(f){return f===91||f===92||f===93?(e.consume(f),i++,h):h(f)}}function sG(e,t,r){const n=this,s=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,l=0,c;return d;function d(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",g):r(y)}function g(y){if(l>999||y===93&&!c||y===null||y===91||mn(y))return r(y);if(y===93){e.exit("chunkString");const k=e.exit("gfmFootnoteDefinitionLabelString");return i=fi(n.sliceSerialize(k)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),x}return mn(y)||(c=!0),l++,e.consume(y),y===92?f:g}function f(y){return y===91||y===92||y===93?(e.consume(y),l++,g):g(y)}function x(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),s.includes(i)||s.push(i),Br(e,b,"gfmFootnoteDefinitionWhitespace")):r(y)}function b(y){return t(y)}}function iG(e,t,r){return e.check(Rg,t,e.attempt(eG,t,r))}function oG(e){e.exit("gfmFootnoteDefinition")}function lG(e,t,r){const n=this;return Br(e,s,"gfmFootnoteDefinitionIndent",5);function s(i){const l=n.events[n.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(i):r(i)}}function cG(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:s};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function s(l,c){let d=-1;for(;++d<l.length;)if(l[d][0]==="enter"&&l[d][1].type==="strikethroughSequenceTemporary"&&l[d][1]._close){let h=d;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[d][1].end.offset-l[d][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[d][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[d][1].end)},f={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[d][1].start)},x=[["enter",g,c],["enter",l[h][1],c],["exit",l[h][1],c],["enter",f,c]],b=c.parser.constructs.insideSpan.null;b&&Ls(x,x.length,0,lm(b,l.slice(h+1,d),c)),Ls(x,x.length,0,[["exit",f,c],["enter",l[d][1],c],["exit",l[d][1],c],["exit",g,c]]),Ls(l,h-1,d-h+3,x),d=h+x.length-2;break}}for(d=-1;++d<l.length;)l[d][1].type==="strikethroughSequenceTemporary"&&(l[d][1].type="data");return l}function i(l,c,d){const h=this.previous,g=this.events;let f=0;return x;function x(y){return h===126&&g[g.length-1][1].type!=="characterEscape"?d(y):(l.enter("strikethroughSequenceTemporary"),b(y))}function b(y){const k=zu(h);if(y===126)return f>1?d(y):(l.consume(y),f++,b);if(f<2&&!r)return d(y);const S=l.exit("strikethroughSequenceTemporary"),_=zu(y);return S._open=!_||_===2&&!!k,S._close=!k||k===2&&!!_,c(y)}}}class uG{constructor(){this.map=[]}add(t,r,n){dG(this,t,r,n)}consume(t){if(this.map.sort(function(i,l){return i[0]-l[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let s=n.pop();for(;s;){for(const i of s)t.push(i);s=n.pop()}this.map.length=0}}function dG(e,t,r,n){let s=0;if(!(r===0&&n.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=r,e.map[s][2].push(...n);return}s+=1}e.map.push([t,r,n])}}function hG(e,t){let r=!1;const n=[];for(;t<e.length;){const s=e[t];if(r){if(s[0]==="enter")s[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=n.length-1;n[i]=n[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function gG(){return{flow:{null:{name:"table",tokenize:pG,resolveAll:fG}}}}function pG(e,t,r){const n=this;let s=0,i=0,l;return c;function c($){let J=n.events.length-1;for(;J>-1;){const j=n.events[J][1].type;if(j==="lineEnding"||j==="linePrefix")J--;else break}const ee=J>-1?n.events[J][1].type:null,W=ee==="tableHead"||ee==="tableRow"?B:d;return W===B&&n.parser.lazy[n.now().line]?r($):W($)}function d($){return e.enter("tableHead"),e.enter("tableRow"),h($)}function h($){return $===124||(l=!0,i+=1),g($)}function g($){return $===null?r($):Vt($)?i>1?(i=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),b):r($):Nr($)?Br(e,g,"whitespace")($):(i+=1,l&&(l=!1,s+=1),$===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),l=!0,g):(e.enter("data"),f($)))}function f($){return $===null||$===124||mn($)?(e.exit("data"),g($)):(e.consume($),$===92?x:f)}function x($){return $===92||$===124?(e.consume($),f):f($)}function b($){return n.interrupt=!1,n.parser.lazy[n.now().line]?r($):(e.enter("tableDelimiterRow"),l=!1,Nr($)?Br(e,y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):y($))}function y($){return $===45||$===58?S($):$===124?(l=!0,e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),k):R($)}function k($){return Nr($)?Br(e,S,"whitespace")($):S($)}function S($){return $===58?(i+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),_):$===45?(i+=1,_($)):$===null||Vt($)?I($):R($)}function _($){return $===45?(e.enter("tableDelimiterFiller"),T($)):R($)}function T($){return $===45?(e.consume($),T):$===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume($),e.exit("tableDelimiterMarker"),N):(e.exit("tableDelimiterFiller"),N($))}function N($){return Nr($)?Br(e,I,"whitespace")($):I($)}function I($){return $===124?y($):$===null||Vt($)?!l||s!==i?R($):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t($)):R($)}function R($){return r($)}function B($){return e.enter("tableRow"),F($)}function F($){return $===124?(e.enter("tableCellDivider"),e.consume($),e.exit("tableCellDivider"),F):$===null||Vt($)?(e.exit("tableRow"),t($)):Nr($)?Br(e,F,"whitespace")($):(e.enter("data"),ae($))}function ae($){return $===null||$===124||mn($)?(e.exit("data"),F($)):(e.consume($),$===92?G:ae)}function G($){return $===92||$===124?(e.consume($),ae):ae($)}}function fG(e,t){let r=-1,n=!0,s=0,i=[0,0,0,0],l=[0,0,0,0],c=!1,d=0,h,g,f;const x=new uG;for(;++r<e.length;){const b=e[r],y=b[1];b[0]==="enter"?y.type==="tableHead"?(c=!1,d!==0&&(AT(x,t,d,h,g),g=void 0,d=0),h={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(r,0,[["enter",h,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(n=!0,f=void 0,i=[0,0,0,0],l=[0,r+1,0,0],c&&(c=!1,g={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(r,0,[["enter",g,t]])),s=y.type==="tableDelimiterRow"?2:g?3:1):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(n=!1,l[2]===0&&(i[1]!==0&&(l[0]=l[1],f=ff(x,t,i,s,void 0,f),i=[0,0,0,0]),l[2]=r)):y.type==="tableCellDivider"&&(n?n=!1:(i[1]!==0&&(l[0]=l[1],f=ff(x,t,i,s,void 0,f)),i=l,l=[i[1],r,0,0])):y.type==="tableHead"?(c=!0,d=r):y.type==="tableRow"||y.type==="tableDelimiterRow"?(d=r,i[1]!==0?(l[0]=l[1],f=ff(x,t,i,s,r,f)):l[1]!==0&&(f=ff(x,t,l,s,r,f)),s=0):s&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(l[3]=r)}for(d!==0&&AT(x,t,d,h,g),x.consume(t.events),r=-1;++r<t.events.length;){const b=t.events[r];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=hG(t.events,r))}return e}function ff(e,t,r,n,s,i){const l=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",c="tableContent";r[0]!==0&&(i.end=Object.assign({},yu(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const d=yu(t.events,r[1]);if(i={type:l,start:Object.assign({},d),end:Object.assign({},d)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){const h=yu(t.events,r[2]),g=yu(t.events,r[3]),f={type:c,start:Object.assign({},h),end:Object.assign({},g)};if(e.add(r[2],0,[["enter",f,t]]),n!==2){const x=t.events[r[2]],b=t.events[r[3]];if(x[1].end=Object.assign({},b[1].end),x[1].type="chunkText",x[1].contentType="text",r[3]>r[2]+1){const y=r[2]+1,k=r[3]-r[2]-1;e.add(y,k,[])}}e.add(r[3]+1,0,[["exit",f,t]])}return s!==void 0&&(i.end=Object.assign({},yu(t.events,s)),e.add(s,0,[["exit",i,t]]),i=void 0),i}function AT(e,t,r,n,s){const i=[],l=yu(t.events,r);s&&(s.end=Object.assign({},l),i.push(["exit",s,t])),n.end=Object.assign({},l),i.push(["exit",n,t]),e.add(r+1,0,i)}function yu(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const mG={name:"tasklistCheck",tokenize:bG};function xG(){return{text:{91:mG}}}function bG(e,t,r){const n=this;return s;function s(d){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),i)}function i(d){return mn(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),l):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),l):r(d)}function l(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):r(d)}function c(d){return Vt(d)?t(d):Nr(d)?e.check({tokenize:yG},t,r)(d):r(d)}}function yG(e,t,r){return Br(e,n,"whitespace");function n(s){return s===null?r(s):t(s)}}function vG(e){return E3([Gq(),tG(),cG(e),gG(),xG()])}const kG={};function wG(e){const t=this,r=e||kG,n=t.data(),s=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),l=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);s.push(vG(r)),i.push(Uq()),l.push(zq(r))}const jT=/[#.]/g;function SG(e,t){const r=e||"",n={};let s=0,i,l;for(;s<r.length;){jT.lastIndex=s;const c=jT.exec(r),d=r.slice(s,c?c.index:r.length);d&&(i?i==="#"?n.id=d:Array.isArray(n.className)?n.className.push(d):n.className=[d]:l=d,s+=d.length),c&&(i=c[0],s++)}return{type:"element",tagName:l||t||"div",properties:n,children:[]}}function mj(e,t,r){const n=r?CG(r):void 0;function s(i,l,...c){let d;if(i==null){d={type:"root",children:[]};const h=l;c.unshift(h)}else{d=SG(i,t);const h=d.tagName.toLowerCase(),g=n?n.get(h):void 0;if(d.tagName=g||h,EG(l))c.unshift(l);else for(const[f,x]of Object.entries(l))_G(e,d.properties,f,x)}for(const h of c)R1(d.children,h);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function EG(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const n of r){const s=t[n];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const i=s;for(const l of i)if(typeof l!="number"&&typeof l!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function _G(e,t,r,n){const s=Jv(e,r);let i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?s.spaceSeparated?i=H_(n):s.commaSeparated?i=B_(n):s.commaOrSpaceSeparated?i=H_(B_(n).join(" ")):i=LT(s,s.property,n):Array.isArray(n)?i=[...n]:i=s.property==="style"?TG(n):String(n);if(Array.isArray(i)){const l=[];for(const c of i)l.push(LT(s,s.property,c));i=l}s.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[s.property]=i}}function R1(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)R1(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?R1(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function LT(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||cg(r)===cg(t)))return!0}return r}function TG(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function CG(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const NG=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],AG=mj(sm,"div"),jG=mj(sd,"g",NG);function LG(e){const t=String(e),r=[];return{toOffset:s,toPoint:n};function n(i){if(typeof i=="number"&&i>-1&&i<=t.length){let l=0;for(;;){let c=r[l];if(c===void 0){const d=MT(t,r[l-1]);c=d===-1?t.length+1:d+1,r[l]=c}if(c>i)return{line:l+1,column:i-(l>0?r[l-1]:0)+1,offset:i};l++}}}function s(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;r.length<i.line;){const c=r[r.length-1],d=MT(t,c),h=d===-1?t.length+1:d+1;if(c===h)break;r.push(h)}const l=(i.line>1?r[i.line-2]:0)+i.column-1;if(l<r[i.line-1])return l}}}function MT(e,t){const r=e.indexOf("\r",t),n=e.indexOf(`
`,t);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const Ql={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xj={}.hasOwnProperty,MG=Object.prototype;function OG(e,t){const r=t||{};return g2({file:r.file||void 0,location:!1,schema:r.space==="svg"?sd:sm,verbose:r.verbose||!1},e)}function g2(e,t){let r;switch(t.nodeName){case"#comment":{const n=t;return r={type:"comment",value:n.data},Ff(e,n,r),r}case"#document":case"#document-fragment":{const n=t,s="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:bj(e,t.childNodes),data:{quirksMode:s}},e.file&&e.location){const i=String(e.file),l=LG(i),c=l.toPoint(0),d=l.toPoint(i.length);r.position={start:c,end:d}}return r}case"#documentType":{const n=t;return r={type:"doctype"},Ff(e,n,r),r}case"#text":{const n=t;return r={type:"text",value:n.value},Ff(e,n,r),r}default:return r=RG(e,t),r}}function bj(e,t){let r=-1;const n=[];for(;++r<t.length;){const s=g2(e,t[r]);n.push(s)}return n}function RG(e,t){const r=e.schema;e.schema=t.namespaceURI===Ql.svg?sd:sm;let n=-1;const s={};for(;++n<t.attrs.length;){const c=t.attrs[n],d=(c.prefix?c.prefix+":":"")+c.name;xj.call(MG,d)||(s[d]=c.value)}const l=(e.schema.space==="svg"?jG:AG)(t.tagName,s,bj(e,t.childNodes));if(Ff(e,t,l),l.tagName==="template"){const c=t,d=c.sourceCodeLocation,h=d&&d.startTag&&Eu(d.startTag),g=d&&d.endTag&&Eu(d.endTag),f=g2(e,c.content);h&&g&&e.file&&(f.position={start:h.end,end:g.start}),l.content=f}return e.schema=r,l}function Ff(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=IG(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function IG(e,t,r){const n=Eu(r);if(t.type==="element"){const s=t.children[t.children.length-1];if(n&&!r.endTag&&s&&s.position&&s.position.end&&(n.end=Object.assign({},s.position.end)),e.verbose){const i={};let l;if(r.attrs)for(l in r.attrs)xj.call(r.attrs,l)&&(i[Jv(e.schema,l).property]=Eu(r.attrs[l]));r.startTag;const c=Eu(r.startTag),d=r.endTag?Eu(r.endTag):void 0,h={opening:c};d&&(h.closing=d),h.properties=i,t.data={position:h}}}return n}function Eu(e){const t=OT({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=OT({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function OT(e){return e.line&&e.column?e:void 0}class Bg{constructor(t,r,n){this.property=t,this.normal=r,n&&(this.space=n)}}Bg.prototype.property={};Bg.prototype.normal={};Bg.prototype.space=null;function yj(e,t){const r={},n={};let s=-1;for(;++s<e.length;)Object.assign(r,e[s].property),Object.assign(n,e[s].normal);return new Bg(r,n,t)}function I1(e){return e.toLowerCase()}class ti{constructor(t,r){this.property=t,this.attribute=r}}ti.prototype.space=null;ti.prototype.boolean=!1;ti.prototype.booleanish=!1;ti.prototype.overloadedBoolean=!1;ti.prototype.number=!1;ti.prototype.commaSeparated=!1;ti.prototype.spaceSeparated=!1;ti.prototype.commaOrSpaceSeparated=!1;ti.prototype.mustUseProperty=!1;ti.prototype.defined=!1;let DG=0;const gr=kc(),ra=kc(),vj=kc(),st=kc(),yn=kc(),Au=kc(),As=kc();function kc(){return 2**++DG}const D1=Object.freeze(Object.defineProperty({__proto__:null,boolean:gr,booleanish:ra,commaOrSpaceSeparated:As,commaSeparated:Au,number:st,overloadedBoolean:vj,spaceSeparated:yn},Symbol.toStringTag,{value:"Module"})),Ey=Object.keys(D1);class p2 extends ti{constructor(t,r,n,s){let i=-1;if(super(t,r),RT(this,"space",s),typeof n=="number")for(;++i<Ey.length;){const l=Ey[i];RT(this,Ey[i],(n&D1[l])===D1[l])}}}p2.prototype.defined=!0;function RT(e,t,r){r&&(e[t]=r)}const PG={}.hasOwnProperty;function od(e){const t={},r={};let n;for(n in e.properties)if(PG.call(e.properties,n)){const s=e.properties[n],i=new p2(n,e.transform(e.attributes||{},n),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[I1(n)]=n,r[I1(i.attribute)]=n}return new Bg(t,r,e.space)}const kj=od({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),wj=od({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Sj(e,t){return t in e?e[t]:t}function Ej(e,t){return Sj(e,t.toLowerCase())}const _j=od({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Ej,properties:{xmlns:null,xmlnsXLink:null}}),Tj=od({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ra,ariaAutoComplete:null,ariaBusy:ra,ariaChecked:ra,ariaColCount:st,ariaColIndex:st,ariaColSpan:st,ariaControls:yn,ariaCurrent:null,ariaDescribedBy:yn,ariaDetails:null,ariaDisabled:ra,ariaDropEffect:yn,ariaErrorMessage:null,ariaExpanded:ra,ariaFlowTo:yn,ariaGrabbed:ra,ariaHasPopup:null,ariaHidden:ra,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:yn,ariaLevel:st,ariaLive:null,ariaModal:ra,ariaMultiLine:ra,ariaMultiSelectable:ra,ariaOrientation:null,ariaOwns:yn,ariaPlaceholder:null,ariaPosInSet:st,ariaPressed:ra,ariaReadOnly:ra,ariaRelevant:null,ariaRequired:ra,ariaRoleDescription:yn,ariaRowCount:st,ariaRowIndex:st,ariaRowSpan:st,ariaSelected:ra,ariaSetSize:st,ariaSort:null,ariaValueMax:st,ariaValueMin:st,ariaValueNow:st,ariaValueText:null,role:null}}),BG=od({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Ej,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Au,acceptCharset:yn,accessKey:yn,action:null,allow:null,allowFullScreen:gr,allowPaymentRequest:gr,allowUserMedia:gr,alt:null,as:null,async:gr,autoCapitalize:null,autoComplete:yn,autoFocus:gr,autoPlay:gr,blocking:yn,capture:null,charSet:null,checked:gr,cite:null,className:yn,cols:st,colSpan:null,content:null,contentEditable:ra,controls:gr,controlsList:yn,coords:st|Au,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gr,defer:gr,dir:null,dirName:null,disabled:gr,download:vj,draggable:ra,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gr,formTarget:null,headers:yn,height:st,hidden:gr,high:st,href:null,hrefLang:null,htmlFor:yn,httpEquiv:yn,id:null,imageSizes:null,imageSrcSet:null,inert:gr,inputMode:null,integrity:null,is:null,isMap:gr,itemId:null,itemProp:yn,itemRef:yn,itemScope:gr,itemType:yn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gr,low:st,manifest:null,max:null,maxLength:st,media:null,method:null,min:null,minLength:st,multiple:gr,muted:gr,name:null,nonce:null,noModule:gr,noValidate:gr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gr,optimum:st,pattern:null,ping:yn,placeholder:null,playsInline:gr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gr,referrerPolicy:null,rel:yn,required:gr,reversed:gr,rows:st,rowSpan:st,sandbox:yn,scope:null,scoped:gr,seamless:gr,selected:gr,shadowRootClonable:gr,shadowRootDelegatesFocus:gr,shadowRootMode:null,shape:null,size:st,sizes:null,slot:null,span:st,spellCheck:ra,src:null,srcDoc:null,srcLang:null,srcSet:null,start:st,step:null,style:null,tabIndex:st,target:null,title:null,translate:null,type:null,typeMustMatch:gr,useMap:null,value:ra,width:st,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:yn,axis:null,background:null,bgColor:null,border:st,borderColor:null,bottomMargin:st,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gr,declare:gr,event:null,face:null,frame:null,frameBorder:null,hSpace:st,leftMargin:st,link:null,longDesc:null,lowSrc:null,marginHeight:st,marginWidth:st,noResize:gr,noHref:gr,noShade:gr,noWrap:gr,object:null,profile:null,prompt:null,rev:null,rightMargin:st,rules:null,scheme:null,scrolling:ra,standby:null,summary:null,text:null,topMargin:st,valueType:null,version:null,vAlign:null,vLink:null,vSpace:st,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gr,disableRemotePlayback:gr,prefix:null,property:null,results:st,security:null,unselectable:null}}),FG=od({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Sj,properties:{about:As,accentHeight:st,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:st,amplitude:st,arabicForm:null,ascent:st,attributeName:null,attributeType:null,azimuth:st,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:st,by:null,calcMode:null,capHeight:st,className:yn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:st,diffuseConstant:st,direction:null,display:null,dur:null,divisor:st,dominantBaseline:null,download:gr,dx:null,dy:null,edgeMode:null,editable:null,elevation:st,enableBackground:null,end:null,event:null,exponent:st,externalResourcesRequired:null,fill:null,fillOpacity:st,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Au,g2:Au,glyphName:Au,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:st,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:st,horizOriginX:st,horizOriginY:st,id:null,ideographic:st,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:st,k:st,k1:st,k2:st,k3:st,k4:st,kernelMatrix:As,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:st,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:st,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:st,overlineThickness:st,paintOrder:null,panose1:null,path:null,pathLength:st,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:yn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:st,pointsAtY:st,pointsAtZ:st,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:As,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:As,rev:As,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:As,requiredFeatures:As,requiredFonts:As,requiredFormats:As,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:st,specularExponent:st,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:st,strikethroughThickness:st,string:null,stroke:null,strokeDashArray:As,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:st,strokeOpacity:st,strokeWidth:null,style:null,surfaceScale:st,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:As,tabIndex:st,tableValues:null,target:null,targetX:st,targetY:st,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:As,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:st,underlineThickness:st,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:st,values:null,vAlphabetic:st,vMathematical:st,vectorEffect:null,vHanging:st,vIdeographic:st,version:null,vertAdvY:st,vertOriginX:st,vertOriginY:st,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:st,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),$G=/^data[-\w.:]+$/i,IT=/-[a-z]/g,UG=/[A-Z]/g;function zG(e,t){const r=I1(t);let n=t,s=ti;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&$G.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(IT,qG);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!IT.test(i)){let l=i.replace(UG,HG);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}s=p2}return new s(n,t)}function HG(e){return"-"+e.toLowerCase()}function qG(e){return e.charAt(1).toUpperCase()}const GG=yj([wj,kj,_j,Tj,BG],"html"),Cj=yj([wj,kj,_j,Tj,FG],"svg"),YG={},WG={}.hasOwnProperty,Nj=X3("type",{handlers:{root:KG,element:eY,text:JG,comment:ZG,doctype:QG}});function VG(e,t){const n=(t||YG).space;return Nj(e,n==="svg"?Cj:GG)}function KG(e,t){const r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=f2(e.children,r,t),ld(e,r),r}function XG(e,t){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=f2(e.children,r,t),ld(e,r),r}function QG(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return ld(e,t),t}function JG(e){const t={nodeName:"#text",value:e.value,parentNode:null};return ld(e,t),t}function ZG(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return ld(e,t),t}function eY(e,t){const r=t;let n=r;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=Cj);const s=[];let i;if(e.properties){for(i in e.properties)if(i!=="children"&&WG.call(e.properties,i)){const d=tY(n,i,e.properties[i]);d&&s.push(d)}}const l=n.space,c={nodeName:e.tagName,tagName:e.tagName,attrs:s,namespaceURI:Ql[l],childNodes:[],parentNode:null};return c.childNodes=f2(e.children,c,n),ld(e,c),e.tagName==="template"&&e.content&&(c.content=XG(e.content,n)),c}function tY(e,t,r){const n=zG(e,t);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?l3(r):m3(r));const s={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const i=s.name.indexOf(":");i<0?s.prefix="":(s.name=s.name.slice(i+1),s.prefix=n.attribute.slice(0,i)),s.namespace=Ql[n.space]}return s}function f2(e,t,r){let n=-1;const s=[];if(e)for(;++n<e.length;){const i=Nj(e[n],r);i.parentNode=t,s.push(i)}return s}function ld(e,t){const r=e.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const rY=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],nY=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Cn="";var Q;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Q||(Q={}));const ds={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Aj(e){return e>=55296&&e<=57343}function aY(e){return e>=56320&&e<=57343}function sY(e,t){return(e-55296)*1024+9216+t}function jj(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Lj(e){return e>=64976&&e<=65007||nY.has(e)}var Me;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Me||(Me={}));const iY=65536;class oY{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=iY,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,r){const{line:n,col:s,offset:i}=this,l=s+r,c=i+r;return{code:t,startLine:n,endLine:n,startCol:l,endCol:l,startOffset:c,endOffset:c}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(aY(r))return this.pos++,this._addGap(),sY(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Q.EOF;return this._err(Me.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let n=0;n<t.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==t.charCodeAt(n))return!1;return!0}peek(t){const r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;const n=this.html.charCodeAt(r);return n===Q.CARRIAGE_RETURN?Q.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;let t=this.html.charCodeAt(this.pos);return t===Q.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Q.LINE_FEED):t===Q.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Aj(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Q.LINE_FEED||t===Q.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){jj(t)?this._err(Me.controlCharacterInInputStream):Lj(t)&&this._err(Me.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kr||(kr={}));function Mj(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}const lY=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),cY=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function uY(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=cY.get(e))!==null&&t!==void 0?t:e}var fa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(fa||(fa={}));const dY=32;var ol;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ol||(ol={}));function P1(e){return e>=fa.ZERO&&e<=fa.NINE}function hY(e){return e>=fa.UPPER_A&&e<=fa.UPPER_F||e>=fa.LOWER_A&&e<=fa.LOWER_F}function gY(e){return e>=fa.UPPER_A&&e<=fa.UPPER_Z||e>=fa.LOWER_A&&e<=fa.LOWER_Z||P1(e)}function pY(e){return e===fa.EQUALS||gY(e)}var pa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(pa||(pa={}));var bo;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(bo||(bo={}));class fY{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=pa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=bo.Strict}startEntity(t){this.decodeMode=t,this.state=pa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case pa.EntityStart:return t.charCodeAt(r)===fa.NUM?(this.state=pa.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=pa.NamedEntity,this.stateNamedEntity(t,r));case pa.NumericStart:return this.stateNumericStart(t,r);case pa.NumericDecimal:return this.stateNumericDecimal(t,r);case pa.NumericHex:return this.stateNumericHex(t,r);case pa.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|dY)===fa.LOWER_X?(this.state=pa.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=pa.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,s){if(r!==n){const i=n-r;this.result=this.result*Math.pow(s,i)+Number.parseInt(t.substr(r,i),s),this.consumed+=i}}stateNumericHex(t,r){const n=r;for(;r<t.length;){const s=t.charCodeAt(r);if(P1(s)||hY(s))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){const n=r;for(;r<t.length;){const s=t.charCodeAt(r);if(P1(s))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===fa.SEMI)this.consumed+=1;else if(this.decodeMode===bo.Strict)return 0;return this.emitCodePoint(uY(this.result),this.consumed),this.errors&&(t!==fa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:n}=this;let s=n[this.treeIndex],i=(s&ol.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const l=t.charCodeAt(r);if(this.treeIndex=mY(n,s,this.treeIndex+Math.max(1,i),l),this.treeIndex<0)return this.result===0||this.decodeMode===bo.Attribute&&(i===0||pY(l))?0:this.emitNotTerminatedNamedEntity();if(s=n[this.treeIndex],i=(s&ol.VALUE_LENGTH)>>14,i!==0){if(l===fa.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==bo.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:n}=this,s=(n[r]&ol.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){const{decodeTree:s}=this;return this.emitCodePoint(r===1?s[t]&~ol.VALUE_LENGTH:s[t+1],n),r===3&&this.emitCodePoint(s[t+2],n),n}end(){var t;switch(this.state){case pa.NamedEntity:return this.result!==0&&(this.decodeMode!==bo.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case pa.NumericDecimal:return this.emitNumericEntity(0,2);case pa.NumericHex:return this.emitNumericEntity(0,3);case pa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case pa.EntityStart:return 0}}}function mY(e,t,r,n){const s=(t&ol.BRANCH_LENGTH)>>7,i=t&ol.JUMP_TABLE;if(s===0)return i!==0&&n===i?r:-1;if(i){const d=n-i;return d<0||d>=s?-1:e[r+d]-1}let l=r,c=l+s-1;for(;l<=c;){const d=l+c>>>1,h=e[d];if(h<n)l=d+1;else if(h>n)c=d-1;else return e[d+s]}return-1}var Xe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Xe||(Xe={}));var ac;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(ac||(ac={}));var Qs;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Qs||(Qs={}));var ke;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(ke||(ke={}));var E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(E||(E={}));const xY=new Map([[ke.A,E.A],[ke.ADDRESS,E.ADDRESS],[ke.ANNOTATION_XML,E.ANNOTATION_XML],[ke.APPLET,E.APPLET],[ke.AREA,E.AREA],[ke.ARTICLE,E.ARTICLE],[ke.ASIDE,E.ASIDE],[ke.B,E.B],[ke.BASE,E.BASE],[ke.BASEFONT,E.BASEFONT],[ke.BGSOUND,E.BGSOUND],[ke.BIG,E.BIG],[ke.BLOCKQUOTE,E.BLOCKQUOTE],[ke.BODY,E.BODY],[ke.BR,E.BR],[ke.BUTTON,E.BUTTON],[ke.CAPTION,E.CAPTION],[ke.CENTER,E.CENTER],[ke.CODE,E.CODE],[ke.COL,E.COL],[ke.COLGROUP,E.COLGROUP],[ke.DD,E.DD],[ke.DESC,E.DESC],[ke.DETAILS,E.DETAILS],[ke.DIALOG,E.DIALOG],[ke.DIR,E.DIR],[ke.DIV,E.DIV],[ke.DL,E.DL],[ke.DT,E.DT],[ke.EM,E.EM],[ke.EMBED,E.EMBED],[ke.FIELDSET,E.FIELDSET],[ke.FIGCAPTION,E.FIGCAPTION],[ke.FIGURE,E.FIGURE],[ke.FONT,E.FONT],[ke.FOOTER,E.FOOTER],[ke.FOREIGN_OBJECT,E.FOREIGN_OBJECT],[ke.FORM,E.FORM],[ke.FRAME,E.FRAME],[ke.FRAMESET,E.FRAMESET],[ke.H1,E.H1],[ke.H2,E.H2],[ke.H3,E.H3],[ke.H4,E.H4],[ke.H5,E.H5],[ke.H6,E.H6],[ke.HEAD,E.HEAD],[ke.HEADER,E.HEADER],[ke.HGROUP,E.HGROUP],[ke.HR,E.HR],[ke.HTML,E.HTML],[ke.I,E.I],[ke.IMG,E.IMG],[ke.IMAGE,E.IMAGE],[ke.INPUT,E.INPUT],[ke.IFRAME,E.IFRAME],[ke.KEYGEN,E.KEYGEN],[ke.LABEL,E.LABEL],[ke.LI,E.LI],[ke.LINK,E.LINK],[ke.LISTING,E.LISTING],[ke.MAIN,E.MAIN],[ke.MALIGNMARK,E.MALIGNMARK],[ke.MARQUEE,E.MARQUEE],[ke.MATH,E.MATH],[ke.MENU,E.MENU],[ke.META,E.META],[ke.MGLYPH,E.MGLYPH],[ke.MI,E.MI],[ke.MO,E.MO],[ke.MN,E.MN],[ke.MS,E.MS],[ke.MTEXT,E.MTEXT],[ke.NAV,E.NAV],[ke.NOBR,E.NOBR],[ke.NOFRAMES,E.NOFRAMES],[ke.NOEMBED,E.NOEMBED],[ke.NOSCRIPT,E.NOSCRIPT],[ke.OBJECT,E.OBJECT],[ke.OL,E.OL],[ke.OPTGROUP,E.OPTGROUP],[ke.OPTION,E.OPTION],[ke.P,E.P],[ke.PARAM,E.PARAM],[ke.PLAINTEXT,E.PLAINTEXT],[ke.PRE,E.PRE],[ke.RB,E.RB],[ke.RP,E.RP],[ke.RT,E.RT],[ke.RTC,E.RTC],[ke.RUBY,E.RUBY],[ke.S,E.S],[ke.SCRIPT,E.SCRIPT],[ke.SEARCH,E.SEARCH],[ke.SECTION,E.SECTION],[ke.SELECT,E.SELECT],[ke.SOURCE,E.SOURCE],[ke.SMALL,E.SMALL],[ke.SPAN,E.SPAN],[ke.STRIKE,E.STRIKE],[ke.STRONG,E.STRONG],[ke.STYLE,E.STYLE],[ke.SUB,E.SUB],[ke.SUMMARY,E.SUMMARY],[ke.SUP,E.SUP],[ke.TABLE,E.TABLE],[ke.TBODY,E.TBODY],[ke.TEMPLATE,E.TEMPLATE],[ke.TEXTAREA,E.TEXTAREA],[ke.TFOOT,E.TFOOT],[ke.TD,E.TD],[ke.TH,E.TH],[ke.THEAD,E.THEAD],[ke.TITLE,E.TITLE],[ke.TR,E.TR],[ke.TRACK,E.TRACK],[ke.TT,E.TT],[ke.U,E.U],[ke.UL,E.UL],[ke.SVG,E.SVG],[ke.VAR,E.VAR],[ke.WBR,E.WBR],[ke.XMP,E.XMP]]);function cd(e){var t;return(t=xY.get(e))!==null&&t!==void 0?t:E.UNKNOWN}const tt=E,bY={[Xe.HTML]:new Set([tt.ADDRESS,tt.APPLET,tt.AREA,tt.ARTICLE,tt.ASIDE,tt.BASE,tt.BASEFONT,tt.BGSOUND,tt.BLOCKQUOTE,tt.BODY,tt.BR,tt.BUTTON,tt.CAPTION,tt.CENTER,tt.COL,tt.COLGROUP,tt.DD,tt.DETAILS,tt.DIR,tt.DIV,tt.DL,tt.DT,tt.EMBED,tt.FIELDSET,tt.FIGCAPTION,tt.FIGURE,tt.FOOTER,tt.FORM,tt.FRAME,tt.FRAMESET,tt.H1,tt.H2,tt.H3,tt.H4,tt.H5,tt.H6,tt.HEAD,tt.HEADER,tt.HGROUP,tt.HR,tt.HTML,tt.IFRAME,tt.IMG,tt.INPUT,tt.LI,tt.LINK,tt.LISTING,tt.MAIN,tt.MARQUEE,tt.MENU,tt.META,tt.NAV,tt.NOEMBED,tt.NOFRAMES,tt.NOSCRIPT,tt.OBJECT,tt.OL,tt.P,tt.PARAM,tt.PLAINTEXT,tt.PRE,tt.SCRIPT,tt.SECTION,tt.SELECT,tt.SOURCE,tt.STYLE,tt.SUMMARY,tt.TABLE,tt.TBODY,tt.TD,tt.TEMPLATE,tt.TEXTAREA,tt.TFOOT,tt.TH,tt.THEAD,tt.TITLE,tt.TR,tt.TRACK,tt.UL,tt.WBR,tt.XMP]),[Xe.MATHML]:new Set([tt.MI,tt.MO,tt.MN,tt.MS,tt.MTEXT,tt.ANNOTATION_XML]),[Xe.SVG]:new Set([tt.TITLE,tt.FOREIGN_OBJECT,tt.DESC]),[Xe.XLINK]:new Set,[Xe.XML]:new Set,[Xe.XMLNS]:new Set},B1=new Set([tt.H1,tt.H2,tt.H3,tt.H4,tt.H5,tt.H6]);ke.STYLE,ke.SCRIPT,ke.XMP,ke.IFRAME,ke.NOEMBED,ke.NOFRAMES,ke.PLAINTEXT;var re;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(re||(re={}));const Yn={DATA:re.DATA,RCDATA:re.RCDATA,RAWTEXT:re.RAWTEXT,SCRIPT_DATA:re.SCRIPT_DATA,PLAINTEXT:re.PLAINTEXT,CDATA_SECTION:re.CDATA_SECTION};function yY(e){return e>=Q.DIGIT_0&&e<=Q.DIGIT_9}function Mh(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_Z}function vY(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_Z}function tl(e){return vY(e)||Mh(e)}function DT(e){return tl(e)||yY(e)}function mf(e){return e+32}function Oj(e){return e===Q.SPACE||e===Q.LINE_FEED||e===Q.TABULATION||e===Q.FORM_FEED}function PT(e){return Oj(e)||e===Q.SOLIDUS||e===Q.GREATER_THAN_SIGN}function kY(e){return e===Q.NULL?Me.nullCharacterReference:e>1114111?Me.characterReferenceOutsideUnicodeRange:Aj(e)?Me.surrogateCharacterReference:Lj(e)?Me.noncharacterCharacterReference:jj(e)||e===Q.CARRIAGE_RETURN?Me.controlCharacterReference:null}class wY{constructor(t,r){this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=re.DATA,this.returnState=re.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new oY(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new fY(lY,(n,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Me.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Me.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const s=kY(n);s&&this._err(s,1)}}:void 0)}_err(t,r=0){var n,s;(s=(n=this.handler).onParseError)===null||s===void 0||s.call(n,this.preprocessor.getError(t,r))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,r,n){this.active=!0,this.preprocessor.write(t,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let r=0;r<t;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,r){return this.preprocessor.startsWith(t,r)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kr.START_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kr.END_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,r){this.currentCharacterToken={type:t,chars:r,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,r;const n=this.currentToken;if(Mj(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const s=(t=(r=n.location).attrs)!==null&&t!==void 0?t:r.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Me.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=cd(t.tagName),t.type===kr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Me.endTagWithAttributes),t.selfClosing&&this._err(Me.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,r)}_emitCodePoint(t){const r=Oj(t)?kr.WHITESPACE_CHARACTER:t===Q.NULL?kr.NULL_CHARACTER:kr.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kr.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=re.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?bo.Attribute:bo.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===re.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===re.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===re.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case re.DATA:{this._stateData(t);break}case re.RCDATA:{this._stateRcdata(t);break}case re.RAWTEXT:{this._stateRawtext(t);break}case re.SCRIPT_DATA:{this._stateScriptData(t);break}case re.PLAINTEXT:{this._statePlaintext(t);break}case re.TAG_OPEN:{this._stateTagOpen(t);break}case re.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case re.TAG_NAME:{this._stateTagName(t);break}case re.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case re.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case re.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case re.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case re.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case re.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case re.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case re.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case re.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case re.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case re.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case re.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case re.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case re.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case re.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case re.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case re.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case re.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case re.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case re.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case re.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case re.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case re.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case re.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case re.BOGUS_COMMENT:{this._stateBogusComment(t);break}case re.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case re.COMMENT_START:{this._stateCommentStart(t);break}case re.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case re.COMMENT:{this._stateComment(t);break}case re.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case re.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case re.COMMENT_END:{this._stateCommentEnd(t);break}case re.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case re.DOCTYPE:{this._stateDoctype(t);break}case re.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case re.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case re.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case re.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case re.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case re.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case re.CDATA_SECTION:{this._stateCdataSection(t);break}case re.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case re.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case re.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case re.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=re.TAG_OPEN;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitCodePoint(t);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Q.AMPERSAND:{this._startCharacterReference();break}case Q.LESS_THAN_SIGN:{this.state=re.RCDATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=re.RAWTEXT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(tl(t))this._createStartTagToken(),this.state=re.TAG_NAME,this._stateTagName(t);else switch(t){case Q.EXCLAMATION_MARK:{this.state=re.MARKUP_DECLARATION_OPEN;break}case Q.SOLIDUS:{this.state=re.END_TAG_OPEN;break}case Q.QUESTION_MARK:{this._err(Me.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t);break}case Q.EOF:{this._err(Me.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Me.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=re.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(tl(t))this._createEndTagToken(),this.state=re.TAG_NAME,this._stateTagName(t);else switch(t){case Q.GREATER_THAN_SIGN:{this._err(Me.missingEndTagName),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Me.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this.state=re.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.tagName+=Cn;break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(Mh(t)?mf(t):t)}}_stateRcdataLessThanSign(t){t===Q.SOLIDUS?this.state=re.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=re.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){tl(t)?(this.state=re.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=re.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=re.BEFORE_ATTRIBUTE_NAME,!1;case Q.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=re.SELF_CLOSING_START_TAG,!1;case Q.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=re.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Q.SOLIDUS?this.state=re.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){tl(t)?(this.state=re.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Q.SOLIDUS:{this.state=re.SCRIPT_DATA_END_TAG_OPEN;break}case Q.EXCLAMATION_MARK:{this.state=re.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=re.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){tl(t)?(this.state=re.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Q.HYPHEN_MINUS?(this.state=re.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Q.HYPHEN_MINUS?(this.state=re.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_ESCAPED,this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.GREATER_THAN_SIGN:{this.state=re.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_ESCAPED,this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Q.SOLIDUS?this.state=re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:tl(t)?(this._emitChars("<"),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){tl(t)?(this.state=re.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ds.SCRIPT,!1)&&PT(this.preprocessor.peek(ds.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<ds.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.GREATER_THAN_SIGN:{this.state=re.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Cn);break}case Q.EOF:{this._err(Me.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Q.SOLIDUS?(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ds.SCRIPT,!1)&&PT(this.preprocessor.peek(ds.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<ds.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=re.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this.state=re.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._err(Me.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=re.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=re.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this._leaveAttrName(),this.state=re.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._leaveAttrName(),this.state=re.BEFORE_ATTRIBUTE_VALUE;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:{this._err(Me.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.name+=Cn;break}default:this.currentAttr.name+=String.fromCodePoint(Mh(t)?mf(t):t)}}_stateAfterAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:{this.state=re.SELF_CLOSING_START_TAG;break}case Q.EQUALS_SIGN:{this.state=re.BEFORE_ATTRIBUTE_VALUE;break}case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=re.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{this.state=re.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this.state=re.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingAttributeValue),this.state=re.DATA,this.emitCurrentTagToken();break}default:this.state=re.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Q.QUOTATION_MARK:{this.state=re.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=Cn;break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Q.APOSTROPHE:{this.state=re.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=Cn;break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Q.AMPERSAND:{this._startCharacterReference();break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=re.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),this.currentAttr.value+=Cn;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:case Q.EQUALS_SIGN:case Q.GRAVE_ACCENT:{this._err(Me.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this._leaveAttrValue(),this.state=re.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=re.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._err(Me.missingWhitespaceBetweenAttributes),this.state=re.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Q.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=re.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Me.eofInTag),this._emitEOFToken();break}default:this._err(Me.unexpectedSolidusInTag),this.state=re.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.data+=Cn;break}default:r.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ds.DASH_DASH,!0)?(this._createCommentToken(ds.DASH_DASH.length+1),this.state=re.COMMENT_START):this._consumeSequenceIfMatch(ds.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ds.DOCTYPE.length+1),this.state=re.DOCTYPE):this._consumeSequenceIfMatch(ds.CDATA_START,!0)?this.inForeignNode?this.state=re.CDATA_SECTION:(this._err(Me.cdataInHtmlContent),this._createCommentToken(ds.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=re.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Me.incorrectlyOpenedComment),this._createCommentToken(2),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Q.HYPHEN_MINUS:{this.state=re.COMMENT_START_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptClosingOfEmptyComment),this.state=re.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=re.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=re.COMMENT_END;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptClosingOfEmptyComment),this.state=re.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=re.COMMENT,this._stateComment(t)}}_stateComment(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=re.COMMENT_END_DASH;break}case Q.LESS_THAN_SIGN:{r.data+="<",this.state=re.COMMENT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.data+=Cn;break}case Q.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const r=this.currentToken;switch(t){case Q.EXCLAMATION_MARK:{r.data+="!",this.state=re.COMMENT_LESS_THAN_SIGN_BANG;break}case Q.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=re.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Q.HYPHEN_MINUS?this.state=re.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=re.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Q.HYPHEN_MINUS?this.state=re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=re.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Q.GREATER_THAN_SIGN&&t!==Q.EOF&&this._err(Me.nestedComment),this.state=re.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=re.COMMENT_END;break}case Q.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=re.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentComment(r);break}case Q.EXCLAMATION_MARK:{this.state=re.COMMENT_END_BANG;break}case Q.HYPHEN_MINUS:{r.data+="-";break}case Q.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=re.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const r=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{r.data+="--!",this.state=re.COMMENT_END_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Me.incorrectlyClosedComment),this.state=re.DATA,this.emitCurrentComment(r);break}case Q.EOF:{this._err(Me.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=re.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=re.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Q.EOF:{this._err(Me.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingWhitespaceBeforeDoctypeName),this.state=re.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Mh(t))this._createDoctypeToken(String.fromCharCode(mf(t))),this.state=re.DOCTYPE_NAME;else switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.NULL:{this._err(Me.unexpectedNullCharacter),this._createDoctypeToken(Cn),this.state=re.DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=re.DOCTYPE_NAME}}_stateDoctypeName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.AFTER_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.name+=Cn;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(Mh(t)?mf(t):t)}}_stateAfterDoctypeName(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ds.PUBLIC,!1)?this.state=re.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ds.SYSTEM,!1)?this.state=re.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Me.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Me.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Me.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.publicId+=Cn;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.publicId+=Cn;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Q.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.QUOTATION_MARK:{this._err(Me.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Me.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.QUOTATION_MARK:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Me.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Me.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Me.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.systemId+=Cn;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter),r.systemId+=Cn;break}case Q.GREATER_THAN_SIGN:{this._err(Me.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.EOF:{this._err(Me.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Me.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const r=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Q.NULL:{this._err(Me.unexpectedNullCharacter);break}case Q.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Q.RIGHT_SQUARE_BRACKET:{this.state=re.CDATA_SECTION_BRACKET;break}case Q.EOF:{this._err(Me.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Q.RIGHT_SQUARE_BRACKET?this.state=re.CDATA_SECTION_END:(this._emitChars("]"),this.state=re.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Q.GREATER_THAN_SIGN:{this.state=re.DATA;break}case Q.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=re.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&DT(this.preprocessor.peek(1))?re.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){DT(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Q.SEMICOLON&&this._err(Me.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const Rj=new Set([E.DD,E.DT,E.LI,E.OPTGROUP,E.OPTION,E.P,E.RB,E.RP,E.RT,E.RTC]),BT=new Set([...Rj,E.CAPTION,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]),d0=new Set([E.APPLET,E.CAPTION,E.HTML,E.MARQUEE,E.OBJECT,E.TABLE,E.TD,E.TEMPLATE,E.TH]),SY=new Set([...d0,E.OL,E.UL]),EY=new Set([...d0,E.BUTTON]),FT=new Set([E.ANNOTATION_XML,E.MI,E.MN,E.MO,E.MS,E.MTEXT]),$T=new Set([E.DESC,E.FOREIGN_OBJECT,E.TITLE]),_Y=new Set([E.TR,E.TEMPLATE,E.HTML]),TY=new Set([E.TBODY,E.TFOOT,E.THEAD,E.TEMPLATE,E.HTML]),CY=new Set([E.TABLE,E.TEMPLATE,E.HTML]),NY=new Set([E.TD,E.TH]);class AY{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=E.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===E.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Xe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){const n=this._indexOf(t);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(t,r,n){const s=this._indexOf(t)+1;this.items.splice(s,0,r),this.tagIDs.splice(s,0,n),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Xe.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(t){for(;this.stackTop>=t;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){const r=this._indexOf(t);this.shortenToLength(Math.max(r,0))}popUntilPopped(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(B1,Xe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(NY,Xe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let n=this.stackTop;n>=0;n--)if(t.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(CY,Xe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TY,Xe.HTML)}clearBackToTableRowContext(){this.clearBackTo(_Y,Xe.HTML)}remove(t){const r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===E.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===E.HTML}hasInDynamicScope(t,r){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Xe.HTML:{if(s===t)return!0;if(r.has(s))return!1;break}case Xe.SVG:{if($T.has(s))return!1;break}case Xe.MATHML:{if(FT.has(s))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,d0)}hasInListItemScope(t){return this.hasInDynamicScope(t,SY)}hasInButtonScope(t){return this.hasInDynamicScope(t,EY)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case Xe.HTML:{if(B1.has(r))return!0;if(d0.has(r))return!1;break}case Xe.SVG:{if($T.has(r))return!1;break}case Xe.MATHML:{if(FT.has(r))return!1;break}}}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Xe.HTML)switch(this.tagIDs[r]){case t:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Xe.HTML)switch(this.tagIDs[t]){case E.TBODY:case E.THEAD:case E.TFOOT:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Xe.HTML)switch(this.tagIDs[r]){case t:return!0;case E.OPTION:case E.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Rj.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&BT.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&BT.has(this.currentTagId);)this.pop()}}const _y=3;var Oi;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Oi||(Oi={}));const UT={type:Oi.Marker};class jY{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){const n=[],s=r.length,i=this.treeAdapter.getTagName(t),l=this.treeAdapter.getNamespaceURI(t);for(let c=0;c<this.entries.length;c++){const d=this.entries[c];if(d.type===Oi.Marker)break;const{element:h}=d;if(this.treeAdapter.getTagName(h)===i&&this.treeAdapter.getNamespaceURI(h)===l){const g=this.treeAdapter.getAttrList(h);g.length===s&&n.push({idx:c,attrs:g})}}return n}_ensureNoahArkCondition(t){if(this.entries.length<_y)return;const r=this.treeAdapter.getAttrList(t),n=this._getNoahArkConditionCandidates(t,r);if(n.length<_y)return;const s=new Map(r.map(l=>[l.name,l.value]));let i=0;for(let l=0;l<n.length;l++){const c=n[l];c.attrs.every(d=>s.get(d.name)===d.value)&&(i+=1,i>=_y&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(UT)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:Oi.Element,element:t,token:r})}insertElementAfterBookmark(t,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:Oi.Element,element:t,token:r})}removeEntry(t){const r=this.entries.indexOf(t);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){const t=this.entries.indexOf(UT);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const r=this.entries.find(n=>n.type===Oi.Marker||this.treeAdapter.getTagName(n.element)===t);return r&&r.type===Oi.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===Oi.Element&&r.element===t)}}const rl={createDocument(){return{nodeName:"#document",mode:Qs.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,n){const s=e.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=t,s.publicId=r,s.systemId=n;else{const i={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};rl.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(rl.isTextNode(r)){r.value+=t;return}}rl.appendChild(e,rl.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&rl.isTextNode(n)?n.value+=t:rl.insertBefore(e,rl.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(n=>n.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Ij="html",LY="about:legacy-compat",MY="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Dj=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],OY=[...Dj,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],RY=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Pj=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],IY=[...Pj,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function zT(e,t){return t.some(r=>e.startsWith(r))}function DY(e){return e.name===Ij&&e.publicId===null&&(e.systemId===null||e.systemId===LY)}function PY(e){if(e.name!==Ij)return Qs.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===MY)return Qs.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),RY.has(r))return Qs.QUIRKS;let n=t===null?OY:Dj;if(zT(r,n))return Qs.QUIRKS;if(n=t===null?Pj:IY,zT(r,n))return Qs.LIMITED_QUIRKS}return Qs.NO_QUIRKS}const HT={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},BY="definitionurl",FY="definitionURL",$Y=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),UY=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Xe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Xe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Xe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Xe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Xe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Xe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Xe.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Xe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Xe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Xe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Xe.XMLNS}]]),zY=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),HY=new Set([E.B,E.BIG,E.BLOCKQUOTE,E.BODY,E.BR,E.CENTER,E.CODE,E.DD,E.DIV,E.DL,E.DT,E.EM,E.EMBED,E.H1,E.H2,E.H3,E.H4,E.H5,E.H6,E.HEAD,E.HR,E.I,E.IMG,E.LI,E.LISTING,E.MENU,E.META,E.NOBR,E.OL,E.P,E.PRE,E.RUBY,E.S,E.SMALL,E.SPAN,E.STRONG,E.STRIKE,E.SUB,E.SUP,E.TABLE,E.TT,E.U,E.UL,E.VAR]);function qY(e){const t=e.tagID;return t===E.FONT&&e.attrs.some(({name:n})=>n===ac.COLOR||n===ac.SIZE||n===ac.FACE)||HY.has(t)}function Bj(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===BY){e.attrs[t].name=FY;break}}function Fj(e){for(let t=0;t<e.attrs.length;t++){const r=$Y.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function m2(e){for(let t=0;t<e.attrs.length;t++){const r=UY.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function GY(e){const t=zY.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=cd(e.tagName))}function YY(e,t){return t===Xe.MATHML&&(e===E.MI||e===E.MO||e===E.MN||e===E.MS||e===E.MTEXT)}function WY(e,t,r){if(t===Xe.MATHML&&e===E.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===ac.ENCODING){const s=r[n].value.toLowerCase();return s===HT.TEXT_HTML||s===HT.APPLICATION_XML}}return t===Xe.SVG&&(e===E.FOREIGN_OBJECT||e===E.DESC||e===E.TITLE)}function VY(e,t,r,n){return(!n||n===Xe.HTML)&&WY(e,t,r)||(!n||n===Xe.MATHML)&&YY(e,t)}const KY="hidden",XY=8,QY=3;var se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(se||(se={}));const JY={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},$j=new Set([E.TABLE,E.TBODY,E.TFOOT,E.THEAD,E.TR]),qT={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:rl,onParseError:null};class GT{constructor(t,r,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=se.INITIAL,this.originalInsertionMode=se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...qT,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new wY(this.options,this),this.activeFormattingElements=new jY(this.treeAdapter),this.fragmentContextID=n?cd(this.treeAdapter.getTagName(n)):E.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new AY(this.document,this.treeAdapter,this)}static parse(t,r){const n=new this(r);return n.tokenizer.write(t,!0),n.document}static getFragmentParser(t,r){const n={...qT,...r};t??(t=n.treeAdapter.createElement(ke.TEMPLATE,Xe.HTML,[]));const s=n.treeAdapter.createElement("documentmock",Xe.HTML,[]),i=new this(n,s,t);return i.fragmentContextID===E.TEMPLATE&&i.tmplInsertionModeStack.unshift(se.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,r),r}_err(t,r,n){var s;if(!this.onParseError)return;const i=(s=t.location)!==null&&s!==void 0?s:JY,l={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(l)}onItemPush(t,r,n){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,t),n&&this.openElements.stackTop>0&&this._setContextModes(t,r)}onItemPop(t,r){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(n=this.treeAdapter).onItemPop)===null||s===void 0||s.call(n,t,this.openElements.current),r){let i,l;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,l=this.fragmentContextID):{current:i,currentTagId:l}=this.openElements,this._setContextModes(i,l)}}_setContextModes(t,r){const n=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===Xe.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&t!==void 0&&r!==void 0&&!this._isIntegrationPoint(r,t)}_switchToTextParsing(t,r){this._insertElement(t,Xe.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=se.TEXT}switchToPlaintextParsing(){this.insertionMode=se.TEXT,this.originalInsertionMode=se.IN_BODY,this.tokenizer.state=Yn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===ke.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Xe.HTML))switch(this.fragmentContextID){case E.TITLE:case E.TEXTAREA:{this.tokenizer.state=Yn.RCDATA;break}case E.STYLE:case E.XMP:case E.IFRAME:case E.NOEMBED:case E.NOFRAMES:case E.NOSCRIPT:{this.tokenizer.state=Yn.RAWTEXT;break}case E.SCRIPT:{this.tokenizer.state=Yn.SCRIPT_DATA;break}case E.PLAINTEXT:{this.tokenizer.state=Yn.PLAINTEXT;break}}}_setDocumentType(t){const r=t.name||"",n=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,s),t.location){const l=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));l&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}}_attachElementToTree(t,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(t,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,t)}}_appendElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location)}_insertElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID)}_insertFakeElement(t,r){const n=this.treeAdapter.createElement(t,Xe.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(t){const r=this.treeAdapter.createElement(t.tagName,Xe.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(ke.HTML,Xe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,E.HTML)}_appendCommentNode(t,r){const n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,t.location)}_insertCharacters(t){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,t.chars,n):this.treeAdapter.insertText(r,t.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(r),i=n?s.lastIndexOf(n):s.length,l=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(l)){const{endLine:d,endCol:h,endOffset:g}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(l,{endLine:d,endCol:h,endOffset:g})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(l,t.location)}_adoptNodes(t,r){for(let n=this.treeAdapter.getFirstChild(t);n;n=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(t,r){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&r.location){const n=r.location,s=this.treeAdapter.getTagName(t),i=r.type===kr.END_TAG&&s===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,i)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,t.tagID===E.SVG&&this.treeAdapter.getTagName(r)===ke.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Xe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===E.MGLYPH||t.tagID===E.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,r,Xe.HTML)}_processToken(t){switch(t.type){case kr.CHARACTER:{this.onCharacter(t);break}case kr.NULL_CHARACTER:{this.onNullCharacter(t);break}case kr.COMMENT:{this.onComment(t);break}case kr.DOCTYPE:{this.onDoctype(t);break}case kr.START_TAG:{this._processStartTag(t);break}case kr.END_TAG:{this.onEndTag(t);break}case kr.EOF:{this.onEof(t);break}case kr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,r,n){const s=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return VY(t,s,i,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const r=this.activeFormattingElements.entries.findIndex(s=>s.type===Oi.Marker||this.openElements.contains(s.element)),n=r===-1?t-1:r-1;for(let s=n;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(E.P),this.openElements.popUntilTagNamePopped(E.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case E.TR:{this.insertionMode=se.IN_ROW;return}case E.TBODY:case E.THEAD:case E.TFOOT:{this.insertionMode=se.IN_TABLE_BODY;return}case E.CAPTION:{this.insertionMode=se.IN_CAPTION;return}case E.COLGROUP:{this.insertionMode=se.IN_COLUMN_GROUP;return}case E.TABLE:{this.insertionMode=se.IN_TABLE;return}case E.BODY:{this.insertionMode=se.IN_BODY;return}case E.FRAMESET:{this.insertionMode=se.IN_FRAMESET;return}case E.SELECT:{this._resetInsertionModeForSelect(t);return}case E.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case E.HTML:{this.insertionMode=this.headElement?se.AFTER_HEAD:se.BEFORE_HEAD;return}case E.TD:case E.TH:{if(t>0){this.insertionMode=se.IN_CELL;return}break}case E.HEAD:{if(t>0){this.insertionMode=se.IN_HEAD;return}break}}this.insertionMode=se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let r=t-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===E.TEMPLATE)break;if(n===E.TABLE){this.insertionMode=se.IN_SELECT_IN_TABLE;return}}this.insertionMode=se.IN_SELECT}_isElementCausesFosterParenting(t){return $j.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case E.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Xe.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case E.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,t,r.beforeElement):this.treeAdapter.appendChild(r.parent,t)}_isSpecialElement(t,r){const n=this.treeAdapter.getNamespaceURI(t);return bY[n].has(r)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){NV(this,t);return}switch(this.insertionMode){case se.INITIAL:{fh(this,t);break}case se.BEFORE_HTML:{Vh(this,t);break}case se.BEFORE_HEAD:{Kh(this,t);break}case se.IN_HEAD:{Xh(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Qh(this,t);break}case se.AFTER_HEAD:{Jh(this,t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:{zj(this,t);break}case se.TEXT:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Ty(this,t);break}case se.IN_TABLE_TEXT:{Vj(this,t);break}case se.IN_COLUMN_GROUP:{h0(this,t);break}case se.AFTER_BODY:{g0(this,t);break}case se.AFTER_AFTER_BODY:{$f(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){CV(this,t);return}switch(this.insertionMode){case se.INITIAL:{fh(this,t);break}case se.BEFORE_HTML:{Vh(this,t);break}case se.BEFORE_HEAD:{Kh(this,t);break}case se.IN_HEAD:{Xh(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Qh(this,t);break}case se.AFTER_HEAD:{Jh(this,t);break}case se.TEXT:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Ty(this,t);break}case se.IN_COLUMN_GROUP:{h0(this,t);break}case se.AFTER_BODY:{g0(this,t);break}case se.AFTER_AFTER_BODY:{$f(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){F1(this,t);return}switch(this.insertionMode){case se.INITIAL:case se.BEFORE_HTML:case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_TEMPLATE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{F1(this,t);break}case se.IN_TABLE_TEXT:{mh(this,t);break}case se.AFTER_BODY:{sW(this,t);break}case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{iW(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case se.INITIAL:{oW(this,t);break}case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:{this._err(t,Me.misplacedDoctype);break}case se.IN_TABLE_TEXT:{mh(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Me.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?AV(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{fh(this,t);break}case se.BEFORE_HTML:{lW(this,t);break}case se.BEFORE_HEAD:{uW(this,t);break}case se.IN_HEAD:{bi(this,t);break}case se.IN_HEAD_NO_SCRIPT:{gW(this,t);break}case se.AFTER_HEAD:{fW(this,t);break}case se.IN_BODY:{Ua(this,t);break}case se.IN_TABLE:{Hu(this,t);break}case se.IN_TABLE_TEXT:{mh(this,t);break}case se.IN_CAPTION:{dV(this,t);break}case se.IN_COLUMN_GROUP:{y2(this,t);break}case se.IN_TABLE_BODY:{gm(this,t);break}case se.IN_ROW:{pm(this,t);break}case se.IN_CELL:{pV(this,t);break}case se.IN_SELECT:{Qj(this,t);break}case se.IN_SELECT_IN_TABLE:{mV(this,t);break}case se.IN_TEMPLATE:{bV(this,t);break}case se.AFTER_BODY:{vV(this,t);break}case se.IN_FRAMESET:{kV(this,t);break}case se.AFTER_FRAMESET:{SV(this,t);break}case se.AFTER_AFTER_BODY:{_V(this,t);break}case se.AFTER_AFTER_FRAMESET:{TV(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?jV(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{fh(this,t);break}case se.BEFORE_HTML:{cW(this,t);break}case se.BEFORE_HEAD:{dW(this,t);break}case se.IN_HEAD:{hW(this,t);break}case se.IN_HEAD_NO_SCRIPT:{pW(this,t);break}case se.AFTER_HEAD:{mW(this,t);break}case se.IN_BODY:{hm(this,t);break}case se.TEXT:{tV(this,t);break}case se.IN_TABLE:{hg(this,t);break}case se.IN_TABLE_TEXT:{mh(this,t);break}case se.IN_CAPTION:{hV(this,t);break}case se.IN_COLUMN_GROUP:{gV(this,t);break}case se.IN_TABLE_BODY:{$1(this,t);break}case se.IN_ROW:{Xj(this,t);break}case se.IN_CELL:{fV(this,t);break}case se.IN_SELECT:{Jj(this,t);break}case se.IN_SELECT_IN_TABLE:{xV(this,t);break}case se.IN_TEMPLATE:{yV(this,t);break}case se.AFTER_BODY:{e4(this,t);break}case se.IN_FRAMESET:{wV(this,t);break}case se.AFTER_FRAMESET:{EV(this,t);break}case se.AFTER_AFTER_BODY:{$f(this,t);break}}}onEof(t){switch(this.insertionMode){case se.INITIAL:{fh(this,t);break}case se.BEFORE_HTML:{Vh(this,t);break}case se.BEFORE_HEAD:{Kh(this,t);break}case se.IN_HEAD:{Xh(this,t);break}case se.IN_HEAD_NO_SCRIPT:{Qh(this,t);break}case se.AFTER_HEAD:{Jh(this,t);break}case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{Yj(this,t);break}case se.TEXT:{rV(this,t);break}case se.IN_TABLE_TEXT:{mh(this,t);break}case se.IN_TEMPLATE:{Zj(this,t);break}case se.AFTER_BODY:case se.IN_FRAMESET:case se.AFTER_FRAMESET:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{b2(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Q.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.TEXT:case se.IN_COLUMN_GROUP:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{this._insertCharacters(t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:case se.AFTER_BODY:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{Uj(this,t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{Ty(this,t);break}case se.IN_TABLE_TEXT:{Wj(this,t);break}}}}function ZY(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):Gj(e,t),r}function eW(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const s=e.openElements.items[n];if(s===t.element)break;e._isSpecialElement(s,e.openElements.tagIDs[n])&&(r=s)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function tW(e,t,r){let n=t,s=e.openElements.getCommonAncestor(t);for(let i=0,l=s;l!==r;i++,l=s){s=e.openElements.getCommonAncestor(l);const c=e.activeFormattingElements.getElementEntry(l),d=c&&i>=QY;!c||d?(d&&e.activeFormattingElements.removeEntry(c),e.openElements.remove(l)):(l=rW(e,c),n===t&&(e.activeFormattingElements.bookmark=c),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(l,n),n=l)}return n}function rW(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function nW(e,t,r){const n=e.treeAdapter.getTagName(t),s=cd(n);if(e._isElementCausesFosterParenting(s))e._fosterParentElement(r);else{const i=e.treeAdapter.getNamespaceURI(t);s===E.TEMPLATE&&i===Xe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function aW(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:s}=r,i=e.treeAdapter.createElement(s.tagName,n,s.attrs);e._adoptNodes(t,i),e.treeAdapter.appendChild(t,i),e.activeFormattingElements.insertElementAfterBookmark(i,s),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,i,s.tagID)}function x2(e,t){for(let r=0;r<XY;r++){const n=ZY(e,t);if(!n)break;const s=eW(e,n);if(!s)break;e.activeFormattingElements.bookmark=n;const i=tW(e,s,n.element),l=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),l&&nW(e,l,i),aW(e,s,n)}}function F1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function sW(e,t){e._appendCommentNode(t,e.openElements.items[0])}function iW(e,t){e._appendCommentNode(t,e.document)}function b2(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],s=e.treeAdapter.getNodeSourceCodeLocation(n);if(s&&!s.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const i=e.openElements.items[1],l=e.treeAdapter.getNodeSourceCodeLocation(i);l&&!l.endTag&&e._setEndLocation(i,t)}}}}function oW(e,t){e._setDocumentType(t);const r=t.forceQuirks?Qs.QUIRKS:PY(t);DY(t)||e._err(t,Me.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=se.BEFORE_HTML}function fh(e,t){e._err(t,Me.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Qs.QUIRKS),e.insertionMode=se.BEFORE_HTML,e._processToken(t)}function lW(e,t){t.tagID===E.HTML?(e._insertElement(t,Xe.HTML),e.insertionMode=se.BEFORE_HEAD):Vh(e,t)}function cW(e,t){const r=t.tagID;(r===E.HTML||r===E.HEAD||r===E.BODY||r===E.BR)&&Vh(e,t)}function Vh(e,t){e._insertFakeRootElement(),e.insertionMode=se.BEFORE_HEAD,e._processToken(t)}function uW(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.HEAD:{e._insertElement(t,Xe.HTML),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD;break}default:Kh(e,t)}}function dW(e,t){const r=t.tagID;r===E.HEAD||r===E.BODY||r===E.HTML||r===E.BR?Kh(e,t):e._err(t,Me.endTagWithoutMatchingOpenElement)}function Kh(e,t){e._insertFakeElement(ke.HEAD,E.HEAD),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD,e._processToken(t)}function bi(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case E.TITLE:{e._switchToTextParsing(t,Yn.RCDATA);break}case E.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Yn.RAWTEXT):(e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_HEAD_NO_SCRIPT);break}case E.NOFRAMES:case E.STYLE:{e._switchToTextParsing(t,Yn.RAWTEXT);break}case E.SCRIPT:{e._switchToTextParsing(t,Yn.SCRIPT_DATA);break}case E.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(se.IN_TEMPLATE);break}case E.HEAD:{e._err(t,Me.misplacedStartTagForHeadElement);break}default:Xh(e,t)}}function hW(e,t){switch(t.tagID){case E.HEAD:{e.openElements.pop(),e.insertionMode=se.AFTER_HEAD;break}case E.BODY:case E.BR:case E.HTML:{Xh(e,t);break}case E.TEMPLATE:{wc(e,t);break}default:e._err(t,Me.endTagWithoutMatchingOpenElement)}}function wc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==E.TEMPLATE&&e._err(t,Me.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Me.endTagWithoutMatchingOpenElement)}function Xh(e,t){e.openElements.pop(),e.insertionMode=se.AFTER_HEAD,e._processToken(t)}function gW(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.BASEFONT:case E.BGSOUND:case E.HEAD:case E.LINK:case E.META:case E.NOFRAMES:case E.STYLE:{bi(e,t);break}case E.NOSCRIPT:{e._err(t,Me.nestedNoscriptInHead);break}default:Qh(e,t)}}function pW(e,t){switch(t.tagID){case E.NOSCRIPT:{e.openElements.pop(),e.insertionMode=se.IN_HEAD;break}case E.BR:{Qh(e,t);break}default:e._err(t,Me.endTagWithoutMatchingOpenElement)}}function Qh(e,t){const r=t.type===kr.EOF?Me.openElementsLeftAfterEof:Me.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=se.IN_HEAD,e._processToken(t)}function fW(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.BODY:{e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=se.IN_BODY;break}case E.FRAMESET:{e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_FRAMESET;break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{e._err(t,Me.abandonedHeadElementChild),e.openElements.push(e.headElement,E.HEAD),bi(e,t),e.openElements.remove(e.headElement);break}case E.HEAD:{e._err(t,Me.misplacedStartTagForHeadElement);break}default:Jh(e,t)}}function mW(e,t){switch(t.tagID){case E.BODY:case E.HTML:case E.BR:{Jh(e,t);break}case E.TEMPLATE:{wc(e,t);break}default:e._err(t,Me.endTagWithoutMatchingOpenElement)}}function Jh(e,t){e._insertFakeElement(ke.BODY,E.BODY),e.insertionMode=se.IN_BODY,dm(e,t)}function dm(e,t){switch(t.type){case kr.CHARACTER:{zj(e,t);break}case kr.WHITESPACE_CHARACTER:{Uj(e,t);break}case kr.COMMENT:{F1(e,t);break}case kr.START_TAG:{Ua(e,t);break}case kr.END_TAG:{hm(e,t);break}case kr.EOF:{Yj(e,t);break}}}function Uj(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function zj(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function xW(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function bW(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function yW(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_FRAMESET)}function vW(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function kW(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&B1.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Xe.HTML)}function wW(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function SW(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),r||(e.formElement=e.openElements.current))}function EW(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const s=e.openElements.tagIDs[n];if(r===E.LI&&s===E.LI||(r===E.DD||r===E.DT)&&(s===E.DD||s===E.DT)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.popUntilTagNamePopped(s);break}if(s!==E.ADDRESS&&s!==E.DIV&&s!==E.P&&e._isSpecialElement(e.openElements.items[n],s))break}e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML)}function _W(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.tokenizer.state=Yn.PLAINTEXT}function TW(e,t){e.openElements.hasInScope(E.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1}function CW(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(ke.A);r&&(x2(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function NW(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function AW(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(E.NOBR)&&(x2(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Xe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jW(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function LW(e,t){e.treeAdapter.getDocumentMode(e.document)!==Qs.QUIRKS&&e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=se.IN_TABLE}function Hj(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function qj(e){const t=Mj(e,ac.TYPE);return t!=null&&t.toLowerCase()===KY}function MW(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Xe.HTML),qj(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function OW(e,t){e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0}function RW(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._appendElement(t,Xe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function IW(e,t){t.tagName=ke.IMG,t.tagID=E.IMG,Hj(e,t)}function DW(e,t){e._insertElement(t,Xe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Yn.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=se.TEXT}function PW(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Yn.RAWTEXT)}function BW(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Yn.RAWTEXT)}function YT(e,t){e._switchToTextParsing(t,Yn.RAWTEXT)}function FW(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===se.IN_TABLE||e.insertionMode===se.IN_CAPTION||e.insertionMode===se.IN_TABLE_BODY||e.insertionMode===se.IN_ROW||e.insertionMode===se.IN_CELL?se.IN_SELECT_IN_TABLE:se.IN_SELECT}function $W(e,t){e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function UW(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Xe.HTML)}function zW(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(E.RTC),e._insertElement(t,Xe.HTML)}function HW(e,t){e._reconstructActiveFormattingElements(),Bj(t),m2(t),t.selfClosing?e._appendElement(t,Xe.MATHML):e._insertElement(t,Xe.MATHML),t.ackSelfClosing=!0}function qW(e,t){e._reconstructActiveFormattingElements(),Fj(t),m2(t),t.selfClosing?e._appendElement(t,Xe.SVG):e._insertElement(t,Xe.SVG),t.ackSelfClosing=!0}function WT(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Xe.HTML)}function Ua(e,t){switch(t.tagID){case E.I:case E.S:case E.B:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.SMALL:case E.STRIKE:case E.STRONG:{NW(e,t);break}case E.A:{CW(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{kW(e,t);break}case E.P:case E.DL:case E.OL:case E.UL:case E.DIV:case E.DIR:case E.NAV:case E.MAIN:case E.MENU:case E.ASIDE:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.DETAILS:case E.ADDRESS:case E.ARTICLE:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{vW(e,t);break}case E.LI:case E.DD:case E.DT:{EW(e,t);break}case E.BR:case E.IMG:case E.WBR:case E.AREA:case E.EMBED:case E.KEYGEN:{Hj(e,t);break}case E.HR:{RW(e,t);break}case E.RB:case E.RTC:{UW(e,t);break}case E.RT:case E.RP:{zW(e,t);break}case E.PRE:case E.LISTING:{wW(e,t);break}case E.XMP:{PW(e,t);break}case E.SVG:{qW(e,t);break}case E.HTML:{xW(e,t);break}case E.BASE:case E.LINK:case E.META:case E.STYLE:case E.TITLE:case E.SCRIPT:case E.BGSOUND:case E.BASEFONT:case E.TEMPLATE:{bi(e,t);break}case E.BODY:{bW(e,t);break}case E.FORM:{SW(e,t);break}case E.NOBR:{AW(e,t);break}case E.MATH:{HW(e,t);break}case E.TABLE:{LW(e,t);break}case E.INPUT:{MW(e,t);break}case E.PARAM:case E.TRACK:case E.SOURCE:{OW(e,t);break}case E.IMAGE:{IW(e,t);break}case E.BUTTON:{TW(e,t);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{jW(e,t);break}case E.IFRAME:{BW(e,t);break}case E.SELECT:{FW(e,t);break}case E.OPTION:case E.OPTGROUP:{$W(e,t);break}case E.NOEMBED:case E.NOFRAMES:{YT(e,t);break}case E.FRAMESET:{yW(e,t);break}case E.TEXTAREA:{DW(e,t);break}case E.NOSCRIPT:{e.options.scriptingEnabled?YT(e,t):WT(e,t);break}case E.PLAINTEXT:{_W(e,t);break}case E.COL:case E.TH:case E.TD:case E.TR:case E.HEAD:case E.FRAME:case E.TBODY:case E.TFOOT:case E.THEAD:case E.CAPTION:case E.COLGROUP:break;default:WT(e,t)}}function GW(e,t){if(e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function YW(e,t){e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,e4(e,t))}function WW(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function VW(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(E.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(E.FORM):r&&e.openElements.remove(r))}function KW(e){e.openElements.hasInButtonScope(E.P)||e._insertFakeElement(ke.P,E.P),e._closePElement()}function XW(e){e.openElements.hasInListItemScope(E.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(E.LI),e.openElements.popUntilTagNamePopped(E.LI))}function QW(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function JW(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ZW(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function eV(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(ke.BR,E.BR),e.openElements.pop(),e.framesetOk=!1}function Gj(e,t){const r=t.tagName,n=t.tagID;for(let s=e.openElements.stackTop;s>0;s--){const i=e.openElements.items[s],l=e.openElements.tagIDs[s];if(n===l&&(n!==E.UNKNOWN||e.treeAdapter.getTagName(i)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=s&&e.openElements.shortenToLength(s);break}if(e._isSpecialElement(i,l))break}}function hm(e,t){switch(t.tagID){case E.A:case E.B:case E.I:case E.S:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.NOBR:case E.SMALL:case E.STRIKE:case E.STRONG:{x2(e,t);break}case E.P:{KW(e);break}case E.DL:case E.UL:case E.OL:case E.DIR:case E.DIV:case E.NAV:case E.PRE:case E.MAIN:case E.MENU:case E.ASIDE:case E.BUTTON:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.ADDRESS:case E.ARTICLE:case E.DETAILS:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.LISTING:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{WW(e,t);break}case E.LI:{XW(e);break}case E.DD:case E.DT:{QW(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{JW(e);break}case E.BR:{eV(e);break}case E.BODY:{GW(e,t);break}case E.HTML:{YW(e,t);break}case E.FORM:{VW(e);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{ZW(e,t);break}case E.TEMPLATE:{wc(e,t);break}default:Gj(e,t)}}function Yj(e,t){e.tmplInsertionModeStack.length>0?Zj(e,t):b2(e,t)}function tV(e,t){var r;t.tagID===E.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function rV(e,t){e._err(t,Me.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Ty(e,t){if(e.openElements.currentTagId!==void 0&&$j.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=se.IN_TABLE_TEXT,t.type){case kr.CHARACTER:{Vj(e,t);break}case kr.WHITESPACE_CHARACTER:{Wj(e,t);break}}else Fg(e,t)}function nV(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_CAPTION}function aV(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_COLUMN_GROUP}function sV(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ke.COLGROUP,E.COLGROUP),e.insertionMode=se.IN_COLUMN_GROUP,y2(e,t)}function iV(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_TABLE_BODY}function oV(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ke.TBODY,E.TBODY),e.insertionMode=se.IN_TABLE_BODY,gm(e,t)}function lV(e,t){e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function cV(e,t){qj(t)?e._appendElement(t,Xe.HTML):Fg(e,t),t.ackSelfClosing=!0}function uV(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Xe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Hu(e,t){switch(t.tagID){case E.TD:case E.TH:case E.TR:{oV(e,t);break}case E.STYLE:case E.SCRIPT:case E.TEMPLATE:{bi(e,t);break}case E.COL:{sV(e,t);break}case E.FORM:{uV(e,t);break}case E.TABLE:{lV(e,t);break}case E.TBODY:case E.TFOOT:case E.THEAD:{iV(e,t);break}case E.INPUT:{cV(e,t);break}case E.CAPTION:{nV(e,t);break}case E.COLGROUP:{aV(e,t);break}default:Fg(e,t)}}function hg(e,t){switch(t.tagID){case E.TABLE:{e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode());break}case E.TEMPLATE:{wc(e,t);break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:Fg(e,t)}}function Fg(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,dm(e,t),e.fosterParentingEnabled=r}function Wj(e,t){e.pendingCharacterTokens.push(t)}function Vj(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function mh(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)Fg(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Kj=new Set([E.CAPTION,E.COL,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]);function dV(e,t){const r=t.tagID;Kj.has(r)?e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,Hu(e,t)):Ua(e,t)}function hV(e,t){const r=t.tagID;switch(r){case E.CAPTION:case E.TABLE:{e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,r===E.TABLE&&hg(e,t));break}case E.BODY:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:hm(e,t)}}function y2(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.COL:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case E.TEMPLATE:{bi(e,t);break}default:h0(e,t)}}function gV(e,t){switch(t.tagID){case E.COLGROUP:{e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TEMPLATE:{wc(e,t);break}case E.COL:break;default:h0(e,t)}}function h0(e,t){e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE,e._processToken(t))}function gm(e,t){switch(t.tagID){case E.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_ROW;break}case E.TH:case E.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(ke.TR,E.TR),e.insertionMode=se.IN_ROW,pm(e,t);break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,Hu(e,t));break}default:Hu(e,t)}}function $1(e,t){const r=t.tagID;switch(t.tagID){case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,hg(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:case E.TR:break;default:hg(e,t)}}function pm(e,t){switch(t.tagID){case E.TH:case E.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Xe.HTML),e.insertionMode=se.IN_CELL,e.activeFormattingElements.insertMarker();break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,gm(e,t));break}default:Hu(e,t)}}function Xj(e,t){switch(t.tagID){case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY);break}case E.TABLE:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,$1(e,t));break}case E.TBODY:case E.TFOOT:case E.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(E.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,$1(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:break;default:hg(e,t)}}function pV(e,t){const r=t.tagID;Kj.has(r)?(e.openElements.hasInTableScope(E.TD)||e.openElements.hasInTableScope(E.TH))&&(e._closeTableCell(),pm(e,t)):Ua(e,t)}function fV(e,t){const r=t.tagID;switch(r){case E.TD:case E.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_ROW);break}case E.TABLE:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),Xj(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:break;default:hm(e,t)}}function Qj(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case E.OPTGROUP:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Xe.HTML);break}case E.HR:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case E.INPUT:case E.KEYGEN:case E.TEXTAREA:case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),t.tagID!==E.SELECT&&e._processStartTag(t));break}case E.SCRIPT:case E.TEMPLATE:{bi(e,t);break}}}function Jj(e,t){switch(t.tagID){case E.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===E.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===E.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop();break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop();break}case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode());break}case E.TEMPLATE:{wc(e,t);break}}}function mV(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Qj(e,t)}function xV(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Jj(e,t)}function bV(e,t){switch(t.tagID){case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{bi(e,t);break}case E.CAPTION:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.tmplInsertionModeStack[0]=se.IN_TABLE,e.insertionMode=se.IN_TABLE,Hu(e,t);break}case E.COL:{e.tmplInsertionModeStack[0]=se.IN_COLUMN_GROUP,e.insertionMode=se.IN_COLUMN_GROUP,y2(e,t);break}case E.TR:{e.tmplInsertionModeStack[0]=se.IN_TABLE_BODY,e.insertionMode=se.IN_TABLE_BODY,gm(e,t);break}case E.TD:case E.TH:{e.tmplInsertionModeStack[0]=se.IN_ROW,e.insertionMode=se.IN_ROW,pm(e,t);break}default:e.tmplInsertionModeStack[0]=se.IN_BODY,e.insertionMode=se.IN_BODY,Ua(e,t)}}function yV(e,t){t.tagID===E.TEMPLATE&&wc(e,t)}function Zj(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):b2(e,t)}function vV(e,t){t.tagID===E.HTML?Ua(e,t):g0(e,t)}function e4(e,t){var r;if(t.tagID===E.HTML){if(e.fragmentContext||(e.insertionMode=se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===E.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&e._setEndLocation(n,t)}}else g0(e,t)}function g0(e,t){e.insertionMode=se.IN_BODY,dm(e,t)}function kV(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.FRAMESET:{e._insertElement(t,Xe.HTML);break}case E.FRAME:{e._appendElement(t,Xe.HTML),t.ackSelfClosing=!0;break}case E.NOFRAMES:{bi(e,t);break}}}function wV(e,t){t.tagID===E.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==E.FRAMESET&&(e.insertionMode=se.AFTER_FRAMESET))}function SV(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.NOFRAMES:{bi(e,t);break}}}function EV(e,t){t.tagID===E.HTML&&(e.insertionMode=se.AFTER_AFTER_FRAMESET)}function _V(e,t){t.tagID===E.HTML?Ua(e,t):$f(e,t)}function $f(e,t){e.insertionMode=se.IN_BODY,dm(e,t)}function TV(e,t){switch(t.tagID){case E.HTML:{Ua(e,t);break}case E.NOFRAMES:{bi(e,t);break}}}function CV(e,t){t.chars=Cn,e._insertCharacters(t)}function NV(e,t){e._insertCharacters(t),e.framesetOk=!1}function t4(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Xe.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function AV(e,t){if(qY(t))t4(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===Xe.MATHML?Bj(t):n===Xe.SVG&&(GY(t),Fj(t)),m2(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function jV(e,t){if(t.tagID===E.P||t.tagID===E.BR){t4(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===Xe.HTML){e._endTagOutsideForeignContent(t);break}const s=e.treeAdapter.getTagName(n);if(s.toLowerCase()===t.tagName){t.tagName=s,e.openElements.shortenToLength(r);break}}}ke.AREA,ke.BASE,ke.BASEFONT,ke.BGSOUND,ke.BR,ke.COL,ke.EMBED,ke.FRAME,ke.HR,ke.IMG,ke.INPUT,ke.KEYGEN,ke.LINK,ke.META,ke.PARAM,ke.SOURCE,ke.TRACK,ke.WBR;const LV=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,MV=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),VT={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function r4(e,t){const r=zV(e),n=X3("type",{handlers:{root:OV,element:RV,text:IV,comment:a4,doctype:DV,raw:BV},unknown:FV}),s={parser:r?new GT(VT):GT.getFragmentParser(void 0,VT),handle(c){n(c,s)},stitches:!1,options:t||{}};n(e,s),ud(s,zi());const i=r?s.parser.document:s.parser.getFragment(),l=OG(i,{file:s.options.file});return s.stitches&&Dg(l,"comment",function(c,d,h){const g=c;if(g.value.stitch&&h&&d!==void 0){const f=h.children;return f[d]=g.value.stitch,d}}),l.type==="root"&&l.children.length===1&&l.children[0].type===e.type?l.children[0]:l}function n4(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function OV(e,t){n4(e.children,t)}function RV(e,t){$V(e,t),n4(e.children,t),UV(e,t)}function IV(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const r={type:kr.CHARACTER,chars:e.value,location:$g(e)};ud(t,zi(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function DV(e,t){const r={type:kr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:$g(e)};ud(t,zi(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function PV(e,t){t.stitches=!0;const r=HV(e);if("children"in e&&"children"in r){const n=r4({type:"root",children:e.children},t.options);r.children=n.children}a4({type:"comment",value:{stitch:r}},t)}function a4(e,t){const r=e.value,n={type:kr.COMMENT,data:r,location:$g(e)};ud(t,zi(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function BV(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,s4(t,zi(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(LV,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=t.parser.tokenizer._consume();t.parser.tokenizer._callState(r)}}function FV(e,t){const r=e;if(t.options.passThrough&&t.options.passThrough.includes(r.type))PV(r,t);else{let n="";throw MV.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function ud(e,t){s4(e,t);const r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Yn.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function s4(e,t){if(t&&t.offset!==void 0){const r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function $V(e,t){const r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Yn.PLAINTEXT)return;ud(t,zi(e));const n=t.parser.openElements.current;let s="namespaceURI"in n?n.namespaceURI:Ql.html;s===Ql.html&&r==="svg"&&(s=Ql.svg);const i=VG({...e,children:[]},{space:s===Ql.svg?"svg":"html"}),l={type:kr.START_TAG,tagName:r,tagID:cd(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:$g(e)};t.parser.currentToken=l,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}function UV(e,t){const r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&rY.includes(r)||t.parser.tokenizer.state===Yn.PLAINTEXT)return;ud(t,im(e));const n={type:kr.END_TAG,tagName:r,tagID:cd(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:$g(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Yn.RCDATA||t.parser.tokenizer.state===Yn.RAWTEXT||t.parser.tokenizer.state===Yn.SCRIPT_DATA)&&(t.parser.tokenizer.state=Yn.DATA)}function zV(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function $g(e){const t=zi(e)||{line:void 0,column:void 0,offset:void 0},r=im(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function HV(e){return"children"in e?uc({...e,children:[]}):uc(e)}function qV(e){return function(t,r){return r4(t,{...e,file:r})}}const Hl=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],Zh={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...Hl,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...Hl],h2:[["className","sr-only"]],img:[...Hl,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...Hl,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...Hl],table:[...Hl],ul:[...Hl,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},al={}.hasOwnProperty;function GV(e,t){let r={type:"root",children:[]};const n={schema:t?{...Zh,...t}:Zh,stack:[]},s=i4(n,e);return s&&(Array.isArray(s)?s.length===1?r=s[0]:r.children=s:r=s),r}function i4(e,t){if(t&&typeof t=="object"){const r=t;switch(typeof r.type=="string"?r.type:""){case"comment":return YV(e,r);case"doctype":return WV(e,r);case"element":return VV(e,r);case"root":return KV(e,r);case"text":return XV(e,r)}}}function YV(e,t){if(e.schema.allowComments){const r=typeof t.value=="string"?t.value:"",n=r.indexOf("-->"),i={type:"comment",value:n<0?r:r.slice(0,n)};return Ug(i,t),i}}function WV(e,t){if(e.schema.allowDoctypes){const r={type:"doctype"};return Ug(r,t),r}}function VV(e,t){const r=typeof t.tagName=="string"?t.tagName:"";e.stack.push(r);const n=o4(e,t.children),s=QV(e,t.properties);e.stack.pop();let i=!1;if(r&&r!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(r))&&(i=!0,e.schema.ancestors&&al.call(e.schema.ancestors,r))){const c=e.schema.ancestors[r];let d=-1;for(i=!1;++d<c.length;)e.stack.includes(c[d])&&(i=!0)}if(!i)return e.schema.strip&&!e.schema.strip.includes(r)?n:void 0;const l={type:"element",tagName:r,properties:s,children:n};return Ug(l,t),l}function KV(e,t){const n={type:"root",children:o4(e,t.children)};return Ug(n,t),n}function XV(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return Ug(n,t),n}function o4(e,t){const r=[];if(Array.isArray(t)){const n=t;let s=-1;for(;++s<n.length;){const i=i4(e,n[s]);i&&(Array.isArray(i)?r.push(...i):r.push(i))}}return r}function QV(e,t){const r=e.stack[e.stack.length-1],n=e.schema.attributes,s=e.schema.required,i=n&&al.call(n,r)?n[r]:void 0,l=n&&al.call(n,"*")?n["*"]:void 0,c=t&&typeof t=="object"?t:{},d={};let h;for(h in c)if(al.call(c,h)){const g=c[h];let f=KT(e,XT(i,h),h,g);f==null&&(f=KT(e,XT(l,h),h,g)),f!=null&&(d[h]=f)}if(s&&al.call(s,r)){const g=s[r];for(h in g)al.call(g,h)&&!al.call(d,h)&&(d[h]=g[h])}return d}function KT(e,t,r,n){return t?Array.isArray(n)?JV(e,t,r,n):l4(e,t,r,n):void 0}function JV(e,t,r,n){let s=-1;const i=[];for(;++s<n.length;){const l=l4(e,t,r,n[s]);(typeof l=="number"||typeof l=="string")&&i.push(l)}return i}function l4(e,t,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&ZV(e,r,n)){if(typeof t=="object"&&t.length>1){let s=!1,i=0;for(;++i<t.length;){const l=t[i];if(l&&typeof l=="object"&&"flags"in l){if(l.test(String(n))){s=!0;break}}else if(l===n){s=!0;break}}if(!s)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(r)?e.schema.clobberPrefix+n:n}}function ZV(e,t,r){const n=e.schema.protocols&&al.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!n||n.length===0)return!0;const s=String(r),i=s.indexOf(":"),l=s.indexOf("?"),c=s.indexOf("#"),d=s.indexOf("/");if(i<0||d>-1&&i>d||l>-1&&i>l||c>-1&&i>c)return!0;let h=-1;for(;++h<n.length;){const g=n[h];if(i===g.length&&s.slice(0,g.length)===g)return!0}return!1}function Ug(e,t){const r=b3(t);t.data&&(e.data=uc(t.data)),r&&(e.position=r)}function XT(e,t){let r,n=-1;if(e)for(;++n<e.length;){const s=e[n],i=typeof s=="string"?s:s[0];if(i===t)return s;i==="data*"&&(r=s)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return r}function eK(e){return function(t){return GV(t,e)}}const QT=(function(e,t,r){const n=Ig(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]}),Sc=(function(e){if(e==null)return nK;if(typeof e=="string")return rK(e);if(typeof e=="object")return tK(e);if(typeof e=="function")return v2(e);throw new Error("Expected function, string, or array as `test`")});function tK(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Sc(e[r]);return v2(n);function n(...s){let i=-1;for(;++i<t.length;)if(t[i].apply(this,s))return!0;return!1}}function rK(e){return v2(t);function t(r){return r.tagName===e}}function v2(e){return t;function t(r,n,s){return!!(aK(r)&&e.call(this,r,typeof n=="number"?n:void 0,s||void 0))}}function nK(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function aK(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const JT=/\n/g,ZT=/[\t ]+/g,U1=Sc("br"),eC=Sc(hK),sK=Sc("p"),tC=Sc("tr"),iK=Sc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",dK,gK]),c4=Sc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function oK(e,t){const r=t||{},n="children"in e?e.children:[],s=c4(e),i=h4(e,{whitespace:r.whitespace||"normal"}),l=[];(e.type==="text"||e.type==="comment")&&l.push(...d4(e,{breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<n.length;)l.push(...u4(n[c],e,{whitespace:i,breakBefore:c?void 0:s,breakAfter:c<n.length-1?U1(n[c+1]):s}));const d=[];let h;for(c=-1;++c<l.length;){const g=l[c];typeof g=="number"?h!==void 0&&g>h&&(h=g):g&&(h!==void 0&&h>-1&&d.push(`
`.repeat(h)||" "),h=-1,d.push(g))}return d.join("")}function u4(e,t,r){return e.type==="element"?lK(e,t,r):e.type==="text"?r.whitespace==="normal"?d4(e,r):cK(e):[]}function lK(e,t,r){const n=h4(e,r),s=e.children||[];let i=-1,l=[];if(iK(e))return l;let c,d;for(U1(e)||tC(e)&&QT(t,e,tC)?d=`
`:sK(e)?(c=2,d=2):c4(e)&&(c=1,d=1);++i<s.length;)l=l.concat(u4(s[i],e,{whitespace:n,breakBefore:i?void 0:c,breakAfter:i<s.length-1?U1(s[i+1]):d}));return eC(e)&&QT(t,e,eC)&&l.push("	"),c&&l.unshift(c),d&&l.push(d),l}function d4(e,t){const r=String(e.value),n=[],s=[];let i=0;for(;i<=r.length;){JT.lastIndex=i;const d=JT.exec(r),h=d&&"index"in d?d.index:r.length;n.push(uK(r.slice(i,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,h===r.length?t.breakAfter:!0)),i=h+1}let l=-1,c;for(;++l<n.length;)n[l].charCodeAt(n[l].length-1)===8203||l<n.length-1&&n[l+1].charCodeAt(0)===8203?(s.push(n[l]),c=void 0):n[l]?(typeof c=="number"&&s.push(c),s.push(n[l]),c=0):(l===0||l===n.length-1)&&s.push(0);return s}function cK(e){return[String(e.value)]}function uK(e,t,r){const n=[];let s=0,i;for(;s<e.length;){ZT.lastIndex=s;const l=ZT.exec(e);i=l?l.index:e.length,!s&&!i&&l&&!t&&n.push(""),s!==i&&n.push(e.slice(s,i)),s=l?i+l[0].length:i}return s!==i&&!r&&n.push(""),n.join(" ")}function h4(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function dK(e){return!!(e.properties||{}).hidden}function hK(e){return e.tagName==="td"||e.tagName==="th"}function gK(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function pK(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",l="(?!struct)("+n+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},g={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},b=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],k=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:k,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},R={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},B=[R,f,c,r,e.C_BLOCK_COMMENT_MODE,g,h],F={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:B.concat([{begin:/\(/,end:/\)/,keywords:I,contains:B.concat(["self"]),relevance:0}]),relevance:0},ae={className:"function",begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:I,relevance:0},{begin:b,returnBegin:!0,contains:[x],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,g]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,g,c,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,g,c]}]},c,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(F,ae,R,B,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function fK(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},r=pK(e),n=r.keywords;return n.type=[...n.type,...t.type],n.literal=[...n.literal,...t.literal],n.built_in=[...n.built_in,...t.built_in],n._hints=t._hints,r.name="Arduino",r.aliases=["ino"],r.supersetOf="cpp",r}function mK(e){const t=e.regex,r={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const s={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),l={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},c={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r,s]};s.contains.push(c);const d={match:/\\"/},h={className:"string",begin:/'/,end:/'/},g={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,r]},x=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],b=e.SHEBANG({binary:`(${x.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},k=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],S=["true","false"],_={match:/(\/[a-z._-]+)+/},T=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],N=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],I=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],R=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:k,literal:S,built_in:[...T,...N,"set","shopt",...I,...R]},contains:[b,e.SHEBANG(),y,f,i,l,_,c,d,h,g,r]}}function xK(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",l="("+n+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},g={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},b=t.optional(s)+e.IDENT_RE+"\\s*\\(",S={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[f,c,r,e.C_BLOCK_COMMENT_MODE,g,h],T={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:_.concat([{begin:/\(/,end:/\)/,keywords:S,contains:_.concat(["self"]),relevance:0}]),relevance:0},N={begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:S,relevance:0},{begin:b,returnBegin:!0,contains:[e.inherit(x,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,g,c,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,g,c]}]},c,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:S,disableAutodetect:!0,illegal:"</",contains:[].concat(T,N,_,[f,{begin:e.IDENT_RE+"::",keywords:S},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:h,keywords:S}}}function bK(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",s="[a-zA-Z_]\\w*::",l="(?!struct)("+n+"|"+t.optional(s)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},g={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},x={className:"title",begin:t.optional(s)+e.IDENT_RE,relevance:0},b=t.optional(s)+e.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],k=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],I={type:k,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},R={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},B=[R,f,c,r,e.C_BLOCK_COMMENT_MODE,g,h],F={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:I,contains:B.concat([{begin:/\(/,end:/\)/,keywords:I,contains:B.concat(["self"]),relevance:0}]),relevance:0},ae={className:"function",begin:"("+l+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:I,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:I,relevance:0},{begin:b,returnBegin:!0,contains:[x],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,g]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,g,c,{begin:/\(/,end:/\)/,keywords:I,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,g,c]}]},c,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:I,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(F,ae,R,B,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:I,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:I},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function yK(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],s=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],l={keyword:s.concat(i),built_in:t,literal:n},c=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},g={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(g,{illegal:/\n/}),x={className:"subst",begin:/\{/,end:/\}/,keywords:l},b=e.inherit(x,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,b]},k={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},x]},S=e.inherit(k,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},b]});x.contains=[k,y,g,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.C_BLOCK_COMMENT_MODE],b.contains=[S,y,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[h,k,y,g,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},T={begin:"<",end:">",contains:[{beginKeywords:"in out"},c]},N=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",I={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:l,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},c,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,T,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+N+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:l,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,T],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,relevance:0,contains:[_,d,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},I]}}const vK=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),kK=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],wK=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],SK=[...kK,...wK],EK=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),_K=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),TK=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),CK=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function NK(e){const t=e.regex,r=vK(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",i=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",c=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,n,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+_K.join("|")+")"},{begin:":(:)?("+TK.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+CK.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...c,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...c,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:EK.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...c,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+SK.join("|")+")\\b"}]}}function AK(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function jK(e){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function LK(e){const t=e.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(r,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function MK(e){const t=e.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},n=e.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const s={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},c={begin:/\[/,end:/\]/,contains:[n,i,s,l,r,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,g=/'[^']*'/,f=t.either(d,h,g),x=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:x,className:"attr",starts:{end:/$/,contains:[n,c,i,s,l,r]}}]}}var vu="[0-9](_*[0-9])*",xf=`\\.(${vu})`,bf="[0-9a-fA-F](_*[0-9a-fA-F])*",rC={className:"number",variants:[{begin:`(\\b(${vu})((${xf})|\\.)?|(${xf}))[eE][+-]?(${vu})[fFdD]?\\b`},{begin:`\\b(${vu})((${xf})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${xf})[fFdD]?\\b`},{begin:`\\b(${vu})[fFdD]\\b`},{begin:`\\b0[xX]((${bf})\\.?|(${bf})?\\.(${bf}))[pP][+-]?(${vu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${bf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function g4(e,t,r){return r===-1?"":e.replace(t,n=>g4(e,t,r-1))}function OK(e){const t=e.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",n=r+g4("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),d={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},g={className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:d,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[g,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:d,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,rC,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},rC,h]}}const nC="[A-Za-z$_][0-9A-Za-z$_]*",RK=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],IK=["true","false","null","undefined","NaN","Infinity"],p4=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],f4=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],m4=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],DK=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],PK=[].concat(m4,p4,f4);function BK(e){const t=e.regex,r=(V,{after:ue})=>{const H="</"+V[0].slice(1);return V.input.indexOf(H,ue)!==-1},n=nC,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,ue)=>{const H=V[0].length+V.index,D=V.input[H];if(D==="<"||D===","){ue.ignoreMatch();return}D===">"&&(r(V,{after:H})||ue.ignoreMatch());let z;const M=V.input.substring(H);if(z=M.match(/^\s*=/)){ue.ignoreMatch();return}if((z=M.match(/^\s+extends\s+/))&&z.index===0){ue.ignoreMatch();return}}},c={$pattern:nC,keyword:RK,literal:IK,built_in:PK,"variable.language":DK},d="[0-9](_?[0-9])*",h=`\\.(${d})`,g="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${g})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${g})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,x]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},N=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,{match:/\$\d+/},f];x.contains=N.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(N)});const I=[].concat(T,x.contains),R=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(I)}]),B={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:R},F={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...p4,...f4]}},G={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},J={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function ee(V){return t.concat("(?!",V.join("|"),")")}const W={match:t.concat(/\b/,ee([...m4,"super","import"].map(V=>`${V}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},j={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",q={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),G,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,T,{match:/\$\d+/},f,ae,{scope:"attr",match:n+t.lookahead(":"),relevance:0},q,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},j,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},W,J,F,U,{match:/\$[(.]/}]}}function FK(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],s={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[t,r,e.QUOTE_STRING_MODE,s,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var ku="[0-9](_*[0-9])*",yf=`\\.(${ku})`,vf="[0-9a-fA-F](_*[0-9a-fA-F])*",$K={className:"number",variants:[{begin:`(\\b(${ku})((${yf})|\\.)?|(${yf}))[eE][+-]?(${ku})[fFdD]?\\b`},{begin:`\\b(${ku})((${yf})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${yf})[fFdD]?\\b`},{begin:`\\b(${ku})[fFdD]\\b`},{begin:`\\b0[xX]((${vf})\\.?|(${vf})?\\.(${vf}))[pP][+-]?(${ku})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${vf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function UK(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},s={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},l={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,s]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,i,s]}]};s.contains.push(l);const c={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},d={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(l,{className:"string"}),"self"]}]},h=$K,g=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},x=f;return x.variants[1].contains=[f],f.variants[1].contains=[x],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,g,r,n,c,d,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,g],relevance:0},e.C_LINE_COMMENT_MODE,g,c,d,l,e.C_NUMBER_MODE]},g]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},c,d]},l,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const zK=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),HK=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],qK=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],GK=[...HK,...qK],YK=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),x4=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),b4=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),WK=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),VK=x4.concat(b4).sort().reverse();function KK(e){const t=zK(e),r=VK,n="and or not only",s="[\\w-]+",i="("+s+"|@\\{"+s+"\\})",l=[],c=[],d=function(N){return{className:"string",begin:"~?"+N+".*?"+N}},h=function(N,I,R){return{className:N,begin:I,relevance:R}},g={$pattern:/[a-z-]+/,keyword:n,attribute:YK.join(" ")},f={begin:"\\(",end:"\\)",contains:c,keywords:g,relevance:0};c.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,d("'"),d('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,h("variable","@@?"+s,10),h("variable","@\\{"+s+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:s+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const x=c.concat({begin:/\{/,end:/\}/,contains:l}),b={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(c)},y={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+WK.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:c}}]},k={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:g,returnEnd:!0,contains:c,relevance:0}},S={className:"variable",variants:[{begin:"@"+s+"\\s*:",relevance:15},{begin:"@"+s}],starts:{end:"[;}]",returnEnd:!0,contains:x}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,b,h("keyword","all\\b"),h("variable","@\\{"+s+"\\}"),{begin:"\\b("+GK.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,h("selector-tag",i,0),h("selector-id","#"+i),h("selector-class","\\."+i,0),h("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+x4.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+b4.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:x},{begin:"!important"},t.FUNCTION_DISPATCH]},T={begin:s+`:(:)?(${r.join("|")})`,returnBegin:!0,contains:[_]};return l.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,k,S,T,y,_,b,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:l}}function XK(e){const t="\\[=*\\[",r="\\]=*\\]",n={begin:t,end:r,contains:["self"]},s=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,r,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:s.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:s}].concat(s)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:r,contains:[n],relevance:5}])}}function QK(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,r]},s={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},l={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,r,n,s,i,l]}}function JK(e){const t=e.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},s={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},l={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},c=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,c,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},g={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(h,{contains:[]}),x=e.inherit(g,{contains:[]});h.contains.push(x),g.contains.push(f);let b=[r,d];return[h,g,f,x].forEach(_=>{_.contains=_.contains.concat(b)}),b=b.concat(h,g),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:b},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:b}]}]},r,i,h,g,{className:"quote",begin:"^>\\s+",contains:b,end:"$"},s,n,d,l,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function ZK(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,c={"variable.language":["this","super"],$pattern:r,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:r,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:c,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function eX(e){const t=e.regex,r=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],n=/[dualxmsipngr]{0,12}/,s={$pattern:/[\w.]+/,keyword:r.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:s},l={begin:/->\{/,end:/\}/},c={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[c]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},g=[e.BACKSLASH_ESCAPE,i,d],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],x=(k,S,_="\\1")=>{const T=_==="\\1"?_:t.concat(_,S);return t.concat(t.concat("(?:",k,")"),S,/(?:\\.|[^\\\/])*?/,T,/(?:\\.|[^\\\/])*?/,_,n)},b=(k,S,_)=>t.concat(t.concat("(?:",k,")"),S,/(?:\\.|[^\\\/])*?/,_,n),y=[d,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),l,{className:"string",contains:g,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:x("s|tr|y",t.either(...f,{capture:!0}))},{begin:x("s|tr|y","\\(","\\)")},{begin:x("s|tr|y","\\[","\\]")},{begin:x("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:b("(?:m|qr)?",/\//,/\//)},{begin:b("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:b("m|qr",/\(/,/\)/)},{begin:b("m|qr",/\[/,/\]/)},{begin:b("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=y,l.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:s,contains:y}}function tX(e){const t=e.regex,r=/(?![A-Za-z0-9])(?![$])/,n=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),s=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),i=t.concat(/[A-Z]+/,r),l={scope:"variable",match:"\\$+"+n},c={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},d={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=e.inherit(e.APOS_STRING_MODE,{illegal:null}),g=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(d)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(d),"on:begin":(j,U)=>{U.data._beginMatch=j[1]||j[2]},"on:end":(j,U)=>{U.data._beginMatch!==j[1]&&U.ignoreMatch()}},x=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),b=`[ 	
]`,y={scope:"string",variants:[g,h,f,x]},k={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],T=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],I={keyword:_,literal:(j=>{const U=[];return j.forEach(O=>{U.push(O),O.toLowerCase()===O?U.push(O.toUpperCase()):U.push(O.toLowerCase())}),U})(S),built_in:T},R=j=>j.map(U=>U.replace(/\|\d+$/,"")),B={variants:[{match:[/new/,t.concat(b,"+"),t.concat("(?!",R(T).join("\\b|"),"\\b)"),s],scope:{1:"keyword",4:"title.class"}}]},F=t.concat(n,"\\b(?!\\()"),ae={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),F],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[s,t.concat(/::/,t.lookahead(/(?!class\b)/)),F],scope:{1:"title.class",3:"variable.constant"}},{match:[s,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[s,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},G={scope:"attr",match:t.concat(n,t.lookahead(":"),t.lookahead(/(?!::)/))},$={relevance:0,begin:/\(/,end:/\)/,keywords:I,contains:[G,l,ae,e.C_BLOCK_COMMENT_MODE,y,k,B]},J={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",R(_).join("\\b|"),"|",R(T).join("\\b|"),"\\b)"),n,t.concat(b,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[$]};$.contains.push(J);const ee=[G,ae,e.C_BLOCK_COMMENT_MODE,y,k,B],W={begin:t.concat(/#\[\s*\\?/,t.either(s,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...ee]},...ee,{scope:"meta",variants:[{match:s},{match:i}]}]};return{case_insensitive:!1,keywords:I,contains:[W,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},c,{scope:"variable.language",match:/\$this\b/},l,J,ae,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},B,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:I,contains:["self",W,l,ae,e.C_BLOCK_COMMENT_MODE,y,k]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},y,k]}}function rX(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function nX(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function aX(e){const t=e.regex,r=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],c={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:c,illegal:/#/},g={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d,g,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d,g,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,g,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,g,h]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},x="[0-9](_?[0-9])*",b=`(\\b(${x}))?\\.(${x})|\\b(${x})\\.`,y=`\\b|${n.join("|")}`,k={className:"number",relevance:0,variants:[{begin:`(\\b(${x})|(${b}))[eE][+-]?(${x})[jJ]?(?=${y})`},{begin:`(${b})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${x})[jJ](?=${y})`}]},S={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:c,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:["self",d,k,f,e.HASH_COMMENT_MODE]}]};return h.contains=[f,k,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:c,illegal:/(<\/|\?)|=>/,contains:[d,k,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,S,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[k,_,f]}]}}function sX(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function iX(e){const t=e.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[s,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[i,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function oX(e){const t=e.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),s=t.concat(n,/(::\w+)*/),l={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},c={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},h=[e.COMMENT("#","$",{contains:[c]}),e.COMMENT("^=begin","^=end",{contains:[c],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],g={className:"subst",begin:/#\{/,end:/\}/,keywords:l},f={className:"string",contains:[e.BACKSLASH_ESCAPE,g],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,g]})]}]},x="[1-9](_?[0-9])*|0",b="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${x})(\\.(${b}))?([eE][+-]?(${b})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},k={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:l}]},B=[f,{variants:[{match:[/class\s+/,s,/\s+<\s+/,s]},{match:[/\b(class|module)\s+/,s]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:l},{match:[/(include|extend)\s+/,s],scope:{2:"title.class"},keywords:l},{relevance:0,match:[s,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[k]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:r}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:l},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,g],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,h),relevance:0}].concat(d,h);g.contains=B,k.contains=B;const $=[{begin:/^\s*=>/,starts:{end:"$",contains:B}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:l,contains:B}}];return h.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:l,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat($).concat(h).concat(B)}}function lX(e){const t=e.regex,r=/(r#)?/,n=t.concat(r,e.UNDERSCORE_IDENT_RE),s=t.concat(r,e.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,s,t.lookahead(/\s*\(/))},l="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],g=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:g,keyword:c,literal:d,built_in:h},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+l},{begin:"\\b0o([0-7_]+)"+l},{begin:"\\b0x([A-Fa-f0-9_]+)"+l},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+l}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:g}},{className:"punctuation",begin:"->"},i]}}const cX=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),uX=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],dX=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],hX=[...uX,...dX],gX=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),pX=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),fX=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),mX=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function xX(e){const t=cX(e),r=fX,n=pX,s="@[a-z-]+",i="and or not only",c={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+hX.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+n.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+r.join("|")+")"},c,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+mX.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,c,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:s,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:gX.join(" ")},contains:[{begin:s,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},c,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function bX(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function yX(e){const t=e.regex,r=e.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},s={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],l=["double precision","large object","with timezone","without timezone"],c=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],g=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],x=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],b=g,y=[...h,...d].filter(R=>!g.includes(R)),k={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},S={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:t.concat(/\b/,t.either(...b),/\s*\(/),relevance:0,keywords:{built_in:b}};function T(R){return t.concat(/\b/,t.either(...R.map(B=>B.replace(/\s+/,"\\s+"))),/\b/)}const N={scope:"keyword",match:T(x),relevance:0};function I(R,{exceptions:B,when:F}={}){const ae=F;return B=B||[],R.map(G=>G.match(/\|\d+$/)||B.includes(G)?G:ae(G)?`${G}|0`:G)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:I(y,{when:R=>R.length<3}),literal:i,type:c,built_in:f},contains:[{scope:"type",match:T(l)},N,_,k,n,s,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,r,S]}}function y4(e){return e?typeof e=="string"?e:e.source:null}function xh(e){return pn("(?=",e,")")}function pn(...e){return e.map(r=>y4(r)).join("")}function vX(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Wa(...e){return"("+(vX(e).capture?"":"?:")+e.map(n=>y4(n)).join("|")+")"}const k2=e=>pn(/\b/,e,/\w$/.test(e)?/\b/:/\B/),kX=["Protocol","Type"].map(k2),aC=["init","self"].map(k2),wX=["Any","Self"],Cy=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],sC=["false","nil","true"],SX=["assignment","associativity","higherThan","left","lowerThan","none","right"],EX=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],iC=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],v4=Wa(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),k4=Wa(v4,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Ny=pn(v4,k4,"*"),w4=Wa(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),p0=Wa(w4,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Ni=pn(w4,p0,"*"),kf=pn(/[A-Z]/,p0,"*"),_X=["attached","autoclosure",pn(/convention\(/,Wa("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",pn(/objc\(/,Ni,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],TX=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function CX(e){const t={match:/\s+/,relevance:0},r=e.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[e.C_LINE_COMMENT_MODE,r],s={match:[/\./,Wa(...kX,...aC)],className:{2:"keyword"}},i={match:pn(/\./,Wa(...Cy)),relevance:0},l=Cy.filter(Ze=>typeof Ze=="string").concat(["_|0"]),c=Cy.filter(Ze=>typeof Ze!="string").concat(wX).map(k2),d={variants:[{className:"keyword",match:Wa(...c,...aC)}]},h={$pattern:Wa(/\b\w+/,/#\w+/),keyword:l.concat(EX),literal:sC},g=[s,i,d],f={match:pn(/\./,Wa(...iC)),relevance:0},x={className:"built_in",match:pn(/\b/,Wa(...iC),/(?=\()/)},b=[f,x],y={match:/->/,relevance:0},k={className:"operator",relevance:0,variants:[{match:Ny},{match:`\\.(\\.|${k4})+`}]},S=[y,k],_="([0-9]_*)+",T="([0-9a-fA-F]_*)+",N={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${T})(\\.(${T}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},I=(Ze="")=>({className:"subst",variants:[{match:pn(/\\/,Ze,/[0\\tnr"']/)},{match:pn(/\\/,Ze,/u\{[0-9a-fA-F]{1,8}\}/)}]}),R=(Ze="")=>({className:"subst",match:pn(/\\/,Ze,/[\t ]*(?:[\r\n]|\r\n)/)}),B=(Ze="")=>({className:"subst",label:"interpol",begin:pn(/\\/,Ze,/\(/),end:/\)/}),F=(Ze="")=>({begin:pn(Ze,/"""/),end:pn(/"""/,Ze),contains:[I(Ze),R(Ze),B(Ze)]}),ae=(Ze="")=>({begin:pn(Ze,/"/),end:pn(/"/,Ze),contains:[I(Ze),B(Ze)]}),G={className:"string",variants:[F(),F("#"),F("##"),F("###"),ae(),ae("#"),ae("##"),ae("###")]},$=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],J={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:$},ee=Ze=>{const kt=pn(Ze,/\//),Rt=pn(/\//,Ze);return{begin:kt,end:Rt,contains:[...$,{scope:"comment",begin:`#(?!.*${Rt})`,end:/$/}]}},W={scope:"regexp",variants:[ee("###"),ee("##"),ee("#"),J]},j={match:pn(/`/,Ni,/`/)},U={className:"variable",match:/\$\d+/},O={className:"variable",match:`\\$${p0}+`},q=[j,U,O],V={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:TX,contains:[...S,N,G]}]}},ue={scope:"keyword",match:pn(/@/,Wa(..._X),xh(Wa(/\(/,/\s+/)))},H={scope:"meta",match:pn(/@/,Ni)},D=[V,ue,H],z={match:xh(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:pn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,p0,"+")},{className:"type",match:kf,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:pn(/\s+&\s+/,xh(kf)),relevance:0}]},M={begin:/</,end:/>/,keywords:h,contains:[...n,...g,...D,y,z]};z.contains.push(M);const le={match:pn(Ni,/\s*:/),keywords:"_|0",relevance:0},me={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",le,...n,W,...g,...b,...S,N,G,...q,...D,z]},Ee={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,z]},Ae={begin:Wa(xh(pn(Ni,/\s*:/)),xh(pn(Ni,/\s+/,Ni,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Ni}]},ve={begin:/\(/,end:/\)/,keywords:h,contains:[Ae,...n,...g,...S,N,G,...D,z,me],endsParent:!0,illegal:/["']/},Pe={match:[/(func|macro)/,/\s+/,Wa(j.match,Ni,Ny)],className:{1:"keyword",3:"title.function"},contains:[Ee,ve,t],illegal:[/\[/,/%/]},ge={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ee,ve,t],illegal:/\[|%/},Be={match:[/operator/,/\s+/,Ny],className:{1:"keyword",3:"title"}},ht={begin:[/precedencegroup/,/\s+/,kf],className:{1:"keyword",3:"title"},contains:[z],keywords:[...SX,...sC],end:/}/},ye={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ut={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},Et={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Ni,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[Ee,...g,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:kf},...g],relevance:0}]};for(const Ze of G.variants){const kt=Ze.contains.find(ur=>ur.label==="interpol");kt.keywords=h;const Rt=[...g,...b,...S,N,G,...q];kt.contains=[...Rt,{begin:/\(/,end:/\)/,contains:["self",...Rt]}]}return{name:"Swift",keywords:h,contains:[...n,Pe,ge,ye,ut,Et,Be,ht,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},W,...g,...b,...S,N,G,...q,...D,z,me]}}const f0="[A-Za-z$_][0-9A-Za-z$_]*",S4=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],E4=["true","false","null","undefined","NaN","Infinity"],_4=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],T4=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],C4=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],N4=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],A4=[].concat(C4,_4,T4);function NX(e){const t=e.regex,r=(V,{after:ue})=>{const H="</"+V[0].slice(1);return V.input.indexOf(H,ue)!==-1},n=f0,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(V,ue)=>{const H=V[0].length+V.index,D=V.input[H];if(D==="<"||D===","){ue.ignoreMatch();return}D===">"&&(r(V,{after:H})||ue.ignoreMatch());let z;const M=V.input.substring(H);if(z=M.match(/^\s*=/)){ue.ignoreMatch();return}if((z=M.match(/^\s+extends\s+/))&&z.index===0){ue.ignoreMatch();return}}},c={$pattern:f0,keyword:S4,literal:E4,built_in:A4,"variable.language":N4},d="[0-9](_?[0-9])*",h=`\\.(${d})`,g="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${g})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${g})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"css"}},k={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,x]},T={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},N=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,{match:/\$\d+/},f];x.contains=N.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(N)});const I=[].concat(T,x.contains),R=I.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(I)}]),B={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:R},F={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},ae={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[..._4,...T4]}},G={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},$={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},J={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function ee(V){return t.concat("(?!",V.join("|"),")")}const W={match:t.concat(/\b/,ee([...C4,"super","import"].map(V=>`${V}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},j={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",q={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:ae},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),G,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,y,k,S,T,{match:/\$\d+/},f,ae,{scope:"attr",match:n+t.lookahead(":"),relevance:0},q,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[T,e.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},$,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},j,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},W,J,F,U,{match:/\$[(.]/}]}}function AX(e){const t=e.regex,r=NX(e),n=f0,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[r.exports.CLASS_REFERENCE]},c={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:f0,keyword:S4.concat(d),literal:E4,built_in:A4.concat(s),"variable.language":N4},g={className:"meta",begin:"@"+n},f=(k,S,_)=>{const T=k.contains.findIndex(N=>N.label===S);if(T===-1)throw new Error("can not find mode to replace");k.contains.splice(T,1,_)};Object.assign(r.keywords,h),r.exports.PARAMS_CONTAINS.push(g);const x=r.contains.find(k=>k.scope==="attr"),b=Object.assign({},x,{match:t.concat(n,t.lookahead(/\s*\?:/))});r.exports.PARAMS_CONTAINS.push([r.exports.CLASS_REFERENCE,x,b]),r.contains=r.contains.concat([g,i,l,b]),f(r,"shebang",e.SHEBANG()),f(r,"use_strict",c);const y=r.contains.find(k=>k.label==="func.def");return y.relevance=0,Object.assign(r,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),r}function jX(e){const t=e.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,l=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,c=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,s),/ *#/)},{begin:t.concat(/# */,c,/ *#/)},{begin:t.concat(/# */,l,/ *#/)},{begin:t.concat(/# */,t.either(i,s),/ +/,t.either(l,c),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},g={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),x=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,n,d,h,g,f,x,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[x]}]}}function LX(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const r=e.COMMENT(/;;/,/$/),n=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],s={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},l={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},c={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:n},contains:[r,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,l,s,e.QUOTE_STRING_MODE,d,h,c]}}function MX(e){const t=e.regex,r=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=e.inherit(i,{begin:/\(/,end:/\)/}),c=e.inherit(e.APOS_STRING_MODE,{className:"string"}),d=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,d,c,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,l,d,c]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(r,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function OX(e){const t="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},s={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},l={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,s]},c=e.inherit(l,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),x={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},b={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},y={begin:/\{/,end:/\}/,contains:[b],illegal:"\\n",relevance:0},k={begin:"\\[",end:"\\]",contains:[b],illegal:"\\n",relevance:0},S=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},x,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},y,k,i,l],_=[...S];return _.pop(),_.push(c),b.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}const RX={arduino:fK,bash:mK,c:xK,cpp:bK,csharp:yK,css:NK,diff:AK,go:jK,graphql:LK,ini:MK,java:OK,javascript:BK,json:FK,kotlin:UK,less:KK,lua:XK,makefile:QK,markdown:JK,objectivec:ZK,perl:eX,php:tX,"php-template":rX,plaintext:nX,python:aX,"python-repl":sX,r:iX,ruby:oX,rust:lX,scss:xX,shell:bX,sql:yX,swift:CX,typescript:AX,vbnet:jX,wasm:LX,xml:MX,yaml:OX};var Ay,oC;function IX(){if(oC)return Ay;oC=1;function e(ie){return ie instanceof Map?ie.clear=ie.delete=ie.set=function(){throw new Error("map is read-only")}:ie instanceof Set&&(ie.add=ie.clear=ie.delete=function(){throw new Error("set is read-only")}),Object.freeze(ie),Object.getOwnPropertyNames(ie).forEach(Oe=>{const Ye=ie[Oe],Pt=typeof Ye;(Pt==="object"||Pt==="function")&&!Object.isFrozen(Ye)&&e(Ye)}),ie}class t{constructor(Oe){Oe.data===void 0&&(Oe.data={}),this.data=Oe.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(ie){return ie.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(ie,...Oe){const Ye=Object.create(null);for(const Pt in ie)Ye[Pt]=ie[Pt];return Oe.forEach(function(Pt){for(const xr in Pt)Ye[xr]=Pt[xr]}),Ye}const s="</span>",i=ie=>!!ie.scope,l=(ie,{prefix:Oe})=>{if(ie.startsWith("language:"))return ie.replace("language:","language-");if(ie.includes(".")){const Ye=ie.split(".");return[`${Oe}${Ye.shift()}`,...Ye.map((Pt,xr)=>`${Pt}${"_".repeat(xr+1)}`)].join(" ")}return`${Oe}${ie}`};class c{constructor(Oe,Ye){this.buffer="",this.classPrefix=Ye.classPrefix,Oe.walk(this)}addText(Oe){this.buffer+=r(Oe)}openNode(Oe){if(!i(Oe))return;const Ye=l(Oe.scope,{prefix:this.classPrefix});this.span(Ye)}closeNode(Oe){i(Oe)&&(this.buffer+=s)}value(){return this.buffer}span(Oe){this.buffer+=`<span class="${Oe}">`}}const d=(ie={})=>{const Oe={children:[]};return Object.assign(Oe,ie),Oe};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Oe){this.top.children.push(Oe)}openNode(Oe){const Ye=d({scope:Oe});this.add(Ye),this.stack.push(Ye)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Oe){return this.constructor._walk(Oe,this.rootNode)}static _walk(Oe,Ye){return typeof Ye=="string"?Oe.addText(Ye):Ye.children&&(Oe.openNode(Ye),Ye.children.forEach(Pt=>this._walk(Oe,Pt)),Oe.closeNode(Ye)),Oe}static _collapse(Oe){typeof Oe!="string"&&Oe.children&&(Oe.children.every(Ye=>typeof Ye=="string")?Oe.children=[Oe.children.join("")]:Oe.children.forEach(Ye=>{h._collapse(Ye)}))}}class g extends h{constructor(Oe){super(),this.options=Oe}addText(Oe){Oe!==""&&this.add(Oe)}startScope(Oe){this.openNode(Oe)}endScope(){this.closeNode()}__addSublanguage(Oe,Ye){const Pt=Oe.root;Ye&&(Pt.scope=`language:${Ye}`),this.add(Pt)}toHTML(){return new c(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(ie){return ie?typeof ie=="string"?ie:ie.source:null}function x(ie){return k("(?=",ie,")")}function b(ie){return k("(?:",ie,")*")}function y(ie){return k("(?:",ie,")?")}function k(...ie){return ie.map(Ye=>f(Ye)).join("")}function S(ie){const Oe=ie[ie.length-1];return typeof Oe=="object"&&Oe.constructor===Object?(ie.splice(ie.length-1,1),Oe):{}}function _(...ie){return"("+(S(ie).capture?"":"?:")+ie.map(Pt=>f(Pt)).join("|")+")"}function T(ie){return new RegExp(ie.toString()+"|").exec("").length-1}function N(ie,Oe){const Ye=ie&&ie.exec(Oe);return Ye&&Ye.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function R(ie,{joinWith:Oe}){let Ye=0;return ie.map(Pt=>{Ye+=1;const xr=Ye;let wr=f(Pt),xt="";for(;wr.length>0;){const pt=I.exec(wr);if(!pt){xt+=wr;break}xt+=wr.substring(0,pt.index),wr=wr.substring(pt.index+pt[0].length),pt[0][0]==="\\"&&pt[1]?xt+="\\"+String(Number(pt[1])+xr):(xt+=pt[0],pt[0]==="("&&Ye++)}return xt}).map(Pt=>`(${Pt})`).join(Oe)}const B=/\b\B/,F="[a-zA-Z]\\w*",ae="[a-zA-Z_]\\w*",G="\\b\\d+(\\.\\d+)?",$="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",J="\\b(0b[01]+)",ee="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",W=(ie={})=>{const Oe=/^#![ ]*\//;return ie.binary&&(ie.begin=k(Oe,/.*\b/,ie.binary,/\b.*/)),n({scope:"meta",begin:Oe,end:/$/,relevance:0,"on:begin":(Ye,Pt)=>{Ye.index!==0&&Pt.ignoreMatch()}},ie)},j={begin:"\\\\[\\s\\S]",relevance:0},U={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[j]},O={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[j]},q={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},V=function(ie,Oe,Ye={}){const Pt=n({scope:"comment",begin:ie,end:Oe,contains:[]},Ye);Pt.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const xr=_("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Pt.contains.push({begin:k(/[ ]+/,"(",xr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Pt},ue=V("//","$"),H=V("/\\*","\\*/"),D=V("#","$"),z={scope:"number",begin:G,relevance:0},M={scope:"number",begin:$,relevance:0},le={scope:"number",begin:J,relevance:0},me={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[j,{begin:/\[/,end:/\]/,relevance:0,contains:[j]}]},Ee={scope:"title",begin:F,relevance:0},Ae={scope:"title",begin:ae,relevance:0},ve={begin:"\\.\\s*"+ae,relevance:0};var ge=Object.freeze({__proto__:null,APOS_STRING_MODE:U,BACKSLASH_ESCAPE:j,BINARY_NUMBER_MODE:le,BINARY_NUMBER_RE:J,COMMENT:V,C_BLOCK_COMMENT_MODE:H,C_LINE_COMMENT_MODE:ue,C_NUMBER_MODE:M,C_NUMBER_RE:$,END_SAME_AS_BEGIN:function(ie){return Object.assign(ie,{"on:begin":(Oe,Ye)=>{Ye.data._beginMatch=Oe[1]},"on:end":(Oe,Ye)=>{Ye.data._beginMatch!==Oe[1]&&Ye.ignoreMatch()}})},HASH_COMMENT_MODE:D,IDENT_RE:F,MATCH_NOTHING_RE:B,METHOD_GUARD:ve,NUMBER_MODE:z,NUMBER_RE:G,PHRASAL_WORDS_MODE:q,QUOTE_STRING_MODE:O,REGEXP_MODE:me,RE_STARTERS_RE:ee,SHEBANG:W,TITLE_MODE:Ee,UNDERSCORE_IDENT_RE:ae,UNDERSCORE_TITLE_MODE:Ae});function Be(ie,Oe){ie.input[ie.index-1]==="."&&Oe.ignoreMatch()}function ht(ie,Oe){ie.className!==void 0&&(ie.scope=ie.className,delete ie.className)}function ye(ie,Oe){Oe&&ie.beginKeywords&&(ie.begin="\\b("+ie.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ie.__beforeBegin=Be,ie.keywords=ie.keywords||ie.beginKeywords,delete ie.beginKeywords,ie.relevance===void 0&&(ie.relevance=0))}function ut(ie,Oe){Array.isArray(ie.illegal)&&(ie.illegal=_(...ie.illegal))}function Et(ie,Oe){if(ie.match){if(ie.begin||ie.end)throw new Error("begin & end are not supported with match");ie.begin=ie.match,delete ie.match}}function Ze(ie,Oe){ie.relevance===void 0&&(ie.relevance=1)}const kt=(ie,Oe)=>{if(!ie.beforeMatch)return;if(ie.starts)throw new Error("beforeMatch cannot be used with starts");const Ye=Object.assign({},ie);Object.keys(ie).forEach(Pt=>{delete ie[Pt]}),ie.keywords=Ye.keywords,ie.begin=k(Ye.beforeMatch,x(Ye.begin)),ie.starts={relevance:0,contains:[Object.assign(Ye,{endsParent:!0})]},ie.relevance=0,delete Ye.beforeMatch},Rt=["of","and","for","in","not","or","if","then","parent","list","value"],ur="keyword";function yt(ie,Oe,Ye=ur){const Pt=Object.create(null);return typeof ie=="string"?xr(Ye,ie.split(" ")):Array.isArray(ie)?xr(Ye,ie):Object.keys(ie).forEach(function(wr){Object.assign(Pt,yt(ie[wr],Oe,wr))}),Pt;function xr(wr,xt){Oe&&(xt=xt.map(pt=>pt.toLowerCase())),xt.forEach(function(pt){const _t=pt.split("|");Pt[_t[0]]=[wr,bt(_t[0],_t[1])]})}}function bt(ie,Oe){return Oe?Number(Oe):tn(ie)?0:1}function tn(ie){return Rt.includes(ie.toLowerCase())}const ar={},Kt=ie=>{console.error(ie)},On=(ie,...Oe)=>{console.log(`WARN: ${ie}`,...Oe)},X=(ie,Oe)=>{ar[`${ie}/${Oe}`]||(console.log(`Deprecated as of ${ie}. ${Oe}`),ar[`${ie}/${Oe}`]=!0)},he=new Error;function Re(ie,Oe,{key:Ye}){let Pt=0;const xr=ie[Ye],wr={},xt={};for(let pt=1;pt<=Oe.length;pt++)xt[pt+Pt]=xr[pt],wr[pt+Pt]=!0,Pt+=T(Oe[pt-1]);ie[Ye]=xt,ie[Ye]._emit=wr,ie[Ye]._multi=!0}function gt(ie){if(Array.isArray(ie.begin)){if(ie.skip||ie.excludeBegin||ie.returnBegin)throw Kt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),he;if(typeof ie.beginScope!="object"||ie.beginScope===null)throw Kt("beginScope must be object"),he;Re(ie,ie.begin,{key:"beginScope"}),ie.begin=R(ie.begin,{joinWith:""})}}function Qe(ie){if(Array.isArray(ie.end)){if(ie.skip||ie.excludeEnd||ie.returnEnd)throw Kt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),he;if(typeof ie.endScope!="object"||ie.endScope===null)throw Kt("endScope must be object"),he;Re(ie,ie.end,{key:"endScope"}),ie.end=R(ie.end,{joinWith:""})}}function zt(ie){ie.scope&&typeof ie.scope=="object"&&ie.scope!==null&&(ie.beginScope=ie.scope,delete ie.scope)}function Gt(ie){zt(ie),typeof ie.beginScope=="string"&&(ie.beginScope={_wrap:ie.beginScope}),typeof ie.endScope=="string"&&(ie.endScope={_wrap:ie.endScope}),gt(ie),Qe(ie)}function dt(ie){function Oe(xt,pt){return new RegExp(f(xt),"m"+(ie.case_insensitive?"i":"")+(ie.unicodeRegex?"u":"")+(pt?"g":""))}class Ye{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(pt,_t){_t.position=this.position++,this.matchIndexes[this.matchAt]=_t,this.regexes.push([_t,pt]),this.matchAt+=T(pt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const pt=this.regexes.map(_t=>_t[1]);this.matcherRe=Oe(R(pt,{joinWith:"|"}),!0),this.lastIndex=0}exec(pt){this.matcherRe.lastIndex=this.lastIndex;const _t=this.matcherRe.exec(pt);if(!_t)return null;const Kr=_t.findIndex((En,Na)=>Na>0&&En!==void 0),pr=this.matchIndexes[Kr];return _t.splice(0,Kr),Object.assign(_t,pr)}}class Pt{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(pt){if(this.multiRegexes[pt])return this.multiRegexes[pt];const _t=new Ye;return this.rules.slice(pt).forEach(([Kr,pr])=>_t.addRule(Kr,pr)),_t.compile(),this.multiRegexes[pt]=_t,_t}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(pt,_t){this.rules.push([pt,_t]),_t.type==="begin"&&this.count++}exec(pt){const _t=this.getMatcher(this.regexIndex);_t.lastIndex=this.lastIndex;let Kr=_t.exec(pt);if(this.resumingScanAtSamePosition()&&!(Kr&&Kr.index===this.lastIndex)){const pr=this.getMatcher(0);pr.lastIndex=this.lastIndex+1,Kr=pr.exec(pt)}return Kr&&(this.regexIndex+=Kr.position+1,this.regexIndex===this.count&&this.considerAll()),Kr}}function xr(xt){const pt=new Pt;return xt.contains.forEach(_t=>pt.addRule(_t.begin,{rule:_t,type:"begin"})),xt.terminatorEnd&&pt.addRule(xt.terminatorEnd,{type:"end"}),xt.illegal&&pt.addRule(xt.illegal,{type:"illegal"}),pt}function wr(xt,pt){const _t=xt;if(xt.isCompiled)return _t;[ht,Et,Gt,kt].forEach(pr=>pr(xt,pt)),ie.compilerExtensions.forEach(pr=>pr(xt,pt)),xt.__beforeBegin=null,[ye,ut,Ze].forEach(pr=>pr(xt,pt)),xt.isCompiled=!0;let Kr=null;return typeof xt.keywords=="object"&&xt.keywords.$pattern&&(xt.keywords=Object.assign({},xt.keywords),Kr=xt.keywords.$pattern,delete xt.keywords.$pattern),Kr=Kr||/\w+/,xt.keywords&&(xt.keywords=yt(xt.keywords,ie.case_insensitive)),_t.keywordPatternRe=Oe(Kr,!0),pt&&(xt.begin||(xt.begin=/\B|\b/),_t.beginRe=Oe(_t.begin),!xt.end&&!xt.endsWithParent&&(xt.end=/\B|\b/),xt.end&&(_t.endRe=Oe(_t.end)),_t.terminatorEnd=f(_t.end)||"",xt.endsWithParent&&pt.terminatorEnd&&(_t.terminatorEnd+=(xt.end?"|":"")+pt.terminatorEnd)),xt.illegal&&(_t.illegalRe=Oe(xt.illegal)),xt.contains||(xt.contains=[]),xt.contains=[].concat(...xt.contains.map(function(pr){return Zt(pr==="self"?xt:pr)})),xt.contains.forEach(function(pr){wr(pr,_t)}),xt.starts&&wr(xt.starts,pt),_t.matcher=xr(_t),_t}if(ie.compilerExtensions||(ie.compilerExtensions=[]),ie.contains&&ie.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ie.classNameAliases=n(ie.classNameAliases||{}),wr(ie)}function jt(ie){return ie?ie.endsWithParent||jt(ie.starts):!1}function Zt(ie){return ie.variants&&!ie.cachedVariants&&(ie.cachedVariants=ie.variants.map(function(Oe){return n(ie,{variants:null},Oe)})),ie.cachedVariants?ie.cachedVariants:jt(ie)?n(ie,{starts:ie.starts?n(ie.starts):null}):Object.isFrozen(ie)?n(ie):ie}var Jt="11.11.1";class Rn extends Error{constructor(Oe,Ye){super(Oe),this.name="HTMLInjectionError",this.html=Ye}}const zr=r,Bt=n,rn=Symbol("nomatch"),ma=7,xa=function(ie){const Oe=Object.create(null),Ye=Object.create(null),Pt=[];let xr=!0;const wr="Could not find the language '{}', did you forget to load/include a language module?",xt={disableAutodetect:!0,name:"Plain text",contains:[]};let pt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:g};function _t(Ge){return pt.noHighlightRe.test(Ge)}function Kr(Ge){let lt=Ge.className+" ";lt+=Ge.parentNode?Ge.parentNode.className:"";const rr=pt.languageDetectRe.exec(lt);if(rr){const vr=He(rr[1]);return vr||(On(wr.replace("{}",rr[1])),On("Falling back to no-highlight mode for this block.",Ge)),vr?rr[1]:"no-highlight"}return lt.split(/\s+/).find(vr=>_t(vr)||He(vr))}function pr(Ge,lt,rr){let vr="",sn="";typeof lt=="object"?(vr=Ge,rr=lt.ignoreIllegals,sn=lt.language):(X("10.7.0","highlight(lang, code, ...args) has been deprecated."),X("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),sn=Ge,vr=lt),rr===void 0&&(rr=!0);const Dn={code:vr,language:sn};In("before:highlight",Dn);const Vn=Dn.result?Dn.result:En(Dn.language,Dn.code,rr);return Vn.code=Dn.code,In("after:highlight",Vn),Vn}function En(Ge,lt,rr,vr){const sn=Object.create(null);function Dn(ct,Lt){return ct.keywords[Lt]}function Vn(){if(!ot.keywords){jn.addText(Ir);return}let ct=0;ot.keywordPatternRe.lastIndex=0;let Lt=ot.keywordPatternRe.exec(Ir),sr="";for(;Lt;){sr+=Ir.substring(ct,Lt.index);const yr=qr.case_insensitive?Lt[0].toLowerCase():Lt[0],Xr=Dn(ot,yr);if(Xr){const[ja,vi]=Xr;if(jn.addText(sr),sr="",sn[yr]=(sn[yr]||0)+1,sn[yr]<=ma&&(Rs+=vi),ja.startsWith("_"))sr+=Lt[0];else{const Ac=qr.classNameAliases[ja]||ja;we(Lt[0],Ac)}}else sr+=Lt[0];ct=ot.keywordPatternRe.lastIndex,Lt=ot.keywordPatternRe.exec(Ir)}sr+=Ir.substring(ct),jn.addText(sr)}function Hr(){if(Ir==="")return;let ct=null;if(typeof ot.subLanguage=="string"){if(!Oe[ot.subLanguage]){jn.addText(Ir);return}ct=En(ot.subLanguage,Ir,!0,ri[ot.subLanguage]),ri[ot.subLanguage]=ct._top}else ct=Ft(Ir,ot.subLanguage.length?ot.subLanguage:null);ot.relevance>0&&(Rs+=ct.relevance),jn.__addSublanguage(ct._emitter,ct.language)}function ne(){ot.subLanguage!=null?Hr():Vn(),Ir=""}function we(ct,Lt){ct!==""&&(jn.startScope(Lt),jn.addText(ct),jn.endScope())}function We(ct,Lt){let sr=1;const yr=Lt.length-1;for(;sr<=yr;){if(!ct._emit[sr]){sr++;continue}const Xr=qr.classNameAliases[ct[sr]]||ct[sr],ja=Lt[sr];Xr?we(ja,Xr):(Ir=ja,Vn(),Ir=""),sr++}}function Ct(ct,Lt){return ct.scope&&typeof ct.scope=="string"&&jn.openNode(qr.classNameAliases[ct.scope]||ct.scope),ct.beginScope&&(ct.beginScope._wrap?(we(Ir,qr.classNameAliases[ct.beginScope._wrap]||ct.beginScope._wrap),Ir=""):ct.beginScope._multi&&(We(ct.beginScope,Lt),Ir="")),ot=Object.create(ct,{parent:{value:ot}}),ot}function dr(ct,Lt,sr){let yr=N(ct.endRe,sr);if(yr){if(ct["on:end"]){const Xr=new t(ct);ct["on:end"](Lt,Xr),Xr.isMatchIgnored&&(yr=!1)}if(yr){for(;ct.endsParent&&ct.parent;)ct=ct.parent;return ct}}if(ct.endsWithParent)return dr(ct.parent,Lt,sr)}function Mr(ct){return ot.matcher.regexIndex===0?(Ir+=ct[0],1):(ba=!0,0)}function An(ct){const Lt=ct[0],sr=ct.rule,yr=new t(sr),Xr=[sr.__beforeBegin,sr["on:begin"]];for(const ja of Xr)if(ja&&(ja(ct,yr),yr.isMatchIgnored))return Mr(Lt);return sr.skip?Ir+=Lt:(sr.excludeBegin&&(Ir+=Lt),ne(),!sr.returnBegin&&!sr.excludeBegin&&(Ir=Lt)),Ct(sr,ct),sr.returnBegin?0:Lt.length}function $r(ct){const Lt=ct[0],sr=lt.substring(ct.index),yr=dr(ot,ct,sr);if(!yr)return rn;const Xr=ot;ot.endScope&&ot.endScope._wrap?(ne(),we(Lt,ot.endScope._wrap)):ot.endScope&&ot.endScope._multi?(ne(),We(ot.endScope,ct)):Xr.skip?Ir+=Lt:(Xr.returnEnd||Xr.excludeEnd||(Ir+=Lt),ne(),Xr.excludeEnd&&(Ir=Lt));do ot.scope&&jn.closeNode(),!ot.skip&&!ot.subLanguage&&(Rs+=ot.relevance),ot=ot.parent;while(ot!==yr.parent);return yr.starts&&Ct(yr.starts,ct),Xr.returnEnd?0:Lt.length}function rs(){const ct=[];for(let Lt=ot;Lt!==qr;Lt=Lt.parent)Lt.scope&&ct.unshift(Lt.scope);ct.forEach(Lt=>jn.openNode(Lt))}let br={};function Rr(ct,Lt){const sr=Lt&&Lt[0];if(Ir+=ct,sr==null)return ne(),0;if(br.type==="begin"&&Lt.type==="end"&&br.index===Lt.index&&sr===""){if(Ir+=lt.slice(Lt.index,Lt.index+1),!xr){const yr=new Error(`0 width match regex (${Ge})`);throw yr.languageName=Ge,yr.badRule=br.rule,yr}return 1}if(br=Lt,Lt.type==="begin")return An(Lt);if(Lt.type==="illegal"&&!rr){const yr=new Error('Illegal lexeme "'+sr+'" for mode "'+(ot.scope||"<unnamed>")+'"');throw yr.mode=ot,yr}else if(Lt.type==="end"){const yr=$r(Lt);if(yr!==rn)return yr}if(Lt.type==="illegal"&&sr==="")return Ir+=`
`,1;if(da>1e5&&da>Lt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ir+=sr,sr.length}const qr=He(Ge);if(!qr)throw Kt(wr.replace("{}",Ge)),new Error('Unknown language: "'+Ge+'"');const ca=dt(qr);let ua="",ot=vr||ca;const ri={},jn=new pt.__emitter(pt);rs();let Ir="",Rs=0,Is=0,da=0,ba=!1;try{if(qr.__emitTokens)qr.__emitTokens(lt,jn);else{for(ot.matcher.considerAll();;){da++,ba?ba=!1:ot.matcher.considerAll(),ot.matcher.lastIndex=Is;const ct=ot.matcher.exec(lt);if(!ct)break;const Lt=lt.substring(Is,ct.index),sr=Rr(Lt,ct);Is=ct.index+sr}Rr(lt.substring(Is))}return jn.finalize(),ua=jn.toHTML(),{language:Ge,value:ua,relevance:Rs,illegal:!1,_emitter:jn,_top:ot}}catch(ct){if(ct.message&&ct.message.includes("Illegal"))return{language:Ge,value:zr(lt),illegal:!0,relevance:0,_illegalBy:{message:ct.message,index:Is,context:lt.slice(Is-100,Is+100),mode:ct.mode,resultSoFar:ua},_emitter:jn};if(xr)return{language:Ge,value:zr(lt),illegal:!1,relevance:0,errorRaised:ct,_emitter:jn,_top:ot};throw ct}}function Na(Ge){const lt={value:zr(Ge),illegal:!1,relevance:0,_top:xt,_emitter:new pt.__emitter(pt)};return lt._emitter.addText(Ge),lt}function Ft(Ge,lt){lt=lt||pt.languages||Object.keys(Oe);const rr=Na(Ge),vr=lt.filter(He).filter(Er).map(ne=>En(ne,Ge,!1));vr.unshift(rr);const sn=vr.sort((ne,we)=>{if(ne.relevance!==we.relevance)return we.relevance-ne.relevance;if(ne.language&&we.language){if(He(ne.language).supersetOf===we.language)return 1;if(He(we.language).supersetOf===ne.language)return-1}return 0}),[Dn,Vn]=sn,Hr=Dn;return Hr.secondBest=Vn,Hr}function Fn(Ge,lt,rr){const vr=lt&&Ye[lt]||rr;Ge.classList.add("hljs"),Ge.classList.add(`language-${vr}`)}function Fr(Ge){let lt=null;const rr=Kr(Ge);if(_t(rr))return;if(In("before:highlightElement",{el:Ge,language:rr}),Ge.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ge);return}if(Ge.children.length>0&&(pt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ge)),pt.throwUnescapedHTML))throw new Rn("One of your code blocks includes unescaped HTML.",Ge.innerHTML);lt=Ge;const vr=lt.textContent,sn=rr?pr(vr,{language:rr,ignoreIllegals:!0}):Ft(vr);Ge.innerHTML=sn.value,Ge.dataset.highlighted="yes",Fn(Ge,rr,sn.language),Ge.result={language:sn.language,re:sn.relevance,relevance:sn.relevance},sn.secondBest&&(Ge.secondBest={language:sn.secondBest.language,relevance:sn.secondBest.relevance}),In("after:highlightElement",{el:Ge,result:sn,text:vr})}function Sr(Ge){pt=Bt(pt,Ge)}const $n=()=>{Ha(),X("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Aa(){Ha(),X("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let ts=!1;function Ha(){function Ge(){Ha()}if(document.readyState==="loading"){ts||window.addEventListener("DOMContentLoaded",Ge,!1),ts=!0;return}document.querySelectorAll(pt.cssSelector).forEach(Fr)}function qa(Ge,lt){let rr=null;try{rr=lt(ie)}catch(vr){if(Kt("Language definition for '{}' could not be registered.".replace("{}",Ge)),xr)Kt(vr);else throw vr;rr=xt}rr.name||(rr.name=Ge),Oe[Ge]=rr,rr.rawDefinition=lt.bind(null,ie),rr.aliases&&mt(rr.aliases,{languageName:Ge})}function wt(Ge){delete Oe[Ge];for(const lt of Object.keys(Ye))Ye[lt]===Ge&&delete Ye[lt]}function ce(){return Object.keys(Oe)}function He(Ge){return Ge=(Ge||"").toLowerCase(),Oe[Ge]||Oe[Ye[Ge]]}function mt(Ge,{languageName:lt}){typeof Ge=="string"&&(Ge=[Ge]),Ge.forEach(rr=>{Ye[rr.toLowerCase()]=lt})}function Er(Ge){const lt=He(Ge);return lt&&!lt.disableAutodetect}function nn(Ge){Ge["before:highlightBlock"]&&!Ge["before:highlightElement"]&&(Ge["before:highlightElement"]=lt=>{Ge["before:highlightBlock"](Object.assign({block:lt.el},lt))}),Ge["after:highlightBlock"]&&!Ge["after:highlightElement"]&&(Ge["after:highlightElement"]=lt=>{Ge["after:highlightBlock"](Object.assign({block:lt.el},lt))})}function er(Ge){nn(Ge),Pt.push(Ge)}function an(Ge){const lt=Pt.indexOf(Ge);lt!==-1&&Pt.splice(lt,1)}function In(Ge,lt){const rr=Ge;Pt.forEach(function(vr){vr[rr]&&vr[rr](lt)})}function Un(Ge){return X("10.7.0","highlightBlock will be removed entirely in v12.0"),X("10.7.0","Please use highlightElement now."),Fr(Ge)}Object.assign(ie,{highlight:pr,highlightAuto:Ft,highlightAll:Ha,highlightElement:Fr,highlightBlock:Un,configure:Sr,initHighlighting:$n,initHighlightingOnLoad:Aa,registerLanguage:qa,unregisterLanguage:wt,listLanguages:ce,getLanguage:He,registerAliases:mt,autoDetection:Er,inherit:Bt,addPlugin:er,removePlugin:an}),ie.debugMode=function(){xr=!1},ie.safeMode=function(){xr=!0},ie.versionString=Jt,ie.regex={concat:k,lookahead:x,either:_,optional:y,anyNumberOfTimes:b};for(const Ge in ge)typeof ge[Ge]=="object"&&e(ge[Ge]);return Object.assign(ie,ge),ie},Sn=xa({});return Sn.newInstance=()=>xa({}),Ay=Sn,Sn.HighlightJS=Sn,Sn.default=Sn,Ay}var DX=IX();const PX=ed(DX),lC={},BX="hljs-";function FX(e){const t=PX.newInstance();return e&&i(e),{highlight:r,highlightAuto:n,listLanguages:s,register:i,registerAlias:l,registered:c};function r(d,h,g){const f=g||lC,x=typeof f.prefix=="string"?f.prefix:BX;if(!t.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");t.configure({__emitter:$X,classPrefix:x});const b=t.highlight(h,{ignoreIllegals:!0,language:d});if(b.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:b.errorRaised});const y=b._emitter.root,k=y.data;return k.language=b.language,k.relevance=b.relevance,y}function n(d,h){const f=(h||lC).subset||s();let x=-1,b=0,y;for(;++x<f.length;){const k=f[x];if(!t.getLanguage(k))continue;const S=r(k,d,h);S.data&&S.data.relevance!==void 0&&S.data.relevance>b&&(b=S.data.relevance,y=S)}return y||{type:"root",children:[],data:{language:void 0,relevance:b}}}function s(){return t.listLanguages()}function i(d,h){if(typeof d=="string")t.registerLanguage(d,h);else{let g;for(g in d)Object.hasOwn(d,g)&&t.registerLanguage(g,d[g])}}function l(d,h){if(typeof d=="string")t.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let g;for(g in d)if(Object.hasOwn(d,g)){const f=d[g];t.registerAliases(typeof f=="string"?f:[...f],{languageName:g})}}}function c(d){return!!t.getLanguage(d)}}class $X{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const r=this.stack[this.stack.length-1],n=r.children[r.children.length-1];n&&n.type==="text"?n.value+=t:r.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,r){const n=this.stack[this.stack.length-1],s=t.root.children;r?n.children.push({type:"element",tagName:"span",properties:{className:[r]},children:s}):n.children.push(...s)}openNode(t){const r=this,n=t.split(".").map(function(l,c){return c?l+"_".repeat(c):r.options.classPrefix+l}),s=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:n},children:[]};s.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const UX={};function zX(e){const t=e||UX,r=t.aliases,n=t.detect||!1,s=t.languages||RX,i=t.plainText,l=t.prefix,c=t.subset;let d="hljs";const h=FX(s);if(r&&h.registerAlias(r),l){const g=l.indexOf("-");d=g===-1?l:l.slice(0,g)}return function(g,f){Dg(g,"element",function(x,b,y){if(x.tagName!=="code"||!y||y.type!=="element"||y.tagName!=="pre")return;const k=HX(x);if(k===!1||!k&&!n||k&&i&&i.includes(k))return;Array.isArray(x.properties.className)||(x.properties.className=[]),x.properties.className.includes(d)||x.properties.className.unshift(d);const S=oK(x,{whitespace:"pre"});let _;try{_=k?h.highlight(k,S,{prefix:l}):h.highlightAuto(S,{prefix:l,subset:c})}catch(T){const N=T;if(k&&/Unknown language/.test(N.message)){f.message("Cannot highlight as `"+k+"`, its not registered",{ancestors:[y,x],cause:N,place:x.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw N}!k&&_.data&&_.data.language&&x.properties.className.push("language-"+_.data.language),_.children.length>0&&(x.children=_.children)})}}function HX(e){const t=e.properties.className;let r=-1;if(!Array.isArray(t))return;let n;for(;++r<t.length;){const s=String(t[r]);if(s==="no-highlight"||s==="nohighlight")return!1;!n&&s.slice(0,5)==="lang-"&&(n=s.slice(5)),!n&&s.slice(0,9)==="language-"&&(n=s.slice(9))}return n}var cC={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},Uf={exports:{}},qX=Uf.exports,uC;function GX(){return uC||(uC=1,(function(e,t){(function(r,n){e.exports=n()})(qX,(function(){var r=1e3,n=6e4,s=36e5,i="millisecond",l="second",c="minute",d="hour",h="day",g="week",f="month",x="quarter",b="year",y="date",k="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var U=["th","st","nd","rd"],O=j%100;return"["+j+(U[(O-20)%10]||U[O]||U[0])+"]"}},N=function(j,U,O){var q=String(j);return!q||q.length>=U?j:""+Array(U+1-q.length).join(O)+j},I={s:N,z:function(j){var U=-j.utcOffset(),O=Math.abs(U),q=Math.floor(O/60),V=O%60;return(U<=0?"+":"-")+N(q,2,"0")+":"+N(V,2,"0")},m:function j(U,O){if(U.date()<O.date())return-j(O,U);var q=12*(O.year()-U.year())+(O.month()-U.month()),V=U.clone().add(q,f),ue=O-V<0,H=U.clone().add(q+(ue?-1:1),f);return+(-(q+(O-V)/(ue?V-H:H-V))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:f,y:b,w:g,d:h,D:y,h:d,m:c,s:l,ms:i,Q:x}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},R="en",B={};B[R]=T;var F="$isDayjsObject",ae=function(j){return j instanceof ee||!(!j||!j[F])},G=function j(U,O,q){var V;if(!U)return R;if(typeof U=="string"){var ue=U.toLowerCase();B[ue]&&(V=ue),O&&(B[ue]=O,V=ue);var H=U.split("-");if(!V&&H.length>1)return j(H[0])}else{var D=U.name;B[D]=U,V=D}return!q&&V&&(R=V),V||!q&&R},$=function(j,U){if(ae(j))return j.clone();var O=typeof U=="object"?U:{};return O.date=j,O.args=arguments,new ee(O)},J=I;J.l=G,J.i=ae,J.w=function(j,U){return $(j,{locale:U.$L,utc:U.$u,x:U.$x,$offset:U.$offset})};var ee=(function(){function j(O){this.$L=G(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[F]=!0}var U=j.prototype;return U.parse=function(O){this.$d=(function(q){var V=q.date,ue=q.utc;if(V===null)return new Date(NaN);if(J.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var H=V.match(S);if(H){var D=H[2]-1||0,z=(H[7]||"0").substring(0,3);return ue?new Date(Date.UTC(H[1],D,H[3]||1,H[4]||0,H[5]||0,H[6]||0,z)):new Date(H[1],D,H[3]||1,H[4]||0,H[5]||0,H[6]||0,z)}}return new Date(V)})(O),this.init()},U.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},U.$utils=function(){return J},U.isValid=function(){return this.$d.toString()!==k},U.isSame=function(O,q){var V=$(O);return this.startOf(q)<=V&&V<=this.endOf(q)},U.isAfter=function(O,q){return $(O)<this.startOf(q)},U.isBefore=function(O,q){return this.endOf(q)<$(O)},U.$g=function(O,q,V){return J.u(O)?this[q]:this.set(V,O)},U.unix=function(){return Math.floor(this.valueOf()/1e3)},U.valueOf=function(){return this.$d.getTime()},U.startOf=function(O,q){var V=this,ue=!!J.u(q)||q,H=J.p(O),D=function(Pe,ge){var Be=J.w(V.$u?Date.UTC(V.$y,ge,Pe):new Date(V.$y,ge,Pe),V);return ue?Be:Be.endOf(h)},z=function(Pe,ge){return J.w(V.toDate()[Pe].apply(V.toDate("s"),(ue?[0,0,0,0]:[23,59,59,999]).slice(ge)),V)},M=this.$W,le=this.$M,me=this.$D,Ee="set"+(this.$u?"UTC":"");switch(H){case b:return ue?D(1,0):D(31,11);case f:return ue?D(1,le):D(0,le+1);case g:var Ae=this.$locale().weekStart||0,ve=(M<Ae?M+7:M)-Ae;return D(ue?me-ve:me+(6-ve),le);case h:case y:return z(Ee+"Hours",0);case d:return z(Ee+"Minutes",1);case c:return z(Ee+"Seconds",2);case l:return z(Ee+"Milliseconds",3);default:return this.clone()}},U.endOf=function(O){return this.startOf(O,!1)},U.$set=function(O,q){var V,ue=J.p(O),H="set"+(this.$u?"UTC":""),D=(V={},V[h]=H+"Date",V[y]=H+"Date",V[f]=H+"Month",V[b]=H+"FullYear",V[d]=H+"Hours",V[c]=H+"Minutes",V[l]=H+"Seconds",V[i]=H+"Milliseconds",V)[ue],z=ue===h?this.$D+(q-this.$W):q;if(ue===f||ue===b){var M=this.clone().set(y,1);M.$d[D](z),M.init(),this.$d=M.set(y,Math.min(this.$D,M.daysInMonth())).$d}else D&&this.$d[D](z);return this.init(),this},U.set=function(O,q){return this.clone().$set(O,q)},U.get=function(O){return this[J.p(O)]()},U.add=function(O,q){var V,ue=this;O=Number(O);var H=J.p(q),D=function(le){var me=$(ue);return J.w(me.date(me.date()+Math.round(le*O)),ue)};if(H===f)return this.set(f,this.$M+O);if(H===b)return this.set(b,this.$y+O);if(H===h)return D(1);if(H===g)return D(7);var z=(V={},V[c]=n,V[d]=s,V[l]=r,V)[H]||1,M=this.$d.getTime()+O*z;return J.w(M,this)},U.subtract=function(O,q){return this.add(-1*O,q)},U.format=function(O){var q=this,V=this.$locale();if(!this.isValid())return V.invalidDate||k;var ue=O||"YYYY-MM-DDTHH:mm:ssZ",H=J.z(this),D=this.$H,z=this.$m,M=this.$M,le=V.weekdays,me=V.months,Ee=V.meridiem,Ae=function(ge,Be,ht,ye){return ge&&(ge[Be]||ge(q,ue))||ht[Be].slice(0,ye)},ve=function(ge){return J.s(D%12||12,ge,"0")},Pe=Ee||function(ge,Be,ht){var ye=ge<12?"AM":"PM";return ht?ye.toLowerCase():ye};return ue.replace(_,(function(ge,Be){return Be||(function(ht){switch(ht){case"YY":return String(q.$y).slice(-2);case"YYYY":return J.s(q.$y,4,"0");case"M":return M+1;case"MM":return J.s(M+1,2,"0");case"MMM":return Ae(V.monthsShort,M,me,3);case"MMMM":return Ae(me,M);case"D":return q.$D;case"DD":return J.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return Ae(V.weekdaysMin,q.$W,le,2);case"ddd":return Ae(V.weekdaysShort,q.$W,le,3);case"dddd":return le[q.$W];case"H":return String(D);case"HH":return J.s(D,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return Pe(D,z,!0);case"A":return Pe(D,z,!1);case"m":return String(z);case"mm":return J.s(z,2,"0");case"s":return String(q.$s);case"ss":return J.s(q.$s,2,"0");case"SSS":return J.s(q.$ms,3,"0");case"Z":return H}return null})(ge)||H.replace(":","")}))},U.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},U.diff=function(O,q,V){var ue,H=this,D=J.p(q),z=$(O),M=(z.utcOffset()-this.utcOffset())*n,le=this-z,me=function(){return J.m(H,z)};switch(D){case b:ue=me()/12;break;case f:ue=me();break;case x:ue=me()/3;break;case g:ue=(le-M)/6048e5;break;case h:ue=(le-M)/864e5;break;case d:ue=le/s;break;case c:ue=le/n;break;case l:ue=le/r;break;default:ue=le}return V?ue:J.a(ue)},U.daysInMonth=function(){return this.endOf(f).$D},U.$locale=function(){return B[this.$L]},U.locale=function(O,q){if(!O)return this.$L;var V=this.clone(),ue=G(O,q,!0);return ue&&(V.$L=ue),V},U.clone=function(){return J.w(this.$d,this)},U.toDate=function(){return new Date(this.valueOf())},U.toJSON=function(){return this.isValid()?this.toISOString():null},U.toISOString=function(){return this.$d.toISOString()},U.toString=function(){return this.$d.toUTCString()},j})(),W=ee.prototype;return $.prototype=W,[["$ms",i],["$s",l],["$m",c],["$H",d],["$W",h],["$M",f],["$y",b],["$D",y]].forEach((function(j){W[j[1]]=function(U){return this.$g(U,j[0],j[1])}})),$.extend=function(j,U){return j.$i||(j(U,ee,$),j.$i=!0),$},$.locale=G,$.isDayjs=ae,$.unix=function(j){return $(1e3*j)},$.en=B[R],$.Ls=B,$.p={},$}))})(Uf)),Uf.exports}var YX=GX();const WX=ed(YX);var j4=Object.defineProperty,A=(e,t)=>j4(e,"name",{value:t,configurable:!0}),VX=(e,t)=>{for(var r in t)j4(e,r,{get:t[r],enumerable:!0})},ho={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},qe={trace:A((...e)=>{},"trace"),debug:A((...e)=>{},"debug"),info:A((...e)=>{},"info"),warn:A((...e)=>{},"warn"),error:A((...e)=>{},"error"),fatal:A((...e)=>{},"fatal")},w2=A(function(e="fatal"){let t=ho.fatal;typeof e=="string"?e.toLowerCase()in ho&&(t=ho[e]):typeof e=="number"&&(t=e),qe.trace=()=>{},qe.debug=()=>{},qe.info=()=>{},qe.warn=()=>{},qe.error=()=>{},qe.fatal=()=>{},t<=ho.fatal&&(qe.fatal=console.error?console.error.bind(console,Ws("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Ws("FATAL"))),t<=ho.error&&(qe.error=console.error?console.error.bind(console,Ws("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Ws("ERROR"))),t<=ho.warn&&(qe.warn=console.warn?console.warn.bind(console,Ws("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Ws("WARN"))),t<=ho.info&&(qe.info=console.info?console.info.bind(console,Ws("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Ws("INFO"))),t<=ho.debug&&(qe.debug=console.debug?console.debug.bind(console,Ws("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ws("DEBUG"))),t<=ho.trace&&(qe.trace=console.debug?console.debug.bind(console,Ws("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ws("TRACE")))},"setLogLevel"),Ws=A(e=>`%c${WX().format("ss.SSS")} : ${e} : `,"format");const zf={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const s=r<.5?r*(1+t):r+t-r*t,i=2*r-s;switch(n){case"r":return zf.hue2rgb(i,s,e+1/3)*255;case"g":return zf.hue2rgb(i,s,e)*255;case"b":return zf.hue2rgb(i,s,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const s=Math.max(e,t,r),i=Math.min(e,t,r),l=(s+i)/2;if(n==="l")return l*100;if(s===i)return 0;const c=s-i,d=l>.5?c/(2-s-i):c/(s+i);if(n==="s")return d*100;switch(s){case e:return((t-r)/c+(t<r?6:0))*60;case t:return((r-e)/c+2)*60;case r:return((e-t)/c+4)*60;default:return-1}}},KX={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},XX={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},nr={channel:zf,lang:KX,unit:XX},nl={};for(let e=0;e<=255;e++)nl[e]=nr.unit.dec2hex(e);const Oa={ALL:0,RGB:1,HSL:2};class QX{constructor(){this.type=Oa.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Oa.ALL}is(t){return this.type===t}}class JX{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new QX}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Oa.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:s}=t;r===void 0&&(t.h=nr.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=nr.channel.rgb2hsl(t,"s")),s===void 0&&(t.l=nr.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:s}=t;r===void 0&&(t.r=nr.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=nr.channel.hsl2rgb(t,"g")),s===void 0&&(t.b=nr.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Oa.HSL)&&r!==void 0?r:(this._ensureHSL(),nr.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Oa.HSL)&&r!==void 0?r:(this._ensureHSL(),nr.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Oa.HSL)&&r!==void 0?r:(this._ensureHSL(),nr.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Oa.RGB)&&r!==void 0?r:(this._ensureRGB(),nr.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Oa.RGB)&&r!==void 0?r:(this._ensureRGB(),nr.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Oa.RGB)&&r!==void 0?r:(this._ensureRGB(),nr.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Oa.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Oa.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Oa.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Oa.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Oa.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Oa.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const fm=new JX({r:0,g:0,b:0,a:0},"transparent"),ju={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(ju.re);if(!t)return;const r=t[1],n=parseInt(r,16),s=r.length,i=s%4===0,l=s>4,c=l?1:17,d=l?8:4,h=i?0:-1,g=l?255:15;return fm.set({r:(n>>d*(h+3)&g)*c,g:(n>>d*(h+2)&g)*c,b:(n>>d*(h+1)&g)*c,a:i?(n&g)*c/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a:s}=e;return s<1?`#${nl[Math.round(t)]}${nl[Math.round(r)]}${nl[Math.round(n)]}${nl[Math.round(s*255)]}`:`#${nl[Math.round(t)]}${nl[Math.round(r)]}${nl[Math.round(n)]}`}},Jl={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Jl.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return nr.channel.clamp.h(parseFloat(r)*.9);case"rad":return nr.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return nr.channel.clamp.h(parseFloat(r)*360)}}return nr.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(Jl.re);if(!r)return;const[,n,s,i,l,c]=r;return fm.set({h:Jl._hue2deg(n),s:nr.channel.clamp.s(parseFloat(s)),l:nr.channel.clamp.l(parseFloat(i)),a:l?nr.channel.clamp.a(c?parseFloat(l)/100:parseFloat(l)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a:s}=e;return s<1?`hsla(${nr.lang.round(t)}, ${nr.lang.round(r)}%, ${nr.lang.round(n)}%, ${s})`:`hsl(${nr.lang.round(t)}, ${nr.lang.round(r)}%, ${nr.lang.round(n)}%)`}},eg={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=eg.colors[e];if(t)return ju.parse(t)},stringify:e=>{const t=ju.stringify(e);for(const r in eg.colors)if(eg.colors[r]===t)return r}},Oh={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Oh.re);if(!r)return;const[,n,s,i,l,c,d,h,g]=r;return fm.set({r:nr.channel.clamp.r(s?parseFloat(n)*2.55:parseFloat(n)),g:nr.channel.clamp.g(l?parseFloat(i)*2.55:parseFloat(i)),b:nr.channel.clamp.b(d?parseFloat(c)*2.55:parseFloat(c)),a:h?nr.channel.clamp.a(g?parseFloat(h)/100:parseFloat(h)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a:s}=e;return s<1?`rgba(${nr.lang.round(t)}, ${nr.lang.round(r)}, ${nr.lang.round(n)}, ${nr.lang.round(s)})`:`rgb(${nr.lang.round(t)}, ${nr.lang.round(r)}, ${nr.lang.round(n)})`}},Pi={format:{keyword:eg,hex:ju,rgb:Oh,rgba:Oh,hsl:Jl,hsla:Jl},parse:e=>{if(typeof e!="string")return e;const t=ju.parse(e)||Oh.parse(e)||Jl.parse(e)||eg.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Oa.HSL)||e.data.r===void 0?Jl.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Oh.stringify(e):ju.stringify(e)},L4=(e,t)=>{const r=Pi.parse(e);for(const n in t)r[n]=nr.channel.clamp[n](t[n]);return Pi.stringify(r)},tg=(e,t,r=0,n=1)=>{if(typeof e!="number")return L4(e,{a:t});const s=fm.set({r:nr.channel.clamp.r(e),g:nr.channel.clamp.g(t),b:nr.channel.clamp.b(r),a:nr.channel.clamp.a(n)});return Pi.stringify(s)},ZX=e=>{const{r:t,g:r,b:n}=Pi.parse(e),s=.2126*nr.channel.toLinear(t)+.7152*nr.channel.toLinear(r)+.0722*nr.channel.toLinear(n);return nr.lang.round(s)},eQ=e=>ZX(e)>=.5,zg=e=>!eQ(e),M4=(e,t,r)=>{const n=Pi.parse(e),s=n[t],i=nr.channel.clamp[t](s+r);return s!==i&&(n[t]=i),Pi.stringify(n)},Nt=(e,t)=>M4(e,"l",t),qt=(e,t)=>M4(e,"l",-t),be=(e,t)=>{const r=Pi.parse(e),n={};for(const s in t)t[s]&&(n[s]=r[s]+t[s]);return L4(e,n)},tQ=(e,t,r=50)=>{const{r:n,g:s,b:i,a:l}=Pi.parse(e),{r:c,g:d,b:h,a:g}=Pi.parse(t),f=r/100,x=f*2-1,b=l-g,k=((x*b===-1?x:(x+b)/(1+x*b))+1)/2,S=1-k,_=n*k+c*S,T=s*k+d*S,N=i*k+h*S,I=l*f+g*(1-f);return tg(_,T,N,I)},ft=(e,t=100)=>{const r=Pi.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,tQ(r,e,t)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:O4,setPrototypeOf:dC,isFrozen:rQ,getPrototypeOf:nQ,getOwnPropertyDescriptor:aQ}=Object;let{freeze:Za,seal:Js,create:z1}=Object,{apply:H1,construct:q1}=typeof Reflect<"u"&&Reflect;Za||(Za=function(t){return t});Js||(Js=function(t){return t});H1||(H1=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return t.apply(r,s)});q1||(q1=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new t(...n)});const wf=es(Array.prototype.forEach),sQ=es(Array.prototype.lastIndexOf),hC=es(Array.prototype.pop),bh=es(Array.prototype.push),iQ=es(Array.prototype.splice),Hf=es(String.prototype.toLowerCase),jy=es(String.prototype.toString),Ly=es(String.prototype.match),yh=es(String.prototype.replace),oQ=es(String.prototype.indexOf),lQ=es(String.prototype.trim),ci=es(Object.prototype.hasOwnProperty),Ya=es(RegExp.prototype.test),vh=cQ(TypeError);function es(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return H1(e,t,n)}}function cQ(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return q1(e,r)}}function Cr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hf;dC&&dC(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(rQ(t)||(t[n]=i),s=i)}e[s]=!0}return e}function uQ(e){for(let t=0;t<e.length;t++)ci(e,t)||(e[t]=null);return e}function po(e){const t=z1(null);for(const[r,n]of O4(e))ci(e,r)&&(Array.isArray(n)?t[r]=uQ(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=po(n):t[r]=n);return t}function kh(e,t){for(;e!==null;){const n=aQ(e,t);if(n){if(n.get)return es(n.get);if(typeof n.value=="function")return es(n.value)}e=nQ(e)}function r(){return null}return r}const gC=Za(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),My=Za(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Oy=Za(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dQ=Za(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ry=Za(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hQ=Za(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pC=Za(["#text"]),fC=Za(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Iy=Za(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mC=Za(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Sf=Za(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gQ=Js(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pQ=Js(/<%[\w\W]*|[\w\W]*%>/gm),fQ=Js(/\$\{[\w\W]*/gm),mQ=Js(/^data-[\-\w.\u00B7-\uFFFF]+$/),xQ=Js(/^aria-[\-\w]+$/),R4=Js(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bQ=Js(/^(?:\w+script|data):/i),yQ=Js(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I4=Js(/^html$/i),vQ=Js(/^[a-z][.\w]*(-[.\w]+)+$/i);var xC=Object.freeze({__proto__:null,ARIA_ATTR:xQ,ATTR_WHITESPACE:yQ,CUSTOM_ELEMENT:vQ,DATA_ATTR:mQ,DOCTYPE_NAME:I4,ERB_EXPR:pQ,IS_ALLOWED_URI:R4,IS_SCRIPT_OR_DATA:bQ,MUSTACHE_EXPR:gQ,TMPLIT_EXPR:fQ});const wh={element:1,text:3,progressingInstruction:7,comment:8,document:9},kQ=function(){return typeof window>"u"?null:window},wQ=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},bC=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function D4(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kQ();const t=wt=>D4(wt);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==wh.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:c,Element:d,NodeFilter:h,NamedNodeMap:g=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:x,trustedTypes:b}=e,y=d.prototype,k=kh(y,"cloneNode"),S=kh(y,"remove"),_=kh(y,"nextSibling"),T=kh(y,"childNodes"),N=kh(y,"parentNode");if(typeof l=="function"){const wt=r.createElement("template");wt.content&&wt.content.ownerDocument&&(r=wt.content.ownerDocument)}let I,R="";const{implementation:B,createNodeIterator:F,createDocumentFragment:ae,getElementsByTagName:G}=r,{importNode:$}=n;let J=bC();t.isSupported=typeof O4=="function"&&typeof N=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ee,ERB_EXPR:W,TMPLIT_EXPR:j,DATA_ATTR:U,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:V,CUSTOM_ELEMENT:ue}=xC;let{IS_ALLOWED_URI:H}=xC,D=null;const z=Cr({},[...gC,...My,...Oy,...Ry,...pC]);let M=null;const le=Cr({},[...fC,...Iy,...mC,...Sf]);let me=Object.seal(z1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,Ae=null;const ve=Object.seal(z1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Pe=!0,ge=!0,Be=!1,ht=!0,ye=!1,ut=!0,Et=!1,Ze=!1,kt=!1,Rt=!1,ur=!1,yt=!1,bt=!0,tn=!1;const ar="user-content-";let Kt=!0,On=!1,X={},he=null;const Re=Cr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let gt=null;const Qe=Cr({},["audio","video","img","source","image","track"]);let zt=null;const Gt=Cr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dt="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",Zt="http://www.w3.org/1999/xhtml";let Jt=Zt,Rn=!1,zr=null;const Bt=Cr({},[dt,jt,Zt],jy);let rn=Cr({},["mi","mo","mn","ms","mtext"]),ma=Cr({},["annotation-xml"]);const xa=Cr({},["title","style","font","a","script"]);let Sn=null;const ie=["application/xhtml+xml","text/html"],Oe="text/html";let Ye=null,Pt=null;const xr=r.createElement("form"),wr=function(ce){return ce instanceof RegExp||ce instanceof Function},xt=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pt&&Pt===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=po(ce),Sn=ie.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Oe:ce.PARSER_MEDIA_TYPE,Ye=Sn==="application/xhtml+xml"?jy:Hf,D=ci(ce,"ALLOWED_TAGS")?Cr({},ce.ALLOWED_TAGS,Ye):z,M=ci(ce,"ALLOWED_ATTR")?Cr({},ce.ALLOWED_ATTR,Ye):le,zr=ci(ce,"ALLOWED_NAMESPACES")?Cr({},ce.ALLOWED_NAMESPACES,jy):Bt,zt=ci(ce,"ADD_URI_SAFE_ATTR")?Cr(po(Gt),ce.ADD_URI_SAFE_ATTR,Ye):Gt,gt=ci(ce,"ADD_DATA_URI_TAGS")?Cr(po(Qe),ce.ADD_DATA_URI_TAGS,Ye):Qe,he=ci(ce,"FORBID_CONTENTS")?Cr({},ce.FORBID_CONTENTS,Ye):Re,Ee=ci(ce,"FORBID_TAGS")?Cr({},ce.FORBID_TAGS,Ye):po({}),Ae=ci(ce,"FORBID_ATTR")?Cr({},ce.FORBID_ATTR,Ye):po({}),X=ci(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,Pe=ce.ALLOW_ARIA_ATTR!==!1,ge=ce.ALLOW_DATA_ATTR!==!1,Be=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,ht=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ye=ce.SAFE_FOR_TEMPLATES||!1,ut=ce.SAFE_FOR_XML!==!1,Et=ce.WHOLE_DOCUMENT||!1,Rt=ce.RETURN_DOM||!1,ur=ce.RETURN_DOM_FRAGMENT||!1,yt=ce.RETURN_TRUSTED_TYPE||!1,kt=ce.FORCE_BODY||!1,bt=ce.SANITIZE_DOM!==!1,tn=ce.SANITIZE_NAMED_PROPS||!1,Kt=ce.KEEP_CONTENT!==!1,On=ce.IN_PLACE||!1,H=ce.ALLOWED_URI_REGEXP||R4,Jt=ce.NAMESPACE||Zt,rn=ce.MATHML_TEXT_INTEGRATION_POINTS||rn,ma=ce.HTML_INTEGRATION_POINTS||ma,me=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&wr(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(me.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&wr(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(me.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(me.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ye&&(ge=!1),ur&&(Rt=!0),X&&(D=Cr({},pC),M=[],X.html===!0&&(Cr(D,gC),Cr(M,fC)),X.svg===!0&&(Cr(D,My),Cr(M,Iy),Cr(M,Sf)),X.svgFilters===!0&&(Cr(D,Oy),Cr(M,Iy),Cr(M,Sf)),X.mathMl===!0&&(Cr(D,Ry),Cr(M,mC),Cr(M,Sf))),ce.ADD_TAGS&&(typeof ce.ADD_TAGS=="function"?ve.tagCheck=ce.ADD_TAGS:(D===z&&(D=po(D)),Cr(D,ce.ADD_TAGS,Ye))),ce.ADD_ATTR&&(typeof ce.ADD_ATTR=="function"?ve.attributeCheck=ce.ADD_ATTR:(M===le&&(M=po(M)),Cr(M,ce.ADD_ATTR,Ye))),ce.ADD_URI_SAFE_ATTR&&Cr(zt,ce.ADD_URI_SAFE_ATTR,Ye),ce.FORBID_CONTENTS&&(he===Re&&(he=po(he)),Cr(he,ce.FORBID_CONTENTS,Ye)),Kt&&(D["#text"]=!0),Et&&Cr(D,["html","head","body"]),D.table&&(Cr(D,["tbody"]),delete Ee.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw vh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=ce.TRUSTED_TYPES_POLICY,R=I.createHTML("")}else I===void 0&&(I=wQ(b,s)),I!==null&&typeof R=="string"&&(R=I.createHTML(""));Za&&Za(ce),Pt=ce}},pt=Cr({},[...My,...Oy,...dQ]),_t=Cr({},[...Ry,...hQ]),Kr=function(ce){let He=N(ce);(!He||!He.tagName)&&(He={namespaceURI:Jt,tagName:"template"});const mt=Hf(ce.tagName),Er=Hf(He.tagName);return zr[ce.namespaceURI]?ce.namespaceURI===jt?He.namespaceURI===Zt?mt==="svg":He.namespaceURI===dt?mt==="svg"&&(Er==="annotation-xml"||rn[Er]):!!pt[mt]:ce.namespaceURI===dt?He.namespaceURI===Zt?mt==="math":He.namespaceURI===jt?mt==="math"&&ma[Er]:!!_t[mt]:ce.namespaceURI===Zt?He.namespaceURI===jt&&!ma[Er]||He.namespaceURI===dt&&!rn[Er]?!1:!_t[mt]&&(xa[mt]||!pt[mt]):!!(Sn==="application/xhtml+xml"&&zr[ce.namespaceURI]):!1},pr=function(ce){bh(t.removed,{element:ce});try{N(ce).removeChild(ce)}catch{S(ce)}},En=function(ce,He){try{bh(t.removed,{attribute:He.getAttributeNode(ce),from:He})}catch{bh(t.removed,{attribute:null,from:He})}if(He.removeAttribute(ce),ce==="is")if(Rt||ur)try{pr(He)}catch{}else try{He.setAttribute(ce,"")}catch{}},Na=function(ce){let He=null,mt=null;if(kt)ce="<remove></remove>"+ce;else{const er=Ly(ce,/^[\r\n\t ]+/);mt=er&&er[0]}Sn==="application/xhtml+xml"&&Jt===Zt&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const Er=I?I.createHTML(ce):ce;if(Jt===Zt)try{He=new x().parseFromString(Er,Sn)}catch{}if(!He||!He.documentElement){He=B.createDocument(Jt,"template",null);try{He.documentElement.innerHTML=Rn?R:Er}catch{}}const nn=He.body||He.documentElement;return ce&&mt&&nn.insertBefore(r.createTextNode(mt),nn.childNodes[0]||null),Jt===Zt?G.call(He,Et?"html":"body")[0]:Et?He.documentElement:nn},Ft=function(ce){return F.call(ce.ownerDocument||ce,ce,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Fn=function(ce){return ce instanceof f&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof g)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},Fr=function(ce){return typeof c=="function"&&ce instanceof c};function Sr(wt,ce,He){wf(wt,mt=>{mt.call(t,ce,He,Pt)})}const $n=function(ce){let He=null;if(Sr(J.beforeSanitizeElements,ce,null),Fn(ce))return pr(ce),!0;const mt=Ye(ce.nodeName);if(Sr(J.uponSanitizeElement,ce,{tagName:mt,allowedTags:D}),ut&&ce.hasChildNodes()&&!Fr(ce.firstElementChild)&&Ya(/<[/\w!]/g,ce.innerHTML)&&Ya(/<[/\w!]/g,ce.textContent)||ce.nodeType===wh.progressingInstruction||ut&&ce.nodeType===wh.comment&&Ya(/<[/\w]/g,ce.data))return pr(ce),!0;if(!(ve.tagCheck instanceof Function&&ve.tagCheck(mt))&&(!D[mt]||Ee[mt])){if(!Ee[mt]&&ts(mt)&&(me.tagNameCheck instanceof RegExp&&Ya(me.tagNameCheck,mt)||me.tagNameCheck instanceof Function&&me.tagNameCheck(mt)))return!1;if(Kt&&!he[mt]){const Er=N(ce)||ce.parentNode,nn=T(ce)||ce.childNodes;if(nn&&Er){const er=nn.length;for(let an=er-1;an>=0;--an){const In=k(nn[an],!0);In.__removalCount=(ce.__removalCount||0)+1,Er.insertBefore(In,_(ce))}}}return pr(ce),!0}return ce instanceof d&&!Kr(ce)||(mt==="noscript"||mt==="noembed"||mt==="noframes")&&Ya(/<\/no(script|embed|frames)/i,ce.innerHTML)?(pr(ce),!0):(ye&&ce.nodeType===wh.text&&(He=ce.textContent,wf([ee,W,j],Er=>{He=yh(He,Er," ")}),ce.textContent!==He&&(bh(t.removed,{element:ce.cloneNode()}),ce.textContent=He)),Sr(J.afterSanitizeElements,ce,null),!1)},Aa=function(ce,He,mt){if(bt&&(He==="id"||He==="name")&&(mt in r||mt in xr))return!1;if(!(ge&&!Ae[He]&&Ya(U,He))){if(!(Pe&&Ya(O,He))){if(!(ve.attributeCheck instanceof Function&&ve.attributeCheck(He,ce))){if(!M[He]||Ae[He]){if(!(ts(ce)&&(me.tagNameCheck instanceof RegExp&&Ya(me.tagNameCheck,ce)||me.tagNameCheck instanceof Function&&me.tagNameCheck(ce))&&(me.attributeNameCheck instanceof RegExp&&Ya(me.attributeNameCheck,He)||me.attributeNameCheck instanceof Function&&me.attributeNameCheck(He,ce))||He==="is"&&me.allowCustomizedBuiltInElements&&(me.tagNameCheck instanceof RegExp&&Ya(me.tagNameCheck,mt)||me.tagNameCheck instanceof Function&&me.tagNameCheck(mt))))return!1}else if(!zt[He]){if(!Ya(H,yh(mt,V,""))){if(!((He==="src"||He==="xlink:href"||He==="href")&&ce!=="script"&&oQ(mt,"data:")===0&&gt[ce])){if(!(Be&&!Ya(q,yh(mt,V,"")))){if(mt)return!1}}}}}}}return!0},ts=function(ce){return ce!=="annotation-xml"&&Ly(ce,ue)},Ha=function(ce){Sr(J.beforeSanitizeAttributes,ce,null);const{attributes:He}=ce;if(!He||Fn(ce))return;const mt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M,forceKeepAttr:void 0};let Er=He.length;for(;Er--;){const nn=He[Er],{name:er,namespaceURI:an,value:In}=nn,Un=Ye(er),Ge=In;let lt=er==="value"?Ge:lQ(Ge);if(mt.attrName=Un,mt.attrValue=lt,mt.keepAttr=!0,mt.forceKeepAttr=void 0,Sr(J.uponSanitizeAttribute,ce,mt),lt=mt.attrValue,tn&&(Un==="id"||Un==="name")&&(En(er,ce),lt=ar+lt),ut&&Ya(/((--!?|])>)|<\/(style|title|textarea)/i,lt)){En(er,ce);continue}if(Un==="attributename"&&Ly(lt,"href")){En(er,ce);continue}if(mt.forceKeepAttr)continue;if(!mt.keepAttr){En(er,ce);continue}if(!ht&&Ya(/\/>/i,lt)){En(er,ce);continue}ye&&wf([ee,W,j],vr=>{lt=yh(lt,vr," ")});const rr=Ye(ce.nodeName);if(!Aa(rr,Un,lt)){En(er,ce);continue}if(I&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!an)switch(b.getAttributeType(rr,Un)){case"TrustedHTML":{lt=I.createHTML(lt);break}case"TrustedScriptURL":{lt=I.createScriptURL(lt);break}}if(lt!==Ge)try{an?ce.setAttributeNS(an,er,lt):ce.setAttribute(er,lt),Fn(ce)?pr(ce):hC(t.removed)}catch{En(er,ce)}}Sr(J.afterSanitizeAttributes,ce,null)},qa=function wt(ce){let He=null;const mt=Ft(ce);for(Sr(J.beforeSanitizeShadowDOM,ce,null);He=mt.nextNode();)Sr(J.uponSanitizeShadowNode,He,null),$n(He),Ha(He),He.content instanceof i&&wt(He.content);Sr(J.afterSanitizeShadowDOM,ce,null)};return t.sanitize=function(wt){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=null,mt=null,Er=null,nn=null;if(Rn=!wt,Rn&&(wt="<!-->"),typeof wt!="string"&&!Fr(wt))if(typeof wt.toString=="function"){if(wt=wt.toString(),typeof wt!="string")throw vh("dirty is not a string, aborting")}else throw vh("toString is not a function");if(!t.isSupported)return wt;if(Ze||xt(ce),t.removed=[],typeof wt=="string"&&(On=!1),On){if(wt.nodeName){const In=Ye(wt.nodeName);if(!D[In]||Ee[In])throw vh("root node is forbidden and cannot be sanitized in-place")}}else if(wt instanceof c)He=Na("<!---->"),mt=He.ownerDocument.importNode(wt,!0),mt.nodeType===wh.element&&mt.nodeName==="BODY"||mt.nodeName==="HTML"?He=mt:He.appendChild(mt);else{if(!Rt&&!ye&&!Et&&wt.indexOf("<")===-1)return I&&yt?I.createHTML(wt):wt;if(He=Na(wt),!He)return Rt?null:yt?R:""}He&&kt&&pr(He.firstChild);const er=Ft(On?wt:He);for(;Er=er.nextNode();)$n(Er),Ha(Er),Er.content instanceof i&&qa(Er.content);if(On)return wt;if(Rt){if(ur)for(nn=ae.call(He.ownerDocument);He.firstChild;)nn.appendChild(He.firstChild);else nn=He;return(M.shadowroot||M.shadowrootmode)&&(nn=$.call(n,nn,!0)),nn}let an=Et?He.outerHTML:He.innerHTML;return Et&&D["!doctype"]&&He.ownerDocument&&He.ownerDocument.doctype&&He.ownerDocument.doctype.name&&Ya(I4,He.ownerDocument.doctype.name)&&(an="<!DOCTYPE "+He.ownerDocument.doctype.name+`>
`+an),ye&&wf([ee,W,j],In=>{an=yh(an,In," ")}),I&&yt?I.createHTML(an):an},t.setConfig=function(){let wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xt(wt),Ze=!0},t.clearConfig=function(){Pt=null,Ze=!1},t.isValidAttribute=function(wt,ce,He){Pt||xt({});const mt=Ye(wt),Er=Ye(ce);return Aa(mt,Er,He)},t.addHook=function(wt,ce){typeof ce=="function"&&bh(J[wt],ce)},t.removeHook=function(wt,ce){if(ce!==void 0){const He=sQ(J[wt],ce);return He===-1?void 0:iQ(J[wt],He,1)[0]}return hC(J[wt])},t.removeHooks=function(wt){J[wt]=[]},t.removeAllHooks=function(){J=bC()},t}var qu=D4(),P4=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,rg=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,SQ=/\s*%%.*\n/gm,Ou,B4=(Ou=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},A(Ou,"UnknownDiagramError"),Ou),dc={},S2=A(function(e,t){e=e.replace(P4,"").replace(rg,"").replace(SQ,`
`);for(const[r,{detector:n}]of Object.entries(dc))if(n(e,t))return r;throw new B4(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),G1=A((...e)=>{for(const{id:t,detector:r,loader:n}of e)F4(t,r,n)},"registerLazyLoadedDiagrams"),F4=A((e,t,r)=>{dc[e]&&qe.warn(`Detector with key ${e} already exists. Overwriting.`),dc[e]={detector:t,loader:r},qe.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),EQ=A(e=>dc[e].loader,"getDiagramLoader"),Y1=A((e,t,{depth:r=2,clobber:n=!1}={})=>{const s={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>Y1(e,i,s)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]=="object"&&(e[i]===void 0||typeof e[i]=="object")?(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=Y1(e[i],t[i],{depth:r-1,clobber:n})):(n||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i])}),e)},"assignWithDepth"),ia=Y1,mm="#ffffff",xm="#f2f2f2",Xa=A((e,t)=>t?be(e,{s:-40,l:10}):be(e,{s:-40,l:-10}),"mkBorder"),Ru,_Q=(Ru=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||be(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||be(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Xa(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Xa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Xa(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Xa(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ft(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ft(this.tertiaryColor),this.lineColor=this.lineColor||ft(this.background),this.arrowheadColor=this.arrowheadColor||ft(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?qt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||qt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ft(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Nt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||qt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||qt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Nt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Nt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||be(this.primaryColor,{h:30}),this.cScale4=this.cScale4||be(this.primaryColor,{h:60}),this.cScale5=this.cScale5||be(this.primaryColor,{h:90}),this.cScale6=this.cScale6||be(this.primaryColor,{h:120}),this.cScale7=this.cScale7||be(this.primaryColor,{h:150}),this.cScale8=this.cScale8||be(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||be(this.primaryColor,{h:270}),this.cScale10=this.cScale10||be(this.primaryColor,{h:300}),this.cScale11=this.cScale11||be(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=qt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=qt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||ft(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||Nt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||qt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||be(this.mainBkg,{h:180,s:-15,l:t*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||be(this.mainBkg,{h:180,s:-15,l:t*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||be(this.primaryColor,{h:64}),this.fillType3=this.fillType3||be(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||be(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||be(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||be(this.primaryColor,{h:128}),this.fillType7=this.fillType7||be(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||be(this.primaryColor,{l:-10}),this.pie5=this.pie5||be(this.secondaryColor,{l:-10}),this.pie6=this.pie6||be(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||be(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||be(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||be(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||be(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||be(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||be(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||be(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||be(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||be(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||be(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||be(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||be(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zg(this.quadrant1Fill)?Nt(this.quadrant1Fill):qt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?qt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||be(this.primaryColor,{h:-30}),this.git4=this.git4||be(this.primaryColor,{h:-60}),this.git5=this.git5||be(this.primaryColor,{h:-90}),this.git6=this.git6||be(this.primaryColor,{h:60}),this.git7=this.git7||be(this.primaryColor,{h:120}),this.darkMode?(this.git0=Nt(this.git0,25),this.git1=Nt(this.git1,25),this.git2=Nt(this.git2,25),this.git3=Nt(this.git3,25),this.git4=Nt(this.git4,25),this.git5=Nt(this.git5,25),this.git6=Nt(this.git6,25),this.git7=Nt(this.git7,25)):(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||mm,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xm}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},A(Ru,"Theme"),Ru),TQ=A(e=>{const t=new _Q;return t.calculate(e),t},"getThemeVariables"),Iu,CQ=(Iu=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Nt(this.primaryColor,16),this.tertiaryColor=be(this.primaryColor,{h:-160}),this.primaryBorderColor=ft(this.background),this.secondaryBorderColor=Xa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Nt(ft("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=tg(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=qt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=qt(this.sectionBkgColor,10),this.taskBorderColor=tg(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=tg(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Nt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||qt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Nt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Nt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Nt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=be(this.primaryColor,{h:64}),this.fillType3=be(this.secondaryColor,{h:64}),this.fillType4=be(this.primaryColor,{h:-64}),this.fillType5=be(this.secondaryColor,{h:-64}),this.fillType6=be(this.primaryColor,{h:128}),this.fillType7=be(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||be(this.primaryColor,{h:30}),this.cScale4=this.cScale4||be(this.primaryColor,{h:60}),this.cScale5=this.cScale5||be(this.primaryColor,{h:90}),this.cScale6=this.cScale6||be(this.primaryColor,{h:120}),this.cScale7=this.cScale7||be(this.primaryColor,{h:150}),this.cScale8=this.cScale8||be(this.primaryColor,{h:210}),this.cScale9=this.cScale9||be(this.primaryColor,{h:270}),this.cScale10=this.cScale10||be(this.primaryColor,{h:300}),this.cScale11=this.cScale11||be(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ft(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||Nt(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||be(this.mainBkg,{h:30,s:-30,l:-(-10+t*4)}),this["surfacePeer"+t]=this["surfacePeer"+t]||be(this.mainBkg,{h:30,s:-30,l:-(-7+t*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||be(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||be(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||be(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||be(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||be(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||be(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zg(this.quadrant1Fill)?Nt(this.quadrant1Fill):qt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?qt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Nt(this.secondaryColor,20),this.git1=Nt(this.pie2||this.secondaryColor,20),this.git2=Nt(this.pie3||this.tertiaryColor,20),this.git3=Nt(this.pie4||be(this.primaryColor,{h:-30}),20),this.git4=Nt(this.pie5||be(this.primaryColor,{h:-60}),20),this.git5=Nt(this.pie6||be(this.primaryColor,{h:-90}),10),this.git6=Nt(this.pie7||be(this.primaryColor,{h:60}),10),this.git7=Nt(this.pie8||be(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Nt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Nt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},A(Iu,"Theme"),Iu),NQ=A(e=>{const t=new CQ;return t.calculate(e),t},"getThemeVariables"),Du,AQ=(Du=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=be(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=be(this.primaryColor,{h:-160}),this.primaryBorderColor=Xa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=tg(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||be(this.primaryColor,{h:30}),this.cScale4=this.cScale4||be(this.primaryColor,{h:60}),this.cScale5=this.cScale5||be(this.primaryColor,{h:90}),this.cScale6=this.cScale6||be(this.primaryColor,{h:120}),this.cScale7=this.cScale7||be(this.primaryColor,{h:150}),this.cScale8=this.cScale8||be(this.primaryColor,{h:210}),this.cScale9=this.cScale9||be(this.primaryColor,{h:270}),this.cScale10=this.cScale10||be(this.primaryColor,{h:300}),this.cScale11=this.cScale11||be(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||qt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||qt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||be(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||be(this.mainBkg,{h:30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||be(this.mainBkg,{h:30,l:-(7+t*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ft(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ft(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Nt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Nt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Nt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=be(this.primaryColor,{h:64}),this.fillType3=be(this.secondaryColor,{h:64}),this.fillType4=be(this.primaryColor,{h:-64}),this.fillType5=be(this.secondaryColor,{h:-64}),this.fillType6=be(this.primaryColor,{h:128}),this.fillType7=be(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||be(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||be(this.primaryColor,{l:-10}),this.pie5=this.pie5||be(this.secondaryColor,{l:-30}),this.pie6=this.pie6||be(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||be(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||be(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||be(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||be(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||be(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||be(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||be(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||be(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||be(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||be(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||be(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||be(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zg(this.quadrant1Fill)?Nt(this.quadrant1Fill):qt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||be(this.primaryColor,{h:-30}),this.git4=this.git4||be(this.primaryColor,{h:-60}),this.git5=this.git5||be(this.primaryColor,{h:-90}),this.git6=this.git6||be(this.primaryColor,{h:60}),this.git7=this.git7||be(this.primaryColor,{h:120}),this.darkMode?(this.git0=Nt(this.git0,25),this.git1=Nt(this.git1,25),this.git2=Nt(this.git2,25),this.git3=Nt(this.git3,25),this.git4=Nt(this.git4,25),this.git5=Nt(this.git5,25),this.git6=Nt(this.git6,25),this.git7=Nt(this.git7,25)):(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)),this.gitInv0=this.gitInv0||qt(ft(this.git0),25),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||mm,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xm}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},A(Du,"Theme"),Du),jQ=A(e=>{const t=new AQ;return t.calculate(e),t},"getThemeVariables"),Pu,LQ=(Pu=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Nt("#cde498",10),this.primaryBorderColor=Xa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.primaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=qt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||be(this.primaryColor,{h:30}),this.cScale4=this.cScale4||be(this.primaryColor,{h:60}),this.cScale5=this.cScale5||be(this.primaryColor,{h:90}),this.cScale6=this.cScale6||be(this.primaryColor,{h:120}),this.cScale7=this.cScale7||be(this.primaryColor,{h:150}),this.cScale8=this.cScale8||be(this.primaryColor,{h:210}),this.cScale9=this.cScale9||be(this.primaryColor,{h:270}),this.cScale10=this.cScale10||be(this.primaryColor,{h:300}),this.cScale11=this.cScale11||be(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||qt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||qt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=qt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||be(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||be(this.mainBkg,{h:30,s:-30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||be(this.mainBkg,{h:30,s:-30,l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Nt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Nt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=be(this.primaryColor,{h:64}),this.fillType3=be(this.secondaryColor,{h:64}),this.fillType4=be(this.primaryColor,{h:-64}),this.fillType5=be(this.secondaryColor,{h:-64}),this.fillType6=be(this.primaryColor,{h:128}),this.fillType7=be(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||be(this.primaryColor,{l:-30}),this.pie5=this.pie5||be(this.secondaryColor,{l:-30}),this.pie6=this.pie6||be(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||be(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||be(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||be(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||be(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||be(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||be(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||be(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||be(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||be(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||be(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||be(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||be(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zg(this.quadrant1Fill)?Nt(this.quadrant1Fill):qt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||be(this.primaryColor,{h:-30}),this.git4=this.git4||be(this.primaryColor,{h:-60}),this.git5=this.git5||be(this.primaryColor,{h:-90}),this.git6=this.git6||be(this.primaryColor,{h:60}),this.git7=this.git7||be(this.primaryColor,{h:120}),this.darkMode?(this.git0=Nt(this.git0,25),this.git1=Nt(this.git1,25),this.git2=Nt(this.git2,25),this.git3=Nt(this.git3,25),this.git4=Nt(this.git4,25),this.git5=Nt(this.git5,25),this.git6=Nt(this.git6,25),this.git7=Nt(this.git7,25)):(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ft(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ft(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||mm,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xm}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},A(Pu,"Theme"),Pu),MQ=A(e=>{const t=new LQ;return t.calculate(e),t},"getThemeVariables"),Bu,OQ=(Bu=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Nt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=be(this.primaryColor,{h:-160}),this.primaryBorderColor=Xa(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xa(this.tertiaryColor,this.darkMode),this.primaryTextColor=ft(this.primaryColor),this.secondaryTextColor=ft(this.secondaryColor),this.tertiaryTextColor=ft(this.tertiaryColor),this.lineColor=ft(this.background),this.textColor=ft(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Nt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Nt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Nt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ft(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||Nt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||be(this.mainBkg,{l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||be(this.mainBkg,{l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Nt(this.contrast,30),this.sectionBkgColor2=Nt(this.contrast,30),this.taskBorderColor=qt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Nt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=qt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=be(this.primaryColor,{h:64}),this.fillType3=be(this.secondaryColor,{h:64}),this.fillType4=be(this.primaryColor,{h:-64}),this.fillType5=be(this.secondaryColor,{h:-64}),this.fillType6=be(this.primaryColor,{h:128}),this.fillType7=be(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||be(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||be(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||be(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||be(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||be(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||be(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zg(this.quadrant1Fill)?Nt(this.quadrant1Fill):qt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=qt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||be(this.primaryColor,{h:-30}),this.git4=this.pie5||be(this.primaryColor,{h:-60}),this.git5=this.pie6||be(this.primaryColor,{h:-90}),this.git6=this.pie7||be(this.primaryColor,{h:60}),this.git7=this.pie8||be(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ft(this.git0),this.gitInv1=this.gitInv1||ft(this.git1),this.gitInv2=this.gitInv2||ft(this.git2),this.gitInv3=this.gitInv3||ft(this.git3),this.gitInv4=this.gitInv4||ft(this.git4),this.gitInv5=this.gitInv5||ft(this.git5),this.gitInv6=this.gitInv6||ft(this.git6),this.gitInv7=this.gitInv7||ft(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||mm,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xm}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},A(Bu,"Theme"),Bu),RQ=A(e=>{const t=new OQ;return t.calculate(e),t},"getThemeVariables"),vo={base:{getThemeVariables:TQ},dark:{getThemeVariables:NQ},default:{getThemeVariables:jQ},forest:{getThemeVariables:MQ},neutral:{getThemeVariables:RQ}},Ci={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},$4={...Ci,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:vo.default.getThemeVariables(),sequence:{...Ci.sequence,messageFont:A(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:A(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:A(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ci.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ci.c4,useWidth:void 0,personFont:A(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ci.flowchart,inheritDir:!1},external_personFont:A(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:A(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:A(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:A(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:A(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:A(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:A(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:A(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:A(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:A(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:A(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:A(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:A(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:A(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:A(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:A(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:A(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:A(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:A(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:A(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:A(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ci.pie,useWidth:984},xyChart:{...Ci.xyChart,useWidth:void 0},requirement:{...Ci.requirement,useWidth:void 0},packet:{...Ci.packet},radar:{...Ci.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},U4=A((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...U4(e[n],"")]:[...r,t+n],[]),"keyify"),IQ=new Set(U4($4,"")),z4=$4,m0=A(e=>{if(qe.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>m0(t));return}for(const t of Object.keys(e)){if(qe.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!IQ.has(t)||e[t]==null){qe.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){qe.debug("sanitizing object",t),m0(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(qe.debug("sanitizing css option",t),e[t]=DQ(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}qe.debug("After sanitization",e)}},"sanitizeDirective"),DQ=A(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Gu=Object.freeze(z4),fs=ia({},Gu),x0,hc=[],ng=ia({},Gu),bm=A((e,t)=>{let r=ia({},e),n={};for(const s of t)G4(s),n=ia(n,s);if(r=ia(r,n),n.theme&&n.theme in vo){const s=ia({},x0),i=ia(s.themeVariables||{},n.themeVariables);r.theme&&r.theme in vo&&(r.themeVariables=vo[r.theme].getThemeVariables(i))}return ng=r,Y4(ng),ng},"updateCurrentConfig"),PQ=A(e=>(fs=ia({},Gu),fs=ia(fs,e),e.theme&&vo[e.theme]&&(fs.themeVariables=vo[e.theme].getThemeVariables(e.themeVariables)),bm(fs,hc),fs),"setSiteConfig"),BQ=A(e=>{x0=ia({},e)},"saveConfigFromInitialize"),FQ=A(e=>(fs=ia(fs,e),bm(fs,hc),fs),"updateSiteConfig"),H4=A(()=>ia({},fs),"getSiteConfig"),q4=A(e=>(Y4(e),ia(ng,e),Da()),"setConfig"),Da=A(()=>ia({},ng),"getConfig"),G4=A(e=>{e&&(["secure",...fs.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(qe.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&G4(e[t])}))},"sanitize"),$Q=A(e=>{m0(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),hc.push(e),bm(fs,hc)},"addDirective"),b0=A((e=fs)=>{hc=[],bm(e,hc)},"reset"),UQ={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},yC={},zQ=A(e=>{yC[e]||(qe.warn(UQ[e]),yC[e]=!0)},"issueWarning"),Y4=A(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&zQ("LAZY_LOAD_DEPRECATED")},"checkConfig"),Rhe=A(()=>{let e={};x0&&(e=ia(e,x0));for(const t of hc)e=ia(e,t);return e},"getUserDefinedConfig"),Hg=/<br\s*\/?>/gi,HQ=A(e=>e?K4(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),qQ=(()=>{let e=!1;return()=>{e||(W4(),e=!0)}})();function W4(){const e="data-temp-href-target";qu.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),qu.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}A(W4,"setupDompurifyHooks");var V4=A(e=>(qQ(),qu.sanitize(e)),"removeScript"),vC=A((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=V4(e):r!=="loose"&&(e=K4(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=VQ(e))}return e},"sanitizeMore"),Zs=A((e,t)=>e&&(t.dompurifyConfig?e=qu.sanitize(vC(e,t),t.dompurifyConfig).toString():e=qu.sanitize(vC(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),GQ=A((e,t)=>typeof e=="string"?Zs(e,t):e.flat().map(r=>Zs(r,t)),"sanitizeTextOrArray"),YQ=A(e=>Hg.test(e),"hasBreaks"),WQ=A(e=>e.split(Hg),"splitBreaks"),VQ=A(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),K4=A(e=>e.replace(Hg,"#br#"),"breakToPlaceholder"),KQ=A(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),la=A(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),XQ=A(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),QQ=A(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),kC=A(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let s=t[n];if(s===","&&n>0&&n+1<t.length){const i=t[n-1],l=t[n+1];JQ(i,l)&&(s=i+","+l,n++,r.pop())}r.push(ZQ(s))}return r.join("")},"parseGenericTypes"),W1=A((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),JQ=A((e,t)=>{const r=W1(e,"~"),n=W1(t,"~");return r===1&&n===1},"shouldCombineSets"),ZQ=A(e=>{const t=W1(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let s=n.indexOf("~"),i=n.lastIndexOf("~");for(;s!==-1&&i!==-1&&s!==i;)n[s]="<",n[i]=">",s=n.indexOf("~"),i=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),wC=A(()=>window.MathMLElement!==void 0,"isMathMLSupported"),V1=/\$\$(.*)\$\$/g,Yu=A(e=>(e.match(V1)?.length??0)>0,"hasKatex"),Ihe=A(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await E2(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const s={width:r.clientWidth,height:r.clientHeight};return r.remove(),s},"calculateMathMLDimensions"),eJ=A(async(e,t)=>{if(!Yu(e))return e;if(!(wC()||t.legacyMathML||t.forceLegacyMathML))return e.replace(V1,"MathML is unsupported in this environment.");{const{default:r}=await lr(async()=>{const{default:s}=await import("./katex-qrhCpa0F.js");return{default:s}},[]),n=t.forceLegacyMathML||!wC()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(Hg).map(s=>Yu(s)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${s}</div>`:`<div>${s}</div>`).join("").replace(V1,(s,i)=>r.renderToString(i,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),E2=A(async(e,t)=>Zs(await eJ(e,t),t),"renderKatexSanitized"),dd={getRows:HQ,sanitizeText:Zs,sanitizeTextOrArray:GQ,hasBreaks:YQ,splitBreaks:WQ,lineBreakRegex:Hg,removeScript:V4,getUrl:KQ,evaluate:la,getMax:XQ,getMin:QQ},tJ=A(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),rJ=A(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),X4=A(function(e,t,r,n){const s=rJ(t,r,n);tJ(e,s)},"configureSvgSize"),nJ=A(function(e,t,r,n){const s=t.node().getBBox(),i=s.width,l=s.height;qe.info(`SVG bounds: ${i}x${l}`,s);let c=0,d=0;qe.info(`Graph bounds: ${c}x${d}`,e),c=i+r*2,d=l+r*2,qe.info(`Calculated bounds: ${c}x${d}`),X4(t,d,c,n);const h=`${s.x-r} ${s.y-r} ${s.width+2*r} ${s.height+2*r}`;t.attr("viewBox",h)},"setupGraphViewbox"),qf={},aJ=A((e,t,r)=>{let n="";return e in qf&&qf[e]?n=qf[e](r):qe.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),sJ=A((e,t)=>{t!==void 0&&(qf[e]=t)},"addStylesForDiagram"),iJ=aJ,Q4={};VX(Q4,{clear:()=>oJ,getAccDescription:()=>dJ,getAccTitle:()=>cJ,getDiagramTitle:()=>gJ,setAccDescription:()=>uJ,setAccTitle:()=>lJ,setDiagramTitle:()=>hJ});var _2="",T2="",C2="",N2=A(e=>Zs(e,Da()),"sanitizeText"),oJ=A(()=>{_2="",C2="",T2=""},"clear"),lJ=A(e=>{_2=N2(e).replace(/^\s+/g,"")},"setAccTitle"),cJ=A(()=>_2,"getAccTitle"),uJ=A(e=>{C2=N2(e).replace(/\n\s+/g,`
`)},"setAccDescription"),dJ=A(()=>C2,"getAccDescription"),hJ=A(e=>{T2=N2(e)},"setDiagramTitle"),gJ=A(()=>T2,"getDiagramTitle"),SC=qe,pJ=w2,Zr=Da,Dhe=q4,Phe=Gu,A2=A(e=>Zs(e,Zr()),"sanitizeText"),fJ=nJ,mJ=A(()=>Q4,"getCommonDb"),y0={},v0=A((e,t,r)=>{y0[e]&&SC.warn(`Diagram with id ${e} already registered. Overwriting.`),y0[e]=t,r&&F4(e,r),sJ(e,t.styles),t.injectUtils?.(SC,pJ,Zr,A2,fJ,mJ(),()=>{})},"registerDiagram"),K1=A(e=>{if(e in y0)return y0[e];throw new xJ(e)},"getDiagram"),Fu,xJ=(Fu=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},A(Fu,"DiagramNotFoundError"),Fu),bJ={value:()=>{}};function J4(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Gf(r)}function Gf(e){this._=e}function yJ(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Gf.prototype=J4.prototype={constructor:Gf,on:function(e,t){var r=this._,n=yJ(e+"",r),s,i=-1,l=n.length;if(arguments.length<2){for(;++i<l;)if((s=(e=n[i]).type)&&(s=vJ(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<l;)if(s=(e=n[i]).type)r[s]=EC(r[s],e.name,t);else if(t==null)for(s in r)r[s]=EC(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Gf(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,i;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,s=i.length;n<s;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],s=0,i=n.length;s<i;++s)n[s].value.apply(t,r)}};function vJ(e,t){for(var r=0,n=e.length,s;r<n;++r)if((s=e[r]).name===t)return s.value}function EC(e,t,r){for(var n=0,s=e.length;n<s;++n)if(e[n].name===t){e[n]=bJ,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var X1="http://www.w3.org/1999/xhtml";const _C={svg:"http://www.w3.org/2000/svg",xhtml:X1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ym(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),_C.hasOwnProperty(t)?{space:_C[t],local:e}:e}function kJ(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===X1&&t.documentElement.namespaceURI===X1?t.createElement(e):t.createElementNS(r,e)}}function wJ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Z4(e){var t=ym(e);return(t.local?wJ:kJ)(t)}function SJ(){}function j2(e){return e==null?SJ:function(){return this.querySelector(e)}}function EJ(e){typeof e!="function"&&(e=j2(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],l=i.length,c=n[s]=new Array(l),d,h,g=0;g<l;++g)(d=i[g])&&(h=e.call(d,d.__data__,g,i))&&("__data__"in d&&(h.__data__=d.__data__),c[g]=h);return new Ms(n,this._parents)}function _J(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function TJ(){return[]}function eL(e){return e==null?TJ:function(){return this.querySelectorAll(e)}}function CJ(e){return function(){return _J(e.apply(this,arguments))}}function NJ(e){typeof e=="function"?e=CJ(e):e=eL(e);for(var t=this._groups,r=t.length,n=[],s=[],i=0;i<r;++i)for(var l=t[i],c=l.length,d,h=0;h<c;++h)(d=l[h])&&(n.push(e.call(d,d.__data__,h,l)),s.push(d));return new Ms(n,s)}function tL(e){return function(){return this.matches(e)}}function rL(e){return function(t){return t.matches(e)}}var AJ=Array.prototype.find;function jJ(e){return function(){return AJ.call(this.children,e)}}function LJ(){return this.firstElementChild}function MJ(e){return this.select(e==null?LJ:jJ(typeof e=="function"?e:rL(e)))}var OJ=Array.prototype.filter;function RJ(){return Array.from(this.children)}function IJ(e){return function(){return OJ.call(this.children,e)}}function DJ(e){return this.selectAll(e==null?RJ:IJ(typeof e=="function"?e:rL(e)))}function PJ(e){typeof e!="function"&&(e=tL(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],l=i.length,c=n[s]=[],d,h=0;h<l;++h)(d=i[h])&&e.call(d,d.__data__,h,i)&&c.push(d);return new Ms(n,this._parents)}function nL(e){return new Array(e.length)}function BJ(){return new Ms(this._enter||this._groups.map(nL),this._parents)}function k0(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}k0.prototype={constructor:k0,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function FJ(e){return function(){return e}}function $J(e,t,r,n,s,i){for(var l=0,c,d=t.length,h=i.length;l<h;++l)(c=t[l])?(c.__data__=i[l],n[l]=c):r[l]=new k0(e,i[l]);for(;l<d;++l)(c=t[l])&&(s[l]=c)}function UJ(e,t,r,n,s,i,l){var c,d,h=new Map,g=t.length,f=i.length,x=new Array(g),b;for(c=0;c<g;++c)(d=t[c])&&(x[c]=b=l.call(d,d.__data__,c,t)+"",h.has(b)?s[c]=d:h.set(b,d));for(c=0;c<f;++c)b=l.call(e,i[c],c,i)+"",(d=h.get(b))?(n[c]=d,d.__data__=i[c],h.delete(b)):r[c]=new k0(e,i[c]);for(c=0;c<g;++c)(d=t[c])&&h.get(x[c])===d&&(s[c]=d)}function zJ(e){return e.__data__}function HJ(e,t){if(!arguments.length)return Array.from(this,zJ);var r=t?UJ:$J,n=this._parents,s=this._groups;typeof e!="function"&&(e=FJ(e));for(var i=s.length,l=new Array(i),c=new Array(i),d=new Array(i),h=0;h<i;++h){var g=n[h],f=s[h],x=f.length,b=qJ(e.call(g,g&&g.__data__,h,n)),y=b.length,k=c[h]=new Array(y),S=l[h]=new Array(y),_=d[h]=new Array(x);r(g,f,k,S,_,b,t);for(var T=0,N=0,I,R;T<y;++T)if(I=k[T]){for(T>=N&&(N=T+1);!(R=S[N])&&++N<y;);I._next=R||null}}return l=new Ms(l,n),l._enter=c,l._exit=d,l}function qJ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GJ(){return new Ms(this._exit||this._groups.map(nL),this._parents)}function YJ(e,t,r){var n=this.enter(),s=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?i.remove():r(i),n&&s?n.merge(s).order():s}function WJ(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,s=r.length,i=n.length,l=Math.min(s,i),c=new Array(s),d=0;d<l;++d)for(var h=r[d],g=n[d],f=h.length,x=c[d]=new Array(f),b,y=0;y<f;++y)(b=h[y]||g[y])&&(x[y]=b);for(;d<s;++d)c[d]=r[d];return new Ms(c,this._parents)}function VJ(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],s=n.length-1,i=n[s],l;--s>=0;)(l=n[s])&&(i&&l.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(l,i),i=l);return this}function KJ(e){e||(e=XJ);function t(f,x){return f&&x?e(f.__data__,x.__data__):!f-!x}for(var r=this._groups,n=r.length,s=new Array(n),i=0;i<n;++i){for(var l=r[i],c=l.length,d=s[i]=new Array(c),h,g=0;g<c;++g)(h=l[g])&&(d[g]=h);d.sort(t)}return new Ms(s,this._parents).order()}function XJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function QJ(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function JJ(){return Array.from(this)}function ZJ(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length;s<i;++s){var l=n[s];if(l)return l}return null}function eZ(){let e=0;for(const t of this)++e;return e}function tZ(){return!this.node()}function rZ(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var s=t[r],i=0,l=s.length,c;i<l;++i)(c=s[i])&&e.call(c,c.__data__,i,s);return this}function nZ(e){return function(){this.removeAttribute(e)}}function aZ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sZ(e,t){return function(){this.setAttribute(e,t)}}function iZ(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oZ(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function lZ(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function cZ(e,t){var r=ym(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?aZ:nZ:typeof t=="function"?r.local?lZ:oZ:r.local?iZ:sZ)(r,t))}function aL(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uZ(e){return function(){this.style.removeProperty(e)}}function dZ(e,t,r){return function(){this.style.setProperty(e,t,r)}}function hZ(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function gZ(e,t,r){return arguments.length>1?this.each((t==null?uZ:typeof t=="function"?hZ:dZ)(e,t,r??"")):Wu(this.node(),e)}function Wu(e,t){return e.style.getPropertyValue(t)||aL(e).getComputedStyle(e,null).getPropertyValue(t)}function pZ(e){return function(){delete this[e]}}function fZ(e,t){return function(){this[e]=t}}function mZ(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function xZ(e,t){return arguments.length>1?this.each((t==null?pZ:typeof t=="function"?mZ:fZ)(e,t)):this.node()[e]}function sL(e){return e.trim().split(/^|\s+/)}function L2(e){return e.classList||new iL(e)}function iL(e){this._node=e,this._names=sL(e.getAttribute("class")||"")}iL.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oL(e,t){for(var r=L2(e),n=-1,s=t.length;++n<s;)r.add(t[n])}function lL(e,t){for(var r=L2(e),n=-1,s=t.length;++n<s;)r.remove(t[n])}function bZ(e){return function(){oL(this,e)}}function yZ(e){return function(){lL(this,e)}}function vZ(e,t){return function(){(t.apply(this,arguments)?oL:lL)(this,e)}}function kZ(e,t){var r=sL(e+"");if(arguments.length<2){for(var n=L2(this.node()),s=-1,i=r.length;++s<i;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?vZ:t?bZ:yZ)(r,t))}function wZ(){this.textContent=""}function SZ(e){return function(){this.textContent=e}}function EZ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function _Z(e){return arguments.length?this.each(e==null?wZ:(typeof e=="function"?EZ:SZ)(e)):this.node().textContent}function TZ(){this.innerHTML=""}function CZ(e){return function(){this.innerHTML=e}}function NZ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function AZ(e){return arguments.length?this.each(e==null?TZ:(typeof e=="function"?NZ:CZ)(e)):this.node().innerHTML}function jZ(){this.nextSibling&&this.parentNode.appendChild(this)}function LZ(){return this.each(jZ)}function MZ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OZ(){return this.each(MZ)}function RZ(e){var t=typeof e=="function"?e:Z4(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function IZ(){return null}function DZ(e,t){var r=typeof e=="function"?e:Z4(e),n=t==null?IZ:typeof t=="function"?t:j2(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function PZ(){var e=this.parentNode;e&&e.removeChild(this)}function BZ(){return this.each(PZ)}function FZ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $Z(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function UZ(e){return this.select(e?$Z:FZ)}function zZ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function HZ(e){return function(t){e.call(this,t,this.__data__)}}function qZ(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function GZ(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,s=t.length,i;r<s;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function YZ(e,t,r){return function(){var n=this.__on,s,i=HZ(t);if(n){for(var l=0,c=n.length;l<c;++l)if((s=n[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=r),s.value=t;return}}this.addEventListener(e.type,i,r),s={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(s):this.__on=[s]}}function WZ(e,t,r){var n=qZ(e+""),s,i=n.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,h=c.length,g;d<h;++d)for(s=0,g=c[d];s<i;++s)if((l=n[s]).type===g.type&&l.name===g.name)return g.value}return}for(c=t?YZ:GZ,s=0;s<i;++s)this.each(c(n[s],t,r));return this}function cL(e,t,r){var n=aL(e),s=n.CustomEvent;typeof s=="function"?s=new s(t,r):(s=n.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function VZ(e,t){return function(){return cL(this,e,t)}}function KZ(e,t){return function(){return cL(this,e,t.apply(this,arguments))}}function XZ(e,t){return this.each((typeof t=="function"?KZ:VZ)(e,t))}function*QZ(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,i=n.length,l;s<i;++s)(l=n[s])&&(yield l)}var uL=[null];function Ms(e,t){this._groups=e,this._parents=t}function qg(){return new Ms([[document.documentElement]],uL)}function JZ(){return this}Ms.prototype=qg.prototype={constructor:Ms,select:EJ,selectAll:NJ,selectChild:MJ,selectChildren:DJ,filter:PJ,data:HJ,enter:BJ,exit:GJ,join:YJ,merge:WJ,selection:JZ,order:VJ,sort:KJ,call:QJ,nodes:JJ,node:ZJ,size:eZ,empty:tZ,each:rZ,attr:cZ,style:gZ,property:xZ,classed:kZ,text:_Z,html:AZ,raise:LZ,lower:OZ,append:RZ,insert:DZ,remove:BZ,clone:UZ,datum:zZ,on:WZ,dispatch:XZ,[Symbol.iterator]:QZ};function Pr(e){return typeof e=="string"?new Ms([[document.querySelector(e)]],[document.documentElement]):new Ms([[e]],uL)}function M2(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function dL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Gg(){}var gg=.7,w0=1/gg,Lu="\\s*([+-]?\\d+)\\s*",pg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZZ=/^#([0-9a-f]{3,8})$/,eee=new RegExp(`^rgb\\(${Lu},${Lu},${Lu}\\)$`),tee=new RegExp(`^rgb\\(${Ii},${Ii},${Ii}\\)$`),ree=new RegExp(`^rgba\\(${Lu},${Lu},${Lu},${pg}\\)$`),nee=new RegExp(`^rgba\\(${Ii},${Ii},${Ii},${pg}\\)$`),aee=new RegExp(`^hsl\\(${pg},${Ii},${Ii}\\)$`),see=new RegExp(`^hsla\\(${pg},${Ii},${Ii},${pg}\\)$`),TC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M2(Gg,fg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:CC,formatHex:CC,formatHex8:iee,formatHsl:oee,formatRgb:NC,toString:NC});function CC(){return this.rgb().formatHex()}function iee(){return this.rgb().formatHex8()}function oee(){return hL(this).formatHsl()}function NC(){return this.rgb().formatRgb()}function fg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ZZ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?AC(t):r===3?new xs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ef(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ef(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eee.exec(e))?new xs(t[1],t[2],t[3],1):(t=tee.exec(e))?new xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ree.exec(e))?Ef(t[1],t[2],t[3],t[4]):(t=nee.exec(e))?Ef(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aee.exec(e))?MC(t[1],t[2]/100,t[3]/100,1):(t=see.exec(e))?MC(t[1],t[2]/100,t[3]/100,t[4]):TC.hasOwnProperty(e)?AC(TC[e]):e==="transparent"?new xs(NaN,NaN,NaN,0):null}function AC(e){return new xs(e>>16&255,e>>8&255,e&255,1)}function Ef(e,t,r,n){return n<=0&&(e=t=r=NaN),new xs(e,t,r,n)}function lee(e){return e instanceof Gg||(e=fg(e)),e?(e=e.rgb(),new xs(e.r,e.g,e.b,e.opacity)):new xs}function Q1(e,t,r,n){return arguments.length===1?lee(e):new xs(e,t,r,n??1)}function xs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}M2(xs,Q1,dL(Gg,{brighter(e){return e=e==null?w0:Math.pow(w0,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xs(sc(this.r),sc(this.g),sc(this.b),S0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jC,formatHex:jC,formatHex8:cee,formatRgb:LC,toString:LC}));function jC(){return`#${Zl(this.r)}${Zl(this.g)}${Zl(this.b)}`}function cee(){return`#${Zl(this.r)}${Zl(this.g)}${Zl(this.b)}${Zl((isNaN(this.opacity)?1:this.opacity)*255)}`}function LC(){const e=S0(this.opacity);return`${e===1?"rgb(":"rgba("}${sc(this.r)}, ${sc(this.g)}, ${sc(this.b)}${e===1?")":`, ${e})`}`}function S0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zl(e){return e=sc(e),(e<16?"0":"")+e.toString(16)}function MC(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new hi(e,t,r,n)}function hL(e){if(e instanceof hi)return new hi(e.h,e.s,e.l,e.opacity);if(e instanceof Gg||(e=fg(e)),!e)return new hi;if(e instanceof hi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,c=i-s,d=(i+s)/2;return c?(t===i?l=(r-n)/c+(r<n)*6:r===i?l=(n-t)/c+2:l=(t-r)/c+4,c/=d<.5?i+s:2-i-s,l*=60):c=d>0&&d<1?0:l,new hi(l,c,d,e.opacity)}function uee(e,t,r,n){return arguments.length===1?hL(e):new hi(e,t,r,n??1)}function hi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}M2(hi,uee,dL(Gg,{brighter(e){return e=e==null?w0:Math.pow(w0,e),new hi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new hi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new xs(Dy(e>=240?e-240:e+120,s,n),Dy(e,s,n),Dy(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new hi(OC(this.h),_f(this.s),_f(this.l),S0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=S0(this.opacity);return`${e===1?"hsl(":"hsla("}${OC(this.h)}, ${_f(this.s)*100}%, ${_f(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OC(e){return e=(e||0)%360,e<0?e+360:e}function _f(e){return Math.max(0,Math.min(1,e||0))}function Dy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const O2=e=>()=>e;function gL(e,t){return function(r){return e+r*t}}function dee(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Bhe(e,t){var r=t-e;return r?gL(e,r>180||r<-180?r-360*Math.round(r/360):r):O2(isNaN(e)?t:e)}function hee(e){return(e=+e)==1?pL:function(t,r){return r-t?dee(t,r,e):O2(isNaN(t)?r:t)}}function pL(e,t){var r=t-e;return r?gL(e,r):O2(isNaN(e)?t:e)}const RC=(function e(t){var r=hee(t);function n(s,i){var l=r((s=Q1(s)).r,(i=Q1(i)).r),c=r(s.g,i.g),d=r(s.b,i.b),h=pL(s.opacity,i.opacity);return function(g){return s.r=l(g),s.g=c(g),s.b=d(g),s.opacity=h(g),s+""}}return n.gamma=e,n})(1);function sl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var J1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Py=new RegExp(J1.source,"g");function gee(e){return function(){return e}}function pee(e){return function(t){return e(t)+""}}function fee(e,t){var r=J1.lastIndex=Py.lastIndex=0,n,s,i,l=-1,c=[],d=[];for(e=e+"",t=t+"";(n=J1.exec(e))&&(s=Py.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),c[l]?c[l]+=i:c[++l]=i),(n=n[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,d.push({i:l,x:sl(n,s)})),r=Py.lastIndex;return r<t.length&&(i=t.slice(r),c[l]?c[l]+=i:c[++l]=i),c.length<2?d[0]?pee(d[0].x):gee(t):(t=d.length,function(h){for(var g=0,f;g<t;++g)c[(f=d[g]).i]=f.x(h);return c.join("")})}var IC=180/Math.PI,Z1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fL(e,t,r,n,s,i){var l,c,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(c=Math.sqrt(r*r+n*n))&&(r/=c,n/=c,d/=c),e*n<t*r&&(e=-e,t=-t,d=-d,l=-l),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*IC,skewX:Math.atan(d)*IC,scaleX:l,scaleY:c}}var Tf;function mee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Z1:fL(t.a,t.b,t.c,t.d,t.e,t.f)}function xee(e){return e==null||(Tf||(Tf=document.createElementNS("http://www.w3.org/2000/svg","g")),Tf.setAttribute("transform",e),!(e=Tf.transform.baseVal.consolidate()))?Z1:(e=e.matrix,fL(e.a,e.b,e.c,e.d,e.e,e.f))}function mL(e,t,r,n){function s(h){return h.length?h.pop()+" ":""}function i(h,g,f,x,b,y){if(h!==f||g!==x){var k=b.push("translate(",null,t,null,r);y.push({i:k-4,x:sl(h,f)},{i:k-2,x:sl(g,x)})}else(f||x)&&b.push("translate("+f+t+x+r)}function l(h,g,f,x){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),x.push({i:f.push(s(f)+"rotate(",null,n)-2,x:sl(h,g)})):g&&f.push(s(f)+"rotate("+g+n)}function c(h,g,f,x){h!==g?x.push({i:f.push(s(f)+"skewX(",null,n)-2,x:sl(h,g)}):g&&f.push(s(f)+"skewX("+g+n)}function d(h,g,f,x,b,y){if(h!==f||g!==x){var k=b.push(s(b)+"scale(",null,",",null,")");y.push({i:k-4,x:sl(h,f)},{i:k-2,x:sl(g,x)})}else(f!==1||x!==1)&&b.push(s(b)+"scale("+f+","+x+")")}return function(h,g){var f=[],x=[];return h=e(h),g=e(g),i(h.translateX,h.translateY,g.translateX,g.translateY,f,x),l(h.rotate,g.rotate,f,x),c(h.skewX,g.skewX,f,x),d(h.scaleX,h.scaleY,g.scaleX,g.scaleY,f,x),h=g=null,function(b){for(var y=-1,k=x.length,S;++y<k;)f[(S=x[y]).i]=S.x(b);return f.join("")}}}var bee=mL(mee,"px, ","px)","deg)"),yee=mL(xee,", ",")",")"),Vu=0,Rh=0,Sh=0,xL=1e3,E0,Ih,_0=0,gc=0,vm=0,mg=typeof performance=="object"&&performance.now?performance:Date,bL=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function R2(){return gc||(bL(vee),gc=mg.now()+vm)}function vee(){gc=0}function T0(){this._call=this._time=this._next=null}T0.prototype=yL.prototype={constructor:T0,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?R2():+r)+(t==null?0:+t),!this._next&&Ih!==this&&(Ih?Ih._next=this:E0=this,Ih=this),this._call=e,this._time=r,ev()},stop:function(){this._call&&(this._call=null,this._time=1/0,ev())}};function yL(e,t,r){var n=new T0;return n.restart(e,t,r),n}function kee(){R2(),++Vu;for(var e=E0,t;e;)(t=gc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vu}function DC(){gc=(_0=mg.now())+vm,Vu=Rh=0;try{kee()}finally{Vu=0,See(),gc=0}}function wee(){var e=mg.now(),t=e-_0;t>xL&&(vm-=t,_0=e)}function See(){for(var e,t=E0,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:E0=r);Ih=e,ev(n)}function ev(e){if(!Vu){Rh&&(Rh=clearTimeout(Rh));var t=e-gc;t>24?(e<1/0&&(Rh=setTimeout(DC,e-mg.now()-vm)),Sh&&(Sh=clearInterval(Sh))):(Sh||(_0=mg.now(),Sh=setInterval(wee,xL)),Vu=1,bL(DC))}}function PC(e,t,r){var n=new T0;return t=t==null?0:+t,n.restart(s=>{n.stop(),e(s+t)},t,r),n}var Eee=J4("start","end","cancel","interrupt"),_ee=[],vL=0,BC=1,tv=2,Yf=3,FC=4,rv=5,Wf=6;function km(e,t,r,n,s,i){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;Tee(e,r,{name:t,index:n,group:s,on:Eee,tween:_ee,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:vL})}function I2(e,t){var r=yi(e,t);if(r.state>vL)throw new Error("too late; already scheduled");return r}function qi(e,t){var r=yi(e,t);if(r.state>Yf)throw new Error("too late; already running");return r}function yi(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Tee(e,t,r){var n=e.__transition,s;n[t]=r,r.timer=yL(i,0,r.time);function i(h){r.state=BC,r.timer.restart(l,r.delay,r.time),r.delay<=h&&l(h-r.delay)}function l(h){var g,f,x,b;if(r.state!==BC)return d();for(g in n)if(b=n[g],b.name===r.name){if(b.state===Yf)return PC(l);b.state===FC?(b.state=Wf,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[g]):+g<t&&(b.state=Wf,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[g])}if(PC(function(){r.state===Yf&&(r.state=FC,r.timer.restart(c,r.delay,r.time),c(h))}),r.state=tv,r.on.call("start",e,e.__data__,r.index,r.group),r.state===tv){for(r.state=Yf,s=new Array(x=r.tween.length),g=0,f=-1;g<x;++g)(b=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(s[++f]=b);s.length=f+1}}function c(h){for(var g=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(d),r.state=rv,1),f=-1,x=s.length;++f<x;)s[f].call(e,g);r.state===rv&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Wf,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function Cee(e,t){var r=e.__transition,n,s,i=!0,l;if(r){t=t==null?null:t+"";for(l in r){if((n=r[l]).name!==t){i=!1;continue}s=n.state>tv&&n.state<rv,n.state=Wf,n.timer.stop(),n.on.call(s?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[l]}i&&delete e.__transition}}function Nee(e){return this.each(function(){Cee(this,e)})}function Aee(e,t){var r,n;return function(){var s=qi(this,e),i=s.tween;if(i!==r){n=r=i;for(var l=0,c=n.length;l<c;++l)if(n[l].name===t){n=n.slice(),n.splice(l,1);break}}s.tween=n}}function jee(e,t,r){var n,s;if(typeof r!="function")throw new Error;return function(){var i=qi(this,e),l=i.tween;if(l!==n){s=(n=l).slice();for(var c={name:t,value:r},d=0,h=s.length;d<h;++d)if(s[d].name===t){s[d]=c;break}d===h&&s.push(c)}i.tween=s}}function Lee(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=yi(this.node(),r).tween,s=0,i=n.length,l;s<i;++s)if((l=n[s]).name===e)return l.value;return null}return this.each((t==null?Aee:jee)(r,e,t))}function D2(e,t,r){var n=e._id;return e.each(function(){var s=qi(this,n);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return yi(s,n).value[t]}}function kL(e,t){var r;return(typeof t=="number"?sl:t instanceof fg?RC:(r=fg(t))?(t=r,RC):fee)(e,t)}function Mee(e){return function(){this.removeAttribute(e)}}function Oee(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ree(e,t,r){var n,s=r+"",i;return function(){var l=this.getAttribute(e);return l===s?null:l===n?i:i=t(n=l,r)}}function Iee(e,t,r){var n,s=r+"",i;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===n?i:i=t(n=l,r)}}function Dee(e,t,r){var n,s,i;return function(){var l,c=r(this),d;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=c+"",l===d?null:l===n&&d===s?i:(s=d,i=t(n=l,c)))}}function Pee(e,t,r){var n,s,i;return function(){var l,c=r(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=c+"",l===d?null:l===n&&d===s?i:(s=d,i=t(n=l,c)))}}function Bee(e,t){var r=ym(e),n=r==="transform"?yee:kL;return this.attrTween(e,typeof t=="function"?(r.local?Pee:Dee)(r,n,D2(this,"attr."+e,t)):t==null?(r.local?Oee:Mee)(r):(r.local?Iee:Ree)(r,n,t))}function Fee(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function $ee(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Uee(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&$ee(e,i)),r}return s._value=t,s}function zee(e,t){var r,n;function s(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Fee(e,i)),r}return s._value=t,s}function Hee(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=ym(e);return this.tween(r,(n.local?Uee:zee)(n,t))}function qee(e,t){return function(){I2(this,e).delay=+t.apply(this,arguments)}}function Gee(e,t){return t=+t,function(){I2(this,e).delay=t}}function Yee(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qee:Gee)(t,e)):yi(this.node(),t).delay}function Wee(e,t){return function(){qi(this,e).duration=+t.apply(this,arguments)}}function Vee(e,t){return t=+t,function(){qi(this,e).duration=t}}function Kee(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wee:Vee)(t,e)):yi(this.node(),t).duration}function Xee(e,t){if(typeof t!="function")throw new Error;return function(){qi(this,e).ease=t}}function Qee(e){var t=this._id;return arguments.length?this.each(Xee(t,e)):yi(this.node(),t).ease}function Jee(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;qi(this,e).ease=r}}function Zee(e){if(typeof e!="function")throw new Error;return this.each(Jee(this._id,e))}function ete(e){typeof e!="function"&&(e=tL(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var i=t[s],l=i.length,c=n[s]=[],d,h=0;h<l;++h)(d=i[h])&&e.call(d,d.__data__,h,i)&&c.push(d);return new So(n,this._parents,this._name,this._id)}function tte(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,s=r.length,i=Math.min(n,s),l=new Array(n),c=0;c<i;++c)for(var d=t[c],h=r[c],g=d.length,f=l[c]=new Array(g),x,b=0;b<g;++b)(x=d[b]||h[b])&&(f[b]=x);for(;c<n;++c)l[c]=t[c];return new So(l,this._parents,this._name,this._id)}function rte(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function nte(e,t,r){var n,s,i=rte(t)?I2:qi;return function(){var l=i(this,e),c=l.on;c!==n&&(s=(n=c).copy()).on(t,r),l.on=s}}function ate(e,t){var r=this._id;return arguments.length<2?yi(this.node(),r).on.on(e):this.each(nte(r,e,t))}function ste(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function ite(){return this.on("end.remove",ste(this._id))}function ote(e){var t=this._name,r=this._id;typeof e!="function"&&(e=j2(e));for(var n=this._groups,s=n.length,i=new Array(s),l=0;l<s;++l)for(var c=n[l],d=c.length,h=i[l]=new Array(d),g,f,x=0;x<d;++x)(g=c[x])&&(f=e.call(g,g.__data__,x,c))&&("__data__"in g&&(f.__data__=g.__data__),h[x]=f,km(h[x],t,r,x,h,yi(g,r)));return new So(i,this._parents,t,r)}function lte(e){var t=this._name,r=this._id;typeof e!="function"&&(e=eL(e));for(var n=this._groups,s=n.length,i=[],l=[],c=0;c<s;++c)for(var d=n[c],h=d.length,g,f=0;f<h;++f)if(g=d[f]){for(var x=e.call(g,g.__data__,f,d),b,y=yi(g,r),k=0,S=x.length;k<S;++k)(b=x[k])&&km(b,t,r,k,x,y);i.push(x),l.push(g)}return new So(i,l,t,r)}var cte=qg.prototype.constructor;function ute(){return new cte(this._groups,this._parents)}function dte(e,t){var r,n,s;return function(){var i=Wu(this,e),l=(this.style.removeProperty(e),Wu(this,e));return i===l?null:i===r&&l===n?s:s=t(r=i,n=l)}}function wL(e){return function(){this.style.removeProperty(e)}}function hte(e,t,r){var n,s=r+"",i;return function(){var l=Wu(this,e);return l===s?null:l===n?i:i=t(n=l,r)}}function gte(e,t,r){var n,s,i;return function(){var l=Wu(this,e),c=r(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),Wu(this,e))),l===d?null:l===n&&d===s?i:(s=d,i=t(n=l,c))}}function pte(e,t){var r,n,s,i="style."+t,l="end."+i,c;return function(){var d=qi(this,e),h=d.on,g=d.value[i]==null?c||(c=wL(t)):void 0;(h!==r||s!==g)&&(n=(r=h).copy()).on(l,s=g),d.on=n}}function fte(e,t,r){var n=(e+="")=="transform"?bee:kL;return t==null?this.styleTween(e,dte(e,n)).on("end.style."+e,wL(e)):typeof t=="function"?this.styleTween(e,gte(e,n,D2(this,"style."+e,t))).each(pte(this._id,e)):this.styleTween(e,hte(e,n,t),r).on("end.style."+e,null)}function mte(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function xte(e,t,r){var n,s;function i(){var l=t.apply(this,arguments);return l!==s&&(n=(s=l)&&mte(e,l,r)),n}return i._value=t,i}function bte(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,xte(e,t,r??""))}function yte(e){return function(){this.textContent=e}}function vte(e){return function(){var t=e(this);this.textContent=t??""}}function kte(e){return this.tween("text",typeof e=="function"?vte(D2(this,"text",e)):yte(e==null?"":e+""))}function wte(e){return function(t){this.textContent=e.call(this,t)}}function Ste(e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&wte(s)),t}return n._value=e,n}function Ete(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ste(e))}function _te(){for(var e=this._name,t=this._id,r=SL(),n=this._groups,s=n.length,i=0;i<s;++i)for(var l=n[i],c=l.length,d,h=0;h<c;++h)if(d=l[h]){var g=yi(d,t);km(d,e,r,h,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new So(n,this._parents,e,r)}function Tte(){var e,t,r=this,n=r._id,s=r.size();return new Promise(function(i,l){var c={value:l},d={value:function(){--s===0&&i()}};r.each(function(){var h=qi(this,n),g=h.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(d)),h.on=t}),s===0&&i()})}var Cte=0;function So(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function SL(){return++Cte}var go=qg.prototype;So.prototype={constructor:So,select:ote,selectAll:lte,selectChild:go.selectChild,selectChildren:go.selectChildren,filter:ete,merge:tte,selection:ute,transition:_te,call:go.call,nodes:go.nodes,node:go.node,size:go.size,empty:go.empty,each:go.each,on:ate,attr:Bee,attrTween:Hee,style:fte,styleTween:bte,text:kte,textTween:Ete,remove:ite,tween:Lee,delay:Yee,duration:Kee,ease:Qee,easeVarying:Zee,end:Tte,[Symbol.iterator]:go[Symbol.iterator]};function Nte(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ate={time:null,delay:0,duration:250,ease:Nte};function jte(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Lte(e){var t,r;e instanceof So?(t=e._id,e=e._name):(t=SL(),(r=Ate).time=R2(),e=e==null?null:e+"");for(var n=this._groups,s=n.length,i=0;i<s;++i)for(var l=n[i],c=l.length,d,h=0;h<c;++h)(d=l[h])&&km(d,e,t,h,l,r||jte(d,t));return new So(n,this._parents,e,t)}qg.prototype.interrupt=Nee;qg.prototype.transition=Lte;const nv=Math.PI,av=2*nv,Wl=1e-6,Mte=av-Wl;function EL(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Ote(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return EL;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Rte{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?EL:Ote(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,c=this._y1,d=n-t,h=s-r,g=l-t,f=c-r,x=g*g+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Wl)if(!(Math.abs(f*d-h*g)>Wl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-l,y=s-c,k=d*d+h*h,S=b*b+y*y,_=Math.sqrt(k),T=Math.sqrt(x),N=i*Math.tan((nv-Math.acos((k+x-S)/(2*_*T)))/2),I=N/T,R=N/_;Math.abs(I-1)>Wl&&this._append`L${t+I*g},${r+I*f}`,this._append`A${i},${i},0,0,${+(f*b>g*y)},${this._x1=t+R*d},${this._y1=r+R*h}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(s),d=n*Math.sin(s),h=t+c,g=r+d,f=1^l,x=l?s-i:i-s;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>Wl||Math.abs(this._y1-g)>Wl)&&this._append`L${h},${g}`,n&&(x<0&&(x=x%av+av),x>Mte?this._append`A${n},${n},0,1,${f},${t-c},${r-d}A${n},${n},0,1,${f},${this._x1=h},${this._y1=g}`:x>Wl&&this._append`A${n},${n},0,${+(x>=nv)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function mu(e){return function(){return e}}const Fhe=Math.abs,$he=Math.atan2,Uhe=Math.cos,zhe=Math.max,Hhe=Math.min,qhe=Math.sin,Ghe=Math.sqrt,$C=1e-12,P2=Math.PI,UC=P2/2,Yhe=2*P2;function Whe(e){return e>1?0:e<-1?P2:Math.acos(e)}function Vhe(e){return e>=1?UC:e<=-1?-UC:Math.asin(e)}function Ite(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Rte(t)}function Dte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _L(e){this._context=e}_L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function C0(e){return new _L(e)}function Pte(e){return e[0]}function Bte(e){return e[1]}function Fte(e,t){var r=mu(!0),n=null,s=C0,i=null,l=Ite(c);e=typeof e=="function"?e:e===void 0?Pte:mu(e),t=typeof t=="function"?t:t===void 0?Bte:mu(t);function c(d){var h,g=(d=Dte(d)).length,f,x=!1,b;for(n==null&&(i=s(b=l())),h=0;h<=g;++h)!(h<g&&r(f=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(f,h,d),+t(f,h,d));if(b)return i=null,b+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:mu(+d),c):e},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:mu(+d),c):t},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:mu(!!d),c):r},c.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),c):s},c.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),c):n},c}class TL{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function CL(e){return new TL(e,!0)}function NL(e){return new TL(e,!1)}function ul(){}function N0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function wm(e){this._context=e}wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vf(e){return new wm(e)}function AL(e){this._context=e}AL.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $te(e){return new AL(e)}function jL(e){this._context=e}jL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ute(e){return new jL(e)}function LL(e,t){this._basis=new wm(e),this._beta=t}LL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],s=t[0],i=e[r]-n,l=t[r]-s,c=-1,d;++c<=r;)d=c/r,this._basis.point(this._beta*e[c]+(1-this._beta)*(n+d*i),this._beta*t[c]+(1-this._beta)*(s+d*l));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const zte=(function e(t){function r(n){return t===1?new wm(n):new LL(n,t)}return r.beta=function(n){return e(+n)},r})(.85);function A0(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function B2(e,t){this._context=e,this._k=(1-t)/6}B2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:A0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:A0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ML=(function e(t){function r(n){return new B2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function F2(e,t){this._context=e,this._k=(1-t)/6}F2.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hte=(function e(t){function r(n){return new F2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function $2(e,t){this._context=e,this._k=(1-t)/6}$2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qte=(function e(t){function r(n){return new $2(n,t)}return r.tension=function(n){return e(+n)},r})(0);function U2(e,t,r){var n=e._x1,s=e._y1,i=e._x2,l=e._y2;if(e._l01_a>$C){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,s=(s*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>$C){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,g=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*h+e._x1*e._l23_2a-t*e._l12_2a)/g,l=(l*h+e._y1*e._l23_2a-r*e._l12_2a)/g}e._context.bezierCurveTo(n,s,i,l,e._x2,e._y2)}function OL(e,t){this._context=e,this._alpha=t}OL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:U2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RL=(function e(t){function r(n){return t?new OL(n,t):new B2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function IL(e,t){this._context=e,this._alpha=t}IL.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:U2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gte=(function e(t){function r(n){return t?new IL(n,t):new F2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function DL(e,t){this._context=e,this._alpha=t}DL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:U2(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yte=(function e(t){function r(n){return t?new DL(n,t):new $2(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function PL(e){this._context=e}PL.prototype={areaStart:ul,areaEnd:ul,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Wte(e){return new PL(e)}function zC(e){return e<0?-1:1}function HC(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),c=(i*s+l*n)/(n+s);return(zC(i)+zC(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(c))||0}function qC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function By(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,c=(i-n)/3;e._context.bezierCurveTo(n+c,s+c*t,i-c,l-c*r,i,l)}function j0(e){this._context=e}j0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:By(this,this._t0,qC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,By(this,qC(this,r=HC(this,e,t)),r);break;default:By(this,this._t0,r=HC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function BL(e){this._context=new FL(e)}(BL.prototype=Object.create(j0.prototype)).point=function(e,t){j0.prototype.point.call(this,t,e)};function FL(e){this._context=e}FL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function $L(e){return new j0(e)}function UL(e){return new BL(e)}function zL(e){this._context=e}zL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=GC(e),s=GC(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GC(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function HL(e){return new zL(e)}function Sm(e,t){this._context=e,this._t=t}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function qL(e){return new Sm(e,.5)}function GL(e){return new Sm(e,0)}function YL(e){return new Sm(e,1)}function Dh(e,t,r){this.k=e,this.x=t,this.y=r}Dh.prototype={constructor:Dh,scale:function(e){return e===1?this:new Dh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Dh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dh.prototype;var Vte=A(e=>{const{securityLevel:t}=Zr();let r=Pr("body");if(t==="sandbox"){const i=Pr(`#i${e}`).node()?.contentDocument??document;r=Pr(i.body)}return r.select(`#${e}`)},"selectSvgElement");function z2(e){return typeof e>"u"||e===null}A(z2,"isNothing");function WL(e){return typeof e=="object"&&e!==null}A(WL,"isObject");function VL(e){return Array.isArray(e)?e:z2(e)?[]:[e]}A(VL,"toArray");function KL(e,t){var r,n,s,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)s=i[r],e[s]=t[s];return e}A(KL,"extend");function XL(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}A(XL,"repeat");function QL(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}A(QL,"isNegativeZero");var Kte=z2,Xte=WL,Qte=VL,Jte=XL,Zte=QL,ere=KL,oa={isNothing:Kte,isObject:Xte,toArray:Qte,repeat:Jte,isNegativeZero:Zte,extend:ere};function H2(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}A(H2,"formatError");function Ku(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=H2(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}A(Ku,"YAMLException$1");Ku.prototype=Object.create(Error.prototype);Ku.prototype.constructor=Ku;Ku.prototype.toString=A(function(t){return this.name+": "+H2(this,t)},"toString");var ms=Ku;function Kf(e,t,r,n,s){var i="",l="",c=Math.floor(s/2)-1;return n-t>c&&(i=" ... ",t=n-c+i.length),r-n>c&&(l=" ...",r=n+c-l.length),{str:i+e.slice(t,r).replace(/\t/g,"")+l,pos:n-t+i.length}}A(Kf,"getLine");function Xf(e,t){return oa.repeat(" ",t-e.length)+e}A(Xf,"padStart");function JL(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],s=[],i,l=-1;i=r.exec(e.buffer);)s.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var c="",d,h,g=Math.min(e.line+t.linesAfter,s.length).toString().length,f=t.maxLength-(t.indent+g+3);for(d=1;d<=t.linesBefore&&!(l-d<0);d++)h=Kf(e.buffer,n[l-d],s[l-d],e.position-(n[l]-n[l-d]),f),c=oa.repeat(" ",t.indent)+Xf((e.line-d+1).toString(),g)+" | "+h.str+`
`+c;for(h=Kf(e.buffer,n[l],s[l],e.position,f),c+=oa.repeat(" ",t.indent)+Xf((e.line+1).toString(),g)+" | "+h.str+`
`,c+=oa.repeat("-",t.indent+g+3+h.pos)+`^
`,d=1;d<=t.linesAfter&&!(l+d>=s.length);d++)h=Kf(e.buffer,n[l+d],s[l+d],e.position-(n[l]-n[l+d]),f),c+=oa.repeat(" ",t.indent)+Xf((e.line+d+1).toString(),g)+" | "+h.str+`
`;return c.replace(/\n$/,"")}A(JL,"makeSnippet");var tre=JL,rre=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],nre=["scalar","sequence","mapping"];function ZL(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}A(ZL,"compileStyleAliases");function e5(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(rre.indexOf(r)===-1)throw new ms('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=ZL(t.styleAliases||null),nre.indexOf(this.kind)===-1)throw new ms('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}A(e5,"Type$1");var Pa=e5;function sv(e,t){var r=[];return e[t].forEach(function(n){var s=r.length;r.forEach(function(i,l){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(s=l)}),r[s]=n}),r}A(sv,"compileList");function t5(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(s){s.multi?(e.multi[s.kind].push(s),e.multi.fallback.push(s)):e[s.kind][s.tag]=e.fallback[s.tag]=s}for(A(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}A(t5,"compileMap");function L0(e){return this.extend(e)}A(L0,"Schema$1");L0.prototype.extend=A(function(t){var r=[],n=[];if(t instanceof Pa)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new ms("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof Pa))throw new ms("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new ms("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new ms("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof Pa))throw new ms("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(L0.prototype);return s.implicit=(this.implicit||[]).concat(r),s.explicit=(this.explicit||[]).concat(n),s.compiledImplicit=sv(s,"implicit"),s.compiledExplicit=sv(s,"explicit"),s.compiledTypeMap=t5(s.compiledImplicit,s.compiledExplicit),s},"extend");var are=L0,sre=new Pa("tag:yaml.org,2002:str",{kind:"scalar",construct:A(function(e){return e!==null?e:""},"construct")}),ire=new Pa("tag:yaml.org,2002:seq",{kind:"sequence",construct:A(function(e){return e!==null?e:[]},"construct")}),ore=new Pa("tag:yaml.org,2002:map",{kind:"mapping",construct:A(function(e){return e!==null?e:{}},"construct")}),lre=new are({explicit:[sre,ire,ore]});function r5(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}A(r5,"resolveYamlNull");function n5(){return null}A(n5,"constructYamlNull");function a5(e){return e===null}A(a5,"isNull");var cre=new Pa("tag:yaml.org,2002:null",{kind:"scalar",resolve:r5,construct:n5,predicate:a5,represent:{canonical:A(function(){return"~"},"canonical"),lowercase:A(function(){return"null"},"lowercase"),uppercase:A(function(){return"NULL"},"uppercase"),camelcase:A(function(){return"Null"},"camelcase"),empty:A(function(){return""},"empty")},defaultStyle:"lowercase"});function s5(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}A(s5,"resolveYamlBoolean");function i5(e){return e==="true"||e==="True"||e==="TRUE"}A(i5,"constructYamlBoolean");function o5(e){return Object.prototype.toString.call(e)==="[object Boolean]"}A(o5,"isBoolean");var ure=new Pa("tag:yaml.org,2002:bool",{kind:"scalar",resolve:s5,construct:i5,predicate:o5,represent:{lowercase:A(function(e){return e?"true":"false"},"lowercase"),uppercase:A(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:A(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function l5(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}A(l5,"isHexCode");function c5(e){return 48<=e&&e<=55}A(c5,"isOctCode");function u5(e){return 48<=e&&e<=57}A(u5,"isDecCode");function d5(e){if(e===null)return!1;var t=e.length,r=0,n=!1,s;if(!t)return!1;if(s=e[r],(s==="-"||s==="+")&&(s=e[++r]),s==="0"){if(r+1===t)return!0;if(s=e[++r],s==="b"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;n=!0}return n&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!l5(e.charCodeAt(r)))return!1;n=!0}return n&&s!=="_"}if(s==="o"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!c5(e.charCodeAt(r)))return!1;n=!0}return n&&s!=="_"}}if(s==="_")return!1;for(;r<t;r++)if(s=e[r],s!=="_"){if(!u5(e.charCodeAt(r)))return!1;n=!0}return!(!n||s==="_")}A(d5,"resolveYamlInteger");function h5(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}A(h5,"constructYamlInteger");function g5(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!oa.isNegativeZero(e)}A(g5,"isInteger");var dre=new Pa("tag:yaml.org,2002:int",{kind:"scalar",resolve:d5,construct:h5,predicate:g5,represent:{binary:A(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:A(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:A(function(e){return e.toString(10)},"decimal"),hexadecimal:A(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hre=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function p5(e){return!(e===null||!hre.test(e)||e[e.length-1]==="_")}A(p5,"resolveYamlFloat");function f5(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}A(f5,"constructYamlFloat");var gre=/^[-+]?[0-9]+e/;function m5(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(oa.isNegativeZero(e))return"-0.0";return r=e.toString(10),gre.test(r)?r.replace("e",".e"):r}A(m5,"representYamlFloat");function x5(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||oa.isNegativeZero(e))}A(x5,"isFloat");var pre=new Pa("tag:yaml.org,2002:float",{kind:"scalar",resolve:p5,construct:f5,predicate:x5,represent:m5,defaultStyle:"lowercase"}),b5=lre.extend({implicit:[cre,ure,dre,pre]}),fre=b5,y5=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),v5=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function k5(e){return e===null?!1:y5.exec(e)!==null||v5.exec(e)!==null}A(k5,"resolveYamlTimestamp");function w5(e){var t,r,n,s,i,l,c,d=0,h=null,g,f,x;if(t=y5.exec(e),t===null&&(t=v5.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(i=+t[4],l=+t[5],c=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(g=+t[10],f=+(t[11]||0),h=(g*60+f)*6e4,t[9]==="-"&&(h=-h)),x=new Date(Date.UTC(r,n,s,i,l,c,d)),h&&x.setTime(x.getTime()-h),x}A(w5,"constructYamlTimestamp");function S5(e){return e.toISOString()}A(S5,"representYamlTimestamp");var mre=new Pa("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:k5,construct:w5,instanceOf:Date,represent:S5});function E5(e){return e==="<<"||e===null}A(E5,"resolveYamlMerge");var xre=new Pa("tag:yaml.org,2002:merge",{kind:"scalar",resolve:E5}),q2=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function _5(e){if(e===null)return!1;var t,r,n=0,s=e.length,i=q2;for(r=0;r<s;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}A(_5,"resolveYamlBinary");function T5(e){var t,r,n=e.replace(/[\r\n=]/g,""),s=n.length,i=q2,l=0,c=[];for(t=0;t<s;t++)t%4===0&&t&&(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)),l=l<<6|i.indexOf(n.charAt(t));return r=s%4*6,r===0?(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)):r===18?(c.push(l>>10&255),c.push(l>>2&255)):r===12&&c.push(l>>4&255),new Uint8Array(c)}A(T5,"constructYamlBinary");function C5(e){var t="",r=0,n,s,i=e.length,l=q2;for(n=0;n<i;n++)n%3===0&&n&&(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]),r=(r<<8)+e[n];return s=i%3,s===0?(t+=l[r>>18&63],t+=l[r>>12&63],t+=l[r>>6&63],t+=l[r&63]):s===2?(t+=l[r>>10&63],t+=l[r>>4&63],t+=l[r<<2&63],t+=l[64]):s===1&&(t+=l[r>>2&63],t+=l[r<<4&63],t+=l[64],t+=l[64]),t}A(C5,"representYamlBinary");function N5(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}A(N5,"isBinary");var bre=new Pa("tag:yaml.org,2002:binary",{kind:"scalar",resolve:_5,construct:T5,predicate:N5,represent:C5}),yre=Object.prototype.hasOwnProperty,vre=Object.prototype.toString;function A5(e){if(e===null)return!0;var t=[],r,n,s,i,l,c=e;for(r=0,n=c.length;r<n;r+=1){if(s=c[r],l=!1,vre.call(s)!=="[object Object]")return!1;for(i in s)if(yre.call(s,i))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}A(A5,"resolveYamlOmap");function j5(e){return e!==null?e:[]}A(j5,"constructYamlOmap");var kre=new Pa("tag:yaml.org,2002:omap",{kind:"sequence",resolve:A5,construct:j5}),wre=Object.prototype.toString;function L5(e){if(e===null)return!0;var t,r,n,s,i,l=e;for(i=new Array(l.length),t=0,r=l.length;t<r;t+=1){if(n=l[t],wre.call(n)!=="[object Object]"||(s=Object.keys(n),s.length!==1))return!1;i[t]=[s[0],n[s[0]]]}return!0}A(L5,"resolveYamlPairs");function M5(e){if(e===null)return[];var t,r,n,s,i,l=e;for(i=new Array(l.length),t=0,r=l.length;t<r;t+=1)n=l[t],s=Object.keys(n),i[t]=[s[0],n[s[0]]];return i}A(M5,"constructYamlPairs");var Sre=new Pa("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:L5,construct:M5}),Ere=Object.prototype.hasOwnProperty;function O5(e){if(e===null)return!0;var t,r=e;for(t in r)if(Ere.call(r,t)&&r[t]!==null)return!1;return!0}A(O5,"resolveYamlSet");function R5(e){return e!==null?e:{}}A(R5,"constructYamlSet");var _re=new Pa("tag:yaml.org,2002:set",{kind:"mapping",resolve:O5,construct:R5}),I5=fre.extend({implicit:[mre,xre],explicit:[bre,kre,Sre,_re]}),dl=Object.prototype.hasOwnProperty,M0=1,D5=2,P5=3,O0=4,Fy=1,Tre=2,YC=3,Cre=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Nre=/[\x85\u2028\u2029]/,Are=/[,\[\]\{\}]/,B5=/^(?:!|!!|![a-z\-]+!)$/i,F5=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function iv(e){return Object.prototype.toString.call(e)}A(iv,"_class");function mi(e){return e===10||e===13}A(mi,"is_EOL");function cl(e){return e===9||e===32}A(cl,"is_WHITE_SPACE");function Qa(e){return e===9||e===32||e===10||e===13}A(Qa,"is_WS_OR_EOL");function ec(e){return e===44||e===91||e===93||e===123||e===125}A(ec,"is_FLOW_INDICATOR");function $5(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}A($5,"fromHexCode");function U5(e){return e===120?2:e===117?4:e===85?8:0}A(U5,"escapedHexLen");function z5(e){return 48<=e&&e<=57?e-48:-1}A(z5,"fromDecimalCode");function ov(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}A(ov,"simpleEscapeSequence");function H5(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}A(H5,"charFromCodepoint");var q5=new Array(256),G5=new Array(256);for(ql=0;ql<256;ql++)q5[ql]=ov(ql)?1:0,G5[ql]=ov(ql);var ql;function Y5(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||I5,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}A(Y5,"State$1");function G2(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=tre(r),new ms(t,r)}A(G2,"generateError");function Ut(e,t){throw G2(e,t)}A(Ut,"throwError");function xg(e,t){e.onWarning&&e.onWarning.call(null,G2(e,t))}A(xg,"throwWarning");var WC={YAML:A(function(t,r,n){var s,i,l;t.version!==null&&Ut(t,"duplication of %YAML directive"),n.length!==1&&Ut(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),s===null&&Ut(t,"ill-formed argument of the YAML directive"),i=parseInt(s[1],10),l=parseInt(s[2],10),i!==1&&Ut(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=l<2,l!==1&&l!==2&&xg(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:A(function(t,r,n){var s,i;n.length!==2&&Ut(t,"TAG directive accepts exactly two arguments"),s=n[0],i=n[1],B5.test(s)||Ut(t,"ill-formed tag handle (first argument) of the TAG directive"),dl.call(t.tagMap,s)&&Ut(t,'there is a previously declared suffix for "'+s+'" tag handle'),F5.test(i)||Ut(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Ut(t,"tag prefix is malformed: "+i)}t.tagMap[s]=i},"handleTagDirective")};function ko(e,t,r,n){var s,i,l,c;if(t<r){if(c=e.input.slice(t,r),n)for(s=0,i=c.length;s<i;s+=1)l=c.charCodeAt(s),l===9||32<=l&&l<=1114111||Ut(e,"expected valid JSON character");else Cre.test(c)&&Ut(e,"the stream contains non-printable characters");e.result+=c}}A(ko,"captureSegment");function lv(e,t,r,n){var s,i,l,c;for(oa.isObject(r)||Ut(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),l=0,c=s.length;l<c;l+=1)i=s[l],dl.call(t,i)||(t[i]=r[i],n[i]=!0)}A(lv,"mergeMappings");function tc(e,t,r,n,s,i,l,c,d){var h,g;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,g=s.length;h<g;h+=1)Array.isArray(s[h])&&Ut(e,"nested arrays are not supported inside keys"),typeof s=="object"&&iv(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&iv(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(h=0,g=i.length;h<g;h+=1)lv(e,t,i[h],r);else lv(e,t,i,r);else!e.json&&!dl.call(r,s)&&dl.call(t,s)&&(e.line=l||e.line,e.lineStart=c||e.lineStart,e.position=d||e.position,Ut(e,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[s]=i,delete r[s];return t}A(tc,"storeMappingPair");function Em(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Ut(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}A(Em,"readLineBreak");function Wn(e,t,r){for(var n=0,s=e.input.charCodeAt(e.position);s!==0;){for(;cl(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(mi(s))for(Em(e),s=e.input.charCodeAt(e.position),n++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&xg(e,"deficient indentation"),n}A(Wn,"skipSeparationSpace");function Yg(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Qa(r)))}A(Yg,"testDocumentSeparator");function _m(e,t){t===1?e.result+=" ":t>1&&(e.result+=oa.repeat(`
`,t-1))}A(_m,"writeFoldedLines");function W5(e,t,r){var n,s,i,l,c,d,h,g,f=e.kind,x=e.result,b;if(b=e.input.charCodeAt(e.position),Qa(b)||ec(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(s=e.input.charCodeAt(e.position+1),Qa(s)||r&&ec(s)))return!1;for(e.kind="scalar",e.result="",i=l=e.position,c=!1;b!==0;){if(b===58){if(s=e.input.charCodeAt(e.position+1),Qa(s)||r&&ec(s))break}else if(b===35){if(n=e.input.charCodeAt(e.position-1),Qa(n))break}else{if(e.position===e.lineStart&&Yg(e)||r&&ec(b))break;if(mi(b))if(d=e.line,h=e.lineStart,g=e.lineIndent,Wn(e,!1,-1),e.lineIndent>=t){c=!0,b=e.input.charCodeAt(e.position);continue}else{e.position=l,e.line=d,e.lineStart=h,e.lineIndent=g;break}}c&&(ko(e,i,l,!1),_m(e,e.line-d),i=l=e.position,c=!1),cl(b)||(l=e.position+1),b=e.input.charCodeAt(++e.position)}return ko(e,i,l,!1),e.result?!0:(e.kind=f,e.result=x,!1)}A(W5,"readPlainScalar");function V5(e,t){var r,n,s;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ko(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,s=e.position;else return!0;else mi(r)?(ko(e,n,s,!0),_m(e,Wn(e,!1,t)),n=s=e.position):e.position===e.lineStart&&Yg(e)?Ut(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);Ut(e,"unexpected end of the stream within a single quoted scalar")}A(V5,"readSingleQuotedScalar");function K5(e,t){var r,n,s,i,l,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return ko(e,r,e.position,!0),e.position++,!0;if(c===92){if(ko(e,r,e.position,!0),c=e.input.charCodeAt(++e.position),mi(c))Wn(e,!1,t);else if(c<256&&q5[c])e.result+=G5[c],e.position++;else if((l=U5(c))>0){for(s=l,i=0;s>0;s--)c=e.input.charCodeAt(++e.position),(l=$5(c))>=0?i=(i<<4)+l:Ut(e,"expected hexadecimal character");e.result+=H5(i),e.position++}else Ut(e,"unknown escape sequence");r=n=e.position}else mi(c)?(ko(e,r,n,!0),_m(e,Wn(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Yg(e)?Ut(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Ut(e,"unexpected end of the stream within a double quoted scalar")}A(K5,"readDoubleQuotedScalar");function X5(e,t){var r=!0,n,s,i,l=e.tag,c,d=e.anchor,h,g,f,x,b,y=Object.create(null),k,S,_,T;if(T=e.input.charCodeAt(e.position),T===91)g=93,b=!1,c=[];else if(T===123)g=125,b=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),T=e.input.charCodeAt(++e.position);T!==0;){if(Wn(e,!0,t),T=e.input.charCodeAt(e.position),T===g)return e.position++,e.tag=l,e.anchor=d,e.kind=b?"mapping":"sequence",e.result=c,!0;r?T===44&&Ut(e,"expected the node content, but found ','"):Ut(e,"missed comma between flow collection entries"),S=k=_=null,f=x=!1,T===63&&(h=e.input.charCodeAt(e.position+1),Qa(h)&&(f=x=!0,e.position++,Wn(e,!0,t))),n=e.line,s=e.lineStart,i=e.position,pc(e,t,M0,!1,!0),S=e.tag,k=e.result,Wn(e,!0,t),T=e.input.charCodeAt(e.position),(x||e.line===n)&&T===58&&(f=!0,T=e.input.charCodeAt(++e.position),Wn(e,!0,t),pc(e,t,M0,!1,!0),_=e.result),b?tc(e,c,y,S,k,_,n,s,i):f?c.push(tc(e,null,y,S,k,_,n,s,i)):c.push(k),Wn(e,!0,t),T=e.input.charCodeAt(e.position),T===44?(r=!0,T=e.input.charCodeAt(++e.position)):r=!1}Ut(e,"unexpected end of the stream within a flow collection")}A(X5,"readFlowCollection");function Q5(e,t){var r,n,s=Fy,i=!1,l=!1,c=t,d=0,h=!1,g,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)Fy===s?s=f===43?YC:Tre:Ut(e,"repeat of a chomping mode identifier");else if((g=z5(f))>=0)g===0?Ut(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ut(e,"repeat of an indentation width identifier"):(c=t+g-1,l=!0);else break;if(cl(f)){do f=e.input.charCodeAt(++e.position);while(cl(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!mi(f)&&f!==0)}for(;f!==0;){for(Em(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!l||e.lineIndent<c)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!l&&e.lineIndent>c&&(c=e.lineIndent),mi(f)){d++;continue}if(e.lineIndent<c){s===YC?e.result+=oa.repeat(`
`,i?1+d:d):s===Fy&&i&&(e.result+=`
`);break}for(n?cl(f)?(h=!0,e.result+=oa.repeat(`
`,i?1+d:d)):h?(h=!1,e.result+=oa.repeat(`
`,d+1)):d===0?i&&(e.result+=" "):e.result+=oa.repeat(`
`,d):e.result+=oa.repeat(`
`,i?1+d:d),i=!0,l=!0,d=0,r=e.position;!mi(f)&&f!==0;)f=e.input.charCodeAt(++e.position);ko(e,r,e.position,!1)}return!0}A(Q5,"readBlockScalar");function cv(e,t){var r,n=e.tag,s=e.anchor,i=[],l,c=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),d=e.input.charCodeAt(e.position);d!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ut(e,"tab characters must not be used in indentation")),!(d!==45||(l=e.input.charCodeAt(e.position+1),!Qa(l))));){if(c=!0,e.position++,Wn(e,!0,-1)&&e.lineIndent<=t){i.push(null),d=e.input.charCodeAt(e.position);continue}if(r=e.line,pc(e,t,P5,!1,!0),i.push(e.result),Wn(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&d!==0)Ut(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return c?(e.tag=n,e.anchor=s,e.kind="sequence",e.result=i,!0):!1}A(cv,"readBlockSequence");function J5(e,t,r){var n,s,i,l,c,d,h=e.tag,g=e.anchor,f={},x=Object.create(null),b=null,y=null,k=null,S=!1,_=!1,T;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),T=e.input.charCodeAt(e.position);T!==0;){if(!S&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Ut(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(T===63||T===58)&&Qa(n))T===63?(S&&(tc(e,f,x,b,y,null,l,c,d),b=y=k=null),_=!0,S=!0,s=!0):S?(S=!1,s=!0):Ut(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,T=n;else{if(l=e.line,c=e.lineStart,d=e.position,!pc(e,r,D5,!1,!0))break;if(e.line===i){for(T=e.input.charCodeAt(e.position);cl(T);)T=e.input.charCodeAt(++e.position);if(T===58)T=e.input.charCodeAt(++e.position),Qa(T)||Ut(e,"a whitespace character is expected after the key-value separator within a block mapping"),S&&(tc(e,f,x,b,y,null,l,c,d),b=y=k=null),_=!0,S=!1,s=!1,b=e.tag,y=e.result;else if(_)Ut(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=h,e.anchor=g,!0}else if(_)Ut(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=h,e.anchor=g,!0}if((e.line===i||e.lineIndent>t)&&(S&&(l=e.line,c=e.lineStart,d=e.position),pc(e,t,O0,!0,s)&&(S?y=e.result:k=e.result),S||(tc(e,f,x,b,y,k,l,c,d),b=y=k=null),Wn(e,!0,-1),T=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&T!==0)Ut(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return S&&tc(e,f,x,b,y,null,l,c,d),_&&(e.tag=h,e.anchor=g,e.kind="mapping",e.result=f),_}A(J5,"readBlockMapping");function Z5(e){var t,r=!1,n=!1,s,i,l;if(l=e.input.charCodeAt(e.position),l!==33)return!1;if(e.tag!==null&&Ut(e,"duplication of a tag property"),l=e.input.charCodeAt(++e.position),l===60?(r=!0,l=e.input.charCodeAt(++e.position)):l===33?(n=!0,s="!!",l=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do l=e.input.charCodeAt(++e.position);while(l!==0&&l!==62);e.position<e.length?(i=e.input.slice(t,e.position),l=e.input.charCodeAt(++e.position)):Ut(e,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!Qa(l);)l===33&&(n?Ut(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),B5.test(s)||Ut(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),l=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),Are.test(i)&&Ut(e,"tag suffix cannot contain flow indicator characters")}i&&!F5.test(i)&&Ut(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Ut(e,"tag name is malformed: "+i)}return r?e.tag=i:dl.call(e.tagMap,s)?e.tag=e.tagMap[s]+i:s==="!"?e.tag="!"+i:s==="!!"?e.tag="tag:yaml.org,2002:"+i:Ut(e,'undeclared tag handle "'+s+'"'),!0}A(Z5,"readTagProperty");function eM(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Ut(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Qa(r)&&!ec(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Ut(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}A(eM,"readAnchorProperty");function tM(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Qa(n)&&!ec(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Ut(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),dl.call(e.anchorMap,r)||Ut(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Wn(e,!0,-1),!0}A(tM,"readAlias");function pc(e,t,r,n,s){var i,l,c,d=1,h=!1,g=!1,f,x,b,y,k,S;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=l=c=O0===r||P5===r,n&&Wn(e,!0,-1)&&(h=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),d===1)for(;Z5(e)||eM(e);)Wn(e,!0,-1)?(h=!0,c=i,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):c=!1;if(c&&(c=h||s),(d===1||O0===r)&&(M0===r||D5===r?k=t:k=t+1,S=e.position-e.lineStart,d===1?c&&(cv(e,S)||J5(e,S,k))||X5(e,k)?g=!0:(l&&Q5(e,k)||V5(e,k)||K5(e,k)?g=!0:tM(e)?(g=!0,(e.tag!==null||e.anchor!==null)&&Ut(e,"alias node should not have any properties")):W5(e,k,M0===r)&&(g=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d===0&&(g=c&&cv(e,S))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Ut(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,x=e.implicitTypes.length;f<x;f+=1)if(y=e.implicitTypes[f],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(dl.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,b=e.typeMap.multi[e.kind||"fallback"],f=0,x=b.length;f<x;f+=1)if(e.tag.slice(0,b[f].tag.length)===b[f].tag){y=b[f];break}y||Ut(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&Ut(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Ut(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||g}A(pc,"composeNode");function rM(e){var t=e.position,r,n,s,i=!1,l;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(l=e.input.charCodeAt(e.position))!==0&&(Wn(e,!0,-1),l=e.input.charCodeAt(e.position),!(e.lineIndent>0||l!==37));){for(i=!0,l=e.input.charCodeAt(++e.position),r=e.position;l!==0&&!Qa(l);)l=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),s=[],n.length<1&&Ut(e,"directive name must not be less than one character in length");l!==0;){for(;cl(l);)l=e.input.charCodeAt(++e.position);if(l===35){do l=e.input.charCodeAt(++e.position);while(l!==0&&!mi(l));break}if(mi(l))break;for(r=e.position;l!==0&&!Qa(l);)l=e.input.charCodeAt(++e.position);s.push(e.input.slice(r,e.position))}l!==0&&Em(e),dl.call(WC,n)?WC[n](e,n,s):xg(e,'unknown document directive "'+n+'"')}if(Wn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Wn(e,!0,-1)):i&&Ut(e,"directives end mark is expected"),pc(e,e.lineIndent-1,O0,!1,!0),Wn(e,!0,-1),e.checkLineBreaks&&Nre.test(e.input.slice(t,e.position))&&xg(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Yg(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Wn(e,!0,-1));return}if(e.position<e.length-1)Ut(e,"end of the stream or a document separator is expected");else return}A(rM,"readDocument");function Y2(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Y5(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Ut(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)rM(r);return r.documents}A(Y2,"loadDocuments");function jre(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Y2(e,r);if(typeof t!="function")return n;for(var s=0,i=n.length;s<i;s+=1)t(n[s])}A(jre,"loadAll$1");function nM(e,t){var r=Y2(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ms("expected a single document in the stream, but found more")}}A(nM,"load$1");var Lre=nM,Mre={load:Lre},aM=Object.prototype.toString,sM=Object.prototype.hasOwnProperty,W2=65279,Ore=9,bg=10,Rre=13,Ire=32,Dre=33,Pre=34,uv=35,Bre=37,Fre=38,$re=39,Ure=42,iM=44,zre=45,R0=58,Hre=61,qre=62,Gre=63,Yre=64,oM=91,lM=93,Wre=96,cM=123,Vre=124,uM=125,za={};za[0]="\\0";za[7]="\\a";za[8]="\\b";za[9]="\\t";za[10]="\\n";za[11]="\\v";za[12]="\\f";za[13]="\\r";za[27]="\\e";za[34]='\\"';za[92]="\\\\";za[133]="\\N";za[160]="\\_";za[8232]="\\L";za[8233]="\\P";var Kre=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Xre=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function dM(e,t){var r,n,s,i,l,c,d;if(t===null)return{};for(r={},n=Object.keys(t),s=0,i=n.length;s<i;s+=1)l=n[s],c=String(t[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),d=e.compiledTypeMap.fallback[l],d&&sM.call(d.styleAliases,c)&&(c=d.styleAliases[c]),r[l]=c;return r}A(dM,"compileStyleMap");function hM(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new ms("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+oa.repeat("0",n-t.length)+t}A(hM,"encodeHex");var Qre=1,yg=2;function gM(e){this.schema=e.schema||I5,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=oa.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=dM(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?yg:Qre,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}A(gM,"State");function dv(e,t){for(var r=oa.repeat(" ",t),n=0,s=-1,i="",l,c=e.length;n<c;)s=e.indexOf(`
`,n),s===-1?(l=e.slice(n),n=c):(l=e.slice(n,s+1),n=s+1),l.length&&l!==`
`&&(i+=r),i+=l;return i}A(dv,"indentString");function I0(e,t){return`
`+oa.repeat(" ",e.indent*t)}A(I0,"generateNextLine");function pM(e,t){var r,n,s;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(s=e.implicitTypes[r],s.resolve(t))return!0;return!1}A(pM,"testImplicitResolving");function vg(e){return e===Ire||e===Ore}A(vg,"isWhitespace");function Xu(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==W2||65536<=e&&e<=1114111}A(Xu,"isPrintable");function hv(e){return Xu(e)&&e!==W2&&e!==Rre&&e!==bg}A(hv,"isNsCharOrWhitespace");function gv(e,t,r){var n=hv(e),s=n&&!vg(e);return(r?n:n&&e!==iM&&e!==oM&&e!==lM&&e!==cM&&e!==uM)&&e!==uv&&!(t===R0&&!s)||hv(t)&&!vg(t)&&e===uv||t===R0&&s}A(gv,"isPlainSafe");function fM(e){return Xu(e)&&e!==W2&&!vg(e)&&e!==zre&&e!==Gre&&e!==R0&&e!==iM&&e!==oM&&e!==lM&&e!==cM&&e!==uM&&e!==uv&&e!==Fre&&e!==Ure&&e!==Dre&&e!==Vre&&e!==Hre&&e!==qre&&e!==$re&&e!==Pre&&e!==Bre&&e!==Yre&&e!==Wre}A(fM,"isPlainSafeFirst");function mM(e){return!vg(e)&&e!==R0}A(mM,"isPlainSafeLast");function _u(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}A(_u,"codePointAt");function V2(e){var t=/^\n* /;return t.test(e)}A(V2,"needIndentIndicator");var xM=1,pv=2,bM=3,yM=4,wu=5;function vM(e,t,r,n,s,i,l,c){var d,h=0,g=null,f=!1,x=!1,b=n!==-1,y=-1,k=fM(_u(e,0))&&mM(_u(e,e.length-1));if(t||l)for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=_u(e,d),!Xu(h))return wu;k=k&&gv(h,g,c),g=h}else{for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=_u(e,d),h===bg)f=!0,b&&(x=x||d-y-1>n&&e[y+1]!==" ",y=d);else if(!Xu(h))return wu;k=k&&gv(h,g,c),g=h}x=x||b&&d-y-1>n&&e[y+1]!==" "}return!f&&!x?k&&!l&&!s(e)?xM:i===yg?wu:pv:r>9&&V2(e)?wu:l?i===yg?wu:pv:x?yM:bM}A(vM,"chooseScalarStyle");function kM(e,t,r,n,s){e.dump=(function(){if(t.length===0)return e.quotingType===yg?'""':"''";if(!e.noCompatMode&&(Kre.indexOf(t)!==-1||Xre.test(t)))return e.quotingType===yg?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),l=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),c=n||e.flowLevel>-1&&r>=e.flowLevel;function d(h){return pM(e,h)}switch(A(d,"testAmbiguity"),vM(t,c,e.indent,l,d,e.quotingType,e.forceQuotes&&!n,s)){case xM:return t;case pv:return"'"+t.replace(/'/g,"''")+"'";case bM:return"|"+fv(t,e.indent)+mv(dv(t,i));case yM:return">"+fv(t,e.indent)+mv(dv(wM(t,l),i));case wu:return'"'+SM(t)+'"';default:throw new ms("impossible error: invalid scalar style")}})()}A(kM,"writeScalar");function fv(e,t){var r=V2(e)?String(t):"",n=e[e.length-1]===`
`,s=n&&(e[e.length-2]===`
`||e===`
`),i=s?"+":n?"":"-";return r+i+`
`}A(fv,"blockHeader");function mv(e){return e[e.length-1]===`
`?e.slice(0,-1):e}A(mv,"dropEndingNewline");function wM(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var h=e.indexOf(`
`);return h=h!==-1?h:e.length,r.lastIndex=h,xv(e.slice(0,h),t)})(),s=e[0]===`
`||e[0]===" ",i,l;l=r.exec(e);){var c=l[1],d=l[2];i=d[0]===" ",n+=c+(!s&&!i&&d!==""?`
`:"")+xv(d,t),s=i}return n}A(wM,"foldString");function xv(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,s=0,i,l=0,c=0,d="";n=r.exec(e);)c=n.index,c-s>t&&(i=l>s?l:c,d+=`
`+e.slice(s,i),s=i+1),l=c;return d+=`
`,e.length-s>t&&l>s?d+=e.slice(s,l)+`
`+e.slice(l+1):d+=e.slice(s),d.slice(1)}A(xv,"foldLine");function SM(e){for(var t="",r=0,n,s=0;s<e.length;r>=65536?s+=2:s++)r=_u(e,s),n=za[r],!n&&Xu(r)?(t+=e[s],r>=65536&&(t+=e[s+1])):t+=n||hM(r);return t}A(SM,"escapeString");function EM(e,t,r){var n="",s=e.tag,i,l,c;for(i=0,l=r.length;i<l;i+=1)c=r[i],e.replacer&&(c=e.replacer.call(r,String(i),c)),(Bi(e,t,c,!1,!1)||typeof c>"u"&&Bi(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=s,e.dump="["+n+"]"}A(EM,"writeFlowSequence");function bv(e,t,r,n){var s="",i=e.tag,l,c,d;for(l=0,c=r.length;l<c;l+=1)d=r[l],e.replacer&&(d=e.replacer.call(r,String(l),d)),(Bi(e,t+1,d,!0,!0,!1,!0)||typeof d>"u"&&Bi(e,t+1,null,!0,!0,!1,!0))&&((!n||s!=="")&&(s+=I0(e,t)),e.dump&&bg===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=i,e.dump=s||"[]"}A(bv,"writeBlockSequence");function _M(e,t,r){var n="",s=e.tag,i=Object.keys(r),l,c,d,h,g;for(l=0,c=i.length;l<c;l+=1)g="",n!==""&&(g+=", "),e.condenseFlow&&(g+='"'),d=i[l],h=r[d],e.replacer&&(h=e.replacer.call(r,d,h)),Bi(e,t,d,!1,!1)&&(e.dump.length>1024&&(g+="? "),g+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Bi(e,t,h,!1,!1)&&(g+=e.dump,n+=g));e.tag=s,e.dump="{"+n+"}"}A(_M,"writeFlowMapping");function TM(e,t,r,n){var s="",i=e.tag,l=Object.keys(r),c,d,h,g,f,x;if(e.sortKeys===!0)l.sort();else if(typeof e.sortKeys=="function")l.sort(e.sortKeys);else if(e.sortKeys)throw new ms("sortKeys must be a boolean or a function");for(c=0,d=l.length;c<d;c+=1)x="",(!n||s!=="")&&(x+=I0(e,t)),h=l[c],g=r[h],e.replacer&&(g=e.replacer.call(r,h,g)),Bi(e,t+1,h,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&bg===e.dump.charCodeAt(0)?x+="?":x+="? "),x+=e.dump,f&&(x+=I0(e,t)),Bi(e,t+1,g,!0,f)&&(e.dump&&bg===e.dump.charCodeAt(0)?x+=":":x+=": ",x+=e.dump,s+=x));e.tag=i,e.dump=s||"{}"}A(TM,"writeBlockMapping");function yv(e,t,r){var n,s,i,l,c,d;for(s=r?e.explicitTypes:e.implicitTypes,i=0,l=s.length;i<l;i+=1)if(c=s[i],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof t=="object"&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(r?c.multi&&c.representName?e.tag=c.representName(t):e.tag=c.tag:e.tag="?",c.represent){if(d=e.styleMap[c.tag]||c.defaultStyle,aM.call(c.represent)==="[object Function]")n=c.represent(t,d);else if(sM.call(c.represent,d))n=c.represent[d](t,d);else throw new ms("!<"+c.tag+'> tag resolver accepts not "'+d+'" style');e.dump=n}return!0}return!1}A(yv,"detectType");function Bi(e,t,r,n,s,i,l){e.tag=null,e.dump=r,yv(e,r,!1)||yv(e,r,!0);var c=aM.call(e.dump),d=n,h;n&&(n=e.flowLevel<0||e.flowLevel>t);var g=c==="[object Object]"||c==="[object Array]",f,x;if(g&&(f=e.duplicates.indexOf(r),x=f!==-1),(e.tag!==null&&e.tag!=="?"||x||e.indent!==2&&t>0)&&(s=!1),x&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(g&&x&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),c==="[object Object]")n&&Object.keys(e.dump).length!==0?(TM(e,t,e.dump,s),x&&(e.dump="&ref_"+f+e.dump)):(_M(e,t,e.dump),x&&(e.dump="&ref_"+f+" "+e.dump));else if(c==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!l&&t>0?bv(e,t-1,e.dump,s):bv(e,t,e.dump,s),x&&(e.dump="&ref_"+f+e.dump)):(EM(e,t,e.dump),x&&(e.dump="&ref_"+f+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&kM(e,e.dump,t,i,d);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new ms("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(h=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",e.dump=h+" "+e.dump)}return!0}A(Bi,"writeNode");function CM(e,t){var r=[],n=[],s,i;for(D0(e,r,n),s=0,i=n.length;s<i;s+=1)t.duplicates.push(r[n[s]]);t.usedDuplicates=new Array(i)}A(CM,"getDuplicateReferences");function D0(e,t,r){var n,s,i;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,i=e.length;s<i;s+=1)D0(e[s],t,r);else for(n=Object.keys(e),s=0,i=n.length;s<i;s+=1)D0(e[n[s]],t,r)}A(D0,"inspectNode");function Jre(e,t){t=t||{};var r=new gM(t);r.noRefs||CM(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Bi(r,0,n,!0,!0)?r.dump+`
`:""}A(Jre,"dump$1");function Zre(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}A(Zre,"renamed");var ene=b5,tne=Mre.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Ra={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},VC={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Ph(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Nn(e),t=Nn(t);const[r,n]=[e.x,e.y],[s,i]=[t.x,t.y],l=s-r,c=i-n;return{angle:Math.atan(c/l),deltaX:l,deltaY:c}}A(Ph,"calculateDeltaAndAngle");var Nn=A(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),rne=A(e=>({x:A(function(t,r,n){let s=0;const i=Nn(n[0]).x<Nn(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Ra,e.arrowTypeStart)){const{angle:b,deltaX:y}=Ph(n[0],n[1]);s=Ra[e.arrowTypeStart]*Math.cos(b)*(y>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ra,e.arrowTypeEnd)){const{angle:b,deltaX:y}=Ph(n[n.length-1],n[n.length-2]);s=Ra[e.arrowTypeEnd]*Math.cos(b)*(y>=0?1:-1)}const l=Math.abs(Nn(t).x-Nn(n[n.length-1]).x),c=Math.abs(Nn(t).y-Nn(n[n.length-1]).y),d=Math.abs(Nn(t).x-Nn(n[0]).x),h=Math.abs(Nn(t).y-Nn(n[0]).y),g=Ra[e.arrowTypeStart],f=Ra[e.arrowTypeEnd],x=1;if(l<f&&l>0&&c<f){let b=f+x-l;b*=i==="right"?-1:1,s-=b}if(d<g&&d>0&&h<g){let b=g+x-d;b*=i==="right"?-1:1,s+=b}return Nn(t).x+s},"x"),y:A(function(t,r,n){let s=0;const i=Nn(n[0]).y<Nn(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Ra,e.arrowTypeStart)){const{angle:b,deltaY:y}=Ph(n[0],n[1]);s=Ra[e.arrowTypeStart]*Math.abs(Math.sin(b))*(y>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ra,e.arrowTypeEnd)){const{angle:b,deltaY:y}=Ph(n[n.length-1],n[n.length-2]);s=Ra[e.arrowTypeEnd]*Math.abs(Math.sin(b))*(y>=0?1:-1)}const l=Math.abs(Nn(t).y-Nn(n[n.length-1]).y),c=Math.abs(Nn(t).x-Nn(n[n.length-1]).x),d=Math.abs(Nn(t).y-Nn(n[0]).y),h=Math.abs(Nn(t).x-Nn(n[0]).x),g=Ra[e.arrowTypeStart],f=Ra[e.arrowTypeEnd],x=1;if(l<f&&l>0&&c<f){let b=f+x-l;b*=i==="up"?-1:1,s-=b}if(d<g&&d>0&&h<g){let b=g+x-d;b*=i==="up"?-1:1,s+=b}return Nn(t).y+s},"y")}),"getLineFunctionsWithOffset"),K2=A(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),nne=A(e=>{const{handDrawnSeed:t}=Zr();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),hd=A(e=>{const t=ane([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),ane=A(e=>{const t=new Map;return e.forEach(r=>{const[n,s]=r.split(":");t.set(n.trim(),s?.trim())}),t},"styles2Map"),NM=A(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),Ot=A(e=>{const{stylesArray:t}=hd(e),r=[],n=[],s=[],i=[];return t.forEach(l=>{const c=l[0];NM(c)?r.push(l.join(":")+" !important"):(n.push(l.join(":")+" !important"),c.includes("stroke")&&s.push(l.join(":")+" !important"),c==="fill"&&i.push(l.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:s,backgroundStyles:i}},"styles2String"),Mt=A((e,t)=>{const{themeVariables:r,handDrawnSeed:n}=Zr(),{nodeBorder:s,mainBkg:i}=r,{stylesMap:l}=hd(e);return Object.assign({roughness:.7,fill:l.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:l.get("stroke")||s,seed:n,strokeWidth:l.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:sne(l.get("stroke-dasharray"))},t)},"userNodeOverrides"),sne=A(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const s=isNaN(t[0])?0:t[0];return[s,s]}const r=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[r,n]},"getStrokeDashArray"),Eh={},sa={},KC;function ine(){return KC||(KC=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.BLANK_URL=sa.relativeFirstCharacters=sa.whitespaceEscapeCharsRegex=sa.urlSchemeRegex=sa.ctrlCharactersRegex=sa.htmlCtrlEntityRegex=sa.htmlEntitiesRegex=sa.invalidProtocolRegex=void 0,sa.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,sa.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,sa.htmlCtrlEntityRegex=/&(newline|tab);/gi,sa.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,sa.urlSchemeRegex=/^.+(:|&colon;)/gim,sa.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,sa.relativeFirstCharacters=[".","/"],sa.BLANK_URL="about:blank"),sa}var XC;function one(){if(XC)return Eh;XC=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.sanitizeUrl=void 0;var e=ine();function t(l){return e.relativeFirstCharacters.indexOf(l[0])>-1}function r(l){var c=l.replace(e.ctrlCharactersRegex,"");return c.replace(e.htmlEntitiesRegex,function(d,h){return String.fromCharCode(h)})}function n(l){return URL.canParse(l)}function s(l){try{return decodeURIComponent(l)}catch{return l}}function i(l){if(!l)return e.BLANK_URL;var c,d=s(l.trim());do d=r(d).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),d=s(d),c=d.match(e.ctrlCharactersRegex)||d.match(e.htmlEntitiesRegex)||d.match(e.htmlCtrlEntityRegex)||d.match(e.whitespaceEscapeCharsRegex);while(c&&c.length>0);var h=d;if(!h)return e.BLANK_URL;if(t(h))return h;var g=h.trimStart(),f=g.match(e.urlSchemeRegex);if(!f)return h;var x=f[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(x))return e.BLANK_URL;var b=g.replace(/\\/g,"/");if(x==="mailto:"||x.includes("://"))return b;if(x==="http:"||x==="https:"){if(!n(b))return e.BLANK_URL;var y=new URL(b);return y.protocol=y.protocol.toLowerCase(),y.hostname=y.hostname.toLowerCase(),y.toString()}return b}return Eh.sanitizeUrl=i,Eh}var lne=one(),AM=typeof global=="object"&&global&&global.Object===Object&&global,cne=typeof self=="object"&&self&&self.Object===Object&&self,Gi=AM||cne||Function("return this")(),P0=Gi.Symbol,jM=Object.prototype,une=jM.hasOwnProperty,dne=jM.toString,_h=P0?P0.toStringTag:void 0;function hne(e){var t=une.call(e,_h),r=e[_h];try{e[_h]=void 0;var n=!0}catch{}var s=dne.call(e);return n&&(t?e[_h]=r:delete e[_h]),s}var gne=Object.prototype,pne=gne.toString;function fne(e){return pne.call(e)}var mne="[object Null]",xne="[object Undefined]",QC=P0?P0.toStringTag:void 0;function gd(e){return e==null?e===void 0?xne:mne:QC&&QC in Object(e)?hne(e):fne(e)}function Ec(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var bne="[object AsyncFunction]",yne="[object Function]",vne="[object GeneratorFunction]",kne="[object Proxy]";function X2(e){if(!Ec(e))return!1;var t=gd(e);return t==yne||t==vne||t==bne||t==kne}var $y=Gi["__core-js_shared__"],JC=(function(){var e=/[^.]+$/.exec($y&&$y.keys&&$y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function wne(e){return!!JC&&JC in e}var Sne=Function.prototype,Ene=Sne.toString;function _c(e){if(e!=null){try{return Ene.call(e)}catch{}try{return e+""}catch{}}return""}var _ne=/[\\^$.*+?()[\]{}|]/g,Tne=/^\[object .+?Constructor\]$/,Cne=Function.prototype,Nne=Object.prototype,Ane=Cne.toString,jne=Nne.hasOwnProperty,Lne=RegExp("^"+Ane.call(jne).replace(_ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mne(e){if(!Ec(e)||wne(e))return!1;var t=X2(e)?Lne:Tne;return t.test(_c(e))}function One(e,t){return e?.[t]}function Tc(e,t){var r=One(e,t);return Mne(r)?r:void 0}var kg=Tc(Object,"create");function Rne(){this.__data__=kg?kg(null):{},this.size=0}function Ine(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Dne="__lodash_hash_undefined__",Pne=Object.prototype,Bne=Pne.hasOwnProperty;function Fne(e){var t=this.__data__;if(kg){var r=t[e];return r===Dne?void 0:r}return Bne.call(t,e)?t[e]:void 0}var $ne=Object.prototype,Une=$ne.hasOwnProperty;function zne(e){var t=this.__data__;return kg?t[e]!==void 0:Une.call(t,e)}var Hne="__lodash_hash_undefined__";function qne(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kg&&t===void 0?Hne:t,this}function fc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fc.prototype.clear=Rne;fc.prototype.delete=Ine;fc.prototype.get=Fne;fc.prototype.has=zne;fc.prototype.set=qne;function Gne(){this.__data__=[],this.size=0}function Tm(e,t){return e===t||e!==e&&t!==t}function Cm(e,t){for(var r=e.length;r--;)if(Tm(e[r][0],t))return r;return-1}var Yne=Array.prototype,Wne=Yne.splice;function Vne(e){var t=this.__data__,r=Cm(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Wne.call(t,r,1),--this.size,!0}function Kne(e){var t=this.__data__,r=Cm(t,e);return r<0?void 0:t[r][1]}function Xne(e){return Cm(this.__data__,e)>-1}function Qne(e,t){var r=this.__data__,n=Cm(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Ao(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ao.prototype.clear=Gne;Ao.prototype.delete=Vne;Ao.prototype.get=Kne;Ao.prototype.has=Xne;Ao.prototype.set=Qne;var wg=Tc(Gi,"Map");function Jne(){this.size=0,this.__data__={hash:new fc,map:new(wg||Ao),string:new fc}}function Zne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nm(e,t){var r=e.__data__;return Zne(t)?r[typeof t=="string"?"string":"hash"]:r.map}function eae(e){var t=Nm(this,e).delete(e);return this.size-=t?1:0,t}function tae(e){return Nm(this,e).get(e)}function rae(e){return Nm(this,e).has(e)}function nae(e,t){var r=Nm(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ml(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ml.prototype.clear=Jne;ml.prototype.delete=eae;ml.prototype.get=tae;ml.prototype.has=rae;ml.prototype.set=nae;var aae="Expected a function";function Wg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(aae);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var l=e.apply(this,n);return r.cache=i.set(s,l)||i,l};return r.cache=new(Wg.Cache||ml),r}Wg.Cache=ml;function sae(){this.__data__=new Ao,this.size=0}function iae(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function oae(e){return this.__data__.get(e)}function lae(e){return this.__data__.has(e)}var cae=200;function uae(e,t){var r=this.__data__;if(r instanceof Ao){var n=r.__data__;if(!wg||n.length<cae-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ml(n)}return r.set(e,t),this.size=r.size,this}function pd(e){var t=this.__data__=new Ao(e);this.size=t.size}pd.prototype.clear=sae;pd.prototype.delete=iae;pd.prototype.get=oae;pd.prototype.has=lae;pd.prototype.set=uae;var B0=(function(){try{var e=Tc(Object,"defineProperty");return e({},"",{}),e}catch{}})();function Q2(e,t,r){t=="__proto__"&&B0?B0(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function vv(e,t,r){(r!==void 0&&!Tm(e[t],r)||r===void 0&&!(t in e))&&Q2(e,t,r)}function dae(e){return function(t,r,n){for(var s=-1,i=Object(t),l=n(t),c=l.length;c--;){var d=l[++s];if(r(i[d],d,i)===!1)break}return t}}var hae=dae(),LM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZC=LM&&typeof module=="object"&&module&&!module.nodeType&&module,gae=ZC&&ZC.exports===LM,eN=gae?Gi.Buffer:void 0,tN=eN?eN.allocUnsafe:void 0;function pae(e,t){if(t)return e.slice();var r=e.length,n=tN?tN(r):new e.constructor(r);return e.copy(n),n}var rN=Gi.Uint8Array;function fae(e){var t=new e.constructor(e.byteLength);return new rN(t).set(new rN(e)),t}function mae(e,t){var r=t?fae(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function xae(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var nN=Object.create,bae=(function(){function e(){}return function(t){if(!Ec(t))return{};if(nN)return nN(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function MM(e,t){return function(r){return e(t(r))}}var OM=MM(Object.getPrototypeOf,Object),yae=Object.prototype;function Am(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||yae;return e===r}function vae(e){return typeof e.constructor=="function"&&!Am(e)?bae(OM(e)):{}}function Vg(e){return e!=null&&typeof e=="object"}var kae="[object Arguments]";function aN(e){return Vg(e)&&gd(e)==kae}var RM=Object.prototype,wae=RM.hasOwnProperty,Sae=RM.propertyIsEnumerable,F0=aN((function(){return arguments})())?aN:function(e){return Vg(e)&&wae.call(e,"callee")&&!Sae.call(e,"callee")},$0=Array.isArray,Eae=9007199254740991;function IM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Eae}function jm(e){return e!=null&&IM(e.length)&&!X2(e)}function _ae(e){return Vg(e)&&jm(e)}function Tae(){return!1}var DM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sN=DM&&typeof module=="object"&&module&&!module.nodeType&&module,Cae=sN&&sN.exports===DM,iN=Cae?Gi.Buffer:void 0,Nae=iN?iN.isBuffer:void 0,J2=Nae||Tae,Aae="[object Object]",jae=Function.prototype,Lae=Object.prototype,PM=jae.toString,Mae=Lae.hasOwnProperty,Oae=PM.call(Object);function Rae(e){if(!Vg(e)||gd(e)!=Aae)return!1;var t=OM(e);if(t===null)return!0;var r=Mae.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&PM.call(r)==Oae}var Iae="[object Arguments]",Dae="[object Array]",Pae="[object Boolean]",Bae="[object Date]",Fae="[object Error]",$ae="[object Function]",Uae="[object Map]",zae="[object Number]",Hae="[object Object]",qae="[object RegExp]",Gae="[object Set]",Yae="[object String]",Wae="[object WeakMap]",Vae="[object ArrayBuffer]",Kae="[object DataView]",Xae="[object Float32Array]",Qae="[object Float64Array]",Jae="[object Int8Array]",Zae="[object Int16Array]",ese="[object Int32Array]",tse="[object Uint8Array]",rse="[object Uint8ClampedArray]",nse="[object Uint16Array]",ase="[object Uint32Array]",wn={};wn[Xae]=wn[Qae]=wn[Jae]=wn[Zae]=wn[ese]=wn[tse]=wn[rse]=wn[nse]=wn[ase]=!0;wn[Iae]=wn[Dae]=wn[Vae]=wn[Pae]=wn[Kae]=wn[Bae]=wn[Fae]=wn[$ae]=wn[Uae]=wn[zae]=wn[Hae]=wn[qae]=wn[Gae]=wn[Yae]=wn[Wae]=!1;function sse(e){return Vg(e)&&IM(e.length)&&!!wn[gd(e)]}function ise(e){return function(t){return e(t)}}var BM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ag=BM&&typeof module=="object"&&module&&!module.nodeType&&module,ose=ag&&ag.exports===BM,Uy=ose&&AM.process,oN=(function(){try{var e=ag&&ag.require&&ag.require("util").types;return e||Uy&&Uy.binding&&Uy.binding("util")}catch{}})(),lN=oN&&oN.isTypedArray,Z2=lN?ise(lN):sse;function kv(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var lse=Object.prototype,cse=lse.hasOwnProperty;function use(e,t,r){var n=e[t];(!(cse.call(e,t)&&Tm(n,r))||r===void 0&&!(t in e))&&Q2(e,t,r)}function dse(e,t,r,n){var s=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var c=t[i],d=void 0;d===void 0&&(d=e[c]),s?Q2(r,c,d):use(r,c,d)}return r}function hse(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var gse=9007199254740991,pse=/^(?:0|[1-9]\d*)$/;function FM(e,t){var r=typeof e;return t=t??gse,!!t&&(r=="number"||r!="symbol"&&pse.test(e))&&e>-1&&e%1==0&&e<t}var fse=Object.prototype,mse=fse.hasOwnProperty;function xse(e,t){var r=$0(e),n=!r&&F0(e),s=!r&&!n&&J2(e),i=!r&&!n&&!s&&Z2(e),l=r||n||s||i,c=l?hse(e.length,String):[],d=c.length;for(var h in e)(t||mse.call(e,h))&&!(l&&(h=="length"||s&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||FM(h,d)))&&c.push(h);return c}function bse(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var yse=Object.prototype,vse=yse.hasOwnProperty;function kse(e){if(!Ec(e))return bse(e);var t=Am(e),r=[];for(var n in e)n=="constructor"&&(t||!vse.call(e,n))||r.push(n);return r}function $M(e){return jm(e)?xse(e,!0):kse(e)}function wse(e){return dse(e,$M(e))}function Sse(e,t,r,n,s,i,l){var c=kv(e,r),d=kv(t,r),h=l.get(d);if(h){vv(e,r,h);return}var g=i?i(c,d,r+"",e,t,l):void 0,f=g===void 0;if(f){var x=$0(d),b=!x&&J2(d),y=!x&&!b&&Z2(d);g=d,x||b||y?$0(c)?g=c:_ae(c)?g=xae(c):b?(f=!1,g=pae(d,!0)):y?(f=!1,g=mae(d,!0)):g=[]:Rae(d)||F0(d)?(g=c,F0(c)?g=wse(c):(!Ec(c)||X2(c))&&(g=vae(d))):f=!1}f&&(l.set(d,g),s(g,d,n,i,l),l.delete(d)),vv(e,r,g)}function UM(e,t,r,n,s){e!==t&&hae(t,function(i,l){if(s||(s=new pd),Ec(i))Sse(e,t,l,r,UM,n,s);else{var c=n?n(kv(e,l),i,l+"",e,t,s):void 0;c===void 0&&(c=i),vv(e,l,c)}},$M)}function zM(e){return e}function Ese(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var cN=Math.max;function _se(e,t,r){return t=cN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=cN(n.length-t,0),l=Array(i);++s<i;)l[s]=n[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=n[s];return c[t]=r(l),Ese(e,this,c)}}function Tse(e){return function(){return e}}var Cse=B0?function(e,t){return B0(e,"toString",{configurable:!0,enumerable:!1,value:Tse(t),writable:!0})}:zM,Nse=800,Ase=16,jse=Date.now;function Lse(e){var t=0,r=0;return function(){var n=jse(),s=Ase-(n-r);if(r=n,s>0){if(++t>=Nse)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Mse=Lse(Cse);function Ose(e,t){return Mse(_se(e,t,zM),e+"")}function Rse(e,t,r){if(!Ec(r))return!1;var n=typeof t;return(n=="number"?jm(r)&&FM(t,r.length):n=="string"&&t in r)?Tm(r[t],e):!1}function Ise(e){return Ose(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,l=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,l&&Rse(r[0],r[1],l)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var c=r[n];c&&e(t,c,n,i)}return t})}var Dse=Ise(function(e,t,r){UM(e,t,r)}),Pse="",Bse={curveBasis:Vf,curveBasisClosed:$te,curveBasisOpen:Ute,curveBumpX:CL,curveBumpY:NL,curveBundle:zte,curveCardinalClosed:Hte,curveCardinalOpen:qte,curveCardinal:ML,curveCatmullRomClosed:Gte,curveCatmullRomOpen:Yte,curveCatmullRom:RL,curveLinear:C0,curveLinearClosed:Wte,curveMonotoneX:$L,curveMonotoneY:UL,curveNatural:HL,curveStep:qL,curveStepAfter:YL,curveStepBefore:GL},Fse=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$se=A(function(e,t){const r=HM(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const l=r.map(c=>c.args);m0(l),n=ia(n,[...l])}else n=r.args;if(!n)return;let s=S2(e,t);const i="config";return n[i]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),n[s]=n[i],delete n[i]),n},"detectInit"),HM=A(function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${Fse.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),qe.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const s=[];for(;(n=rg.exec(e))!==null;)if(n.index===rg.lastIndex&&rg.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const i=n[1]?n[1]:n[2],l=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;s.push({type:i,args:l})}return s.length===0?{type:e,args:null}:s.length===1?s[0]:s}catch(r){return qe.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),Use=A(function(e){return e.replace(rg,"")},"removeDirectives"),zse=A(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function ek(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return Bse[r]??t}A(ek,"interpolateToCurve");function qM(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?lne.sanitizeUrl(r):r}A(qM,"formatUrl");var Hse=A((e,...t)=>{const r=e.split("."),n=r.length-1,s=r[n];let i=window;for(let l=0;l<n;l++)if(i=i[r[l]],!i){qe.error(`Function name: ${e} not found in window`);return}i[s](...t)},"runFunc");function tk(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}A(tk,"distance");function GM(e){let t,r=0;e.forEach(s=>{r+=tk(s,t),t=s});const n=r/2;return rk(e,n)}A(GM,"traverseEdge");function YM(e){return e.length===1?e[0]:GM(e)}A(YM,"calcLabelPosition");var uN=A((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),rk=A((e,t)=>{let r,n=t;for(const s of e){if(r){const i=tk(s,r);if(i===0)return r;if(i<n)n-=i;else{const l=n/i;if(l<=0)return r;if(l>=1)return{x:s.x,y:s.y};if(l>0&&l<1)return{x:uN((1-l)*r.x+l*s.x,5),y:uN((1-l)*r.y+l*s.y,5)}}}r=s}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),qse=A((e,t,r)=>{qe.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const s=rk(t,25),i=e?10:5,l=Math.atan2(t[0].y-s.y,t[0].x-s.x),c={x:0,y:0};return c.x=Math.sin(l)*i+(t[0].x+s.x)/2,c.y=-Math.cos(l)*i+(t[0].y+s.y)/2,c},"calcCardinalityPosition");function WM(e,t,r){const n=structuredClone(r);qe.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const s=25+e,i=rk(n,s),l=10+e*.5,c=Math.atan2(n[0].y-i.y,n[0].x-i.x),d={x:0,y:0};return t==="start_left"?(d.x=Math.sin(c+Math.PI)*l+(n[0].x+i.x)/2,d.y=-Math.cos(c+Math.PI)*l+(n[0].y+i.y)/2):t==="end_right"?(d.x=Math.sin(c-Math.PI)*l+(n[0].x+i.x)/2-5,d.y=-Math.cos(c-Math.PI)*l+(n[0].y+i.y)/2-5):t==="end_left"?(d.x=Math.sin(c)*l+(n[0].x+i.x)/2-5,d.y=-Math.cos(c)*l+(n[0].y+i.y)/2-5):(d.x=Math.sin(c)*l+(n[0].x+i.x)/2,d.y=-Math.cos(c)*l+(n[0].y+i.y)/2),d}A(WM,"calcTerminalLabelPosition");function VM(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}A(VM,"getStylesFromArray");var dN=0,Gse=A(()=>(dN++,"id-"+Math.random().toString(36).substr(2,12)+"-"+dN),"generateId");function KM(e){let t="";const r="0123456789abcdef",n=r.length;for(let s=0;s<e;s++)t+=r.charAt(Math.floor(Math.random()*n));return t}A(KM,"makeRandomHex");var Yse=A(e=>KM(e.length),"random"),Wse=A(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Vse=A(function(e,t){const r=t.text.replace(dd.lineBreakRegex," "),[,n]=Lm(t.fontSize),s=e.append("text");s.attr("x",t.x),s.attr("y",t.y),s.style("text-anchor",t.anchor),s.style("font-family",t.fontFamily),s.style("font-size",n),s.style("font-weight",t.fontWeight),s.attr("fill",t.fill),t.class!==void 0&&s.attr("class",t.class);const i=s.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.attr("fill",t.fill),i.text(r),s},"drawSimpleText"),Kse=Wg((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),dd.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),s=[];let i="";return n.forEach((l,c)=>{const d=Eo(`${l} `,r),h=Eo(i,r);if(d>t){const{hyphenatedStrings:x,remainingWord:b}=Xse(l,t,"-",r);s.push(i,...x),i=b}else h+d>=t?(s.push(i),i=l):i=[i,l].filter(Boolean).join(" ");c+1===n.length&&s.push(i)}),s.filter(l=>l!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),Xse=Wg((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const s=[...e],i=[];let l="";return s.forEach((c,d)=>{const h=`${l}${c}`;if(Eo(h,n)>=t){const f=d+1,x=s.length===f,b=`${h}${r}`;i.push(x?h:b),l=""}else l=h}),{hyphenatedStrings:i,remainingWord:l}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function XM(e,t){return nk(e,t).height}A(XM,"calculateTextHeight");function Eo(e,t){return nk(e,t).width}A(Eo,"calculateTextWidth");var nk=Wg((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:s=400}=t;if(!e)return{width:0,height:0};const[,i]=Lm(r),l=["sans-serif",n],c=e.split(dd.lineBreakRegex),d=[],h=Pr("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const g=h.append("svg");for(const x of l){let b=0;const y={width:0,height:0,lineHeight:0};for(const k of c){const S=Wse();S.text=k||Pse;const _=Vse(g,S).style("font-size",i).style("font-weight",s).style("font-family",x),T=(_._groups||_)[0][0].getBBox();if(T.width===0&&T.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,T.width)),b=Math.round(T.height),y.height+=b,y.lineHeight=Math.round(Math.max(y.lineHeight,b))}d.push(y)}g.remove();const f=isNaN(d[1].height)||isNaN(d[1].width)||isNaN(d[1].lineHeight)||d[0].height>d[1].height&&d[0].width>d[1].width&&d[0].lineHeight>d[1].lineHeight?0:1;return d[f]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),$u,Qse=($u=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},A($u,"InitIDGenerator"),$u),Cf,Jse=A(function(e){return Cf=Cf||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Cf.innerHTML=e,unescape(Cf.textContent)},"entityDecode");function ak(e){return"str"in e}A(ak,"isDetailedError");var Zse=A((e,t,r,n)=>{if(!n)return;const s=e.node()?.getBBox();s&&e.append("text").text(n).attr("text-anchor","middle").attr("x",s.x+s.width/2).attr("y",-r).attr("class",t)},"insertTitle"),Lm=A(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function sk(e,t){return Dse({},e,t)}A(sk,"cleanAndMerge");var gi={assignWithDepth:ia,wrapLabel:Kse,calculateTextHeight:XM,calculateTextWidth:Eo,calculateTextDimensions:nk,cleanAndMerge:sk,detectInit:$se,detectDirective:HM,isSubstringInArray:zse,interpolateToCurve:ek,calcLabelPosition:YM,calcCardinalityPosition:qse,calcTerminalLabelPosition:WM,formatUrl:qM,getStylesFromArray:VM,generateId:Gse,random:Yse,runFunc:Hse,entityDecode:Jse,insertTitle:Zse,isLabelCoordinateInPath:QM,parseFontSize:Lm,InitIDGenerator:Qse},eie=A(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),t},"encodeEntities"),Cc=A(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Khe=A((e,t,{counter:r=0,prefix:n,suffix:s},i)=>i||`${n?`${n}_`:""}${e}_${t}_${r}${s?`_${s}`:""}`,"getEdgeId");function Ba(e){return e??null}A(Ba,"handleUndefinedAttr");function QM(e,t){const r=Math.round(e.x),n=Math.round(e.y),s=t.replace(/(\d+\.\d+)/g,i=>Math.round(parseFloat(i)).toString());return s.includes(r.toString())||s.includes(n.toString())}A(QM,"isLabelCoordinateInPath");const tie=Object.freeze({left:0,top:0,width:16,height:16}),U0=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),JM=Object.freeze({...tie,...U0}),rie=Object.freeze({...JM,body:"",hidden:!1}),nie=Object.freeze({width:null,height:null}),aie=Object.freeze({...nie,...U0}),sie=(e,t,r,n="")=>{const s=e.split(":");if(e.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;n=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const c=s.pop(),d=s.pop(),h={provider:s.length>0?s[0]:n,prefix:d,name:c};return zy(h)?h:null}const i=s[0],l=i.split("-");if(l.length>1){const c={provider:n,prefix:l.shift(),name:l.join("-")};return zy(c)?c:null}if(r&&n===""){const c={provider:n,prefix:"",name:i};return zy(c,r)?c:null}return null},zy=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function iie(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function hN(e,t){const r=iie(e,t);for(const n in rie)n in U0?n in e&&!(n in r)&&(r[n]=U0[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function oie(e,t){const r=e.icons,n=e.aliases||Object.create(null),s=Object.create(null);function i(l){if(r[l])return s[l]=[];if(!(l in s)){s[l]=null;const c=n[l]&&n[l].parent,d=c&&i(c);d&&(s[l]=[c].concat(d))}return s[l]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(i),s}function gN(e,t,r){const n=e.icons,s=e.aliases||Object.create(null);let i={};function l(c){i=hN(n[c]||s[c],i)}return l(t),r.forEach(l),hN(e,i)}function lie(e,t){if(e.icons[t])return gN(e,t,[]);const r=oie(e,[t])[t];return r?gN(e,t,r):null}const cie=/(-?[0-9.]*[0-9]+[0-9.]*)/g,uie=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function pN(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(cie);if(n===null||!n.length)return e;const s=[];let i=n.shift(),l=uie.test(i);for(;;){if(l){const c=parseFloat(i);isNaN(c)?s.push(i):s.push(Math.ceil(c*t*r)/r)}else s.push(i);if(i=n.shift(),i===void 0)return s.join("");l=!l}}function die(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const s=e.indexOf(">",n),i=e.indexOf("</"+t);if(s===-1||i===-1)break;const l=e.indexOf(">",i);if(l===-1)break;r+=e.slice(s+1,i).trim(),e=e.slice(0,n).trim()+e.slice(l+1)}return{defs:r,content:e}}function hie(e,t){return e?"<defs>"+e+"</defs>"+t:t}function gie(e,t,r){const n=die(e);return hie(n.defs,t+n.content+r)}const pie=e=>e==="unset"||e==="undefined"||e==="none";function fie(e,t){const r={...JM,...e},n={...aie,...t},s={left:r.left,top:r.top,width:r.width,height:r.height};let i=r.body;[r,n].forEach(k=>{const S=[],_=k.hFlip,T=k.vFlip;let N=k.rotate;_?T?N+=2:(S.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),S.push("scale(-1 1)"),s.top=s.left=0):T&&(S.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),S.push("scale(1 -1)"),s.top=s.left=0);let I;switch(N<0&&(N-=Math.floor(N/4)*4),N=N%4,N){case 1:I=s.height/2+s.top,S.unshift("rotate(90 "+I.toString()+" "+I.toString()+")");break;case 2:S.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:I=s.width/2+s.left,S.unshift("rotate(-90 "+I.toString()+" "+I.toString()+")");break}N%2===1&&(s.left!==s.top&&(I=s.left,s.left=s.top,s.top=I),s.width!==s.height&&(I=s.width,s.width=s.height,s.height=I)),S.length&&(i=gie(i,'<g transform="'+S.join(" ")+'">',"</g>"))});const l=n.width,c=n.height,d=s.width,h=s.height;let g,f;l===null?(f=c===null?"1em":c==="auto"?h:c,g=pN(f,d/h)):(g=l==="auto"?d:l,f=c===null?pN(g,h/d):c==="auto"?h:c);const x={},b=(k,S)=>{pie(S)||(x[k]=S.toString())};b("width",g),b("height",f);const y=[s.left,s.top,d,h];return x.viewBox=y.join(" "),{attributes:x,viewBox:y,body:i}}const mie=/\sid="(\S+)"/g,xie="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let bie=0;function yie(e,t=xie){const r=[];let n;for(;n=mie.exec(e);)r.push(n[1]);if(!r.length)return e;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(i=>{const l=typeof t=="function"?t(i):t+(bie++).toString(),c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+c+')([")]|\\.[a-z])',"g"),"$1"+l+s+"$3")}),e=e.replace(new RegExp(s,"g"),""),e}function vie(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function ik(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Nc=ik();function ZM(e){Nc=e}var sg={exec:()=>null};function Wr(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(s,i)=>{let l=typeof i=="string"?i:i.source;return l=l.replace(Ja.caret,"$1"),r=r.replace(s,l),n},getRegex:()=>new RegExp(r,t)};return n}var Ja={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},kie=/^(?:[ \t]*(?:\n|$))+/,wie=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Sie=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Kg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Eie=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ok=/(?:[*+-]|\d{1,9}[.)])/,eO=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,tO=Wr(eO).replace(/bull/g,ok).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_ie=Wr(eO).replace(/bull/g,ok).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),lk=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Tie=/^[^\n]+/,ck=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Cie=Wr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ck).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Nie=Wr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ok).getRegex(),Mm="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",uk=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Aie=Wr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",uk).replace("tag",Mm).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),rO=Wr(lk).replace("hr",Kg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mm).getRegex(),jie=Wr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",rO).getRegex(),dk={blockquote:jie,code:wie,def:Cie,fences:Sie,heading:Eie,hr:Kg,html:Aie,lheading:tO,list:Nie,newline:kie,paragraph:rO,table:sg,text:Tie},fN=Wr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Kg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mm).getRegex(),Lie={...dk,lheading:_ie,table:fN,paragraph:Wr(lk).replace("hr",Kg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fN).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Mm).getRegex()},Mie={...dk,html:Wr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",uk).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sg,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Wr(lk).replace("hr",Kg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",tO).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Oie=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Rie=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,nO=/^( {2,}|\\)\n(?!\s*$)/,Iie=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Om=/[\p{P}\p{S}]/u,hk=/[\s\p{P}\p{S}]/u,aO=/[^\s\p{P}\p{S}]/u,Die=Wr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,hk).getRegex(),sO=/(?!~)[\p{P}\p{S}]/u,Pie=/(?!~)[\s\p{P}\p{S}]/u,Bie=/(?:[^\s\p{P}\p{S}]|~)/u,Fie=Wr(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),iO=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$ie=Wr(iO,"u").replace(/punct/g,Om).getRegex(),Uie=Wr(iO,"u").replace(/punct/g,sO).getRegex(),oO="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",zie=Wr(oO,"gu").replace(/notPunctSpace/g,aO).replace(/punctSpace/g,hk).replace(/punct/g,Om).getRegex(),Hie=Wr(oO,"gu").replace(/notPunctSpace/g,Bie).replace(/punctSpace/g,Pie).replace(/punct/g,sO).getRegex(),qie=Wr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,aO).replace(/punctSpace/g,hk).replace(/punct/g,Om).getRegex(),Gie=Wr(/\\(punct)/,"gu").replace(/punct/g,Om).getRegex(),Yie=Wr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Wie=Wr(uk).replace("(?:-->|$)","-->").getRegex(),Vie=Wr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Wie).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),z0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Kie=Wr(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",z0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),lO=Wr(/^!?\[(label)\]\[(ref)\]/).replace("label",z0).replace("ref",ck).getRegex(),cO=Wr(/^!?\[(ref)\](?:\[\])?/).replace("ref",ck).getRegex(),Xie=Wr("reflink|nolink(?!\\()","g").replace("reflink",lO).replace("nolink",cO).getRegex(),mN=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,gk={_backpedal:sg,anyPunctuation:Gie,autolink:Yie,blockSkip:Fie,br:nO,code:Rie,del:sg,emStrongLDelim:$ie,emStrongRDelimAst:zie,emStrongRDelimUnd:qie,escape:Oie,link:Kie,nolink:cO,punctuation:Die,reflink:lO,reflinkSearch:Xie,tag:Vie,text:Iie,url:sg},Qie={...gk,link:Wr(/^!?\[(label)\]\((.*?)\)/).replace("label",z0).getRegex(),reflink:Wr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",z0).getRegex()},wv={...gk,emStrongRDelimAst:Hie,emStrongLDelim:Uie,url:Wr(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",mN).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Wr(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",mN).getRegex()},Jie={...wv,br:Wr(nO).replace("{2,}","*").getRegex(),text:Wr(wv.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Nf={normal:dk,gfm:Lie,pedantic:Mie},Th={normal:gk,gfm:wv,breaks:Jie,pedantic:Qie},Zie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xN=e=>Zie[e];function Ai(e,t){if(t){if(Ja.escapeTest.test(e))return e.replace(Ja.escapeReplace,xN)}else if(Ja.escapeTestNoEncode.test(e))return e.replace(Ja.escapeReplaceNoEncode,xN);return e}function bN(e){try{e=encodeURI(e).replace(Ja.percentDecode,"%")}catch{return null}return e}function yN(e,t){let r=e.replace(Ja.findPipe,(i,l,c)=>{let d=!1,h=l;for(;--h>=0&&c[h]==="\\";)d=!d;return d?"|":" |"}),n=r.split(Ja.splitPipe),s=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(Ja.slashPipe,"|");return n}function Ch(e,t,r){let n=e.length;if(n===0)return"";let s=0;for(;s<n&&e.charAt(n-s-1)===t;)s++;return e.slice(0,n-s)}function eoe(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function vN(e,t,r,n,s){let i=t.href,l=t.title||null,c=e[1].replace(s.other.outputLinkReplace,"$1");n.state.inLink=!0;let d={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:l,text:c,tokens:n.inlineTokens(c)};return n.state.inLink=!1,d}function toe(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let s=n[1];return t.split(`
`).map(i=>{let l=i.match(r.other.beginningSpace);if(l===null)return i;let[c]=l;return c.length>=s.length?i.slice(s.length):i}).join(`
`)}var H0=class{options;rules;lexer;constructor(t){this.options=t||Nc}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ch(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],s=toe(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:s}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let s=Ch(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:Ch(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=Ch(r[0],`
`).split(`
`),s="",i="",l=[];for(;n.length>0;){let c=!1,d=[],h;for(h=0;h<n.length;h++)if(this.rules.other.blockquoteStart.test(n[h]))d.push(n[h]),c=!0;else if(!c)d.push(n[h]);else break;n=n.slice(h);let g=d.join(`
`),f=g.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${g}`:g,i=i?`${i}
${f}`:f;let x=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,l,!0),this.lexer.state.top=x,n.length===0)break;let b=l.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let y=b,k=y.raw+`
`+n.join(`
`),S=this.blockquote(k);l[l.length-1]=S,s=s.substring(0,s.length-y.raw.length)+S.raw,i=i.substring(0,i.length-y.text.length)+S.text;break}else if(b?.type==="list"){let y=b,k=y.raw+`
`+n.join(`
`),S=this.list(k);l[l.length-1]=S,s=s.substring(0,s.length-b.raw.length)+S.raw,i=i.substring(0,i.length-y.raw.length)+S.raw,n=k.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:i}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let l=this.rules.other.listItemRegex(n),c=!1;for(;t;){let h=!1,g="",f="";if(!(r=l.exec(t))||this.rules.block.hr.test(t))break;g=r[0],t=t.substring(g.length);let x=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),b=t.split(`
`,1)[0],y=!x.trim(),k=0;if(this.options.pedantic?(k=2,f=x.trimStart()):y?k=r[1].length+1:(k=r[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,f=x.slice(k),k+=r[1].length),y&&this.rules.other.blankLine.test(b)&&(g+=b+`
`,t=t.substring(b.length+1),h=!0),!h){let T=this.rules.other.nextBulletRegex(k),N=this.rules.other.hrRegex(k),I=this.rules.other.fencesBeginRegex(k),R=this.rules.other.headingBeginRegex(k),B=this.rules.other.htmlBeginRegex(k);for(;t;){let F=t.split(`
`,1)[0],ae;if(b=F,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),ae=b):ae=b.replace(this.rules.other.tabCharGlobal,"    "),I.test(b)||R.test(b)||B.test(b)||T.test(b)||N.test(b))break;if(ae.search(this.rules.other.nonSpaceChar)>=k||!b.trim())f+=`
`+ae.slice(k);else{if(y||x.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(x)||R.test(x)||N.test(x))break;f+=`
`+b}!y&&!b.trim()&&(y=!0),g+=F+`
`,t=t.substring(F.length+1),x=ae.slice(k)}}i.loose||(c?i.loose=!0:this.rules.other.doubleBlankLine.test(g)&&(c=!0));let S=null,_;this.options.gfm&&(S=this.rules.other.listIsTask.exec(f),S&&(_=S[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:g,task:!!S,checked:_,loose:!1,text:f,tokens:[]}),i.raw+=g}let d=i.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let h=0;h<i.items.length;h++)if(this.lexer.state.top=!1,i.items[h].tokens=this.lexer.blockTokens(i.items[h].text,[]),!i.loose){let g=i.items[h].tokens.filter(x=>x.type==="space"),f=g.length>0&&g.some(x=>this.rules.other.anyLine.test(x.raw));i.loose=f}if(i.loose)for(let h=0;h<i.items.length;h++)i.items[h].loose=!0;return i}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:s,title:i}}}table(t){let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=yN(r[1]),s=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let c of s)this.rules.other.tableAlignRight.test(c)?l.align.push("right"):this.rules.other.tableAlignCenter.test(c)?l.align.push("center"):this.rules.other.tableAlignLeft.test(c)?l.align.push("left"):l.align.push(null);for(let c=0;c<n.length;c++)l.header.push({text:n[c],tokens:this.lexer.inline(n[c]),header:!0,align:l.align[c]});for(let c of i)l.rows.push(yN(c,l.header.length).map((d,h)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:l.align[h]})));return l}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let l=Ch(n.slice(0,-1),"\\");if((n.length-l.length)%2===0)return}else{let l=eoe(r[2],"()");if(l===-2)return;if(l>-1){let c=(r[0].indexOf("!")===0?5:4)+r[1].length+l;r[2]=r[2].substring(0,l),r[0]=r[0].substring(0,c).trim(),r[3]=""}}let s=r[2],i="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(s);l&&(s=l[1],i=l[3])}else i=r[3]?r[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),vN(r,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=r[s.toLowerCase()];if(!i){let l=n[0].charAt(0);return{type:"text",raw:l,text:l}}return vN(n,i,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...s[0]].length-1,l,c,d=i,h=0,g=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(g.lastIndex=0,r=r.slice(-1*t.length+i);(s=g.exec(r))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=[...l].length,s[3]||s[4]){d+=c;continue}else if((s[5]||s[6])&&i%3&&!((i+c)%3)){h+=c;continue}if(d-=c,d>0)continue;c=Math.min(c,c+d+h);let f=[...s[0]][0].length,x=t.slice(0,i+s.index+f+c);if(Math.min(i,c)%2){let y=x.slice(1,-1);return{type:"em",raw:x,text:y,tokens:this.lexer.inlineTokens(y)}}let b=x.slice(2,-2);return{type:"strong",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,s;return r[2]==="@"?(n=r[1],s="mailto:"+n):(n=r[1],s=n),{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let n,s;if(r[2]==="@")n=r[0],s="mailto:"+n;else{let i;do i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(i!==r[0]);n=r[0],r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},ui=class Sv{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Nc,this.options.tokenizer=this.options.tokenizer||new H0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Ja,block:Nf.normal,inline:Th.normal};this.options.pedantic?(r.block=Nf.pedantic,r.inline=Th.pedantic):this.options.gfm&&(r.block=Nf.gfm,this.options.breaks?r.inline=Th.breaks:r.inline=Th.gfm),this.tokenizer.rules=r}static get rules(){return{block:Nf,inline:Th}}static lex(t,r){return new Sv(r).lex(t)}static lexInline(t,r){return new Sv(r).inlineTokens(t)}lex(t){t=t.replace(Ja.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){for(this.options.pedantic&&(t=t.replace(Ja.tabCharGlobal,"    ").replace(Ja.spaceLine,""));t;){let s;if(this.options.extensions?.block?.some(l=>(s=l.call({lexer:this},t,r))?(t=t.substring(s.raw.length),r.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);let l=r.at(-1);s.raw.length===1&&l!==void 0?l.raw+=`
`:r.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);let l=r.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+s.raw,l.text+=`
`+s.text,this.inlineQueue.at(-1).src=l.text):r.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);let l=r.at(-1);l?.type==="paragraph"||l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+s.raw,l.text+=`
`+s.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},r.push(s));continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),r.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),r.push(s);continue}let i=t;if(this.options.extensions?.startBlock){let l=1/0,c=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},c),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(i=t.substring(0,l+1))}if(this.state.top&&(s=this.tokenizer.paragraph(i))){let l=r.at(-1);n&&l?.type==="paragraph"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+s.raw,l.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(s),n=i.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);let l=r.at(-1);l?.type==="text"?(l.raw+=(l.raw.endsWith(`
`)?"":`
`)+s.raw,l.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(s);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n=t,s=null;if(this.tokens.links){let c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,l="";for(;t;){i||(l=""),i=!1;let c;if(this.options.extensions?.inline?.some(h=>(c=h.call({lexer:this},t,r))?(t=t.substring(c.raw.length),r.push(c),!0):!1))continue;if(c=this.tokenizer.escape(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.tag(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.link(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(c.raw.length);let h=r.at(-1);c.type==="text"&&h?.type==="text"?(h.raw+=c.raw,h.text+=c.text):r.push(c);continue}if(c=this.tokenizer.emStrong(t,n,l)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.codespan(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.br(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.del(t)){t=t.substring(c.raw.length),r.push(c);continue}if(c=this.tokenizer.autolink(t)){t=t.substring(c.raw.length),r.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(t))){t=t.substring(c.raw.length),r.push(c);continue}let d=t;if(this.options.extensions?.startInline){let h=1/0,g=t.slice(1),f;this.options.extensions.startInline.forEach(x=>{f=x.call({lexer:this},g),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(c=this.tokenizer.inlineText(d)){t=t.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(l=c.raw.slice(-1)),i=!0;let h=r.at(-1);h?.type==="text"?(h.raw+=c.raw,h.text+=c.text):r.push(c);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},q0=class{options;parser;constructor(t){this.options=t||Nc}space(t){return""}code({text:t,lang:r,escaped:n}){let s=(r||"").match(Ja.notSpaceStart)?.[0],i=t.replace(Ja.endingNewline,"")+`
`;return s?'<pre><code class="language-'+Ai(s)+'">'+(n?i:Ai(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Ai(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,s="";for(let c=0;c<t.items.length;c++){let d=t.items[c];s+=this.listitem(d)}let i=r?"ol":"ul",l=r&&n!==1?' start="'+n+'"':"";return"<"+i+l+`>
`+s+"</"+i+`>
`}listitem(t){let r="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+Ai(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);r+=this.tablerow({text:n});let s="";for(let i=0;i<t.rows.length;i++){let l=t.rows[i];n="";for(let c=0;c<l.length;c++)n+=this.tablecell(l[c]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Ai(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let s=this.parser.parseInline(n),i=bN(t);if(i===null)return s;t=i;let l='<a href="'+t+'"';return r&&(l+=' title="'+Ai(r)+'"'),l+=">"+s+"</a>",l}image({href:t,title:r,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));let i=bN(t);if(i===null)return Ai(n);t=i;let l=`<img src="${t}" alt="${n}"`;return r&&(l+=` title="${Ai(r)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Ai(t.text)}},pk=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},di=class Ev{options;renderer;textRenderer;constructor(t){this.options=t||Nc,this.options.renderer=this.options.renderer||new q0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new pk}static parse(t,r){return new Ev(r).parse(t)}static parseInline(t,r){return new Ev(r).parseInline(t)}parse(t,r=!0){let n="";for(let s=0;s<t.length;s++){let i=t[s];if(this.options.extensions?.renderers?.[i.type]){let c=i,d=this.options.extensions.renderers[c.type].call({parser:this},c);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){n+=d||"";continue}}let l=i;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"def":{n+=this.renderer.def(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,d=this.renderer.text(c);for(;s+1<t.length&&t[s+1].type==="text";)c=t[++s],d+=`
`+this.renderer.text(c);r?n+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):n+=d;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(t,r=this.renderer){let n="";for(let s=0;s<t.length;s++){let i=t[s];if(this.options.extensions?.renderers?.[i.type]){let c=this.options.extensions.renderers[i.type].call({parser:this},i);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=c||"";continue}}let l=i;switch(l.type){case"escape":{n+=r.text(l);break}case"html":{n+=r.html(l);break}case"link":{n+=r.link(l);break}case"image":{n+=r.image(l);break}case"strong":{n+=r.strong(l);break}case"em":{n+=r.em(l);break}case"codespan":{n+=r.codespan(l);break}case"br":{n+=r.br(l);break}case"del":{n+=r.del(l);break}case"text":{n+=r.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}},Bh=class{options;block;constructor(t){this.options=t||Nc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?ui.lex:ui.lexInline}provideParser(){return this.block?di.parse:di.parseInline}},roe=class{defaults=ik();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=di;Renderer=q0;TextRenderer=pk;Lexer=ui;Tokenizer=H0;Hooks=Bh;constructor(...t){this.use(...t)}walkTokens(t,r){let n=[];for(let s of t)switch(n=n.concat(r.call(this,s)),s.type){case"table":{let i=s;for(let l of i.header)n=n.concat(this.walkTokens(l.tokens,r));for(let l of i.rows)for(let c of l)n=n.concat(this.walkTokens(c.tokens,r));break}case"list":{let i=s;n=n.concat(this.walkTokens(i.items,r));break}default:{let i=s;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(l=>{let c=i[l].flat(1/0);n=n.concat(this.walkTokens(c,r))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let l=r.renderers[i.name];l?r.renderers[i.name]=function(...c){let d=i.renderer.apply(this,c);return d===!1&&(d=l.apply(this,c)),d}:r.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=r[i.level];l?l.unshift(i.tokenizer):r[i.level]=[i.tokenizer],i.start&&(i.level==="block"?r.startBlock?r.startBlock.push(i.start):r.startBlock=[i.start]:i.level==="inline"&&(r.startInline?r.startInline.push(i.start):r.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(r.childTokens[i.name]=i.childTokens)}),s.extensions=r),n.renderer){let i=this.defaults.renderer||new q0(this.defaults);for(let l in n.renderer){if(!(l in i))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let c=l,d=n.renderer[c],h=i[c];i[c]=(...g)=>{let f=d.apply(i,g);return f===!1&&(f=h.apply(i,g)),f||""}}s.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new H0(this.defaults);for(let l in n.tokenizer){if(!(l in i))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let c=l,d=n.tokenizer[c],h=i[c];i[c]=(...g)=>{let f=d.apply(i,g);return f===!1&&(f=h.apply(i,g)),f}}s.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new Bh;for(let l in n.hooks){if(!(l in i))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let c=l,d=n.hooks[c],h=i[c];Bh.passThroughHooks.has(l)?i[c]=g=>{if(this.defaults.async&&Bh.passThroughHooksRespectAsync.has(l))return(async()=>{let x=await d.call(i,g);return h.call(i,x)})();let f=d.call(i,g);return h.call(i,f)}:i[c]=(...g)=>{if(this.defaults.async)return(async()=>{let x=await d.apply(i,g);return x===!1&&(x=await h.apply(i,g)),x})();let f=d.apply(i,g);return f===!1&&(f=h.apply(i,g)),f}}s.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,l=n.walkTokens;s.walkTokens=function(c){let d=[];return d.push(l.call(this,c)),i&&(d=d.concat(i.call(this,c))),d}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return ui.lex(t,r??this.defaults)}parser(t,r){return di.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let s={...n},i={...this.defaults,...s},l=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let c=i.hooks?await i.hooks.preprocess(r):r,d=await(i.hooks?await i.hooks.provideLexer():t?ui.lex:ui.lexInline)(c,i),h=i.hooks?await i.hooks.processAllTokens(d):d;i.walkTokens&&await Promise.all(this.walkTokens(h,i.walkTokens));let g=await(i.hooks?await i.hooks.provideParser():t?di.parse:di.parseInline)(h,i);return i.hooks?await i.hooks.postprocess(g):g})().catch(l);try{i.hooks&&(r=i.hooks.preprocess(r));let c=(i.hooks?i.hooks.provideLexer():t?ui.lex:ui.lexInline)(r,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let d=(i.hooks?i.hooks.provideParser():t?di.parse:di.parseInline)(c,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(c){return l(c)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+Ai(n.message+"",!0)+"</pre>";return r?Promise.resolve(s):s}if(r)return Promise.reject(n);throw n}}},mc=new roe;function en(e,t){return mc.parse(e,t)}en.options=en.setOptions=function(e){return mc.setOptions(e),en.defaults=mc.defaults,ZM(en.defaults),en};en.getDefaults=ik;en.defaults=Nc;en.use=function(...e){return mc.use(...e),en.defaults=mc.defaults,ZM(en.defaults),en};en.walkTokens=function(e,t){return mc.walkTokens(e,t)};en.parseInline=mc.parseInline;en.Parser=di;en.parser=di.parse;en.Renderer=q0;en.TextRenderer=pk;en.Lexer=ui;en.lexer=ui.lex;en.Tokenizer=H0;en.Hooks=Bh;en.parse=en;en.options;en.setOptions;en.use;en.walkTokens;en.parseInline;di.parse;ui.lex;function uO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var s=n.reduce(function(c,d){var h=d.match(/\n([\t ]+|(?!\s).)/g);return h?c.concat(h.map(function(g){var f,x;return(x=(f=g.match(/[\t ]/g))===null||f===void 0?void 0:f.length)!==null&&x!==void 0?x:0})):c},[]);if(s.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,s)+"}","g");n=n.map(function(c){return c.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var l=n[0];return t.forEach(function(c,d){var h=l.match(/(?:^|\n)( *)$/),g=h?h[1]:"",f=c;typeof c=="string"&&c.includes(`
`)&&(f=String(c).split(`
`).map(function(x,b){return b===0?x:""+g+x}).join(`
`)),l+=f+n[d+1]}),l}var noe={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},_v=new Map,dO=new Map,aoe=A(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(qe.debug("Registering icon pack:",t.name),"loader"in t)dO.set(t.name,t.loader);else if("icons"in t)_v.set(t.name,t.icons);else throw qe.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),hO=A(async(e,t)=>{const r=sie(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let s=_v.get(n);if(!s){const l=dO.get(n);if(!l)throw new Error(`Icon set not found: ${r.prefix}`);try{s={...await l(),prefix:n},_v.set(n,s)}catch(c){throw qe.error(c),new Error(`Failed to load icon set: ${r.prefix}`)}}const i=lie(s,r.name);if(!i)throw new Error(`Icon not found: ${e}`);return i},"getRegisteredIconData"),soe=A(async e=>{try{return await hO(e),!0}catch{return!1}},"isIconAvailable"),Xg=A(async(e,t,r)=>{let n;try{n=await hO(e,t?.fallbackPrefix)}catch(l){qe.error(l),n=noe}const s=fie(n,t),i=vie(yie(s.body),{...s.attributes,...r});return Zs(i,Da())},"getIconSVG");function gO(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),s=uO(n);return t===!1?s.replace(/ /g,"&nbsp;"):s}A(gO,"preprocessMarkdown");function pO(e,t={}){const r=gO(e,t),n=en.lexer(r),s=[[]];let i=0;function l(c,d="normal"){c.type==="text"?c.text.split(`
`).forEach((g,f)=>{f!==0&&(i++,s.push([])),g.split(" ").forEach(x=>{x=x.replace(/&#39;/g,"'"),x&&s[i].push({content:x,type:d})})}):c.type==="strong"||c.type==="em"?c.tokens.forEach(h=>{l(h,c.type)}):c.type==="html"&&s[i].push({content:c.text,type:"normal"})}return A(l,"processNode"),n.forEach(c=>{c.type==="paragraph"?c.tokens?.forEach(d=>{l(d)}):c.type==="html"?s[i].push({content:c.text,type:"normal"}):s[i].push({content:c.raw,type:"normal"})}),s}A(pO,"markdownToLines");function fO(e,{markdownAutoWrap:t}={}){const r=en.lexer(e);function n(s){return s.type==="text"?t===!1?s.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):s.text.replace(/\n */g,"<br/>"):s.type==="strong"?`<strong>${s.tokens?.map(n).join("")}</strong>`:s.type==="em"?`<em>${s.tokens?.map(n).join("")}</em>`:s.type==="paragraph"?`<p>${s.tokens?.map(n).join("")}</p>`:s.type==="space"?"":s.type==="html"?`${s.text}`:s.type==="escape"?s.text:(qe.warn(`Unsupported markdown: ${s.type}`),s.raw)}return A(n,"output"),r.map(n).join("")}A(fO,"markdownToHTML");function mO(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}A(mO,"splitTextToChars");function xO(e,t){const r=mO(t.content);return fk(e,[],r,t.type)}A(xO,"splitWordToFitWidth");function fk(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[s,...i]=r,l=[...t,s];return e([{content:l.join(""),type:n}])?fk(e,l,i,n):(t.length===0&&s&&(t.push(s),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}A(fk,"splitWordToFitWidthRecursion");function bO(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return G0(e,t)}A(bO,"splitLineToFitWidth");function G0(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let s="";e[0].content===" "&&(s=" ",e.shift());const i=e.shift()??{content:" ",type:"normal"},l=[...n];if(s!==""&&l.push({content:s,type:"normal"}),l.push(i),t(l))return G0(e,t,r,l);if(n.length>0)r.push(n),e.unshift(i);else if(i.content){const[c,d]=xO(t,i);r.push([c]),d.content&&e.unshift(d)}return G0(e,t,r)}A(G0,"splitLineToFitWidthRecursion");function Tv(e,t){t&&e.attr("style",t)}A(Tv,"applyStyle");async function yO(e,t,r,n,s=!1,i=Da()){const l=e.append("foreignObject");l.attr("width",`${10*r}px`),l.attr("height",`${10*r}px`);const c=l.append("xhtml:div"),d=Yu(t.label)?await E2(t.label.replace(dd.lineBreakRegex,`
`),i):Zs(t.label,i),h=t.isNode?"nodeLabel":"edgeLabel",g=c.append("span");g.html(d),Tv(g,t.labelStyle),g.attr("class",`${h} ${n}`),Tv(c,t.labelStyle),c.style("display","table-cell"),c.style("white-space","nowrap"),c.style("line-height","1.5"),c.style("max-width",r+"px"),c.style("text-align","center"),c.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&c.attr("class","labelBkg");let f=c.node().getBoundingClientRect();return f.width===r&&(c.style("display","table"),c.style("white-space","break-spaces"),c.style("width",r+"px"),f=c.node().getBoundingClientRect()),l.node()}A(yO,"addHtmlSpan");function Rm(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}A(Rm,"createTspan");function vO(e,t,r){const n=e.append("text"),s=Rm(n,1,t);Im(s,r);const i=s.node().getComputedTextLength();return n.remove(),i}A(vO,"computeWidthOfText");function ioe(e,t,r){const n=e.append("text"),s=Rm(n,1,t);Im(s,[{content:r,type:"normal"}]);const i=s.node()?.getBoundingClientRect();return i&&n.remove(),i}A(ioe,"computeDimensionOfText");function kO(e,t,r,n=!1){const i=t.append("g"),l=i.insert("rect").attr("class","background").attr("style","stroke: none"),c=i.append("text").attr("y","-10.1");let d=0;for(const h of r){const g=A(x=>vO(i,1.1,x)<=e,"checkWidth"),f=g(h)?[h]:bO(h,g);for(const x of f){const b=Rm(c,d,1.1);Im(b,x),d++}}if(n){const h=c.node().getBBox(),g=2;return l.attr("x",h.x-g).attr("y",h.y-g).attr("width",h.width+2*g).attr("height",h.height+2*g),i.node()}else return c.node()}A(kO,"createFormattedText");function Im(e,t){e.text(""),t.forEach((r,n)=>{const s=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?s.text(r.content):s.text(" "+r.content)})}A(Im,"updateTextContentAndStyles");async function wO(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(s,i,l)=>(r.push((async()=>{const c=`${i}:${l}`;return await soe(c)?await Xg(c,void 0,{class:"label-icon"}):`<i class='${Zs(s,t).replace(":"," ")}'></i>`})()),s));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}A(wO,"replaceIconSubstring");var xl=A(async(e,t="",{style:r="",isTitle:n=!1,classes:s="",useHtmlLabels:i=!0,isNode:l=!0,width:c=200,addSvgBackground:d=!1}={},h)=>{if(qe.debug("XYZ createText",t,r,n,s,i,l,"addSvgBackground: ",d),i){const g=fO(t,h),f=await wO(Cc(g),h),x=t.replace(/\\\\/g,"\\"),b={isNode:l,label:Yu(t)?x:f,labelStyle:r.replace("fill:","color:")};return await yO(e,b,c,s,d,h)}else{const g=t.replace(/<br\s*\/?>/g,"<br/>"),f=pO(g.replace("<br>","<br/>"),h),x=kO(c,e,f,t?d:!1);if(l){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Pr(x).attr("style",b)}else{const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Pr(x).select("rect").attr("style",b.replace(/background:/g,"fill:"));const y=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Pr(x).select("text").attr("style",y)}return x}},"createText");function Hy(e,t,r){if(e&&e.length){const[n,s]=t,i=Math.PI/180*r,l=Math.cos(i),c=Math.sin(i);for(const d of e){const[h,g]=d;d[0]=(h-n)*l-(g-s)*c+n,d[1]=(h-n)*c+(g-s)*l+s}}}function ooe(e,t){return e[0]===t[0]&&e[1]===t[1]}function loe(e,t,r,n=1){const s=r,i=Math.max(t,.1),l=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,c=[0,0];if(s)for(const h of l)Hy(h,c,s);const d=(function(h,g,f){const x=[];for(const T of h){const N=[...T];ooe(N[0],N[N.length-1])||N.push([N[0][0],N[0][1]]),N.length>2&&x.push(N)}const b=[];g=Math.max(g,.1);const y=[];for(const T of x)for(let N=0;N<T.length-1;N++){const I=T[N],R=T[N+1];if(I[1]!==R[1]){const B=Math.min(I[1],R[1]);y.push({ymin:B,ymax:Math.max(I[1],R[1]),x:B===I[1]?I[0]:R[0],islope:(R[0]-I[0])/(R[1]-I[1])})}}if(y.sort(((T,N)=>T.ymin<N.ymin?-1:T.ymin>N.ymin?1:T.x<N.x?-1:T.x>N.x?1:T.ymax===N.ymax?0:(T.ymax-N.ymax)/Math.abs(T.ymax-N.ymax))),!y.length)return b;let k=[],S=y[0].ymin,_=0;for(;k.length||y.length;){if(y.length){let T=-1;for(let N=0;N<y.length&&!(y[N].ymin>S);N++)T=N;y.splice(0,T+1).forEach((N=>{k.push({s:S,edge:N})}))}if(k=k.filter((T=>!(T.edge.ymax<=S))),k.sort(((T,N)=>T.edge.x===N.edge.x?0:(T.edge.x-N.edge.x)/Math.abs(T.edge.x-N.edge.x))),(f!==1||_%g==0)&&k.length>1)for(let T=0;T<k.length;T+=2){const N=T+1;if(N>=k.length)break;const I=k[T].edge,R=k[N].edge;b.push([[Math.round(I.x),S],[Math.round(R.x),S]])}S+=f,k.forEach((T=>{T.edge.x=T.edge.x+f*T.edge.islope})),_++}return b})(l,i,n);if(s){for(const h of l)Hy(h,c,-s);(function(h,g,f){const x=[];h.forEach((b=>x.push(...b))),Hy(x,g,f)})(d,c,-s)}return d}function Qg(e,t){var r;const n=t.hachureAngle+90;let s=t.hachureGap;s<0&&(s=4*t.strokeWidth),s=Math.round(Math.max(s,.1));let i=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(i=s),loe(e,s,n,i||1)}class mk{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=Qg(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const s of t)n.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],r));return n}}function Dm(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class coe extends mk{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const s=Qg(t,Object.assign({},r,{hachureGap:n})),i=Math.PI/180*r.hachureAngle,l=[],c=.5*n*Math.cos(i),d=.5*n*Math.sin(i);for(const[h,g]of s)Dm([h,g])&&l.push([[h[0]-c,h[1]+d],[...g]],[[h[0]+c,h[1]-d],[...g]]);return{type:"fillSketch",ops:this.renderLines(l,r)}}}class uoe extends mk{fillPolygons(t,r){const n=this._fillPolygons(t,r),s=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),i=this._fillPolygons(t,s);return n.ops=n.ops.concat(i.ops),n}}class doe{constructor(t){this.helper=t}fillPolygons(t,r){const n=Qg(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let s=r.hachureGap;s<0&&(s=4*r.strokeWidth),s=Math.max(s,.1);let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const l=s/4;for(const c of t){const d=Dm(c),h=d/s,g=Math.ceil(h)-1,f=d-g*s,x=(c[0][0]+c[1][0])/2-s/4,b=Math.min(c[0][1],c[1][1]);for(let y=0;y<g;y++){const k=b+f+y*s,S=x-l+2*Math.random()*l,_=k-l+2*Math.random()*l,T=this.helper.ellipse(S,_,i,i,r);n.push(...T.ops)}}return{type:"fillSketch",ops:n}}}class hoe{constructor(t){this.helper=t}fillPolygons(t,r){const n=Qg(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,s=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,i=[];return t.forEach((l=>{const c=Dm(l),d=Math.floor(c/(n+s)),h=(c+s-d*(n+s))/2;let g=l[0],f=l[1];g[0]>f[0]&&(g=l[1],f=l[0]);const x=Math.atan((f[1]-g[1])/(f[0]-g[0]));for(let b=0;b<d;b++){const y=b*(n+s),k=y+n,S=[g[0]+y*Math.cos(x)+h*Math.cos(x),g[1]+y*Math.sin(x)+h*Math.sin(x)],_=[g[0]+k*Math.cos(x)+h*Math.cos(x),g[1]+k*Math.sin(x)+h*Math.sin(x)];i.push(...this.helper.doubleLineOps(S[0],S[1],_[0],_[1],r))}})),i}}class goe{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,s=r.zigzagOffset<0?n:r.zigzagOffset,i=Qg(t,r=Object.assign({},r,{hachureGap:n+s}));return{type:"fillSketch",ops:this.zigzagLines(i,s,r)}}zigzagLines(t,r,n){const s=[];return t.forEach((i=>{const l=Dm(i),c=Math.round(l/(2*r));let d=i[0],h=i[1];d[0]>h[0]&&(d=i[1],h=i[0]);const g=Math.atan((h[1]-d[1])/(h[0]-d[0]));for(let f=0;f<c;f++){const x=2*f*r,b=2*(f+1)*r,y=Math.sqrt(2*Math.pow(r,2)),k=[d[0]+x*Math.cos(g),d[1]+x*Math.sin(g)],S=[d[0]+b*Math.cos(g),d[1]+b*Math.sin(g)],_=[k[0]+y*Math.cos(g+Math.PI/4),k[1]+y*Math.sin(g+Math.PI/4)];s.push(...this.helper.doubleLineOps(k[0],k[1],_[0],_[1],n),...this.helper.doubleLineOps(_[0],_[1],S[0],S[1],n))}})),s}}const hs={};class poe{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const foe=0,qy=1,kN=2,Af={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Gy(e,t){return e.type===t}function xk(e){const t=[],r=(function(l){const c=new Array;for(;l!=="";)if(l.match(/^([ \t\r\n,]+)/))l=l.substr(RegExp.$1.length);else if(l.match(/^([aAcChHlLmMqQsStTvVzZ])/))c[c.length]={type:foe,text:RegExp.$1},l=l.substr(RegExp.$1.length);else{if(!l.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];c[c.length]={type:qy,text:`${parseFloat(RegExp.$1)}`},l=l.substr(RegExp.$1.length)}return c[c.length]={type:kN,text:""},c})(e);let n="BOD",s=0,i=r[s];for(;!Gy(i,kN);){let l=0;const c=[];if(n==="BOD"){if(i.text!=="M"&&i.text!=="m")return xk("M0,0"+e);s++,l=Af[i.text],n=i.text}else Gy(i,qy)?l=Af[n]:(s++,l=Af[i.text],n=i.text);if(!(s+l<r.length))throw new Error("Path data ended short");for(let d=s;d<s+l;d++){const h=r[d];if(!Gy(h,qy))throw new Error("Param not a number: "+n+","+h.text);c[c.length]=+h.text}if(typeof Af[n]!="number")throw new Error("Bad segment: "+n);{const d={key:n,data:c};t.push(d),s+=l,i=r[s],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function SO(e){let t=0,r=0,n=0,s=0;const i=[];for(const{key:l,data:c}of e)switch(l){case"M":i.push({key:"M",data:[...c]}),[t,r]=c,[n,s]=c;break;case"m":t+=c[0],r+=c[1],i.push({key:"M",data:[t,r]}),n=t,s=r;break;case"L":i.push({key:"L",data:[...c]}),[t,r]=c;break;case"l":t+=c[0],r+=c[1],i.push({key:"L",data:[t,r]});break;case"C":i.push({key:"C",data:[...c]}),t=c[4],r=c[5];break;case"c":{const d=c.map(((h,g)=>g%2?h+r:h+t));i.push({key:"C",data:d}),t=d[4],r=d[5];break}case"Q":i.push({key:"Q",data:[...c]}),t=c[2],r=c[3];break;case"q":{const d=c.map(((h,g)=>g%2?h+r:h+t));i.push({key:"Q",data:d}),t=d[2],r=d[3];break}case"A":i.push({key:"A",data:[...c]}),t=c[5],r=c[6];break;case"a":t+=c[5],r+=c[6],i.push({key:"A",data:[c[0],c[1],c[2],c[3],c[4],t,r]});break;case"H":i.push({key:"H",data:[...c]}),t=c[0];break;case"h":t+=c[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...c]}),r=c[0];break;case"v":r+=c[0],i.push({key:"V",data:[r]});break;case"S":i.push({key:"S",data:[...c]}),t=c[2],r=c[3];break;case"s":{const d=c.map(((h,g)=>g%2?h+r:h+t));i.push({key:"S",data:d}),t=d[2],r=d[3];break}case"T":i.push({key:"T",data:[...c]}),t=c[0],r=c[1];break;case"t":t+=c[0],r+=c[1],i.push({key:"T",data:[t,r]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=n,r=s}return i}function EO(e){const t=[];let r="",n=0,s=0,i=0,l=0,c=0,d=0;for(const{key:h,data:g}of e){switch(h){case"M":t.push({key:"M",data:[...g]}),[n,s]=g,[i,l]=g;break;case"C":t.push({key:"C",data:[...g]}),n=g[4],s=g[5],c=g[2],d=g[3];break;case"L":t.push({key:"L",data:[...g]}),[n,s]=g;break;case"H":n=g[0],t.push({key:"L",data:[n,s]});break;case"V":s=g[0],t.push({key:"L",data:[n,s]});break;case"S":{let f=0,x=0;r==="C"||r==="S"?(f=n+(n-c),x=s+(s-d)):(f=n,x=s),t.push({key:"C",data:[f,x,...g]}),c=g[0],d=g[1],n=g[2],s=g[3];break}case"T":{const[f,x]=g;let b=0,y=0;r==="Q"||r==="T"?(b=n+(n-c),y=s+(s-d)):(b=n,y=s);const k=n+2*(b-n)/3,S=s+2*(y-s)/3,_=f+2*(b-f)/3,T=x+2*(y-x)/3;t.push({key:"C",data:[k,S,_,T,f,x]}),c=b,d=y,n=f,s=x;break}case"Q":{const[f,x,b,y]=g,k=n+2*(f-n)/3,S=s+2*(x-s)/3,_=b+2*(f-b)/3,T=y+2*(x-y)/3;t.push({key:"C",data:[k,S,_,T,b,y]}),c=f,d=x,n=b,s=y;break}case"A":{const f=Math.abs(g[0]),x=Math.abs(g[1]),b=g[2],y=g[3],k=g[4],S=g[5],_=g[6];f===0||x===0?(t.push({key:"C",data:[n,s,S,_,S,_]}),n=S,s=_):(n!==S||s!==_)&&(_O(n,s,S,_,f,x,b,y,k).forEach((function(T){t.push({key:"C",data:T})})),n=S,s=_);break}case"Z":t.push({key:"Z",data:[]}),n=i,s=l}r=h}return t}function Nh(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function _O(e,t,r,n,s,i,l,c,d,h){const g=(f=l,Math.PI*f/180);var f;let x=[],b=0,y=0,k=0,S=0;if(h)[b,y,k,S]=h;else{[e,t]=Nh(e,t,-g),[r,n]=Nh(r,n,-g);const W=(e-r)/2,j=(t-n)/2;let U=W*W/(s*s)+j*j/(i*i);U>1&&(U=Math.sqrt(U),s*=U,i*=U);const O=s*s,q=i*i,V=O*q-O*j*j-q*W*W,ue=O*j*j+q*W*W,H=(c===d?-1:1)*Math.sqrt(Math.abs(V/ue));k=H*s*j/i+(e+r)/2,S=H*-i*W/s+(t+n)/2,b=Math.asin(parseFloat(((t-S)/i).toFixed(9))),y=Math.asin(parseFloat(((n-S)/i).toFixed(9))),e<k&&(b=Math.PI-b),r<k&&(y=Math.PI-y),b<0&&(b=2*Math.PI+b),y<0&&(y=2*Math.PI+y),d&&b>y&&(b-=2*Math.PI),!d&&y>b&&(y-=2*Math.PI)}let _=y-b;if(Math.abs(_)>120*Math.PI/180){const W=y,j=r,U=n;y=d&&y>b?b+120*Math.PI/180*1:b+120*Math.PI/180*-1,x=_O(r=k+s*Math.cos(y),n=S+i*Math.sin(y),j,U,s,i,l,0,d,[y,W,k,S])}_=y-b;const T=Math.cos(b),N=Math.sin(b),I=Math.cos(y),R=Math.sin(y),B=Math.tan(_/4),F=4/3*s*B,ae=4/3*i*B,G=[e,t],$=[e+F*N,t-ae*T],J=[r+F*R,n-ae*I],ee=[r,n];if($[0]=2*G[0]-$[0],$[1]=2*G[1]-$[1],h)return[$,J,ee].concat(x);{x=[$,J,ee].concat(x);const W=[];for(let j=0;j<x.length;j+=3){const U=Nh(x[j][0],x[j][1],g),O=Nh(x[j+1][0],x[j+1][1],g),q=Nh(x[j+2][0],x[j+2][1],g);W.push([U[0],U[1],O[0],O[1],q[0],q[1]])}return W}}const moe={randOffset:function(e,t){return tr(e,t)},randOffsetWithRange:function(e,t,r){return Y0(e,t,r)},ellipse:function(e,t,r,n,s){const i=CO(r,n,s);return Cv(e,t,s,i).opset},doubleLineOps:function(e,t,r,n,s){return hl(e,t,r,n,s,!0)}};function TO(e,t,r,n,s){return{type:"path",ops:hl(e,t,r,n,s)}}function Qf(e,t,r){const n=(e||[]).length;if(n>2){const s=[];for(let i=0;i<n-1;i++)s.push(...hl(e[i][0],e[i][1],e[i+1][0],e[i+1][1],r));return t&&s.push(...hl(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:s}}return n===2?TO(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function xoe(e,t,r,n,s){return(function(i,l){return Qf(i,!0,l)})([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],s)}function wN(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=jf(r[0],1*(1+.2*t.roughness),t),s=t.disableMultiStroke?[]:jf(r[0],1.5*(1+.22*t.roughness),_N(t));for(let i=1;i<r.length;i++){const l=r[i];if(l.length){const c=jf(l,1*(1+.2*t.roughness),t),d=t.disableMultiStroke?[]:jf(l,1.5*(1+.22*t.roughness),_N(t));for(const h of c)h.op!=="move"&&n.push(h);for(const h of d)h.op!=="move"&&s.push(h)}}return{type:"path",ops:n.concat(s)}}return{type:"path",ops:[]}}function CO(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),s=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),i=2*Math.PI/s;let l=Math.abs(e/2),c=Math.abs(t/2);const d=1-r.curveFitting;return l+=tr(l*d,r),c+=tr(c*d,r),{increment:i,rx:l,ry:c}}function Cv(e,t,r,n){const[s,i]=TN(n.increment,e,t,n.rx,n.ry,1,n.increment*Y0(.1,Y0(.4,1,r),r),r);let l=W0(s,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[c]=TN(n.increment,e,t,n.rx,n.ry,1.5,0,r),d=W0(c,null,r);l=l.concat(d)}return{estimatedPoints:i,opset:{type:"path",ops:l}}}function SN(e,t,r,n,s,i,l,c,d){const h=e,g=t;let f=Math.abs(r/2),x=Math.abs(n/2);f+=tr(.01*f,d),x+=tr(.01*x,d);let b=s,y=i;for(;b<0;)b+=2*Math.PI,y+=2*Math.PI;y-b>2*Math.PI&&(b=0,y=2*Math.PI);const k=2*Math.PI/d.curveStepCount,S=Math.min(k/2,(y-b)/2),_=CN(S,h,g,f,x,b,y,1,d);if(!d.disableMultiStroke){const T=CN(S,h,g,f,x,b,y,1.5,d);_.push(...T)}return l&&(c?_.push(...hl(h,g,h+f*Math.cos(b),g+x*Math.sin(b),d),...hl(h,g,h+f*Math.cos(y),g+x*Math.sin(y),d)):_.push({op:"lineTo",data:[h,g]},{op:"lineTo",data:[h+f*Math.cos(b),g+x*Math.sin(b)]})),{type:"path",ops:_}}function EN(e,t){const r=EO(SO(xk(e))),n=[];let s=[0,0],i=[0,0];for(const{key:l,data:c}of r)switch(l){case"M":i=[c[0],c[1]],s=[c[0],c[1]];break;case"L":n.push(...hl(i[0],i[1],c[0],c[1],t)),i=[c[0],c[1]];break;case"C":{const[d,h,g,f,x,b]=c;n.push(...boe(d,h,g,f,x,b,i,t)),i=[x,b];break}case"Z":n.push(...hl(i[0],i[1],s[0],s[1],t)),i=[s[0],s[1]]}return{type:"path",ops:n}}function Yy(e,t){const r=[];for(const n of e)if(n.length){const s=t.maxRandomnessOffset||0,i=n.length;if(i>2){r.push({op:"move",data:[n[0][0]+tr(s,t),n[0][1]+tr(s,t)]});for(let l=1;l<i;l++)r.push({op:"lineTo",data:[n[l][0]+tr(s,t),n[l][1]+tr(s,t)]})}}return{type:"fillPath",ops:r}}function xu(e,t){return(function(r,n){let s=r.fillStyle||"hachure";if(!hs[s])switch(s){case"zigzag":hs[s]||(hs[s]=new coe(n));break;case"cross-hatch":hs[s]||(hs[s]=new uoe(n));break;case"dots":hs[s]||(hs[s]=new doe(n));break;case"dashed":hs[s]||(hs[s]=new hoe(n));break;case"zigzag-line":hs[s]||(hs[s]=new goe(n));break;default:s="hachure",hs[s]||(hs[s]=new mk(n))}return hs[s]})(t,moe).fillPolygons(e,t)}function _N(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function NO(e){return e.randomizer||(e.randomizer=new poe(e.seed||0)),e.randomizer.next()}function Y0(e,t,r,n=1){return r.roughness*n*(NO(r)*(t-e)+e)}function tr(e,t,r=1){return Y0(-e,e,t,r)}function hl(e,t,r,n,s,i=!1){const l=i?s.disableMultiStrokeFill:s.disableMultiStroke,c=Nv(e,t,r,n,s,!0,!1);if(l)return c;const d=Nv(e,t,r,n,s,!0,!0);return c.concat(d)}function Nv(e,t,r,n,s,i,l){const c=Math.pow(e-r,2)+Math.pow(t-n,2),d=Math.sqrt(c);let h=1;h=d<200?1:d>500?.4:-.0016668*d+1.233334;let g=s.maxRandomnessOffset||0;g*g*100>c&&(g=d/10);const f=g/2,x=.2+.2*NO(s);let b=s.bowing*s.maxRandomnessOffset*(n-t)/200,y=s.bowing*s.maxRandomnessOffset*(e-r)/200;b=tr(b,s,h),y=tr(y,s,h);const k=[],S=()=>tr(f,s,h),_=()=>tr(g,s,h),T=s.preserveVertices;return l?k.push({op:"move",data:[e+(T?0:S()),t+(T?0:S())]}):k.push({op:"move",data:[e+(T?0:tr(g,s,h)),t+(T?0:tr(g,s,h))]}),l?k.push({op:"bcurveTo",data:[b+e+(r-e)*x+S(),y+t+(n-t)*x+S(),b+e+2*(r-e)*x+S(),y+t+2*(n-t)*x+S(),r+(T?0:S()),n+(T?0:S())]}):k.push({op:"bcurveTo",data:[b+e+(r-e)*x+_(),y+t+(n-t)*x+_(),b+e+2*(r-e)*x+_(),y+t+2*(n-t)*x+_(),r+(T?0:_()),n+(T?0:_())]}),k}function jf(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+tr(t,r),e[0][1]+tr(t,r)]),n.push([e[0][0]+tr(t,r),e[0][1]+tr(t,r)]);for(let s=1;s<e.length;s++)n.push([e[s][0]+tr(t,r),e[s][1]+tr(t,r)]),s===e.length-1&&n.push([e[s][0]+tr(t,r),e[s][1]+tr(t,r)]);return W0(n,null,r)}function W0(e,t,r){const n=e.length,s=[];if(n>3){const i=[],l=1-r.curveTightness;s.push({op:"move",data:[e[1][0],e[1][1]]});for(let c=1;c+2<n;c++){const d=e[c];i[0]=[d[0],d[1]],i[1]=[d[0]+(l*e[c+1][0]-l*e[c-1][0])/6,d[1]+(l*e[c+1][1]-l*e[c-1][1])/6],i[2]=[e[c+1][0]+(l*e[c][0]-l*e[c+2][0])/6,e[c+1][1]+(l*e[c][1]-l*e[c+2][1])/6],i[3]=[e[c+1][0],e[c+1][1]],s.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else n===3?(s.push({op:"move",data:[e[1][0],e[1][1]]}),s.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&s.push(...Nv(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return s}function TN(e,t,r,n,s,i,l,c){const d=[],h=[];if(c.roughness===0){e/=4,h.push([t+n*Math.cos(-e),r+s*Math.sin(-e)]);for(let g=0;g<=2*Math.PI;g+=e){const f=[t+n*Math.cos(g),r+s*Math.sin(g)];d.push(f),h.push(f)}h.push([t+n*Math.cos(0),r+s*Math.sin(0)]),h.push([t+n*Math.cos(e),r+s*Math.sin(e)])}else{const g=tr(.5,c)-Math.PI/2;h.push([tr(i,c)+t+.9*n*Math.cos(g-e),tr(i,c)+r+.9*s*Math.sin(g-e)]);const f=2*Math.PI+g-.01;for(let x=g;x<f;x+=e){const b=[tr(i,c)+t+n*Math.cos(x),tr(i,c)+r+s*Math.sin(x)];d.push(b),h.push(b)}h.push([tr(i,c)+t+n*Math.cos(g+2*Math.PI+.5*l),tr(i,c)+r+s*Math.sin(g+2*Math.PI+.5*l)]),h.push([tr(i,c)+t+.98*n*Math.cos(g+l),tr(i,c)+r+.98*s*Math.sin(g+l)]),h.push([tr(i,c)+t+.9*n*Math.cos(g+.5*l),tr(i,c)+r+.9*s*Math.sin(g+.5*l)])}return[h,d]}function CN(e,t,r,n,s,i,l,c,d){const h=i+tr(.1,d),g=[];g.push([tr(c,d)+t+.9*n*Math.cos(h-e),tr(c,d)+r+.9*s*Math.sin(h-e)]);for(let f=h;f<=l;f+=e)g.push([tr(c,d)+t+n*Math.cos(f),tr(c,d)+r+s*Math.sin(f)]);return g.push([t+n*Math.cos(l),r+s*Math.sin(l)]),g.push([t+n*Math.cos(l),r+s*Math.sin(l)]),W0(g,null,d)}function boe(e,t,r,n,s,i,l,c){const d=[],h=[c.maxRandomnessOffset||1,(c.maxRandomnessOffset||1)+.3];let g=[0,0];const f=c.disableMultiStroke?1:2,x=c.preserveVertices;for(let b=0;b<f;b++)b===0?d.push({op:"move",data:[l[0],l[1]]}):d.push({op:"move",data:[l[0]+(x?0:tr(h[0],c)),l[1]+(x?0:tr(h[0],c))]}),g=x?[s,i]:[s+tr(h[b],c),i+tr(h[b],c)],d.push({op:"bcurveTo",data:[e+tr(h[b],c),t+tr(h[b],c),r+tr(h[b],c),n+tr(h[b],c),g[0],g[1]]});return d}function Ah(e){return[...e]}function NN(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(Ah(e[0]),Ah(e[1]),Ah(e[2]),Ah(e[2]));else{const s=[];s.push(e[0],e[0]);for(let c=1;c<e.length;c++)s.push(e[c]),c===e.length-1&&s.push(e[c]);const i=[],l=1-t;n.push(Ah(s[0]));for(let c=1;c+2<s.length;c++){const d=s[c];i[0]=[d[0],d[1]],i[1]=[d[0]+(l*s[c+1][0]-l*s[c-1][0])/6,d[1]+(l*s[c+1][1]-l*s[c-1][1])/6],i[2]=[s[c+1][0]+(l*s[c][0]-l*s[c+2][0])/6,s[c+1][1]+(l*s[c][1]-l*s[c+2][1])/6],i[3]=[s[c+1][0],s[c+1][1]],n.push(i[1],i[2],i[3])}}return n}function Jf(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function yoe(e,t,r){const n=Jf(t,r);if(n===0)return Jf(e,t);let s=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return s=Math.max(0,Math.min(1,s)),Jf(e,Vl(t,r,s))}function Vl(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Av(e,t,r,n){const s=n||[];if((function(c,d){const h=c[d+0],g=c[d+1],f=c[d+2],x=c[d+3];let b=3*g[0]-2*h[0]-x[0];b*=b;let y=3*g[1]-2*h[1]-x[1];y*=y;let k=3*f[0]-2*x[0]-h[0];k*=k;let S=3*f[1]-2*x[1]-h[1];return S*=S,b<k&&(b=k),y<S&&(y=S),b+y})(e,t)<r){const c=e[t+0];s.length?(i=s[s.length-1],l=c,Math.sqrt(Jf(i,l))>1&&s.push(c)):s.push(c),s.push(e[t+3])}else{const d=e[t+0],h=e[t+1],g=e[t+2],f=e[t+3],x=Vl(d,h,.5),b=Vl(h,g,.5),y=Vl(g,f,.5),k=Vl(x,b,.5),S=Vl(b,y,.5),_=Vl(k,S,.5);Av([d,x,k,_],0,r,s),Av([_,S,y,f],0,r,s)}var i,l;return s}function voe(e,t){return V0(e,0,e.length,t)}function V0(e,t,r,n,s){const i=s||[],l=e[t],c=e[r-1];let d=0,h=1;for(let g=t+1;g<r-1;++g){const f=yoe(e[g],l,c);f>d&&(d=f,h=g)}return Math.sqrt(d)>n?(V0(e,t,h+1,n,i),V0(e,h,r,n,i)):(i.length||i.push(l),i.push(c)),i}function Wy(e,t=.15,r){const n=[],s=(e.length-1)/3;for(let i=0;i<s;i++)Av(e,3*i,t,n);return r&&r>0?V0(n,0,n.length,r):n}const Cs="none";class K0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,s,i){const l=this._o(i);return this._d("line",[TO(t,r,n,s,l)],l)}rectangle(t,r,n,s,i){const l=this._o(i),c=[],d=xoe(t,r,n,s,l);if(l.fill){const h=[[t,r],[t+n,r],[t+n,r+s],[t,r+s]];l.fillStyle==="solid"?c.push(Yy([h],l)):c.push(xu([h],l))}return l.stroke!==Cs&&c.push(d),this._d("rectangle",c,l)}ellipse(t,r,n,s,i){const l=this._o(i),c=[],d=CO(n,s,l),h=Cv(t,r,l,d);if(l.fill)if(l.fillStyle==="solid"){const g=Cv(t,r,l,d).opset;g.type="fillPath",c.push(g)}else c.push(xu([h.estimatedPoints],l));return l.stroke!==Cs&&c.push(h.opset),this._d("ellipse",c,l)}circle(t,r,n,s){const i=this.ellipse(t,r,n,n,s);return i.shape="circle",i}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[Qf(t,!1,n)],n)}arc(t,r,n,s,i,l,c=!1,d){const h=this._o(d),g=[],f=SN(t,r,n,s,i,l,c,!0,h);if(c&&h.fill)if(h.fillStyle==="solid"){const x=Object.assign({},h);x.disableMultiStroke=!0;const b=SN(t,r,n,s,i,l,!0,!1,x);b.type="fillPath",g.push(b)}else g.push((function(x,b,y,k,S,_,T){const N=x,I=b;let R=Math.abs(y/2),B=Math.abs(k/2);R+=tr(.01*R,T),B+=tr(.01*B,T);let F=S,ae=_;for(;F<0;)F+=2*Math.PI,ae+=2*Math.PI;ae-F>2*Math.PI&&(F=0,ae=2*Math.PI);const G=(ae-F)/T.curveStepCount,$=[];for(let J=F;J<=ae;J+=G)$.push([N+R*Math.cos(J),I+B*Math.sin(J)]);return $.push([N+R*Math.cos(ae),I+B*Math.sin(ae)]),$.push([N,I]),xu([$],T)})(t,r,n,s,i,l,h));return h.stroke!==Cs&&g.push(f),this._d("arc",g,h)}curve(t,r){const n=this._o(r),s=[],i=wN(t,n);if(n.fill&&n.fill!==Cs)if(n.fillStyle==="solid"){const l=wN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(l.ops)})}else{const l=[],c=t;if(c.length){const d=typeof c[0][0]=="number"?[c]:c;for(const h of d)h.length<3?l.push(...h):h.length===3?l.push(...Wy(NN([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):l.push(...Wy(NN(h),10,(1+n.roughness)/2))}l.length&&s.push(xu([l],n))}return n.stroke!==Cs&&s.push(i),this._d("curve",s,n)}polygon(t,r){const n=this._o(r),s=[],i=Qf(t,!0,n);return n.fill&&(n.fillStyle==="solid"?s.push(Yy([t],n)):s.push(xu([t],n))),n.stroke!==Cs&&s.push(i),this._d("polygon",s,n)}path(t,r){const n=this._o(r),s=[];if(!t)return this._d("path",s,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&n.fill!=="transparent"&&n.fill!==Cs,l=n.stroke!==Cs,c=!!(n.simplification&&n.simplification<1),d=(function(g,f,x){const b=EO(SO(xk(g))),y=[];let k=[],S=[0,0],_=[];const T=()=>{_.length>=4&&k.push(...Wy(_,f)),_=[]},N=()=>{T(),k.length&&(y.push(k),k=[])};for(const{key:R,data:B}of b)switch(R){case"M":N(),S=[B[0],B[1]],k.push(S);break;case"L":T(),k.push([B[0],B[1]]);break;case"C":if(!_.length){const F=k.length?k[k.length-1]:S;_.push([F[0],F[1]])}_.push([B[0],B[1]]),_.push([B[2],B[3]]),_.push([B[4],B[5]]);break;case"Z":T(),k.push([S[0],S[1]])}if(N(),!x)return y;const I=[];for(const R of y){const B=voe(R,x);B.length&&I.push(B)}return I})(t,1,c?4-4*(n.simplification||1):(1+n.roughness)/2),h=EN(t,n);if(i)if(n.fillStyle==="solid")if(d.length===1){const g=EN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(g.ops)})}else s.push(Yy(d,n));else s.push(xu(d,n));return l&&(c?d.forEach((g=>{s.push(Qf(g,!1,n))})):s.push(h)),this._d("path",s,n)}opsToPath(t,r){let n="";for(const s of t.ops){const i=typeof r=="number"&&r>=0?s.data.map((l=>+l.toFixed(r))):s.data;switch(s.op){case"move":n+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":n+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":n+=`L${i[0]} ${i[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,s=[];for(const i of r){let l=null;switch(i.type){case"path":l={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Cs};break;case"fillPath":l={d:this.opsToPath(i),stroke:Cs,strokeWidth:0,fill:n.fill||Cs};break;case"fillSketch":l=this.fillSketch(i,n)}l&&s.push(l)}return s}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Cs,strokeWidth:n,fill:Cs}}_mergedShape(t){return t.filter(((r,n)=>n===0||r.op!=="move"))}}class koe{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new K0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const l of r)switch(l.type){case"path":s.save(),s.strokeStyle=n.stroke==="none"?"transparent":n.stroke,s.lineWidth=n.strokeWidth,n.strokeLineDash&&s.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(s.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(s,l,i),s.restore();break;case"fillPath":{s.save(),s.fillStyle=n.fill||"";const c=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,l,i,c),s.restore();break}case"fillSketch":this.fillSketch(s,l,n)}}fillSketch(t,r,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=s,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,s="nonzero"){t.beginPath();for(const i of r.ops){const l=typeof n=="number"&&n>=0?i.data.map((c=>+c.toFixed(n))):i.data;switch(i.op){case"move":t.moveTo(l[0],l[1]);break;case"bcurveTo":t.bezierCurveTo(l[0],l[1],l[2],l[3],l[4],l[5]);break;case"lineTo":t.lineTo(l[0],l[1])}}r.type==="fillPath"?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,s,i){const l=this.gen.line(t,r,n,s,i);return this.draw(l),l}rectangle(t,r,n,s,i){const l=this.gen.rectangle(t,r,n,s,i);return this.draw(l),l}ellipse(t,r,n,s,i){const l=this.gen.ellipse(t,r,n,s,i);return this.draw(l),l}circle(t,r,n,s){const i=this.gen.circle(t,r,n,s);return this.draw(i),i}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,s,i,l,c=!1,d){const h=this.gen.arc(t,r,n,s,i,l,c,d);return this.draw(h),h}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const Lf="http://www.w3.org/2000/svg";class woe{constructor(t,r){this.svg=t,this.gen=new K0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,i=s.createElementNS(Lf,"g"),l=t.options.fixedDecimalPlaceDigits;for(const c of r){let d=null;switch(c.type){case"path":d=s.createElementNS(Lf,"path"),d.setAttribute("d",this.opsToPath(c,l)),d.setAttribute("stroke",n.stroke),d.setAttribute("stroke-width",n.strokeWidth+""),d.setAttribute("fill","none"),n.strokeLineDash&&d.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&d.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":d=s.createElementNS(Lf,"path"),d.setAttribute("d",this.opsToPath(c,l)),d.setAttribute("stroke","none"),d.setAttribute("stroke-width","0"),d.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||d.setAttribute("fill-rule","evenodd");break;case"fillSketch":d=this.fillSketch(s,c,n)}d&&i.appendChild(d)}return i}fillSketch(t,r,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const i=t.createElementNS(Lf,"path");return i.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",s+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,s,i){const l=this.gen.line(t,r,n,s,i);return this.draw(l)}rectangle(t,r,n,s,i){const l=this.gen.rectangle(t,r,n,s,i);return this.draw(l)}ellipse(t,r,n,s,i){const l=this.gen.ellipse(t,r,n,s,i);return this.draw(l)}circle(t,r,n,s){const i=this.gen.circle(t,r,n,s);return this.draw(i)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,s,i,l,c=!1,d){const h=this.gen.arc(t,r,n,s,i,l,c,d);return this.draw(h)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var At={canvas:(e,t)=>new koe(e,t),svg:(e,t)=>new woe(e,t),generator:e=>new K0(e),newSeed:()=>K0.newSeed()},Qt=A(async(e,t,r)=>{let n;const s=t.useHtmlLabels||la(Zr()?.htmlLabels);r?n=r:n="node default";const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),l=i.insert("g").attr("class","label").attr("style",Ba(t.labelStyle));let c;t.label===void 0?c="":c=typeof t.label=="string"?t.label:t.label[0];const d=await xl(l,Zs(Cc(c),Zr()),{useHtmlLabels:s,width:t.width||Zr().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let h=d.getBBox();const g=(t?.padding??0)/2;if(s){const f=d.children[0],x=Pr(d),b=f.getElementsByTagName("img");if(b){const y=c.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(k=>new Promise(S=>{function _(){if(k.style.display="flex",k.style.flexDirection="column",y){const T=Zr().fontSize?Zr().fontSize:window.getComputedStyle(document.body).fontSize,N=5,[I=z4.fontSize]=Lm(T),R=I*N+"px";k.style.minWidth=R,k.style.maxWidth=R}else k.style.width="100%";S(k)}A(_,"setupImage"),setTimeout(()=>{k.complete&&_()}),k.addEventListener("error",_),k.addEventListener("load",_)})))}h=f.getBoundingClientRect(),x.attr("width",h.width),x.attr("height",h.height)}return s?l.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):l.attr("transform","translate(0, "+-h.height/2+")"),t.centerLabel&&l.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),l.insert("rect",":first-child"),{shapeSvg:i,bbox:h,halfPadding:g,label:l}},"labelHelper"),Vy=A(async(e,t,r)=>{const n=r.useHtmlLabels||la(Zr()?.flowchart?.htmlLabels),s=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),i=await xl(s,Zs(Cc(t),Zr()),{useHtmlLabels:n,width:r.width||Zr()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let l=i.getBBox();const c=r.padding/2;if(la(Zr()?.flowchart?.htmlLabels)){const d=i.children[0],h=Pr(i);l=d.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}return n?s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"):s.attr("transform","translate(0, "+-l.height/2+")"),r.centerLabel&&s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:e,bbox:l,halfPadding:c,label:s}},"insertLabel"),It=A((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Yt=A((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Ar(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}A(Ar,"createPathFromPoints");function gl(e,t,r,n,s,i){const l=[],d=r-e,h=n-t,g=d/i,f=2*Math.PI/g,x=t+h/2;for(let b=0;b<=50;b++){const y=b/50,k=e+y*d,S=x+s*Math.sin(f*(k-e));l.push({x:k,y:S})}return l}A(gl,"generateFullSineWavePoints");function Sg(e,t,r,n,s,i){const l=[],c=s*Math.PI/180,g=(i*Math.PI/180-c)/(n-1);for(let f=0;f<n;f++){const x=c+f*g,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}A(Sg,"generateCirclePoints");var Soe=A((e,t)=>{var r=e.x,n=e.y,s=t.x-r,i=t.y-n,l=e.width/2,c=e.height/2,d,h;return Math.abs(i)*l>Math.abs(s)*c?(i<0&&(c=-c),d=i===0?0:c*s/i,h=c):(s<0&&(l=-l),d=l,h=s===0?0:l*i/s),{x:r+d,y:n+h}},"intersectRect"),fd=Soe;function AO(e,t){t&&e.attr("style",t)}A(AO,"applyStyle");async function jO(e){const t=Pr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=Zr();let s=e.label;e.label&&Yu(e.label)&&(s=await E2(e.label.replace(dd.lineBreakRegex,`
`),n));const l='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>";return r.html(Zs(l,n)),AO(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}A(jO,"addHtmlLabel");var Eoe=A(async(e,t,r,n)=>{let s=e||"";if(typeof s=="object"&&(s=s[0]),la(Zr().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),qe.info("vertexText"+s);const i={isNode:n,label:Cc(s).replace(/fa[blrs]?:fa-[\w-]+/g,c=>`<i class='${c.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await jO(i)}else{const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",t.replace("color:","fill:"));let l=[];typeof s=="string"?l=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?l=s:l=[];for(const c of l){const d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),r?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=c.trim(),i.appendChild(d)}return i}},"createLabel"),rc=Eoe,bl=A((e,t,r,n,s)=>["M",e+s,t,"H",e+r-s,"A",s,s,0,0,1,e+r,t+s,"V",t+n-s,"A",s,s,0,0,1,e+r-s,t+n,"H",e+s,"A",s,s,0,0,1,e,t+n-s,"V",t+s,"A",s,s,0,0,1,e+s,t,"Z"].join(" "),"createRoundedRectPathD"),LO=A(async(e,t)=>{qe.info("Creating subgraph rect for ",t.id,t);const r=Zr(),{themeVariables:n,handDrawnSeed:s}=r,{clusterBkg:i,clusterBorder:l}=n,{labelStyles:c,nodeStyles:d,borderStyles:h,backgroundStyles:g}=Ot(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),x=la(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),y=await xl(b,t.label,{style:t.labelStyle,useHtmlLabels:x,isNode:!0});let k=y.getBBox();if(la(r.flowchart.htmlLabels)){const F=y.children[0],ae=Pr(y);k=F.getBoundingClientRect(),ae.attr("width",k.width),ae.attr("height",k.height)}const S=t.width<=k.width+t.padding?k.width+t.padding:t.width;t.width<=k.width+t.padding?t.diff=(S-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,T=t.x-S/2,N=t.y-_/2;qe.trace("Data ",t,JSON.stringify(t));let I;if(t.look==="handDrawn"){const F=At.svg(f),ae=Mt(t,{roughness:.7,fill:i,stroke:l,fillWeight:3,seed:s}),G=F.path(bl(T,N,S,_,0),ae);I=f.insert(()=>(qe.debug("Rough node insert CXC",G),G),":first-child"),I.select("path:nth-child(2)").attr("style",h.join(";")),I.select("path").attr("style",g.join(";").replace("fill","stroke"))}else I=f.insert("rect",":first-child"),I.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",T).attr("y",N).attr("width",S).attr("height",_);const{subGraphTitleTopMargin:R}=K2(r);if(b.attr("transform",`translate(${t.x-k.width/2}, ${t.y-t.height/2+R})`),c){const F=b.select("span");F&&F.attr("style",c)}const B=I.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=k.height-t.padding/2,t.intersect=function(F){return fd(t,F)},{cluster:f,labelBBox:k}},"rect"),_oe=A((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),s=0*t.padding,i=s/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+s).attr("height",t.height+s).attr("fill","none");const l=n.node().getBBox();return t.width=l.width,t.height=l.height,t.intersect=function(c){return fd(t,c)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),Toe=A(async(e,t)=>{const r=Zr(),{themeVariables:n,handDrawnSeed:s}=r,{altBackground:i,compositeBackground:l,compositeTitleBackground:c,nodeBorder:d}=n,h=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),g=h.insert("g",":first-child"),f=h.insert("g").attr("class","cluster-label");let x=h.append("rect");const b=f.node().appendChild(await rc(t.label,t.labelStyle,void 0,!0));let y=b.getBBox();if(la(r.flowchart.htmlLabels)){const G=b.children[0],$=Pr(b);y=G.getBoundingClientRect(),$.attr("width",y.width),$.attr("height",y.height)}const k=0*t.padding,S=k/2,_=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+k;t.width<=y.width+t.padding?t.diff=(_-t.width)/2-t.padding:t.diff=-t.padding;const T=t.height+k,N=t.height+k-y.height-6,I=t.x-_/2,R=t.y-T/2;t.width=_;const B=t.y-t.height/2-S+y.height+2;let F;if(t.look==="handDrawn"){const G=t.cssClasses.includes("statediagram-cluster-alt"),$=At.svg(h),J=t.rx||t.ry?$.path(bl(I,R,_,T,10),{roughness:.7,fill:c,fillStyle:"solid",stroke:d,seed:s}):$.rectangle(I,R,_,T,{seed:s});F=h.insert(()=>J,":first-child");const ee=$.rectangle(I,B,_,N,{fill:G?i:l,fillStyle:G?"hachure":"solid",stroke:d,seed:s});F=h.insert(()=>J,":first-child"),x=h.insert(()=>ee)}else F=g.insert("rect",":first-child"),F.attr("class","outer").attr("x",I).attr("y",R).attr("width",_).attr("height",T).attr("data-look",t.look),x.attr("class","inner").attr("x",I).attr("y",B).attr("width",_).attr("height",N);f.attr("transform",`translate(${t.x-y.width/2}, ${R+1-(la(r.flowchart.htmlLabels)?0:3)})`);const ae=F.node().getBBox();return t.height=ae.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(G){return fd(t,G)},{cluster:h,labelBBox:y}},"roundedWithTitle"),Coe=A(async(e,t)=>{qe.info("Creating subgraph rect for ",t.id,t);const r=Zr(),{themeVariables:n,handDrawnSeed:s}=r,{clusterBkg:i,clusterBorder:l}=n,{labelStyles:c,nodeStyles:d,borderStyles:h,backgroundStyles:g}=Ot(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),x=la(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),y=await xl(b,t.label,{style:t.labelStyle,useHtmlLabels:x,isNode:!0,width:t.width});let k=y.getBBox();if(la(r.flowchart.htmlLabels)){const F=y.children[0],ae=Pr(y);k=F.getBoundingClientRect(),ae.attr("width",k.width),ae.attr("height",k.height)}const S=t.width<=k.width+t.padding?k.width+t.padding:t.width;t.width<=k.width+t.padding?t.diff=(S-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,T=t.x-S/2,N=t.y-_/2;qe.trace("Data ",t,JSON.stringify(t));let I;if(t.look==="handDrawn"){const F=At.svg(f),ae=Mt(t,{roughness:.7,fill:i,stroke:l,fillWeight:4,seed:s}),G=F.path(bl(T,N,S,_,t.rx),ae);I=f.insert(()=>(qe.debug("Rough node insert CXC",G),G),":first-child"),I.select("path:nth-child(2)").attr("style",h.join(";")),I.select("path").attr("style",g.join(";").replace("fill","stroke"))}else I=f.insert("rect",":first-child"),I.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",T).attr("y",N).attr("width",S).attr("height",_);const{subGraphTitleTopMargin:R}=K2(r);if(b.attr("transform",`translate(${t.x-k.width/2}, ${t.y-t.height/2+R})`),c){const F=b.select("span");F&&F.attr("style",c)}const B=I.node().getBBox();return t.offsetX=0,t.width=B.width,t.height=B.height,t.offsetY=k.height-t.padding/2,t.intersect=function(F){return fd(t,F)},{cluster:f,labelBBox:k}},"kanbanSection"),Noe=A((e,t)=>{const r=Zr(),{themeVariables:n,handDrawnSeed:s}=r,{nodeBorder:i}=n,l=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),c=l.insert("g",":first-child"),d=0*t.padding,h=t.width+d;t.diff=-t.padding;const g=t.height+d,f=t.x-h/2,x=t.y-g/2;t.width=h;let b;if(t.look==="handDrawn"){const S=At.svg(l).rectangle(f,x,h,g,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:s});b=l.insert(()=>S,":first-child")}else b=c.insert("rect",":first-child"),b.attr("class","divider").attr("x",f).attr("y",x).attr("width",h).attr("height",g).attr("data-look",t.look);const y=b.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(k){return fd(t,k)},{cluster:l,labelBBox:{}}},"divider"),Aoe=LO,joe={rect:LO,squareRect:Aoe,roundedWithTitle:Toe,noteGroup:_oe,divider:Noe,kanbanSection:Coe},MO=new Map,Loe=A(async(e,t)=>{const r=t.shape||"rect",n=await joe[r](e,t);return MO.set(t.id,n),n},"insertCluster"),tge=A(()=>{MO=new Map},"clear");function OO(e,t){return e.intersect(t)}A(OO,"intersectNode");var Moe=OO;function RO(e,t,r,n){var s=e.x,i=e.y,l=s-n.x,c=i-n.y,d=Math.sqrt(t*t*c*c+r*r*l*l),h=Math.abs(t*r*l/d);n.x<s&&(h=-h);var g=Math.abs(t*r*c/d);return n.y<i&&(g=-g),{x:s+h,y:i+g}}A(RO,"intersectEllipse");var IO=RO;function DO(e,t,r){return IO(e,t,t,r)}A(DO,"intersectCircle");var Ooe=DO;function PO(e,t,r,n){{const s=t.y-e.y,i=e.x-t.x,l=t.x*e.y-e.x*t.y,c=s*r.x+i*r.y+l,d=s*n.x+i*n.y+l,h=1e-6;if(c!==0&&d!==0&&jv(c,d))return;const g=n.y-r.y,f=r.x-n.x,x=n.x*r.y-r.x*n.y,b=g*e.x+f*e.y+x,y=g*t.x+f*t.y+x;if(Math.abs(b)<h&&Math.abs(y)<h&&jv(b,y))return;const k=s*f-g*i;if(k===0)return;const S=Math.abs(k/2);let _=i*x-f*l;const T=_<0?(_-S)/k:(_+S)/k;_=g*l-s*x;const N=_<0?(_-S)/k:(_+S)/k;return{x:T,y:N}}}A(PO,"intersectLine");function jv(e,t){return e*t>0}A(jv,"sameSign");var Roe=PO;function BO(e,t,r){let n=e.x,s=e.y,i=[],l=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(g){l=Math.min(l,g.x),c=Math.min(c,g.y)}):(l=Math.min(l,t.x),c=Math.min(c,t.y));let d=n-e.width/2-l,h=s-e.height/2-c;for(let g=0;g<t.length;g++){let f=t[g],x=t[g<t.length-1?g+1:0],b=Roe(e,r,{x:d+f.x,y:h+f.y},{x:d+x.x,y:h+x.y});b&&i.push(b)}return i.length?(i.length>1&&i.sort(function(g,f){let x=g.x-r.x,b=g.y-r.y,y=Math.sqrt(x*x+b*b),k=f.x-r.x,S=f.y-r.y,_=Math.sqrt(k*k+S*S);return y<_?-1:y===_?0:1}),i[0]):e}A(BO,"intersectPolygon");var Ioe=BO,vt={node:Moe,circle:Ooe,ellipse:IO,polygon:Ioe,rect:fd};function FO(e,t){const{labelStyles:r}=Ot(t);t.labelStyle=r;const n=Yt(t);let s=n;n||(s="anchor");const i=e.insert("g").attr("class",s).attr("id",t.domId||t.id),l=1,{cssStyles:c}=t,d=At.svg(i),h=Mt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const g=d.circle(0,0,l*2,h),f=i.insert(()=>g,":first-child");return f.attr("class","anchor").attr("style",Ba(c)),It(t,f),t.intersect=function(x){return qe.info("Circle intersect",t,l,x),vt.circle(t,l,x)},i}A(FO,"anchor");function Lv(e,t,r,n,s,i,l){const d=(e+r)/2,h=(t+n)/2,g=Math.atan2(n-t,r-e),f=(r-e)/2,x=(n-t)/2,b=f/s,y=x/i,k=Math.sqrt(b**2+y**2);if(k>1)throw new Error("The given radii are too small to create an arc between the points.");const S=Math.sqrt(1-k**2),_=d+S*i*Math.sin(g)*(l?-1:1),T=h-S*s*Math.cos(g)*(l?-1:1),N=Math.atan2((t-T)/i,(e-_)/s);let R=Math.atan2((n-T)/i,(r-_)/s)-N;l&&R<0&&(R+=2*Math.PI),!l&&R>0&&(R-=2*Math.PI);const B=[];for(let F=0;F<20;F++){const ae=F/19,G=N+ae*R,$=_+s*Math.cos(G),J=T+i*Math.sin(G);B.push({x:$,y:J})}return B}A(Lv,"generateArcPoints");async function $O(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.width+t.padding+20,c=i.height+t.padding,d=c/2,h=d/(2.5+c/50),{cssStyles:g}=t,f=[{x:l/2,y:-c/2},{x:-l/2,y:-c/2},...Lv(-l/2,-c/2,-l/2,c/2,h,d,!1),{x:l/2,y:c/2},...Lv(l/2,c/2,l/2,-c/2,h,d,!0)],x=At.svg(s),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=Ar(f),k=x.path(y,b),S=s.insert(()=>k,":first-child");return S.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),S.attr("transform",`translate(${h/2}, 0)`),It(t,S),t.intersect=function(_){return vt.polygon(t,f,_)},s}A($O,"bowTieRect");function yl(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}A(yl,"insertPolygonShape");async function UO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.height+t.padding,c=12,d=i.width+t.padding+c,h=0,g=d,f=-l,x=0,b=[{x:h+c,y:f},{x:g,y:f},{x:g,y:x},{x:h,y:x},{x:h,y:f+c},{x:h+c,y:f}];let y;const{cssStyles:k}=t;if(t.look==="handDrawn"){const S=At.svg(s),_=Mt(t,{}),T=Ar(b),N=S.path(T,_);y=s.insert(()=>N,":first-child").attr("transform",`translate(${-d/2}, ${l/2})`),k&&y.attr("style",k)}else y=yl(s,d,l,b);return n&&y.attr("style",n),It(t,y),t.intersect=function(S){return vt.polygon(t,b,S)},s}A(UO,"card");function zO(e,t){const{nodeStyles:r}=Ot(t);t.label="";const n=e.insert("g").attr("class",Yt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,i=Math.max(28,t.width??0),l=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],c=At.svg(n),d=Mt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=Ar(l),g=c.path(h,d),f=n.insert(()=>g,":first-child");return s&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",s),r&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(x){return vt.polygon(t,l,x)},n}A(zO,"choice");async function bk(e,t,r){const{labelStyles:n,nodeStyles:s}=Ot(t);t.labelStyle=n;const{shapeSvg:i,bbox:l,halfPadding:c}=await Qt(e,t,Yt(t)),d=r?.padding??c,h=l.width/2+d;let g;const{cssStyles:f}=t;if(t.look==="handDrawn"){const x=At.svg(i),b=Mt(t,{}),y=x.circle(0,0,h*2,b);g=i.insert(()=>y,":first-child"),g.attr("class","basic label-container").attr("style",Ba(f))}else g=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",s).attr("r",h).attr("cx",0).attr("cy",0);return It(t,g),t.calcIntersect=function(x,b){const y=x.width/2;return vt.circle(x,y,b)},t.intersect=function(x){return qe.info("Circle intersect",t,h,x),vt.circle(t,h,x)},i}A(bk,"circle");function HO(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,s={x:n/2*t,y:n/2*r},i={x:-(n/2)*t,y:n/2*r},l={x:-(n/2)*t,y:-(n/2)*r},c={x:n/2*t,y:-(n/2)*r};return`M ${i.x},${i.y} L ${c.x},${c.y}
                   M ${s.x},${s.y} L ${l.x},${l.y}`}A(HO,"createLine");function qO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r,t.label="";const s=e.insert("g").attr("class",Yt(t)).attr("id",t.domId??t.id),i=Math.max(30,t?.width??0),{cssStyles:l}=t,c=At.svg(s),d=Mt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=c.circle(0,0,i*2,d),g=HO(i),f=c.path(g,d),x=s.insert(()=>h,":first-child");return x.insert(()=>f),l&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",l),n&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",n),It(t,x),t.intersect=function(b){return qe.info("crossedCircle intersect",t,{radius:i,point:b}),vt.circle(t,i,b)},s}A(qO,"crossedCircle");function fo(e,t,r,n=100,s=0,i=180){const l=[],c=s*Math.PI/180,g=(i*Math.PI/180-c)/(n-1);for(let f=0;f<n;f++){const x=c+f*g,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}A(fo,"generateCirclePoints");async function GO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:g}=t,f=[...fo(c/2,-d/2,h,30,-90,0),{x:-c/2-h,y:h},...fo(c/2+h*2,-h,h,20,-180,-270),...fo(c/2+h*2,h,h,20,-90,-180),{x:-c/2-h,y:-d/2},...fo(c/2,d/2,h,20,0,90)],x=[{x:c/2,y:-d/2-h},{x:-c/2,y:-d/2-h},...fo(c/2,-d/2,h,20,-90,0),{x:-c/2-h,y:-h},...fo(c/2+c*.1,-h,h,20,-180,-270),...fo(c/2+c*.1,h,h,20,-90,-180),{x:-c/2-h,y:d/2},...fo(c/2,d/2,h,20,0,90),{x:-c/2,y:d/2+h},{x:c/2,y:d/2+h}],b=At.svg(s),y=Mt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const S=Ar(f).replace("Z",""),_=b.path(S,y),T=Ar(x),N=b.path(T,{...y}),I=s.insert("g",":first-child");return I.insert(()=>N,":first-child").attr("stroke-opacity",0),I.insert(()=>_,":first-child"),I.attr("class","text"),g&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${h}, 0)`),l.attr("transform",`translate(${-c/2+h-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),It(t,I),t.intersect=function(R){return vt.polygon(t,x,R)},s}A(GO,"curlyBraceLeft");function mo(e,t,r,n=100,s=0,i=180){const l=[],c=s*Math.PI/180,g=(i*Math.PI/180-c)/(n-1);for(let f=0;f<n;f++){const x=c+f*g,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:b,y})}return l}A(mo,"generateCirclePoints");async function YO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:g}=t,f=[...mo(c/2,-d/2,h,20,-90,0),{x:c/2+h,y:-h},...mo(c/2+h*2,-h,h,20,-180,-270),...mo(c/2+h*2,h,h,20,-90,-180),{x:c/2+h,y:d/2},...mo(c/2,d/2,h,20,0,90)],x=[{x:-c/2,y:-d/2-h},{x:c/2,y:-d/2-h},...mo(c/2,-d/2,h,20,-90,0),{x:c/2+h,y:-h},...mo(c/2+h*2,-h,h,20,-180,-270),...mo(c/2+h*2,h,h,20,-90,-180),{x:c/2+h,y:d/2},...mo(c/2,d/2,h,20,0,90),{x:c/2,y:d/2+h},{x:-c/2,y:d/2+h}],b=At.svg(s),y=Mt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const S=Ar(f).replace("Z",""),_=b.path(S,y),T=Ar(x),N=b.path(T,{...y}),I=s.insert("g",":first-child");return I.insert(()=>N,":first-child").attr("stroke-opacity",0),I.insert(()=>_,":first-child"),I.attr("class","text"),g&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(${-h}, 0)`),l.attr("transform",`translate(${-c/2+(t.padding??0)/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),It(t,I),t.intersect=function(R){return vt.polygon(t,x,R)},s}A(YO,"curlyBraceRight");function _a(e,t,r,n=100,s=0,i=180){const l=[],c=s*Math.PI/180,g=(i*Math.PI/180-c)/(n-1);for(let f=0;f<n;f++){const x=c+f*g,b=e+r*Math.cos(x),y=t+r*Math.sin(x);l.push({x:-b,y:-y})}return l}A(_a,"generateCirclePoints");async function WO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:g}=t,f=[..._a(c/2,-d/2,h,30,-90,0),{x:-c/2-h,y:h},..._a(c/2+h*2,-h,h,20,-180,-270),..._a(c/2+h*2,h,h,20,-90,-180),{x:-c/2-h,y:-d/2},..._a(c/2,d/2,h,20,0,90)],x=[..._a(-c/2+h+h/2,-d/2,h,20,-90,-180),{x:c/2-h/2,y:h},..._a(-c/2-h/2,-h,h,20,0,90),..._a(-c/2-h/2,h,h,20,-90,0),{x:c/2-h/2,y:-h},..._a(-c/2+h+h/2,d/2,h,30,-180,-270)],b=[{x:c/2,y:-d/2-h},{x:-c/2,y:-d/2-h},..._a(c/2,-d/2,h,20,-90,0),{x:-c/2-h,y:-h},..._a(c/2+h*2,-h,h,20,-180,-270),..._a(c/2+h*2,h,h,20,-90,-180),{x:-c/2-h,y:d/2},..._a(c/2,d/2,h,20,0,90),{x:-c/2,y:d/2+h},{x:c/2-h-h/2,y:d/2+h},..._a(-c/2+h+h/2,-d/2,h,20,-90,-180),{x:c/2-h/2,y:h},..._a(-c/2-h/2,-h,h,20,0,90),..._a(-c/2-h/2,h,h,20,-90,0),{x:c/2-h/2,y:-h},..._a(-c/2+h+h/2,d/2,h,30,-180,-270)],y=At.svg(s),k=Mt(t,{fill:"none"});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const _=Ar(f).replace("Z",""),T=y.path(_,k),I=Ar(x).replace("Z",""),R=y.path(I,k),B=Ar(b),F=y.path(B,{...k}),ae=s.insert("g",":first-child");return ae.insert(()=>F,":first-child").attr("stroke-opacity",0),ae.insert(()=>T,":first-child"),ae.insert(()=>R,":first-child"),ae.attr("class","text"),g&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",g),n&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",n),ae.attr("transform",`translate(${h-h/4}, 0)`),l.attr("transform",`translate(${-c/2+(t.padding??0)/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),It(t,ae),t.intersect=function(G){return vt.polygon(t,b,G)},s}A(WO,"curlyBraces");async function VO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=80,c=20,d=Math.max(l,(i.width+(t.padding??0)*2)*1.25,t?.width??0),h=Math.max(c,i.height+(t.padding??0)*2,t?.height??0),g=h/2,{cssStyles:f}=t,x=At.svg(s),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=d,k=h,S=y-g,_=k/4,T=[{x:S,y:0},{x:_,y:0},{x:0,y:k/2},{x:_,y:k},{x:S,y:k},...Sg(-S,-k/2,g,50,270,90)],N=Ar(T),I=x.path(N,b),R=s.insert(()=>I,":first-child");return R.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&R.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&R.selectChildren("path").attr("style",n),R.attr("transform",`translate(${-d/2}, ${-h/2})`),It(t,R),t.intersect=function(B){return vt.polygon(t,T,B)},s}A(VO,"curvedTrapezoid");var Doe=A((e,t,r,n,s,i)=>[`M${e},${t+i}`,`a${s},${i} 0,0,0 ${r},0`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),Poe=A((e,t,r,n,s,i)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),Boe=A((e,t,r,n,s,i)=>[`M${e-r/2},${-n/2}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function KO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+t.padding,t.width??0),d=c/2,h=d/(2.5+c/50),g=Math.max(i.height+h+t.padding,t.height??0);let f;const{cssStyles:x}=t;if(t.look==="handDrawn"){const b=At.svg(s),y=Poe(0,0,c,g,d,h),k=Boe(0,h,c,g,d,h),S=b.path(y,Mt(t,{})),_=b.path(k,Mt(t,{fill:"none"}));f=s.insert(()=>_,":first-child"),f=s.insert(()=>S,":first-child"),f.attr("class","basic label-container"),x&&f.attr("style",x)}else{const b=Doe(0,0,c,g,d,h);f=s.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",Ba(x)).attr("style",n)}return f.attr("label-offset-y",h),f.attr("transform",`translate(${-c/2}, ${-(g/2+h)})`),It(t,f),l.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(t.padding??0)/1.5-(i.y-(i.top??0))})`),t.intersect=function(b){const y=vt.rect(t,b),k=y.x-(t.x??0);if(d!=0&&(Math.abs(k)<(t.width??0)/2||Math.abs(k)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-h)){let S=h*h*(1-k*k/(d*d));S>0&&(S=Math.sqrt(S)),S=h-S,b.y-(t.y??0)>0&&(S=-S),y.y+=S}return y},s}A(KO,"cylinder");async function XO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=i.width+t.padding,d=i.height+t.padding,h=d*.2,g=-c/2,f=-d/2-h/2,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:g,y:f+h},{x:-g,y:f+h},{x:-g,y:-f},{x:g,y:-f},{x:g,y:f},{x:-g,y:f},{x:-g,y:f+h}],S=b.polygon(k.map(T=>[T.x,T.y]),y),_=s.insert(()=>S,":first-child");return _.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),l.attr("transform",`translate(${g+(t.padding??0)/2-(i.x-(i.left??0))}, ${f+h+(t.padding??0)/2-(i.y-(i.top??0))})`),It(t,_),t.intersect=function(T){return vt.rect(t,T)},s}A(XO,"dividedRectangle");async function QO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:l}=await Qt(e,t,Yt(t)),d=i.width/2+l+5,h=i.width/2+l;let g;const{cssStyles:f}=t;if(t.look==="handDrawn"){const x=At.svg(s),b=Mt(t,{roughness:.2,strokeWidth:2.5}),y=Mt(t,{roughness:.2,strokeWidth:1.5}),k=x.circle(0,0,d*2,b),S=x.circle(0,0,h*2,y);g=s.insert("g",":first-child"),g.attr("class",Ba(t.cssClasses)).attr("style",Ba(f)),g.node()?.appendChild(k),g.node()?.appendChild(S)}else{g=s.insert("g",":first-child");const x=g.insert("circle",":first-child"),b=g.insert("circle");g.attr("class","basic label-container").attr("style",n),x.attr("class","outer-circle").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0)}return It(t,g),t.intersect=function(x){return qe.info("DoubleCircle intersect",t,d,x),vt.circle(t,d,x)},s}A(QO,"doublecircle");function JO(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Ot(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",Yt(t)).attr("id",t.domId??t.id),l=7,{cssStyles:c}=t,d=At.svg(i),{nodeBorder:h}=r,g=Mt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(g.roughness=0);const f=d.circle(0,0,l*2,g),x=i.insert(()=>f,":first-child");return x.selectAll("path").attr("style",`fill: ${h} !important;`),c&&c.length>0&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",c),s&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",s),It(t,x),t.intersect=function(b){return qe.info("filledCircle intersect",t,{radius:l,point:b}),vt.circle(t,l,b)},i}A(JO,"filledCircle");async function ZO(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=i.width+(t.padding??0),d=c+i.height,h=c+i.height,g=[{x:0,y:-d},{x:h,y:-d},{x:h/2,y:0}],{cssStyles:f}=t,x=At.svg(s),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=Ar(g),k=x.path(y,b),S=s.insert(()=>k,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return f&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),t.width=c,t.height=d,It(t,S),l.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-d/2+(t.padding??0)/2+(i.y-(i.top??0))})`),t.intersect=function(_){return qe.info("Triangle intersect",t,g,_),vt.polygon(t,g,_)},s}A(ZO,"flippedTriangle");function eR(e,t,{dir:r,config:{state:n,themeVariables:s}}){const{nodeStyles:i}=Ot(t);t.label="";const l=e.insert("g").attr("class",Yt(t)).attr("id",t.domId??t.id),{cssStyles:c}=t;let d=Math.max(70,t?.width??0),h=Math.max(10,t?.height??0);r==="LR"&&(d=Math.max(10,t?.width??0),h=Math.max(70,t?.height??0));const g=-1*d/2,f=-1*h/2,x=At.svg(l),b=Mt(t,{stroke:s.lineColor,fill:s.lineColor});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=x.rectangle(g,f,d,h,b),k=l.insert(()=>y,":first-child");c&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",c),i&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",i),It(t,k);const S=n?.padding??0;return t.width&&t.height&&(t.width+=S/2||0,t.height+=S/2||0),t.intersect=function(_){return vt.rect(t,_)},l}A(eR,"forkJoin");async function tR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const s=80,i=50,{shapeSvg:l,bbox:c}=await Qt(e,t,Yt(t)),d=Math.max(s,c.width+(t.padding??0)*2,t?.width??0),h=Math.max(i,c.height+(t.padding??0)*2,t?.height??0),g=h/2,{cssStyles:f}=t,x=At.svg(l),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:-d/2,y:-h/2},{x:d/2-g,y:-h/2},...Sg(-d/2+g,0,g,50,90,270),{x:d/2-g,y:h/2},{x:-d/2,y:h/2}],k=Ar(y),S=x.path(k,b),_=l.insert(()=>S,":first-child");return _.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),It(t,_),t.intersect=function(T){return qe.info("Pill intersect",t,{radius:g,point:T}),vt.polygon(t,y,T)},l}A(tR,"halfRoundedRectangle");async function rR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.height+(t.padding??0),c=i.width+(t.padding??0)*2.5,{cssStyles:d}=t,h=At.svg(s),g=Mt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");let f=c/2;const x=f/6;f=f+x;const b=l/2,y=b/2,k=f-y,S=[{x:-k,y:-b},{x:0,y:-b},{x:k,y:-b},{x:f,y:0},{x:k,y:b},{x:0,y:b},{x:-k,y:b},{x:-f,y:0}],_=Ar(S),T=h.path(_,g),N=s.insert(()=>T,":first-child");return N.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&N.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&N.selectChildren("path").attr("style",n),t.width=c,t.height=l,It(t,N),t.intersect=function(I){return vt.polygon(t,S,I)},s}A(rR,"hexagon");async function nR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.label="",t.labelStyle=r;const{shapeSvg:s}=await Qt(e,t,Yt(t)),i=Math.max(30,t?.width??0),l=Math.max(30,t?.height??0),{cssStyles:c}=t,d=At.svg(s),h=Mt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const g=[{x:0,y:0},{x:i,y:0},{x:0,y:l},{x:i,y:l}],f=Ar(g),x=d.path(f,h),b=s.insert(()=>x,":first-child");return b.attr("class","basic label-container"),c&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",c),n&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),b.attr("transform",`translate(${-i/2}, ${-l/2})`),It(t,b),t.intersect=function(y){return qe.info("Pill intersect",t,{points:g}),vt.polygon(t,g,y)},s}A(nR,"hourglass");async function aR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Ot(t);t.labelStyle=s;const i=t.assetHeight??48,l=t.assetWidth??48,c=Math.max(i,l),d=n?.wrappingWidth;t.width=Math.max(c,d??0);const{shapeSvg:h,bbox:g,label:f}=await Qt(e,t,"icon-shape default"),x=t.pos==="t",b=c,y=c,{nodeBorder:k}=r,{stylesMap:S}=hd(t),_=-y/2,T=-b/2,N=t.label?8:0,I=At.svg(h),R=Mt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");const B=I.rectangle(_,T,y,b,R),F=Math.max(y,g.width),ae=b+g.height+N,G=I.rectangle(-F/2,-ae/2,F,ae,{...R,fill:"transparent",stroke:"none"}),$=h.insert(()=>B,":first-child"),J=h.insert(()=>G);if(t.icon){const ee=h.append("g");ee.html(`<g>${await Xg(t.icon,{height:c,width:c,fallbackPrefix:""})}</g>`);const W=ee.node().getBBox(),j=W.width,U=W.height,O=W.x,q=W.y;ee.attr("transform",`translate(${-j/2-O},${x?g.height/2+N/2-U/2-q:-g.height/2-N/2-U/2-q})`),ee.attr("style",`color: ${S.get("stroke")??k};`)}return f.attr("transform",`translate(${-g.width/2-(g.x-(g.left??0))},${x?-ae/2:ae/2-g.height})`),$.attr("transform",`translate(0,${x?g.height/2+N/2:-g.height/2-N/2})`),It(t,J),t.intersect=function(ee){if(qe.info("iconSquare intersect",t,ee),!t.label)return vt.rect(t,ee);const W=t.x??0,j=t.y??0,U=t.height??0;let O=[];return x?O=[{x:W-g.width/2,y:j-U/2},{x:W+g.width/2,y:j-U/2},{x:W+g.width/2,y:j-U/2+g.height+N},{x:W+y/2,y:j-U/2+g.height+N},{x:W+y/2,y:j+U/2},{x:W-y/2,y:j+U/2},{x:W-y/2,y:j-U/2+g.height+N},{x:W-g.width/2,y:j-U/2+g.height+N}]:O=[{x:W-y/2,y:j-U/2},{x:W+y/2,y:j-U/2},{x:W+y/2,y:j-U/2+b},{x:W+g.width/2,y:j-U/2+b},{x:W+g.width/2/2,y:j+U/2},{x:W-g.width/2,y:j+U/2},{x:W-g.width/2,y:j-U/2+b},{x:W-y/2,y:j-U/2+b}],vt.polygon(t,O,ee)},h}A(aR,"icon");async function sR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Ot(t);t.labelStyle=s;const i=t.assetHeight??48,l=t.assetWidth??48,c=Math.max(i,l),d=n?.wrappingWidth;t.width=Math.max(c,d??0);const{shapeSvg:h,bbox:g,label:f}=await Qt(e,t,"icon-shape default"),x=20,b=t.label?8:0,y=t.pos==="t",{nodeBorder:k,mainBkg:S}=r,{stylesMap:_}=hd(t),T=At.svg(h),N=Mt(t,{});t.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");const I=_.get("fill");N.stroke=I??S;const R=h.append("g");t.icon&&R.html(`<g>${await Xg(t.icon,{height:c,width:c,fallbackPrefix:""})}</g>`);const B=R.node().getBBox(),F=B.width,ae=B.height,G=B.x,$=B.y,J=Math.max(F,ae)*Math.SQRT2+x*2,ee=T.circle(0,0,J,N),W=Math.max(J,g.width),j=J+g.height+b,U=T.rectangle(-W/2,-j/2,W,j,{...N,fill:"transparent",stroke:"none"}),O=h.insert(()=>ee,":first-child"),q=h.insert(()=>U);return R.attr("transform",`translate(${-F/2-G},${y?g.height/2+b/2-ae/2-$:-g.height/2-b/2-ae/2-$})`),R.attr("style",`color: ${_.get("stroke")??k};`),f.attr("transform",`translate(${-g.width/2-(g.x-(g.left??0))},${y?-j/2:j/2-g.height})`),O.attr("transform",`translate(0,${y?g.height/2+b/2:-g.height/2-b/2})`),It(t,q),t.intersect=function(V){return qe.info("iconSquare intersect",t,V),vt.rect(t,V)},h}A(sR,"iconCircle");async function iR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Ot(t);t.labelStyle=s;const i=t.assetHeight??48,l=t.assetWidth??48,c=Math.max(i,l),d=n?.wrappingWidth;t.width=Math.max(c,d??0);const{shapeSvg:h,bbox:g,halfPadding:f,label:x}=await Qt(e,t,"icon-shape default"),b=t.pos==="t",y=c+f*2,k=c+f*2,{nodeBorder:S,mainBkg:_}=r,{stylesMap:T}=hd(t),N=-k/2,I=-y/2,R=t.label?8:0,B=At.svg(h),F=Mt(t,{});t.look!=="handDrawn"&&(F.roughness=0,F.fillStyle="solid");const ae=T.get("fill");F.stroke=ae??_;const G=B.path(bl(N,I,k,y,5),F),$=Math.max(k,g.width),J=y+g.height+R,ee=B.rectangle(-$/2,-J/2,$,J,{...F,fill:"transparent",stroke:"none"}),W=h.insert(()=>G,":first-child").attr("class","icon-shape2"),j=h.insert(()=>ee);if(t.icon){const U=h.append("g");U.html(`<g>${await Xg(t.icon,{height:c,width:c,fallbackPrefix:""})}</g>`);const O=U.node().getBBox(),q=O.width,V=O.height,ue=O.x,H=O.y;U.attr("transform",`translate(${-q/2-ue},${b?g.height/2+R/2-V/2-H:-g.height/2-R/2-V/2-H})`),U.attr("style",`color: ${T.get("stroke")??S};`)}return x.attr("transform",`translate(${-g.width/2-(g.x-(g.left??0))},${b?-J/2:J/2-g.height})`),W.attr("transform",`translate(0,${b?g.height/2+R/2:-g.height/2-R/2})`),It(t,j),t.intersect=function(U){if(qe.info("iconSquare intersect",t,U),!t.label)return vt.rect(t,U);const O=t.x??0,q=t.y??0,V=t.height??0;let ue=[];return b?ue=[{x:O-g.width/2,y:q-V/2},{x:O+g.width/2,y:q-V/2},{x:O+g.width/2,y:q-V/2+g.height+R},{x:O+k/2,y:q-V/2+g.height+R},{x:O+k/2,y:q+V/2},{x:O-k/2,y:q+V/2},{x:O-k/2,y:q-V/2+g.height+R},{x:O-g.width/2,y:q-V/2+g.height+R}]:ue=[{x:O-k/2,y:q-V/2},{x:O+k/2,y:q-V/2},{x:O+k/2,y:q-V/2+y},{x:O+g.width/2,y:q-V/2+y},{x:O+g.width/2/2,y:q+V/2},{x:O-g.width/2,y:q+V/2},{x:O-g.width/2,y:q-V/2+y},{x:O-k/2,y:q-V/2+y}],vt.polygon(t,ue,U)},h}A(iR,"iconRounded");async function oR(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:s}=Ot(t);t.labelStyle=s;const i=t.assetHeight??48,l=t.assetWidth??48,c=Math.max(i,l),d=n?.wrappingWidth;t.width=Math.max(c,d??0);const{shapeSvg:h,bbox:g,halfPadding:f,label:x}=await Qt(e,t,"icon-shape default"),b=t.pos==="t",y=c+f*2,k=c+f*2,{nodeBorder:S,mainBkg:_}=r,{stylesMap:T}=hd(t),N=-k/2,I=-y/2,R=t.label?8:0,B=At.svg(h),F=Mt(t,{});t.look!=="handDrawn"&&(F.roughness=0,F.fillStyle="solid");const ae=T.get("fill");F.stroke=ae??_;const G=B.path(bl(N,I,k,y,.1),F),$=Math.max(k,g.width),J=y+g.height+R,ee=B.rectangle(-$/2,-J/2,$,J,{...F,fill:"transparent",stroke:"none"}),W=h.insert(()=>G,":first-child"),j=h.insert(()=>ee);if(t.icon){const U=h.append("g");U.html(`<g>${await Xg(t.icon,{height:c,width:c,fallbackPrefix:""})}</g>`);const O=U.node().getBBox(),q=O.width,V=O.height,ue=O.x,H=O.y;U.attr("transform",`translate(${-q/2-ue},${b?g.height/2+R/2-V/2-H:-g.height/2-R/2-V/2-H})`),U.attr("style",`color: ${T.get("stroke")??S};`)}return x.attr("transform",`translate(${-g.width/2-(g.x-(g.left??0))},${b?-J/2:J/2-g.height})`),W.attr("transform",`translate(0,${b?g.height/2+R/2:-g.height/2-R/2})`),It(t,j),t.intersect=function(U){if(qe.info("iconSquare intersect",t,U),!t.label)return vt.rect(t,U);const O=t.x??0,q=t.y??0,V=t.height??0;let ue=[];return b?ue=[{x:O-g.width/2,y:q-V/2},{x:O+g.width/2,y:q-V/2},{x:O+g.width/2,y:q-V/2+g.height+R},{x:O+k/2,y:q-V/2+g.height+R},{x:O+k/2,y:q+V/2},{x:O-k/2,y:q+V/2},{x:O-k/2,y:q-V/2+g.height+R},{x:O-g.width/2,y:q-V/2+g.height+R}]:ue=[{x:O-k/2,y:q-V/2},{x:O+k/2,y:q-V/2},{x:O+k/2,y:q-V/2+y},{x:O+g.width/2,y:q-V/2+y},{x:O+g.width/2/2,y:q+V/2},{x:O-g.width/2,y:q+V/2},{x:O-g.width/2,y:q-V/2+y},{x:O-k/2,y:q-V/2+y}],vt.polygon(t,ue,U)},h}A(oR,"iconSquare");async function lR(e,t,{config:{flowchart:r}}){const n=new Image;n.src=t?.img??"",await n.decode();const s=Number(n.naturalWidth.toString().replace("px","")),i=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=s/i;const{labelStyles:l}=Ot(t);t.labelStyle=l;const c=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;const d=Math.max(t.label?c??0:0,t?.assetWidth??s),h=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:d,g=t.constraint==="on"?h/t.imageAspectRatio:t?.assetHeight??i;t.width=Math.max(h,c??0);const{shapeSvg:f,bbox:x,label:b}=await Qt(e,t,"image-shape default"),y=t.pos==="t",k=-h/2,S=-g/2,_=t.label?8:0,T=At.svg(f),N=Mt(t,{});t.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");const I=T.rectangle(k,S,h,g,N),R=Math.max(h,x.width),B=g+x.height+_,F=T.rectangle(-R/2,-B/2,R,B,{...N,fill:"none",stroke:"none"}),ae=f.insert(()=>I,":first-child"),G=f.insert(()=>F);if(t.img){const $=f.append("image");$.attr("href",t.img),$.attr("width",h),$.attr("height",g),$.attr("preserveAspectRatio","none"),$.attr("transform",`translate(${-h/2},${y?B/2-g:-B/2})`)}return b.attr("transform",`translate(${-x.width/2-(x.x-(x.left??0))},${y?-g/2-x.height/2-_/2:g/2-x.height/2+_/2})`),ae.attr("transform",`translate(0,${y?x.height/2+_/2:-x.height/2-_/2})`),It(t,G),t.intersect=function($){if(qe.info("iconSquare intersect",t,$),!t.label)return vt.rect(t,$);const J=t.x??0,ee=t.y??0,W=t.height??0;let j=[];return y?j=[{x:J-x.width/2,y:ee-W/2},{x:J+x.width/2,y:ee-W/2},{x:J+x.width/2,y:ee-W/2+x.height+_},{x:J+h/2,y:ee-W/2+x.height+_},{x:J+h/2,y:ee+W/2},{x:J-h/2,y:ee+W/2},{x:J-h/2,y:ee-W/2+x.height+_},{x:J-x.width/2,y:ee-W/2+x.height+_}]:j=[{x:J-h/2,y:ee-W/2},{x:J+h/2,y:ee-W/2},{x:J+h/2,y:ee-W/2+g},{x:J+x.width/2,y:ee-W/2+g},{x:J+x.width/2/2,y:ee+W/2},{x:J-x.width/2,y:ee+W/2},{x:J-x.width/2,y:ee-W/2+g},{x:J-h/2,y:ee-W/2+g}],vt.polygon(t,j,$)},f}A(lR,"imageSquare");async function cR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),c=Math.max(i.height+(t.padding??0)*2,t?.height??0),d=[{x:0,y:0},{x:l,y:0},{x:l+3*c/6,y:-c},{x:-3*c/6,y:-c}];let h;const{cssStyles:g}=t;if(t.look==="handDrawn"){const f=At.svg(s),x=Mt(t,{}),b=Ar(d),y=f.path(b,x);h=s.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${c/2})`),g&&h.attr("style",g)}else h=yl(s,l,c,d);return n&&h.attr("style",n),t.width=l,t.height=c,It(t,h),t.intersect=function(f){return vt.polygon(t,d,f)},s}A(cR,"inv_trapezoid");async function Pm(e,t,r){const{labelStyles:n,nodeStyles:s}=Ot(t);t.labelStyle=n;const{shapeSvg:i,bbox:l}=await Qt(e,t,Yt(t)),c=Math.max(l.width+r.labelPaddingX*2,t?.width||0),d=Math.max(l.height+r.labelPaddingY*2,t?.height||0),h=-c/2,g=-d/2;let f,{rx:x,ry:b}=t;const{cssStyles:y}=t;if(r?.rx&&r.ry&&(x=r.rx,b=r.ry),t.look==="handDrawn"){const k=At.svg(i),S=Mt(t,{}),_=x||b?k.path(bl(h,g,c,d,x||0),S):k.rectangle(h,g,c,d,S);f=i.insert(()=>_,":first-child"),f.attr("class","basic label-container").attr("style",Ba(y))}else f=i.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",s).attr("rx",Ba(x)).attr("ry",Ba(b)).attr("x",h).attr("y",g).attr("width",c).attr("height",d);return It(t,f),t.calcIntersect=function(k,S){return vt.rect(k,S)},t.intersect=function(k){return vt.rect(t,k)},i}A(Pm,"drawRect");async function uR(e,t){const{shapeSvg:r,bbox:n,label:s}=await Qt(e,t,"label"),i=r.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),s.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),It(t,i),t.intersect=function(d){return vt.rect(t,d)},r}A(uR,"labelRect");async function dR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=Math.max(i.width+(t.padding??0),t?.width??0),c=Math.max(i.height+(t.padding??0),t?.height??0),d=[{x:0,y:0},{x:l+3*c/6,y:0},{x:l,y:-c},{x:-(3*c)/6,y:-c}];let h;const{cssStyles:g}=t;if(t.look==="handDrawn"){const f=At.svg(s),x=Mt(t,{}),b=Ar(d),y=f.path(b,x);h=s.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${c/2})`),g&&h.attr("style",g)}else h=yl(s,l,c,d);return n&&h.attr("style",n),t.width=l,t.height=c,It(t,h),t.intersect=function(f){return vt.polygon(t,d,f)},s}A(dR,"lean_left");async function hR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=Math.max(i.width+(t.padding??0),t?.width??0),c=Math.max(i.height+(t.padding??0),t?.height??0),d=[{x:-3*c/6,y:0},{x:l,y:0},{x:l+3*c/6,y:-c},{x:0,y:-c}];let h;const{cssStyles:g}=t;if(t.look==="handDrawn"){const f=At.svg(s),x=Mt(t,{}),b=Ar(d),y=f.path(b,x);h=s.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${c/2})`),g&&h.attr("style",g)}else h=yl(s,l,c,d);return n&&h.attr("style",n),t.width=l,t.height=c,It(t,h),t.intersect=function(f){return vt.polygon(t,d,f)},s}A(hR,"lean_right");function gR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.label="",t.labelStyle=r;const s=e.insert("g").attr("class",Yt(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,l=Math.max(35,t?.width??0),c=Math.max(35,t?.height??0),d=7,h=[{x:l,y:0},{x:0,y:c+d/2},{x:l-2*d,y:c+d/2},{x:0,y:2*c},{x:l,y:c-d/2},{x:2*d,y:c-d/2}],g=At.svg(s),f=Mt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const x=Ar(h),b=g.path(x,f),y=s.insert(()=>b,":first-child");return i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),y.attr("transform",`translate(-${l/2},${-c})`),It(t,y),t.intersect=function(k){return qe.info("lightningBolt intersect",t,k),vt.polygon(t,h,k)},s}A(gR,"lightningBolt");var Foe=A((e,t,r,n,s,i,l)=>[`M${e},${t+i}`,`a${s},${i} 0,0,0 ${r},0`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+l}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),$oe=A((e,t,r,n,s,i,l)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${s},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${s},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+l}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Uoe=A((e,t,r,n,s,i)=>[`M${e-r/2},${-n/2}`,`a${s},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function pR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0),t.width??0),d=c/2,h=d/(2.5+c/50),g=Math.max(i.height+h+(t.padding??0),t.height??0),f=g*.1;let x;const{cssStyles:b}=t;if(t.look==="handDrawn"){const y=At.svg(s),k=$oe(0,0,c,g,d,h,f),S=Uoe(0,h,c,g,d,h),_=Mt(t,{}),T=y.path(k,_),N=y.path(S,_);s.insert(()=>N,":first-child").attr("class","line"),x=s.insert(()=>T,":first-child"),x.attr("class","basic label-container"),b&&x.attr("style",b)}else{const y=Foe(0,0,c,g,d,h,f);x=s.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",Ba(b)).attr("style",n)}return x.attr("label-offset-y",h),x.attr("transform",`translate(${-c/2}, ${-(g/2+h)})`),It(t,x),l.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),t.intersect=function(y){const k=vt.rect(t,y),S=k.x-(t.x??0);if(d!=0&&(Math.abs(S)<(t.width??0)/2||Math.abs(S)==(t.width??0)/2&&Math.abs(k.y-(t.y??0))>(t.height??0)/2-h)){let _=h*h*(1-S*S/(d*d));_>0&&(_=Math.sqrt(_)),_=h-_,y.y-(t.y??0)>0&&(_=-_),k.y+=_}return k},s}A(pR,"linedCylinder");async function fR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,g=d+h,{cssStyles:f}=t,x=At.svg(s),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:-c/2-c/2*.1,y:-g/2},{x:-c/2-c/2*.1,y:g/2},...gl(-c/2-c/2*.1,g/2,c/2+c/2*.1,g/2,h,.8),{x:c/2+c/2*.1,y:-g/2},{x:-c/2-c/2*.1,y:-g/2},{x:-c/2,y:-g/2},{x:-c/2,y:g/2*1.1},{x:-c/2,y:-g/2}],k=x.polygon(y.map(_=>[_.x,_.y]),b),S=s.insert(()=>k,":first-child");return S.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",n),S.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-c/2+(t.padding??0)+c/2*.1/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),It(t,S),t.intersect=function(_){return vt.polygon(t,y,_)},s}A(fR,"linedWaveEdgedRect");async function mR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,g=-c/2,f=-d/2,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{}),k=[{x:g-h,y:f+h},{x:g-h,y:f+d+h},{x:g+c-h,y:f+d+h},{x:g+c-h,y:f+d},{x:g+c,y:f+d},{x:g+c,y:f+d-h},{x:g+c+h,y:f+d-h},{x:g+c+h,y:f-h},{x:g+h,y:f-h},{x:g+h,y:f},{x:g,y:f},{x:g,y:f+h}],S=[{x:g,y:f+h},{x:g+c-h,y:f+h},{x:g+c-h,y:f+d},{x:g+c,y:f+d},{x:g+c,y:f},{x:g,y:f}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=Ar(k),T=b.path(_,y),N=Ar(S),I=b.path(N,{...y,fill:"none"}),R=s.insert(()=>I,":first-child");return R.insert(()=>T,":first-child"),R.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",n),l.attr("transform",`translate(${-(i.width/2)-h-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),It(t,R),t.intersect=function(B){return vt.polygon(t,k,B)},s}A(mR,"multiRect");async function xR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,g=d+h,f=-c/2,x=-g/2,b=5,{cssStyles:y}=t,k=gl(f-b,x+g+b,f+c-b,x+g+b,h,.8),S=k?.[k.length-1],_=[{x:f-b,y:x+b},{x:f-b,y:x+g+b},...k,{x:f+c-b,y:S.y-b},{x:f+c,y:S.y-b},{x:f+c,y:S.y-2*b},{x:f+c+b,y:S.y-2*b},{x:f+c+b,y:x-b},{x:f+b,y:x-b},{x:f+b,y:x},{x:f,y:x},{x:f,y:x+b}],T=[{x:f,y:x+b},{x:f+c-b,y:x+b},{x:f+c-b,y:S.y-b},{x:f+c,y:S.y-b},{x:f+c,y:x},{x:f,y:x}],N=At.svg(s),I=Mt(t,{});t.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const R=Ar(_),B=N.path(R,I),F=Ar(T),ae=N.path(F,I),G=s.insert(()=>B,":first-child");return G.insert(()=>ae),G.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&G.selectAll("path").attr("style",y),n&&t.look!=="handDrawn"&&G.selectAll("path").attr("style",n),G.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-(i.width/2)-b-(i.x-(i.left??0))}, ${-(i.height/2)+b-h/2-(i.y-(i.top??0))})`),It(t,G),t.intersect=function($){return vt.polygon(t,_,$)},s}A(xR,"multiWaveEdgedRectangle");async function bR(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Ot(t);t.labelStyle=n,t.useHtmlLabels||Da().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:l,bbox:c,label:d}=await Qt(e,t,Yt(t)),h=Math.max(c.width+(t.padding??0)*2,t?.width??0),g=Math.max(c.height+(t.padding??0)*2,t?.height??0),f=-h/2,x=-g/2,{cssStyles:b}=t,y=At.svg(l),k=Mt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=y.rectangle(f,x,h,g,k),_=l.insert(()=>S,":first-child");return _.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",b),s&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",s),d.attr("transform",`translate(${-c.width/2-(c.x-(c.left??0))}, ${-(c.height/2)-(c.y-(c.top??0))})`),It(t,_),t.intersect=function(T){return vt.rect(t,T)},l}A(bR,"note");var zoe=A((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function yR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.width+t.padding,c=i.height+t.padding,d=l+c,h=.5,g=[{x:d/2,y:0},{x:d,y:-d/2},{x:d/2,y:-d},{x:0,y:-d/2}];let f;const{cssStyles:x}=t;if(t.look==="handDrawn"){const b=At.svg(s),y=Mt(t,{}),k=zoe(0,0,d),S=b.path(k,y);f=s.insert(()=>S,":first-child").attr("transform",`translate(${-d/2+h}, ${d/2})`),x&&f.attr("style",x)}else f=yl(s,d,d,g),f.attr("transform",`translate(${-d/2+h}, ${d/2})`);return n&&f.attr("style",n),It(t,f),t.calcIntersect=function(b,y){const k=b.width,S=[{x:k/2,y:0},{x:k,y:-k/2},{x:k/2,y:-k},{x:0,y:-k/2}],_=vt.polygon(b,S,y);return{x:_.x-.5,y:_.y-.5}},t.intersect=function(b){return this.calcIntersect(t,b)},s}A(yR,"question");async function vR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0),t?.width??0),d=Math.max(i.height+(t.padding??0),t?.height??0),h=-c/2,g=-d/2,f=g/2,x=[{x:h+f,y:g},{x:h,y:0},{x:h+f,y:-g},{x:-h,y:-g},{x:-h,y:g}],{cssStyles:b}=t,y=At.svg(s),k=Mt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=Ar(x),_=y.path(S,k),T=s.insert(()=>_,":first-child");return T.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${-f/2},0)`),l.attr("transform",`translate(${-f/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),It(t,T),t.intersect=function(N){return vt.polygon(t,x,N)},s}A(vR,"rect_left_inv_arrow");async function kR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;let s;t.cssClasses?s="node "+t.cssClasses:s="node default";const i=e.insert("g").attr("class",s).attr("id",t.domId||t.id),l=i.insert("g"),c=i.insert("g").attr("class","label").attr("style",n),d=t.description,h=t.label,g=c.node().appendChild(await rc(h,t.labelStyle,!0,!0));let f={width:0,height:0};if(la(Zr()?.flowchart?.htmlLabels)){const ae=g.children[0],G=Pr(g);f=ae.getBoundingClientRect(),G.attr("width",f.width),G.attr("height",f.height)}qe.info("Text 2",d);const x=d||[],b=g.getBBox(),y=c.node().appendChild(await rc(x.join?x.join("<br/>"):x,t.labelStyle,!0,!0)),k=y.children[0],S=Pr(y);f=k.getBoundingClientRect(),S.attr("width",f.width),S.attr("height",f.height);const _=(t.padding||0)/2;Pr(y).attr("transform","translate( "+(f.width>b.width?0:(b.width-f.width)/2)+", "+(b.height+_+5)+")"),Pr(g).attr("transform","translate( "+(f.width<b.width?0:-(b.width-f.width)/2)+", 0)"),f=c.node().getBBox(),c.attr("transform","translate("+-f.width/2+", "+(-f.height/2-_+3)+")");const T=f.width+(t.padding||0),N=f.height+(t.padding||0),I=-f.width/2-_,R=-f.height/2-_;let B,F;if(t.look==="handDrawn"){const ae=At.svg(i),G=Mt(t,{}),$=ae.path(bl(I,R,T,N,t.rx||0),G),J=ae.line(-f.width/2-_,-f.height/2-_+b.height+_,f.width/2+_,-f.height/2-_+b.height+_,G);F=i.insert(()=>(qe.debug("Rough node insert CXC",$),J),":first-child"),B=i.insert(()=>(qe.debug("Rough node insert CXC",$),$),":first-child")}else B=l.insert("rect",":first-child"),F=l.insert("line"),B.attr("class","outer title-state").attr("style",n).attr("x",-f.width/2-_).attr("y",-f.height/2-_).attr("width",f.width+(t.padding||0)).attr("height",f.height+(t.padding||0)),F.attr("class","divider").attr("x1",-f.width/2-_).attr("x2",f.width/2+_).attr("y1",-f.height/2-_+b.height+_).attr("y2",-f.height/2-_+b.height+_);return It(t,B),t.intersect=function(ae){return vt.rect(t,ae)},i}A(kR,"rectWithTitle");function Fh(e,t,r,n,s,i,l){const d=(e+r)/2,h=(t+n)/2,g=Math.atan2(n-t,r-e),f=(r-e)/2,x=(n-t)/2,b=f/s,y=x/i,k=Math.sqrt(b**2+y**2);if(k>1)throw new Error("The given radii are too small to create an arc between the points.");const S=Math.sqrt(1-k**2),_=d+S*i*Math.sin(g)*(l?-1:1),T=h-S*s*Math.cos(g)*(l?-1:1),N=Math.atan2((t-T)/i,(e-_)/s);let R=Math.atan2((n-T)/i,(r-_)/s)-N;l&&R<0&&(R+=2*Math.PI),!l&&R>0&&(R-=2*Math.PI);const B=[];for(let F=0;F<20;F++){const ae=F/19,G=N+ae*R,$=_+s*Math.cos(G),J=T+i*Math.sin(G);B.push({x:$,y:J})}return B}A(Fh,"generateArcPoints");async function wR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=t?.padding??0,c=t?.padding??0,d=(t?.width?t?.width:i.width)+l*2,h=(t?.height?t?.height:i.height)+c*2,g=t.radius||5,f=t.taper||5,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{});t.stroke&&(y.stroke=t.stroke),t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:-d/2+f,y:-h/2},{x:d/2-f,y:-h/2},...Fh(d/2-f,-h/2,d/2,-h/2+f,g,g,!0),{x:d/2,y:-h/2+f},{x:d/2,y:h/2-f},...Fh(d/2,h/2-f,d/2-f,h/2,g,g,!0),{x:d/2-f,y:h/2},{x:-d/2+f,y:h/2},...Fh(-d/2+f,h/2,-d/2,h/2-f,g,g,!0),{x:-d/2,y:h/2-f},{x:-d/2,y:-h/2+f},...Fh(-d/2,-h/2+f,-d/2+f,-h/2,g,g,!0)],S=Ar(k),_=b.path(S,y),T=s.insert(()=>_,":first-child");return T.attr("class","basic label-container outer-path"),x&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",x),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),It(t,T),t.intersect=function(N){return vt.polygon(t,k,N)},s}A(wR,"roundedRect");async function SR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=t?.padding??0,d=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),g=-i.width/2-c,f=-i.height/2-c,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=[{x:g,y:f},{x:g+d+8,y:f},{x:g+d+8,y:f+h},{x:g-8,y:f+h},{x:g-8,y:f},{x:g,y:f},{x:g,y:f+h}],S=b.polygon(k.map(T=>[T.x,T.y]),y),_=s.insert(()=>S,":first-child");return _.attr("class","basic label-container").attr("style",Ba(x)),n&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),x&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",n),l.attr("transform",`translate(${-d/2+4+(t.padding??0)-(i.x-(i.left??0))},${-h/2+(t.padding??0)-(i.y-(i.top??0))})`),It(t,_),t.intersect=function(T){return vt.rect(t,T)},s}A(SR,"shadedProcess");async function ER(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=-c/2,g=-d/2,{cssStyles:f}=t,x=At.svg(s),b=Mt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:h,y:g},{x:h,y:g+d},{x:h+c,y:g+d},{x:h+c,y:g-d/2}],k=Ar(y),S=x.path(k,b),_=s.insert(()=>S,":first-child");return _.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),_.attr("transform",`translate(0, ${d/4})`),l.attr("transform",`translate(${-c/2+(t.padding??0)-(i.x-(i.left??0))}, ${-d/4+(t.padding??0)-(i.y-(i.top??0))})`),It(t,_),t.intersect=function(T){return vt.polygon(t,y,T)},s}A(ER,"slopedRect");async function _R(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return Pm(e,t,r)}A(_R,"squareRect");async function TR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.height+t.padding,c=i.width+l/4+t.padding,d=l/2,{cssStyles:h}=t,g=At.svg(s),f=Mt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const x=[{x:-c/2+d,y:-l/2},{x:c/2-d,y:-l/2},...Sg(-c/2+d,0,d,50,90,270),{x:c/2-d,y:l/2},...Sg(c/2-d,0,d,50,270,450)],b=Ar(x),y=g.path(b,f),k=s.insert(()=>y,":first-child");return k.attr("class","basic label-container outer-path"),h&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),It(t,k),t.intersect=function(S){return vt.polygon(t,x,S)},s}A(TR,"stadium");async function CR(e,t){return Pm(e,t,{rx:5,ry:5})}A(CR,"state");function NR(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:s}=Ot(t);t.labelStyle=n;const{cssStyles:i}=t,{lineColor:l,stateBorder:c,nodeBorder:d}=r,h=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),g=At.svg(h),f=Mt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const x=g.circle(0,0,14,{...f,stroke:l,strokeWidth:2}),b=c??d,y=g.circle(0,0,5,{...f,fill:b,stroke:b,strokeWidth:2,fillStyle:"solid"}),k=h.insert(()=>x,":first-child");return k.insert(()=>y),i&&k.selectAll("path").attr("style",i),s&&k.selectAll("path").attr("style",s),It(t,k),t.intersect=function(S){return vt.circle(t,7,S)},h}A(NR,"stateEnd");function AR(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,s=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i;if(t.look==="handDrawn"){const c=At.svg(s).circle(0,0,14,nne(n));i=s.insert(()=>c),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=s.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return It(t,i),t.intersect=function(l){return vt.circle(t,7,l)},s}A(AR,"stateStart");async function jR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=(t?.padding||0)/2,c=i.width+t.padding,d=i.height+t.padding,h=-i.width/2-l,g=-i.height/2-l,f=[{x:0,y:0},{x:c,y:0},{x:c,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:c+8,y:0},{x:c+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if(t.look==="handDrawn"){const x=At.svg(s),b=Mt(t,{}),y=x.rectangle(h-8,g,c+16,d,b),k=x.line(h,g,h,g+d,b),S=x.line(h+c,g,h+c,g+d,b);s.insert(()=>k,":first-child"),s.insert(()=>S,":first-child");const _=s.insert(()=>y,":first-child"),{cssStyles:T}=t;_.attr("class","basic label-container").attr("style",Ba(T)),It(t,_)}else{const x=yl(s,c,d,f);n&&x.attr("style",n),It(t,x)}return t.intersect=function(x){return vt.polygon(t,f,x)},s}A(jR,"subroutine");async function LR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),c=Math.max(i.height+(t.padding??0)*2,t?.height??0),d=-l/2,h=-c/2,g=.2*c,f=.2*c,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{}),k=[{x:d-g/2,y:h},{x:d+l+g/2,y:h},{x:d+l+g/2,y:h+c},{x:d-g/2,y:h+c}],S=[{x:d+l-g/2,y:h+c},{x:d+l+g/2,y:h+c},{x:d+l+g/2,y:h+c-f}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=Ar(k),T=b.path(_,y),N=Ar(S),I=b.path(N,{...y,fillStyle:"solid"}),R=s.insert(()=>I,":first-child");return R.insert(()=>T,":first-child"),R.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",n),It(t,R),t.intersect=function(B){return vt.polygon(t,k,B)},s}A(LR,"taggedRect");async function MR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,g=.2*c,f=.2*d,x=d+h,{cssStyles:b}=t,y=At.svg(s),k=Mt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const S=[{x:-c/2-c/2*.1,y:x/2},...gl(-c/2-c/2*.1,x/2,c/2+c/2*.1,x/2,h,.8),{x:c/2+c/2*.1,y:-x/2},{x:-c/2-c/2*.1,y:-x/2}],_=-c/2+c/2*.1,T=-x/2-f*.4,N=[{x:_+c-g,y:(T+d)*1.4},{x:_+c,y:T+d-f},{x:_+c,y:(T+d)*.9},...gl(_+c,(T+d)*1.3,_+c-g,(T+d)*1.5,-d*.03,.5)],I=Ar(S),R=y.path(I,k),B=Ar(N),F=y.path(B,{...k,fillStyle:"solid"}),ae=s.insert(()=>F,":first-child");return ae.insert(()=>R,":first-child"),ae.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&ae.selectAll("path").attr("style",n),ae.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-c/2+(t.padding??0)-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),It(t,ae),t.intersect=function(G){return vt.polygon(t,S,G)},s}A(MR,"taggedWaveEdgedRectangle");async function OR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=Math.max(i.width+t.padding,t?.width||0),c=Math.max(i.height+t.padding,t?.height||0),d=-l/2,h=-c/2,g=s.insert("rect",":first-child");return g.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",d).attr("y",h).attr("width",l).attr("height",c),It(t,g),t.intersect=function(f){return vt.rect(t,f)},s}A(OR,"text");var Hoe=A((e,t,r,n,s,i)=>`M${e},${t}
    a${s},${i} 0,0,1 0,${-n}
    l${r},0
    a${s},${i} 0,0,1 0,${n}
    M${r},${-n}
    a${s},${i} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),qoe=A((e,t,r,n,s,i)=>[`M${e},${t}`,`M${e+r},${t}`,`a${s},${i} 0,0,0 0,${-n}`,`l${-r},0`,`a${s},${i} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),Goe=A((e,t,r,n,s,i)=>[`M${e+r/2},${-n/2}`,`a${s},${i} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function RR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l,halfPadding:c}=await Qt(e,t,Yt(t)),d=t.look==="neo"?c*2:c,h=i.height+d,g=h/2,f=g/(2.5+h/50),x=i.width+f+d,{cssStyles:b}=t;let y;if(t.look==="handDrawn"){const k=At.svg(s),S=qoe(0,0,x,h,f,g),_=Goe(0,0,x,h,f,g),T=k.path(S,Mt(t,{})),N=k.path(_,Mt(t,{fill:"none"}));y=s.insert(()=>N,":first-child"),y=s.insert(()=>T,":first-child"),y.attr("class","basic label-container"),b&&y.attr("style",b)}else{const k=Hoe(0,0,x,h,f,g);y=s.insert("path",":first-child").attr("d",k).attr("class","basic label-container").attr("style",Ba(b)).attr("style",n),y.attr("class","basic label-container"),b&&y.selectAll("path").attr("style",b),n&&y.selectAll("path").attr("style",n)}return y.attr("label-offset-x",f),y.attr("transform",`translate(${-x/2}, ${h/2} )`),l.attr("transform",`translate(${-(i.width/2)-f-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),It(t,y),t.intersect=function(k){const S=vt.rect(t,k),_=S.y-(t.y??0);if(g!=0&&(Math.abs(_)<(t.height??0)/2||Math.abs(_)==(t.height??0)/2&&Math.abs(S.x-(t.x??0))>(t.width??0)/2-f)){let T=f*f*(1-_*_/(g*g));T!=0&&(T=Math.sqrt(Math.abs(T))),T=f-T,k.x-(t.x??0)>0&&(T=-T),S.x+=T}return S},s}A(RR,"tiltedCylinder");async function IR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=i.width+t.padding,c=i.height+t.padding,d=[{x:-3*c/6,y:0},{x:l+3*c/6,y:0},{x:l,y:-c},{x:0,y:-c}];let h;const{cssStyles:g}=t;if(t.look==="handDrawn"){const f=At.svg(s),x=Mt(t,{}),b=Ar(d),y=f.path(b,x);h=s.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${c/2})`),g&&h.attr("style",g)}else h=yl(s,l,c,d);return n&&h.attr("style",n),t.width=l,t.height=c,It(t,h),t.intersect=function(f){return vt.polygon(t,d,f)},s}A(IR,"trapezoid");async function DR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=60,c=20,d=Math.max(l,i.width+(t.padding??0)*2,t?.width??0),h=Math.max(c,i.height+(t.padding??0)*2,t?.height??0),{cssStyles:g}=t,f=At.svg(s),x=Mt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-d/2*.8,y:-h/2},{x:d/2*.8,y:-h/2},{x:d/2,y:-h/2*.6},{x:d/2,y:h/2},{x:-d/2,y:h/2},{x:-d/2,y:-h/2*.6}],y=Ar(b),k=f.path(y,x),S=s.insert(()=>k,":first-child");return S.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",g),n&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",n),It(t,S),t.intersect=function(_){return vt.polygon(t,b,_)},s}A(DR,"trapezoidalPentagon");async function PR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=la(Zr().flowchart?.htmlLabels),d=i.width+(t.padding??0),h=d+i.height,g=d+i.height,f=[{x:0,y:0},{x:g,y:0},{x:g/2,y:-h}],{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=Ar(f),S=b.path(k,y),_=s.insert(()=>S,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return x&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",x),n&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",n),t.width=d,t.height=h,It(t,_),l.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${h/2-(i.height+(t.padding??0)/(c?2:1)-(i.y-(i.top??0)))})`),t.intersect=function(T){return qe.info("Triangle intersect",t,f,T),vt.polygon(t,f,T)},s}A(PR,"triangle");async function BR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/8,g=d+h,{cssStyles:f}=t,b=70-c,y=b>0?b/2:0,k=At.svg(s),S=Mt(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const _=[{x:-c/2-y,y:g/2},...gl(-c/2-y,g/2,c/2+y,g/2,h,.8),{x:c/2+y,y:-g/2},{x:-c/2-y,y:-g/2}],T=Ar(_),N=k.path(T,S),I=s.insert(()=>N,":first-child");return I.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&I.selectAll("path").attr("style",n),I.attr("transform",`translate(0,${-h/2})`),l.attr("transform",`translate(${-c/2+(t.padding??0)-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h-(i.y-(i.top??0))})`),It(t,I),t.intersect=function(R){return vt.polygon(t,_,R)},s}A(BR,"waveEdgedRectangle");async function FR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i}=await Qt(e,t,Yt(t)),l=100,c=50,d=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),g=d/h;let f=d,x=h;f>x*g?x=f/g:f=x*g,f=Math.max(f,l),x=Math.max(x,c);const b=Math.min(x*.2,x/4),y=x+b*2,{cssStyles:k}=t,S=At.svg(s),_=Mt(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const T=[{x:-f/2,y:y/2},...gl(-f/2,y/2,f/2,y/2,b,1),{x:f/2,y:-y/2},...gl(f/2,-y/2,-f/2,-y/2,b,-1)],N=Ar(T),I=S.path(N,_),R=s.insert(()=>I,":first-child");return R.attr("class","basic label-container"),k&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",k),n&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",n),It(t,R),t.intersect=function(B){return vt.polygon(t,T,B)},s}A(FR,"waveRectangle");async function $R(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,label:l}=await Qt(e,t,Yt(t)),c=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,g=-c/2,f=-d/2,{cssStyles:x}=t,b=At.svg(s),y=Mt(t,{}),k=[{x:g-h,y:f-h},{x:g-h,y:f+d},{x:g+c,y:f+d},{x:g+c,y:f-h}],S=`M${g-h},${f-h} L${g+c},${f-h} L${g+c},${f+d} L${g-h},${f+d} L${g-h},${f-h}
                M${g-h},${f} L${g+c},${f}
                M${g},${f-h} L${g},${f+d}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const _=b.path(S,y),T=s.insert(()=>_,":first-child");return T.attr("transform",`translate(${h/2}, ${h/2})`),T.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),l.attr("transform",`translate(${-(i.width/2)+h/2-(i.x-(i.left??0))}, ${-(i.height/2)+h/2-(i.y-(i.top??0))})`),It(t,T),t.intersect=function(N){return vt.polygon(t,k,N)},s}A($R,"windowPane");async function yk(e,t){const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:z}=Da(),{background:M}=z,le={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${M}`]};await yk(e,le)}const n=Da();t.useHtmlLabels=n.htmlLabels;let s=n.er?.diagramPadding??10,i=n.er?.entityPadding??6;const{cssStyles:l}=t,{labelStyles:c,nodeStyles:d}=Ot(t);if(r.attributes.length===0&&t.label){const z={rx:0,ry:0,labelPaddingX:s,labelPaddingY:s*1.5};Eo(t.label,n)+z.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const M=await Pm(e,t,z);if(!la(n.htmlLabels)){const le=M.select("text"),me=le.node()?.getBBox();le.attr("transform",`translate(${-me.width/2}, 0)`)}return M}n.htmlLabels||(s*=1.25,i*=1.25);let h=Yt(t);h||(h="node default");const g=e.insert("g").attr("class",h).attr("id",t.domId||t.id),f=await Su(g,t.label??"",n,0,0,["name"],c);f.height+=i;let x=0;const b=[],y=[];let k=0,S=0,_=0,T=0,N=!0,I=!0;for(const z of r.attributes){const M=await Su(g,z.type,n,0,x,["attribute-type"],c);k=Math.max(k,M.width+s);const le=await Su(g,z.name,n,0,x,["attribute-name"],c);S=Math.max(S,le.width+s);const me=await Su(g,z.keys.join(),n,0,x,["attribute-keys"],c);_=Math.max(_,me.width+s);const Ee=await Su(g,z.comment,n,0,x,["attribute-comment"],c);T=Math.max(T,Ee.width+s);const Ae=Math.max(M.height,le.height,me.height,Ee.height)+i;y.push({yOffset:x,rowHeight:Ae}),x+=Ae}let R=4;_<=s&&(N=!1,_=0,R--),T<=s&&(I=!1,T=0,R--);const B=g.node().getBBox();if(f.width+s*2-(k+S+_+T)>0){const z=f.width+s*2-(k+S+_+T);k+=z/R,S+=z/R,_>0&&(_+=z/R),T>0&&(T+=z/R)}const F=k+S+_+T,ae=At.svg(g),G=Mt(t,{});t.look!=="handDrawn"&&(G.roughness=0,G.fillStyle="solid");let $=0;y.length>0&&($=y.reduce((z,M)=>z+(M?.rowHeight??0),0));const J=Math.max(B.width+s*2,t?.width||0,F),ee=Math.max(($??0)+f.height,t?.height||0),W=-J/2,j=-ee/2;g.selectAll("g:not(:first-child)").each((z,M,le)=>{const me=Pr(le[M]),Ee=me.attr("transform");let Ae=0,ve=0;if(Ee){const ge=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ee);ge&&(Ae=parseFloat(ge[1]),ve=parseFloat(ge[2]),me.attr("class").includes("attribute-name")?Ae+=k:me.attr("class").includes("attribute-keys")?Ae+=k+S:me.attr("class").includes("attribute-comment")&&(Ae+=k+S+_))}me.attr("transform",`translate(${W+s/2+Ae}, ${ve+j+f.height+i/2})`)}),g.select(".name").attr("transform","translate("+-f.width/2+", "+(j+i/2)+")");const U=ae.rectangle(W,j,J,ee,G),O=g.insert(()=>U,":first-child").attr("style",l.join("")),{themeVariables:q}=Da(),{rowEven:V,rowOdd:ue,nodeBorder:H}=q;b.push(0);for(const[z,M]of y.entries()){const me=(z+1)%2===0&&M.yOffset!==0,Ee=ae.rectangle(W,f.height+j+M?.yOffset,J,M?.rowHeight,{...G,fill:me?V:ue,stroke:H});g.insert(()=>Ee,"g.label").attr("style",l.join("")).attr("class",`row-rect-${me?"even":"odd"}`)}let D=ae.line(W,f.height+j,J+W,f.height+j,G);g.insert(()=>D).attr("class","divider"),D=ae.line(k+W,f.height+j,k+W,ee+j,G),g.insert(()=>D).attr("class","divider"),N&&(D=ae.line(k+S+W,f.height+j,k+S+W,ee+j,G),g.insert(()=>D).attr("class","divider")),I&&(D=ae.line(k+S+_+W,f.height+j,k+S+_+W,ee+j,G),g.insert(()=>D).attr("class","divider"));for(const z of b)D=ae.line(W,f.height+j+z,J+W,f.height+j+z,G),g.insert(()=>D).attr("class","divider");if(It(t,O),d&&t.look!=="handDrawn"){const M=d.split(";")?.filter(le=>le.includes("stroke"))?.map(le=>`${le}`).join("; ");g.selectAll("path").attr("style",M??""),g.selectAll(".row-rect-even path").attr("style",d)}return t.intersect=function(z){return vt.rect(t,z)},g}A(yk,"erBox");async function Su(e,t,r,n=0,s=0,i=[],l=""){const c=e.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${n}, ${s})`).attr("style",l);t!==kC(t)&&(t=kC(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const d=c.node().appendChild(await xl(c,t,{width:Eo(t,r)+100,style:l,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let g=d.children[0];for(g.textContent=g.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");g.childNodes[0];)g=g.childNodes[0],g.textContent=g.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=d.getBBox();if(la(r.htmlLabels)){const g=d.children[0];g.style.textAlign="start";const f=Pr(d);h=g.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}return h}A(Su,"addText");async function UR(e,t,r,n,s=r.class.padding??12){const i=n?0:3,l=e.insert("g").attr("class",Yt(t)).attr("id",t.domId||t.id);let c=null,d=null,h=null,g=null,f=0,x=0,b=0;if(c=l.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const T=t.annotations[0];await $h(c,{text:`${T}`},0),f=c.node().getBBox().height}d=l.insert("g").attr("class","label-group text"),await $h(d,t,0,["font-weight: bolder"]);const y=d.node().getBBox();x=y.height,h=l.insert("g").attr("class","members-group text");let k=0;for(const T of t.members){const N=await $h(h,T,k,[T.parseClassifier()]);k+=N+i}b=h.node().getBBox().height,b<=0&&(b=s/2),g=l.insert("g").attr("class","methods-group text");let S=0;for(const T of t.methods){const N=await $h(g,T,S,[T.parseClassifier()]);S+=N+i}let _=l.node().getBBox();if(c!==null){const T=c.node().getBBox();c.attr("transform",`translate(${-T.width/2})`)}return d.attr("transform",`translate(${-y.width/2}, ${f})`),_=l.node().getBBox(),h.attr("transform",`translate(0, ${f+x+s*2})`),_=l.node().getBBox(),g.attr("transform",`translate(0, ${f+x+(b?b+s*4:s*2)})`),_=l.node().getBBox(),{shapeSvg:l,bbox:_}}A(UR,"textHelper");async function $h(e,t,r,n=[]){const s=e.insert("g").attr("class","label").attr("style",n.join("; ")),i=Da();let l="useHtmlLabels"in t?t.useHtmlLabels:la(i.htmlLabels)??!0,c="";"text"in t?c=t.text:c=t.label,!l&&c.startsWith("\\")&&(c=c.substring(1)),Yu(c)&&(l=!0);const d=await xl(s,A2(Cc(c)),{width:Eo(c,i)+50,classes:"markdown-node-label",useHtmlLabels:l},i);let h,g=1;if(l){const f=d.children[0],x=Pr(d);g=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(g+=f.innerHTML.split("<mrow>").length-1);const b=f.getElementsByTagName("img");if(b){const y=c.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(k=>new Promise(S=>{function _(){if(k.style.display="flex",k.style.flexDirection="column",y){const T=i.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,I=parseInt(T,10)*5+"px";k.style.minWidth=I,k.style.maxWidth=I}else k.style.width="100%";S(k)}A(_,"setupImage"),setTimeout(()=>{k.complete&&_()}),k.addEventListener("error",_),k.addEventListener("load",_)})))}h=f.getBoundingClientRect(),x.attr("width",h.width),x.attr("height",h.height)}else{n.includes("font-weight: bolder")&&Pr(d).selectAll("tspan").attr("font-weight",""),g=d.children.length;const f=d.children[0];(d.textContent===""||d.textContent.includes("&gt"))&&(f.textContent=c[0]+c.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),c[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),h=d.getBBox()}return s.attr("transform","translate(0,"+(-h.height/(2*g)+r)+")"),h.height}A($h,"addText");async function zR(e,t){const r=Zr(),n=r.class.padding??12,s=n,i=t.useHtmlLabels??la(r.htmlLabels)??!0,l=t;l.annotations=l.annotations??[],l.members=l.members??[],l.methods=l.methods??[];const{shapeSvg:c,bbox:d}=await UR(e,t,r,i,s),{labelStyles:h,nodeStyles:g}=Ot(t);t.labelStyle=h,t.cssStyles=l.styles||"";const f=l.styles?.join(";")||g||"";t.cssStyles||(t.cssStyles=f.replaceAll("!important","").split(";"));const x=l.members.length===0&&l.methods.length===0&&!r.class?.hideEmptyMembersBox,b=At.svg(c),y=Mt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const k=d.width;let S=d.height;l.members.length===0&&l.methods.length===0?S+=s:l.members.length>0&&l.methods.length===0&&(S+=s*2);const _=-k/2,T=-S/2,N=b.rectangle(_-n,T-n-(x?n:l.members.length===0&&l.methods.length===0?-n/2:0),k+2*n,S+2*n+(x?n*2:l.members.length===0&&l.methods.length===0?-n:0),y),I=c.insert(()=>N,":first-child");I.attr("class","basic label-container");const R=I.node().getBBox();c.selectAll(".text").each((G,$,J)=>{const ee=Pr(J[$]),W=ee.attr("transform");let j=0;if(W){const V=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(W);V&&(j=parseFloat(V[2]))}let U=j+T+n-(x?n:l.members.length===0&&l.methods.length===0?-n/2:0);i||(U-=4);let O=_;(ee.attr("class").includes("label-group")||ee.attr("class").includes("annotation-group"))&&(O=-ee.node()?.getBBox().width/2||0,c.selectAll("text").each(function(q,V,ue){window.getComputedStyle(ue[V]).textAnchor==="middle"&&(O=0)})),ee.attr("transform",`translate(${O}, ${U})`)});const B=c.select(".annotation-group").node().getBBox().height-(x?n/2:0)||0,F=c.select(".label-group").node().getBBox().height-(x?n/2:0)||0,ae=c.select(".members-group").node().getBBox().height-(x?n/2:0)||0;if(l.members.length>0||l.methods.length>0||x){const G=b.line(R.x,B+F+T+n,R.x+R.width,B+F+T+n,y);c.insert(()=>G).attr("class","divider").attr("style",f)}if(x||l.members.length>0||l.methods.length>0){const G=b.line(R.x,B+F+ae+T+s*2+n,R.x+R.width,B+F+ae+T+n+s*2,y);c.insert(()=>G).attr("class","divider").attr("style",f)}if(l.look!=="handDrawn"&&c.selectAll("path").attr("style",f),I.select(":nth-child(2)").attr("style",f),c.selectAll(".divider").select("path").attr("style",f),t.labelStyle?c.selectAll("span").attr("style",t.labelStyle):c.selectAll("span").attr("style",f),!i){const G=RegExp(/color\s*:\s*([^;]*)/),$=G.exec(f);if($){const J=$[0].replace("color","fill");c.selectAll("tspan").attr("style",J)}else if(h){const J=G.exec(h);if(J){const ee=J[0].replace("color","fill");c.selectAll("tspan").attr("style",ee)}}}return It(t,I),t.intersect=function(G){return vt.rect(t,G)},c}A(zR,"classBox");async function HR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const s=t,i=t,l=20,c=20,d="verifyMethod"in t,h=Yt(t),g=e.insert("g").attr("class",h).attr("id",t.domId??t.id);let f;d?f=await ji(g,`&lt;&lt;${s.type}&gt;&gt;`,0,t.labelStyle):f=await ji(g,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let x=f;const b=await ji(g,s.name,x,t.labelStyle+"; font-weight: bold;");if(x+=b+c,d){const B=await ji(g,`${s.requirementId?`ID: ${s.requirementId}`:""}`,x,t.labelStyle);x+=B;const F=await ji(g,`${s.text?`Text: ${s.text}`:""}`,x,t.labelStyle);x+=F;const ae=await ji(g,`${s.risk?`Risk: ${s.risk}`:""}`,x,t.labelStyle);x+=ae,await ji(g,`${s.verifyMethod?`Verification: ${s.verifyMethod}`:""}`,x,t.labelStyle)}else{const B=await ji(g,`${i.type?`Type: ${i.type}`:""}`,x,t.labelStyle);x+=B,await ji(g,`${i.docRef?`Doc Ref: ${i.docRef}`:""}`,x,t.labelStyle)}const y=(g.node()?.getBBox().width??200)+l,k=(g.node()?.getBBox().height??200)+l,S=-y/2,_=-k/2,T=At.svg(g),N=Mt(t,{});t.look!=="handDrawn"&&(N.roughness=0,N.fillStyle="solid");const I=T.rectangle(S,_,y,k,N),R=g.insert(()=>I,":first-child");if(R.attr("class","basic label-container").attr("style",n),g.selectAll(".label").each((B,F,ae)=>{const G=Pr(ae[F]),$=G.attr("transform");let J=0,ee=0;if($){const O=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);O&&(J=parseFloat(O[1]),ee=parseFloat(O[2]))}const W=ee-k/2;let j=S+l/2;(F===0||F===1)&&(j=J),G.attr("transform",`translate(${j}, ${W+l})`)}),x>f+b+c){const B=T.line(S,_+f+b+c,S+y,_+f+b+c,N);g.insert(()=>B).attr("style",n)}return It(t,R),t.intersect=function(B){return vt.rect(t,B)},g}A(HR,"requirementBox");async function ji(e,t,r,n=""){if(t==="")return 0;const s=e.insert("g").attr("class","label").attr("style",n),i=Zr(),l=i.htmlLabels??!0,c=await xl(s,A2(Cc(t)),{width:Eo(t,i)+50,classes:"markdown-node-label",useHtmlLabels:l,style:n},i);let d;if(l){const h=c.children[0],g=Pr(c);d=h.getBoundingClientRect(),g.attr("width",d.width),g.attr("height",d.height)}else{const h=c.children[0];for(const g of h.children)g.textContent=g.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&g.setAttribute("style",n);d=c.getBBox(),d.height+=6}return s.attr("transform",`translate(${-d.width/2},${-d.height/2+r})`),d.height}A(ji,"addText");var Yoe=A(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function qR(e,t,{config:r}){const{labelStyles:n,nodeStyles:s}=Ot(t);t.labelStyle=n||"";const i=10,l=t.width;t.width=(t.width??200)-10;const{shapeSvg:c,bbox:d,label:h}=await Qt(e,t,Yt(t)),g=t.padding||10;let f="",x;"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(f=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),x=c.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const b={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,k;x?{label:y,bbox:k}=await Vy(x,"ticket"in t&&t.ticket||"",b):{label:y,bbox:k}=await Vy(c,"ticket"in t&&t.ticket||"",b);const{label:S,bbox:_}=await Vy(c,"assigned"in t&&t.assigned||"",b);t.width=l;const T=10,N=t?.width||0,I=Math.max(k.height,_.height)/2,R=Math.max(d.height+T*2,t?.height||0)+I,B=-N/2,F=-R/2;h.attr("transform","translate("+(g-N/2)+", "+(-I-d.height/2)+")"),y.attr("transform","translate("+(g-N/2)+", "+(-I+d.height/2)+")"),S.attr("transform","translate("+(g+N/2-_.width-2*i)+", "+(-I+d.height/2)+")");let ae;const{rx:G,ry:$}=t,{cssStyles:J}=t;if(t.look==="handDrawn"){const ee=At.svg(c),W=Mt(t,{}),j=G||$?ee.path(bl(B,F,N,R,G||0),W):ee.rectangle(B,F,N,R,W);ae=c.insert(()=>j,":first-child"),ae.attr("class","basic label-container").attr("style",J||null)}else{ae=c.insert("rect",":first-child"),ae.attr("class","basic label-container __APA__").attr("style",s).attr("rx",G??5).attr("ry",$??5).attr("x",B).attr("y",F).attr("width",N).attr("height",R);const ee="priority"in t&&t.priority;if(ee){const W=c.append("line"),j=B+2,U=F+Math.floor((G??0)/2),O=F+R-Math.floor((G??0)/2);W.attr("x1",j).attr("y1",U).attr("x2",j).attr("y2",O).attr("stroke-width","4").attr("stroke",Yoe(ee))}}return It(t,ae),t.height=R,t.intersect=function(ee){return vt.rect(t,ee)},c}A(qR,"kanbanItem");async function GR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:l,label:c}=await Qt(e,t,Yt(t)),d=i.width+10*l,h=i.height+8*l,g=.15*d,{cssStyles:f}=t,x=i.width+20,b=i.height+20,y=Math.max(d,x),k=Math.max(h,b);c.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`);let S;const _=`M0 0 
    a${g},${g} 1 0,0 ${y*.25},${-1*k*.1}
    a${g},${g} 1 0,0 ${y*.25},0
    a${g},${g} 1 0,0 ${y*.25},0
    a${g},${g} 1 0,0 ${y*.25},${k*.1}

    a${g},${g} 1 0,0 ${y*.15},${k*.33}
    a${g*.8},${g*.8} 1 0,0 0,${k*.34}
    a${g},${g} 1 0,0 ${-1*y*.15},${k*.33}

    a${g},${g} 1 0,0 ${-1*y*.25},${k*.15}
    a${g},${g} 1 0,0 ${-1*y*.25},0
    a${g},${g} 1 0,0 ${-1*y*.25},0
    a${g},${g} 1 0,0 ${-1*y*.25},${-1*k*.15}

    a${g},${g} 1 0,0 ${-1*y*.1},${-1*k*.33}
    a${g*.8},${g*.8} 1 0,0 0,${-1*k*.34}
    a${g},${g} 1 0,0 ${y*.1},${-1*k*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const T=At.svg(s),N=Mt(t,{}),I=T.path(_,N);S=s.insert(()=>I,":first-child"),S.attr("class","basic label-container").attr("style",Ba(f))}else S=s.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",_);return S.attr("transform",`translate(${-y/2}, ${-k/2})`),It(t,S),t.calcIntersect=function(T,N){return vt.rect(T,N)},t.intersect=function(T){return qe.info("Bang intersect",t,T),vt.rect(t,T)},s}A(GR,"bang");async function YR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:l,label:c}=await Qt(e,t,Yt(t)),d=i.width+2*l,h=i.height+2*l,g=.15*d,f=.25*d,x=.35*d,b=.2*d,{cssStyles:y}=t;let k;const S=`M0 0 
    a${g},${g} 0 0,1 ${d*.25},${-1*d*.1}
    a${x},${x} 1 0,1 ${d*.4},${-1*d*.1}
    a${f},${f} 1 0,1 ${d*.35},${d*.2}

    a${g},${g} 1 0,1 ${d*.15},${h*.35}
    a${b},${b} 1 0,1 ${-1*d*.15},${h*.65}

    a${f},${g} 1 0,1 ${-1*d*.25},${d*.15}
    a${x},${x} 1 0,1 ${-1*d*.5},0
    a${g},${g} 1 0,1 ${-1*d*.25},${-1*d*.15}

    a${g},${g} 1 0,1 ${-1*d*.1},${-1*h*.35}
    a${b},${b} 1 0,1 ${d*.1},${-1*h*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const _=At.svg(s),T=Mt(t,{}),N=_.path(S,T);k=s.insert(()=>N,":first-child"),k.attr("class","basic label-container").attr("style",Ba(y))}else k=s.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",S);return c.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),k.attr("transform",`translate(${-d/2}, ${-h/2})`),It(t,k),t.calcIntersect=function(_,T){return vt.rect(_,T)},t.intersect=function(_){return qe.info("Cloud intersect",t,_),vt.rect(t,_)},s}A(YR,"cloud");async function WR(e,t){const{labelStyles:r,nodeStyles:n}=Ot(t);t.labelStyle=r;const{shapeSvg:s,bbox:i,halfPadding:l,label:c}=await Qt(e,t,Yt(t)),d=i.width+8*l,h=i.height+2*l,g=5,f=`
    M${-d/2} ${h/2-g}
    v${-h+2*g}
    q0,-${g} ${g},-${g}
    h${d-2*g}
    q${g},0 ${g},${g}
    v${h-2*g}
    q0,${g} -${g},${g}
    h${-d+2*g}
    q-${g},0 -${g},-${g}
    Z
  `,x=s.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",f);return s.append("line").attr("class","node-line-").attr("x1",-d/2).attr("y1",h/2).attr("x2",d/2).attr("y2",h/2),c.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),s.append(()=>c.node()),It(t,x),t.calcIntersect=function(b,y){return vt.rect(b,y)},t.intersect=function(b){return vt.rect(t,b)},s}A(WR,"defaultMindmapNode");async function VR(e,t){const r={padding:t.padding??0};return bk(e,t,r)}A(VR,"mindmapCircle");var Woe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:_R},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:wR},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:TR},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:jR},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:KO},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:bk},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:GR},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:YR},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:yR},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:rR},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:hR},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:dR},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:IR},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:cR},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:QO},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:OR},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:UO},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:SR},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:AR},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:NR},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:eR},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:nR},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:GO},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:YO},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:WO},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:gR},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:BR},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:tR},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:RR},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:pR},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:VO},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:XO},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:PR},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:$R},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:JO},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:DR},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:ZO},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ER},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:xR},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:mR},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:$O},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:qO},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:MR},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:LR},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:FR},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:vR},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:fR}],Voe=A(()=>{const t=[...Object.entries({state:CR,choice:zO,note:bR,rectWithTitle:kR,labelRect:uR,iconSquare:oR,iconCircle:sR,icon:aR,iconRounded:iR,imageSquare:lR,anchor:FO,kanbanItem:qR,mindmapCircle:VR,defaultMindmapNode:WR,classBox:zR,erBox:yk,requirementBox:HR}),...Woe.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(s=>[s,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),KR=Voe();function Koe(e){return e in KR}A(Koe,"isValidShape");var Bm=new Map;async function XR(e,t,r){let n,s;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const i=t.shape?KR[t.shape]:void 0;if(!i)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let l;r.config.securityLevel==="sandbox"?l="_top":t.linkTarget&&(l=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",l??null),s=await i(n,t,r)}else s=await i(e,t,r),n=s;return t.tooltip&&s.attr("title",t.tooltip),Bm.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}A(XR,"insertNode");var rge=A((e,t)=>{Bm.set(t.id,e)},"setNodeElem"),nge=A(()=>{Bm.clear()},"clear"),age=A(e=>{const t=Bm.get(e.id);qe.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),Xoe=A((e,t,r,n,s,i)=>{t.arrowTypeStart&&AN(e,"start",t.arrowTypeStart,r,n,s,i),t.arrowTypeEnd&&AN(e,"end",t.arrowTypeEnd,r,n,s,i)},"addEdgeMarkers"),Qoe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},AN=A((e,t,r,n,s,i,l)=>{const c=Qoe[r];if(!c){qe.warn(`Unknown arrow type: ${r}`);return}const d=c.type,g=`${s}_${i}-${d}${t==="start"?"Start":"End"}`;if(l&&l.trim()!==""){const f=l.replace(/[^\dA-Za-z]/g,"_"),x=`${g}_${f}`;if(!document.getElementById(x)){const b=document.getElementById(g);if(b){const y=b.cloneNode(!0);y.id=x,y.querySelectorAll("path, circle, line").forEach(S=>{S.setAttribute("stroke",l),c.fill&&S.setAttribute("fill",l)}),b.parentNode?.appendChild(y)}}e.attr(`marker-${t}`,`url(${n}#${x})`)}else e.attr(`marker-${t}`,`url(${n}#${g})`)},"addEdgeMarker"),X0=new Map,Ta=new Map,sge=A(()=>{X0.clear(),Ta.clear()},"clear"),Mf=A(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),Joe=A(async(e,t)=>{let r=la(Zr().flowchart.htmlLabels);const{labelStyles:n}=Ot(t);t.labelStyle=n;const s=await xl(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});qe.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),l=i.insert("g").attr("class","label").attr("data-id",t.id);l.node().appendChild(s);let c=s.getBBox();if(r){const h=s.children[0],g=Pr(s);c=h.getBoundingClientRect(),g.attr("width",c.width),g.attr("height",c.height)}l.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),X0.set(t.id,i),t.width=c.width,t.height=c.height;let d;if(t.startLabelLeft){const h=await rc(t.startLabelLeft,Mf(t.labelStyle)),g=e.insert("g").attr("class","edgeTerminals"),f=g.insert("g").attr("class","inner");d=f.node().appendChild(h);const x=h.getBBox();f.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),Ta.get(t.id)||Ta.set(t.id,{}),Ta.get(t.id).startLeft=g,Uh(d,t.startLabelLeft)}if(t.startLabelRight){const h=await rc(t.startLabelRight,Mf(t.labelStyle)),g=e.insert("g").attr("class","edgeTerminals"),f=g.insert("g").attr("class","inner");d=g.node().appendChild(h),f.node().appendChild(h);const x=h.getBBox();f.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),Ta.get(t.id)||Ta.set(t.id,{}),Ta.get(t.id).startRight=g,Uh(d,t.startLabelRight)}if(t.endLabelLeft){const h=await rc(t.endLabelLeft,Mf(t.labelStyle)),g=e.insert("g").attr("class","edgeTerminals"),f=g.insert("g").attr("class","inner");d=f.node().appendChild(h);const x=h.getBBox();f.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),g.node().appendChild(h),Ta.get(t.id)||Ta.set(t.id,{}),Ta.get(t.id).endLeft=g,Uh(d,t.endLabelLeft)}if(t.endLabelRight){const h=await rc(t.endLabelRight,Mf(t.labelStyle)),g=e.insert("g").attr("class","edgeTerminals"),f=g.insert("g").attr("class","inner");d=f.node().appendChild(h);const x=h.getBBox();f.attr("transform","translate("+-x.width/2+", "+-x.height/2+")"),g.node().appendChild(h),Ta.get(t.id)||Ta.set(t.id,{}),Ta.get(t.id).endRight=g,Uh(d,t.endLabelRight)}return s},"insertEdgeLabel");function Uh(e,t){Zr().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}A(Uh,"setTerminalWidth");var Zoe=A((e,t)=>{qe.debug("Moving label abc88 ",e.id,e.label,X0.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=Zr(),{subGraphTitleTotalMargin:s}=K2(n);if(e.label){const i=X0.get(e.id);let l=e.x,c=e.y;if(r){const d=gi.calcLabelPosition(r);qe.debug("Moving label "+e.label+" from (",l,",",c,") to (",d.x,",",d.y,") abc88"),t.updatedPath&&(l=d.x,c=d.y)}i.attr("transform",`translate(${l}, ${c+s/2})`)}if(e.startLabelLeft){const i=Ta.get(e.id).startLeft;let l=e.x,c=e.y;if(r){const d=gi.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);l=d.x,c=d.y}i.attr("transform",`translate(${l}, ${c})`)}if(e.startLabelRight){const i=Ta.get(e.id).startRight;let l=e.x,c=e.y;if(r){const d=gi.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);l=d.x,c=d.y}i.attr("transform",`translate(${l}, ${c})`)}if(e.endLabelLeft){const i=Ta.get(e.id).endLeft;let l=e.x,c=e.y;if(r){const d=gi.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);l=d.x,c=d.y}i.attr("transform",`translate(${l}, ${c})`)}if(e.endLabelRight){const i=Ta.get(e.id).endRight;let l=e.x,c=e.y;if(r){const d=gi.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);l=d.x,c=d.y}i.attr("transform",`translate(${l}, ${c})`)}},"positionEdgeLabel"),ele=A((e,t)=>{const r=e.x,n=e.y,s=Math.abs(t.x-r),i=Math.abs(t.y-n),l=e.width/2,c=e.height/2;return s>=l||i>=c},"outsideNode"),tle=A((e,t,r)=>{qe.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,s=e.y,i=Math.abs(n-r.x),l=e.width/2;let c=r.x<t.x?l-i:l+i;const d=e.height/2,h=Math.abs(t.y-r.y),g=Math.abs(t.x-r.x);if(Math.abs(s-t.y)*l>Math.abs(n-t.x)*d){let f=r.y<t.y?t.y-d-s:s-d-t.y;c=g*f/h;const x={x:r.x<t.x?r.x+c:r.x-g+c,y:r.y<t.y?r.y+h-f:r.y-h+f};return c===0&&(x.x=t.x,x.y=t.y),g===0&&(x.x=t.x),h===0&&(x.y=t.y),qe.debug(`abc89 top/bottom calc, Q ${h}, q ${f}, R ${g}, r ${c}`,x),x}else{r.x<t.x?c=t.x-l-n:c=n-l-t.x;let f=h*c/g,x=r.x<t.x?r.x+g-c:r.x-g+c,b=r.y<t.y?r.y+f:r.y-f;return qe.debug(`sides calc abc89, Q ${h}, q ${f}, R ${g}, r ${c}`,{_x:x,_y:b}),c===0&&(x=t.x,b=t.y),g===0&&(x=t.x),h===0&&(b=t.y),{x,y:b}}},"intersection"),jN=A((e,t)=>{qe.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],s=!1;return e.forEach(i=>{if(qe.info("abc88 checking point",i,t),!ele(t,i)&&!s){const l=tle(t,n,i);qe.debug("abc88 inside",i,n,l),qe.debug("abc88 intersection",l,t);let c=!1;r.forEach(d=>{c=c||d.x===l.x&&d.y===l.y}),r.some(d=>d.x===l.x&&d.y===l.y)?qe.warn("abc88 no intersect",l,r):r.push(l),s=!0}else qe.warn("abc88 outside",i,n),n=i,s||r.push(i)}),qe.debug("returning points",r),r},"cutPathAtIntersect");function QR(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const s=e[n-1],i=e[n],l=e[n+1];(s.x===i.x&&i.y===l.y&&Math.abs(i.x-l.x)>5&&Math.abs(i.y-s.y)>5||s.y===i.y&&i.x===l.x&&Math.abs(i.x-s.x)>5&&Math.abs(i.y-l.y)>5)&&(t.push(i),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}A(QR,"extractCornerPoints");var LN=A(function(e,t,r){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s),l=r/i;return{x:t.x-l*n,y:t.y-l*s}},"findAdjacentPoint"),rle=A(function(e){const{cornerPointPositions:t}=QR(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const s=e[n-1],i=e[n+1],l=e[n],c=LN(s,l,5),d=LN(i,l,5),h=d.x-c.x,g=d.y-c.y;r.push(c);const f=Math.sqrt(2)*2;let x={x:l.x,y:l.y};if(Math.abs(i.x-s.x)>10&&Math.abs(i.y-s.y)>=10){qe.debug("Corner point fixing",Math.abs(i.x-s.x),Math.abs(i.y-s.y));const b=5;l.x===c.x?x={x:h<0?c.x-b+f:c.x+b-f,y:g<0?c.y-f:c.y+f}:x={x:h<0?c.x-f:c.x+f,y:g<0?c.y-b+f:c.y+b-f}}else qe.debug("Corner point skipping fixing",Math.abs(i.x-s.x),Math.abs(i.y-s.y));r.push(x,d)}else r.push(e[n]);return r},"fixCorners"),nle=A((e,t,r)=>{const n=e-t-r,s=2,i=2,l=s+i,c=Math.floor(n/l),d=Array(c).fill(`${s} ${i}`).join(" ");return`0 ${t} ${d} ${r}`},"generateDashArray"),ale=A(function(e,t,r,n,s,i,l,c=!1){const{handDrawnSeed:d}=Zr();let h=t.points,g=!1;const f=s;var x=i;const b=[];for(const j in t.cssCompiledStyles)NM(j)||b.push(t.cssCompiledStyles[j]);qe.debug("UIO intersect check",t.points,x.x,f.x),x.intersect&&f.intersect&&!c&&(h=h.slice(1,t.points.length-1),h.unshift(f.intersect(h[0])),qe.debug("Last point UIO",t.start,"-->",t.end,h[h.length-1],x,x.intersect(h[h.length-1])),h.push(x.intersect(h[h.length-1])));const y=btoa(JSON.stringify(h));t.toCluster&&(qe.info("to cluster abc88",r.get(t.toCluster)),h=jN(t.points,r.get(t.toCluster).node),g=!0),t.fromCluster&&(qe.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(h,null,2)),h=jN(h.reverse(),r.get(t.fromCluster).node).reverse(),g=!0);let k=h.filter(j=>!Number.isNaN(j.y));k=rle(k);let S=Vf;switch(S=C0,t.curve){case"linear":S=C0;break;case"basis":S=Vf;break;case"cardinal":S=ML;break;case"bumpX":S=CL;break;case"bumpY":S=NL;break;case"catmullRom":S=RL;break;case"monotoneX":S=$L;break;case"monotoneY":S=UL;break;case"natural":S=HL;break;case"step":S=qL;break;case"stepAfter":S=YL;break;case"stepBefore":S=GL;break;default:S=Vf}const{x:_,y:T}=rne(t),N=Fte().x(_).y(T).curve(S);let I;switch(t.thickness){case"normal":I="edge-thickness-normal";break;case"thick":I="edge-thickness-thick";break;case"invisible":I="edge-thickness-invisible";break;default:I="edge-thickness-normal"}switch(t.pattern){case"solid":I+=" edge-pattern-solid";break;case"dotted":I+=" edge-pattern-dotted";break;case"dashed":I+=" edge-pattern-dashed";break;default:I+=" edge-pattern-solid"}let R,B=t.curve==="rounded"?JR(ZR(k,t),5):N(k);const F=Array.isArray(t.style)?t.style:[t.style];let ae=F.find(j=>j?.startsWith("stroke:")),G=!1;if(t.look==="handDrawn"){const j=At.svg(e);Object.assign([],k);const U=j.path(B,{roughness:.3,seed:d});I+=" transition",R=Pr(U).select("path").attr("id",t.id).attr("class"," "+I+(t.classes?" "+t.classes:"")).attr("style",F?F.reduce((q,V)=>q+";"+V,""):"");let O=R.attr("d");R.attr("d",O),e.node().appendChild(R.node())}else{const j=b.join(";"),U=F?F.reduce((z,M)=>z+M+";",""):"";let O="";t.animate&&(O=" edge-animation-fast"),t.animation&&(O=" edge-animation-"+t.animation);const q=(j?j+";"+U+";":U)+";"+(F?F.reduce((z,M)=>z+";"+M,""):"");R=e.append("path").attr("d",B).attr("id",t.id).attr("class"," "+I+(t.classes?" "+t.classes:"")+(O??"")).attr("style",q),ae=q.match(/stroke:([^;]+)/)?.[1],G=t.animate===!0||!!t.animation||j.includes("animation");const V=R.node(),ue=typeof V.getTotalLength=="function"?V.getTotalLength():0,H=VC[t.arrowTypeStart]||0,D=VC[t.arrowTypeEnd]||0;if(t.look==="neo"&&!G){const M=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?nle(ue,H,D):`0 ${H} ${ue-H-D} ${D}`}; stroke-dashoffset: 0;`;R.attr("style",M+R.attr("style"))}}R.attr("data-edge",!0),R.attr("data-et","edge"),R.attr("data-id",t.id),R.attr("data-points",y),t.showPoints&&k.forEach(j=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",j.x).attr("cy",j.y)});let $="";(Zr().flowchart.arrowMarkerAbsolute||Zr().state.arrowMarkerAbsolute)&&($=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$=$.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),qe.info("arrowTypeStart",t.arrowTypeStart),qe.info("arrowTypeEnd",t.arrowTypeEnd),Xoe(R,t,$,l,n,ae);const J=Math.floor(h.length/2),ee=h[J];gi.isLabelCoordinateInPath(ee,R.attr("d"))||(g=!0);let W={};return g&&(W.updatedPath=h),W.originalPath=t.points,W},"insertEdge");function JR(e,t){if(e.length<2)return"";let r="";const n=e.length,s=1e-5;for(let i=0;i<n;i++){const l=e[i],c=e[i-1],d=e[i+1];if(i===0)r+=`M${l.x},${l.y}`;else if(i===n-1)r+=`L${l.x},${l.y}`;else{const h=l.x-c.x,g=l.y-c.y,f=d.x-l.x,x=d.y-l.y,b=Math.hypot(h,g),y=Math.hypot(f,x);if(b<s||y<s){r+=`L${l.x},${l.y}`;continue}const k=h/b,S=g/b,_=f/y,T=x/y,N=k*_+S*T,I=Math.max(-1,Math.min(1,N)),R=Math.acos(I);if(R<s||Math.abs(Math.PI-R)<s){r+=`L${l.x},${l.y}`;continue}const B=Math.min(t/Math.sin(R/2),b/2,y/2),F=l.x-k*B,ae=l.y-S*B,G=l.x+_*B,$=l.y+T*B;r+=`L${F},${ae}`,r+=`Q${l.x},${l.y} ${G},${$}`}}return r}A(JR,"generateRoundedPath");function Mv(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}A(Mv,"calculateDeltaAndAngle");function ZR(e,t){const r=e.map(s=>({...s}));if(e.length>=2&&Ra[t.arrowTypeStart]){const s=Ra[t.arrowTypeStart],i=e[0],l=e[1],{angle:c}=Mv(i,l),d=s*Math.cos(c),h=s*Math.sin(c);r[0].x=i.x+d,r[0].y=i.y+h}const n=e.length;if(n>=2&&Ra[t.arrowTypeEnd]){const s=Ra[t.arrowTypeEnd],i=e[n-1],l=e[n-2],{angle:c}=Mv(l,i),d=s*Math.cos(c),h=s*Math.sin(c);r[n-1].x=i.x-d,r[n-1].y=i.y-h}return r}A(ZR,"applyMarkerOffsetsToPoints");var sle=A((e,t,r,n)=>{t.forEach(s=>{kle[s](e,r,n)})},"insertMarkers"),ile=A((e,t,r)=>{qe.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),ole=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),lle=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),cle=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),ule=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),dle=A((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),hle=A((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),gle=A((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),ple=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),fle=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),mle=A((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),s.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),xle=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),ble=A((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),s.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),yle=A((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),vle=A((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),kle={extension:ile,composition:ole,aggregation:lle,dependency:cle,lollipop:ule,point:dle,circle:hle,cross:gle,barb:ple,only_one:fle,zero_or_one:mle,one_or_more:xle,zero_or_more:ble,requirement_arrow:yle,requirement_contains:vle},wle=sle,Sle={common:dd,getConfig:Da,insertCluster:Loe,insertEdge:ale,insertEdgeLabel:Joe,insertMarkers:wle,insertNode:XR,interpolateToCurve:ek,labelHelper:Qt,log:qe,positionEdgeLabel:Zoe},Eg={},eI=A(e=>{for(const t of e)Eg[t.name]=t},"registerLayoutLoaders"),Ele=A(()=>{eI([{name:"dagre",loader:A(async()=>await lr(()=>import("./dagre-6UL2VRFP-BjgZXCZ2.js"),__vite__mapDeps([5,6,7,8,9,10])),"loader")},{name:"cose-bilkent",loader:A(async()=>await lr(()=>import("./cose-bilkent-S5V4N54A-DVdNU9Ub.js"),__vite__mapDeps([11,12])),"loader")}])},"registerDefaultLayoutLoaders");Ele();var ige=A(async(e,t)=>{if(!(e.layoutAlgorithm in Eg))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=Eg[e.layoutAlgorithm];return(await r.loader()).render(e,t,Sle,{algorithm:r.algorithm})},"render"),oge=A((e="",{fallback:t="dagre"}={})=>{if(e in Eg)return e;if(t in Eg)return qe.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),tI="comm",rI="rule",nI="decl",_le="@import",Tle="@namespace",Cle="@keyframes",Nle="@layer",aI=Math.abs,vk=String.fromCharCode;function sI(e){return e.trim()}function Zf(e,t,r){return e.replace(t,r)}function Ale(e,t,r){return e.indexOf(t,r)}function Mu(e,t){return e.charCodeAt(t)|0}function Qu(e,t,r){return e.slice(t,r)}function Mi(e){return e.length}function jle(e){return e.length}function Of(e,t){return t.push(e),e}var Fm=1,Ju=1,iI=0,ei=0,na=0,md="";function kk(e,t,r,n,s,i,l,c){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:Fm,column:Ju,length:l,return:"",siblings:c}}function Lle(){return na}function Mle(){return na=ei>0?Mu(md,--ei):0,Ju--,na===10&&(Ju=1,Fm--),na}function xi(){return na=ei<iI?Mu(md,ei++):0,Ju++,na===10&&(Ju=1,Fm++),na}function ll(){return Mu(md,ei)}function e0(){return ei}function $m(e,t){return Qu(md,e,t)}function _g(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ole(e){return Fm=Ju=1,iI=Mi(md=e),ei=0,[]}function Rle(e){return md="",e}function Ky(e){return sI($m(ei-1,Ov(e===91?e+2:e===40?e+1:e)))}function Ile(e){for(;(na=ll())&&na<33;)xi();return _g(e)>2||_g(na)>3?"":" "}function Dle(e,t){for(;--t&&xi()&&!(na<48||na>102||na>57&&na<65||na>70&&na<97););return $m(e,e0()+(t<6&&ll()==32&&xi()==32))}function Ov(e){for(;xi();)switch(na){case e:return ei;case 34:case 39:e!==34&&e!==39&&Ov(na);break;case 40:e===41&&Ov(e);break;case 92:xi();break}return ei}function Ple(e,t){for(;xi()&&e+na!==57;)if(e+na===84&&ll()===47)break;return"/*"+$m(t,ei-1)+"*"+vk(e===47?e:xi())}function Ble(e){for(;!_g(ll());)xi();return $m(e,ei)}function Fle(e){return Rle(t0("",null,null,null,[""],e=Ole(e),0,[0],e))}function t0(e,t,r,n,s,i,l,c,d){for(var h=0,g=0,f=l,x=0,b=0,y=0,k=1,S=1,_=1,T=0,N="",I=s,R=i,B=n,F=N;S;)switch(y=T,T=xi()){case 40:if(y!=108&&Mu(F,f-1)==58){Ale(F+=Zf(Ky(T),"&","&\f"),"&\f",aI(h?c[h-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:F+=Ky(T);break;case 9:case 10:case 13:case 32:F+=Ile(y);break;case 92:F+=Dle(e0()-1,7);continue;case 47:switch(ll()){case 42:case 47:Of($le(Ple(xi(),e0()),t,r,d),d),(_g(y||1)==5||_g(ll()||1)==5)&&Mi(F)&&Qu(F,-1,void 0)!==" "&&(F+=" ");break;default:F+="/"}break;case 123*k:c[h++]=Mi(F)*_;case 125*k:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+g:_==-1&&(F=Zf(F,/\f/g,"")),b>0&&(Mi(F)-f||k===0&&y===47)&&Of(b>32?ON(F+";",n,r,f-1,d):ON(Zf(F," ","")+";",n,r,f-2,d),d);break;case 59:F+=";";default:if(Of(B=MN(F,t,r,h,g,s,c,N,I=[],R=[],f,i),i),T===123)if(g===0)t0(F,t,B,B,I,i,f,c,R);else{switch(x){case 99:if(Mu(F,3)===110)break;case 108:if(Mu(F,2)===97)break;default:g=0;case 100:case 109:case 115:}g?t0(e,B,B,n&&Of(MN(e,B,B,0,0,s,c,N,s,I=[],f,R),R),s,R,f,c,n?I:R):t0(F,B,B,B,[""],R,0,c,R)}}h=g=b=0,k=_=1,N=F="",f=l;break;case 58:f=1+Mi(F),b=y;default:if(k<1){if(T==123)--k;else if(T==125&&k++==0&&Mle()==125)continue}switch(F+=vk(T),T*k){case 38:_=g>0?1:(F+="\f",-1);break;case 44:c[h++]=(Mi(F)-1)*_,_=1;break;case 64:ll()===45&&(F+=Ky(xi())),x=ll(),g=f=Mi(N=F+=Ble(e0())),T++;break;case 45:y===45&&Mi(F)==2&&(k=0)}}return i}function MN(e,t,r,n,s,i,l,c,d,h,g,f){for(var x=s-1,b=s===0?i:[""],y=jle(b),k=0,S=0,_=0;k<n;++k)for(var T=0,N=Qu(e,x+1,x=aI(S=l[k])),I=e;T<y;++T)(I=sI(S>0?b[T]+" "+N:Zf(N,/&\f/g,b[T])))&&(d[_++]=I);return kk(e,t,r,s===0?rI:c,d,h,g,f)}function $le(e,t,r,n){return kk(e,t,r,tI,vk(Lle()),Qu(e,2,-2),0,n)}function ON(e,t,r,n,s){return kk(e,t,r,nI,Qu(e,0,n),Qu(e,n+1,-1),n,s)}function Rv(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function Ule(e,t,r,n){switch(e.type){case Nle:if(e.children.length)break;case _le:case Tle:case nI:return e.return=e.return||e.value;case tI:return"";case Cle:return e.return=e.value+"{"+Rv(e.children,n)+"}";case rI:if(!Mi(e.value=e.props.join(",")))return""}return Mi(r=Rv(e.children,n))?e.return=e.value+"{"+r+"}":""}var zle=MM(Object.keys,Object),Hle=Object.prototype,qle=Hle.hasOwnProperty;function Gle(e){if(!Am(e))return zle(e);var t=[];for(var r in Object(e))qle.call(e,r)&&r!="constructor"&&t.push(r);return t}var Iv=Tc(Gi,"DataView"),Dv=Tc(Gi,"Promise"),Pv=Tc(Gi,"Set"),Bv=Tc(Gi,"WeakMap"),RN="[object Map]",Yle="[object Object]",IN="[object Promise]",DN="[object Set]",PN="[object WeakMap]",BN="[object DataView]",Wle=_c(Iv),Vle=_c(wg),Kle=_c(Dv),Xle=_c(Pv),Qle=_c(Bv),Kl=gd;(Iv&&Kl(new Iv(new ArrayBuffer(1)))!=BN||wg&&Kl(new wg)!=RN||Dv&&Kl(Dv.resolve())!=IN||Pv&&Kl(new Pv)!=DN||Bv&&Kl(new Bv)!=PN)&&(Kl=function(e){var t=gd(e),r=t==Yle?e.constructor:void 0,n=r?_c(r):"";if(n)switch(n){case Wle:return BN;case Vle:return RN;case Kle:return IN;case Xle:return DN;case Qle:return PN}return t});var Jle="[object Map]",Zle="[object Set]",ece=Object.prototype,tce=ece.hasOwnProperty;function FN(e){if(e==null)return!0;if(jm(e)&&($0(e)||typeof e=="string"||typeof e.splice=="function"||J2(e)||Z2(e)||F0(e)))return!e.length;var t=Kl(e);if(t==Jle||t==Zle)return!e.size;if(Am(e))return!Gle(e).length;for(var r in e)if(tce.call(e,r))return!1;return!0}var oI="c4",rce=A(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),nce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-8o9cuqc-.js");return{diagram:t}},__vite__mapDeps([13,14]));return{id:oI,diagram:e}},"loader"),ace={id:oI,detector:rce,loader:nce},sce=ace,lI="flowchart",ice=A((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),oce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BfT1h5MV.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:lI,diagram:e}},"loader"),lce={id:lI,detector:ice,loader:oce},cce=lce,cI="flowchart-v2",uce=A((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),dce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BfT1h5MV.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:cI,diagram:e}},"loader"),hce={id:cI,detector:uce,loader:dce},gce=hce,uI="er",pce=A(e=>/^\s*erDiagram/.test(e),"detector"),fce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-xn4rDrbc.js");return{diagram:t}},__vite__mapDeps([20,17,18,19]));return{id:uI,diagram:e}},"loader"),mce={id:uI,detector:pce,loader:fce},xce=mce,dI="gitGraph",bce=A(e=>/^\s*gitGraph/.test(e),"detector"),yce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-CESeNpTr.js");return{diagram:t}},__vite__mapDeps([21,22,23,24,7,9,10]));return{id:dI,diagram:e}},"loader"),vce={id:dI,detector:bce,loader:yce},kce=vce,hI="gantt",wce=A(e=>/^\s*gantt/.test(e),"detector"),Sce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./ganttDiagram-LVOFAZNH-Dw1IKSaW.js");return{diagram:t}},__vite__mapDeps([25,26,27,28]));return{id:hI,diagram:e}},"loader"),Ece={id:hI,detector:wce,loader:Sce},_ce=Ece,gI="info",Tce=A(e=>/^\s*info/.test(e),"detector"),Cce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./infoDiagram-F6ZHWCRC-nMEri5iD.js");return{diagram:t}},__vite__mapDeps([29,24,7,9,10]));return{id:gI,diagram:e}},"loader"),Nce={id:gI,detector:Tce,loader:Cce},pI="pie",Ace=A(e=>/^\s*pie/.test(e),"detector"),jce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-DrXpqPt1.js");return{diagram:t}},__vite__mapDeps([30,22,24,7,9,10,31,32,27]));return{id:pI,diagram:e}},"loader"),Lce={id:pI,detector:Ace,loader:jce},fI="quadrantChart",Mce=A(e=>/^\s*quadrantChart/.test(e),"detector"),Oce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-nkqfGW7b.js");return{diagram:t}},__vite__mapDeps([33,26,27,28]));return{id:fI,diagram:e}},"loader"),Rce={id:fI,detector:Mce,loader:Oce},Ice=Rce,mI="xychart",Dce=A(e=>/^\s*xychart(-beta)?/.test(e),"detector"),Pce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-CosmtLYY.js");return{diagram:t}},__vite__mapDeps([34,27,32,26,28]));return{id:mI,diagram:e}},"loader"),Bce={id:mI,detector:Dce,loader:Pce},Fce=Bce,xI="requirement",$ce=A(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Uce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-DgWnFORH.js");return{diagram:t}},__vite__mapDeps([35,17,18]));return{id:xI,diagram:e}},"loader"),zce={id:xI,detector:$ce,loader:Uce},Hce=zce,bI="sequence",qce=A(e=>/^\s*sequenceDiagram/.test(e),"detector"),Gce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-BV08jCdu.js");return{diagram:t}},__vite__mapDeps([36,14,23]));return{id:bI,diagram:e}},"loader"),Yce={id:bI,detector:qce,loader:Gce},Wce=Yce,yI="class",Vce=A((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),Kce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-CLJiYTgZ.js");return{diagram:t}},__vite__mapDeps([37,38,16,17,18]));return{id:yI,diagram:e}},"loader"),Xce={id:yI,detector:Vce,loader:Kce},Qce=Xce,vI="classDiagram",Jce=A((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),Zce=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-CLJiYTgZ.js");return{diagram:t}},__vite__mapDeps([39,38,16,17,18]));return{id:vI,diagram:e}},"loader"),eue={id:vI,detector:Jce,loader:Zce},tue=eue,kI="state",rue=A((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),nue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-CjEkM4NL.js");return{diagram:t}},__vite__mapDeps([40,41,17,18,6,7,8,9]));return{id:kI,diagram:e}},"loader"),aue={id:kI,detector:rue,loader:nue},sue=aue,wI="stateDiagram",iue=A((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),oue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-CluRuJ2L.js");return{diagram:t}},__vite__mapDeps([42,41,17,18]));return{id:wI,diagram:e}},"loader"),lue={id:wI,detector:iue,loader:oue},cue=lue,SI="journey",uue=A(e=>/^\s*journey/.test(e),"detector"),due=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-CZfbi-yz.js");return{diagram:t}},__vite__mapDeps([43,14,16,31]));return{id:SI,diagram:e}},"loader"),hue={id:SI,detector:uue,loader:due},gue=hue,pue=A((e,t,r)=>{qe.debug(`rendering svg for syntax error
`);const n=Vte(t),s=n.append("g");n.attr("viewBox","0 0 2412 512"),X4(n,100,512,!0),s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),EI={draw:pue},fue=EI,mue={db:{},renderer:EI,parser:{parse:A(()=>{},"parse")}},xue=mue,_I="flowchart-elk",bue=A((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),yue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-BfT1h5MV.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:_I,diagram:e}},"loader"),vue={id:_I,detector:bue,loader:yue},kue=vue,TI="timeline",wue=A(e=>/^\s*timeline/.test(e),"detector"),Sue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-7Ai9crnA.js");return{diagram:t}},__vite__mapDeps([44,31]));return{id:TI,diagram:e}},"loader"),Eue={id:TI,detector:wue,loader:Sue},_ue=Eue,CI="mindmap",Tue=A(e=>/^\s*mindmap/.test(e),"detector"),Cue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-Dsd_nTI6.js");return{diagram:t}},__vite__mapDeps([45,17,18]));return{id:CI,diagram:e}},"loader"),Nue={id:CI,detector:Tue,loader:Cue},Aue=Nue,NI="kanban",jue=A(e=>/^\s*kanban/.test(e),"detector"),Lue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-CyMlC4Aq.js");return{diagram:t}},__vite__mapDeps([46,16]));return{id:NI,diagram:e}},"loader"),Mue={id:NI,detector:jue,loader:Lue},Oue=Mue,AI="sankey",Rue=A(e=>/^\s*sankey(-beta)?/.test(e),"detector"),Iue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-B3VAO84q.js");return{diagram:t}},__vite__mapDeps([47,32,27]));return{id:AI,diagram:e}},"loader"),Due={id:AI,detector:Rue,loader:Iue},Pue=Due,jI="packet",Bue=A(e=>/^\s*packet(-beta)?/.test(e),"detector"),Fue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-DD5ZgxBx.js");return{diagram:t}},__vite__mapDeps([48,22,24,7,9,10]));return{id:jI,diagram:e}},"loader"),$ue={id:jI,detector:Bue,loader:Fue},LI="radar",Uue=A(e=>/^\s*radar-beta/.test(e),"detector"),zue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-BVRLHGol.js");return{diagram:t}},__vite__mapDeps([49,22,24,7,9,10]));return{id:LI,diagram:e}},"loader"),Hue={id:LI,detector:Uue,loader:zue},MI="block",que=A(e=>/^\s*block(-beta)?/.test(e),"detector"),Gue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-wTERfLuo.js");return{diagram:t}},__vite__mapDeps([50,16,10,7,6,19]));return{id:MI,diagram:e}},"loader"),Yue={id:MI,detector:que,loader:Gue},Wue=Yue,OI="architecture",Vue=A(e=>/^\s*architecture/.test(e),"detector"),Kue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-DrzKK4V8.js");return{diagram:t}},__vite__mapDeps([51,22,24,7,9,10,12]));return{id:OI,diagram:e}},"loader"),Xue={id:OI,detector:Vue,loader:Kue},Que=Xue,RI="treemap",Jue=A(e=>/^\s*treemap/.test(e),"detector"),Zue=A(async()=>{const{diagram:e}=await lr(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-CTV-V8fm.js");return{diagram:t}},__vite__mapDeps([52,18,22,24,7,9,10,28,32,27]));return{id:RI,diagram:e}},"loader"),ede={id:RI,detector:Jue,loader:Zue},$N=!1,Um=A(()=>{$N||($N=!0,v0("error",xue,e=>e.toLowerCase().trim()==="error"),v0("---",{db:{clear:A(()=>{},"clear")},styles:{},renderer:{draw:A(()=>{},"draw")},parser:{parse:A(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:A(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),G1(kue,Aue,Que),G1(sce,Oue,tue,Qce,xce,_ce,Nce,Lce,Hce,Wce,gce,cce,_ue,kce,cue,sue,gue,Ice,Pue,$ue,Fce,Wue,Hue,ede))},"addDiagrams"),tde=A(async()=>{qe.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(dc).map(async([r,{detector:n,loader:s}])=>{if(s)try{K1(r)}catch{try{const{diagram:i,id:l}=await s();v0(l,i,n)}catch(i){throw qe.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete dc[r],i}}}))).filter(r=>r.status==="rejected");if(t.length>0){qe.error(`Failed to load ${t.length} external diagrams`);for(const r of t)qe.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),rde="graphics-document document";function II(e,t){e.attr("role",rde),t!==""&&e.attr("aria-roledescription",t)}A(II,"setA11yDiagramInfo");function DI(e,t,r,n){if(e.insert!==void 0){if(r){const s=`chart-desc-${n}`;e.attr("aria-describedby",s),e.insert("desc",":first-child").attr("id",s).text(r)}if(t){const s=`chart-title-${n}`;e.attr("aria-labelledby",s),e.insert("title",":first-child").attr("id",s).text(t)}}}A(DI,"addSVGa11yTitleDescription");var ic,Fv=(ic=class{constructor(t,r,n,s,i){this.type=t,this.text=r,this.db=n,this.parser=s,this.renderer=i}static async fromText(t,r={}){const n=Da(),s=S2(t,n);t=eie(t)+`
`;try{K1(s)}catch{const h=EQ(s);if(!h)throw new B4(`Diagram ${s} not found.`);const{id:g,diagram:f}=await h();v0(g,f)}const{db:i,parser:l,renderer:c,init:d}=K1(s);return l.parser&&(l.parser.yy=i),i.clear?.(),d?.(n),r.title&&i.setDiagramTitle?.(r.title),await l.parse(t),new ic(s,t,i,l,c)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},A(ic,"Diagram"),ic),UN=[],nde=A(()=>{UN.forEach(e=>{e()}),UN=[]},"attachFunctions"),ade=A(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function PI(e){const t=e.match(P4);if(!t)return{text:e,metadata:{}};let r=tne(t[1],{schema:ene})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}A(PI,"extractFrontMatter");var sde=A(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),ide=A(e=>{const{text:t,metadata:r}=PI(e),{displayMode:n,title:s,config:i={}}=r;return n&&(i.gantt||(i.gantt={}),i.gantt.displayMode=n),{title:s,config:i,text:t}},"processFrontmatter"),ode=A(e=>{const t=gi.detectInit(e)??{},r=gi.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:Use(e),directive:t}},"processDirectives");function wk(e){const t=sde(e),r=ide(t),n=ode(r.text),s=sk(r.config,n.directive);return e=ade(n.text),{code:e,title:r.title,config:s}}A(wk,"preprocessDiagram");function BI(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}A(BI,"toBase64");var lde=5e4,cde="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",ude="sandbox",dde="loose",hde="http://www.w3.org/2000/svg",gde="http://www.w3.org/1999/xlink",pde="http://www.w3.org/1999/xhtml",fde="100%",mde="100%",xde="border:0;margin:0;",bde="margin:0",yde="allow-top-navigation-by-user-activation allow-popups",vde='The "iframe" tag is not supported by your browser.',kde=["foreignobject"],wde=["dominant-baseline"];function Sk(e){const t=wk(e);return b0(),$Q(t.config??{}),t}A(Sk,"processAndSetConfigs");async function FI(e,t){Um();try{const{code:r,config:n}=Sk(e);return{diagramType:(await UI(r)).type,config:n}}catch(r){if(t?.suppressErrors)return!1;throw r}}A(FI,"parse");var zN=A((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),Sde=A((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const l=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(c=>{FN(c.styles)||l.forEach(d=>{r+=zN(c.id,d,c.styles)}),FN(c.textStyles)||(r+=zN(c.id,"tspan",(c?.textStyles||[]).map(d=>d.replace("color","fill"))))})}return r},"createCssStyles"),Ede=A((e,t,r,n)=>{const s=Sde(e,r),i=iJ(t,s,e.themeVariables);return Rv(Fle(`${n}{${i}}`),Ule)},"createUserStyles"),_de=A((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=Cc(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),Tde=A((e="",t)=>{const r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":mde,n=BI(`<body style="${bde}">${e}</body>`);return`<iframe style="width:${fde};height:${r};${xde}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${yde}">
  ${vde}
</iframe>`},"putIntoIFrame"),HN=A((e,t,r,n,s)=>{const i=e.append("div");i.attr("id",r),n&&i.attr("style",n);const l=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",hde);return s&&l.attr("xmlns:xlink",s),l.append("g"),e},"appendDivSvgG");function $v(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}A($v,"sandboxedIframe");var Cde=A((e,t,r,n)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),Nde=A(async function(e,t,r){Um();const n=Sk(t);t=n.code;const s=Da();qe.debug(s),t.length>(s?.maxTextSize??lde)&&(t=cde);const i="#"+e,l="i"+e,c="#"+l,d="d"+e,h="#"+d,g=A(()=>{const W=Pr(x?c:h).node();W&&"remove"in W&&W.remove()},"removeTempElements");let f=Pr("body");const x=s.securityLevel===ude,b=s.securityLevel===dde,y=s.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),x){const ee=$v(Pr(r),l);f=Pr(ee.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Pr(r);HN(f,e,d,`font-family: ${y}`,gde)}else{if(Cde(document,e,d,l),x){const ee=$v(Pr("body"),l);f=Pr(ee.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Pr("body");HN(f,e,d)}let k,S;try{k=await Fv.fromText(t,{title:n.title})}catch(ee){if(s.suppressErrorRendering)throw g(),ee;k=await Fv.fromText("error"),S=ee}const _=f.select(h).node(),T=k.type,N=_.firstChild,I=N.firstChild,R=k.renderer.getClasses?.(t,k),B=Ede(s,T,R,i),F=document.createElement("style");F.innerHTML=B,N.insertBefore(F,I);try{await k.renderer.draw(t,e,cC.version,k)}catch(ee){throw s.suppressErrorRendering?g():fue.draw(t,e,cC.version),ee}const ae=f.select(`${h} svg`),G=k.db.getAccTitle?.(),$=k.db.getAccDescription?.();zI(T,ae,G,$),f.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",pde);let J=f.select(h).node().innerHTML;if(qe.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),J=_de(J,x,la(s.arrowMarkerAbsolute)),x){const ee=f.select(h+" svg").node();J=Tde(J,ee)}else b||(J=qu.sanitize(J,{ADD_TAGS:kde,ADD_ATTR:wde,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(nde(),S)throw S;return g(),{diagramType:T,svg:J,bindFunctions:k.db.bindFunctions}},"render");function $I(e={}){const t=ia({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),BQ(t),t?.theme&&t.theme in vo?t.themeVariables=vo[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=vo.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?PQ(t):H4();w2(r.logLevel),Um()}A($I,"initialize");var UI=A((e,t={})=>{const{code:r}=wk(e);return Fv.fromText(r,t)},"getDiagramFromText");function zI(e,t,r,n){II(t,e),DI(t,r,n,t.attr("id"))}A(zI,"addA11yInfo");var xc=Object.freeze({render:Nde,parse:FI,getDiagramFromText:UI,initialize:$I,getConfig:Da,setConfig:q4,getSiteConfig:H4,updateSiteConfig:FQ,reset:A(()=>{b0()},"reset"),globalReset:A(()=>{b0(Gu)},"globalReset"),defaultConfig:Gu});w2(Da().logLevel);b0(Da());var Ade=A((e,t,r)=>{qe.warn(e),ak(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),HI=A(async function(e={querySelector:".mermaid"}){try{await jde(e)}catch(t){if(ak(t)&&qe.error(t.str),_o.parseError&&_o.parseError(t),!e.suppressErrors)throw qe.error("Use the suppressErrors option to suppress these errors"),t}},"run"),jde=A(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=xc.getConfig();qe.debug(`${e?"":"No "}Callback function found`);let s;if(r)s=r;else if(t)s=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");qe.debug(`Found ${s.length} diagrams`),n?.startOnLoad!==void 0&&(qe.debug("Start On Load: "+n?.startOnLoad),xc.updateSiteConfig({startOnLoad:n?.startOnLoad}));const i=new gi.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let l;const c=[];for(const d of Array.from(s)){if(qe.info("Rendering diagram: "+d.id),d.getAttribute("data-processed"))continue;d.setAttribute("data-processed","true");const h=`mermaid-${i.next()}`;l=d.innerHTML,l=uO(gi.entityDecode(l)).trim().replace(/<br\s*\/?>/gi,"<br/>");const g=gi.detectInit(l);g&&qe.debug("Detected early reinit: ",g);try{const{svg:f,bindFunctions:x}=await WI(h,l,d);d.innerHTML=f,e&&await e(h),x&&x(d)}catch(f){Ade(f,c,_o.parseError)}}if(c.length>0)throw c[0]},"runThrowsErrors"),qI=A(function(e){xc.initialize(e)},"initialize"),Lde=A(async function(e,t,r){qe.warn("mermaid.init is deprecated. Please use run instead."),e&&qI(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await HI(n)},"init"),Mde=A(async(e,{lazyLoad:t=!0}={})=>{Um(),G1(...e),t===!1&&await tde()},"registerExternalDiagrams"),GI=A(function(){if(_o.startOnLoad){const{startOnLoad:e}=xc.getConfig();e&&_o.run().catch(t=>qe.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",GI,!1);var Ode=A(function(e){_o.parseError=e},"setParseErrorHandler"),Q0=[],Xy=!1,YI=A(async()=>{if(!Xy){for(Xy=!0;Q0.length>0;){const e=Q0.shift();if(e)try{await e()}catch(t){qe.error("Error executing queue",t)}}Xy=!1}},"executeQueue"),Rde=A(async(e,t)=>new Promise((r,n)=>{const s=A(()=>new Promise((i,l)=>{xc.parse(e,t).then(c=>{i(c),r(c)},c=>{qe.error("Error parsing",c),_o.parseError?.(c),l(c),n(c)})}),"performCall");Q0.push(s),YI().catch(n)}),"parse"),WI=A((e,t,r)=>new Promise((n,s)=>{const i=A(()=>new Promise((l,c)=>{xc.render(e,t,r).then(d=>{l(d),n(d)},d=>{qe.error("Error parsing",d),_o.parseError?.(d),c(d),s(d)})}),"performCall");Q0.push(i),YI().catch(s)}),"render"),Ide=A(()=>Object.keys(dc).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),_o={startOnLoad:!0,mermaidAPI:xc,parse:Rde,render:WI,init:Lde,run:HI,registerExternalDiagrams:Mde,registerLayoutLoaders:eI,initialize:qI,parseError:void 0,contentLoaded:GI,setParseErrorHandler:Ode,detectType:S2,registerIconPacks:aoe,getRegisteredDiagramsMetadata:Ide},qN=_o;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const Zu=({data:e,name:t,level:r=0,defaultExpanded:n=!0})=>{const[s,i]=C.useState(n),l=r*16;if(e==null)return a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-500 italic",children:"null"})]});const c=typeof e;if(c==="string"||c==="number"||c==="boolean")return a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsx("span",{className:c==="string"?"text-green-600 dark:text-green-400":c==="number"?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:c==="string"?`"${e}"`:String(e)})]});if(Array.isArray(e))return e.length===0?a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"[]"})]}):a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[a.jsxs("button",{onClick:()=>i(!s),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:s?"":""}),t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["[",e.length," ",e.length===1?"item":"items","]"]})]}),s&&a.jsx("div",{className:"ml-2",children:e.map((d,h)=>a.jsx(Zu,{data:d,name:String(h),level:r+1,defaultExpanded:r<1},h))})]});if(c==="object"){const d=Object.keys(e);return d.length===0?a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"{}"})]}):a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[a.jsxs("button",{onClick:()=>i(!s),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:s?"":""}),t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["{",d.length," ",d.length===1?"key":"keys","}"]})]}),s&&a.jsx("div",{className:"ml-2",children:d.map(h=>a.jsx(Zu,{data:e[h],name:h,level:r+1,defaultExpanded:r<1},h))})]})}return a.jsxs("div",{style:{marginLeft:`${l}px`},className:"font-mono text-sm",children:[t&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),a.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:String(e)})]})},Qy=({content:e})=>{try{const t=JSON.parse(e);return a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:a.jsx(Zu,{data:t,defaultExpanded:!0})})}catch{return a.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto text-sm",children:e})}},Rf=({data:e,title:t})=>{const[r,n]=C.useState(!1),[s,i]=C.useState(!1),l=g=>{if(typeof g=="string")try{const f=JSON.parse(g);return l(f)}catch{return g}else{if(Array.isArray(g))return g.map(f=>l(f));if(g!==null&&typeof g=="object"){const f={};for(const x in g)f[x]=l(g[x]);return f}}return g},c=l(e),d=()=>{navigator.clipboard.writeText(JSON.stringify(c,null,2)),n(!0),setTimeout(()=>n(!1),2e3)},h=()=>{i(!0)};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-3",children:a.jsxs("button",{onClick:h,className:"flex items-center justify-between w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t}),a.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium",children:" Click to View"})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>i(!1),children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl w-full h-full max-w-7xl max-h-[90vh] flex flex-col shadow-2xl",onClick:g=>g.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:r?" Copied!":" Copy All"}),a.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:" Close"})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-50 dark:bg-gray-950",children:a.jsx(Zu,{data:c,defaultExpanded:!0})})]})})]})};function Dde(e){switch(e.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-50 dark:bg-pink-900/20",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",icon:""};case"transcription":return{label:"Whisper Transcription",color:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-300 dark:border-indigo-700",text:"text-indigo-700 dark:text-indigo-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",icon:""};case"assessment":return{label:"Self-Assessment",color:"bg-teal-50 dark:bg-teal-900/20",border:"border-teal-300 dark:border-teal-700",text:"text-teal-700 dark:text-teal-300",icon:""};default:return{label:"Chat",color:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-700 dark:text-gray-300",icon:""}}}const Pde=({call:e,index:t})=>{const r=Dde(e),n=e.response?.usage?.prompt_tokens||0,s=e.response?.usage?.completion_tokens||0,i=e.response?.usage?.total_tokens||n+s,l=e.cost??0;return a.jsxs("div",{className:`border-2 ${r.border} ${r.color} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:r.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:`font-bold text-lg ${r.text}`,children:r.label}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.model]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-2xl font-bold ${l>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Xv(l)}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",t+1]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prompt Tokens"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completion Tokens"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:s.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Tokens"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.durationMs?`${(e.durationMs/1e3).toFixed(2)}s`:"N/A"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[e.success!==void 0&&a.jsx("span",{className:`px-2 py-1 rounded-full ${e.success?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:e.success?" Success":" Failed"}),e.httpStatus&&a.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:["HTTP ",e.httpStatus]})]}),a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),a.jsxs("div",{className:"space-y-2",children:[e.request&&a.jsx(Rf,{data:e.request,title:" Request Body"}),e.response&&a.jsx(Rf,{data:e.response,title:" Response Body"}),e.httpHeaders&&a.jsx(Rf,{data:e.httpHeaders,title:" HTTP Headers"}),e.metadata&&a.jsx(Rf,{data:e.metadata,title:" Metadata"})]})]})},VI=({apiCalls:e,onClose:t})=>{const r=yc(!0,t),[n,s]=C.useState(!1),{showSuccess:i}=$i(),l=e.reduce((x,b)=>x+(b.response?.usage?.prompt_tokens||0),0),c=e.reduce((x,b)=>x+(b.response?.usage?.completion_tokens||0),0),d=l+c,h=e.reduce((x,b)=>x+(b.cost||0),0),g=e.reduce((x,b)=>x+(b.durationMs||0),0),f=()=>{const x=e.map((b,y)=>({callNumber:y+1,type:b.type||"chat",provider:b.provider,model:b.model,timestamp:b.timestamp,request:b.request,response:b.response,httpHeaders:b.httpHeaders,httpStatus:b.httpStatus,cost:b.cost,durationMs:b.durationMs,metadata:b.metadata}));navigator.clipboard.writeText(JSON.stringify(x,null,2)),s(!0),setTimeout(()=>s(!1),2e3),i(` Copied ${e.length} LLM API call${e.length!==1?"s":""} to clipboard`)};return a.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" LLM API Transparency"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," API call",e.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Copied All!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Copy All JSON"})]})}),a.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Close",children:a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:e.length===0?a.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((x,b)=>a.jsx(Pde,{call:x,index:b},b))}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Grand Totals"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Prompt Tokens"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Completion Tokens"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:c.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Tokens"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.toLocaleString()})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Duration"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(g/1e3).toFixed(2),"s"]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-green-200 dark:border-green-700 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-gray-800",children:[a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Cost"}),a.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:Xv(h)})]})]})]})]})})},Bde=({chart:e,description:t,onLlmApiCall:r})=>{const n=C.useRef(null),[s,i]=C.useState(null),[l,c]=C.useState(!1),[d,h]=C.useState([]),[g,f]=C.useState(e),[x,b]=C.useState(!1),[y,k]=C.useState(!1),[S,_]=C.useState(!1),{accessToken:T}=Os(),{settings:N}=Ui(),{addCost:I}=Lg(),{addSnippet:R}=jg(),{showSuccess:B,showError:F}=$i(),ae=async()=>{if(n.current)try{const ee=n.current.querySelector("svg");if(!ee){F("Chart not found");return}const W=document.createElement("canvas"),j=new XMLSerializer().serializeToString(ee),U=new Image,O=new Blob([j],{type:"image/svg+xml;charset=utf-8"}),q=URL.createObjectURL(O);U.onload=async()=>{W.width=ee.clientWidth||800,W.height=ee.clientHeight||600;const V=W.getContext("2d");V&&(V.fillStyle="white",V.fillRect(0,0,W.width,W.height),V.drawImage(U,0,0),W.toBlob(async ue=>{if(ue)try{await navigator.clipboard.write([new ClipboardItem({"image/png":ue})]),_(!0),setTimeout(()=>_(!1),2e3),B("Chart image copied to clipboard!")}catch(H){console.error("Failed to copy to clipboard:",H),F("Failed to copy image to clipboard")}})),URL.revokeObjectURL(q)},U.onerror=()=>{F("Failed to process chart image"),URL.revokeObjectURL(q)},U.src=q}catch(ee){console.error("Failed to copy image:",ee),F("Failed to copy chart image")}},G=async()=>{if(n.current)try{const ee=n.current.querySelector("svg");if(!ee){F("Chart not found");return}const W=t||"Chart diagram",j=document.createElement("canvas"),U=new XMLSerializer().serializeToString(ee),O=new Image,q=new Blob([U],{type:"image/svg+xml;charset=utf-8"}),V=URL.createObjectURL(q);O.onload=async()=>{try{j.width=ee.clientWidth||800,j.height=ee.clientHeight||600;const ue=j.getContext("2d");if(ue){ue.fillStyle="white",ue.fillRect(0,0,j.width,j.height),ue.drawImage(O,0,0);const D=`<img src="${j.toDataURL("image/png")}" alt="${W}" class="max-w-full h-auto rounded-lg" />`;await R(D,"tool",`Chart: ${W}`),B("Chart saved to Swag!")}URL.revokeObjectURL(V)}catch(ue){console.error("Failed to convert to PNG:",ue),F("Failed to save chart to Swag"),URL.revokeObjectURL(V)}},O.onerror=()=>{F("Failed to process chart image"),URL.revokeObjectURL(V)},O.src=V}catch(ee){console.error("Failed to grab image:",ee),F("Failed to save chart to Swag")}};C.useEffect(()=>{qN.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit",logLevel:"error"})},[]),C.useEffect(()=>{(async()=>{if(n.current)try{i(null),n.current.innerHTML="";const W=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:j}=await qN.render(W,g);if(!n.current){console.warn(" MermaidChart container ref is null - component may have unmounted");return}n.current.innerHTML=j,document.querySelectorAll('div[id^="d"]').forEach(O=>{const q=O.textContent||"";(q.includes("Syntax error in text")||q.includes("mermaid version"))&&O.remove()}),console.log(" Mermaid chart rendered successfully")}catch(W){console.error(" Mermaid rendering error:",W);const j=W.message||String(W);i(j),document.querySelectorAll('div[id^="d"]').forEach(O=>{const q=O.textContent||"";(q.includes("Syntax error in text")||q.includes("mermaid version"))&&O.remove()}),d.length<3&&await $(j)}})()},[g]);const $=async ee=>{if(!T){console.warn("No access token available for chart fix");return}if(d.length>=3){console.log("Max fix attempts (3) reached");return}c(!0);const W=d.length+1;console.log(` Attempting to fix chart (attempt ${W}/3)`);try{const{getCachedApiBase:j,resetApiBase:U}=await lr(async()=>{const{getCachedApiBase:H,resetApiBase:D}=await Promise.resolve().then(()=>N9);return{getCachedApiBase:H,resetApiBase:D}},void 0);U();const O=await j(),q=await fetch(`${O}/fix-mermaid-chart`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({chart:g,error:ee,providers:N.providers})});if(!q.ok)throw new Error(`Fix request failed: ${q.statusText}`);const V=await q.json();if(V.error)throw new Error(V.error);const ue={attemptNumber:W,error:ee,fixedChart:V.fixedChart,usage:V.usage,llmApiCall:V.llmApiCall};h(H=>[...H,ue]),V.usage&&I&&I(V.usage.cost||0),r&&V.usage&&r({model:V.usage.model,provider:V.usage.provider,prompt_tokens:V.usage.prompt_tokens,completion_tokens:V.usage.completion_tokens,total_tokens:V.usage.total_tokens,cost:V.usage.cost,duration_ms:V.usage.duration_ms,purpose:`chart-fix-attempt-${W}`}),console.log(` Chart fix attempt ${W} successful`),console.log(` Cost: $${V.usage?.cost?.toFixed(6)||"0.000000"}`),console.log(` Tokens: ${V.usage?.total_tokens||0}`),f(V.fixedChart),i(null)}catch(j){console.error(` Chart fix attempt ${W} failed:`,j);const U={attemptNumber:W,error:ee};h(O=>[...O,U]),W>=3&&i(`Failed to fix chart after 3 attempts. Last error: ${ee}`)}finally{c(!1)}},J=()=>{d.length<3&&s&&$(s)};return a.jsxs("div",{className:"my-4 border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden group",children:[a.jsxs("div",{className:"relative bg-white dark:bg-gray-900",children:[a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d.some(ee=>ee.llmApiCall)&&a.jsxs("button",{onClick:()=>k(!0),className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-blue-600 dark:text-blue-400 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"View LLM transparency info for chart fixes",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-[10px]",children:"LLM"})]}),a.jsx("button",{onClick:ae,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Copy chart image to clipboard",children:S?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:"text-[10px]",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),a.jsx("span",{className:"text-[10px]",children:"Copy"})]})}),a.jsxs("button",{onClick:G,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Grab chart as base64 markdown",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),a.jsx("span",{className:"text-[10px]",children:"Grab"})]})]}),a.jsx("div",{ref:n,className:"p-4 flex items-center justify-center min-h-[200px]",style:{fontSize:"14px",overflow:"auto"}})]}),s&&!l&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-t border-red-300 dark:border-red-700 p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-1",children:"Chart Rendering Error"}),a.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-mono break-all",children:s}),d.length<3&&a.jsxs("button",{onClick:J,className:"mt-2 text-xs btn-secondary px-3 py-1",children:[" Try to Fix (",d.length,"/3 attempts)"]}),d.length>=3&&a.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:" Maximum fix attempts reached. The chart may have unsupported syntax."})]})]})}),l&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-t border-blue-300 dark:border-blue-700 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("svg",{className:"w-5 h-5 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Attempting to fix chart (attempt ",d.length+1,"/3)..."]})]})}),d.length>0&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>b(!x),className:"w-full px-4 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-750 flex items-center justify-between",children:[a.jsxs("span",{children:[" Chart Auto-Fix Details (",d.length," attempt",d.length>1?"s":"",")"]}),a.jsx("svg",{className:`w-4 h-4 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&a.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[d.map(ee=>a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded p-3 text-xs",children:[a.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Attempt ",ee.attemptNumber]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Error:"}),a.jsx("div",{className:"text-red-600 dark:text-red-400 font-mono text-[10px] break-all mt-1",children:ee.error})]}),ee.usage&&a.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LLM Usage:"}),a.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Provider:"}),a.jsx("div",{className:"font-medium",children:ee.usage.provider})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Model:"}),a.jsx("div",{className:"font-medium",children:ee.usage.model})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Tokens:"}),a.jsx("div",{className:"font-medium",children:ee.usage.total_tokens.toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Cost:"}),a.jsxs("div",{className:"font-medium text-green-600 dark:text-green-400",children:["$",ee.usage.cost.toFixed(6)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Duration:"}),a.jsxs("div",{className:"font-medium",children:[ee.usage.duration_ms,"ms"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Result:"}),a.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:ee.fixedChart?" Fixed":" Failed"})]})]})]})]})]},ee.attemptNumber)),d.some(ee=>ee.usage)&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 text-xs",children:[a.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:" Total Cost"}),a.jsxs("div",{className:"text-blue-800 dark:text-blue-300",children:["$",d.reduce((ee,W)=>ee+(W.usage?.cost||0),0).toFixed(6)," ","(",d.reduce((ee,W)=>ee+(W.usage?.total_tokens||0),0).toLocaleString()," tokens)"]})]})]})]}),y&&a.jsx(VI,{apiCalls:d.filter(ee=>ee.llmApiCall).map(ee=>ee.llmApiCall),onClose:()=>k(!1)})]})},Fde={...Zh,attributes:{...Zh.attributes,"*":["className","style","id"],a:["href","title","target","rel"],img:["src","alt","title","width","height"],table:["className"],td:["align","colspan","rowspan"],th:["align","colspan","rowspan"]},tagNames:[...Zh.tagNames||[],"table","thead","tbody","tr","th","td","tfoot","div","span","br","hr"]};function $de(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/shorts\/([^&\n?#]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function Ude({href:e,children:t}){const{addTracksToStart:r,playTrack:n}=bc(),s=$de(e),i=l=>{if(l.preventDefault(),s){const c=typeof t=="string"?t:`YouTube Video ${s}`;r([{videoId:s,title:c,url:e}]),setTimeout(()=>{n(0)},0)}};return a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:t}),a.jsxs("button",{onClick:i,className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors",title:"Play now",children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Play"]})]})}function zde({images:e}){const[t,r]=C.useState(null);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"image-gallery grid grid-cols-2 md:grid-cols-4 gap-4 my-6",children:e.map((n,s)=>a.jsxs("div",{className:"gallery-item cursor-pointer overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all hover:shadow-lg",onClick:()=>r(n.src),children:[a.jsx("img",{src:n.src,alt:n.alt,className:"w-full h-48 object-cover hover:scale-105 transition-transform",loading:"lazy"}),n.alt&&a.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 truncate",children:n.alt})]},s))}),t&&a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>r(null),children:[a.jsx("button",{className:"absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300",onClick:()=>r(null),"aria-label":"Close",children:""}),a.jsx("img",{src:t,alt:"Expanded view",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})]})}function Tu({content:e,className:t="",chartDescription:r,onLlmApiCall:n}){if(/^<img\s+[^>]*src="data:image\/[^"]+"/i.test(e.trim()))return a.jsx("div",{className:`markdown-content ${t}`,dangerouslySetInnerHTML:{__html:e}});let i=e.replace(/```html\n([\s\S]*?)\n```/g,(g,f)=>f.includes("<table")?`

${f.replace(/<table/g,'<table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700 border border-gray-300 dark:border-gray-700 my-4"').replace(/<th/g,'<th class="px-4 py-2 bg-gray-100 dark:bg-gray-800 font-semibold text-left border border-gray-300 dark:border-gray-700"').replace(/<td/g,'<td class="px-4 py-2 border border-gray-300 dark:border-gray-700"')}

`:g);const l=/<!-- GALLERY_START -->([\s\S]*?)<!-- GALLERY_END -->/g,c=l.exec(i);let d=i,h=[];if(c){const g=c[1],f=/!\[(.*?)\]\((.*?)\)/g;let x;for(;(x=f.exec(g))!==null;)h.push({alt:x[1],src:x[2]});d=e.replace(l,"").trim()}return a.jsxs("div",{className:`markdown-content ${t}`,children:[a.jsx(G3,{remarkPlugins:[wG],rehypePlugins:[qV,[eK,Fde],zX],components:{h1:({children:g})=>a.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-gray-900 dark:text-gray-100",children:g}),h2:({children:g})=>a.jsx("h2",{className:"text-xl font-bold mt-5 mb-3 text-gray-900 dark:text-gray-100",children:g}),h3:({children:g})=>a.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-100",children:g}),h4:({children:g})=>a.jsx("h4",{className:"text-base font-semibold mt-3 mb-2 text-gray-900 dark:text-gray-100",children:g}),p:({children:g})=>a.jsx("p",{className:"mb-4 leading-relaxed text-gray-800 dark:text-gray-200",children:g}),ul:({children:g})=>a.jsx("ul",{className:"list-disc list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:g}),ol:({children:g})=>a.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:g}),li:({children:g})=>a.jsx("li",{className:"ml-4",children:g}),code:({className:g,children:f,...x})=>{const b=!g,y=/language-(\w+)/.exec(g||"");if((y?y[1]:"")==="mermaid"&&!b){const S=String(f).replace(/\n$/,""),_=S.split(`
`)[0].trim(),T=r||`${_} diagram`;return a.jsx(Bde,{chart:S,description:T,onLlmApiCall:n})}return b?a.jsx("code",{className:"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-pink-600 dark:text-pink-400 text-sm font-mono",...x,children:f}):a.jsx("code",{className:`${g} text-sm`,...x,children:f})},pre:({children:g})=>g?.props?.className?.includes("language-mermaid")?g:a.jsx("pre",{className:"mb-4 p-4 rounded-lg bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:g}),a:({href:g,children:f})=>g&&(g.includes("youtube.com/watch")||g.includes("youtu.be/")||g.includes("youtube.com/embed/")||g.includes("youtube.com/shorts/"))&&g?a.jsx(Ude,{href:g,children:f}):a.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:f}),blockquote:({children:g})=>a.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4 text-gray-700 dark:text-gray-300",children:g}),table:({children:g})=>a.jsx("div",{className:"overflow-x-auto mb-4",children:a.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:g})}),thead:({children:g})=>a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:g}),tbody:({children:g})=>a.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:g}),tr:({children:g})=>a.jsx("tr",{children:g}),th:({children:g})=>a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:g}),td:({children:g})=>a.jsx("td",{className:"px-4 py-2 text-sm text-gray-800 dark:text-gray-200",children:g}),hr:()=>a.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-700"}),strong:({children:g})=>a.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",children:g}),em:({children:g})=>a.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",children:g}),img:({src:g,alt:f})=>{const x=typeof g=="string"&&g.trim()!==""?g:null;return x?a.jsx("img",{src:x,alt:f||"",className:"max-w-full h-auto rounded-lg my-4 border border-gray-200 dark:border-gray-700",loading:"lazy",onError:b=>{console.error("Image failed to load:",{src:x,alt:f}),b.target.style.display="none"}}):null}},children:d}),h.length>0&&a.jsx(zde,{images:h})]})}const gs={YOUTUBE_DOWNLOAD_START:"youtube_download_start",YOUTUBE_DOWNLOAD_PROGRESS:"youtube_download_progress",YOUTUBE_DOWNLOAD_COMPLETE:"youtube_download_complete",DOWNLOAD_START:"download_start",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_COMPLETE:"download_complete",METADATA:"metadata",CHUNKING_START:"chunking_start",CHUNK_READY:"chunk_ready",TRANSCRIBE_START:"transcribe_start",TRANSCRIBE_CHUNK_COMPLETE:"transcribe_chunk_complete",TRANSCRIBE_COMPLETE:"transcribe_complete",TRANSCRIPTION_STOPPED:"transcription_stopped",ERROR:"error"},gn={DOWNLOADING:"Downloading",CHUNKING:"Chunking",TRANSCRIBING:"Transcribing",COMPLETE:"Complete",STOPPED:"Stopped",ERROR:"Error"},Hde=({toolCallId:e,url:t,events:r,onStop:n})=>{const[s,i]=C.useState(!1),[l,c]=C.useState(!1),d=C.useMemo(()=>{let y=gn.DOWNLOADING,k=0,S=null,_="",T=0,N=1,I=null;r.length>0&&console.log(`[TranscriptionProgress] Processing ${r.length} events for ${e}:`,r.map(R=>({type:R.progress_type||R.data?.type,data:R.data})));for(const R of r)switch(R.progress_type||R.data?.type||""){case gs.YOUTUBE_DOWNLOAD_START:case gs.DOWNLOAD_START:y=gn.DOWNLOADING,k=0;break;case gs.YOUTUBE_DOWNLOAD_PROGRESS:case gs.DOWNLOAD_PROGRESS:y=gn.DOWNLOADING,k=R.data?.percent||0;break;case gs.YOUTUBE_DOWNLOAD_COMPLETE:case gs.DOWNLOAD_COMPLETE:y=gn.DOWNLOADING,k=100;break;case gs.METADATA:S=R.data||null;break;case gs.CHUNKING_START:y=gn.CHUNKING,N=R.data?.chunks||1,k=0;break;case gs.CHUNK_READY:y=gn.CHUNKING,T=R.data?.chunkIndex||0,N=R.data?.totalChunks||1,k=T/N*100;break;case gs.TRANSCRIBE_START:y=gn.TRANSCRIBING,T=R.data?.chunkIndex||0;break;case gs.TRANSCRIBE_CHUNK_COMPLETE:y=gn.TRANSCRIBING,R.data?.text&&(_+=(_?`

`:"")+R.data.text),T=R.data?.chunkIndex||0,N=R.data?.totalChunks||1,k=T/N*100;break;case gs.TRANSCRIBE_COMPLETE:y=gn.COMPLETE,k=100;break;case gs.TRANSCRIPTION_STOPPED:y=gn.STOPPED,T=R.data?.completedChunks||0,N=R.data?.totalChunks||1,k=N>0?T/N*100:0;break;case gs.ERROR:y=gn.ERROR,I=R.data?.error||"Unknown error";break}return{stage:y,progress:Math.min(100,Math.max(0,k)),metadata:S,partialText:_,currentChunk:T,totalChunks:N,error:I}},[r]),h=async()=>{c(!0);try{await n(e)}catch(y){console.error("Failed to stop transcription:",y)}finally{setTimeout(()=>c(!1),5e3)}},g=y=>{const k=Math.floor(y/3600),S=Math.floor(y%3600/60),_=y%60;return k>0?`${k}:${S.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`:`${S}:${_.toString().padStart(2,"0")}`},f=y=>{switch(y){case gn.DOWNLOADING:return"text-blue-600 dark:text-blue-400";case gn.CHUNKING:return"text-purple-600 dark:text-purple-400";case gn.TRANSCRIBING:return"text-green-600 dark:text-green-400";case gn.COMPLETE:return"text-green-700 dark:text-green-300";case gn.STOPPED:return"text-yellow-600 dark:text-yellow-400";case gn.ERROR:return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},x=y=>{switch(y){case gn.DOWNLOADING:return"bg-blue-500";case gn.CHUNKING:return"bg-purple-500";case gn.TRANSCRIBING:return"bg-green-500";case gn.COMPLETE:return"bg-green-600";case gn.STOPPED:return"bg-yellow-500";case gn.ERROR:return"bg-red-500";default:return"bg-gray-500"}},b=d.stage===gn.DOWNLOADING||d.stage===gn.CHUNKING||d.stage===gn.TRANSCRIBING;return a.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 mb-4 bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[d.metadata?.thumbnail&&a.jsx("img",{src:d.metadata.thumbnail,alt:"Video thumbnail",className:"w-24 h-16 object-cover rounded flex-shrink-0"}),a.jsx("div",{className:"flex-1 min-w-0",children:d.metadata?.title?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:d.metadata.title}),d.metadata.author&&a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:d.metadata.author}),d.metadata.duration&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Duration: ",g(d.metadata.duration)]})]}):a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t})}),b&&!l&&a.jsx("button",{onClick:h,className:"px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors flex-shrink-0",title:"Stop transcription",children:"Stop"}),l&&a.jsx("div",{className:"px-3 py-1 text-sm bg-gray-400 text-white rounded flex-shrink-0",children:"Stopping..."})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:`text-sm font-medium ${f(d.stage)}`,children:d.stage}),d.totalChunks>1&&b&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(Chunk ",d.currentChunk," of ",d.totalChunks,")"]}),b&&a.jsx("div",{className:"ml-auto",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full"})})]}),a.jsx("div",{className:"relative w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3",children:a.jsx("div",{className:`absolute left-0 top-0 h-full ${x(d.stage)} transition-all duration-300 ease-out`,style:{width:`${d.progress}%`}})}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:[d.progress.toFixed(0),"% complete"]}),d.error&&a.jsxs("div",{className:"mb-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-700 dark:text-red-300",children:["Error: ",d.error]}),d.partialText&&a.jsxs("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>i(!s),className:"flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors mb-2",children:[a.jsx("svg",{className:`w-4 h-4 transition-transform ${s?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),a.jsxs("span",{children:[s?"Hide":"Show"," Partial Transcript",d.totalChunks>1&&` (${d.currentChunk} of ${d.totalChunks} chunks)`]})]}),s&&a.jsx("div",{className:"max-h-60 overflow-y-auto bg-gray-50 dark:bg-gray-900 rounded p-3 text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.partialText})]}),d.stage===gn.COMPLETE&&a.jsxs("div",{className:"mt-3 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Transcription complete!"]}),d.stage===gn.STOPPED&&a.jsxs("div",{className:"mt-3 text-sm text-yellow-600 dark:text-yellow-400 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Transcription stopped (",d.currentChunk," of ",d.totalChunks," chunks completed)"]})]})},qde=({toolCallId:e,url:t,events:r})=>{if(!r||r.length===0)return null;const n=r[r.length-1],s=n.progress_type||n.data?.type||"",i=s==="scrape_complete"||s==="scrape_error",l=s==="scrape_error",c=[{type:"scrape_launching",icon:"",label:"Launching browser"},{type:"scrape_launched",icon:"",label:"Browser ready"},{type:"scrape_navigating",icon:"",label:"Loading page"},{type:"scrape_page_loaded",icon:"",label:"Page loaded"},{type:"scrape_extracting",icon:"",label:"Extracting content"},{type:"scrape_extracted",icon:"",label:"Content extracted"},{type:"scrape_complete",icon:"",label:"Complete"}],d=c.findIndex(_=>_.type===s),h=c[d]||c[0],g=r.find(_=>(_.progress_type||_.data?.type)==="scrape_extracted"),f=r.find(_=>(_.progress_type||_.data?.type)==="scrape_complete"),x=r.find(_=>(_.progress_type||_.data?.type)==="scrape_error"),b=g?.data?.textLength||f?.data?.textLength||0,y=g?.data?.linkCount||f?.data?.linkCount||0,k=g?.data?.imageCount||f?.data?.imageCount||0,S=f?.data?.totalTime||0;return a.jsxs("div",{className:`p-4 rounded-lg border ${l?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":i?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:h.icon}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:l?" Scraping Failed":i?" Scraping Complete":h.label}),a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate max-w-md",children:t})]})]}),S>0&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(S/1e3).toFixed(1),"s"]})]}),l&&x?.data?.error&&a.jsxs("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 rounded text-sm text-red-800 dark:text-red-200",children:[a.jsx("div",{className:"font-semibold mb-1",children:"Error:"}),a.jsx("div",{className:"text-xs font-mono",children:x.data.error})]}),!l&&a.jsx("div",{className:"mb-3",children:a.jsx("div",{className:"flex items-center gap-1",children:c.slice(0,-1).map((_,T)=>{const N=T<=d,I=T===d;return a.jsx(Gn.Fragment,{children:a.jsx("div",{className:`h-1 flex-1 rounded transition-all duration-300 ${N?I?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400":"bg-gray-300 dark:bg-gray-600"}`})},_.type)})})}),(b>0||y>0||k>0)&&a.jsxs("div",{className:"flex gap-4 text-xs text-gray-700 dark:text-gray-300",children:[b>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[b," chars"]})]}),y>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[y," links"]})]}),k>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[k," images"]})]})]}),!i&&r.length>1&&a.jsxs("details",{className:"mt-3",children:[a.jsxs("summary",{className:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",children:["Show timeline (",r.length," events)"]}),a.jsx("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:r.map((_,T)=>{const N=_.progress_type||_.data?.type||"",I=c.find(B=>B.type===N),R=_.timestamp?new Date(_.timestamp).toLocaleTimeString():"";return a.jsxs("div",{className:"text-xs flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:I?.icon||""}),a.jsx("span",{className:"flex-1",children:I?.label||N}),R&&a.jsx("span",{className:"text-[10px]",children:R})]},T)})})]})]})},Gde=({data:e})=>{switch(e.phase){case"searching":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Searching ",e.service==="tavily"?"Tavily":"DuckDuckGo","..."]})]});case"results_found":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Found results for: ",e.query]})]});case"loading_content":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Loading content from ",e.result_count," results..."]})]});case"fetching_result":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.url})]})]});case"result_loaded":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Loaded ",Math.round((e.content_size||0)/1024),"KB in ",e.fetch_time_ms,"ms"]})]})]});case"result_failed":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] Failed: ",e.title]}),a.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:e.error})]})]});default:return null}},Yde=({data:e})=>{switch(e.phase){case"searching":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Searching YouTube for: ",a.jsx("span",{className:"font-medium",children:e.query})]})]});case"results_found":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Found ",a.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," for: ",e.query]})]});case"complete":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" YouTube search complete - ",a.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," added to playlist"]})]});case"fetching_transcripts":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e.message||`Found ${e.totalVideos} videos, fetching transcripts...`]})]});case"fetching_transcript":const t=e.totalVideos&&e.currentVideo?Math.round(e.currentVideo/e.totalVideos*100):0;return a.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsxs("div",{className:"font-medium",children:[" ",e.message||`Fetching transcript ${e.currentVideo}/${e.totalVideos}`]}),e.videoId&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:["Video ID: ",e.videoId]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:[t,"% complete"]})]});case"transcript_fetched":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:e.message||"Transcript fetched"}),e.transcriptLength&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",e.transcriptLength.toLocaleString()," characters)"]})]})]});case"transcript_failed":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[a.jsx("span",{className:"font-medium",children:e.message||"Transcript unavailable"}),e.error&&a.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:e.error})]})]});default:return null}},Wde=({data:e})=>{switch(e.phase){case"starting":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Starting JavaScript execution (",e.code_length," characters, ",(e.timeout_ms||0)/1e3,"s timeout)..."]})]});case"executing":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:" Executing JavaScript code..."})]});case"console_output":return a.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-900/50 rounded text-sm font-mono border-l-4 border-purple-500",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsxs("span",{children:["Console Output #",e.output_number,":"]})]}),a.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.output})]});case"completed":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Execution completed",e.output_lines!==void 0&&e.output_lines>0&&a.jsxs("span",{className:"ml-1",children:["(",e.output_lines," console output",e.output_lines!==1?"s":"",")"]}),e.has_result&&!e.output_lines&&a.jsx("span",{className:"ml-1",children:"(returned value)"})]})]});case"error":return a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[a.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:" Execution Error"}),a.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-mono mt-1",children:e.error})]})]});default:return null}},Vde=({data:e})=>{const r=(()=>{switch(e.phase){case"analyzing_prompt":return{icon:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),label:"Analyzing prompt",description:e.prompt?`"${e.prompt.substring(0,60)}${e.prompt.length>60?"...":""}"`:"",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"quality_selected":return{icon:a.jsx("span",{className:"text-purple-500",children:""}),label:`Quality tier: ${e.quality||"standard"}`,description:e.quality==="ultra"?"Highest quality, slower generation":e.quality==="high"?"High quality output":e.quality==="standard"?"Balanced quality and speed":"Fast generation",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};case"selecting_provider":return{icon:a.jsx("span",{className:"text-indigo-500",children:""}),label:`Selected: ${e.provider||"provider"} ${e.model||""}`,description:`Size: ${e.size||"1024x1024"}  ${e.estimated_cost?`~$${e.estimated_cost.toFixed(4)}`:"Calculating cost..."}`,bgColor:"bg-indigo-50 dark:bg-indigo-900/20",textColor:"text-indigo-700 dark:text-indigo-300"};case"generating":const n=e.remaining_seconds??e.estimated_seconds??15,s=e.estimated_seconds&&e.remaining_seconds!==void 0?Math.min(100,Math.max(0,(e.estimated_seconds-e.remaining_seconds)/e.estimated_seconds*100)):0;return{icon:a.jsx("div",{className:"w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),label:"Generating image...",description:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{children:""}),a.jsx("span",{children:n>0?`~${n}s remaining`:"Finishing up..."})]}),e.estimated_seconds&&a.jsx("div",{className:"w-full bg-pink-200 dark:bg-pink-800 rounded-full h-1.5",children:a.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-1.5 rounded-full transition-all duration-1000 ease-linear",style:{width:`${s}%`}})}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.quality," quality  ",e.size]})]}),bgColor:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"completed":return{icon:a.jsx("span",{className:"text-green-500",children:""}),label:"Image generated successfully",description:`${e.provider}  ${e.quality} quality  ${e.size}${e.estimated_cost?`  $${e.estimated_cost.toFixed(4)}`:""}`,bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300"};case"error":return{icon:a.jsx("span",{className:"text-red-500",children:""}),label:"Image generation failed",description:e.error||"Unknown error occurred",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-700 dark:text-red-300"};default:return{icon:a.jsx("div",{className:"w-4 h-4 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),label:"Processing...",description:"",bgColor:"bg-gray-50 dark:bg-gray-900/20",textColor:"text-gray-700 dark:text-gray-300"}}})();return a.jsx("div",{className:`rounded-lg ${r.bgColor} p-3 shadow-sm`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`font-medium text-sm ${r.textColor}`,children:r.label}),r.description&&a.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:typeof r.description=="string"?a.jsx("span",{children:r.description}):r.description})]})]})})},Kde=({data:e})=>e.phase==="preparing"?a.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"font-medium text-sm text-blue-700 dark:text-blue-300",children:["Preparing ",e.chart_type||"chart"," diagram"]}),e.description&&a.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]})}):e.phase==="completed"?a.jsx("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3 shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-green-500",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"font-medium text-sm text-green-700 dark:text-green-300",children:[e.chart_type||"Chart"," diagram ready"]}),a.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Diagram will appear below"})]})]})}):null,Xde=({data:e})=>a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-sm space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Content Extracted"})]}),e.title&&a.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium truncate",children:e.title}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.format&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",a.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.format==="markdown"?" Markdown":" Plain Text"})]}),e.compressionRatio!=null&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",a.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Number(e.compressionRatio).toFixed(1),"x"]})]}),e.originalLength!==void 0&&e.extractedLength!==void 0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Size:"})," ",a.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[(e.originalLength/1024).toFixed(1),"KB  ",(e.extractedLength/1024).toFixed(1),"KB"]})]}),e.wordCount!==void 0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Words:"})," ",a.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.wordCount.toLocaleString()})]}),e.language&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language:"})," ",a.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.language})]}),e.duration!==void 0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"})," ",a.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]})]})]}),(e.images||e.videos||e.youtube||e.links)&&a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[(e.images??0)>0&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.images," ",e.images===1?"image":"images"]}),(e.videos??0)>0&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.videos," ",e.videos===1?"video":"videos"]}),(e.youtube??0)>0&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.youtube," YouTube ",e.youtube===1?"video":"videos"]}),(e.links??0)>0&&a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.links," ",e.links===1?"link":"links"]})]}),e.warning&&a.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:[" ",e.warning]})]}),zh=({data:e,level:t=0})=>{const[r,n]=Gn.useState(t<2);if(e===null)return a.jsx("span",{className:"text-gray-500",children:"null"});if(e===void 0)return a.jsx("span",{className:"text-gray-500",children:"undefined"});if(typeof e!="object")return typeof e=="string"?a.jsxs("span",{className:"text-green-600 dark:text-green-400",children:['"',e,'"']}):typeof e=="number"?a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e}):typeof e=="boolean"?a.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:String(e)}):a.jsx("span",{children:String(e)});const s=Array.isArray(e),i=s?e.map((l,c)=>c):Object.keys(e);return i.length===0?a.jsx("span",{className:"text-gray-500",children:s?"[]":"{}"}):a.jsxs("div",{className:"ml-4",children:[a.jsxs("button",{onClick:()=>n(!r),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r?"":""," ",s?`Array[${i.length}]`:`Object{${i.length}}`]}),r&&a.jsx("div",{className:"ml-4 border-l border-gray-300 dark:border-gray-600 pl-2",children:i.map(l=>a.jsxs("div",{className:"my-1",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-mono",children:String(l)}),a.jsx("span",{className:"text-gray-500",children:": "}),a.jsx(zh,{data:e[l],level:t+1})]},String(l)))})]})},Qde=({errorData:e,llmApiCalls:t,onClose:r})=>{const n=yc(!0,r),{showSuccess:s,showError:i}=$i();return a.jsx("div",{ref:n,className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[a.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Details"]}),a.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"space-y-4",children:[e?.message&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"Error Message"}),a.jsx("p",{className:"text-red-700 dark:text-red-300 font-mono text-sm whitespace-pre-wrap",children:e.message})]}),(e?.type||e?.code||e?.statusCode)&&a.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-200 mb-2",children:"Error Classification"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[e.type&&a.jsxs("div",{children:[a.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Type:"})," ",a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.type})]}),e.code&&a.jsxs("div",{children:[a.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Code:"})," ",a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.code})]}),e.statusCode&&a.jsxs("div",{children:[a.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Status Code:"})," ",a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.statusCode})]})]})]}),e?.stack&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Stack Trace"}),a.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap overflow-x-auto",children:e.stack})]}),(e?.errorType||e?.errorMessage)&&a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-300 dark:border-purple-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Lambda Error"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[e.errorType&&a.jsxs("div",{children:[a.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Type:"})," ",a.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorType})]}),e.errorMessage&&a.jsxs("div",{children:[a.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Message:"})," ",a.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorMessage})]})]})]}),(e?.error?.message||e?.error?.type||e?.error?.code)&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Upstream LLM Provider Error"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[e.error.message&&a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Message:"})," ",a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.message})]}),e.error.type&&a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Type:"})," ",a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.type})]}),e.error.code&&a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Code:"})," ",a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.code})]})]})]}),(e?.request||e?.requestId||e?.timestamp)&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Request Context"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[e.requestId&&a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request ID:"})," ",a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:e.requestId})]}),e.timestamp&&a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Timestamp:"})," ",a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(e.timestamp).toLocaleString()})]}),e.request&&a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request Data:"}),a.jsx("div",{className:"mt-1 bg-white dark:bg-gray-800 rounded p-2 max-h-48 overflow-auto",children:a.jsx(zh,{data:e.request})})]})]})]}),t&&t.length>0&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2",children:[a.jsx("span",{children:" LLM Request Details"}),a.jsxs("span",{className:"text-xs font-normal text-blue-600 dark:text-blue-400",children:["(",t.length," call",t.length!==1?"s":"",")"]})]}),a.jsx("div",{className:"space-y-3",children:t.map((l,c)=>{const d=l.response?.usage?.prompt_tokens||0,h=l.response?.usage?.completion_tokens||0,g=d+h;return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Model:"}),a.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded font-mono",children:l.model}),l.provider&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:l.provider})]}),l.phase&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:l.phase})]})]}),g>0&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Tokens:"}),a.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:[g.toLocaleString()," total"]}),a.jsxs("span",{className:"text-gray-400",children:["(",d.toLocaleString()," in, ",h.toLocaleString()," out)"]})]}),l.cost!==void 0&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Cost:"}),a.jsxs("span",{className:"text-green-600 dark:text-green-400 font-mono",children:["$",l.cost.toFixed(6)]})]}),l.timestamp&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Time:"}),a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(l.timestamp).toLocaleTimeString()})]}),l.httpStatus&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"HTTP Status:"}),a.jsx("span",{className:`font-mono ${l.httpStatus>=400?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:l.httpStatus})]}),l.request&&a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Request Details "}),a.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:a.jsx(zh,{data:l.request})})]}),l.response&&a.jsxs("details",{className:"mt-2",children:[a.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Response Details "}),a.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:a.jsx(zh,{data:l.response})})]})]})},c)})})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2 flex items-center justify-between",children:[a.jsx("span",{children:"Complete Error Object (Expandable Tree)"}),a.jsxs("button",{onClick:()=>{const l=JSON.stringify(e,null,2);navigator.clipboard.writeText(l).then(()=>s("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 flex items-center gap-1",title:"Copy full JSON to clipboard",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy JSON"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3 max-h-96 overflow-auto font-mono text-xs",children:a.jsx(zh,{data:e})})]})]})}),a.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>{const l=JSON.stringify(e,null,2);navigator.clipboard.writeText(l).then(()=>s("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"btn-secondary",children:"Copy Full JSON"}),a.jsx("button",{onClick:r,className:"btn-primary",children:"Close"})]})]})})},Jde=({isOpen:e,onClose:t,onTranscriptionComplete:r,accessToken:n,apiEndpoint:s})=>{const i=yc(e,t,!1),{providers:l}=s3(),[c,d]=C.useState(!1),[h,g]=C.useState(0),[f,x]=C.useState(""),[b,y]=C.useState(null),[k,S]=C.useState(!1),_=C.useRef(null),T=C.useRef(null),N=C.useRef(null),I=C.useRef([]),R=C.useRef(null),B=C.useRef(null),F=C.useRef(null),ae=C.useCallback(()=>{R.current&&cancelAnimationFrame(R.current),B.current&&clearTimeout(B.current),_.current&&_.current.state!=="inactive"&&_.current.stop(),F.current&&F.current.getTracks().forEach(j=>j.stop()),T.current&&T.current.state!=="closed"&&T.current.close().catch(j=>{console.warn("Failed to close AudioContext:",j)}),d(!1),g(0)},[]),G=async()=>{try{y(null),I.current=[];const j=await navigator.mediaDevices.getUserMedia({audio:!0});F.current=j;const U=new(window.AudioContext||window.webkitAudioContext);T.current=U;const O=U.createMediaStreamSource(j),q=U.createAnalyser();q.fftSize=256,N.current=q,O.connect(q);const V=new MediaRecorder(j);_.current=V,V.ondataavailable=ue=>{ue.data.size>0&&I.current.push(ue.data)},V.onstop=async()=>{const ue=new Blob(I.current,{type:"audio/webm"});await W(ue)},V.start(),d(!0),$(),J()}catch(j){console.error("Error starting recording:",j),y("Failed to access microphone. Please check permissions.")}},$=()=>{if(!N.current||!c)return;const j=new Uint8Array(N.current.frequencyBinCount);N.current.getByteFrequencyData(j);const U=j.reduce((q,V)=>q+V)/j.length,O=Math.min(U/128,1);g(O),R.current=requestAnimationFrame($)},J=()=>{if(!N.current)return;const j=new Uint8Array(N.current.frequencyBinCount);N.current.getByteFrequencyData(j);const U=j.reduce((V,ue)=>V+ue)/j.length,O=10,q=2e3;U<O?B.current||(B.current=setTimeout(()=>{console.log("Silence detected, stopping recording..."),ee()},q)):B.current&&(clearTimeout(B.current),B.current=null),c&&setTimeout(J,100)},ee=()=>{ae()},W=async j=>{if(!n){y("Not authenticated. Please sign in.");return}S(!0);const U=`web-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log(" Generated request ID for voice transcription:",U);const O=l.find(H=>H.type==="groq"),q=l.find(H=>H.type==="openai"),V=O?.apiKey||q?.apiKey||null,ue=O?"groq":q?"openai":null;console.log(" Transcription provider:",ue,"hasKey:",!!V);try{const H=new FormData;H.append("audio",j,"recording.webm"),V&&ue&&(H.append("apiKey",V),H.append("provider",ue));const z=`${s.replace("/openai/v1","")}/transcribe`;console.log("Transcribing audio:",{url:z,blobSize:j.size,blobType:j.type,hasToken:!!n,requestId:U,provider:ue,hasApiKey:!!V});const M=await fetch(z,{method:"POST",headers:{Authorization:`Bearer ${n}`,"X-Request-Id":U},body:H}),le=await M.json();if(!M.ok){let Ae="Unknown error";throw le.error?Ae=typeof le.error=="string"?le.error:JSON.stringify(le.error):M.statusText&&(Ae=M.statusText),console.error("Transcription failed:",{status:M.status,data:le}),new Error(`Transcription failed: ${Ae}`)}const me=le.text||le.transcription||"",Ee=le.llmApiCall||null;x(me),setTimeout(()=>{r(me,U,Ee),t()},500)}catch(H){console.error("Transcription error:",H);let D="Transcription failed";H instanceof TypeError&&H.message.includes("Failed to fetch")?(D="Network error: Could not reach transcription service. Check your internet connection and API endpoint configuration.",console.error("Network error details:",{message:H.message,apiEndpoint:s,transcribeUrl:`${s.replace("/openai/v1","")}/transcribe`})):H instanceof Error&&(D=H.message),y(D)}finally{S(!1)}};return C.useEffect(()=>(e||ae(),ae),[e,ae]),C.useEffect(()=>{e&&(x(""),y(null),!c&&!k&&G())},[e]),e?a.jsx("div",{ref:i,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:k?" Processing...":c?" Listening...":" Voice Input"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k?"Transcribing your audio...":c?"Speak now. Will auto-stop after 2 seconds of silence.":"Click start to begin recording"})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 flex items-end justify-center gap-1 p-4",children:[...Array(20)].map((j,U)=>{const O=Math.max(.1,h*(1-Math.abs(U-10)/10)*(.8+Math.random()*.4));return a.jsx("div",{className:`flex-1 rounded-t transition-all duration-100 ${c?h>.3?"bg-gradient-to-t from-green-500 to-green-300":"bg-gradient-to-t from-blue-500 to-blue-300":"bg-gray-400"}`,style:{height:`${O*100}%`,opacity:c?1:.3}},U)})}),c&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${h>.3?"bg-green-500/20 animate-pulse":"bg-blue-500/20"}`,children:a.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),a.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})})]})}),f&&a.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[a.jsx("strong",{children:"Transcription:"})," ",f]})}),b&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:a.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[a.jsx("strong",{children:"Error:"})," ",b]})}),a.jsxs("div",{className:"flex gap-3",children:[c&&!k&&a.jsxs("button",{onClick:ee,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),"Stop"]}),a.jsx("button",{onClick:t,disabled:k,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Processing...":"Cancel"})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 dark:text-gray-400",children:["Press ",a.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to cancel"]})]})}):null},GN=({data:e,title:t})=>{const[r,n]=C.useState(!1);return a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded",children:[a.jsxs("button",{onClick:()=>n(!r),className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[a.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:t}),a.jsx("svg",{className:`w-4 h-4 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("pre",{className:"p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(e,null,2)})]})},Zde=({data:e,accessToken:t,providerApiKeys:r,onCopy:n,onGrab:s,onLlmInfo:i,onStatusChange:l})=>{console.log(" GeneratedImageBlock render:",{status:e.status,hasImageUrl:!!e.imageUrl,hasBase64:!!e.base64,data:e});const[c,d]=C.useState(!1),[h,g]=C.useState(null),[f,x]=C.useState(!1),[b,y]=C.useState(!1),[k,S]=C.useState(!1),_=F=>{switch(F.toLowerCase()){case"openai":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300";case"together":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";case"replicate":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300";case"gemini":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},T=F=>{switch(F.toLowerCase()){case"openai":return"OpenAI";case"together":return"Together AI";case"replicate":return"Replicate";case"gemini":return"Google Gemini";default:return F}},N=async()=>{if(!t){g("Authentication required");return}d(!0),g(null),l?.(e.id,"generating");try{const F=await FA(e.prompt,e.provider,e.model,e.modelKey||"",e.size||"",e.qualityTier||"",e.style||"",t,r);if(F.success&&F.imageUrl){let ae=F.imageUrl;F.base64&&!F.base64.startsWith("data:")?ae=`data:image/png;base64,${F.base64}`:F.base64&&(ae=F.base64),l?.(e.id,"complete",ae,F.llmApiCall)}else{const ae=F.error||"Image generation failed";g(ae),l?.(e.id,"error")}}catch(F){const ae=F instanceof Error?F.message:"Image generation failed";g(ae),l?.(e.id,"error")}finally{d(!1)}},I=()=>{e.imageUrl&&n&&n(e.imageUrl)},R=()=>{if(e.imageUrl&&s){const F=`![${e.prompt.substring(0,100)}](${e.imageUrl})`;s(F)}},B=()=>{e.llmApiCall&&i&&i(e.llmApiCall)};return e.status==="pending"||!e.imageUrl&&!c&&!h?a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:N,disabled:c,className:"btn-primary flex items-center justify-center gap-2 py-3",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsxs("span",{children:["Generate Image for $",e.cost.toFixed(4)]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(e.provider)}`,children:T(e.provider)}),a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:e.model}),e.qualityTier&&a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:e.qualityTier}),e.size&&a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",children:e.size})]}),e.constraints&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>x(!f),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[a.jsx("svg",{className:`w-4 h-4 transform transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),a.jsx("span",{children:"Model Constraints"})]}),f&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1 pl-6",children:[e.constraints.maxSize&&a.jsxs("div",{children:[" Max size: ",e.constraints.maxSize]}),e.constraints.supportedSizes&&e.constraints.supportedSizes.length>0&&a.jsxs("div",{children:[" Supported sizes: ",e.constraints.supportedSizes.join(", ")]}),e.constraints.supportsStyle!==void 0&&a.jsxs("div",{children:[" Style support: ",e.constraints.supportsStyle?"Yes":"No"]})]})]}),e.availableAlternatives&&e.availableAlternatives.length>0&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[a.jsxs("button",{onClick:()=>y(!b),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[a.jsx("svg",{className:`w-4 h-4 transform transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),a.jsxs("span",{children:["Available Alternatives (",e.availableAlternatives.length,")"]})]}),b&&a.jsx("div",{className:"mt-2 space-y-2 pl-6",children:e.availableAlternatives.map((F,ae)=>a.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${_(F.provider)}`,children:T(F.provider)}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:F.model})]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["$",F.cost.toFixed(4)]})]},ae))})]})]})}):c||e.status==="generating"?a.jsx("div",{className:"bg-white dark:bg-gray-800 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Generating image with ",T(e.provider),"..."]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This may take a few seconds"})]})]})}):h||e.status==="error"?a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-red-900 dark:text-red-200",children:"Image Generation Failed"}),a.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h||e.error||"An unknown error occurred"}),a.jsxs("button",{onClick:N,className:"mt-3 btn-secondary text-sm flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Retry"})]})]})]})}):e.status==="complete"&&e.imageUrl?a.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[e.fallbackUsed&&a.jsxs("div",{className:"mx-4 mt-4 mb-2 flex items-center gap-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded px-3 py-2",children:[a.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Primary provider unavailable, fallback provider used"})]}),k&&a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 mb-3",children:" IMAGE GENERATION DETAILS"}),a.jsx("table",{className:"w-full text-sm mb-4",children:a.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Title"}),a.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:"Generated Image"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Final Prompt"}),a.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100 break-words",children:e.revisedPrompt||e.prompt})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Size"}),a.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.size||"1024x1024"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Model"}),a.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.model})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Provider"}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(e.provider)}`,children:T(e.provider)})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Quality"}),a.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.qualityTier||"standard"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Cost"}),a.jsxs("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:["$",e.cost.toFixed(4)]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Status"}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Success"})})]})]})}),e.llmApiCall&&a.jsxs("div",{className:"space-y-3",children:[e.llmApiCall.request&&a.jsx(GN,{data:e.llmApiCall.request,title:"Request Data"}),e.llmApiCall.response&&a.jsx(GN,{data:e.llmApiCall.response,title:"Response Data"})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:e.imageUrl,alt:e.prompt,className:"w-full"}),a.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n&&a.jsx("button",{onClick:I,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy image URL",children:a.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s&&a.jsx("button",{onClick:R,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy as markdown",children:a.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]}),a.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>S(!k),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[a.jsx("svg",{className:`w-4 h-4 transform transition-transform ${k?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),a.jsxs("span",{className:"font-medium",children:[k?"Hide":"Show"," Details"]})]}),i&&e.llmApiCall&&a.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 border border-gray-300 dark:border-gray-600 rounded transition-colors",title:"View LLM call details",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{children:"LLM Info"})]})]})]}):null},Tg=({data:e,level:t=0,expanded:r=!1,expandPaths:n=[],currentPath:s="",expandAll:i=!1})=>{const l=i||r||n.some(y=>s===y||s.startsWith(y+".")),[c,d]=C.useState(l),g=(y=>y===null?"null":Array.isArray(y)?"array":typeof y)(e);if(g!=="object"&&g!=="array")return a.jsx("span",{className:`json-value json-${g}`,children:g==="string"?`"${e}"`:String(e)});const f=Array.isArray(e)?e.map((y,k)=>[k,y]):Object.entries(e),x=f.length===0,b=Array.isArray(e)?`Array(${e.length})`:`Object{${f.length}}`;return a.jsxs("div",{className:"json-tree",children:[a.jsxs("div",{className:"json-line",children:[!x&&a.jsx("button",{onClick:()=>d(!c),className:"json-toggle","aria-label":c?"Collapse":"Expand",children:c?"":""}),a.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"[":"{"}),!c&&!x&&a.jsxs("span",{className:"json-preview",children:[" ",b," "]}),!c&&a.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"]":"}"})]}),c&&a.jsxs("div",{className:"json-content",style:{marginLeft:`${t*20+20}px`},children:[f.map(([y,k],S)=>{const _=s?`${s}.${y}`:String(y);return a.jsxs("div",{className:"json-item",children:[!Array.isArray(e)&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"json-key",children:['"',y,'"']}),a.jsx("span",{className:"json-colon",children:": "})]}),a.jsx(Tg,{data:k,level:t+1,expanded:!1,expandPaths:n,currentPath:_,expandAll:i}),S<f.length-1&&a.jsx("span",{className:"json-comma",children:","})]},y)}),a.jsx("div",{style:{marginLeft:"-20px"},className:"json-bracket",children:Array.isArray(e)?"]":"}"})]})]})},Uv=e=>{if(typeof e!="string")return!1;const t=e.trim();if(!t||!(t.startsWith("{")||t.startsWith("[")))return!1;try{const r=JSON.parse(t);return typeof r=="object"&&r!==null}catch{return!1}},KI=e=>{try{return JSON.parse(e.trim())}catch{return null}},ehe=({content:e,className:t=""})=>{if(Uv(e)){const r=KI(e);if(r!==null)return a.jsx("div",{className:`json-container ${t}`,children:a.jsx(Tg,{data:r,expanded:!1})})}return a.jsx("div",{className:t,children:e})},the=({images:e,maxDisplay:t=3,onImageClick:r,onGrabImage:n})=>{const[s,i]=C.useState(new Set),c=e.map(h=>typeof h=="string"?{src:h,alt:void 0}:h).slice(0,t);if(!e||e.length===0)return null;const d=(h,g,f)=>{h.stopPropagation(),n?.(g,f)};return a.jsx("div",{className:"my-4 flex gap-2 flex-wrap",children:c.map((h,g)=>s.has(g)?null:a.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors w-32 h-32",children:[a.jsx("img",{src:h.src,alt:h.alt||`Search result ${g+1}`,className:"w-full h-full object-cover cursor-pointer",loading:"lazy",onError:()=>i(f=>new Set(f).add(g)),onClick:()=>r?.(h.src)}),n&&a.jsx("button",{onClick:f=>d(f,h.src,h.alt||`Search result ${g+1}`),className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded shadow-lg z-10",title:"Add to SWAG",children:" Grab"})]},`${h.src}-${g}`))})},rhe=({selectedSnippetIds:e,onSelectionChange:t,userEmail:r})=>{const{getToken:n}=Os(),{snippets:s,getAllTags:i}=jg(),[l,c]=C.useState("text"),[d,h]=C.useState(""),[g,f]=C.useState(""),[x,b]=C.useState([]),[y,k]=C.useState(!1),[S,_]=C.useState(!1),[T,N]=C.useState([]),[I,R]=C.useState(.5);C.useEffect(()=>{const j=()=>{const O=localStorage.getItem("rag_config");if(O)try{const q=JSON.parse(O);q.similarityThreshold!==void 0&&R(q.similarityThreshold)}catch(q){console.error("Failed to parse RAG config:",q)}};j();const U=()=>j();return window.addEventListener("rag_config_updated",U),()=>{window.removeEventListener("rag_config_updated",U)}},[]);const B=async()=>{if(g.trim()){k(!0),_(!0);try{const j=await Ca(),U=await n(),O=await fetch(`${j}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...U?{Authorization:`Bearer ${U}`}:{}},body:JSON.stringify({query:g})});if(!O.ok)throw new Error("Failed to get query embedding");const{embedding:q}=await O.json(),V=await Va.vectorSearch(q,20,I);console.log(` Vector search found ${V.length} results with threshold ${I}`),b(V)}catch(j){console.error("Vector search error:",j),alert("Vector search failed. Make sure snippets have embeddings generated.")}finally{k(!1)}}},F=()=>{let j=s;if(T.length>0&&(j=j.filter(U=>T.every(O=>U.tags?.includes(O)))),l==="text"&&d.trim()){const U=d.toLowerCase();j=j.filter(O=>O.title?.toLowerCase().includes(U)||O.content.toLowerCase().includes(U))}else if(l==="vector"&&S){const U=new Set(x.map(O=>String(O.snippet_id)));j=j.filter(O=>U.has(O.id))}return j},ae=j=>{if(l!=="vector"||!S)return null;const U=x.find(O=>String(O.snippet_id)===j);return U?U.score:null},G=j=>{const U=new Set(e);U.has(j)?U.delete(j):U.add(j),t(U)},$=()=>{const j=F(),U=new Set;j.forEach(O=>U.add(O.id)),t(U)},J=()=>{t(new Set)},ee=F(),W=i();return a.jsxs("div",{className:"snippet-selector flex flex-col h-full bg-gray-50 dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:" Attach Context"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size>0&&`${e.size} selected`})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:$,disabled:ee.length===0,className:"px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Select All"}),a.jsx("button",{onClick:J,disabled:e.size===0,className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800",children:a.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[" Select snippets to include as ",a.jsx("strong",{children:"full context"})," in your message. Unlike automatic RAG which finds relevant fragments, selected snippets are included in their entirety."]})}),a.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{c("text"),_(!1),b([])},className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="text"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Text Search"}),a.jsx("button",{onClick:()=>c("vector"),className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${l==="vector"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Semantic Search"})]})}),a.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-2",children:[l==="text"?a.jsx("input",{type:"text",placeholder:"Search by title or content...",value:d,onChange:j=>h(j.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Enter semantic search query...",value:g,onChange:j=>f(j.target.value),onKeyDown:j=>j.key==="Enter"&&B(),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{onClick:B,disabled:y||!g.trim(),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"":""})]}),l==="vector"&&S&&a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Found ",x.length," results with similarity  ",I.toFixed(2)]})]}),W.length>0&&a.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[a.jsx("div",{className:"flex flex-wrap gap-1.5",children:W.map(j=>a.jsx("button",{onClick:()=>{N(U=>U.includes(j)?U.filter(O=>O!==j):[...U,j])},className:`px-2 py-1 text-xs rounded transition-colors ${T.includes(j)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:j},j))}),T.length>0&&a.jsx("button",{onClick:()=>N([]),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear tag filters"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:ee.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:s.length===0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm font-medium",children:"No snippets in knowledge base"}),a.jsx("p",{className:"text-xs mt-2",children:"Visit the Swag page to add snippets"})]}):l==="vector"&&!S?a.jsx("p",{className:"text-sm",children:"Enter a query and click Search to find semantically similar snippets"}):a.jsx("p",{className:"text-sm",children:"No snippets match your filters"})}):ee.map(j=>{const U=e.has(j.id),O=ae(j.id);return a.jsx("div",{onClick:()=>G(j.id),className:`border rounded p-3 cursor-pointer transition-all ${U?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-700 hover:shadow-md"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",checked:U,onChange:()=>{},className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:j.title||"Untitled"}),O!==null&&a.jsxs("span",{className:"text-xs font-mono text-blue-600 dark:text-blue-400 whitespace-nowrap",children:[(O*100).toFixed(1),"%"]})]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:j.content}),j.tags&&j.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:j.tags.map(q=>a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:q},q))}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx("span",{className:"capitalize",children:j.sourceType}),j.hasEmbedding&&a.jsx("span",{title:"Has embeddings",children:""})]})]})]})},j.id)})}),a.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900",children:a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:" Tip: Click a snippet to toggle selection. Selected snippets will be included as context when you send your message."})})]})},zv=({text:e,variant:t="icon",size:r="md",onStart:n,onEnd:s,shouldSummarize:i=!1,className:l=""})=>{const{state:c,speak:d,stop:h}=nm(),[g,f]=C.useState(!1),x=c.isPlaying||g;console.log("ReadButton render - isReading:",x,"state.isPlaying:",c.isPlaying,"localIsReading:",g),C.useEffect(()=>{f(c.isPlaying)},[c.isPlaying]),C.useEffect(()=>{g&&!c.isPlaying&&(console.log("ReadButton: Syncing local state with global state"),f(!1))},[g,c.isPlaying]);const b=C.useCallback(async()=>{if(x)console.log("ReadButton: Stop clicked"),f(!1),h(),s?.();else{console.log("ReadButton: Start clicked"),f(!0),n?.();try{await d(e,{shouldSummarize:i,onStart:()=>{console.log("TTS started"),f(!0)},onEnd:()=>{console.log("TTS ended"),f(!1),s?.()},onError:T=>{console.error("TTS error in callback:",T),f(!1)}})}catch(T){console.error("TTS error:",T),f(!1),s?.()}}},[x,e,i,d,h,n,s]);if(!c.isEnabled)return null;const y={sm:{icon:"w-4 h-4",button:"px-2 py-1 text-xs",fab:"w-10 h-10"},md:{icon:"w-5 h-5",button:"px-3 py-1.5 text-sm",fab:"w-12 h-12"},lg:{icon:"w-6 h-6",button:"px-4 py-2 text-base",fab:"w-16 h-16"}},k=y[r].icon,S=()=>a.jsx("svg",{className:k,fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),_=()=>a.jsx("svg",{className:k,fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})});return t==="icon"?a.jsx("button",{onClick:b,className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${l}`,title:x?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:c.isPlaying&&!x,children:x?a.jsx(_,{}):a.jsx(S,{})}):t==="button"?a.jsx("button",{onClick:b,className:`${y[r].button} rounded-lg flex items-center gap-2 transition-colors ${x?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} ${l}`,title:x?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:c.isPlaying&&!x,children:x?a.jsxs(a.Fragment,{children:[a.jsx(_,{}),"Stop"]}):a.jsxs(a.Fragment,{children:[a.jsx(S,{}),"Read"]})}):t==="fab"?a.jsx("button",{onClick:b,className:`${y[r].fab} fixed bottom-20 right-6 rounded-full shadow-lg flex items-center justify-center z-40 transition-colors ${x?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white ${l}`,title:x?"Stop reading":"Read aloud",disabled:c.isPlaying&&!x,children:x?a.jsx(_,{}):a.jsx(S,{})}):null},nhe=()=>{const{state:e,stop:t}=nm();return e.isPlaying?a.jsxs("button",{onClick:t,className:"fixed top-4 right-20 z-[60] px-4 py-2 bg-red-600 text-white rounded-lg shadow-lg hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Reading"]}):null},YN=({rawResponse:e,extractionMetadata:t})=>{const[r,n]=C.useState(null);let s=null,i=[];try{e&&(s=JSON.parse(e),s.results&&Array.isArray(s.results)&&(i=s.results))}catch(l){console.log("Failed to parse rawResponse:",l)}return console.log(" ToolTransparency received:",{hasRawResponse:!!e,rawResponseLength:e?.length,hasExtraction:!!t,parsedResults:i.length,rawResponsePreview:e?e.substring(0,100)+"...":"none"}),!e&&!t?(console.log(" ToolTransparency: No data, returning null"),null):(console.log(" ToolTransparency: Rendering with",i.length,"results"),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-3 pt-3 border-t-4 border-purple-400 dark:border-purple-600 bg-purple-50 dark:bg-purple-950 p-3 rounded",children:[a.jsxs("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:[" Search Results Transparency",a.jsxs("span",{className:"text-xs font-normal opacity-75",children:["(",i.length," results)"]})]}),a.jsxs("div",{className:"space-y-4",children:[i.map((l,c)=>{const d=l.rawHtml||l.rawContent||"",h=l.content||"";return a.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[a.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:["Result ",c+1,": ",l.title||l.url]}),d&&a.jsx("div",{className:"mb-3",children:a.jsxs("button",{onClick:()=>n({content:d,title:`Raw Content: ${l.title||l.url}`}),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded flex items-center gap-2",children:[" View Full Raw Scraped Content",a.jsxs("span",{className:"opacity-75",children:["(",d.length.toLocaleString()," chars)"]})]})}),h&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1 flex items-center gap-2",children:[" Content Sent to LLM",a.jsxs("span",{className:"opacity-75",children:["(",h.length.toLocaleString()," chars)"]})]}),a.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-300 dark:border-green-700 rounded p-3 max-h-96 overflow-y-auto",children:a.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:a.jsx(G3,{children:h})})})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-400 mb-1",children:" Parsed Page Structure & Metadata"}),a.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:a.jsx(Zu,{data:{url:l.url,title:l.title,snippet:l.snippet,images:l.page_content?.images||l.images||[],youtube:l.youtube||[],media:l.media||[],links:l.links||[],page_content:l.page_content,summary:l.page_content?.summary,structure:l.page_content?.structure,metadata:{contentLength:h.length,rawContentLength:d.length,hasImages:!!(l.page_content?.images?.length||l.images?.length),hasYouTube:!!l.youtube?.length,hasMedia:!!l.media?.length,hasLinks:!!l.links?.length}}})})]})]},c)}),t&&a.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[a.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:" Overall Extraction Metadata"}),a.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:a.jsx(Zu,{data:t})})]})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:r.title}),a.jsx("button",{onClick:()=>n(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm",children:" Close"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 font-mono",children:r.content})}),a.jsxs("div",{className:"p-4 border-t border-gray-300 dark:border-gray-700 flex gap-2",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.content),alert("Copied to clipboard!")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:" Copy to Clipboard"}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[r.content.length.toLocaleString()," characters"]})]})]})})]}))},WN=({content:e,chartCode:t})=>{const[r,n]=Gn.useState(!1),[s,i]=Gn.useState(!1);try{const l=typeof e=="string"?JSON.parse(e):e,d=t||(f=>{if(!f)return null;const x=f.match(/```mermaid\s*([\s\S]*?)```/);if(x&&x[1]){const b=x[1].trim();return b.includes("[Your Mermaid diagram code here]")||b.includes("Your Mermaid diagram code here")?null:b}return null})(l.instructions||""),h=()=>{l.instructions&&navigator.clipboard.writeText(l.instructions).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},g=()=>{d&&navigator.clipboard.writeText(d).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)})};return a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-950/30 dark:to-indigo-950/30 rounded-lg border border-purple-200 dark:border-purple-700 overflow-hidden",children:a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[a.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 w-32 bg-purple-100/50 dark:bg-purple-900/30",children:" Chart Type"}),a.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded-full text-xs font-medium border border-purple-300 dark:border-purple-600",children:l.chart_type||"N/A"})})]}),a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[a.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30",children:" Description"}),a.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:l.description||"N/A"})]}),d&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[a.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Chart Code"}),a.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[a.jsx("button",{onClick:g,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy Mermaid code to clipboard",children:s?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})}),a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-gray-900 dark:bg-gray-950 text-green-400 dark:text-green-300 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:d})]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Full Instructions"}),a.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[a.jsx("button",{onClick:h,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy full instructions to clipboard",children:r?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy All"]})}),a.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:l.instructions||"No instructions available"})]})]})]})})})}catch(l){return console.error("Error parsing generate_chart result:",l),a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:typeof e=="string"?e:JSON.stringify(e,null,2)})}},ahe=({videos:e,onOpenPlayer:t})=>{const{playTrack:r,addTracksToStart:n}=bc(),s=i=>{n([{videoId:i.videoId,title:i.title,url:i.url,thumbnail:i.thumbnail,channel:i.channel,duration:i.duration}]),setTimeout(()=>{r(0),t&&t()},0)};return e.length===0?null:a.jsxs("div",{className:"youtube-video-results my-4 space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:[" YouTube Videos (",e.length,")"]}),e.map((i,l)=>a.jsxs("div",{onClick:()=>s(i),className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors cursor-pointer",children:[i.thumbnail&&a.jsxs("div",{className:"flex-shrink-0 relative",children:[a.jsx("img",{src:i.thumbnail,alt:i.title,className:"w-32 h-20 object-cover rounded"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"bg-black bg-opacity-60 rounded-full p-2",children:a.jsx("span",{className:"text-white text-2xl",children:""})})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:i.title}),i.channel&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:i.channel}),i.description&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description}),i.duration&&a.jsxs("span",{className:"inline-block text-xs text-gray-500 dark:text-gray-500 mt-1",children:[" ",i.duration]})]}),a.jsx("div",{className:"flex-shrink-0 flex items-center",children:a.jsxs("button",{onClick:c=>{c.stopPropagation(),s(i)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Play video",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-sm font-medium",children:"Play"})]})})]},i.videoId||l)),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:" All videos have been added to your playlist"})]})},she=({results:e})=>{const[t,r]=C.useState(new Set),[n,s]=C.useState(new Set),i=c=>{r(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),h})},l=c=>{s(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),h})};return!e||e.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200",children:[" Search Results (",e.length,")"]}),e.map((c,d)=>{const h=t.has(d),g=n.has(d),f={url:c.url,title:c.title,description:c.description,score:c.score,duckduckgoScore:c.duckduckgoScore,state:c.state,contentLength:c.contentLength,fetchTimeMs:c.fetchTimeMs,originalLength:c.originalLength,intelligentlyExtracted:c.intelligentlyExtracted,truncated:c.truncated,images_count:c.images?.length||0,youtube_count:c.youtube?.length||0,media_count:c.media?.length||0,links_count:c.links?.length||0,contentError:c.contentError};return a.jsxs("div",{className:"border border-purple-200 dark:border-purple-700 rounded-lg p-3 bg-purple-50/30 dark:bg-purple-900/10",children:[a.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[a.jsxs("span",{className:"flex-shrink-0 text-purple-600 dark:text-purple-400 font-bold text-sm",children:["#",d+1]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 text-sm mb-1",children:c.title||`Result ${d+1}`}),c.url&&a.jsx("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block",children:c.url})]})]}),(c.description||c.snippet)&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2 italic",children:c.description||c.snippet}),c.contentError&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2 mb-2",children:a.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:[" ",c.contentError]})}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[c.contentLength!==void 0&&a.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded",children:[(c.contentLength/1024).toFixed(1)," KB"]}),c.fetchTimeMs!==void 0&&a.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded",children:[c.fetchTimeMs,"ms"]}),c.images&&c.images.length>0&&a.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded",children:[" ",c.images.length]}),c.links&&c.links.length>0&&a.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 rounded",children:[" ",c.links.length]}),c.truncated&&a.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded",children:" Truncated"})]}),a.jsxs("div",{className:"flex gap-2",children:[c.content&&a.jsxs("button",{onClick:()=>i(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors font-medium",children:[a.jsx("span",{children:h?"":""}),a.jsx("span",{children:"Content Sent to LLM"}),c.originalLength&&a.jsxs("span",{className:"opacity-75",children:["(",(c.originalLength/1024).toFixed(1)," KB)"]})]}),a.jsxs("button",{onClick:()=>l(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors font-medium",children:[a.jsx("span",{children:g?"":""}),a.jsx("span",{children:"Metadata JSON"})]})]}),h&&c.content&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-800 dark:text-purple-200 mb-2",children:[" Content Sent to LLM:",c.intelligentlyExtracted&&a.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:" Intelligently Extracted"})]}),a.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-700 p-3 max-h-96 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 leading-relaxed font-mono",children:c.content})})]}),g&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[a.jsx("div",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Scrape Metadata:"}),a.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-96 overflow-y-auto",children:a.jsx(Tg,{data:f})})]})]},d)})]})},ihe=({isOpen:e,onClose:t,onExampleClick:r,location:n,locationLoading:s,requestLocation:i,clearLocation:l})=>{if(!e)return null;const c=d=>{r(d),t()};return Gn.useEffect(()=>{const d=h=>{h.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:t,children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" Example Prompts"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"overflow-y-auto p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Search & Research"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("What are the latest developments in artificial intelligence this week?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Latest AI developments"}),a.jsx("button",{onClick:()=>c("Find current news about climate change policy updates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Climate change policy news"}),a.jsx("button",{onClick:()=>c("What is the current stock price of Tesla and recent news about the company?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Stock price lookup with news"}),a.jsx("button",{onClick:()=>c("Search for recent scientific breakthroughs in quantum computing"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scientific research updates"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" YouTube Search & Transcripts"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Find YouTube videos about TypeScript best practices"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search YouTube videos"}),a.jsx("button",{onClick:()=>c("Get transcript with timestamps from https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Get YouTube transcript (with timestamps)"}),a.jsx("button",{onClick:()=>c("Find the top 5 Python tutorial videos and summarize their content"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search + batch summarize videos"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 3 YouTube tools available"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Audio/Video Transcription (Whisper AI)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Transcribe this: http://localhost:3000/samples/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:" Local Dev: AI & ML discussion (~4min)"}),a.jsx("button",{onClick:()=>c("Transcribe this: https://llmproxy-media-samples.s3.amazonaws.com/audio/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe: AI & ML discussion (~4min)"}),a.jsx("button",{onClick:()=>c("Transcribe this YouTube video: https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe YouTube video"}),a.jsx("button",{onClick:()=>c("Transcribe this audio file: https://llmproxy-media-samples.s3.amazonaws.com/audio/hello-test.wav and summarize it"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe + auto-summarize"}),a.jsxs("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:[" OpenAI Whisper with progress tracking",a.jsx("br",{})," Local dev example only works with localhost backend"]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Math & Calculations (JavaScript Sandbox)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Calculate compound interest on $10,000 at 7% annual rate for 15 years"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compound interest calculator"}),a.jsx("button",{onClick:()=>c("Generate a multiplication table for numbers 1-12"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Multiplication table"}),a.jsx("button",{onClick:()=>c("Calculate the Fibonacci sequence up to the 20th number"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Fibonacci sequence"}),a.jsx("button",{onClick:()=>c("Convert 100 USD to EUR, GBP, and JPY at current exchange rates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Currency conversion"}),a.jsx("button",{onClick:()=>c("Calculate my BMI if I weigh 70kg and am 175cm tall"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"BMI calculator"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Secure sandbox execution"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Charts & Diagrams (Mermaid.js)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Create a flowchart showing the software development lifecycle from planning to deployment"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Flowchart: Dev lifecycle"}),a.jsx("button",{onClick:()=>c("Show a sequence diagram for user authentication with OAuth 2.0"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Sequence: OAuth flow"}),a.jsx("button",{onClick:()=>c("Generate a Gantt chart for a 3-month web app project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Gantt: Project timeline"}),a.jsx("button",{onClick:()=>c("Create a class diagram for an e-commerce system with User, Order, and Product"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Class diagram: E-commerce"}),a.jsx("button",{onClick:()=>c("Show a state diagram for an order processing system"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"State diagram: Order processing"}),a.jsx("button",{onClick:()=>c("Create an ER diagram for a blog database with Users, Posts, Comments"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"ER diagram: Blog schema"}),a.jsx("button",{onClick:()=>c("Show a pie chart of renewable energy distribution: Solar 30%, Wind 35%, Hydro 25%, Geo 10%"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Pie chart: Energy sources"}),a.jsx("button",{onClick:()=>c("Create a mindmap for planning a mobile app development project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Mindmap: App planning"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 9 chart types with auto-fix"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Scraping & Content Extraction"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Scrape and summarize https://news.ycombinator.com"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: Hacker News"}),a.jsx("button",{onClick:()=>c("Extract key points from https://en.wikipedia.org/wiki/Artificial_intelligence"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Extract: Wikipedia article"}),a.jsx("button",{onClick:()=>c("Get the full documentation from https://react.dev/learn"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: React docs"}),a.jsx("button",{onClick:()=>c("Analyze this GitHub repo: https://github.com/microsoft/TypeScript"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: GitHub repository"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Universal scraper"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Browser Automation (Selenium)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Scrape https://www.linkedin.com/login and tell me what you see - this requires login"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: LinkedIn"}),a.jsx("button",{onClick:()=>c("Access https://twitter.com/home and get the latest tweets - requires authentication"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Twitter/X"}),a.jsx("button",{onClick:()=>c("Get content from https://www.instagram.com/instagram/ - login needed to view posts"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Instagram"}),a.jsx("button",{onClick:()=>c("Scrape https://www.google.com/recaptcha/api2/demo and complete the captcha challenge"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: Google reCAPTCHA v2"}),a.jsx("button",{onClick:()=>c("Access https://2captcha.com/demo/recaptcha-v2 and solve the captcha"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: reCAPTCHA Demo Site"}),a.jsx("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-400 italic",children:" Opens browser for manual login/CAPTCHA solving"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Tier 3/4: Selenium with interactive mode (local only)"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400",children:" Location-Based Services"}),a.jsx("button",{onClick:async()=>{n?l():await i()},className:`px-2 py-1 text-xs rounded transition-colors ${n?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:n?"Location enabled - Click to disable":"Location disabled - Click to enable",children:s?"":n?" Enabled":" Disabled"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Find the top 5 restaurants near my current location"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearby restaurants"}),a.jsx("button",{onClick:()=>c("Search for coffee shops within 2 miles that are open now"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find open coffee shops"}),a.jsx("button",{onClick:()=>c("What is the weather forecast for my location for the next 3 days?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Local weather forecast"}),a.jsx("button",{onClick:()=>c("Find the nearest hospital or emergency room"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearest hospital"}),a.jsx("button",{onClick:()=>c("What tourist attractions are in my area?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find local attractions"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Privacy-first location"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" AI Image Generation"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Generate an image of a serene mountain landscape at sunset with golden light"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Landscape: Mountain sunset"}),a.jsx("button",{onClick:()=>c("Create a photorealistic portrait of a professional business woman smiling"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Portrait: Business professional"}),a.jsx("button",{onClick:()=>c("Generate a cartoon-style illustration of a friendly robot helping humans"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Cartoon: Friendly robot"}),a.jsx("button",{onClick:()=>c("Create a fast sketch of a coffee cup on a desk"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Quick sketch: Coffee cup"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Smart model selection"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Internal Knowledge Base (RAG)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("How do I configure OpenAI embeddings in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: OpenAI config"}),a.jsx("button",{onClick:()=>c("What is the RAG implementation in this codebase?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: RAG system"}),a.jsx("button",{onClick:()=>c("How do I deploy Lambda functions in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Lambda deployment"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Semantic search with RAG"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Data Analysis & Comparison"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Compare population growth rates of the top 5 most populous countries"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Population growth"}),a.jsx("button",{onClick:()=>c("What are the key differences between Python and JavaScript?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Python vs JavaScript"}),a.jsx("button",{onClick:()=>c("Analyze pros and cons of renewable energy sources"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Analyze: Renewable energy"}),a.jsx("button",{onClick:()=>c("Compare the performance benchmarks of React, Vue, and Angular"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: JS frameworks"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Multi-Step Workflows (Backend Todos)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Create a complete React blog application with authentication, post creation, and comments. Break this down into steps and implement each one."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Build: React blog app"}),a.jsx("button",{onClick:()=>c("Help me set up a full CI/CD pipeline for my Node.js app. Plan out all the steps needed and execute them in order."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Setup: CI/CD pipeline"}),a.jsx("button",{onClick:()=>c("Migrate my Express server from JavaScript to TypeScript. Create a step-by-step plan and execute each phase."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Migrate: JS to TypeScript"}),a.jsx("button",{onClick:()=>c("Set up a complete AWS deployment for my application including VPC, RDS database, Lambda functions, and API Gateway. Plan and implement this step by step."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Deploy: AWS infrastructure"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Auto-progresses through steps (max 5 iterations)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Knowledge Snippets (Google Sheets)"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c('Save this code example to my snippets with tags "javascript" and "async": async function fetchData() { const response = await fetch(url); return response.json(); }'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Code snippet"}),a.jsx("button",{onClick:()=>c("Remember this information: TypeScript 5.0 introduced const type parameters for generic functions"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Quick note"}),a.jsx("button",{onClick:()=>c('Search my snippets for "react hooks"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Saved snippets"}),a.jsx("button",{onClick:()=>c('Find all my snippets tagged with "python"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: By tag"}),a.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Stored in your personal Google Sheet"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-amber-300 dark:border-amber-600",children:[a.jsx("h3",{className:"text-sm font-bold text-amber-600 dark:text-amber-400",children:" Recursive Agent (ask_llm)"}),a.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-amber-200 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300 rounded font-semibold",children:" HIGH TOKENS"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Search for recent quantum computing research papers, scrape the top 3, analyze their methodologies, and create a comprehensive comparison table"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Multi-step research + analysis"}),a.jsx("button",{onClick:()=>c("Find Python async/await tutorials, analyze the best one, extract code examples, and generate a beginner-friendly explanation with working examples"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Tutorial extraction + synthesis"}),a.jsx("button",{onClick:()=>c("Search for the latest TypeScript features, create a detailed summary, generate code examples, and save the best practices to my snippets"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Research + documentation + save"}),a.jsxs("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-500 italic bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[" Spawns sub-agent with full tool access",a.jsx("br",{})," Uses 5-10x more tokens",a.jsx("br",{})," Enable in Settings first"]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-red-400 dark:border-red-600",children:[a.jsx("h3",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:" Advanced Reasoning (o1/DeepSeek-R1)"}),a.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-red-300 dark:bg-red-900/50 text-red-900 dark:text-red-300 rounded font-bold animate-pulse",children:" EXTREME"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>c("Prove that the square root of 2 is irrational using a step-by-step logical proof with explicit reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Mathematical proof (irrationality)"}),a.jsx("button",{onClick:()=>c("Analyze the time complexity of quicksort and prove why it is O(n log n) on average with detailed step-by-step reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Algorithm complexity proof"}),a.jsx("button",{onClick:()=>c("Design a normalized database schema for an e-commerce platform with explicit reasoning about normalization tradeoffs, performance implications, and scalability considerations"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Architecture design + reasoning"}),a.jsx("button",{onClick:()=>c("Debug this code and explain the logical steps to identify the bug: function fibonacci(n) { if (n <= 1) return n; return fibonacci(n-1) + fibonacci(n-3); }"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Logical debugging analysis"}),a.jsxs("p",{className:"px-3 py-2 text-xs text-red-700 dark:text-red-500 italic bg-red-50 dark:bg-red-900/20 rounded border border-red-300 dark:border-red-800 font-semibold",children:[" Uses OpenAI o1 or DeepSeek-R1",a.jsx("br",{})," Maximum reasoning depth",a.jsx("br",{})," Uses 10-50x MORE tokens",a.jsx("br",{})," Enable in Settings first"]})]})]})]})]})})]})})};function ohe(e){return typeof e=="string"?e:Array.isArray(e)?e.filter(t=>t.type==="text"&&t.text).map(t=>t.text).join(`
`):""}function VN(){return`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async function Jy(){try{return(await lc.getAllChats()).sort((t,r)=>r.timestamp-t.timestamp).map(t=>({id:t.id,timestamp:t.timestamp,firstUserPrompt:t.title||"New chat",messages:t.messages}))}catch(e){return console.error("Error loading chat history from IndexedDB:",e),[]}}async function lhe(e,t,r){try{const n=e.find(l=>l.role==="user"),s=n?ohe(n.content):"",i=s?s.substring(0,100):"New chat";return t||(t=VN()),await lc.saveChat(t,e,i,r),t}catch(n){return console.error("Error saving chat to history:",n),t||VN()}}async function KN(e){try{const t=await lc.getChatWithMetadata(e);return t?{messages:t.messages,systemPrompt:t.systemPrompt,planningQuery:t.planningQuery,generatedSystemPrompt:t.generatedSystemPrompt,generatedUserQuery:t.generatedUserQuery,selectedSnippetIds:t.selectedSnippetIds,todosState:t.todosState}:null}catch(t){return console.error("Error loading chat with metadata from IndexedDB:",t),null}}async function XN(e){try{await lc.deleteChat(e)}catch(t){console.error("Error deleting chat from IndexedDB:",t)}}async function che(){try{await lc.clearAllChats()}catch(e){console.error("Error clearing chat history from IndexedDB:",e)}}const uhe=({transferData:e,enabledTools:t,showMCPDialog:r,setShowMCPDialog:n,onLoadingChange:s})=>{const{accessToken:i,user:l,getToken:c}=Os(),{getAccessToken:d}=KA(),h=pl(),{addSearchResult:g,clearSearchResults:f}=s9(),{addTracksToStart:x}=bc(),{addSnippet:b,snippets:y,syncSnippetFromGoogleSheets:k}=jg(),{showError:S,showWarning:_,showSuccess:T,clearAllToasts:N}=$i(),{settings:I}=Ui(),{addCost:R,usage:B}=Lg(),{isConnected:F,sendMessages:ae,sendScrollPosition:G}=Mg(),{location:$,isLoading:J,requestLocation:ee,clearLocation:W}=ZA(),[j,U]=C.useState([]),[O,q]=C.useState(!1),[V,ue]=js("chat_input",""),[H,D]=js("chat_system_prompt",""),[z,M]=C.useState(!1),[le,me]=C.useState(!1),[Ee,Ae]=C.useState(!1),[ve,Pe]=C.useState(!1),[ge,Be]=C.useState(new Set),[ht,ye]=C.useState(""),[ut,Et]=C.useState(""),[Ze,kt]=C.useState(""),[Rt,ur]=js("chat_mcp_servers",[]),[yt,bt]=C.useState({name:"",url:""}),[tn,ar]=C.useState(!1),Kt=[{id:"joke-server",name:"Joke Server",url:"http://localhost:3100",description:"Get programming, dad, science, animal, and food jokes",category:"Sample",instructions:`1. Run: make mcp-install-jokes
2. Run: make mcp-sample-jokes
3. Server starts on port 3100`,tools:["get_random_joke","get_joke_by_id","search_jokes","get_categories"]},{id:"filesystem",name:"@modelcontextprotocol/server-filesystem",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem",description:"Secure file operations with configurable access controls",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-filesystem /path/to/allowed/files",tools:["read_file","write_file","list_directory","search_files"]},{id:"github",name:"@modelcontextprotocol/server-github",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/github",description:"Repository management, file operations, commits, issues, PRs",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-github
Requires: GITHUB_PERSONAL_ACCESS_TOKEN`,tools:["create_or_update_file","search_repositories","create_issue","create_pull_request"]},{id:"postgres",name:"@modelcontextprotocol/server-postgres",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/postgres",description:"Read-only database access for PostgreSQL",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-postgres postgresql://user:pass@localhost/db",tools:["query","list_tables","describe_table","append_insight"]},{id:"sqlite",name:"@modelcontextprotocol/server-sqlite",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/sqlite",description:"Database interaction, schema inspection, query execution",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-sqlite /path/to/database.db",tools:["query","list_tables","describe_table","append_insight"]},{id:"slack",name:"@modelcontextprotocol/server-slack",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/slack",description:"Channel management and messaging for Slack",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-slack
Requires: SLACK_BOT_TOKEN`,tools:["post_message","reply_to_thread","add_reaction","get_channel_history"]},{id:"brave-search",name:"@modelcontextprotocol/server-brave-search",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/brave-search",description:"Web and local search using Brave Search API",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-brave-search
Requires: BRAVE_API_KEY`,tools:["brave_web_search","brave_local_search"]},{id:"gdrive",name:"@modelcontextprotocol/server-gdrive",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive",description:"File access and search for Google Drive",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-gdrive
Requires: OAuth credentials`,tools:["search_files","read_file","list_files"]},{id:"git",name:"@modelcontextprotocol/server-git",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/git",description:"Read, search, and analyze Git repositories",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-git",tools:["git_status","git_diff","git_log","git_commit"]},{id:"memory",name:"@modelcontextprotocol/server-memory",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/memory",description:"Knowledge graph-based persistent memory system",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-memory",tools:["create_entities","create_relations","search_nodes","open_nodes"]},{id:"fetch",name:"@modelcontextprotocol/server-fetch",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/fetch",description:"Efficient web content fetching and conversion",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-fetch
Optional: USER_AGENT, IGNORE_ROBOTS_TXT`,tools:["fetch"]}];C.useEffect(()=>{s?.(z)},[z,s]);const[On,X]=C.useState([]),[he,Re]=C.useState(""),[gt,Qe]=C.useState(new Set),[zt,Gt]=C.useState(!1),[dt,jt]=C.useState(null),[Zt,Jt]=C.useState(!1),[Rn,zr]=C.useState(null),[Bt,rn]=C.useState([]),[ma,xa]=C.useState(new Map),[Sn,ie]=C.useState(new Map),[Oe,Ye]=C.useState(new Map),[Pt,xr]=C.useState(new Map),[wr,xt]=C.useState(new Map),[pt,_t]=C.useState(new Map),[Kr,pr]=C.useState(new Map),[En,Na]=C.useState(new Map),[Ft,Fn]=C.useState(null),[Fr,Sr]=C.useState(null),[$n,Aa]=C.useState(null),[ts,Ha]=C.useState(null),[qa,wt]=C.useState(null),[ce,He]=C.useState(!1),[mt,Er]=C.useState(""),[nn,er]=C.useState(!1),[an,In]=C.useState(null),[Un,Ge]=C.useState(0),[lt,rr]=C.useState([]),[vr,sn]=C.useState(!1),Dn=C.useRef(null),Vn=C.useRef(null),Hr=C.useRef(null),ne=C.useRef(!1),we=C.useRef(null),We=C.useRef(null),Ct=C.useRef(null),[dr,Mr]=js("chat_prompt_history",[]),[An,$r]=C.useState(-1),[rs]=js("chat_use_rag",!1),[,br]=C.useState(!1),[Rr,qr]=C.useState(.3),[ca,ua]=C.useState(null),[ot,ri]=C.useState(!1),[jn,Ir]=C.useState(null),[Rs,Is]=C.useState(!1),[da,ba]=C.useState(new Set);C.useEffect(()=>{const P=localStorage.getItem("rag_config");if(P)try{const te=JSON.parse(P);te.similarityThreshold!==void 0&&qr(te.similarityThreshold)}catch(te){console.error("Failed to parse RAG config:",te)}},[]),C.useEffect(()=>{const P=Array.from(pt.values()).find(Le=>Le.phase==="generating"&&Le.estimated_seconds);if(!P||P.remaining_seconds===0)return;const te=setInterval(()=>{_t(Le=>{const it=new Map(Le),Ue="img_generating",Z=it.get(Ue);if(Z&&Z.phase==="generating"){const Ke=Z.remaining_seconds??Z.estimated_seconds??0;Ke>0&&it.set(Ue,{...Z,remaining_seconds:Ke-1})}return it})},1e3);return()=>clearInterval(te)},[pt]);const ct=Gn.useMemo(()=>{const P={};return I.providers.forEach(te=>{if(te.enabled&&te.apiKey)switch(te.type){case"openai":P.openaiApiKey||(P.openaiApiKey=te.apiKey);break;case"together":P.togetherApiKey||(P.togetherApiKey=te.apiKey);break;case"gemini":P.geminiApiKey||(P.geminiApiKey=te.apiKey);break;case"replicate":P.replicateApiKey||(P.replicateApiKey=te.apiKey);break}}),P},[I.providers]),Lt=()=>{Dn.current?.scrollIntoView({behavior:"smooth"})},sr=(P,te)=>{let Le=P;const it=[],Ue=[],Z=[],Ke=/!\[([^\]]*)\]\(([^\)]+)\)/g;let Te;for(;(Te=Ke.exec(P))!==null;)it.includes(Te[2])||it.push(Te[2]);const De=/\[([^\]]+)\]\(([^\)]+)\)/g;for(;(Te=De.exec(P))!==null;){const Ve=Te[2];Ve.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?Z.includes(Ve)||Z.push(Ve):Ue.includes(Ve)||Ue.push(Ve)}const pe=/<img[^>]+src=["']([^"']+)["'][^>]*>/g;for(;(Te=pe.exec(P))!==null;)it.includes(Te[1])||it.push(Te[1]);const et=/<a[^>]+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/g;for(;(Te=et.exec(P))!==null;){const Ve=Te[1];Ve.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?Z.includes(Ve)||Z.push(Ve):Ue.includes(Ve)||Ue.push(Ve)}return te?(Le+=`

---
`,te.images&&te.images.length>0&&(Le+=`

## Extracted Images

`,te.images.forEach(Ve=>{Le+=`![${Ve.alt||"Image"}](${Ve.src})
`,Le+=`<img src="${Ve.src}" alt="${Ve.alt||"Image"}" style="max-width:100%;height:auto;" />
`,Ve.source&&(Le+=`*Source: [${Ve.source}](${Ve.source})*

`)})),te.youtubeVideos&&te.youtubeVideos.length>0&&(Le+=`

## YouTube Videos

`,te.youtubeVideos.forEach(Ve=>{Le+=`### ${Ve.title||"YouTube Video"}

`,Le+=`[Watch on YouTube](${Ve.src})

`;const Ne=Ve.src.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/");Le+=`<iframe width="560" height="315" src="${Ne}" frameborder="0" allowfullscreen></iframe>

`,Ve.source&&(Le+=`*Source: [${Ve.source}](${Ve.source})*

`)})),te.otherVideos&&te.otherVideos.length>0&&(Le+=`

## Videos

`,te.otherVideos.forEach(Ve=>{Le+=`### ${Ve.title||"Video"}

`,Le+=`[Download Video](${Ve.src})

`,Le+=`<video controls style="max-width:100%;height:auto;">
`,Le+=`  <source src="${Ve.src}" type="video/mp4">
`,Le+=`  Your browser does not support the video tag.
`,Le+=`</video>

`,Ve.source&&(Le+=`*Source: [${Ve.source}](${Ve.source})*

`)})),te.media&&te.media.length>0&&(Le+=`

## Media

`,te.media.forEach(Ve=>{Le+=`### ${Ve.type}

`,Le+=`[Download Media](${Ve.src})

`,Ve.type.toLowerCase().includes("audio")?(Le+=`<audio controls style="width:100%;">
`,Le+=`  <source src="${Ve.src}">
`,Le+=`  Your browser does not support the audio tag.
`,Le+=`</audio>

`):Ve.type.toLowerCase().includes("video")&&(Le+=`<video controls style="max-width:100%;height:auto;">
`,Le+=`  <source src="${Ve.src}">
`,Le+=`  Your browser does not support the video tag.
`,Le+=`</video>

`),Ve.source&&(Le+=`*Source: [${Ve.source}](${Ve.source})*

`)})),te.sources&&te.sources.length>0&&(Le+=`

## Sources & References

`,te.sources.forEach((Ve,Ne)=>{Le+=`${Ne+1}. **[${Ve.title}](${Ve.url})**
`,Ve.snippet&&(Le+=`   > ${Ve.snippet}
`),Le+=`   - URL: [${Ve.url}](${Ve.url})

`})),Le):(it.length>0&&(Le+=`

---

## Inline Images

`,it.forEach(Ve=>{Le+=`![Image](${Ve})
`})),Z.length>0&&(Le+=`

## Inline YouTube Videos

`,Z.forEach(Ve=>{Le+=`- [YouTube Video](${Ve})
`,Le+=`  <iframe width="560" height="315" src="${Ve.replace("watch?v=","embed/")}" frameborder="0" allowfullscreen></iframe>

`})),Ue.length>0&&(Le+=`

## Inline Links

`,Ue.forEach(Ve=>{Le+=`- [${Ve}](${Ve})
`})),Le)},yr=async(P,te)=>{try{const{imageUrlToBase64:Le}=await lr(async()=>{const{imageUrlToBase64:Ke}=await import("./imageUtils-DosmAaVd.js");return{imageUrlToBase64:Ke}},[]),it=await Le(P),Ue=te||"Image",Z=`<img src="${it}" alt="${Ue}" style="max-width: 100%; height: auto;" />`;await b(Z,"assistant",Ue),T("Image added to Swag!")}catch(Le){console.error("Failed to grab image:",Le);const it=te||"Image",Ue=`<img src="${P}" alt="${it}" style="max-width: 100%; height: auto;" />`;await b(Ue,"assistant",it),T("Image added to Swag (without conversion)!")}},Xr=async(P,te,Le,it,Ue)=>{try{let Z=it;if(Ue&&Ue.length>0){const pe=kl({toolResults:Ue});(pe.images.length>0||pe.links.length>0||pe.youtubeLinks.length>0||pe.otherMedia.length>0)&&(Z={...it,images:[...it?.images||[],...pe.images.map(et=>({src:et,alt:"",source:""}))],youtubeVideos:[...it?.youtubeVideos||[],...pe.youtubeLinks.map(et=>({src:et.url,title:et.title||"",source:et.url}))],otherVideos:[...it?.otherVideos||[],...pe.otherMedia.filter(et=>et.type.includes("video")).map(et=>({src:et.url,title:"",source:et.url}))],media:[...it?.media||[],...pe.otherMedia.filter(et=>et.type.includes("audio")).map(et=>({src:et.url,type:et.type,source:et.url}))],sources:[...it?.sources||[],...pe.links.map(et=>({url:et.url,title:et.title||et.url,snippet:""}))]})}const Ke=sr(P,Z),{convertHtmlImagesToBase64:Te}=await lr(async()=>{const{convertHtmlImagesToBase64:pe}=await import("./imageUtils-DosmAaVd.js");return{convertHtmlImagesToBase64:pe}},[]),De=await Te(Ke);await b(De,te,Le),T("Content captured to Swag!")}catch(Z){console.error("Failed to capture content with base64 conversion:",Z);const Ke=sr(P,it);await b(Ke,te,Le),T("Content captured to Swag (without image conversion)!")}},ja=C.useRef(null),vi=C.useRef(null),Ac=(P,te,Le)=>{console.log(" Voice transcription received:",{text:P,requestId:te,textLength:P.length,hasLlmApiCall:!!Le}),ue(P),ja.current=te,vi.current=Le||null,console.log(" Voice transcription complete, stored request ID:",te),setTimeout(()=>{console.log(" Auto-submitting with transcribed text:",P.substring(0,50)),El(P)},150)};C.useEffect(()=>{Lt()},[j]),C.useEffect(()=>{Ca().then(P=>{Er(P),console.log(" API endpoint for voice input:",P)})},[]),C.useEffect(()=>{F&&j.length>0&&(console.log("Syncing messages to Chromecast:",j.length),ae(j))},[j,F,ae]),C.useEffect(()=>{if(!F||!Vn.current)return;const P=Vn.current;let te;const Le=()=>{clearTimeout(te),te=setTimeout(()=>{P&&G&&G(P.scrollTop)},100)};return P.addEventListener("scroll",Le),()=>{P.removeEventListener("scroll",Le),clearTimeout(te)}},[F,G]),C.useEffect(()=>{const P=te=>{we.current&&!we.current.contains(te.target)&&Jt(!1)};if(Zt)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[Zt]),C.useEffect(()=>{ne.current&&V.trim()&&!z&&i&&(ne.current=!1,El())},[V]);const vl=P=>{Hr.current&&(Hr.current.abort(),Hr.current=null),U([]),D(""),ue(P),Jt(!1),X([]),Re(""),jt(null),xa(new Map),ie(new Map),Ye(new Map),xr(new Map),Fn(null),zr(null),localStorage.removeItem("last_active_chat_id"),N(),setTimeout(()=>{El(P)},0)},Qr=P=>typeof P=="string"?P:Array.isArray(P)?P.filter(te=>te.type==="text"&&te.text).map(te=>te.text).join(`
`):"",jc=P=>{const te=Qr(P);if(!te)return null;const Le=te.match(/```mermaid\s*([\s\S]*?)```/);return Le&&Le[1]?Le[1].trim():null},kl=P=>{const te={images:[],links:[],youtubeLinks:[],otherMedia:[]};return P.toolResults&&P.toolResults.forEach(Le=>{try{const it=typeof Le.content=="string"?JSON.parse(Le.content):Le.content;it.results&&Array.isArray(it.results)&&it.results.forEach(Ue=>{Ue.images&&Array.isArray(Ue.images)&&Ue.images.forEach(Z=>{typeof Z=="string"?te.images.push(Z):Z&&Z.src?te.images.push(Z.src):Z&&Z.url&&te.images.push(Z.url)}),Ue.url&&te.links.push({url:Ue.url,title:Ue.title}),Ue.links&&Array.isArray(Ue.links)&&Ue.links.forEach(Z=>{typeof Z=="string"?te.links.push({url:Z}):Z&&Z.href?te.links.push({url:Z.href,title:Z.text}):Z&&Z.url&&te.links.push({url:Z.url,title:Z.text||Z.title})})}),it.videos&&Array.isArray(it.videos)&&it.videos.forEach(Ue=>{Ue.url&&te.youtubeLinks.push({url:Ue.url,title:Ue.title})}),it.images&&Array.isArray(it.images)&&it.images.forEach(Ue=>{typeof Ue=="string"?te.images.push(Ue):Ue&&Ue.src?te.images.push(Ue.src):Ue&&Ue.url&&te.images.push(Ue.url)}),it.page_content?.images&&Array.isArray(it.page_content.images)&&it.page_content.images.forEach(Ue=>{typeof Ue=="string"?te.images.push(Ue):Ue&&Ue.src?te.images.push(Ue.src):Ue&&Ue.url&&te.images.push(Ue.url)}),it.results&&Array.isArray(it.results)&&it.results.forEach(Ue=>{Ue.page_content?.images&&Array.isArray(Ue.page_content.images)&&Ue.page_content.images.forEach(Z=>{typeof Z=="string"?te.images.push(Z):Z&&Z.src?te.images.push(Z.src):Z&&Z.url&&te.images.push(Z.url)})})}catch{}}),te.images=[...new Set(te.images)].filter(Boolean),te.links=Array.from(new Map(te.links.filter(Le=>Le.url).map(Le=>[Le.url,Le])).values()),te.youtubeLinks=Array.from(new Map(te.youtubeLinks.filter(Le=>Le.url).map(Le=>[Le.url,Le])).values()),te},ni=P=>P<1e-4?"<$0.0001":P<.01?`$${P.toFixed(4)}`:`$${P.toFixed(3)}`,xd=P=>{if(!P||P.length===0)return 0;const te={"gemini-2.0-flash":{input:0,output:0},"gemini-2.5-flash":{input:0,output:0},"gemini-2.5-pro":{input:0,output:0},"gemini-1.5-flash":{input:0,output:0},"gemini-1.5-pro":{input:0,output:0},"gpt-4o":{input:2.5,output:10},"gpt-4o-mini":{input:.15,output:.6},"gpt-4-turbo":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"llama-3.1-8b-instant":{input:0,output:0},"llama-3.3-70b-versatile":{input:0,output:0},"llama-3.1-70b-versatile":{input:0,output:0},"mixtral-8x7b-32768":{input:0,output:0}};let Le=0;for(const it of P){const Ue=it.model,Z=it.response?.usage;if(!Ue||!Z)continue;const Ke=te[Ue]||{input:0,output:0},Te=Z.prompt_tokens||0,De=Z.completion_tokens||0,pe=Te/1e6*Ke.input,et=De/1e6*Ke.output;Le+=pe+et}return Le},ai=P=>!P.llmApiCalls||P.llmApiCalls.length===0?0:xd(P.llmApiCalls),Yi=P=>P===0?"$0":P<1e-4?"<$0.0001":P<.01?`$${P.toFixed(4)}`:P<1?`$${P.toFixed(3)}`:`$${P.toFixed(2)}`,Lc=P=>{P.preventDefault(),P.stopPropagation(),P.dataTransfer.types.includes("Files")&&sn(!0)},Mc=P=>{P.preventDefault(),P.stopPropagation(),P.currentTarget===P.target&&sn(!1)},Jg=P=>{P.preventDefault(),P.stopPropagation()},La=P=>{P.preventDefault(),P.stopPropagation(),sn(!1);const te=P.dataTransfer.files;Sl(te)},Wi=P=>{if(P){P.style.height="auto";const Le=Math.min(P.scrollHeight,300);P.style.height=Le+"px"}};C.useEffect(()=>{Wi(We.current)},[V]),C.useEffect(()=>{e&&(ue(e.prompt),e.persona&&D(e.persona))},[e]),C.useEffect(()=>{const P=sessionStorage.getItem("planning_transfer_data");if(console.log(" useEffect checking sessionStorage - planningData:",P?.substring(0,100)),P){console.log(" Found planning transfer data in sessionStorage");try{const te=JSON.parse(P);if(console.log(" Planning transfer data received:",te),U([]),zr(null),localStorage.removeItem("last_active_chat_id"),f(),Qe(new Set),ba(new Set),te.persona||te.generatedSystemPrompt){const Le=te.persona||te.generatedSystemPrompt;D(Le),console.log(" Set system prompt from planning:",Le.substring(0,50)+"...")}if(te.prompt||te.generatedUserQuery){const Le=te.prompt||te.generatedUserQuery;ue(Le),console.log(" Set user input from planning:",Le.substring(0,50)+"...")}te.planningQuery&&ye(te.planningQuery),te.generatedSystemPrompt&&Et(te.generatedSystemPrompt),te.generatedUserQuery&&kt(te.generatedUserQuery),sessionStorage.removeItem("planning_transfer_data"),setTimeout(()=>{We.current?.focus(),T("Planning prompts transferred to new chat")},100)}catch(te){console.error("Failed to parse planning transfer data:",te),S("Failed to transfer planning data"),sessionStorage.removeItem("planning_transfer_data")}}},[]),C.useEffect(()=>{O||(async()=>{try{const P=localStorage.getItem("last_active_chat_id");if(P){console.log(" Attempting to restore last chat:",P);const te=await KN(P);if(te&&te.messages&&te.messages.length>0){te.systemPrompt&&D(te.systemPrompt),te.planningQuery&&ye(te.planningQuery),te.generatedSystemPrompt&&Et(te.generatedSystemPrompt),te.generatedUserQuery&&kt(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)&&(ba(new Set(te.selectedSnippetIds)),console.log(` Restored ${te.selectedSnippetIds.length} attached snippets`));const it=te.messages.map(Ue=>(Ue._attachments&&Array.isArray(Ue._attachments)&&(Ue._attachments=Ue._attachments.map(Z=>({name:Z.name||"file",type:Z.type||"application/octet-stream",size:Z.size||0,preview:Z.preview}))),Ue)).filter(Ue=>Ue&&Ue.role);console.log(" Restored chat session with planning metadata:",P,"with",it.length,"messages"),U(it),zr(P)}else console.log(" No previous chat to restore")}}catch(P){console.error(" Error loading last chat:",P),localStorage.removeItem("last_active_chat_id")}q(!0)})()},[O]),C.useEffect(()=>{j.length>0&&O&&(async()=>{try{const P=await lhe(j,Rn||void 0,{systemPrompt:H||void 0,planningQuery:ht||void 0,generatedSystemPrompt:ut||void 0,generatedUserQuery:Ze||void 0,selectedSnippetIds:Array.from(da)});Rn||zr(P),localStorage.setItem("last_active_chat_id",P),console.log(" Chat auto-saved with planning metadata:",P)}catch(P){console.error(" Failed to auto-save chat:",P)}})()},[j,Rn,O,H,ht,ut,Ze]),C.useEffect(()=>{le&&(async()=>{const P=await Jy();rn(P)})()},[le]);const Ds=C.useRef(new Set),jo=C.useRef(x);C.useEffect(()=>{jo.current=x},[x]),C.useEffect(()=>{const P=j.filter(it=>it.role==="assistant"&&!it.isStreaming&&it.toolResults);if(P.length===0)return;const te=[],Le=new Set;if(P.forEach(it=>{it.toolResults?.forEach(Ue=>{if(Ue.name!=="search_youtube"||!Ue.content)return;const Z=Ue.tool_call_id||`${Ue.name}-${JSON.stringify(Ue.content).substring(0,100)}`;if(!Ds.current.has(Z))try{const Ke=typeof Ue.content=="string"?JSON.parse(Ue.content):Ue.content;Ke.videos&&Array.isArray(Ke.videos)&&(Ke.videos.forEach(Te=>{Te.videoId&&!Le.has(Te.videoId)&&(Le.add(Te.videoId),te.push(Te))}),Ds.current.add(Z))}catch(Ke){console.error("[ChatTab] Failed to parse YouTube results:",Ke)}})}),te.length>0){const it=te.map(Z=>({videoId:Z.videoId,url:Z.url,title:Z.title||"Untitled Video",description:Z.description||"",duration:Z.duration||"",channel:Z.channel||"",thumbnail:Z.thumbnail||""}));console.log(`[ChatTab] Adding ${it.length} new YouTube videos to playlist (${Ds.current.size} tool results processed total)`),jo.current(it);const Ue=j[j.length-1];Ue?.role==="assistant"&&!Ue.isStreaming&&Ue.toolResults?.some(Ke=>Ke.name==="search_youtube"&&!Ds.current.has(Ke.tool_call_id||""))&&T(`Added ${it.length} video${it.length!==1?"s":""} to playlist`)}if(Ds.current.size>500){const it=Array.from(Ds.current);Ds.current=new Set(it.slice(-500))}},[j,T]);const zm=()=>{Hr.current&&(Hr.current.abort(),Hr.current=null,M(!1))},bd=()=>{const P=[];return t.web_search&&P.push({type:"function",function:{name:"search_web",description:"Search the web using DuckDuckGo to find current information, news, articles, and real-time data. USE THIS whenever users ask for current/latest information, news, or anything requiring up-to-date web content. Automatically fetches full page content including images and links from all search results. Returns comprehensive search results with titles, URLs, snippets, full content, images, and links. **CRITICAL: You MUST include relevant URLs from search results in your response using markdown links [Title](URL).**",parameters:{type:"object",properties:{query:{type:"string",description:"Search query - be specific and include relevant keywords"},limit:{type:"integer",minimum:1,maximum:50,default:5,description:"Number of results to return (default: 5)"},timeout:{type:"integer",minimum:1,maximum:60,default:15,description:"Timeout in seconds for fetching each page"},generate_summary:{type:"boolean",default:!0,description:"Generate an LLM summary of the search results (highly recommended)"}},required:["query"]}}}),t.execute_js&&P.push({type:"function",function:{name:"execute_javascript",description:" Execute JavaScript code in a sandbox for: 1) Complex mathematical calculations that require computation (factorial, compound interest, statistics, algorithms), 2) Generating formatted tables/grids (multiplication tables, calendars), 3) Data transformations or array processing, 4) ASCII art or text-based visualizations, 5) Custom algorithms. **DO NOT use for**: simple text output, explanations, or answers you already know. Only use when actual computation adds value.",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute. Include console.log() to display results."},timeout:{type:"integer",minimum:1,maximum:10,default:5,description:"Execution timeout in seconds (default: 5)"}},required:["code"]}}}),t.scrape_url&&P.push({type:"function",function:{name:"scrape_web_content",description:"Fetch and extract readable content from any URL. Excellent for getting detailed information from webpages.",parameters:{type:"object",properties:{url:{type:"string",description:"Fully qualified URL to fetch"},timeout:{type:"integer",minimum:1,maximum:60,default:15}},required:["url"]}}}),t.youtube&&P.push({type:"function",function:{name:"search_youtube",description:' SEARCH/FIND YouTube videos (NOT for transcription). Use when user wants to FIND or SEARCH for videos. **DO NOT USE if user wants to transcribe, get transcript, or extract text from a specific YouTube URL** - use transcribe_url instead. Use search_youtube for: "find YouTube videos about X", "search YouTube for X", "show me videos about X". Returns video titles, descriptions, links, and caption availability. Results are automatically added to a playlist. **CRITICAL: You MUST include ALL video URLs in your response as a formatted markdown list with [Title](URL) format.**',parameters:{type:"object",properties:{query:{type:"string",description:'Search query for YouTube videos (e.g., "javascript tutorial", "bach cello suites", "machine learning course")'},limit:{type:"integer",minimum:1,maximum:50,default:10,description:"Maximum number of video results to return (default 10, max 50)"},order:{type:"string",enum:["relevance","date","viewCount","rating"],default:"relevance",description:"Sort order for results: relevance (default), date (newest first), viewCount (most viewed), rating (highest rated)"}},required:["query"]}}}),t.transcribe&&P.push({type:"function",function:{name:"transcribe_url",description:' **PRIMARY TOOL FOR GETTING VIDEO/AUDIO TEXT CONTENT**: Transcribe audio or video content from URLs using OpenAI Whisper. **MANDATORY USE** when user says: "transcribe", "transcript", "get text from", "what does the video say", "extract dialogue", "convert to text", OR provides a specific YouTube/video URL and asks about its content. **YOUTUBE SUPPORT**: Can transcribe directly from YouTube URLs (youtube.com, youtu.be, youtube.com/shorts). Also supports direct media URLs (.mp3, .mp4, .wav, .m4a, etc.). **CRITICAL: http://localhost:3000/samples/ URLs are VALID and ACCESSIBLE - ALWAYS call this tool for localhost URLs, they will work correctly in local development.** Automatically handles large files by chunking. Shows real-time progress with stop capability. Returns full transcription text.',parameters:{type:"object",properties:{url:{type:"string",description:"URL to transcribe. Can be YouTube URL (youtube.com, youtu.be), direct media URL (.mp3, .mp4, .wav, .m4a, etc.), or localhost URL for local development (http://localhost:3000/samples/...)"},language:{type:"string",pattern:"^[a-z]{2}$",description:'Optional: 2-letter ISO language code (e.g., "en", "es", "fr"). Improves accuracy if known.'},prompt:{type:"string",description:'Optional: Context or expected words to improve accuracy (e.g., "Technical discussion about AI and machine learning")'}},required:["url"]}}}),t.generate_chart&&P.push({type:"function",function:{name:"generate_chart",description:" **PRIMARY TOOL FOR ALL DIAGRAMS, CHARTS, AND VISUALIZATIONS**: Generate professional Mermaid diagrams automatically rendered as interactive SVG in the UI. **MANDATORY USE** when user requests: flowcharts, sequence diagrams, class diagrams, state diagrams, ER diagrams, Gantt charts, pie charts, mindmaps, git graphs, or ANY visual diagram/chart/visualization. **DO NOT use execute_javascript to generate charts - ALWAYS use this tool instead**. Keywords: diagram, chart, flowchart, visualization, graph, workflow, UML, ERD, timeline, mindmap.",parameters:{type:"object",properties:{description:{type:"string",description:'Clear description of what the chart should visualize (e.g., "User login flow", "Database schema for blog platform", "Project timeline")'},chart_type:{type:"string",enum:["flowchart","sequence","class","state","er","gantt","pie","git","mindmap"],default:"flowchart",description:"Type of diagram to generate. Choose based on use case: flowchart (processes), sequence (interactions), class (UML), state (FSM), er (database), gantt (timeline), pie (data), git (commits), mindmap (concepts)"}},required:["description"]}}}),t.generate_image&&P.push({type:"function",function:{name:"generate_image",description:' **MANDATORY USE FOR IMAGE REQUESTS**: Generate high-quality AI images immediately using DALL-E 3, Stable Diffusion, or other providers. **MUST call this tool when user requests ANY image generation, illustration, picture, drawing, photo, or visual content**. Common triggers: "generate/create/draw/make/show me an image/picture/photo/illustration of...", "draw a...", "create a cartoon/photo/illustration of...", "visualize...", "show me what... looks like". Supports quality tiers: ultra (photorealistic, $0.08-0.12), high (detailed/artistic, $0.02-0.04), standard (normal illustrations, $0.001-0.002), fast (quick drafts/sketches, <$0.001 - DEFAULT). Images appear automatically in the conversation. DO NOT refuse image generation requests - ALWAYS call this tool.',parameters:{type:"object",properties:{prompt:{type:"string",description:'Detailed description of the image to generate (e.g., "a low resolution image of a cat sitting on a windowsill")'},quality:{type:"string",enum:["ultra","high","standard","fast"],default:"standard",description:'Quality tier: ultra (photorealistic), high (detailed), standard (illustrations), fast (drafts). Infer from prompt keywords like "low res"=fast, "photorealistic"=ultra, "simple"=standard'},size:{type:"string",enum:["256x256","512x512","1024x1024","1792x1024","1024x1792"],default:"1024x1024",description:'Image dimensions. Use smaller sizes (256x256, 512x512) for "low res" requests'},style:{type:"string",enum:["natural","vivid"],default:"natural",description:"Style: natural (realistic) or vivid (dramatic). DALL-E 3 only"}},required:["prompt"]}}}),t.search_knowledge_base&&P.push({type:"function",function:{name:"search_knowledge_base",description:" **SEARCH INTERNAL KNOWLEDGE BASE**: Perform vector similarity search against the ingested documentation and knowledge base. **USE THIS when user asks about**: project documentation, API references, implementation guides, architecture, deployment procedures, RAG system, embedding models, or any topics covered in the knowledge base. **EXCELLENT for**: finding specific code examples, configuration details, API endpoints, best practices, and technical documentation. Returns relevant text chunks with source file names and similarity scores. **Always use this BEFORE search_web when the question might be answered by internal documentation.**",parameters:{type:"object",properties:{query:{type:"string",description:'Natural language search query. Be specific and include key terms. Examples: "How do I configure OpenAI embeddings?", "What is the RAG implementation?", "How to deploy Lambda functions?"'},top_k:{type:"integer",minimum:1,maximum:20,default:5,description:"Number of most relevant results to return (default: 5, max: 20)"},threshold:{type:"number",minimum:0,maximum:1,default:.3,description:"Minimum similarity score threshold (0-1). Higher values = more strict matching. Default: 0.3 (relaxed for better recall)"},source_type:{type:"string",enum:["file","url","text"],description:"Optional: Filter results by source type (file, url, or text)"}},required:["query"]}}}),t.manage_todos&&P.push({type:"function",function:{name:"manage_todos",description:' **MANAGE BACKEND TODO QUEUE**: Add or delete actionable steps for multi-step tasks. The backend maintains a server-side todo queue that tracks progress through complex workflows. When todos exist, they auto-progress after each successful completion (assessor "OK"). **USE THIS when**: user requests a multi-step plan, breaking down complex tasks, tracking implementation progress, or managing sequential workflows. **DO NOT use for simple single-step tasks.** After adding todos, the system will automatically advance through them, appending each next step as it completes. **Keywords**: plan, steps, todo list, break down task, multi-step workflow, implementation phases.',parameters:{type:"object",properties:{add:{type:"array",items:{type:"string"},description:'Array of todo descriptions to add to the queue. Descriptions should be clear, actionable steps in order. Example: ["Install dependencies", "Configure environment", "Run tests", "Deploy application"]'},delete:{type:"array",items:{oneOf:[{type:"string",description:"Exact todo description to delete"},{type:"number",description:"Todo ID to delete"}]},description:"Array of todo IDs (numbers) or exact descriptions (strings) to remove from the queue"}},additionalProperties:!1}}}),t.manage_snippets&&P.push({type:"function",function:{name:"manage_snippets",description:' **MANAGE KNOWLEDGE SNIPPETS**: Insert, retrieve, search, or delete knowledge snippets stored in your personal Google Sheet ("Research Agent/Research Agent Swag"). Use this to save important information, code examples, procedures, references, or any content you want to preserve and search later. **USE THIS when**: user wants to save/capture content, create a knowledge base, store code snippets, bookmark important info, or search previous saved content. Each snippet can have a title, content, tags for organization, and source tracking (chat/url/file/manual). **Keywords**: save this, remember this, add to knowledge base, store snippet, save for later, search my snippets, find my notes.',parameters:{type:"object",required:["action"],properties:{action:{type:"string",enum:["insert","capture","get","search","delete"],description:'Operation to perform: "insert" (add new snippet), "capture" (save from chat/url/file), "get" (retrieve by ID/title), "search" (find by query/tags), "delete" (remove by ID/title)'},payload:{type:"object",description:"Action-specific parameters",properties:{title:{type:"string",description:"Snippet title (required for insert/capture)"},content:{type:"string",description:"Snippet content/body (required for insert)"},tags:{type:"array",items:{type:"string"},description:'Array of tags for categorization (optional, e.g., ["javascript", "async", "tutorial"])'},source:{type:"string",enum:["chat","url","file","manual"],description:"Source type (for capture action)"},url:{type:"string",description:'Source URL if source="url"'},id:{type:"number",description:"Snippet ID (for get/delete)"},query:{type:"string",description:"Text search query (searches title and content)"}}}},additionalProperties:!1}}}),Rt.filter(te=>te.enabled).forEach(te=>{console.log("MCP Server enabled:",te.name,te.url)}),P},yd=async P=>{try{const Le=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/stop-transcription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({tool_call_id:P})});if(!Le.ok){const it=await Le.json();throw new Error(it.error||"Failed to stop transcription")}T("Transcription stopped"),console.log("Transcription stopped:",P)}catch(te){console.error("Failed to stop transcription:",te),S("Failed to stop transcription: "+(te instanceof Error?te.message:"Unknown error"))}},wl=(P,te=2048)=>new Promise((Le,it)=>{const Ue=new FileReader;Ue.onload=Z=>{const Ke=new Image;Ke.onload=()=>{const Te=document.createElement("canvas");let De=Ke.width,pe=Ke.height;De>pe&&De>te?(pe=pe/De*te,De=te):pe>te&&(De=De/pe*te,pe=te),Te.width=De,Te.height=pe,Te.getContext("2d")?.drawImage(Ke,0,0,De,pe);const Ve=Te.toDataURL(P.type||"image/jpeg",.85);Le(Ve.split(",")[1])},Ke.onerror=it,Ke.src=Z.target?.result},Ue.onerror=it,Ue.readAsDataURL(P)}),Sl=async P=>{if(!P||P.length===0)return;const te=5*1024*1024,Le=10*1024*1024,it=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];for(let Ue=0;Ue<P.length;Ue++){const Z=P[Ue];if(!it.includes(Z.type)){_(`File type not supported: ${Z.name}. Supported types: JPEG, PNG, GIF, WebP, PDF`);continue}const Ke=Z.type==="application/pdf"?Le:te;if(Z.size>Ke){_(`File too large: ${Z.name} (${(Z.size/1024/1024).toFixed(2)}MB). Max size: ${Ke/1024/1024}MB`);continue}try{let Te,De;if(Z.type.startsWith("image/")){Te=await wl(Z),De=`data:${Z.type};base64,${Te}`;const pe=Te.length/1e3;pe>2e4&&_(`Image ${Z.name} may use many tokens (~${Math.round(pe/1e3)}k). Consider using a smaller image.`)}else{const pe=new FileReader;Te=await new Promise((et,Ve)=>{pe.onload=Ne=>{const nt=Ne.target?.result;et(nt.split(",")[1])},pe.onerror=Ve,pe.readAsDataURL(Z)})}rr(pe=>[...pe,{name:Z.name,type:Z.type,size:Z.size,base64:Te,preview:De}]),T(`Added ${Z.name}`)}catch(Te){console.error("Error processing file:",Te),S(`Failed to process ${Z.name}`)}}},Zg=P=>{rr(te=>te.filter((Le,it)=>it!==P))},El=async P=>{const te=P!==void 0?P:V;if(!te.trim()&&lt.length===0||z)return;if(!i){S("Please sign in to send messages");return}let Le;if(lt.length>0){const De=[{type:"text",text:te||"Please analyze these files."}];for(const pe of lt)pe.type&&pe.type.startsWith("image/")?De.push({type:"image_url",image_url:{url:`data:${pe.type};base64,${pe.base64}`,detail:"auto"}}):pe.type==="application/pdf"&&De.push({type:"text",text:`[PDF attachment: ${pe.name}]`});Le={role:"user",content:De,_attachments:lt}}else Le={role:"user",content:te};vi.current&&(Le.llmApiCalls=[vi.current],console.log(" Added voice transcription llmApiCall to user message"),vi.current=null),console.log(" Adding user message:",typeof Le.content=="string"?Le.content.substring(0,50):`${lt.length} attachments`);let it=j.length;U(De=>{console.log(" Current messages count before adding user:",De.length),it=De.length;const pe=[...De,Le];return console.log(" Messages after adding user:",pe.length,"User message at index:",it),pe});const Ue=te.trim();Ue&&Mr(De=>{const pe=De.filter(Ve=>Ve!==Ue);return[Ue,...pe].slice(0,50)}),ue(""),$r(-1),rr([]),ba(new Set),M(!0),X([]),Re(""),Ge(0),Qe(new Set),Ye(new Map),xr(new Map),xa(new Map),ie(new Map),Na(new Map);let Z=null;if(rs&&te.trim()){br(!0);try{let De;const pe=await Va.getCachedQueryEmbedding(te.trim());if(pe)console.log(" Using cached query embedding"),De=pe.embedding;else{console.log(" Fetching new query embedding from backend");const et=await Ca(),Ve=await c(),Ne=await fetch(`${et}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...Ve?{Authorization:`Bearer ${Ve}`}:{}},body:JSON.stringify({query:te})});if(!Ne.ok)throw new Error("Failed to get query embedding");const nt=await Ne.json();De=nt.embedding;const ir=nt.model||"unknown";await Va.cacheQueryEmbedding(te.trim(),De,ir),console.log(" Cached query embedding for future use")}if(De){console.log(` RAG search with threshold: ${Rr}`);const et=await Va.vectorSearch(De,5,Rr);if(et.length>0){let Ve=`**KNOWLEDGE BASE CONTEXT:**

The following information from the user's knowledge base may be relevant to this query:

`;for(let Ne=0;Ne<et.length;Ne++){const nt=et[Ne];Ve+=`**[Context ${Ne+1} - Similarity: ${nt.score.toFixed(3)}]**
`,Ve+=`${nt.chunk_text}

`;try{const ir=await Va.getEmbeddingDetails(nt.snippet_id);ir.metadata&&(Ve+=`*Source: ${ir.metadata.source_type||"Unknown"}`,ir.metadata.title&&(Ve+=` - "${ir.metadata.title}"`),Ve+=`*

`)}catch{}Ve+=`---

`}Ve+=`**USER QUESTION:** ${te}

`,Ve+="Please answer the user's question using the context provided above. If the context is relevant, reference it in your answer. If the context is not helpful, you may answer based on your general knowledge.",Z={role:"system",content:Ve},T(` Found ${et.length} relevant chunks from knowledge base`)}else _("No relevant context found in knowledge base")}}catch(De){console.error("RAG context error:",De),_("Failed to retrieve RAG context, continuing without it")}finally{br(!1)}}Hr.current=new AbortController;const Ke=bd();let Te=null;Ke.length>0&&(Te=setTimeout(()=>{Hr.current&&(console.warn("Request timeout - aborting after 4 minutes due to tool execution"),Hr.current.abort())},24e4));try{const De=new Date,pe=De.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),et=De.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}),Ve=De.toISOString(),Ne=`${pe}, ${et} (ISO: ${Ve})`;let nt=H.trim()||"You are a helpful assistant";const ir=ut&&ut.length>0;if(nt=`**CURRENT DATE AND TIME:**
${Ne}

You have access to the current date and time above. Use this information when responding to temporal queries about "today", "current date", "what time is it", "this week", "this month", "this year", etc. You do not need to use tools to get the current date/time as it is provided in this system prompt.

${nt}`,ir||(nt+=`

**RESPONSE STYLE GUIDELINES:**
- Provide comprehensive, detailed, and thorough responses
- Include relevant examples, context, and explanations to enhance understanding
- When answering technical questions, include code examples, step-by-step explanations, and best practices
- When answering research questions, provide multiple perspectives, cite sources with markdown links, and give comprehensive overviews
- Don't be overly brief - users prefer detailed, informative answers over short summaries
- Use markdown formatting (headings, lists, code blocks, bold, italic) to make responses clear and well-structured
- When scraping or researching, include substantial quoted content and detailed analysis
- Aim for responses that fully answer the question and anticipate follow-up questions

**IMAGE PLACEMENT GUIDELINES:**
- When including images in your response, distribute them naturally throughout the content next to relevant text sections
- Place images near the paragraphs or sections they illustrate or relate to
- AVOID placing all images at the top or bottom of your response in a single block
- Intersperse images with text to create a more engaging, magazine-style layout
- Use markdown image syntax: ![description](url) inline with your content where contextually appropriate`),Ke.length>0&&!ir){const Wt=Ke.map(K=>K.function.name).join(", ");nt+=`

You have access to these tools: ${Wt}.

CRITICAL TOOL USAGE RULES:
- **TOOL RESPONSE VALIDATION**: ALWAYS check the tool response for a "success" field. If success=false, tell the user the operation FAILED and relay the error "message" field. NEVER claim success when the tool returned success=false.
- **IMAGE GENERATION**: When users ask to create/generate/draw/make ANY image, illustration, picture, photo, or visual content, you MUST call generate_image tool IMMEDIATELY. NEVER refuse or say "I cannot generate images" - you CAN by calling the tool. Examples: "draw a cat", "generate an image of...", "create a cartoon...", "show me a picture of...", "make an illustration of...", "visualize..."  ALL require calling generate_image.
- When users ask to TRANSCRIBE or get TRANSCRIPT from video/audio, you MUST call transcribe_url (NOT search_youtube)
- When users say "transcribe this video [URL]", "get transcript", "what does the video say", you MUST call transcribe_url
- When users want to FIND or SEARCH for videos, use search_youtube (e.g., "find videos about X")
- When users ask to "scrape", "get content from", "read", "fetch", "extract", "analyze", or "summarize" a website/URL, you MUST call the scrape_web_content tool
- When users provide ANY URL (http/https) and ask questions about it, you MUST call scrape_web_content with that URL FIRST
- MANDATORY: If a message contains a URL and asks to extract/analyze/summarize/get key points, you MUST call scrape_web_content - DO NOT provide an answer without first fetching the content
- When users ask for current information, news, or web content, you MUST use search_web
- **execute_javascript USAGE RULES**:
  -  USE for: Complex calculations requiring computation (factorial, fibonacci, statistics, algorithms)
  -  USE for: Generating formatted tables/grids (multiplication tables, calendars, data matrices)
  -  USE for: Data transformations, array processing, sorting, filtering large datasets
  -  USE for: ASCII art, text-based visualizations, formatted output
  -  USE for: Custom algorithms or mathematical operations you cannot compute mentally
  -  DO NOT USE for: Simple answers you already know (like "Lambda deployment not supported")
  -  DO NOT USE for: Just printing text or explanations
  -  DO NOT USE for: Answers that don't require computation
  -  DO NOT USE for: Simple arithmetic you can answer directly (like 2+2=4)
  - Rule: Only use execute_javascript when the computation or formatting adds actual value
- DO NOT output tool parameters as JSON text in your response (e.g., don't write {"url": "...", "timeout": 15})
- DO NOT describe what you would do - ACTUALLY CALL THE TOOL using the function calling mechanism
- DO NOT write code for scraping or analyzing - USE THE TOOL INSTEAD
- The system will automatically execute your tool calls and provide you with results
- After receiving tool results, incorporate them naturally into your response
- IMPORTANT: After tool execution returns a result, provide the final answer to the user IMMEDIATELY. Do NOT make additional tool calls unless absolutely necessary or the user asks a follow-up question.

Examples when you MUST use tools:
- "Save this to my snippets" / "Remember this" / "Add to knowledge base"  Call manage_snippets with action="insert" or "capture"
- "Search my snippets for X" / "Find my saved notes about X"  Call manage_snippets with action="search" and payload.query="X"
- "transcribe this video https://youtube.com/watch?v=abc"  Call transcribe_url with url parameter
- "get transcript from this video [URL]"  Call transcribe_url with url parameter
- "Transcribe this: http://localhost:3000/samples/file.mp3"  Call transcribe_url (localhost URLs work in local dev!)
- "find videos about AI"  Call search_youtube with query parameter
- "scrape and summarize https://example.com"  Call scrape_web_content with url parameter
- "get content from https://github.com/user/repo"  Call scrape_web_content with url parameter
- "Extract and analyze the key points from https://example.com/article"  Call scrape_web_content with url parameter
- "What does this page say: https://example.com"  Call scrape_web_content with url parameter
- "Summarize this article https://example.com/news"  Call scrape_web_content with url parameter
- "Read and analyze https://en.wikipedia.org/wiki/Topic"  Call scrape_web_content with url parameter
- "Find current news about X"  Call search_web with query parameter
- "What's the latest on X"  Call search_web with query parameter
- "calculate 5 factorial"  Call execute_javascript (requires computation)
- "Generate a multiplication table for numbers 1-12"  Call execute_javascript (formatted table)
- "Calculate compound interest on $10k at 7% for 15 years"  Call execute_javascript (complex calculation)
- "Sort this array and find median: [45,23,67,12,89]"  Call execute_javascript (data processing)
- "What is 2+2?"  Answer directly with "4" (DON'T use execute_javascript for trivial math)
- "How do I deploy a Lambda?"  Answer directly (DON'T use execute_javascript to print explanations)

Remember: Use the function calling mechanism, not text output. The API will handle execution automatically.`}const xn=j.map(Wt=>{const{llmApiCalls:K,isStreaming:ya,toolResults:Ln,...Ki}=Wt;return Ki});let ys=0,ns=0,ha=0;const kd=xn.map(Wt=>{if(Wt.role==="tool")return ys++,null;if(Wt.role==="assistant"){const K=Qr(Wt.content),ya=Wt.content&&K.trim().length>0,Ln=Wt.tool_calls&&Array.isArray(Wt.tool_calls)&&Wt.tool_calls.length>0;if(ya){if(Ln){ns++;const{tool_calls:Ki,...Tl}=Wt;return Tl}return Wt}else return ha++,null}return Wt}).filter(Wt=>Wt!==null);(ys>0||ns>0||ha>0)&&(console.log(` UI filtered: ${ys} tool messages, ${ns} tool_calls stripped, ${ha} empty assistants removed`),console.log(`   Sending ${kd.length} clean messages + new user message to Lambda`));const Oc=[];if(da.size>0){const Wt=Array.from(da).map(ya=>y.find(Ln=>Ln.id===ya)).filter(ya=>ya!==void 0),K=ya=>{let Ln=ya;return Ln=Ln.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,"[Image: $1]"),Ln=Ln.replace(/<img[^>]*src="data:image\/[^"]*"[^>]*>/gi,"[Base64 Image]"),Ln=Ln.replace(/<img[^>]*>/gi,"[Image]"),Ln=Ln.replace(/data:image\/[^;]+;base64,[A-Za-z0-9+/=]+/g,"[Base64 Image Data]"),Ln};for(const ya of Wt){const Ln=K(ya.content);Oc.push({role:"user",content:`**KNOWLEDGE BASE CONTEXT** (manually attached by user):

**Title:** ${ya.title||"Untitled"}

${Ln}

---
`})}console.log(` Attached ${Oc.length} manual context snippets (full content, images stripped)`)}const rp=[{role:"system",content:nt},...Z?[Z]:[],...Oc,...kd,Le];Z&&console.log(" RAG context included in request (automatic fragments)");const Lo=rp.map(Wt=>{const{_attachments:K,llmApiCalls:ya,isStreaming:Ln,toolResults:Ki,isRetryable:Tl,retryCount:Ed,originalUserPromptIndex:vs,originalErrorMessage:ap,extractedContent:Je,rawResult:xe,evaluations:Fe,errorData:$t,imageGenerations:St,...rt}=Wt;return rt}),Zm=I.providers.filter(Wt=>Wt.enabled===!0),np=localStorage.getItem("proxy_settings");let wd,Rc;if(np)try{const Wt=JSON.parse(np);Wt.enabled&&Wt.username&&Wt.password&&(wd=Wt.username,Rc=Wt.password,console.log(" Proxy settings loaded from localStorage:",Wt.username))}catch(Wt){console.error("Failed to parse proxy settings:",Wt)}const Ps={providers:Zm,messages:Lo,temperature:.7,stream:!0,optimization:I.optimization||"cheap",language:I.language||"en"};console.log(` Model selection optimization: ${Ps.optimization}`),console.log(` Response language: ${Ps.language}`),$&&(Ps.location={latitude:$.latitude,longitude:$.longitude,accuracy:$.accuracy,address:$.address,timestamp:$.timestamp},console.log(" Including location in request:",$.address?.city||`${$.latitude.toFixed(4)}, ${$.longitude.toFixed(4)}`)),wd&&Rc&&(Ps.proxyUsername=wd,Ps.proxyPassword=Rc,console.log(" Including proxy credentials in request")),I.tavilyApiKey&&I.tavilyApiKey.trim()&&(Ps.tavilyApiKey=I.tavilyApiKey,console.log("Including Tavily API key in request")),Ke.length>0&&(Ps.tools=Ke,console.log("Sending streaming request with tools:",Ke.map(Wt=>Wt.function.name)));const Vi=Rt.filter(Wt=>Wt.enabled);Vi.length>0&&(Ps.mcp_servers=Vi.map(Wt=>({name:Wt.name,url:Wt.url})),console.log("[MCP] Sending MCP servers:",Vi.map(Wt=>Wt.name).join(", ")));const _l=await d(),Sd=ja.current;Sd&&(console.log(" Using request ID from voice transcription:",Sd),ja.current=null),await m1(Ps,i,(Wt,K)=>{switch(console.log("SSE Event:",Wt,K),Wt){case"status":break;case"delta":K.content&&(Re(Je=>Je+K.content),U(Je=>{const xe=Je.length-1,Fe=Je[xe];console.log(" Delta received, lastMessage role:",Fe?.role,"isStreaming:",Fe?.isStreaming,"hasContent:",!!Fe?.content,"contentLength:",Fe?.content?.length||0);const $t=Fe?.role==="tool";if(Fe&&Fe.role==="assistant"&&!$t){const St=[...Je];return St[xe]={...Fe,content:(Fe.content||"")+K.content,isStreaming:!0},console.log(" Updating assistant at index:",xe,"newContentLength:",St[xe].content.length),St}else{const St={role:"assistant",content:K.content,isStreaming:!0};return console.log(" Creating NEW streaming block, reason:",$t?"tool execution":"no assistant message"),[...Je,St]}}),U(Je=>{const xe=Je.length-1,Fe=Je[xe];return Fe&&Fe.role==="assistant"&&Fe.isStreaming&&(jt(xe),console.log(" Set currentStreamingBlockIndex to:",xe)),Je}));break;case"tool_call_start":console.log(" Tool call starting:",K.name,"currentStreamingBlockIndex:",dt),X(Je=>[...Je,{id:K.id,name:K.name,status:"starting"}]),console.log(" Adding tool_call to assistant message:",{id:K.id,name:K.name,hasArguments:!!K.arguments,argumentsLength:K.arguments?.length}),U(Je=>{const xe=[...Je];for(let Fe=xe.length-1;Fe>=0;Fe--)if(xe[Fe].role==="assistant"){if(console.log(" Found assistant message at index",Fe,"current tool_calls:",xe[Fe].tool_calls),xe[Fe].tool_calls||(xe[Fe]={...xe[Fe],tool_calls:[]}),xe[Fe].tool_calls?.find(rt=>rt.id===K.id)){console.log(" Tool call already exists, skipping:",K.id);break}const St={id:K.id,type:"function",function:{name:K.name,arguments:K.arguments||"{}"}};xe[Fe].tool_calls=[...xe[Fe].tool_calls||[],St],console.log(" Added tool_call:",St),console.log(" Updated message tool_calls:",xe[Fe].tool_calls);break}return xe});break;case"tool_call_progress":X(Je=>Je.map(xe=>xe.id===K.id?{...xe,status:"executing"}:xe));break;case"image_generation_progress":console.log(" Image generation progress event:",K),U(Je=>{const xe=[...Je];for(let Fe=xe.length-1;Fe>=0;Fe--)if(xe[Fe].role==="assistant"){xe[Fe].imageGenerations||(xe[Fe].imageGenerations=[]);const $t=xe[Fe].imageGenerations,St=$t.findIndex(rt=>rt.id===K.id||K.prompt&&rt.prompt===K.prompt);if(St>=0){const rt=$t[St];$t[St]={...rt,phase:K.phase,provider:K.provider||rt.provider,model:K.model||rt.model,estimatedSeconds:K.estimated_seconds||rt.estimatedSeconds,status:K.phase==="error"?"error":"generating"}}else $t.push({id:K.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,provider:K.provider||"unknown",model:K.model||"unknown",cost:K.estimated_cost||0,prompt:K.prompt||"",size:K.size||"1024x1024",qualityTier:K.quality||"standard",status:"generating",phase:K.phase,estimatedSeconds:K.estimated_seconds,ready:!1});break}return xe});break;case"image_complete":console.log(" Image complete event:",{hasUrl:!!K.url,url:K.url,provider:K.provider,model:K.model,quality:K.qualityTier}),U(Je=>{const xe=[...Je];for(let Fe=xe.length-1;Fe>=0;Fe--)if(xe[Fe].role==="assistant"){xe[Fe].imageGenerations||(xe[Fe].imageGenerations=[]);const $t=xe[Fe].imageGenerations,St=K.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rt=$t.findIndex(Kn=>Kn.id===St),Dr={id:St,provider:K.provider||"unknown",model:K.model||"unknown",modelKey:K.model,cost:K.cost||0,prompt:K.prompt||"",size:K.size||"1024x1024",style:K.style||"natural",qualityTier:K.qualityTier||"standard",status:"downloading",imageUrl:K.url,base64:void 0,ready:!1,llmApiCall:K.llmApiCall,revisedPrompt:K.revisedPrompt};rt>=0?$t[rt]=Dr:$t.push(Dr);break}return xe}),K.url&&K.id&&(async()=>{try{console.log(" Downloading image via Lambda proxy:",K.url);const Je=await Ca(),xe=await fetch(`${Je}/proxy-image`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({url:K.url,format:"base64"})});if(!xe.ok)throw new Error(`Proxy fetch failed: ${xe.status}`);const Fe=await xe.json();if(!Fe.success||!Fe.dataUri)throw new Error("Invalid proxy response");console.log(" Image downloaded via proxy, size:",Fe.size,"bytes"),console.log(" Proxy data keys:",Object.keys(Fe)),console.log(" Data URI prefix:",Fe.dataUri?.substring(0,50));const $t=Fe.dataUri;U(St=>{const rt=[...St];console.log(" Updating messages, total:",rt.length);for(let Dr=rt.length-1;Dr>=0;Dr--)if(rt[Dr].role==="assistant"&&rt[Dr].imageGenerations){const Kn=rt[Dr].imageGenerations;console.log(` Checking message ${Dr}, imageGenerations:`,Kn.length);const _n=Kn.findIndex(on=>on.id===K.id);if(console.log(` Found image at index: ${_n}, searching for ID: ${K.id}`),_n>=0){const on={...Kn[_n]};Kn[_n]={...Kn[_n],status:"complete",base64:$t,imageUrl:$t,ready:!0};const Jr=Kn[_n];console.log(" Updated image with base64 data"),console.log("   Before:",{status:on.status,hasBase64:!!on.base64,ready:on.ready}),console.log("   After:",{status:Jr.status,hasBase64:!!Jr.base64,ready:Jr.ready});break}}return rt})}catch(Je){console.error(" Failed to download/convert image:",Je),U(xe=>{const Fe=[...xe];for(let $t=Fe.length-1;$t>=0;$t--)if(Fe[$t].role==="assistant"&&Fe[$t].imageGenerations){const St=Fe[$t].imageGenerations,rt=St.findIndex(Dr=>Dr.id===K.id);if(rt>=0){St[rt]={...St[rt],status:"error",ready:!1};break}}return Fe})}})();break;case"tool_call_result":if(X(Je=>Je.map(xe=>xe.id===K.id?{...xe,status:K.error?"error":"complete",result:K.content}:xe)),K.name==="search_web"&&(console.log(" Clearing search progress after search_web completion"),Ye(new Map)),K.name==="search_youtube"&&(console.log(" Clearing YouTube search progress after search_youtube completion"),xr(new Map)),K.name==="execute_javascript"&&(console.log(" Clearing JavaScript execution progress after execute_javascript completion"),xt(new Map)),K.name==="generate_image"&&(console.log(" Clearing image generation progress after generate_image completion"),_t(new Map)),K.name==="generate_chart"&&(console.log(" Clearing chart generation progress after generate_chart completion"),pr(new Map)),U(Je=>{console.log(" Embedding tool result in assistant message, tool:",K.name,"tool_call_id:",K.id),console.log(" Current messages array length:",Je.length);const xe=[...Je];let Fe=[];console.log(" Assistant messages in array:"),Je.forEach((rt,Dr)=>{rt.role==="assistant"&&console.log(`  [${Dr}] has tool_calls:`,!!rt.tool_calls,rt.tool_calls?`(${rt.tool_calls.length} calls: ${rt.tool_calls.map(Kn=>Kn.id).join(", ")})`:"")});let $t=-1;for(let rt=0;rt<xe.length;rt++)if(xe[rt].role==="assistant"&&xe[rt].tool_calls){if(xe[rt].tool_calls?.some(Kn=>Kn.id===K.id)){$t=rt,console.log("  Found FIRST assistant with matching tool call at index:",rt,"of",xe.length);const Kn=xe[rt].llmApiCalls?.filter(on=>on.phase&&on.tool==="search_web"&&(on.phase==="page_summary"||on.phase==="synthesis_summary"||on.phase==="description_summary"))||[];Kn.length>0&&(Fe=Kn);const _n={role:"tool",content:K.content,tool_call_id:K.id,name:K.name,...Fe.length>0&&{llmApiCalls:Fe}};if(xe[rt].toolResults?xe[rt]={...xe[rt],toolResults:[...xe[rt].toolResults||[],_n]}:xe[rt]={...xe[rt],toolResults:[_n]},console.log(" Embedded tool result in assistant message at index",rt,", total toolResults:",xe[rt].toolResults?.length),K.name==="execute_javascript"){const on=(xe[rt].toolResults?.length||1)-1,Jr=rt*1e3+on;console.log(" Auto-expanding execute_javascript result at key:",Jr),Qe(si=>{const Ur=new Set(si);return Ur.add(Jr),Ur})}$t=rt;break}}else xe[rt].role==="assistant"&&console.log(`  [${rt}] is assistant but has no tool_calls`);return $t!==-1||(console.warn("  Could not find assistant message with matching tool_call_id:",K.id),console.warn(" Available tool_call_ids:",xe.filter(rt=>rt.role==="assistant"&&rt.tool_calls).flatMap(rt=>rt.tool_calls?.map(Dr=>Dr.id)||[]))),xe}),K.name==="search_web"&&K.content){const Je=eF(K.name,K.content);Je&&(g(Je),console.log("Search result added to SearchTab:",Je))}break;case"tool_progress":console.log(" Tool progress event:",K),K.tool_call_id&&(K.tool_name==="scrape_web_content"?ie(Je=>{const xe=new Map(Je),Fe=xe.get(K.tool_call_id)||[];return xe.set(K.tool_call_id,[...Fe,K]),xe}):xa(Je=>{const xe=new Map(Je),Fe=xe.get(K.tool_call_id)||[];return xe.set(K.tool_call_id,[...Fe,K]),xe}));break;case"search_progress":if(console.log(" Search progress event:",K),console.log(" Current searchProgress size:",Oe.size),console.log(" isLoading:",z),K.tool==="search_web"){K.phase==="searching"&&Ye(new Map);let Je;K.phase==="fetching_result"||K.phase==="result_loaded"||K.phase==="result_failed"?Je=`search_web_result_${K.result_index||0}`:Je=`search_web_${K.phase}`,Ye(xe=>{const Fe=new Map(xe);return Fe.set(Je,K),console.log(" Updated searchProgress, new size:",Fe.size,"key:",Je),Fe}),(K.phase==="searching"||K.phase==="results_found")&&U(xe=>{for(let Fe=xe.length-1;Fe>=0;Fe--){const $t=xe[Fe];if($t.role==="assistant"&&$t.tool_calls&&$t.tool_calls.findIndex(rt=>rt.function.name==="search_web")!==-1){Qe(rt=>{const Dr=new Set(rt);return Dr.add(Fe),Dr});break}}return xe})}break;case"youtube_search_progress":console.log(" YouTube search progress event:",K),K.phase==="searching"&&xr(new Map);const ya=`youtube_${K.phase}`;xr(Je=>{const xe=new Map(Je);return xe.set(ya,K),xe}),K.phase==="complete"&&setTimeout(()=>{xr(new Map)},1e3),K.phase==="searching"&&U(Je=>{for(let xe=Je.length-1;xe>=0;xe--){const Fe=Je[xe];if(Fe.role==="assistant"&&Fe.tool_calls&&Fe.tool_calls.findIndex(St=>St.function.name==="search_youtube")!==-1){Qe(St=>{const rt=new Set(St);return rt.add(xe),rt});break}}return Je});break;case"javascript_execution_progress":console.log(" JavaScript execution progress:",K);const Ln=K.phase==="console_output"?`js_output_${K.output_number||Date.now()}`:`js_${K.phase}`;xt(Je=>{const xe=new Map(Je);return xe.set(Ln,K),xe}),(K.phase==="completed"||K.phase==="error")&&setTimeout(()=>{xt(new Map)},2e3);break;case"image_generation_progress":console.log(" Image generation progress:",K);const Ki=`img_${K.phase}`;_t(Je=>{const xe=new Map(Je);return xe.set(Ki,K),xe}),(K.phase==="completed"||K.phase==="error")&&setTimeout(()=>{_t(new Map)},2e3);break;case"chart_generation_progress":console.log(" Chart generation progress:",K);const Tl=`chart_${K.phase}`;pr(Je=>{const xe=new Map(Je);return xe.set(Tl,K),xe}),K.phase==="completed"&&setTimeout(()=>{pr(new Map)},2e3);break;case"scrape_progress":case"transcript_extracted":if(Wt==="transcript_extracted"){console.log(" Skipping transcript_extracted event (hidden from UI):",K);break}console.log(" Content extraction event:",K),K.phase==="content_extracted"&&Na(Je=>{const xe=new Map(Je),Fe=K.url||`extraction_${Date.now()}`;return xe.set(Fe,K),xe});break;case"message_complete":K.tool_calls&&K.tool_calls.length>0&&console.log(" message_complete with tool_calls:",K.tool_calls.map(Je=>({id:Je.id,name:Je.function.name}))),console.log(" message_complete imageGenerations:",K.imageGenerations?.length||0,"imageGenerations:",K.imageGenerations),dt!==null?(U(Je=>{const xe=[...Je];if(xe[dt]){let Fe=xe[dt].imageGenerations||[];K.imageGenerations&&K.imageGenerations.length>0&&(Fe=[...Fe],K.imageGenerations.forEach(St=>{const rt=Fe.findIndex(Dr=>Dr.id===St.id);rt>=0?Fe[rt]={...Fe[rt],...St}:Fe.push(St)}));const $t={...xe[dt],content:K.content||xe[dt].content||"",tool_calls:K.tool_calls||xe[dt].tool_calls,extractedContent:K.extractedContent||xe[dt].extractedContent,imageGenerations:Fe,llmApiCalls:K.llmApiCalls||xe[dt].llmApiCalls,evaluations:K.evaluations||xe[dt].evaluations,isStreaming:!1};K.toolResults&&$t.toolResults&&($t.toolResults=$t.toolResults.map(St=>{const rt=K.toolResults.find(Dr=>Dr.tool_call_id===St.tool_call_id);return rt?{...St,rawResponse:rt.rawResponse,extractionMetadata:rt.extractionMetadata}:St})),xe[dt]=$t}return xe}),jt(null),Re("")):(K.content||K.tool_calls)&&(U(Je=>{const xe=Je[Je.length-1],Fe=Je.length-1,$t=(K.content||"").trim(),St=xe?.content?Qr(xe.content).trim():"";let rt=!1;for(let _n=Je.length-1;_n>=0&&Je[_n].role!=="assistant";_n--)if(Je[_n].role==="tool"){rt=!0;break}if(rt){if(xe?.role==="assistant"&&xe.isStreaming){console.log(" Updating last assistant message with message_complete data");const on=[...Je];let Jr=xe.imageGenerations||[];K.imageGenerations&&K.imageGenerations.length>0&&(Jr=[...Jr],K.imageGenerations.forEach(Ur=>{const zn=Jr.findIndex(as=>as.id===Ur.id);zn>=0?Jr[zn]={...Jr[zn],...Ur}:Jr.push(Ur)}));const si={...xe,content:K.content||xe.content||"",tool_calls:K.tool_calls||xe.tool_calls,extractedContent:K.extractedContent||xe.extractedContent,imageGenerations:Jr,llmApiCalls:K.llmApiCalls||xe.llmApiCalls,evaluations:K.evaluations||xe.evaluations,isStreaming:!1};return K.toolResults&&si.toolResults&&(si.toolResults=si.toolResults.map(Ur=>{const zn=K.toolResults.find(as=>as.tool_call_id===Ur.tool_call_id);return zn?(console.log(" Updating embedded toolResult with rawResponse:",{tool_call_id:Ur.tool_call_id,hasRawResponse:!!zn.rawResponse,rawResponseLength:zn.rawResponse?.length}),{...Ur,rawResponse:zn.rawResponse,extractionMetadata:zn.extractionMetadata}):Ur})),on[Fe]=si,on}console.log(" Creating new assistant message for new iteration");const _n={role:"assistant",content:K.content||"",...K.tool_calls&&{tool_calls:K.tool_calls},...K.extractedContent&&{extractedContent:K.extractedContent},...K.imageGenerations&&{imageGenerations:K.imageGenerations},...K.llmApiCalls&&{llmApiCalls:K.llmApiCalls},...K.evaluations&&{evaluations:K.evaluations}};return[...Je,_n]}if(xe?.role==="assistant"&&(xe.isStreaming||!St||St&&$t.startsWith(St))){console.log(" Updating last assistant message with message_complete data"),console.log(" lastMessage.imageGenerations:",xe.imageGenerations),console.log(" data.imageGenerations:",K.imageGenerations);const on=[...Je];let Jr=xe.imageGenerations||[];console.log(" mergedImageGenerations BEFORE merge:",Jr),K.imageGenerations&&K.imageGenerations.length>0&&(Jr=[...Jr],K.imageGenerations.forEach(Ur=>{console.log(" Processing imageGeneration from message_complete:",{id:Ur.id,hasBase64:!!Ur.base64,base64Length:Ur.base64?.length,hasImageUrl:!!Ur.imageUrl});const zn=Jr.findIndex(as=>as.id===Ur.id);if(zn>=0){const as=Jr[zn].base64;console.log(" Merging - existing has base64:",!!as,"new has base64:",!!Ur.base64),Jr[zn]={...Jr[zn],...Ur,base64:Ur.base64||as},console.log(" After merge - has base64:",!!Jr[zn].base64)}else Jr.push(Ur),console.log(" Added new image to merge")})),console.log(" mergedImageGenerations AFTER merge:",Jr);const si={...xe,content:K.content||xe.content||"",tool_calls:K.tool_calls||xe.tool_calls,extractedContent:K.extractedContent||xe.extractedContent,imageGenerations:Jr,llmApiCalls:K.llmApiCalls||xe.llmApiCalls,evaluations:K.evaluations||xe.evaluations,isStreaming:!1};return console.log(" updatedMessage.imageGenerations:",si.imageGenerations),on[Fe]=si,console.log(" newMessages[lastMessageIndex].imageGenerations:",on[Fe].imageGenerations),console.log(" RETURNING newMessages array:",on.map((Ur,zn)=>({idx:zn,role:Ur.role,hasImageGenerations:!!Ur.imageGenerations,imageGenerationsLength:Ur.imageGenerations?.length,actualImageGenerations:Ur.imageGenerations}))),on}if(xe?.role==="assistant"&&!xe.isStreaming&&St===$t)return console.log(" Skipping duplicate final message block (content matches non-streaming block)"),Je;const Dr={role:"assistant",content:K.content||"",...K.tool_calls&&{tool_calls:K.tool_calls},...K.extractedContent&&{extractedContent:K.extractedContent},...K.imageGenerations&&{imageGenerations:K.imageGenerations},...K.llmApiCalls&&{llmApiCalls:K.llmApiCalls},...K.evaluations&&{evaluations:K.evaluations}};if(K.content?.includes("Based on the search results above")||K.content?.includes("I apologize, but I was unable to generate a response")||K.content?.includes("I was unable to provide")||!K.content&&!K.tool_calls||K.content&&K.content.trim().length<10&&!K.tool_calls){let _n=-1;for(let on=Je.length-1;on>=0;on--)if(Je[on].role==="user"){_n=on;break}Dr.isRetryable=!0,Dr.originalErrorMessage="Incomplete or fallback response",Dr.originalUserPromptIndex=_n>=0?_n:void 0,Dr.retryCount=0}return[...Je,Dr]}),Re(""));break;case"provider_fallback":console.log(" Provider fallback:",K);const Ed=` ${K.originalModel} hit rate limit, switching to ${K.fallbackModel} (attempt ${K.attempt})`;U(Je=>[...Je,{role:"system",content:Ed,timestamp:new Date().toISOString(),metadata:{type:"provider_fallback",originalModel:K.originalModel,fallbackModel:K.fallbackModel,fallbackProvider:K.fallbackProvider,reason:K.reason,attempt:K.attempt,phase:K.phase,iteration:K.iteration}}]);break;case"complete":console.log("Stream complete:",K),K.extractedContent&&(console.log(" Attaching extractedContent from complete event:",{hasAllImages:!!K.extractedContent.allImages,allImagesCount:K.extractedContent.allImages?.length||0,hasImages:!!K.extractedContent.images,imagesCount:K.extractedContent.images?.length||0}),U(Je=>{const xe=[...Je];for(let Fe=xe.length-1;Fe>=0;Fe--)if(xe[Fe].role==="assistant"){xe[Fe]={...xe[Fe],extractedContent:K.extractedContent},console.log(` Attached extractedContent to assistant message at index ${Fe}`);break}return xe})),K.cost&&typeof K.cost=="number"&&(R(K.cost),Ge(K.cost),console.log(` Request cost: $${K.cost.toFixed(4)}`));break;case"error":const vs=K.error;if(K.type==="input_moderation_error"){console.warn(" Input moderation error:",K.reason);const xe={role:"assistant",content:` **Content Moderation Alert**

${vs}

**Reason**: ${K.reason}

**Violations**: ${K.violations?.join(", ")||"Unknown"}`,llmApiCalls:K.llmApiCalls||[]};if(U(Fe=>[...Fe,xe]),K.suggestedRevision){ue(K.suggestedRevision);const Fe={role:"assistant",content:` **Suggested Revision**

We've updated your message to comply with content policies. You can edit and send it again.`};U($t=>[...$t,Fe])}else ue("");break}if(K.type==="output_moderation_error"){console.warn(" Output moderation error:",K.reason);const Je=` **Content Moderation Alert**

The generated response was flagged by our content moderation system and cannot be displayed.

**Reason**: ${K.reason}

Please try rephrasing your question.`;U(xe=>{const Fe=[...xe];for(let $t=Fe.length-1;$t>=0;$t--)if(Fe[$t].role==="assistant"){Fe[$t]={...Fe[$t],content:Je,guardrailFailed:!0,guardrailReason:K.reason,guardrailViolations:K.violations,llmApiCalls:K.llmApiCalls||Fe[$t].llmApiCalls||[],isStreaming:!1},console.log(` Replaced assistant message content at index ${$t} with guardrail error`);break}return Fe});break}if(K.type==="guardrail_configuration_error"||K.type==="guardrail_system_error"){console.error(" Guardrail system error:",K.error);const xe={role:"assistant",content:` **System Error**

${vs}

The content moderation system is experiencing issues. Please contact support if this persists.`};U(Fe=>[...Fe,xe]),S(vs);break}S(vs),(vs.includes("Authentication")||vs.includes("UNAUTHORIZED")||K.code==="UNAUTHORIZED")&&(console.warn(" Authentication error detected, logging out..."),_("Your session has expired. Please sign in again.")),K.code==="MAX_ITERATIONS"&&K.showContinueButton&&K.continueContext&&(console.log(" Continue button enabled for MAX_ITERATIONS error:",vs),er(!0),In(K.continueContext));const ap={role:"assistant",content:` Error: ${vs}`,errorData:K,isRetryable:!0,originalErrorMessage:vs,originalUserPromptIndex:it,retryCount:0};U(Je=>[...Je,ap]);break;case"llm_request":console.log(" LLM API Request:",K),U(Je=>{const xe=[...Je],$t=xe[xe.length-1]?.role==="tool";let St=!1;if(!$t){for(let rt=xe.length-1;rt>=0;rt--)if(xe[rt].role==="assistant"){const Dr=Qr(xe[rt].content);xe[rt].isStreaming||!xe[rt].content||Dr.trim().length===0?(console.log(" Attaching llmApiCalls to active assistant at index:",rt,"phase:",K.phase,"provider:",K.provider,"model:",K.model),xe[rt]={...xe[rt],llmApiCalls:[...xe[rt].llmApiCalls||[],{phase:K.phase,provider:K.provider||"Unknown",model:K.model||"Unknown",request:K.request,timestamp:K.timestamp}]},St=!0):console.log(" Skipping completed assistant at index:",rt,"(from previous query)");break}}return St||(console.log(" Creating new placeholder for llm_request, reason:",$t?"tools executed":"no active assistant","provider:",K.provider,"model:",K.model),xe.push({role:"assistant",content:"",isStreaming:!0,llmApiCalls:[{phase:K.phase,provider:K.provider||"Unknown",model:K.model||"Unknown",request:K.request,timestamp:K.timestamp}]})),xe});break;case"llm_response":console.log(" LLM API Response:",K),U(Je=>{const xe=[...Je];for(let Fe=xe.length-1;Fe>=0;Fe--)if(xe[Fe].role==="assistant"&&xe[Fe].llmApiCalls){const $t=xe[Fe].llmApiCalls,St=$t[$t.length-1];St&&St.phase===K.phase&&!St.response&&(St.response=K.response,St.httpHeaders=K.httpHeaders,St.httpStatus=K.httpStatus,K.provider&&(St.provider=K.provider),K.model&&(St.model=K.model),console.log(" Updated llmApiCall response for phase:",K.phase,"provider:",St.provider,"model:",St.model),xe[Fe]={...xe[Fe],llmApiCalls:[...$t]});break}return xe});break;case"todos_updated":console.log(" Todos updated:",K),ua({total:K.total??0,remaining:K.remaining??0,current:K.current??null,items:Array.isArray(K.items)?K.items:[]});break;case"todos_current":console.log(" Todos current update:",K),ua(Je=>({total:K.total??Je?.total??0,remaining:K.remaining??Je?.remaining??0,current:K.current??Je?.current??null,items:Je?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",K),Ir(K?.next||K?.state?.current?.description||null),setTimeout(()=>Ir(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",K),_(K.message||"Todo auto-progression limit reached. Please continue manually.");break;case"snippet_inserted":console.log(" Snippet inserted:",K),window.dispatchEvent(new CustomEvent("snippet_inserted",{detail:K})),T(`Saved snippet: ${K.title}`),K.id&&(console.log(" Triggering snippet sync from Google Sheets for ID:",K.id),setTimeout(async()=>{try{await k(K.id)}catch(Je){console.error(" Failed to sync snippet:",Je)}},500));break;case"snippet_deleted":console.log(" Snippet deleted:",K),window.dispatchEvent(new CustomEvent("snippet_deleted",{detail:K})),T(`Deleted snippet: ${K.title}`);break;case"snippet_updated":console.log(" Snippet updated:",K),window.dispatchEvent(new CustomEvent("snippet_updated",{detail:K})),T(`Updated snippet: ${K.title}`);break;case"token_refreshed":console.log(" Google OAuth token refreshed"),K.accessToken&&(localStorage.setItem("google_access_token",K.accessToken),console.log(" Updated google_access_token in localStorage"));break}},()=>{Te&&clearTimeout(Te),M(!1),X([]),Re(""),jt(null),Hr.current=null},Wt=>{Te&&clearTimeout(Te),console.error("Streaming error:",Wt),S(`Streaming error: ${Wt.message}`),M(!1),X([]),Hr.current=null},Hr.current.signal,_l,Sd)}catch(De){if(console.error("Chat error:",De),Te&&clearTimeout(Te),De instanceof Error&&De.name==="AbortError"){const pe={role:"assistant",content:" Request timed out after 4 minutes. This may happen when tools take too long to execute. Try simplifying your request or disabling some tools.",isRetryable:!0,originalErrorMessage:"Request timed out",originalUserPromptIndex:it,retryCount:0};U(et=>[...et,pe]),_("Request timed out after 4 minutes. Try disabling some tools or simplifying your request.")}else{const pe=De instanceof Error?De.message:"Unknown error",et={role:"assistant",content:` Error: ${pe}`,errorData:De instanceof Error?{...De,message:De.message,name:De.name,stack:De.stack}:{message:String(De)},isRetryable:!0,originalErrorMessage:pe,originalUserPromptIndex:it,retryCount:0};U(Ve=>[...Ve,et]),S(`Chat error: ${pe}`)}M(!1),X([]),Hr.current=null}},Hm=async P=>{const te=j[P];if(!te||!te.isRetryable){S("This message cannot be retried");return}const Le=te.retryCount||0;if(Le>=3){S("Maximum retry attempts (3) reached");return}const it=te.originalUserPromptIndex;if(it===void 0||it<0){S("Cannot find original user prompt for retry");return}const Ue=j[it];if(!Ue||Ue.role!=="user"){S("Invalid user prompt for retry");return}const Z=j.slice(it+1,P),Ke=Z.filter(pe=>pe.role==="tool"),Te=Z.filter(pe=>pe.role==="assistant"||pe.role==="tool");console.log(" Retrying request:",{userPromptIndex:it,messageIndex:P,retryCount:Le+1,previousToolResults:Ke.length,intermediateMessages:Te.length,failureReason:te.originalErrorMessage}),T(`Retrying request (attempt ${Le+2}) with full context...`),U(pe=>pe.slice(0,P));const De=Qr(Ue.content);ue(De),ne.current=!0},qm=async P=>{const te=await KN(P.id);te&&te.messages?(U(te.messages),zr(P.id),localStorage.setItem("last_active_chat_id",P.id),te.systemPrompt&&D(te.systemPrompt),te.planningQuery&&ye(te.planningQuery),te.generatedSystemPrompt&&Et(te.generatedSystemPrompt),te.generatedUserQuery&&kt(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)?(ba(new Set(te.selectedSnippetIds)),console.log(` Restored ${te.selectedSnippetIds.length} attached snippets`)):ba(new Set),me(!1),T("Chat loaded successfully")):S("Failed to load chat")},vd=async P=>{await XN(P);const te=await Jy();rn(te),T("Chat deleted")},Gm=async()=>{if(ge.size===0)return;const P=ge.size;for(const Le of ge)await XN(Le);const te=await Jy();rn(te),Be(new Set),T(`${P} chat${P>1?"s":""} deleted`)},Ym=()=>{const P=new Set(Bt.map(te=>te.id));Be(P)},Wm=()=>{Be(new Set)},Vm=P=>{const te=new Set(ge);te.has(P)?te.delete(P):te.add(P),Be(te)},Km=async()=>{await che(),rn([]),Be(new Set),Ae(!1),me(!1),T("All chat history cleared")},ep=async()=>{if(!an){S("No continuation context available");return}console.log(" Continuing from error/limit with context:",an),er(!1),N();const P=[];t.web_search&&P.push({type:"function",function:{name:"web_search",description:"Search the web for information",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"}},required:["query"]}}}),t.execute_js&&P.push({type:"function",function:{name:"execute_js",description:"Execute JavaScript code",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute"}},required:["code"]}}}),t.scrape_url&&P.push({type:"function",function:{name:"scrape_web_content",description:"Scrape content from a URL",parameters:{type:"object",properties:{url:{type:"string",description:"URL to scrape"}},required:["url"]}}});const Le={providers:I.providers.filter(Ue=>Ue.enabled===!0),messages:an.messages,temperature:.7,stream:!0,isContinuation:!0,optimization:I.optimization||"cheap",language:I.language||"en"};console.log(` Continuation request with optimization: ${Le.optimization}`),console.log(` Response language: ${Le.language}`),$&&(Le.location={latitude:$.latitude,longitude:$.longitude,accuracy:$.accuracy,address:$.address,timestamp:$.timestamp},console.log(" Including location in continuation request:",$.address?.city||`${$.latitude.toFixed(4)}, ${$.longitude.toFixed(4)}`)),P.length>0&&(Le.tools=P),an.extractedContent&&(Le.extractedContent=an.extractedContent);const it=Rt.filter(Ue=>Ue.enabled);if(it.length>0&&(Le.mcp_servers=it.map(Ue=>({name:Ue.name,url:Ue.url}))),M(!0),!i){S("Please sign in to continue"),er(!0),M(!1);return}try{await m1(Le,i,(Ue,Z)=>{switch(console.log("SSE Event (continuation):",Ue,Z),Ue){case"delta":Z.content&&(Re(De=>De+Z.content),U(De=>{const pe=De.length-1,et=De[pe],Ve=et?.role==="tool";if(et&&et.role==="assistant"&&!Ve){const Ne=[...De];return Ne[pe]={...et,content:(et.content||"")+Z.content,isStreaming:!0},Ne}else{const Ne={role:"assistant",content:Z.content,isStreaming:!0};return[...De,Ne]}}));break;case"error":const Ke=Z.error;S(Ke),Z.showContinueButton&&Z.continueContext&&(er(!0),In(Z.continueContext));const Te={role:"assistant",content:` Error: ${Ke}`,errorData:Z,isRetryable:!0,originalErrorMessage:Ke,retryCount:0};U(De=>[...De,Te]);break;case"complete":console.log("Continuation complete:",Z),Z.cost&&typeof Z.cost=="number"&&R(Z.cost);break;case"todos_updated":console.log(" Todos updated:",Z),ua({total:Z.total??0,remaining:Z.remaining??0,current:Z.current??null,items:Array.isArray(Z.items)?Z.items:[]});break;case"todos_current":console.log(" Todos current update:",Z),ua(De=>({total:Z.total??De?.total??0,remaining:Z.remaining??De?.remaining??0,current:Z.current??De?.current??null,items:De?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",Z),Ir(Z?.next||Z?.state?.current?.description||null),setTimeout(()=>Ir(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",Z),_(Z.message||"Todo auto-progression limit reached. Please continue manually.");break;default:console.log("Unhandled event in continuation:",Ue,Z)}},void 0,void 0,Hr.current?.signal)}catch(Ue){console.error("Error during continuation:",Ue),S(Ue instanceof Error?Ue.message:"Failed to continue"),er(!0)}finally{M(!1)}},tp=()=>{U([]),ue(""),D(""),ye(""),Et(""),kt(""),ba(new Set),f(),Qe(new Set),zr(null),localStorage.removeItem("last_active_chat_id"),setTimeout(()=>{We.current?.focus()},0),console.log("Started new chat - all prompts cleared")},Xm=()=>{!yt.name.trim()||!yt.url.trim()||(ur([...Rt,{id:`mcp_${Date.now()}`,name:yt.name,url:yt.url,enabled:!0}]),bt({name:"",url:""}))},Qm=P=>{ur(Rt.map(te=>te.id===P?{...te,enabled:!te.enabled}:te))},Jm=P=>{ur(Rt.filter(te=>te.id!==P))};return a.jsxs("div",{className:"flex flex-col h-full relative",onDragEnter:Lc,onDragOver:Jg,onDragLeave:Mc,onDrop:La,children:[vr&&a.jsx("div",{className:"absolute inset-0 z-50 bg-blue-500/20 dark:bg-blue-400/20 backdrop-blur-sm flex items-center justify-center border-4 border-dashed border-blue-500 dark:border-blue-400",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-2xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Drop files here"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Images (JPEG, PNG, GIF, WebP) and PDFs supported"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Max: 5MB for images, 10MB for PDFs"})]})})}),H&&a.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:a.jsx("div",{className:"flex items-center gap-2 max-w-screen-2xl mx-auto",children:a.jsx("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded transition-colors",onClick:()=>Gt(!zt),title:zt?"Click to collapse":"Click to expand",children:zt?H:H.length>200?H.substring(0,200)+"...":H})})}),a.jsx("div",{className:"flex flex-wrap items-center gap-2 px-2 md:p-4 py-2 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[a.jsxs("button",{onClick:tp,className:"bg-green-600 hover:bg-green-700 text-white p-2 md:px-3 md:py-1.5 rounded font-medium text-sm transition-colors flex items-center gap-1.5",title:"New Chat","aria-label":"New Chat",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"New Chat"})]}),a.jsxs("button",{onClick:()=>me(!0),className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:"Chat History","aria-label":"Chat History",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"History"})]}),a.jsxs("button",{onClick:()=>h("/planning"),className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:H?"Edit system prompt and planning":"Create a plan","aria-label":H?"Edit Plan":"Make A Plan",children:[a.jsx("span",{children:H?"":""}),a.jsx("span",{className:"hidden md:inline",children:H?"Edit Plan":"Make A Plan"})]}),a.jsxs("button",{onClick:()=>Jt(!0),className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:"Examples","aria-label":"Examples",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Examples"})]}),a.jsxs("button",{onClick:()=>Is(!Rs),className:`text-sm p-2 md:px-3 md:py-1.5 rounded font-medium transition-colors flex items-center gap-1.5 ${Rs?"bg-blue-600 hover:bg-blue-700 text-white":"btn-secondary"}`,title:"Attach knowledge base snippets as context for this conversation","aria-label":"Attach Context",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Attach Context"}),da.size>0&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-white text-blue-600 rounded-full font-bold",children:da.size})]})]})}),a.jsxs("div",{ref:Vn,className:"flex-1 overflow-y-auto px-2 md:p-4 py-4 space-y-4",children:[j.length===0&&a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:"No messages yet. Start a conversation!"}),(console.log(" RENDER: messages array:",j.map((P,te)=>({idx:te,role:P.role,hasImageGenerations:!!P.imageGenerations,imageGenerationsLength:P.imageGenerations?.length,actualImageGenerations:P.imageGenerations}))),null),j.map((P,te)=>{const Le=gt.has(te),it=P.content?Qr(P.content):"";console.log(`Rendering message ${te}:`,P.role,it.substring(0,50)),console.log(` Message ${te} imageGenerations:`,P.imageGenerations),P.role==="assistant"&&P.tool_calls&&console.log(`  Message ${te} has ${P.tool_calls.length} tool_calls:`,P.tool_calls.map(Z=>({id:Z.id,name:Z.function?.name})));const Ue=P.role==="assistant"&&P.tool_calls?.some(Z=>{if(Z.function.name!=="transcribe_url")return!1;const Ke=ma.get(Z.id);if(!Ke||Ke.length===0)return!1;const Te=Ke[Ke.length-1],De=Te.progress_type||Te.data?.type||"";return!(De==="transcribe_complete"||De==="transcription_stopped"||De==="error")});return P.role==="assistant"&&!P.content&&!Ue&&!P.tool_calls&&!P.isStreaming?null:a.jsx("div",{className:`flex gap-2 ${P.role==="user"?"flex-row-reverse":(P.role==="tool","")}`,children:a.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${P.role==="user"?"bg-blue-500 text-white":P.role==="tool"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700":P.content&&Qr(P.content).startsWith(" Error:")?"bg-pink-100 dark:bg-pink-900/30 border-2 border-pink-400 dark:border-pink-600 text-gray-900 dark:text-gray-100":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[P.role==="tool"&&(()=>{let Z=null;console.log(" Searching for tool_call_id:",P.tool_call_id,"in",j.length,"messages");for(let pe=te-1;pe>=0;pe--)if(j[pe].tool_calls&&(console.log("  Found message at index",pe,"with",j[pe].tool_calls?.length,"tool_calls"),Z=j[pe].tool_calls?.find(et=>et.id===P.tool_call_id),Z)){console.log(" Found tool call for",P.name,":",Z);break}Z||console.log(" No tool call found for",P.tool_call_id);let Ke=null;if(P.name==="search_web"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);pe.results&&Array.isArray(pe.results)&&(Ke=pe.results)}catch{}let Te=null;if(P.name==="scrape_web_content"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);(pe.url||pe.content||pe.error)&&(Te=pe)}catch{}let De=null;if(P.name==="execute_javascript"&&typeof P.content=="string")try{const pe=JSON.parse(P.content);(pe.result!==void 0||pe.error)&&(De=pe)}catch{}return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[a.jsxs("span",{children:[" ",P.name||"Tool Result"]}),Z&&(P.name==="search_web"||P.name==="search_youtube")&&(()=>{try{const pe=JSON.parse(Z.function.arguments);if(pe.query)return a.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',pe.query,'"']})}catch{}return null})()]}),a.jsx("button",{onClick:()=>{const pe=new Set(gt);Le?pe.delete(te):pe.add(te),Qe(pe)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Le?"Collapse":"Expand",children:Le?"":""})]}),Le&&a.jsxs("div",{className:"text-xs space-y-2",children:[Z&&a.jsx("div",{className:"mb-3 bg-purple-50 dark:bg-purple-950/50 p-3 rounded border border-purple-200 dark:border-purple-800",children:Z.function.name==="search_web"?a.jsxs(a.Fragment,{children:[Z.function.arguments&&(()=>{try{const pe=JSON.parse(Z.function.arguments);if(pe.query)return a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:" Search Query:"}),a.jsxs("div",{className:"text-purple-900 dark:text-purple-100 italic",children:['"',pe.query,'"']})]})}catch(pe){console.error("Error parsing search arguments:",pe)}return null})(),(()=>{try{if(!P.content)return null;const et=(typeof P.content=="string"?JSON.parse(P.content):P.content)?.searchService;if(et&&typeof et=="string"){const Ve=et==="tavily";return a.jsxs("div",{className:"mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Search Provider:"}),a.jsx("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${Ve?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border border-blue-300 dark:border-blue-700":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border border-green-300 dark:border-green-700"}`,children:Ve?" Tavily API":" DuckDuckGo"})]})}}catch(pe){console.error("Error parsing search provider:",pe)}return null})()]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"Function Call:"}),a.jsx("div",{className:"font-mono text-xs mb-2",children:a.jsx("span",{className:"text-purple-900 dark:text-purple-100",children:Z.function.name})}),Z.function.arguments&&(()=>{try{const pe=JSON.parse(Z.function.arguments);return pe.code?a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Code:"}),a.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:pe.code})})]}):a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:"Arguments:"}),a.jsx("div",{className:"bg-gray-900 dark:bg-gray-950 p-3 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:a.jsx(Tg,{data:pe,expandAll:!0})})]})}catch(pe){console.error("Error parsing tool arguments:",pe)}return null})()]})}),P.tool_call_id&&P.name!=="search_web"&&a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Call ID:"}),a.jsx("div",{className:"font-mono text-xs bg-purple-50 dark:bg-purple-950 p-1 rounded mt-1 break-all",children:P.tool_call_id})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Result:"}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950 p-2 rounded mt-1 max-h-96 overflow-y-auto",children:[Ke?a.jsx(she,{results:Ke}):Te?a.jsxs("div",{className:"space-y-2",children:[Te.url&&a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"URL:"}),a.jsx("a",{href:Te.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block mt-1",children:Te.url})]}),Te.rawHtml&&a.jsx("button",{onClick:()=>Sr({url:Te.url,html:Te.rawHtml}),className:"flex-shrink-0 px-3 py-1.5 text-xs bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors font-medium",title:"View raw uncompressed HTML",children:" Raw HTML"})]}),Te.error&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[a.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"Error:"}),a.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1",children:Te.error})]}),Te.content&&a.jsxs("div",{children:[a.jsxs("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:[" Page Content (",Te.content.length.toLocaleString()," characters)",Te.format&&a.jsxs("span",{className:"ml-2 text-xs text-purple-600 dark:text-purple-400",children:["[",Te.format,"]"]})]}),a.jsx("div",{className:"mt-2 p-3 bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 max-h-80 overflow-y-auto",children:Te.format==="markdown"?a.jsx("div",{className:"text-xs",children:a.jsx(Tu,{content:Te.content})}):a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:Te.content})})]}),(Te.images||Te.allImages||Te.youtube||Te.media||Te.links)&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[a.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-3",children:" Extracted Content"}),a.jsxs("div",{className:"space-y-3",children:[Te.images&&Te.images.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Prioritized Images (sent to LLM): ",Te.images.length]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Te.images.map((pe,et)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[a.jsx("img",{src:pe.src,alt:pe.alt||`Image ${et+1}`,className:"w-full h-24 object-cover rounded mb-1",loading:"lazy"}),pe.alt&&a.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 truncate",children:pe.alt})]},et))})]}),Te.allImages&&Te.allImages.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" All Images: ",Te.allImages.length]}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:Te.allImages.slice(0,24).map((pe,et)=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-1",children:a.jsx("img",{src:pe.src,alt:pe.alt||`Image ${et+1}`,className:"w-full h-16 object-cover rounded",loading:"lazy"})},et))}),Te.allImages.length>24&&a.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Te.allImages.length-24," more"]})]}),Te.youtube&&Te.youtube.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" YouTube Videos: ",Te.youtube.length]}),a.jsx("div",{className:"space-y-1",children:Te.youtube.map((pe,et)=>a.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},et))})]}),Te.media&&Te.media.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Media (Audio/Video): ",Te.media.length]}),a.jsx("div",{className:"space-y-1",children:Te.media.map((pe,et)=>a.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},et))})]}),Te.links&&Te.links.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Links: ",Te.links.length]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:Te.links.slice(0,20).map((pe,et)=>a.jsx("a",{href:pe.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:pe.text||pe.url},et))}),Te.links.length>20&&a.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Te.links.length-20," more links"]})]})]})]})]}):De?a.jsxs("div",{className:"space-y-3",children:[De.error&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[a.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),a.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:De.error})]}),De.result!==void 0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:" Output:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(De.result)),T("Output copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),a.jsx("button",{onClick:()=>{Xr(String(De.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),Z?.executedAt&&a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mb-2",children:["(",Z.runtime||"N/A",")"]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(De.result)})})]})]}):P.name==="generate_chart"?(()=>{let pe=null;for(let et=te-1;et>=0&&!(j[et].role==="assistant"&&j[et].content&&(pe=jc(j[et].content),pe));et--);return a.jsx(WN,{content:P.content,chartCode:pe||void 0})})():a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:Qr(P.content)}),a.jsx(YN,{rawResponse:P.rawResponse,extractionMetadata:P.extractionMetadata}),P.content&&a.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[a.jsxs("button",{onClick:()=>Xr(Qr(P.content),"tool",P.name),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),P.name==="search_web"&&a.jsx("button",{onClick:()=>P.llmApiCalls&&P.llmApiCalls.length>0?Aa(te):null,className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${P.llmApiCalls&&P.llmApiCalls.length>0?"bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 cursor-pointer":"text-gray-500 dark:text-gray-500 cursor-default"}`,title:P.llmApiCalls&&P.llmApiCalls.length>0?`View LLM summarization info  ${Yi(ai(P))}`:"No LLM summarization used",children:P.llmApiCalls&&P.llmApiCalls.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",Yi(ai(P))]}),a.jsx("span",{className:"ml-0.5",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"text-[10px]",children:"No summarization"})]})}),P.name!=="search_web"&&P.llmApiCalls&&P.llmApiCalls.length>0&&a.jsxs("button",{onClick:()=>Aa(te),className:"text-xs px-1.5 py-0.5 rounded bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 flex items-center gap-1 transition-colors",title:`View LLM transparency info  ${Yi(ai(P))}`,children:[a.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",Yi(ai(P))]}),a.jsx("span",{className:"ml-0.5",children:""})]})]})]})]})]})]})})(),P.role!=="tool"&&a.jsxs(a.Fragment,{children:[P.role==="assistant"?a.jsxs("div",{children:[te===j.length-1&&Oe.size>0&&a.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Oe.values()).map((Z,Ke)=>a.jsx(Gde,{data:Z},Ke))}),te===j.length-1&&Pt.size>0&&a.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Pt.values()).map((Z,Ke)=>a.jsx(Yde,{data:Z},Ke))}),te===j.length-1&&wr.size>0&&a.jsx("div",{className:"mb-3 space-y-2",children:Array.from(wr.values()).map((Z,Ke)=>a.jsx(Wde,{data:Z},Ke))}),te===j.length-1&&pt.size>0&&a.jsx("div",{className:"mb-3 space-y-2",children:Array.from(pt.values()).map((Z,Ke)=>a.jsx(Vde,{data:Z},Ke))}),te===j.length-1&&Kr.size>0&&a.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Kr.values()).map((Z,Ke)=>a.jsx(Kde,{data:Z},Ke))}),P.tool_calls&&P.tool_calls.map((Z,Ke)=>{if(Z.function.name==="transcribe_url"&&ma.has(Z.id)){console.log(`    Rendering TranscriptionProgress for tool_call ${Ke}: ${Z.id}`);const Te=ma.get(Z.id);if(!Te||Te.length===0)return console.log(`      No events for ${Z.id}, skipping`),null;const De=Te[Te.length-1],pe=De.progress_type||De.data?.type||"",et=pe==="transcribe_complete"||pe==="transcription_stopped"||pe==="error";if(console.log(`      Last event type: ${pe}, isComplete: ${et}`),et)return console.log("      Transcription complete, skipping progress render"),null;console.log(`       Rendering progress component for ${Z.id}`);const Ve=JSON.parse(Z.function.arguments||"{}");return a.jsx("div",{className:"mb-3",children:a.jsx(Hde,{toolCallId:Z.id,url:Ve.url||"",events:Te||[],onStop:yd})},Z.id)}if(Z.function.name==="scrape_web_content"&&Sn.has(Z.id)){console.log(`    Rendering ScrapingProgress for tool_call ${Ke}: ${Z.id}`);const Te=Sn.get(Z.id);if(!Te||Te.length===0)return console.log(`      No events for ${Z.id}, skipping`),null;const De=Te[Te.length-1],pe=De.progress_type||De.data?.type||"",et=pe==="scrape_complete"||pe==="scrape_error";if(console.log(`      Last event type: ${pe}, isComplete: ${et}`),et)return console.log("      Scraping complete, skipping progress render"),null;console.log(`       Rendering scraping progress component for ${Z.id}`);const Ve=JSON.parse(Z.function.arguments||"{}");return a.jsx("div",{className:"mb-3",children:a.jsx(qde,{toolCallId:Z.id,url:Ve.url||"",events:Te||[]})},Z.id)}return null}),P.tool_calls&&P.tool_calls.length>0&&!P.toolResults&&a.jsx("div",{className:"mb-3 space-y-2",children:P.tool_calls.map((Z,Ke)=>{let Te={},De=null;try{Te=JSON.parse(Z.function.arguments||"{}")}catch(pe){De=`Invalid JSON: ${Z.function.arguments}`,console.error(`Failed to parse tool call arguments for ${Z.id}:`,pe)}return a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-2",children:[a.jsxs("span",{children:[" ",Z.function.name]}),De&&a.jsx("span",{className:"text-red-600 dark:text-red-400 font-normal",children:" Malformed arguments"})]}),a.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:De?a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded p-2 font-mono text-[10px]",children:De}):Object.entries(Te).map(([pe,et])=>a.jsxs("div",{children:[a.jsxs("span",{className:"font-semibold",children:[pe,":"]})," ",a.jsx("span",{className:"font-mono",children:typeof et=="string"?et:JSON.stringify(et)})]},pe))})]},Ke)})}),P.tool_calls&&!P.toolResults&&!P.isStreaming&&a.jsxs("div",{className:"mb-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[" Executing ",P.tool_calls.length," tool",P.tool_calls.length>1?"s":"","..."]})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"flex-1",children:P.content&&(()=>{let Z;if(P.toolResults){const Ke=P.toolResults.find(Te=>Te.name==="generate_chart");if(Ke)try{const Te=typeof Ke.content=="string"?JSON.parse(Ke.content):Ke.content;Z=Te.description||Te.chart_type}catch{}}return a.jsx(Tu,{content:Qr(P.content),chartDescription:Z})})()}),P.content&&!P.isStreaming&&a.jsx(zv,{text:Qr(P.content),variant:"icon",shouldSummarize:Qr(P.content).length>500})]}),P.isStreaming&&a.jsx("span",{className:"inline-block w-2 h-4 bg-gray-500 animate-pulse ml-1"}),(()=>{const Z=j[te+1];if(Z&&Z.role==="tool"){const Ke=[];if(P.tool_calls&&P.tool_calls.forEach(Te=>{if(Te.function?.name==="search_youtube"){const De=j.find((pe,et)=>et>te&&pe.role==="tool"&&pe.tool_call_id===Te.id);if(De&&De.content)try{const pe=typeof De.content=="string"?JSON.parse(De.content):De.content;pe.videos&&Array.isArray(pe.videos)&&Ke.push(...pe.videos)}catch(pe){console.error("Failed to parse YouTube results:",pe)}}}),Ke.length>0)return a.jsx(ahe,{videos:Ke})}return null})(),(()=>{if(!P.extractedContent)return null;const Z=P.extractedContent;return Z.prioritizedImages&&Z.prioritizedImages.length>0||Z.allLinks&&Z.allLinks.length>0||Z.allImages&&Z.allImages.length>0||Z.youtubeVideos&&Z.youtubeVideos.length>0||Z.otherVideos&&Z.otherVideos.length>0||Z.media&&Z.media.length>0?a.jsxs("div",{className:"mt-4 space-y-4",children:[Z.prioritizedImages&&Z.prioritizedImages.length>0&&a.jsx(the,{images:Z.prioritizedImages.map(Te=>Te.src),maxDisplay:3,onImageClick:Te=>window.open(Te,"_blank"),onGrabImage:yr}),Z.allLinks&&Z.allLinks.length>0&&a.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[a.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Links (",Z.allLinks.length,")"]}),a.jsx("div",{className:"p-4 space-y-2",children:Z.allLinks.map((Te,De)=>a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-2 last:border-b-0",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[De+1,"."]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("a",{href:Te.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium break-words",children:Te.title}),Te.snippet&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 italic",children:Te.snippet})]})]})},De))})]}),Z.allImages&&Z.allImages.length>0&&a.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[a.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Images (",Z.allImages.length,")"]}),a.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Z.allImages.map((Te,De)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:Te.src,alt:Te.alt||`Image ${De+1}`,className:"w-full h-32 object-cover rounded border border-gray-300 dark:border-gray-700 cursor-pointer hover:opacity-80",onClick:()=>window.open(Te.src,"_blank"),loading:"lazy"}),a.jsx("button",{onClick:()=>yr(Te.src,Te.alt||`Image ${De+1}`),className:"absolute top-2 right-2 p-1.5 bg-white dark:bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",title:"Grab image",children:a.jsx("svg",{className:"w-4 h-4 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},De))})]}),Z.youtubeVideos&&Z.youtubeVideos.length>0&&a.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[a.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" YouTube Videos (",Z.youtubeVideos.length,")"]}),a.jsx("div",{className:"p-4 space-y-2",children:Z.youtubeVideos.map((Te,De)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[De+1,"."]}),a.jsx("a",{href:Te.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Te.title})]},De))})]}),Z.otherVideos&&Z.otherVideos.length>0&&a.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[a.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Other Videos (",Z.otherVideos.length,")"]}),a.jsx("div",{className:"p-4 space-y-2",children:Z.otherVideos.map((Te,De)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[De+1,"."]}),a.jsx("a",{href:Te.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Te.title})]},De))})]}),Z.media&&Z.media.length>0&&a.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[a.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Audio & Other Media (",Z.media.length,")"]}),a.jsx("div",{className:"p-4 space-y-2",children:Z.media.map((Te,De)=>a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[De+1,"."]}),a.jsx("a",{href:Te.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Te.type||"Media"})]},De))})]})]}):null})(),P.toolResults&&P.toolResults.length>0&&a.jsx("div",{className:"mt-4 space-y-3",children:P.toolResults.filter(Z=>{if(Z.name==="generate_image")try{if(JSON.parse(Z.content).error)return!1}catch{}return!0}).map((Z,Ke)=>{const Te=gt.has(te*1e3+Ke);let De=null;if(Z.name==="search_web"&&typeof Z.content=="string")try{const Ne=JSON.parse(Z.content);Ne.results&&Array.isArray(Ne.results)&&(De=Ne.results)}catch{}let pe=null;if(Z.name==="scrape_web_content"&&typeof Z.content=="string")try{const Ne=JSON.parse(Z.content);(Ne.content||Ne.url)&&(pe=Ne)}catch{}let et=null,Ve="";if(Z.name==="execute_javascript"&&typeof Z.content=="string")try{const Ne=JSON.parse(Z.content);if(Ne.result!==void 0||Ne.error){et=Ne;const nt=P.tool_calls?.find(ir=>ir.id===Z.tool_call_id);if(nt)try{Ve=JSON.parse(nt.function.arguments).code||""}catch{}}}catch{}return a.jsxs("div",{className:"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[a.jsxs("span",{children:[" ",Z.name||"Tool Result"]}),P.tool_calls&&(Z.name==="search_web"||Z.name==="search_youtube")&&(()=>{const Ne=P.tool_calls.find(nt=>nt.id===Z.tool_call_id);if(Ne)try{const nt=JSON.parse(Ne.function.arguments);if(nt.query)return a.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',nt.query,'"']})}catch{}return null})(),Z.name==="scrape_web_content"&&(()=>{try{const Ne=typeof Z.content=="string"?JSON.parse(Z.content):Z.content;if(Ne.url||Ne.scrapeService||Ne.proxyUsed!==void 0)return a.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 flex items-center gap-1",children:[Ne.url&&a.jsxs("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["- ",new URL(Ne.url).hostname]}),Ne.scrapeService&&a.jsx("span",{className:"text-[10px] bg-purple-200 dark:bg-purple-800 px-1.5 py-0.5 rounded",children:Ne.scrapeService}),Ne.proxyUsed&&a.jsx("span",{className:"text-[10px] bg-green-200 dark:bg-green-800 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded",title:"Using proxy for enhanced privacy and bot detection evasion",children:" proxy"})]})}catch{}return null})()]}),a.jsx("button",{onClick:()=>{const Ne=new Set(gt),nt=te*1e3+Ke;Te?Ne.delete(nt):Ne.add(nt),Qe(Ne)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Te?"Collapse":"Expand",children:Te?"":""})]}),Te&&a.jsxs("div",{className:"text-xs space-y-2",children:[En.size>0&&Array.from(En.values()).filter(()=>Z.name==="search_web"||Z.name==="scrape_web_content"||Z.name==="transcribe_url").map((Ne,nt)=>a.jsx(Xde,{data:Ne},nt)),De&&De.length>0?a.jsx("div",{className:"space-y-3",children:De.map((Ne,nt)=>{const ir=te*1e6+Ke*1e3+nt,xn=gt.has(ir),ys=Ne.content||Ne.page_content,ns=typeof Ne.content=="string"?Ne.content:typeof Ne.page_content=="string"?Ne.page_content:JSON.stringify(Ne.page_content||Ne.content,null,2);return a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 overflow-hidden",children:[a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-purple-700 dark:text-purple-300 hover:underline block mb-1",children:Ne.title}),(Ne.snippet||Ne.description)&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2",children:Ne.snippet||Ne.description}),a.jsx("a",{href:Ne.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-[10px] break-all block",children:Ne.url})]}),ys&&a.jsx("button",{onClick:()=>{const ha=new Set(gt);xn?ha.delete(ir):ha.add(ir),Qe(ha)},className:"flex-shrink-0 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-xs",title:xn?"Hide details":"Show details",children:xn?"":""})]}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[Ne.state&&a.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${Ne.state==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"}`,children:Ne.state}),Ne.fetchTimeMs!==void 0&&a.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded",children:[" ",Ne.fetchTimeMs,"ms"]}),Ne.contentFormat&&a.jsx("span",{className:"text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:Ne.contentFormat}),Ne.intelligentlyExtracted&&a.jsx("span",{className:"text-[10px] bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-1.5 py-0.5 rounded",title:"Content intelligently extracted",children:" smart"}),Ne.truncated&&a.jsx("span",{className:"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-1.5 py-0.5 rounded",title:"Truncated to fit model",children:" truncated"})]})]}),xn&&ys&&a.jsxs("div",{className:"border-t border-purple-200 dark:border-purple-800 bg-purple-50/50 dark:bg-purple-900/10",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-purple-200 dark:border-purple-800",children:[a.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Scraping & Compression Details:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-[10px]",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Scrape Method:"})," ",a.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Ne.tier!==void 0?a.jsxs(a.Fragment,{children:["Tier ",Ne.tier," - ",Ne.scrapeMethod||Ne.scrapeService]}):"Direct HTTP Fetch"}),Ne.tier!==void 0&&a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-[9px] block mt-0.5",children:[Ne.tier===0&&"(Simple HTTP GET - fast, no browser)",Ne.tier===1&&"(Puppeteer - browser automation with stealth)",Ne.tier===2&&"(Playwright - advanced browser automation)",Ne.tier===3&&"(Selenium - complex interactions)",Ne.tier===4&&"(Interactive - manual CAPTCHA/login)"]})]}),Ne.responseTime!==void 0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Scrape Time:"})," ",a.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ne.responseTime,"ms"]})]}),Ne.fetchTimeMs!==void 0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total Time:"})," ",a.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ne.fetchTimeMs,"ms"]})]}),Ne.contentFormat&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",a.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:Ne.contentFormat})]}),(Ne.originalLength||Ne.originalContentLength)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Original Size:"})," ",a.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[((Ne.originalLength||Ne.originalContentLength)/1024).toFixed(1),"KB"]})]}),ns&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compressed Size:"})," ",a.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[(ns.length/1024).toFixed(1),"KB"]})]}),Ne.compressionRatio&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",a.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:[Ne.compressionRatio.toFixed(2),"x"]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression Strategy:"})," ",a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:Ne.intelligentlyExtracted?a.jsxs("span",{children:["Smart extraction",Ne.contentFormat==="markdown"?"  Markdown":"  Plain text",Ne.truncated&&"  Truncated to model limits"]}):a.jsx("span",{children:"Basic extraction"})})]}),a.jsx("div",{className:"col-span-2 mt-1 text-gray-500 dark:text-gray-400 italic",children:"Note: No LLM calls used for compression (rule-based extraction only)"})]})]}),a.jsxs("div",{className:"p-3 space-y-3",children:[Ne.rawHtml&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[a.jsx("span",{children:" Stage 1: Raw HTML from Scraper"}),a.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ne.rawHtml.length.toLocaleString()," chars"]})]}),a.jsx("button",{onClick:()=>{const ha=document.createElement("div");ha.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",ha.innerHTML=`
                                                                <div class="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col">
                                                                  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Raw HTML (${Ne.rawHtml.length.toLocaleString()} chars)</h3>
                                                                    <button class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="this.closest('.fixed').remove()">
                                                                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                                                      </svg>
                                                                    </button>
                                                                  </div>
                                                                  <div class="flex-1 overflow-auto p-4">
                                                                    <pre class="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap">${Ne.rawHtml.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>
                                                                  </div>
                                                                </div>
                                                              `,document.body.appendChild(ha)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full HTML"})]}),Ne.rawText&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[a.jsx("span",{children:" Stage 2: Raw Text (innerText)"}),a.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ne.rawText.length.toLocaleString()," chars"]})]}),a.jsx("button",{onClick:()=>{const ha=document.createElement("div");ha.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",ha.innerHTML=`
                                                                <div class="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col">
                                                                  <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">
                                                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Raw Text (${Ne.rawText.length.toLocaleString()} chars)</h3>
                                                                    <button class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="this.closest('.fixed').remove()">
                                                                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                                                      </svg>
                                                                    </button>
                                                                  </div>
                                                                  <div class="flex-1 overflow-auto p-4">
                                                                    <pre class="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap">${Ne.rawText}</pre>
                                                                  </div>
                                                                </div>
                                                              `,document.body.appendChild(ha)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full Text"})]}),Ne.afterSmartExtraction&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[a.jsx("span",{children:" Stage 3: After Smart Extraction (Headers/Nav/Footers Removed)"}),a.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ne.afterSmartExtraction.length.toLocaleString()," chars"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-48 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ne.afterSmartExtraction})})]}),Ne.afterSummarization&&Ne.beforeSummarization&&Ne.afterSummarization!==Ne.beforeSummarization&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[a.jsx("span",{children:" Stage 4: After AI Summarization"}),a.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ne.afterSummarization.length.toLocaleString()," chars"]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-amber-200 dark:border-amber-700 max-h-48 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ne.afterSummarization})})]}),Ne.sentToLLM&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-300 mb-2 flex items-center justify-between",children:[a.jsx("span",{children:" Stage 5: SENT TO LLM (Tool Result)"}),a.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ne.sentToLLM.length.toLocaleString()," chars"]})]}),a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded border-2 border-green-500 dark:border-green-600 max-h-64 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ne.sentToLLM})})]}),a.jsx("div",{className:"pt-2 border-t border-purple-200 dark:border-purple-800",children:a.jsxs("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 space-y-1",children:[a.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"Content Processing Pipeline:"}),Ne.rawHtml&&a.jsxs("div",{children:[" Raw HTML: ",Ne.rawHtml.length.toLocaleString()," chars"]}),Ne.rawText&&a.jsxs("div",{children:[" Raw Text: ",Ne.rawText.length.toLocaleString()," chars"]}),Ne.afterSmartExtraction&&a.jsxs("div",{children:[" Smart Extraction: ",Ne.afterSmartExtraction.length.toLocaleString()," chars"]}),Ne.afterSummarization&&Ne.beforeSummarization&&Ne.afterSummarization!==Ne.beforeSummarization&&a.jsxs("div",{children:[" After Summarization: ",Ne.afterSummarization.length.toLocaleString()," chars"]}),Ne.sentToLLM&&a.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:[" Sent to LLM: ",Ne.sentToLLM.length.toLocaleString()," chars"]})]})})]})]})]},nt)})}):pe?a.jsxs("div",{className:"space-y-3",children:[pe.error&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-3",children:[a.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Scraping Error:"}),a.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono whitespace-pre-wrap",children:pe.error})]}),pe.warning&&a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-2",children:[a.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:" Warning:"}),a.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-xs mt-1",children:pe.warning})]}),(pe.format||pe.compressionRatio||pe.originalLength||pe.extractedLength)&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Metadata:"}),(()=>{const nt=Array.from(En.values()).find(ir=>ir.url===pe.url)?.rawHtml;return nt?a.jsx("button",{onClick:()=>wt({html:nt,url:pe.url}),className:"text-xs px-2 py-1 bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-300 dark:hover:bg-purple-700",children:"View Raw HTML"}):null})()]}),a.jsx("table",{className:"w-full text-xs border-collapse",children:a.jsxs("tbody",{children:[pe.format&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Format:"}),a.jsx("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:pe.format==="markdown"?" Markdown":" Plain Text"})]}),typeof pe.originalLength=="number"&&typeof pe.extractedLength=="number"&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Size:"}),a.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[(pe.originalLength/1024).toFixed(1),"KB  ",(pe.extractedLength/1024).toFixed(1),"KB"]})]}),pe.compressionRatio&&typeof pe.compressionRatio=="number"&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:"Compression:"}),a.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[pe.compressionRatio.toFixed(1),"x"]})]})]})})]}),pe.content&&a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Content:"}),a.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-800 max-h-96 overflow-y-auto",children:pe.format==="markdown"?a.jsx(Tu,{content:pe.content}):a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 leading-relaxed",children:pe.content})})]})]}):et?a.jsxs("div",{className:"space-y-3",children:[Ve&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Code:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ve),T("Code copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy code to clipboard",children:"Copy"}),a.jsx("button",{onClick:()=>{Xr(Ve,"tool","JavaScript Code")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture code to Swag",children:"Grab"})]})]}),a.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:a.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:Ve})})]}),et.error&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[a.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),a.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:et.error})]}),et.result!==void 0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Output:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(et.result)),T("Output copied to clipboard!")},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),a.jsx("button",{onClick:()=>{Xr(String(et.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(et.result)})})]})]}):Z.name==="generate_chart"?a.jsx(WN,{content:Z.content,chartCode:jc(P.content)||void 0}):Z.name==="generate_image"?(()=>{const Ne=Z.tool_call_id||Z.id,nt=P.imageGenerations?.find(ir=>ir.id===Ne);if(nt)return a.jsxs("div",{className:"space-y-3 mt-3",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsx("table",{className:"w-full text-sm border-collapse border border-purple-200 dark:border-purple-800 rounded",children:a.jsxs("tbody",{children:[nt.prompt&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20 w-1/3",children:"Title/Prompt"}),a.jsx("td",{className:"py-2 px-3",children:nt.prompt})]}),nt.revisedPrompt&&nt.revisedPrompt!==nt.prompt&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Final Prompt"}),a.jsx("td",{className:"py-2 px-3",children:nt.revisedPrompt})]}),nt.size&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Size"}),a.jsx("td",{className:"py-2 px-3",children:nt.size})]}),nt.model&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Model"}),a.jsxs("td",{className:"py-2 px-3",children:[nt.provider,"/",nt.model]})]}),nt.qualityTier&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Quality"}),a.jsx("td",{className:"py-2 px-3 capitalize",children:nt.qualityTier})]}),nt.cost!==void 0&&a.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Cost"}),a.jsxs("td",{className:"py-2 px-3",children:["$",nt.cost.toFixed(4)]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Status"}),a.jsx("td",{className:"py-2 px-3",children:nt.status==="complete"?a.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:" Success"}):nt.status==="error"?a.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:" Failed"}):a.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:nt.status})})]})]})})}),nt.llmApiCall?.request&&a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[a.jsxs("button",{onClick:()=>{const ir=`img-req-${nt.id}`,xn=document.getElementById(ir);xn&&xn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[a.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Request Data"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("pre",{id:`img-req-${nt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(nt.llmApiCall.request,null,2)})]}),nt.llmApiCall?.response&&a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[a.jsxs("button",{onClick:()=>{const ir=`img-res-${nt.id}`,xn=document.getElementById(ir);xn&&xn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[a.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Response Data"}),a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("pre",{id:`img-res-${nt.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(nt.llmApiCall.response,null,2)})]})]});try{return typeof Z.content=="string"?JSON.parse(Z.content):Z.content,a.jsx(Qy,{content:Z.content})}catch{return a.jsx(Qy,{content:Z.content})}})():a.jsx(Qy,{content:Z.content})]}),Z.name==="generate_image"&&(()=>{const Ne=Z.tool_call_id||Z.id,nt=P.imageGenerations?.find(ir=>ir.id===Ne);if(nt&&(nt.status==="generating"||nt.status==="downloading")){const ir=nt.phase||"generating",xn=nt.estimatedSeconds||15;let ys=" Generating image...",ns="This may take 10-30 seconds for high-quality images";return ir==="selecting_provider"?(ys=" Selecting image provider...",ns="Finding best available model"):ir==="generating"?(ys=` Generating image... (~${xn}s)`,ns=`Using ${nt.provider||"selected"} ${nt.model||"model"}`):nt.status==="downloading"&&(ys=" Downloading image...",ns="Converting to base64 for offline storage"),a.jsx("div",{className:"mt-3 relative",children:a.jsxs("div",{className:"w-full rounded border border-purple-300 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20 flex flex-col items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mb-4"}),a.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold mb-2",children:ys}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center max-w-md",children:ns}),nt.prompt&&a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center max-w-md mt-3 italic",children:['"',nt.prompt.substring(0,100),nt.prompt.length>100?"...":"",'"']})]})})}if(nt&&(nt.imageUrl||nt.base64)){let ir;nt.base64?ir=nt.base64.startsWith("data:image/")?nt.base64:`data:image/png;base64,${nt.base64}`:nt.imageUrl?.startsWith("data:image/")?ir=nt.imageUrl:ir=nt.imageUrl||"";const xn=`<img src="${ir}" alt="${nt.prompt||"Generated image"}" />`;return a.jsxs("div",{className:"mt-3 relative group",children:[a.jsx("img",{src:ir,alt:nt.prompt||"Generated image",className:"w-full rounded border border-purple-300 dark:border-purple-700",style:{maxHeight:"512px",objectFit:"contain"}}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ir||""),T("Image copied to clipboard")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Copy image data URL",children:a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a.jsx("button",{onClick:async()=>{await b(xn,"assistant",nt.prompt||"Generated image"),T("Image grabbed to swag")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Grab to swag",children:a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})})})]})]})}return null})(),a.jsx(YN,{rawResponse:Z.rawResponse,extractionMetadata:Z.extractionMetadata})]},Ke)})}),P.isStreaming&&P.toolResults&&P.toolResults.length>0&&a.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3 text-blue-700 dark:text-blue-300",children:[a.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-base",children:"Generating LLM Response..."}),a.jsx("div",{className:"text-sm opacity-80",children:"The AI is analyzing the tool results and composing a response"})]})]})})]}):a.jsxs("div",{className:"whitespace-pre-wrap",children:[Qr(P.content),P._attachments&&P._attachments.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:P._attachments.filter(Z=>Z&&Z.name).map((Z,Ke)=>a.jsx("div",{className:"bg-white/20 dark:bg-gray-700/30 rounded-lg overflow-hidden border border-white/30 dark:border-gray-600",children:Z.preview?a.jsx("img",{src:Z.preview,alt:Z.name,className:"w-32 h-32 object-cover cursor-pointer hover:opacity-80 transition-opacity",title:`${Z.name} (${(Z.size/1024).toFixed(1)} KB)`,onClick:()=>window.open(Z.preview,"_blank")}):a.jsxs("div",{className:"w-32 h-32 flex flex-col items-center justify-center p-2 bg-red-50 dark:bg-red-900/20",children:[a.jsxs("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),a.jsx("text",{x:"8",y:"16",fontSize:"8",fill:"currentColor",fontWeight:"bold",children:"PDF"})]}),a.jsx("span",{className:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium truncate max-w-full px-1",children:Z.name})]})},Ke))}),(console.log(" Checking imageGenerations:",{hasImageGenerations:!!P.imageGenerations,length:P.imageGenerations?.length,imageGenerations:P.imageGenerations}),null),P.imageGenerations&&P.imageGenerations.length>0&&a.jsx("div",{className:"mt-3",children:(console.log(" About to render imageGenerations:",P.imageGenerations),P.imageGenerations.map(Z=>(console.log(" Mapping imageGen:",Z),a.jsx(Zde,{data:Z,accessToken:i,providerApiKeys:ct,onCopy:Ke=>{navigator.clipboard.writeText(Ke).then(()=>{T("Image URL copied to clipboard!")}).catch(()=>{S("Failed to copy")})},onGrab:Ke=>{navigator.clipboard.writeText(Ke).then(()=>{T("Markdown copied to clipboard!")}).catch(()=>{S("Failed to copy")})},onLlmInfo:()=>{Aa(te)},onStatusChange:(Ke,Te,De,pe)=>{U(et=>et.map((Ve,Ne)=>{if(Ve.imageGenerations){const nt=Ve.imageGenerations.map(xn=>xn.id===Ke?{...xn,status:Te,imageUrl:De,llmApiCall:pe}:xn),ir={...Ve,imageGenerations:nt};return pe&&Ne===te&&(ir.llmApiCalls=[...Ve.llmApiCalls||[],pe]),ir}return Ve}))}},Z.id))))})]}),P.role==="assistant"&&!z&&Un>0&&te===j.length-1&&a.jsx("div",{className:"mt-2 flex items-center justify-end",children:a.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-50 dark:bg-green-900/20 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs",children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Request cost: ",ni(Un),B&&a.jsxs("span",{className:"ml-1 opacity-75",children:["(Total: ",ni(B.totalCost),")"]})]})}),P.role==="assistant"&&(P.content||P.llmApiCalls)&&a.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>{const Z=Qr(P.content);navigator.clipboard.writeText(Z).then(()=>{T("Copied to clipboard!")}).catch(()=>{S("Failed to copy")})},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Copy to clipboard",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]}),a.jsxs("button",{onClick:()=>{const Z=Qr(P.content),Ke="Shared from LLM Proxy",Te=encodeURIComponent(Z);window.open(`https://mail.google.com/mail/?view=cm&fs=1&su=${encodeURIComponent(Ke)}&body=${Te}`,"_blank")},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Share via Gmail",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Gmail"]}),a.jsxs("button",{onClick:()=>Xr(Qr(P.content),"assistant",void 0,P.extractedContent,P.toolResults),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),P.llmApiCalls&&P.llmApiCalls.length>0&&(()=>{let Z=0,Ke=0;P.llmApiCalls.forEach(De=>{Z+=De.response?.usage?.prompt_tokens||0,Ke+=De.response?.usage?.completion_tokens||0});const Te=Z+Ke;return a.jsxs("button",{onClick:()=>Aa(te),className:"text-xs px-2 py-1 rounded bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 flex items-center gap-1.5 transition-colors",title:`View LLM transparency info  ${Te.toLocaleString()} tokens (${Z.toLocaleString()} in, ${Ke.toLocaleString()} out)  ${P.llmApiCalls.length} call${P.llmApiCalls.length!==1?"s":""}  ${Yi(ai(P))}`,children:[a.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",Yi(ai(P))]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden sm:inline",children:[" ",Te.toLocaleString()," token",Te!==1?"s":""," (",Z.toLocaleString()," in, ",Ke.toLocaleString()," out)"]}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden lg:inline",children:[" ",P.llmApiCalls.length," call",P.llmApiCalls.length!==1?"s":""]}),a.jsx("span",{className:"ml-0.5",children:""})]})})(),P.errorData&&Qr(P.content).startsWith(" Error:")&&!P.guardrailFailed&&a.jsxs("button",{onClick:()=>Ha(te),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-100 flex items-center gap-1",title:"View full error details",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Info"]}),P.isRetryable&&(!P.retryCount||P.retryCount<3)&&a.jsxs("button",{onClick:()=>Hm(te),disabled:z,className:"text-xs text-orange-600 dark:text-orange-400 hover:text-orange-900 dark:hover:text-orange-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Retry this request with full context",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again",(P.retryCount??0)>0&&a.jsxs("span",{className:"text-[10px] opacity-75",children:["(",(P.retryCount??0)+1,")"]})]})]}),P.role==="user"&&a.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>{ue(Qr(P.content)),U(j.slice(0,te)),X([]),Re("")},disabled:z,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset chat to this message",children:[a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l3-3m0 0l3 3m-3-3v12"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-3 3m0 0l-3-3",opacity:"0.3"})]}),"Reset"]}),a.jsxs("button",{onClick:()=>{ne.current=!0,U(j.slice(0,te)),X([]),Re(""),ue(Qr(P.content))},disabled:z,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry this message (clears subsequent messages and resubmits)",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"})}),"Retry"]}),a.jsxs("button",{onClick:()=>Xr(Qr(P.content),"user"),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]})]})]})]})},te)}),z&&dt!==null&&a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[a.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"streaming..."]})}),z&&!he&&On.length===0&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),a.jsx("div",{ref:Dn})]}),a.jsx("div",{className:"px-1 md:p-4 py-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:a.jsxs(a.Fragment,{children:[lt.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:lt.map((P,te)=>a.jsxs("div",{className:"relative group bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 p-2 flex items-center gap-2",children:[P.preview?a.jsx("img",{src:P.preview,alt:P.name,className:"w-12 h-12 object-cover rounded"}):a.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded",children:a.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate max-w-[150px]",children:P.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(P.size/1024).toFixed(1)," KB"]})]}),a.jsx("button",{onClick:()=>Zg(te),className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",title:"Remove file",children:""})]},te))}),ca&&ca.total>0&&a.jsxs("div",{className:"mb-3 p-3 border border-yellow-200 dark:border-yellow-800 rounded bg-yellow-50 dark:bg-yellow-900/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-yellow-900 dark:text-yellow-200 font-semibold text-sm",children:[a.jsx("span",{children:" Todos"}),a.jsxs("span",{className:"text-xs font-normal text-yellow-700 dark:text-yellow-300",children:[ca.total," total  ",ca.remaining," remaining"]}),jn&&a.jsxs("span",{className:"ml-2 text-xs italic text-yellow-800 dark:text-yellow-300 animate-pulse",children:[" Continuing: ",jn]})]}),a.jsx("button",{className:"text-xs text-yellow-800 dark:text-yellow-300 hover:underline focus:outline-none",onClick:()=>ri(P=>!P),children:ot?" Collapse":" Expand"})]}),a.jsxs("div",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:[a.jsx("span",{className:"font-medium",children:"Current:"})," ",ca.current?.description||""]}),ot&&a.jsx("ul",{className:"mt-2 max-h-48 overflow-y-auto text-sm divide-y divide-yellow-200 dark:divide-yellow-800 bg-white dark:bg-gray-800 rounded p-2",children:ca.items.map((P,te)=>a.jsxs("li",{className:"py-1.5 flex items-start gap-2 text-gray-900 dark:text-gray-100",children:[a.jsx("span",{className:"mt-0.5 text-xs flex-shrink-0",children:P.status==="done"?"":P.status==="current"?"":""}),a.jsx("span",{className:`flex-1 ${P.status==="done"?"line-through opacity-60":""}`,children:P.description})]},String(P.id)||te))})]}),nn&&an&&a.jsxs("div",{className:"flex flex-col items-center gap-3 py-3 px-4",children:[a.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-400 dark:border-orange-600 rounded-lg p-4 max-w-2xl w-full",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("svg",{className:"w-6 h-6 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:" Maximum Iteration Limit Reached"}),a.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["The conversation has reached the maximum number of tool execution iterations (",an?.maxIterations||"?"," iterations). This limit prevents infinite loops and excessive API usage."]}),a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"Would you like to continue processing from where it stopped?"})]})]})}),a.jsxs("button",{onClick:()=>{confirm(` Continue processing?

This will resume tool execution and may incur additional API costs. The iteration limit helps prevent runaway processes.

Click OK to continue or Cancel to stop here.`)&&ep()},disabled:z,className:"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white p-2 md:px-6 md:py-3 rounded-lg font-semibold text-base transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",title:"Continue from where the iteration limit was reached","aria-label":"Continue Processing",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),a.jsx("span",{className:"hidden md:inline",children:"Continue Processing"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex gap-2 relative items-start",children:[a.jsx("input",{ref:Ct,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,application/pdf",multiple:!0,onChange:P=>Sl(P.target.files),className:"hidden"}),a.jsx("button",{onClick:()=>Ct.current?.click(),disabled:z,className:"btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:"Attach images or PDFs",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),a.jsx("button",{onClick:()=>He(!0),disabled:z||!i,className:"btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:i?"Voice input (speech-to-text)":"Please sign in to use voice input",children:a.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),a.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})}),a.jsx("button",{onClick:z?zm:()=>El(),disabled:!z&&(!V.trim()||!i),className:"btn-primary p-2 md:px-4 md:py-2 h-10 flex-shrink-0 flex items-center gap-1.5",title:i?V.trim()?"Send message":"Type a message first":"Please sign in to send messages","aria-label":z?"Stop generating response":"Send message",children:z?a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Stop"})]}):V.trim()?a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Send"})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Type a message"})]})})]}),da.size>0&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:[" ",da.size," ",da.size===1?"snippet":"snippets"," attached"]}),a.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[Array.from(da).slice(0,3).map(P=>{const te=y.find(Le=>Le.id===P);return te?a.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-200 px-2 py-0.5 rounded truncate max-w-[200px]",title:te.title||"Untitled",children:te.title||"Untitled"},P):null}),da.size>3&&a.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-300",children:["+",da.size-3," more"]})]})]}),a.jsx("button",{onClick:()=>ba(new Set),className:"ml-2 p-1 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800 rounded transition-colors",title:"Clear all attached snippets",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx("textarea",{ref:We,value:V,onChange:P=>{ue(P.target.value),$r(-1)},onKeyDown:P=>{if(P.key==="Enter"&&!P.shiftKey)P.preventDefault(),El();else if(P.key==="ArrowUp"&&!P.shiftKey){if(P.preventDefault(),dr.length>0){const te=Math.min(An+1,dr.length-1);$r(te),ue(dr[te])}}else if(P.key==="ArrowDown"&&!P.shiftKey)if(P.preventDefault(),An>0){const te=An-1;$r(te),ue(dr[te])}else An===0&&($r(-1),ue(""))},placeholder:"Type your message... (Shift+Enter for new line,  for history)",className:"input-field flex-1 resize-none overflow-y-auto",style:{minHeight:"2.5rem",maxHeight:"300px"},"aria-label":"Chat message input","aria-describedby":"chat-input-help"}),a.jsx("span",{id:"chat-input-help",className:"sr-only",children:"Type your message and press Enter to send. Use Shift+Enter for new line. Use up and down arrows to navigate message history."})]})]})]})}),le&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"card max-w-2xl w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Chat History"}),Bt.length>0&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:Ym,className:"btn-secondary text-xs px-3 py-1",children:" Select All"}),a.jsx("button",{onClick:Wm,className:"btn-secondary text-xs px-3 py-1",children:" Select None"})]})]}),a.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[Bt.map(P=>{const te=new Date(P.timestamp).toLocaleString(),Le=ge.has(P.id);return a.jsx("div",{className:`border ${Le?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"} rounded-lg p-3`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",checked:Le,onChange:()=>Vm(P.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-1 truncate",children:P.firstUserPrompt}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:te})]}),a.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[a.jsx("button",{onClick:()=>qm(P),className:"btn-primary text-xs px-3 py-1",children:"Load"}),a.jsx("button",{onClick:()=>vd(P.id),className:"btn-secondary text-red-500 text-xs px-3 py-1",children:"Delete"})]})]})},P.id)}),Bt.length===0&&a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No chat history found. Start a conversation to save it automatically."})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[ge.size>0&&a.jsxs("button",{onClick:Gm,className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[" Delete Selected (",ge.size,")"]}),Bt.length>0&&a.jsx("button",{onClick:()=>Ae(!0),className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:" Clear All History"}),a.jsx("button",{onClick:()=>me(!1),className:"btn-primary flex-1",children:"Close"})]})]})}),Ee&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"card max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Clear All History?"}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:["Are you sure you want to delete all ",Bt.length," chat",Bt.length!==1?"s":""," from history? This action cannot be undone."]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Ae(!1),className:"btn-secondary flex-1",children:"Cancel"}),a.jsx("button",{onClick:Km,className:"btn-primary flex-1 bg-red-600 hover:bg-red-700",children:"Clear All"})]})]})}),r&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:a.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"MCP Server Configuration"}),a.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),a.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Add MCP Server"}),a.jsx("button",{onClick:()=>ar(!tn),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:tn?" Hide Examples":" Show Examples"})]}),tn&&a.jsxs("div",{className:"mb-4 p-3 bg-white dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-600",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quick Start Examples:"}),a.jsxs("select",{onChange:P=>{const te=Kt.find(Le=>Le.id===P.target.value);te&&bt({name:te.name,url:te.url})},className:"input-field w-full mb-2",defaultValue:"",children:[a.jsx("option",{value:"",disabled:!0,children:"Select an example server..."}),a.jsx("optgroup",{label:" Sample Servers",children:Kt.filter(P=>P.category==="Sample").map(P=>a.jsxs("option",{value:P.id,children:[P.name," - ",P.description]},P.id))}),a.jsx("optgroup",{label:" Official @modelcontextprotocol Servers",children:Kt.filter(P=>P.category==="Official").map(P=>a.jsxs("option",{value:P.id,children:[P.name.replace("@modelcontextprotocol/server-","")," - ",P.description]},P.id))})]}),yt.name&&Kt.find(P=>P.name===yt.name)&&a.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:Kt.find(P=>P.name===yt.name)?.name}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:Kt.find(P=>P.name===yt.name)?.description}),a.jsxs("div",{className:"mb-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Tools:"})," ",a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Kt.find(P=>P.name===yt.name)?.tools.join(", ")})]}),a.jsx("div",{className:"bg-gray-800 dark:bg-gray-950 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:Kt.find(P=>P.name===yt.name)?.instructions})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",value:yt.name,onChange:P=>bt({...yt,name:P.target.value}),placeholder:"Server Name (e.g., filesystem, github)",className:"input-field w-full"}),a.jsx("input",{type:"text",value:yt.url,onChange:P=>bt({...yt,url:P.target.value}),placeholder:"Server URL (e.g., http://localhost:3000)",className:"input-field w-full"}),a.jsx("button",{onClick:Xm,disabled:!yt.name.trim()||!yt.url.trim(),className:"btn-primary w-full",children:" Add Server"})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:["Configured Servers (",Rt.length,")"]}),a.jsxs("div",{className:"space-y-2",children:[Rt.map(P=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("input",{type:"checkbox",checked:P.enabled,onChange:()=>Qm(P.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:P.name}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:P.url})]}),a.jsx("button",{onClick:()=>Jm(P.id),className:"text-red-500 hover:text-red-700 px-3 py-1",children:""})]},P.id)),Rt.length===0&&a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No MCP servers configured"})]})]}),a.jsx("div",{className:"mt-6 flex gap-2",children:a.jsx("button",{onClick:()=>n(!1),className:"btn-primary flex-1",children:"Done"})})]})}),a.jsx(o3,{isOpen:ve,onClose:()=>Pe(!1),onTransferToChat:P=>{tp();try{const te=JSON.parse(P);ue(te.prompt),te.persona&&D(te.persona),te.planningQuery&&ye(te.planningQuery),te.generatedSystemPrompt&&Et(te.generatedSystemPrompt),te.generatedUserQuery&&kt(te.generatedUserQuery),console.log(" Transferred planning context to chat")}catch{ue(P)}Pe(!1)}}),Ft&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1 pr-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:Ft.result.title}),a.jsx("a",{href:Ft.result.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:Ft.result.url}),a.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:[" ",(Ft.result.content?.length/1024).toFixed(1)," KB"]}),Ft.result.contentFormat&&a.jsxs("span",{children:[" ",Ft.result.contentFormat]}),Ft.result.images?.length>0&&a.jsxs("span",{children:[" ",Ft.result.images.length," images"]}),Ft.result.links?.length>0&&a.jsxs("span",{children:[" ",Ft.result.links.length," links"]})]})]}),a.jsx("button",{onClick:()=>Fn(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Page Content"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:Ft.result.contentFormat==="markdown"?a.jsx(Tu,{content:Ft.result.content}):a.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300",children:Ft.result.content})})]}),Ft.result.images&&Ft.result.images.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Images (",Ft.result.images.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Ft.result.images.map((P,te)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[a.jsx("img",{src:P.src,alt:P.alt||`Image ${te+1}`,className:"w-full h-32 object-cover",loading:"lazy"}),P.alt&&a.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:P.alt})]},te))})]}),Ft.result.links&&Ft.result.links.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Links (",Ft.result.links.length,")"]}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsxs("ul",{className:"space-y-2",children:[Ft.result.links.slice(0,50).map((P,te)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("a",{href:P.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:P.text||P.href}),P.context&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:P.context})]})]},te)),Ft.result.links.length>50&&a.jsxs("li",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["... and ",Ft.result.links.length-50," more links"]})]})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" Full Scraped Data (JSON)"}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsx(Tg,{data:{url:Ft.result.url,title:Ft.result.title,description:Ft.result.description,snippet:Ft.result.snippet,fullScrapedContent:Ft.result.content,contentFormat:Ft.result.contentFormat,summarizedContent:Ft.result.summary||Ft.result.description,links:Ft.result.links||[],images:Ft.result.images||[],youtubeLinks:Ft.result.youtube||Ft.result.videos||[],otherMedia:Ft.result.media||Ft.result.audio||[],metadata:{contentLength:Ft.result.content?.length||0,linkCount:Ft.result.links?.length||0,imageCount:Ft.result.images?.length||0,youtubeCount:(Ft.result.youtube||Ft.result.videos||[]).length,mediaCount:(Ft.result.media||Ft.result.audio||[]).length}},expanded:!1})})]})]})}),a.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:a.jsx("button",{onClick:()=>Fn(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),Fr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1 pr-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Raw HTML Content"}),a.jsx("a",{href:Fr.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:Fr.url}),a.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:[" ",(Fr.html.length/1024).toFixed(1)," KB uncompressed"]}),a.jsx("span",{children:" Raw HTML"})]})]}),a.jsx("button",{onClick:()=>Sr(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:a.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 font-mono",children:Fr.html})})}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Fr.html)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:" Copy to Clipboard"}),a.jsx("button",{onClick:()=>Sr(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})}),$n!==null&&j[$n]?.llmApiCalls&&a.jsx(VI,{apiCalls:j[$n].llmApiCalls,evaluations:j[$n].evaluations,onClose:()=>Aa(null)}),ts!==null&&j[ts]?.errorData&&a.jsx(Qde,{errorData:j[ts].errorData,llmApiCalls:j[ts].llmApiCalls,onClose:()=>Ha(null)}),a.jsx(Jde,{isOpen:ce,onClose:()=>He(!1),onTranscriptionComplete:Ac,accessToken:i,apiEndpoint:mt}),a.jsx(ihe,{isOpen:Zt,onClose:()=>Jt(!1),onExampleClick:vl,location:$,locationLoading:J,requestLocation:ee,clearLocation:W}),Rs&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-2/3 z-40 bg-white dark:bg-gray-800 shadow-2xl border-t border-gray-300 dark:border-gray-600 overflow-hidden",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:" Attach Context Snippets"}),a.jsx("button",{onClick:()=>Is(!1),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Close Snippet Selector",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(rhe,{selectedSnippetIds:da,onSelectionChange:ba,userEmail:l?.email})})]})}),qa&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:"Raw HTML"}),qa.url&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate mt-1",children:qa.url})]}),a.jsx("button",{onClick:()=>wt(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(qa.html)},className:"absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded",children:"Copy"}),a.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:a.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 font-mono whitespace-pre",children:qa.html})})]})}),a.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:a.jsx("button",{onClick:()=>wt(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Close"})})]})})]})},dhe=()=>{const e=pl(),t=()=>{e("/")},r=n=>{console.log(" PlanningPage - Transferring to chat with query:",n.substring(0,100)),sessionStorage.setItem("planning_transfer_data",n),e("/")};return a.jsx("div",{className:"flex flex-col h-full",children:a.jsx(o3,{isOpen:!0,onClose:t,onTransferToChat:r})})};function hhe(e,t){C.useEffect(()=>{const r=n=>{!e.current||e.current.contains(n.target)||t()};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[e,t])}const Zy=({existingTags:e,currentTags:t,onAddTag:r,placeholder:n="Type to add tag...",className:s=""})=>{const[i,l]=C.useState(""),[c,d]=C.useState(!1),[h,g]=C.useState(0),f=C.useRef(null),x=C.useRef(null);hhe(f,()=>d(!1));const b=Gn.useMemo(()=>{const R=i.toLowerCase().trim();return!e||!Array.isArray(e)?[]:R?e.filter(B=>B.toLowerCase().includes(R)&&!t.includes(B)).slice(0,10):e.filter(B=>!t.includes(B)).slice(0,10)},[i,e,t]),y=b.some(R=>R.toLowerCase()===i.toLowerCase().trim()),k=i.trim()&&!y,S=b.length+(k?1:0);C.useEffect(()=>{g(0)},[b.length,k]);const _=R=>{const B=R.trim();B&&!t.includes(B)&&(r(B),l(""),d(!1),g(0),x.current?.focus())},T=R=>{if(!c&&R.key!=="Enter"){d(!0);return}switch(R.key){case"ArrowDown":R.preventDefault(),g(B=>Math.min(B+1,S-1));break;case"ArrowUp":R.preventDefault(),g(B=>Math.max(B-1,0));break;case"Enter":R.preventDefault(),S===0?i.trim()&&_(i.trim()):h<b.length?_(b[h]):_(i.trim());break;case"Escape":R.preventDefault(),d(!1),g(0);break}},N=R=>{l(R.target.value),c||d(!0)},I=c&&(b.length>0||k);return a.jsxs("div",{ref:f,className:`relative ${s}`,children:[a.jsx("input",{ref:x,type:"text",value:i,onChange:N,onKeyDown:T,onFocus:()=>d(!0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",placeholder:n,autoComplete:"off"}),I&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[b.map((R,B)=>a.jsxs("div",{className:`px-4 py-2 cursor-pointer flex items-center justify-between ${B===h?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>_(R),onMouseEnter:()=>g(B),children:[a.jsx("span",{className:"font-medium",children:R}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(existing)"})]},R)),k&&a.jsxs("div",{className:`px-4 py-2 cursor-pointer border-t border-gray-200 dark:border-gray-700 ${h===b.length?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>_(i.trim()),onMouseEnter:()=>g(b.length),children:[a.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"+ Create new: "}),a.jsx("span",{className:"font-medium",children:i.trim()})]}),b.length===0&&!k&&i.trim()&&a.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:['No matching tags. Press Enter to create "',i.trim(),'"']})]})]})},ghe=({allTags:e,selectedTags:t,onAdd:r,placeholder:n="Add tag...",className:s=""})=>{const[i,l]=C.useState(""),[c,d]=C.useState(!1),[h,g]=C.useState(0),f=C.useRef(null);C.useEffect(()=>{function y(k){f.current&&!f.current.contains(k.target)&&d(!1)}return c&&document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[c]);const x=e.filter(y=>y.toLowerCase().includes(i.toLowerCase())&&!t.includes(y)).slice(0,8);function b(y){r(y),l(""),d(!1),g(0)}return a.jsxs("div",{className:`relative ${s}`,ref:f,children:[a.jsx("input",{type:"text",value:i,onChange:y=>{l(y.target.value),d(!0),g(0)},onFocus:()=>d(!0),onKeyDown:y=>{c&&(y.key==="ArrowDown"?(g(k=>Math.min(k+1,x.length-1)),y.preventDefault()):y.key==="ArrowUp"?(g(k=>Math.max(k-1,0)),y.preventDefault()):y.key==="Enter"&&x[h]&&b(x[h]))},placeholder:n,className:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white","aria-label":"Add tag to filter"}),c&&x.length>0&&a.jsx("div",{className:"absolute z-10 left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow-lg mt-1 max-h-48 overflow-auto",children:x.map((y,k)=>a.jsx("div",{className:`px-3 py-2 text-sm cursor-pointer ${k===h?"bg-blue-100 dark:bg-blue-900":""}`,onMouseDown:()=>b(y),onMouseEnter:()=>g(k),children:y},y))})]})},phe=({isOpen:e,title:t,message:r,confirmLabel:n="Confirm",cancelLabel:s="Cancel",onConfirm:i,onCancel:l,variant:c="warning"})=>{const d=yc(e,l);if(C.useEffect(()=>{if(!e)return;const g=f=>{f.key==="Enter"?(f.preventDefault(),i()):f.key==="Escape"&&(f.preventDefault(),l())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[e,i,l]),!e)return null;const h={danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{ref:d,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",role:"dialog","aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{id:"confirm-dialog-title",className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t}),a.jsx("p",{id:"confirm-dialog-description",className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400","aria-label":s,children:s}),a.jsx("button",{onClick:i,className:`px-4 py-2 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 ${h[c]}`,"aria-label":n,autoFocus:!0,children:n})]})]})})})},fhe=({isOpen:e,onClose:t,onUpload:r})=>{const[n,s]=C.useState("file"),[i,l]=C.useState(""),[c,d]=C.useState(null),[h,g]=C.useState(!1),[f,x]=C.useState(!1),[b,y]=C.useState(0),[k,S]=C.useState(null),_=C.useRef(null),{showError:T,showSuccess:N}=$i();if(!e)return null;const I=[".pdf",".docx",".txt",".md",".html",".csv",".json",".png",".jpg",".jpeg",".gif",".webp"],R=j=>{try{const U=new URL(j);return U.protocol==="http:"||U.protocol==="https:"}catch{return!1}},B=j=>j.size/4/1e6*.02,F=j=>{const U="."+j.name.split(".").pop()?.toLowerCase();if(!I.includes(U)){T(`File type ${U} not supported`);return}if(j.size>10*1024*1024){T("File size exceeds 10 MB limit");return}d(j);const O=B(j);S(O)},ae=j=>{const U=j.target.files?.[0];U&&F(U)},G=j=>{j.preventDefault(),j.stopPropagation(),g(!0)},$=j=>{j.preventDefault(),j.stopPropagation(),g(!1)},J=j=>{j.preventDefault(),j.stopPropagation(),g(!1);const U=j.dataTransfer.files?.[0];U&&F(U)},ee=async()=>{if(n==="file"&&!c){T("Please select a file");return}if(n==="url"&&!i.trim()){T("Please enter a URL");return}if(n==="url"&&!R(i)){T("Invalid URL format");return}x(!0),y(0);try{const j=setInterval(()=>{y(U=>Math.min(U+10,90))},300);n==="file"&&c?await r(c):await r(i),clearInterval(j),y(100),N("File uploaded and processed successfully"),setTimeout(()=>{d(null),l(""),S(null),y(0),x(!1),t()},500)}catch(j){console.error("Upload error:",j),T(`Upload failed: ${j instanceof Error?j.message:"Unknown error"}`),x(!1),y(0)}},W=()=>{f||(d(null),l(""),S(null),y(0),t())};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Upload Document"}),a.jsx("button",{onClick:W,disabled:f,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>s("file"),disabled:f,className:`flex-1 px-6 py-3 font-medium ${n==="file"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"} disabled:opacity-50`,children:" Upload File"}),a.jsx("button",{onClick:()=>s("url"),disabled:f,className:`flex-1 px-6 py-3 font-medium ${n==="url"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"} disabled:opacity-50`,children:" Paste URL"})]}),a.jsxs("div",{className:"p-6",children:[n==="file"?a.jsx("div",{children:a.jsxs("div",{onDragOver:G,onDragLeave:$,onDrop:J,onClick:()=>!f&&_.current?.click(),className:`
                  border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
                  transition-colors duration-200
                  ${h?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500"}
                  ${f?"opacity-50 cursor-not-allowed":""}
                `,children:[a.jsx("input",{ref:_,type:"file",accept:I.join(","),onChange:ae,disabled:f,className:"hidden"}),a.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),c?a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:c.name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(c.size/1024).toFixed(2)," KB"]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Drag and drop a file here, or click to browse"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Supported: PDF, DOCX, TXT, MD, HTML, CSV, JSON, Images"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Max size: 10 MB"})]})]})}):a.jsx("div",{children:a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"url-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Document URL"}),a.jsx("input",{id:"url-input",type:"url",value:i,onChange:j=>l(j.target.value),disabled:f,placeholder:"https://example.com/document.pdf",className:`
                    w-full px-4 py-2 border border-gray-300 dark:border-gray-600 
                    rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400
                    bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                    disabled:opacity-50 disabled:cursor-not-allowed
                  `}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"The document will be fetched and processed. Original URL will be preserved as the source."})]})}),k!==null&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[a.jsx("strong",{children:"Estimated embedding cost:"})," $",k.toFixed(4)]}),a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"This estimate is based on file size and may vary depending on actual content."})]}),f&&a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:"Uploading and processing..."}),a.jsxs("span",{children:[b,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:W,disabled:f,className:`
              px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 
              rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed
            `,children:"Cancel"}),a.jsx("button",{onClick:ee,disabled:f||n==="file"&&!c||n==="url"&&!i.trim(),className:`
              px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed
              font-medium
            `,children:f?"Processing...":n==="file"?"Upload":"Fetch & Process"})]})]})})},mhe=()=>{const{showSuccess:e,showError:t,showWarning:r}=$i(),{getToken:n}=Os(),{snippets:s,addSnippet:i,updateSnippet:l,deleteSnippets:c,mergeSnippets:d,toggleSelection:h,selectAll:g,selectNone:f,getSelectedSnippets:x,getAllTags:b,addTagsToSnippets:y,removeTagsFromSnippets:k,getEmbeddingDetails:S,generateEmbeddings:_}=jg(),{isAvailable:T,isConnected:N,castSnippet:I,sendSnippetScrollPosition:R,isCastingSnippet:B}=Mg(),{state:F,stop:ae}=nm(),[G,$]=C.useState(()=>{try{const ne=localStorage.getItem("swag-google-docs-cache");if(ne)return JSON.parse(ne)}catch(ne){console.error("Failed to load Google Docs cache:",ne)}return[]}),[J,ee]=C.useState(null),[W,j]=C.useState(null),[U,O]=C.useState(""),[q,V]=C.useState(""),[ue,H]=C.useState([]),[D,z]=C.useState(""),[M,le]=C.useState(!1),[me,Ee]=C.useState(!1),[Ae,ve]=C.useState("add"),[Pe,ge]=C.useState([]),[Be,ht]=C.useState(""),[ye,ut]=C.useState(""),[Et,Ze]=C.useState([]),[kt,Rt]=C.useState(!1),[ur,yt]=C.useState(!1),[bt,tn]=C.useState("text"),[ar,Kt]=C.useState([]),[On,X]=C.useState(!1),[he,Re]=C.useState(!1),[gt,Qe]=C.useState(!1),[zt,Gt]=C.useState(null),[dt,jt]=C.useState(!1),[Zt,Jt]=C.useState(null),[Rn,zr]=C.useState(!1),[Bt,rn]=C.useState(0),[ma,xa]=C.useState(!1),[Sn,ie]=C.useState({}),[Oe,Ye]=C.useState(()=>{try{const ne=localStorage.getItem("swag-recent-tags");return ne?JSON.parse(ne):[]}catch{return[]}});C.useEffect(()=>{localStorage.setItem("swag-recent-tags",JSON.stringify(Oe.slice(0,10)))},[Oe]);function Pt(ne){Ye(we=>[ne,...we.filter(We=>We!==ne)].slice(0,10))}C.useEffect(()=>{const ne=()=>{const Ct=localStorage.getItem("rag_config");if(Ct)try{ie(JSON.parse(Ct))}catch(dr){console.error("Failed to parse RAG config:",dr)}};ne();const we=Ct=>{Ct.key==="rag_config"&&ne()};window.addEventListener("storage",we);const We=()=>{ne()};return window.addEventListener("rag_config_updated",We),()=>{window.removeEventListener("storage",we),window.removeEventListener("rag_config_updated",We)}},[]);const[xr,wr]=C.useState(null),[xt,pt]=C.useState(null),[_t,Kr]=C.useState({}),[pr,En]=C.useState(!1),[Na,Ft]=C.useState("grid"),[Fn,Fr]=C.useState("date-new"),[Sr,$n]=C.useState(null),Aa=C.useRef(null),ts=C.useRef(null);C.useEffect(()=>{HA().catch(console.error),G.length===0&&!ur&&Ha()},[]),C.useEffect(()=>{(async()=>{if(s.length===0)return;const we={};for(const We of s)try{const Ct=await S(We.id);we[We.id]=Ct.hasEmbedding}catch(Ct){console.error(`Failed to check embedding for snippet ${We.id}:`,Ct)}Kr(we)})()},[s.length]),C.useEffect(()=>{W&&N&&!B&&(console.log("Auto-casting snippet to Chromecast:",W.title),I({id:W.id,content:W.content,title:W.title,tags:W.tags,created:new Date(W.timestamp),modified:W.updateDate?new Date(W.updateDate):new Date(W.timestamp)}))},[W,N,B,I]),C.useEffect(()=>{bt==="vector"&&ye.trim()&&!he&&!On&&(console.log("Auto-running vector search on mode switch"),vr())},[bt]),C.useEffect(()=>{const ne=we=>{const We=we.target;if(We.tagName==="INPUT"||We.tagName==="TEXTAREA"||We.isContentEditable){we.key==="Escape"&&(We.blur(),bt==="text"?ht(""):(ut(""),Kt([]),Re(!1)));return}(we.ctrlKey||we.metaKey)&&we.key==="k"&&(we.preventDefault(),ts.current?.focus()),(we.ctrlKey||we.metaKey)&&we.key==="f"&&(we.preventDefault(),tn(Ct=>Ct==="text"?"vector":"text"),e(`Switched to ${bt==="text"?"Vector":"Text"} search mode`)),we.key==="Delete"&&x().length>0&&(we.preventDefault(),ce("delete")),(we.ctrlKey||we.metaKey)&&we.key==="t"&&x().length>0&&(we.preventDefault(),Ee(!0),ve("add"),ge([])),(we.ctrlKey||we.metaKey)&&we.key==="m"&&x().length>1&&(we.preventDefault(),ce("merge")),(we.ctrlKey||we.metaKey)&&we.key==="i"&&x().length>0&&(we.preventDefault(),ce("generate-embeddings"))};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[bt,Be,ye,x]);const Ha=async(ne=!1)=>{if(!(ur&&!ne))try{Rt(!0);const we=await I9();$(we),yt(!0);try{localStorage.setItem("swag-google-docs-cache",JSON.stringify(we))}catch(We){console.error("Failed to cache Google Docs:",We)}}catch(we){console.error("Failed to load Google Docs:",we),t("Failed to load Google Docs. Please try again.")}finally{Rt(!1)}},qa=async()=>{if(!D.trim()){r("Please enter a document name");return}try{Rt(!0);const ne=await F9(D),we=[ne,...G];$(we);try{localStorage.setItem("swag-google-docs-cache",JSON.stringify(we))}catch(We){console.error("Failed to update Google Docs cache:",We)}z(""),le(!1),e(`Document "${ne.name}" created successfully in Research Agent folder!`)}catch(ne){console.error("Failed to create document:",ne),t("Failed to create document. Please grant permissions and try again.")}finally{Rt(!1)}},wt=async ne=>{const we=x();if(we.length===0){r("No snippets selected");return}try{Rt(!0);const We=we.map(Ct=>{let dr="";if(Ct.title&&(dr+=`# ${Ct.title}

`),Uv(Ct.content)){const Mr=KI(Ct.content);Mr!==null?dr+=JSON.stringify(Mr,null,2):dr+=Ct.content}else dr+=Ct.content;return dr+=`

---
Source: ${Ct.sourceType} | ${new Date(Ct.timestamp).toLocaleString()}`,dr}).join(`

`);await D9(ne,We),f(),e(`${we.length} snippet(s) appended to document successfully!`)}catch(We){console.error("Failed to append to document:",We),t("Failed to append to document. Please try again.")}finally{Rt(!1)}},ce=async ne=>{console.log(" handleBulkOperation called with:",ne);const we=x();if(ne.startsWith("append-")){const We=ne.substring(7);await wt(We);return}switch(ne){case"new-doc":le(!0);break;case"append":G.length===0&&await Ha(!0);break;case"merge":if(we.length===0){r("No snippets selected");return}if(we.length<2){r("Select at least 2 snippets to combine");return}d(we.map(We=>We.id)),f(),e(`${we.length} snippets combined`);break;case"delete":if(we.length===0){r("No snippets selected");return}confirm(`Delete ${we.length} snippet(s)?`)&&(c(we.map(We=>We.id)),e(`${we.length} snippet(s) deleted`));break;case"generate-embeddings":console.log(" Generate embeddings case triggered"),await He();break;case"force-embeddings":console.log(" Force re-embed case triggered"),await He(!0);break;case"tag":if(we.length===0){r("No snippets selected");return}ve("add"),ge([]),Ee(!0);break;case"untag":if(we.length===0){r("No snippets selected");return}ve("remove"),ge([]),Ee(!0);break;case"tag-all":g(),setTimeout(()=>{ve("add"),ge([]),Ee(!0)},100);break;case"untag-all":g(),setTimeout(()=>{ve("remove"),ge([]),Ee(!0)},100);break;default:console.warn(" Unknown operation:",ne)}},He=async(ne=!1)=>{const we=x();if(we.length===0){r("No snippets selected");return}try{Qe(!0),Gt({current:0,total:we.length});const We=await _(we.map(dr=>dr.id),(dr,Mr)=>{Gt({current:dr,total:Mr})},ne);f();const Ct={};for(const dr of we){const Mr=await S(dr.id);Ct[dr.id]=Mr.hasEmbedding}Kr(dr=>({...dr,...Ct})),We.embedded>0||We.skipped>0?e(` Added to index: ${We.embedded}   Skipped: ${We.skipped}${We.failed>0?`   Failed: ${We.failed}`:""}`):r("No items were added to search index")}catch(We){console.error("Embedding error:",We),t(We instanceof Error?We.message:"Failed to add to search index")}finally{Qe(!1),Gt(null)}},mt=async(ne,we)=>{try{Rt(!0);const We=ne.length+we.length;let Ct=0;Jt({current:0,total:We,status:"Starting..."});const dr=50*1024*1024,Mr=10*1024*1024,An="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws",$r=ne.filter(br=>br.size>dr);if($r.length>0){const br=$r.map(Rr=>`${Rr.name} (${(Rr.size/1024/1024).toFixed(1)}MB)`).join(", ");t(`Files too large (max 50MB): ${br}`),Rt(!1),Jt(null);return}const rs=ne.filter(br=>br.size>Mr&&br.size<=dr);if(rs.length>0){const br=rs.map(Rr=>`${Rr.name} (${(Rr.size/1024/1024).toFixed(1)}MB)`).join(", ");r(`Large files detected - processing may be slow: ${br}`)}for(const br of ne){Jt({current:Ct,total:We,status:`Converting ${br.name}...`});try{let Rr;const qr=br.name.split(".").pop()?.toLowerCase();if(["pdf","docx","doc","png","jpg","jpeg","gif","webp","html","htm"].includes(qr||"")){const ca=new FormData;ca.append("file",br);const ua=await fetch(`${An}/convert-to-markdown`,{method:"POST",body:ca});if(!ua.ok){const ri=await ua.text();throw console.error(`Conversion failed for ${br.name}:`,ri),new Error(`Server error (${ua.status}): ${ri.substring(0,100)}`)}let ot=await ua.json();if(console.log(` Received response for ${br.name}:`,{hasBody:!!ot.body,bodyType:typeof ot.body,hasMarkdown:!!ot.markdown,hasContent:!!ot.content,resultKeys:Object.keys(ot),bodyPreview:typeof ot.body=="string"?ot.body.substring(0,200):ot.body}),ot.body&&typeof ot.body=="string")try{console.log(` Parsing nested body JSON for ${br.name}...`),ot=JSON.parse(ot.body),console.log(" Parsed body, keys:",Object.keys(ot)),console.log(" Parsed body content:",{hasMarkdown:!!ot.markdown,hasContent:!!ot.content,markdownType:typeof ot.markdown,contentType:typeof ot.content,markdownValue:ot.markdown,contentValue:ot.content})}catch(ri){console.error("Failed to parse response body:",ri)}if(console.log(` Final result for ${br.name}:`,{hasMarkdown:!!ot.markdown,hasContent:!!ot.content,markdownLength:ot.markdown?.length||0,contentLength:ot.content?.length||0,markdownPreview:ot.markdown?ot.markdown.substring(0,100):"(none)",contentPreview:ot.content?ot.content.substring(0,100):"(none)"}),!ot.markdown&&!ot.content)throw console.error(" No markdown or content in result:",JSON.stringify(ot,null,2)),new Error("No content returned from conversion - PDF may be empty or image-based");if(Rr=ot.markdown||ot.content,!Rr||Rr.trim().length===0)throw console.error(" Markdown content is empty:",{markdownContent:Rr,type:typeof Rr,length:Rr?.length}),new Error("Converted content is empty - PDF may contain only images")}else Rr=await br.text();await i(Rr,"user",br.name)}catch(Rr){console.error(`Failed to process ${br.name}:`,Rr);const qr=Rr instanceof Error?Rr.message:"Unknown error";r(`Could not process ${br.name}: ${qr}`)}Ct++}for(const br of we){Jt({current:Ct,total:We,status:`Fetching ${br}...`});try{const Rr=await fetch(`${An}/convert-to-markdown`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:br})});if(!Rr.ok)throw new Error(`Failed to fetch ${br}`);let qr=await Rr.json();if(qr.body&&typeof qr.body=="string")try{qr=JSON.parse(qr.body)}catch(ua){console.error("Failed to parse response body:",ua)}const ca=qr.markdown||qr.content;if(!ca||ca.trim().length===0)throw new Error("No content extracted from URL");await i(ca,"user",br)}catch(Rr){console.error(`Failed to fetch ${br}:`,Rr),r(`Could not fetch ${br}`)}Ct++}Jt({current:We,total:We,status:"Complete!"}),e(`Successfully added ${ne.length} file(s) and ${we.length} URL(s) as snippets`),jt(!1)}catch(We){console.error("Upload error:",We),t(We instanceof Error?We.message:"Upload failed")}finally{Rt(!1),Jt(null)}},Er=async ne=>{typeof ne=="string"?await mt([],[ne]):await mt([ne],[])},nn=ne=>{ne.preventDefault(),ne.stopPropagation(),rn(we=>we+1),ne.dataTransfer.items&&ne.dataTransfer.items.length>0&&zr(!0)},er=ne=>{ne.preventDefault(),ne.stopPropagation(),rn(we=>{const We=we-1;return We===0&&zr(!1),We})},an=ne=>{ne.preventDefault(),ne.stopPropagation()},In=async ne=>{ne.preventDefault(),ne.stopPropagation(),zr(!1),rn(0);const we=Array.from(ne.dataTransfer.files);we.length>0&&(console.log(` Dropped ${we.length} file(s)`),await mt(we,[]))},Un=()=>{if(Ae==="filter"){Ze(Pe),Ee(!1),ge([]);return}const ne=x();if(ne.length===0||Pe.length===0){r("Please select tags");return}Ae==="add"?(y(ne.map(we=>we.id),Pe),e(`Added ${Pe.length} tag(s) to ${ne.length} snippet(s)`)):(k(ne.map(we=>we.id),Pe),e(`Removed ${Pe.length} tag(s) from ${ne.length} snippet(s)`)),Ee(!1),ge([])},Ge=ne=>{ee(ne),O(ne.content),V(ne.title||""),H(ne.tags||[])},lt=async()=>{const ne=await i("","user","New Snippet");ne&&Ge(ne)},rr=async()=>{J&&(await l(J.id,{content:U,title:q.trim()||void 0,tags:ue.length>0?ue:void 0}),Et.length>0&&(Et.every(we=>ue.includes(we))||r("This snippet is now hidden by current filters.")),ee(null))},vr=async()=>{if(!(!ye.trim()||bt!=="vector")){X(!0);try{let ne;const we=await Va.getCachedQueryEmbedding(ye.trim());if(we)console.log(" Using cached query embedding"),ne=we.embedding;else{console.log(" Fetching new query embedding from backend");const An=await Ca(),$r=await n();console.log(" Using API URL for embed-query:",An);const rs=await fetch(`${An}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...$r?{Authorization:`Bearer ${$r}`}:{}},body:JSON.stringify({query:ye})});if(!rs.ok)throw new Error(`Backend error: ${rs.status}`);ne=(await rs.json()).embedding;const qr=JSON.parse(localStorage.getItem("rag_config")||"{}").embeddingModel||"text-embedding-3-small";await Va.cacheQueryEmbedding(ye.trim(),ne,qr),console.log(" Cached query embedding for future use")}const Ct=JSON.parse(localStorage.getItem("rag_config")||"{}").similarityThreshold??.3;console.log(` Vector search with threshold: ${Ct}, query: "${ye}"`);const dr=await Va.getAllChunks();if(console.log(` Total chunks in IndexedDB: ${dr.length}`),dr.length===0){r('No embeddings found in database. Generate embeddings first using "Add to Search Index".'),Kt([]),Re(!0);return}const Mr=await Va.vectorSearch(ne,10,Ct);console.log(" Vector search results:",{resultsCount:Mr.length,threshold:Ct,scores:Mr.map(An=>An.score.toFixed(3)),snippetIds:Mr.map(An=>An.snippet_id)}),Kt(Mr),Re(!0),Mr.length===0?r(`No similar content found with threshold ${Ct}. Try lowering the threshold in RAG settings or generate more embeddings.`):e(`Found ${Mr.length} similar chunks (scores: ${Mr[0].score.toFixed(3)}-${Mr[Mr.length-1].score.toFixed(3)})`)}catch(ne){console.error("Vector search error:",ne),t("Failed to perform vector search. Make sure embeddings are generated.")}finally{X(!1)}}},sn=ne=>{switch(ne){case"user":return"bg-blue-500";case"assistant":return"bg-green-500";case"tool":return"bg-purple-500";default:return"bg-gray-500"}},Dn=(()=>{if(bt==="vector"){if(console.log(" Vector search mode active",{hasRunVectorSearch:he,vectorSearchResultsCount:ar.length,snippetsCount:s.length}),!he)return console.log(" No vector search run yet, showing empty"),[];if(ar.length===0)return console.log(" Vector search returned no results"),[];const ne=new Map;console.log(" Processing vector search results:",ar.map(We=>({snippet_id:We.snippet_id,score:We.score,chunk_id:We.chunk_id})));for(const We of ar){const Ct=s.find(Mr=>Mr.id===We.snippet_id);if(!Ct){console.warn(" Snippet not found for ID:",We.snippet_id,"Available IDs:",s.map(Mr=>Mr.id).slice(0,5));continue}if(Et.length>0&&(!Ct.tags||Ct.tags.length===0||!Et.every(An=>Ct.tags?.includes(An))))continue;const dr=ne.get(We.snippet_id);(!dr||We.score>dr.score)&&ne.set(We.snippet_id,{snippet:Ct,score:We.score})}const we=Array.from(ne.values()).map(({snippet:We,score:Ct})=>({...We,_searchScore:Ct})).sort((We,Ct)=>Ct._searchScore-We._searchScore);return console.log(" Returning vector search results:",we.length,"snippets"),we}return s.filter(ne=>{if(Be.trim()){const we=Be.toLowerCase(),We=ne.content.toLowerCase().includes(we),Ct=ne.title?.toLowerCase().includes(we);if(!We&&!Ct)return!1}return!(Et.length>0&&(!ne.tags||ne.tags.length===0||!Et.every(We=>ne.tags?.includes(We))))})})(),Vn=(()=>{const ne=[...Dn];switch(Fn){case"date-new":return ne.sort((we,We)=>(We.updateDate||We.timestamp)-(we.updateDate||we.timestamp));case"date-old":return ne.sort((we,We)=>(we.updateDate||we.timestamp)-(We.updateDate||We.timestamp));case"title-az":return ne.sort((we,We)=>{const Ct=(we.title||"").toLowerCase(),dr=(We.title||"").toLowerCase();return Ct.localeCompare(dr)});case"title-za":return ne.sort((we,We)=>{const Ct=(we.title||"").toLowerCase();return(We.title||"").toLowerCase().localeCompare(Ct)});case"size":return ne.sort((we,We)=>We.content.length-we.content.length);default:return ne}})(),Hr=Object.values(_t).filter(Boolean).length;return a.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900 relative",onDragEnter:nn,onDragLeave:er,onDragOver:an,onDrop:In,children:[Rn&&a.jsx("div",{className:"absolute inset-0 bg-blue-500/20 backdrop-blur-sm z-40 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 border-4 border-dashed border-blue-500 dark:border-blue-400",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("svg",{className:"w-16 h-16 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Drop Documents Here"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Upload files to add them as snippets"})]})]})})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Swag"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.length," snippet",s.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:lt,className:"p-2 md:px-3 md:py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors flex items-center gap-2",title:"Create a new blank snippet","aria-label":"New Snippet",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),a.jsx("span",{className:"hidden md:inline",children:"New Snippet"})]}),a.jsxs("button",{onClick:()=>jt(!0),className:"p-2 md:px-3 md:py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center gap-2",title:"Upload documents as snippets (auto-embeds if enabled)","aria-label":"Upload Documents",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("span",{className:"hidden md:inline",children:"Upload Documents"})]}),s.length>0&&a.jsxs("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-700 rounded p-1",children:[a.jsx("button",{onClick:()=>Ft("grid"),className:`px-3 py-1.5 text-xs rounded transition-colors ${Na==="grid"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,title:"Grid view",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>Ft("list"),className:`px-3 py-1.5 text-xs rounded transition-colors ${Na==="list"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,title:"List view",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),s.length>0&&a.jsxs("select",{value:Fn,onChange:ne=>Fr(ne.target.value),className:"px-3 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",title:"Sort snippets",children:[a.jsx("option",{value:"date-new",children:" Newest First"}),a.jsx("option",{value:"date-old",children:" Oldest First"}),a.jsx("option",{value:"title-az",children:" Title A-Z"}),a.jsx("option",{value:"title-za",children:" Title Z-A"}),a.jsx("option",{value:"size",children:" By Size"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Search Index:"}),a.jsx("div",{className:"w-32 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${s.length>0?Hr/s.length*100:0}%`}})}),a.jsxs("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:[Hr,"/",s.length]})]})]})]}),s.length>0&&a.jsxs("div",{children:[Et.length>0&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Filtering:"}),Et.map(ne=>a.jsxs("button",{onClick:()=>Ze(Et.filter(we=>we!==ne)),className:"px-2 py-0.5 text-xs rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-1",children:[ne,a.jsx("span",{children:""})]},ne)),a.jsx("button",{onClick:()=>Ze([]),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear"})]}),a.jsxs("div",{className:"flex gap-2 items-start max-w-2xl",children:[a.jsxs("div",{className:"flex gap-1 bg-gray-100 dark:bg-gray-700 rounded p-1 flex-shrink-0",children:[a.jsx("button",{onClick:()=>{tn("text")},className:`px-3 py-1.5 text-sm rounded transition-colors ${bt==="text"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Text"}),a.jsx("button",{onClick:()=>{tn("vector")},className:`px-3 py-1.5 text-sm rounded transition-colors ${bt==="vector"?"bg-white dark:bg-gray-800 text-blue-600 font-medium shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,title:"Semantic search using embeddings",children:" Vector"})]}),a.jsxs("div",{className:"flex gap-2 items-center flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:bt==="text"?Be:ye,onChange:ne=>{bt==="text"?ht(ne.target.value):ut(ne.target.value)},onKeyDown:ne=>{ne.key==="Enter"&&bt==="vector"&&vr()},placeholder:bt==="vector"?"Semantic search...":"Search snippets...",className:"w-full px-3 py-1.5 pl-8 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("svg",{className:"w-4 h-4 absolute left-2.5 top-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(bt==="text"?Be:ye)&&a.jsx("button",{onClick:()=>{bt==="text"?ht(""):(ut(""),Kt([]),Re(!1))},className:"absolute right-2.5 top-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),bt==="vector"&&a.jsx("button",{onClick:vr,disabled:On||!ye.trim(),className:"px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium transition-colors flex-shrink-0",children:On?"Searching...":"Search"})]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 items-center",children:[a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Filter by tag:"}),a.jsx("span",{className:"hidden md:flex gap-1",children:Oe.filter(ne=>b().includes(ne)).slice(0,5).map(ne=>{const we=Et.includes(ne);return a.jsx("button",{onClick:()=>{Ze(we?Et.filter(We=>We!==ne):[...Et,ne]),Pt(ne)},className:`px-3 py-1 rounded-full text-xs font-medium transition-all ${we?"bg-blue-600 text-white shadow-md hover:bg-blue-700":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,title:`${we?"Remove":"Add"} tag filter`,children:ne},ne)})}),a.jsx("div",{className:"flex-1 min-w-[180px] max-w-xs",children:a.jsx(ghe,{allTags:b(),selectedTags:Et,onAdd:ne=>{Ze([...Et,ne]),Pt(ne)},placeholder:"Add tag to filter..."})})]})]}),s.length>0&&x().length>0&&!W&&!J&&a.jsx("div",{className:"mt-2 flex items-center justify-end",children:a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:[x().length," selected"]})})]}),zt&&a.jsxs("div",{className:"mx-6 mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:" Adding to Search Index..."}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[zt.current," / ",zt.total]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${zt.current/zt.total*100}%`}})}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:"This may take a moment. Embeddings enable semantic search over your snippets."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32 min-h-0",children:s.length===0?a.jsxs("div",{className:"text-center py-16 px-4",children:[a.jsx("svg",{className:"w-20 h-20 mx-auto mb-6 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"No Content Snippets Yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Start building your knowledge base by capturing content from conversations, documents, or creating new snippets."}),a.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[a.jsxs("button",{onClick:lt,className:"px-5 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 shadow-md",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Snippet"]}),a.jsxs("button",{onClick:()=>jt(!0),className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-md",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Documents"]})]}),a.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:" Quick Tips"}),a.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2 max-w-lg mx-auto text-left",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mt-0.5",children:""}),a.jsxs("span",{children:["Use the ",a.jsx("strong",{children:"grab button"})," in chat to save messages as snippets"]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mt-0.5",children:""}),a.jsx("span",{children:"Upload documents to automatically create searchable snippets"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-green-600 dark:text-green-400 mt-0.5",children:""}),a.jsxs("span",{children:["Add snippets to the ",a.jsx("strong",{children:"Search Index"})," for semantic search"]})]})]})]})]}):Dn.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a.jsx("p",{className:"text-lg",children:"No matching snippets"}),a.jsx("p",{className:"text-sm mt-2",children:"Try adjusting your search or tag filters"})]}):Na==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Vn.map(ne=>a.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 transition-all ${ne.selected?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700"}`,children:[a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("input",{type:"checkbox",checked:ne.selected||!1,onChange:()=>h(ne.id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})}),T&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("button",{onClick:()=>{I({id:ne.id,content:ne.content,title:ne.title,tags:ne.tags,created:new Date(ne.timestamp),modified:ne.updateDate?new Date(ne.updateDate):new Date(ne.timestamp)}),e(`Casting snippet to ${N?"TV":"Chromecast"}`)},className:"p-2 text-sm bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors shadow-md",title:"Cast to TV",children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})}),a.jsxs("div",{className:"p-4 pt-10",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white ${sn(ne.sourceType)}`,children:ne.sourceType}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(ne.timestamp).toLocaleString()}),"_searchScore"in ne&&a.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 font-medium",children:[" ",ne._searchScore.toFixed(3)]})]}),ne.title&&a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:ne.title}),a.jsx("div",{className:"mb-2",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[(ne.tags||[]).map((we,We)=>a.jsxs("span",{className:"group px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-1",children:[a.jsx("span",{className:"cursor-pointer hover:underline",onClick:Ct=>{Ct.stopPropagation(),Et.includes(we)||Ze([...Et,we])},title:"Filter by this tag",children:we}),a.jsx("button",{onClick:async Ct=>{Ct.stopPropagation();const dr=(ne.tags||[]).filter($r=>$r!==we);await l(ne.id,{tags:dr});const Mr=ne.id,An=we;$n({snippetId:Mr,tag:An,timestamp:Date.now()}),e(`Removed tag "${we}"`),setTimeout(()=>{$n($r=>$r&&$r.snippetId===Mr&&$r.tag===An?null:$r)},5e3)},className:"opacity-60 hover:opacity-100 hover:text-red-600 dark:hover:text-red-400 transition-opacity",title:"Remove tag",children:""})]},We)),a.jsx("div",{className:"inline-block",onClick:we=>we.stopPropagation(),children:a.jsx(Zy,{existingTags:b(),currentTags:ne.tags||[],onAddTag:async we=>{await l(ne.id,{tags:[...ne.tags||[],we]}),e(`Added tag "${we}"`)},placeholder:"+ tag",className:"text-xs w-20"})})]})}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 max-h-48 overflow-hidden cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded p-2 -m-2 transition-colors",onClick:()=>j(ne),children:a.jsx("div",{className:"line-clamp-6",children:a.jsx(Tu,{content:ne.content})})}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx(zv,{text:ne.content,variant:"icon",className:"p-1"}),a.jsx("button",{onClick:async()=>{En(!0);try{const we=await S(ne.id);if(Kr(We=>({...We,[ne.id]:we.hasEmbedding})),we.hasEmbedding){const We=` Embeddings found: ${we.chunkCount} chunk${we.chunkCount!==1?"s":""}`;e(We)}else r('No embeddings found. Use "Add to Search Index" to create them.')}catch(we){console.error("Failed to check embedding status:",we),t("Failed to check embedding status")}finally{En(!1)}},className:`p-2 text-sm rounded transition-colors ${_t[ne.id]===!0?"bg-green-600 text-white hover:bg-green-700":_t[ne.id]===!1?"bg-gray-400 text-white hover:bg-gray-500":"bg-blue-500 text-white hover:bg-blue-600"}`,title:_t[ne.id]===!0?"Has embeddings (click for details)":_t[ne.id]===!1?"No embeddings (click to check)":"Check embedding status",disabled:pr,children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"})})}),a.jsxs("button",{onClick:()=>Ge(ne),className:"flex-1 p-2 md:px-3 md:py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-1.5",title:"Edit snippet","aria-label":"Edit",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"hidden md:inline",children:"Edit"})]})]})]})]},ne.id))}):a.jsx("div",{className:"space-y-2",children:Vn.map(ne=>a.jsxs("div",{className:`flex items-center gap-4 p-3 bg-white dark:bg-gray-800 rounded-lg border-2 transition-all hover:shadow-md ${ne.selected?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[a.jsx("input",{type:"checkbox",checked:ne.selected||!1,onChange:()=>h(ne.id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>j(ne),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:ne.title||"Untitled"}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full text-white flex-shrink-0 ${sn(ne.sourceType)}`,children:ne.sourceType}),"_searchScore"in ne&&a.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 font-medium flex-shrink-0",children:[" ",ne._searchScore.toFixed(3)]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:ne.content})]}),a.jsxs("div",{className:"flex gap-1 flex-wrap max-w-xs flex-shrink-0",children:[(ne.tags||[]).slice(0,3).map((we,We)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full cursor-pointer hover:bg-blue-200 dark:hover:bg-blue-800",onClick:Ct=>{Ct.stopPropagation(),Et.includes(we)||Ze([...Et,we])},title:"Filter by this tag",children:we},We)),(ne.tags||[]).length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500 dark:text-gray-400",children:["+",(ne.tags||[]).length-3]})]}),a.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",children:new Date(ne.timestamp).toLocaleDateString()}),a.jsx("div",{className:`w-2 h-2 rounded-full ${_t[ne.id]===!0?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,title:_t[ne.id]===!0?"Indexed":"Not indexed"}),a.jsx("button",{onClick:()=>Ge(ne),className:"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Edit snippet",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]},ne.id))})}),J&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Edit Snippet"}),a.jsx("button",{onClick:()=>ee(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),a.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title (optional)"}),a.jsx("input",{type:"text",value:q,onChange:ne=>V(ne.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-lg",placeholder:"Enter a title..."})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:ue.map(ne=>a.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-2 group",children:[ne,a.jsx("button",{onClick:()=>{wr(ne),xa(!0)},className:"hover:text-red-600 dark:hover:text-red-400 opacity-60 group-hover:opacity-100 transition-opacity",title:"Remove tag",children:""})]},ne))}),a.jsx(Zy,{existingTags:b(),currentTags:ue,onAddTag:ne=>{ue.includes(ne)||H([...ue,ne])},placeholder:"Type to add tag..."})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),a.jsx("textarea",{value:U,onChange:ne=>O(ne.target.value),className:"w-full h-[calc(100vh-28rem)] min-h-[400px] px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm resize-none",placeholder:"Enter content..."})]})]}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsxs("button",{onClick:()=>ee(null),className:"p-2 md:px-6 md:py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-1.5",title:"Cancel","aria-label":"Cancel",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"hidden md:inline",children:"Cancel"})]}),a.jsxs("button",{onClick:rr,className:"p-2 md:px-6 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1.5",title:"Save Changes","aria-label":"Save Changes",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:"hidden md:inline",children:"Save Changes"})]})]})]})}),a.jsx(phe,{isOpen:ma,title:"Remove Tag?",message:`Remove tag "${xr}"?`,confirmLabel:"Remove Tag",cancelLabel:"Cancel",variant:"danger",onConfirm:async()=>{if(xr){if(xt){const ne=s.find(we=>we.id===xt);ne&&(await l(xt,{tags:(ne.tags||[]).filter(we=>we!==xr)}),e(`Removed tag "${xr}"`)),pt(null)}else H(ue.filter(ne=>ne!==xr));xa(!1),wr(null)}},onCancel:()=>{xa(!1),wr(null),pt(null)}}),M&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create New Google Doc"})}),a.jsxs("div",{className:"p-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Document Name"}),a.jsx("input",{type:"text",value:D,onChange:ne=>z(ne.target.value),onKeyPress:ne=>ne.key==="Enter"&&qa(),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"My Swag Document",autoFocus:!0})]}),a.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{le(!1),z("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",disabled:kt,children:"Cancel"}),a.jsx("button",{onClick:qa,disabled:kt||!D.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:kt?"Creating...":"Create"})]})]})}),W&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[W.title&&a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:W.title}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white ${sn(W.sourceType)}`,children:W.sourceType}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(W.timestamp).toLocaleString()}),F.isPlaying&&a.jsxs("button",{onClick:ae,className:"p-2 md:px-3 md:py-1.5 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",title:"Stop reading aloud","aria-label":"Stop Reading",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),a.jsx("span",{className:"hidden md:inline",children:"Stop Reading"})]})]})]}),a.jsx("button",{onClick:()=>j(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":"Close",children:""})]}),a.jsx("div",{ref:Aa,className:"flex-1 overflow-y-auto p-6",onScroll:ne=>{if(B&&N){const we=ne.currentTarget,We=we.scrollTop/(we.scrollHeight-we.clientHeight)*100;R(We)}},children:a.jsx("div",{className:"text-gray-800 dark:text-gray-200",children:(()=>{const ne=W.content;return Uv(ne)?a.jsx(ehe,{content:ne}):a.jsx(Tu,{content:ne})})()})}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[N&&B&&a.jsxs("div",{className:"text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})}),"Casting to TV"]}),a.jsxs("div",{className:"flex gap-3 ml-auto",children:[T&&a.jsx("button",{onClick:()=>{I({id:W.id,content:W.content,title:W.title,tags:W.tags,created:new Date(W.timestamp),modified:W.updateDate?new Date(W.updateDate):new Date(W.timestamp)}),e(`Casting snippet to ${N?"TV":"Chromecast"}`)},className:"p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",title:"Cast to TV",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})}),a.jsx(zv,{text:W.content,variant:"button",className:"p-2 md:px-4 md:py-2"}),a.jsxs("button",{onClick:()=>{j(null),Ge(W)},className:"p-2 md:px-4 md:py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-1.5",title:"Edit","aria-label":"Edit",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"hidden md:inline",children:"Edit"})]}),a.jsxs("button",{onClick:()=>j(null),className:"p-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1.5",title:"Close","aria-label":"Close",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"hidden md:inline",children:"Close"})]})]})]})]})}),x().length>0&&!W&&!J&&a.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-white dark:bg-gray-800 shadow-2xl rounded-full px-4 md:px-6 py-3 flex items-center gap-2 md:gap-4 border-2 border-gray-200 dark:border-gray-700 z-50 animate-in slide-in-from-bottom duration-200 max-w-[95vw] overflow-x-auto",children:[a.jsxs("button",{onClick:g,className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Select all snippets (Ctrl+A)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.jsx("span",{className:"hidden md:inline",children:"All"})]}),a.jsxs("button",{onClick:f,className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Deselect all snippets (Ctrl+D)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"hidden md:inline",children:"None"})]}),a.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:x().length}),a.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),a.jsxs("button",{onClick:()=>ce("generate-embeddings"),disabled:gt,className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Add to Search Index (Ctrl+I)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a.jsx("span",{className:"hidden md:inline",children:"Index"})]}),a.jsxs("button",{onClick:()=>{Ee(!0),ve("add"),ge([])},className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Add Tags (Ctrl+T)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),a.jsx("span",{className:"hidden md:inline",children:"Tag"})]}),a.jsxs("button",{onClick:()=>ce("merge"),disabled:x().length<2,className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Merge Snippets (Ctrl+M)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),a.jsx("span",{className:"hidden md:inline",children:"Merge"})]}),a.jsxs("button",{onClick:()=>ce("delete"),className:"px-2 md:px-3 py-1.5 text-sm rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Delete Selected (Del)",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"hidden md:inline",children:"Delete"})]})]}),Sr&&a.jsxs("div",{className:"fixed bottom-6 right-6 bg-gray-900 dark:bg-gray-800 text-white rounded-lg shadow-2xl px-5 py-3 flex items-center gap-4 border border-gray-700 z-50 animate-in slide-in-from-right duration-200",children:[a.jsxs("span",{className:"text-sm",children:["Removed tag ",a.jsxs("strong",{children:['"',Sr.tag,'"']})]}),a.jsx("button",{onClick:async()=>{const ne=s.find(we=>we.id===Sr.snippetId);ne&&(await l(Sr.snippetId,{tags:[...ne.tags||[],Sr.tag]}),e(`Restored tag "${Sr.tag}"`)),$n(null)},className:"px-3 py-1 text-sm bg-white text-gray-900 rounded hover:bg-gray-100 transition-colors font-medium",children:"Undo"}),a.jsx("button",{onClick:()=>$n(null),className:"text-gray-400 hover:text-white transition-colors",title:"Dismiss",children:""})]}),me&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Ae==="add"?"Add Tags":Ae==="remove"?"Remove Tags":"Filter by Tags"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:Ae==="add"?"Select or create tags to add to selected snippets":Ae==="remove"?"Select tags to remove from selected snippets":"Select tags to filter snippets"})]}),a.jsxs("div",{className:"p-6",children:[Pe.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Pe.map(ne=>a.jsxs("span",{className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full flex items-center gap-2",children:[ne,a.jsx("button",{onClick:()=>ge(Pe.filter(we=>we!==ne)),className:"hover:text-red-600 dark:hover:text-red-400",children:""})]},ne))}),Ae==="add"&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Add New Tag"}),a.jsx(Zy,{existingTags:b(),currentTags:Pe,onAddTag:ne=>{Pe.includes(ne)||ge([...Pe,ne])},placeholder:"Type to search or create tags...",className:"w-full"})]}),b().length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:Ae==="add"?"Or Select Existing":Ae==="remove"?"Select Tags to Remove":"Select Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto",children:b().map(ne=>a.jsx("button",{onClick:()=>{Pe.includes(ne)?ge(Pe.filter(we=>we!==ne)):ge([...Pe,ne])},className:`px-3 py-1 text-sm rounded-full transition-colors ${Pe.includes(ne)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:ne},ne))})]})]}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{Ee(!1),ge([])},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Un,disabled:Ae!=="filter"&&Pe.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Ae==="add"?"Add Tags":Ae==="remove"?"Remove Tags":"Apply Filter"})]})]})}),kt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-700 dark:text-gray-300",children:"Processing..."})]})}),Zt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl min-w-[300px]",children:a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-700 dark:text-gray-300 mb-2",children:[a.jsx("span",{children:Zt.status}),a.jsxs("span",{children:[Zt.current," / ",Zt.total]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Zt.current/Zt.total*100}%`}})})]})})}),dt&&a.jsx(fhe,{isOpen:dt,onClose:()=>jt(!1),onUpload:Er})]})},xhe=({isOpen:e,onClose:t,onConfirm:r,providers:n})=>{const[s,i]=C.useState("all"),[l,c]=C.useState(""),[d,h]=C.useState(""),[g,f]=C.useState(""),[x,b]=C.useState(!1);if(!e)return null;const y=()=>{const S={};s==="provider"?S.provider=l:s==="dateRange"&&(d&&(S.startDate=d),g&&(S.endDate=g)),r(s,S),b(!1),t()},k=()=>!(!x||s==="provider"&&!l||s==="dateRange"&&!d&&!g);return a.jsx("div",{className:"modal-overlay",onClick:t,children:a.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:"Clear Billing Data"}),a.jsx("button",{className:"modal-close",onClick:t,children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"warning-banner",children:[" ",a.jsx("strong",{children:"Warning:"})," This action cannot be undone. Your billing data will be permanently deleted."]}),a.jsxs("div",{className:"clear-mode-tabs",children:[a.jsx("button",{className:s==="all"?"active":"",onClick:()=>i("all"),children:"Clear All"}),a.jsx("button",{className:s==="provider"?"active":"",onClick:()=>i("provider"),children:"Clear by Provider"}),a.jsx("button",{className:s==="dateRange"?"active":"",onClick:()=>i("dateRange"),children:"Clear by Date Range"})]}),a.jsxs("div",{className:"clear-mode-content",children:[s==="all"&&a.jsxs("div",{className:"clear-mode-description",children:[a.jsxs("p",{children:["This will delete ",a.jsx("strong",{children:"all"})," transactions from your billing sheet."]}),a.jsx("p",{children:"Consider exporting to CSV first for your records."})]}),s==="provider"&&a.jsxs("div",{className:"clear-mode-options",children:[a.jsxs("label",{children:["Select Provider:",a.jsxs("select",{value:l,onChange:S=>c(S.target.value),children:[a.jsx("option",{value:"",children:"-- Select Provider --"}),n.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsx("p",{className:"hint",children:"Useful for aligning with provider billing cycles (e.g., clear monthly)."})]}),s==="dateRange"&&a.jsxs("div",{className:"clear-mode-options",children:[a.jsxs("label",{children:["Start Date:",a.jsx("input",{type:"date",value:d,onChange:S=>h(S.target.value)})]}),a.jsxs("label",{children:["End Date:",a.jsx("input",{type:"date",value:g,onChange:S=>f(S.target.value)})]}),a.jsx("p",{className:"hint",children:"Leave blank to clear from beginning/to end. Both can be used together."})]}),a.jsx("div",{className:"confirmation-checkbox",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:x,onChange:S=>b(S.target.checked)}),a.jsx("span",{children:"I understand this action cannot be undone"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn-secondary",onClick:t,children:"Cancel"}),a.jsx("button",{className:"btn-danger",onClick:y,disabled:!k(),children:"Clear Data"})]})]})})},bhe=()=>{const{accessToken:e,isAuthenticated:t}=Os(),{refreshUsage:r}=Lg(),[n,s]=C.useState(null),[i,l]=C.useState(!0),[c,d]=C.useState(null),[h,g]=C.useState(""),[f,x]=C.useState(""),[b,y]=C.useState(""),[k,S]=C.useState(""),[_,T]=C.useState(!1),[N,I]=C.useState("overview"),[R,B]=C.useState(!0),[F,ae]=C.useState(new Set),[G,$]=C.useState(0),[J,ee]=C.useState(0),[W,j]=C.useState(0),[U,O]=C.useState(!1),[q,V]=C.useState("5.00"),[ue,H]=C.useState(!1),D=C.useRef(null),[z,M]=C.useState(1),[le,me]=C.useState(100);C.useEffect(()=>{console.log(" [BillingPage] Auth State:",{isAuthenticated:t,hasAccessToken:!!e,tokenLength:e?.length||0})},[t,e]);const Ee=async()=>{l(!0),d(null);try{if(console.log(" [BillingPage] fetchBillingData called"),console.log(" [BillingPage] accessToken present:",!!e),console.log(" [BillingPage] isAuthenticated:",t),!e||!t){const jt="Not authenticated. Please sign in.";throw console.error(" [BillingPage] Authentication check failed:",jt),new Error(jt)}const X=await Pe(),he=`${X}/billing`;console.log(" [BillingPage] API Base:",X),console.log(" [BillingPage] Request URL:",he);const Re={Authorization:`Bearer ${e}`,"Content-Type":"application/json"};console.log(" [BillingPage] Sending request to:",he),console.log(" [BillingPage] Request headers:",Object.keys(Re));const gt=await fetch(he,{method:"GET",headers:Re});if(console.log(" [BillingPage] Response received:",{status:gt.status,statusText:gt.statusText,ok:gt.ok,headers:Object.fromEntries(gt.headers.entries())}),!gt.ok){let jt;try{jt=await gt.json()}catch(Zt){throw console.error(" [BillingPage] Failed to parse error response:",Zt),new Error(`HTTP ${gt.status}: ${gt.statusText}`)}throw console.error(" [BillingPage] Backend returned error:",jt),new Error(jt.message||jt.error||`HTTP ${gt.status}`)}const Qe=await gt.json();if(console.log(" Billing data received:",{source:Qe.source,transactionCount:Qe.transactions?.length,hasByType:!!Qe.totals?.byType,hasByProvider:!!Qe.totals?.byProvider,hasByModel:!!Qe.totals?.byModel,byTypeKeys:Qe.totals?.byType?Object.keys(Qe.totals.byType):[],byProviderKeys:Qe.totals?.byProvider?Object.keys(Qe.totals.byProvider):[],byModelKeys:Qe.totals?.byModel?Object.keys(Qe.totals.byModel):[]}),Qe.transactions&&Qe.transactions.length>0){const jt=[...new Set(Qe.transactions.map(Zt=>Zt.type))];console.log(" Unique transaction types in data:",jt),console.log(" Sample transactions:",Qe.transactions.slice(0,3))}Qe.source==="service"&&Qe.message&&(console.log(" Billing data source: Service key sheet"),console.log(" Message:",Qe.message)),s(Qe),console.log(" [BillingPage] Billing data loaded successfully");let zt=0,Gt=0,dt=0;if(Qe.transactions)for(const jt of Qe.transactions)if(jt.type==="credit_added"){const Zt=Math.abs(jt.cost);Gt+=Zt,zt+=Zt,console.log(` Found credit: +$${Zt.toFixed(2)}, total credits: $${Gt.toFixed(2)}, balance: $${zt.toFixed(2)}`)}else dt+=jt.cost,zt-=jt.cost;$(zt),ee(Gt),j(dt),console.log(` Final summary - Balance: $${zt.toFixed(4)}, Total Credits: $${Gt.toFixed(4)}, Total Expenses: $${dt.toFixed(4)}`),r()}catch(X){console.error(" [BillingPage] Error fetching billing data:",{message:X.message,stack:X.stack,name:X.name,error:X});const he=X.message||"Failed to load billing data";d(he),X.message?.includes("Not authenticated")?d(" Not authenticated. Please sign in with Google to view billing data."):X.message?.includes("NetworkError")||X.message?.includes("Failed to fetch")?d(" Network error. Please check your connection and ensure the backend server is running."):d(` Failed to load billing data: ${he}`)}finally{l(!1),console.log(" [BillingPage] fetchBillingData completed, loading:",!1)}},Ae=async(X,he)=>{try{if(!e||!t)throw new Error("Not authenticated");const Re=new URLSearchParams({mode:X});X==="provider"&&he.provider&&Re.append("provider",he.provider),X==="dateRange"&&(he.startDate&&Re.append("startDate",he.startDate),he.endDate&&Re.append("endDate",he.endDate));const gt=await Pe(),Qe=await fetch(`${gt}/billing/clear?${Re.toString()}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!Qe.ok){const Gt=await Qe.json();throw new Error(Gt.message||"Failed to clear data")}const zt=await Qe.json();alert(` Success: Cleared ${zt.deletedCount} transactions. ${zt.remainingCount} remaining.`),Ee()}catch(Re){console.error("Error clearing data:",Re),alert(` Error: ${Re.message}`)}},ve=()=>{if(!n||ge.length===0){alert("No data to export");return}const X=["Timestamp","Type","Provider","Model","Tokens In","Tokens Out","Total Tokens","Cost ($)","Duration (ms)","Memory Limit (MB)","Memory Used (MB)","Request ID","Status","Error"],he=ge.map(Gt=>[Gt.timestamp,Gt.type,Gt.provider,Gt.model,Gt.tokensIn,Gt.tokensOut,Gt.totalTokens,Gt.cost.toFixed(6),Gt.durationMs,Gt.memoryLimitMB||"",Gt.memoryUsedMB||"",Gt.requestId||"",Gt.status,Gt.error||""]),Re=[X.join(","),...he.map(Gt=>Gt.map(dt=>`"${dt}"`).join(","))].join(`
`),gt=new Blob([Re],{type:"text/csv"}),Qe=URL.createObjectURL(gt),zt=document.createElement("a");zt.href=Qe,zt.download=`billing-${new Date().toISOString().split("T")[0]}.csv`,zt.click(),URL.revokeObjectURL(Qe)},Pe=async()=>{const X=window.location.hostname;if(X==="localhost"||X==="127.0.0.1"){const he="http://localhost:3000";try{if((await fetch(`${he}/health`,{method:"GET",signal:AbortSignal.timeout(1e3)})).ok)return he}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"};if(C.useEffect(()=>{t&&e&&Ee()},[t,e]),C.useEffect(()=>{if(!U||!D.current||!e)return;const X=setInterval(()=>{window.paypal&&(clearInterval(X),H(!0),D.current.innerHTML="",window.paypal.Buttons({createOrder:async()=>{try{const he=parseFloat(q);if(he<5)throw new Error("Minimum purchase is $5.00");const Re=await $A(he,e);if(!Re.success||!Re.orderId)throw new Error(Re.error||"Failed to create order");return Re.orderId}catch(he){throw console.error("PayPal createOrder error:",he),alert(`Error creating order: ${he.message}`),he}},onApprove:async he=>{try{const Re=await UA(he.orderID,e);if(!Re.success)throw new Error(Re.error||"Failed to capture payment");O(!1),await Ee(),await r()}catch(Re){console.error("PayPal onApprove error:",Re),alert(`Error processing payment: ${Re.message}`)}},onError:he=>{console.error("PayPal error:",he),alert("PayPal encountered an error. Please try again.")},style:{layout:"vertical",color:"blue",shape:"rect",label:"paypal"}}).render(D.current).then(()=>{H(!1)}).catch(he=>{console.error("PayPal render error:",he),H(!1)}))},100);return()=>clearInterval(X)},[U,q,e]),C.useEffect(()=>{M(1)},[h,f,b,k]),!t)return a.jsx("div",{className:"billing-page",children:a.jsxs("div",{className:"error-message",children:[a.jsx("h3",{children:" Sign In Required"}),a.jsx("p",{children:"Please sign in with Google to view your billing data."}),a.jsxs("div",{className:"info-box",style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",textAlign:"left"},children:[a.jsx("h4",{style:{marginTop:0,color:"#1976d2"},children:" How to Access Billing Data:"}),a.jsxs("ol",{style:{marginLeft:"20px",color:"#424242"},children:[a.jsxs("li",{children:["Click the ",a.jsx("strong",{children:'"Sign in with Google"'})," button in the top navigation bar"]}),a.jsx("li",{children:"That's it! Your billing data will load automatically"})]}),a.jsx("p",{style:{marginTop:"15px",color:"#666",fontSize:"0.9em"},children:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google."}),a.jsxs("details",{style:{marginTop:"15px",fontSize:"0.85em",color:"#888"},children:[a.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:" Debug Info"}),a.jsx("pre",{style:{marginTop:"10px",padding:"10px",background:"#f5f5f5",borderRadius:"4px",overflow:"auto"},children:JSON.stringify({isAuthenticated:t,hasAccessToken:!!e,tokenLength:e?.length||0,currentPath:window.location.pathname},null,2)})]})]})]})});if(i)return a.jsx("div",{className:"billing-page",children:a.jsx("div",{className:"loading",children:"Loading billing data..."})});if(c)return a.jsx("div",{className:"billing-page",children:a.jsxs("div",{className:"error-message",children:[a.jsx("h3",{children:" Error Loading Billing Data"}),a.jsx("p",{children:c}),a.jsx("button",{onClick:Ee,style:{marginTop:"15px"},children:" Retry"})]})});if(!n)return a.jsx("div",{className:"billing-page",children:a.jsx("div",{className:"loading",children:"No billing data available. Please wait..."})});if(!n.transactions||n.transactions.length===0)return a.jsxs("div",{className:"billing-page",children:[a.jsxs("div",{className:"billing-header",children:[a.jsx("h1",{children:" Billing Dashboard"}),a.jsx("p",{style:{color:"#666",marginTop:"8px"},children:n.message||"No transactions found"})]}),a.jsxs("div",{className:"info-box",style:{marginTop:"20px",padding:"20px",background:"#f5f5f5",borderRadius:"8px"},children:[a.jsx("h3",{style:{marginTop:0},children:" No Billing Data Yet"}),a.jsx("p",{children:"Start using the chat to generate billing records. All API usage is automatically tracked."}),a.jsx("button",{onClick:Ee,style:{marginTop:"15px"},children:" Refresh"})]})]});const ge=n.transactions.filter(X=>{if(h||f){const he=new Date(X.timestamp);if(h&&he<new Date(h))return!1;if(f){const Re=new Date(f);if(Re.setHours(23,59,59,999),he>Re)return!1}}return!(b&&String(X.type).toLowerCase()!==b.toLowerCase()||k&&X.provider.toLowerCase()!==k.toLowerCase())}),Be=ge.length,ht=Math.ceil(Be/le),ye=(z-1)*le,ut=ye+le,Et=ge.slice(ye,ut),kt=((X,he=!1)=>{const Re={},gt={},Qe={};let zt=0,Gt=0,dt=0,jt=0;const Zt=X.filter(Bt=>Bt.type==="chat"),Jt=X.filter(Bt=>Bt.type!=="summary"&&Bt.type!=="credit_added"&&Bt.type!=="lambda_invocation"),Rn=Zt.length,zr=Jt.length;return X.forEach(Bt=>{if(!Bt||!Bt.model||!Bt.provider){console.warn("Skipping invalid transaction:",Bt);return}(!he||String(Bt.type)!=="credit_added")&&(zt+=Bt.cost),Gt+=Bt.totalTokens||0,dt+=Bt.tokensIn||0,jt+=Bt.tokensOut||0;const rn=String(Bt.type);Re[rn]||(Re[rn]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0}),Re[rn].cost+=Bt.cost,Re[rn].tokens+=Bt.totalTokens||0,Re[rn].tokensIn+=Bt.tokensIn||0,Re[rn].tokensOut+=Bt.tokensOut||0,Re[rn].count+=1,gt[Bt.provider]||(gt[Bt.provider]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0}),gt[Bt.provider].cost+=Bt.cost,gt[Bt.provider].tokens+=Bt.totalTokens||0,gt[Bt.provider].tokensIn+=Bt.tokensIn||0,gt[Bt.provider].tokensOut+=Bt.tokensOut||0,gt[Bt.provider].count+=1,Qe[Bt.model]||(Qe[Bt.model]={cost:0,tokens:0,tokensIn:0,tokensOut:0,count:0,provider:Bt.provider}),Qe[Bt.model].cost+=Bt.cost,Qe[Bt.model].tokens+=Bt.totalTokens||0,Qe[Bt.model].tokensIn+=Bt.tokensIn||0,Qe[Bt.model].tokensOut+=Bt.tokensOut||0,Qe[Bt.model].count+=1}),{totalCost:zt,totalTokens:Gt,totalTokensIn:dt,totalTokensOut:jt,totalUserQueries:Rn,totalLLMCalls:zr,byType:Re,byProvider:gt,byModel:Qe}})(ge,!0),Rt=Array.from(new Set(n.transactions.map(X=>X.provider))).sort(),ur=Array.from(new Set(n.transactions.map(X=>String(X.type)))),yt=X=>{const he=new Map,Re=[];X.forEach(Qe=>{if(Qe.requestId&&Qe.requestId!==""){const zt=he.get(Qe.requestId)||[];zt.push(Qe),he.set(Qe.requestId,zt)}else Re.push(Qe)}),he.forEach(Qe=>{Qe.sort((zt,Gt)=>new Date(zt.timestamp).getTime()-new Date(Gt.timestamp).getTime())}),Re.sort((Qe,zt)=>new Date(zt.timestamp).getTime()-new Date(Qe.timestamp).getTime());const gt=Array.from(he.entries()).sort(([,Qe],[,zt])=>{const Gt=Qe[0].timestamp,dt=zt[0].timestamp;return new Date(dt).getTime()-new Date(Gt).getTime()});return{grouped:new Map(gt),ungrouped:Re}},{grouped:bt,ungrouped:tn}=yt(Et),{grouped:ar,ungrouped:Kt}=yt(ge),On=X=>{ae(he=>{const Re=new Set(he);return Re.has(X)?Re.delete(X):Re.add(X),Re})};return a.jsx("div",{className:"billing-page-container",children:a.jsxs("div",{className:"billing-page",children:[a.jsxs("div",{className:"billing-header",children:[a.jsx("div",{className:"billing-title",children:a.jsx("h1",{children:" Billing Dashboard"})}),a.jsxs("div",{className:"billing-actions",children:[a.jsxs("button",{className:"btn-secondary flex items-center gap-1.5",onClick:ve,title:"Export CSV","aria-label":"Export CSV",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Export CSV"})]}),n.source!=="service"&&a.jsxs("button",{className:"btn-danger flex items-center gap-1.5",onClick:()=>T(!0),title:"Clear Data","aria-label":"Clear Data",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"hidden md:inline",children:"Clear Data"})]})]})]}),a.jsxs("div",{className:"billing-filters",children:[a.jsxs("div",{className:"filter-group",children:[a.jsxs("label",{children:[" Start Date:",a.jsx("input",{type:"date",value:h,onChange:X=>g(X.target.value),placeholder:"Select start date",max:f||void 0})]}),a.jsxs("label",{children:[" End Date:",a.jsx("input",{type:"date",value:f,onChange:X=>x(X.target.value),placeholder:"Select end date",min:h||void 0})]}),a.jsxs("label",{children:[" Type:",a.jsxs("select",{value:b,onChange:X=>y(X.target.value),children:[a.jsx("option",{value:"",children:"All Types"}),ur.map(X=>a.jsx("option",{value:X,children:X==="chat"?"Chat":X==="embedding"?"Embedding":X==="guardrail_input"?"Guardrail Input":X==="guardrail_output"?"Guardrail Output":X==="planning"?"Planning":X==="assessment"?"Assessment":X==="image_generation"?"Image Generation":X==="tts"?"Text-to-Speech":X==="chat_iteration"?"Chat Iteration":typeof X=="string"?X.replace(/_/g," ").replace(/\b\w/g,he=>he.toUpperCase()):String(X)},X))]})]}),a.jsxs("label",{children:[" Provider:",a.jsxs("select",{value:k,onChange:X=>S(X.target.value),children:[a.jsx("option",{value:"",children:"All Providers"}),Rt.map(X=>a.jsx("option",{value:X,children:X},X))]})]}),(h||f||b||k)&&a.jsx("button",{className:"btn-clear-filters",onClick:()=>{g(""),x(""),y(""),S("")},children:"Clear Filters"})]}),a.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e0e0e0",display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"center"},children:[a.jsx("span",{style:{fontSize:"0.85rem",color:"#666",fontWeight:500},children:"Quick ranges:"}),a.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const X=new Date;g(X.toISOString().split("T")[0]),x(X.toISOString().split("T")[0])},children:"Today"}),a.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const X=new Date,he=new Date(X);he.setDate(X.getDate()-7),g(he.toISOString().split("T")[0]),x(X.toISOString().split("T")[0])},children:"Last 7 Days"}),a.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const X=new Date,he=new Date(X);he.setMonth(X.getMonth()-1),g(he.toISOString().split("T")[0]),x(X.toISOString().split("T")[0])},children:"Last 30 Days"}),a.jsx("button",{className:"btn-clear-filters",style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},onClick:()=>{const X=new Date,he=new Date(X.getFullYear(),X.getMonth(),1);g(he.toISOString().split("T")[0]),x(X.toISOString().split("T")[0])},children:"This Month"})]})]}),a.jsxs("div",{className:"billing-tabs",children:[a.jsx("button",{className:N==="overview"?"active":"",onClick:()=>I("overview"),children:"Overview"}),a.jsxs("button",{className:N==="transactions"?"active":"",onClick:()=>I("transactions"),children:["Transactions (",ge.length,")"]})]}),N==="overview"&&a.jsxs("div",{className:"billing-overview",children:[a.jsxs("div",{className:"summary-cards",children:[a.jsxs("div",{className:"summary-card",style:{background:G>0?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"2px solid rgba(255,255,255,0.3)"},children:[a.jsx("div",{className:"summary-label",style:{color:"rgba(255,255,255,0.9)",fontSize:"1.1rem",fontWeight:"bold",marginBottom:"8px"},children:" Credit Balance"}),a.jsxs("div",{className:"summary-value",style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"12px"},children:["$",G.toFixed(2)]}),a.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.7)",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255,255,255,0.2)"},children:["Total Credits: $",J.toFixed(2)]}),a.jsx("button",{style:{background:"white",color:"#764ba2",border:"none",padding:"8px 16px",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"bold",cursor:"pointer",marginTop:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},onClick:()=>O(!0),children:" Add Credit"})]}),a.jsxs("div",{className:"summary-card",children:[a.jsx("div",{className:"summary-label",children:"Total Cost"}),a.jsxs("div",{className:"summary-value",children:["$",kt.totalCost.toFixed(4)]}),a.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Usage only (excl. credits)"})]}),a.jsxs("div",{className:"summary-card",children:[a.jsx("div",{className:"summary-label",children:"Total Tokens"}),a.jsx("div",{className:"summary-value",children:kt.totalTokens.toLocaleString()}),a.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:["In: ",kt.totalTokensIn.toLocaleString()," | Out: ",kt.totalTokensOut.toLocaleString()]})]}),a.jsxs("div",{className:"summary-card",children:[a.jsx("div",{className:"summary-label",children:"Total Requests"}),a.jsxs("div",{className:"summary-value",children:[kt.totalUserQueries," / ",kt.totalLLMCalls]}),a.jsx("div",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"User Queries / LLM Calls"})]})]}),kt.byType&&Object.keys(kt.byType).length>0&&a.jsxs("div",{className:"breakdown-section",children:[a.jsx("h3",{children:"By Type"}),a.jsxs("table",{className:"breakdown-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Requests"}),a.jsx("th",{children:"Tokens In"}),a.jsx("th",{children:"Tokens Out"}),a.jsx("th",{children:"Total Tokens"}),a.jsx("th",{children:"Cost"})]})}),a.jsx("tbody",{children:Object.entries(kt.byType).map(([X,he])=>a.jsxs("tr",{children:[a.jsx("td",{children:X}),a.jsx("td",{children:he.count}),a.jsx("td",{children:he.tokensIn.toLocaleString()}),a.jsx("td",{children:he.tokensOut.toLocaleString()}),a.jsx("td",{children:he.tokens.toLocaleString()}),a.jsxs("td",{children:["$",he.cost.toFixed(4)]})]},X))})]})]}),kt.byProvider&&Object.keys(kt.byProvider).length>0&&a.jsxs("div",{className:"breakdown-section",children:[a.jsx("h3",{children:"By Provider"}),a.jsxs("table",{className:"breakdown-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Provider"}),a.jsx("th",{children:"Requests"}),a.jsx("th",{children:"Tokens In"}),a.jsx("th",{children:"Tokens Out"}),a.jsx("th",{children:"Total Tokens"}),a.jsx("th",{children:"Cost"})]})}),a.jsx("tbody",{children:Object.entries(kt.byProvider).map(([X,he])=>a.jsxs("tr",{children:[a.jsx("td",{children:X}),a.jsx("td",{children:he.count}),a.jsx("td",{children:he.tokensIn.toLocaleString()}),a.jsx("td",{children:he.tokensOut.toLocaleString()}),a.jsx("td",{children:he.tokens.toLocaleString()}),a.jsxs("td",{children:["$",he.cost.toFixed(4)]})]},X))})]})]}),kt.byModel&&Object.keys(kt.byModel).length>0&&a.jsxs("div",{className:"breakdown-section",children:[a.jsx("h3",{children:"By Model"}),a.jsxs("table",{className:"breakdown-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Provider"}),a.jsx("th",{children:"Model"}),a.jsx("th",{children:"Requests"}),a.jsx("th",{children:"Tokens In"}),a.jsx("th",{children:"Tokens Out"}),a.jsx("th",{children:"Total Tokens"}),a.jsx("th",{children:"Cost"})]})}),a.jsx("tbody",{children:Object.entries(kt.byModel).filter(([X,he])=>he&&he.provider).sort((X,he)=>{const Re=X[1].provider.localeCompare(he[1].provider);return Re!==0?Re:X[0].localeCompare(he[0])}).map(([X,he])=>a.jsxs("tr",{children:[a.jsx("td",{children:he.provider}),a.jsx("td",{children:X}),a.jsx("td",{children:he.count}),a.jsx("td",{children:he.tokensIn.toLocaleString()}),a.jsx("td",{children:he.tokensOut.toLocaleString()}),a.jsx("td",{children:he.tokens.toLocaleString()}),a.jsxs("td",{children:["$",he.cost.toFixed(4)]})]},X))})]})]})]}),N==="transactions"&&a.jsxs("div",{className:"billing-transactions",children:[a.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#f5f5f5",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[a.jsx("input",{type:"checkbox",checked:R,onChange:X=>B(X.target.checked),style:{cursor:"pointer"}}),a.jsx("span",{style:{fontWeight:500,fontSize:"0.9rem"},children:" Group by Request ID"})]}),a.jsxs("select",{value:le,onChange:X=>{me(Number(X.target.value)),M(1)},style:{padding:"0.4rem 0.6rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"0.85rem"},children:[a.jsx("option",{value:50,children:"50 per page"}),a.jsx("option",{value:100,children:"100 per page"}),a.jsx("option",{value:250,children:"250 per page"}),a.jsx("option",{value:500,children:"500 per page"}),a.jsx("option",{value:1e3,children:"1000 per page"})]}),a.jsx("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"auto"},children:R?`${ar.size} total request groups (showing ${bt.size}), ${Kt.length} ungrouped`:`${Be} total transactions (showing ${Et.length})`})]}),a.jsxs("div",{className:"transactions-table-container",children:[a.jsxs("table",{className:"transactions-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[R&&a.jsx("th",{style:{width:"40px"},children:""}),a.jsx("th",{children:"Timestamp"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Provider"}),a.jsx("th",{children:"Model"}),a.jsx("th",{children:"Tokens"}),a.jsx("th",{children:"Cost"}),a.jsx("th",{children:"Duration"}),a.jsx("th",{children:"Status"})]})}),a.jsx("tbody",{children:R?a.jsxs(a.Fragment,{children:[Array.from(bt.entries()).map(([X,he])=>{const Re=F.has(X),gt=he.reduce((dt,jt)=>dt+jt.cost,0),Qe=he.reduce((dt,jt)=>dt+jt.totalTokens,0),zt=he.reduce((dt,jt)=>dt+jt.durationMs,0),Gt=he[0];return a.jsxs(Gn.Fragment,{children:[a.jsxs("tr",{onClick:()=>On(X),style:{background:"#f0f0f0",fontWeight:500,cursor:"pointer",userSelect:"none"},children:[a.jsx("td",{style:{textAlign:"center"},children:Re?"":""}),a.jsx("td",{children:new Date(Gt.timestamp).toLocaleString()}),a.jsx("td",{colSpan:3,children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsxs("span",{children:[" Request Group (",he.length," transactions)"]}),a.jsxs("code",{style:{fontSize:"0.75rem",background:"#fff",padding:"2px 6px",borderRadius:"4px",color:"#666"},children:[X.substring(0,12),"..."]})]})}),a.jsx("td",{children:Qe.toLocaleString()}),a.jsx("td",{children:a.jsxs("strong",{children:["$",gt.toFixed(6)]})}),a.jsxs("td",{children:[zt,"ms"]}),a.jsx("td",{className:he.every(dt=>dt.status==="success")?"status-success":"status-error",children:he.every(dt=>dt.status==="success")?"success":"partial"})]}),Re&&he.map((dt,jt)=>a.jsxs("tr",{style:{...String(dt.type)==="guardrail_input"||String(dt.type)==="guardrail_output"?{background:"#fffde7"}:String(dt.type)==="image_generation"?{background:"#e3f2fd"}:String(dt.type)==="tts"?{background:"#f3e5f5"}:{background:"#fafafa"},borderLeft:"3px solid #ddd"},children:[a.jsx("td",{style:{textAlign:"center",color:"#ccc"},children:""}),a.jsx("td",{style:{paddingLeft:"2rem",fontSize:"0.9rem"},children:new Date(dt.timestamp).toLocaleString()}),a.jsx("td",{children:String(dt.type)==="guardrail_input"?" Guardrail Input":String(dt.type)==="guardrail_output"?" Guardrail Output":String(dt.type)==="image_generation"?" Image Generation":String(dt.type)==="tts"?" Text-to-Speech":String(dt.type)==="chat"?"Chat":String(dt.type)==="embedding"?"Embedding":String(dt.type)==="planning"?"Planning":typeof dt.type=="string"?String(dt.type).replace(/_/g," ").replace(/\b\w/g,Zt=>Zt.toUpperCase()):String(dt.type)}),a.jsx("td",{children:dt.provider}),a.jsx("td",{children:dt.model}),a.jsx("td",{children:dt.totalTokens.toLocaleString()}),a.jsxs("td",{children:["$",dt.cost.toFixed(6)]}),a.jsxs("td",{children:[dt.durationMs,"ms"]}),a.jsx("td",{className:dt.status==="success"?"status-success":"status-error",children:dt.status})]},`${X}-${jt}`))]},X)}),tn.map((X,he)=>a.jsxs("tr",{style:String(X.type)==="guardrail_input"||String(X.type)==="guardrail_output"?{background:"#fffde7"}:String(X.type)==="image_generation"?{background:"#e3f2fd"}:String(X.type)==="tts"?{background:"#f3e5f5"}:{},children:[a.jsx("td",{style:{textAlign:"center",color:"#ccc"},children:""}),a.jsx("td",{children:new Date(X.timestamp).toLocaleString()}),a.jsx("td",{children:String(X.type)==="guardrail_input"?" Guardrail Input":String(X.type)==="guardrail_output"?" Guardrail Output":String(X.type)==="image_generation"?" Image Generation":String(X.type)==="tts"?" Text-to-Speech":String(X.type)==="chat"?"Chat":String(X.type)==="embedding"?"Embedding":String(X.type)==="planning"?"Planning":typeof X.type=="string"?String(X.type).replace(/_/g," ").replace(/\b\w/g,Re=>Re.toUpperCase()):String(X.type)}),a.jsx("td",{children:X.provider}),a.jsx("td",{children:X.model}),a.jsx("td",{children:X.totalTokens.toLocaleString()}),a.jsxs("td",{children:["$",X.cost.toFixed(6)]}),a.jsxs("td",{children:[X.durationMs,"ms"]}),a.jsx("td",{className:X.status==="success"?"status-success":"status-error",children:X.status})]},`ungrouped-${he}`))]}):n.transactions.map((X,he)=>a.jsxs("tr",{style:String(X.type)==="guardrail_input"||String(X.type)==="guardrail_output"?{background:"#fffde7"}:String(X.type)==="image_generation"?{background:"#e3f2fd"}:String(X.type)==="tts"?{background:"#f3e5f5"}:{},children:[a.jsx("td",{children:new Date(X.timestamp).toLocaleString()}),a.jsx("td",{children:String(X.type)==="guardrail_input"?" Guardrail Input":String(X.type)==="guardrail_output"?" Guardrail Output":String(X.type)==="image_generation"?" Image Generation":String(X.type)==="tts"?" Text-to-Speech":String(X.type)==="chat"?"Chat":String(X.type)==="embedding"?"Embedding":String(X.type)==="planning"?"Planning":typeof X.type=="string"?String(X.type).replace(/_/g," ").replace(/\b\w/g,Re=>Re.toUpperCase()):String(X.type)}),a.jsx("td",{children:X.provider}),a.jsx("td",{children:X.model}),a.jsx("td",{children:X.totalTokens.toLocaleString()}),a.jsxs("td",{children:["$",X.cost.toFixed(6)]}),a.jsxs("td",{children:[X.durationMs,"ms"]}),a.jsx("td",{className:X.status==="success"?"status-success":"status-error",children:X.status})]},he))})]}),a.jsxs("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"1rem",padding:"1rem",borderTop:"1px solid #eee"},children:[a.jsx("button",{onClick:()=>M(1),disabled:z===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #ccc",borderRadius:"4px",background:z===1?"#f5f5f5":"white",cursor:z===1?"not-allowed":"pointer",fontSize:"0.85rem"},children:" First"}),a.jsx("button",{onClick:()=>M(z-1),disabled:z===1,style:{padding:"0.5rem 0.75rem",border:"1px solid #ccc",borderRadius:"4px",background:z===1?"#f5f5f5":"white",cursor:z===1?"not-allowed":"pointer",fontSize:"0.85rem"},children:" Prev"}),a.jsxs("span",{style:{fontSize:"0.9rem",fontWeight:500},children:["Page ",z," of ",ht]}),a.jsx("button",{onClick:()=>M(z+1),disabled:z===ht,style:{padding:"0.5rem 0.75rem",border:"1px solid #ccc",borderRadius:"4px",background:z===ht?"#f5f5f5":"white",cursor:z===ht?"not-allowed":"pointer",fontSize:"0.85rem"},children:"Next "}),a.jsx("button",{onClick:()=>M(ht),disabled:z===ht,style:{padding:"0.5rem 0.75rem",border:"1px solid #ccc",borderRadius:"4px",background:z===ht?"#f5f5f5":"white",cursor:z===ht?"not-allowed":"pointer",fontSize:"0.85rem"},children:"Last "})]})]})]}),a.jsx(xhe,{isOpen:_,onClose:()=>T(!1),onConfirm:Ae,providers:Rt}),U&&a.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:a.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),style:{maxWidth:"500px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:" Add Credits"}),a.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx("p",{children:"Purchase credits to use AI features. Minimum purchase: $5.00"})}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Amount (USD):"}),a.jsx("input",{type:"number",min:"5",step:"1",value:q,onChange:X=>V(X.target.value),style:{width:"100%",padding:"10px",fontSize:"1rem",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Enter amount (min $5.00)"})]}),a.jsxs("div",{style:{background:"#f5f5f5",padding:"15px",borderRadius:"4px",marginBottom:"20px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:"Credits to add:"}),a.jsxs("strong",{children:["$",parseFloat(q||"0").toFixed(2)]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem",color:"#666"},children:[a.jsx("span",{children:"New balance:"}),a.jsxs("span",{children:["$",(G+parseFloat(q||"0")).toFixed(2)]})]})]}),a.jsxs("div",{style:{padding:"12px",background:"#e3f2fd",borderRadius:"4px",fontSize:"0.9rem",marginBottom:"20px"},children:[a.jsx("strong",{children:" Tip:"})," Add your own API keys in Settings for $0 LLM costs!",a.jsx("br",{}),"Only infrastructure costs apply when using your own keys."]}),a.jsx("div",{ref:D,style:{minHeight:"150px",display:ue?"none":"block"}}),ue&&a.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Loading PayPal..."}),!window.paypal&&a.jsx("div",{style:{padding:"15px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",color:"#856404"},children:" PayPal SDK not loaded. Please refresh the page."})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"btn-secondary",onClick:()=>O(!1),children:"Close"})})]})})]})})};function yhe(){const e=pl(),[t,r]=C.useState("features"),n=C.useRef(null);C.useEffect(()=>{n.current&&(n.current.scrollTop=0)},[t]);const s=[{id:"features",label:"Features & Advantages",icon:""},{id:"planning",label:"Planning & SWAG",icon:""},{id:"tools",label:"Backend LLM Tools",icon:""},{id:"rag",label:"Browser RAG",icon:""},{id:"pricing",label:"Pricing",icon:""}];return a.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Help & Documentation"}),a.jsxs("button",{onClick:()=>e("/privacy"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"text-sm font-medium",children:"Privacy Policy"})]})]}),a.jsx("div",{className:"flex gap-1 p-2 border-b dark:border-gray-700 overflow-x-auto bg-gray-50 dark:bg-gray-800",children:s.map(i=>a.jsxs("button",{onClick:()=>r(i.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===i.id?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:[a.jsx("span",{children:i.icon}),a.jsx("span",{className:"text-sm font-medium",children:i.label})]},i.id))}),a.jsx("div",{ref:n,className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"max-w-4xl text-left",children:[t==="features"&&a.jsx(vhe,{}),t==="planning"&&a.jsx(khe,{}),t==="tools"&&a.jsx(whe,{}),t==="rag"&&a.jsx(She,{}),t==="pricing"&&a.jsx(Ehe,{})]})})]})}function vhe(){return a.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200 text-left",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-left",children:"Features & Advantages"}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-green-600 dark:text-green-400",children:" Why Research Agent is Better Than ChatGPT"}),a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 p-5 rounded-lg border-2 border-green-300 dark:border-green-700 mb-6",children:[a.jsx("p",{className:"mb-4",children:"While ChatGPT is a powerful AI assistant, Research Agent offers significant advantages for users who want more control, flexibility, and cost optimization:"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-green-700 dark:text-green-300",children:" Access Multiple AI Providers"}),a.jsx("p",{className:"text-sm",children:"Choose from OpenAI, Google Gemini, Groq, Together AI, and custom endpoints - not locked into a single provider. Switch between models seamlessly to find the best fit for each task. Distribute the load among providers to minimise rate limits and costs."})]}),a.jsxs("div",{className:"border-l-4 border-teal-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-teal-700 dark:text-teal-300",children:" Automatic Model Selection"}),a.jsx("p",{className:"text-sm",children:"The system intelligently decides what kind of model is a suitable balance between cost and effectiveness for your query. No point in paying Einstein to do basic maths - simple questions get fast, cheap models while complex reasoning tasks get more powerful models."})]}),a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:" Massive Cost Savings with BYOK"}),a.jsx("p",{className:"text-sm",children:"Bring Your Own API Keys and pay $0 for LLM operations! Use Groq's unlimited free tier or Google Gemini's generous quotas. Only pay minimal infrastructure fees (~$0.0004 per request) instead of ChatGPT Plus $20/month."})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Advanced Planning & Research Tools"}),a.jsx("p",{className:"text-sm",children:"Built-in planning mode breaks complex questions into steps. Integrated web search (DuckDuckGo, Tavily), advanced web scraping (Puppeteer, Playwright, Selenium), and YouTube integration for comprehensive research."})]}),a.jsxs("div",{className:"border-l-4 border-amber-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-amber-700 dark:text-amber-300",children:" Persistent Iteration"}),a.jsx("p",{className:"text-sm",children:"The agent is prompted to be generous with calling tools and generating responses to make sure you get the answers you want. An assessor call is made before giving up on your request, ensuring thorough and complete responses."})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-orange-700 dark:text-orange-300",children:" Knowledge Management with Browser RAG"}),a.jsx("p",{className:"text-sm",children:"Save snippets to your personal knowledge base, create semantic embeddings, and retrieve relevant context during conversations. Optional Google Drive sync keeps your data accessible across devices."})]}),a.jsxs("div",{className:"border-l-4 border-pink-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-pink-700 dark:text-pink-300",children:" Full Transparency & Control"}),a.jsx("p",{className:"text-sm",children:"See exact costs for each request, token counts, model selection reasoning, and detailed API interactions. Enable/disable specific tools, customize provider priorities, and maintain complete control over your AI usage."})]}),a.jsxs("div",{className:"border-l-4 border-indigo-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:" Privacy-First Architecture"}),a.jsx("p",{className:"text-sm",children:"Chat history and content stored locally in your browser's IndexedDB - not on our servers. When using your own API keys, your prompts go directly from Lambda to your chosen provider with no middleman storage."})]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Multi-Provider LLM Access with Intelligent Load Balancing"}),a.jsx("p",{className:"mb-3",children:"Access multiple AI providers seamlessly through a single interface. The system intelligently selects the best provider for each request using sophisticated load balancing that considers multiple factors to optimize performance, cost, and reliability."}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Smart Provider Selection Considers:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Performance Factors:"}),a.jsxs("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[a.jsx("li",{children:"Model capability requirements"}),a.jsx("li",{children:"Response speed optimization"}),a.jsx("li",{children:"Current API availability"}),a.jsx("li",{children:"Rate limit status"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Cost & Strategy:"}),a.jsxs("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:[a.jsx("li",{children:"Pricing tier optimization"}),a.jsx("li",{children:"Free tier preference"}),a.jsx("li",{children:"Custom priority settings"}),a.jsx("li",{children:"Fallback chain resilience"})]})]})]})]}),a.jsx("p",{className:"font-medium mb-2",children:"Supported Providers:"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"OpenAI:"})," Industry-leading models including GPT-4, GPT-4o, GPT-4 Turbo, and GPT-4o-mini for high-quality generation and reasoning tasks."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Google Gemini:"})," Advanced multimodal models (Gemini 1.5 Pro, 2.0 Flash, 2.5 Pro) with generous free tier limits for cost-effective usage."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Groq:"})," Ultra-fast inference engine delivering responses up to 10x faster using Llama, Mixtral, and Gemma models, perfect for real-time applications."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Together AI:"})," Access to cutting-edge open source models including Llama 4, DeepSeek, and specialized models, with trial credits available."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Custom Endpoints:"})," Bring your own OpenAI-compatible API endpoints for complete flexibility and control over model selection."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Web Search & Scraping Integration"}),a.jsx("p",{className:"mb-3",children:"Get real-time information and extract content from any website using integrated search and advanced web scraping capabilities. The system intelligently handles both simple searches and complex data extraction with multiple fallback strategies."}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800 mb-4",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Web Search Capabilities:"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"DuckDuckGo Search:"})," Privacy-focused web search that doesn't track your queries or build user profiles, ideal for general information retrieval and finding relevant URLs."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tavily AI:"})," Advanced AI-powered research engine optimized for gathering comprehensive information from multiple sources (requires API key)."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Automatic Citation:"})," All search results include source URLs, allowing you to verify information and explore topics further."]})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("p",{className:"font-semibold mb-3",children:"Advanced Web Scraping Tools:"}),a.jsx("p",{className:"mb-3",children:"Extract structured content from websites that require JavaScript execution, handle anti-bot protection, or need complex interactions. The system automatically selects the best scraping method based on the target site's requirements."}),a.jsxs("div",{className:"space-y-3 mb-3",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Direct HTTP Scraping"}),a.jsx("p",{className:"text-sm",children:"Fast extraction of static HTML content using standard HTTP requests - ideal for simple pages and APIs."})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("p",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Puppeteer Scraping"}),a.jsx("p",{className:"text-sm",children:"Headless Chrome automation for JavaScript-heavy sites - executes page scripts, waits for dynamic content, and can interact with elements before extraction."})]}),a.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("p",{className:"font-medium text-green-700 dark:text-green-300",children:"Playwright Scraping (Self-Hosted)"}),a.jsxs("p",{className:"text-sm",children:["Cross-browser automation with advanced capabilities - supports multiple browser engines, automatic waiting for elements, and sophisticated page interaction patterns. ",a.jsx("strong",{children:"Only available when running the service on your own computer"}),"(see ",a.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 dark:text-green-400 hover:underline",children:"GitHub repo"}),"), with the advantage of not paying infrastructure costs."]})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("p",{className:"font-medium text-orange-700 dark:text-orange-300",children:"Selenium Scraping (Self-Hosted)"}),a.jsxs("p",{className:"text-sm",children:["Industry-standard browser automation with extensive ecosystem - handles complex workflows, form submissions, and sites with strict anti-automation measures. ",a.jsx("strong",{children:"Only available when running the service on your own computer"}),"(see ",a.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 dark:text-orange-400 hover:underline",children:"GitHub repo"}),"), with the advantage of not paying infrastructure costs."]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/30 dark:to-red-900/30 p-3 rounded-lg border border-orange-300 dark:border-orange-700",children:[a.jsx("p",{className:"font-semibold text-orange-800 dark:text-orange-200 mb-2",children:" Residential Proxy Support (Optional)"}),a.jsx("p",{className:"text-sm",children:"For websites with stringent bot detection and protection systems, the scraper can route requests through residential proxy networks. This provides real residential IP addresses that appear as legitimate users, allowing successful data extraction from sites that block datacenter IPs, implement CAPTCHA challenges, or employ sophisticated fingerprinting techniques. Particularly useful for e-commerce sites, social media platforms, and services with aggressive anti-scraping measures."})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Intelligent Planning Mode"}),a.jsx("p",{className:"mb-2",children:"Complex queries benefit from planning before execution. Planning mode breaks down sophisticated questions into manageable steps, executes them efficiently, and synthesizes results into comprehensive answers."}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Research Planning:"})," Automatically decomposes complex questions into focused sub-queries for thorough investigation."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Multi-Step Execution:"})," Sequentially executes searches, analyzes intermediate results, and adapts the research strategy based on findings."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cost Optimization:"})," Minimizes token usage by planning efficient query sequences and avoiding redundant API calls."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Rich Media Support"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Image Generation:"})," Create images using DALL-E 3, Stable Diffusion, or Flux models with customizable styles and quality settings."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Chart Generation:"})," Visualize data and processes with Mermaid diagrams including flowcharts, sequence diagrams, Gantt charts, and more."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"YouTube Integration:"})," Search for videos, extract transcripts, and analyze video content without leaving the interface."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Audio Transcription:"})," Convert audio and video files to searchable text using OpenAI's Whisper model with high accuracy."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Knowledge Management"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Content Management:"})," Save snippets, images, and links to your personal knowledge base with tagging and organization features."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Browser RAG:"})," Search your saved content using semantic embeddings for intelligent context retrieval during conversations."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Chat History:"})," Persistent storage of all conversations with full-text search capabilities for easy reference."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Google Drive Sync:"})," Optionally backup your content to your personal Google Drive for cross-device access and data persistence."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Media Playback"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Background Player:"})," Play audio content from YouTube, podcasts, and other sources while continuing to use the chat interface."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Playlists:"})," Queue multiple audio tracks and manage playback with standard controls."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Chromecast Support:"})," Cast audio to compatible TV speakers or smart devices for enhanced listening experience."]})]})]})]})}function khe(){return a.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200 text-left",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-left",children:"Planning Wizard, Todos & Content Management for Long-Term Thinking"}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Creating Effective Plans"}),a.jsxs("p",{className:"mb-3",children:["Whether you're tackling complex research, building documents, or managing multi-step projects, effective planning helps the AI deliver better results. You can create plans explicitly using the ",a.jsx("strong",{children:'"Create a Plan"'})," button in the chat interface, or let the AI generate them automatically based on your needs."]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-5 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",children:[a.jsx("p",{className:"font-semibold mb-4 text-lg",children:"The Planning Process:"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("strong",{className:"text-blue-700 dark:text-blue-300 block mb-2",children:"1. Define Clear Objectives"}),a.jsx("p",{className:"text-sm mb-3",children:"Start with a detailed prompt that specifies what you want to achieve, the format you need, and any constraints or requirements. The more specific your initial request, the better the AI can plan."}),a.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-3 rounded border border-blue-200 dark:border-blue-700",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Example Prompts:"}),a.jsxs("div",{className:"space-y-2 text-xs italic text-gray-700 dark:text-gray-300",children:[a.jsx("p",{children:' "Create a comprehensive analysis of renewable energy trends, including solar, wind, and hydro. I need statistics from 2020-2024, key market players, and future projections. Format as a structured report."'}),a.jsx("p",{children:' "Build a 5-week curriculum for learning Python from scratch, with daily exercises, weekly projects, and assessment milestones. Target audience is complete beginners."'}),a.jsx("p",{children:' "Research the top 10 productivity apps for remote teams, compare their features, pricing, and user reviews, then create a decision matrix with recommendations for different team sizes."'}),a.jsx("p",{children:' "Develop a marketing strategy for launching a new mobile app. Include target audience analysis, competitive landscape, channel recommendations, and a 90-day action plan with budget estimates."'})]})]})]}),a.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("strong",{className:"text-purple-700 dark:text-purple-300 block mb-2",children:"2. Use Iteration & Tools"}),a.jsx("p",{className:"text-sm mb-3",children:"Plans work best when they leverage available tools strategically. The AI can break down complex tasks into steps that use web search for research, snippets for building documents incrementally, and todos for tracking progress across multiple sessions."}),a.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-3 rounded border border-purple-200 dark:border-purple-700",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Example Workflow:"}),a.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Search for recent data  Save findings to snippets  Create todo items for each section  Build document piece by piece  Reference saved snippets when needed"})]})]}),a.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("strong",{className:"text-green-700 dark:text-green-300 block mb-2",children:"3. Enable Planning Wizard (Optional)"}),a.jsxs("p",{className:"text-sm mb-3",children:["For research-heavy tasks, click the ",a.jsx("strong",{children:'"Create a Plan"'})," button in the chat interface to activate the Planning Wizard. This creates an explicit research plan before executing searches, ensuring comprehensive coverage and avoiding redundant queries."]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-3 rounded border border-green-200 dark:border-green-700",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"When to Use Planning Wizard:"}),a.jsxs("ul",{className:"text-xs space-y-1 pl-4 text-gray-700 dark:text-gray-300",children:[a.jsx("li",{children:" Multi-source research requiring synthesis from 5+ websites"}),a.jsx("li",{children:" Comparative analysis needing structured data gathering"}),a.jsx("li",{children:" Complex topics where you need to ensure thorough coverage"}),a.jsx("li",{children:" Time-sensitive research where you want to avoid re-searching"})]})]})]}),a.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("strong",{className:"text-orange-700 dark:text-orange-300 block mb-2",children:"4. Build Incrementally with Snippets"}),a.jsx("p",{className:"text-sm mb-3",children:"For document creation, use the snippet management tool to build content incrementally. The AI can save sections as snippets, update them as new information arrives, and reference them in future conversations to maintain consistency."}),a.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-3 rounded border border-orange-200 dark:border-orange-700",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Pro Tip:"}),a.jsx("p",{className:"text-xs italic text-gray-700 dark:text-gray-300",children:'Tag snippets by topic (e.g., "renewable-energy-solar", "renewable-energy-wind") for easy retrieval'})]})]}),a.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),a.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[a.jsx("strong",{className:"text-red-700 dark:text-red-300 block mb-2",children:"5. Track with Todos"}),a.jsx("p",{className:"text-sm mb-3",children:"Use the todo management tool to track multi-step projects across sessions. The AI can create tasks, mark them complete as work progresses, and maintain context about what's been done and what remains."}),a.jsxs("div",{className:"bg-white dark:bg-gray-800/50 p-3 rounded border border-red-200 dark:border-red-700",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Example Prompts:"}),a.jsxs("div",{className:"space-y-1 text-xs italic text-gray-700 dark:text-gray-300",children:[a.jsx("p",{children:' "Create a todo list for organizing a conference: venue booking, speaker outreach, marketing plan, registration setup"'}),a.jsx("p",{children:' "Break down the website redesign project into actionable tasks with priorities"'})]})]})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[a.jsx("p",{className:"font-semibold mb-2",children:" Pro Tip: Detailed Prompts = Better Plans"}),a.jsxs("p",{className:"text-sm",children:["When asking the AI to create a plan (either by clicking ",a.jsx("strong",{children:'"Create a Plan"'})," or through natural language), be explicit about your requirements, desired format, timeline, and any specific sources or constraints. The AI will use this information to generate a structured plan with clear steps, tool usage, and success criteria."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Backend Todo Management"}),a.jsxs("p",{className:"mb-2",children:["The ",a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:"manage_todos"})," tool provides persistent task tracking that works across all your chat sessions."]}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Task Tracking:"})," The AI can create, update, and complete tasks automatically as you work through projects."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Multi-Turn Context:"})," Todos persist across chat sessions, allowing you to pause work and resume later without losing context."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Project Management:"})," Break down large tasks into manageable steps, track dependencies, and maintain a clear picture of progress."]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mt-3",children:[a.jsx("p",{className:"font-medium mb-2",children:"Example Usage:"}),a.jsx("p",{className:"text-sm italic",children:'"Create a todo list for building a web scraper: research libraries, write code, test with sample data, deploy to production"'}),a.jsx("p",{className:"text-xs mt-2 text-gray-600 dark:text-gray-400",children:"The AI will create structured todos and can mark them complete as you make progress"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Content Management"}),a.jsx("p",{className:"mb-2",children:"Your personal knowledge repository for saving, organizing, and retrieving information across sessions."}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Save Anything:"})," Store text snippets, code blocks, images, links, and any other content you want to reference later."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Organize with Tags:"})," Categorize content using tags for easy filtering and retrieval by topic or project."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Search & Filter:"})," Find content quickly using full-text search, tag filters, or content type."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Generate Embeddings:"})," Enable semantic search across your content to find relevant information by meaning, not just keywords."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cloud Sync:"})," Backup your content to Google Drive for persistence across devices and browsers."]})]}),a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800 mt-3",children:[a.jsx("p",{className:"font-semibold mb-2",children:" Long-Term Knowledge Building:"}),a.jsx("p",{className:"text-sm",children:"Combine Planning Mode, Todos, and Content Management to build a growing knowledge base over time. Save research findings as you discover them, reference past work using RAG semantic search, track ongoing projects with todos, and build comprehensive documents incrementally using saved snippets."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Google Sheets Integration"}),a.jsxs("p",{className:"mb-2",children:["The ",a.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:"manage_snippets"})," tool provides cloud-based snippet storage with Google Sheets integration."]}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Cloud Storage:"})," Snippets are automatically synced to a Google Sheet in your Drive for permanent storage."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Collaborative:"})," Share your snippet sheets with team members for collaborative knowledge management."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Always Available:"})," Access your snippets from any device by connecting to your Google account."]})]})]})]})}function whe(){return a.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200 text-left",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-left",children:"Backend LLM Tools"}),a.jsxs("p",{className:"text-lg mb-4",children:["The AI has access to powerful backend tools that it can call automatically when needed. Enable or disable specific tools in ",a.jsx("strong",{children:"Settings  Tools"})," to control which capabilities are available."]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Available Tools"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vs,{name:"web_search",icon:"",description:"Search the web using DuckDuckGo for current information, news, and research",trigger:"Automatically triggered when current information is needed",examples:["What's the current price of Bitcoin?","Find the latest research on climate change mitigation strategies","What are the top news stories today about artificial intelligence?"]}),a.jsx(Vs,{name:"execute_js",icon:"",description:"Execute JavaScript code for calculations, data processing, and algorithmic tasks",trigger:"Triggered when computation or data manipulation is needed",examples:["Calculate the Fibonacci sequence up to the 20th number","Sort this list of numbers: [42, 17, 93, 8, 51] and find the median","Generate a random password with 16 characters including symbols"]}),a.jsx(Vs,{name:"scrape_url",icon:"",description:"Extract and analyze content from any publicly accessible URL",trigger:"Triggered when a specific webpage needs to be analyzed",examples:["Summarize the main points from https://example.com/article","Extract all the product prices from this e-commerce page","What are the key features described on this documentation page?"]}),a.jsx(Vs,{name:"youtube",icon:"",description:"Search YouTube and extract video transcripts for analysis",trigger:"Triggered when YouTube content is mentioned",examples:["Find videos about machine learning fundamentals","Get the transcript from this YouTube video about quantum computing","Search for tutorials on React hooks and summarize the top result"]}),a.jsx(Vs,{name:"transcribe",icon:"",description:"Transcribe audio and video files using OpenAI's Whisper model",trigger:"User uploads an audio or video file",examples:["Upload an MP3 recording and ask: 'Transcribe this interview'","Transcribe this podcast episode and create a summary","Convert this meeting recording to text and extract action items"]}),a.jsx(Vs,{name:"generate_chart",icon:"",description:"Create diagrams and visualizations using Mermaid syntax",trigger:"Triggered when visualization is requested",examples:["Create a flowchart showing the user authentication process","Generate a sequence diagram for a REST API call","Draw a Gantt chart for a 3-month software development project"]}),a.jsx(Vs,{name:"generate_image",icon:"",description:"Generate images using DALL-E 3, Stable Diffusion, or Flux models",trigger:"Triggered when image generation is requested",examples:["Generate an image of a sunset over mountains in watercolor style","Create a professional headshot of a businesswoman in an office","Design a logo for a coffee shop with a minimalist aesthetic"]}),a.jsx(Vs,{name:"search_knowledge_base",icon:"",description:"Search server-side knowledge base (separate from local RAG)",trigger:"Manually enabled tool - searches backend embeddings",examples:["Search the knowledge base for information about API authentication","Find all documentation related to database schema design","What does the knowledge base say about deployment procedures?"]}),a.jsx(Vs,{name:"manage_todos",icon:"",description:"Create, update, and manage a persistent todo list across chat sessions",trigger:"Triggered when task management is discussed",examples:["Add a todo to finish the quarterly report by Friday","Create a checklist for preparing the product launch","Mark the 'Review design mockups' todo as complete"]}),a.jsx(Vs,{name:"manage_snippets",icon:"",description:"Save and retrieve text snippets to Google Sheets for later reference",trigger:"Triggered when snippet storage is requested",examples:["Save this code snippet for later: [code block]","Store these meeting notes in my snippets","Retrieve all snippets tagged with 'python-tips'"]}),a.jsx(Vs,{name:"ask_llm",icon:"",description:"Recursive LLM agent for complex multi-step reasoning (HIGH token usage)",trigger:" DISABLED by default - HIGH token usage",examples:["Use deep reasoning to analyze the ethical implications of AI governance","Break down this complex business problem into strategic recommendations","Perform a comprehensive competitive analysis with multiple perspectives"],warning:"Can result in very high API costs due to recursive calls"}),a.jsx(Vs,{name:"generate_reasoning_chain",icon:"",description:"Deep reasoning chains for academic-level problem-solving (EXTREME token usage)",trigger:" DISABLED by default - EXTREME token usage",examples:["Prove this mathematical theorem using step-by-step logical reasoning","Analyze the philosophical arguments for and against utilitarianism","Develop a comprehensive research methodology for studying climate patterns"],warning:"Can result in extremely high API costs due to extensive reasoning chains"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How to Use Tools"}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:a.jsxs("ol",{className:"space-y-3",children:[a.jsxs("li",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("strong",{children:"1. Enable tools"})," in Settings  Tools by toggling the switches for the capabilities you want available"]}),a.jsxs("li",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("strong",{children:"2. Ask naturally"})," - The AI will automatically call the right tool based on your request context"]}),a.jsxs("li",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("strong",{children:"3. Check responses"})," - Tool calls are shown in the chat with their inputs and outputs"]}),a.jsxs("li",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("strong",{children:"4. Review costs"})," - Tool usage affects API billing, especially for compute-intensive operations"]})]})})]})]})}function Vs({name:e,icon:t,description:r,trigger:n,examples:s,warning:i}){return a.jsx("div",{className:"border dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:t}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-lg",children:a.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-sm",children:e})}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:r}),a.jsxs("div",{className:"mt-3 text-sm",children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:[a.jsx("strong",{children:"Triggered:"})," ",n]}),a.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Example Uses:"}),a.jsx("ul",{className:"space-y-1 pl-4",children:s.map((l,c)=>a.jsxs("li",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[' "',l,'"']},c))})]}),i&&a.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800",children:[" ",i]})]})]})})}function She(){return a.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200 text-left",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-left",children:"Browser-Based RAG (Retrieval Augmented Generation)"}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" What is RAG and Why Use It?"}),a.jsx("p",{className:"mb-3",children:"RAG (Retrieval Augmented Generation) is a system for capturing, managing, and intelligently retrieving content from your conversations and saved materials. It enhances AI responses by finding and injecting relevant context from your personal knowledge base before generating answers."}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Core Purpose:"}),a.jsxs("ul",{className:"space-y-2 text-sm pl-4",children:[a.jsxs("li",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("strong",{children:"Capture:"})," Save valuable content from LLM responses, your own notes, code snippets, and research findings"]}),a.jsxs("li",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("strong",{children:"Manage:"})," Organize content with tags, search by keywords, and generate embeddings for semantic search"]}),a.jsxs("li",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("strong",{children:"Retrieve:"})," Automatically find relevant content when you ask questions, ensuring the AI has access to your accumulated knowledge"]}),a.jsxs("li",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("strong",{children:"Export:"})," Download your knowledge base or sync to Google Drive for backup and cross-device access"]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3",children:"Everything runs in your browser using local embeddings - your content never leaves your device unless you explicitly sync to Google Drive."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Interaction Modes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-2 border-green-500 dark:border-green-600 rounded-lg p-4 bg-green-50 dark:bg-green-900/20",children:[a.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:" Automatic Injection (Recommended)"}),a.jsx("p",{className:"text-sm mb-2",children:'When you enable "Use Knowledge Base Context" in the chat interface, the system automatically:'}),a.jsxs("ol",{className:"text-sm space-y-1 pl-5",children:[a.jsx("li",{children:"1. Takes your query and generates an embedding for it"}),a.jsx("li",{children:"2. Searches your knowledge base for semantically similar content"}),a.jsx("li",{children:"3. Injects the top matching snippets into the conversation context"}),a.jsx("li",{children:"4. The AI uses this context when generating its response"})]}),a.jsx("p",{className:"text-xs mt-2 text-gray-600 dark:text-gray-400 italic",children:"This happens transparently - you don't need to manually select what context to include"})]}),a.jsxs("div",{className:"border-2 border-blue-500 dark:border-blue-600 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20",children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Explicit Attach Context (Manual Control)"}),a.jsx("p",{className:"text-sm mb-2",children:"Alternatively, you can manually control what context to include:"}),a.jsxs("ol",{className:"text-sm space-y-1 pl-5",children:[a.jsx("li",{children:"1. Browse your saved content in the Content Management page"}),a.jsx("li",{children:"2. Select specific snippets you want to reference"}),a.jsx("li",{children:'3. Use the "Attach to Chat" feature to explicitly include them'}),a.jsx("li",{children:"4. The selected content is added to your next message"})]}),a.jsx("p",{className:"text-xs mt-2 text-gray-600 dark:text-gray-400 italic",children:"Useful when you know exactly which content is relevant, or want to control token usage"})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How to Use Browser RAG"}),a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-lg border border-purple-200 dark:border-purple-800",children:a.jsxs("ol",{className:"space-y-4",children:[a.jsxs("li",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("strong",{className:"text-purple-700 dark:text-purple-300",children:"Step 1: Save Content"}),a.jsx("p",{className:"text-sm mt-1",children:"Navigate to the Content Management page and add text snippets, code blocks, research notes, or any content you want to reference later. You can save content from LLM responses directly or paste your own material."})]}),a.jsxs("li",{className:"border-l-4 border-pink-500 pl-4",children:[a.jsx("strong",{className:"text-pink-700 dark:text-pink-300",children:"Step 2: Generate Embeddings"}),a.jsx("p",{className:"text-sm mt-1",children:'Select snippets and click "Generate Embeddings". This creates vector representations using a local ML model (Transformers.js) running in your browser. Embeddings enable semantic search by meaning rather than keywords.'})]}),a.jsxs("li",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("strong",{className:"text-blue-700 dark:text-blue-300",children:"Step 3: Enable RAG in Chat"}),a.jsx("p",{className:"text-sm mt-1",children:'In the chat interface, check "Use Knowledge Base Context" to enable automatic context injection. The system will search your knowledge base for each query and include relevant snippets.'})]}),a.jsxs("li",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"Step 4: Ask Questions"}),a.jsx("p",{className:"text-sm mt-1",children:"Ask questions naturally. The AI will automatically search your knowledge base and use relevant snippets to provide more informed, personalized responses based on your accumulated knowledge."})]})]})})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Features"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Local Processing:"})," Embeddings are generated in your browser using Transformers.js - no data sent to external servers for the embedding process."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Privacy First:"})," Your content stays on your device unless you explicitly enable Google Drive sync for backup."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Semantic Search:"})," Find content by meaning and context, not just exact keyword matches."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Smart Ranking:"})," Most relevant snippets are prioritized using cosine similarity scoring."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Chunk Management:"})," Large content is automatically split into optimal-sized chunks for better retrieval accuracy."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Storage & Sync"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"IndexedDB:"})," All snippets and embeddings are stored locally in your browser's IndexedDB for instant access."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Google Drive Backup:"})," Enable optional cloud sync to back up your content to Google Drive for persistence across browsers and devices."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Browser Storage Limits:"})," Most modern browsers allow several GB of IndexedDB storage, sufficient for extensive knowledge bases."]})]}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800 mt-2 text-sm",children:[a.jsx("p",{className:"font-medium",children:" Note on Storage:"}),a.jsx("p",{children:"While browser storage is generous, very large knowledge bases (100,000+ snippets) may impact performance. Consider organizing content into focused collections and archiving older material if needed."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Best Practices"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[a.jsx("p",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:" Do:"}),a.jsxs("ul",{className:"space-y-1 text-sm pl-5",children:[a.jsx("li",{children:"Save well-organized, focused snippets with clear topics"}),a.jsx("li",{children:'Use descriptive tags for categorization (e.g., "python-tutorial", "project-ideas")'}),a.jsx("li",{children:"Generate embeddings for content you'll reference often in conversations"}),a.jsx("li",{children:"Keep individual snippets under 10,000 characters for optimal retrieval"}),a.jsx("li",{children:"Regularly review and archive outdated content"})]})]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx("p",{className:"font-medium text-red-800 dark:text-red-200 mb-2",children:" Don't:"}),a.jsxs("ul",{className:"space-y-1 text-sm pl-5",children:[a.jsx("li",{children:"Save duplicate or highly redundant content (wastes storage and degrades search quality)"}),a.jsx("li",{children:"Store sensitive passwords, API keys, or credentials (use a password manager instead)"}),a.jsx("li",{children:"Expect perfect recall with poorly organized or vague snippets"}),a.jsx("li",{children:"Generate embeddings for content you'll never search (wastes processing time)"})]})]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Browser RAG vs Server Knowledge Base"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border dark:border-gray-700",children:[a.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:a.jsxs("tr",{children:[a.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left font-semibold",children:"Feature"}),a.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left font-semibold",children:"Browser RAG (Local)"}),a.jsx("th",{className:"border dark:border-gray-700 px-4 py-2 text-left font-semibold",children:"Server KB Tool"})]})}),a.jsxs("tbody",{className:"text-sm",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Data Location"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Your browser (IndexedDB)"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Backend server"})]}),a.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Privacy"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 text-green-600 dark:text-green-400",children:"100% private (offline)"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 text-orange-600 dark:text-orange-400",children:"Shared with backend"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Content Source"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Your saved content"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Admin-uploaded documents"})]}),a.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Setup Required"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 text-green-600 dark:text-green-400",children:"Automatic (built-in)"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 text-orange-600 dark:text-orange-400",children:"Enable in Settings"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2 font-medium",children:"Use Case"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Personal knowledge base"}),a.jsx("td",{className:"border dark:border-gray-700 px-4 py-2",children:"Shared documentation"})]})]})]})})]})]})}function Ehe(){return a.jsxs("div",{className:"space-y-6 text-gray-800 dark:text-gray-200 text-left",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-left",children:"Pricing"}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Credit-Based System"}),a.jsx("p",{className:"mb-3",children:"Research Agent uses a prepaid credit system. Purchase credits via PayPal and they're automatically deducted as you use the service. Credits never expire and can be used for any API operations."}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("p",{className:"font-semibold mb-2",children:" Welcome Bonus: $0.50 in free credits for new users!"}),a.jsx("p",{className:"text-sm",children:"Start experimenting with the service immediately - no payment required to try it out."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Purchasing Credits"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 p-4 rounded-lg border-2 border-green-300 dark:border-green-700",children:[a.jsx("p",{className:"font-semibold text-lg mb-2",children:"Quick Add Credits"}),a.jsxs("p",{className:"text-sm mb-3",children:["Navigate to ",a.jsx("strong",{children:"Billing  Add Credits"})," to purchase more credits instantly."]}),a.jsxs("ul",{className:"space-y-1 text-sm pl-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Minimum Purchase:"})," $5.00 USD"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Payment Method:"})," PayPal (secure checkout)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Expiration:"})," Credits never expire"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Instant Availability:"})," Credits appear immediately after payment"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Refunds:"})," All sales are final"]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your current balance and transaction history on the Billing page anytime."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Complete Pricing Breakdown"}),a.jsx("p",{className:"mb-3",children:"Understanding your costs is straightforward - we charge for two things:"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-5 rounded-lg border-2 border-blue-300 dark:border-blue-700 mb-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-3",children:"1. AWS Infrastructure Costs (Always Charged)"}),a.jsxs("p",{className:"text-sm mb-3",children:["Every request incurs a small infrastructure fee to cover AWS Lambda hosting. We charge a ",a.jsx("strong",{children:"6x markup"})," on total AWS costs (industry standard is 3-10x)."]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-blue-200 dark:border-blue-700 mb-3",children:[a.jsx("p",{className:"font-semibold mb-2 text-sm",children:"AWS Cost Components (Example: 512MB, 800ms execution):"}),a.jsxs("div",{className:"space-y-1 text-xs font-mono",children:[a.jsxs("div",{className:"flex justify-between border-b dark:border-gray-600 pb-1",children:[a.jsx("span",{children:"Lambda Compute:"}),a.jsx("span",{children:"$0.00000667"})]}),a.jsxs("div",{className:"flex justify-between border-b dark:border-gray-600 pb-1",children:[a.jsx("span",{children:"Lambda Request:"}),a.jsx("span",{children:"$0.00000020"})]}),a.jsxs("div",{className:"flex justify-between border-b dark:border-gray-600 pb-1",children:[a.jsx("span",{children:"CloudWatch Logs:"}),a.jsx("span",{children:"$0.00000102"})]}),a.jsxs("div",{className:"flex justify-between border-b dark:border-gray-600 pb-1",children:[a.jsx("span",{children:"Data Transfer Out:"}),a.jsx("span",{children:"$0.00000036"})]}),a.jsxs("div",{className:"flex justify-between border-b dark:border-gray-600 pb-1",children:[a.jsx("span",{children:"S3 Storage:"}),a.jsx("span",{children:"$0.00000003"})]}),a.jsxs("div",{className:"flex justify-between font-bold text-sm pt-2 border-t-2 dark:border-gray-500",children:[a.jsx("span",{children:"Total AWS Cost:"}),a.jsx("span",{children:"$0.00001087"})]}),a.jsxs("div",{className:"flex justify-between text-blue-600 dark:text-blue-400 font-bold text-sm pt-1",children:[a.jsx("span",{children:"With 6x markup:"}),a.jsx("span",{children:"$0.00006522"})]})]})]}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("strong",{children:"Per 1,000 requests:"})," $0.065 infrastructure cost",a.jsx("br",{}),a.jsx("strong",{children:"Why 6x?"})," Industry competitive: AWS API Gateway (3-6x), Twilio (1.3x), SendGrid (3x), Stripe (1.6x)"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-5 rounded-lg border-2 border-orange-300 dark:border-orange-700 mb-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-3",children:"2. LLM API Costs (Depends on Configuration)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-orange-200 dark:border-orange-700",children:[a.jsx("p",{className:"font-semibold text-orange-700 dark:text-orange-300 mb-2",children:"Option A: Server-Provided Keys"}),a.jsx("p",{className:"text-sm mb-2",children:"Convenient for occasional use, no setup required."}),a.jsxs("p",{className:"text-sm font-mono",children:[a.jsx("strong",{children:"Cost:"})," Provider pricing + 25% surcharge",a.jsx("br",{}),a.jsx("strong",{children:"Example:"})," $0.10 LLM call  ",a.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-bold",children:"$0.125 charged"})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-green-500 dark:border-green-600",children:[a.jsx("p",{className:"font-semibold text-green-700 dark:text-green-300 mb-2",children:"Option B: Bring Your Own Keys (BYOK) - RECOMMENDED "}),a.jsx("p",{className:"text-sm mb-2",children:"Regular users, cost-conscious users, access to free tiers."}),a.jsxs("p",{className:"text-sm font-mono",children:[a.jsx("strong",{children:"Cost:"})," ",a.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold text-lg",children:"$0.00"})," (you pay provider directly!)",a.jsx("br",{}),a.jsx("strong",{children:"Only Pay:"})," Infrastructure fee (~$0.00007/request)"]})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border-2 dark:border-gray-600 text-sm",children:[a.jsx("thead",{className:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900 dark:to-purple-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"border dark:border-gray-600 px-4 py-3 text-left font-bold",children:"Configuration"}),a.jsx("th",{className:"border dark:border-gray-600 px-4 py-3 text-left font-bold",children:"LLM Cost (100 requests)"}),a.jsx("th",{className:"border dark:border-gray-600 px-4 py-3 text-left font-bold",children:"Infrastructure"}),a.jsx("th",{className:"border dark:border-gray-600 px-4 py-3 text-left font-bold",children:"Total"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{className:"bg-white dark:bg-gray-800",children:[a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-semibold",children:"Server Keys"}),a.jsxs("td",{className:"border dark:border-gray-600 px-4 py-3",children:["$10.00 + 25% = ",a.jsx("strong",{className:"text-orange-600 dark:text-orange-400",children:"$12.50"})]}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3",children:"$0.0065"}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-bold text-orange-600 dark:text-orange-400",children:"$12.51"})]}),a.jsxs("tr",{className:"bg-green-50 dark:bg-green-900/20",children:[a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-semibold",children:"BYOK (OpenAI)"}),a.jsxs("td",{className:"border dark:border-gray-600 px-4 py-3",children:[a.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"$0.00"})," (paid direct)"]}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3",children:"$0.0065"}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-bold text-green-600 dark:text-green-400",children:"$0.0065"})]}),a.jsxs("tr",{className:"bg-gradient-to-r from-green-100 to-blue-100 dark:from-green-900/30 dark:to-blue-900/30",children:[a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-semibold",children:"BYOK (Groq Free Tier)"}),a.jsxs("td",{className:"border dark:border-gray-600 px-4 py-3",children:[a.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"$0.00"})," (free tier!)"]}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3",children:"$0.0065"}),a.jsx("td",{className:"border dark:border-gray-600 px-4 py-3 font-bold text-green-600 dark:text-green-400",children:"$0.0065"})]})]})]})}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800 mt-4",children:[a.jsx("p",{className:"font-semibold mb-2",children:" Massive Savings with BYOK:"}),a.jsxs("p",{className:"text-sm",children:["Bring Your Own Key (BYOK) users save ",a.jsx("strong",{children:"99.5%"})," on total costs! Pay only the minimal infrastructure fee (~$0.07 per 1,000 requests). Use free tier providers like Groq or Gemini and your LLM costs are literally $0."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Bring Your Own API Keys (BYOK)"}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-5 rounded-lg border-2 border-purple-300 dark:border-purple-700",children:[a.jsx("p",{className:"font-semibold mb-3 text-lg",children:"Why use your own API keys?"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-green-700 dark:text-green-300",children:" Zero LLM Surcharge"}),a.jsx("p",{className:"text-sm",children:"Avoid the 25% markup - you only pay the small Lambda infrastructure fee ($0.0001-0.0005 per request)."})]}),a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:" Access Free Tier Plans"}),a.jsx("p",{className:"text-sm",children:"Use Groq's free tier (unlimited), Google Gemini's free tier, or Together AI's trial credits directly. These generous free quotas mean you pay almost nothing for LLM usage."})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Wider Model Selection"}),a.jsx("p",{className:"text-sm",children:"Access all models available to your account, including latest releases, specialized models, and experimental features not available through server-side keys."})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-orange-700 dark:text-orange-300",children:" Full Control"}),a.jsx("p",{className:"text-sm",children:"Choose exactly which providers and models to use, set your own rate limits, and manage your own API budgets."})]}),a.jsxs("div",{className:"border-l-4 border-pink-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-pink-700 dark:text-pink-300",children:" Better Privacy"}),a.jsx("p",{className:"text-sm",children:"Your prompts go directly from Lambda to your API provider - the service owner doesn't need to manage server-side keys."})]})]}),a.jsxs("div",{className:"mt-4 bg-white dark:bg-gray-800 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm font-semibold mb-1",children:"How to add your API keys:"}),a.jsxs("p",{className:"text-sm",children:["Go to ",a.jsx("strong",{children:"Settings  Providers  Add Provider"})," and enter your API key from OpenAI, Groq, Gemini, Together AI, or any OpenAI-compatible endpoint."]})]})]}),a.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border-2 border-blue-300 dark:border-blue-700",children:[a.jsx("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-3",children:" Where to Get API Keys"}),a.jsx("p",{className:"mb-4 text-sm",children:"Getting your own API keys lets you use the service with zero LLM costs! Here's where to sign up:"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:a.jsx("a",{href:"https://console.groq.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Groq "})}),a.jsx("p",{className:"text-xs",children:"Unlimited free tier with fast inference. Perfect for most users. Supports Llama, Mixtral, and Gemma models."})]}),a.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("p",{className:"font-semibold text-green-700 dark:text-green-300",children:a.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Google Gemini "})}),a.jsx("p",{className:"text-xs",children:"Generous free tier with daily quotas. Multimodal AI models with excellent performance."})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("p",{className:"font-semibold text-orange-700 dark:text-orange-300",children:a.jsx("a",{href:"https://api.together.xyz/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Together AI "})}),a.jsx("p",{className:"text-xs",children:"Free trial credits for new accounts. Access to cutting-edge open source models including Llama 4 and DeepSeek."})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("p",{className:"font-semibold text-purple-700 dark:text-purple-300",children:a.jsx("a",{href:"https://platform.openai.com/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"OpenAI "})}),a.jsx("p",{className:"text-xs",children:"Industry-leading GPT models. Paid service but competitive pricing. Includes GPT-4, GPT-4o, and GPT-4o-mini."})]})]}),a.jsxs("p",{className:"mt-4 text-xs text-gray-600 dark:text-gray-400",children:["After getting your API key, add it in ",a.jsx("strong",{children:"Settings  Providers  Add Provider"})," to start using it immediately with $0 LLM costs!"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Usage Tracking"}),a.jsxs("div",{className:"space-y-2 pl-4",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Real-Time Balance:"})," Check your credit balance anytime on the Billing page."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Transaction History:"})," View detailed logs of all API calls with timestamps, models used, token counts, and costs."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cost Breakdown:"})," See exactly what you paid for each request - LLM costs, infrastructure fees, and surcharges (if applicable)."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Export Options:"})," Download your transaction history for personal record-keeping or expense reporting."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Cost Optimization Tips"}),a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:a.jsxs("ul",{className:"space-y-2 pl-4",children:[a.jsxs("li",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("strong",{children:" #1 Best Savings:"})," Add your own API keys in Settings - pay $0 for LLM operations! Use Groq or Gemini free tiers for unlimited access."]}),a.jsxs("li",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("strong",{children:"Choose Smaller Models:"})," Use GPT-4o-mini instead of GPT-4, or Gemini Flash instead of Pro for routine tasks."]}),a.jsxs("li",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("strong",{children:"Enable Only Necessary Tools:"})," Disable expensive tools like `ask_llm` and `generate_reasoning_chain` unless absolutely needed."]}),a.jsxs("li",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("strong",{children:"Strategic Planning Mode:"})," Use planning mode only for complex research queries where the upfront planning cost saves tokens overall."]}),a.jsxs("li",{className:"border-l-4 border-pink-500 pl-3",children:[a.jsx("strong",{children:"Monitor Transparently:"})," Check the LLM API Transparency panel in chat to see real-time costs and adjust your usage patterns."]})]})}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mt-4",children:[a.jsx("p",{className:"font-semibold mb-2",children:" How Infrastructure Costs Are Calculated"}),a.jsxs("p",{className:"text-sm mb-3",children:["Every Lambda request incurs costs from 5 AWS services. We apply a ",a.jsx("strong",{children:"6x markup"})," to cover operational overhead and ensure service sustainability:"]}),a.jsxs("div",{className:"space-y-2 text-sm pl-4",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:"1. Lambda Compute"}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Memory allocation  execution time  $0.0000166667 per GB-second",a.jsx("br",{}),a.jsx("em",{children:"Example: 512MB  0.8s = $0.00000667"})]})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:"2. Lambda Requests"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"$0.20 per million requests ($0.0000002 per request)"})]}),a.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:"3. CloudWatch Logs"}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["~2KB per request  ($0.50/GB ingestion + $0.03/GB storage/month)",a.jsx("br",{}),a.jsx("em",{children:"Example: ~$0.00000102 per request"})]})]}),a.jsxs("div",{className:"border-l-4 border-orange-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:"4. Data Transfer Out"}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["~4KB response size  $0.09/GB (first 10TB/month)",a.jsx("br",{}),a.jsx("em",{children:"Example: ~$0.00000036 per request"})]})]}),a.jsxs("div",{className:"border-l-4 border-pink-500 pl-3",children:[a.jsx("p",{className:"font-medium",children:"5. S3 Storage"}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Deployment packages (~700MB)  $0.023/GB/month, averaged across requests",a.jsx("br",{}),a.jsx("em",{children:"Example: ~$0.00000003 per request"})]})]})]}),a.jsx("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded border border-blue-300 dark:border-blue-700",children:a.jsxs("p",{className:"text-xs font-mono",children:[a.jsx("strong",{children:"Total AWS Cost:"})," $0.00001087 per request",a.jsx("br",{}),a.jsx("strong",{children:"With 6x markup:"})," $0.00006522 per request",a.jsx("br",{}),a.jsx("strong",{children:"Profit margin:"})," 83% (industry competitive)"]})})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Frequently Asked Questions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"What happens if I run out of credits?"}),a.jsx("p",{className:"mt-2 text-sm pl-4",children:'Chat requests will be rejected with a "402 Payment Required" error. Simply add more credits via the Billing page to continue using the service. Your chat history and settings are preserved.'})]}),a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"Do I need credits if I provide my own API keys?"}),a.jsxs("p",{className:"mt-2 text-sm pl-4",children:["Yes, but only for minimal infrastructure costs! When using your own API keys (BYOK), you pay ",a.jsx("strong",{children:"$0 for LLM operations"}),"and only pay the Lambda infrastructure fee (4x markup on AWS costs, typically $0.0001-0.0005 per request). This is 99.6% cheaper than using server-provided keys."]})]}),a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"Why is there a 25% surcharge on server-side keys?"}),a.jsxs("p",{className:"mt-2 text-sm pl-4",children:["The 25% surcharge on server-provided API keys covers the cost of maintaining API subscriptions and service overhead. When you use your own keys (BYOK), there's ",a.jsx("strong",{children:"no surcharge"})," - you only pay infrastructure costs."]})]}),a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"How do I add my own API keys?"}),a.jsxs("p",{className:"mt-2 text-sm pl-4",children:["Navigate to ",a.jsx("strong",{children:"Settings  Providers  Add Provider"}),". Select your provider (OpenAI, Groq, Gemini, Together AI, or Custom), enter your API key, and save. Once configured, requests will use your key automatically, and you'll pay $0 for LLM operations!"]})]}),a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"What free tier options are available with BYOK?"}),a.jsxs("p",{className:"mt-2 text-sm pl-4",children:[a.jsx("strong",{children:"Groq:"})," Unlimited free tier with rate limits (perfect for most users)",a.jsx("br",{}),a.jsx("strong",{children:"Google Gemini:"})," Generous free tier with daily quotas",a.jsx("br",{}),a.jsx("strong",{children:"Together AI:"})," Free trial credits for new accounts",a.jsx("br",{}),"When you use these free tiers with your own keys, your only cost is the minimal Lambda infrastructure fee!"]})]}),a.jsxs("details",{className:"border-2 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:[a.jsx("summary",{className:"font-semibold cursor-pointer text-base",children:"Can I get a refund on credit purchases?"}),a.jsx("p",{className:"mt-2 text-sm pl-4",children:"No, all credit purchases are final and non-refundable. Credits never expire, so you can use them whenever you're ready."})]})]})]})]})}function _he(){const e=pl();return a.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[a.jsx("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>e("/"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",title:"Back to Chat",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Privacy Policy"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 text-gray-800 dark:text-gray-200",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Last Updated"}),a.jsx("p",{children:"October 26, 2025"})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome to Our Privacy Policy"}),a.jsx("p",{children:"We believe transparency is essential when it comes to your personal information. This privacy policy explains clearly and honestly what data we collect when you use Research Agent, how we use it, who we share it with, and what rights you have over your information."}),a.jsx("p",{children:"Research Agent is designed with privacy as a core principle. We minimize data collection, store most of your content locally on your device, and never sell your personal information to third parties. Let's walk through exactly how we handle your data."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" What Information Do We Collect?"}),a.jsx("p",{children:"When you use Research Agent, we collect only what's necessary to provide and improve our service:"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Authentication Information:"})," We use Google OAuth to verify your identity, which means we receive your email address and basic profile information (like your name and profile picture). This helps us secure your account and personalize your experience."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Your Conversations:"})," The messages you send to AI models and their responses are stored locally in your browser's storagenot on our servers. This keeps your conversations private and under your control. Only you can access them through your authenticated account."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Usage and Billing Data:"})," We track which AI models you use, how many tokens you consume, the costs associated with your requests, and when you make them. This information is essential for billing purposes and helps you understand your spending. When you purchase credits through PayPal, we record the transaction ID, amount, and your current balance."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Content You Create:"}),` If you use our content management features (called "Swag"), your snippets, notes, embeddings, and tags are stored locally in your browser's IndexedDB database. You can optionally sync this content to your personal Google Drive for backup and access across devices.`]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Optional Information:"})," Some features work better with additional data that you can choose to provide. If you grant permission, we may access your location for location-based queries, or connect to your Google Drive for cloud synchronization. These are entirely optionalthe service works without them."]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How Do We Use Your Information?"}),a.jsx("p",{children:"Every piece of information we collect serves a specific purpose:"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Providing the Service:"})," We use your authentication data to verify who you are and keep your account secure. When you ask a question or make a request, we route it to the AI provider you've selected (like OpenAI, Google, or Groq), including the necessary context to get you a helpful response."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Managing Your Account:"})," Your billing information helps us track your credit balance, process payments through PayPal, and generate transparent transaction records so you always know where your money is going. This financial visibility is importantyou should never wonder what you're being charged for."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Improving the Service:"})," We analyze aggregated usage patterns (without identifying individual users) to monitor performance, identify and fix bugs, and optimize our infrastructure for better speed and reliability. When something breaks or could work better, this data helps us fix it."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Communicating With You:"})," If we need to send important service updates, security alerts, or respond to your support requests, we'll use your email address. We don't send marketing emails or spamjust essential service information."]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Who Do We Share Your Data With?"}),a.jsx("p",{children:"To provide Research Agent's functionality, we work with several trusted partners:"}),a.jsxs("p",{children:[a.jsx("strong",{children:"AI Service Providers:"})," When you send a prompt, it goes to the AI provider you've selectedOpenAI, Google, Anthropic, Groq, or others. Your conversation history is shared with these providers so they can generate relevant responses. Each provider has their own privacy policy that governs how they handle your data. We recommend reviewing their policies to understand how your prompts are processed and whether they're used for training."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Payment Processor:"})," All financial transactions are handled directly by PayPal. When you buy credits, PayPal processes your payment according to their privacy policy. We never see or store your credit card numbers, bank account information, or other sensitive financial details. We only receive confirmation that the payment succeeded and the transaction ID for our records."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cloud Infrastructure:"})," Our backend runs on Amazon Web Services (AWS) Lambda, which hosts the code that processes your requests and manages routing to AI providers. AWS is a secure, enterprise-grade cloud platform trusted by millions of applications worldwide."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Your Personal Cloud Storage:"})," If you enable Google Drive synchronization, your content travels directly from your browser to your own Google Drive account. We don't maintain copies on our serversthe data goes straight to storage you control."]}),a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[a.jsx("p",{className:"font-semibold text-red-800 dark:text-red-200 mb-2",children:" What We DON'T Do"}),a.jsx("p",{className:"text-sm",children:"We do NOT sell your personal information to advertisers, data brokers, or marketing companies. We do NOT share your conversations or content with third parties for purposes unrelated to providing you the service. Your data is used solely to give you the AI assistance you signed up for, nothing more."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" How We Protect and Store Your Data"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Privacy-First Architecture:"})," Research Agent is built around a simple principle: your private data should stay private. The majority of your contentyour complete chat history, all your saved snippets, and generated embeddingsnever leaves your device. It's stored exclusively in your browser's local IndexedDB database, which means it stays on your computer or phone unless you explicitly choose to back it up to your Google Drive."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"What Lives on Our Servers:"})," The only information we store on our backend infrastructure is billing-related: your transaction history, credit purchases, and usage logs. We keep this for accounting purposes and to ensure billing transparency. This data is stored securely with appropriate access controls and encryption."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Data Security:"})," All communication between your browser and our servers is encrypted using HTTPS, the same technology that protects online banking. Your authentication happens through Google's OAuth2 system, which means we never see your Google password. Access to your personal data is restricted to you alone through your authenticated Google accountnot even administrators can peek at your conversations or content."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"How Long We Keep Data:"})," Billing records are retained as required by law for tax and accounting compliance. Your chat history and content are stored locally in your browser, so they persist until you choose to delete them. You're always in controlclear your data whenever you want through the app or your browser's storage settings."]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Your Rights and Control"}),a.jsx("p",{children:"You have meaningful control over your information:"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Access Your Data:"})," View your complete billing history and detailed usage statistics anytime through the Billing page. See exactly what you've been charged for, when, and how many credits you have remaining."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Delete Your Data:"})," Because your conversations and content live in your browser, you can delete them whenever you choose. Use the app's clear data features or your browser's storage management tools. It's truly deletedwe can't recover it because we never had a copy."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Export Your Data:"})," Download your transaction history and usage data for your own records or to move to another service. Your data isn't locked inyou can take it with you."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Control Optional Features:"})," Turn off Google Drive sync to keep content local-only. Revoke location access if you no longer want location-based features. Close your account entirely if you no longer wish to use Research Agent."]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Important Disclaimers and Limitations"}),a.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-5 rounded-lg border-2 border-yellow-300 dark:border-yellow-700 space-y-4",children:[a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"Understanding AI-Generated Content:"}),` The responses you receive from AI models are generated by sophisticated artificial intelligence, but they're not perfect. AI can make mistakes, exhibit biases from training data, provide outdated information, or even "hallucinate"confidently presenting false information as fact. AI-generated content may also include inappropriate, offensive, or potentially harmful material.`]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"No Warranties:"}),` We provide Research Agent "as is" without guarantees of any kind. We don't warrant that the AI responses will be accurate, complete, safe, or suitable for any particular purpose. The service may have bugs, experience downtime, or not work as expected.`]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"Your Responsibility:"})," You are solely responsible for verifying information before acting on it. This is especially critical for important decisions involving health, legal matters, financial planning, safety, or anything consequential. When it matters, consult qualified professionals rather than relying on AI alone."]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"Third-Party Services:"})," We're not responsible for issues with OpenAI, Google, Groq, PayPal, or other integrated services. Their performance, availability, and policies are beyond our control. Problems with these services are governed by their own terms and privacy policies."]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"Data Loss:"})," While we implement reasonable protections, we can't guarantee against data loss. We're not liable for lost chat history, content, or other browser-stored data due to cache clearing, device failure, software conflicts, or any other cause. Back up anything important to external storage."]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-yellow-800 dark:text-yellow-200",children:"Liability Limits:"})," To the maximum extent permitted by law, our total liability for all claims will not exceed what you've paid us for credits in the past 30 days. We're not liable for indirect damages, lost profits, or consequential losses."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Changes to This Policy"}),a.jsx("p",{children:`As Research Agent evolves and legal requirements change, we may update this privacy policy. When we make significant changes affecting your rights or our data practices, we'll notify you prominently in the app and update the "Last Updated" date above. We encourage you to review this policy periodically. Continued use after changes means you accept the updated terms.`})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-blue-600 dark:text-blue-400",children:" Contact Us"}),a.jsx("p",{children:"We're here to answer your questions and address your concerns:"}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 space-y-3",children:[a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300",children:"Email Support"}),a.jsx("p",{className:"text-sm mb-1",children:"For privacy questions, general inquiries, or billing issues:"}),a.jsx("a",{href:"mailto:syntithenai@gmail.com",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"syntithenai@gmail.com"})]}),a.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[a.jsx("p",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Bug Reports & Feature Requests"}),a.jsx("p",{className:"text-sm mb-1",children:"For technical issues, bug reports, or feature suggestions:"}),a.jsx("button",{onClick:()=>window.open("https://github.com/syntithenai/lambdallmproxy/issues","_blank"),className:"text-purple-600 dark:text-purple-400 hover:underline text-sm",children:"GitHub Issues "})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'We typically respond within a few business days. For urgent billing or account issues, mark your message as "URGENT."'})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border-2 border-blue-300 dark:border-blue-700",children:[a.jsx("p",{className:"font-semibold text-lg mb-2 text-blue-900 dark:text-blue-100",children:"Your Consent"}),a.jsx("p",{className:"text-sm",children:"By using Research Agent, you confirm that you've read and understood this privacy policy, agree to its terms including the disclaimers and liability limitations, and understand both the capabilities and limitations of AI technology. If you don't agree with any part of this policy, please don't use the service."})]})]})})]})}const The=({isBlocked:e,onUnblock:t})=>{const{settings:r}=Ui(),{isAuthenticated:n}=Os(),s=pl();return C.useEffect(()=>{if(e&&r.providers&&r.providers.length>0){console.log("User has UI providers configured, unblocking UI"),t();return}},[e,r.providers,t]),C.useEffect(()=>{const i=l=>{console.log("Provider added:",l.detail),setTimeout(()=>{r.providers&&r.providers.length>0&&t()},100)};return window.addEventListener("provider-added",i),()=>{window.removeEventListener("provider-added",i)}},[r.providers,t]),e&&n?a.jsxs("div",{className:"provider-setup-gate",children:[a.jsx("div",{className:"gate-overlay",children:a.jsxs("div",{className:"gate-content",children:[a.jsxs("div",{className:"gate-header",children:[a.jsx("h1",{children:" Credits Required"}),a.jsx("p",{className:"gate-subtitle",children:"To use this service, you need to purchase credits."})]}),a.jsxs("div",{className:"gate-info",children:[a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:"How does it work?"}),a.jsx("p",{children:"This is a pay-as-you-go service. Purchase credits to access our LLM providers without needing your own API keys. Your credits are tracked automatically, and you will be charged based on actual usage."})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:"Pricing"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Small models:"})," approximately $0.0001 per request"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Large models:"})," approximately $0.001 per request"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Minimum purchase:"})," $5.00 (5,000-50,000 requests)"]})]}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#888"},children:"Actual costs vary based on model and tokens used."})]}),a.jsxs("div",{className:"info-box",children:[a.jsx("h3",{children:"Secure Payment"}),a.jsx("p",{children:"Payments are processed securely through PayPal. Your credit balance is updated instantly after purchase."})]})]}),a.jsx("div",{className:"gate-action",children:a.jsx("button",{className:"btn-primary btn-large",onClick:()=>{console.log("Navigating to billing page"),t(),s("/settings?tab=billing")},children:"Buy Credits Now"})}),a.jsx("div",{className:"gate-footer",children:a.jsx("p",{className:"text-muted",children:"Your balance will be displayed in the top left corner after purchase. New users receive trial credits that expire after 24 hours."})})]})}),a.jsx("style",{children:".provider-setup-gate{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px)}.gate-overlay{width:100%;height:100%;overflow-y:auto;display:flex;align-items:center;justify-content:center;padding:2rem}.gate-content{max-width:800px;width:100%;background:#1a1a1a;border-radius:12px;padding:3rem;box-shadow:0 20px 60px rgba(0,0,0,0.5);border:1px solid #333}.gate-header{text-align:center;margin-bottom:2rem}.gate-header h1{font-size:2rem;margin:0 0 1rem 0;color:#fff}.gate-subtitle{font-size:1.1rem;color:#bbb;margin:0}.gate-info{margin-bottom:2rem}.info-box{background:#252525;border-radius:8px;padding:1.5rem;margin-bottom:1rem;border:1px solid #333}.info-box h3{margin:0 0 0.75rem 0;color:#fff;font-size:1.1rem}.info-box p{margin:0;color:#bbb;line-height:1.6}.info-box ul{margin:0.5rem 0 0 0;padding-left:1.5rem;color:#bbb}.info-box li{margin-bottom:0.75rem;line-height:1.6}.gate-action{text-align:center;margin-bottom:2rem}.btn-primary{background:#4a9eff;color:white;border:none;padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease}.btn-primary:hover{background:#357ac9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(74,158,255,0.3)}.btn-large{padding:1.25rem 2.5rem;font-size:1.2rem}.gate-footer{text-align:center;border-top:1px solid #333;padding-top:1.5rem}.text-muted{color:#888;font-size:0.95rem;margin:0}@media (max-width:768px){.gate-content{padding:2rem 1.5rem}.gate-header h1{font-size:1.5rem}.gate-subtitle{font-size:1rem}}"})]}):null};function Che(e={}){const{enabled:t=!0,intervalMs:r=300*1e3,debounceMs:n=30*1e3,onSyncComplete:s,onSyncError:i}=e,[l,c]=C.useState("idle"),[d,h]=C.useState(0),[g,f]=C.useState(null),x=C.useRef(null),b=C.useRef(null),y=C.useRef(!1),k=C.useCallback(async()=>{if(y.current){console.log(" Sync already in progress, skipping");return}if(!await o0.isAuthenticated()){console.log(" Not authenticated, skipping background sync");return}try{y.current=!0,c("syncing"),f(null),console.log(" Background sync started...");const N=await o0.syncAll();h(Date.now()),c("success"),N.plans.action!=="no-change"&&console.log(` Plans: ${N.plans.action} (${N.plans.itemCount} items)`),N.playlists.action!=="no-change"&&console.log(` Playlists: ${N.playlists.action} (${N.playlists.itemCount} items)`),s&&s(N),setTimeout(()=>c("idle"),3e3)}catch(N){console.error(" Background sync failed:",N),f(N.message||"Sync failed"),c("error"),i&&i(N),setTimeout(()=>c("idle"),5e3)}finally{y.current=!1}},[s,i]),S=C.useCallback(()=>{console.log(" Manual sync triggered"),k()},[k]),_=C.useCallback(()=>{t&&(b.current!==null&&clearTimeout(b.current),b.current=window.setTimeout(()=>{console.log(" Debounced sync triggered (30s after change)"),k()},n))},[t,n,k]);return C.useEffect(()=>{if(!t){console.log(" Background sync disabled");return}console.log(` Background sync enabled (interval: ${r/6e4} minutes)`);const T=setTimeout(()=>{k()},1e4);return x.current=window.setInterval(()=>{if(document.hidden){console.log(" Tab hidden, skipping interval sync");return}console.log(" Interval sync triggered"),k()},r),()=>{clearTimeout(T),x.current!==null&&clearInterval(x.current),b.current!==null&&clearTimeout(b.current)}},[t,r,k]),C.useEffect(()=>{const T=()=>{document.hidden?console.log(" Tab hidden, pausing background sync"):(console.log(" Tab visible, resuming background sync"),t&&_())};return document.addEventListener("visibilitychange",T),()=>{document.removeEventListener("visibilitychange",T)}},[t,_]),C.useEffect(()=>{if(!t)return;const T=N=>{N.key==="llm_proxy_planning_cache"&&(console.log(" Plans changed, scheduling debounced sync"),_())};return window.addEventListener("storage",T),()=>{window.removeEventListener("storage",T)}},[t,_]),{syncStatus:l,lastSyncTime:d,error:g,triggerSync:S}}function Nhe(){const{isAuthenticated:e,getToken:t}=Os(),{settings:r}=Ui(),{usage:n,loading:s}=Lg(),{i18n:i}=aA(),l=pl(),c=Co(),[d,h]=C.useState(!1),[g,f]=C.useState(!1),[x,b]=C.useState(!1),[y,k]=C.useState(!1),[S,_]=C.useState(!1),[T,N]=C.useState(!1),[I,R]=C.useState(null),[B,F]=C.useState(!1),ae=localStorage.getItem("auto_sync_enabled")==="true";Che({enabled:ae,onSyncComplete:O=>{(O.plans.action!=="no-change"||O.playlists.action!=="no-change")&&console.log(" Background sync completed")},onSyncError:O=>{console.error(" Background sync failed:",O.message)}}),C.useEffect(()=>{r.language&&i.language!==r.language&&i.changeLanguage(r.language);const O=["ar","he","fa"].includes(i.language)?"rtl":"ltr";document.documentElement.dir=O,document.documentElement.lang=i.language},[r.language,i]),C.useEffect(()=>{F(!1)},[c.pathname]);const G=O=>{S&&c.pathname==="/"?(R(O),N(!0)):l(O)},$=()=>{N(!1),I==="settings"?h(!0):I&&l(I),R(null)},J=()=>{N(!1),R(null)};C.useEffect(()=>{!S&&T&&(N(!1),R(null))},[S,T]);const ee=()=>{S&&c.pathname==="/"?(R("settings"),N(!0)):h(!0)},[W,j]=js("chat_enabled_tools",{web_search:!0,execute_js:!0,scrape_url:!0,youtube:!0,transcribe:!0,generate_chart:!0,generate_image:!0,search_knowledge_base:!1,manage_todos:!0,manage_snippets:!0,ask_llm:!1,generate_reasoning_chain:!1});if(C.useEffect(()=>{const O=q=>{if(S&&c.pathname==="/")return q.preventDefault(),q.returnValue="",""};return window.addEventListener("beforeunload",O),()=>window.removeEventListener("beforeunload",O)},[S,c.pathname]),C.useEffect(()=>{(async()=>{try{console.log("Starting migration from localStorage to IndexedDB...");const q=await lc.migrateFromLocalStorage();console.log(`Migration complete: ${q} chats migrated`),await lc.cleanupOldChats(100),console.log("Cleanup complete: kept 100 most recent chats")}catch(q){console.error("Error during migration:",q)}})()},[]),C.useEffect(()=>{const O="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";if(window.google)S_(O);else{const q=setInterval(()=>{window.google&&(S_(O),clearInterval(q))},100);setTimeout(()=>clearInterval(q),5e3)}},[]),C.useEffect(()=>{e&&!y&&(async()=>{if(!e){k(!0);return}try{const q=await t();if(!q){k(!0);return}const V=await Ca(),ue=await fetch(`${V}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({messages:[{role:"user",content:"test"}],providers:r.providers||[]})});ue.status===403&&(await ue.json()).requiresProviderSetup&&(console.log(" User needs to configure providers"),b(!0))}catch{console.log("Unable to verify provider setup status (this is not critical)")}finally{k(!0)}})()},[e,t,r.providers,y]),!e)return a.jsx(u7,{});if(!y)return a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:a.jsx("div",{className:"text-white text-xl",children:"Loading..."})});const U=n?.exceeded||!1;return x||U?a.jsx(The,{isBlocked:x||U,onUnblock:()=>b(!1)}):a.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:p-4 focus:bg-blue-600 focus:text-white focus:rounded-br-lg focus:shadow-lg",children:"Skip to main content"}),a.jsxs("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center px-1 md:px-4 py-3 max-w-screen-2xl md:mx-auto",children:[a.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"h-10 sm:h-12 w-auto object-contain"}),a.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[a.jsx(f7,{}),c.pathname!=="/billing"&&a.jsxs("button",{onClick:()=>G("/billing"),className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 min-h-11 touch-target",title:n?`You have $${n.creditBalance.toFixed(2)} remaining of $${n.totalCredits.toFixed(2)} total credits`:"View billing and usage details","aria-label":"Billing and credits",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),n&&!s&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&a.jsxs("span",{className:`text-xs font-medium ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]}),c.pathname==="/billing"||c.pathname==="/planning"?a.jsxs("button",{onClick:()=>l("/"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium min-h-11 touch-target",title:"Back to Chat","aria-label":"Back to Chat",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{className:"text-sm hidden md:inline",children:"Back to Chat"})]}):c.pathname==="/help"||c.pathname==="/privacy"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>l("/"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium min-h-11 touch-target",title:"Back to Chat","aria-label":"Back to Chat",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{className:"text-sm hidden md:inline",children:"Back to Chat"})]}),a.jsxs("button",{onClick:()=>G("/swag"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 rounded-lg transition-colors shadow-sm font-medium bg-blue-600 hover:bg-blue-700 text-white min-h-11 touch-target",title:"Swag - Save and manage snippets","aria-label":"Swag",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),a.jsx("span",{className:"text-sm hidden md:inline",children:"Swag"})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>G("/swag"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 rounded-lg transition-colors shadow-sm font-medium bg-blue-600 hover:bg-blue-700 text-white min-h-11 touch-target",title:"Swag - Save and manage snippets","aria-label":"Swag",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),a.jsx("span",{className:"text-sm hidden md:inline",children:"Swag"})]})}),a.jsx(A_,{})]}),a.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[c.pathname!=="/billing"&&n&&!s&&typeof n.creditBalance=="number"&&a.jsxs("div",{className:`text-xs font-medium px-2 py-1 rounded ${n.exceeded?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20"}`,children:["$",n.creditBalance.toFixed(2)]}),c.pathname==="/swag"||c.pathname==="/billing"||c.pathname==="/planning"?a.jsxs("button",{onClick:()=>G("/"),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Back to Chat","aria-label":"Back to Chat",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),a.jsx("span",{className:"hidden md:inline text-sm font-medium text-gray-700 dark:text-gray-300",children:"Back to Chat"})]}):a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>G("/swag"),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Swag","aria-label":"Swag",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})})})}),a.jsx("button",{onClick:()=>F(!B),className:"icon-button","aria-label":B?"Close menu":"Open menu","aria-expanded":B,children:B?a.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):a.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),B&&a.jsx("nav",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",role:"navigation","aria-label":"Mobile navigation",children:a.jsxs("div",{className:"px-4 py-2 space-y-1",children:[c.pathname!=="/"&&a.jsxs("button",{onClick:()=>{l("/"),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Chat"})]}),c.pathname!=="/billing"&&a.jsxs("button",{onClick:()=>{G("/billing"),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Billing"}),n&&!s&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&a.jsxs("div",{className:`text-xs ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]})]}),c.pathname!=="/swag"&&a.jsxs("button",{onClick:()=>{G("/swag"),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Swag"})]}),a.jsxs("button",{onClick:()=>{ee(),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Settings"})]}),a.jsxs("button",{onClick:()=>{G("/help"),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Help"})]}),a.jsxs("button",{onClick:()=>{G("/privacy"),F(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Privacy Policy"})]}),a.jsxs("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",onClick:()=>F(!1),className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),a.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"GitHub"})]}),a.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:a.jsx(A_,{})})]})})]}),a.jsx(nhe,{}),a.jsx(O7,{}),a.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:a.jsx("div",{className:"h-full max-w-screen-2xl md:mx-auto",children:a.jsxs(b8,{children:[a.jsx(Gl,{path:"/",element:a.jsx(uhe,{enabledTools:W,setEnabledTools:j,showMCPDialog:g,setShowMCPDialog:f,onLoadingChange:_})}),a.jsx(Gl,{path:"/planning",element:a.jsx(dhe,{})}),a.jsx(Gl,{path:"/swag",element:a.jsx(mhe,{})}),a.jsx(Gl,{path:"/billing",element:a.jsx(bhe,{})}),a.jsx(Gl,{path:"/help",element:a.jsx(yhe,{})}),a.jsx(Gl,{path:"/privacy",element:a.jsx(_he,{})})]})})}),a.jsx(X7,{isOpen:d,onClose:()=>h(!1),enabledTools:W,setEnabledTools:j,onOpenMCPDialog:()=>f(!0)}),T&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"card max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Active Request in Progress"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"You have an active chat request running. Navigating away will stop the current request and you may lose the response."}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 font-semibold",children:"Are you sure you want to continue?"}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:J,className:"btn-secondary px-4 py-2",children:"Stay Here"}),a.jsx("button",{onClick:$,className:"btn-primary px-4 py-2 bg-orange-600 hover:bg-orange-700",children:"Navigate Away"})]})]})}),a.jsx(r3,{onOpenSettings:ee})]})}function Ahe(){return a.jsx(U8,{basename:"/",children:a.jsx(E9,{children:a.jsx(n9,{children:a.jsx(X9,{children:a.jsx(U9,{children:a.jsx(J9,{children:a.jsx(i7,{children:a.jsx(Q9,{children:a.jsx(K9,{children:a.jsx(y9,{children:a.jsx(v9,{children:a.jsx(a9,{children:a.jsx(V9,{children:a.jsx(Nhe,{})})})})})})})})})})})})})})}typeof window<"u"&&(window.ragDB=Va,console.log(" ragDB exposed to window.ragDB for debugging"));const jhe=()=>{const e="AU9cY15vsAcz4tWwm5U0O-nMBqYTP3cT0dOHTpHqPCCD1n9fwdcD-xNcuzMv_eP-UtaB3PFHTuHoXeCW",t=document.createElement("script");t.src=`https://www.paypal.com/sdk/js?client-id=${e}&currency=USD`,t.async=!0,t.onload=()=>console.log(" PayPal SDK loaded successfully"),t.onerror=()=>console.error(" Failed to load PayPal SDK"),document.head.appendChild(t)};jhe();const e1=new URLSearchParams(window.location.search);if(e1.get("reset")==="true"){console.log(" Reset parameter detected - clearing remote Lambda preference"),BA(),e1.delete("reset");const e=e1.toString(),t=window.location.pathname+(e?"?"+e:"")+window.location.hash;window.history.replaceState({},"",t)}ED.createRoot(document.getElementById("root")).render(a.jsx(Ahe,{}));export{Nt as $,Phe as A,tg as B,VX as C,fJ as D,sk as E,Da as F,z4 as G,Yse as H,Vte as I,ene as J,cC as K,jQ as L,Yu as M,Ihe as N,Lm as O,KQ as P,E2 as Q,Gn as R,kC as S,Fte as T,Vf as U,Gse as V,Hg as W,nJ as X,zg as Y,Pse as Z,A as _,cJ as a,FM as a$,qt as a0,Q4 as a1,Ite as a2,UC as a3,$C as a4,Yhe as a5,Uhe as a6,qhe as a7,Hhe as a8,Fhe as a9,nge as aA,sge as aB,tge as aC,It as aD,rge as aE,ale as aF,Zoe as aG,Joe as aH,ioe as aI,Dte as aJ,ed as aK,Rhe as aL,Xg as aM,aoe as aN,noe as aO,O2 as aP,sl as aQ,RC as aR,fee as aS,fg as aT,Ec as aU,Rse as aV,$M as aW,Tm as aX,jm as aY,$0 as aZ,zM as a_,mu as aa,P2 as ab,Ghe as ac,$he as ad,Vhe as ae,Whe as af,zhe as ag,nr as ah,Pi as ai,Loe as aj,XR as ak,age as al,rne as am,la as an,xl as ao,K2 as ap,wO as aq,Cc as ar,VM as as,lr as at,Ose as au,_ae as av,Tse as aw,X2 as ax,FN as ay,wle as az,lJ as b,use as b0,Ot as b1,NM as b2,xs as b3,lee as b4,M2 as b5,dL as b6,Gg as b7,pL as b8,Bhe as b9,rN as bA,Z2 as bB,IM as bC,Pv as bD,Ise as bE,Am as bF,WX as ba,Mse as bb,_se as bc,hae as bd,Q2 as be,ise as bf,Dse as bg,Vg as bh,gd as bi,P0 as bj,xse as bk,Gle as bl,Wg as bm,F0 as bn,dse as bo,OM as bp,fae as bq,mae as br,Kl as bs,oN as bt,xae as bu,J2 as bv,pae as bw,vae as bx,pd as by,ml as bz,Zr as c,Pr as d,X4 as e,ia as f,dJ as g,Eo as h,Zs as i,lne as j,dd as k,qe as l,XM as m,Dhe as n,oge as o,ige as p,hJ as q,C as r,uJ as s,gJ as t,gi as u,tne as v,Kse as w,Koe as x,Khe as y,oJ as z};
