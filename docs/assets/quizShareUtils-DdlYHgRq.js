import{L as i}from"./index-85uSmEIK.js";const s=32e3,u=1;function d(t){const e=JSON.stringify(t);return i.compressToEncodedURIComponent(e)}function l(t){try{const e=i.decompressFromEncodedURIComponent(t);if(!e)return null;const r=JSON.parse(e);return!r.version||r.shareType!=="quiz"||!r.quiz?(console.error("Invalid quiz share data structure"),null):!r.quiz.title||!Array.isArray(r.quiz.questions)?(console.error("Invalid quiz structure"),null):r}catch(e){return console.error("Failed to decode quiz data:",e),null}}function m(t,e){const c=JSON.stringify(t).length,n={version:u,timestamp:Date.now(),shareType:"quiz",quiz:t,metadata:{compressed:!0,originalSize:c,sharedBy:e?.sharedBy,enrichment:e?.enrichment}},a=d(n);n.metadata&&(n.metadata.compressedSize=a.length);const o=`${window.location.origin}${window.location.pathname}#/quiz/shared?data=${a}`;return o.length>s&&console.warn(`Quiz share URL exceeds Chrome limit: ${o.length} > ${s}`),a}function z(t){return`${"https://ai.syntithenai.com"+window.location.pathname}#/quiz/shared?data=${t}`}function p(){const t=window.location.hash;if(t.includes("/quiz/shared?data=")){const e=t.match(/data=([^&]+)/);if(e)return l(e[1])}return null}export{z as a,m as c,p as g};
