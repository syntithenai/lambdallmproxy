const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-BYAeVIZH.js","assets/mixin-D3UDm--6.js","assets/hls-Bm3F2dIq.js","assets/react-BE4PdzoV.js","assets/index-BDLF2U-u.js","assets/dagre-6UL2VRFP-CHjzgt-g.js","assets/graph-D94No4df.js","assets/_baseUniq-B7KXMSei.js","assets/layout-DD4Fv_FY.js","assets/_basePickBy-CIpb6XBM.js","assets/clone-DXJs2X9t.js","assets/cose-bilkent-S5V4N54A-CskLClnS.js","assets/cytoscape.esm-DtBltrT8.js","assets/c4Diagram-YG6GDRKO-BZnC34oO.js","assets/chunk-TZMSLE5B-B4fbiEII.js","assets/flowDiagram-NV44I4VS-D6UHMCC7.js","assets/chunk-FMBD7UC4-t4a10i1c.js","assets/chunk-55IACEB6-DSP27jAH.js","assets/chunk-QN33PNHL-B_X96KWZ.js","assets/channel-D-fadrNc.js","assets/erDiagram-Q2GNP2WA-Ch9iT-P1.js","assets/gitGraphDiagram-NY62KEGX-kEt8eywY.js","assets/chunk-4BX2VUAB-CE9srgtl.js","assets/chunk-QZHKN3VN-C8Cc7pf-.js","assets/treemap-KMMF4GRG-C4XBvCRT.js","assets/ganttDiagram-LVOFAZNH-C4U_ZloZ.js","assets/linear-B7NkGVGz.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-F6ZHWCRC-DhK9c60k.js","assets/pieDiagram-ADFJNKIX-DiHoJ-iu.js","assets/arc-XhiyKhky.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-AYHSOK5B-DDc8_8Vt.js","assets/xychartDiagram-PRI3JC2R-CtJA_IZ1.js","assets/requirementDiagram-UZGBJVZJ-ZsguhxTY.js","assets/sequenceDiagram-WL72ISMW-BvJDy1pU.js","assets/classDiagram-2ON5EDUG-D-txqs81.js","assets/chunk-B4BG7PRW-BQq3pvGO.js","assets/classDiagram-v2-WZHVMYZB-D-txqs81.js","assets/stateDiagram-FKZM4ZOC-ByouOaG_.js","assets/chunk-DI55MBZ5-2B_j8Vhk.js","assets/stateDiagram-v2-4FDKWEC3-C0ace7Ln.js","assets/journeyDiagram-XKPGCS4Q-D1BseSOJ.js","assets/timeline-definition-IT6M3QCI-DWMPvof0.js","assets/mindmap-definition-VGOIOE7T-B0TrFK6C.js","assets/kanban-definition-3W4ZIXB7-ChJBv5cP.js","assets/sankeyDiagram-TZEHDZUN-DWUiV8Sb.js","assets/diagram-S2PKOQOG-BYLphdmt.js","assets/diagram-QEK2KX5R-Bm20IcNA.js","assets/blockDiagram-VD42YOAC-BAgkimde.js","assets/architectureDiagram-VXUJARFQ-B9WRUDUE.js","assets/diagram-PSM6KHXK-BaPFCUIq.js","assets/SettingsModal-DJzfM3lA.js","assets/SettingsModal-CYM99hmN.css","assets/SwagPage-Bn8BY8cE.js","assets/snippetShareUtils-CWl4tyHW.js","assets/QuizCard-D7gRThg4.js","assets/trophy-BMJIhuZT.js","assets/quizDb-BKsYOEXU.js","assets/SwagPage-CctKRZTA.css","assets/QuizPage-CjajuR85.js","assets/trash-2-C1T0tUOL.js","assets/FeedPage-DEh9FXRT.js","assets/BillingPage-D78XVOsD.js","assets/BillingPage-CLxBDKkQ.css","assets/SharedSnippetViewer-CwLMqp1n.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Rc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zN(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var xx={exports:{}},vh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function Ij(){if(d2)return vh;d2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:s,ref:a!==void 0?a:null,props:i}}return vh.Fragment=t,vh.jsx=r,vh.jsxs=r,vh}var h2;function Dj(){return h2||(h2=1,xx.exports=Ij()),xx.exports}var u=Dj(),vx={exports:{}},wh={},wx={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function Mj(){return p2||(p2=1,(function(e){function t(j,K){var Q=j.length;j.push(K);e:for(;0<Q;){var ie=Q-1>>>1,G=j[ie];if(0<a(G,K))j[ie]=K,j[Q]=G,Q=ie;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var K=j[0],Q=j.pop();if(Q!==K){j[0]=Q;e:for(var ie=0,G=j.length,F=G>>>1;ie<F;){var H=2*(ie+1)-1,I=j[H],ne=H+1,ue=j[ne];if(0>a(I,Q))ne<G&&0>a(ue,I)?(j[ie]=ue,j[ne]=Q,ie=ne):(j[ie]=I,j[H]=Q,ie=H);else if(ne<G&&0>a(ue,Q))j[ie]=ue,j[ne]=Q,ie=ne;else break e}}return K}function a(j,K){var Q=j.sortIndex-K.sortIndex;return Q!==0?Q:j.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var d=[],h=[],p=1,f=null,m=3,b=!1,x=!1,v=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function D(j){for(var K=r(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=j)n(h),K.sortIndex=K.expirationTime,t(d,K);else break;K=r(h)}}function B(j){if(v=!1,D(j),!x)if(r(d)!==null)x=!0,R||(R=!0,X());else{var K=r(h);K!==null&&U(B,K.startTime-j)}}var R=!1,M=-1,$=5,W=-1;function O(){return T?!0:!(e.unstable_now()-W<$)}function Y(){if(T=!1,R){var j=e.unstable_now();W=j;var K=!0;try{e:{x=!1,v&&(v=!1,C(M),M=-1),b=!0;var Q=m;try{t:{for(D(j),f=r(d);f!==null&&!(f.expirationTime>j&&O());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var G=ie(f.expirationTime<=j);if(j=e.unstable_now(),typeof G=="function"){f.callback=G,D(j),K=!0;break t}f===r(d)&&n(d),D(j)}else n(d);f=r(d)}if(f!==null)K=!0;else{var F=r(h);F!==null&&U(B,F.startTime-j),K=!1}}break e}finally{f=null,m=Q,b=!1}K=void 0}}finally{K?X():R=!1}}}var X;if(typeof A=="function")X=function(){A(Y)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,N=q.port2;q.port1.onmessage=Y,X=function(){N.postMessage(null)}}else X=function(){k(Y,0)};function U(j,K){M=k(function(){j(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var Q=m;m=K;try{return j()}finally{m=Q}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=m;m=j;try{return K()}finally{m=Q}},e.unstable_scheduleCallback=function(j,K,Q){var ie=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ie+Q:ie):Q=ie,j){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Q+G,j={id:p++,callback:K,priorityLevel:j,startTime:Q,expirationTime:G,sortIndex:-1},Q>ie?(j.sortIndex=Q,t(h,j),r(d)===null&&j===r(h)&&(v?(C(M),M=-1):v=!0,U(B,Q-ie))):(j.sortIndex=G,t(d,j),x||b||(x=!0,R||(R=!0,X()))),j},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(j){var K=m;return function(){var Q=m;m=K;try{return j.apply(this,arguments)}finally{m=Q}}}})(Sx)),Sx}var g2;function Oj(){return g2||(g2=1,wx.exports=Mj()),wx.exports}var Tx={exports:{}},Qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function jj(){if(f2)return Qt;f2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function b(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,T={};function k(F,H,I){this.props=F,this.context=H,this.refs=T,this.updater=I||x}k.prototype.isReactComponent={},k.prototype.setState=function(F,H){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,H,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function C(){}C.prototype=k.prototype;function A(F,H,I){this.props=F,this.context=H,this.refs=T,this.updater=I||x}var D=A.prototype=new C;D.constructor=A,v(D,k.prototype),D.isPureReactComponent=!0;var B=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function W(F,H,I){var ne=I.ref;return{$$typeof:e,type:F,key:H,ref:ne!==void 0?ne:null,props:I}}function O(F,H){return W(F.type,H,F.props)}function Y(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function X(F){var H={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(I){return H[I]})}var q=/\/+/g;function N(F,H){return typeof F=="object"&&F!==null&&F.key!=null?X(""+F.key):H.toString(36)}function U(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(R,R):(F.status="pending",F.then(function(H){F.status==="pending"&&(F.status="fulfilled",F.value=H)},function(H){F.status==="pending"&&(F.status="rejected",F.reason=H)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function j(F,H,I,ne,ue){var xe=typeof F;(xe==="undefined"||xe==="boolean")&&(F=null);var ke=!1;if(F===null)ke=!0;else switch(xe){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(F.$$typeof){case e:case t:ke=!0;break;case p:return ke=F._init,j(ke(F._payload),H,I,ne,ue)}}if(ke)return ue=ue(F),ke=ne===""?"."+N(F,0):ne,B(ue)?(I="",ke!=null&&(I=ke.replace(q,"$&/")+"/"),j(ue,H,I,"",function(ge){return ge})):ue!=null&&(Y(ue)&&(ue=O(ue,I+(ue.key==null||F&&F.key===ue.key?"":(""+ue.key).replace(q,"$&/")+"/")+ke)),H.push(ue)),1;ke=0;var me=ne===""?".":ne+":";if(B(F))for(var Me=0;Me<F.length;Me++)ne=F[Me],xe=me+N(ne,Me),ke+=j(ne,H,I,xe,ue);else if(Me=b(F),typeof Me=="function")for(F=Me.call(F),Me=0;!(ne=F.next()).done;)ne=ne.value,xe=me+N(ne,Me++),ke+=j(ne,H,I,xe,ue);else if(xe==="object"){if(typeof F.then=="function")return j(U(F),H,I,ne,ue);throw H=String(F),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ke}function K(F,H,I){if(F==null)return F;var ne=[],ue=0;return j(F,ne,"","",function(xe){return H.call(I,xe,ue++)}),ne}function Q(F){if(F._status===-1){var H=F._result;H=H(),H.then(function(I){(F._status===0||F._status===-1)&&(F._status=1,F._result=I)},function(I){(F._status===0||F._status===-1)&&(F._status=2,F._result=I)}),F._status===-1&&(F._status=0,F._result=H)}if(F._status===1)return F._result.default;throw F._result}var ie=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},G={map:K,forEach:function(F,H,I){K(F,function(){H.apply(this,arguments)},I)},count:function(F){var H=0;return K(F,function(){H++}),H},toArray:function(F){return K(F,function(H){return H})||[]},only:function(F){if(!Y(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Qt.Activity=f,Qt.Children=G,Qt.Component=k,Qt.Fragment=r,Qt.Profiler=a,Qt.PureComponent=A,Qt.StrictMode=n,Qt.Suspense=d,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return M.H.useMemoCache(F)}},Qt.cache=function(F){return function(){return F.apply(null,arguments)}},Qt.cacheSignal=function(){return null},Qt.cloneElement=function(F,H,I){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ne=v({},F.props),ue=F.key;if(H!=null)for(xe in H.key!==void 0&&(ue=""+H.key),H)!$.call(H,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&H.ref===void 0||(ne[xe]=H[xe]);var xe=arguments.length-2;if(xe===1)ne.children=I;else if(1<xe){for(var ke=Array(xe),me=0;me<xe;me++)ke[me]=arguments[me+2];ne.children=ke}return W(F.type,ue,ne)},Qt.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},Qt.createElement=function(F,H,I){var ne,ue={},xe=null;if(H!=null)for(ne in H.key!==void 0&&(xe=""+H.key),H)$.call(H,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ue[ne]=H[ne]);var ke=arguments.length-2;if(ke===1)ue.children=I;else if(1<ke){for(var me=Array(ke),Me=0;Me<ke;Me++)me[Me]=arguments[Me+2];ue.children=me}if(F&&F.defaultProps)for(ne in ke=F.defaultProps,ke)ue[ne]===void 0&&(ue[ne]=ke[ne]);return W(F,xe,ue)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(F){return{$$typeof:l,render:F}},Qt.isValidElement=Y,Qt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:Q}},Qt.memo=function(F,H){return{$$typeof:h,type:F,compare:H===void 0?null:H}},Qt.startTransition=function(F){var H=M.T,I={};M.T=I;try{var ne=F(),ue=M.S;ue!==null&&ue(I,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(R,ie)}catch(xe){ie(xe)}finally{H!==null&&I.types!==null&&(H.types=I.types),M.T=H}},Qt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Qt.use=function(F){return M.H.use(F)},Qt.useActionState=function(F,H,I){return M.H.useActionState(F,H,I)},Qt.useCallback=function(F,H){return M.H.useCallback(F,H)},Qt.useContext=function(F){return M.H.useContext(F)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(F,H){return M.H.useDeferredValue(F,H)},Qt.useEffect=function(F,H){return M.H.useEffect(F,H)},Qt.useEffectEvent=function(F){return M.H.useEffectEvent(F)},Qt.useId=function(){return M.H.useId()},Qt.useImperativeHandle=function(F,H,I){return M.H.useImperativeHandle(F,H,I)},Qt.useInsertionEffect=function(F,H){return M.H.useInsertionEffect(F,H)},Qt.useLayoutEffect=function(F,H){return M.H.useLayoutEffect(F,H)},Qt.useMemo=function(F,H){return M.H.useMemo(F,H)},Qt.useOptimistic=function(F,H){return M.H.useOptimistic(F,H)},Qt.useReducer=function(F,H,I){return M.H.useReducer(F,H,I)},Qt.useRef=function(F){return M.H.useRef(F)},Qt.useState=function(F){return M.H.useState(F)},Qt.useSyncExternalStore=function(F,H,I){return M.H.useSyncExternalStore(F,H,I)},Qt.useTransition=function(){return M.H.useTransition()},Qt.version="19.2.0",Qt}var m2;function Yp(){return m2||(m2=1,Tx.exports=jj()),Tx.exports}var kx={exports:{}},ka={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2;function Bj(){if(y2)return ka;y2=1;var e=Yp();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:d,containerInfo:h,implementation:p}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ka.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ka.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(d,h,null,p)},ka.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},ka.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},ka.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ka.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,f=l(p,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:b}):p==="script"&&n.d.X(d,{crossOrigin:f,integrity:m,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ka.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},ka.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,f=l(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ka.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=l(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},ka.requestFormReset=function(d){n.d.r(d)},ka.unstable_batchedUpdates=function(d,h){return d(h)},ka.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},ka.useFormStatus=function(){return s.H.useHostTransitionStatus()},ka.version="19.2.0",ka}var b2;function UN(){if(b2)return kx.exports;b2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kx.exports=Bj(),kx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function Fj(){if(x2)return wh;x2=1;var e=Oj(),t=Yp(),r=UN();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,g=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(g=c.return),o=c.return;while(o)}return c.tag===3?g:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(i(o)!==o)throw Error(n(188))}function h(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(n(188));return c!==o?null:o}for(var g=o,y=c;;){var w=g.return;if(w===null)break;var S=w.alternate;if(S===null){if(y=w.return,y!==null){g=y;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===g)return d(w),o;if(S===y)return d(w),c;S=S.sibling}throw Error(n(188))}if(g.return!==y.return)g=w,y=S;else{for(var P=!1,V=w.child;V;){if(V===g){P=!0,g=w,y=S;break}if(V===y){P=!0,y=w,g=S;break}V=V.sibling}if(!P){for(V=S.child;V;){if(V===g){P=!0,g=S,y=w;break}if(V===y){P=!0,y=S,g=w;break}V=V.sibling}if(!P)throw Error(n(189))}}if(g.alternate!==y)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?o:c}function p(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=p(o),c!==null)return c;o=o.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var q=Symbol.for("react.client.reference");function N(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===q?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case v:return"Fragment";case k:return"Profiler";case T:return"StrictMode";case B:return"Suspense";case R:return"SuspenseList";case W:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case A:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case D:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return c=o.displayName||null,c!==null?c:N(o.type)||"Memo";case $:c=o._payload,o=o._init;try{return N(o(c))}catch{}}return null}var U=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ie=[],G=-1;function F(o){return{current:o}}function H(o){0>G||(o.current=ie[G],ie[G]=null,G--)}function I(o,c){G++,ie[G]=o.current,o.current=c}var ne=F(null),ue=F(null),xe=F(null),ke=F(null);function me(o,c){switch(I(xe,c),I(ue,o),I(ne,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?DE(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=DE(c),o=ME(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}H(ne),I(ne,o)}function Me(){H(ne),H(ue),H(xe)}function ge(o){o.memoizedState!==null&&I(ke,o);var c=ne.current,g=ME(c,o.type);c!==g&&(I(ue,o),I(ne,g))}function Be(o){ue.current===o&&(H(ne),H(ue)),ke.current===o&&(H(ke),mh._currentValue=Q)}var ct,yt;function tr(o){if(ct===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);ct=c&&c[1]||"",yt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ct+o+yt}var wr=!1;function Et(o,c){if(!o||wr)return"";wr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(Ae){var Te=Ae}Reflect.construct(o,[],je)}else{try{je.call()}catch(Ae){Te=Ae}o.call(je.prototype)}}else{try{throw Error()}catch(Ae){Te=Ae}(je=o())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(Ae){if(Ae&&Te&&typeof Ae.stack=="string")return[Ae.stack,Te.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=y.DetermineComponentFrameRoot(),P=S[0],V=S[1];if(P&&V){var oe=P.split(`
`),we=V.split(`
`);for(w=y=0;y<oe.length&&!oe[y].includes("DetermineComponentFrameRoot");)y++;for(;w<we.length&&!we[w].includes("DetermineComponentFrameRoot");)w++;if(y===oe.length||w===we.length)for(y=oe.length-1,w=we.length-1;1<=y&&0<=w&&oe[y]!==we[w];)w--;for(;1<=y&&0<=w;y--,w--)if(oe[y]!==we[w]){if(y!==1||w!==1)do if(y--,w--,0>w||oe[y]!==we[w]){var Re=`
`+oe[y].replace(" at new "," at ");return o.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",o.displayName)),Re}while(1<=y&&0<=w);break}}}finally{wr=!1,Error.prepareStackTrace=g}return(g=o?o.displayName||o.name:"")?tr(g):""}function Ar(o,c){switch(o.tag){case 26:case 27:case 5:return tr(o.type);case 16:return tr("Lazy");case 13:return o.child!==c&&c!==null?tr("Suspense Fallback"):tr("Suspense");case 19:return tr("SuspenseList");case 0:case 15:return Et(o.type,!1);case 11:return Et(o.type.render,!1);case 1:return Et(o.type,!0);case 31:return tr("Activity");default:return""}}function $t(o){try{var c="",g=null;do c+=Ar(o,g),g=o,o=o.return;while(o);return c}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var or=Object.prototype.hasOwnProperty,bt=e.unstable_scheduleCallback,It=e.unstable_cancelCallback,mn=e.unstable_shouldYield,Jt=e.unstable_requestPaint,Ut=e.unstable_now,yn=e.unstable_getCurrentPriorityLevel,ae=e.unstable_ImmediatePriority,Ce=e.unstable_UserBlockingPriority,rt=e.unstable_NormalPriority,Qe=e.unstable_LowPriority,dt=e.unstable_IdlePriority,nr=e.log,un=e.unstable_setDisableYieldValue,br=null,Sr=null;function Mr(o){if(typeof nr=="function"&&un(o),Sr&&typeof Sr.setStrictMode=="function")try{Sr.setStrictMode(br,o)}catch{}}var ar=Math.clz32?Math.clz32:Pi,Jn=Math.log,Kr=Math.LN2;function Pi(o){return o>>>=0,o===0?32:31-(Jn(o)/Kr|0)|0}var ia=256,Oa=262144,di=4194304;function bn(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function le(o,c,g){var y=o.pendingLanes;if(y===0)return 0;var w=0,S=o.suspendedLanes,P=o.pingedLanes;o=o.warmLanes;var V=y&134217727;return V!==0?(y=V&~S,y!==0?w=bn(y):(P&=V,P!==0?w=bn(P):g||(g=V&~o,g!==0&&(w=bn(g))))):(V=y&~S,V!==0?w=bn(V):P!==0?w=bn(P):g||(g=y&~o,g!==0&&(w=bn(g)))),w===0?0:c!==0&&c!==w&&(c&S)===0&&(S=w&-w,g=c&-c,S>=g||S===32&&(g&4194048)!==0)?c:w}function Pe(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function He(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ct(){var o=di;return di<<=1,(di&62914560)===0&&(di=4194304),o}function Tr(o){for(var c=[],g=0;31>g;g++)c.push(o);return c}function Lr(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ot(o,c,g,y,w,S){var P=o.pendingLanes;o.pendingLanes=g,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=g,o.entangledLanes&=g,o.errorRecoveryDisabledLanes&=g,o.shellSuspendCounter=0;var V=o.entanglements,oe=o.expirationTimes,we=o.hiddenUpdates;for(g=P&~g;0<g;){var Re=31-ar(g),je=1<<Re;V[Re]=0,oe[Re]=-1;var Te=we[Re];if(Te!==null)for(we[Re]=null,Re=0;Re<Te.length;Re++){var Ae=Te[Re];Ae!==null&&(Ae.lane&=-536870913)}g&=~je}y!==0&&st(o,y,0),S!==0&&w===0&&o.tag!==0&&(o.suspendedLanes|=S&~(P&~c))}function st(o,c,g){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ar(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|g&261930}function Nt(o,c){var g=o.entangledLanes|=c;for(o=o.entanglements;g;){var y=31-ar(g),w=1<<y;w&c|o[y]&c&&(o[y]|=c),g&=~w}}function Hr(o,c){var g=c&-c;return g=(g&42)!==0?1:rr(g),(g&(o.suspendedLanes|c))!==0?0:g}function rr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Mn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function hi(){var o=K.p;return o!==0?o:(o=window.event,o===void 0?32:a2(o.type))}function pi(o,c){var g=K.p;try{return K.p=o,c()}finally{K.p=g}}var sa=Math.random().toString(36).slice(2),ut="__reactFiber$"+sa,Or="__reactProps$"+sa,Zn="__reactContainer$"+sa,Ri="__reactEvents$"+sa,as="__reactListeners$"+sa,ja="__reactHandles$"+sa,is="__reactResources$"+sa,ht="__reactMarker$"+sa;function ce(o){delete o[ut],delete o[Or],delete o[Ri],delete o[as],delete o[ja]}function ze(o){var c=o[ut];if(c)return c;for(var g=o.parentNode;g;){if(c=g[Zn]||g[ut]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(o=$E(o);o!==null;){if(g=o[ut])return g;o=$E(o)}return c}o=g,g=o.parentNode}return null}function it(o){if(o=o[ut]||o[Zn]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function lr(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Xr(o){var c=o[is];return c||(c=o[is]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Vt(o){o[ht]=!0}var Tn=new Set,Hn={};function ea(o,c){$e(o,c),$e(o+"Capture",c)}function $e(o,c){for(Hn[o]=c,o=0;o<c.length;o++)Tn.add(c[o])}var nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},xr={};function dn(o){return or.call(xr,o)?!0:or.call(Yt,o)?!1:nt.test(o)?xr[o]=!0:(Yt[o]=!0,!1)}function xn(o,c,g){if(dn(c))if(g===null)o.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+g)}}function oa(o,c,g){if(g===null)o.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+g)}}function ba(o,c,g,y){if(y===null)o.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(g);return}o.setAttributeNS(c,g,""+y)}}function jr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xa(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function jo(o,c,g){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var w=y.get,S=y.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(P){g=""+P,S.call(this,P)}}),Object.defineProperty(o,c,{enumerable:y.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Nn(o){if(!o._valueTracker){var c=xa(o)?"checked":"value";o._valueTracker=jo(o,c,""+o[c])}}function _s(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var g=c.getValue(),y="";return o&&(y=xa(o)?o.checked?"true":"false":o.value),o=y,o!==g?(c.setValue(o),!0):!1}function to(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ro=/[\n"\\]/g;function la(o){return o.replace(ro,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function As(o,c,g,y,w,S,P,V){o.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.type=P:o.removeAttribute("type"),c!=null?P==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+jr(c)):o.value!==""+jr(c)&&(o.value=""+jr(c)):P!=="submit"&&P!=="reset"||o.removeAttribute("value"),c!=null?ss(o,P,jr(c)):g!=null?ss(o,P,jr(g)):y!=null&&o.removeAttribute("value"),w==null&&S!=null&&(o.defaultChecked=!!S),w!=null&&(o.checked=w&&typeof w!="function"&&typeof w!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.name=""+jr(V):o.removeAttribute("name")}function no(o,c,g,y,w,S,P,V){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),c!=null||g!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){Nn(o);return}g=g!=null?""+jr(g):"",c=c!=null?""+jr(c):g,V||c===o.value||(o.value=c),o.defaultValue=c}y=y??w,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=V?o.checked:!!y,o.defaultChecked=!!y,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(o.name=P),Nn(o)}function ss(o,c,g){c==="number"&&to(o.ownerDocument)===o||o.defaultValue===""+g||(o.defaultValue=""+g)}function vn(o,c,g,y){if(o=o.options,c){c={};for(var w=0;w<g.length;w++)c["$"+g[w]]=!0;for(g=0;g<o.length;g++)w=c.hasOwnProperty("$"+o[g].value),o[g].selected!==w&&(o[g].selected=w),w&&y&&(o[g].defaultSelected=!0)}else{for(g=""+jr(g),c=null,w=0;w<o.length;w++){if(o[w].value===g){o[w].selected=!0,y&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function Gc(o,c,g){if(c!=null&&(c=""+jr(c),c!==o.value&&(o.value=c),g==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=g!=null?""+jr(g):""}function ao(o,c,g,y){if(c==null){if(y!=null){if(g!=null)throw Error(n(92));if(U(y)){if(1<y.length)throw Error(n(93));y=y[0]}g=y}g==null&&(g=""),c=g}g=jr(c),o.defaultValue=g,y=o.textContent,y===g&&y!==""&&y!==null&&(o.value=y),Nn(o)}function Dt(o,c){if(c){var g=o.firstChild;if(g&&g===o.lastChild&&g.nodeType===3){g.nodeValue=c;return}}o.textContent=c}var Wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jr(o,c,g){var y=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,g):typeof g!="number"||g===0||Wc.has(c)?c==="float"?o.cssFloat=g:o[c]=(""+g).trim():o[c]=g+"px"}function kr(o,c,g){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,g!=null){for(var y in g)!g.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var w in c)y=c[w],c.hasOwnProperty(w)&&g[w]!==y&&Jr(o,w,y)}else for(var S in c)c.hasOwnProperty(S)&&Jr(o,S,c[S])}function os(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gi(o){return Bo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function tt(){}var gt=null;function Lt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ht=null,an=null;function Ya(o){var c=it(o);if(c&&(o=c.stateNode)){var g=o[Or]||null;e:switch(o=c.stateNode,c.type){case"input":if(As(o,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=o;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+la(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var y=g[c];if(y!==o&&y.form===o.form){var w=y[Or]||null;if(!w)throw Error(n(90));As(y,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(c=0;c<g.length;c++)y=g[c],y.form===o.form&&_s(y)}break e;case"textarea":Gc(o,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&vn(o,!!g.multiple,c,!1)}}}var Fo=!1;function Dl(o,c,g){if(Fo)return o(c,g);Fo=!0;try{var y=o(c);return y}finally{if(Fo=!1,(Ht!==null||an!==null)&&(af(),Ht&&(c=Ht,o=an,an=Ht=null,Ya(c),o)))for(c=0;c<o.length;c++)Ya(o[c])}}function Ii(o,c){var g=o.stateNode;if(g===null)return null;var y=g[Or]||null;if(y===null)return null;g=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(g&&typeof g!="function")throw Error(n(231,c,typeof g));return g}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zo=!1;if(fi)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){zo=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{zo=!1}var Ns=null,tn=null,Vc=null;function bg(){if(Vc)return Vc;var o,c=tn,g=c.length,y,w="value"in Ns?Ns.value:Ns.textContent,S=w.length;for(o=0;o<g&&c[o]===w[o];o++);var P=g-o;for(y=1;y<=P&&c[g-y]===w[S-y];y++);return Vc=w.slice(o,1<y?1-y:void 0)}function Ol(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Yc(){return!0}function Dd(){return!1}function va(o){function c(g,y,w,S,P){this._reactName=g,this._targetInst=w,this.type=y,this.nativeEvent=S,this.target=P,this.currentTarget=null;for(var V in o)o.hasOwnProperty(V)&&(g=o[V],this[V]=g?g(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Yc:Dd,this.isPropagationStopped=Dd,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),c}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=va(Qa),jl=f({},Qa,{view:0,detail:0}),by=va(jl),Md,Od,Bl,Di=f({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bl&&(Bl&&o.type==="mousemove"?(Md=o.screenX-Bl.screenX,Od=o.screenY-Bl.screenY):Od=Md=0,Bl=o),Md)},movementY:function(o){return"movementY"in o?o.movementY:Od}}),jd=va(Di),xy=f({},Di,{dataTransfer:0}),vy=va(xy),wy=f({},jl,{relatedTarget:0}),Bd=va(wy),xg=f({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=va(xg),Uo=f({},Qa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Ty=va(Uo),ky=f({},Qa,{data:0}),vg=va(ky),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ay(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=_y[o])?!!c[o]:!1}function Fd(){return Ay}var Ny=f({},jl,{key:function(o){if(o.key){var c=Ey[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Ol(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Cy[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fd,charCode:function(o){return o.type==="keypress"?Ol(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ol(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),wg=va(Ny),Ly=f({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sg=va(Ly),Py=f({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fd}),z=va(Py),te=f({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_e=va(te),Ze=f({},Di,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Oe=va(Ze),ee=f({},Qa,{newState:0,oldState:0}),qe=va(ee),Se=[9,13,27,32],Le=fi&&"CompositionEvent"in window,he=null;fi&&"documentMode"in document&&(he=document.documentMode);var Ve=fi&&"TextEvent"in window&&!he,Ue=fi&&(!Le||he&&8<he&&11>=he),Ee=" ",Ke=!1;function Wt(o,c){switch(o){case"keyup":return Se.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wn(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ta=!1;function mi(o,c){switch(o){case"compositionend":return wn(c);case"keypress":return c.which!==32?null:(Ke=!0,Ee);case"textInput":return o=c.data,o===Ee&&Ke?null:o;default:return null}}function Gn(o,c){if(ta)return o==="compositionend"||!Le&&Wt(o,c)?(o=bg(),Vc=tn=Ns=null,ta=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ue&&c.locale!=="ko"?null:c.data;default:return null}}var Ka={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wa(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Ka[o.type]:c==="textarea"}function Mi(o,c,g,y){Ht?an?an.push(y):an=[y]:Ht=y,c=hf(c,"onChange"),0<c.length&&(g=new cs("onChange","change",null,g,y),o.push({event:g,listeners:c}))}var ca=null,Ba=null;function Oi(o){AE(o,0)}function $o(o){var c=lr(o);if(_s(c))return o}function Qc(o,c){if(o==="change")return c}var ji=!1;if(fi){var Fl;if(fi){var zd="oninput"in document;if(!zd){var Kc=document.createElement("div");Kc.setAttribute("oninput","return;"),zd=typeof Kc.oninput=="function"}Fl=zd}else Fl=!1;ji=Fl&&(!document.documentMode||9<document.documentMode)}function Ft(){ca&&(ca.detachEvent("onpropertychange",J),Ba=ca=null)}function J(o){if(o.propertyName==="value"&&$o(Ba)){var c=[];Mi(c,Ba,o,Lt(o)),Dl(Oi,c)}}function Sa(o,c,g){o==="focusin"?(Ft(),ca=c,Ba=g,ca.attachEvent("onpropertychange",J)):o==="focusout"&&Ft()}function kn(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $o(Ba)}function zl(o,c){if(o==="click")return $o(c)}function Xc(o,c){if(o==="input"||o==="change")return $o(c)}function Tg(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ta=typeof Object.is=="function"?Object.is:Tg;function qo(o,c){if(Ta(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var g=Object.keys(o),y=Object.keys(c);if(g.length!==y.length)return!1;for(y=0;y<g.length;y++){var w=g[y];if(!or.call(c,w)||!Ta(o[w],c[w]))return!1}return!0}function yi(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ud(o,c){var g=yi(o);o=0;for(var y;g;){if(g.nodeType===3){if(y=o+g.textContent.length,o<=c&&y>=c)return{node:g,offset:c-o};o=y}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=yi(g)}}function We(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?We(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function fe(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=to(o.document);c instanceof o.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)o=c.contentWindow;else break;c=to(o.document)}return c}function Ie(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var kt=fi&&"documentMode"in document&&11>=document.documentMode,St=null,et=null,cr=null,Ln=!1;function hn(o,c,g){var y=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Ln||St==null||St!==to(y)||(y=St,"selectionStart"in y&&Ie(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),cr&&qo(cr,y)||(cr=y,y=hf(et,"onSelect"),0<y.length&&(c=new cs("onSelect","select",null,c,g),o.push({event:c,listeners:y}),c.target=St)))}function Er(o,c){var g={};return g[o.toLowerCase()]=c.toLowerCase(),g["Webkit"+o]="webkit"+c,g["Moz"+o]="moz"+c,g}var Nr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionrun:Er("Transition","TransitionRun"),transitionstart:Er("Transition","TransitionStart"),transitioncancel:Er("Transition","TransitionCancel"),transitionend:Er("Transition","TransitionEnd")},bi={},zr={};fi&&(zr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function sn(o){if(bi[o])return bi[o];if(!Nr[o])return o;var c=Nr[o],g;for(g in c)if(c.hasOwnProperty(g)&&g in zr)return bi[o]=c[g];return o}var us=sn("animationend"),iT=sn("animationiteration"),sT=sn("animationstart"),p5=sn("transitionrun"),g5=sn("transitionstart"),f5=sn("transitioncancel"),oT=sn("transitionend"),lT=new Map,Ry="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ry.push("scrollEnd");function ds(o,c){lT.set(o,c),ea(c,[o])}var kg=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Bi=[],Jc=0,Iy=0;function Eg(){for(var o=Jc,c=Iy=Jc=0;c<o;){var g=Bi[c];Bi[c++]=null;var y=Bi[c];Bi[c++]=null;var w=Bi[c];Bi[c++]=null;var S=Bi[c];if(Bi[c++]=null,y!==null&&w!==null){var P=y.pending;P===null?w.next=w:(w.next=P.next,P.next=w),y.pending=w}S!==0&&cT(g,w,S)}}function Cg(o,c,g,y){Bi[Jc++]=o,Bi[Jc++]=c,Bi[Jc++]=g,Bi[Jc++]=y,Iy|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Dy(o,c,g,y){return Cg(o,c,g,y),_g(o)}function Ul(o,c){return Cg(o,null,null,c),_g(o)}function cT(o,c,g){o.lanes|=g;var y=o.alternate;y!==null&&(y.lanes|=g);for(var w=!1,S=o.return;S!==null;)S.childLanes|=g,y=S.alternate,y!==null&&(y.childLanes|=g),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(w=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,w&&c!==null&&(w=31-ar(g),o=S.hiddenUpdates,y=o[w],y===null?o[w]=[c]:y.push(c),c.lane=g|536870912),S):null}function _g(o){if(50<ch)throw ch=0,qb=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Zc={};function m5(o,c,g,y){this.tag=o,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(o,c,g,y){return new m5(o,c,g,y)}function My(o){return o=o.prototype,!(!o||!o.isReactComponent)}function io(o,c){var g=o.alternate;return g===null?(g=xi(o.tag,c,o.key,o.mode),g.elementType=o.elementType,g.type=o.type,g.stateNode=o.stateNode,g.alternate=o,o.alternate=g):(g.pendingProps=c,g.type=o.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=o.flags&65011712,g.childLanes=o.childLanes,g.lanes=o.lanes,g.child=o.child,g.memoizedProps=o.memoizedProps,g.memoizedState=o.memoizedState,g.updateQueue=o.updateQueue,c=o.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=o.sibling,g.index=o.index,g.ref=o.ref,g.refCleanup=o.refCleanup,g}function uT(o,c){o.flags&=65011714;var g=o.alternate;return g===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=g.childLanes,o.lanes=g.lanes,o.child=g.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=g.memoizedProps,o.memoizedState=g.memoizedState,o.updateQueue=g.updateQueue,o.type=g.type,c=g.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Ag(o,c,g,y,w,S){var P=0;if(y=o,typeof o=="function")My(o)&&(P=1);else if(typeof o=="string")P=wj(o,g,ne.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case W:return o=xi(31,g,c,w),o.elementType=W,o.lanes=S,o;case v:return $l(g.children,w,S,c);case T:P=8,w|=24;break;case k:return o=xi(12,g,c,w|2),o.elementType=k,o.lanes=S,o;case B:return o=xi(13,g,c,w),o.elementType=B,o.lanes=S,o;case R:return o=xi(19,g,c,w),o.elementType=R,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:P=10;break e;case C:P=9;break e;case D:P=11;break e;case M:P=14;break e;case $:P=16,y=null;break e}P=29,g=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=xi(P,g,c,w),c.elementType=o,c.type=y,c.lanes=S,c}function $l(o,c,g,y){return o=xi(7,o,y,c),o.lanes=g,o}function Oy(o,c,g){return o=xi(6,o,null,c),o.lanes=g,o}function dT(o){var c=xi(18,null,null,0);return c.stateNode=o,c}function jy(o,c,g){return c=xi(4,o.children!==null?o.children:[],o.key,c),c.lanes=g,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var hT=new WeakMap;function Fi(o,c){if(typeof o=="object"&&o!==null){var g=hT.get(o);return g!==void 0?g:(c={value:o,source:c,stack:$t(c)},hT.set(o,c),c)}return{value:o,source:c,stack:$t(c)}}var eu=[],tu=0,Ng=null,$d=0,zi=[],Ui=0,Ho=null,Ls=1,Ps="";function so(o,c){eu[tu++]=$d,eu[tu++]=Ng,Ng=o,$d=c}function pT(o,c,g){zi[Ui++]=Ls,zi[Ui++]=Ps,zi[Ui++]=Ho,Ho=o;var y=Ls;o=Ps;var w=32-ar(y)-1;y&=~(1<<w),g+=1;var S=32-ar(c)+w;if(30<S){var P=w-w%5;S=(y&(1<<P)-1).toString(32),y>>=P,w-=P,Ls=1<<32-ar(c)+w|g<<w|y,Ps=S+o}else Ls=1<<S|g<<w|y,Ps=o}function By(o){o.return!==null&&(so(o,1),pT(o,1,0))}function Fy(o){for(;o===Ng;)Ng=eu[--tu],eu[tu]=null,$d=eu[--tu],eu[tu]=null;for(;o===Ho;)Ho=zi[--Ui],zi[Ui]=null,Ps=zi[--Ui],zi[Ui]=null,Ls=zi[--Ui],zi[Ui]=null}function gT(o,c){zi[Ui++]=Ls,zi[Ui++]=Ps,zi[Ui++]=Ho,Ls=c.id,Ps=c.overflow,Ho=o}var ua=null,on=null,vr=!1,Go=null,$i=!1,zy=Error(n(519));function Wo(o){var c=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qd(Fi(c,o)),zy}function fT(o){var c=o.stateNode,g=o.type,y=o.memoizedProps;switch(c[ut]=o,c[Or]=y,g){case"dialog":dr("cancel",c),dr("close",c);break;case"iframe":case"object":case"embed":dr("load",c);break;case"video":case"audio":for(g=0;g<dh.length;g++)dr(dh[g],c);break;case"source":dr("error",c);break;case"img":case"image":case"link":dr("error",c),dr("load",c);break;case"details":dr("toggle",c);break;case"input":dr("invalid",c),no(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":dr("invalid",c);break;case"textarea":dr("invalid",c),ao(c,y.value,y.defaultValue,y.children)}g=y.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||y.suppressHydrationWarning===!0||RE(c.textContent,g)?(y.popover!=null&&(dr("beforetoggle",c),dr("toggle",c)),y.onScroll!=null&&dr("scroll",c),y.onScrollEnd!=null&&dr("scrollend",c),y.onClick!=null&&(c.onclick=tt),c=!0):c=!1,c||Wo(o,!0)}function mT(o){for(ua=o.return;ua;)switch(ua.tag){case 5:case 31:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:ua=ua.return}}function ru(o){if(o!==ua)return!1;if(!vr)return mT(o),vr=!0,!1;var c=o.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=o.type,g=!(g!=="form"&&g!=="button")||ax(o.type,o.memoizedProps)),g=!g),g&&on&&Wo(o),mT(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));on=UE(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));on=UE(o)}else c===27?(c=on,sl(o.type)?(o=cx,cx=null,on=o):on=c):on=ua?Hi(o.stateNode.nextSibling):null;return!0}function ql(){on=ua=null,vr=!1}function Uy(){var o=Go;return o!==null&&(ei===null?ei=o:ei.push.apply(ei,o),Go=null),o}function qd(o){Go===null?Go=[o]:Go.push(o)}var $y=F(null),Hl=null,oo=null;function Vo(o,c,g){I($y,c._currentValue),c._currentValue=g}function lo(o){o._currentValue=$y.current,H($y)}function qy(o,c,g){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===g)break;o=o.return}}function Hy(o,c,g,y){var w=o.child;for(w!==null&&(w.return=o);w!==null;){var S=w.dependencies;if(S!==null){var P=w.child;S=S.firstContext;e:for(;S!==null;){var V=S;S=w;for(var oe=0;oe<c.length;oe++)if(V.context===c[oe]){S.lanes|=g,V=S.alternate,V!==null&&(V.lanes|=g),qy(S.return,g,o),y||(P=null);break e}S=V.next}}else if(w.tag===18){if(P=w.return,P===null)throw Error(n(341));P.lanes|=g,S=P.alternate,S!==null&&(S.lanes|=g),qy(P,g,o),P=null}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===o){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}}function nu(o,c,g,y){o=null;for(var w=c,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var P=w.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var V=w.type;Ta(w.pendingProps.value,P.value)||(o!==null?o.push(V):o=[V])}}else if(w===ke.current){if(P=w.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(o!==null?o.push(mh):o=[mh])}w=w.return}o!==null&&Hy(c,o,g,y),c.flags|=262144}function Lg(o){for(o=o.firstContext;o!==null;){if(!Ta(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Gl(o){Hl=o,oo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function da(o){return yT(Hl,o)}function Pg(o,c){return Hl===null&&Gl(o),yT(o,c)}function yT(o,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},oo===null){if(o===null)throw Error(n(308));oo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else oo=oo.next=c;return g}var y5=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(g,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(g){return g()})}},b5=e.unstable_scheduleCallback,x5=e.unstable_NormalPriority,On={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gy(){return{controller:new y5,data:new Map,refCount:0}}function Hd(o){o.refCount--,o.refCount===0&&b5(x5,function(){o.controller.abort()})}var Gd=null,Wy=0,au=0,iu=null;function v5(o,c){if(Gd===null){var g=Gd=[];Wy=0,au=Qb(),iu={status:"pending",value:void 0,then:function(y){g.push(y)}}}return Wy++,c.then(bT,bT),c}function bT(){if(--Wy===0&&Gd!==null){iu!==null&&(iu.status="fulfilled");var o=Gd;Gd=null,au=0,iu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function w5(o,c){var g=[],y={status:"pending",value:null,reason:null,then:function(w){g.push(w)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var w=0;w<g.length;w++)(0,g[w])(c)},function(w){for(y.status="rejected",y.reason=w,w=0;w<g.length;w++)(0,g[w])(void 0)}),y}var xT=j.S;j.S=function(o,c){rE=Ut(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&v5(o,c),xT!==null&&xT(o,c)};var Wl=F(null);function Vy(){var o=Wl.current;return o!==null?o:Zr.pooledCache}function Rg(o,c){c===null?I(Wl,Wl.current):I(Wl,c.pool)}function vT(){var o=Vy();return o===null?null:{parent:On._currentValue,pool:o}}var su=Error(n(460)),Yy=Error(n(474)),Ig=Error(n(542)),Dg={then:function(){}};function wT(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ST(o,c,g){switch(g=o[g],g===void 0?o.push(c):g!==c&&(c.then(tt,tt),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,kT(o),o;default:if(typeof c.status=="string")c.then(tt,tt);else{if(o=Zr,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=y}},function(y){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,kT(o),o}throw Yl=c,su}}function Vl(o){try{var c=o._init;return c(o._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Yl=g,su):g}}var Yl=null;function TT(){if(Yl===null)throw Error(n(459));var o=Yl;return Yl=null,o}function kT(o){if(o===su||o===Ig)throw Error(n(483))}var ou=null,Wd=0;function Mg(o){var c=Wd;return Wd+=1,ou===null&&(ou=[]),ST(ou,o,c)}function Vd(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Og(o,c){throw c.$$typeof===m?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function ET(o){function c(pe,de){if(o){var ve=pe.deletions;ve===null?(pe.deletions=[de],pe.flags|=16):ve.push(de)}}function g(pe,de){if(!o)return null;for(;de!==null;)c(pe,de),de=de.sibling;return null}function y(pe){for(var de=new Map;pe!==null;)pe.key!==null?de.set(pe.key,pe):de.set(pe.index,pe),pe=pe.sibling;return de}function w(pe,de){return pe=io(pe,de),pe.index=0,pe.sibling=null,pe}function S(pe,de,ve){return pe.index=ve,o?(ve=pe.alternate,ve!==null?(ve=ve.index,ve<de?(pe.flags|=67108866,de):ve):(pe.flags|=67108866,de)):(pe.flags|=1048576,de)}function P(pe){return o&&pe.alternate===null&&(pe.flags|=67108866),pe}function V(pe,de,ve,De){return de===null||de.tag!==6?(de=Oy(ve,pe.mode,De),de.return=pe,de):(de=w(de,ve),de.return=pe,de)}function oe(pe,de,ve,De){var Pt=ve.type;return Pt===v?Re(pe,de,ve.props.children,De,ve.key):de!==null&&(de.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===$&&Vl(Pt)===de.type)?(de=w(de,ve.props),Vd(de,ve),de.return=pe,de):(de=Ag(ve.type,ve.key,ve.props,null,pe.mode,De),Vd(de,ve),de.return=pe,de)}function we(pe,de,ve,De){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=jy(ve,pe.mode,De),de.return=pe,de):(de=w(de,ve.children||[]),de.return=pe,de)}function Re(pe,de,ve,De,Pt){return de===null||de.tag!==7?(de=$l(ve,pe.mode,De,Pt),de.return=pe,de):(de=w(de,ve),de.return=pe,de)}function je(pe,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=Oy(""+de,pe.mode,ve),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return ve=Ag(de.type,de.key,de.props,null,pe.mode,ve),Vd(ve,de),ve.return=pe,ve;case x:return de=jy(de,pe.mode,ve),de.return=pe,de;case $:return de=Vl(de),je(pe,de,ve)}if(U(de)||X(de))return de=$l(de,pe.mode,ve,null),de.return=pe,de;if(typeof de.then=="function")return je(pe,Mg(de),ve);if(de.$$typeof===A)return je(pe,Pg(pe,de),ve);Og(pe,de)}return null}function Te(pe,de,ve,De){var Pt=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Pt!==null?null:V(pe,de,""+ve,De);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return ve.key===Pt?oe(pe,de,ve,De):null;case x:return ve.key===Pt?we(pe,de,ve,De):null;case $:return ve=Vl(ve),Te(pe,de,ve,De)}if(U(ve)||X(ve))return Pt!==null?null:Re(pe,de,ve,De,null);if(typeof ve.then=="function")return Te(pe,de,Mg(ve),De);if(ve.$$typeof===A)return Te(pe,de,Pg(pe,ve),De);Og(pe,ve)}return null}function Ae(pe,de,ve,De,Pt){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return pe=pe.get(ve)||null,V(de,pe,""+De,Pt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case b:return pe=pe.get(De.key===null?ve:De.key)||null,oe(de,pe,De,Pt);case x:return pe=pe.get(De.key===null?ve:De.key)||null,we(de,pe,De,Pt);case $:return De=Vl(De),Ae(pe,de,ve,De,Pt)}if(U(De)||X(De))return pe=pe.get(ve)||null,Re(de,pe,De,Pt,null);if(typeof De.then=="function")return Ae(pe,de,ve,Mg(De),Pt);if(De.$$typeof===A)return Ae(pe,de,ve,Pg(de,De),Pt);Og(de,De)}return null}function pt(pe,de,ve,De){for(var Pt=null,Pr=null,Tt=de,Zt=de=0,yr=null;Tt!==null&&Zt<ve.length;Zt++){Tt.index>Zt?(yr=Tt,Tt=null):yr=Tt.sibling;var Rr=Te(pe,Tt,ve[Zt],De);if(Rr===null){Tt===null&&(Tt=yr);break}o&&Tt&&Rr.alternate===null&&c(pe,Tt),de=S(Rr,de,Zt),Pr===null?Pt=Rr:Pr.sibling=Rr,Pr=Rr,Tt=yr}if(Zt===ve.length)return g(pe,Tt),vr&&so(pe,Zt),Pt;if(Tt===null){for(;Zt<ve.length;Zt++)Tt=je(pe,ve[Zt],De),Tt!==null&&(de=S(Tt,de,Zt),Pr===null?Pt=Tt:Pr.sibling=Tt,Pr=Tt);return vr&&so(pe,Zt),Pt}for(Tt=y(Tt);Zt<ve.length;Zt++)yr=Ae(Tt,pe,Zt,ve[Zt],De),yr!==null&&(o&&yr.alternate!==null&&Tt.delete(yr.key===null?Zt:yr.key),de=S(yr,de,Zt),Pr===null?Pt=yr:Pr.sibling=yr,Pr=yr);return o&&Tt.forEach(function(dl){return c(pe,dl)}),vr&&so(pe,Zt),Pt}function jt(pe,de,ve,De){if(ve==null)throw Error(n(151));for(var Pt=null,Pr=null,Tt=de,Zt=de=0,yr=null,Rr=ve.next();Tt!==null&&!Rr.done;Zt++,Rr=ve.next()){Tt.index>Zt?(yr=Tt,Tt=null):yr=Tt.sibling;var dl=Te(pe,Tt,Rr.value,De);if(dl===null){Tt===null&&(Tt=yr);break}o&&Tt&&dl.alternate===null&&c(pe,Tt),de=S(dl,de,Zt),Pr===null?Pt=dl:Pr.sibling=dl,Pr=dl,Tt=yr}if(Rr.done)return g(pe,Tt),vr&&so(pe,Zt),Pt;if(Tt===null){for(;!Rr.done;Zt++,Rr=ve.next())Rr=je(pe,Rr.value,De),Rr!==null&&(de=S(Rr,de,Zt),Pr===null?Pt=Rr:Pr.sibling=Rr,Pr=Rr);return vr&&so(pe,Zt),Pt}for(Tt=y(Tt);!Rr.done;Zt++,Rr=ve.next())Rr=Ae(Tt,pe,Zt,Rr.value,De),Rr!==null&&(o&&Rr.alternate!==null&&Tt.delete(Rr.key===null?Zt:Rr.key),de=S(Rr,de,Zt),Pr===null?Pt=Rr:Pr.sibling=Rr,Pr=Rr);return o&&Tt.forEach(function(Rj){return c(pe,Rj)}),vr&&so(pe,Zt),Pt}function Vr(pe,de,ve,De){if(typeof ve=="object"&&ve!==null&&ve.type===v&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:e:{for(var Pt=ve.key;de!==null;){if(de.key===Pt){if(Pt=ve.type,Pt===v){if(de.tag===7){g(pe,de.sibling),De=w(de,ve.props.children),De.return=pe,pe=De;break e}}else if(de.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===$&&Vl(Pt)===de.type){g(pe,de.sibling),De=w(de,ve.props),Vd(De,ve),De.return=pe,pe=De;break e}g(pe,de);break}else c(pe,de);de=de.sibling}ve.type===v?(De=$l(ve.props.children,pe.mode,De,ve.key),De.return=pe,pe=De):(De=Ag(ve.type,ve.key,ve.props,null,pe.mode,De),Vd(De,ve),De.return=pe,pe=De)}return P(pe);case x:e:{for(Pt=ve.key;de!==null;){if(de.key===Pt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){g(pe,de.sibling),De=w(de,ve.children||[]),De.return=pe,pe=De;break e}else{g(pe,de);break}else c(pe,de);de=de.sibling}De=jy(ve,pe.mode,De),De.return=pe,pe=De}return P(pe);case $:return ve=Vl(ve),Vr(pe,de,ve,De)}if(U(ve))return pt(pe,de,ve,De);if(X(ve)){if(Pt=X(ve),typeof Pt!="function")throw Error(n(150));return ve=Pt.call(ve),jt(pe,de,ve,De)}if(typeof ve.then=="function")return Vr(pe,de,Mg(ve),De);if(ve.$$typeof===A)return Vr(pe,de,Pg(pe,ve),De);Og(pe,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,de!==null&&de.tag===6?(g(pe,de.sibling),De=w(de,ve),De.return=pe,pe=De):(g(pe,de),De=Oy(ve,pe.mode,De),De.return=pe,pe=De),P(pe)):g(pe,de)}return function(pe,de,ve,De){try{Wd=0;var Pt=Vr(pe,de,ve,De);return ou=null,Pt}catch(Tt){if(Tt===su||Tt===Ig)throw Tt;var Pr=xi(29,Tt,null,pe.mode);return Pr.lanes=De,Pr.return=pe,Pr}finally{}}}var Ql=ET(!0),CT=ET(!1),Yo=!1;function Qy(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ky(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Qo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ko(o,c,g){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Dr&2)!==0){var w=y.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),y.pending=c,c=_g(o),cT(o,null,g),c}return Cg(o,y,c,g),_g(o)}function Yd(o,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,g|=y,c.lanes=g,Nt(o,g)}}function Xy(o,c){var g=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,g===y)){var w=null,S=null;if(g=g.firstBaseUpdate,g!==null){do{var P={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};S===null?w=S=P:S=S.next=P,g=g.next}while(g!==null);S===null?w=S=c:S=S.next=c}else w=S=c;g={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:y.shared,callbacks:y.callbacks},o.updateQueue=g;return}o=g.lastBaseUpdate,o===null?g.firstBaseUpdate=c:o.next=c,g.lastBaseUpdate=c}var Jy=!1;function Qd(){if(Jy){var o=iu;if(o!==null)throw o}}function Kd(o,c,g,y){Jy=!1;var w=o.updateQueue;Yo=!1;var S=w.firstBaseUpdate,P=w.lastBaseUpdate,V=w.shared.pending;if(V!==null){w.shared.pending=null;var oe=V,we=oe.next;oe.next=null,P===null?S=we:P.next=we,P=oe;var Re=o.alternate;Re!==null&&(Re=Re.updateQueue,V=Re.lastBaseUpdate,V!==P&&(V===null?Re.firstBaseUpdate=we:V.next=we,Re.lastBaseUpdate=oe))}if(S!==null){var je=w.baseState;P=0,Re=we=oe=null,V=S;do{var Te=V.lane&-536870913,Ae=Te!==V.lane;if(Ae?(mr&Te)===Te:(y&Te)===Te){Te!==0&&Te===au&&(Jy=!0),Re!==null&&(Re=Re.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var pt=o,jt=V;Te=c;var Vr=g;switch(jt.tag){case 1:if(pt=jt.payload,typeof pt=="function"){je=pt.call(Vr,je,Te);break e}je=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=jt.payload,Te=typeof pt=="function"?pt.call(Vr,je,Te):pt,Te==null)break e;je=f({},je,Te);break e;case 2:Yo=!0}}Te=V.callback,Te!==null&&(o.flags|=64,Ae&&(o.flags|=8192),Ae=w.callbacks,Ae===null?w.callbacks=[Te]:Ae.push(Te))}else Ae={lane:Te,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Re===null?(we=Re=Ae,oe=je):Re=Re.next=Ae,P|=Te;if(V=V.next,V===null){if(V=w.shared.pending,V===null)break;Ae=V,V=Ae.next,Ae.next=null,w.lastBaseUpdate=Ae,w.shared.pending=null}}while(!0);Re===null&&(oe=je),w.baseState=oe,w.firstBaseUpdate=we,w.lastBaseUpdate=Re,S===null&&(w.shared.lanes=0),tl|=P,o.lanes=P,o.memoizedState=je}}function _T(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function AT(o,c){var g=o.callbacks;if(g!==null)for(o.callbacks=null,o=0;o<g.length;o++)_T(g[o],c)}var lu=F(null),jg=F(0);function NT(o,c){o=bo,I(jg,o),I(lu,c),bo=o|c.baseLanes}function Zy(){I(jg,bo),I(lu,lu.current)}function eb(){bo=jg.current,H(lu),H(jg)}var vi=F(null),qi=null;function Xo(o){var c=o.alternate;I(Pn,Pn.current&1),I(vi,o),qi===null&&(c===null||lu.current!==null||c.memoizedState!==null)&&(qi=o)}function tb(o){I(Pn,Pn.current),I(vi,o),qi===null&&(qi=o)}function LT(o){o.tag===22?(I(Pn,Pn.current),I(vi,o),qi===null&&(qi=o)):Jo()}function Jo(){I(Pn,Pn.current),I(vi,vi.current)}function wi(o){H(vi),qi===o&&(qi=null),H(Pn)}var Pn=F(0);function Bg(o){for(var c=o;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||ox(g)||lx(g)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var co=0,Kt=null,Gr=null,jn=null,Fg=!1,cu=!1,Kl=!1,zg=0,Xd=0,uu=null,S5=0;function En(){throw Error(n(321))}function rb(o,c){if(c===null)return!1;for(var g=0;g<c.length&&g<o.length;g++)if(!Ta(o[g],c[g]))return!1;return!0}function nb(o,c,g,y,w,S){return co=S,Kt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,j.H=o===null||o.memoizedState===null?pk:bb,Kl=!1,S=g(y,w),Kl=!1,cu&&(S=RT(c,g,y,w)),PT(o),S}function PT(o){j.H=eh;var c=Gr!==null&&Gr.next!==null;if(co=0,jn=Gr=Kt=null,Fg=!1,Xd=0,uu=null,c)throw Error(n(300));o===null||Bn||(o=o.dependencies,o!==null&&Lg(o)&&(Bn=!0))}function RT(o,c,g,y){Kt=o;var w=0;do{if(cu&&(uu=null),Xd=0,cu=!1,25<=w)throw Error(n(301));if(w+=1,jn=Gr=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}j.H=gk,S=c(g,y)}while(cu);return S}function T5(){var o=j.H,c=o.useState()[0];return c=typeof c.then=="function"?Jd(c):c,o=o.useState()[0],(Gr!==null?Gr.memoizedState:null)!==o&&(Kt.flags|=1024),c}function ab(){var o=zg!==0;return zg=0,o}function ib(o,c,g){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~g}function sb(o){if(Fg){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Fg=!1}co=0,jn=Gr=Kt=null,cu=!1,Xd=zg=0,uu=null}function Fa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?Kt.memoizedState=jn=o:jn=jn.next=o,jn}function Rn(){if(Gr===null){var o=Kt.alternate;o=o!==null?o.memoizedState:null}else o=Gr.next;var c=jn===null?Kt.memoizedState:jn.next;if(c!==null)jn=c,Gr=o;else{if(o===null)throw Kt.alternate===null?Error(n(467)):Error(n(310));Gr=o,o={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},jn===null?Kt.memoizedState=jn=o:jn=jn.next=o}return jn}function Ug(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jd(o){var c=Xd;return Xd+=1,uu===null&&(uu=[]),o=ST(uu,o,c),c=Kt,(jn===null?c.memoizedState:jn.next)===null&&(c=c.alternate,j.H=c===null||c.memoizedState===null?pk:bb),o}function $g(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Jd(o);if(o.$$typeof===A)return da(o)}throw Error(n(438,String(o)))}function ob(o){var c=null,g=Kt.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var y=Kt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Ug(),Kt.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(o),y=0;y<o;y++)g[y]=O;return c.index++,g}function uo(o,c){return typeof c=="function"?c(o):c}function qg(o){var c=Rn();return lb(c,Gr,o)}function lb(o,c,g){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=g;var w=o.baseQueue,S=y.pending;if(S!==null){if(w!==null){var P=w.next;w.next=S.next,S.next=P}c.baseQueue=w=S,y.pending=null}if(S=o.baseState,w===null)o.memoizedState=S;else{c=w.next;var V=P=null,oe=null,we=c,Re=!1;do{var je=we.lane&-536870913;if(je!==we.lane?(mr&je)===je:(co&je)===je){var Te=we.revertLane;if(Te===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),je===au&&(Re=!0);else if((co&Te)===Te){we=we.next,Te===au&&(Re=!0);continue}else je={lane:0,revertLane:we.revertLane,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(V=oe=je,P=S):oe=oe.next=je,Kt.lanes|=Te,tl|=Te;je=we.action,Kl&&g(S,je),S=we.hasEagerState?we.eagerState:g(S,je)}else Te={lane:je,revertLane:we.revertLane,gesture:we.gesture,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},oe===null?(V=oe=Te,P=S):oe=oe.next=Te,Kt.lanes|=je,tl|=je;we=we.next}while(we!==null&&we!==c);if(oe===null?P=S:oe.next=V,!Ta(S,o.memoizedState)&&(Bn=!0,Re&&(g=iu,g!==null)))throw g;o.memoizedState=S,o.baseState=P,o.baseQueue=oe,y.lastRenderedState=S}return w===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function cb(o){var c=Rn(),g=c.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=o;var y=g.dispatch,w=g.pending,S=c.memoizedState;if(w!==null){g.pending=null;var P=w=w.next;do S=o(S,P.action),P=P.next;while(P!==w);Ta(S,c.memoizedState)||(Bn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),g.lastRenderedState=S}return[S,y]}function IT(o,c,g){var y=Kt,w=Rn(),S=vr;if(S){if(g===void 0)throw Error(n(407));g=g()}else g=c();var P=!Ta((Gr||w).memoizedState,g);if(P&&(w.memoizedState=g,Bn=!0),w=w.queue,hb(OT.bind(null,y,w,o),[o]),w.getSnapshot!==c||P||jn!==null&&jn.memoizedState.tag&1){if(y.flags|=2048,du(9,{destroy:void 0},MT.bind(null,y,w,g,c),null),Zr===null)throw Error(n(349));S||(co&127)!==0||DT(y,c,g)}return g}function DT(o,c,g){o.flags|=16384,o={getSnapshot:c,value:g},c=Kt.updateQueue,c===null?(c=Ug(),Kt.updateQueue=c,c.stores=[o]):(g=c.stores,g===null?c.stores=[o]:g.push(o))}function MT(o,c,g,y){c.value=g,c.getSnapshot=y,jT(c)&&BT(o)}function OT(o,c,g){return g(function(){jT(c)&&BT(o)})}function jT(o){var c=o.getSnapshot;o=o.value;try{var g=c();return!Ta(o,g)}catch{return!0}}function BT(o){var c=Ul(o,2);c!==null&&ti(c,o,2)}function ub(o){var c=Fa();if(typeof o=="function"){var g=o;if(o=g(),Kl){Mr(!0);try{g()}finally{Mr(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:o},c}function FT(o,c,g,y){return o.baseState=g,lb(o,Gr,typeof y=="function"?y:uo)}function k5(o,c,g,y,w){if(Wg(o))throw Error(n(485));if(o=c.action,o!==null){var S={payload:w,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){S.listeners.push(P)}};j.T!==null?g(!0):S.isTransition=!1,y(S),g=c.pending,g===null?(S.next=c.pending=S,zT(c,S)):(S.next=g.next,c.pending=g.next=S)}}function zT(o,c){var g=c.action,y=c.payload,w=o.state;if(c.isTransition){var S=j.T,P={};j.T=P;try{var V=g(w,y),oe=j.S;oe!==null&&oe(P,V),UT(o,c,V)}catch(we){db(o,c,we)}finally{S!==null&&P.types!==null&&(S.types=P.types),j.T=S}}else try{S=g(w,y),UT(o,c,S)}catch(we){db(o,c,we)}}function UT(o,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(y){$T(o,c,y)},function(y){return db(o,c,y)}):$T(o,c,g)}function $T(o,c,g){c.status="fulfilled",c.value=g,qT(c),o.state=g,c=o.pending,c!==null&&(g=c.next,g===c?o.pending=null:(g=g.next,c.next=g,zT(o,g)))}function db(o,c,g){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=g,qT(c),c=c.next;while(c!==y)}o.action=null}function qT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function HT(o,c){return c}function GT(o,c){if(vr){var g=Zr.formState;if(g!==null){e:{var y=Kt;if(vr){if(on){t:{for(var w=on,S=$i;w.nodeType!==8;){if(!S){w=null;break t}if(w=Hi(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){on=Hi(w.nextSibling),y=w.data==="F!";break e}}Wo(y)}y=!1}y&&(c=g[0])}}return g=Fa(),g.memoizedState=g.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HT,lastRenderedState:c},g.queue=y,g=uk.bind(null,Kt,y),y.dispatch=g,y=ub(!1),S=yb.bind(null,Kt,!1,y.queue),y=Fa(),w={state:c,dispatch:null,action:o,pending:null},y.queue=w,g=k5.bind(null,Kt,w,S,g),w.dispatch=g,y.memoizedState=o,[c,g,!1]}function WT(o){var c=Rn();return VT(c,Gr,o)}function VT(o,c,g){if(c=lb(o,c,HT)[0],o=qg(uo)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=Jd(c)}catch(P){throw P===su?Ig:P}else y=c;c=Rn();var w=c.queue,S=w.dispatch;return g!==c.memoizedState&&(Kt.flags|=2048,du(9,{destroy:void 0},E5.bind(null,w,g),null)),[y,S,o]}function E5(o,c){o.action=c}function YT(o){var c=Rn(),g=Gr;if(g!==null)return VT(c,g,o);Rn(),c=c.memoizedState,g=Rn();var y=g.queue.dispatch;return g.memoizedState=o,[c,y,!1]}function du(o,c,g,y){return o={tag:o,create:g,deps:y,inst:c,next:null},c=Kt.updateQueue,c===null&&(c=Ug(),Kt.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=o.next=o:(y=g.next,g.next=o,o.next=y,c.lastEffect=o),o}function QT(){return Rn().memoizedState}function Hg(o,c,g,y){var w=Fa();Kt.flags|=o,w.memoizedState=du(1|c,{destroy:void 0},g,y===void 0?null:y)}function Gg(o,c,g,y){var w=Rn();y=y===void 0?null:y;var S=w.memoizedState.inst;Gr!==null&&y!==null&&rb(y,Gr.memoizedState.deps)?w.memoizedState=du(c,S,g,y):(Kt.flags|=o,w.memoizedState=du(1|c,S,g,y))}function KT(o,c){Hg(8390656,8,o,c)}function hb(o,c){Gg(2048,8,o,c)}function C5(o){Kt.flags|=4;var c=Kt.updateQueue;if(c===null)c=Ug(),Kt.updateQueue=c,c.events=[o];else{var g=c.events;g===null?c.events=[o]:g.push(o)}}function XT(o){var c=Rn().memoizedState;return C5({ref:c,nextImpl:o}),function(){if((Dr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}function JT(o,c){return Gg(4,2,o,c)}function ZT(o,c){return Gg(4,4,o,c)}function ek(o,c){if(typeof c=="function"){o=o();var g=c(o);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function tk(o,c,g){g=g!=null?g.concat([o]):null,Gg(4,4,ek.bind(null,c,o),g)}function pb(){}function rk(o,c){var g=Rn();c=c===void 0?null:c;var y=g.memoizedState;return c!==null&&rb(c,y[1])?y[0]:(g.memoizedState=[o,c],o)}function nk(o,c){var g=Rn();c=c===void 0?null:c;var y=g.memoizedState;if(c!==null&&rb(c,y[1]))return y[0];if(y=o(),Kl){Mr(!0);try{o()}finally{Mr(!1)}}return g.memoizedState=[y,c],y}function gb(o,c,g){return g===void 0||(co&1073741824)!==0&&(mr&261930)===0?o.memoizedState=c:(o.memoizedState=g,o=aE(),Kt.lanes|=o,tl|=o,g)}function ak(o,c,g,y){return Ta(g,c)?g:lu.current!==null?(o=gb(o,g,y),Ta(o,c)||(Bn=!0),o):(co&42)===0||(co&1073741824)!==0&&(mr&261930)===0?(Bn=!0,o.memoizedState=g):(o=aE(),Kt.lanes|=o,tl|=o,c)}function ik(o,c,g,y,w){var S=K.p;K.p=S!==0&&8>S?S:8;var P=j.T,V={};j.T=V,yb(o,!1,c,g);try{var oe=w(),we=j.S;if(we!==null&&we(V,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Re=w5(oe,y);Zd(o,c,Re,ki(o))}else Zd(o,c,y,ki(o))}catch(je){Zd(o,c,{then:function(){},status:"rejected",reason:je},ki())}finally{K.p=S,P!==null&&V.types!==null&&(P.types=V.types),j.T=P}}function _5(){}function fb(o,c,g,y){if(o.tag!==5)throw Error(n(476));var w=sk(o).queue;ik(o,w,c,Q,g===null?_5:function(){return ok(o),g(y)})}function sk(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:Q},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:g},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function ok(o){var c=sk(o);c.next===null&&(c=o.alternate.memoizedState),Zd(o,c.next.queue,{},ki())}function mb(){return da(mh)}function lk(){return Rn().memoizedState}function ck(){return Rn().memoizedState}function A5(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var g=ki();o=Qo(g);var y=Ko(c,o,g);y!==null&&(ti(y,c,g),Yd(y,c,g)),c={cache:Gy()},o.payload=c;return}c=c.return}}function N5(o,c,g){var y=ki();g={lane:y,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Wg(o)?dk(c,g):(g=Dy(o,c,g,y),g!==null&&(ti(g,o,y),hk(g,c,y)))}function uk(o,c,g){var y=ki();Zd(o,c,g,y)}function Zd(o,c,g,y){var w={lane:y,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Wg(o))dk(c,w);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var P=c.lastRenderedState,V=S(P,g);if(w.hasEagerState=!0,w.eagerState=V,Ta(V,P))return Cg(o,c,w,0),Zr===null&&Eg(),!1}catch{}finally{}if(g=Dy(o,c,w,y),g!==null)return ti(g,o,y),hk(g,c,y),!0}return!1}function yb(o,c,g,y){if(y={lane:2,revertLane:Qb(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Wg(o)){if(c)throw Error(n(479))}else c=Dy(o,g,y,2),c!==null&&ti(c,o,2)}function Wg(o){var c=o.alternate;return o===Kt||c!==null&&c===Kt}function dk(o,c){cu=Fg=!0;var g=o.pending;g===null?c.next=c:(c.next=g.next,g.next=c),o.pending=c}function hk(o,c,g){if((g&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,g|=y,c.lanes=g,Nt(o,g)}}var eh={readContext:da,use:$g,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En};eh.useEffectEvent=En;var pk={readContext:da,use:$g,useCallback:function(o,c){return Fa().memoizedState=[o,c===void 0?null:c],o},useContext:da,useEffect:KT,useImperativeHandle:function(o,c,g){g=g!=null?g.concat([o]):null,Hg(4194308,4,ek.bind(null,c,o),g)},useLayoutEffect:function(o,c){return Hg(4194308,4,o,c)},useInsertionEffect:function(o,c){Hg(4,2,o,c)},useMemo:function(o,c){var g=Fa();c=c===void 0?null:c;var y=o();if(Kl){Mr(!0);try{o()}finally{Mr(!1)}}return g.memoizedState=[y,c],y},useReducer:function(o,c,g){var y=Fa();if(g!==void 0){var w=g(c);if(Kl){Mr(!0);try{g(c)}finally{Mr(!1)}}}else w=c;return y.memoizedState=y.baseState=w,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:w},y.queue=o,o=o.dispatch=N5.bind(null,Kt,o),[y.memoizedState,o]},useRef:function(o){var c=Fa();return o={current:o},c.memoizedState=o},useState:function(o){o=ub(o);var c=o.queue,g=uk.bind(null,Kt,c);return c.dispatch=g,[o.memoizedState,g]},useDebugValue:pb,useDeferredValue:function(o,c){var g=Fa();return gb(g,o,c)},useTransition:function(){var o=ub(!1);return o=ik.bind(null,Kt,o.queue,!0,!1),Fa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,g){var y=Kt,w=Fa();if(vr){if(g===void 0)throw Error(n(407));g=g()}else{if(g=c(),Zr===null)throw Error(n(349));(mr&127)!==0||DT(y,c,g)}w.memoizedState=g;var S={value:g,getSnapshot:c};return w.queue=S,KT(OT.bind(null,y,S,o),[o]),y.flags|=2048,du(9,{destroy:void 0},MT.bind(null,y,S,g,c),null),g},useId:function(){var o=Fa(),c=Zr.identifierPrefix;if(vr){var g=Ps,y=Ls;g=(y&~(1<<32-ar(y)-1)).toString(32)+g,c="_"+c+"R_"+g,g=zg++,0<g&&(c+="H"+g.toString(32)),c+="_"}else g=S5++,c="_"+c+"r_"+g.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:mb,useFormState:GT,useActionState:GT,useOptimistic:function(o){var c=Fa();c.memoizedState=c.baseState=o;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=yb.bind(null,Kt,!0,g),g.dispatch=c,[o,c]},useMemoCache:ob,useCacheRefresh:function(){return Fa().memoizedState=A5.bind(null,Kt)},useEffectEvent:function(o){var c=Fa(),g={impl:o};return c.memoizedState=g,function(){if((Dr&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}},bb={readContext:da,use:$g,useCallback:rk,useContext:da,useEffect:hb,useImperativeHandle:tk,useInsertionEffect:JT,useLayoutEffect:ZT,useMemo:nk,useReducer:qg,useRef:QT,useState:function(){return qg(uo)},useDebugValue:pb,useDeferredValue:function(o,c){var g=Rn();return ak(g,Gr.memoizedState,o,c)},useTransition:function(){var o=qg(uo)[0],c=Rn().memoizedState;return[typeof o=="boolean"?o:Jd(o),c]},useSyncExternalStore:IT,useId:lk,useHostTransitionStatus:mb,useFormState:WT,useActionState:WT,useOptimistic:function(o,c){var g=Rn();return FT(g,Gr,o,c)},useMemoCache:ob,useCacheRefresh:ck};bb.useEffectEvent=XT;var gk={readContext:da,use:$g,useCallback:rk,useContext:da,useEffect:hb,useImperativeHandle:tk,useInsertionEffect:JT,useLayoutEffect:ZT,useMemo:nk,useReducer:cb,useRef:QT,useState:function(){return cb(uo)},useDebugValue:pb,useDeferredValue:function(o,c){var g=Rn();return Gr===null?gb(g,o,c):ak(g,Gr.memoizedState,o,c)},useTransition:function(){var o=cb(uo)[0],c=Rn().memoizedState;return[typeof o=="boolean"?o:Jd(o),c]},useSyncExternalStore:IT,useId:lk,useHostTransitionStatus:mb,useFormState:YT,useActionState:YT,useOptimistic:function(o,c){var g=Rn();return Gr!==null?FT(g,Gr,o,c):(g.baseState=o,[o,g.queue.dispatch])},useMemoCache:ob,useCacheRefresh:ck};gk.useEffectEvent=XT;function xb(o,c,g,y){c=o.memoizedState,g=g(y,c),g=g==null?c:f({},c,g),o.memoizedState=g,o.lanes===0&&(o.updateQueue.baseState=g)}var vb={enqueueSetState:function(o,c,g){o=o._reactInternals;var y=ki(),w=Qo(y);w.payload=c,g!=null&&(w.callback=g),c=Ko(o,w,y),c!==null&&(ti(c,o,y),Yd(c,o,y))},enqueueReplaceState:function(o,c,g){o=o._reactInternals;var y=ki(),w=Qo(y);w.tag=1,w.payload=c,g!=null&&(w.callback=g),c=Ko(o,w,y),c!==null&&(ti(c,o,y),Yd(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var g=ki(),y=Qo(g);y.tag=2,c!=null&&(y.callback=c),c=Ko(o,y,g),c!==null&&(ti(c,o,g),Yd(c,o,g))}};function fk(o,c,g,y,w,S,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,S,P):c.prototype&&c.prototype.isPureReactComponent?!qo(g,y)||!qo(w,S):!0}function mk(o,c,g,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,y),c.state!==o&&vb.enqueueReplaceState(c,c.state,null)}function Xl(o,c){var g=c;if("ref"in c){g={};for(var y in c)y!=="ref"&&(g[y]=c[y])}if(o=o.defaultProps){g===c&&(g=f({},g));for(var w in o)g[w]===void 0&&(g[w]=o[w])}return g}function yk(o){kg(o)}function bk(o){console.error(o)}function xk(o){kg(o)}function Vg(o,c){try{var g=o.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function vk(o,c,g){try{var y=o.onCaughtError;y(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function wb(o,c,g){return g=Qo(g),g.tag=3,g.payload={element:null},g.callback=function(){Vg(o,c)},g}function wk(o){return o=Qo(o),o.tag=3,o}function Sk(o,c,g,y){var w=g.type.getDerivedStateFromError;if(typeof w=="function"){var S=y.value;o.payload=function(){return w(S)},o.callback=function(){vk(c,g,y)}}var P=g.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(o.callback=function(){vk(c,g,y),typeof w!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var V=y.stack;this.componentDidCatch(y.value,{componentStack:V!==null?V:""})})}function L5(o,c,g,y,w){if(g.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=g.alternate,c!==null&&nu(c,g,w,!0),g=vi.current,g!==null){switch(g.tag){case 31:case 13:return qi===null?sf():g.alternate===null&&Cn===0&&(Cn=3),g.flags&=-257,g.flags|=65536,g.lanes=w,y===Dg?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([y]):c.add(y),Wb(o,y,w)),!1;case 22:return g.flags|=65536,y===Dg?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([y]):g.add(y)),Wb(o,y,w)),!1}throw Error(n(435,g.tag))}return Wb(o,y,w),sf(),!1}if(vr)return c=vi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,y!==zy&&(o=Error(n(422),{cause:y}),qd(Fi(o,g)))):(y!==zy&&(c=Error(n(423),{cause:y}),qd(Fi(c,g))),o=o.current.alternate,o.flags|=65536,w&=-w,o.lanes|=w,y=Fi(y,g),w=wb(o.stateNode,y,w),Xy(o,w),Cn!==4&&(Cn=2)),!1;var S=Error(n(520),{cause:y});if(S=Fi(S,g),lh===null?lh=[S]:lh.push(S),Cn!==4&&(Cn=2),c===null)return!0;y=Fi(y,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,o=w&-w,g.lanes|=o,o=wb(g.stateNode,y,o),Xy(g,o),!1;case 1:if(c=g.type,S=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(rl===null||!rl.has(S))))return g.flags|=65536,w&=-w,g.lanes|=w,w=wk(w),Sk(w,o,g,y),Xy(g,w),!1}g=g.return}while(g!==null);return!1}var Sb=Error(n(461)),Bn=!1;function ha(o,c,g,y){c.child=o===null?CT(c,null,g,y):Ql(c,o.child,g,y)}function Tk(o,c,g,y,w){g=g.render;var S=c.ref;if("ref"in y){var P={};for(var V in y)V!=="ref"&&(P[V]=y[V])}else P=y;return Gl(c),y=nb(o,c,g,P,S,w),V=ab(),o!==null&&!Bn?(ib(o,c,w),ho(o,c,w)):(vr&&V&&By(c),c.flags|=1,ha(o,c,y,w),c.child)}function kk(o,c,g,y,w){if(o===null){var S=g.type;return typeof S=="function"&&!My(S)&&S.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=S,Ek(o,c,S,y,w)):(o=Ag(g.type,null,y,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,!Lb(o,w)){var P=S.memoizedProps;if(g=g.compare,g=g!==null?g:qo,g(P,y)&&o.ref===c.ref)return ho(o,c,w)}return c.flags|=1,o=io(S,y),o.ref=c.ref,o.return=c,c.child=o}function Ek(o,c,g,y,w){if(o!==null){var S=o.memoizedProps;if(qo(S,y)&&o.ref===c.ref)if(Bn=!1,c.pendingProps=y=S,Lb(o,w))(o.flags&131072)!==0&&(Bn=!0);else return c.lanes=o.lanes,ho(o,c,w)}return Tb(o,c,g,y,w)}function Ck(o,c,g,y){var w=y.children,S=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|g:g,o!==null){for(y=c.child=o.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;y=w&~S}else y=0,c.child=null;return _k(o,c,S,g,y)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Rg(c,S!==null?S.cachePool:null),S!==null?NT(c,S):Zy(),LT(c);else return y=c.lanes=536870912,_k(o,c,S!==null?S.baseLanes|g:g,g,y)}else S!==null?(Rg(c,S.cachePool),NT(c,S),Jo(),c.memoizedState=null):(o!==null&&Rg(c,null),Zy(),Jo());return ha(o,c,w,g),c.child}function th(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function _k(o,c,g,y,w){var S=Vy();return S=S===null?null:{parent:On._currentValue,pool:S},c.memoizedState={baseLanes:g,cachePool:S},o!==null&&Rg(c,null),Zy(),LT(c),o!==null&&nu(o,c,y,!0),c.childLanes=w,null}function Yg(o,c){return c=Kg({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function Ak(o,c,g){return Ql(c,o.child,null,g),o=Yg(c,c.pendingProps),o.flags|=2,wi(c),c.memoizedState=null,o}function P5(o,c,g){var y=c.pendingProps,w=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(vr){if(y.mode==="hidden")return o=Yg(c,y),c.lanes=536870912,th(null,o);if(tb(c),(o=on)?(o=zE(o,$i),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Ho!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},g=dT(o),g.return=c,c.child=g,ua=c,on=null)):o=null,o===null)throw Wo(c);return c.lanes=536870912,null}return Yg(c,y)}var S=o.memoizedState;if(S!==null){var P=S.dehydrated;if(tb(c),w)if(c.flags&256)c.flags&=-257,c=Ak(o,c,g);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(n(558));else if(Bn||nu(o,c,g,!1),w=(g&o.childLanes)!==0,Bn||w){if(y=Zr,y!==null&&(P=Hr(y,g),P!==0&&P!==S.retryLane))throw S.retryLane=P,Ul(o,P),ti(y,o,P),Sb;sf(),c=Ak(o,c,g)}else o=S.treeContext,on=Hi(P.nextSibling),ua=c,vr=!0,Go=null,$i=!1,o!==null&&gT(c,o),c=Yg(c,y),c.flags|=4096;return c}return o=io(o.child,{mode:y.mode,children:y.children}),o.ref=c.ref,c.child=o,o.return=c,o}function Qg(o,c){var g=c.ref;if(g===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(o===null||o.ref!==g)&&(c.flags|=4194816)}}function Tb(o,c,g,y,w){return Gl(c),g=nb(o,c,g,y,void 0,w),y=ab(),o!==null&&!Bn?(ib(o,c,w),ho(o,c,w)):(vr&&y&&By(c),c.flags|=1,ha(o,c,g,w),c.child)}function Nk(o,c,g,y,w,S){return Gl(c),c.updateQueue=null,g=RT(c,y,g,w),PT(o),y=ab(),o!==null&&!Bn?(ib(o,c,S),ho(o,c,S)):(vr&&y&&By(c),c.flags|=1,ha(o,c,g,S),c.child)}function Lk(o,c,g,y,w){if(Gl(c),c.stateNode===null){var S=Zc,P=g.contextType;typeof P=="object"&&P!==null&&(S=da(P)),S=new g(y,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=vb,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=y,S.state=c.memoizedState,S.refs={},Qy(c),P=g.contextType,S.context=typeof P=="object"&&P!==null?da(P):Zc,S.state=c.memoizedState,P=g.getDerivedStateFromProps,typeof P=="function"&&(xb(c,g,P,y),S.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(P=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),P!==S.state&&vb.enqueueReplaceState(S,S.state,null),Kd(c,y,S,w),Qd(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){S=c.stateNode;var V=c.memoizedProps,oe=Xl(g,V);S.props=oe;var we=S.context,Re=g.contextType;P=Zc,typeof Re=="object"&&Re!==null&&(P=da(Re));var je=g.getDerivedStateFromProps;Re=typeof je=="function"||typeof S.getSnapshotBeforeUpdate=="function",V=c.pendingProps!==V,Re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(V||we!==P)&&mk(c,S,y,P),Yo=!1;var Te=c.memoizedState;S.state=Te,Kd(c,y,S,w),Qd(),we=c.memoizedState,V||Te!==we||Yo?(typeof je=="function"&&(xb(c,g,je,y),we=c.memoizedState),(oe=Yo||fk(c,g,oe,y,Te,we,P))?(Re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=we),S.props=y,S.state=we,S.context=P,y=oe):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{S=c.stateNode,Ky(o,c),P=c.memoizedProps,Re=Xl(g,P),S.props=Re,je=c.pendingProps,Te=S.context,we=g.contextType,oe=Zc,typeof we=="object"&&we!==null&&(oe=da(we)),V=g.getDerivedStateFromProps,(we=typeof V=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(P!==je||Te!==oe)&&mk(c,S,y,oe),Yo=!1,Te=c.memoizedState,S.state=Te,Kd(c,y,S,w),Qd();var Ae=c.memoizedState;P!==je||Te!==Ae||Yo||o!==null&&o.dependencies!==null&&Lg(o.dependencies)?(typeof V=="function"&&(xb(c,g,V,y),Ae=c.memoizedState),(Re=Yo||fk(c,g,Re,y,Te,Ae,oe)||o!==null&&o.dependencies!==null&&Lg(o.dependencies))?(we||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(y,Ae,oe),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(y,Ae,oe)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||P===o.memoizedProps&&Te===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&Te===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ae),S.props=y,S.state=Ae,S.context=oe,y=Re):(typeof S.componentDidUpdate!="function"||P===o.memoizedProps&&Te===o.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&Te===o.memoizedState||(c.flags|=1024),y=!1)}return S=y,Qg(o,c),y=(c.flags&128)!==0,S||y?(S=c.stateNode,g=y&&typeof g.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,o!==null&&y?(c.child=Ql(c,o.child,null,w),c.child=Ql(c,null,g,w)):ha(o,c,g,w),c.memoizedState=S.state,o=c.child):o=ho(o,c,w),o}function Pk(o,c,g,y){return ql(),c.flags|=256,ha(o,c,g,y),c.child}var kb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eb(o){return{baseLanes:o,cachePool:vT()}}function Cb(o,c,g){return o=o!==null?o.childLanes&~g:0,c&&(o|=Ti),o}function Rk(o,c,g){var y=c.pendingProps,w=!1,S=(c.flags&128)!==0,P;if((P=S)||(P=o!==null&&o.memoizedState===null?!1:(Pn.current&2)!==0),P&&(w=!0,c.flags&=-129),P=(c.flags&32)!==0,c.flags&=-33,o===null){if(vr){if(w?Xo(c):Jo(),(o=on)?(o=zE(o,$i),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Ho!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},g=dT(o),g.return=c,c.child=g,ua=c,on=null)):o=null,o===null)throw Wo(c);return lx(o)?c.lanes=32:c.lanes=536870912,null}var V=y.children;return y=y.fallback,w?(Jo(),w=c.mode,V=Kg({mode:"hidden",children:V},w),y=$l(y,w,g,null),V.return=c,y.return=c,V.sibling=y,c.child=V,y=c.child,y.memoizedState=Eb(g),y.childLanes=Cb(o,P,g),c.memoizedState=kb,th(null,y)):(Xo(c),_b(c,V))}var oe=o.memoizedState;if(oe!==null&&(V=oe.dehydrated,V!==null)){if(S)c.flags&256?(Xo(c),c.flags&=-257,c=Ab(o,c,g)):c.memoizedState!==null?(Jo(),c.child=o.child,c.flags|=128,c=null):(Jo(),V=y.fallback,w=c.mode,y=Kg({mode:"visible",children:y.children},w),V=$l(V,w,g,null),V.flags|=2,y.return=c,V.return=c,y.sibling=V,c.child=y,Ql(c,o.child,null,g),y=c.child,y.memoizedState=Eb(g),y.childLanes=Cb(o,P,g),c.memoizedState=kb,c=th(null,y));else if(Xo(c),lx(V)){if(P=V.nextSibling&&V.nextSibling.dataset,P)var we=P.dgst;P=we,y=Error(n(419)),y.stack="",y.digest=P,qd({value:y,source:null,stack:null}),c=Ab(o,c,g)}else if(Bn||nu(o,c,g,!1),P=(g&o.childLanes)!==0,Bn||P){if(P=Zr,P!==null&&(y=Hr(P,g),y!==0&&y!==oe.retryLane))throw oe.retryLane=y,Ul(o,y),ti(P,o,y),Sb;ox(V)||sf(),c=Ab(o,c,g)}else ox(V)?(c.flags|=192,c.child=o.child,c=null):(o=oe.treeContext,on=Hi(V.nextSibling),ua=c,vr=!0,Go=null,$i=!1,o!==null&&gT(c,o),c=_b(c,y.children),c.flags|=4096);return c}return w?(Jo(),V=y.fallback,w=c.mode,oe=o.child,we=oe.sibling,y=io(oe,{mode:"hidden",children:y.children}),y.subtreeFlags=oe.subtreeFlags&65011712,we!==null?V=io(we,V):(V=$l(V,w,g,null),V.flags|=2),V.return=c,y.return=c,y.sibling=V,c.child=y,th(null,y),y=c.child,V=o.child.memoizedState,V===null?V=Eb(g):(w=V.cachePool,w!==null?(oe=On._currentValue,w=w.parent!==oe?{parent:oe,pool:oe}:w):w=vT(),V={baseLanes:V.baseLanes|g,cachePool:w}),y.memoizedState=V,y.childLanes=Cb(o,P,g),c.memoizedState=kb,th(o.child,y)):(Xo(c),g=o.child,o=g.sibling,g=io(g,{mode:"visible",children:y.children}),g.return=c,g.sibling=null,o!==null&&(P=c.deletions,P===null?(c.deletions=[o],c.flags|=16):P.push(o)),c.child=g,c.memoizedState=null,g)}function _b(o,c){return c=Kg({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Kg(o,c){return o=xi(22,o,null,c),o.lanes=0,o}function Ab(o,c,g){return Ql(c,o.child,null,g),o=_b(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Ik(o,c,g){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),qy(o.return,c,g)}function Nb(o,c,g,y,w,S){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:g,tailMode:w,treeForkCount:S}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=g,P.tailMode=w,P.treeForkCount=S)}function Dk(o,c,g){var y=c.pendingProps,w=y.revealOrder,S=y.tail;y=y.children;var P=Pn.current,V=(P&2)!==0;if(V?(P=P&1|2,c.flags|=128):P&=1,I(Pn,P),ha(o,c,y,g),y=vr?$d:0,!V&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ik(o,g,c);else if(o.tag===19)Ik(o,g,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(w){case"forwards":for(g=c.child,w=null;g!==null;)o=g.alternate,o!==null&&Bg(o)===null&&(w=g),g=g.sibling;g=w,g===null?(w=c.child,c.child=null):(w=g.sibling,g.sibling=null),Nb(c,!1,w,g,S,y);break;case"backwards":case"unstable_legacy-backwards":for(g=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Bg(o)===null){c.child=w;break}o=w.sibling,w.sibling=g,g=w,w=o}Nb(c,!0,g,null,S,y);break;case"together":Nb(c,!1,null,null,void 0,y);break;default:c.memoizedState=null}return c.child}function ho(o,c,g){if(o!==null&&(c.dependencies=o.dependencies),tl|=c.lanes,(g&c.childLanes)===0)if(o!==null){if(nu(o,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,g=io(o,o.pendingProps),c.child=g,g.return=c;o.sibling!==null;)o=o.sibling,g=g.sibling=io(o,o.pendingProps),g.return=c;g.sibling=null}return c.child}function Lb(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Lg(o)))}function R5(o,c,g){switch(c.tag){case 3:me(c,c.stateNode.containerInfo),Vo(c,On,o.memoizedState.cache),ql();break;case 27:case 5:ge(c);break;case 4:me(c,c.stateNode.containerInfo);break;case 10:Vo(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,tb(c),null;break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Xo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?Rk(o,c,g):(Xo(c),o=ho(o,c,g),o!==null?o.sibling:null);Xo(c);break;case 19:var w=(o.flags&128)!==0;if(y=(g&c.childLanes)!==0,y||(nu(o,c,g,!1),y=(g&c.childLanes)!==0),w){if(y)return Dk(o,c,g);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),I(Pn,Pn.current),y)break;return null;case 22:return c.lanes=0,Ck(o,c,g,c.pendingProps);case 24:Vo(c,On,o.memoizedState.cache)}return ho(o,c,g)}function Mk(o,c,g){if(o!==null)if(o.memoizedProps!==c.pendingProps)Bn=!0;else{if(!Lb(o,g)&&(c.flags&128)===0)return Bn=!1,R5(o,c,g);Bn=(o.flags&131072)!==0}else Bn=!1,vr&&(c.flags&1048576)!==0&&pT(c,$d,c.index);switch(c.lanes=0,c.tag){case 16:e:{var y=c.pendingProps;if(o=Vl(c.elementType),c.type=o,typeof o=="function")My(o)?(y=Xl(o,y),c.tag=1,c=Lk(null,c,o,y,g)):(c.tag=0,c=Tb(null,c,o,y,g));else{if(o!=null){var w=o.$$typeof;if(w===D){c.tag=11,c=Tk(null,c,o,y,g);break e}else if(w===M){c.tag=14,c=kk(null,c,o,y,g);break e}}throw c=N(o)||o,Error(n(306,c,""))}}return c;case 0:return Tb(o,c,c.type,c.pendingProps,g);case 1:return y=c.type,w=Xl(y,c.pendingProps),Lk(o,c,y,w,g);case 3:e:{if(me(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var S=c.memoizedState;w=S.element,Ky(o,c),Kd(c,y,null,g);var P=c.memoizedState;if(y=P.cache,Vo(c,On,y),y!==S.cache&&Hy(c,[On],g,!0),Qd(),y=P.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:P.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=Pk(o,c,y,g);break e}else if(y!==w){w=Fi(Error(n(424)),c),qd(w),c=Pk(o,c,y,g);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(on=Hi(o.firstChild),ua=c,vr=!0,Go=null,$i=!0,g=CT(c,null,y,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ql(),y===w){c=ho(o,c,g);break e}ha(o,c,y,g)}c=c.child}return c;case 26:return Qg(o,c),o===null?(g=WE(c.type,null,c.pendingProps,null))?c.memoizedState=g:vr||(g=c.type,o=c.pendingProps,y=pf(xe.current).createElement(g),y[ut]=c,y[Or]=o,pa(y,g,o),Vt(y),c.stateNode=y):c.memoizedState=WE(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ge(c),o===null&&vr&&(y=c.stateNode=qE(c.type,c.pendingProps,xe.current),ua=c,$i=!0,w=on,sl(c.type)?(cx=w,on=Hi(y.firstChild)):on=w),ha(o,c,c.pendingProps.children,g),Qg(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&vr&&((w=y=on)&&(y=lj(y,c.type,c.pendingProps,$i),y!==null?(c.stateNode=y,ua=c,on=Hi(y.firstChild),$i=!1,w=!0):w=!1),w||Wo(c)),ge(c),w=c.type,S=c.pendingProps,P=o!==null?o.memoizedProps:null,y=S.children,ax(w,S)?y=null:P!==null&&ax(w,P)&&(c.flags|=32),c.memoizedState!==null&&(w=nb(o,c,T5,null,null,g),mh._currentValue=w),Qg(o,c),ha(o,c,y,g),c.child;case 6:return o===null&&vr&&((o=g=on)&&(g=cj(g,c.pendingProps,$i),g!==null?(c.stateNode=g,ua=c,on=null,o=!0):o=!1),o||Wo(c)),null;case 13:return Rk(o,c,g);case 4:return me(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=Ql(c,null,y,g):ha(o,c,y,g),c.child;case 11:return Tk(o,c,c.type,c.pendingProps,g);case 7:return ha(o,c,c.pendingProps,g),c.child;case 8:return ha(o,c,c.pendingProps.children,g),c.child;case 12:return ha(o,c,c.pendingProps.children,g),c.child;case 10:return y=c.pendingProps,Vo(c,c.type,y.value),ha(o,c,y.children,g),c.child;case 9:return w=c.type._context,y=c.pendingProps.children,Gl(c),w=da(w),y=y(w),c.flags|=1,ha(o,c,y,g),c.child;case 14:return kk(o,c,c.type,c.pendingProps,g);case 15:return Ek(o,c,c.type,c.pendingProps,g);case 19:return Dk(o,c,g);case 31:return P5(o,c,g);case 22:return Ck(o,c,g,c.pendingProps);case 24:return Gl(c),y=da(On),o===null?(w=Vy(),w===null&&(w=Zr,S=Gy(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=g),w=S),c.memoizedState={parent:y,cache:w},Qy(c),Vo(c,On,w)):((o.lanes&g)!==0&&(Ky(o,c),Kd(c,null,null,g),Qd()),w=o.memoizedState,S=c.memoizedState,w.parent!==y?(w={parent:y,cache:y},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),Vo(c,On,y)):(y=S.cache,Vo(c,On,y),y!==w.cache&&Hy(c,[On],g,!0))),ha(o,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function po(o){o.flags|=4}function Pb(o,c,g,y,w){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(w&335544128)===w)if(o.stateNode.complete)o.flags|=8192;else if(lE())o.flags|=8192;else throw Yl=Dg,Yy}else o.flags&=-16777217}function Ok(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!XE(c))if(lE())o.flags|=8192;else throw Yl=Dg,Yy}function Xg(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?Ct():536870912,o.lanes|=c,fu|=c)}function rh(o,c){if(!vr)switch(o.tailMode){case"hidden":c=o.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?o.tail=null:g.sibling=null;break;case"collapsed":g=o.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function ln(o){var c=o.alternate!==null&&o.alternate.child===o.child,g=0,y=0;if(c)for(var w=o.child;w!==null;)g|=w.lanes|w.childLanes,y|=w.subtreeFlags&65011712,y|=w.flags&65011712,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)g|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=y,o.childLanes=g,c}function I5(o,c,g){var y=c.pendingProps;switch(Fy(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(c),null;case 1:return ln(c),null;case 3:return g=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),lo(On),Me(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(ru(c)?po(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Uy())),ln(c),null;case 26:var w=c.type,S=c.memoizedState;return o===null?(po(c),S!==null?(ln(c),Ok(c,S)):(ln(c),Pb(c,w,null,y,g))):S?S!==o.memoizedState?(po(c),ln(c),Ok(c,S)):(ln(c),c.flags&=-16777217):(o=o.memoizedProps,o!==y&&po(c),ln(c),Pb(c,w,o,y,g)),null;case 27:if(Be(c),g=xe.current,w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&po(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return ln(c),null}o=ne.current,ru(c)?fT(c):(o=qE(w,y,g),c.stateNode=o,po(c))}return ln(c),null;case 5:if(Be(c),w=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&po(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return ln(c),null}if(S=ne.current,ru(c))fT(c);else{var P=pf(xe.current);switch(S){case 1:S=P.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:S=P.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":S=P.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":S=P.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":S=P.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof y.is=="string"?P.createElement("select",{is:y.is}):P.createElement("select"),y.multiple?S.multiple=!0:y.size&&(S.size=y.size);break;default:S=typeof y.is=="string"?P.createElement(w,{is:y.is}):P.createElement(w)}}S[ut]=c,S[Or]=y;e:for(P=c.child;P!==null;){if(P.tag===5||P.tag===6)S.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===c)break e;for(;P.sibling===null;){if(P.return===null||P.return===c)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}c.stateNode=S;e:switch(pa(S,w,y),w){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&po(c)}}return ln(c),Pb(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,g),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&po(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=xe.current,ru(c)){if(o=c.stateNode,g=c.memoizedProps,y=null,w=ua,w!==null)switch(w.tag){case 27:case 5:y=w.memoizedProps}o[ut]=c,o=!!(o.nodeValue===g||y!==null&&y.suppressHydrationWarning===!0||RE(o.nodeValue,g)),o||Wo(c,!0)}else o=pf(o).createTextNode(y),o[ut]=c,c.stateNode=o}return ln(c),null;case 31:if(g=c.memoizedState,o===null||o.memoizedState!==null){if(y=ru(c),g!==null){if(o===null){if(!y)throw Error(n(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[ut]=c}else ql(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ln(c),o=!1}else g=Uy(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=g),o=!0;if(!o)return c.flags&256?(wi(c),c):(wi(c),null);if((c.flags&128)!==0)throw Error(n(558))}return ln(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(w=ru(c),y!==null&&y.dehydrated!==null){if(o===null){if(!w)throw Error(n(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[ut]=c}else ql(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ln(c),w=!1}else w=Uy(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=w),w=!0;if(!w)return c.flags&256?(wi(c),c):(wi(c),null)}return wi(c),(c.flags&128)!==0?(c.lanes=g,c):(g=y!==null,o=o!==null&&o.memoizedState!==null,g&&(y=c.child,w=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(w=y.alternate.memoizedState.cachePool.pool),S=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(S=y.memoizedState.cachePool.pool),S!==w&&(y.flags|=2048)),g!==o&&g&&(c.child.flags|=8192),Xg(c,c.updateQueue),ln(c),null);case 4:return Me(),o===null&&Zb(c.stateNode.containerInfo),ln(c),null;case 10:return lo(c.type),ln(c),null;case 19:if(H(Pn),y=c.memoizedState,y===null)return ln(c),null;if(w=(c.flags&128)!==0,S=y.rendering,S===null)if(w)rh(y,!1);else{if(Cn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(S=Bg(o),S!==null){for(c.flags|=128,rh(y,!1),o=S.updateQueue,c.updateQueue=o,Xg(c,o),c.subtreeFlags=0,o=g,g=c.child;g!==null;)uT(g,o),g=g.sibling;return I(Pn,Pn.current&1|2),vr&&so(c,y.treeForkCount),c.child}o=o.sibling}y.tail!==null&&Ut()>rf&&(c.flags|=128,w=!0,rh(y,!1),c.lanes=4194304)}else{if(!w)if(o=Bg(S),o!==null){if(c.flags|=128,w=!0,o=o.updateQueue,c.updateQueue=o,Xg(c,o),rh(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!vr)return ln(c),null}else 2*Ut()-y.renderingStartTime>rf&&g!==536870912&&(c.flags|=128,w=!0,rh(y,!1),c.lanes=4194304);y.isBackwards?(S.sibling=c.child,c.child=S):(o=y.last,o!==null?o.sibling=S:c.child=S,y.last=S)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Ut(),o.sibling=null,g=Pn.current,I(Pn,w?g&1|2:g&1),vr&&so(c,y.treeForkCount),o):(ln(c),null);case 22:case 23:return wi(c),eb(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(g&536870912)!==0&&(c.flags&128)===0&&(ln(c),c.subtreeFlags&6&&(c.flags|=8192)):ln(c),g=c.updateQueue,g!==null&&Xg(c,g.retryQueue),g=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==g&&(c.flags|=2048),o!==null&&H(Wl),null;case 24:return g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),lo(On),ln(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function D5(o,c){switch(Fy(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return lo(On),Me(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Be(c),null;case 31:if(c.memoizedState!==null){if(wi(c),c.alternate===null)throw Error(n(340));ql()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(wi(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));ql()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return H(Pn),null;case 4:return Me(),null;case 10:return lo(c.type),null;case 22:case 23:return wi(c),eb(),o!==null&&H(Wl),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return lo(On),null;case 25:return null;default:return null}}function jk(o,c){switch(Fy(c),c.tag){case 3:lo(On),Me();break;case 26:case 27:case 5:Be(c);break;case 4:Me();break;case 31:c.memoizedState!==null&&wi(c);break;case 13:wi(c);break;case 19:H(Pn);break;case 10:lo(c.type);break;case 22:case 23:wi(c),eb(),o!==null&&H(Wl);break;case 24:lo(On)}}function nh(o,c){try{var g=c.updateQueue,y=g!==null?g.lastEffect:null;if(y!==null){var w=y.next;g=w;do{if((g.tag&o)===o){y=void 0;var S=g.create,P=g.inst;y=S(),P.destroy=y}g=g.next}while(g!==w)}}catch(V){$r(c,c.return,V)}}function Zo(o,c,g){try{var y=c.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var S=w.next;y=S;do{if((y.tag&o)===o){var P=y.inst,V=P.destroy;if(V!==void 0){P.destroy=void 0,w=c;var oe=g,we=V;try{we()}catch(Re){$r(w,oe,Re)}}}y=y.next}while(y!==S)}}catch(Re){$r(c,c.return,Re)}}function Bk(o){var c=o.updateQueue;if(c!==null){var g=o.stateNode;try{AT(c,g)}catch(y){$r(o,o.return,y)}}}function Fk(o,c,g){g.props=Xl(o.type,o.memoizedProps),g.state=o.memoizedState;try{g.componentWillUnmount()}catch(y){$r(o,c,y)}}function ah(o,c){try{var g=o.ref;if(g!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof g=="function"?o.refCleanup=g(y):g.current=y}}catch(w){$r(o,c,w)}}function Rs(o,c){var g=o.ref,y=o.refCleanup;if(g!==null)if(typeof y=="function")try{y()}catch(w){$r(o,c,w)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(w){$r(o,c,w)}else g.current=null}function zk(o){var c=o.type,g=o.memoizedProps,y=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&y.focus();break e;case"img":g.src?y.src=g.src:g.srcSet&&(y.srcset=g.srcSet)}}catch(w){$r(o,o.return,w)}}function Rb(o,c,g){try{var y=o.stateNode;rj(y,o.type,g,c),y[Or]=c}catch(w){$r(o,o.return,w)}}function Uk(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&sl(o.type)||o.tag===4}function Ib(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Uk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&sl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Db(o,c,g){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(o,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(o),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=tt));else if(y!==4&&(y===27&&sl(o.type)&&(g=o.stateNode,c=null),o=o.child,o!==null))for(Db(o,c,g),o=o.sibling;o!==null;)Db(o,c,g),o=o.sibling}function Jg(o,c,g){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?g.insertBefore(o,c):g.appendChild(o);else if(y!==4&&(y===27&&sl(o.type)&&(g=o.stateNode),o=o.child,o!==null))for(Jg(o,c,g),o=o.sibling;o!==null;)Jg(o,c,g),o=o.sibling}function $k(o){var c=o.stateNode,g=o.memoizedProps;try{for(var y=o.type,w=c.attributes;w.length;)c.removeAttributeNode(w[0]);pa(c,y,g),c[ut]=o,c[Or]=g}catch(S){$r(o,o.return,S)}}var go=!1,Fn=!1,Mb=!1,qk=typeof WeakSet=="function"?WeakSet:Set,ra=null;function M5(o,c){if(o=o.containerInfo,rx=vf,o=fe(o),Ie(o)){if("selectionStart"in o)var g={start:o.selectionStart,end:o.selectionEnd};else e:{g=(g=o.ownerDocument)&&g.defaultView||window;var y=g.getSelection&&g.getSelection();if(y&&y.rangeCount!==0){g=y.anchorNode;var w=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{g.nodeType,S.nodeType}catch{g=null;break e}var P=0,V=-1,oe=-1,we=0,Re=0,je=o,Te=null;t:for(;;){for(var Ae;je!==g||w!==0&&je.nodeType!==3||(V=P+w),je!==S||y!==0&&je.nodeType!==3||(oe=P+y),je.nodeType===3&&(P+=je.nodeValue.length),(Ae=je.firstChild)!==null;)Te=je,je=Ae;for(;;){if(je===o)break t;if(Te===g&&++we===w&&(V=P),Te===S&&++Re===y&&(oe=P),(Ae=je.nextSibling)!==null)break;je=Te,Te=je.parentNode}je=Ae}g=V===-1||oe===-1?null:{start:V,end:oe}}else g=null}g=g||{start:0,end:0}}else g=null;for(nx={focusedElem:o,selectionRange:g},vf=!1,ra=c;ra!==null;)if(c=ra,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ra=o;else for(;ra!==null;){switch(c=ra,S=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(g=0;g<o.length;g++)w=o[g],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,g=c,w=S.memoizedProps,S=S.memoizedState,y=g.stateNode;try{var pt=Xl(g.type,w);o=y.getSnapshotBeforeUpdate(pt,S),y.__reactInternalSnapshotBeforeUpdate=o}catch(jt){$r(g,g.return,jt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,g=o.nodeType,g===9)sx(o);else if(g===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":sx(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,ra=o;break}ra=c.return}}function Hk(o,c,g){var y=g.flags;switch(g.tag){case 0:case 11:case 15:mo(o,g),y&4&&nh(5,g);break;case 1:if(mo(o,g),y&4)if(o=g.stateNode,c===null)try{o.componentDidMount()}catch(P){$r(g,g.return,P)}else{var w=Xl(g.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(w,c,o.__reactInternalSnapshotBeforeUpdate)}catch(P){$r(g,g.return,P)}}y&64&&Bk(g),y&512&&ah(g,g.return);break;case 3:if(mo(o,g),y&64&&(o=g.updateQueue,o!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{AT(o,c)}catch(P){$r(g,g.return,P)}}break;case 27:c===null&&y&4&&$k(g);case 26:case 5:mo(o,g),c===null&&y&4&&zk(g),y&512&&ah(g,g.return);break;case 12:mo(o,g);break;case 31:mo(o,g),y&4&&Vk(o,g);break;case 13:mo(o,g),y&4&&Yk(o,g),y&64&&(o=g.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(g=H5.bind(null,g),uj(o,g))));break;case 22:if(y=g.memoizedState!==null||go,!y){c=c!==null&&c.memoizedState!==null||Fn,w=go;var S=Fn;go=y,(Fn=c)&&!S?yo(o,g,(g.subtreeFlags&8772)!==0):mo(o,g),go=w,Fn=S}break;case 30:break;default:mo(o,g)}}function Gk(o){var c=o.alternate;c!==null&&(o.alternate=null,Gk(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ce(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var pn=null,Xa=!1;function fo(o,c,g){for(g=g.child;g!==null;)Wk(o,c,g),g=g.sibling}function Wk(o,c,g){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(br,g)}catch{}switch(g.tag){case 26:Fn||Rs(g,c),fo(o,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Fn||Rs(g,c);var y=pn,w=Xa;sl(g.type)&&(pn=g.stateNode,Xa=!1),fo(o,c,g),ph(g.stateNode),pn=y,Xa=w;break;case 5:Fn||Rs(g,c);case 6:if(y=pn,w=Xa,pn=null,fo(o,c,g),pn=y,Xa=w,pn!==null)if(Xa)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(g.stateNode)}catch(S){$r(g,c,S)}else try{pn.removeChild(g.stateNode)}catch(S){$r(g,c,S)}break;case 18:pn!==null&&(Xa?(o=pn,BE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,g.stateNode),Tu(o)):BE(pn,g.stateNode));break;case 4:y=pn,w=Xa,pn=g.stateNode.containerInfo,Xa=!0,fo(o,c,g),pn=y,Xa=w;break;case 0:case 11:case 14:case 15:Zo(2,g,c),Fn||Zo(4,g,c),fo(o,c,g);break;case 1:Fn||(Rs(g,c),y=g.stateNode,typeof y.componentWillUnmount=="function"&&Fk(g,c,y)),fo(o,c,g);break;case 21:fo(o,c,g);break;case 22:Fn=(y=Fn)||g.memoizedState!==null,fo(o,c,g),Fn=y;break;default:fo(o,c,g)}}function Vk(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Tu(o)}catch(g){$r(c,c.return,g)}}}function Yk(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Tu(o)}catch(g){$r(c,c.return,g)}}function O5(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new qk),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new qk),c;default:throw Error(n(435,o.tag))}}function Zg(o,c){var g=O5(o);c.forEach(function(y){if(!g.has(y)){g.add(y);var w=G5.bind(null,o,y);y.then(w,w)}})}function Ja(o,c){var g=c.deletions;if(g!==null)for(var y=0;y<g.length;y++){var w=g[y],S=o,P=c,V=P;e:for(;V!==null;){switch(V.tag){case 27:if(sl(V.type)){pn=V.stateNode,Xa=!1;break e}break;case 5:pn=V.stateNode,Xa=!1;break e;case 3:case 4:pn=V.stateNode.containerInfo,Xa=!0;break e}V=V.return}if(pn===null)throw Error(n(160));Wk(S,P,w),pn=null,Xa=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)Qk(c,o),c=c.sibling}var hs=null;function Qk(o,c){var g=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ja(c,o),Za(o),y&4&&(Zo(3,o,o.return),nh(3,o),Zo(5,o,o.return));break;case 1:Ja(c,o),Za(o),y&512&&(Fn||g===null||Rs(g,g.return)),y&64&&go&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(g=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=g===null?y:g.concat(y))));break;case 26:var w=hs;if(Ja(c,o),Za(o),y&512&&(Fn||g===null||Rs(g,g.return)),y&4){var S=g!==null?g.memoizedState:null;if(y=o.memoizedState,g===null)if(y===null)if(o.stateNode===null){e:{y=o.type,g=o.memoizedProps,w=w.ownerDocument||w;t:switch(y){case"title":S=w.getElementsByTagName("title")[0],(!S||S[ht]||S[ut]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(y),w.head.insertBefore(S,w.querySelector("head > title"))),pa(S,y,g),S[ut]=o,Vt(S),y=S;break e;case"link":var P=QE("link","href",w).get(y+(g.href||""));if(P){for(var V=0;V<P.length;V++)if(S=P[V],S.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&S.getAttribute("rel")===(g.rel==null?null:g.rel)&&S.getAttribute("title")===(g.title==null?null:g.title)&&S.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){P.splice(V,1);break t}}S=w.createElement(y),pa(S,y,g),w.head.appendChild(S);break;case"meta":if(P=QE("meta","content",w).get(y+(g.content||""))){for(V=0;V<P.length;V++)if(S=P[V],S.getAttribute("content")===(g.content==null?null:""+g.content)&&S.getAttribute("name")===(g.name==null?null:g.name)&&S.getAttribute("property")===(g.property==null?null:g.property)&&S.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&S.getAttribute("charset")===(g.charSet==null?null:g.charSet)){P.splice(V,1);break t}}S=w.createElement(y),pa(S,y,g),w.head.appendChild(S);break;default:throw Error(n(468,y))}S[ut]=o,Vt(S),y=S}o.stateNode=y}else KE(w,o.type,o.stateNode);else o.stateNode=YE(w,y,o.memoizedProps);else S!==y?(S===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):S.count--,y===null?KE(w,o.type,o.stateNode):YE(w,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Rb(o,o.memoizedProps,g.memoizedProps)}break;case 27:Ja(c,o),Za(o),y&512&&(Fn||g===null||Rs(g,g.return)),g!==null&&y&4&&Rb(o,o.memoizedProps,g.memoizedProps);break;case 5:if(Ja(c,o),Za(o),y&512&&(Fn||g===null||Rs(g,g.return)),o.flags&32){w=o.stateNode;try{Dt(w,"")}catch(pt){$r(o,o.return,pt)}}y&4&&o.stateNode!=null&&(w=o.memoizedProps,Rb(o,w,g!==null?g.memoizedProps:w)),y&1024&&(Mb=!0);break;case 6:if(Ja(c,o),Za(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,g=o.stateNode;try{g.nodeValue=y}catch(pt){$r(o,o.return,pt)}}break;case 3:if(mf=null,w=hs,hs=gf(c.containerInfo),Ja(c,o),hs=w,Za(o),y&4&&g!==null&&g.memoizedState.isDehydrated)try{Tu(c.containerInfo)}catch(pt){$r(o,o.return,pt)}Mb&&(Mb=!1,Kk(o));break;case 4:y=hs,hs=gf(o.stateNode.containerInfo),Ja(c,o),Za(o),hs=y;break;case 12:Ja(c,o),Za(o);break;case 31:Ja(c,o),Za(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Zg(o,y)));break;case 13:Ja(c,o),Za(o),o.child.flags&8192&&o.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(tf=Ut()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Zg(o,y)));break;case 22:w=o.memoizedState!==null;var oe=g!==null&&g.memoizedState!==null,we=go,Re=Fn;if(go=we||w,Fn=Re||oe,Ja(c,o),Fn=Re,go=we,Za(o),y&8192)e:for(c=o.stateNode,c._visibility=w?c._visibility&-2:c._visibility|1,w&&(g===null||oe||go||Fn||Jl(o)),g=null,c=o;;){if(c.tag===5||c.tag===26){if(g===null){oe=g=c;try{if(S=oe.stateNode,w)P=S.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{V=oe.stateNode;var je=oe.memoizedProps.style,Te=je!=null&&je.hasOwnProperty("display")?je.display:null;V.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(pt){$r(oe,oe.return,pt)}}}else if(c.tag===6){if(g===null){oe=c;try{oe.stateNode.nodeValue=w?"":oe.memoizedProps}catch(pt){$r(oe,oe.return,pt)}}}else if(c.tag===18){if(g===null){oe=c;try{var Ae=oe.stateNode;w?FE(Ae,!0):FE(oe.stateNode,!1)}catch(pt){$r(oe,oe.return,pt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(g=y.retryQueue,g!==null&&(y.retryQueue=null,Zg(o,g))));break;case 19:Ja(c,o),Za(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,Zg(o,y)));break;case 30:break;case 21:break;default:Ja(c,o),Za(o)}}function Za(o){var c=o.flags;if(c&2){try{for(var g,y=o.return;y!==null;){if(Uk(y)){g=y;break}y=y.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var w=g.stateNode,S=Ib(o);Jg(o,S,w);break;case 5:var P=g.stateNode;g.flags&32&&(Dt(P,""),g.flags&=-33);var V=Ib(o);Jg(o,V,P);break;case 3:case 4:var oe=g.stateNode.containerInfo,we=Ib(o);Db(o,we,oe);break;default:throw Error(n(161))}}catch(Re){$r(o,o.return,Re)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Kk(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;Kk(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function mo(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Hk(o,c.alternate,c),c=c.sibling}function Jl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Zo(4,c,c.return),Jl(c);break;case 1:Rs(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&Fk(c,c.return,g),Jl(c);break;case 27:ph(c.stateNode);case 26:case 5:Rs(c,c.return),Jl(c);break;case 22:c.memoizedState===null&&Jl(c);break;case 30:Jl(c);break;default:Jl(c)}o=o.sibling}}function yo(o,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,w=o,S=c,P=S.flags;switch(S.tag){case 0:case 11:case 15:yo(w,S,g),nh(4,S);break;case 1:if(yo(w,S,g),y=S,w=y.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(we){$r(y,y.return,we)}if(y=S,w=y.updateQueue,w!==null){var V=y.stateNode;try{var oe=w.shared.hiddenCallbacks;if(oe!==null)for(w.shared.hiddenCallbacks=null,w=0;w<oe.length;w++)_T(oe[w],V)}catch(we){$r(y,y.return,we)}}g&&P&64&&Bk(S),ah(S,S.return);break;case 27:$k(S);case 26:case 5:yo(w,S,g),g&&y===null&&P&4&&zk(S),ah(S,S.return);break;case 12:yo(w,S,g);break;case 31:yo(w,S,g),g&&P&4&&Vk(w,S);break;case 13:yo(w,S,g),g&&P&4&&Yk(w,S);break;case 22:S.memoizedState===null&&yo(w,S,g),ah(S,S.return);break;case 30:break;default:yo(w,S,g)}c=c.sibling}}function Ob(o,c){var g=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==g&&(o!=null&&o.refCount++,g!=null&&Hd(g))}function jb(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Hd(o))}function ps(o,c,g,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Xk(o,c,g,y),c=c.sibling}function Xk(o,c,g,y){var w=c.flags;switch(c.tag){case 0:case 11:case 15:ps(o,c,g,y),w&2048&&nh(9,c);break;case 1:ps(o,c,g,y);break;case 3:ps(o,c,g,y),w&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Hd(o)));break;case 12:if(w&2048){ps(o,c,g,y),o=c.stateNode;try{var S=c.memoizedProps,P=S.id,V=S.onPostCommit;typeof V=="function"&&V(P,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(oe){$r(c,c.return,oe)}}else ps(o,c,g,y);break;case 31:ps(o,c,g,y);break;case 13:ps(o,c,g,y);break;case 23:break;case 22:S=c.stateNode,P=c.alternate,c.memoizedState!==null?S._visibility&2?ps(o,c,g,y):ih(o,c):S._visibility&2?ps(o,c,g,y):(S._visibility|=2,hu(o,c,g,y,(c.subtreeFlags&10256)!==0||!1)),w&2048&&Ob(P,c);break;case 24:ps(o,c,g,y),w&2048&&jb(c.alternate,c);break;default:ps(o,c,g,y)}}function hu(o,c,g,y,w){for(w=w&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=o,P=c,V=g,oe=y,we=P.flags;switch(P.tag){case 0:case 11:case 15:hu(S,P,V,oe,w),nh(8,P);break;case 23:break;case 22:var Re=P.stateNode;P.memoizedState!==null?Re._visibility&2?hu(S,P,V,oe,w):ih(S,P):(Re._visibility|=2,hu(S,P,V,oe,w)),w&&we&2048&&Ob(P.alternate,P);break;case 24:hu(S,P,V,oe,w),w&&we&2048&&jb(P.alternate,P);break;default:hu(S,P,V,oe,w)}c=c.sibling}}function ih(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=o,y=c,w=y.flags;switch(y.tag){case 22:ih(g,y),w&2048&&Ob(y.alternate,y);break;case 24:ih(g,y),w&2048&&jb(y.alternate,y);break;default:ih(g,y)}c=c.sibling}}var sh=8192;function pu(o,c,g){if(o.subtreeFlags&sh)for(o=o.child;o!==null;)Jk(o,c,g),o=o.sibling}function Jk(o,c,g){switch(o.tag){case 26:pu(o,c,g),o.flags&sh&&o.memoizedState!==null&&Sj(g,hs,o.memoizedState,o.memoizedProps);break;case 5:pu(o,c,g);break;case 3:case 4:var y=hs;hs=gf(o.stateNode.containerInfo),pu(o,c,g),hs=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=sh,sh=16777216,pu(o,c,g),sh=y):pu(o,c,g));break;default:pu(o,c,g)}}function Zk(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function oh(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var y=c[g];ra=y,tE(y,o)}Zk(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)eE(o),o=o.sibling}function eE(o){switch(o.tag){case 0:case 11:case 15:oh(o),o.flags&2048&&Zo(9,o,o.return);break;case 3:oh(o);break;case 12:oh(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,ef(o)):oh(o);break;default:oh(o)}}function ef(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var y=c[g];ra=y,tE(y,o)}Zk(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Zo(8,c,c.return),ef(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,ef(c));break;default:ef(c)}o=o.sibling}}function tE(o,c){for(;ra!==null;){var g=ra;switch(g.tag){case 0:case 11:case 15:Zo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var y=g.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Hd(g.memoizedState.cache)}if(y=g.child,y!==null)y.return=g,ra=y;else e:for(g=o;ra!==null;){y=ra;var w=y.sibling,S=y.return;if(Gk(y),y===g){ra=null;break e}if(w!==null){w.return=S,ra=w;break e}ra=S}}}var j5={getCacheForType:function(o){var c=da(On),g=c.data.get(o);return g===void 0&&(g=o(),c.data.set(o,g)),g},cacheSignal:function(){return da(On).controller.signal}},B5=typeof WeakMap=="function"?WeakMap:Map,Dr=0,Zr=null,ur=null,mr=0,Ur=0,Si=null,el=!1,gu=!1,Bb=!1,bo=0,Cn=0,tl=0,Zl=0,Fb=0,Ti=0,fu=0,lh=null,ei=null,zb=!1,tf=0,rE=0,rf=1/0,nf=null,rl=null,Wn=0,nl=null,mu=null,xo=0,Ub=0,$b=null,nE=null,ch=0,qb=null;function ki(){return(Dr&2)!==0&&mr!==0?mr&-mr:j.T!==null?Qb():hi()}function aE(){if(Ti===0)if((mr&536870912)===0||vr){var o=Oa;Oa<<=1,(Oa&3932160)===0&&(Oa=262144),Ti=o}else Ti=536870912;return o=vi.current,o!==null&&(o.flags|=32),Ti}function ti(o,c,g){(o===Zr&&(Ur===2||Ur===9)||o.cancelPendingCommit!==null)&&(yu(o,0),al(o,mr,Ti,!1)),Lr(o,g),((Dr&2)===0||o!==Zr)&&(o===Zr&&((Dr&2)===0&&(Zl|=g),Cn===4&&al(o,mr,Ti,!1)),Is(o))}function iE(o,c,g){if((Dr&6)!==0)throw Error(n(327));var y=!g&&(c&127)===0&&(c&o.expiredLanes)===0||Pe(o,c),w=y?U5(o,c):Gb(o,c,!0),S=y;do{if(w===0){gu&&!y&&al(o,c,0,!1);break}else{if(g=o.current.alternate,S&&!F5(g)){w=Gb(o,c,!1),S=!1;continue}if(w===2){if(S=c,o.errorRecoveryDisabledLanes&S)var P=0;else P=o.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){c=P;e:{var V=o;w=lh;var oe=V.current.memoizedState.isDehydrated;if(oe&&(yu(V,P).flags|=256),P=Gb(V,P,!1),P!==2){if(Bb&&!oe){V.errorRecoveryDisabledLanes|=S,Zl|=S,w=4;break e}S=ei,ei=w,S!==null&&(ei===null?ei=S:ei.push.apply(ei,S))}w=P}if(S=!1,w!==2)continue}}if(w===1){yu(o,0),al(o,c,0,!0);break}e:{switch(y=o,S=w,S){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:al(y,c,Ti,!el);break e;case 2:ei=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(w=tf+300-Ut(),10<w)){if(al(y,c,Ti,!el),le(y,0,!0)!==0)break e;xo=c,y.timeoutHandle=OE(sE.bind(null,y,g,ei,nf,zb,c,Ti,Zl,fu,el,S,"Throttled",-0,0),w);break e}sE(y,g,ei,nf,zb,c,Ti,Zl,fu,el,S,null,-0,0)}}break}while(!0);Is(o)}function sE(o,c,g,y,w,S,P,V,oe,we,Re,je,Te,Ae){if(o.timeoutHandle=-1,je=c.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tt},Jk(c,S,je);var pt=(S&62914560)===S?tf-Ut():(S&4194048)===S?rE-Ut():0;if(pt=Tj(je,pt),pt!==null){xo=S,o.cancelPendingCommit=pt(gE.bind(null,o,c,S,g,y,w,P,V,oe,Re,je,null,Te,Ae)),al(o,S,P,!we);return}}gE(o,c,S,g,y,w,P,V,oe)}function F5(o){for(var c=o;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var y=0;y<g.length;y++){var w=g[y],S=w.getSnapshot;w=w.value;try{if(!Ta(S(),w))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function al(o,c,g,y){c&=~Fb,c&=~Zl,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var w=c;0<w;){var S=31-ar(w),P=1<<S;y[S]=-1,w&=~P}g!==0&&st(o,g,c)}function af(){return(Dr&6)===0?(uh(0),!1):!0}function Hb(){if(ur!==null){if(Ur===0)var o=ur.return;else o=ur,oo=Hl=null,sb(o),ou=null,Wd=0,o=ur;for(;o!==null;)jk(o.alternate,o),o=o.return;ur=null}}function yu(o,c){var g=o.timeoutHandle;g!==-1&&(o.timeoutHandle=-1,ij(g)),g=o.cancelPendingCommit,g!==null&&(o.cancelPendingCommit=null,g()),xo=0,Hb(),Zr=o,ur=g=io(o.current,null),mr=c,Ur=0,Si=null,el=!1,gu=Pe(o,c),Bb=!1,fu=Ti=Fb=Zl=tl=Cn=0,ei=lh=null,zb=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var w=31-ar(y),S=1<<w;c|=o[w],y&=~S}return bo=c,Eg(),g}function oE(o,c){Kt=null,j.H=eh,c===su||c===Ig?(c=TT(),Ur=3):c===Yy?(c=TT(),Ur=4):Ur=c===Sb?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Si=c,ur===null&&(Cn=1,Vg(o,Fi(c,o.current)))}function lE(){var o=vi.current;return o===null?!0:(mr&4194048)===mr?qi===null:(mr&62914560)===mr||(mr&536870912)!==0?o===qi:!1}function cE(){var o=j.H;return j.H=eh,o===null?eh:o}function uE(){var o=j.A;return j.A=j5,o}function sf(){Cn=4,el||(mr&4194048)!==mr&&vi.current!==null||(gu=!0),(tl&134217727)===0&&(Zl&134217727)===0||Zr===null||al(Zr,mr,Ti,!1)}function Gb(o,c,g){var y=Dr;Dr|=2;var w=cE(),S=uE();(Zr!==o||mr!==c)&&(nf=null,yu(o,c)),c=!1;var P=Cn;e:do try{if(Ur!==0&&ur!==null){var V=ur,oe=Si;switch(Ur){case 8:Hb(),P=6;break e;case 3:case 2:case 9:case 6:vi.current===null&&(c=!0);var we=Ur;if(Ur=0,Si=null,bu(o,V,oe,we),g&&gu){P=0;break e}break;default:we=Ur,Ur=0,Si=null,bu(o,V,oe,we)}}z5(),P=Cn;break}catch(Re){oE(o,Re)}while(!0);return c&&o.shellSuspendCounter++,oo=Hl=null,Dr=y,j.H=w,j.A=S,ur===null&&(Zr=null,mr=0,Eg()),P}function z5(){for(;ur!==null;)dE(ur)}function U5(o,c){var g=Dr;Dr|=2;var y=cE(),w=uE();Zr!==o||mr!==c?(nf=null,rf=Ut()+500,yu(o,c)):gu=Pe(o,c);e:do try{if(Ur!==0&&ur!==null){c=ur;var S=Si;t:switch(Ur){case 1:Ur=0,Si=null,bu(o,c,S,1);break;case 2:case 9:if(wT(S)){Ur=0,Si=null,hE(c);break}c=function(){Ur!==2&&Ur!==9||Zr!==o||(Ur=7),Is(o)},S.then(c,c);break e;case 3:Ur=7;break e;case 4:Ur=5;break e;case 7:wT(S)?(Ur=0,Si=null,hE(c)):(Ur=0,Si=null,bu(o,c,S,7));break;case 5:var P=null;switch(ur.tag){case 26:P=ur.memoizedState;case 5:case 27:var V=ur;if(P?XE(P):V.stateNode.complete){Ur=0,Si=null;var oe=V.sibling;if(oe!==null)ur=oe;else{var we=V.return;we!==null?(ur=we,of(we)):ur=null}break t}}Ur=0,Si=null,bu(o,c,S,5);break;case 6:Ur=0,Si=null,bu(o,c,S,6);break;case 8:Hb(),Cn=6;break e;default:throw Error(n(462))}}$5();break}catch(Re){oE(o,Re)}while(!0);return oo=Hl=null,j.H=y,j.A=w,Dr=g,ur!==null?0:(Zr=null,mr=0,Eg(),Cn)}function $5(){for(;ur!==null&&!mn();)dE(ur)}function dE(o){var c=Mk(o.alternate,o,bo);o.memoizedProps=o.pendingProps,c===null?of(o):ur=c}function hE(o){var c=o,g=c.alternate;switch(c.tag){case 15:case 0:c=Nk(g,c,c.pendingProps,c.type,void 0,mr);break;case 11:c=Nk(g,c,c.pendingProps,c.type.render,c.ref,mr);break;case 5:sb(c);default:jk(g,c),c=ur=uT(c,bo),c=Mk(g,c,bo)}o.memoizedProps=o.pendingProps,c===null?of(o):ur=c}function bu(o,c,g,y){oo=Hl=null,sb(c),ou=null,Wd=0;var w=c.return;try{if(L5(o,w,c,g,mr)){Cn=1,Vg(o,Fi(g,o.current)),ur=null;return}}catch(S){if(w!==null)throw ur=w,S;Cn=1,Vg(o,Fi(g,o.current)),ur=null;return}c.flags&32768?(vr||y===1?o=!0:gu||(mr&536870912)!==0?o=!1:(el=o=!0,(y===2||y===9||y===3||y===6)&&(y=vi.current,y!==null&&y.tag===13&&(y.flags|=16384))),pE(c,o)):of(c)}function of(o){var c=o;do{if((c.flags&32768)!==0){pE(c,el);return}o=c.return;var g=I5(c.alternate,c,bo);if(g!==null){ur=g;return}if(c=c.sibling,c!==null){ur=c;return}ur=c=o}while(c!==null);Cn===0&&(Cn=5)}function pE(o,c){do{var g=D5(o.alternate,o);if(g!==null){g.flags&=32767,ur=g;return}if(g=o.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(o=o.sibling,o!==null)){ur=o;return}ur=o=g}while(o!==null);Cn=6,ur=null}function gE(o,c,g,y,w,S,P,V,oe){o.cancelPendingCommit=null;do lf();while(Wn!==0);if((Dr&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(S=c.lanes|c.childLanes,S|=Iy,ot(o,g,S,P,V,oe),o===Zr&&(ur=Zr=null,mr=0),mu=c,nl=o,xo=g,Ub=S,$b=w,nE=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,W5(rt,function(){return xE(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,w=K.p,K.p=2,P=Dr,Dr|=4;try{M5(o,c,g)}finally{Dr=P,K.p=w,j.T=y}}Wn=1,fE(),mE(),yE()}}function fE(){if(Wn===1){Wn=0;var o=nl,c=mu,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=j.T,j.T=null;var y=K.p;K.p=2;var w=Dr;Dr|=4;try{Qk(c,o);var S=nx,P=fe(o.containerInfo),V=S.focusedElem,oe=S.selectionRange;if(P!==V&&V&&V.ownerDocument&&We(V.ownerDocument.documentElement,V)){if(oe!==null&&Ie(V)){var we=oe.start,Re=oe.end;if(Re===void 0&&(Re=we),"selectionStart"in V)V.selectionStart=we,V.selectionEnd=Math.min(Re,V.value.length);else{var je=V.ownerDocument||document,Te=je&&je.defaultView||window;if(Te.getSelection){var Ae=Te.getSelection(),pt=V.textContent.length,jt=Math.min(oe.start,pt),Vr=oe.end===void 0?jt:Math.min(oe.end,pt);!Ae.extend&&jt>Vr&&(P=Vr,Vr=jt,jt=P);var pe=Ud(V,jt),de=Ud(V,Vr);if(pe&&de&&(Ae.rangeCount!==1||Ae.anchorNode!==pe.node||Ae.anchorOffset!==pe.offset||Ae.focusNode!==de.node||Ae.focusOffset!==de.offset)){var ve=je.createRange();ve.setStart(pe.node,pe.offset),Ae.removeAllRanges(),jt>Vr?(Ae.addRange(ve),Ae.extend(de.node,de.offset)):(ve.setEnd(de.node,de.offset),Ae.addRange(ve))}}}}for(je=[],Ae=V;Ae=Ae.parentNode;)Ae.nodeType===1&&je.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<je.length;V++){var De=je[V];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}vf=!!rx,nx=rx=null}finally{Dr=w,K.p=y,j.T=g}}o.current=c,Wn=2}}function mE(){if(Wn===2){Wn=0;var o=nl,c=mu,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=j.T,j.T=null;var y=K.p;K.p=2;var w=Dr;Dr|=4;try{Hk(o,c.alternate,c)}finally{Dr=w,K.p=y,j.T=g}}Wn=3}}function yE(){if(Wn===4||Wn===3){Wn=0,Jt();var o=nl,c=mu,g=xo,y=nE;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Wn=5:(Wn=0,mu=nl=null,bE(o,o.pendingLanes));var w=o.pendingLanes;if(w===0&&(rl=null),Mn(g),c=c.stateNode,Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(br,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=j.T,w=K.p,K.p=2,j.T=null;try{for(var S=o.onRecoverableError,P=0;P<y.length;P++){var V=y[P];S(V.value,{componentStack:V.stack})}}finally{j.T=c,K.p=w}}(xo&3)!==0&&lf(),Is(o),w=o.pendingLanes,(g&261930)!==0&&(w&42)!==0?o===qb?ch++:(ch=0,qb=o):ch=0,uh(0)}}function bE(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Hd(c)))}function lf(){return fE(),mE(),yE(),xE()}function xE(){if(Wn!==5)return!1;var o=nl,c=Ub;Ub=0;var g=Mn(xo),y=j.T,w=K.p;try{K.p=32>g?32:g,j.T=null,g=$b,$b=null;var S=nl,P=xo;if(Wn=0,mu=nl=null,xo=0,(Dr&6)!==0)throw Error(n(331));var V=Dr;if(Dr|=4,eE(S.current),Xk(S,S.current,P,g),Dr=V,uh(0,!1),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(br,S)}catch{}return!0}finally{K.p=w,j.T=y,bE(o,c)}}function vE(o,c,g){c=Fi(g,c),c=wb(o.stateNode,c,2),o=Ko(o,c,2),o!==null&&(Lr(o,2),Is(o))}function $r(o,c,g){if(o.tag===3)vE(o,o,g);else for(;c!==null;){if(c.tag===3){vE(c,o,g);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(rl===null||!rl.has(y))){o=Fi(g,o),g=wk(2),y=Ko(c,g,2),y!==null&&(Sk(g,y,c,o),Lr(y,2),Is(y));break}}c=c.return}}function Wb(o,c,g){var y=o.pingCache;if(y===null){y=o.pingCache=new B5;var w=new Set;y.set(c,w)}else w=y.get(c),w===void 0&&(w=new Set,y.set(c,w));w.has(g)||(Bb=!0,w.add(g),o=q5.bind(null,o,c,g),c.then(o,o))}function q5(o,c,g){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&g,o.warmLanes&=~g,Zr===o&&(mr&g)===g&&(Cn===4||Cn===3&&(mr&62914560)===mr&&300>Ut()-tf?(Dr&2)===0&&yu(o,0):Fb|=g,fu===mr&&(fu=0)),Is(o)}function wE(o,c){c===0&&(c=Ct()),o=Ul(o,c),o!==null&&(Lr(o,c),Is(o))}function H5(o){var c=o.memoizedState,g=0;c!==null&&(g=c.retryLane),wE(o,g)}function G5(o,c){var g=0;switch(o.tag){case 31:case 13:var y=o.stateNode,w=o.memoizedState;w!==null&&(g=w.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),wE(o,g)}function W5(o,c){return bt(o,c)}var cf=null,xu=null,Vb=!1,uf=!1,Yb=!1,il=0;function Is(o){o!==xu&&o.next===null&&(xu===null?cf=xu=o:xu=xu.next=o),uf=!0,Vb||(Vb=!0,Y5())}function uh(o,c){if(!Yb&&uf){Yb=!0;do for(var g=!1,y=cf;y!==null;){if(o!==0){var w=y.pendingLanes;if(w===0)var S=0;else{var P=y.suspendedLanes,V=y.pingedLanes;S=(1<<31-ar(42|o)+1)-1,S&=w&~(P&~V),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(g=!0,EE(y,S))}else S=mr,S=le(y,y===Zr?S:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(S&3)===0||Pe(y,S)||(g=!0,EE(y,S));y=y.next}while(g);Yb=!1}}function V5(){SE()}function SE(){uf=Vb=!1;var o=0;il!==0&&aj()&&(o=il);for(var c=Ut(),g=null,y=cf;y!==null;){var w=y.next,S=TE(y,c);S===0?(y.next=null,g===null?cf=w:g.next=w,w===null&&(xu=g)):(g=y,(o!==0||(S&3)!==0)&&(uf=!0)),y=w}Wn!==0&&Wn!==5||uh(o),il!==0&&(il=0)}function TE(o,c){for(var g=o.suspendedLanes,y=o.pingedLanes,w=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var P=31-ar(S),V=1<<P,oe=w[P];oe===-1?((V&g)===0||(V&y)!==0)&&(w[P]=He(V,c)):oe<=c&&(o.expiredLanes|=V),S&=~V}if(c=Zr,g=mr,g=le(o,o===c?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,g===0||o===c&&(Ur===2||Ur===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&It(y),o.callbackNode=null,o.callbackPriority=0;if((g&3)===0||Pe(o,g)){if(c=g&-g,c===o.callbackPriority)return c;switch(y!==null&&It(y),Mn(g)){case 2:case 8:g=Ce;break;case 32:g=rt;break;case 268435456:g=dt;break;default:g=rt}return y=kE.bind(null,o),g=bt(g,y),o.callbackPriority=c,o.callbackNode=g,c}return y!==null&&y!==null&&It(y),o.callbackPriority=2,o.callbackNode=null,2}function kE(o,c){if(Wn!==0&&Wn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var g=o.callbackNode;if(lf()&&o.callbackNode!==g)return null;var y=mr;return y=le(o,o===Zr?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(iE(o,y,c),TE(o,Ut()),o.callbackNode!=null&&o.callbackNode===g?kE.bind(null,o):null)}function EE(o,c){if(lf())return null;iE(o,c,!0)}function Y5(){sj(function(){(Dr&6)!==0?bt(ae,V5):SE()})}function Qb(){if(il===0){var o=au;o===0&&(o=ia,ia<<=1,(ia&261888)===0&&(ia=256)),il=o}return il}function CE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:gi(""+o)}function _E(o,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,o.id&&g.setAttribute("form",o.id),c.parentNode.insertBefore(g,c),o=new FormData(o),g.parentNode.removeChild(g),o}function Q5(o,c,g,y,w){if(c==="submit"&&g&&g.stateNode===w){var S=CE((w[Or]||null).action),P=y.submitter;P&&(c=(c=P[Or]||null)?CE(c.formAction):P.getAttribute("formAction"),c!==null&&(S=c,P=null));var V=new cs("action","action",null,y,w);o.push({event:V,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(il!==0){var oe=P?_E(w,P):new FormData(w);fb(g,{pending:!0,data:oe,method:w.method,action:S},null,oe)}}else typeof S=="function"&&(V.preventDefault(),oe=P?_E(w,P):new FormData(w),fb(g,{pending:!0,data:oe,method:w.method,action:S},S,oe))},currentTarget:w}]})}}for(var Kb=0;Kb<Ry.length;Kb++){var Xb=Ry[Kb],K5=Xb.toLowerCase(),X5=Xb[0].toUpperCase()+Xb.slice(1);ds(K5,"on"+X5)}ds(us,"onAnimationEnd"),ds(iT,"onAnimationIteration"),ds(sT,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(p5,"onTransitionRun"),ds(g5,"onTransitionStart"),ds(f5,"onTransitionCancel"),ds(oT,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dh));function AE(o,c){c=(c&4)!==0;for(var g=0;g<o.length;g++){var y=o[g],w=y.event;y=y.listeners;e:{var S=void 0;if(c)for(var P=y.length-1;0<=P;P--){var V=y[P],oe=V.instance,we=V.currentTarget;if(V=V.listener,oe!==S&&w.isPropagationStopped())break e;S=V,w.currentTarget=we;try{S(w)}catch(Re){kg(Re)}w.currentTarget=null,S=oe}else for(P=0;P<y.length;P++){if(V=y[P],oe=V.instance,we=V.currentTarget,V=V.listener,oe!==S&&w.isPropagationStopped())break e;S=V,w.currentTarget=we;try{S(w)}catch(Re){kg(Re)}w.currentTarget=null,S=oe}}}}function dr(o,c){var g=c[Ri];g===void 0&&(g=c[Ri]=new Set);var y=o+"__bubble";g.has(y)||(NE(c,o,2,!1),g.add(y))}function Jb(o,c,g){var y=0;c&&(y|=4),NE(g,o,y,c)}var df="_reactListening"+Math.random().toString(36).slice(2);function Zb(o){if(!o[df]){o[df]=!0,Tn.forEach(function(g){g!=="selectionchange"&&(J5.has(g)||Jb(g,!1,o),Jb(g,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[df]||(c[df]=!0,Jb("selectionchange",!1,c))}}function NE(o,c,g,y){switch(a2(c)){case 2:var w=Cj;break;case 8:w=_j;break;default:w=gx}g=w.bind(null,c,g,o),w=void 0,!zo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),y?w!==void 0?o.addEventListener(c,g,{capture:!0,passive:w}):o.addEventListener(c,g,!0):w!==void 0?o.addEventListener(c,g,{passive:w}):o.addEventListener(c,g,!1)}function ex(o,c,g,y,w){var S=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var P=y.tag;if(P===3||P===4){var V=y.stateNode.containerInfo;if(V===w)break;if(P===4)for(P=y.return;P!==null;){var oe=P.tag;if((oe===3||oe===4)&&P.stateNode.containerInfo===w)return;P=P.return}for(;V!==null;){if(P=ze(V),P===null)return;if(oe=P.tag,oe===5||oe===6||oe===26||oe===27){y=S=P;continue e}V=V.parentNode}}y=y.return}Dl(function(){var we=S,Re=Lt(g),je=[];e:{var Te=lT.get(o);if(Te!==void 0){var Ae=cs,pt=o;switch(o){case"keypress":if(Ol(g)===0)break e;case"keydown":case"keyup":Ae=wg;break;case"focusin":pt="focus",Ae=Bd;break;case"focusout":pt="blur",Ae=Bd;break;case"beforeblur":case"afterblur":Ae=Bd;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=z;break;case us:case iT:case sT:Ae=Sy;break;case oT:Ae=_e;break;case"scroll":case"scrollend":Ae=by;break;case"wheel":Ae=Oe;break;case"copy":case"cut":case"paste":Ae=Ty;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Sg;break;case"toggle":case"beforetoggle":Ae=qe}var jt=(c&4)!==0,Vr=!jt&&(o==="scroll"||o==="scrollend"),pe=jt?Te!==null?Te+"Capture":null:Te;jt=[];for(var de=we,ve;de!==null;){var De=de;if(ve=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||ve===null||pe===null||(De=Ii(de,pe),De!=null&&jt.push(hh(de,De,ve))),Vr)break;de=de.return}0<jt.length&&(Te=new Ae(Te,pt,null,g,Re),je.push({event:Te,listeners:jt}))}}if((c&7)===0){e:{if(Te=o==="mouseover"||o==="pointerover",Ae=o==="mouseout"||o==="pointerout",Te&&g!==gt&&(pt=g.relatedTarget||g.fromElement)&&(ze(pt)||pt[Zn]))break e;if((Ae||Te)&&(Te=Re.window===Re?Re:(Te=Re.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ae?(pt=g.relatedTarget||g.toElement,Ae=we,pt=pt?ze(pt):null,pt!==null&&(Vr=i(pt),jt=pt.tag,pt!==Vr||jt!==5&&jt!==27&&jt!==6)&&(pt=null)):(Ae=null,pt=we),Ae!==pt)){if(jt=jd,De="onMouseLeave",pe="onMouseEnter",de="mouse",(o==="pointerout"||o==="pointerover")&&(jt=Sg,De="onPointerLeave",pe="onPointerEnter",de="pointer"),Vr=Ae==null?Te:lr(Ae),ve=pt==null?Te:lr(pt),Te=new jt(De,de+"leave",Ae,g,Re),Te.target=Vr,Te.relatedTarget=ve,De=null,ze(Re)===we&&(jt=new jt(pe,de+"enter",pt,g,Re),jt.target=ve,jt.relatedTarget=Vr,De=jt),Vr=De,Ae&&pt)t:{for(jt=Z5,pe=Ae,de=pt,ve=0,De=pe;De;De=jt(De))ve++;De=0;for(var Pt=de;Pt;Pt=jt(Pt))De++;for(;0<ve-De;)pe=jt(pe),ve--;for(;0<De-ve;)de=jt(de),De--;for(;ve--;){if(pe===de||de!==null&&pe===de.alternate){jt=pe;break t}pe=jt(pe),de=jt(de)}jt=null}else jt=null;Ae!==null&&LE(je,Te,Ae,jt,!1),pt!==null&&Vr!==null&&LE(je,Vr,pt,jt,!0)}}e:{if(Te=we?lr(we):window,Ae=Te.nodeName&&Te.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&Te.type==="file")var Pr=Qc;else if(wa(Te))if(ji)Pr=Xc;else{Pr=kn;var Tt=Sa}else Ae=Te.nodeName,!Ae||Ae.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?we&&os(we.elementType)&&(Pr=Qc):Pr=zl;if(Pr&&(Pr=Pr(o,we))){Mi(je,Pr,g,Re);break e}Tt&&Tt(o,Te,we),o==="focusout"&&we&&Te.type==="number"&&we.memoizedProps.value!=null&&ss(Te,"number",Te.value)}switch(Tt=we?lr(we):window,o){case"focusin":(wa(Tt)||Tt.contentEditable==="true")&&(St=Tt,et=we,cr=null);break;case"focusout":cr=et=St=null;break;case"mousedown":Ln=!0;break;case"contextmenu":case"mouseup":case"dragend":Ln=!1,hn(je,g,Re);break;case"selectionchange":if(kt)break;case"keydown":case"keyup":hn(je,g,Re)}var Zt;if(Le)e:{switch(o){case"compositionstart":var yr="onCompositionStart";break e;case"compositionend":yr="onCompositionEnd";break e;case"compositionupdate":yr="onCompositionUpdate";break e}yr=void 0}else ta?Wt(o,g)&&(yr="onCompositionEnd"):o==="keydown"&&g.keyCode===229&&(yr="onCompositionStart");yr&&(Ue&&g.locale!=="ko"&&(ta||yr!=="onCompositionStart"?yr==="onCompositionEnd"&&ta&&(Zt=bg()):(Ns=Re,tn="value"in Ns?Ns.value:Ns.textContent,ta=!0)),Tt=hf(we,yr),0<Tt.length&&(yr=new vg(yr,o,null,g,Re),je.push({event:yr,listeners:Tt}),Zt?yr.data=Zt:(Zt=wn(g),Zt!==null&&(yr.data=Zt)))),(Zt=Ve?mi(o,g):Gn(o,g))&&(yr=hf(we,"onBeforeInput"),0<yr.length&&(Tt=new vg("onBeforeInput","beforeinput",null,g,Re),je.push({event:Tt,listeners:yr}),Tt.data=Zt)),Q5(je,o,we,g,Re)}AE(je,c)})}function hh(o,c,g){return{instance:o,listener:c,currentTarget:g}}function hf(o,c){for(var g=c+"Capture",y=[];o!==null;){var w=o,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=Ii(o,g),w!=null&&y.unshift(hh(o,w,S)),w=Ii(o,c),w!=null&&y.push(hh(o,w,S))),o.tag===3)return y;o=o.return}return[]}function Z5(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function LE(o,c,g,y,w){for(var S=c._reactName,P=[];g!==null&&g!==y;){var V=g,oe=V.alternate,we=V.stateNode;if(V=V.tag,oe!==null&&oe===y)break;V!==5&&V!==26&&V!==27||we===null||(oe=we,w?(we=Ii(g,S),we!=null&&P.unshift(hh(g,we,oe))):w||(we=Ii(g,S),we!=null&&P.push(hh(g,we,oe)))),g=g.return}P.length!==0&&o.push({event:c,listeners:P})}var ej=/\r\n?/g,tj=/\u0000|\uFFFD/g;function PE(o){return(typeof o=="string"?o:""+o).replace(ej,`
`).replace(tj,"")}function RE(o,c){return c=PE(c),PE(o)===c}function Wr(o,c,g,y,w,S){switch(g){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Dt(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Dt(o,""+y);break;case"className":oa(o,"class",y);break;case"tabIndex":oa(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":oa(o,g,y);break;case"style":kr(o,y,S);break;case"data":if(c!=="object"){oa(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||g!=="href")){o.removeAttribute(g);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(g);break}y=gi(""+y),o.setAttribute(g,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(g==="formAction"?(c!=="input"&&Wr(o,c,"name",w.name,w,null),Wr(o,c,"formEncType",w.formEncType,w,null),Wr(o,c,"formMethod",w.formMethod,w,null),Wr(o,c,"formTarget",w.formTarget,w,null)):(Wr(o,c,"encType",w.encType,w,null),Wr(o,c,"method",w.method,w,null),Wr(o,c,"target",w.target,w,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(g);break}y=gi(""+y),o.setAttribute(g,y);break;case"onClick":y!=null&&(o.onclick=tt);break;case"onScroll":y!=null&&dr("scroll",o);break;case"onScrollEnd":y!=null&&dr("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(g=y.__html,g!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=g}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}g=gi(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(g,""+y):o.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(g,""):o.removeAttribute(g);break;case"capture":case"download":y===!0?o.setAttribute(g,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(g,y):o.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(g,y):o.removeAttribute(g);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(g):o.setAttribute(g,y);break;case"popover":dr("beforetoggle",o),dr("toggle",o),xn(o,"popover",y);break;case"xlinkActuate":ba(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ba(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ba(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ba(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ba(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ba(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ba(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ba(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ba(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xn(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=ls.get(g)||g,xn(o,g,y))}}function tx(o,c,g,y,w,S){switch(g){case"style":kr(o,y,S);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(g=y.__html,g!=null){if(w.children!=null)throw Error(n(60));o.innerHTML=g}}break;case"children":typeof y=="string"?Dt(o,y):(typeof y=="number"||typeof y=="bigint")&&Dt(o,""+y);break;case"onScroll":y!=null&&dr("scroll",o);break;case"onScrollEnd":y!=null&&dr("scrollend",o);break;case"onClick":y!=null&&(o.onclick=tt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hn.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(w=g.endsWith("Capture"),c=g.slice(2,w?g.length-7:void 0),S=o[Or]||null,S=S!=null?S[g]:null,typeof S=="function"&&o.removeEventListener(c,S,w),typeof y=="function")){typeof S!="function"&&S!==null&&(g in o?o[g]=null:o.hasAttribute(g)&&o.removeAttribute(g)),o.addEventListener(c,y,w);break e}g in o?o[g]=y:y===!0?o.setAttribute(g,""):xn(o,g,y)}}}function pa(o,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dr("error",o),dr("load",o);var y=!1,w=!1,S;for(S in g)if(g.hasOwnProperty(S)){var P=g[S];if(P!=null)switch(S){case"src":y=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Wr(o,c,S,P,g,null)}}w&&Wr(o,c,"srcSet",g.srcSet,g,null),y&&Wr(o,c,"src",g.src,g,null);return;case"input":dr("invalid",o);var V=S=P=w=null,oe=null,we=null;for(y in g)if(g.hasOwnProperty(y)){var Re=g[y];if(Re!=null)switch(y){case"name":w=Re;break;case"type":P=Re;break;case"checked":oe=Re;break;case"defaultChecked":we=Re;break;case"value":S=Re;break;case"defaultValue":V=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,c));break;default:Wr(o,c,y,Re,g,null)}}no(o,S,V,oe,we,P,w,!1);return;case"select":dr("invalid",o),y=P=S=null;for(w in g)if(g.hasOwnProperty(w)&&(V=g[w],V!=null))switch(w){case"value":S=V;break;case"defaultValue":P=V;break;case"multiple":y=V;default:Wr(o,c,w,V,g,null)}c=S,g=P,o.multiple=!!y,c!=null?vn(o,!!y,c,!1):g!=null&&vn(o,!!y,g,!0);return;case"textarea":dr("invalid",o),S=w=y=null;for(P in g)if(g.hasOwnProperty(P)&&(V=g[P],V!=null))switch(P){case"value":y=V;break;case"defaultValue":w=V;break;case"children":S=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(91));break;default:Wr(o,c,P,V,g,null)}ao(o,y,w,S);return;case"option":for(oe in g)if(g.hasOwnProperty(oe)&&(y=g[oe],y!=null))switch(oe){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Wr(o,c,oe,y,g,null)}return;case"dialog":dr("beforetoggle",o),dr("toggle",o),dr("cancel",o),dr("close",o);break;case"iframe":case"object":dr("load",o);break;case"video":case"audio":for(y=0;y<dh.length;y++)dr(dh[y],o);break;case"image":dr("error",o),dr("load",o);break;case"details":dr("toggle",o);break;case"embed":case"source":case"link":dr("error",o),dr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in g)if(g.hasOwnProperty(we)&&(y=g[we],y!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Wr(o,c,we,y,g,null)}return;default:if(os(c)){for(Re in g)g.hasOwnProperty(Re)&&(y=g[Re],y!==void 0&&tx(o,c,Re,y,g,void 0));return}}for(V in g)g.hasOwnProperty(V)&&(y=g[V],y!=null&&Wr(o,c,V,y,g,null))}function rj(o,c,g,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,P=null,V=null,oe=null,we=null,Re=null;for(Ae in g){var je=g[Ae];if(g.hasOwnProperty(Ae)&&je!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":oe=je;default:y.hasOwnProperty(Ae)||Wr(o,c,Ae,null,y,je)}}for(var Te in y){var Ae=y[Te];if(je=g[Te],y.hasOwnProperty(Te)&&(Ae!=null||je!=null))switch(Te){case"type":S=Ae;break;case"name":w=Ae;break;case"checked":we=Ae;break;case"defaultChecked":Re=Ae;break;case"value":P=Ae;break;case"defaultValue":V=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(n(137,c));break;default:Ae!==je&&Wr(o,c,Te,Ae,y,je)}}As(o,P,V,oe,we,Re,S,w);return;case"select":Ae=P=V=Te=null;for(S in g)if(oe=g[S],g.hasOwnProperty(S)&&oe!=null)switch(S){case"value":break;case"multiple":Ae=oe;default:y.hasOwnProperty(S)||Wr(o,c,S,null,y,oe)}for(w in y)if(S=y[w],oe=g[w],y.hasOwnProperty(w)&&(S!=null||oe!=null))switch(w){case"value":Te=S;break;case"defaultValue":V=S;break;case"multiple":P=S;default:S!==oe&&Wr(o,c,w,S,y,oe)}c=V,g=P,y=Ae,Te!=null?vn(o,!!g,Te,!1):!!y!=!!g&&(c!=null?vn(o,!!g,c,!0):vn(o,!!g,g?[]:"",!1));return;case"textarea":Ae=Te=null;for(V in g)if(w=g[V],g.hasOwnProperty(V)&&w!=null&&!y.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Wr(o,c,V,null,y,w)}for(P in y)if(w=y[P],S=g[P],y.hasOwnProperty(P)&&(w!=null||S!=null))switch(P){case"value":Te=w;break;case"defaultValue":Ae=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:w!==S&&Wr(o,c,P,w,y,S)}Gc(o,Te,Ae);return;case"option":for(var pt in g)if(Te=g[pt],g.hasOwnProperty(pt)&&Te!=null&&!y.hasOwnProperty(pt))switch(pt){case"selected":o.selected=!1;break;default:Wr(o,c,pt,null,y,Te)}for(oe in y)if(Te=y[oe],Ae=g[oe],y.hasOwnProperty(oe)&&Te!==Ae&&(Te!=null||Ae!=null))switch(oe){case"selected":o.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:Wr(o,c,oe,Te,y,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in g)Te=g[jt],g.hasOwnProperty(jt)&&Te!=null&&!y.hasOwnProperty(jt)&&Wr(o,c,jt,null,y,Te);for(we in y)if(Te=y[we],Ae=g[we],y.hasOwnProperty(we)&&Te!==Ae&&(Te!=null||Ae!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,c));break;default:Wr(o,c,we,Te,y,Ae)}return;default:if(os(c)){for(var Vr in g)Te=g[Vr],g.hasOwnProperty(Vr)&&Te!==void 0&&!y.hasOwnProperty(Vr)&&tx(o,c,Vr,void 0,y,Te);for(Re in y)Te=y[Re],Ae=g[Re],!y.hasOwnProperty(Re)||Te===Ae||Te===void 0&&Ae===void 0||tx(o,c,Re,Te,y,Ae);return}}for(var pe in g)Te=g[pe],g.hasOwnProperty(pe)&&Te!=null&&!y.hasOwnProperty(pe)&&Wr(o,c,pe,null,y,Te);for(je in y)Te=y[je],Ae=g[je],!y.hasOwnProperty(je)||Te===Ae||Te==null&&Ae==null||Wr(o,c,je,Te,y,Ae)}function IE(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nj(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,g=performance.getEntriesByType("resource"),y=0;y<g.length;y++){var w=g[y],S=w.transferSize,P=w.initiatorType,V=w.duration;if(S&&V&&IE(P)){for(P=0,V=w.responseEnd,y+=1;y<g.length;y++){var oe=g[y],we=oe.startTime;if(we>V)break;var Re=oe.transferSize,je=oe.initiatorType;Re&&IE(je)&&(oe=oe.responseEnd,P+=Re*(oe<V?1:(V-we)/(oe-we)))}if(--y,c+=8*(S+P)/(w.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var rx=null,nx=null;function pf(o){return o.nodeType===9?o:o.ownerDocument}function DE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ME(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function ax(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ix=null;function aj(){var o=window.event;return o&&o.type==="popstate"?o===ix?!1:(ix=o,!0):(ix=null,!1)}var OE=typeof setTimeout=="function"?setTimeout:void 0,ij=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,sj=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(o){return jE.resolve(null).then(o).catch(oj)}:OE;function oj(o){setTimeout(function(){throw o})}function sl(o){return o==="head"}function BE(o,c){var g=c,y=0;do{var w=g.nextSibling;if(o.removeChild(g),w&&w.nodeType===8)if(g=w.data,g==="/$"||g==="/&"){if(y===0){o.removeChild(w),Tu(c);return}y--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")y++;else if(g==="html")ph(o.ownerDocument.documentElement);else if(g==="head"){g=o.ownerDocument.head,ph(g);for(var S=g.firstChild;S;){var P=S.nextSibling,V=S.nodeName;S[ht]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&S.rel.toLowerCase()==="stylesheet"||g.removeChild(S),S=P}}else g==="body"&&ph(o.ownerDocument.body);g=w}while(g);Tu(c)}function FE(o,c){var g=o;o=0;do{var y=g.nextSibling;if(g.nodeType===1?c?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(c?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),y&&y.nodeType===8)if(g=y.data,g==="/$"){if(o===0)break;o--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||o++;g=y}while(g)}function sx(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":sx(g),ce(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}o.removeChild(g)}}function lj(o,c,g,y){for(;o.nodeType===1;){var w=g;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[ht])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==w.rel||o.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||o.getAttribute("title")!==(w.title==null?null:w.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(w.src==null?null:w.src)||o.getAttribute("type")!==(w.type==null?null:w.type)||o.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=Hi(o.nextSibling),o===null)break}return null}function cj(o,c,g){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!g||(o=Hi(o.nextSibling),o===null))return null;return o}function zE(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Hi(o.nextSibling),o===null))return null;return o}function ox(o){return o.data==="$?"||o.data==="$~"}function lx(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function uj(o,c){var g=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||g.readyState!=="loading")c();else{var y=function(){c(),g.removeEventListener("DOMContentLoaded",y)};g.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Hi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var cx=null;function UE(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="/$"||g==="/&"){if(c===0)return Hi(o.nextSibling);c--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||c++}o=o.nextSibling}return null}function $E(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(c===0)return o;c--}else g!=="/$"&&g!=="/&"||c++}o=o.previousSibling}return null}function qE(o,c,g){switch(c=pf(g),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function ph(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ce(o)}var Gi=new Map,HE=new Set;function gf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var vo=K.d;K.d={f:dj,r:hj,D:pj,C:gj,L:fj,m:mj,X:bj,S:yj,M:xj};function dj(){var o=vo.f(),c=af();return o||c}function hj(o){var c=it(o);c!==null&&c.tag===5&&c.type==="form"?ok(c):vo.r(o)}var vu=typeof document>"u"?null:document;function GE(o,c,g){var y=vu;if(y&&typeof c=="string"&&c){var w=la(c);w='link[rel="'+o+'"][href="'+w+'"]',typeof g=="string"&&(w+='[crossorigin="'+g+'"]'),HE.has(w)||(HE.add(w),o={rel:o,crossOrigin:g,href:c},y.querySelector(w)===null&&(c=y.createElement("link"),pa(c,"link",o),Vt(c),y.head.appendChild(c)))}}function pj(o){vo.D(o),GE("dns-prefetch",o,null)}function gj(o,c){vo.C(o,c),GE("preconnect",o,c)}function fj(o,c,g){vo.L(o,c,g);var y=vu;if(y&&o&&c){var w='link[rel="preload"][as="'+la(c)+'"]';c==="image"&&g&&g.imageSrcSet?(w+='[imagesrcset="'+la(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(w+='[imagesizes="'+la(g.imageSizes)+'"]')):w+='[href="'+la(o)+'"]';var S=w;switch(c){case"style":S=wu(o);break;case"script":S=Su(o)}Gi.has(S)||(o=f({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:o,as:c},g),Gi.set(S,o),y.querySelector(w)!==null||c==="style"&&y.querySelector(gh(S))||c==="script"&&y.querySelector(fh(S))||(c=y.createElement("link"),pa(c,"link",o),Vt(c),y.head.appendChild(c)))}}function mj(o,c){vo.m(o,c);var g=vu;if(g&&o){var y=c&&typeof c.as=="string"?c.as:"script",w='link[rel="modulepreload"][as="'+la(y)+'"][href="'+la(o)+'"]',S=w;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Su(o)}if(!Gi.has(S)&&(o=f({rel:"modulepreload",href:o},c),Gi.set(S,o),g.querySelector(w)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(fh(S)))return}y=g.createElement("link"),pa(y,"link",o),Vt(y),g.head.appendChild(y)}}}function yj(o,c,g){vo.S(o,c,g);var y=vu;if(y&&o){var w=Xr(y).hoistableStyles,S=wu(o);c=c||"default";var P=w.get(S);if(!P){var V={loading:0,preload:null};if(P=y.querySelector(gh(S)))V.loading=5;else{o=f({rel:"stylesheet",href:o,"data-precedence":c},g),(g=Gi.get(S))&&ux(o,g);var oe=P=y.createElement("link");Vt(oe),pa(oe,"link",o),oe._p=new Promise(function(we,Re){oe.onload=we,oe.onerror=Re}),oe.addEventListener("load",function(){V.loading|=1}),oe.addEventListener("error",function(){V.loading|=2}),V.loading|=4,ff(P,c,y)}P={type:"stylesheet",instance:P,count:1,state:V},w.set(S,P)}}}function bj(o,c){vo.X(o,c);var g=vu;if(g&&o){var y=Xr(g).hoistableScripts,w=Su(o),S=y.get(w);S||(S=g.querySelector(fh(w)),S||(o=f({src:o,async:!0},c),(c=Gi.get(w))&&dx(o,c),S=g.createElement("script"),Vt(S),pa(S,"link",o),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(w,S))}}function xj(o,c){vo.M(o,c);var g=vu;if(g&&o){var y=Xr(g).hoistableScripts,w=Su(o),S=y.get(w);S||(S=g.querySelector(fh(w)),S||(o=f({src:o,async:!0,type:"module"},c),(c=Gi.get(w))&&dx(o,c),S=g.createElement("script"),Vt(S),pa(S,"link",o),g.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(w,S))}}function WE(o,c,g,y){var w=(w=xe.current)?gf(w):null;if(!w)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=wu(g.href),g=Xr(w).hoistableStyles,y=g.get(c),y||(y={type:"style",instance:null,count:0,state:null},g.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){o=wu(g.href);var S=Xr(w).hoistableStyles,P=S.get(o);if(P||(w=w.ownerDocument||w,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,P),(S=w.querySelector(gh(o)))&&!S._p&&(P.instance=S,P.state.loading=5),Gi.has(o)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gi.set(o,g),S||vj(w,o,g,P.state))),c&&y===null)throw Error(n(528,""));return P}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Su(g),g=Xr(w).hoistableScripts,y=g.get(c),y||(y={type:"script",instance:null,count:0,state:null},g.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function wu(o){return'href="'+la(o)+'"'}function gh(o){return'link[rel="stylesheet"]['+o+"]"}function VE(o){return f({},o,{"data-precedence":o.precedence,precedence:null})}function vj(o,c,g,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),pa(c,"link",g),Vt(c),o.head.appendChild(c))}function Su(o){return'[src="'+la(o)+'"]'}function fh(o){return"script[async]"+o}function YE(o,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+la(g.href)+'"]');if(y)return c.instance=y,Vt(y),y;var w=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),Vt(y),pa(y,"style",w),ff(y,g.precedence,o),c.instance=y;case"stylesheet":w=wu(g.href);var S=o.querySelector(gh(w));if(S)return c.state.loading|=4,c.instance=S,Vt(S),S;y=VE(g),(w=Gi.get(w))&&ux(y,w),S=(o.ownerDocument||o).createElement("link"),Vt(S);var P=S;return P._p=new Promise(function(V,oe){P.onload=V,P.onerror=oe}),pa(S,"link",y),c.state.loading|=4,ff(S,g.precedence,o),c.instance=S;case"script":return S=Su(g.src),(w=o.querySelector(fh(S)))?(c.instance=w,Vt(w),w):(y=g,(w=Gi.get(S))&&(y=f({},g),dx(y,w)),o=o.ownerDocument||o,w=o.createElement("script"),Vt(w),pa(w,"link",y),o.head.appendChild(w),c.instance=w);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,ff(y,g.precedence,o));return c.instance}function ff(o,c,g){for(var y=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=y.length?y[y.length-1]:null,S=w,P=0;P<y.length;P++){var V=y[P];if(V.dataset.precedence===c)S=V;else if(S!==w)break}S?S.parentNode.insertBefore(o,S.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(o,c.firstChild))}function ux(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function dx(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var mf=null;function QE(o,c,g){if(mf===null){var y=new Map,w=mf=new Map;w.set(g,y)}else w=mf,y=w.get(g),y||(y=new Map,w.set(g,y));if(y.has(o))return y;for(y.set(o,null),g=g.getElementsByTagName(o),w=0;w<g.length;w++){var S=g[w];if(!(S[ht]||S[ut]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var P=S.getAttribute(c)||"";P=o+P;var V=y.get(P);V?V.push(S):y.set(P,[S])}}return y}function KE(o,c,g){o=o.ownerDocument||o,o.head.insertBefore(g,c==="title"?o.querySelector("head > title"):null)}function wj(o,c,g){if(g===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function XE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function Sj(o,c,g,y){if(g.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var w=wu(y.href),S=c.querySelector(gh(w));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=yf.bind(o),c.then(o,o)),g.state.loading|=4,g.instance=S,Vt(S);return}S=c.ownerDocument||c,y=VE(y),(w=Gi.get(w))&&ux(y,w),S=S.createElement("link"),Vt(S);var P=S;P._p=new Promise(function(V,oe){P.onload=V,P.onerror=oe}),pa(S,"link",y),g.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(g,c),(c=g.state.preload)&&(g.state.loading&3)===0&&(o.count++,g=yf.bind(o),c.addEventListener("load",g),c.addEventListener("error",g))}}var hx=0;function Tj(o,c){return o.stylesheets&&o.count===0&&xf(o,o.stylesheets),0<o.count||0<o.imgCount?function(g){var y=setTimeout(function(){if(o.stylesheets&&xf(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+c);0<o.imgBytes&&hx===0&&(hx=62500*nj());var w=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&xf(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>hx?50:800)+c);return o.unsuspend=g,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(w)}}:null}function yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var bf=null;function xf(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,bf=new Map,c.forEach(kj,o),bf=null,yf.call(o))}function kj(o,c){if(!(c.state.loading&4)){var g=bf.get(o);if(g)var y=g.get(null);else{g=new Map,bf.set(o,g);for(var w=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var P=w[S];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(g.set(P.dataset.precedence,P),y=P)}y&&g.set(null,y)}w=c.instance,P=w.getAttribute("data-precedence"),S=g.get(P)||y,S===y&&g.set(null,w),g.set(P,w),this.count++,y=yf.bind(this),w.addEventListener("load",y),w.addEventListener("error",y),S?S.parentNode.insertBefore(w,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(w,o.firstChild)),c.state.loading|=4}}var mh={$$typeof:A,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Ej(o,c,g,y,w,S,P,V,oe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.hiddenUpdates=Tr(null),this.identifierPrefix=y,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function JE(o,c,g,y,w,S,P,V,oe,we,Re,je){return o=new Ej(o,c,g,P,oe,we,Re,je,V),c=1,S===!0&&(c|=24),S=xi(3,null,null,c),o.current=S,S.stateNode=o,c=Gy(),c.refCount++,o.pooledCache=c,c.refCount++,S.memoizedState={element:y,isDehydrated:g,cache:c},Qy(S),o}function ZE(o){return o?(o=Zc,o):Zc}function e2(o,c,g,y,w,S){w=ZE(w),y.context===null?y.context=w:y.pendingContext=w,y=Qo(c),y.payload={element:g},S=S===void 0?null:S,S!==null&&(y.callback=S),g=Ko(o,y,c),g!==null&&(ti(g,o,c),Yd(g,o,c))}function t2(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var g=o.retryLane;o.retryLane=g!==0&&g<c?g:c}}function px(o,c){t2(o,c),(o=o.alternate)&&t2(o,c)}function r2(o){if(o.tag===13||o.tag===31){var c=Ul(o,67108864);c!==null&&ti(c,o,67108864),px(o,67108864)}}function n2(o){if(o.tag===13||o.tag===31){var c=ki();c=rr(c);var g=Ul(o,c);g!==null&&ti(g,o,c),px(o,c)}}var vf=!0;function Cj(o,c,g,y){var w=j.T;j.T=null;var S=K.p;try{K.p=2,gx(o,c,g,y)}finally{K.p=S,j.T=w}}function _j(o,c,g,y){var w=j.T;j.T=null;var S=K.p;try{K.p=8,gx(o,c,g,y)}finally{K.p=S,j.T=w}}function gx(o,c,g,y){if(vf){var w=fx(y);if(w===null)ex(o,c,y,wf,g),i2(o,y);else if(Nj(w,o,c,g,y))y.stopPropagation();else if(i2(o,y),c&4&&-1<Aj.indexOf(o)){for(;w!==null;){var S=it(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var P=bn(S.pendingLanes);if(P!==0){var V=S;for(V.pendingLanes|=2,V.entangledLanes|=2;P;){var oe=1<<31-ar(P);V.entanglements[1]|=oe,P&=~oe}Is(S),(Dr&6)===0&&(rf=Ut()+500,uh(0))}}break;case 31:case 13:V=Ul(S,2),V!==null&&ti(V,S,2),af(),px(S,2)}if(S=fx(y),S===null&&ex(o,c,y,wf,g),S===w)break;w=S}w!==null&&y.stopPropagation()}else ex(o,c,y,null,g)}}function fx(o){return o=Lt(o),mx(o)}var wf=null;function mx(o){if(wf=null,o=ze(o),o!==null){var c=i(o);if(c===null)o=null;else{var g=c.tag;if(g===13){if(o=s(c),o!==null)return o;o=null}else if(g===31){if(o=l(c),o!==null)return o;o=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return wf=o,null}function a2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yn()){case ae:return 2;case Ce:return 8;case rt:case Qe:return 32;case dt:return 268435456;default:return 32}default:return 32}}var yx=!1,ol=null,ll=null,cl=null,yh=new Map,bh=new Map,ul=[],Aj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function i2(o,c){switch(o){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":yh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":bh.delete(c.pointerId)}}function xh(o,c,g,y,w,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:g,eventSystemFlags:y,nativeEvent:S,targetContainers:[w]},c!==null&&(c=it(c),c!==null&&r2(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function Nj(o,c,g,y,w){switch(c){case"focusin":return ol=xh(ol,o,c,g,y,w),!0;case"dragenter":return ll=xh(ll,o,c,g,y,w),!0;case"mouseover":return cl=xh(cl,o,c,g,y,w),!0;case"pointerover":var S=w.pointerId;return yh.set(S,xh(yh.get(S)||null,o,c,g,y,w)),!0;case"gotpointercapture":return S=w.pointerId,bh.set(S,xh(bh.get(S)||null,o,c,g,y,w)),!0}return!1}function s2(o){var c=ze(o.target);if(c!==null){var g=i(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){o.blockedOn=c,pi(o.priority,function(){n2(g)});return}}else if(c===31){if(c=l(g),c!==null){o.blockedOn=c,pi(o.priority,function(){n2(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){o.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Sf(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var g=fx(o.nativeEvent);if(g===null){g=o.nativeEvent;var y=new g.constructor(g.type,g);gt=y,g.target.dispatchEvent(y),gt=null}else return c=it(g),c!==null&&r2(c),o.blockedOn=g,!1;c.shift()}return!0}function o2(o,c,g){Sf(o)&&g.delete(c)}function Lj(){yx=!1,ol!==null&&Sf(ol)&&(ol=null),ll!==null&&Sf(ll)&&(ll=null),cl!==null&&Sf(cl)&&(cl=null),yh.forEach(o2),bh.forEach(o2)}function Tf(o,c){o.blockedOn===c&&(o.blockedOn=null,yx||(yx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lj)))}var kf=null;function l2(o){kf!==o&&(kf=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){kf===o&&(kf=null);for(var c=0;c<o.length;c+=3){var g=o[c],y=o[c+1],w=o[c+2];if(typeof y!="function"){if(mx(y||g)===null)continue;break}var S=it(g);S!==null&&(o.splice(c,3),c-=3,fb(S,{pending:!0,data:w,method:g.method,action:y},y,w))}}))}function Tu(o){function c(oe){return Tf(oe,o)}ol!==null&&Tf(ol,o),ll!==null&&Tf(ll,o),cl!==null&&Tf(cl,o),yh.forEach(c),bh.forEach(c);for(var g=0;g<ul.length;g++){var y=ul[g];y.blockedOn===o&&(y.blockedOn=null)}for(;0<ul.length&&(g=ul[0],g.blockedOn===null);)s2(g),g.blockedOn===null&&ul.shift();if(g=(o.ownerDocument||o).$$reactFormReplay,g!=null)for(y=0;y<g.length;y+=3){var w=g[y],S=g[y+1],P=w[Or]||null;if(typeof S=="function")P||l2(g);else if(P){var V=null;if(S&&S.hasAttribute("formAction")){if(w=S,P=S[Or]||null)V=P.formAction;else if(mx(w)!==null)continue}else V=P.action;typeof V=="function"?g[y+1]=V:(g.splice(y,3),y-=3),l2(g)}}}function c2(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(P){return w=P})},focusReset:"manual",scroll:"manual"})}function c(){w!==null&&(w(),w=null),y||setTimeout(g,20)}function g(){if(!y&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,w=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(g,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),w!==null&&(w(),w=null)}}}function bx(o){this._internalRoot=o}Ef.prototype.render=bx.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var g=c.current,y=ki();e2(g,y,o,c,null,null)},Ef.prototype.unmount=bx.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;e2(o.current,2,null,o,null,null),af(),c[Zn]=null}};function Ef(o){this._internalRoot=o}Ef.prototype.unstable_scheduleHydration=function(o){if(o){var c=hi();o={blockedOn:null,target:o,priority:c};for(var g=0;g<ul.length&&c!==0&&c<ul[g].priority;g++);ul.splice(g,0,o),g===0&&s2(o)}};var u2=t.version;if(u2!=="19.2.0")throw Error(n(527,u2,"19.2.0"));K.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(c),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var Pj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{br=Cf.inject(Pj),Sr=Cf}catch{}}return wh.createRoot=function(o,c){if(!a(o))throw Error(n(299));var g=!1,y="",w=yk,S=bk,P=xk;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),c=JE(o,1,!1,null,null,g,y,null,w,S,P,c2),o[Zn]=c.current,Zb(o),new bx(c)},wh.hydrateRoot=function(o,c,g){if(!a(o))throw Error(n(299));var y=!1,w="",S=yk,P=bk,V=xk,oe=null;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(w=g.identifierPrefix),g.onUncaughtError!==void 0&&(S=g.onUncaughtError),g.onCaughtError!==void 0&&(P=g.onCaughtError),g.onRecoverableError!==void 0&&(V=g.onRecoverableError),g.formState!==void 0&&(oe=g.formState)),c=JE(o,1,!0,c,g??null,y,w,oe,S,P,V,c2),c.context=ZE(null),g=c.current,y=ki(),y=rr(y),w=Qo(y),w.callback=null,Ko(g,w,y),g=y,c.current.lanes=g,Lr(c,g),Is(c),o[Zn]=c.current,Zb(o),new Ef(c)},wh.version="19.2.0",wh}var v2;function zj(){if(v2)return vx.exports;v2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vx.exports=Fj(),vx.exports}var Uj=zj();const Gt=e=>typeof e=="string",Sh=()=>{let e,t;const r=new Promise((n,a)=>{e=n,t=a});return r.resolve=e,r.reject=t,r},w2=e=>e==null?"":""+e,$j=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},qj=/###/g,S2=e=>e&&e.indexOf("###")>-1?e.replace(qj,"."):e,T2=e=>!e||Gt(e),lp=(e,t,r)=>{const n=Gt(t)?t.split("."):t;let a=0;for(;a<n.length-1;){if(T2(e))return{};const i=S2(n[a]);!e[i]&&r&&(e[i]=new r),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++a}return T2(e)?{}:{obj:e,k:S2(n[a])}},k2=(e,t,r)=>{const{obj:n,k:a}=lp(e,t,Object);if(n!==void 0||t.length===1){n[a]=r;return}let i=t[t.length-1],s=t.slice(0,t.length-1),l=lp(e,s,Object);for(;l.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),l=lp(e,s,Object),l?.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=r},Hj=(e,t,r,n)=>{const{obj:a,k:i}=lp(e,t,Object);a[i]=a[i]||[],a[i].push(r)},_m=(e,t)=>{const{obj:r,k:n}=lp(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},Gj=(e,t,r)=>{const n=_m(e,r);return n!==void 0?n:_m(t,r)},$N=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?Gt(e[n])||e[n]instanceof String||Gt(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):$N(e[n],t[n],r):e[n]=t[n]);return e},ku=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Wj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Vj=e=>Gt(e)?e.replace(/[&<>"'\/]/g,t=>Wj[t]):e;class Yj{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const Qj=[" ",",","?","!",";"],Kj=new Yj(20),Xj=(e,t,r)=>{t=t||"",r=r||"";const n=Qj.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;const a=Kj.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!a.test(e);if(!i){const s=e.indexOf(r);s>0&&!a.test(e.substring(0,s))&&(i=!0)}return i},Pv=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let a=e;for(let i=0;i<n.length;){if(!a||typeof a!="object")return;let s,l="";for(let d=i;d<n.length;++d)if(d!==i&&(l+=r),l+=n[d],s=a[l],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&d<n.length-1)continue;i+=d-i+1;break}a=s}return a},Cp=e=>e?.replace("_","-"),Jj={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Am{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||Jj,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,a){return a&&!this.debug?null:(Gt(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Am(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Am(this.logger,t)}}var Gs=new Am;class _0{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(r)||0;this.observers[n].set(r,a+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a.apply(a,[t,...r])})}}class E2 extends _0{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,a={}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,r],n&&(Array.isArray(n)?l.push(...n):Gt(n)&&i?l.push(...n.split(i)):l.push(n)));const d=_m(this.data,l);return!d&&!r&&!n&&t.indexOf(".")>-1&&(t=l[0],r=l[1],n=l.slice(2).join(".")),d||!s||!Gt(n)?d:Pv(this.data?.[t]?.[r],n,i)}addResource(t,r,n,a,i={silent:!1}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[t,r];n&&(l=l.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(l=t.split("."),a=r,r=l[1]),this.addNamespaces(r),k2(this.data,l,a),i.silent||this.emit("added",t,r,n,a)}addResources(t,r,n,a={silent:!1}){for(const i in n)(Gt(n[i])||Array.isArray(n[i]))&&this.addResource(t,r,i,n[i],{silent:!0});a.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,a,i,s={silent:!1,skipCopy:!1}){let l=[t,r];t.indexOf(".")>-1&&(l=t.split("."),a=n,n=r,r=l[1]),this.addNamespaces(r);let d=_m(this.data,l)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?$N(d,n,i):d={...d,...n},k2(this.data,l,d),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var qN={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,a){return e.forEach(i=>{t=this.processors[i]?.process(t,r,n,a)??t}),t}};const HN=Symbol("i18next/PATH_KEY");function Zj(){const e=[],t=Object.create(null);let r;return t.get=(n,a)=>(r?.revoke?.(),a===HN?e:(e.push(a),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Rv(e,t){const{[HN]:r}=e(Zj());return r.join(t?.keySeparator??".")}const C2={},Ex=e=>!Gt(e)&&typeof e!="boolean"&&typeof e!="number";class Nm extends _0{constructor(t,r={}){super(),$j(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gs.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const a=this.resolve(t,n);if(a?.res===void 0)return!1;const i=Ex(a.res);return!(n.returnObjects===!1&&i)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const s=n&&t.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Xj(t,n,a);if(s&&!l){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:Gt(i)?[i]:i};const h=t.split(n);(n!==a||n===a&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),t=h.join(a)}return{key:t,namespaces:Gt(i)?[i]:i}}translate(t,r,n){let a=typeof r=="object"?{...r}:r;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";typeof t=="function"&&(t=Rv(t,{...this.options,...a})),Array.isArray(t)||(t=[String(t)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:d}=this.extractFromKey(t[t.length-1],a),h=d[d.length-1];let p=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const f=a.lng||this.language,m=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return m?i?{res:`${h}${p}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:`${h}${p}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:l;const b=this.resolve(t,a);let x=b?.res;const v=b?.usedKey||l,T=b?.exactUsedKey||l,k=["[object Number]","[object Function]","[object RegExp]"],C=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,D=a.count!==void 0&&!Gt(a.count),B=Nm.hasDefaultValue(a),R=D?this.pluralResolver.getSuffix(f,a.count,a):"",M=a.ordinal&&D?this.pluralResolver.getSuffix(f,a.count,{ordinal:!1}):"",$=D&&!a.ordinal&&a.count===0,W=$&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${R}`]||a[`defaultValue${M}`]||a.defaultValue;let O=x;A&&!x&&B&&(O=W);const Y=Ex(O),X=Object.prototype.toString.apply(O);if(A&&O&&Y&&k.indexOf(X)<0&&!(Gt(C)&&Array.isArray(O))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,O,{...a,ns:d}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(b.res=q,b.usedParams=this.getUsedParamsDetails(a),b):q}if(s){const q=Array.isArray(O),N=q?[]:{},U=q?T:v;for(const j in O)if(Object.prototype.hasOwnProperty.call(O,j)){const K=`${U}${s}${j}`;B&&!x?N[j]=this.translate(K,{...a,defaultValue:Ex(W)?W[j]:void 0,joinArrays:!1,ns:d}):N[j]=this.translate(K,{...a,joinArrays:!1,ns:d}),N[j]===K&&(N[j]=O[j])}x=N}}else if(A&&Gt(C)&&Array.isArray(x))x=x.join(C),x&&(x=this.extendTranslation(x,t,a,n));else{let q=!1,N=!1;!this.isValidLookup(x)&&B&&(q=!0,x=W),this.isValidLookup(x)||(N=!0,x=l);const j=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:x,K=B&&W!==x&&this.options.updateMissing;if(N||q||K){if(this.logger.log(K?"updateKey":"missingKey",f,h,l,K?W:x),s){const F=this.resolve(l,{...a,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q=[];const ie=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ie&&ie[0])for(let F=0;F<ie.length;F++)Q.push(ie[F]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(a.lng||this.language):Q.push(a.lng||this.language);const G=(F,H,I)=>{const ne=B&&I!==x?I:j;this.options.missingKeyHandler?this.options.missingKeyHandler(F,h,H,ne,K,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,h,H,ne,K,a),this.emit("missingKey",F,h,H,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?Q.forEach(F=>{const H=this.pluralResolver.getSuffixes(F,a);$&&a[`defaultValue${this.options.pluralSeparator}zero`]&&H.indexOf(`${this.options.pluralSeparator}zero`)<0&&H.push(`${this.options.pluralSeparator}zero`),H.forEach(I=>{G([F],l+I,a[`defaultValue${I}`]||W)})}):G(Q,l,W))}x=this.extendTranslation(x,t,a,b,n),N&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${h}${p}${l}`),(N||q)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${l}`:l,q?x:void 0,a))}return i?(b.res=x,b.usedParams=this.getUsedParamsDetails(a),b):x}extendTranslation(t,r,n,a,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Gt(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const f=t.match(this.interpolator.nestingRegexp);h=f&&f.length}let p=n.replace&&!Gt(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,n.lng||this.language||a.usedLng,n),d){const f=t.match(this.interpolator.nestingRegexp),m=f&&f.length;h<m&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>i?.[0]===f[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${r[0]}`),null):this.translate(...f,r),n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,l=Gt(s)?[s]:s;return t!=null&&l?.length&&n.applyPostProcessor!==!1&&(t=qN.handle(l,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,a,i,s,l;return Gt(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(d,r),p=h.key;a=p;let f=h.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const m=r.count!==void 0&&!Gt(r.count),b=m&&!r.ordinal&&r.count===0,x=r.context!==void 0&&(Gt(r.context)||typeof r.context=="number")&&r.context!=="",v=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);f.forEach(T=>{this.isValidLookup(n)||(l=T,!C2[`${v[0]}-${T}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(C2[`${v[0]}-${T}`]=!0,this.logger.warn(`key "${a}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(k=>{if(this.isValidLookup(n))return;s=k;const C=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,p,k,T,r);else{let D;m&&(D=this.pluralResolver.getSuffix(k,r.count,r));const B=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.ordinal&&D.indexOf(R)===0&&C.push(p+D.replace(R,this.options.pluralSeparator)),C.push(p+D),b&&C.push(p+B)),x){const M=`${p}${this.options.contextSeparator||"_"}${r.context}`;C.push(M),m&&(r.ordinal&&D.indexOf(R)===0&&C.push(M+D.replace(R,this.options.pluralSeparator)),C.push(M+D),b&&C.push(M+B))}}let A;for(;A=C.pop();)this.isValidLookup(n)||(i=A,n=this.getResource(k,T,A,r))}))})}),{res:n,usedKey:a,exactUsedKey:i,usedLng:s,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,a):this.resourceStore.getResource(t,r,n,a)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Gt(t.replace);let a=n?t.replace:t;if(n&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const i of r)delete a[i]}return a}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class _2{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gs.create("languageUtils")}getScriptPartFromCode(t){if(t=Cp(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Cp(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Gt(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return r=a;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Gt(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),a=[],i=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Gt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):Gt(t)&&i(this.formatLanguageCode(t)),n.forEach(s=>{a.indexOf(s)<0&&i(this.formatLanguageCode(s))}),a}}const A2={zero:0,one:1,two:2,few:3,many:4,other:5},N2={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class eB{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Gs.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Cp(t==="dev"?"en":t),a=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),N2;if(!t.match(/-|_/))return N2;const d=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(d,r)}return this.pluralRulesCache[i]=s,s}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(a=>`${r}${a}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((a,i)=>A2[a]-A2[i]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,r,n={}){const a=this.getRule(t,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const L2=(e,t,r,n=".",a=!0)=>{let i=Gj(e,t,r);return!i&&a&&Gt(r)&&(i=Pv(e,r,n),i===void 0&&(i=Pv(t,r,n))),i},Cx=e=>e.replace(/\$/g,"$$$$");class tB{constructor(t={}){this.logger=Gs.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:a,prefix:i,prefixEscaped:s,suffix:l,suffixEscaped:d,formatSeparator:h,unescapeSuffix:p,unescapePrefix:f,nestingPrefix:m,nestingPrefixEscaped:b,nestingSuffix:x,nestingSuffixEscaped:v,nestingOptionsSeparator:T,maxReplaces:k,alwaysFormat:C}=t.interpolation;this.escape=r!==void 0?r:Vj,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?ku(i):s||"{{",this.suffix=l?ku(l):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=m?ku(m):b||ku("$t("),this.nestingSuffix=x?ku(x):v||ku(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=k||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,a){let i,s,l;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=b=>{if(b.indexOf(this.formatSeparator)<0){const k=L2(r,d,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(k,void 0,n,{...a,...r,interpolationkey:b}):k}const x=b.split(this.formatSeparator),v=x.shift().trim(),T=x.join(this.formatSeparator).trim();return this.format(L2(r,d,v,this.options.keySeparator,this.options.ignoreJSONStructure),T,n,{...a,...r,interpolationkey:v})};this.resetRegExp();const p=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>Cx(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?Cx(this.escape(b)):Cx(b)}].forEach(b=>{for(l=0;i=b.regex.exec(t);){const x=i[1].trim();if(s=h(x),s===void 0)if(typeof p=="function"){const T=p(t,i,a);s=Gt(T)?T:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))s="";else if(f){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),s="";else!Gt(s)&&!this.useRawValueToEscape&&(s=w2(s));const v=b.safeValue(s);if(t=t.replace(i[0],v),f?(b.regex.lastIndex+=s.length,b.regex.lastIndex-=i[0].length):b.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,r,n={}){let a,i,s;const l=(d,h)=>{const p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;const f=d.split(new RegExp(`${p}[ ]*{`));let m=`{${f[1]}`;d=f[0],m=this.interpolate(m,s);const b=m.match(/'/g),x=m.match(/"/g);((b?.length??0)%2===0&&!x||x.length%2!==0)&&(m=m.replace(/'/g,'"'));try{s=JSON.parse(m),h&&(s={...h,...s})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,v),`${d}${p}${m}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,d};for(;a=this.nestingRegexp.exec(t);){let d=[];s={...n},s=s.replace&&!Gt(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(h!==-1&&(d=a[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),a[1]=a[1].slice(0,h)),i=r(l.call(this,a[1].trim(),s),s),i&&a[0]===t&&!Gt(i))return i;Gt(i)||(i=w2(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),i=""),d.length&&(i=d.reduce((p,f)=>this.format(p,f,n.lng,{...n,interpolationkey:a[1].trim()}),i.trim())),t=t.replace(a[0],i),this.regexp.lastIndex=0}return t}}const rB=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);t==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(s=>{if(s){const[l,...d]=s.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),p=l.trim();r[p]||(r[p]=h),h==="false"&&(r[p]=!1),h==="true"&&(r[p]=!0),isNaN(h)||(r[p]=parseInt(h,10))}})}return{formatName:t,formatOptions:r}},P2=e=>{const t={};return(r,n,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const s=n+JSON.stringify(i);let l=t[s];return l||(l=e(Cp(n),a),t[s]=l),l(r)}},nB=e=>(t,r,n)=>e(Cp(r),n)(t);class aB{constructor(t={}){this.logger=Gs.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?P2:nB;this.formats={number:n((a,i)=>{const s=new Intl.NumberFormat(a,{...i});return l=>s.format(l)}),currency:n((a,i)=>{const s=new Intl.NumberFormat(a,{...i,style:"currency"});return l=>s.format(l)}),datetime:n((a,i)=>{const s=new Intl.DateTimeFormat(a,{...i});return l=>s.format(l)}),relativetime:n((a,i)=>{const s=new Intl.RelativeTimeFormat(a,{...i});return l=>s.format(l,i.range||"day")}),list:n((a,i)=>{const s=new Intl.ListFormat(a,{...i});return l=>s.format(l)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=P2(r)}format(t,r,n,a={}){const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,d)=>{const{formatName:h,formatOptions:p}=rB(d);if(this.formats[h]){let f=l;try{const m=a?.formatParams?.[a.interpolationkey]||{},b=m.locale||m.lng||a.locale||a.lng||n;f=this.formats[h](l,b,{...p,...a,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${h}`);return l},t)}}const iB=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class sB extends _0{constructor(t,r,n,a={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=Gs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,a.backend,a)}queueLoad(t,r,n,a){const i={},s={},l={},d={};return t.forEach(h=>{let p=!0;r.forEach(f=>{const m=`${h}|${f}`;!n.reload&&this.store.hasResourceBundle(h,f)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?s[m]===void 0&&(s[m]=!0):(this.state[m]=1,p=!1,s[m]===void 0&&(s[m]=!0),i[m]===void 0&&(i[m]=!0),d[f]===void 0&&(d[f]=!0)))}),p||(l[h]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(d)}}loaded(t,r,n){const a=t.split("|"),i=a[0],s=a[1];r&&this.emit("failedLoading",i,s,r),!r&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const l={};this.queue.forEach(d=>{Hj(d.loaded,[i],s),iB(d,t),r&&d.errors.push(r),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{l[h]||(l[h]={});const p=d.loaded[h];p.length&&p.forEach(f=>{l[h][f]===void 0&&(l[h][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(d=>!d.done)}read(t,r,n,a=0,i=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:a,wait:i,callback:s});return}this.readingCalls++;const l=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(h&&p&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,a+1,i*2,s)},i);return}s(h,p)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const h=d(t,r);h&&typeof h.then=="function"?h.then(p=>l(null,p)).catch(l):l(null,h)}catch(h){l(h)}return}return d(t,r,l)}prepareLoading(t,r,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Gt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Gt(r)&&(r=[r]);const i=this.queueLoad(t,r,n,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),a=n[0],i=n[1];this.read(a,i,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${r}loading namespace ${i} for language ${a} failed`,s),!s&&l&&this.logger.log(`${r}loaded namespace ${i} for language ${a}`,l),this.loaded(t,s,l)})}saveMissing(t,r,n,a,i,s={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...s,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let p;h.length===5?p=h(t,r,n,a,d):p=h(t,r,n,a),p&&typeof p.then=="function"?p.then(f=>l(null,f)).catch(l):l(null,p)}catch(p){l(p)}else h(t,r,n,a,l,d)}!t||!t[0]||this.store.addResource(t[0],r,n,a)}}}const R2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Gt(e[1])&&(t.defaultValue=e[1]),Gt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),I2=e=>(Gt(e.ns)&&(e.ns=[e.ns]),Gt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Gt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),_f=()=>{},oB=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class _p extends _0{constructor(t={},r){if(super(),this.options=I2(t),this.services={},this.logger=Gs,this.modules={external:[]},oB(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Gt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=R2();this.options={...n,...this.options,...I2(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Gs.init(a(this.modules.logger),this.options):Gs.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=aB;const p=new _2(this.options);this.store=new E2(this.options.resources,this.options);const f=this.services;f.logger=Gs,f.resourceStore=this.store,f.languageUtils=p,f.pluralResolver=new eB(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=a(h),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new tB(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new sB(a(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(b,...x)=>{this.emit(b,...x)}),this.modules.languageDetector&&(f.languageDetector=a(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=a(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Nm(this.services,this.options),this.translator.on("*",(b,...x)=>{this.emit(b,...x)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,r||(r=_f),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const l=Sh(),d=()=>{const h=(p,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(p,f)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t,r=_f){let n=r;const a=Gt(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],s=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&i.indexOf(h)<0&&i.push(h)})};a?s(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>s(d)),this.options.preload?.forEach?.(l=>s(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(t,r,n){const a=Sh();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=_f),this.services.backendConnector.reload(t,r,i=>{a.resolve(),n(i)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&qN.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=Sh();this.emit("languageChanging",t);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,d)=>{d?this.isLanguageChangingTo===t&&(a(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),r&&r(l,(...h)=>this.t(...h))},s=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=Gt(l)?l:l&&l[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Gt(l)?[l]:l);h&&(this.language||a(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,p=>{i(p,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),n}getFixedT(t,r,n){const a=(i,s,...l)=>{let d;typeof s!="object"?d=this.options.overloadTranslationOptionHandler([i,s].concat(l)):d={...s},d.lng=d.lng||a.lng,d.lngs=d.lngs||a.lngs,d.ns=d.ns||a.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||a.keyPrefix);const h=this.options.keySeparator||".";let p;return d.keyPrefix&&Array.isArray(i)?p=i.map(f=>(typeof f=="function"&&(f=Rv(f,{...this.options,...s})),`${d.keyPrefix}${h}${f}`)):(typeof i=="function"&&(i=Rv(i,{...this.options,...s})),p=d.keyPrefix?`${d.keyPrefix}${h}${i}`:i),this.t(p,d)};return Gt(t)?a.lng=t:a.lngs=t,a.ns=r,a.keyPrefix=n,a}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const s=(l,d)=>{const h=this.services.backendConnector.state[`${l}|${d}`];return h===-1||h===0||h===2};if(r.precheck){const l=r.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!a||s(i,t)))}loadNamespaces(t,r){const n=Sh();return this.options.ns?(Gt(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),r&&r(a)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=Sh();Gt(t)&&(t=[t]);const a=this.options.preload||[],i=t.filter(s=>a.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=a.concat(i),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const a=new Intl.Locale(t);if(a&&a.getTextInfo){const i=a.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new _2(R2());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new _p(t,r)}cloneInstance(t={},r=_f){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},i=new _p(a);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const l=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((p,f)=>(p[f]={...d[h][f]},p),d[h]),d),{});i.store=new E2(l,a),i.services.resourceStore=i.store}return i.translator=new Nm(i.services,a),i.translator.on("*",(l,...d)=>{i.emit(l,...d)}),i.init(a,r),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ra=_p.createInstance();Ra.createInstance=_p.createInstance;Ra.createInstance;Ra.dir;Ra.init;Ra.loadResources;Ra.reloadResources;Ra.use;Ra.changeLanguage;Ra.getFixedT;Ra.t;Ra.exists;Ra.setDefaultNamespace;Ra.hasLoadedNamespace;Ra.loadNamespaces;Ra.loadLanguages;var _=Yp();const ir=Rc(_),lB=(e,t,r,n)=>{const a=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);xc(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...a):console?.warn&&console.warn(...a)},D2={},GN=(e,t,r,n)=>{xc(r)&&D2[r]||(xc(r)&&(D2[r]=new Date),lB(e,t,r,n))},WN=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},Iv=(e,t,r)=>{e.loadNamespaces(t,WN(e,r))},M2=(e,t,r,n)=>{if(xc(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Iv(e,r,n);r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,WN(e,n))},cB=(e,t,r={})=>!t.languages||!t.languages.length?(GN(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}),xc=e=>typeof e=="string",uB=e=>typeof e=="object"&&e!==null,dB=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,hB={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},pB=e=>hB[e],gB=e=>e.replace(dB,pB);let Dv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:gB};const fB=(e={})=>{Dv={...Dv,...e}},mB=()=>Dv;let VN;const yB=e=>{VN=e},bB=()=>VN,xB={type:"3rdParty",init(e){fB(e.options.react),yB(e)}},vB=_.createContext();class wB{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var _x={exports:{}},Ax={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function SB(){if(O2)return Ax;O2=1;var e=Yp();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function l(f,m){var b=m(),x=n({inst:{value:b,getSnapshot:m}}),v=x[0].inst,T=x[1];return i(function(){v.value=b,v.getSnapshot=m,d(v)&&T({inst:v})},[f,b,m]),a(function(){return d(v)&&T({inst:v}),f(function(){d(v)&&T({inst:v})})},[f]),s(b),b}function d(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!r(f,b)}catch{return!0}}function h(f,m){return m()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Ax.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Ax}var j2;function TB(){return j2||(j2=1,_x.exports=SB()),_x.exports}var kB=TB();const EB=(e,t)=>xc(t)?t:uB(t)&&xc(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,CB={t:EB,ready:!1},_B=()=>()=>{},yd=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:a}=_.useContext(vB)||{},i=r||n||bB();i&&!i.reportNamespaces&&(i.reportNamespaces=new wB),i||GN(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=_.useMemo(()=>({...mB(),...i?.options?.react,...t}),[i,t]),{useSuspense:l,keyPrefix:d}=s,h=_.useMemo(()=>{const A=a||i?.options?.defaultNS;return xc(A)?[A]:A||["translation"]},[e,a,i]);i?.reportNamespaces?.addUsedNamespaces?.(h);const p=_.useCallback(A=>{if(!i)return _B;const{bindI18n:D,bindI18nStore:B}=s;return D&&i.on(D,A),B&&i.store.on(B,A),()=>{D&&D.split(" ").forEach(R=>i.off(R,A)),B&&B.split(" ").forEach(R=>i.store.off(R,A))}},[i,s]),f=_.useRef(),m=_.useCallback(()=>{if(!i)return CB;const A=!!(i.isInitialized||i.initializedStoreOnce)&&h.every(M=>cB(M,i,s)),D=i.getFixedT(t.lng||i.language,s.nsMode==="fallback"?h:h[0],d),B=f.current;if(B&&B.ready===A&&B.lng===(t.lng||i.language)&&B.keyPrefix===d)return B;const R={t:D,ready:A,lng:t.lng||i.language,keyPrefix:d};return f.current=R,R},[i,h,d,s,t.lng]),[b,x]=_.useState(0),{t:v,ready:T}=kB.useSyncExternalStore(p,m,m);_.useEffect(()=>{if(i&&!T&&!l){const A=()=>x(D=>D+1);t.lng?M2(i,t.lng,h,A):Iv(i,h,A)}},[i,t.lng,h,T,l,b]);const k=i||{},C=_.useMemo(()=>{const A=[v,k,T];return A.t=v,A.i18n=k,A.ready=T,A},[v,k,T]);if(i&&l&&!T)throw new Promise(A=>{const D=()=>A();t.lng?M2(i,t.lng,h,D):Iv(i,h,D)});return C},{slice:AB,forEach:NB}=[];function LB(e){return NB.call(AB.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function PB(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const B2=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,RB=function(e,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(t);let i=`${e}=${a}`;if(n.maxAge>0){const s=n.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(s)}`}if(n.domain){if(!B2.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!B2.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},F2={create(e,t,r,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+r*60*1e3)),n&&(a.domain=n),document.cookie=RB(e,t,a)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let a=r[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(t)===0)return a.substring(t.length,a.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var IB={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return F2.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:n,cookieDomain:a,cookieOptions:i}=t;r&&typeof document<"u"&&F2.create(r,e,n,a,i)}},DB={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const i=n.substring(1).split("&");for(let s=0;s<i.length;s++){const l=i[s].indexOf("=");l>0&&i[s].substring(0,l)===t&&(r=i[s].substring(l+1))}}return r}},MB={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:r}=e,n;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const i=a.substring(1);if(t){const s=i.split("&");for(let l=0;l<s.length;l++){const d=s[l].indexOf("=");d>0&&s[l].substring(0,d)===t&&(n=s[l].substring(d+1))}}if(n)return n;if(!n&&r>-1){const s=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return n}};let Eu=null;const z2=()=>{if(Eu!==null)return Eu;try{if(Eu=typeof window<"u"&&window.localStorage!==null,!Eu)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Eu=!1}return Eu};var OB={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&z2())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&z2()&&window.localStorage.setItem(r,e)}};let Cu=null;const U2=()=>{if(Cu!==null)return Cu;try{if(Cu=typeof window<"u"&&window.sessionStorage!==null,!Cu)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Cu=!1}return Cu};var jB={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&U2())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&U2()&&window.sessionStorage.setItem(r,e)}},BB={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:a}=navigator;if(r)for(let i=0;i<r.length;i++)t.push(r[i]);n&&t.push(n),a&&t.push(a)}return t.length>0?t:void 0}},FB={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},zB={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},UB={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[r]}};let YN=!1;try{document.cookie,YN=!0}catch{}const QN=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];YN||QN.splice(1,1);const $B=()=>({order:QN,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class KN{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=LB(r,this.options||{},$B()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(IB),this.addDetector(DB),this.addDetector(OB),this.addDetector(jB),this.addDetector(BB),this.addDetector(FB),this.addDetector(zB),this.addDetector(UB),this.addDetector(MB)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(n=>{if(this.detectors[n]){let a=this.detectors[n].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(r=r.concat(a))}}),r=r.filter(n=>n!=null&&!PB(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}KN.type="languageDetector";const qB={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",clear:"Clear",search:"Search",filter:"Filter",export:"Export",import:"Import",download:"Download",upload:"Upload",copy:"Copy",paste:"Paste",cut:"Cut",undo:"Undo",redo:"Redo",select:"Select",selectAll:"Select All",deselectAll:"Deselect All"},HB={signIn:"Sign in with Google",signOut:"Sign Out",authRequired:"Authentication is required to use this application",tokenExpired:"Your session has expired. Please sign in again.",welcomeBack:"Welcome back!",signInPrompt:"Sign in to continue",signInRequired:"You must sign in to use this feature",signingIn:"Signing in...",signingOut:"Signing out...",researchAgent:"Research Agent",tagline:"AI-powered research assistant",secureAuth:"Secure authentication powered by Google",whyChooseTitle:"Why Choose Research Agent?",whyChooseIntro:"Unlike standard AI chatbots that simply answer questions, Research Agent is your comprehensive research companion built for deep investigation and knowledge building.",keyAdvantagesTitle:"Key Advantages:",webConnected:"Web-Connected Intelligence",webConnectedDesc:"Real-time web search and content extraction ensure you get current, accurate informationnot outdated training data",multiTool:"Multi-Tool Orchestration",multiToolDesc:"Seamlessly combines web search, code execution, YouTube transcripts, image generation, and document analysis in a single conversation",knowledgeBase:"Knowledge Base Integration",knowledgeBaseDesc:"Save findings to your personal knowledge base, create snippets, and build comprehensive research documents over time",advancedPlanning:"Advanced Planning",advancedPlanningDesc:"Generate structured research plans with expert personas, search strategies, and methodological approaches",costEffective:"Smart Model Selection",costEffectiveDesc:"Automatic selection of models that do the job economically or powerfully based on selection strategy. Bring your own keys to save 25%",transparency:"Full Transparency",transparencyDesc:"Track every API call, token usage, and cost in real-time billing dashboard",perfectFor:"Perfect for: Academic research, market analysis, content creation, technical documentation, competitive intelligence, and any task requiring thorough investigation."},GB={placeholder:"Type your message here...",send:"Send",retry:"Retry",stop:"Stop",thinking:"Thinking...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"Edit",delete:"Delete",copy:"Copy",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Select All",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},WB={title:"Research Planning",query:"Research Query",generatePlan:"Generate Plan",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},VB={title:"Settings",language:"Language",selectLanguage:"Select Language",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},YB={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},QB={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},KB={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},XB={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},JB={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},ZB={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},eF={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},tF={title:"Feed",generateFeed:"Generate Feed",generating:"Generating content...",refresh:"Refresh",noItems:"No items yet",emptyMessage:"Your personalized feed will appear here",emptySubMessage:"We'll generate content based on your saved snippets and interests",didYouKnow:"Did You Know",questionAnswer:"Q&A",stash:"Stash",stashed:"Stashed",trash:"Trash",quiz:"Quiz",swipeLeft:"Swipe left to trash",swipeRight:"Swipe right to stash",showMore:"Show more",showLess:"Show less",sources:"Sources",topics:"Topics",settings:{title:"Feed Settings",searchTerms:"Search Terms",searchTermsDesc:"Define up to 5 search topics to personalize your feed",addTerm:"Add Term",removeTerm:"Remove",maxTerms:"Maximum 5 search terms allowed",termExists:"This search term already exists",placeholder:"e.g., 'artificial intelligence', 'climate news'",learnedPreferences:"Learned Preferences",likedTopics:"Liked Topics",dislikedTopics:"Disliked Topics",stashToLearn:"Stash items to help the feed learn what you like",trashToLearn:"Trash items to help the feed learn what to avoid",tips:" Tips for Better Feeds",tipSpecific:'Be specific with search terms (e.g., "quantum computing" vs "technology")',tipStash:"Stash items you find interesting to refine future recommendations",tipTrash:"Trash irrelevant items to improve content quality",tipMix:"Mix broad and specific topics for variety"}},rF={title:"Quiz",startQuiz:"Start Quiz",nextQuestion:"Next Question",previousQuestion:"Previous",submitAnswer:"Submit Answer",viewResults:"View Results",retakeQuiz:"Retake Quiz",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Question",of:"of",yourAnswer:"Your answer",correctAnswer:"Correct answer",explanation:"Explanation",generating:"Generating quiz...",noQuizzes:"No quizzes yet",emptyMessage:"Generate a quiz from any saved snippet or feed item",performance:"Quiz Performance",totalQuizzes:"Total Quizzes",averageScore:"Average Score",questionsAnswered:"Questions Answered",statistics:"Quiz Statistics"},nF={common:qB,auth:HB,chat:GB,planning:WB,settings:VB,languages:YB,billing:QB,errors:KB,swag:XB,tts:JB,playlist:ZB,tools:eF,feed:tF,quiz:rF},aF={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",close:"Cerrar",loading:"Cargando...",error:"Error",success:"xito",confirm:"Confirmar",back:"Atrs",next:"Siguiente",submit:"Enviar",clear:"Limpiar",search:"Buscar",filter:"Filtrar",export:"Exportar",import:"Importar",download:"Descargar",upload:"Subir",copy:"Copiar",paste:"Pegar",cut:"Cortar",undo:"Deshacer",redo:"Rehacer",select:"Seleccionar",selectAll:"Seleccionar todo",deselectAll:"Deseleccionar todo"},iF={signIn:"Iniciar sesin con Google",signOut:"Cerrar sesin",authRequired:"Se requiere autenticacin para usar esta aplicacin",tokenExpired:"Tu sesin ha expirado. Por favor inicia sesin nuevamente.",welcomeBack:"Bienvenido de nuevo!",signInPrompt:"Iniciar sesin para continuar",signInRequired:"Debes iniciar sesin para usar esta funcin",signingIn:"Iniciando sesin...",signingOut:"Cerrando sesin...",researchAgent:"Agente de Investigacin",tagline:"Asistente de investigacin con IA",secureAuth:"Autenticacin segura con tecnologa de Google",whyChooseTitle:"Por qu elegir Research Agent?",whyChooseIntro:"A diferencia de los chatbots de IA estndar que simplemente responden preguntas, Research Agent es tu compaero integral de investigacin diseado para investigaciones profundas y construccin de conocimiento.",keyAdvantagesTitle:"Ventajas Clave:",webConnected:"Inteligencia Conectada a la Web",webConnectedDesc:"La bsqueda web en tiempo real y extraccin de contenido garantizan informacin actual y precisa, no datos de entrenamiento obsoletos",multiTool:"Orquestacin Multi-Herramienta",multiToolDesc:"Combina perfectamente bsqueda web, ejecucin de cdigo, transcripciones de YouTube, generacin de imgenes y anlisis de documentos en una sola conversacin",knowledgeBase:"Integracin de Base de Conocimiento",knowledgeBaseDesc:"Guarda hallazgos en tu base de conocimiento personal, crea fragmentos y construye documentos de investigacin integrales con el tiempo",advancedPlanning:"Planificacin Avanzada",advancedPlanningDesc:"Genera planes de investigacin estructurados con personas expertas, estrategias de bsqueda y enfoques metodolgicos",costEffective:"Seleccin Inteligente de Modelos",costEffectiveDesc:"Seleccin automtica de modelos que hacen el trabajo de manera econmica o potente segn la estrategia de seleccin. Trae tus propias claves para ahorrar un 25%",transparency:"Transparencia Total",transparencyDesc:"Rastrea cada llamada API, uso de tokens y costos en el panel de facturacin en tiempo real",perfectFor:"Perfecto para: Investigacin acadmica, anlisis de mercado, creacin de contenido, documentacin tcnica, inteligencia competitiva y cualquier tarea que requiera investigacin exhaustiva."},sF={placeholder:"Escribe tu mensaje aqu...",send:"Enviar",retry:"Reintentar",stop:"Detener",thinking:"Pensando...",generating:"Generando respuesta...",newChat:"Nuevo Chat",clearHistory:"Limpiar Historial",loadChat:"Cargar Chat",systemPrompt:"Indicacin del Sistema",customInstructions:"Instrucciones Personalizadas",temperature:"Temperatura",maxTokens:"Tokens Mximos",model:"Modelo",provider:"Proveedor",history:"Historial de Chat",continue:"Continuar",regenerate:"Regenerar",edit:"Editar",delete:"Eliminar",copy:"Copiar",copied:"Copiado!",selectFiles:"Seleccionar Archivos",attachFiles:"Adjuntar Archivos",pasteImage:"Pegar Imagen",recording:"Grabando...",voiceInput:"Entrada de Voz",stopRecording:"Detener Grabacin",processing:"Procesando...",noMessages:"No hay mensajes an. Inicia una conversacin!",clearConfirm:"Ests seguro de que quieres limpiar todos los mensajes?",deleteConfirm:"Ests seguro de que quieres eliminar este mensaje?",loadingHistory:"Cargando historial de chat...",savingChat:"Guardando chat...",chatSaved:"Chat guardado exitosamente",chatLoaded:"Chat cargado exitosamente",errorSaving:"Error al guardar el chat",errorLoading:"Error al cargar el chat",signInRequired:"Por favor inicia sesin para usar esta funcin",providerRequired:"Por favor configura al menos un proveedor en Configuracin",messageError:"Error al enviar el mensaje",streamError:"Error en el flujo del mensaje",toolExecution:"Ejecutando herramienta...",toolExecuted:"Herramienta ejecutada exitosamente",toolError:"Error de ejecucin de herramienta",searchingWeb:"Buscando en la web...",scrapingContent:"Extrayendo contenido...",transcribingAudio:"Transcribiendo audio...",generatingImage:"Generando imagen...",generatingChart:"Generando grfico...",executingCode:"Ejecutando cdigo...",planningMode:"Modo de Planificacin",exitPlanning:"Salir de Planificacin",startPlanning:"Iniciar Planificacin",mcpServers:"Servidores MCP",addMCPServer:"Agregar Servidor MCP",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL invlido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Historial de Chat",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversacin",searchProvider:"Proveedor de Bsqueda:",functionCall:"Llamada de Funcin:",code:"Cdigo:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar cdigo al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar cdigo a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasin de deteccin de bots",contentExtracted:"Contenido extrado inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Mtodo de Extraccin:",tier:"Nivel",scrapeTime:"Tiempo de Extraccin:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamao Original:",compressedSize:"Tamao Comprimido:",compression:"Compresin:",compressionStrategy:"Estrategia de Compresin:",basicExtraction:"Extraccin bsica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamao:",titlePrompt:"Ttulo/Indicacin",finalPrompt:"Indicacin Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"Ests seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats an",startChatting:"Comienza a chatear para ver el historial aqu",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Ttulo del Chat",enterChatTitle:"Ingresa un ttulo para este chat...",signInToChat:"Por favor inicia sesin para comenzar a chatear",streamingResponse:"Respuesta en transmisin...",imageAddedToSwag:"Imagen agregada a Swag!",imageAddedWithoutConversion:"Imagen agregada a Swag (sin conversin)!",contentCapturedToSwag:"Contenido capturado a Swag!",contentCapturedWithoutConversion:"Contenido capturado a Swag (sin conversin de imagen)!",planningTransferred:"Indicaciones de planificacin transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificacin",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproduccin",transcriptionStopped:"Transcripcin detenida",failedToStopTranscription:"Error al detener la transcripcin: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamao mximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen ms pequea.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesin para enviar mensajes",foundRelevantChunks:" Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontr contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin l",sessionExpired:"Tu sesin ha expirado. Por favor inicia sesin nuevamente.",todoLimitReached:"Lmite de progresin automtica de tareas alcanzado. Por favor contina manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"Copiado al portapapeles!",outputCopied:"Salida copiada al portapapeles!",codeCopied:"Cdigo copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva lnea,  para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generacin de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Error al cargar el chat",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Eliminar",chatHistoryTitle:"Historial de Chat",noChatHistory:"No se encontr historial de chat. Inicia una conversacin para guardarla automticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat cargado exitosamente",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Seleccionar Todo",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"Ests seguro de que quieres eliminar este chat?",confirmClearHistory:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"Ests seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin ttulo",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuracin del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesin para enviar mensajes"},oF={title:"Planificacin de Investigacin",query:"Consulta de Investigacin",generatePlan:"Generar Plan",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"An no se ha generado ningn plan",enterQuery:"Ingresa tu consulta o tema de investigacin...",researchFocus:"Enfoque de Investigacin",methodology:"Metodologa",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Procesando...",signInToGenerate:"Inicia sesin para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesin para usar la planificacin",signInRequired:"Por favor inicia sesin con Google para usar la funcin de planificacin",authExpired:"Autenticacin expirada. Por favor cierra sesin e inicia sesin nuevamente para continuar.",authRequired:"Se requiere autenticacin. Por favor inicia sesin con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigacin",debugCopied:"Informacin de depuracin copiada al portapapeles!",debugCopyFailed:"Error al copiar informacin de depuracin",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar informacin de depuracin para solucin de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificacin y comenzar de nuevo",systemPromptEditable:"Indicacin del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edtalo segn sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviar al chat. Edtalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver informacin de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se gener un plan vlido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento est al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificacin extensa.",comprehensiveResearchPlan:" Plan de Investigacin Completo",analysisSummary:" Resumen del Anlisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigacin:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:" Persona Experta",searchQueries:" Consultas de Bsqueda:",researchQuestions:" Preguntas de Investigacin:",suggestedSources:" Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:" Metodologa de Investigacin:",enhancedSystemPrompt:" Indicacin del Sistema Mejorada:",enhancedUserPrompt:" Indicacin de Usuario Mejorada:",debugRawLlmResponse:" Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:" Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construir en etapas usando fragmentos. Cada seccin se investigar y escribir por separado, luego se combinar en un documento final.",documentStructure:" Estructura del Documento:",keywords:"Palabras Clave:",workflow:" Flujo de Trabajo:",needMoreInfo:" Se Necesita Ms Informacin",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con ms detalles:",provideMoreDetails:"Proporciona detalles ms especficos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:" Se Requiere Ms Informacin",planType:"Tipo de Plan:",detectedComplexityPatterns:" Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:" Flujo de Trabajo Sugerido:",requiredTools:" Herramientas Requeridas:",guidanceQuestions:" Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicacin de investigacin con las respuestas:",guidanceTip:" Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto ms especfico seas, mejor podr la IA crear un plan de mltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigacin completo sobre el cambio climtico:
1. Creando 25 tareas para diferentes subtemas (poltica, ciencia, economa, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando grficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un anlisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cmo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteracin...`,generateDetailedExecutionPlan:" Generar Plan de Ejecucin Detallado",forcePlan:" Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generacin del plan",reset:" Reiniciar",resetTooltip:"Limpiar modo de gua y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Gua:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren mltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecucin detallado con ejemplos de pocos disparos que muestren cmo usar tareas, fragmentos y mltiples llamadas de herramientas por iteracin.",forcingPlan:"Forzando generacin del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Fall al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basndote en la consulta original."},lF={title:"Configuracin",language:"Idioma",selectLanguage:"Seleccionar Idioma",providers:"Proveedores",cloudSync:"Sincronizacin en la Nube",billing:"Facturacin",general:"General",generalDescription:"Configura ajustes generales de la aplicacin incluyendo idioma y preferencias de visualizacin",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Seleccin de Modelo",modelStrategyDescription:"Elige cmo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Econmico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos ms pequeos capaces. Recurre a proveedores de pago solo cuando est limitado por tasa. Mejor para la mayora de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para mxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para anlisis complejo",fastest:"Ms Rpido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rpidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita bsqueda y extraccin web mejorada a travs de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Bsqueda Web",webSearchDescription:"Busca en la web informacin actual, noticias y artculos",executeJs:"Ejecucin de JavaScript",executeJsDescription:"Ejecuta cdigo JavaScript para clculos y procesamiento de datos",scrapeUrl:"Extraccin Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web especficos",youtubeSearch:"Bsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripcin",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Grficos",chartDescription:"Crea visualizaciones y grficos a partir de datos",generateImage:"Generar Imgenes",imageDescription:"Crea imgenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de cdigo y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analtico paso a paso para problemas complejos",proxySettings:"Configuracin de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contrasea (Opcional)",locationServices:"Servicios de Ubicacin",locationDescription:"Usa tu ubicacin para resultados de bsqueda localizados e informacin especfica de la regin",enableLocation:"Habilitar Servicios de Ubicacin",locationHelp:"Permite que las bsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicacin Actual",requestLocation:"Solicitar Ubicacin",clearLocation:"Limpiar Ubicacin",locationPermission:"Permiso de Ubicacin",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Proveedor",cloud:"Sincronizacin en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicacin",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamao de Fuente",lineHeight:"Altura de Lnea"},cF={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},uF={title:"Panel de Facturacin",balance:"Saldo de Crdito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"An no hay transacciones",creditsPurchased:"Crditos comprados exitosamente",insufficientCredits:"Crditos insuficientes",purchaseCredits:"Agregar Crdito",amount:"Monto",paymentMethod:"Mtodo de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"Ests seguro de que quieres limpiar los datos de facturacin?",dataClearedSuccess:" xito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:" Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Proveedor",model:"Modelo",duration:"Duracin",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rpidos:",today:"Hoy",last7Days:"ltimos 7 Das",last30Days:"ltimos 30 Das",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:" Agrupar por ID de Solicitud",itemsPerPage:"por pgina",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:" Grupo de Solicitudes ({{count}} transacciones)",signInRequired:" Se Requiere Inicio de Sesin",signInToViewBilling:"Por favor inicia sesin con Google para ver tus datos de facturacin.",howToAccessBilling:" Cmo Acceder a los Datos de Facturacin:",signInStep1:'Haz clic en el botn "Iniciar sesin con Google" en la barra de navegacin superior',signInStep2:"Eso es todo! Tus datos de facturacin se cargarn automticamente",billingDataNote:" Tus datos de facturacin se almacenan en una Hoja de clculo de Google de cuenta de servicio centralizada y se recuperan automticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesin con Google.",debugInfo:" Informacin de Depuracin",loading:"Cargando datos de facturacin...",errorLoading:" Error al Cargar Datos de Facturacin",retry:" Reintentar",noBillingData:"No hay datos de facturacin disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:" An No Hay Datos de Facturacin",startUsingChat:"Comienza a usar el chat para generar registros de facturacin. Todo el uso de API se rastrea automticamente.",refresh:" Actualizar",usageOnly:"Solo uso (excl. crditos)",totalCredits:"Crditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Crditos a agregar:",minimumPurchase:"La compra mnima es $5.00",addCreditsTitle:" Agregar Crditos",purchaseCreditsDescription:"Compra crditos para usar funciones de IA. Compra mnima: $5.00",enterAmount:"Ingresa el monto (mn $5.00)",tipUseOwnKeys:" Consejo: Agrega tus propias claves API en Configuracin para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:" SDK de PayPal no cargado. Por favor actualiza la pgina.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturacin",clearDataWarning:" Advertencia: Esta accin no se puede deshacer. Tus datos de facturacin se eliminarn permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminar todas las transacciones de tu hoja de facturacin.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"til para alinearse con los ciclos de facturacin del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta accin no se puede deshacer",cancel:"Cancelar",page:"Pgina",of:"de",first:" Primera",prev:" Anterior",next:"Siguiente ",last:"ltima ",types:{chat:"Chat",embedding:"Incrustacin",guardrail_input:" Entrada de Guardarral",guardrail_output:" Salida de Guardarral",planning:"Planificacin",assessment:"Evaluacin",image_generation:" Generacin de Imagen",tts:" Texto a Voz",chat_iteration:"Iteracin de Chat",credit_added:"Crdito Agregado",summary:"Resumen",lambda_invocation:"Invocacin Lambda"}},dF={generic:"Ocurri un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validacin",tryAgain:"Por favor intenta nuevamente"},hF={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},pF={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},gF={title:"Lista de Reproduccin",addToPlaylist:"Agregar a Lista de Reproduccin",removeFromPlaylist:"Eliminar de Lista de Reproduccin",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproduccin",emptyPlaylist:"La lista de reproduccin est vaca"},fF={search:"Bsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Grfico",generateImage:"Generar Imagen"},mF={title:"Feed",generateFeed:"Generar Feed",generating:"Generando...",refresh:"Actualizar",noItems:"An no hay elementos",emptyMessage:"Tu feed personalizado aparecer aqu",emptySubMessage:"Generaremos contenido basado en tus fragmentos guardados e intereses",didYouKnow:"Sabas que",questionAnswer:"Pregunta y Respuesta",stash:"Guardar",stashed:"Guardado",trash:"Eliminar",quiz:"Cuestionario",swipeLeft:"Desliza a la izquierda para eliminar",swipeRight:"Desliza a la derecha para guardar",showMore:"Mostrar ms",showLess:"Mostrar menos",sources:"Fuentes",topics:"Temas",settings:{title:"Configuracin del Feed",searchTerms:"Trminos de Bsqueda",searchTermsDesc:"Define hasta 5 temas de bsqueda para personalizar tu feed",addTerm:"Agregar Trmino",removeTerm:"Eliminar",maxTerms:"Mximo 5 trminos de bsqueda permitidos",termExists:"Este trmino de bsqueda ya existe",placeholder:"ej. 'inteligencia artificial', 'noticias climticas'",learnedPreferences:"Preferencias Aprendidas",likedTopics:"Temas Favoritos",dislikedTopics:"Temas No Deseados",stashToLearn:"Guarda elementos para ayudar al feed a aprender lo que te gusta",trashToLearn:"Elimina elementos para ayudar al feed a aprender qu evitar",tips:" Consejos para Mejores Feeds",tipSpecific:"S especfico con los trminos de bsqueda",tipStash:"Guarda elementos que encuentres interesantes",tipTrash:"Elimina elementos irrelevantes para mejorar la calidad",tipMix:"Mezcla temas amplios y especficos para variedad"}},yF={title:"Cuestionario",startQuiz:"Iniciar Cuestionario",nextQuestion:"Siguiente Pregunta",previousQuestion:"Anterior",submitAnswer:"Enviar Respuesta",viewResults:"Ver Resultados",retakeQuiz:"Repetir Cuestionario",score:"Puntuacin",correct:"Correcto",incorrect:"Incorrecto",question:"Pregunta",of:"de",yourAnswer:"Tu respuesta",correctAnswer:"Respuesta correcta",explanation:"Explicacin",generating:"Generando cuestionario...",noQuizzes:"An no hay cuestionarios",emptyMessage:"Genera un cuestionario desde cualquier fragmento guardado o elemento del feed",performance:"Rendimiento del Cuestionario",totalQuizzes:"Total de Cuestionarios",averageScore:"Puntuacin Promedio",questionsAnswered:"Preguntas Respondidas",statistics:"Estadsticas del Cuestionario"},bF={common:aF,auth:iF,chat:sF,planning:oF,settings:lF,languages:cF,billing:uF,errors:dF,swag:hF,tts:pF,playlist:gF,tools:fF,feed:mF,quiz:yF},xF={save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",close:"Fermer",loading:"Chargement...",error:"Erreur",success:"Succs",confirm:"Confirmer",back:"Retour",next:"Suivant",submit:"Soumettre",clear:"Effacer",search:"Rechercher",filter:"Filtrer",export:"Exporter",import:"Importer",download:"Tlcharger",upload:"Tlverser",copy:"Copier",paste:"Coller",cut:"Couper",undo:"Annuler",redo:"Refaire",select:"Slectionner",selectAll:"Tout slectionner",deselectAll:"Tout dslectionner"},vF={signIn:"Se connecter avec Google",signOut:"Se dconnecter",authRequired:"L'authentification est requise pour utiliser cette application",tokenExpired:"Votre session a expir. Veuillez vous reconnecter.",welcomeBack:"Content de vous revoir !",signInPrompt:"Se connecter pour continuer",signInRequired:"Vous devez vous connecter pour utiliser cette fonctionnalit",signingIn:"Connexion...",signingOut:"Dconnexion...",researchAgent:"Agent de Recherche",tagline:"Assistant de recherche aliment par l'IA",secureAuth:"Authentification scurise par Google",whyChooseTitle:"Pourquoi choisir Research Agent ?",whyChooseIntro:"Contrairement aux chatbots IA standards qui rpondent simplement aux questions, Research Agent est votre compagnon de recherche complet conu pour l'investigation approfondie et la construction de connaissances.",keyAdvantagesTitle:"Avantages Cls :",webConnected:"Intelligence Connecte au Web",webConnectedDesc:"La recherche web en temps rel et l'extraction de contenu garantissent des informations actuelles et prcises, pas des donnes d'entranement obsoltes",multiTool:"Orchestration Multi-Outils",multiToolDesc:"Combine de manire transparente la recherche web, l'excution de code, les transcriptions YouTube, la gnration d'images et l'analyse de documents dans une seule conversation",knowledgeBase:"Intgration de Base de Connaissances",knowledgeBaseDesc:"Sauvegardez les dcouvertes dans votre base de connaissances personnelle, crez des extraits et construisez des documents de recherche complets au fil du temps",advancedPlanning:"Planification Avance",advancedPlanningDesc:"Gnrez des plans de recherche structurs avec des personas experts, des stratgies de recherche et des approches mthodologiques",costEffective:"Slection Intelligente de Modles",costEffectiveDesc:"Slection automatique de modles qui font le travail de manire conomique ou puissante selon la stratgie de slection. Apportez vos propres cls pour conomiser 25%",transparency:"Transparence Totale",transparencyDesc:"Suivez chaque appel API, utilisation de jetons et cot dans le tableau de bord de facturation en temps rel",perfectFor:"Parfait pour : Recherche acadmique, analyse de march, cration de contenu, documentation technique, veille concurrentielle et toute tche ncessitant une investigation approfondie."},wF={placeholder:"Tapez votre message ici...",send:"Envoyer",retry:"Ressayer",stop:"Arrter",thinking:"Rflexion...",generating:"Gnration de la rponse...",newChat:"Nouveau Chat",clearHistory:"Effacer l'historique",loadChat:"Charger le chat",systemPrompt:"Instruction systme",customInstructions:"Instructions personnalises",temperature:"Temprature",maxTokens:"Tokens maximum",model:"Modle",provider:"Fournisseur",history:"Historique du chat",continue:"Continuer",regenerate:"Rgnrer",edit:"Modifier",delete:"Supprimer",copy:"Copier",copied:"Copi !",selectFiles:"Slectionner des fichiers",attachFiles:"Joindre des fichiers",pasteImage:"Coller une image",recording:"Enregistrement...",voiceInput:"Entre vocale",stopRecording:"Arrter l'enregistrement",processing:"Traitement...",noMessages:"Aucun message pour le moment. Commencez une conversation !",clearConfirm:"tes-vous sr de vouloir effacer tous les messages ?",deleteConfirm:"tes-vous sr de vouloir supprimer ce message ?",loadingHistory:"Chargement de l'historique du chat...",savingChat:"Enregistrement du chat...",chatSaved:"Chat enregistr avec succs",chatLoaded:"Chat charg avec succs",errorSaving:"Erreur lors de l'enregistrement du chat",errorLoading:"Erreur lors du chargement du chat",signInRequired:"Veuillez vous connecter pour utiliser cette fonctionnalit",providerRequired:"Veuillez configurer au moins un fournisseur dans les paramtres",messageError:"Erreur lors de l'envoi du message",streamError:"Erreur dans le flux du message",toolExecution:"Excution de l'outil...",toolExecuted:"Outil excut avec succs",toolError:"Erreur d'excution de l'outil",searchingWeb:"Recherche sur le web...",scrapingContent:"Extraction du contenu...",transcribingAudio:"Transcription de l'audio...",generatingImage:"Gnration de l'image...",generatingChart:"Gnration du graphique...",executingCode:"Excution du code...",planningMode:"Mode planification",exitPlanning:"Quitter la planification",startPlanning:"Dmarrer la planification",mcpServers:"Serveurs MCP",addMCPServer:"Ajouter un serveur MCP",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL invlido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Historique du chat",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversacin",searchProvider:"Proveedor de Bsqueda:",functionCall:"Llamada de Funcin:",code:"Cdigo:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar cdigo al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar cdigo a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasin de deteccin de bots",contentExtracted:"Contenido extrado inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Mtodo de Extraccin:",tier:"Nivel",scrapeTime:"Tiempo de Extraccin:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamao Original:",compressedSize:"Tamao Comprimido:",compression:"Compresin:",compressionStrategy:"Estrategia de Compresin:",basicExtraction:"Extraccin bsica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamao:",titlePrompt:"Ttulo/Indicacin",finalPrompt:"Indicacin Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"Ests seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats an",startChatting:"Comienza a chatear para ver el historial aqu",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Ttulo del Chat",enterChatTitle:"Ingresa un ttulo para este chat...",signInToChat:"Por favor inicia sesin para comenzar a chatear",streamingResponse:"Respuesta en transmisin...",imageAddedToSwag:"Imagen agregada a Swag!",imageAddedWithoutConversion:"Imagen agregada a Swag (sin conversin)!",contentCapturedToSwag:"Contenido capturado a Swag!",contentCapturedWithoutConversion:"Contenido capturado a Swag (sin conversin de imagen)!",planningTransferred:"Indicaciones de planificacin transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificacin",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproduccin",transcriptionStopped:"Transcripcin detenida",failedToStopTranscription:"Error al detener la transcripcin: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamao mximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen ms pequea.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesin para enviar mensajes",foundRelevantChunks:" Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontr contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin l",sessionExpired:"Tu sesin ha expirado. Por favor inicia sesin nuevamente.",todoLimitReached:"Lmite de progresin automtica de tareas alcanzado. Por favor contina manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"Copiado al portapapeles!",outputCopied:"Salida copiada al portapapeles!",codeCopied:"Cdigo copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva lnea,  para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generacin de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Erreur lors du chargement du chat",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Supprimer",chatHistoryTitle:"Historique du chat",noChatHistory:"No se encontr historial de chat. Inicia una conversacin para guardarla automticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat charg avec succs",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Tout slectionner",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"Ests seguro de que quieres eliminar este chat?",confirmClearHistory:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"Ests seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin ttulo",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuracin del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesin para enviar mensajes"},SF={title:"Planification de la Recherche",query:"Consulta de Investigacin",generatePlan:"Gnrer un Plan",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"An no se ha generado ningn plan",enterQuery:"Ingresa tu consulta o tema de investigacin...",researchFocus:"Enfoque de Investigacin",methodology:"Metodologa",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Traitement...",signInToGenerate:"Inicia sesin para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesin para usar la planificacin",signInRequired:"Por favor inicia sesin con Google para usar la funcin de planificacin",authExpired:"Autenticacin expirada. Por favor cierra sesin e inicia sesin nuevamente para continuar.",authRequired:"Se requiere autenticacin. Por favor inicia sesin con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigacin",debugCopied:"Informacin de depuracin copiada al portapapeles!",debugCopyFailed:"Error al copiar informacin de depuracin",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar informacin de depuracin para solucin de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificacin y comenzar de nuevo",systemPromptEditable:"Indicacin del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edtalo segn sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviar al chat. Edtalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver informacin de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se gener un plan vlido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento est al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificacin extensa.",comprehensiveResearchPlan:" Plan de Investigacin Completo",analysisSummary:" Resumen del Anlisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigacin:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:" Persona Experta",searchQueries:" Consultas de Bsqueda:",researchQuestions:" Preguntas de Investigacin:",suggestedSources:" Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:" Metodologa de Investigacin:",enhancedSystemPrompt:" Indicacin del Sistema Mejorada:",enhancedUserPrompt:" Indicacin de Usuario Mejorada:",debugRawLlmResponse:" Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:" Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construir en etapas usando fragmentos. Cada seccin se investigar y escribir por separado, luego se combinar en un documento final.",documentStructure:" Estructura del Documento:",keywords:"Palabras Clave:",workflow:" Flujo de Trabajo:",needMoreInfo:" Se Necesita Ms Informacin",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con ms detalles:",provideMoreDetails:"Proporciona detalles ms especficos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:" Se Requiere Ms Informacin",planType:"Tipo de Plan:",detectedComplexityPatterns:" Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:" Flujo de Trabajo Sugerido:",requiredTools:" Herramientas Requeridas:",guidanceQuestions:" Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicacin de investigacin con las respuestas:",guidanceTip:" Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto ms especfico seas, mejor podr la IA crear un plan de mltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigacin completo sobre el cambio climtico:
1. Creando 25 tareas para diferentes subtemas (poltica, ciencia, economa, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando grficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un anlisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cmo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteracin...`,generateDetailedExecutionPlan:" Generar Plan de Ejecucin Detallado",forcePlan:" Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generacin del plan",reset:" Reiniciar",resetTooltip:"Limpiar modo de gua y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Gua:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren mltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecucin detallado con ejemplos de pocos disparos que muestren cmo usar tareas, fragmentos y mltiples llamadas de herramientas por iteracin.",forcingPlan:"Forzando generacin del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Fall al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basndote en la consulta original."},TF={title:"Paramtres",language:"Langue",selectLanguage:"Slectionner la Langue",providers:"Proveedores",cloudSync:"Sincronizacin en la Nube",billing:"Facturacin",general:"General",generalDescription:"Configura ajustes generales de la aplicacin incluyendo idioma y preferencias de visualizacin",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Seleccin de Modelo",modelStrategyDescription:"Elige cmo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Econmico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos ms pequeos capaces. Recurre a proveedores de pago solo cuando est limitado por tasa. Mejor para la mayora de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para mxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para anlisis complejo",fastest:"Ms Rpido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rpidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita bsqueda y extraccin web mejorada a travs de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Bsqueda Web",webSearchDescription:"Busca en la web informacin actual, noticias y artculos",executeJs:"Ejecucin de JavaScript",executeJsDescription:"Ejecuta cdigo JavaScript para clculos y procesamiento de datos",scrapeUrl:"Extraccin Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web especficos",youtubeSearch:"Bsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripcin",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Grficos",chartDescription:"Crea visualizaciones y grficos a partir de datos",generateImage:"Generar Imgenes",imageDescription:"Crea imgenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de cdigo y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analtico paso a paso para problemas complejos",proxySettings:"Configuracin de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contrasea (Opcional)",locationServices:"Servicios de Ubicacin",locationDescription:"Usa tu ubicacin para resultados de bsqueda localizados e informacin especfica de la regin",enableLocation:"Habilitar Servicios de Ubicacin",locationHelp:"Permite que las bsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicacin Actual",requestLocation:"Solicitar Ubicacin",clearLocation:"Limpiar Ubicacin",locationPermission:"Permiso de Ubicacin",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Fournisseur",cloud:"Sincronizacin en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicacin",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamao de Fuente",lineHeight:"Altura de Lnea"},kF={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},EF={title:"Panel de Facturacin",balance:"Saldo de Crdito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"An no hay transacciones",creditsPurchased:"Crditos comprados exitosamente",insufficientCredits:"Crditos insuficientes",purchaseCredits:"Agregar Crdito",amount:"Monto",paymentMethod:"Mtodo de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"Ests seguro de que quieres limpiar los datos de facturacin?",dataClearedSuccess:" xito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:" Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Fournisseur",model:"Modle",duration:"Duracin",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rpidos:",today:"Hoy",last7Days:"ltimos 7 Das",last30Days:"ltimos 30 Das",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:" Agrupar por ID de Solicitud",itemsPerPage:"por pgina",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:" Grupo de Solicitudes ({{count}} transacciones)",signInRequired:" Se Requiere Inicio de Sesin",signInToViewBilling:"Por favor inicia sesin con Google para ver tus datos de facturacin.",howToAccessBilling:" Cmo Acceder a los Datos de Facturacin:",signInStep1:'Haz clic en el botn "Iniciar sesin con Google" en la barra de navegacin superior',signInStep2:"Eso es todo! Tus datos de facturacin se cargarn automticamente",billingDataNote:" Tus datos de facturacin se almacenan en una Hoja de clculo de Google de cuenta de servicio centralizada y se recuperan automticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesin con Google.",debugInfo:" Informacin de Depuracin",loading:"Cargando datos de facturacin...",errorLoading:" Error al Cargar Datos de Facturacin",retry:" Reintentar",noBillingData:"No hay datos de facturacin disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:" An No Hay Datos de Facturacin",startUsingChat:"Comienza a usar el chat para generar registros de facturacin. Todo el uso de API se rastrea automticamente.",refresh:" Actualizar",usageOnly:"Solo uso (excl. crditos)",totalCredits:"Crditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Crditos a agregar:",minimumPurchase:"La compra mnima es $5.00",addCreditsTitle:" Agregar Crditos",purchaseCreditsDescription:"Compra crditos para usar funciones de IA. Compra mnima: $5.00",enterAmount:"Ingresa el monto (mn $5.00)",tipUseOwnKeys:" Consejo: Agrega tus propias claves API en Configuracin para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:" SDK de PayPal no cargado. Por favor actualiza la pgina.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturacin",clearDataWarning:" Advertencia: Esta accin no se puede deshacer. Tus datos de facturacin se eliminarn permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminar todas las transacciones de tu hoja de facturacin.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"til para alinearse con los ciclos de facturacin del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta accin no se puede deshacer",cancel:"Cancelar",page:"Pgina",of:"de",first:" Primera",prev:" Anterior",next:"Siguiente ",last:"ltima ",types:{chat:"Chat",embedding:"Incrustacin",guardrail_input:" Entrada de Guardarral",guardrail_output:" Salida de Guardarral",planning:"Planificacin",assessment:"Evaluacin",image_generation:" Generacin de Imagen",tts:" Texto a Voz",chat_iteration:"Iteracin de Chat",credit_added:"Crdito Agregado",summary:"Resumen",lambda_invocation:"Invocacin Lambda"}},CF={generic:"Ocurri un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validacin",tryAgain:"Por favor intenta nuevamente"},_F={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},AF={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},NF={title:"Lista de Reproduccin",addToPlaylist:"Agregar a Lista de Reproduccin",removeFromPlaylist:"Eliminar de Lista de Reproduccin",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproduccin",emptyPlaylist:"La lista de reproduccin est vaca"},LF={search:"Bsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Grfico",generateImage:"Generar Imagen"},PF={title:"Fil d'actualits",generateFeed:"Gnrer le Fil",generating:"Gnration en cours...",refresh:"Actualiser",noItems:"Aucun lment pour l'instant",emptyMessage:"Votre fil personnalis apparatra ici",emptySubMessage:"Nous gnrerons du contenu bas sur vos extraits sauvegards et vos intrts",didYouKnow:"Le saviez-vous",questionAnswer:"Question & Rponse",stash:"Enregistrer",stashed:"Enregistr",trash:"Supprimer",quiz:"Quiz",swipeLeft:"Glissez  gauche pour supprimer",swipeRight:"Glissez  droite pour enregistrer",showMore:"Afficher plus",showLess:"Afficher moins",sources:"Sources",topics:"Sujets",settings:{title:"Paramtres du Fil",searchTerms:"Termes de Recherche",searchTermsDesc:"Dfinissez jusqu' 5 sujets de recherche pour personnaliser votre fil",addTerm:"Ajouter un Terme",removeTerm:"Supprimer",maxTerms:"Maximum 5 termes de recherche autoriss",termExists:"Ce terme de recherche existe dj",placeholder:"ex. 'intelligence artificielle', 'actualits climatiques'",learnedPreferences:"Prfrences Apprises",likedTopics:"Sujets Apprcis",dislikedTopics:"Sujets Non Apprcis",stashToLearn:"Enregistrez des lments pour aider le fil  apprendre ce que vous aimez",trashToLearn:"Supprimez des lments pour aider le fil  apprendre ce qu'il faut viter",tips:" Conseils pour de Meilleurs Fils",tipSpecific:"Soyez prcis avec les termes de recherche",tipStash:"Enregistrez les lments que vous trouvez intressants",tipTrash:"Supprimez les lments non pertinents pour amliorer la qualit",tipMix:"Mlangez sujets larges et spcifiques pour la varit"}},RF={title:"Quiz",startQuiz:"Dmarrer le Quiz",nextQuestion:"Question Suivante",previousQuestion:"Prcdent",submitAnswer:"Soumettre la Rponse",viewResults:"Voir les Rsultats",retakeQuiz:"Refaire le Quiz",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Question",of:"de",yourAnswer:"Votre rponse",correctAnswer:"Bonne rponse",explanation:"Explication",generating:"Gnration du quiz...",noQuizzes:"Aucun quiz pour l'instant",emptyMessage:"Gnrez un quiz  partir de n'importe quel extrait sauvegard ou lment du fil",performance:"Performance au Quiz",totalQuizzes:"Total des Quiz",averageScore:"Score Moyen",questionsAnswered:"Questions Rpondues",statistics:"Statistiques du Quiz"},IF={common:xF,auth:vF,chat:wF,planning:SF,settings:TF,languages:kF,billing:EF,errors:CF,swag:_F,tts:AF,playlist:NF,tools:LF,feed:PF,quiz:RF},DF={save:"Speichern",cancel:"Abbrechen",delete:"Lschen",edit:"Bearbeiten",close:"Schlieen",loading:"Laden...",error:"Fehler",success:"Erfolg",confirm:"Besttigen",back:"Zurck",next:"Weiter",submit:"Absenden",clear:"Lschen",search:"Suchen",filter:"Filtern",export:"Exportieren",import:"Importieren",download:"Herunterladen",upload:"Hochladen",copy:"Kopieren",paste:"Einfgen",cut:"Ausschneiden",undo:"Rckgngig",redo:"Wiederholen",select:"Auswhlen",selectAll:"Alles auswhlen",deselectAll:"Alle abwhlen"},MF={signIn:"Mit Google anmelden",signOut:"Abmelden",authRequired:"Authentifizierung ist erforderlich, um diese Anwendung zu verwenden",tokenExpired:"Ihre Sitzung ist abgelaufen. Bitte melden Sie sich erneut an.",welcomeBack:"Willkommen zurck!",signInPrompt:"Anmelden, um fortzufahren",signInRequired:"Sie mssen sich anmelden, um diese Funktion zu nutzen",signingIn:"Anmelden...",signingOut:"Abmelden...",researchAgent:"Forschungsagent",tagline:"KI-gesttzter Forschungsassistent",secureAuth:"Sichere Authentifizierung von Google",whyChooseTitle:"Warum Research Agent whlen?",whyChooseIntro:"Im Gegensatz zu Standard-KI-Chatbots, die einfach nur Fragen beantworten, ist Research Agent Ihr umfassender Forschungsbegleiter fr tiefgehende Untersuchungen und Wissensaufbau.",keyAdvantagesTitle:"Hauptvorteile:",webConnected:"Web-verbundene Intelligenz",webConnectedDesc:"Echtzeit-Websuche und Content-Extraktion stellen aktuelle, przise Informationen sicher  keine veralteten Trainingsdaten",multiTool:"Multi-Tool-Orchestrierung",multiToolDesc:"Kombiniert nahtlos Websuche, Code-Ausfhrung, YouTube-Transkripte, Bildgenerierung und Dokumentanalyse in einer einzigen Konversation",knowledgeBase:"Wissensdatenbank-Integration",knowledgeBaseDesc:"Speichern Sie Erkenntnisse in Ihrer persnlichen Wissensdatenbank, erstellen Sie Snippets und bauen Sie im Laufe der Zeit umfassende Forschungsdokumente auf",advancedPlanning:"Erweiterte Planung",advancedPlanningDesc:"Generieren Sie strukturierte Forschungsplne mit Experten-Personas, Suchstrategien und methodischen Anstzen",costEffective:"Intelligente Modellauswahl",costEffectiveDesc:"Automatische Auswahl von Modellen, die die Aufgabe wirtschaftlich oder leistungsstark erledigen, basierend auf der Auswahlstrategie. Verwenden Sie Ihre eigenen Schlssel, um 25% zu sparen",transparency:"Volle Transparenz",transparencyDesc:"Verfolgen Sie jeden API-Aufruf, Token-Verbrauch und Kosten im Echtzeit-Abrechnungs-Dashboard",perfectFor:"Perfekt fr: Akademische Forschung, Marktanalyse, Content-Erstellung, technische Dokumentation, Competitive Intelligence und jede Aufgabe, die grndliche Untersuchungen erfordert."},OF={placeholder:"Geben Sie Ihre Nachricht hier ein...",send:"Senden",retry:"Wiederholen",stop:"Stoppen",thinking:"Denken...",generating:"Antwort wird generiert...",newChat:"Neuer Chat",clearHistory:"Verlauf lschen",loadChat:"Chat laden",systemPrompt:"Systemaufforderung",customInstructions:"Benutzerdefinierte Anweisungen",temperature:"Temperatur",maxTokens:"Maximale Tokens",model:"Modell",provider:"Anbieter",history:"Chat-Verlauf",continue:"Fortsetzen",regenerate:"Neu generieren",edit:"Bearbeiten",delete:"Lschen",copy:"Kopieren",copied:"Kopiert!",selectFiles:"Dateien auswhlen",attachFiles:"Dateien anhngen",pasteImage:"Bild einfgen",recording:"Aufnahme...",voiceInput:"Spracheingabe",stopRecording:"Aufnahme stoppen",processing:"Verarbeitung...",noMessages:"Noch keine Nachrichten. Starten Sie ein Gesprch!",clearConfirm:"Sind Sie sicher, dass Sie alle Nachrichten lschen mchten?",deleteConfirm:"Sind Sie sicher, dass Sie diese Nachricht lschen mchten?",loadingHistory:"Chat-Verlauf wird geladen...",savingChat:"Chat wird gespeichert...",chatSaved:"Chat erfolgreich gespeichert",chatLoaded:"Chat erfolgreich geladen",errorSaving:"Fehler beim Speichern des Chats",errorLoading:"Fehler beim Laden des Chats",signInRequired:"Bitte melden Sie sich an, um diese Funktion zu nutzen",providerRequired:"Bitte konfigurieren Sie mindestens einen Anbieter in den Einstellungen",messageError:"Fehler beim Senden der Nachricht",streamError:"Fehler im Nachrichtenfluss",toolExecution:"Tool wird ausgefhrt...",toolExecuted:"Tool erfolgreich ausgefhrt",toolError:"Tool-Ausfhrungsfehler",searchingWeb:"Suche im Web...",scrapingContent:"Inhalt wird extrahiert...",transcribingAudio:"Audio wird transkribiert...",generatingImage:"Bild wird generiert...",generatingChart:"Diagramm wird erstellt...",executingCode:"Code wird ausgefhrt...",planningMode:"Planungsmodus",exitPlanning:"Planung beenden",startPlanning:"Planung starten",mcpServers:"MCP-Server",addMCPServer:"MCP-Server hinzufgen",mcpServerName:"Nombre del Servidor",mcpServerUrl:"URL del Servidor",exampleServers:"Servidores de Ejemplo",officialServers:"Servidores MCP Oficiales",sampleServers:"Servidores de Muestra",instructions:"Instrucciones",availableTools:"Herramientas Disponibles",enableServer:"Habilitar Servidor",disableServer:"Deshabilitar Servidor",removeServer:"Eliminar Servidor",serverAdded:"Servidor agregado exitosamente",serverRemoved:"Servidor eliminado exitosamente",invalidUrl:"Formato de URL invlido",nameRequired:"Se requiere el nombre del servidor",urlRequired:"Se requiere la URL del servidor",chatHistory:"Chat-Verlauf",examples:"Ejemplos",attachContext:"Adjuntar Contexto",attachContextTooltip:"Adjunta fragmentos de la base de conocimiento como contexto para esta conversacin",searchProvider:"Proveedor de Bsqueda:",functionCall:"Llamada de Funcin:",code:"Cdigo:",arguments:"Argumentos:",callId:"ID de Llamada:",result:"Resultado:",url:"URL:",viewRawHtml:"Ver HTML sin procesar sin comprimir",copyOutputToClipboard:"Copiar salida al portapapeles",copyCodeToClipboard:"Copiar cdigo al portapapeles",captureToSwag:"Capturar a Swag",captureOutputToSwag:"Capturar salida a Swag",captureCodeToSwag:"Capturar cdigo a Swag",grabImage:"Capturar imagen",noSummarization:"Sin resumen",usingProxy:"Usando proxy para mayor privacidad y evasin de deteccin de bots",contentExtracted:"Contenido extrado inteligentemente",truncatedToFit:"Truncado para ajustarse al modelo",scrapeMethod:"Mtodo de Extraccin:",tier:"Nivel",scrapeTime:"Tiempo de Extraccin:",totalTime:"Tiempo Total:",format:"Formato:",originalSize:"Tamao Original:",compressedSize:"Tamao Comprimido:",compression:"Compresin:",compressionStrategy:"Estrategia de Compresin:",basicExtraction:"Extraccin bsica",rawHtml:"HTML Sin Procesar ({{count}} caracteres)",rawText:"Texto Sin Procesar ({{count}} caracteres)",contentProcessingPipeline:"Pipeline de Procesamiento de Contenido:",size:"Tamao:",titlePrompt:"Ttulo/Indicacin",finalPrompt:"Indicacin Final",deleteChat:"Eliminar Chat",clearAllChats:"Limpiar Todos los Chats",confirmClearAll:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDelete:"Ests seguro de que quieres eliminar este chat?",noChatsYet:"No hay chats an",startChatting:"Comienza a chatear para ver el historial aqu",chatDeleted:"Chat eliminado",allChatsCleared:"Todos los chats limpiados",chatTitle:"Ttulo del Chat",enterChatTitle:"Ingresa un ttulo para este chat...",signInToChat:"Por favor inicia sesin para comenzar a chatear",streamingResponse:"Respuesta en transmisin...",imageAddedToSwag:"Imagen agregada a Swag!",imageAddedWithoutConversion:"Imagen agregada a Swag (sin conversin)!",contentCapturedToSwag:"Contenido capturado a Swag!",contentCapturedWithoutConversion:"Contenido capturado a Swag (sin conversin de imagen)!",planningTransferred:"Indicaciones de planificacin transferidas a nuevo chat",failedToTransfer:"Error al transferir datos de planificacin",addedToPlaylist:"{{count}} video{{plural}} agregado{{plural}} a la lista de reproduccin",transcriptionStopped:"Transcripcin detenida",failedToStopTranscription:"Error al detener la transcripcin: {{error}}",fileTypeNotSupported:"Tipo de archivo no compatible: {{name}}. Tipos compatibles: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"Archivo demasiado grande: {{name}} ({{size}}MB). Tamao mximo: {{maxSize}}MB",imageTokenWarning:"La imagen {{name}} puede usar muchos tokens (~{{tokens}}k). Considera usar una imagen ms pequea.",fileAdded:"{{name}} agregado",failedToProcess:"Error al procesar {{name}}",signInToSendMessages:"Por favor inicia sesin para enviar mensajes",foundRelevantChunks:" Se encontraron {{count}} fragmentos relevantes de la base de conocimiento",noRelevantContext:"No se encontr contexto relevante en la base de conocimiento",failedToRetrieveRag:"Error al recuperar el contexto RAG, continuando sin l",sessionExpired:"Tu sesin ha expirado. Por favor inicia sesin nuevamente.",todoLimitReached:"Lmite de progresin automtica de tareas alcanzado. Por favor contina manualmente.",snippetSaved:"Fragmento guardado: {{title}}",snippetDeleted:"Fragmento eliminado: {{title}}",copiedToClipboard:"Copiado al portapapeles!",outputCopied:"Salida copiada al portapapeles!",codeCopied:"Cdigo copiado al portapapeles!",inputPlaceholder:"Escribe tu mensaje... (Shift+Enter para nueva lnea,  para historial)",continueProcessing:"Continuar Procesamiento",stopGenerating:"Detener generacin de respuesta",sendMessage:"Enviar mensaje",chatMessageInput:"Entrada de mensaje de chat",editPlan:"Editar Plan",makeAPlan:"Hacer un Plan",close:"Cerrar",failedToLoadChat:"Fehler beim Laden des Chats",mcpServerNamePlaceholder:"Nombre del Servidor (ej., filesystem, github)",mcpServerUrlPlaceholder:"URL del Servidor (ej., http://localhost:3000)",noMcpServers:"No hay servidores MCP configurados",addServer:"Agregar Servidor",remove:"Lschen",chatHistoryTitle:"Chat-Verlauf",noChatHistory:"No se encontr historial de chat. Inicia una conversacin para guardarla automticamente.",allChatHistoryCleared:"Todo el historial de chat limpiado",loadChatSuccess:"Chat erfolgreich geladen",examplesTitle:"Ejemplos de Chat",tryExample:"Prueba este ejemplo",attachContextTitle:"Adjuntar Contexto de Swag",snippetsAttached:"{{count}} fragmento{{plural}} adjunto{{plural}}",attachSnippets:"Adjuntar Fragmentos",searchSnippets:"Buscar fragmentos...",selectAll:"Alles auswhlen",selectNone:"Seleccionar Ninguno",deleteSelected:"Eliminar Seleccionados",cancel:"Cancelar",load:"Cargar",confirmDeleteChat:"Ests seguro de que quieres eliminar este chat?",confirmClearHistory:"Ests seguro de que quieres limpiar todo el historial de chat?",confirmDeleteSelected:"Ests seguro de que quieres eliminar {{count}} chat{{plural}} seleccionado{{plural}}?",chatLoadedFrom:"Cargado desde",chatSavedAt:"Guardado en",noTitle:"Sin ttulo",clearAttachedSnippets:"Limpiar todos los fragmentos adjuntos",mcpServerConfiguration:"Configuracin del Servidor MCP",typeMessageFirst:"Escribe un mensaje primero",typeMessage:"Escribe un mensaje",signInToSend:"Por favor inicia sesin para enviar mensajes"},jF={title:"Forschungsplanung",query:"Consulta de Investigacin",generatePlan:"Plan Generieren",savePlan:"Guardar Plan",loadSaved:"Cargar Guardado",transferToChat:"Transferir al Chat",clearAll:"Limpiar Todo",debug:"Depurar",planning:"Planificando...",planGenerated:"Plan generado exitosamente",noPlan:"An no se ha generado ningn plan",enterQuery:"Ingresa tu consulta o tema de investigacin...",researchFocus:"Enfoque de Investigacin",methodology:"Metodologa",expectedOutcome:"Resultado Esperado",initializing:"Inicializando...",processing:"Verarbeitung...",signInToGenerate:"Inicia sesin para Generar Plan",generating:"Generando...",signInToUsePlanning:"Por favor inicia sesin para usar la planificacin",signInRequired:"Por favor inicia sesin con Google para usar la funcin de planificacin",authExpired:"Autenticacin expirada. Por favor cierra sesin e inicia sesin nuevamente para continuar.",authRequired:"Se requiere autenticacin. Por favor inicia sesin con Google para continuar.",enterResearchQuestion:"Por favor ingresa una pregunta de investigacin",debugCopied:"Informacin de depuracin copiada al portapapeles!",debugCopyFailed:"Error al copiar informacin de depuracin",savePlanTooltip:"Guarda el plan actual en tu lista de planes guardados",loadSavedPlans:"Cargar Planes Guardados",debugTooltip:"Copiar informacin de depuracin para solucin de problemas de Copilot",transferTooltip:"Transferir al Chat",clearAllTooltip:"Limpiar todos los datos de planificacin y comenzar de nuevo",systemPromptEditable:"Indicacin del Sistema Generada (Editable):",systemPromptHelp:"Esto define el rol y comportamiento de la IA. Edtalo segn sea necesario antes de transferir al chat.",userQueryEditable:"Consulta de Usuario Generada (Editable):",userQueryHelp:"Este es el mensaje que se enviar al chat. Edtalo para refinar tu consulta.",generatedPrompts:"Indicaciones Generadas",llmInfoTooltip:"Ver informacin de transparencia del LLM (modelo, tokens, costo)",llmCalls:"llamada",llmCallsPlural:"llamadas",cannotSavePlan:"No se puede guardar el plan: No se gener un plan vlido",planSavedSuccess:"Plan guardado exitosamente",planSaveFailed:"Error al guardar el plan",loadSavedPlan:"Cargar Plan Guardado",storage:"Almacenamiento",storageWarning:"El almacenamiento est al {{percentage}}% de su capacidad",storageWarningHelp:"Considera eliminar planes antiguos para liberar espacio.",noSavedPlans:"No se encontraron planes guardados",saved:"Guardado",load:"Cargar",simpleQueryDetected:"Consulta Simple Detectada",simpleQueryHelp:"Esta consulta puede responderse directamente sin planificacin extensa.",comprehensiveResearchPlan:" Plan de Investigacin Completo",analysisSummary:" Resumen del Anlisis",queryType:"Tipo de Consulta:",complexity:"Complejidad:",researchApproach:"Enfoque de Investigacin:",estimatedSources:"Fuentes Estimadas:",reasoning:"Razonamiento:",expertPersona:" Persona Experta",searchQueries:" Consultas de Bsqueda:",researchQuestions:" Preguntas de Investigacin:",suggestedSources:" Fuentes Sugeridas:",sources:"Fuentes:",variousRelevantSources:"Varias fuentes relevantes",researchMethodology:" Metodologa de Investigacin:",enhancedSystemPrompt:" Indicacin del Sistema Mejorada:",enhancedUserPrompt:" Indicacin de Usuario Mejorada:",debugRawLlmResponse:" Depurar: Campos de Respuesta Bruta del LLM",longFormDocumentPlan:" Plan de Documento de Formato Largo",longFormNote:"Nota: Esto se construir en etapas usando fragmentos. Cada seccin se investigar y escribir por separado, luego se combinar en un documento final.",documentStructure:" Estructura del Documento:",keywords:"Palabras Clave:",workflow:" Flujo de Trabajo:",needMoreInfo:" Se Necesita Ms Informacin",pleaseClarify:"Por favor aclara:",updateQueryDetails:"Actualiza tu consulta con ms detalles:",provideMoreDetails:"Proporciona detalles ms especficos...",regeneratePlanWithClarifications:"Regenerar Plan con Aclaraciones",moreInfoRequired:" Se Requiere Ms Informacin",planType:"Tipo de Plan:",detectedComplexityPatterns:" Patrones de Complejidad Detectados:",estimatedIterations:"Iteraciones Estimadas",toolsRequired:"Herramientas Requeridas",suggestedWorkflow:" Flujo de Trabajo Sugerido:",requiredTools:" Herramientas Requeridas:",guidanceQuestions:" Por favor responde estas preguntas para refinar tu plan:",updatePromptWithAnswers:"Actualiza tu indicacin de investigacin con las respuestas:",guidanceTip:" Consejo: Incluye las respuestas a las preguntas anteriores en tu consulta actualizada. Cuanto ms especfico seas, mejor podr la IA crear un plan de mltiples iteraciones efectivo con el uso apropiado de herramientas y ejemplos de pocos disparos.",guidanceExamplePlaceholder:`Ejemplo: Quiero construir un informe de investigacin completo sobre el cambio climtico:
1. Creando 25 tareas para diferentes subtemas (poltica, ciencia, economa, etc.)
2. Buscando en la web para cada tema y guardando los resultados en fragmentos
3. Generando grficos para visualizar puntos de datos clave
4. Combinando todos los fragmentos en un anlisis maestro

Por favor crea un plan detallado con ejemplos de pocos disparos que muestren cmo usar create_todo, search_web, create_snippet y generate_chart juntos en cada iteracin...`,generateDetailedExecutionPlan:" Generar Plan de Ejecucin Detallado",forcePlan:" Forzar Plan",forcePlanTooltip:"Deja que la IA responda las preguntas y fuerce la generacin del plan",reset:" Reiniciar",resetTooltip:"Limpiar modo de gua y volver al estado anterior",aboutGuidanceMode:"Acerca del Modo de Gua:",guidanceModeHelp:"Este modo detecta proyectos complejos que requieren mltiples iteraciones y uso extensivo de herramientas. Responde las preguntas anteriores para ayudar a crear un plan de ejecucin detallado con ejemplos de pocos disparos que muestren cmo usar tareas, fragmentos y mltiples llamadas de herramientas por iteracin.",forcingPlan:"Forzando generacin del plan...",forcePlanError:"Error al forzar el plan",forcePlanFailed:"Fall al forzar el plan",clarificationAnswer:"Por favor usa tu mejor criterio basndote en la consulta original."},BF={title:"Einstellungen",language:"Sprache",selectLanguage:"Sprache Auswhlen",providers:"Proveedores",cloudSync:"Sincronizacin en la Nube",billing:"Facturacin",general:"General",generalDescription:"Configura ajustes generales de la aplicacin incluyendo idioma y preferencias de visualizacin",languageHelp:"Cambia el idioma de la interfaz e instruye a la IA para responder en tu idioma seleccionado",providerCredentials:"Credenciales de Proveedor",providerDescription:"Configura tus claves API de proveedor LLM. El backend selecciona automticamente el mejor modelo para cada solicitud",modelSelectionStrategy:"Estrategia de Seleccin de Modelo",modelStrategyDescription:"Elige cmo el sistema selecciona modelos para tus solicitudes. Esto equilibra costo, calidad y rendimiento",cheap:"Econmico (Recomendado)",cheapDescription:"Prioriza proveedores gratuitos (Groq, Gemini) y modelos ms pequeos capaces. Recurre a proveedores de pago solo cuando est limitado por tasa. Mejor para la mayora de los casos de uso",balanced:"Equilibrado",balancedDescription:"Elige modelos que hagan el trabajo de manera confiable sin comprometer la calidad. Usa nivel gratuito cuando la calidad es equivalente, modelos de pago cuando la calidad importa. Equilibra costo vs. capacidad",powerful:"Potente",powerfulDescription:"Usa los mejores modelos disponibles (GPT-4o, Gemini 2.5 Pro, o1) para mxima capacidad. Prioriza calidad sobre costo. Usa modelos de razonamiento para anlisis complejo",fastest:"Ms Rpido",fastestDescription:"Prioriza modelos de baja latencia (Groq) para respuestas rpidas. Puede sacrificar algo de calidad por velocidad en solicitudes simples. Excelente para sesiones interactivas",tavilyApiKey:"Clave API de Tavily (Opcional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Habilita bsqueda y extraccin web mejorada a travs de la API de Tavily. Recurre a DuckDuckGo si no se proporciona",enabledTools:"Herramientas Habilitadas",webSearch:"Bsqueda Web",webSearchDescription:"Busca en la web informacin actual, noticias y artculos",executeJs:"Ejecucin de JavaScript",executeJsDescription:"Ejecuta cdigo JavaScript para clculos y procesamiento de datos",scrapeUrl:"Extraccin Web",scrapeUrlDescription:"Extrae contenido de URLs y sitios web especficos",youtubeSearch:"Bsqueda en YouTube",youtubeDescription:"Busca videos en YouTube con soporte de transcripcin",transcribe:"Transcribir Audio/Video",transcribeDescription:"Convierte archivos de audio y video a transcripciones de texto",generateChart:"Generar Grficos",chartDescription:"Crea visualizaciones y grficos a partir de datos",generateImage:"Generar Imgenes",imageDescription:"Crea imgenes generadas por IA a partir de descripciones de texto",searchKnowledgeBase:"Buscar en Base de Conocimiento",ragDescription:"Busca en documentos cargados y base de conocimiento",manageTodos:"Gestionar Tareas",todosDescription:"Crea y gestiona listas de tareas y recordatorios",manageSnippets:"Gestionar Fragmentos",snippetsDescription:"Guarda y recupera fragmentos de cdigo y texto",askLlm:"Preguntar a LLM",askLlmDescription:"Delega sub-preguntas a otras instancias de LLM",generateReasoning:"Generar Cadena de Razonamiento",reasoningDescription:"Razonamiento analtico paso a paso para problemas complejos",proxySettings:"Configuracin de Proxy",proxyDescription:"Configura proxy HTTP/HTTPS para solicitudes web",enableProxy:"Habilitar Proxy",proxyUrl:"URL del Proxy",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Usuario (Opcional)",proxyPassword:"Contrasea (Opcional)",locationServices:"Servicios de Ubicacin",locationDescription:"Usa tu ubicacin para resultados de bsqueda localizados e informacin especfica de la regin",enableLocation:"Habilitar Servicios de Ubicacin",locationHelp:"Permite que las bsquedas web devuelvan resultados localmente relevantes",currentLocation:"Ubicacin Actual",requestLocation:"Solicitar Ubicacin",clearLocation:"Limpiar Ubicacin",locationPermission:"Permiso de Ubicacin",permissionGranted:"Concedido",permissionDenied:"Denegado",permissionPrompt:"No solicitado",tabs:{general:"General",provider:"Anbieter",cloud:"Sincronizacin en la Nube",tools:"Herramientas",proxy:"Proxy",location:"Ubicacin",tts:"TTS",rag:"RAG"},appearance:"Apariencia",theme:"Tema",darkMode:"Modo Oscuro",lightMode:"Modo Claro",notifications:"Notificaciones",privacy:"Privacidad",accessibility:"Accesibilidad",fontSize:"Tamao de Fuente",lineHeight:"Altura de Lnea"},FF={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},zF={title:"Panel de Facturacin",balance:"Saldo de Crdito",totalCost:"Costo Total",totalTokens:"Tokens Totales",totalRequests:"Solicitudes Totales",cost:"Costo",tokens:"Tokens",tokensIn:"Tokens Entrantes",tokensOut:"Tokens Salientes",timestamp:"Marca de Tiempo",noTransactions:"An no hay transacciones",creditsPurchased:"Crditos comprados exitosamente",insufficientCredits:"Crditos insuficientes",purchaseCredits:"Agregar Crdito",amount:"Monto",paymentMethod:"Mtodo de Pago",transactions:"Transacciones",overview:"Resumen",exportCSV:"Exportar CSV",clearData:"Limpiar Datos",clearDataConfirm:"Ests seguro de que quieres limpiar los datos de facturacin?",dataClearedSuccess:" xito: Se limpiaron {{count}} transacciones. {{remaining}} restantes.",dataClearError:" Error: {{message}}",noDataToExport:"No hay datos para exportar",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",type:"Tipo",provider:"Anbieter",model:"Modell",duration:"Duracin",status:"Estado",allTypes:"Todos los Tipos",allProviders:"Todos los Proveedores",clearFilters:"Limpiar Filtros",quickRanges:"Rangos rpidos:",today:"Hoy",last7Days:"ltimos 7 Das",last30Days:"ltimos 30 Das",thisMonth:"Este Mes",byType:"Por Tipo",byProvider:"Por Proveedor",byModel:"Por Modelo",requests:"Solicitudes",groupByRequestId:" Agrupar por ID de Solicitud",itemsPerPage:"por pgina",totalRequestGroups:"{{count}} grupos de solicitudes totales (mostrando {{showing}}), {{ungrouped}} sin agrupar",totalTransactionsShowing:"{{total}} transacciones totales (mostrando {{showing}})",requestGroup:" Grupo de Solicitudes ({{count}} transacciones)",signInRequired:" Se Requiere Inicio de Sesin",signInToViewBilling:"Por favor inicia sesin con Google para ver tus datos de facturacin.",howToAccessBilling:" Cmo Acceder a los Datos de Facturacin:",signInStep1:'Haz clic en el botn "Iniciar sesin con Google" en la barra de navegacin superior',signInStep2:"Eso es todo! Tus datos de facturacin se cargarn automticamente",billingDataNote:" Tus datos de facturacin se almacenan en una Hoja de clculo de Google de cuenta de servicio centralizada y se recuperan automticamente. No se necesitan permisos adicionales ni acceso a Drive - solo inicia sesin con Google.",debugInfo:" Informacin de Depuracin",loading:"Cargando datos de facturacin...",errorLoading:" Error al Cargar Datos de Facturacin",retry:" Reintentar",noBillingData:"No hay datos de facturacin disponibles. Por favor espera...",noTransactionsMessage:"No se encontraron transacciones",noBillingDataYet:" An No Hay Datos de Facturacin",startUsingChat:"Comienza a usar el chat para generar registros de facturacin. Todo el uso de API se rastrea automticamente.",refresh:" Actualizar",usageOnly:"Solo uso (excl. crditos)",totalCredits:"Crditos Totales",userQueries:"Consultas de Usuario",llmCalls:"Llamadas LLM",userQueriesLlmCalls:"Consultas de Usuario / Llamadas LLM",newBalance:"Nuevo saldo:",creditsToAdd:"Crditos a agregar:",minimumPurchase:"La compra mnima es $5.00",addCreditsTitle:" Agregar Crditos",purchaseCreditsDescription:"Compra crditos para usar funciones de IA. Compra mnima: $5.00",enterAmount:"Ingresa el monto (mn $5.00)",tipUseOwnKeys:" Consejo: Agrega tus propias claves API en Configuracin para costos LLM de $0! Solo se aplican costos de infraestructura cuando usas tus propias claves.",loadingPayPal:"Cargando PayPal...",paypalNotLoaded:" SDK de PayPal no cargado. Por favor actualiza la pgina.",close:"Cerrar",clearBillingData:"Limpiar Datos de Facturacin",clearDataWarning:" Advertencia: Esta accin no se puede deshacer. Tus datos de facturacin se eliminarn permanentemente.",clearAll:"Limpiar Todo",clearByProvider:"Limpiar por Proveedor",clearByDateRange:"Limpiar por Rango de Fechas",clearAllDescription:"Esto eliminar todas las transacciones de tu hoja de facturacin.",considerExportFirst:"Considera exportar a CSV primero para tus registros.",selectProvider:"Seleccionar Proveedor:",selectProviderPlaceholder:"-- Seleccionar Proveedor --",clearProviderHint:"til para alinearse con los ciclos de facturacin del proveedor (ej., limpiar mensualmente).",clearDateRangeHint:"Dejar en blanco para limpiar desde el principio/hasta el final. Ambos pueden usarse juntos.",confirmUndoCheckbox:"Entiendo que esta accin no se puede deshacer",cancel:"Cancelar",page:"Pgina",of:"de",first:" Primera",prev:" Anterior",next:"Siguiente ",last:"ltima ",types:{chat:"Chat",embedding:"Incrustacin",guardrail_input:" Entrada de Guardarral",guardrail_output:" Salida de Guardarral",planning:"Planificacin",assessment:"Evaluacin",image_generation:" Generacin de Imagen",tts:" Texto a Voz",chat_iteration:"Iteracin de Chat",credit_added:"Crdito Agregado",summary:"Resumen",lambda_invocation:"Invocacin Lambda"}},UF={generic:"Ocurri un error",network:"Error de red",timeout:"Tiempo de espera agotado",unauthorized:"Acceso no autorizado",forbidden:"Acceso prohibido",notFound:"Recurso no encontrado",serverError:"Error del servidor",validationError:"Error de validacin",tryAgain:"Por favor intenta nuevamente"},$F={title:"Base de Conocimiento",newSnippet:"Nuevo Fragmento",editSnippet:"Editar Fragmento",deleteSnippet:"Eliminar Fragmento",searchSnippets:"Buscar fragmentos...",noSnippets:"No se encontraron fragmentos",tags:"Etiquetas",addTag:"Agregar Etiqueta",removeTag:"Eliminar Etiqueta",filterByTag:"Filtrar por Etiqueta",content:"Contenido",created:"Creado",modified:"Modificado",source:"Fuente"},qF={readAloud:"Leer en Voz Alta",stopReading:"Detener Lectura",pauseReading:"Pausar Lectura",resumeReading:"Reanudar Lectura",voice:"Voz",speed:"Velocidad",volume:"Volumen",provider:"Proveedor de TTS"},HF={title:"Lista de Reproduccin",addToPlaylist:"Agregar a Lista de Reproduccin",removeFromPlaylist:"Eliminar de Lista de Reproduccin",playNext:"Reproducir Siguiente",playNow:"Reproducir Ahora",clearPlaylist:"Limpiar Lista de Reproduccin",emptyPlaylist:"La lista de reproduccin est vaca"},GF={search:"Bsqueda Web",scrape:"Extraer Contenido",transcribe:"Transcribir",youtube:"YouTube",javascript:"Ejecutar JavaScript",generateChart:"Generar Grfico",generateImage:"Generar Imagen"},WF={title:"Feed",generateFeed:"Feed generieren",generating:"Wird generiert...",refresh:"Aktualisieren",noItems:"Noch keine Eintrge",emptyMessage:"Ihr personalisierter Feed wird hier angezeigt",emptySubMessage:"Wir erstellen Inhalte basierend auf Ihren gespeicherten Snippets und Interessen",didYouKnow:"Wussten Sie",questionAnswer:"Frage & Antwort",stash:"Speichern",stashed:"Gespeichert",trash:"Lschen",quiz:"Quiz",swipeLeft:"Nach links wischen zum Lschen",swipeRight:"Nach rechts wischen zum Speichern",showMore:"Mehr anzeigen",showLess:"Weniger anzeigen",sources:"Quellen",topics:"Themen",settings:{title:"Feed-Einstellungen",searchTerms:"Suchbegriffe",searchTermsDesc:"Definieren Sie bis zu 5 Suchthemen, um Ihren Feed zu personalisieren",addTerm:"Begriff hinzufgen",removeTerm:"Entfernen",maxTerms:"Maximal 5 Suchbegriffe erlaubt",termExists:"Dieser Suchbegriff existiert bereits",placeholder:"z.B. 'knstliche Intelligenz', 'Klimanachrichten'",learnedPreferences:"Gelernte Prferenzen",likedTopics:"Beliebte Themen",dislikedTopics:"Unbeliebte Themen",stashToLearn:"Speichern Sie Eintrge, damit der Feed lernt, was Ihnen gefllt",trashToLearn:"Lschen Sie Eintrge, damit der Feed lernt, was vermieden werden soll",tips:" Tipps fr bessere Feeds",tipSpecific:"Seien Sie spezifisch mit Suchbegriffen",tipStash:"Speichern Sie interessante Eintrge",tipTrash:"Lschen Sie irrelevante Eintrge, um die Qualitt zu verbessern",tipMix:"Mischen Sie breite und spezifische Themen fr Vielfalt"}},VF={title:"Quiz",startQuiz:"Quiz starten",nextQuestion:"Nchste Frage",previousQuestion:"Zurck",submitAnswer:"Antwort absenden",viewResults:"Ergebnisse anzeigen",retakeQuiz:"Quiz wiederholen",score:"Punktzahl",correct:"Richtig",incorrect:"Falsch",question:"Frage",of:"von",yourAnswer:"Ihre Antwort",correctAnswer:"Richtige Antwort",explanation:"Erklrung",generating:"Quiz wird erstellt...",noQuizzes:"Noch keine Quizze",emptyMessage:"Erstellen Sie ein Quiz aus einem gespeicherten Snippet oder Feed-Eintrag",performance:"Quiz-Leistung",totalQuizzes:"Gesamte Quizze",averageScore:"Durchschnittliche Punktzahl",questionsAnswered:"Beantwortete Fragen",statistics:"Quiz-Statistiken"},YF={common:DF,auth:MF,chat:OF,planning:jF,settings:BF,languages:FF,billing:zF,errors:UF,swag:$F,tts:qF,playlist:HF,tools:GF,feed:WF,quiz:VF},QF={save:"",cancel:"",delete:"",edit:"",close:"",loading:"...",error:"",success:"",confirm:"",back:"",next:"",submit:"",clear:"",search:"",filter:"",export:"",import:"",download:"",upload:"",copy:"",paste:"",cut:"",undo:"",redo:"",select:"",selectAll:"",deselectAll:""},KF={signIn:" Google ",signOut:"",authRequired:"",tokenExpired:"",welcomeBack:"",signInPrompt:"",signInRequired:"",signingIn:"...",signingOut:"...",researchAgent:"",tagline:"AI",secureAuth:" Google ",whyChooseTitle:" Research Agent",whyChooseIntro:" AI Research Agent ",keyAdvantagesTitle:"",webConnected:"",webConnectedDesc:"",multiTool:"",multiToolDesc:"YouTube ",knowledgeBase:"",knowledgeBaseDesc:"",advancedPlanning:"",advancedPlanningDesc:"",costEffective:"",costEffectiveDesc:"25%",transparency:"",transparencyDesc:" API ",perfectFor:""},XF={placeholder:"...",send:"",retry:"Retry",stop:"",thinking:"...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"",delete:"",copy:"",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},JF={title:"",query:"Research Query",generatePlan:"",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},ZF={title:"",language:"",selectLanguage:"",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},e8={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},t8={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},r8={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},n8={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},a8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},i8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},s8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},o8={title:"",generateFeed:"",generating:"...",refresh:"",noItems:"",emptyMessage:"",emptySubMessage:"",didYouKnow:"",questionAnswer:"",stash:"",stashed:"",trash:"",quiz:"",swipeLeft:"",swipeRight:"",showMore:"",showLess:"",sources:"",topics:"",settings:{title:"",searchTerms:"",searchTermsDesc:"5",addTerm:"",removeTerm:"",maxTerms:"5",termExists:"",placeholder:"''''",learnedPreferences:"",likedTopics:"",dislikedTopics:"",stashToLearn:"",trashToLearn:"",tips:" ",tipSpecific:"",tipStash:"",tipTrash:"",tipMix:""}},l8={title:"",startQuiz:"",nextQuestion:"",previousQuestion:"",submitAnswer:"",viewResults:"",retakeQuiz:"",score:"",correct:"",incorrect:"",question:"",of:"",yourAnswer:"",correctAnswer:"",explanation:"",generating:"...",noQuizzes:"",emptyMessage:"",performance:"",totalQuizzes:"",averageScore:"",questionsAnswered:"",statistics:""},c8={common:QF,auth:KF,chat:XF,planning:JF,settings:ZF,languages:e8,billing:t8,errors:r8,swag:n8,tts:a8,playlist:i8,tools:s8,feed:o8,quiz:l8},u8={save:"",cancel:"",delete:"",edit:"",close:"",loading:"...",error:"",success:"",confirm:"",back:"",next:"",submit:"",clear:"",search:"",filter:"",export:"",import:"",download:"",upload:"",copy:"",paste:"",cut:"",undo:"",redo:"",select:"",selectAll:"",deselectAll:""},d8={signIn:"Google",signOut:"",authRequired:"",tokenExpired:"",welcomeBack:"",signInPrompt:"",signInRequired:"",signingIn:"...",signingOut:"...",researchAgent:"",tagline:"AI",secureAuth:"Google",whyChooseTitle:"Research Agent",whyChooseIntro:"AIResearch Agent",keyAdvantagesTitle:"",webConnected:"Web",webConnectedDesc:"Web",multiTool:"",multiToolDesc:"WebYouTube",knowledgeBase:"",knowledgeBaseDesc:"",advancedPlanning:"",advancedPlanningDesc:"",costEffective:"",costEffectiveDesc:"25%",transparency:"",transparencyDesc:"API",perfectFor:""},h8={placeholder:"...",send:"",retry:"Retry",stop:"",thinking:"...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"",delete:"",copy:"",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},p8={title:"",query:"Research Query",generatePlan:"",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},g8={title:"",language:"",selectLanguage:"",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},f8={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},m8={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},y8={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},b8={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},x8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},v8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},w8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},S8={title:"",generateFeed:"",generating:"...",refresh:"",noItems:"",emptyMessage:"",emptySubMessage:"",didYouKnow:"",questionAnswer:"",stash:"",stashed:"",trash:"",quiz:"",swipeLeft:"",swipeRight:"",showMore:"",showLess:"",sources:"",topics:"",settings:{title:"",searchTerms:"",searchTermsDesc:"5",addTerm:"",removeTerm:"",maxTerms:"5",termExists:"",placeholder:"''''",learnedPreferences:"",likedTopics:"",dislikedTopics:"",stashToLearn:"",trashToLearn:"",tips:" ",tipSpecific:"",tipStash:"",tipTrash:"",tipMix:""}},T8={title:"",startQuiz:"",nextQuestion:"",previousQuestion:"",submitAnswer:"",viewResults:"",retakeQuiz:"",score:"",correct:"",incorrect:"",question:"",of:"",yourAnswer:"",correctAnswer:"",explanation:"",generating:"...",noQuizzes:"",emptyMessage:"",performance:"",totalQuizzes:"",averageScore:"",questionsAnswered:"",statistics:""},k8={common:u8,auth:d8,chat:h8,planning:p8,settings:g8,languages:f8,billing:m8,errors:y8,swag:b8,tts:x8,playlist:v8,tools:w8,feed:S8,quiz:T8},E8={save:"",cancel:"",delete:"",edit:"",close:"",loading:" ...",error:"",success:"",confirm:"",back:"",next:"",submit:"",clear:"",search:"",filter:"",export:"",import:"",download:"",upload:"",copy:"",paste:"",cut:"",undo:"",redo:"",select:"",selectAll:" ",deselectAll:"  "},C8={signIn:"   Google",signOut:" ",authRequired:"    ",tokenExpired:"  .     .",welcomeBack:" !",signInPrompt:"  ",signInRequired:"      ",signingIn:"  ...",signingOut:"  ...",researchAgent:" ",tagline:"    ",secureAuth:"   Google",whyChooseTitle:"  Research Agent",whyChooseIntro:"            Research Agent         .",keyAdvantagesTitle:" :",webConnected:"  ",webConnectedDesc:"            -    ",multiTool:"  ",multiToolDesc:"          YouTube       ",knowledgeBase:"  ",knowledgeBaseDesc:"                ",advancedPlanning:" ",advancedPlanningDesc:"           ",costEffective:"  ",costEffectiveDesc:"             .     25%",transparency:" ",transparencyDesc:"   API         ",perfectFor:" :               ."},_8={placeholder:"  ...",send:"",retry:"Retry",stop:"",thinking:" ...",generating:"Generating response...",newChat:"New Chat",clearHistory:"Clear History",loadChat:"Load Chat",systemPrompt:"System Prompt",customInstructions:"Custom Instructions",temperature:"Temperature",maxTokens:"Max Tokens",model:"Model",provider:"Provider",history:"Chat History",continue:"Continue",regenerate:"Regenerate",edit:"",delete:"",copy:"",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Please sign in to use this feature",providerRequired:"Please configure at least one provider in Settings",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:" ",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},A8={title:" ",query:"Research Query",generatePlan:" ",savePlan:"Save Plan",loadSaved:"Load Saved",transferToChat:"Transfer to Chat",clearAll:"Clear All",debug:"Debug",planning:"Planning...",planGenerated:"Plan generated successfully",noPlan:"No plan generated yet",enterQuery:"Enter your research query or topic...",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},N8={title:"",language:"",selectLanguage:" ",providers:"Providers",cloudSync:"Cloud Sync",billing:"Billing",general:"General",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Appearance",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},L8={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},P8={title:"Billing Dashboard",balance:"Credit Balance",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Cost",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},R8={generic:"An error occurred",network:"Network error",timeout:"Request timed out",unauthorized:"Unauthorized access",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Please try again"},I8={title:"Knowledge Base",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Search snippets...",noSnippets:"No snippets found",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},D8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},M8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},O8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},j8={title:"",generateFeed:" ",generating:" ...",refresh:"",noItems:"   ",emptyMessage:"   ",emptySubMessage:"       ",didYouKnow:"  ",questionAnswer:" ",stash:"",stashed:"",trash:"",quiz:"",swipeLeft:"  ",swipeRight:"  ",showMore:" ",showLess:" ",sources:"",topics:"",settings:{title:" ",searchTerms:" ",searchTermsDesc:"    5    ",addTerm:" ",removeTerm:"",maxTerms:"  5  ",termExists:"    ",placeholder:": ' ', ' '",learnedPreferences:" ",likedTopics:" ",dislikedTopics:"  ",stashToLearn:"       ",trashToLearn:"        ",tips:"   ",tipSpecific:"    ",tipStash:"     ",tipTrash:"      ",tipMix:"    "}},B8={title:"",startQuiz:" ",nextQuestion:" ",previousQuestion:"",submitAnswer:" ",viewResults:" ",retakeQuiz:" ",score:"",correct:"",incorrect:"",question:"",of:"",yourAnswer:"",correctAnswer:" ",explanation:"",generating:"  ...",noQuizzes:"   ",emptyMessage:"         ",performance:" ",totalQuizzes:" ",averageScore:" ",questionsAnswered:"  ",statistics:" "},F8={common:E8,auth:C8,chat:_8,planning:A8,settings:N8,languages:L8,billing:P8,errors:R8,swag:I8,tts:D8,playlist:M8,tools:O8,feed:j8,quiz:B8},z8={save:"Opslaan",cancel:"Annuleren",delete:"Verwijderen",edit:"Bewerken",close:"Sluiten",loading:"Laden...",error:"Fout",success:"Succes",confirm:"Bevestigen",back:"Terug",next:"Volgende",submit:"Verzenden",clear:"Wissen",search:"Zoeken",filter:"Filteren",export:"Exporteren",import:"Importeren",download:"Downloaden",upload:"Uploaden",copy:"Kopiren",paste:"Plakken",cut:"Knippen",undo:"Ongedaan maken",redo:"Opnieuw",select:"Selecteren",selectAll:"Alles selecteren",deselectAll:"Alles deselecteren"},U8={signIn:"Inloggen met Google",signOut:"Uitloggen",authRequired:"Authenticatie is vereist om deze applicatie te gebruiken",tokenExpired:"Uw sessie is verlopen. Log opnieuw in.",welcomeBack:"Welkom terug!",signInPrompt:"Inloggen om door te gaan",signInRequired:"U moet inloggen om deze functie te gebruiken",signingIn:"Inloggen...",signingOut:"Uitloggen...",researchAgent:"Onderzoeksagent",tagline:"AI-aangedreven onderzoeksassistent",secureAuth:"Veilige authenticatie mogelijk gemaakt door Google",whyChooseTitle:"Waarom kiezen voor Research Agent?",whyChooseIntro:"In tegenstelling tot standaard AI-chatbots die simpelweg vragen beantwoorden, is Research Agent uw uitgebreide onderzoekspartner gebouwd voor diepgaand onderzoek en kennisopbouw.",keyAdvantagesTitle:"Belangrijkste Voordelen:",webConnected:"Web-verbonden Intelligentie",webConnectedDesc:"Real-time webzoeken en content-extractie zorgen voor actuele, nauwkeurige informatie  geen verouderde trainingsgegevens",multiTool:"Multi-Tool Orkestratie",multiToolDesc:"Combineert naadloos webzoeken, code-uitvoering, YouTube-transcripties, beeldgeneratie en documentanalyse in n gesprek",knowledgeBase:"Kennisbank Integratie",knowledgeBaseDesc:"Sla bevindingen op in uw persoonlijke kennisbank, creer fragmenten en bouw uitgebreide onderzoeksdocumenten in de loop van de tijd",advancedPlanning:"Geavanceerde Planning",advancedPlanningDesc:"Genereer gestructureerde onderzoeksplannen met expert-persona's, zoekstrategien en methodologische benaderingen",costEffective:"Slimme Modelselectie",costEffectiveDesc:"Automatische selectie van modellen die het werk economisch of krachtig uitvoeren op basis van de selectiestrategie. Gebruik je eigen sleutels om 25% te besparen",transparency:"Volledige Transparantie",transparencyDesc:"Volg elke API-aanroep, token-gebruik en kosten in real-time facturatie-dashboard",perfectFor:"Perfect voor: Academisch onderzoek, marktanalyse, contentcreatie, technische documentatie, competitieve intelligentie en elke taak die grondig onderzoek vereist."},$8={placeholder:"Typ hier uw bericht...",send:"Verzenden",retry:"Opnieuw proberen",stop:"Stoppen",thinking:"Denken...",generating:"Antwoord genereren...",newChat:"Nieuwe chat",clearHistory:"Geschiedenis wissen",loadChat:"Chat laden",systemPrompt:"Systeemprompt",customInstructions:"Aangepaste instructies",temperature:"Temperatuur",maxTokens:"Max tokens",model:"Model",provider:"Provider",history:"Chatgeschiedenis",continue:"Doorgaan",regenerate:"Opnieuw genereren",edit:"Bewerken",delete:"Verwijderen",copy:"Kopiren",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Log in om deze functie te gebruiken",providerRequired:"Configureer minimaal n provider in Instellingen",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Alles selecteren",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},q8={title:"Onderzoeksplanning",query:"Onderzoeksvraag",generatePlan:"Plan genereren",savePlan:"Plan opslaan",loadSaved:"Load Saved",transferToChat:"Overdragen naar chat",clearAll:"Alles wissen",debug:"Debug",planning:"Plannen...",planGenerated:"Plan succesvol gegenereerd",noPlan:"Nog geen plan gegenereerd",enterQuery:"Voer uw onderzoeksvraag in",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},H8={title:"Instellingen",language:"Taal",selectLanguage:"Selecteer taal",providers:"Providers",cloudSync:"Cloudsynchronisatie",billing:"Facturering",general:"Algemeen",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Uiterlijk",theme:"Thema",darkMode:"Donkere modus",lightMode:"Lichte modus",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},G8={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},W8={title:"Facturering",balance:"Saldo",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Kosten",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},V8={generic:"Er is een fout opgetreden",network:"Netwerkfout",timeout:"Request timed out",unauthorized:"Ongeautoriseerde toegang",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Probeer het opnieuw"},Y8={title:"Kennisbank",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Zoek fragmenten...",noSnippets:"Geen fragmenten gevonden",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},Q8={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},K8={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},X8={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},J8={title:"Feed",generateFeed:"Feed Genereren",generating:"Genereren...",refresh:"Vernieuwen",noItems:"Nog geen items",emptyMessage:"Je gepersonaliseerde feed verschijnt hier",emptySubMessage:"We genereren content op basis van je opgeslagen snippets en interesses",didYouKnow:"Wist je dat",questionAnswer:"Vraag & Antwoord",stash:"Opslaan",stashed:"Opgeslagen",trash:"Verwijderen",quiz:"Quiz",swipeLeft:"Veeg naar links om te verwijderen",swipeRight:"Veeg naar rechts om op te slaan",showMore:"Meer tonen",showLess:"Minder tonen",sources:"Bronnen",topics:"Onderwerpen",settings:{title:"Feed Instellingen",searchTerms:"Zoektermen",searchTermsDesc:"Definieer maximaal 5 zoekonderwerpen om je feed te personaliseren",addTerm:"Term Toevoegen",removeTerm:"Verwijderen",maxTerms:"Maximaal 5 zoektermen toegestaan",termExists:"Deze zoekterm bestaat al",placeholder:"bijv. 'kunstmatige intelligentie', 'klimaatnieuws'",learnedPreferences:"Geleerde Voorkeuren",likedTopics:"Favoriete Onderwerpen",dislikedTopics:"Ongewenste Onderwerpen",stashToLearn:"Sla items op om de feed te helpen leren wat je leuk vindt",trashToLearn:"Verwijder items om de feed te helpen leren wat te vermijden",tips:" Tips voor Betere Feeds",tipSpecific:"Wees specifiek met zoektermen",tipStash:"Sla interessante items op",tipTrash:"Verwijder irrelevante items om de kwaliteit te verbeteren",tipMix:"Mix brede en specifieke onderwerpen voor varieteit"}},Z8={title:"Quiz",startQuiz:"Quiz Starten",nextQuestion:"Volgende Vraag",previousQuestion:"Vorige",submitAnswer:"Antwoord Indienen",viewResults:"Resultaten Bekijken",retakeQuiz:"Quiz Herhalen",score:"Score",correct:"Correct",incorrect:"Incorrect",question:"Vraag",of:"van",yourAnswer:"Jouw antwoord",correctAnswer:"Juiste antwoord",explanation:"Uitleg",generating:"Quiz genereren...",noQuizzes:"Nog geen quizzen",emptyMessage:"Genereer een quiz van een opgeslagen snippet of feed item",performance:"Quiz Prestaties",totalQuizzes:"Totaal Quizzen",averageScore:"Gemiddelde Score",questionsAnswered:"Beantwoorde Vragen",statistics:"Quiz Statistieken"},e9={common:z8,auth:U8,chat:$8,planning:q8,settings:H8,languages:G8,billing:W8,errors:V8,swag:Y8,tts:Q8,playlist:K8,tools:X8,feed:J8,quiz:Z8},t9={save:"Salvar",cancel:"Cancelar",delete:"Excluir",edit:"Editar",close:"Fechar",loading:"Carregando...",error:"Erro",success:"Sucesso",confirm:"Confirmar",back:"Voltar",next:"Prximo",submit:"Enviar",clear:"Limpar",search:"Buscar",filter:"Filtrar",export:"Exportar",import:"Importar",download:"Baixar",upload:"Enviar",copy:"Copiar",paste:"Colar",cut:"Recortar",undo:"Desfazer",redo:"Refazer",select:"Selecionar",selectAll:"Selecionar tudo",deselectAll:"Desselecionar tudo"},r9={signIn:"Entrar com Google",signOut:"Sair",authRequired:"A autenticao  necessria para usar este aplicativo",tokenExpired:"Sua sesso expirou. Por favor, entre novamente.",welcomeBack:"Bem-vindo de volta!",signInPrompt:"Entrar para continuar",signInRequired:"Voc deve entrar para usar este recurso",signingIn:"Entrando...",signingOut:"Saindo...",researchAgent:"Agente de Pesquisa",tagline:"Assistente de pesquisa com IA",secureAuth:"Autenticao segura fornecida pelo Google",whyChooseTitle:"Por que escolher o Research Agent?",whyChooseIntro:"Ao contrrio dos chatbots de IA padro que simplesmente respondem perguntas, o Research Agent  seu companheiro de pesquisa abrangente criado para investigao profunda e construo de conhecimento.",keyAdvantagesTitle:"Principais Vantagens:",webConnected:"Inteligncia Conectada  Web",webConnectedDesc:"Pesquisa web em tempo real e extrao de contedo garantem informaes atuais e precisas  no dados de treinamento desatualizados",multiTool:"Orquestrao Multi-Ferramentas",multiToolDesc:"Combina perfeitamente pesquisa web, execuo de cdigo, transcries do YouTube, gerao de imagens e anlise de documentos em uma nica conversa",knowledgeBase:"Integrao de Base de Conhecimento",knowledgeBaseDesc:"Salve descobertas em sua base de conhecimento pessoal, crie trechos e construa documentos de pesquisa abrangentes ao longo do tempo",advancedPlanning:"Planejamento Avanado",advancedPlanningDesc:"Gere planos de pesquisa estruturados com personas especializadas, estratgias de busca e abordagens metodolgicas",costEffective:"Seleo Inteligente de Modelos",costEffectiveDesc:"Seleo automtica de modelos que fazem o trabalho de forma econmica ou poderosa com base na estratgia de seleo. Traga suas prprias chaves para economizar 25%",transparency:"Transparncia Total",transparencyDesc:"Rastreie cada chamada de API, uso de tokens e custo no painel de cobrana em tempo real",perfectFor:"Perfeito para: Pesquisa acadmica, anlise de mercado, criao de contedo, documentao tcnica, inteligncia competitiva e qualquer tarefa que exija investigao minuciosa."},n9={placeholder:"Digite sua mensagem aqui...",send:"Enviar",retry:"Tentar novamente",stop:"Parar",thinking:"Pensando...",generating:"Gerando resposta...",newChat:"Nova conversa",clearHistory:"Limpar histrico",loadChat:"Carregar conversa",systemPrompt:"Prompt do sistema",customInstructions:"Instrues personalizadas",temperature:"Temperatura",maxTokens:"Mximo de tokens",model:"Modelo",provider:"Provedor",history:"Histrico de conversa",continue:"Continuar",regenerate:"Regenerar",edit:"Editar",delete:"Excluir",copy:"Copiar",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:"Por favor, entre para usar este recurso",providerRequired:"Configure pelo menos um provedor nas Configuraes",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:"Selecionar tudo",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},a9={title:"Planejamento de pesquisa",query:"Consulta de pesquisa",generatePlan:"Gerar plano",savePlan:"Salvar plano",loadSaved:"Load Saved",transferToChat:"Transferir para chat",clearAll:"Limpar tudo",debug:"Debug",planning:"Planejando...",planGenerated:"Plano gerado com sucesso",noPlan:"Nenhum plano gerado ainda",enterQuery:"Digite sua consulta de pesquisa",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},i9={title:"Configuraes",language:"Idioma",selectLanguage:"Selecionar idioma",providers:"Provedores",cloudSync:"Sincronizao na nuvem",billing:"Faturamento",general:"Geral",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:"Aparncia",theme:"Tema",darkMode:"Modo escuro",lightMode:"Modo claro",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},s9={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},o9={title:"Faturamento",balance:"Saldo",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"Custo",tokens:"Tokens",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},l9={generic:"Ocorreu um erro",network:"Erro de rede",timeout:"Request timed out",unauthorized:"Acesso no autorizado",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:"Por favor, tente novamente"},c9={title:"Base de conhecimento",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:"Buscar trechos...",noSnippets:"Nenhum trecho encontrado",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},u9={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},d9={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},h9={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},p9={title:"Feed",generateFeed:"Gerar Feed",generating:"Gerando...",refresh:"Atualizar",noItems:"Ainda sem itens",emptyMessage:"Seu feed personalizado aparecer aqui",emptySubMessage:"Vamos gerar contedo baseado em seus trechos salvos e interesses",didYouKnow:"Voc sabia",questionAnswer:"Pergunta e Resposta",stash:"Guardar",stashed:"Guardado",trash:"Excluir",quiz:"Quiz",swipeLeft:"Deslize para a esquerda para excluir",swipeRight:"Deslize para a direita para guardar",showMore:"Mostrar mais",showLess:"Mostrar menos",sources:"Fontes",topics:"Tpicos",settings:{title:"Configuraes do Feed",searchTerms:"Termos de Busca",searchTermsDesc:"Defina at 5 tpicos de busca para personalizar seu feed",addTerm:"Adicionar Termo",removeTerm:"Remover",maxTerms:"Mximo de 5 termos de busca permitidos",termExists:"Este termo de busca j existe",placeholder:"ex. 'inteligncia artificial', 'notcias climticas'",learnedPreferences:"Preferncias Aprendidas",likedTopics:"Tpicos Favoritos",dislikedTopics:"Tpicos Indesejados",stashToLearn:"Guarde itens para ajudar o feed a aprender o que voc gosta",trashToLearn:"Exclua itens para ajudar o feed a aprender o que evitar",tips:" Dicas para Feeds Melhores",tipSpecific:"Seja especfico com os termos de busca",tipStash:"Guarde itens que voc acha interessantes",tipTrash:"Exclua itens irrelevantes para melhorar a qualidade",tipMix:"Misture tpicos amplos e especficos para variedade"}},g9={title:"Quiz",startQuiz:"Iniciar Quiz",nextQuestion:"Prxima Pergunta",previousQuestion:"Anterior",submitAnswer:"Enviar Resposta",viewResults:"Ver Resultados",retakeQuiz:"Refazer Quiz",score:"Pontuao",correct:"Correto",incorrect:"Incorreto",question:"Pergunta",of:"de",yourAnswer:"Sua resposta",correctAnswer:"Resposta correta",explanation:"Explicao",generating:"Gerando quiz...",noQuizzes:"Ainda sem quizzes",emptyMessage:"Gere um quiz de qualquer trecho salvo ou item do feed",performance:"Desempenho no Quiz",totalQuizzes:"Total de Quizzes",averageScore:"Pontuao Mdia",questionsAnswered:"Perguntas Respondidas",statistics:"Estatsticas do Quiz"},f9={common:t9,auth:r9,chat:n9,planning:a9,settings:i9,languages:s9,billing:o9,errors:l9,swag:c9,tts:u9,playlist:d9,tools:h9,feed:p9,quiz:g9},m9={save:"",cancel:"",delete:"",edit:"",close:"",loading:"...",error:"",success:"",confirm:"",back:"",next:"",submit:"",clear:"",search:"",filter:"",export:"",import:"",download:"",upload:"",copy:"",paste:"",cut:"",undo:"",redo:"",select:"",selectAll:" ",deselectAll:" "},y9={signIn:"  Google",signOut:"",authRequired:"     ",tokenExpired:"  . ,  .",welcomeBack:" !",signInPrompt:",  ",signInRequired:"  ,    ",signingIn:"...",signingOut:"...",researchAgent:" ",tagline:"    ",secureAuth:"   Google",whyChooseTitle:"   Research Agent?",whyChooseIntro:"    AI-,     , Research Agent       ,       .",keyAdvantagesTitle:" :",webConnected:",   ",webConnectedDesc:"        ,       ",multiTool:"  ",multiToolDesc:"  -,  ,  YouTube,        ",knowledgeBase:"  ",knowledgeBaseDesc:"     ,         ",advancedPlanning:" ",advancedPlanningDesc:"      ,     ",costEffective:"  ",costEffectiveDesc:"  ,          .    ,   25%",transparency:" ",transparencyDesc:"   API,           ",perfectFor:" :  ,  ,  ,  ,     ,   ."},b9={placeholder:"   ...",send:"",retry:"",stop:"",thinking:"...",generating:" ...",newChat:" ",clearHistory:" ",loadChat:" ",systemPrompt:" ",customInstructions:" ",temperature:"",maxTokens:". ",model:"",provider:"",history:" ",continue:"",regenerate:"",edit:"",delete:"",copy:"",copied:"Copied!",selectFiles:"Select Files",attachFiles:"Attach Files",pasteImage:"Paste Image",recording:"Recording...",voiceInput:"Voice Input",stopRecording:"Stop Recording",processing:"Processing...",noMessages:"No messages yet. Start a conversation!",clearConfirm:"Are you sure you want to clear all messages?",deleteConfirm:"Are you sure you want to delete this message?",loadingHistory:"Loading chat history...",savingChat:"Saving chat...",chatSaved:"Chat saved successfully",chatLoaded:"Chat loaded successfully",errorSaving:"Error saving chat",errorLoading:"Error loading chat",signInRequired:", ,    ",providerRequired:"      ",messageError:"Error sending message",streamError:"Error in message stream",toolExecution:"Executing tool...",toolExecuted:"Tool executed successfully",toolError:"Tool execution error",searchingWeb:"Searching the web...",scrapingContent:"Scraping content...",transcribingAudio:"Transcribing audio...",generatingImage:"Generating image...",generatingChart:"Generating chart...",executingCode:"Executing code...",planningMode:"Planning Mode",exitPlanning:"Exit Planning",startPlanning:"Start Planning",mcpServers:"MCP Servers",addMCPServer:"Add MCP Server",mcpServerName:"Server Name",mcpServerUrl:"Server URL",exampleServers:"Example Servers",officialServers:"Official MCP Servers",sampleServers:"Sample Servers",instructions:"Instructions",availableTools:"Available Tools",enableServer:"Enable Server",disableServer:"Disable Server",removeServer:"Remove Server",serverAdded:"Server added successfully",serverRemoved:"Server removed successfully",invalidUrl:"Invalid URL format",nameRequired:"Server name is required",urlRequired:"Server URL is required",chatHistory:"Chat History",examples:"Examples",attachContext:"Attach Context",attachContextTooltip:"Attach knowledge base snippets as context for this conversation",searchProvider:"Search Provider:",functionCall:"Function Call:",code:"Code:",arguments:"Arguments:",callId:"Call ID:",result:"Result:",url:"URL:",viewRawHtml:"View raw uncompressed HTML",copyOutputToClipboard:"Copy output to clipboard",copyCodeToClipboard:"Copy code to clipboard",captureToSwag:"Capture to Swag",captureOutputToSwag:"Capture output to Swag",captureCodeToSwag:"Capture code to Swag",grabImage:"Grab image",noSummarization:"No summarization",usingProxy:"Using proxy for enhanced privacy and bot detection evasion",contentExtracted:"Content intelligently extracted",truncatedToFit:"Truncated to fit model",scrapeMethod:"Scrape Method:",tier:"Tier",scrapeTime:"Scrape Time:",totalTime:"Total Time:",format:"Format:",originalSize:"Original Size:",compressedSize:"Compressed Size:",compression:"Compression:",compressionStrategy:"Compression Strategy:",basicExtraction:"Basic extraction",rawHtml:"Raw HTML ({{count}} chars)",rawText:"Raw Text ({{count}} chars)",contentProcessingPipeline:"Content Processing Pipeline:",size:"Size:",titlePrompt:"Title/Prompt",finalPrompt:"Final Prompt",deleteChat:"Delete Chat",clearAllChats:"Clear All Chats",confirmClearAll:"Are you sure you want to clear all chat history?",confirmDelete:"Are you sure you want to delete this chat?",noChatsYet:"No chats yet",startChatting:"Start chatting to see history here",chatDeleted:"Chat deleted",allChatsCleared:"All chats cleared",chatTitle:"Chat Title",enterChatTitle:"Enter a title for this chat...",signInToChat:"Please sign in to start chatting",streamingResponse:"Streaming response...",imageAddedToSwag:"Image added to Swag!",imageAddedWithoutConversion:"Image added to Swag (without conversion)!",contentCapturedToSwag:"Content captured to Swag!",contentCapturedWithoutConversion:"Content captured to Swag (without image conversion)!",planningTransferred:"Planning prompts transferred to new chat",failedToTransfer:"Failed to transfer planning data",addedToPlaylist:"Added {{count}} video{{plural}} to playlist",transcriptionStopped:"Transcription stopped",failedToStopTranscription:"Failed to stop transcription: {{error}}",fileTypeNotSupported:"File type not supported: {{name}}. Supported types: JPEG, PNG, GIF, WebP, PDF",fileTooLarge:"File too large: {{name}} ({{size}}MB). Max size: {{maxSize}}MB",imageTokenWarning:"Image {{name}} may use many tokens (~{{tokens}}k). Consider using a smaller image.",fileAdded:"Added {{name}}",failedToProcess:"Failed to process {{name}}",signInToSendMessages:"Please sign in to send messages",foundRelevantChunks:" Found {{count}} relevant chunks from knowledge base",noRelevantContext:"No relevant context found in knowledge base",failedToRetrieveRag:"Failed to retrieve RAG context, continuing without it",sessionExpired:"Your session has expired. Please sign in again.",todoLimitReached:"Todo auto-progression limit reached. Please continue manually.",snippetSaved:"Saved snippet: {{title}}",snippetDeleted:"Deleted snippet: {{title}}",copiedToClipboard:"Copied to clipboard!",outputCopied:"Output copied to clipboard!",codeCopied:"Code copied to clipboard!",inputPlaceholder:"Type your message... (Shift+Enter for new line,  for history)",continueProcessing:"Continue Processing",stopGenerating:"Stop generating response",sendMessage:"Send message",chatMessageInput:"Chat message input",editPlan:"Edit Plan",makeAPlan:"Make A Plan",close:"Close",failedToLoadChat:"Failed to load chat",mcpServerNamePlaceholder:"Server Name (e.g., filesystem, github)",mcpServerUrlPlaceholder:"Server URL (e.g., http://localhost:3000)",noMcpServers:"No MCP servers configured",addServer:"Add Server",remove:"Remove",chatHistoryTitle:"Chat History",noChatHistory:"No chat history found. Start a conversation to save it automatically.",allChatHistoryCleared:"All chat history cleared",loadChatSuccess:"Chat loaded successfully",examplesTitle:"Chat Examples",tryExample:"Try this example",attachContextTitle:"Attach Context from Swag",snippetsAttached:"{{count}} snippet{{plural}} attached",attachSnippets:"Attach Snippets",searchSnippets:"Search snippets...",selectAll:" ",selectNone:"Select None",deleteSelected:"Delete Selected",cancel:"Cancel",load:"Load",confirmDeleteChat:"Are you sure you want to delete this chat?",confirmClearHistory:"Are you sure you want to clear all chat history?",confirmDeleteSelected:"Are you sure you want to delete {{count}} selected chat{{plural}}?",chatLoadedFrom:"Loaded from",chatSavedAt:"Saved at",noTitle:"No title",clearAttachedSnippets:"Clear all attached snippets",mcpServerConfiguration:"MCP Server Configuration",typeMessageFirst:"Type a message first",typeMessage:"Type a message",signInToSend:"Please sign in to send messages"},x9={title:" ",query:" ",generatePlan:" ",savePlan:" ",loadSaved:"Load Saved",transferToChat:"  ",clearAll:" ",debug:"Debug",planning:"...",planGenerated:"  ",noPlan:"   ",enterQuery:"   ",researchFocus:"Research Focus",methodology:"Methodology",expectedOutcome:"Expected Outcome",initializing:"Initializing...",processing:"Processing...",signInToGenerate:"Sign in to Generate Plan",generating:"Generating...",signInToUsePlanning:"Please sign in to use planning",signInRequired:"Please sign in with Google to use the planning feature",authExpired:"Authentication expired. Please sign out and sign in again to continue.",authRequired:"Authentication required. Please sign in with Google to continue.",enterResearchQuestion:"Please enter a research question",debugCopied:"Debug info copied to clipboard!",debugCopyFailed:"Failed to copy debug info",savePlanTooltip:"Save the current plan to your saved plans list",loadSavedPlans:"Load Saved Plans",debugTooltip:"Copy debug info for Copilot troubleshooting",transferTooltip:"Transfer to Chat",clearAllTooltip:"Clear all planning data and start fresh",systemPromptEditable:"Generated System Prompt (Editable):",systemPromptHelp:"This defines the AI's role and behavior. Edit as needed before transferring to chat.",userQueryEditable:"Generated User Query (Editable):",userQueryHelp:"This is the message that will be sent to the chat. Edit to refine your query.",generatedPrompts:"Generated Prompts",llmInfoTooltip:"View LLM transparency info (model, tokens, cost)",llmCalls:"call",llmCallsPlural:"calls",cannotSavePlan:"Cannot save plan: No valid plan generated",planSavedSuccess:"Plan saved successfully",planSaveFailed:"Failed to save plan",loadSavedPlan:"Load Saved Plan",storage:"Storage",storageWarning:"Storage is {{percentage}}% full",storageWarningHelp:"Consider deleting old plans to free up space.",noSavedPlans:"No saved plans found",saved:"Saved",load:"Load",simpleQueryDetected:"Simple Query Detected",simpleQueryHelp:"This query can be answered directly without extensive planning.",comprehensiveResearchPlan:" Comprehensive Research Plan",analysisSummary:" Analysis Summary",queryType:"Query Type:",complexity:"Complexity:",researchApproach:"Research Approach:",estimatedSources:"Estimated Sources:",reasoning:"Reasoning:",expertPersona:" Expert Persona",searchQueries:" Search Queries:",researchQuestions:" Research Questions:",suggestedSources:" Suggested Sources:",sources:"Sources:",variousRelevantSources:"Various relevant sources",researchMethodology:" Research Methodology:",enhancedSystemPrompt:" Enhanced System Prompt:",enhancedUserPrompt:" Enhanced User Prompt:",debugRawLlmResponse:" Debug: Raw LLM Response Fields",longFormDocumentPlan:" Long-Form Document Plan",longFormNote:"Note: This will be built in stages using snippets. Each section will be researched and written separately, then combined into a final document.",documentStructure:" Document Structure:",keywords:"Keywords:",workflow:" Workflow:",needMoreInfo:" Need More Information",pleaseClarify:"Please clarify:",updateQueryDetails:"Update your query with more details:",provideMoreDetails:"Provide more specific details...",regeneratePlanWithClarifications:"Regenerate Plan with Clarifications",moreInfoRequired:" More Info Required",planType:"Plan Type:",detectedComplexityPatterns:" Detected Complexity Patterns:",estimatedIterations:"Estimated Iterations",toolsRequired:"Tools Required",suggestedWorkflow:" Suggested Workflow:",requiredTools:" Required Tools:",guidanceQuestions:" Please answer these questions to refine your plan:",updatePromptWithAnswers:"Update your research prompt with answers:",guidanceTip:" Tip: Include answers to the questions above in your updated query. The more specific you are, the better the AI can create an effective multi-iteration plan with proper tool usage and few-shot examples.",guidanceExamplePlaceholder:`Example: I want to build a comprehensive research report on climate change by:
1. Creating 25 todos for different sub-topics (policy, science, economics, etc.)
2. Searching the web for each topic and saving results to snippets
3. Generating charts to visualize key data points
4. Combining all snippets into a master analysis

Please create a detailed plan with few-shot examples showing how to use create_todo, search_web, create_snippet, and generate_chart together in each iteration...`,generateDetailedExecutionPlan:" Generate Detailed Execution Plan",forcePlan:" Force Plan",forcePlanTooltip:"Let AI answer the questions and force plan generation",reset:" Reset",resetTooltip:"Clear guidance mode and return to previous state",aboutGuidanceMode:"About Guidance Mode:",guidanceModeHelp:"This mode detects complex projects that require multiple iterations and extensive tool usage. Answer the questions above to help create a detailed execution plan with few-shot examples showing how to use todos, snippets, and multiple tool calls per iteration.",forcingPlan:"Forcing plan generation...",forcePlanError:"Force plan error",forcePlanFailed:"Force plan failed",clarificationAnswer:"Please use your best judgment based on the original query."},v9={title:"",language:"",selectLanguage:" ",providers:"",cloudSync:" ",billing:"",general:"",generalDescription:"Configure general application settings including language and display preferences",languageHelp:"Changes the interface language and instructs the AI to respond in your selected language",providerCredentials:"Provider Credentials",providerDescription:"Configure your LLM provider API keys. The backend automatically selects the best model for each request",modelSelectionStrategy:"Model Selection Strategy",modelStrategyDescription:"Choose how the system selects models for your requests. This balances cost, quality, and performance",cheap:"Cheap (Recommended)",cheapDescription:"Prioritize free providers (Groq, Gemini) and smallest capable models. Falls back to paid providers only when rate-limited. Best for most use cases",balanced:"Balanced",balancedDescription:"Choose models that reliably do the job without compromising quality. Uses free tier when quality is equivalent, paid models when quality matters. Balances cost vs. capability",powerful:"Powerful",powerfulDescription:"Use the best available models (GPT-4o, Gemini 2.5 Pro, o1) for maximum capability. Prioritizes quality over cost. Uses reasoning models for complex analysis",fastest:"Fastest",fastestDescription:"Prioritize low-latency models (Groq) for quick responses. May sacrifice some quality for speed in simple requests. Great for interactive sessions",tavilyApiKey:"Tavily API Key (Optional)",tavilyPlaceholder:"tvly-...",tavilyHelp:"Enables enhanced web search and scraping via Tavily API. Falls back to DuckDuckGo if not provided",enabledTools:"Enabled Tools",webSearch:"Web Search",webSearchDescription:"Search the web for current information, news, and articles",executeJs:"JavaScript Execution",executeJsDescription:"Execute JavaScript code for calculations and data processing",scrapeUrl:"Web Scraping",scrapeUrlDescription:"Extract content from specific URLs and websites",youtubeSearch:"YouTube Search",youtubeDescription:"Search YouTube for videos with transcript support",transcribe:"Transcribe Audio/Video",transcribeDescription:"Convert audio and video files to text transcriptions",generateChart:"Generate Charts",chartDescription:"Create visualizations and charts from data",generateImage:"Generate Images",imageDescription:"Create AI-generated images from text descriptions",searchKnowledgeBase:"Search Knowledge Base",ragDescription:"Search through uploaded documents and knowledge base",manageTodos:"Manage To-Dos",todosDescription:"Create and manage task lists and reminders",manageSnippets:"Manage Snippets",snippetsDescription:"Save and retrieve code snippets and text",askLlm:"Ask LLM",askLlmDescription:"Delegate sub-questions to other LLM instances",generateReasoning:"Generate Reasoning Chain",reasoningDescription:"Step-by-step analytical reasoning for complex problems",proxySettings:"Proxy Configuration",proxyDescription:"Configure HTTP/HTTPS proxy for web requests",enableProxy:"Enable Proxy",proxyUrl:"Proxy URL",proxyUrlPlaceholder:"http://proxy.example.com:8080",proxyUsername:"Username (Optional)",proxyPassword:"Password (Optional)",locationServices:"Location Services",locationDescription:"Use your location for localized search results and region-specific information",enableLocation:"Enable Location Services",locationHelp:"Allows web searches to return locally relevant results",currentLocation:"Current Location",requestLocation:"Request Location",clearLocation:"Clear Location",locationPermission:"Location Permission",permissionGranted:"Granted",permissionDenied:"Denied",permissionPrompt:"Not requested",tabs:{general:"General",provider:"Provider",cloud:"Cloud Sync",tools:"Tools",proxy:"Proxy",location:"Location",tts:"TTS",rag:"RAG"},appearance:" ",theme:"",darkMode:" ",lightMode:" ",notifications:"Notifications",privacy:"Privacy",accessibility:"Accessibility",fontSize:"Font Size",lineHeight:"Line Height"},w9={en:"English",es:"Espaol",fr:"Franais",de:"Deutsch",zh:"",ja:"",ar:"",nl:"Nederlands",pt:"Portugus",ru:""},S9={title:"",balance:"",totalCost:"Total Cost",totalTokens:"Total Tokens",totalRequests:"Total Requests",cost:"",tokens:"",tokensIn:"Tokens In",tokensOut:"Tokens Out",timestamp:"Timestamp",noTransactions:"No transactions yet",creditsPurchased:"Credits purchased successfully",insufficientCredits:"Insufficient credits",purchaseCredits:"Add Credit",amount:"Amount",paymentMethod:"Payment Method",transactions:"Transactions",overview:"Overview",exportCSV:"Export CSV",clearData:"Clear Data",clearDataConfirm:"Are you sure you want to clear billing data?",dataClearedSuccess:" Success: Cleared {{count}} transactions. {{remaining}} remaining.",dataClearError:" Error: {{message}}",noDataToExport:"No data to export",startDate:"Start Date",endDate:"End Date",type:"Type",provider:"Provider",model:"Model",duration:"Duration",status:"Status",allTypes:"All Types",allProviders:"All Providers",clearFilters:"Clear Filters",quickRanges:"Quick ranges:",today:"Today",last7Days:"Last 7 Days",last30Days:"Last 30 Days",thisMonth:"This Month",byType:"By Type",byProvider:"By Provider",byModel:"By Model",requests:"Requests",groupByRequestId:" Group by Request ID",itemsPerPage:"per page",totalRequestGroups:"{{count}} total request groups (showing {{showing}}), {{ungrouped}} ungrouped",totalTransactionsShowing:"{{total}} total transactions (showing {{showing}})",requestGroup:" Request Group ({{count}} transactions)",signInRequired:" Sign In Required",signInToViewBilling:"Please sign in with Google to view your billing data.",howToAccessBilling:" How to Access Billing Data:",signInStep1:'Click the "Sign in with Google" button in the top navigation bar',signInStep2:"That's it! Your billing data will load automatically",billingDataNote:" Your billing data is stored in a centralized service account Google Sheet and retrieved automatically. No additional permissions or Drive access needed - just sign in with Google.",debugInfo:" Debug Info",loading:"Loading billing data...",errorLoading:" Error Loading Billing Data",retry:" Retry",noBillingData:"No billing data available. Please wait...",noTransactionsMessage:"No transactions found",noBillingDataYet:" No Billing Data Yet",startUsingChat:"Start using the chat to generate billing records. All API usage is automatically tracked.",refresh:" Refresh",usageOnly:"Usage only (excl. credits)",totalCredits:"Total Credits",userQueries:"User Queries",llmCalls:"LLM Calls",userQueriesLlmCalls:"User Queries / LLM Calls",newBalance:"New balance:",creditsToAdd:"Credits to add:",minimumPurchase:"Minimum purchase is $5.00",addCreditsTitle:" Add Credits",purchaseCreditsDescription:"Purchase credits to use AI features. Minimum purchase: $5.00",enterAmount:"Enter amount (min $5.00)",tipUseOwnKeys:" Tip: Add your own API keys in Settings for $0 LLM costs! Only infrastructure costs apply when using your own keys.",loadingPayPal:"Loading PayPal...",paypalNotLoaded:" PayPal SDK not loaded. Please refresh the page.",close:"Close",clearBillingData:"Clear Billing Data",clearDataWarning:" Warning: This action cannot be undone. Your billing data will be permanently deleted.",clearAll:"Clear All",clearByProvider:"Clear by Provider",clearByDateRange:"Clear by Date Range",clearAllDescription:"This will delete all transactions from your billing sheet.",considerExportFirst:"Consider exporting to CSV first for your records.",selectProvider:"Select Provider:",selectProviderPlaceholder:"-- Select Provider --",clearProviderHint:"Useful for aligning with provider billing cycles (e.g., clear monthly).",clearDateRangeHint:"Leave blank to clear from beginning/to end. Both can be used together.",confirmUndoCheckbox:"I understand this action cannot be undone",cancel:"Cancel",page:"Page",of:"of",first:" First",prev:" Prev",next:"Next ",last:"Last ",types:{chat:"Chat",embedding:"Embedding",guardrail_input:" Guardrail Input",guardrail_output:" Guardrail Output",planning:"Planning",assessment:"Assessment",image_generation:" Image Generation",tts:" Text-to-Speech",chat_iteration:"Chat Iteration",credit_added:"Credit Added",summary:"Summary",lambda_invocation:"Lambda Invocation"}},T9={generic:" ",network:" ",timeout:"Request timed out",unauthorized:" ",forbidden:"Access forbidden",notFound:"Resource not found",serverError:"Server error",validationError:"Validation error",tryAgain:",  "},k9={title:" ",newSnippet:"New Snippet",editSnippet:"Edit Snippet",deleteSnippet:"Delete Snippet",searchSnippets:" ...",noSnippets:"  ",tags:"Tags",addTag:"Add Tag",removeTag:"Remove Tag",filterByTag:"Filter by Tag",content:"Content",created:"Created",modified:"Modified",source:"Source"},E9={readAloud:"Read Aloud",stopReading:"Stop Reading",pauseReading:"Pause Reading",resumeReading:"Resume Reading",voice:"Voice",speed:"Speed",volume:"Volume",provider:"TTS Provider"},C9={title:"Playlist",addToPlaylist:"Add to Playlist",removeFromPlaylist:"Remove from Playlist",playNext:"Play Next",playNow:"Play Now",clearPlaylist:"Clear Playlist",emptyPlaylist:"Playlist is empty"},_9={search:"Web Search",scrape:"Scrape Content",transcribe:"Transcribe",youtube:"YouTube",javascript:"Execute JavaScript",generateChart:"Generate Chart",generateImage:"Generate Image"},A9={title:"",generateFeed:" ",generating:"...",refresh:"",noItems:"  ",emptyMessage:"    ",emptySubMessage:"         ",didYouKnow:"  ",questionAnswer:"  ",stash:"",stashed:"",trash:"",quiz:"",swipeLeft:" ,  ",swipeRight:" ,  ",showMore:" ",showLess:" ",sources:"",topics:"",settings:{title:" ",searchTerms:" ",searchTermsDesc:"  5      ",addTerm:" ",removeTerm:"",maxTerms:" 5  ",termExists:"    ",placeholder:", ' ', ' '",learnedPreferences:" ",likedTopics:" ",dislikedTopics:" ",stashToLearn:" ,    ,   ",trashToLearn:" ,    ,  ",tips:"    ",tipSpecific:"    ",tipStash:"  ",tipTrash:"     ",tipMix:"      "}},N9={title:"",startQuiz:" ",nextQuestion:" ",previousQuestion:"",submitAnswer:" ",viewResults:" ",retakeQuiz:" ",score:"",correct:"",incorrect:"",question:"",of:"",yourAnswer:" ",correctAnswer:" ",explanation:"",generating:" ...",noQuizzes:"  ",emptyMessage:"        ",performance:" ",totalQuizzes:" ",averageScore:" ",questionsAnswered:" ",statistics:" "},L9={common:m9,auth:y9,chat:b9,planning:x9,settings:v9,languages:w9,billing:S9,errors:T9,swag:k9,tts:E9,playlist:C9,tools:_9,feed:A9,quiz:N9};Ra.use(KN).use(xB).init({resources:{en:{translation:nF},es:{translation:bF},fr:{translation:IF},de:{translation:YF},zh:{translation:c8},ja:{translation:k8},ar:{translation:F8},nl:{translation:e9},pt:{translation:f9},ru:{translation:L9}},fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const P9="modulepreload",R9=function(e){return"/"+e},$2={},_t=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");a=d(r.map(h=>{if(h=R9(h),h in $2)return;$2[h]=!0;const p=h.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":P9,p||(m.as="script"),m.crossOrigin="",m.href=h,l&&m.setAttribute("nonce",l),document.head.appendChild(m),p)return new Promise((b,x)=>{m.addEventListener("load",b),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var q2="popstate";function I9(e={}){function t(n,a){let{pathname:i,search:s,hash:l}=n.location;return Mv("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ap(a)}return M9(t,r,null,e)}function Sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ks(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D9(){return Math.random().toString(36).substring(2,10)}function H2(e,t){return{usr:e.state,key:e.key,idx:t}}function Mv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?bd(t):t,state:r,key:t&&t.key||n||D9()}}function Ap({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function M9(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,s=a.history,l="POP",d=null,h=p();h==null&&(h=0,s.replaceState({...s.state,idx:h},""));function p(){return(s.state||{idx:null}).idx}function f(){l="POP";let T=p(),k=T==null?null:T-h;h=T,d&&d({action:l,location:v.location,delta:k})}function m(T,k){l="PUSH";let C=Mv(v.location,T,k);h=p()+1;let A=H2(C,h),D=v.createHref(C);try{s.pushState(A,"",D)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;a.location.assign(D)}i&&d&&d({action:l,location:v.location,delta:1})}function b(T,k){l="REPLACE";let C=Mv(v.location,T,k);h=p();let A=H2(C,h),D=v.createHref(C);s.replaceState(A,"",D),i&&d&&d({action:l,location:v.location,delta:0})}function x(T){return O9(T)}let v={get action(){return l},get location(){return e(a,s)},listen(T){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(q2,f),d=T,()=>{a.removeEventListener(q2,f),d=null}},createHref(T){return t(a,T)},createURL:x,encodeLocation(T){let k=x(T);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:b,go(T){return s.go(T)}};return v}function O9(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Sn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ap(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function XN(e,t,r="/"){return j9(e,t,r,!1)}function j9(e,t,r,n){let a=typeof t=="string"?bd(t):t,i=Lo(a.pathname||"/",r);if(i==null)return null;let s=JN(e);B9(s);let l=null;for(let d=0;l==null&&d<s.length;++d){let h=Q9(i);l=V9(s[d],h,n)}return l}function JN(e,t=[],r=[],n="",a=!1){let i=(s,l,d=a,h)=>{let p={relativePath:h===void 0?s.path||"":h,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Sn(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let f=_o([n,p.relativePath]),m=r.concat(p);s.children&&s.children.length>0&&(Sn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),JN(s.children,t,m,f,d)),!(s.path==null&&!s.index)&&t.push({path:f,score:G9(f,s.index),routesMeta:m})};return e.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))i(s,l);else for(let d of ZN(s.path))i(s,l,!0,d)}),t}function ZN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let s=ZN(n.join("/")),l=[];return l.push(...s.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...s),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function B9(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:W9(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var F9=/^:[\w-]+$/,z9=3,U9=2,$9=1,q9=10,H9=-2,G2=e=>e==="*";function G9(e,t){let r=e.split("/"),n=r.length;return r.some(G2)&&(n+=H9),t&&(n+=U9),r.filter(a=>!G2(a)).reduce((a,i)=>a+(F9.test(i)?z9:i===""?$9:q9),n)}function W9(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function V9(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",s=[];for(let l=0;l<n.length;++l){let d=n[l],h=l===n.length-1,p=i==="/"?t:t.slice(i.length)||"/",f=Lm({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),m=d.route;if(!f&&h&&r&&!n[n.length-1].route.index&&(f=Lm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:_o([i,f.pathname]),pathnameBase:Z9(_o([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=_o([i,f.pathnameBase]))}return s}function Lm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Y9(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:f},m)=>{if(p==="*"){let x=l[m]||"";s=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[m];return f&&!b?h[p]=void 0:h[p]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:s,pattern:e}}function Y9(e,t=!1,r=!0){ks(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Q9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ks(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function K9(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?bd(e):e;return{pathname:r?r.startsWith("/")?r:X9(r,t):t,search:e7(n),hash:t7(a)}}function X9(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Nx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J9(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function e3(e){let t=J9(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function t3(e,t,r,n=!1){let a;typeof e=="string"?a=bd(e):(a={...e},Sn(!a.pathname||!a.pathname.includes("?"),Nx("?","pathname","search",a)),Sn(!a.pathname||!a.pathname.includes("#"),Nx("#","pathname","hash",a)),Sn(!a.search||!a.search.includes("#"),Nx("#","search","hash",a)));let i=e===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let d=K9(a,l),h=s&&s!=="/"&&s.endsWith("/"),p=(i||s===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var _o=e=>e.join("/").replace(/\/\/+/g,"/"),Z9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var r3=["POST","PUT","PATCH","DELETE"];new Set(r3);var n7=["GET",...r3];new Set(n7);var xd=_.createContext(null);xd.displayName="DataRouter";var A0=_.createContext(null);A0.displayName="DataRouterState";_.createContext(!1);var n3=_.createContext({isTransitioning:!1});n3.displayName="ViewTransition";var a7=_.createContext(new Map);a7.displayName="Fetchers";var i7=_.createContext(null);i7.displayName="Await";var Qs=_.createContext(null);Qs.displayName="Navigation";var Qp=_.createContext(null);Qp.displayName="Location";var Do=_.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var Tw=_.createContext(null);Tw.displayName="RouteError";function s7(e,{relative:t}={}){Sn(Kp(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=_.useContext(Qs),{hash:a,pathname:i,search:s}=Xp(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:_o([r,i])),n.createHref({pathname:l,search:s,hash:a})}function Kp(){return _.useContext(Qp)!=null}function Ks(){return Sn(Kp(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Qp).location}var a3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function i3(e){_.useContext(Qs).static||_.useLayoutEffect(e)}function Ic(){let{isDataRoute:e}=_.useContext(Do);return e?x7():o7()}function o7(){Sn(Kp(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(xd),{basename:t,navigator:r}=_.useContext(Qs),{matches:n}=_.useContext(Do),{pathname:a}=Ks(),i=JSON.stringify(e3(n)),s=_.useRef(!1);return i3(()=>{s.current=!0}),_.useCallback((d,h={})=>{if(ks(s.current,a3),!s.current)return;if(typeof d=="number"){r.go(d);return}let p=t3(d,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:_o([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,i,a,e])}_.createContext(null);function Xp(e,{relative:t}={}){let{matches:r}=_.useContext(Do),{pathname:n}=Ks(),a=JSON.stringify(e3(r));return _.useMemo(()=>t3(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function l7(e,t){return s3(e,t)}function s3(e,t,r,n,a){Sn(Kp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Qs),{matches:s}=_.useContext(Do),l=s[s.length-1],d=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",f=l&&l.route;{let C=f&&f.path||"";o3(h,!f||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let m=Ks(),b;if(t){let C=typeof t=="string"?bd(t):t;Sn(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=m;let x=b.pathname||"/",v=x;if(p!=="/"){let C=p.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=XN(e,{pathname:v});ks(f||T!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ks(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=p7(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:_o([p,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:_o([p,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),s,r,n,a);return t&&k?_.createElement(Qp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},k):k}function c7(){let e=b7(),t=r7(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:a},r):null,s)}var u7=_.createElement(c7,null),d7=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?_.createElement(Do.Provider,{value:this.props.routeContext},_.createElement(Tw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function h7({routeContext:e,match:t,children:r}){let n=_.useContext(xd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Do.Provider,{value:e},r)}function p7(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r?.errors;if(s!=null){let h=i.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);Sn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,d=-1;if(r)for(let h=0;h<i.length;h++){let p=i[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:f,errors:m}=r,b=p.route.loader&&!f.hasOwnProperty(p.route.id)&&(!m||m[p.route.id]===void 0);if(p.route.lazy||b){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,p,f)=>{let m,b=!1,x=null,v=null;r&&(m=s&&p.route.id?s[p.route.id]:void 0,x=p.route.errorElement||u7,l&&(d<0&&f===0?(o3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):d===f&&(b=!0,v=p.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,f+1)),k=()=>{let C;return m?C=x:b?C=v:p.route.Component?C=_.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,_.createElement(h7,{match:p,routeContext:{outlet:h,matches:T,isDataRoute:r!=null},children:C})};return r&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?_.createElement(d7,{location:r.location,revalidation:r.revalidation,component:x,error:m,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:n}):k()},null)}function kw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g7(e){let t=_.useContext(xd);return Sn(t,kw(e)),t}function f7(e){let t=_.useContext(A0);return Sn(t,kw(e)),t}function m7(e){let t=_.useContext(Do);return Sn(t,kw(e)),t}function Ew(e){let t=m7(e),r=t.matches[t.matches.length-1];return Sn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function y7(){return Ew("useRouteId")}function b7(){let e=_.useContext(Tw),t=f7("useRouteError"),r=Ew("useRouteError");return e!==void 0?e:t.errors?.[r]}function x7(){let{router:e}=g7("useNavigate"),t=Ew("useNavigate"),r=_.useRef(!1);return i3(()=>{r.current=!0}),_.useCallback(async(a,i={})=>{ks(r.current,a3),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var W2={};function o3(e,t,r){!t&&!W2[e]&&(W2[e]=!0,ks(!1,r))}_.memo(v7);function v7({routes:e,future:t,state:r,unstable_onError:n}){return s3(e,void 0,r,n,t)}function gs(e){Sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w7({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Sn(!Kp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),l=_.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof r=="string"&&(r=bd(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:m="default"}=r,b=_.useMemo(()=>{let x=Lo(d,s);return x==null?null:{location:{pathname:x,search:h,hash:p,state:f,key:m},navigationType:n}},[s,d,h,p,f,m,n]);return ks(b!=null,`<Router basename="${s}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:_.createElement(Qs.Provider,{value:l},_.createElement(Qp.Provider,{children:t,value:b}))}function S7({children:e,location:t}){return l7(Ov(e),t)}function Ov(e,t=[]){let r=[];return _.Children.forEach(e,(n,a)=>{if(!_.isValidElement(n))return;let i=[...t,a];if(n.type===_.Fragment){r.push.apply(r,Ov(n.props.children,i));return}Sn(n.type===gs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Ov(n.props.children,i)),r.push(s)}),r}var am="get",im="application/x-www-form-urlencoded";function N0(e){return e!=null&&typeof e.tagName=="string"}function T7(e){return N0(e)&&e.tagName.toLowerCase()==="button"}function k7(e){return N0(e)&&e.tagName.toLowerCase()==="form"}function E7(e){return N0(e)&&e.tagName.toLowerCase()==="input"}function C7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _7(e,t){return e.button===0&&(!t||t==="_self")&&!C7(e)}function jv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function A7(e,t){let r=jv(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Af=null;function N7(){if(Af===null)try{new FormData(document.createElement("form"),0),Af=!1}catch{Af=!0}return Af}var L7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lx(e){return e!=null&&!L7.has(e)?(ks(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${im}"`),null):e}function P7(e,t){let r,n,a,i,s;if(k7(e)){let l=e.getAttribute("action");n=l?Lo(l,t):null,r=e.getAttribute("method")||am,a=Lx(e.getAttribute("enctype"))||im,i=new FormData(e)}else if(T7(e)||E7(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(n=d?Lo(d,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||am,a=Lx(e.getAttribute("formenctype"))||Lx(l.getAttribute("enctype"))||im,i=new FormData(l,e),!N7()){let{name:h,type:p,value:f}=e;if(p==="image"){let m=h?`${h}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else h&&i.append(h,f)}}else{if(N0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=am,n=null,a=im,s=e}return i&&a==="text/plain"&&(s=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function R7(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Lo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function I7(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function M7(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let s=await I7(i,r);return s.links?s.links():[]}return[]}));return F7(n.flat(1).filter(D7).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function V2(e,t,r,n,a,i){let s=(d,h)=>r[h]?d.route.id!==r[h].route.id:!0,l=(d,h)=>r[h].pathname!==d.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==d.params["*"];return i==="assets"?t.filter((d,h)=>s(d,h)||l(d,h)):i==="data"?t.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(s(d,h)||l(d,h))return!0;if(d.route.shouldRevalidate){let f=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function O7(e,t,{includeHydrateFallback:r}={}){return j7(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function j7(e){return[...new Set(e)]}function B7(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function F7(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(B7(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function l3(){let e=_.useContext(xd);return Cw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function z7(){let e=_.useContext(A0);return Cw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _w=_.createContext(void 0);_w.displayName="FrameworkContext";function c3(){let e=_.useContext(_w);return Cw(e,"You must render this element inside a <HydratedRouter> element"),e}function U7(e,t){let r=_.useContext(_w),[n,a]=_.useState(!1),[i,s]=_.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:f}=t,m=_.useRef(null);_.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let v=k=>{k.forEach(C=>{s(C.isIntersecting)})},T=new IntersectionObserver(v,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[e]),_.useEffect(()=>{if(n){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[n]);let b=()=>{a(!0)},x=()=>{a(!1),s(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Th(l,b),onBlur:Th(d,x),onMouseEnter:Th(h,b),onMouseLeave:Th(p,x),onTouchStart:Th(f,b)}]:[!1,m,{}]}function Th(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function $7({page:e,...t}){let{router:r}=l3(),n=_.useMemo(()=>XN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?_.createElement(H7,{page:e,matches:n,...t}):null}function q7(e){let{manifest:t,routeModules:r}=c3(),[n,a]=_.useState([]);return _.useEffect(()=>{let i=!1;return M7(e,t,r).then(s=>{i||a(s)}),()=>{i=!0}},[e,t,r]),n}function H7({page:e,matches:t,...r}){let n=Ks(),{manifest:a,routeModules:i}=c3(),{basename:s}=l3(),{loaderData:l,matches:d}=z7(),h=_.useMemo(()=>V2(e,t,d,a,n,"data"),[e,t,d,a,n]),p=_.useMemo(()=>V2(e,t,d,a,n,"assets"),[e,t,d,a,n]),f=_.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,v=!1;if(t.forEach(k=>{let C=a.routes[k.route.id];!C||!C.hasLoader||(!h.some(A=>A.route.id===k.route.id)&&k.route.id in l&&i[k.route.id]?.shouldRevalidate||C.hasClientLoader?v=!0:x.add(k.route.id))}),x.size===0)return[];let T=R7(e,s,"data");return v&&x.size>0&&T.searchParams.set("_routes",t.filter(k=>x.has(k.route.id)).map(k=>k.route.id).join(",")),[T.pathname+T.search]},[s,l,n,a,h,t,e,i]),m=_.useMemo(()=>O7(p,a),[p,a]),b=q7(p);return _.createElement(_.Fragment,null,f.map(x=>_.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),m.map(x=>_.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),b.map(({key:x,link:v})=>_.createElement("link",{key:x,nonce:r.nonce,...v})))}function G7(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var u3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{u3&&(window.__reactRouterVersion="7.9.4")}catch{}function W7({basename:e,children:t,window:r}){let n=_.useRef();n.current==null&&(n.current=I9({window:r,v5Compat:!0}));let a=n.current,[i,s]=_.useState({action:a.action,location:a.location}),l=_.useCallback(d=>{_.startTransition(()=>s(d))},[s]);return _.useLayoutEffect(()=>a.listen(l),[a,l]),_.createElement(w7,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var d3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Aw=_.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:s,state:l,target:d,to:h,preventScrollReset:p,viewTransition:f,...m},b){let{basename:x}=_.useContext(Qs),v=typeof h=="string"&&d3.test(h),T,k=!1;if(typeof h=="string"&&v&&(T=h,u3))try{let W=new URL(window.location.href),O=h.startsWith("//")?new URL(W.protocol+h):new URL(h),Y=Lo(O.pathname,x);O.origin===W.origin&&Y!=null?h=Y+O.search+O.hash:k=!0}catch{ks(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=s7(h,{relative:a}),[A,D,B]=U7(n,m),R=K7(h,{replace:s,state:l,target:d,preventScrollReset:p,relative:a,viewTransition:f});function M(W){t&&t(W),W.defaultPrevented||R(W)}let $=_.createElement("a",{...m,...B,href:T||C,onClick:k||i?t:M,ref:G7(b,D),target:d,"data-discover":!v&&r==="render"?"true":void 0});return A&&!v?_.createElement(_.Fragment,null,$,_.createElement($7,{page:C})):$});Aw.displayName="Link";var V7=_.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:s,viewTransition:l,children:d,...h},p){let f=Xp(s,{relative:h.relative}),m=Ks(),b=_.useContext(A0),{navigator:x,basename:v}=_.useContext(Qs),T=b!=null&&tz(f)&&l===!0,k=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,C=m.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&v&&(A=Lo(A,v)||A);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let B=C===k||!a&&C.startsWith(k)&&C.charAt(D)==="/",R=A!=null&&(A===k||!a&&A.startsWith(k)&&A.charAt(k.length)==="/"),M={isActive:B,isPending:R,isTransitioning:T},$=B?t:void 0,W;typeof n=="function"?W=n(M):W=[n,B?"active":null,R?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(M):i;return _.createElement(Aw,{...h,"aria-current":$,className:W,ref:p,style:O,to:s,viewTransition:l},typeof d=="function"?d(M):d)});V7.displayName="NavLink";var Y7=_.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:s=am,action:l,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:f,...m},b)=>{let x=Z7(),v=ez(l,{relative:h}),T=s.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&d3.test(l),C=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,B=D?.getAttribute("formmethod")||s;x(D||A.currentTarget,{fetcherKey:t,method:B,navigate:r,replace:a,state:i,relative:h,preventScrollReset:p,viewTransition:f})};return _.createElement("form",{ref:b,method:T,action:v,onSubmit:n?d:C,...m,"data-discover":!k&&e==="render"?"true":void 0})});Y7.displayName="Form";function Q7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h3(e){let t=_.useContext(xd);return Sn(t,Q7(e)),t}function K7(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:s}={}){let l=Ic(),d=Ks(),h=Xp(e,{relative:i});return _.useCallback(p=>{if(_7(p,t)){p.preventDefault();let f=r!==void 0?r:Ap(d)===Ap(h);l(e,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:s})}},[d,l,h,r,n,t,e,a,i,s])}function m0e(e){ks(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=_.useRef(jv(e)),r=_.useRef(!1),n=Ks(),a=_.useMemo(()=>A7(n.search,r.current?null:t.current),[n.search]),i=Ic(),s=_.useCallback((l,d)=>{const h=jv(typeof l=="function"?l(new URLSearchParams(a)):l);r.current=!0,i("?"+h,d)},[i,a]);return[a,s]}var X7=0,J7=()=>`__${String(++X7)}__`;function Z7(){let{router:e}=h3("useSubmit"),{basename:t}=_.useContext(Qs),r=y7();return _.useCallback(async(n,a={})=>{let{action:i,method:s,encType:l,formData:d,body:h}=P7(n,t);if(a.navigate===!1){let p=a.fetcherKey||J7();await e.fetch(p,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||s,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||s,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function ez(e,{relative:t}={}){let{basename:r}=_.useContext(Qs),n=_.useContext(Do);Sn(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Xp(e||".",{relative:t})},s=Ks();if(e==null){i.search=s.search;let l=new URLSearchParams(i.search),d=l.getAll("index");if(d.some(p=>p==="")){l.delete("index"),d.filter(f=>f).forEach(f=>l.append("index",f));let p=l.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:_o([r,i.pathname])),Ap(i)}function tz(e,{relative:t}={}){let r=_.useContext(n3);Sn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=h3("useViewTransitionState"),a=Xp(e,{relative:t});if(!r.isTransitioning)return!1;let i=Lo(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Lo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Lm(a.pathname,s)!=null||Lm(a.pathname,i)!=null}var rz=UN();const nz=Rc(rz),p3="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",g3=(e,t,r,n)=>{const a=t.trim().replace(/[\r\n]/g,""),i=r?.trim().replace(/[\r\n]/g,"");if(localStorage.setItem("google_user",JSON.stringify(e)),localStorage.setItem("google_access_token",a),i&&localStorage.setItem("google_refresh_token",i),n){const s=Date.now()+n*1e3;localStorage.setItem("google_token_expiration",s.toString())}else try{const s=vd(a);s?.exp&&localStorage.setItem("google_token_expiration",(s.exp*1e3).toString())}catch{const l=Date.now()+36e5;localStorage.setItem("google_token_expiration",l.toString())}},Bv=()=>{const e=localStorage.getItem("google_user"),t=localStorage.getItem("google_access_token"),r=localStorage.getItem("google_refresh_token");return e&&t?{user:JSON.parse(e),accessToken:t,isAuthenticated:!0,refreshToken:r||void 0}:{user:null,accessToken:null,isAuthenticated:!1}},Fv=()=>{localStorage.removeItem("google_user"),localStorage.removeItem("google_access_token"),localStorage.removeItem("google_refresh_token"),localStorage.removeItem("google_token_expiration"),localStorage.removeItem("last_token_refresh")},vd=e=>{try{if(!e||typeof e!="string"||e.split(".").length!==3)return console.warn("Token is not a valid JWT format"),null;const t=e.split(".")[1];if(!t)return null;const r=t.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return console.warn("Failed to decode JWT (token may be an access token, not an ID token):",t),null}},f3=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10)-Date.now();return Math.max(0,l)}const r=vd(e);if(!r||!r.exp)return 0;const n=r.exp*1e3,a=Date.now(),i=n-a;return Math.max(0,i)}catch(t){return console.error("Failed to get token time remaining:",t),0}},Ou=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10),d=Date.now(),h=300*1e3;return l-d<h}const r=vd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration, assuming valid"),!1;const n=r.exp*1e3,a=Date.now(),i=300*1e3,s=n-a;if(s>0&&s<600*1e3&&s>=i){const l=Math.floor(s/6e4);console.warn(` Token expires in ${l} minutes`)}return s<i}catch(t){return console.error("Failed to check token expiration:",t),!0}},zv=e=>{try{const t=localStorage.getItem("google_token_expiration");if(t){const l=parseInt(t,10),d=Date.now(),h=900*1e3;return l-d<h}const r=vd(e);if(!r||!r.exp)return console.warn("Cannot determine token expiration for refresh check, assuming no refresh needed"),!1;const n=r.exp*1e3,a=Date.now(),i=900*1e3;return n-a<i}catch(t){return console.error("Failed to check if token should refresh:",t),!1}},az=async e=>{try{const t=localStorage.getItem("google_refresh_token");if(t){console.log(" Refreshing token via OAuth refresh endpoint...");const n=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({refresh_token:t})});if(n.ok){const a=await n.json();return console.log(" Token refreshed successfully via OAuth"),{accessToken:a.access_token,refreshToken:a.refresh_token||t}}else console.log("OAuth refresh failed:",n.status)}return console.log(" Attempting silent sign-in fallback..."),new Promise(r=>{if(typeof google>"u"||!google.accounts){console.log("Google API not loaded"),r(null);return}let n=!1;const a=setTimeout(()=>{n||(n=!0,console.log("Silent sign-in not available"),r(null))},5e3);google.accounts.id.initialize({client_id:p3,callback:i=>{!n&&i.credential&&(n=!0,clearTimeout(a),console.log(" Silent sign-in successful"),r({accessToken:i.credential}))},auto_select:!0,cancel_on_tap_outside:!0})})}catch(t){return console.error("Token refresh failed:",t),null}},m3=()=>{try{return localStorage.getItem("has_completed_welcome_wizard")==="true"}catch(e){return console.error("Failed to check welcome wizard status:",e),!1}},Uv=()=>{try{localStorage.setItem("has_completed_welcome_wizard","true"),localStorage.setItem("welcome_wizard_completed_at",new Date().toISOString())}catch(e){console.error("Failed to mark welcome wizard as complete:",e)}},iz=()=>{try{localStorage.removeItem("has_completed_welcome_wizard"),localStorage.removeItem("welcome_wizard_completed_at")}catch(e){console.error("Failed to reset welcome wizard:",e)}},y3=e=>e&&!m3(),sz=Object.freeze(Object.defineProperty({__proto__:null,GOOGLE_CLIENT_ID:p3,clearAuthState:Fv,decodeJWT:vd,getTokenTimeRemaining:f3,hasSeenWelcomeWizard:m3,isTokenExpiringSoon:Ou,loadAuthState:Bv,markWelcomeWizardComplete:Uv,refreshGoogleToken:az,resetWelcomeWizard:iz,saveAuthState:g3,shouldRefreshToken:zv,shouldShowWelcomeWizard:y3},Symbol.toStringTag,{value:"Module"})),b3=_.createContext(void 0),rs=()=>{const e=_.useContext(b3);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},oz=({children:e})=>{const[t,r]=_.useState(()=>Bv()),[n,a]=_.useState(!1),i=_.useCallback(h=>{try{const p=vd(h);if(!p||!p.email){console.error("Login failed: Invalid token or missing user info");return}const f={email:p.email,name:p.name,picture:p.picture,sub:p.sub};g3(f,h),r({user:f,accessToken:h,isAuthenticated:!0}),console.log("User logged in:",f.email)}catch(p){console.error("Login failed:",p)}},[]),s=_.useCallback(()=>{Fv(),r({user:null,accessToken:null,isAuthenticated:!1}),console.log("User logged out")},[]),l=_.useCallback(async()=>{try{if(!t.accessToken)return console.log("No token to refresh"),!1;console.log(" Attempting token refresh...");const{refreshGoogleToken:h,decodeJWT:p,saveAuthState:f}=await _t(async()=>{const{refreshGoogleToken:b,decodeJWT:x,saveAuthState:v}=await Promise.resolve().then(()=>sz);return{refreshGoogleToken:b,decodeJWT:x,saveAuthState:v}},[]),m=await h(t.accessToken);if(m){const b=p(m.accessToken);if(b){const x={email:b.email,name:b.name,picture:b.picture,sub:b.sub};return f(x,m.accessToken,m.refreshToken),r({user:x,accessToken:m.accessToken,isAuthenticated:!0}),console.log(" Token refreshed successfully"),!0}}return console.log(" Token refresh not available (user may need to re-authenticate manually)"),!1}catch(h){return console.log(" Token refresh unavailable:",h instanceof Error?h.message:"Unknown error"),!1}},[t.accessToken]),d=_.useCallback(async()=>t.accessToken?Ou(t.accessToken)?(console.log("Token expired, logging out"),s(),null):t.accessToken:null,[t.accessToken,s]);return _.useEffect(()=>{(async()=>{if(n||(a(!0),t.isAuthenticated))return;const p=Bv();if(!p.accessToken||!p.user){console.log("No saved auth state found");return}console.log("Attempting auto-login for:",p.user.email),Ou(p.accessToken)?(console.log("Saved token expired, clearing auth state"),Fv()):(r(p),console.log("Auto-login successful with existing token"))})()},[n,t.isAuthenticated,i]),_.useEffect(()=>{if(!t.isAuthenticated||!t.accessToken)return;const h=t.accessToken;zv(h)?(console.log(" Token should be refreshed on mount (less than 15 min remaining)"),l().then(f=>{!f&&Ou(h)&&(console.warn(" Token refresh failed and token expiring soon, logging out..."),s())})):Ou(h)&&(console.warn(" Token critically close to expiring on mount, attempting refresh..."),l().then(f=>{f||(console.warn(" Critical token refresh failed on mount, logging out..."),s())}));const p=setInterval(async()=>{if(!t.accessToken)return;const f=t.accessToken;if(zv(f)){const m=f3(f),b=Math.floor(m/6e4);console.log(` Token expires in ${b} minutes, attempting proactive refresh...`);const x=await l();!x&&Ou(f)?(console.warn(" Token expiring soon and refresh unavailable. Please re-authenticate."),s()):x||console.log(` Silent refresh not available, but token still valid for ${b} minutes`)}},120*1e3);return()=>clearInterval(p)},[t.isAuthenticated,t.accessToken,s,l]),u.jsx(b3.Provider,{value:{...t,login:i,logout:s,refreshToken:l,getToken:d},children:e})},x3=_.createContext(void 0),lz=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),i=d=>{a(!1),r(h=>{const p=h.findIndex(f=>f.query.toLowerCase()===d.query.toLowerCase());if(p>=0){const f=[...h];return f[p]=d,f}else return[...h,d]})},s=d=>{r(d)},l=()=>{a(!0),r([])};return u.jsx(x3.Provider,{value:{searchResults:t,addSearchResult:i,setSearchResults:s,clearSearchResults:l,wasCleared:n},children:e})},cz=()=>{const e=_.useContext(x3);if(e===void 0)throw new Error("useSearchResults must be used within a SearchResultsProvider");return e},$v=(e,t)=>t.some(r=>e instanceof r);let Y2,Q2;function uz(){return Y2||(Y2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dz(){return Q2||(Q2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qv=new WeakMap,Px=new WeakMap,L0=new WeakMap;function hz(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{r(fc(e.result)),a()},s=()=>{n(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",s)});return L0.set(t,e),t}function pz(e){if(qv.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});qv.set(e,t)}let Hv={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return qv.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fc(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function v3(e){Hv=e(Hv)}function gz(e){return dz().includes(e)?function(...t){return e.apply(Gv(this),t),fc(this.request)}:function(...t){return fc(e.apply(Gv(this),t))}}function fz(e){return typeof e=="function"?gz(e):(e instanceof IDBTransaction&&pz(e),$v(e,uz())?new Proxy(e,Hv):e)}function fc(e){if(e instanceof IDBRequest)return hz(e);if(Px.has(e))return Px.get(e);const t=fz(e);return t!==e&&(Px.set(e,t),L0.set(t,e)),t}const Gv=e=>L0.get(e);function P0(e,t,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(e,t),l=fc(s);return n&&s.addEventListener("upgradeneeded",d=>{n(fc(s.result),d.oldVersion,d.newVersion,fc(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),l.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const mz=["get","getKey","getAll","getAllKeys","count"],yz=["put","add","delete","clear"],Rx=new Map;function K2(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Rx.get(t))return Rx.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=yz.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||mz.includes(r)))return;const i=async function(s,...l){const d=this.transaction(s,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[r](...l),a&&d.done]))[0]};return Rx.set(t,i),i}v3(e=>({...e,get:(t,r,n)=>K2(t,r)||e.get(t,r,n),has:(t,r)=>!!K2(t,r)||e.has(t,r)}));const bz=["continue","continuePrimaryKey","advance"],X2={},Wv=new WeakMap,w3=new WeakMap,xz={get(e,t){if(!bz.includes(t))return e[t];let r=X2[t];return r||(r=X2[t]=function(...n){Wv.set(this,w3.get(this)[t](...n))}),r}};async function*vz(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,xz);for(w3.set(r,t),L0.set(r,Gv(t));t;)yield r,t=await(Wv.get(r)||t.continue()),Wv.delete(r)}function J2(e,t){return t===Symbol.asyncIterator&&$v(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&$v(e,[IDBIndex,IDBObjectStore])}v3(e=>({...e,get(t,r,n){return J2(t,r)?vz:e.get(t,r,n)},has(t,r){return J2(t,r)||e.has(t,r)}}));class wz{queue=[];batchInterval=3e4;batchTimer=null;onExecute;constructor(t){this.onExecute=t}queueSync(t,r="normal"){this.queue.push({adapterName:t,priority:r,timestamp:Date.now()}),r==="high"?this.executeBatch():(this.batchTimer&&clearTimeout(this.batchTimer),this.batchTimer=setTimeout(()=>{this.executeBatch()},this.batchInterval))}async executeBatch(){if(this.queue.length===0)return;const t=[...new Set(this.queue.map(r=>r.adapterName))];this.queue=[],console.log(` Executing batch sync for: ${t.join(", ")}`);try{await this.onExecute(t)}catch(r){console.error(" Batch sync failed:",r)}}clear(){this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null),this.queue=[]}setBatchInterval(t){this.batchInterval=t}}class Sz{adapters=new Map;scheduler;syncStatus={syncing:!1,lastSyncTime:null,nextSyncTime:null,adapterStatuses:{}};syncInterval=300*1e3;syncTimer=null;enabled=!1;statusListeners=[];constructor(){this.scheduler=new wz(t=>this.executeBatchSync(t))}registerAdapter(t){this.adapters.set(t.name,t),this.syncStatus.adapterStatuses[t.name]={name:t.name,enabled:t.enabled,status:"idle",lastSync:null,nextSync:null,itemCount:0,error:null},console.log(` Registered sync adapter: ${t.name}`)}unregisterAdapter(t){this.adapters.delete(t),delete this.syncStatus.adapterStatuses[t],console.log(` Unregistered sync adapter: ${t}`)}setAdapterEnabled(t,r){const n=this.adapters.get(t);n&&(n.enabled=r,this.syncStatus.adapterStatuses[t]&&(this.syncStatus.adapterStatuses[t].enabled=r),console.log(`${r?"":""} Adapter ${t} ${r?"enabled":"disabled"}`))}queueSync(t,r="normal"){if(!this.enabled){console.log(` Unified sync is disabled, skipping: ${t}`);return}const n=this.adapters.get(t);if(!n){console.warn(` Adapter not found: ${t}`);return}if(!n.enabled){console.log(` Adapter ${t} is disabled, skipping sync`);return}this.scheduler.queueSync(t,r)}async syncAdapter(t){const r=this.adapters.get(t);if(!r)throw new Error(`Adapter not found: ${t}`);return r.enabled?await this._syncAdapter(r):{success:!1,action:"no-change",timestamp:Date.now(),itemCount:0,error:`Adapter ${t} is disabled`}}async _syncAdapter(t){const r=this.syncStatus.adapterStatuses[t.name];try{if(r.status="syncing",this.notifyStatusChange(),!await t.shouldSync())return r.status="idle",this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0};const a=await t.getLocalData(),i=await t.getLastModified(),s=await t.pull();if(!s||s.length===0)return a&&(Array.isArray(a)?a.length>0:Object.keys(a).length>0)?(await t.push(a),r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(a)?a.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:r.itemCount}):(r.status="idle",this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0});const l=Array.isArray(s)&&s.length>0?Math.max(...s.map(d=>d.timestamp||0)):s.timestamp||0;if(l>i){if(t.mergeData){const d=t.mergeData(a,s);await t.setLocalData(d)}else await t.setLocalData(s);return r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(s)?s.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"downloaded",timestamp:Date.now(),itemCount:r.itemCount}}else return i>l?(await t.push(a),r.status="success",r.lastSync=Date.now(),r.itemCount=Array.isArray(a)?a.length:1,r.error=null,this.notifyStatusChange(),{success:!0,action:"uploaded",timestamp:Date.now(),itemCount:r.itemCount}):(r.status="success",r.lastSync=Date.now(),r.error=null,this.notifyStatusChange(),{success:!0,action:"no-change",timestamp:Date.now(),itemCount:0})}catch(n){const a=n instanceof Error?n.message:String(n);return console.error(` Error syncing ${t.name}:`,a),r.status="error",r.error=a,this.notifyStatusChange(),{success:!1,action:"no-change",timestamp:Date.now(),itemCount:0,error:a}}}async executeBatchSync(t){this.syncStatus.syncing=!0,this.notifyStatusChange(),(await Promise.allSettled(t.map(n=>{const a=this.adapters.get(n);return a?this._syncAdapter(a):Promise.reject(`Adapter not found: ${n}`)}))).forEach((n,a)=>{const i=t[a];if(n.status==="fulfilled"){const s=n.value;s.success&&s.action!=="no-change"&&console.log(` ${i}: ${s.action} (${s.itemCount} items)`)}else console.error(` ${i}: ${n.reason}`)}),this.syncStatus.syncing=!1,this.syncStatus.lastSyncTime=Date.now(),this.notifyStatusChange()}async syncAll(){const t={};this.syncStatus.syncing=!0,this.notifyStatusChange();for(const[r,n]of this.adapters)n.enabled&&(t[r]=await this._syncAdapter(n));return this.syncStatus.syncing=!1,this.syncStatus.lastSyncTime=Date.now(),this.notifyStatusChange(),t}start(t){t&&(this.syncInterval=t),this.enabled=!0,this.syncAll().then(()=>{console.log(" Initial unified sync complete")}),this.syncTimer=setInterval(()=>{this.syncAll()},this.syncInterval),console.log(` Unified sync started (interval: ${this.syncInterval/1e3/60} minutes)`)}stop(){this.enabled=!1,this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=null),this.scheduler.clear(),console.log(" Unified sync stopped")}isEnabled(){return this.enabled}getStatus(){return{...this.syncStatus}}onStatusChange(t){return this.statusListeners.push(t),()=>{const r=this.statusListeners.indexOf(t);r>-1&&this.statusListeners.splice(r,1)}}notifyStatusChange(){const t=this.getStatus();this.statusListeners.forEach(r=>{try{r(t)}catch(n){console.error("Error in status listener:",n)}})}setDebounceInterval(t){this.scheduler.setBatchInterval(t)}setSyncInterval(t){this.syncInterval=t,this.syncTimer&&(this.stop(),this.start())}}const Yn=new Sz;class Tz{db=null;DB_NAME="youtube-playlist-db";DB_VERSION=1;async init(){if(!this.db)try{this.db=await P0(this.DB_NAME,this.DB_VERSION,{upgrade(t){if(t.objectStoreNames.contains("currentPlaylist")||t.createObjectStore("currentPlaylist",{keyPath:"id"}),!t.objectStoreNames.contains("savedPlaylists")){const r=t.createObjectStore("savedPlaylists",{keyPath:"id",autoIncrement:!0});r.createIndex("by-name","name",{unique:!1}),r.createIndex("by-date","createdAt",{unique:!1})}}}),await this.migrateFromLocalStorage()}catch(t){throw console.error("Failed to initialize playlist database:",t),t}}async migrateFromLocalStorage(){try{const t=localStorage.getItem("youtube_playlist"),r=localStorage.getItem("youtube_current_track");if(t){const n=JSON.parse(t),a=r?parseInt(r,10):null,i=await this.db.get("currentPlaylist","current");(!i||i.tracks.length===0)&&(await this.saveCurrentPlaylist(n,a),console.log(" Migrated playlist from localStorage to IndexedDB"))}}catch(t){console.error("Failed to migrate from localStorage:",t)}}async saveCurrentPlaylist(t,r){await this.init(),await this.db.put("currentPlaylist",{id:"current",tracks:t,currentIndex:r,isPlaying:!1,updatedAt:Date.now()})}async loadCurrentPlaylist(){await this.init();const t=await this.db.get("currentPlaylist","current");return t?{tracks:t.tracks||[],currentIndex:t.currentIndex}:{tracks:[],currentIndex:null}}async clearCurrentPlaylist(){await this.init(),await this.db.delete("currentPlaylist","current")}async savePlaylist(t,r){if(await this.init(),!t||t.trim().length===0)throw new Error("Playlist name cannot be empty");const n=await this.db.add("savedPlaylists",{id:0,name:t.trim(),tracks:r,createdAt:Date.now(),updatedAt:Date.now()});return Yn.isEnabled()&&Yn.queueSync("playlists","high"),n}async updatePlaylist(t,r,n){await this.init();const a=await this.db.get("savedPlaylists",t);if(!a)throw new Error("Playlist not found");await this.db.put("savedPlaylists",{...a,name:r.trim(),tracks:n,updatedAt:Date.now()}),Yn.isEnabled()&&Yn.queueSync("playlists","high")}async loadPlaylist(t){return await this.init(),(await this.db.get("savedPlaylists",t))?.tracks||[]}async getPlaylist(t){return await this.init(),await this.db.get("savedPlaylists",t)}async listPlaylists(){return await this.init(),(await this.db.getAll("savedPlaylists")).map(r=>({id:r.id,name:r.name,trackCount:r.tracks.length,createdAt:r.createdAt,updatedAt:r.updatedAt})).sort((r,n)=>n.updatedAt-r.updatedAt)}async deletePlaylist(t){await this.init(),await this.db.delete("savedPlaylists",t),Yn.isEnabled()&&Yn.queueSync("playlists","high")}async playlistExists(t){return await this.init(),(await this.db.getAllFromIndex("savedPlaylists","by-name",t.trim())).length>0}async searchPlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=t.toLowerCase();return r.filter(a=>a.name.toLowerCase().includes(n)).map(a=>({id:a.id,name:a.name,trackCount:a.tracks.length,createdAt:a.createdAt,updatedAt:a.updatedAt})).sort((a,i)=>i.updatedAt-a.updatedAt)}async exportPlaylist(t){await this.init();const r=await this.db.get("savedPlaylists",t);if(!r)throw new Error("Playlist not found");return JSON.stringify({name:r.name,tracks:r.tracks,exportedAt:Date.now(),version:1},null,2)}async importPlaylist(t){await this.init();try{const r=JSON.parse(t);if(!r.name||!Array.isArray(r.tracks))throw new Error("Invalid playlist format");const n=r.tracks.filter(a=>a.videoId&&a.url&&a.title);if(n.length===0)throw new Error("No valid tracks found in playlist");return await this.savePlaylist(r.name,n)}catch(r){throw r instanceof SyntaxError?new Error("Invalid JSON format"):r}}async getStats(){await this.init();const t=await this.db.get("currentPlaylist","current"),r=await this.db.getAll("savedPlaylists"),n=r.reduce((a,i)=>a+i.tracks.length,0);return{currentPlaylistSize:t?.tracks.length||0,savedPlaylistCount:r.length,totalSavedTracks:n,databaseSize:await this.estimateSize()}}async estimateSize(){await this.init();try{if("estimate"in navigator.storage)return`~${(((await navigator.storage.estimate()).usage||0)/(1024*1024)).toFixed(2)} MB`}catch{}return"Unknown"}async exportAllPlaylists(){return await this.init(),await this.db.getAll("savedPlaylists")}async importAndMergePlaylists(t){await this.init();const r=await this.db.getAll("savedPlaylists"),n=new Map(r.map(i=>[i.name.toLowerCase(),i]));let a=0;for(const i of t){const s=i.name.toLowerCase(),l=n.get(s);l?i.updatedAt>l.updatedAt&&(await this.db.put("savedPlaylists",{id:l.id,name:i.name,tracks:i.tracks,createdAt:l.createdAt,updatedAt:i.updatedAt}),a++):(await this.db.add("savedPlaylists",{id:0,name:i.name,tracks:i.tracks,createdAt:i.createdAt,updatedAt:i.updatedAt}),a++)}return a}async getPlaylistsModifiedSince(t){return await this.init(),(await this.db.getAll("savedPlaylists")).filter(n=>n.updatedAt>t)}async getLastModified(){await this.init();const t=await this.db.getAll("savedPlaylists");return t.length===0?0:Math.max(...t.map(r=>r.updatedAt))}close(){this.db&&(this.db.close(),this.db=null)}}const qs=new Tz,S3=_.createContext(void 0),Dc=()=>{const e=_.useContext(S3);if(!e)throw new Error("usePlaylist must be used within PlaylistProvider");return e},kz=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(null),[i,s]=_.useState(!1),[l,d]=_.useState([]),[h,p]=_.useState(!1),[f,m]=_.useState(!1),[b,x]=_.useState([]),[v,T]=_.useState("none"),[k,C]=_.useState(1),[A,D]=_.useState(1),[B,R]=_.useState("auto");_.useEffect(()=>{try{const ge=localStorage.getItem("playbackRate");ge&&C(parseFloat(ge));const Be=localStorage.getItem("volume");Be&&D(parseFloat(Be));const ct=localStorage.getItem("repeatMode");ct&&(ct==="none"||ct==="all"||ct==="one")&&T(ct);const yt=localStorage.getItem("shuffleMode");yt&&m(yt==="true");const tr=localStorage.getItem("videoQuality");tr&&R(tr)}catch(ge){console.error("Failed to load preferences:",ge)}},[]),_.useEffect(()=>{(async()=>{try{const{tracks:Be,currentIndex:ct}=await qs.loadCurrentPlaylist();r(Be),a(ct),p(!0)}catch(Be){console.error("Failed to load playlist:",Be),p(!0)}})()},[]),_.useEffect(()=>{G()},[]),_.useEffect(()=>{if(!h)return;const ge=async()=>{try{await qs.saveCurrentPlaylist(t,n)}catch(ct){console.error("Failed to save playlist:",ct)}},Be=setTimeout(()=>{ge()},500);return()=>clearTimeout(Be)},[t,n,h]);const M=_.useCallback(ge=>{const Be={...ge,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()};r(ct=>[...ct,Be])},[]),$=_.useCallback(ge=>{r(Be=>{const ct=[],yt=new Set(Be.map(Et=>Et.videoId)),tr=new Set;return ge.forEach((Et,Ar)=>{yt.has(Et.videoId)||tr.has(Et.videoId)||(tr.add(Et.videoId),ct.push({...Et,id:`${Date.now()}-${Ar}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()}))}),[...ct,...Be].slice(0,500)})},[]),W=_.useCallback(ge=>{r(Be=>{const ct=[],yt=[],tr=[],wr=new Set;ge.forEach(($t,or)=>{if(wr.has($t.videoId))return;wr.add($t.videoId);const bt=Be.findIndex(It=>It.videoId===$t.videoId);bt!==-1?ct.push({...Be[bt],addedAt:Date.now()}):yt.push({...$t,id:`${Date.now()}-${or}-${Math.random().toString(36).substr(2,9)}`,addedAt:Date.now()})}),Be.forEach($t=>{wr.has($t.videoId)||tr.push($t)});const Ar=[...ct,...yt,...tr].slice(0,500);if(n!==null&&Be[n]){const $t=Be[n].videoId,or=Ar.findIndex(bt=>bt.videoId===$t);or!==-1?a(or):(a(null),s(!1))}return Ar})},[n]),O=_.useCallback(ge=>{r(Be=>{const ct=Be.findIndex(yt=>yt.id===ge);return ct===-1?Be:(n!==null&&(ct===n?(s(!1),a(null)):ct<n&&a(n-1)),Be.filter(yt=>yt.id!==ge))})},[n]),Y=_.useCallback(()=>{r([]),a(null),s(!1)},[]),X=_.useCallback(ge=>{ge>=0&&ge<t.length&&(a(ge),s(!0))},[t.length]),q=_.useCallback(()=>{const ge=t.map((Be,ct)=>ct);n!==null&&ge.splice(ge.indexOf(n),1);for(let Be=ge.length-1;Be>0;Be--){const ct=Math.floor(Math.random()*(Be+1));[ge[Be],ge[ct]]=[ge[ct],ge[Be]]}return n!==null&&ge.unshift(n),ge},[t,n]);_.useEffect(()=>{f&&x(q())},[f,t,q]);const N=_.useCallback(()=>{if(t.length===0)return;if(n===null){a(0),s(!0);return}if(v==="one"){s(!0);return}const ge=f?b:t.map((ct,yt)=>yt),Be=ge.indexOf(n);Be<ge.length-1?(a(ge[Be+1]),s(!0)):v==="all"?(a(ge[0]),s(!0)):s(!1)},[t,n,f,b,v]),U=_.useCallback(()=>{if(t.length===0)return;if(n===null){a(t.length-1),s(!0);return}const ge=f?b:t.map((ct,yt)=>yt),Be=ge.indexOf(n);Be>0?(a(ge[Be-1]),s(!0)):(a(ge[ge.length-1]),s(!0))},[t,n,f,b]),j=_.useCallback(()=>{t.length!==0&&(n===null?(a(0),s(!0)):s(ge=>!ge))},[t.length,n]),K=_.useCallback(()=>{t.length!==0&&(n===null&&a(0),s(!0))},[t.length,n]),Q=_.useCallback(()=>{s(!1)},[]),ie=_.useCallback(ge=>{const Be=t.findIndex(ct=>ct.videoId===ge);return Be!==-1?(a(Be),s(!0),!0):!1},[t]),G=_.useCallback(async()=>{try{const ge=await qs.listPlaylists();d(ge)}catch(ge){console.error("Failed to load saved playlists:",ge)}},[]),F=_.useCallback(async ge=>{try{await qs.savePlaylist(ge,t),await G()}catch(Be){throw console.error("Failed to save playlist:",Be),Be}},[t,G]),H=_.useCallback(async ge=>{try{const Be=await qs.loadPlaylist(ge);r(Be),a(null),s(!1)}catch(Be){throw console.error("Failed to load playlist:",Be),Be}},[]),I=_.useCallback(async ge=>{try{await qs.deletePlaylist(ge),await G()}catch(Be){throw console.error("Failed to delete playlist:",Be),Be}},[G]),ne=_.useCallback(()=>{const ge=!f;m(ge),localStorage.setItem("shuffleMode",String(ge)),ge&&x(q())},[f,q]),ue=_.useCallback(ge=>{T(ge),localStorage.setItem("repeatMode",ge)},[]),xe=_.useCallback(ge=>{C(ge),localStorage.setItem("playbackRate",String(ge))},[]),ke=_.useCallback(ge=>{D(ge),localStorage.setItem("volume",String(ge))},[]),me=_.useCallback(ge=>{R(ge),localStorage.setItem("videoQuality",ge)},[]),Me=n!==null&&t[n]?t[n]:null;return u.jsx(S3.Provider,{value:{playlist:t,currentTrackIndex:n,isPlaying:i,addTrack:M,addTracks:$,addTracksToStart:W,removeTrack:O,clearPlaylist:Y,playTrack:X,playTrackByVideoId:ie,nextTrack:N,previousTrack:U,togglePlayPause:j,play:K,pause:Q,currentTrack:Me,savedPlaylists:l,savePlaylistAs:F,loadPlaylist:H,deletePlaylist:I,refreshSavedPlaylists:G,shuffleMode:f,toggleShuffle:ne,repeatMode:v,setRepeatMode:ue,playbackRate:k,setPlaybackRate:xe,volume:A,setVolume:ke,videoQuality:B,setVideoQuality:me},children:e})},T3=_.createContext(void 0),k3=()=>{const e=_.useContext(T3);if(!e)throw new Error("usePlayer must be used within PlayerProvider");return e},Ez=({children:e})=>{const t=_.useRef(null),{isPlaying:r,currentTrack:n,play:a,pause:i}=Dc(),[s,l]=_.useState(!1),[d,h]=_.useState(0),[p,f]=_.useState(0),m=_.useCallback(A=>{console.log("[PlayerContext] Registering player:",A),t.current=A},[]),b=_.useCallback(()=>{console.log("[PlayerContext] Unregistering player"),t.current=null},[]),x=_.useCallback(()=>{t.current?(console.log("[PlayerContext] Playing video via ref"),a()):(console.warn("[PlayerContext] Cannot play - no player registered"),a())},[a]),v=_.useCallback(()=>{t.current?(console.log("[PlayerContext] Pausing video via ref"),i()):(console.warn("[PlayerContext] Cannot pause - no player registered"),i())},[i]),T=_.useCallback(A=>{t.current&&t.current.seekTo?(console.log("[PlayerContext] Seeking to:",A),t.current.seekTo(A,"seconds")):console.warn("[PlayerContext] Cannot seek - no player registered")},[]),k=_.useCallback(()=>t.current&&t.current.getCurrentTime?t.current.getCurrentTime():0,[]),C=_.useCallback(()=>t.current&&t.current.getDuration?t.current.getDuration():0,[]);return _.useEffect(()=>{t.current&&console.log("[PlayerContext] Syncing player state - isPlaying:",r,"currentTrack:",n?.title)},[r,n]),u.jsx(T3.Provider,{value:{playerRef:t,registerPlayer:m,unregisterPlayer:b,playVideo:x,pauseVideo:v,seekTo:T,getCurrentTime:k,getDuration:C,isLoading:s,setIsLoading:l,currentTime:d,duration:p,setCurrentTime:h,setDuration:f},children:e})},Cz="lambdallmproxy",_z=1,Wi="app_data",_u=5*1024*1024,kh=250*1024*1024;class nc extends Error{code;estimatedSize;limit;constructor(t,r,n,a){super(t),this.name="StorageError",this.code=r,this.estimatedSize=n,this.limit=a}}class Az{db=null;initPromise=null;useIndexedDB=!0;async initDB(){return this.initPromise?this.initPromise:(this.initPromise=new Promise(t=>{if(!window.indexedDB){console.warn("IndexedDB not supported, falling back to localStorage"),this.useIndexedDB=!1,t();return}const r=indexedDB.open(Cz,_z);r.onerror=()=>{console.error("IndexedDB error:",r.error),this.useIndexedDB=!1,t()},r.onsuccess=()=>{this.db=r.result,this.useIndexedDB=!0,t()},r.onupgradeneeded=n=>{const a=n.target.result;a.objectStoreNames.contains(Wi)||a.createObjectStore(Wi)}}),this.initPromise)}getDataSize(t){try{return new Blob([JSON.stringify(t)]).size}catch{return JSON.stringify(t).length*2}}async getItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{return await this.getFromIndexedDB(t)}catch(r){console.warn("IndexedDB read failed, trying localStorage:",r)}try{const r=localStorage.getItem(t);return r?JSON.parse(r):null}catch(r){return console.error("Failed to read from localStorage:",r),null}}async setItem(t,r){await this.initDB();const n=this.getDataSize(r);if(this.useIndexedDB&&this.db)try{if(n>kh)throw new nc(`Data size (${this.formatBytes(n)}) exceeds IndexedDB limit (${this.formatBytes(kh)}). Consider reducing the amount of stored data.`,"QUOTA_EXCEEDED",n,kh);await this.setToIndexedDB(t,r);return}catch(a){if(a instanceof nc)throw a;console.warn("IndexedDB write failed, trying localStorage:",a),this.useIndexedDB=!1}try{if(n>_u)throw new nc(`Data size (${this.formatBytes(n)}) exceeds localStorage limit (${this.formatBytes(_u)}). Try using fewer or smaller snippets, or clear old data.`,"QUOTA_EXCEEDED",n,_u);localStorage.setItem(t,JSON.stringify(r))}catch(a){throw a instanceof nc?a:a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?new nc(`Storage quota exceeded (${this.formatBytes(n)}). Please delete some snippets to free up space.`,"QUOTA_EXCEEDED",n,_u):new nc(`Failed to save data: ${a instanceof Error?a.message:"Unknown error"}`,"UNKNOWN")}}async removeItem(t){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.removeFromIndexedDB(t)}catch(r){console.warn("Failed to remove from IndexedDB:",r)}try{localStorage.removeItem(t)}catch(r){console.warn("Failed to remove from localStorage:",r)}}async clear(){if(await this.initDB(),this.useIndexedDB&&this.db)try{await this.clearIndexedDB()}catch(t){console.warn("Failed to clear IndexedDB:",t)}try{localStorage.clear()}catch(t){console.warn("Failed to clear localStorage:",t)}}async getStats(){await this.initDB();const t=[];let r=0;if(this.useIndexedDB&&this.db){const n=await this.getAllKeysFromIndexedDB();for(const a of n){const i=await this.getFromIndexedDB(a);t.push(a),r+=this.getDataSize(i)}return{type:"indexeddb",keys:t,totalSize:r,limit:kh,percentUsed:r/kh*100}}else{for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);if(a){t.push(a);const i=localStorage.getItem(a);i&&(r+=this.getDataSize(i))}}return{type:"localstorage",keys:t,totalSize:r,limit:_u,percentUsed:r/_u*100}}}getFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const s=this.db.transaction([Wi],"readonly").objectStore(Wi).get(t);s.onsuccess=()=>{r(s.result??null)},s.onerror=()=>{n(s.error)}})}setToIndexedDB(t,r){return new Promise((n,a)=>{if(!this.db){a(new Error("Database not initialized"));return}const l=this.db.transaction([Wi],"readwrite").objectStore(Wi).put(r,t);l.onsuccess=()=>{n()},l.onerror=()=>{a(l.error)}})}removeFromIndexedDB(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const s=this.db.transaction([Wi],"readwrite").objectStore(Wi).delete(t);s.onsuccess=()=>{r()},s.onerror=()=>{n(s.error)}})}clearIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Wi],"readwrite").objectStore(Wi).clear();i.onsuccess=()=>{t()},i.onerror=()=>{r(i.error)}})}getAllKeysFromIndexedDB(){return new Promise((t,r)=>{if(!this.db){r(new Error("Database not initialized"));return}const i=this.db.transaction([Wi],"readonly").objectStore(Wi).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{r(i.error)}})}formatBytes(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}}const Ix=new Az,E3=_.createContext(void 0),Mc=()=>{const e=_.useContext(E3);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},Nz=({children:e})=>{const[t,r]=_.useState([]),n=_.useCallback(m=>{r(b=>b.filter(x=>x.id!==m))},[]),a=_.useCallback(()=>{r([])},[]),i=_.useCallback((m,b="info",x=5e3)=>{const v=`toast-${Date.now()}-${Math.random()}`,T={id:v,message:m,type:b,duration:x};r(k=>[...k,T]),x>0&&setTimeout(()=>n(v),x)},[n]),s=_.useCallback(m=>i(m,"error",7e3),[i]),l=_.useCallback(m=>i(m,"success",3e3),[i]),d=_.useCallback(m=>i(m,"warning",5e3),[i]),h=_.useCallback(m=>i(m,"info",4e3),[i]),p=m=>`flex items-start gap-3 p-4 rounded-lg shadow-lg border backdrop-blur-sm transition-all duration-300 animate-slide-in ${{success:"bg-green-50/95 dark:bg-green-900/95 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50/95 dark:bg-red-900/95 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50/95 dark:bg-yellow-900/95 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50/95 dark:bg-blue-900/95 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"}[m]}`,f=m=>({success:"",error:"",warning:"",info:""})[m];return u.jsxs(E3.Provider,{value:{showToast:i,showError:s,showSuccess:l,showWarning:d,showInfo:h,clearAllToasts:a},children:[e,u.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:t.map(m=>u.jsxs("div",{className:p(m.type),children:[u.jsx("span",{className:"text-xl font-bold",children:f(m.type)}),u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"text-sm font-medium",children:m.message})}),u.jsx("button",{onClick:()=>n(m.id),className:"text-current opacity-50 hover:opacity-100 transition-opacity",children:""})]},m.id))}),u.jsx("style",{children:`
        @keyframes slide-in {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        .animate-slide-in {
          animation: slide-in 0.3s ease-out;
        }
      `})]})};function Z2(e){const t=[],r=e.split(`
`);let n={};for(const a of r)if(a.startsWith("event:"))n.event=a.substring(6).trim();else if(a.startsWith("data:"))n.data=a.substring(5).trim();else if(a===""&&n.event&&n.data){try{const i=JSON.parse(n.data);t.push({event:n.event,data:i})}catch(i){console.error("Failed to parse SSE data:",n.data,i)}n={}}return t}async function C3(e,t,r,n){if(!e.body)throw new Error("Response body is null");const a=e.body.getReader(),i=new TextDecoder;let s="";try{for(;;){const{done:l,value:d}=await a.read();if(l){s.trim()&&Z2(s).forEach(f=>t(f.event,f.data)),r&&r();break}s+=i.decode(d,{stream:!0});const h=s.split(`

`);s=h.pop()||"";for(const p of h)p.trim()&&Z2(p+`

`).forEach(m=>t(m.event,m.data))}}catch(l){console.error("SSE stream error:",l),n&&n(l instanceof Error?l:new Error("Stream error"))}}async function _3(e,t,r,n,a,i=3,s=1e3,l){const h={"Content-Type":"application/json",Authorization:`Bearer ${r.trim().replace(/[\r\n]/g,"")}`,Accept:"text/event-stream"};l&&(h["X-Request-Id"]=l,console.log(" Using request ID for log grouping:",l)),a&&(h["X-YouTube-Token"]=a);const p=["google_access_token","gapi_access_token","google_drive_access_token"];let f=null,m="none";for(const k of p){const C=localStorage.getItem(k);if(C){f=C.trim().replace(/[\r\n]/g,""),m=k;break}}const b=localStorage.getItem("google_refresh_token");console.log(" Drive token check:",{hasDriveToken:!!f,hasRefreshToken:!!b,tokenLength:f?.length||0,source:m,availableKeys:p.filter(k=>!!localStorage.getItem(k))}),f?(h["X-Google-Access-Token"]=f,console.log(` Including Drive access token for Google Sheets operations (source: ${m})`)):(console.log(" No Drive access token available - snippet management will not work"),console.log("   Checked keys:",p)),b&&(h["X-Google-Refresh-Token"]=b.trim().replace(/[\r\n]/g,""),console.log(" Including Google refresh token for automatic token refresh"));let x=null;for(let k=0;k<i;k++)try{console.log(` SSE Request attempt ${k+1}/${i}:`,{url:e,method:"POST",hasToken:!!r,hasYoutubeToken:!!a,bodyKeys:t?Object.keys(t):[]});const C=await fetch(e,{method:"POST",headers:h,body:JSON.stringify(t),signal:n});if(console.log(" SSE Response received:",{status:C.status,statusText:C.statusText,ok:C.ok,headers:Object.fromEntries(C.headers.entries())}),!C.ok){if(C.status===429&&k<i-1){const A=C.headers.get("Retry-After");let D;if(A){const B=parseInt(A);if(!isNaN(B))D=B*1e3;else{const R=new Date(A);isNaN(R.getTime())?D=s*Math.pow(2,k):D=Math.max(0,R.getTime()-Date.now())}}else D=s*Math.pow(2,k);console.warn(` Rate limited (429), retrying in ${(D/1e3).toFixed(1)}s... (attempt ${k+1}/${i})`),await new Promise(B=>setTimeout(B,D));continue}throw new Error(`Request failed: ${C.status} ${C.statusText}`)}return C}catch(C){if(x=C,console.error(` SSE Request failed (attempt ${k+1}/${i}):`,{error:C instanceof Error?C.message:String(C),errorName:C instanceof Error?C.name:"Unknown",stack:C instanceof Error?C.stack:void 0,url:e,attempt:k+1,maxRetries:i}),n?.aborted)throw console.log(" Request aborted by user"),new Error("Request aborted by user");if(k>=i-1){console.error(" Max retries reached, giving up");break}const A=s*Math.pow(2,k);console.warn(` Request failed, retrying in ${(A/1e3).toFixed(1)}s... (attempt ${k+1}/${i})`,C),await new Promise(D=>setTimeout(D,A))}const v=e.includes("localhost")||e.includes("127.0.0.1"),T=x?.message||"Unknown error";throw v&&(T.includes("fetch")||T.includes("ECONNREFUSED")||T.includes("NetworkError"))?new Error(" Dev server not running. Please start your dev server with `make dev` or `npm run dev`"):T.includes("fetch")||T.includes("NetworkError")?new Error(" Lambda API error: Cannot connect to server. Please check your internet connection or try again later."):x||new Error(`Request failed after ${i} attempts`)}class Lz{db=null;version="1.0.0";defaultTTL=14400*1e3;maxStorageBytes=100*1024*1024;enabled=!0;initPromise=null;constructor(){this.initPromise=this.init()}async init(){try{if(localStorage.getItem("caching_disabled")==="true"){console.log(" Caching disabled by user preference"),this.enabled=!1;return}this.db=await P0("ResearchAgentCache",1,{upgrade(r){r.objectStoreNames.contains("llm_responses")||r.createObjectStore("llm_responses",{keyPath:"messageHash"}).createIndex("timestamp","timestamp"),r.objectStoreNames.contains("search_results")||r.createObjectStore("search_results",{keyPath:"query"}).createIndex("timestamp","timestamp"),r.objectStoreNames.contains("tool_outputs")||r.createObjectStore("tool_outputs",{keyPath:"paramsHash"}).createIndex("timestamp","timestamp")}}),console.log(" Cache initialized successfully"),this.cleanup().catch(r=>console.error("Cleanup failed:",r)),setInterval(()=>{this.cleanup().catch(r=>console.error("Periodic cleanup failed:",r))},3600*1e3)}catch(t){console.error(" Failed to initialize IndexedDB cache:",t),this.enabled=!1}}async waitForInit(){this.initPromise&&await this.initPromise}async hashMessages(t){const r=JSON.stringify(t),a=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(i)).map(d=>d.toString(16).padStart(2,"0")).join("")}async hashObject(t){const r=JSON.stringify(t),a=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(i)).map(d=>d.toString(16).padStart(2,"0")).join("")}async getLLMResponse(t){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const r=await this.hashMessages(t),n=await this.db.get("llm_responses",r);return n?Date.now()-n.timestamp>n.ttl?(console.log(" Cache expired for LLM response"),await this.db.delete("llm_responses",r),null):n.version!==this.version?(console.log(" Cache version mismatch, invalidating"),await this.db.delete("llm_responses",r),null):(console.log(" Cache HIT for LLM response"),{...n.response,usage:n.usage,model:n.model,cached:!0}):(console.log(" Cache miss for LLM response"),null)}catch(r){return console.error("Error getting cached LLM response:",r),null}}async setLLMResponse(t,r,n,a){if(await this.waitForInit(),!(!this.enabled||!this.db))try{const i=await this.hashMessages(t);await this.db.put("llm_responses",{messageHash:i,messages:t.map(s=>({role:s.role,content:s.content?.substring(0,200)})),response:r,usage:n,model:a,timestamp:Date.now(),ttl:this.defaultTTL,version:this.version}),console.log(" Cached LLM response"),this.enforceStorageLimit().catch(s=>console.error("Storage limit enforcement failed:",s))}catch(i){console.error("Error caching LLM response:",i)}}async getSearchResults(t){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const r=await this.db.get("search_results",t);return r?Date.now()-r.timestamp>r.ttl?(console.log(" Cache expired for search results"),await this.db.delete("search_results",t),null):(console.log(" Cache HIT for search results"),r.results):(console.log(" Cache miss for search results"),null)}catch(r){return console.error("Error getting cached search results:",r),null}}async setSearchResults(t,r){if(await this.waitForInit(),!(!this.enabled||!this.db))try{await this.db.put("search_results",{query:t,results:r,timestamp:Date.now(),ttl:this.defaultTTL}),console.log(" Cached search results")}catch(n){console.error("Error caching search results:",n)}}async getToolOutput(t,r){if(await this.waitForInit(),!this.enabled||!this.db)return null;try{const n=await this.hashObject({tool:t,params:r}),a=await this.db.get("tool_outputs",n);return a?Date.now()-a.timestamp>a.ttl?(console.log(" Cache expired for tool output"),await this.db.delete("tool_outputs",n),null):(console.log(" Cache HIT for tool output"),a.output):(console.log(" Cache miss for tool output"),null)}catch(n){return console.error("Error getting cached tool output:",n),null}}async setToolOutput(t,r,n,a){if(await this.waitForInit(),!(!this.enabled||!this.db))try{const i=await this.hashObject({tool:t,params:r});await this.db.put("tool_outputs",{tool:t,paramsHash:i,output:n,timestamp:Date.now(),ttl:a||this.defaultTTL}),console.log(" Cached tool output")}catch(i){console.error("Error caching tool output:",i)}}async cleanup(){if(await this.waitForInit(),!!this.db)try{const t=Date.now(),r=["llm_responses","search_results","tool_outputs"];let n=0;for(const a of r){const i=this.db.transaction(a,"readwrite");let d=await i.objectStore(a).index("timestamp").openCursor();for(;d;){const h=d.value;t-h.timestamp>h.ttl&&(await d.delete(),n++),d=await d.continue()}await i.done}n>0&&console.log(` Cleaned up ${n} expired cache entries`)}catch(t){console.error("Error during cache cleanup:",t)}}async enforceStorageLimit(){if(await this.waitForInit(),!!this.db)try{if("storage"in navigator&&"estimate"in navigator.storage){const r=(await navigator.storage.estimate()).usage||0;if(r>this.maxStorageBytes){console.warn(` Cache storage limit exceeded (${(r/1024/1024).toFixed(2)}MB), evicting oldest entries`);const n=["llm_responses","search_results","tool_outputs"];for(const a of n){const i=this.db.transaction(a,"readwrite"),s=i.objectStore(a),d=await s.index("timestamp").getAllKeys(),h=Math.ceil(d.length*.1);if(h>0){const p=d.slice(0,h);for(const f of p)await s.delete(f);console.log(` Evicted ${h} entries from ${a}`)}await i.done}}}}catch(t){console.error("Error enforcing storage limit:",t)}}async clearAll(){if(await this.waitForInit(),!!this.db)try{await this.db.clear("llm_responses"),await this.db.clear("search_results"),await this.db.clear("tool_outputs"),console.log(" All cache cleared")}catch(t){console.error("Error clearing cache:",t)}}async getStats(){await this.waitForInit();const t={llmResponses:0,searchResults:0,toolOutputs:0,storageUsage:0,storageQuota:0,enabled:this.enabled};if(!this.db)return t;try{if(t.llmResponses=await this.db.count("llm_responses"),t.searchResults=await this.db.count("search_results"),t.toolOutputs=await this.db.count("tool_outputs"),"storage"in navigator&&"estimate"in navigator.storage){const r=await navigator.storage.estimate();t.storageUsage=r.usage||0,t.storageQuota=r.quota||0}}catch(r){console.error("Error getting cache stats:",r)}return t}setEnabled(t){this.enabled=t,localStorage.setItem("caching_disabled",t?"false":"true"),console.log(` Caching ${t?"enabled":"disabled"}`)}isEnabled(){return this.enabled}}const Eh=new Lz,Pz="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log(" API Module Loading - Version: 2024-10-22-DYNAMIC-HOSTNAME");function Rz(){const e=window.location.protocol,t=window.location.hostname,r="3000";console.log(" getLocalLambdaUrl() called:",{protocol:e,hostname:t,port:r});const n=`${e}//${t}:${r}`;return console.log(" getLocalLambdaUrl() returning:",n),n}console.log(" API Configuration:",{hostname:window.location.hostname,remote:Pz,local:Rz(),source:"env"});async function Iz(){return console.log(" Using VITE_API_BASE:","https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"),"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}let Qh=null,Kh=null,Ch=null;async function An(){return Ch&&Ch!==window.location.hostname&&(console.log(` Hostname changed from ${Ch} to ${window.location.hostname}, clearing API cache`),Qh=null,Kh=null,Ch=null),Qh||(Kh||(Ch=window.location.hostname,Kh=Iz().then(e=>(Qh=e,e))),Kh)}function A3(){Qh=null,Kh=null,console.log(" API base cache reset")}const Vv=async(e,t,r,n,a,i,s,l)=>{const d=await An(),h=r.filter(b=>b.enabled!==!1),p={};h.forEach(b=>{const{type:x,enabled:v,...T}=b;p[x]=T});const f={query:e,providers:p};l?.temperature!==void 0&&(f.temperature=l.temperature),l?.maxTokens!==void 0&&(f.max_tokens=l.maxTokens),l?.reasoningDepth!==void 0&&(f.reasoning_depth=l.reasoningDepth),l?.clarificationAnswers&&(f.clarificationAnswers=l.clarificationAnswers),l?.previousContext&&(f.previousContext=l.previousContext),l?.forcePlan&&(f.forcePlan=!0),l?.language&&(f.language=l.language);const m=await _3(`${d}/planning`,f,t,l?.signal);await C3(m,a,i,s)},Yv=async(e,t,r,n,a,i,s,l)=>{if(!e.stream&&!e.tools&&Eh.isEnabled())try{const v=await Eh.getLLMResponse(e.messages);if(v){r("content",{content:v.content}),r("complete",{response:v,usage:v.usage,model:v.model,cached:!0}),n&&n();return}}catch(v){console.error("Cache lookup failed, continuing with API call:",v)}const d=await An(),h=await _3(`${d}/chat`,e,t,i,s,3,1e3,l);let p="",f=null,m;await C3(h,(v,T)=>{Eh.isEnabled()&&!e.tools&&(v==="content"&&(p+=T.content||""),v==="complete"&&(f=T.usage,m=T.model)),r(v,T)},async()=>{if(Eh.isEnabled()&&!e.tools&&p)try{await Eh.setLLMResponse(e.messages,{role:"assistant",content:p},f,m)}catch(v){console.error("Failed to cache response:",v)}n&&n()},a)},N3=async(e,t,r,n,a,i,s,l,d)=>{const h=await An(),p={prompt:e,provider:t,model:r,modelKey:n,size:a,quality:i,style:s,accessToken:l,...d||{}};try{const f=await fetch(`${h}/generate-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p),credentials:"include"}),m=await f.json();return f.ok?m:{success:!1,error:m.error||`HTTP ${f.status}: ${f.statusText}`}}catch(f){return console.error("Image generation request failed:",f),{success:!1,error:f.message||"Failed to generate image"}}},Dz=async(e,t)=>{const r=await An();try{const n=await fetch(`${r}/paypal/create-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({amount:e}),credentials:"include"}),a=await n.json();return n.ok?{success:!0,orderId:a.orderId}:{success:!1,error:a.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order creation failed:",n),{success:!1,error:n.message||"Failed to create PayPal order"}}},Mz=async(e,t)=>{const r=await An();try{const n=await fetch(`${r}/paypal/capture-order`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({orderId:e}),credentials:"include"}),a=await n.json();return n.ok?{success:!0,creditsAdded:a.creditsAdded,newBalance:a.newBalance}:{success:!1,error:a.error||`HTTP ${n.status}: ${n.statusText}`}}catch(n){return console.error("PayPal order capture failed:",n),{success:!1,error:n.message||"Failed to capture PayPal order"}}},Oz=async(e,t,r,n)=>{const a=await An(),i=await fetch(`${a}/quiz/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({content:e,enrichment:t,providers:r}),credentials:"include"});if(!i.ok){const s=await i.json().catch(()=>({error:"Unknown error"}));throw new Error(s.error||`HTTP ${i.status}: ${i.statusText}`)}return await i.json()},jz=Object.freeze(Object.defineProperty({__proto__:null,capturePayPalOrder:Mz,createPayPalOrder:Dz,generateImage:N3,generatePlan:Vv,generateQuiz:Oz,getCachedApiBase:An,resetApiBase:A3,sendChatMessageStreaming:Yv},Symbol.toStringTag,{value:"Module"}));class Bz{config=null;status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0};syncQueue=[];syncInterval=null;apiUrl=null;eventCallbacks={onStart:[],onComplete:[],onError:[]};constructor(){this.initializeApiUrl(),this.initializeDeviceId(),this.loadQueueFromStorage()}async initializeApiUrl(){this.apiUrl=await An()}async getApiUrl(){return this.apiUrl?this.apiUrl:(await this.initializeApiUrl(),this.apiUrl)}initializeDeviceId(){let t=localStorage.getItem("rag_device_id");t||(t=`device-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("rag_device_id",t))}getDeviceId(){return localStorage.getItem("rag_device_id")||"unknown"}async initialize(t){this.config={...t,deviceId:this.getDeviceId()},localStorage.setItem("rag_sync_config",JSON.stringify(this.config)),console.log(" RAG Sync Service initialized:",this.config),t.autoSync&&this.startAutoSync()}getStatus(){return{...this.status}}async pushSnippets(t,r){if(!this.config)throw new Error("Sync service not initialized");try{console.log(` Pushing ${t.length} snippets to Sheets...`);const n=await this.getApiUrl(),a=await fetch(`${n}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"push-snippets",userEmail:r,deviceId:this.config.deviceId,data:t})});if(!a.ok){const s=await a.json();throw new Error(s.error||"Failed to push snippets")}const i=await a.json();console.log(` Pushed ${i.count||t.length} snippets`)}catch(n){throw console.error(" Error pushing snippets:",n),n}}async pullSnippets(t){if(!this.config)throw new Error("Sync service not initialized");try{console.log(" Pulling snippets from Sheets...");const r=await this.getApiUrl(),n=await fetch(`${r}/rag/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"pull-snippets",userEmail:t,deviceId:this.config.deviceId})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to pull snippets")}const i=(await n.json()).snippets||[];return console.log(` Pulled ${i.length} snippets`),i}catch(r){throw console.error(" Error pulling snippets:",r),r}}async fullSync(t,r){if(!this.config)throw new Error("Sync service not initialized");this.status.inProgress=!0,this.notifyStart();const n={snippetsPushed:0,snippetsPulled:0,embeddingsPushed:0,embeddingsPulled:0,conflicts:0,errors:[]};try{console.log(" Starting full sync...");const a=await this.pullSnippets(t),{toUpload:i,toDownload:s,conflicts:l}=this.mergeSnippets(r,a);return n.conflicts=l.length,this.status.conflictsResolved+=l.length,i.length>0&&(await this.pushSnippets(i,t),n.snippetsPushed=i.length),n.snippetsPulled=s.length,this.status.lastSync=Date.now(),this.status.lastError=null,localStorage.setItem("rag_last_sync",this.status.lastSync.toString()),console.log(" Full sync complete:",n),this.notifyComplete(n),n}catch(a){throw console.error(" Full sync failed:",a),this.status.lastError=a.message,n.errors.push(a.message),this.notifyError(a),a}finally{this.status.inProgress=!1}}mergeSnippets(t,r){const n=new Map(t.map(d=>[d.id,d])),a=new Map(r.map(d=>[d.id,d])),i=[],s=[],l=[];for(const d of t){const h=a.get(d.id);if(!h)i.push(d);else{const p=d.updateDate||d.timestamp,f=h.updateDate||h.timestamp;p>f?i.push(d):f>p&&s.push(h)}}for(const d of r)n.has(d.id)||s.push(d);return console.log(` Merge result: ${i.length} to upload, ${s.length} to download, ${l.length} conflicts`),{toUpload:i,toDownload:s,conflicts:l}}queueSync(t){const r={...t,timestamp:Date.now()};this.syncQueue.push(r),this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queued ${t.type} operation (${this.syncQueue.length} pending)`),this.config?.autoSync&&!this.status.inProgress&&setTimeout(()=>{this.syncQueue.length>0&&!this.status.inProgress&&this.processSyncQueue().catch(console.error)},2e3)}async processSyncQueue(){if(!(!this.config||this.syncQueue.length===0)){console.log(` Processing ${this.syncQueue.length} queued operations...`),this.status.inProgress=!0;try{const t=this.syncQueue.filter(r=>r.type==="push-snippet");if(t.length>0){const r=t.map(a=>a.data),n=t[0].userEmail;await this.pushSnippets(r,n),this.syncQueue=this.syncQueue.filter(a=>a.type!=="push-snippet")}this.status.pendingChanges=this.syncQueue.length,this.saveQueueToStorage(),console.log(` Queue processed, ${this.syncQueue.length} remaining`)}catch(t){console.error(" Error processing queue:",t)}finally{this.status.inProgress=!1}}}startAutoSync(){if(!this.syncInterval){if(!this.config){console.warn("Cannot start auto-sync: service not initialized");return}console.log(` Starting auto-sync (interval: ${this.config.syncInterval}ms)`),this.syncInterval=setInterval(()=>{!this.status.inProgress&&this.syncQueue.length>0&&this.processSyncQueue().catch(console.error)},this.config.syncInterval)}}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log(" Auto-sync stopped"))}saveQueueToStorage(){try{localStorage.setItem("rag_sync_queue",JSON.stringify(this.syncQueue))}catch(t){console.error("Failed to save sync queue:",t)}}loadQueueFromStorage(){try{const t=localStorage.getItem("rag_sync_queue");t&&(this.syncQueue=JSON.parse(t),this.status.pendingChanges=this.syncQueue.length,console.log(` Loaded ${this.syncQueue.length} queued operations from storage`))}catch(t){console.error("Failed to load sync queue:",t)}}async pushEmbeddings(t,r){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const n=localStorage.getItem("rag_spreadsheet_id");if(!n)throw new Error("No spreadsheet ID found. User may not be logged in.");let a=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!a)throw new Error("Not authenticated");const i=100,s=Math.ceil(t.length/i);for(let l=0;l<s;l++){const d=t.slice(l*i,(l+1)*i);r&&r(Math.min((l+1)*i,t.length),t.length);const h=await this.getApiUrl(),p=await fetch(`${h}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({operation:"push",spreadsheetId:n,chunks:d})});if(!p.ok)throw new Error(`Failed to push embeddings: ${p.status}`)}console.log(` Pushed ${t.length} chunks to Google Sheets`)}catch(n){throw console.error("Failed to push embeddings:",n),n}}async pullEmbeddings(t){if(!this.config||!this.config.enabled)throw new Error("Sync service not initialized");try{const r=localStorage.getItem("rag_spreadsheet_id");if(!r)throw new Error("No spreadsheet ID found. User may not be logged in.");let n=localStorage.getItem("authToken")||localStorage.getItem("google_access_token");if(!n)throw new Error("Not authenticated");const a=await this.getApiUrl(),i=await fetch(`${a}/rag/sync-embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({operation:"pull",spreadsheetId:r,snippetIds:t})});if(!i.ok)throw new Error(`Failed to pull embeddings: ${i.status}`);const{chunks:s}=await i.json();return console.log(` Pulled ${s?.length||0} chunks from Google Sheets`),s||[]}catch(r){throw console.error("Failed to pull embeddings:",r),r}}onSyncStart(t){this.eventCallbacks.onStart.push(t)}onSyncComplete(t){this.eventCallbacks.onComplete.push(t)}onSyncError(t){this.eventCallbacks.onError.push(t)}notifyStart(){this.eventCallbacks.onStart.forEach(t=>t())}notifyComplete(t){this.eventCallbacks.onComplete.forEach(r=>r(t))}notifyError(t){this.eventCallbacks.onError.forEach(r=>r(void 0,t))}clear(){this.syncQueue=[],this.status={inProgress:!1,lastSync:null,lastError:null,pendingChanges:0,conflictsResolved:0},localStorage.removeItem("rag_sync_queue"),localStorage.removeItem("rag_last_sync"),console.log(" Sync service cleared")}}const ga=new Bz;let lc=null,Dx=null,eC=0;function tC(e){const t=window.google;if(!t?.accounts?.oauth2){console.warn(" Google Identity Services not loaded - include GIS script in index.html");return}if(lc){console.log(" Google Identity already initialized");return}try{lc=t.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/drive.file",callback:()=>{console.log(" Token response received")}}),console.log(" Google Identity Services initialized")}catch(r){console.error(" Failed to initialize Google Identity Services:",r)}}function Fz(){return lc!==null}async function Nw(e){if(!lc)throw new Error("Google Identity Services not initialized. Call initGoogleIdentity() first.");const t=Date.now();return Dx&&eC>t+6e4?(console.log(" Using cached access token"),Dx):new Promise((r,n)=>{if(!lc)return n(new Error("Token client not initialized"));lc.callback=a=>{if("error"in a)return console.error(" OAuth error:",a.error),n(new Error(`OAuth error: ${a.error}`));if(!a.access_token)return n(new Error("No access token received"));Dx=a.access_token,eC=Date.now()+a.expires_in*1e3,console.log(" Access token obtained (expires in",a.expires_in,"seconds)"),r(a.access_token)},lc.requestAccessToken(e)})}async function zz(e,t,r){if(!e)throw new Error("Spreadsheet ID is required");if(!r||r.length===0)throw new Error("No values to append");const n=await Nw(),a=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}:append?valueInputOption=RAW`,i={values:r};console.log(` Appending ${r.length} rows to sheet: ${t}`);const s=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){const d=await s.text();throw console.error(" Sheets API error:",{status:s.status,statusText:s.statusText,body:d}),new Error(`Sheets API error: ${s.status} ${s.statusText}. ${d}`)}const l=await s.json();return console.log(` Appended ${l.updates.updatedRows} rows to Google Sheets`),l}async function Uz(e,t){const r=await Nw(),n=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${encodeURIComponent(t)}`,a=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${r}`}});if(!a.ok){const s=await a.text();throw new Error(`Sheets API error: ${a.status} ${a.statusText}. ${s}`)}return(await a.json()).values||[]}function $z(e){return e.map(t=>[t.id||"",t.snippet_id||"",t.snippet_name||"",t.chunk_text||"",JSON.stringify(t.embedding||[]),t.chunk_index??0,t.embedding_model||"",t.embedding_provider||"",t.embedding_dimensions||0,t.source_type||"text",t.created_at||new Date().toISOString()])}function Ai(e,t){const[r,n]=_.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error loading localStorage key "${e}":`,i),t}});return[r,i=>{try{n(s=>{const l=i instanceof Function?i(s):i;try{window.localStorage.setItem(e,JSON.stringify(l))}catch(d){if(d?.name==="QuotaExceededError"){console.warn(`localStorage quota exceeded for key "${e}". Attempting cleanup...`);try{const h=qz("chat_history_");if(h.length>5){const p=h.sort().slice(0,h.length-5);p.forEach(f=>window.localStorage.removeItem(f)),console.log(`Removed ${p.length} old chat history items`)}window.localStorage.setItem(e,JSON.stringify(l)),console.log("Successfully saved after cleanup")}catch(h){if(console.error("Failed to save even after cleanup:",h),e==="app_settings"){const p={version:l.version,providers:[],tavilyApiKey:""};window.localStorage.setItem(e,JSON.stringify(p)),console.warn("Saved minimal settings due to quota")}}}else throw d}return l})}catch(s){console.error(`Error saving localStorage key "${e}":`,s)}}]}function qz(e){try{return Object.keys(localStorage).filter(t=>t.startsWith(e))}catch(t){return console.error("Error getting localStorage keys:",t),[]}}const Hz={groq:"https://api.groq.com/openai/v1",openai:"https://api.openai.com/v1",gemini:"https://generativelanguage.googleapis.com/v1beta",together:"https://api.together.xyz/v1",replicate:"https://api.replicate.com/v1",atlascloud:"https://api.atlascloud.ai/v1"},y0e={groq:{name:"Groq",icon:"",description:"Fast inference with LLaMA and Mixtral models"},openai:{name:"OpenAI",icon:"",description:"GPT-4, GPT-4o, and other OpenAI models"},gemini:{name:"Google Gemini",icon:"",description:"Google's Gemini models"},together:{name:"Together AI",icon:"",description:"Open source models including FLUX image generation"},replicate:{name:"Replicate",icon:"",description:"Run ML models via API"},atlascloud:{name:"Atlas Cloud",icon:"",description:"API marketplace for various LLM models"},"openai-compatible":{name:"OpenAI Compatible (Custom)",icon:"",description:"Custom endpoint with OpenAI-compatible API"}},sm="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",Qv="https://www.googleapis.com/auth/drive.file";let bl=null,Ki=null;const Pm="google_access_token";Ki=localStorage.getItem(Pm);const Gz=()=>new Promise((e,t)=>{if(console.log(" Initializing Google Auth..."),console.log(" Client ID configured:","YES"),console.log(" Client ID value:",sm.substring(0,20)+"..."),typeof google<"u"&&google.accounts){console.log(" Google Identity Services already loaded"),bl||(bl=google.accounts.oauth2.initTokenClient({client_id:sm,scope:Qv,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const a=n.access_token.trim().replace(/[\r\n]/g,"");if(Ki=a,localStorage.setItem(Pm,a),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log(" Access token received and stored:",a.substring(0,20)+"..."),e(a)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}})),e(bl);return}console.log(" Loading Google Identity Services library...");const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{console.log(" Google Identity Services library loaded"),bl=google.accounts.oauth2.initTokenClient({client_id:sm,scope:Qv,callback:n=>{if(console.log(" Token callback received:",{hasToken:!!n.access_token,expiresIn:n.expires_in,error:n.error}),n.access_token){const a=n.access_token.trim().replace(/[\r\n]/g,"");if(Ki=a,localStorage.setItem(Pm,a),n.expires_in){const i=Date.now()+n.expires_in*1e3;localStorage.setItem("google_token_expiration",i.toString())}console.log(" Access token received and stored:",a.substring(0,20)+"..."),e(a)}else console.error(" No access token in response:",n),t(new Error("Failed to get access token"))}}),console.log(" Token client initialized"),e(bl)},r.onerror=()=>{console.error(" Failed to load Google Identity Services library"),t(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)}),_a=async()=>{if(console.log(" Requesting Google Auth..."),console.log(" Current token:",Ki?Ki.substring(0,20)+"...":"NONE"),Ki){console.log(" Validating existing token...");try{if((await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:"Bearer "+Ki}})).ok)return console.log(" Token is still valid"),Ki;console.warn(" Token invalid, clearing..."),Ki=null}catch(e){console.error(" Token validation failed:",e),Ki=null}}return bl||(console.log(" Token client not initialized, initializing..."),await Gz()),new Promise((e,t)=>{try{console.log(" Setting up token callback..."),bl.callback=r=>{if(console.log(" Token callback triggered:",{hasToken:!!r.access_token,error:r.error,errorDescription:r.error_description}),r.error){const n="Authentication failed: "+r.error+(r.error_description?" - "+r.error_description:"")+". Please grant permissions and try again.";console.error("",n),t(new Error(n));return}r.access_token?(Ki=r.access_token,localStorage.setItem(Pm,r.access_token),console.log(" New access token received and stored:",r.access_token.substring(0,20)+"..."),e(r.access_token)):(console.error(" No access token in response"),t(new Error("No access token received. Please grant permissions and try again.")))},console.log(" Requesting access token from Google..."),console.log(" Scopes requested:",Qv),console.log(" Using Client ID:",sm?.substring(0,30)+"..."),console.log(" Current origin:",window.location.origin),bl.requestAccessToken({prompt:""}),console.log(" Waiting for user to grant permissions...")}catch(r){console.error(" Failed to request access token:",r),t(new Error("Failed to request access token. Please grant permissions and try again."))}})},b0e=async()=>{console.log(" Listing Google Docs...");const e=await _a();console.log(" Using token:",e.substring(0,20)+"...");const t="mimeType='application/vnd.google-apps.document' and trashed=false and properties has { key='createdByApp' and value='LambdaLLMProxy-Swag' }";console.log(" Query:",t),console.log(" Making API request to Google Drive...");const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name,modifiedTime,properties,description)&orderBy=modifiedTime desc",{headers:{Authorization:"Bearer "+e}});if(console.log(" Response status:",r.status,r.statusText),!r.ok){const i=await r.json().catch(()=>({}));console.error(" API Error:",i);const l="Failed to list documents: "+(i.error?.message||r.statusText)+". Please grant permissions and try again.";throw console.error("",l),new Error(l)}const n=await r.json();console.log(" Documents retrieved:",n.files?.length||0);const a=n.files.filter(i=>i.properties?.createdByApp==="LambdaLLMProxy-Swag"||i.description?.includes("Created by LLM Proxy Swag feature"));return console.log(" App-created documents:",a.length),a.map(i=>({id:i.id,name:i.name,modifiedTime:i.modifiedTime}))},x0e=async(e,t)=>{console.log(" Appending to Google Doc:",e);const r=await _a();console.log(" Using token:",r.substring(0,20)+"..."),console.log(" Getting document details...");const n=await fetch("https://docs.googleapis.com/v1/documents/"+e,{headers:{Authorization:"Bearer "+r}});if(!n.ok){const l=await n.json().catch(()=>({}));console.error(" API Error:",l);const h="Failed to get document: "+(l.error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}const a=await n.json(),i=a.body.content[a.body.content.length-1].endIndex-1;console.log(" End index:",i),console.log(" Appending content...");const s=await fetch("https://docs.googleapis.com/v1/documents/"+e+":batchUpdate",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},body:JSON.stringify({requests:[{insertText:{location:{index:i},text:`

`+t+`
`}}]})});if(!s.ok){const l=await s.json().catch(()=>({}));console.error(" API Error:",l);const h="Failed to append to document: "+(l.error?.message||s.statusText)+". Please grant permissions and try again.";throw console.error("",h),new Error(h)}console.log(" Content appended successfully")},rC=()=>!!Ki,nC="Research Agent",L3="Research Agent Settings",Lw=async()=>{console.log(" Finding or creating Research Agent folder...");const e=await _a(),t=`mimeType='application/vnd.google-apps.folder' and name='${nC}' and trashed=false`;console.log(" Searching for folder:",t);const r=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(t)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+e}});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error("Failed to search for folder: "+(s.error?.message||r.statusText))}const n=await r.json();if(n.files&&n.files.length>0){const s=n.files[0].id;return console.log(" Found existing folder:",s),s}console.log(" Creating new folder...");const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:JSON.stringify({name:nC,mimeType:"application/vnd.google-apps.folder",description:"Storage for Research Agent settings and snippets"})});if(!a.ok){const s=await a.json().catch(()=>({}));throw new Error("Failed to create folder: "+(s.error?.message||a.statusText))}const i=await a.json();return console.log(" Created new folder:",i.id),i.id},P3=async e=>{console.log(" Searching for settings file in folder:",e);const t=await _a(),r=`name='${L3}' and '${e}' in parents and trashed=false`;console.log(" Query:",r);const n=await fetch("https://www.googleapis.com/drive/v3/files?q="+encodeURIComponent(r)+"&fields=files(id,name)",{headers:{Authorization:"Bearer "+t}});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error("Failed to search for settings file: "+(i.error?.message||n.statusText))}const a=await n.json();return a.files&&a.files.length>0?(console.log(" Found settings file:",a.files[0].id),a.files[0].id):(console.log("  No settings file found"),null)},Wz=async(e,t)=>{console.log(" Creating settings file in folder:",e);const r=await _a(),n="-------314159265358979323846",a=`\r
--`+n+`\r
`,i=`\r
--`+n+"--",s={name:L3,mimeType:"text/plain",parents:[e],description:"Research Agent Settings - Contains API keys and provider configuration"},l=a+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(s)+a+`Content-Type: text/plain\r
\r
`+t+i,d=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:"Bearer "+r,"Content-Type":"multipart/related; boundary="+n},body:l});if(!d.ok){const p=await d.json().catch(()=>({}));throw new Error("Failed to create settings file: "+(p.error?.message||d.statusText))}const h=await d.json();return console.log(" Settings file created:",h.id),h.id},Vz=async(e,t)=>{console.log(" Updating settings file:",e);const r=await _a(),n=await fetch("https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=media",{method:"PATCH",headers:{Authorization:"Bearer "+r,"Content-Type":"text/plain"},body:t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error("Failed to update settings file: "+(a.error?.message||n.statusText))}console.log(" Settings file updated")},aC=async()=>{try{console.log(" Loading settings from Google Drive...");const e=await Lw(),t=await P3(e);if(!t)return console.log("  No settings file found in Google Drive"),null;const r=await _a(),n=await fetch("https://www.googleapis.com/drive/v3/files/"+t+"?alt=media",{headers:{Authorization:"Bearer "+r}});if(!n.ok)throw new Error("Failed to download settings: "+n.statusText);const a=await n.text();return console.log(" Settings loaded from Google Drive"),a}catch(e){throw console.error(" Failed to load settings from Google Drive:",e),e}},iC=async e=>{try{console.log(" Saving settings to Google Drive...");const t=await Lw(),r=await P3(t);r?await Vz(r,e):await Wz(t,e),console.log(" Settings saved to Google Drive")}catch(t){throw console.error(" Failed to save settings to Google Drive:",t),t}},v0e=async e=>{console.log(" Creating Google Doc in Research Agent folder:",e);const t=await _a(),r=await Lw();console.log(" Making API request to Google Docs...");const n=await fetch("https://docs.googleapis.com/v1/documents",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(console.log(" Response status:",n.status,n.statusText),!n.ok){const d="Failed to create document: "+((await n.json().catch(()=>({}))).error?.message||n.statusText)+". Please grant permissions and try again.";throw console.error("",d),new Error(d)}const i=(await n.json()).documentId;try{console.log(" Moving document to Research Agent folder..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?addParents=${r}&fields=id,parents`,{method:"PATCH",headers:{Authorization:"Bearer "+t}})).ok?console.log(" Document moved to folder"):console.warn(" Could not move document to folder (document still created)")}catch(s){console.warn(" Could not move document to folder:",s)}try{console.log("  Adding app metadata to document..."),(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=id`,{method:"PATCH",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({properties:{createdByApp:"LambdaLLMProxy-Swag",appVersion:"1.0"},description:"Created by LLM Proxy Swag feature"})})).ok?console.log(" Metadata added successfully"):console.warn(" Could not add metadata (document still created)")}catch(s){console.warn(" Could not add metadata:",s)}return{id:i,name:e,modifiedTime:new Date().toISOString()}},R3=_.createContext(void 0);function Yz(e){if(e.version==="2.0.0")return e;const t=[];if(e.provider&&e.llmApiKey){const r=e.provider==="groq"?"groq":"openai";t.push({id:crypto.randomUUID(),type:r,apiEndpoint:Hz[r],apiKey:e.llmApiKey})}return{version:"2.0.0",providers:t,tavilyApiKey:e.tavilyApiKey||""}}const Qz=({children:e})=>{const[t,r]=Ai("app_settings",{version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!0,language:"en"}),[n,a]=_.useState(!1),i=Yz(t);_.useEffect(()=>{t!==i&&r(i)},[t,i,r]),_.useEffect(()=>{(async()=>{if(rC()&&!n)try{a(!0),console.log(" Auto-loading settings from Google Drive...");const f=await aC();if(f){const m=JSON.parse(f);r(m),console.log(" Settings auto-loaded from Google Drive")}}catch(f){console.error(" Failed to auto-load settings from Google Drive:",f)}finally{a(!1)}})()},[]);const s=p=>{r(p),rC()&&iC(JSON.stringify(p,null,2)).catch(f=>{console.error(" Failed to auto-save settings to Google Drive:",f)})},l=async()=>{try{console.log(" Manually loading settings from Google Drive...");const p=await aC();if(p){const f=JSON.parse(p);r(f),console.log(" Settings loaded from Google Drive")}else throw new Error("No settings found in Google Drive")}catch(p){throw console.error(" Failed to load settings from Google Drive:",p),p}},d=async()=>{try{console.log(" Manually saving settings to Google Drive..."),await iC(JSON.stringify(i,null,2)),console.log(" Settings saved to Google Drive")}catch(p){throw console.error(" Failed to save settings to Google Drive:",p),p}},h=()=>{r({version:"2.0.0",providers:[],tavilyApiKey:"",syncToGoogleDrive:!1}),console.log("  Settings cleared")};return u.jsx(R3.Provider,{value:{settings:i,setSettings:s,loadFromGoogleDrive:l,saveToGoogleDrive:d,clearSettings:h},children:e})},Al=()=>{const e=_.useContext(R3);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},sC="rag_embeddings",Kz=2,ri="chunks",Ds="metadata",Au="search_cache";class Xz{db=null;initPromise=null;async resetDatabase(){console.log(" Deleting and recreating RAG database..."),this.db&&(this.db.close(),this.db=null),this.initPromise=null,await new Promise((t,r)=>{const n=indexedDB.deleteDatabase(sC);n.onsuccess=()=>{console.log(" Database deleted successfully"),t()},n.onerror=()=>{console.error(" Failed to delete database:",n.error),r(n.error)},n.onblocked=()=>{console.warn(" Database deletion blocked - close all tabs using this database")}}),await this.init(),console.log(" Database recreated successfully")}async init(){return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{if(!window.indexedDB){console.warn("IndexedDB not supported"),r(new Error("IndexedDB not supported"));return}const n=indexedDB.open(sC,Kz);n.onerror=()=>{console.error("RAG IndexedDB error:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("RAG IndexedDB initialized"),t()},n.onupgradeneeded=a=>{const i=a.target.result,s=a.oldVersion;if(!i.objectStoreNames.contains(ri)){const l=i.createObjectStore(ri,{keyPath:"id"});l.createIndex("snippet_id","snippet_id",{unique:!1}),l.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(Ds)||i.createObjectStore(Ds,{keyPath:"snippet_id"}),s<2&&!i.objectStoreNames.contains(Au)&&i.createObjectStore(Au,{keyPath:"query"}).createIndex("created_at","created_at",{unique:!1})}}),this.initPromise)}async hasEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const l=this.db.transaction([ri],"readonly").objectStore(ri).index("snippet_id").count(IDBKeyRange.only(t));l.onsuccess=()=>{r(l.result>0)},l.onerror=()=>{console.error("Error checking embedding:",l.error),n(l.error)}}):!1}async getEmbeddingDetails(t){return await this.init(),this.db?new Promise((r,n)=>{const a=this.db.transaction([ri,Ds],"readonly"),l=a.objectStore(ri).index("snippet_id").getAll(IDBKeyRange.only(t)),h=a.objectStore(Ds).get(t);a.oncomplete=()=>{const p=l.result,f=h.result;r({hasEmbedding:p.length>0,chunkCount:p.length,chunks:p.sort((m,b)=>m.chunk_index-b.chunk_index),metadata:f})},a.onerror=()=>{console.error("Error getting embedding details:",a.error),n(a.error)}}):{hasEmbedding:!1,chunkCount:0,chunks:[]}}async bulkCheckEmbeddings(t){if(await this.init(),!this.db)return{};const r={};for(const n of t)try{r[n]=await this.hasEmbedding(n)}catch(a){console.error(`Error checking embedding for ${n}:`,a),r[n]=!1}return r}async saveChunks(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return console.log(" saveChunks called with:",{chunkCount:t.length,firstChunk:t[0],firstChunkKeys:t[0]?Object.keys(t[0]):[],hasId:t[0]?.id!==void 0,idValue:t[0]?.id,idType:typeof t[0]?.id,chunkStringified:JSON.stringify(t[0],null,2)}),new Promise(async(n,a)=>{const i=t[0]?.snippet_id||r?.snippet_id;if(i)try{console.log(` Deleting old chunks for snippet: ${i}`),await this.deleteChunks(i),console.log(" Deleted old chunks for snippet")}catch(d){console.warn(" Failed to delete old chunks:",d)}const s=this.db.transaction([ri,Ds],"readwrite"),l=s.objectStore(ri);console.log(" IndexedDB Store Info:",{storeName:l.name,keyPath:l.keyPath,autoIncrement:l.autoIncrement,indexNames:Array.from(l.indexNames)});for(let d=0;d<t.length;d++){const h=t[d];try{const p=h.snippet_id||r?.snippet_id||"unknown",f=h.chunk_index??d,m=h.id||`${p}_chunk_${f}`;if(!m||m==="undefined_chunk_0"||m==="_chunk_0")throw console.error(" Invalid chunk ID generated:",{chunkId:m,snippetId:p,chunkIndex:f,chunk:h}),new Error(`Invalid chunk ID: ${m}`);const b=Array.isArray(h.embedding)?[...h.embedding]:Array.from(h.embedding||[]),x={id:m,snippet_id:p,chunk_text:h.chunk_text||"",embedding:b,chunk_index:f,embedding_model:h.embedding_model||"text-embedding-3-small",created_at:h.created_at||new Date().toISOString()};if(!x.id)throw new Error(`Chunk missing id property after normalization: ${JSON.stringify(Object.keys(x))}`);const v=x.id;if(!v)throw new Error(`Cannot access id property via bracket notation: ${v}`);const T=Object.getPrototypeOf(x);if(T!==Object.prototype)throw new Error(`Chunk has non-plain prototype: ${T?.constructor?.name}`);console.log(" Putting chunk:",{id:x.id,snippetId:x.snippet_id,chunkIndex:x.chunk_index,embeddingLength:x.embedding.length,embeddingType:x.embedding.constructor.name,allKeys:Object.keys(x),idDescriptor:Object.getOwnPropertyDescriptor(x,"id"),objectType:typeof x,prototypeChainDepth:(()=>{let A=0,D=x;for(;D&&A<10;)D=Object.getPrototypeOf(D),A++;return A})()});const k=JSON.stringify(x),C=JSON.parse(k);if(!C.id)throw new Error(`Chunk id lost during JSON serialization! Original: ${x.id}`);console.log(" Chunk survived JSON round-trip with id:",C.id),await new Promise((A,D)=>{const B=l.put(C);B.onsuccess=()=>{A()},B.onerror=()=>{console.error(" PUT request failed:",{chunk:x,error:B.error,errorName:B.error?.name,errorMessage:B.error?.message,chunkKeys:Object.keys(x),hasIdProperty:"id"in x,idValue:x.id}),D(B.error)}})}catch(p){throw console.error(" Error putting chunk:",{chunk:h,error:p}),p}}r&&s.objectStore(Ds).put(r),s.oncomplete=()=>{console.log(`Saved ${t.length} chunks to IndexedDB`),n()},s.onerror=()=>{console.error("Error saving chunks:",s.error),a(s.error)}})}async deleteChunks(t){if(await this.init(),!!this.db)return new Promise((r,n)=>{const a=this.db.transaction([ri,Ds],"readwrite"),l=a.objectStore(ri).index("snippet_id").openCursor(IDBKeyRange.only(t));l.onsuccess=h=>{const p=h.target.result;p&&(p.delete(),p.continue())},a.objectStore(Ds).delete(t),a.oncomplete=()=>{console.log(`Deleted chunks for snippet ${t}`),r()},a.onerror=()=>{console.error("Error deleting chunks:",a.error),n(a.error)}})}async getAllEmbeddedSnippetIds(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([Ds],"readonly").objectStore(Ds).getAllKeys();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting embedded snippet IDs:",i.error),r(i.error)}}):[]}async cacheQueryEmbedding(t,r,n){if(await this.init(),!!this.db)return new Promise((a,i)=>{const s=this.db.transaction([Au],"readwrite"),l=s.objectStore(Au),d={query:t,embedding:r,model:n,created_at:Date.now()};l.put(d),s.oncomplete=()=>{a()},s.onerror=()=>{console.error("Error caching query embedding:",s.error),i(s.error)}})}async getCachedQueryEmbedding(t){return await this.init(),this.db?new Promise((r,n)=>{const s=this.db.transaction([Au],"readonly").objectStore(Au).get(t);s.onsuccess=()=>{const l=s.result;r(l?{embedding:l.embedding,model:l.model}:null)},s.onerror=()=>{console.error("Error getting cached query:",s.error),n(s.error)}}):null}cosineSimilarity(t,r){if(t.length!==r.length)throw new Error("Vectors must have same length");let n=0,a=0,i=0;for(let s=0;s<t.length;s++)n+=t[s]*r[s],a+=t[s]*t[s],i+=r[s]*r[s];return n/(Math.sqrt(a)*Math.sqrt(i))}async vectorSearch(t,r=5,n=.5){return await this.init(),this.db?new Promise((a,i)=>{const d=this.db.transaction([ri],"readonly").objectStore(ri).getAll();d.onsuccess=()=>{const p=d.result.map(b=>({snippet_id:b.snippet_id,chunk_id:b.id,chunk_text:b.chunk_text,chunk_index:b.chunk_index,score:this.cosineSimilarity(t,b.embedding)})),f=[...p].sort((b,x)=>x.score-b.score);console.log(` Vector search - Top 10 scores (threshold: ${n}):`,f.slice(0,10).map(b=>({score:b.score.toFixed(4),snippet_id:b.snippet_id,chunk_preview:b.chunk_text.substring(0,100)+"..."})));const m=p.filter(b=>b.score>=n).sort((b,x)=>x.score-b.score).slice(0,r);console.log(` Returning ${m.length} results above threshold ${n}`),a(m)},d.onerror=()=>{console.error("Error performing vector search:",d.error),i(d.error)}}):[]}async getAllChunks(){return await this.init(),this.db?new Promise((t,r)=>{const i=this.db.transaction([ri],"readonly").objectStore(ri).getAll();i.onsuccess=()=>{t(i.result)},i.onerror=()=>{console.error("Error getting all chunks:",i.error),r(i.error)}}):[]}}const bs=new Xz,Jz="Snippets";async function Zz(e){try{const t=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${encodeURIComponent("Research Agent Swag")}' and mimeType='application/vnd.google-apps.spreadsheet' and trashed=false&fields=files(id,name)`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Drive API error: ${t.statusText}`);const n=(await t.json()).files||[];if(n.length===0)return console.warn(' "Research Agent Swag" spreadsheet not found'),null;const a=n[0].id;return console.log(` Found "Research Agent Swag" spreadsheet: ${a}`),a}catch(t){throw console.error(" Error finding snippets spreadsheet:",t),t}}function eU(e){if(!e||e.length<5)return null;const[t,r,n,a,i,s,l]=e;if(!t||t==="id"||!i)return null;const d=s?s.split(",").map(m=>m.trim()).filter(Boolean):[],h=r?new Date(r).getTime():Date.now(),p=n?new Date(n).getTime():h,f=l==="chat"||l==="assistant"?"assistant":l==="user"?"user":"tool";return{id:`sheet-${t}`,content:i||"",title:a||void 0,timestamp:h,updateDate:p,sourceType:f,selected:!1,tags:d,hasEmbedding:!1}}async function tU(e,t){try{const r=await Zz(t);if(!r)throw new Error("Snippets spreadsheet not found");const n=await Uz(r,`${Jz}!A:H`);if(!n||n.length<2)return console.warn(" No snippets found in spreadsheet"),null;for(let a=1;a<n.length;a++){const i=n[a];if(parseInt(i[0],10)===e){const l=eU(i);if(l)return console.log(` Fetched snippet #${e} from Google Sheets:`,l.title),l}}return console.warn(` Snippet #${e} not found in Google Sheets`),null}catch(r){throw console.error(` Error fetching snippet #${e}:`,r),r}}const I3=_.createContext(void 0),R0=()=>{const e=_.useContext(I3);if(!e)throw new Error("useSwag must be used within SwagProvider");return e},rU=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,d]=_.useState(null),{showError:h,showWarning:p,showSuccess:f}=Mc(),{user:m,getToken:b}=rs(),{settings:x}=Al();_.useEffect(()=>{(async()=>{try{const H=await Ix.getItem("swag-snippets");H&&r(H),a(!0)}catch(H){console.error("Failed to load snippets:",H),h("Failed to load snippets from storage"),a(!0)}})()},[h]);const v=F=>F<1024?F+" B":F<1024*1024?(F/1024).toFixed(2)+" KB":(F/(1024*1024)).toFixed(2)+" MB";_.useEffect(()=>{if(!n)return;(async()=>{try{await Ix.setItem("swag-snippets",t);const H=await Ix.getStats();s({totalSize:H.totalSize,limit:H.limit,percentUsed:H.percentUsed}),H.percentUsed>80&&p(`Storage is ${H.percentUsed.toFixed(0)}% full. Consider deleting old snippets.`)}catch(H){if(H instanceof nc)if(H.code==="QUOTA_EXCEEDED"){const I=H.estimatedSize&&H.limit?`Current size: ${v(H.estimatedSize)}, Limit: ${v(H.limit)}`:"";h(`Storage Quota Exceeded! ${H.message} ${I}`)}else h(`Storage error: ${H.message}`);else console.error("Failed to save snippets:",H),h("Failed to save snippets to storage")}})()},[t,n,h,p]);const T=()=>{try{const F=localStorage.getItem("google_drive_access_token");return!!F&&F.length>0}catch(F){console.error("Failed to check authentication:",F)}return!1},k=async()=>{try{const F=localStorage.getItem("rag_spreadsheet_id");if(F)return console.log("Using cached spreadsheet ID:",F),F;let H=localStorage.getItem("google_drive_access_token");if(H)console.log(" Using cached Drive API access token");else{if(console.log(" Requesting Google Drive API access token..."),typeof window>"u"||!window.google?.accounts?.oauth2)throw console.error(" Google Identity Services not available. The library may not have loaded yet."),console.log(" This usually happens if the page loads before Google GSI library is ready."),console.log(" Try: 1) Refresh the page, 2) Check internet connection, 3) Check browser console for script loading errors"),new Error("Google Identity Services not available - library not loaded");try{const xe=window.google.accounts.oauth2.initTokenClient({client_id:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file",callback:async ke=>{if(ke.access_token){const me=ke.access_token.trim().replace(/[\r\n]/g,"");localStorage.setItem("google_drive_access_token",me),console.log(" Got Drive API access token")}}});if(!xe)throw new Error("Failed to initialize Google token client");await new Promise((ke,me)=>{xe.callback=Me=>{if(Me.error){console.error("OAuth error:",Me.error),me(new Error(`OAuth error: ${Me.error}`));return}if(Me.access_token){const ge=Me.access_token.trim().replace(/[\r\n]/g,"");H=ge,localStorage.setItem("google_drive_access_token",ge),console.log(" Got Drive API access token"),ke()}else me(new Error("No access token received"))},console.log(" Requesting Google Drive & Sheets permissions..."),xe.requestAccessToken({prompt:""})})}catch(xe){throw console.error("Failed to get Drive API token:",xe),new Error("Please grant access to Google Drive and Sheets to enable cloud sync")}}if(!H)throw console.error("No Drive API access token available"),new Error("No Drive API access token - unable to access Google Sheets");const I=await An();console.log(" Calling getUserRagSpreadsheet at:",I);const ne=await fetch(`${I}/rag/user-spreadsheet`,{method:"GET",headers:{Authorization:`Bearer ${H}`}});if(!ne.ok){const xe=await ne.text();console.error(" Backend error response:",{status:ne.status,statusText:ne.statusText,body:xe});let ke=`Failed to get spreadsheet: ${ne.status}`;try{const me=JSON.parse(xe);me.error&&(ke=me.error)}catch{}throw new Error(ke)}const ue=await ne.json();return localStorage.setItem("rag_spreadsheet_id",ue.spreadsheetId),ue.created?(console.log(" Created new RAG spreadsheet:",ue.spreadsheetId),p('Created new "Research Agent Swag" spreadsheet in your Google Drive')):console.log(" Found existing RAG spreadsheet:",ue.spreadsheetId),ue.spreadsheetId}catch(F){return console.error("Failed to get user RAG spreadsheet:",F),null}};_.useEffect(()=>((async()=>{if(!(!m?.email||!T()||!n))try{if(!await k()){console.warn("Could not get user RAG spreadsheet - sync disabled"),p("Cannot access Google Sheets. Please check your Google Drive connection in Settings > Cloud Sync.");return}await ga.initialize({enabled:!0,autoSync:!0,syncInterval:6e4,batchSize:50,retryAttempts:3,deviceId:ga.getDeviceId()}),ga.onSyncStart(()=>{d(ga.getStatus())}),ga.onSyncComplete(ne=>{d(ga.getStatus()),ne&&ne.snippetsPulled>0&&console.log(`Synced ${ne.snippetsPulled} snippets from cloud`)}),ga.onSyncError((ne,ue)=>{console.error("Sync error:",ue),d(ga.getStatus()),ue&&h(`Sync failed: ${ue.message}`)}),console.log("Performing initial sync...");const I=await ga.pullSnippets(m.email);I&&I.length>0&&(r(ne=>{const ue=new Set(ne.map(me=>me.id)),xe=I.filter(me=>!ue.has(me.id)),ke=ne.map(me=>{const Me=I.find(ge=>ge.id===me.id);return Me&&Me.updateDate>me.updateDate?Me:me});return[...xe,...ke].sort((me,Me)=>Me.updateDate-me.updateDate)}),console.log(`Downloaded ${I.length} snippets from cloud`)),t.length>0&&await ga.pushSnippets(t,m.email),ga.startAutoSync(),console.log(" RAG sync initialized and auto-sync started")}catch(H){console.error("Failed to initialize sync:",H),h("Cloud sync failed to initialize. Check your Google Drive connection in Settings > Cloud Sync.")}})(),()=>{T()&&ga.stopAutoSync()}),[m?.email,n,h]);const C=()=>{try{const F=localStorage.getItem("rag_config");if(F){const H=JSON.parse(F);return H.enabled&&H.autoEmbed}}catch(F){console.error("Failed to check RAG config:",F)}return!1},A=async(F,H,I)=>{if(C())try{const ne=await An(),ue=await fetch(`${ne}/rag/ingest`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:H,sourceType:"snippet",title:I||`Snippet ${F}`,snippetId:F})});if(!ue.ok){console.error("Failed to auto-embed snippet");return}const xe=ue.body?.getReader(),ke=new TextDecoder;if(xe)for(;;){const{done:me,value:Me}=await xe.read();if(me)break;const Be=ke.decode(Me).split(`
`);for(const ct of Be)if(ct.startsWith("data: ")){const yt=JSON.parse(ct.substring(6));yt.error&&console.error("Auto-embed error:",yt.error),yt.message&&console.log("Auto-embed:",yt.message)}}r(me=>me.map(Me=>Me.id===F?{...Me,hasEmbedding:!0}:Me))}catch(ne){console.error("Auto-embed failed:",ne)}},D=async(F,H,I)=>{const ne=t.find(ke=>ke.content.trim()===F.trim());if(ne)return await B(ne.id,{updateDate:Date.now()}),ne;const ue=Date.now(),xe={id:`snippet-${ue}-${Math.random().toString(36).substr(2,9)}`,content:F,title:I,sourceType:H,timestamp:ue,updateDate:ue,selected:!1};return r(ke=>[xe,...ke]),T()&&m?.email&&ga.queueSync({type:"push-snippet",data:xe,userEmail:m.email}),await A(xe.id,F,I),xe},B=async(F,H)=>{const I=t.find(ue=>ue.id===F),ne={...I,...H,updateDate:Date.now()};if(r(ue=>ue.map(xe=>xe.id===F?ne:xe)),T()&&m?.email&&ga.queueSync({type:"push-snippet",data:ne,userEmail:m.email}),I&&H.content&&H.content!==I.content){const ue=H.title!==void 0?H.title:I.title;await A(F,H.content,ue)}},R=F=>{r(H=>H.filter(I=>!F.includes(I.id))),T()&&m?.email&&F.forEach(H=>{ga.queueSync({type:"delete-snippet",data:{id:H},userEmail:m.email})})},M=F=>{if(F.length<2)return;const H=t.filter(ke=>F.includes(ke.id)).sort((ke,me)=>ke.timestamp-me.timestamp),I=H.map(ke=>ke.content).join(`

---

`),ne=H.filter(ke=>ke.title).map(ke=>ke.title).join(" + "),ue=Date.now(),xe={id:`snippet-${ue}-${Math.random().toString(36).substr(2,9)}`,content:I,title:ne||void 0,sourceType:H[0].sourceType,timestamp:ue,updateDate:ue,selected:!1};r(ke=>[xe,...ke.filter(me=>!F.includes(me.id))])},$=F=>{r(H=>H.map(I=>I.id===F?{...I,selected:!I.selected}:I))},W=()=>{r(F=>F.map(H=>({...H,selected:!0})))},O=()=>{r(F=>F.map(H=>({...H,selected:!1})))},Y=()=>t.filter(F=>F.selected),X=()=>{const F=new Set;return t.forEach(H=>{H.tags&&H.tags.forEach(I=>F.add(I))}),Array.from(F).sort()},q=(F,H)=>{r(I=>I.map(ne=>{if(F.includes(ne.id)){const ue=ne.tags||[],xe=[...new Set([...ue,...H])];return{...ne,tags:xe,updateDate:Date.now()}}return ne}))},N=(F,H)=>{r(I=>I.map(ne=>{if(F.includes(ne.id)&&ne.tags){const ue=ne.tags.filter(xe=>!H.includes(xe));return{...ne,tags:ue.length>0?ue:void 0,updateDate:Date.now()}}return ne}))},U=async F=>{try{return await bs.hasEmbedding(F)}catch(H){return console.error("Error checking embedding status:",H),!1}},j=async F=>{try{const H=await bs.getEmbeddingDetails(F);return H.hasEmbedding?H:t.find(ne=>ne.id===F)?.hasEmbedding?{hasEmbedding:!0,chunkCount:1,chunks:[]}:{hasEmbedding:!1,chunkCount:0,chunks:[]}}catch(H){return console.error("Error getting embedding details:",H),{hasEmbedding:!1,chunkCount:0,chunks:[]}}},K=async()=>{try{const F=t.map(I=>I.id);if(F.length===0)return;const H=await bs.bulkCheckEmbeddings(F);r(I=>I.map(ne=>({...ne,hasEmbedding:H[ne.id]||!1})))}catch(F){console.error("Failed to check embedding status:",F)}},Q=async(F,H,I=!1)=>{const ne=t.filter(ke=>F.includes(ke.id));if(ne.length===0)return{embedded:0,skipped:0,failed:0};let ue=ne,xe=0;if(!I){const ke=await bs.bulkCheckEmbeddings(F),me=F.filter(Me=>ke[Me]);if(me.length>0){if(console.log(` Skipping ${me.length} already indexed snippets:`,me),ue=ne.filter(Me=>!ke[Me.id]),xe=me.length,ue.length===0)return console.log(" All selected snippets already have embeddings"),p(` All ${ne.length} snippets already indexed`),{embedded:0,skipped:xe,failed:0};p(` Skipping ${xe} already indexed, generating ${ue.length} new embeddings`)}}try{let ke,me=0;const Me=3;for(;me<=Me;)try{const bt=await An(),It=await b(),mn=x.providers.filter(Jt=>Jt.enabled!==!1&&Jt.capabilities?.embedding!==!1).map(Jt=>({type:Jt.type,apiKey:Jt.apiKey,apiEndpoint:Jt.apiEndpoint,modelName:Jt.modelName,allowedModels:Jt.allowedModels,maxImageQuality:Jt.maxImageQuality}));if(ke=await fetch(`${bt}/rag/embed-snippets`,{method:"POST",headers:{"Content-Type":"application/json",...It?{Authorization:`Bearer ${It}`}:{}},body:JSON.stringify({snippets:ue.map(Jt=>({id:Jt.id,content:Jt.content,title:Jt.title,tags:Jt.tags,timestamp:Jt.timestamp})),providers:mn,force:I})}),ke.status===429&&me<Me){const Jt=Math.pow(2,me)*1e3;console.warn(` Rate limited, retrying in ${Jt/1e3}s... (attempt ${me+1}/${Me})`),p(` Rate limited, retrying in ${Jt/1e3}s...`),await new Promise(Ut=>setTimeout(Ut,Jt)),me++;continue}break}catch(bt){if(me<Me){const It=Math.pow(2,me)*1e3;console.warn(` Fetch error, retrying in ${It/1e3}s...`,bt),await new Promise(mn=>setTimeout(mn,It)),me++;continue}throw bt}if(!ke||!ke.ok){const bt=await ke?.text()||"No response";let It;try{It=JSON.parse(bt)}catch{It={error:bt}}throw It.requiredAction==="CONFIGURE_EMBEDDING_PROVIDER"||It.error&&It.error.includes("No embedding provider")?new Error(` Embedding Provider Required

To use Swag embeddings and vector search, you need to configure a provider that supports embeddings.

 Steps:
1. Go to Settings (gear icon)
2. Click "Providers" tab
3. Add a provider: OpenAI, Together.AI, Cohere, or Voyage
4. Enable the " Embeddings" capability
5. Save and try again

 Note: Swag embeddings work independently of the RAG system. You just need one embedding-capable provider configured.`):new Error(`Failed to generate embeddings: ${ke?.status} ${ke?.statusText}. ${bt}`)}const ge=await ke.json(),Be=ge.results?.[0]?.chunks?.[0]?.embedding;console.log(" Backend response:",{success:ge.success,resultsCount:ge.results?.length,firstResult:ge.results?.[0],firstChunk:ge.results?.[0]?.chunks?.[0],firstChunkKeys:ge.results?.[0]?.chunks?.[0]?Object.keys(ge.results[0].chunks[0]):[],firstChunkEmbeddingLength:Be?.length,firstChunkEmbeddingType:Be?.constructor?.name,firstChunkEmbeddingFirst5:Array.isArray(Be)?Be.slice(0,5):"NOT_AN_ARRAY"});const{success:ct,results:yt,error:tr}=ge;if(!ct)throw new Error(tr||"Failed to generate embeddings");const wr=[];let Et=0,Ar=0,$t=0;for(let bt=0;bt<yt.length;bt++){const It=yt[bt];if(It.status==="success"&&It.chunks.length>0){console.log(" Chunk structure check:",{chunkCount:It.chunks.length,firstChunk:It.chunks[0],hasId:It.chunks[0]?.id!==void 0,hasSnippetId:It.chunks[0]?.snippet_id!==void 0});try{await bs.saveChunks(It.chunks,{snippet_id:It.id,created_at:Date.now(),updated_at:Date.now()}),wr.push(It.id),Et+=It.chunks.length,Ar++,console.log(` Saved ${It.chunks.length} chunks for snippet ${It.id}`)}catch(mn){$t++,console.error(` Failed to save chunks for snippet ${It.id}:`,mn)}H&&H(bt+1,yt.length)}else It.status==="failed"&&($t++,console.error(`Failed to embed snippet ${It.id}:`,It.error))}r(bt=>bt.map(It=>wr.includes(It.id)?{...It,hasEmbedding:!0}:It));const or=yt.filter(bt=>bt.status==="success").flatMap(bt=>bt.chunks);if(console.log(" Google Sheets sync check:",{chunksToSync:or.length,userEmail:m?.email,spreadsheetId:localStorage.getItem("rag_spreadsheet_id"),googleLinked:localStorage.getItem("rag_google_linked")}),or.length>0&&m?.email)try{const bt=localStorage.getItem("rag_spreadsheet_id");if(!bt)console.warn(" No spreadsheet ID found. Skipping Google Sheets sync."),console.log(" To enable sync: Go to Settings > Cloud Sync and connect Google Drive"),p(" Embeddings saved locally. Connect Google Drive in Cloud Sync settings to enable automatic backup.");else{const mn=localStorage.getItem("rag_google_linked")==="true"&&Fz();if(console.log(` Sync method: ${mn?"Client-side direct":"Backend"}`),mn){console.log(` Using direct Google Sheets sync for ${or.length} chunks (client-side)...`);try{const Jt=$z(or);console.log(` Formatted ${Jt.length} rows for Google Sheets`),await zz(bt,"RAG_Embeddings_v1!A:K",Jt),console.log(" Synced to Google Sheets (client-side)"),p(` Synced ${or.length} embeddings to Google Sheets`)}catch(Jt){console.error(" Client-side sync failed, falling back to backend:",Jt),p(" Direct sync failed, using backend fallback..."),setTimeout(async()=>{try{await ga.pushEmbeddings(or,(Ut,yn)=>{console.log(` Backend sync: ${Ut}/${yn} chunks`)}),console.log(" Synced to Google Sheets (backend fallback)"),p(` Synced ${or.length} embeddings to Google Sheets (backend)`)}catch(Ut){console.error("Backend sync also failed:",Ut),p(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}else console.log(` Using backend sync for ${or.length} chunks (with 2s delay)...`),setTimeout(async()=>{try{console.log(" Starting backend Google Sheets sync..."),await ga.pushEmbeddings(or,(Jt,Ut)=>{console.log(` Syncing: ${Jt}/${Ut} chunks`)}),console.log(" Synced to Google Sheets (backend)"),p(` Synced ${or.length} embeddings to Google Sheets`)}catch(Jt){console.error("Failed to sync to Google Sheets:",Jt),p(" Embeddings saved locally but sync to Google Sheets failed")}},2e3)}}catch(bt){console.error("Failed to queue sync:",bt)}return console.log(` Generated ${Et} embeddings for ${Ar} snippets`),{embedded:Ar,skipped:xe+(yt.length-Ar-$t),failed:$t}}catch(ke){throw console.error("Failed to generate embeddings:",ke),ke}},ie=async()=>{if(!m?.email){p("Please sign in with Google to sync");return}if(!T()){p("Cloud sync requires Google Drive connection. Go to Settings > Cloud Sync to connect.");return}try{console.log(" Manual sync triggered"),console.log(" Ensuring spreadsheet exists...");const F=await k();if(!F){h("Failed to create or access Google Sheets spreadsheet");return}console.log(" Spreadsheet ready:",F),console.log(" Pulling remote snippets...");try{const H=localStorage.getItem("google_drive_access_token");if(!H)console.warn("No Drive token available for pull");else{const I=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${F}/values/RAG_Snippets_v1!A2:J10000`,{headers:{Authorization:`Bearer ${H}`}}).then(ne=>ne.json()).then(ne=>ne.values||[]);if(I.length>0){console.log(` Received ${I.length} rows from Sheets`);const ne=new Map;I.forEach(xe=>{const ke=xe[0];ne.has(ke)||ne.set(ke,[]),ne.get(ke).push(xe)});const ue=[];ne.forEach((xe,ke)=>{xe.sort((ge,Be)=>parseInt(ge[8]||"1")-parseInt(Be[8]||"1"));const me=xe[0],Me=xe.map(ge=>ge[2]||"").join("");ue.push({id:ke,title:me[1]||"",content:Me,timestamp:parseInt(me[5])||Date.now(),updateDate:parseInt(me[6])||Date.now(),sourceType:me[7]||"user",tags:me[4]?JSON.parse(me[4]):[]})}),console.log(` Reassembled ${ue.length} snippets from ${I.length} rows`),r(xe=>{const ke=new Set(xe.map(ge=>ge.id)),me=ue.filter(ge=>!ke.has(ge.id)),Me=xe.map(ge=>{const Be=ue.find(ct=>ct.id===ge.id);return Be&&Be.updateDate>ge.updateDate?Be:ge});return[...me,...Me].sort((ge,Be)=>Be.updateDate-ge.updateDate)})}else console.log(" No remote snippets found")}}catch(H){console.error(" Pull failed:",H)}if(console.log(" Pushing local snippets..."),t.length>0){const H=localStorage.getItem("google_drive_access_token");if(!H){h("No Drive API access token available");return}const I=49e3,ne=[];t.forEach(me=>{const Me=me.content||"";if(Me.length<=I)ne.push([me.id,me.title||"",Me,"",JSON.stringify(me.tags||[]),me.timestamp.toString(),me.updateDate.toString(),me.sourceType,"1","1"]);else{const ge=Math.ceil(Me.length/I);for(let Be=0;Be<ge;Be++){const ct=Be*I,yt=Math.min((Be+1)*I,Me.length),tr=Me.substring(ct,yt);ne.push([me.id,Be===0&&me.title||"",tr,"",Be===0?JSON.stringify(me.tags||[]):"[]",me.timestamp.toString(),me.updateDate.toString(),me.sourceType,(Be+1).toString(),ge.toString()])}}}),console.log(` Prepared ${ne.length} rows from ${t.length} snippets`),console.log(" Clearing existing data...");const ue=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${F}/values/RAG_Snippets_v1!A2:J10000:clear`,{method:"POST",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}});if(!ue.ok){const me=await ue.text();console.error("Clear error:",me)}console.log(` Writing ${ne.length} rows...`);const xe=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${F}/values/RAG_Snippets_v1!A2?valueInputOption=RAW`,{method:"PUT",headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"},body:JSON.stringify({values:ne})});if(!xe.ok){const me=await xe.text();throw console.error(" Update error:",me),new Error(`Failed to update sheet: ${xe.status} ${me}`)}const ke=await xe.json();console.log(` Pushed ${t.length} snippets (${ne.length} rows) to Google Sheets`,ke)}else console.log(" No local snippets to push");console.log(" Manual sync complete"),f(`Synced ${t.length} snippets with Google Sheets`)}catch(F){console.error(" Manual sync failed:",F),h(`Manual sync failed: ${F instanceof Error?F.message:"Unknown error"}`)}},G=async F=>{try{console.log(` Syncing snippet #${F} from Google Sheets...`);const H=await Nw();if(!H)throw new Error("No Drive access token available");const I=await tU(F,H);if(!I){console.warn(` Snippet #${F} not found in Google Sheets`);return}const ne=t.find(ue=>ue.id===I.id||ue.content.trim()===I.content.trim());if(ne){console.log(` Snippet #${F} already exists in localStorage, updating timestamp`),await B(ne.id,{updateDate:Date.now()}),f(`Snippet "${I.title||"Untitled"}" synced from Google Sheets`);return}r(ue=>[I,...ue]),f(`Snippet "${I.title||"Untitled"}" synced from Google Sheets`),console.log(` Synced snippet #${F} from Google Sheets:`,I.title),await A(I.id,I.content,I.title)}catch(H){console.error(` Failed to sync snippet #${F}:`,H),h(`Failed to sync snippet: ${H instanceof Error?H.message:"Unknown error"}`)}};return u.jsx(I3.Provider,{value:{snippets:t,addSnippet:D,updateSnippet:B,deleteSnippets:R,mergeSnippets:M,toggleSelection:$,selectAll:W,selectNone:O,getSelectedSnippets:Y,getAllTags:X,addTagsToSnippets:q,removeTagsFromSnippets:N,storageStats:i,checkEmbeddingStatus:U,getEmbeddingDetails:j,bulkCheckEmbeddingStatus:K,generateEmbeddings:Q,syncStatus:l,triggerManualSync:ie,getUserRagSpreadsheet:k,syncSnippetFromGoogleSheets:G},children:e})};class nU{db=null;dbName="feed_data";dbVersion=2;async init(){if(!this.db)return new Promise((t,r)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{r(new Error("Failed to open IndexedDB"))},n.onsuccess=()=>{this.db=n.result,console.log(" Feed database initialized"),t()},n.onupgradeneeded=a=>{const i=a.target.result,s=a.oldVersion;if(!i.objectStoreNames.contains("items")){const l=i.createObjectStore("items",{keyPath:"id"});l.createIndex("createdAt","createdAt",{unique:!1}),l.createIndex("viewed","viewed",{unique:!1}),l.createIndex("stashed","stashed",{unique:!1}),l.createIndex("trashed","trashed",{unique:!1}),l.createIndex("topics","topics",{unique:!1,multiEntry:!0})}if(i.objectStoreNames.contains("preferences")||i.createObjectStore("preferences",{keyPath:"id"}),i.objectStoreNames.contains("quizzes")||i.createObjectStore("quizzes",{keyPath:"itemId"}).createIndex("generatedAt","generatedAt",{unique:!1}),s<2&&!i.objectStoreNames.contains("interactions")){const l=i.createObjectStore("interactions",{keyPath:"id"});l.createIndex("timestamp","timestamp",{unique:!1}),l.createIndex("feedItemId","feedItemId",{unique:!1}),l.createIndex("action","action",{unique:!1}),l.createIndex("topics","topics",{unique:!1,multiEntry:!0}),l.createIndex("quizGenerated","quizGenerated",{unique:!1})}s<2&&!i.objectStoreNames.contains("userPreferences")&&i.createObjectStore("userPreferences",{keyPath:"userId"}).createIndex("lastUpdated","lastUpdated",{unique:!1})}})}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}async saveItems(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const a=this.db.transaction(["items"],"readwrite"),i=a.objectStore("items");for(const s of t){const l={...s,id:s.id||this.generateUUID(),createdAt:s.createdAt||new Date().toISOString(),viewed:s.viewed!==void 0?s.viewed:!1,stashed:s.stashed!==void 0?s.stashed:!1,trashed:s.trashed!==void 0?s.trashed:!1};i.put(l)}a.oncomplete=()=>r(),a.onerror=()=>n(a.error)})}async getItems(t=10,r=0){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const i=this.db.transaction(["items"],"readonly"),l=i.objectStore("items").index("createdAt"),d=[];let h=0;const p=l.openCursor(null,"prev");p.onsuccess=f=>{const m=f.target.result;if(m){const b=m.value;b.trashed||(h<r?h++:d.length<t&&d.push(b)),d.length<t&&m.continue()}},i.oncomplete=()=>n(d),i.onerror=()=>a(i.error)})}async getItemById(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["items"],"readonly").objectStore("items").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async updateItem(t,r){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const s=this.db.transaction(["items"],"readwrite").objectStore("items"),l=s.get(t);l.onsuccess=()=>{const d=l.result;if(!d){a(new Error("Item not found"));return}const h={...d,...r},p=s.put(h);p.onsuccess=()=>n(),p.onerror=()=>a(p.error)},l.onerror=()=>a(l.error)})}async deleteItem(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["items"],"readwrite").objectStore("items").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async clearTrashed(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const n=this.db.transaction(["items"],"readwrite"),s=n.objectStore("items").index("trashed").openCursor(IDBKeyRange.only(!0));s.onsuccess=l=>{const d=l.target.result;d&&(d.delete(),d.continue())},n.oncomplete=()=>t(),n.onerror=()=>r(n.error)})}async getPreferences(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["preferences"],"readonly").objectStore("preferences").get("default");i.onsuccess=()=>{const s=i.result||{id:"default",searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],lastGenerated:new Date().toISOString()};t(s)},i.onerror=()=>r(i.error)})}async updatePreferences(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const i=this.db.transaction(["preferences"],"readwrite").objectStore("preferences"),s=i.get("default");s.onsuccess=()=>{const d={...s.result||{id:"default",searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],lastGenerated:new Date().toISOString()},...t},h=i.put(d);h.onsuccess=()=>r(),h.onerror=()=>n(h.error)},s.onerror=()=>n(s.error)})}async addLikedTopic(t){const r=await this.getPreferences(),n=new Set(r.likedTopics);n.add(t);const a=r.dislikedTopics.filter(i=>i!==t);await this.updatePreferences({likedTopics:Array.from(n),dislikedTopics:a})}async addDislikedTopic(t){const r=await this.getPreferences(),n=new Set(r.dislikedTopics);n.add(t);const a=r.likedTopics.filter(i=>i!==t);await this.updatePreferences({likedTopics:a,dislikedTopics:Array.from(n)})}async saveQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readwrite").objectStore("quizzes").put(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async getQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readonly").objectStore("quizzes").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async deleteQuiz(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["quizzes"],"readwrite").objectStore("quizzes").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async saveInteraction(t){if(await this.init(),!this.db)throw new Error("Database not initialized");const r={...t,id:`interaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return new Promise((n,a)=>{const l=this.db.transaction(["interactions"],"readwrite").objectStore("interactions").add(r);l.onsuccess=()=>n(),l.onerror=()=>a(l.error)})}async getInteractions(t=1e3){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const l=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("timestamp").getAll();l.onsuccess=()=>{const d=l.result;r(d.reverse().slice(0,t))},l.onerror=()=>n(l.error)})}async getInteractionsByAction(t,r=500){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((n,a)=>{const d=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("action").getAll(t);d.onsuccess=()=>{const h=d.result;n(h.reverse().slice(0,r))},d.onerror=()=>a(d.error)})}async getQuizInteractions(t=500){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const l=this.db.transaction(["interactions"],"readonly").objectStore("interactions").index("quizGenerated").getAll();l.onsuccess=()=>{const h=l.result.filter(p=>p.quizGenerated);r(h.reverse().slice(0,t))},l.onerror=()=>n(l.error)})}async getUserPreferences(t="default"){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["userPreferences"],"readonly").objectStore("userPreferences").get(t);s.onsuccess=()=>{r(s.result||null)},s.onerror=()=>n(s.error)})}async updateUserPreferences(t){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const s=this.db.transaction(["userPreferences"],"readwrite").objectStore("userPreferences").put(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})}async initializeUserPreferences(t="default"){const r={userId:t,learnedTopics:[],learnedKeywords:[],avoidTopics:[],lastUpdated:Date.now(),interactionCount:0,quizEngagementCount:0};return await this.updateUserPreferences(r),r}async clearInteractions(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["interactions"],"readwrite").objectStore("interactions").clear();i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}async clearUserPreferences(){if(await this.init(),!this.db)throw new Error("Database not initialized");return new Promise((t,r)=>{const i=this.db.transaction(["userPreferences"],"readwrite").objectStore("userPreferences").clear();i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}}const fa=new nU;async function aU(e,t,r,n=10,a){const i=await An(),s={swagContent:t,searchTerms:r.searchTerms,count:n,preferences:r},l=await fetch(`${i}/feed/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!l.ok){const m=await l.json();throw new Error(m.error||`Failed to generate feed: ${l.statusText}`)}const d=l.body?.getReader();if(!d)throw new Error("No response body");const h=new TextDecoder,p=[];let f="";try{for(;;){const{done:m,value:b}=await d.read();if(m)break;f+=h.decode(b,{stream:!0});const x=f.split(`

`);f=x.pop()||"";for(const v of x){if(!v.trim()||!v.startsWith("data: "))continue;const T=v.substring(6);try{const k=JSON.parse(T);if(a&&a(k),k.type==="item_generated"&&k.item)p.push(k.item);else if(k.type==="error")throw new Error(k.error||"Unknown error during generation")}catch(k){console.error("Failed to parse SSE event:",T,k)}}}}finally{d.releaseLock()}return p}async function iU(e,t){const r=await An(),n=[{role:"system",content:`You are a quiz generator. Create a 10-question multiple-choice quiz based on the provided content.

Each question should:
- Test understanding of the content
- Have 4 answer choices (A, B, C, D)
- Have exactly one correct answer
- Include a brief explanation (1-2 sentences)

OUTPUT FORMAT (JSON):
{
  "questions": [
    {
      "id": "unique_id",
      "prompt": "Question text?",
      "choices": [
        {"id": "a", "text": "Choice A"},
        {"id": "b", "text": "Choice B"},
        {"id": "c", "text": "Choice C"},
        {"id": "d", "text": "Choice D"}
      ],
      "correctChoiceId": "a",
      "explanation": "Why this is correct..."
    }
  ]
}`},{role:"user",content:`Generate a 10-question quiz for this content:

TITLE: ${t.title}

CONTENT:
${t.content}

TOPICS: ${t.topics.join(", ")}

${t.sources.length>0?`SOURCES:
${t.sources.map(h=>`- ${h}`).join(`
`)}`:""}`}],a=await fetch(`${r}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({messages:n,stream:!1,temperature:.7,maxTokens:2e3})});if(!a.ok){const h=await a.json();throw new Error(h.error||`Failed to generate quiz: ${a.statusText}`)}const i=await a.json();let s;try{const p=(i.response||i.content||"").match(/\{[\s\S]*\}/);if(!p)throw new Error("No JSON found in response");s=JSON.parse(p[0])}catch(h){throw console.error("Failed to parse quiz JSON:",i,h),new Error("Failed to parse quiz response")}if(!s.questions||!Array.isArray(s.questions))throw new Error("Invalid quiz format: missing questions array");const l=s.questions.slice(0,10).map((h,p)=>{if(!h.prompt||!h.choices||!h.correctChoiceId||!h.explanation)throw new Error(`Invalid question format at index ${p}`);const f=h.choices.map(m=>({id:m.id||"",text:m.text||""}));return{id:h.id||`q${p+1}`,prompt:h.prompt,choices:f,correctChoiceId:h.correctChoiceId,explanation:h.explanation}});if(l.length<10)throw new Error(`Quiz must have 10 questions, got ${l.length}`);return{itemId:t.id,title:`Quiz: ${t.title}`,questions:l,sources:t.sources,generatedAt:new Date().toISOString()}}const D3=_.createContext(null);function w0e(){const e=_.useContext(D3);if(!e)throw new Error("useFeed must be used within FeedProvider");return e}function sU({children:e}){const{getToken:t}=rs(),{snippets:r}=R0(),[n,a]=_.useState([]),[i,s]=_.useState({searchTerms:["latest world news"],likedTopics:[],dislikedTopics:[],lastGenerated:new Date().toISOString()}),[l,d]=_.useState(null),[h,p]=_.useState(!1),[f,m]=_.useState(!1),[b,x]=_.useState(null);_.useEffect(()=>{(async()=>{try{p(!0),await fa.init();const W=await fa.getPreferences();s(W);const O=await fa.getItems(10,0);a(O)}catch(W){console.error("Failed to load feed data:",W),x(W instanceof Error?W.message:"Failed to load feed")}finally{p(!1)}})()},[]);const v=_.useCallback(async()=>{const $=await t();if(!(!$||f))try{m(!0),x(null);const W=r.slice(-20).map(X=>X.content||""),O=await aU($,W,i,10,X=>{console.log("Feed generation event:",X)}),Y=await Promise.all(O.map(async X=>{if(X.image||!("imageSearchTerms"in X))return X;try{return X}catch(q){return console.warn("Failed to fetch image for item:",X.id,q),X}}));await fa.saveItems(Y),a(X=>[...Y,...X]),await fa.updatePreferences({lastGenerated:new Date().toISOString()})}catch(W){console.error("Failed to generate feed items:",W),x(W instanceof Error?W.message:"Failed to generate feed")}finally{m(!1)}},[t,r,i,f]),T=_.useCallback(async $=>{try{await fa.updateItem($,{stashed:!0}),a(O=>O.map(Y=>Y.id===$?{...Y,stashed:!0}:Y));const W=n.find(O=>O.id===$);if(W){for(const Y of W.topics)await fa.addLikedTopic(Y);const O=await fa.getPreferences();s(O)}}catch(W){console.error("Failed to stash item:",W),x(W instanceof Error?W.message:"Failed to stash item")}},[n]),k=_.useCallback(async $=>{try{await fa.updateItem($,{trashed:!0}),a(O=>O.filter(Y=>Y.id!==$));const W=n.find(O=>O.id===$);if(W){for(const Y of W.topics)await fa.addDislikedTopic(Y);const O=await fa.getPreferences();s(O)}}catch(W){console.error("Failed to trash item:",W),x(W instanceof Error?W.message:"Failed to trash item")}},[n]),C=_.useCallback(async $=>{try{await fa.updateItem($,{viewed:!0}),a(W=>W.map(O=>O.id===$?{...O,viewed:!0}:O))}catch(W){console.error("Failed to mark item as viewed:",W)}},[]),A=_.useCallback(async $=>{const W=await t();if(W)try{p(!0),x(null);let O=await fa.getQuiz($);if(!O){const Y=n.find(X=>X.id===$);if(!Y)throw new Error("Item not found");O=await iU(W,Y),await fa.saveQuiz(O)}d(O)}catch(O){console.error("Failed to start quiz:",O),x(O instanceof Error?O.message:"Failed to load quiz")}finally{p(!1)}},[t,n]),D=_.useCallback(()=>{d(null)},[]),B=_.useCallback(async $=>{try{await fa.updatePreferences({searchTerms:$});const W=await fa.getPreferences();s(W)}catch(W){console.error("Failed to update search terms:",W),x(W instanceof Error?W.message:"Failed to update settings")}},[]),R=_.useCallback(async()=>{try{p(!0);const $=await fa.getItems(10,0);a($)}catch($){console.error("Failed to refresh feed:",$),x($ instanceof Error?$.message:"Failed to refresh")}finally{p(!1)}},[]),M={items:n,preferences:i,currentQuiz:l,isLoading:h,isGenerating:f,error:b,generateMore:v,stashItem:T,trashItem:k,markViewed:C,startQuiz:A,closeQuiz:D,updateSearchTerms:B,refresh:R};return u.jsx(D3.Provider,{value:M,children:e})}const M3=_.createContext(void 0),_h={clientId:"548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com",redirectUri:"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/oauth/callback",scope:"https://www.googleapis.com/auth/youtube.force-ssl",authUrl:"https://accounts.google.com/o/oauth2/v2/auth"},oU=({children:e})=>{const[t,r]=Ai("youtube_oauth_tokens",null),[n,a]=_.useState(!1),[i,s]=_.useState(null),l=_.useMemo(()=>t?Date.now()<t.expires_at-3e5:!1,[t]);_.useEffect(()=>{if(!t||!l)return;const b=t.expires_at-Date.now(),x=Math.max(0,b-6e5);if(x<=0){p();return}const v=setTimeout(()=>{p()},x);return()=>clearTimeout(v)},[t,l]);const d=_.useCallback(()=>{const b=localStorage.getItem("auth");if(!b)return null;try{return JSON.parse(b).token||null}catch{return null}},[]),h=_.useCallback(async()=>{a(!0),s(null);try{const b=crypto.randomUUID();sessionStorage.setItem("oauth_state",b);const x=new URLSearchParams({client_id:_h.clientId,redirect_uri:_h.redirectUri,response_type:"code",scope:_h.scope,access_type:"offline",prompt:"consent",state:b}),v=`${_h.authUrl}?${x}`,T=600,k=700,C=window.screenX+(window.outerWidth-T)/2,A=window.screenY+(window.outerHeight-k)/2,D=window.open(v,"oauth",`width=${T},height=${k},left=${C},top=${A}`);if(!D)throw new Error("Popup blocked. Please allow popups for this site.");const B=M=>{const $=new URL(_h.redirectUri).origin;if(M.origin!==$){console.warn("Ignoring message from unexpected origin:",M.origin);return}if(M.data.type==="oauth_success"){const W=sessionStorage.getItem("oauth_state");if(M.data.data.state!==W){s("Invalid state parameter - possible CSRF attack"),a(!1);return}const O={access_token:M.data.data.tokens.access_token,refresh_token:M.data.data.tokens.refresh_token,expires_at:M.data.data.tokens.expires_at,scope:M.data.data.tokens.scope,token_type:M.data.data.tokens.token_type};console.log("Successfully obtained YouTube OAuth tokens"),r(O),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",B)}else M.data.type==="oauth_error"&&(console.error("OAuth error:",M.data.data.error),s(M.data.data.message||M.data.data.error||"Authorization failed"),a(!1),sessionStorage.removeItem("oauth_state"),window.removeEventListener("message",B))};window.addEventListener("message",B);const R=setInterval(()=>{D.closed&&(clearInterval(R),a(!1),window.removeEventListener("message",B),sessionStorage.getItem("oauth_state")&&(s("Authorization cancelled"),sessionStorage.removeItem("oauth_state")))},500)}catch(b){console.error("OAuth flow error:",b),s(b instanceof Error?b.message:"Failed to initiate OAuth flow"),a(!1)}},[r]),p=_.useCallback(async()=>{if(!t?.refresh_token){console.warn("No refresh token available");return}try{const b=d();if(!b){console.log("Cannot refresh YouTube tokens: JWT authentication not available");return}const x="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Refreshing YouTube OAuth tokens...");const v=await fetch(`${x}/oauth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({refresh_token:t.refresh_token})});if(!v.ok){const k=await v.json().catch(()=>({}));throw new Error(k.message||`Token refresh failed: ${v.status}`)}const T=await v.json();r({access_token:T.access_token,refresh_token:T.refresh_token,expires_at:T.expires_at,scope:T.scope,token_type:T.token_type}),console.log("Successfully refreshed YouTube OAuth tokens"),s(null)}catch(b){console.error("Token refresh error:",b);const x=b instanceof Error?b.message:"Token refresh failed";x.includes("invalid_grant")?(console.warn("Refresh token invalid, clearing tokens"),r(null),s("YouTube access expired. Please reconnect.")):s(x)}},[t,r,d]),f=_.useCallback(async()=>{if(!t)return null;if(Date.now()>=t.expires_at-3e5){console.log("Access token expired or expiring soon, refreshing..."),await p();const b=localStorage.getItem("youtube_oauth_tokens");if(b)try{return JSON.parse(b).access_token}catch{return null}return null}return t.access_token},[t,p]),m=_.useCallback(async()=>{if(t)try{const b=d();if(b){const x="https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws";console.log("Revoking YouTube OAuth tokens..."),await fetch(`${x}/oauth/revoke`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({token:t.access_token})})}}catch(b){console.error("Revoke error:",b)}finally{r(null),s(null),console.log("YouTube OAuth tokens cleared")}},[t,r,d]);return u.jsx(M3.Provider,{value:{isConnected:l,isLoading:n,tokens:t,error:i,initiateOAuthFlow:h,disconnect:m,refreshTokens:p,getAccessToken:f},children:e})},lU=()=>{const e=_.useContext(M3);if(!e)throw new Error("useYouTubeAuth must be used within a YouTubeAuthProvider");return e},O3=_.createContext(void 0);function cU({children:e}){const{accessToken:t,isAuthenticated:r}=rs(),[n,a]=_.useState(null),[i,s]=_.useState(!1),[l,d]=_.useState(null),[h,p]=_.useState(null),f=async()=>{if(!t||!r){a(null);return}s(!0),d(null);try{const x=await An(),v={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},T=await fetch(`${x}/billing`,{method:"GET",headers:v});if(!T.ok){const M=await T.json().catch(()=>({}));throw new Error(M.message||`HTTP ${T.status}`)}const k=await T.json();k.ttsCapabilities&&(p(k.ttsCapabilities),console.log(" Server TTS capabilities:",k.ttsCapabilities));let C=0,A=0;if(k.transactions)for(const M of k.transactions)M.type==="credit_added"?C+=Math.abs(M.cost):A+=M.cost;const D=C-A,B=D<-.01,R={userEmail:"",totalCost:parseFloat(A.toFixed(4)),creditBalance:parseFloat(Math.max(0,D).toFixed(2)),totalCredits:parseFloat(C.toFixed(2)),exceeded:B,timestamp:new Date().toISOString()};a(R),console.log(" Usage calculated from billing data:",{...R,rawTotalCredits:C,rawTotalUsage:A,rawCreditBalance:D})}catch(x){const v=x instanceof Error?x.message:"Failed to load usage";console.error(" Failed to fetch usage:",v),d(v),a(null)}finally{s(!1)}},m=x=>{if(!n)return;const v=n.totalCost+x,T=n.totalCredits-v,k=T<-.01;a({...n,totalCost:v,creditBalance:T,exceeded:k,timestamp:new Date().toISOString()}),console.log(` Added $${x.toFixed(4)} to usage - New balance: $${T.toFixed(4)}`)};_.useEffect(()=>{r&&t?f():a(null)},[r,t]);const b={usage:n,loading:i,error:l,refreshUsage:f,addCost:m,isLocked:n?.exceeded||!1,ttsCapabilities:h};return u.jsx(O3.Provider,{value:b,children:e})}function I0(){const e=_.useContext(O3);if(e===void 0)throw new Error("useUsage must be used within a UsageProvider");return e}const j3=_.createContext(void 0),D0=()=>{const e=_.useContext(j3);if(!e)throw new Error("useCast must be used within a CastProvider");return e},uU=({children:e})=>{const[t,r]=_.useState(!1),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,d]=_.useState(null),[h,p]=_.useState(!1),[f,m]=_.useState(!1),b="DE7507EF",x=_.useCallback(()=>{if(!window.chrome?.cast){console.log("Cast API not available yet, will retry...");return}const W=new chrome.cast.SessionRequest(b),O=new chrome.cast.ApiConfig(W,Y=>{console.log("Cast session started:",Y),d(Y),a(!0),s(Y.receiver.friendlyName)},Y=>{console.log("Cast receiver availability:",Y),r(Y===chrome.cast.ReceiverAvailability.AVAILABLE)});chrome.cast.initialize(O,()=>console.log("Cast initialized successfully"),Y=>console.error("Cast initialization failed:",Y))},[b]),v=_.useCallback(()=>{if(!chrome?.cast){console.error("Cast API not available");return}chrome.cast.requestSession(W=>{console.log("Cast session requested successfully:",W),d(W),a(!0),s(W.receiver.friendlyName),W.addUpdateListener(O=>{console.log("Cast session update:",O),O||(a(!1),d(null),s(null))})},W=>{console.error("Error requesting cast session:",W)})},[]),T=_.useCallback(()=>{l&&l.stop(()=>{console.log("Cast session stopped"),a(!1),d(null),s(null)},W=>console.error("Error stopping session:",W))},[l]),k=_.useCallback(W=>{if(!l||!n){console.log("No active cast session");return}try{const O="urn:x-cast:com.lambdallmproxy.chat",Y={type:"MESSAGES_UPDATE",messages:W.map(X=>({role:X.role,content:X.content,name:X.name,tool_call_id:X.tool_call_id,isStreaming:X.isStreaming}))};l.sendMessage(O,Y,()=>console.log("Messages sent to receiver"),X=>console.error("Error sending messages:",X))}catch(O){console.error("Error in sendMessages:",O)}},[l,n]),C=_.useCallback(W=>{if(!(!l||!n))try{const O="urn:x-cast:com.lambdallmproxy.chat",Y={type:"SCROLL_UPDATE",position:W};l.sendMessage(O,Y,()=>console.log("Scroll position sent:",W),X=>console.error("Error sending scroll:",X))}catch(O){console.error("Error in sendScrollPosition:",O)}},[l,n]),A=_.useCallback((W,O=0)=>{if(!l||!n){console.log("No active cast session for video");return}try{const Y="urn:x-cast:com.lambdallmproxy.video",X={type:"VIDEO_COMMAND",command:"load",data:{videoId:W.videoId,url:W.url,title:W.title,channel:W.channel,thumbnail:W.thumbnail,duration:W.duration,position:O},timestamp:Date.now()};l.sendMessage(Y,X,()=>{console.log("Video cast command sent:",W.title),p(!0)},q=>console.error("Error casting video:",q))}catch(Y){console.error("Error in castVideo:",Y)}},[l,n]),D=_.useCallback((W,O={})=>{if(!(!l||!n))try{const Y="urn:x-cast:com.lambdallmproxy.video",X={type:"VIDEO_COMMAND",command:W,data:O,timestamp:Date.now()};l.sendMessage(Y,X,()=>console.log("Video command sent:",W),q=>console.error("Error sending video command:",q)),W==="stop"&&p(!1)}catch(Y){console.error("Error in sendVideoCommand:",Y)}},[l,n]),B=_.useCallback(W=>{if(!l||!n){console.log("No active cast session for snippet");return}try{const O="urn:x-cast:com.lambdallmproxy.snippet",Y={type:"SNIPPET_COMMAND",command:"load",data:{id:W.id,content:W.content,title:W.title||"Untitled Snippet",tags:W.tags||[],created:W.created,modified:W.modified},timestamp:Date.now()};l.sendMessage(O,Y,()=>{console.log("Snippet cast successfully:",W.title),m(!0)},X=>console.error("Error casting snippet:",X))}catch(O){console.error("Error in castSnippet:",O)}},[l,n]),R=_.useCallback(W=>{if(!(!l||!n||!f))try{const O="urn:x-cast:com.lambdallmproxy.snippet",Y={type:"SNIPPET_COMMAND",command:"scroll",data:{position:W},timestamp:Date.now()};l.sendMessage(O,Y,()=>console.log("Snippet scroll position sent:",W),X=>console.error("Error sending snippet scroll:",X))}catch(O){console.error("Error in sendSnippetScrollPosition:",O)}},[l,n,f]),M=_.useCallback(()=>{if(!(!l||!n||!f))try{const W="urn:x-cast:com.lambdallmproxy.snippet",O={type:"SNIPPET_COMMAND",command:"stop",data:{},timestamp:Date.now()};l.sendMessage(W,O,()=>{console.log("Snippet cast stopped"),m(!1)},Y=>console.error("Error stopping snippet cast:",Y))}catch(W){console.error("Error in stopSnippetCast:",W)}},[l,n,f]);_.useEffect(()=>{if(document.getElementById("cast-sdk")){window.chrome?.cast&&x();return}const W=document.createElement("script");return W.id="cast-sdk",W.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",W.async=!0,W.onload=()=>{console.log("Cast SDK loaded");const O=setInterval(()=>{window.chrome?.cast&&(clearInterval(O),x())},100);setTimeout(()=>clearInterval(O),1e4)},document.head.appendChild(W),()=>{}},[x]);const $={isAvailable:t,isConnected:n,deviceName:i,initializeCast:x,requestSession:v,endSession:T,sendMessages:k,sendScrollPosition:C,castVideo:A,sendVideoCommand:D,isCastingVideo:h,castSnippet:B,sendSnippetScrollPosition:R,stopSnippetCast:M,isCastingSnippet:f};return u.jsx(j3.Provider,{value:$,children:e})},B3=_.createContext(void 0),dU=()=>{const e=_.useContext(B3);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},hU=({children:e})=>{const[t,r]=_.useState(null),[n,a]=_.useState(!1),[i,s]=_.useState(null),[l,d]=_.useState("unknown");_.useEffect(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(b=>{d(b.state),b.addEventListener("change",()=>{d(b.state)})}).catch(()=>{d("unknown")})},[]);const h=async(b,x)=>{try{const v=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b}&lon=${x}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"LLMProxyChat/1.0"}});if(!v.ok){console.warn("Reverse geocoding failed:",v.statusText);return}const T=await v.json();if(T.address)return{city:T.address.city||T.address.town||T.address.village,state:T.address.state,country:T.address.country,postalCode:T.address.postcode,formatted:T.display_name}}catch(v){console.warn("Error reverse geocoding:",v)}},p=_.useCallback(async()=>{if(!navigator.geolocation){s("Geolocation is not supported by your browser");return}a(!0),s(null);try{const b=await new Promise((A,D)=>{navigator.geolocation.getCurrentPosition(A,D,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:x,longitude:v,accuracy:T}=b.coords,k=await h(x,v),C={latitude:x,longitude:v,accuracy:T,address:k,timestamp:Date.now()};r(C),d("granted"),localStorage.setItem("user_location",JSON.stringify(C)),console.log("Location updated:",C)}catch(b){let x="Failed to get location";b.code===1?(x="Location permission denied",d("denied")):b.code===2?x="Location unavailable":b.code===3&&(x="Location request timed out"),s(x),console.error("Geolocation error:",b)}finally{a(!1)}},[]),f=_.useCallback(()=>{r(null),s(null),localStorage.removeItem("user_location")},[]);_.useEffect(()=>{const b=localStorage.getItem("user_location");if(b)try{const x=JSON.parse(b);Date.now()-(x.timestamp||0)<1440*60*1e3?r(x):localStorage.removeItem("user_location")}catch(x){console.error("Error loading stored location:",x),localStorage.removeItem("user_location")}},[]);const m={location:t,isLoading:n,error:i,permissionState:l,requestLocation:p,clearLocation:f};return u.jsx(B3.Provider,{value:m,children:e})},pU={version:"1.0.0",isEnabled:!1,currentProvider:"llm",currentVoice:null,rate:1,pitch:1,volume:1,autoSummarize:!0,elevenlabsApiKey:""};class Nu{name="llm";provider=null;audio=null;currentOnEnd=null;constructor(t){this.provider=t||null}setProvider(t){this.provider=t}async isAvailable(){return this.provider?["openai","gemini","groq","together"].includes(this.provider.type):!1}async getVoices(){if(!this.provider)return[];switch(this.provider.type){case"openai":return[{id:"alloy",name:"Alloy",language:"en",gender:"neutral",provider:"openai"},{id:"echo",name:"Echo",language:"en",gender:"male",provider:"openai"},{id:"fable",name:"Fable",language:"en",gender:"neutral",provider:"openai"},{id:"onyx",name:"Onyx",language:"en",gender:"male",provider:"openai"},{id:"nova",name:"Nova",language:"en",gender:"female",provider:"openai"},{id:"shimmer",name:"Shimmer",language:"en",gender:"female",provider:"openai"}];case"gemini":return[{id:"en-US-Neural2-A",name:"Neural2 A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-C",name:"Neural2 C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-D",name:"Neural2 D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-E",name:"Neural2 E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-F",name:"Neural2 F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-G",name:"Neural2 G (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-H",name:"Neural2 H (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Neural2-I",name:"Neural2 I (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Neural2-J",name:"Neural2 J (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-A",name:"WaveNet A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-B",name:"WaveNet B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-C",name:"WaveNet C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-D",name:"WaveNet D (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Wavenet-E",name:"WaveNet E (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Wavenet-F",name:"WaveNet F (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-A",name:"Standard A (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-B",name:"Standard B (Male)",language:"en-US",gender:"male",provider:"google"},{id:"en-US-Standard-C",name:"Standard C (Female)",language:"en-US",gender:"female",provider:"google"},{id:"en-US-Standard-D",name:"Standard D (Male)",language:"en-US",gender:"male",provider:"google"}];case"groq":return[{id:"Aaliyah-PlayAI",name:"Aaliyah",language:"en-US",gender:"female",provider:"groq"},{id:"Adelaide-PlayAI",name:"Adelaide",language:"en-US",gender:"female",provider:"groq"},{id:"Angelo-PlayAI",name:"Angelo",language:"en-US",gender:"male",provider:"groq"},{id:"Arista-PlayAI",name:"Arista",language:"en-US",gender:"female",provider:"groq"},{id:"Atlas-PlayAI",name:"Atlas",language:"en-US",gender:"male",provider:"groq"},{id:"Basil-PlayAI",name:"Basil",language:"en-US",gender:"male",provider:"groq"},{id:"Briggs-PlayAI",name:"Briggs",language:"en-US",gender:"male",provider:"groq"},{id:"Calum-PlayAI",name:"Calum",language:"en-US",gender:"male",provider:"groq"},{id:"Celeste-PlayAI",name:"Celeste",language:"en-US",gender:"female",provider:"groq"},{id:"Cheyenne-PlayAI",name:"Cheyenne",language:"en-US",gender:"female",provider:"groq"},{id:"Chip-PlayAI",name:"Chip",language:"en-US",gender:"male",provider:"groq"},{id:"Cillian-PlayAI",name:"Cillian",language:"en-US",gender:"male",provider:"groq"},{id:"Deedee-PlayAI",name:"Deedee",language:"en-US",gender:"female",provider:"groq"},{id:"Eleanor-PlayAI",name:"Eleanor",language:"en-US",gender:"female",provider:"groq"},{id:"Fritz-PlayAI",name:"Fritz",language:"en-US",gender:"male",provider:"groq"},{id:"Gail-PlayAI",name:"Gail",language:"en-US",gender:"female",provider:"groq"},{id:"Indigo-PlayAI",name:"Indigo",language:"en-US",gender:"neutral",provider:"groq"},{id:"Jennifer-PlayAI",name:"Jennifer",language:"en-US",gender:"female",provider:"groq"},{id:"Judy-PlayAI",name:"Judy",language:"en-US",gender:"female",provider:"groq"},{id:"Mamaw-PlayAI",name:"Mamaw",language:"en-US",gender:"female",provider:"groq"},{id:"Mason-PlayAI",name:"Mason",language:"en-US",gender:"male",provider:"groq"},{id:"Mikail-PlayAI",name:"Mikail",language:"en-US",gender:"male",provider:"groq"},{id:"Mitch-PlayAI",name:"Mitch",language:"en-US",gender:"male",provider:"groq"},{id:"Nia-PlayAI",name:"Nia",language:"en-US",gender:"female",provider:"groq"},{id:"Quinn-PlayAI",name:"Quinn",language:"en-US",gender:"neutral",provider:"groq"},{id:"Ruby-PlayAI",name:"Ruby",language:"en-US",gender:"female",provider:"groq"},{id:"Thunder-PlayAI",name:"Thunder",language:"en-US",gender:"male",provider:"groq"}];case"together":return[];default:return[]}}async speak(t,r={}){if(!this.provider)throw new Error("No provider configured for TTS");console.log("LLMProviderTTSProvider: speak() called, stopping any existing audio"),this.stop();const n=await this.speakViaProxy(t,r);return this.playAudio(n,r)}async speakViaProxy(t,r){const n=await this.getApiBase();let a=this.provider.type;a==="gemini"?a="google":a==="groq"&&(a="groq");const i=localStorage.getItem("google_access_token");if(!i)throw new Error("Authentication required. Please sign in.");const s=await fetch(`${n}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:a,text:t,voice:r.voice,rate:r.rate||1,pitch:r.pitch||1,model:a==="openai"?"tts-1":void 0,apiKey:this.provider.apiKey})});if(!s.ok){const l=await s.text();throw new Error(`TTS Proxy API error: ${s.status} - ${l}`)}return await s.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(r,{method:"OPTIONS",signal:AbortSignal.timeout(500)})).status!==void 0)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const s=new Error("Audio playback failed");r.onError?.(s),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(s)},this.audio.play().catch(s=>{const l=new Error(`Failed to start audio playback: ${s.message}`);r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)})})}stop(){if(console.log("LLMProviderTTSProvider: stop() called",{hasAudio:!!this.audio}),this.audio){console.log("LLMProviderTTSProvider: Stopping audio",{paused:this.audio.paused,currentTime:this.audio.currentTime,duration:this.audio.duration,src:this.audio.src?.substring(0,50)}),this.audio.onended=null,this.audio.onerror=null,this.audio.oncanplaythrough=null,this.audio.pause(),this.audio.currentTime=0;const t=this.audio;this.audio=null,t.src&&t.src.startsWith("blob:")&&(console.log("LLMProviderTTSProvider: Revoking blob URL"),URL.revokeObjectURL(t.src),t.src="");try{t.remove()}catch(r){console.warn("Failed to remove audio element:",r)}if(console.log("LLMProviderTTSProvider: Audio stopped and cleaned up"),this.currentOnEnd){console.log("LLMProviderTTSProvider: Triggering onEnd callback");const r=this.currentOnEnd;this.currentOnEnd=null,r()}}else console.log("LLMProviderTTSProvider: No audio to stop")}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop()}}class oC{name="elevenlabs";apiKey;audio=null;cachedVoices=null;currentOnEnd=null;constructor(t){this.apiKey=t}setApiKey(t){this.apiKey=t,this.cachedVoices=null}async isAvailable(){return!!this.apiKey}async getVoices(){if(this.cachedVoices)return this.cachedVoices;if(!this.apiKey)return[];try{const t=await fetch("https://api.elevenlabs.io/v1/voices",{headers:{"xi-api-key":this.apiKey,"Content-Type":"application/json"}});if(!t.ok)return console.error("Failed to fetch ElevenLabs voices:",t.status,t.statusText),[];const r=await t.json();return this.cachedVoices=r.voices.map(n=>({id:n.voice_id,name:n.name,language:n.labels?.language||"en",gender:this.detectGender(n.name,n.labels),provider:"elevenlabs"})),this.cachedVoices}catch(t){return console.error("Failed to fetch ElevenLabs voices:",t),[]}}detectGender(t,r){if(r?.gender)return r.gender.toLowerCase();const n=t.toLowerCase();return n.includes("bella")||n.includes("elli")||n.includes("rachel")||n.includes("domi")||n.includes("sarah")||n.includes("nicole")||n.includes("female")?"female":n.includes("adam")||n.includes("antoni")||n.includes("arnold")||n.includes("josh")||n.includes("sam")||n.includes("male")?"male":"neutral"}async speak(t,r={}){if(!this.apiKey)throw new Error("ElevenLabs API key not configured");const n=await this.getVoices();let a=r.voice;if(!a||!n.find(i=>i.id===a)){if(n.length===0)throw new Error("No ElevenLabs voices available");a=n[0].id}try{const i=await this.speakViaProxy(t,a,r);return this.playAudio(i,r)}catch(i){const s=i instanceof Error?i.message:"Unknown error";throw new Error(`ElevenLabs TTS failed: ${s}`)}}async speakViaProxy(t,r,n){const a=await this.getApiBase(),i=localStorage.getItem("google_id_token");if(!i)throw new Error("Authentication required. Please sign in.");const s=await fetch(`${a}/tts`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({provider:"elevenlabs",text:t,voice:r,rate:n.rate||1,apiKey:this.apiKey})});if(!s.ok){const l=await s.text();throw new Error(`TTS Proxy API error: ${s.status} - ${l}`)}return await s.blob()}async getApiBase(){const t=window.location.hostname;if(t==="localhost"||t==="127.0.0.1"){const r="http://localhost:3000";try{if((await fetch(r,{method:"OPTIONS",signal:AbortSignal.timeout(500)})).status!==void 0)return console.log(" Using local Lambda server for TTS"),r}catch{}}return"https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws"}async playAudio(t,r){const n=URL.createObjectURL(t);return this.audio=new Audio(n),this.audio.volume=r.volume||1,this.currentOnEnd=r.onEnd||null,new Promise((a,i)=>{if(!this.audio){i(new Error("Audio element not available"));return}this.audio.onplay=()=>r.onStart?.(),this.audio.onended=()=>{r.onEnd?.(),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,a()},this.audio.onerror=()=>{const s=new Error("Audio playback failed");r.onError?.(s),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(s)},this.audio.play().catch(s=>{const l=new Error(`Failed to start audio playback: ${s.message}`);r.onError?.(l),URL.revokeObjectURL(n),this.audio=null,this.currentOnEnd=null,i(l)})})}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src&&this.audio.src.startsWith("blob:")&&URL.revokeObjectURL(this.audio.src),this.audio=null,this.currentOnEnd&&(console.log("ElevenLabsProvider: stop() triggering onEnd callback"),this.currentOnEnd(),this.currentOnEnd=null))}pause(){this.audio&&!this.audio.paused&&this.audio.pause()}resume(){this.audio&&this.audio.paused&&this.audio.play().catch(console.error)}cleanup(){this.stop(),this.cachedVoices=null}}function Gu(e){let t=e;return t=t.replace(/#{1,6}\s/g,""),t=t.replace(/\*\*\*(.*?)\*\*\*/g,"$1"),t=t.replace(/\*\*(.*?)\*\*/g,"$1"),t=t.replace(/\*(.*?)\*/g,"$1"),t=t.replace(/`{1,3}[^`]*`{1,3}/g,"code"),t=t.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1"),t=t.replace(/<[^>]+>/g,""),t=t.replace(/&/g," and "),t=t.replace(/@/g," at "),t=t.replace(/#/g," hashtag "),t=t.replace(/\$/g," dollar "),t=t.replace(/%/g," percent "),t=t.replace(/[^\w\s.,!?;:'"()[\]{}\-]/g," "),t=t.replace(/\s+/g," ").trim(),t=t.replace(/\. /g,". ... "),t=t.replace(/, /g,", .. "),t=t.replace(/: /g,": .. "),t=t.replace(/; /g,"; .. "),t}function gU(e){if(typeof e=="string")return Gu(e);if(Array.isArray(e)){const t=e.filter(r=>r.type==="text").map(r=>r.text||r.content||"");return Gu(t.join(" "))}if(e&&typeof e=="object"){const t=e.text||e.content||"";return Gu(String(t))}return""}function Kv(e,t=500){if(e.length<=t)return e;const r=e.substring(0,t),n=Math.max(r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));return n>t*.7?r.substring(0,n+1)+" ... Content truncated for speech.":r+"... Content truncated for speech."}function fU(e,t,r=500){return t?e.length>r:!1}function F3(e){const t=e.toLowerCase();return t.includes("female")||t.includes("woman")||t.includes("alice")||t.includes("emma")||t.includes("nova")||t.includes("shimmer")||t.includes("samantha")||t.includes("victoria")||t.includes("alloy")?"female":t.includes("male")||t.includes("man")||t.includes("alex")||t.includes("daniel")||t.includes("onyx")||t.includes("echo")||t.includes("thomas")||t.includes("david")?"male":"neutral"}class mU{name="Browser Speech";synth;utterance=null;isStoppedIntentionally=!1;currentOnEndCallback=null;pollingInterval=null;constructor(){this.synth=window.speechSynthesis}async isAvailable(){return"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window}async getVoices(){return await this.waitForVoices(),this.synth.getVoices().map(r=>({id:r.voiceURI,name:r.name,language:r.lang,gender:F3(r.name),provider:"browser"}))}waitForVoices(){return new Promise(t=>{if(this.synth.getVoices().length>0){t();return}const n=()=>{this.synth.removeEventListener("voiceschanged",n),t()};this.synth.addEventListener("voiceschanged",n),setTimeout(()=>{this.synth.removeEventListener("voiceschanged",n),t()},1e3)})}async speak(t,r={}){if(!t||t.trim().length===0){const i=new Error("Cannot speak empty text");throw r.onError?.(i),i}this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null;let n=Gu(t);n=Kv(n,500);const a=(i,s)=>new Promise((l,d)=>{if(!i||i.trim().length===0){const p=new Error("Cannot speak empty text after preprocessing");return r.onError?.(p),d(p)}this.utterance=new SpeechSynthesisUtterance(i);const h=this.utterance;if(h.rate=r.rate||1,h.pitch=r.pitch||1,h.volume=r.volume||1,r.voice){const p=this.synth.getVoices();h.voice=p.find(f=>f.voiceURI===r.voice)||null}this.utterance.onstart=()=>r.onStart?.(),this.currentOnEndCallback=r.onEnd||null,this.utterance.onend=()=>{this.stopPolling(),r.onEnd?.(),this.currentOnEndCallback=null,this.utterance=null,l()},this.utterance.onerror=p=>{if(p.error==="synthesis-failed"&&s){const m=Kv(i,200);return a(m,!1).then(l).catch(d)}const f=new Error(`Speech synthesis error: ${p.error}`);r.onError?.(f),this.currentOnEndCallback=null,this.utterance=null,d(f)},r.onBoundary&&(this.utterance.onboundary=p=>{const f=i.substring(p.charIndex,p.charIndex+p.charLength);r.onBoundary(f,p.charIndex)});try{this.synth.speak(this.utterance),this.startPolling()}catch(p){const f=new Error(`Failed to start speech: ${p}`);r.onError?.(f),this.utterance=null,d(f)}});return a(n,!0)}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval(()=>{if(this.utterance&&!this.synth.speaking&&!this.synth.pending&&(console.log("BrowserSpeechProvider: Polling detected speech stopped, triggering onEnd"),this.stopPolling(),this.currentOnEndCallback)){const t=this.currentOnEndCallback;this.currentOnEndCallback=null,this.utterance=null,t()}},500)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}stop(){if(console.log("BrowserSpeechProvider: stop() called",{hasUtterance:!!this.utterance,hasCallback:!!this.currentOnEndCallback,isStoppedIntentionally:this.isStoppedIntentionally}),this.stopPolling(),this.utterance||this.currentOnEndCallback){this.isStoppedIntentionally=!0;const t=this.currentOnEndCallback;this.synth.pause(),this.synth.cancel(),setTimeout(()=>{this.synth.speaking&&this.synth.cancel()},0),this.utterance=null,this.currentOnEndCallback=null,t&&(console.log("BrowserSpeechProvider: Manually calling onEnd callback"),setTimeout(()=>t(),0))}}pause(){this.synth.speaking&&!this.synth.paused&&this.synth.pause()}resume(){this.synth.paused&&this.synth.resume()}cleanup(){this.stopPolling(),this.stop(),this.isStoppedIntentionally=!1,this.currentOnEndCallback=null}}class yU{name="speakjs";speech=null;isPlaying=!1;isInitialized=!1;async initialize(){if(!this.isInitialized)try{const t=(await _t(async()=>{const{default:r}=await import("./speak-tts-BoXWZhwm.js").then(n=>n.s);return{default:r}},[])).default;this.speech=new t,await this.speech.init({volume:1,lang:"en-US",rate:1,pitch:1,splitSentences:!0}),this.isInitialized=!0,console.log(" speak.js: Initialized successfully")}catch(t){console.warn(" speak.js: Failed to initialize, will use silent fallback:",t)}}async isAvailable(){return!0}async getVoices(){if(await this.initialize(),this.speech&&this.isInitialized)try{return this.speech.voices().map(r=>({id:r.voiceURI||r.name,name:r.name,language:r.lang,gender:F3(r.name),provider:"speakjs"}))}catch(t){console.warn(" speak.js: Failed to get voices:",t)}return[{id:"speakjs-en",name:"speak.js English",language:"en-US",gender:"neutral",provider:"speakjs"}]}async speak(t,r={}){return this.stop(),await this.initialize(),this.speech&&this.isInitialized?new Promise((n,a)=>{this.isPlaying=!0,r.onStart?.(),this.speech.speak({text:t,queue:!1,listeners:{onstart:()=>{console.log(" speak.js: Started speaking")},onend:()=>{console.log(" speak.js: Finished speaking"),this.isPlaying=!1,r.onEnd?.(),n()},onerror:i=>{console.error(" speak.js: Error:",i),this.isPlaying=!1,r.onError?.(i),a(i)}}}).catch(i=>{console.error(" speak.js: speak() failed:",i),this.isPlaying=!1,r.onError?.(i),a(i)})}):(console.warn(" speak.js: Library not available, using silent fallback"),this.silentFallback(t,r))}async silentFallback(t,r={}){return new Promise(n=>{r.onStart?.(),this.isPlaying=!0;const a=Math.min(t.length*80,1e4);setTimeout(()=>{this.isPlaying&&(r.onEnd?.(),this.isPlaying=!1,n())},a)})}stop(){if(this.isPlaying=!1,this.speech&&this.isInitialized)try{this.speech.cancel()}catch(t){console.warn(" speak.js: Error stopping speech:",t)}}pause(){if(this.speech&&this.isInitialized)try{this.speech.pause()}catch{console.warn(" speak.js: Pause not supported")}}resume(){if(this.speech&&this.isInitialized)try{this.speech.resume()}catch{console.warn(" speak.js: Resume not supported")}}cleanup(){this.stop(),this.speech=null,this.isInitialized=!1}}class bU{providers=new Map;llmProviders=[];async initializeProviders(t,r){this.llmProviders=t,this.providers.clear(),await this.initializeLLMProviders();const n=this.getBestLLMProviderForTTS();if(n){const s=new Nu(n);await s.isAvailable()&&this.providers.set("llm",s)}if(r){const s=new oC(r);await s.isAvailable()&&this.providers.set("elevenlabs",s)}const a=new mU;await a.isAvailable()&&this.providers.set("browser",a);const i=new yU;await i.isAvailable()&&this.providers.set("speakjs",i)}async initializeLLMProviders(){const t=this.llmProviders.find(i=>i.type==="openai"&&i.enabled!==!1);if(t){const i=new Nu(t);await i.isAvailable()&&this.providers.set("openai-tts",i)}const r=this.llmProviders.find(i=>i.type==="groq"&&i.enabled!==!1);if(r){const i=new Nu(r);await i.isAvailable()&&this.providers.set("groq-tts",i)}const n=this.llmProviders.find(i=>i.type==="gemini"&&i.enabled!==!1);if(n){const i=new Nu(n);await i.isAvailable()&&this.providers.set("gemini-tts",i)}const a=this.llmProviders.find(i=>i.type==="together"&&i.enabled!==!1);if(a){const i=new Nu(a);await i.isAvailable()&&this.providers.set("together-tts",i)}}getBestLLMProviderForTTS(){const t=["openai","gemini","groq","together"];for(const r of t){const n=this.llmProviders.find(a=>a.type===r&&a.enabled!==!1);if(n)return n}return null}getProvider(t){return this.providers.get(t)}getAvailableProviders(){const t=Array.from(this.providers.keys());t.includes("elevenlabs")||t.push("elevenlabs");const r=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];return t.sort((n,a)=>{const i=r.indexOf(n),s=r.indexOf(a);return(i===-1?999:i)-(s===-1?999:s)})}getAvailableLLMProviders(){return this.llmProviders.filter(t=>t.enabled!==!1&&["openai","gemini","groq","together"].includes(t.type)).map(t=>({type:t.type,name:this.getLLMProviderDisplayName(t.type)}))}getLLMProviderByType(t){return this.llmProviders.find(r=>r.type===t&&r.enabled!==!1)||null}getLLMProviderDisplayName(t){return{openai:"OpenAI",gemini:"Gemini",groq:"Groq",together:"Together AI"}[t]||t}getDefaultProvider(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t){const n=this.providers.get(r);if(n)return n}return null}getDefaultProviderType(){const t=["openai-tts","groq-tts","gemini-tts","together-tts","llm","elevenlabs","browser","speakjs"];for(const r of t)if(this.providers.has(r))return r;return null}async updateLLMProviders(t){this.llmProviders=t;const r=this.getBestLLMProviderForTTS();if(r){const n=this.providers.get("llm");if(n)n.setProvider(r);else{const a=new Nu(r);await a.isAvailable()&&this.providers.set("llm",a)}}else this.providers.delete("llm")}async updateElevenLabsApiKey(t){if(t){const r=this.providers.get("elevenlabs");if(r)r.setApiKey(t);else{const n=new oC(t);await n.isAvailable()&&this.providers.set("elevenlabs",n)}}else this.providers.delete("elevenlabs")}cleanup(){this.providers.forEach(t=>{if(t&&typeof t.stop=="function")try{t.stop()}catch(r){console.warn("Error stopping TTS provider:",r)}if(t&&typeof t.cleanup=="function")try{t.cleanup()}catch(r){console.warn("Error cleaning up TTS provider:",r)}}),this.providers.clear()}getCurrentLLMProviderInfo(){const t=this.getBestLLMProviderForTTS();return t?{name:{openai:"OpenAI",gemini:"Google Gemini",groq:"Groq",together:"Together AI",atlascloud:"Atlas Cloud"}[t.type]||t.type,type:t.type}:null}}class xU{async generateSpeakableSummary(t,r){if(t.length<500)return Gu(t);const n=`Convert the following text into a concise, natural-sounding spoken summary. 
The summary should:
- Be 2-3 sentences maximum
- Sound natural when read aloud
- Capture the key points
- Avoid technical jargon or formatting
- Use conversational language

Text to summarize:
${t}

Speakable summary:`;try{const a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are a helpful assistant that creates concise, natural-sounding spoken summaries."},{role:"user",content:n}],provider:r.type,apiKey:r.apiKey,maxTokens:200,temperature:.7,ttsMode:!0})});if(!a.ok)throw new Error(`Summary API error: ${a.status}`);const i=await a.json();let s="";if(i.choices&&i.choices[0]?.message?.content)s=i.choices[0].message.content;else if(i.content)s=i.content;else throw new Error("No summary content in response");return Gu(s)}catch(a){return console.error("Failed to generate speakable summary:",a),Kv(t,500)}}shouldSummarize(t,r,n=500){return r?t.length>n:!1}}const z3=_.createContext(void 0),vU=({children:e})=>{const{settings:t}=Al(),{ttsCapabilities:r}=I0(),[n,a]=Ai("tts_settings",pU),[i]=_.useState(()=>new bU),[s]=_.useState(()=>new xU),[l,d]=_.useState(null),h=_.useRef(!1),[p,f]=_.useState({isEnabled:n.isEnabled,isPlaying:!1,currentText:null,currentProvider:n.currentProvider,currentVoice:n.currentVoice,rate:n.rate,pitch:n.pitch,volume:n.volume,providers:[],voices:[],autoSummarize:n.autoSummarize,elevenlabsApiKey:n.elevenlabsApiKey});_.useEffect(()=>((async()=>{try{i.cleanup();const N=[...t.providers];r?.groq&&!N.some(ie=>ie.type==="groq")&&(console.log(" TTS: Adding Groq TTS from backend"),N.push({id:"backend-groq",type:"groq",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.openai&&!N.some(ie=>ie.type==="openai")&&(console.log(" TTS: Adding OpenAI TTS from backend"),N.push({id:"backend-openai",type:"openai",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.gemini&&!N.some(ie=>ie.type==="gemini")&&(console.log(" TTS: Adding Gemini TTS from backend"),N.push({id:"backend-gemini",type:"gemini",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),r?.together&&!N.some(ie=>ie.type==="together")&&(console.log(" TTS: Adding Together TTS from backend"),N.push({id:"backend-together",type:"together",apiKey:"[BACKEND]",apiEndpoint:"",enabled:!0})),await i.initializeProviders(N,n.elevenlabsApiKey);const U=i.getAvailableProviders();console.log(" TTS: Available providers:",U);let j=n.currentProvider;U.includes(j)||(j=i.getDefaultProviderType()||"speakjs");const K=i.getProvider(j),Q=K?await K.getVoices():[];f(ie=>({...ie,currentProvider:j,providers:[],voices:Q})),j!==n.currentProvider&&a(ie=>({...ie,currentProvider:j}))}catch(N){console.error("Failed to initialize TTS providers:",N)}})(),()=>{i.cleanup()}),[t.providers,n.elevenlabsApiKey,r]),_.useEffect(()=>{(async()=>{const N=i.getProvider(n.currentProvider);if(N)try{const U=await N.getVoices();f(j=>({...j,voices:U,currentVoice:U.find(K=>K.id===j.currentVoice)?j.currentVoice:null}))}catch(U){console.error("Failed to load voices:",U),f(j=>({...j,voices:[]}))}})()},[n.currentProvider]);const m=_.useCallback(async(q,N={})=>{if(!p.isEnabled)throw new Error("TTS is disabled");console.log("TTSContext.speak() - Resetting isStoppingIntentionally flag (starting new speech)"),h.current=!1;let U=gU(q);if(N.shouldSummarize||fU(U,p.autoSummarize))try{const H=t.providers.find(I=>I.enabled!==!1&&I.apiKey);H&&(U=await s.generateSpeakableSummary(U,H))}catch(H){console.warn("Failed to generate summary, using original text:",H)}f(H=>({...H,isPlaying:!0,currentText:U})),l&&(clearTimeout(l),d(null));const j=setTimeout(()=>{console.log("TTSContext: Fallback timeout triggered - forcing isPlaying to false"),f(H=>({...H,isPlaying:!1,currentText:null})),d(null)},3e4);d(j);const Q=(H=>H==="browser"?["browser","speakjs"]:H==="speakjs"?["speakjs"]:[H])(p.currentProvider),ie={voice:p.currentVoice||void 0,rate:p.rate,pitch:p.pitch,volume:p.volume,onStart:()=>{N.onStart?.()},onEnd:()=>{if(console.log("TTSContext speak onEnd callback - checking if intentional stop:",h.current),h.current){console.log("TTSContext speak onEnd - INTENTIONAL STOP, skipping onEnd callback and ensuring clean state"),l&&(clearTimeout(l),d(null)),f(H=>({...H,isPlaying:!1,currentText:null}));return}console.log("TTSContext speak onEnd callback - setting isPlaying to false"),l&&(clearTimeout(l),d(null)),f(H=>(console.log("TTSContext speak onEnd - prev state:",{isPlaying:H.isPlaying}),{...H,isPlaying:!1,currentText:null})),N.onEnd?.()},onError:H=>{f(I=>({...I,isPlaying:!1,currentText:null})),N.onError?.(H)},onBoundary:N.onBoundary,...N};let G=null,F=null;for(const H of Q){const I=i.getProvider(H);if(I)try{H!==p.currentProvider?console.warn(`TTS: ${p.currentProvider} failed, falling back to ${H}`):console.log(`TTS: Using primary provider ${H}`),await I.speak(U,ie),F=H,console.log(`TTS: Successfully used provider ${H}`);break}catch(ne){console.warn(`TTS provider ${H} failed:`,ne),G=ne;continue}}if(!F)throw f(H=>({...H,isPlaying:!1,currentText:null})),G||new Error("All TTS providers failed")},[p,t.providers,i,s]),b=_.useCallback(()=>{console.log("TTSContext.stop() called - INTENTIONAL STOP"),h.current=!0,l&&(clearTimeout(l),d(null)),typeof window<"u"&&window.speechSynthesis&&(console.log("TTSContext.stop() - Stopping speechSynthesis"),window.speechSynthesis.cancel());const q=document.querySelectorAll("audio");console.log("TTSContext.stop() - Found",q.length,"audio elements"),q.forEach(N=>{N.paused||(console.log("TTSContext.stop() - Force stopping audio element"),N.pause(),N.currentTime=0,N.src&&N.src.startsWith("blob:")&&(URL.revokeObjectURL(N.src),N.src=""))}),f(N=>{console.log("TTSContext.stop() - stopping, prev state:",{isPlaying:N.isPlaying,currentProvider:N.currentProvider});const U=i.getProvider(N.currentProvider);if(U){console.log("TTSContext.stop() - calling provider.stop()");try{U.stop()}catch(j){console.error("TTSContext.stop() - Error calling provider.stop():",j)}}else console.warn("TTSContext.stop() - no provider found for:",N.currentProvider);return{...N,isPlaying:!1,currentText:null}})},[i,l]),x=_.useCallback(()=>{f(q=>{const N=i.getProvider(q.currentProvider);return N&&N.pause&&N.pause(),q})},[i]),v=_.useCallback(()=>{f(q=>{const N=i.getProvider(q.currentProvider);return N&&N.resume&&N.resume(),q})},[i]),T=_.useCallback(q=>{f(N=>({...N,isEnabled:q})),a(N=>({...N,isEnabled:q}))},[a]),k=_.useCallback(async q=>{const N=i.getProvider(q);if(N){b();try{const U=await N.getVoices();f(j=>({...j,currentProvider:q,voices:U,currentVoice:null})),a(j=>({...j,currentProvider:q,currentVoice:null}))}catch(U){console.error("Failed to switch provider:",U)}}},[i,b,a]),C=_.useCallback(q=>{f(N=>({...N,currentVoice:q})),a(N=>({...N,currentVoice:q}))},[a]),A=_.useCallback(q=>{f(N=>({...N,rate:q})),a(N=>({...N,rate:q}))},[a]),D=_.useCallback(q=>{f(N=>({...N,pitch:q})),a(N=>({...N,pitch:q}))},[a]),B=_.useCallback(q=>{f(N=>({...N,volume:q})),a(N=>({...N,volume:q}))},[a]),R=_.useCallback(q=>{f(N=>({...N,autoSummarize:q})),a(N=>({...N,autoSummarize:q}))},[a]),M=_.useCallback(async q=>{f(U=>({...U,elevenlabsApiKey:q})),a(U=>({...U,elevenlabsApiKey:q})),await i.updateElevenLabsApiKey(q);const N=i.getAvailableProviders();console.log("Available TTS providers after ElevenLabs update:",N)},[a,i]),$=_.useCallback(()=>i.getAvailableProviders(),[i]),W=_.useCallback(async q=>{const N=i.getProvider(q);return N?await N.getVoices():[]},[i]),O=_.useCallback(async(q,N)=>m(q,{shouldSummarize:N}),[m]),Y=_.useCallback(async(q,N)=>m(q,{shouldSummarize:N}),[m]),X={state:p,speak:m,stop:b,pause:x,resume:v,setEnabled:T,setProvider:k,setVoice:C,setRate:A,setPitch:D,setVolume:B,setAutoSummarize:R,setElevenLabsApiKey:M,getAvailableProviders:$,getVoicesForProvider:W,speakResponse:O,speakSnippet:Y};return u.jsx(z3.Provider,{value:X,children:e})},U3=()=>{const e=_.useContext(z3);if(!e)throw new Error("useTTS must be used within a TTSProvider");return e},wU="ChatHistoryDB",SU=1,zn="chats";class TU{db=null;initPromise=null;async init(){return this.db?this.db:this.initPromise?this.initPromise:(this.initPromise=new Promise((t,r)=>{const n=indexedDB.open(wU,SU);n.onerror=()=>{console.error("Failed to open IndexedDB:",n.error),r(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("IndexedDB initialized successfully"),t(this.db)},n.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(zn)||(i.createObjectStore(zn,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1}),console.log("Created chat history object store"))}}),this.initPromise)}async saveChat(t,r,n,a){try{const l=(await this.init()).transaction([zn],"readwrite").objectStore(zn),d={id:t,messages:r,timestamp:Date.now(),title:n,...a?.systemPrompt&&{systemPrompt:a.systemPrompt},...a?.planningQuery&&{planningQuery:a.planningQuery},...a?.generatedSystemPrompt&&{generatedSystemPrompt:a.generatedSystemPrompt},...a?.generatedUserQuery&&{generatedUserQuery:a.generatedUserQuery},...a?.selectedSnippetIds&&{selectedSnippetIds:a.selectedSnippetIds},...a?.todosState&&{todosState:a.todosState}};await new Promise((h,p)=>{const f=l.put(d);f.onsuccess=()=>h(),f.onerror=()=>p(f.error)}),console.log(`Saved chat ${t} to IndexedDB with planning/todos metadata`)}catch(i){throw console.error("Error saving chat to IndexedDB:",i),i}}async getChat(t){try{const a=(await this.init()).transaction([zn],"readonly").objectStore(zn);return new Promise((i,s)=>{const l=a.get(t);l.onsuccess=()=>{const d=l.result;i(d?d.messages:null)},l.onerror=()=>s(l.error)})}catch(r){return console.error("Error getting chat from IndexedDB:",r),null}}async getChatWithMetadata(t){try{const a=(await this.init()).transaction([zn],"readonly").objectStore(zn);return new Promise((i,s)=>{const l=a.get(t);l.onsuccess=()=>{const d=l.result;i(d||null)},l.onerror=()=>s(l.error)})}catch(r){return console.error("Error getting chat with metadata from IndexedDB:",r),null}}async getAllChats(){try{const n=(await this.init()).transaction([zn],"readonly").objectStore(zn);return new Promise((a,i)=>{const s=n.getAll();s.onsuccess=()=>a(s.result||[]),s.onerror=()=>i(s.error)})}catch(t){return console.error("Error getting all chats from IndexedDB:",t),[]}}async deleteChat(t){try{const a=(await this.init()).transaction([zn],"readwrite").objectStore(zn);await new Promise((i,s)=>{const l=a.delete(t);l.onsuccess=()=>i(),l.onerror=()=>s(l.error)}),console.log(`Deleted chat ${t} from IndexedDB`)}catch(r){throw console.error("Error deleting chat from IndexedDB:",r),r}}async clearAllChats(){try{const n=(await this.init()).transaction([zn],"readwrite").objectStore(zn);await new Promise((a,i)=>{const s=n.clear();s.onsuccess=()=>a(),s.onerror=()=>i(s.error)}),console.log("Cleared all chats from IndexedDB")}catch(t){throw console.error("Error clearing all chats from IndexedDB:",t),t}}async getOldestChats(t){try{const i=(await this.init()).transaction([zn],"readonly").objectStore(zn).index("timestamp");return new Promise((s,l)=>{const d=i.openCursor(),h=[];d.onsuccess=p=>{const f=p.target.result;f&&h.length<t?(h.push(f.value),f.continue()):s(h)},d.onerror=()=>l(d.error)})}catch(r){return console.error("Error getting oldest chats:",r),[]}}async getCount(){try{const n=(await this.init()).transaction([zn],"readonly").objectStore(zn);return new Promise((a,i)=>{const s=n.count();s.onsuccess=()=>a(s.result),s.onerror=()=>i(s.error)})}catch(t){return console.error("Error getting chat count:",t),0}}async cleanupOldChats(t){try{const r=await this.getAllChats();if(r.length<=t)return 0;const a=r.sort((d,h)=>d.timestamp-h.timestamp).slice(0,r.length-t),s=(await this.init()).transaction([zn],"readwrite"),l=s.objectStore(zn);for(const d of a)l.delete(d.id);return await new Promise((d,h)=>{s.oncomplete=()=>d(),s.onerror=()=>h(s.error)}),console.log(`Cleaned up ${a.length} old chats`),a.length}catch(r){return console.error("Error cleaning up old chats:",r),0}}async migrateFromLocalStorage(){try{let t=0;const r=Object.keys(localStorage).filter(n=>n.startsWith("chat_history_"));for(const n of r)try{const a=localStorage.getItem(n);if(a){const i=JSON.parse(a),s=n.replace("chat_history_","");await this.saveChat(s,i),localStorage.removeItem(n),t++}}catch(a){console.error(`Error migrating ${n}:`,a)}return t>0&&console.log(`Migrated ${t} chat histories from localStorage to IndexedDB`),t}catch(t){return console.error("Error during migration:",t),0}}}const vc=new TU,kU=({className:e=""})=>{const t=Ic();return u.jsx("button",{onClick:()=>t("/image-editor"),className:e,title:"Image Editor",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})},$3=({onOpenSettings:e,hideGitHub:t=!1})=>{const r=Ic(),n=Ks(),a=n.pathname==="/help"||n.pathname==="/privacy";return u.jsxs("div",{className:"hidden md:flex fixed bottom-4 right-4 flex-col gap-2 z-50",style:{zIndex:9999},children:[e&&u.jsx("button",{onClick:()=>r("/feed"),className:"p-3 bg-cyan-600 hover:bg-cyan-500 dark:bg-cyan-700 dark:hover:bg-cyan-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Feed",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e&&u.jsx("button",{onClick:()=>r("/quiz"),className:"p-3 bg-indigo-600 hover:bg-indigo-500 dark:bg-indigo-700 dark:hover:bg-indigo-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Quiz Statistics",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e&&u.jsx(kU,{className:"p-3 bg-orange-600 hover:bg-orange-500 dark:bg-orange-700 dark:hover:bg-orange-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center"}),e&&u.jsx("button",{onClick:e,className:"p-3 bg-purple-600 hover:bg-purple-500 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Settings",children:u.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e&&!a&&u.jsx("button",{onClick:()=>r("/help"),className:"p-3 bg-blue-600 hover:bg-blue-500 dark:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Help & Documentation",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e&&u.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-green-600 hover:bg-green-500 dark:bg-green-700 dark:hover:bg-green-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Privacy Policy",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),!t&&u.jsx("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-gray-800 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"View on GitHub",children:u.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})},EU=()=>{const{t:e,i18n:t}=yd(),{login:r}=rs(),n=_.useRef(null),[a,i]=_.useState(!1),s=l=>{t.changeLanguage(l)};return _.useEffect(()=>{if(n.current){const l=()=>{if(typeof google<"u"&&google.accounts){const d="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";if(console.log("LoginScreen: Initializing Google Sign-In"),google.accounts.id.initialize({client_id:d,callback:h=>{h.credential&&(console.log("LoginScreen: Login successful"),r(h.credential))},auto_select:!1,cancel_on_tap_outside:!1}),google.accounts.id.renderButton(n.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",width:300}),a)console.log("LoginScreen: Skipping One Tap (already attempted this mount)");else{i(!0),console.log("LoginScreen: Attempting One Tap sign-in (first time this mount)");try{google.accounts.id.prompt()}catch(h){console.log("LoginScreen: One Tap prompt failed silently:",h)}}}else console.log("LoginScreen: Google SDK not loaded yet, retrying..."),setTimeout(l,100)};l()}},[r,a]),u.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-12 max-w-3xl w-full mx-4 relative overflow-y-auto max-h-[95vh]",children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsxs("select",{value:t.language,onChange:l=>s(l.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[u.jsxs("option",{value:"en",children:[" ",e("languages.en")]}),u.jsxs("option",{value:"es",children:[" ",e("languages.es")]}),u.jsxs("option",{value:"fr",children:[" ",e("languages.fr")]}),u.jsxs("option",{value:"de",children:[" ",e("languages.de")]}),u.jsxs("option",{value:"nl",children:[" ",e("languages.nl")]}),u.jsxs("option",{value:"pt",children:[" ",e("languages.pt")]}),u.jsxs("option",{value:"ru",children:[" ",e("languages.ru")]}),u.jsxs("option",{value:"zh",children:[" ",e("languages.zh")]}),u.jsxs("option",{value:"ja",children:[" ",e("languages.ja")]}),u.jsxs("option",{value:"ar",children:[" ",e("languages.ar")]})]})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center mb-4",children:u.jsx("img",{src:"/agent.png",alt:e("auth.researchAgent"),className:"w-24 h-24 object-contain"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e("auth.researchAgent")}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("auth.tagline")}),u.jsx("div",{className:"flex justify-center mb-4",children:u.jsx("div",{ref:n,id:"login-screen-google-signin",className:"min-w-[300px] min-h-[44px]",style:{display:"flex",alignItems:"center",justifyContent:"center"}})}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("auth.secureAuth")}),u.jsx("div",{className:"mt-3",children:u.jsx(Aw,{to:"/privacy",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-medium",children:" Privacy Policy"})})]}),u.jsxs("div",{className:"mb-8 text-left space-y-4 max-w-2xl mx-auto",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white text-center",children:e("auth.whyChooseTitle")}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:e("auth.whyChooseIntro")}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:e("auth.keyAdvantagesTitle")}),u.jsxs("div",{className:"space-y-2.5 text-sm",children:[u.jsxs("div",{children:[u.jsxs("strong",{className:"text-blue-600 dark:text-blue-400",children:[e("auth.webConnected"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.webConnectedDesc")]})]}),u.jsxs("div",{children:[u.jsxs("strong",{className:"text-purple-600 dark:text-purple-400",children:[e("auth.multiTool"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.multiToolDesc")]})]}),u.jsxs("div",{children:[u.jsxs("strong",{className:"text-green-600 dark:text-green-400",children:[e("auth.knowledgeBase"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.knowledgeBaseDesc")]})]}),u.jsxs("div",{children:[u.jsxs("strong",{className:"text-indigo-600 dark:text-indigo-400",children:[e("auth.advancedPlanning"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.advancedPlanningDesc")]})]}),u.jsxs("div",{children:[u.jsxs("strong",{className:"text-yellow-600 dark:text-yellow-400",children:[e("auth.costEffective"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.costEffectiveDesc")]})]}),u.jsxs("div",{children:[u.jsxs("strong",{className:"text-pink-600 dark:text-pink-400",children:[e("auth.transparency"),":"]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e("auth.transparencyDesc")]})]})]})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm italic border-t border-gray-200 dark:border-gray-700 pt-3",children:e("auth.perfectFor")})]})]}),u.jsx($3,{hideGitHub:!0})]})},lC=()=>{const{user:e,logout:t}=rs(),{isAvailable:r,isConnected:n,deviceName:a,requestSession:i,endSession:s}=D0();if(!e)return null;const l=()=>{n?s():i()};return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:t,className:"btn-secondary px-3 py-2 flex items-center gap-2",title:`Sign out ${e.email}`,"aria-label":"Logout",children:[e.picture&&u.jsx("img",{src:e.picture,alt:e.name||e.email,className:"w-6 h-6 rounded-full",referrerPolicy:"no-referrer"}),u.jsx("span",{children:"Logout"})]}),r&&u.jsx("button",{onClick:l,className:`btn-secondary p-2 ${n?"bg-blue-500 text-white hover:bg-blue-600":""}`,title:n?`Casting to ${a}`:"Cast to TV","aria-label":n?`Casting to ${a}`:"Cast to TV",children:u.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M1,18 v3 h3 c0,-1.66 -1.34,-3 -3,-3 z M1,14 v2 c2.76,0 5,2.24 5,5 h2 c0,-3.87 -3.13,-7 -7,-7 z M1,10 v2 c4.97,0 9,4.03 9,9 h2 c0,-6.08 -4.93,-11 -11,-11 z M21,3 H3 C1.9,3 1,3.9 1,5 v3 h2 V5 h18 v14 h-7 v2 h7 c1.1,0 2,-0.9 2,-2 V5 c0,-1.1 -0.9,-2 -2,-2 z"})})})]})};function Jp(e,t,r=!0){const n=_.useRef(null),a=_.useCallback(s=>{s.key==="Escape"&&t()},[t]),i=_.useCallback(s=>{r&&n.current&&s.target===n.current&&t()},[t,r]);return _.useEffect(()=>{if(e)return document.addEventListener("keydown",a),document.addEventListener("mousedown",i),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",i)}},[e,a,i]),n}const CU=({isOpen:e,onClose:t})=>{const r=Jp(e,t),{playlist:n,currentTrackIndex:a,isPlaying:i,playTrack:s,removeTrack:l,clearPlaylist:d,currentTrack:h,savedPlaylists:p,savePlaylistAs:f,loadPlaylist:m,deletePlaylist:b,previousTrack:x,nextTrack:v,togglePlayPause:T,shuffleMode:k,toggleShuffle:C,repeatMode:A,setRepeatMode:D,playbackRate:B,setPlaybackRate:R,volume:M,setVolume:$}=Dc(),{isAvailable:W,deviceName:O,castVideo:Y,sendVideoCommand:X,isCastingVideo:q}=D0(),{showSuccess:N,showError:U}=Mc(),j=_.useRef(null),[K,Q]=_.useState(!1),[ie,G]=_.useState(!1),[F,H]=_.useState(""),[I,ne]=_.useState("");_.useEffect(()=>{if(!e)return;const me=Me=>{Me.key==="Escape"&&t()};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[e,t]);const ue=_.useMemo(()=>{if(!I.trim())return n;const me=I.toLowerCase();return n.filter(Me=>Me.title.toLowerCase().includes(me)||Me.channel?.toLowerCase().includes(me)||Me.description?.toLowerCase().includes(me))},[n,I]),xe=_U(ue),ke=ue.length;return e?u.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-2 sm:p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:[" YouTube Playlist",u.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600 dark:text-gray-400",children:I?u.jsxs(u.Fragment,{children:["(",ke," of ",n.length," ",n.length===1?"video":"videos",")"]}):u.jsxs(u.Fragment,{children:["(",n.length," ",n.length===1?"video":"videos",")"]})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[h&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:x,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Previous track",children:u.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),u.jsx("button",{onClick:T,className:"p-2 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors",title:i?"Pause":"Play",children:i?u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):u.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})}),u.jsx("button",{onClick:v,className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",title:"Next track",children:u.jsx("svg",{className:"w-5 h-5 text-gray-800 dark:text-gray-200",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 p-1",title:"Close (Esc)",children:u.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h&&u.jsxs("div",{className:"w-2/3 mx-auto flex-shrink-0 mt-4 relative",children:[u.jsx("div",{id:"dialog-player-container",className:"w-full relative"}),q&&u.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm z-10",children:u.jsxs("div",{className:"text-center p-6",children:[u.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),u.jsxs("h3",{className:"text-white text-xl font-semibold mb-2",children:["Casting to ",O]}),u.jsx("p",{className:"text-gray-300 text-sm mb-4",children:h.title}),u.jsxs("div",{className:"flex gap-3 justify-center",children:[u.jsx("button",{onClick:()=>X(i?"pause":"play"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded transition-colors",children:i?" Pause":" Play"}),u.jsx("button",{onClick:()=>X("stop"),className:"px-4 py-2 bg-red-500/80 hover:bg-red-600/80 text-white rounded transition-colors",children:" Stop Casting"})]})]})}),u.jsxs("div",{className:"p-3 sm:p-4 bg-gray-900 text-white",children:[u.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1",children:h.title}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-300",children:[h.channel&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.channel]}),u.jsx("span",{children:""})]}),h.duration&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"flex items-center gap-1",children:[" ",h.duration]}),u.jsx("span",{children:""})]}),u.jsxs("span",{className:"flex items-center gap-1",children:[" Added ",AU(h.addedAt)]})]}),h.description&&u.jsx("p",{className:"mt-2 text-xs sm:text-sm text-gray-400 line-clamp-2",children:h.description})]})]}),u.jsx("div",{className:"p-3 sm:p-4",children:n.length===0?u.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[u.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),u.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Playlist is empty"}),u.jsx("p",{className:"text-sm mt-2",children:"Search for YouTube videos using the chat to add tracks"})]}):xe.map(([me,Me])=>u.jsxs("div",{className:"mb-6",children:[u.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[" ",me,u.jsxs("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",Me.length," ",Me.length===1?"video":"videos",")"]})]}),u.jsx("div",{className:"space-y-2",children:Me.map(ge=>{const Be=n.findIndex(yt=>yt.id===ge.id),ct=Be===a;return u.jsxs("div",{onClick:()=>{Be===a?T():s(Be)},className:`flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-lg transition-all cursor-pointer ${ct?"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-500":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-2 border-transparent"}`,children:[u.jsx("div",{className:"flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center rounded-full transition-colors",title:ct?i?"Pause":"Play":"Play this track",children:ct&&i?u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})}),ge.thumbnail&&u.jsx("img",{src:ge.thumbnail,alt:"",className:"w-16 h-12 object-cover rounded flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:ge.title}),ge.channel&&u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:ge.channel})]}),ge.duration&&u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:ge.duration}),u.jsx("button",{onClick:yt=>{yt.stopPropagation(),confirm(`Remove "${ge.title}" from playlist?`)&&l(ge.id)},className:"flex-shrink-0 p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ge.id)})})]},me))})]}),n.length>0&&u.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:[u.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:u.jsxs("div",{className:"flex-1 min-w-[200px] flex items-center gap-2",children:[u.jsx("input",{type:"text",value:I,onChange:me=>ne(me.target.value),placeholder:" Search playlist...",className:"flex-1 px-3 py-1.5 text-xs sm:text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),I&&u.jsx("button",{onClick:()=>ne(""),className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",title:"Clear search",children:""})]})}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("button",{onClick:()=>C(),className:`px-3 py-1.5 text-xs sm:text-sm rounded transition-colors ${k?"bg-purple-500 hover:bg-purple-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:"Toggle shuffle",children:" Shuffle"}),u.jsxs("button",{onClick:()=>{const me=["none","all","one"],Me=me.indexOf(A),ge=me[(Me+1)%me.length];D(ge)},className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:`Repeat: ${A}`,children:[A==="none"&&" Repeat: Off",A==="all"&&" Repeat: All",A==="one"&&" Repeat: One"]}),u.jsxs("select",{value:B,onChange:me=>R(parseFloat(me.target.value)),className:"px-3 py-1.5 text-xs sm:text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",title:"Playback speed",children:[u.jsx("option",{value:.25,children:" 0.25x"}),u.jsx("option",{value:.5,children:" 0.5x"}),u.jsx("option",{value:.75,children:" 0.75x"}),u.jsx("option",{value:1,children:" 1x"}),u.jsx("option",{value:1.25,children:" 1.25x"}),u.jsx("option",{value:1.5,children:" 1.5x"}),u.jsx("option",{value:1.75,children:" 1.75x"}),u.jsx("option",{value:2,children:" 2x"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:""}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:M,onChange:me=>$(parseFloat(me.target.value)),className:"w-16 sm:w-24",title:"Volume"})]}),W&&h&&u.jsx("button",{onClick:()=>{if(q)X("stop");else{const me=j.current?.getCurrentTime()||0;Y({videoId:h.videoId,url:h.url,title:h.title,channel:h.channel,thumbnail:h.thumbnail,duration:h.duration},me)}},className:`p-2 rounded transition-colors ${q?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300"}`,title:q?`Stop casting to ${O}`:`Cast to ${O}`,children:u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[u.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",onClick:()=>Q(!0),children:"Save"}),u.jsx("button",{className:"px-3 py-1.5 text-xs sm:text-sm bg-green-500 hover:bg-green-600 text-white rounded transition-colors",onClick:()=>G(!0),children:"Load"}),n.length>0&&u.jsx("button",{onClick:()=>{confirm("Clear entire playlist? This cannot be undone.")&&(d(),N("Playlist cleared successfully!"))},className:"px-3 py-1.5 text-xs sm:text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors",children:" Clear All"})]})]}),K&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[u.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Save Playlist"}),u.jsx("input",{type:"text",placeholder:"Enter playlist name...",value:F,onChange:me=>H(me.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded mb-4 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:async()=>{if(F.trim())try{await f(F),H(""),Q(!1),N(`Playlist "${F}" saved successfully!`)}catch(me){U("Failed to save playlist: "+me.message)}},className:"flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",disabled:!F.trim(),children:"Save"}),u.jsx("button",{onClick:()=>{H(""),Q(!1)},className:"flex-1 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"})]})]})}),ie&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full",children:[u.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900 dark:text-gray-100",children:"Load Playlist"}),p.length===0?u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No saved playlists found."}):u.jsx("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:p.map(me=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-600",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:me.name}),u.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[me.trackCount," tracks  ",new Date(me.updatedAt).toLocaleDateString()]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:async()=>{try{await m(me.id),G(!1),N(`Playlist "${me.name}" loaded successfully!`)}catch(Me){U("Failed to load playlist: "+Me.message)}},className:"px-3 py-1 text-xs bg-green-500 hover:bg-green-600 text-white rounded",children:"Load"}),u.jsx("button",{onClick:async()=>{if(confirm(`Delete "${me.name}"?`))try{await b(me.id),N(`Playlist "${me.name}" deleted!`)}catch(Me){U("Failed to delete playlist: "+Me.message)}},className:"px-3 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded",children:"Delete"})]})]},me.id))}),u.jsx("button",{onClick:()=>G(!1),className:"w-full px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors",children:"Close"})]})})]})}):null};function _U(e){const t=new Map,r=new Date;r.setHours(0,0,0,0);const n=new Date(r);n.setDate(n.getDate()-1);const a=new Date(r);return a.setDate(a.getDate()-7),e.forEach(i=>{const s=new Date(i.addedAt);s.setHours(0,0,0,0);let l;s.getTime()===r.getTime()?l="Today":s.getTime()===n.getTime()?l="Yesterday":s>a?l="This Week":l=s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:s.getFullYear()!==r.getFullYear()?"numeric":void 0}),t.has(l)||t.set(l,[]),t.get(l).push(i)}),Array.from(t.entries())}function AU(e){const t=new Date(e),n=new Date().getTime()-t.getTime(),a=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return a<1?"just now":a<60?`${a}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function cC(e){if(!e||!isFinite(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`}const NU=()=>{const{playlist:e,isPlaying:t,currentTrack:r,togglePlayPause:n,nextTrack:a,previousTrack:i}=Dc(),{isLoading:s,currentTime:l,duration:d}=k3(),[h,p]=_.useState(!1);if(e.length===0)return null;const f=()=>{console.log("[PlaylistButton] Play/Pause clicked - current isPlaying:",t),n()},m=()=>{i()},b=()=>{a()};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden shadow-sm",children:[u.jsx("button",{onClick:m,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Previous track",children:u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"})})}),u.jsx("button",{onClick:f,className:`p-1.5 sm:p-2 transition-colors ${t?"bg-blue-500 hover:bg-blue-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,title:t?"Pause":"Play",children:t?u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})})}),u.jsx("button",{onClick:b,className:"p-1.5 sm:p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Next track",children:u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M16 18h2V6h-2v12zM6 18l8.5-6L6 6v12z"})})}),u.jsx("div",{className:"hidden sm:flex flex-col items-start px-2 py-1 min-w-0 max-w-[150px] md:max-w-[250px]",children:s&&t?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("svg",{className:"animate-spin h-3 w-3 text-gray-700 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Loading..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate w-full",children:r?.title?r.title.slice(0,10):"No track"}),d>0&&u.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-mono",children:[cC(l)," / ",cC(d)]})]})}),u.jsxs("button",{onClick:x=>{x.stopPropagation(),console.log("[PlaylistButton] Opening dialog, playlist size:",e.length),p(!0)},className:"p-1.5 sm:p-2 bg-purple-500 hover:bg-purple-600 text-white transition-colors flex items-center gap-1",title:"View playlist",children:[u.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"})}),u.jsx("span",{className:"hidden md:inline text-xs font-medium",children:e.length})]})]}),u.jsx(CU,{isOpen:h,onClose:()=>p(!1)})]})},LU=NU,q3=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,uC=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,dC=/\.(m3u8)($|\?)/i,PU=/\.(mpd)($|\?)/i,RU=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,IU=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,DU=/vimeo\.com\/(?!progressive_redirect).+/,MU=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,OU=/open\.spotify\.com\/(\w+)\/(\w+)/i,jU=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,BU=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,cp=(e,t)=>{if(Array.isArray(e)){for(const r of e)if(typeof r=="string"&&cp(r,t)||cp(r.src,t))return!0;return!1}return t(e)},Ms={html:e=>cp(e,t=>q3.test(t)||uC.test(t)),hls:e=>cp(e,t=>dC.test(t)),dash:e=>cp(e,t=>PU.test(t)),mux:e=>RU.test(e),youtube:e=>IU.test(e),vimeo:e=>DU.test(e)&&!uC.test(e)&&!dC.test(e),wistia:e=>MU.test(e),spotify:e=>OU.test(e),twitch:e=>jU.test(e),tiktok:e=>BU.test(e)},FU=ir.forwardRef((e,t)=>{const r=q3.test(`${e.src}`)?"audio":"video";return ir.createElement(r,{...e,ref:t},e.children)});var zU=FU;const UU=[{key:"hls",name:"hls.js",canPlay:Ms.hls,canEnablePIP:()=>!0,player:_.lazy(()=>_t(()=>import("./react-BYAeVIZH.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:Ms.dash,canEnablePIP:()=>!0,player:_.lazy(()=>_t(()=>import("./react-BE4PdzoV.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:Ms.mux,canEnablePIP:()=>!0,player:_.lazy(()=>_t(()=>import("./index-BDLF2U-u.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:Ms.youtube,player:_.lazy(()=>_t(()=>import("./react-D8Ml71f2.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:Ms.vimeo,player:_.lazy(()=>_t(()=>import("./react-BJqR7LcI.js"),[]))},{key:"wistia",name:"Wistia",canPlay:Ms.wistia,canEnablePIP:()=>!0,player:_.lazy(()=>_t(()=>import("./react-CliShclE.js"),[]))},{key:"spotify",name:"Spotify",canPlay:Ms.spotify,canEnablePIP:()=>!1,player:_.lazy(()=>_t(()=>import("./react-CRcR4vN0.js"),[]))},{key:"twitch",name:"Twitch",canPlay:Ms.twitch,canEnablePIP:()=>!1,player:_.lazy(()=>_t(()=>import("./react-CMYSf3Xh.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:Ms.tiktok,canEnablePIP:()=>!1,player:_.lazy(()=>_t(()=>import("./react-B08fxEBV.js"),[]))},{key:"html",name:"html",canPlay:Ms.html,canEnablePIP:()=>!0,player:zU}];var Xv=UU;const $U={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},H3=ir.forwardRef((e,t)=>{const{playing:r,pip:n}=e,a=e.activePlayer,i=_.useRef(null),s=_.useRef(!0);_.useEffect(()=>{var f,m;i.current&&(i.current.paused&&r===!0&&i.current.play(),!i.current.paused&&r===!1&&i.current.pause(),i.current.playbackRate=(f=e.playbackRate)!=null?f:1,i.current.volume=(m=e.volume)!=null?m:1)}),_.useEffect(()=>{var f,m,b,x,v;if(!(!i.current||!globalThis.document)){if(n&&!document.pictureInPictureElement)try{(m=(f=i.current).requestPictureInPicture)==null||m.call(f)}catch{}if(!n&&document.pictureInPictureElement)try{(x=(b=i.current).exitPictureInPicture)==null||x.call(b),(v=document.exitPictureInPicture)==null||v.call(document)}catch{}}},[n]);const l=f=>{var m,b;s.current=!0,(m=e.onReady)==null||m.call(e),(b=e.onLoadStart)==null||b.call(e,f)},d=f=>{var m,b;s.current&&(s.current=!1,(m=e.onStart)==null||m.call(e,f)),(b=e.onPlay)==null||b.call(e,f)};if(!a)return null;const h={},p=["onReady","onStart"];for(const f in e)f.startsWith("on")&&!p.includes(f)&&(h[f]=e[f]);return ir.createElement(a,{...h,style:e.style,className:e.className,slot:e.slot,ref:_.useCallback(f=>{i.current=f,typeof t=="function"?t(f):t!==null&&(t.current=f)},[t]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,config:e.config,onLoadStart:l,onPlay:d},e.children)});H3.displayName="Player";var qU=H3;const HU=_.lazy(()=>_t(()=>import("./Preview-C0Fo4jLv.js"),[])),Ah=[],GU=(e,t)=>{const r=a=>{for(const i of[...Ah,...e])if(a&&i.canPlay(a))return i;return t||null},n=ir.forwardRef((a,i)=>{const s={...$U,...a},{src:l,slot:d,className:h,style:p,width:f,height:m,fallback:b,wrapper:x}=s,[v,T]=_.useState(!!s.light);_.useEffect(()=>{s.light?T(!0):T(!1)},[s.light]);const k=R=>{var M;T(!1),(M=s.onClickPreview)==null||M.call(s,R)},C=R=>{if(!R)return null;const{light:M,playIcon:$,previewTabIndex:W,oEmbedUrl:O,previewAriaLabel:Y}=s;return ir.createElement(HU,{src:R,light:M,playIcon:$,previewTabIndex:W,previewAriaLabel:Y,oEmbedUrl:O,onClickPreview:k})},A=R=>{var M,$;const W=r(R);if(!W)return null;const{style:O,width:Y,height:X,wrapper:q}=s,N=(M=s.config)==null?void 0:M[W.key];return ir.createElement(qU,{...s,ref:i,activePlayer:($=W.player)!=null?$:W,slot:q?void 0:d,className:q?void 0:h,style:q?{display:"block",width:"100%",height:"100%"}:{display:"block",width:Y,height:X,...O},config:N})},D=x??hC,B=b===!1?hC:_.Suspense;return ir.createElement(D,{slot:d,className:h,style:{width:f,height:m,...p}},ir.createElement(B,{fallback:b},v?C(l):A(l)))});return n.displayName="ReactPlayer",n.addCustomPlayer=a=>{Ah.push(a)},n.removeCustomPlayers=()=>{Ah.length=0},n.canPlay=a=>{if(a){for(const i of[...Ah,...e])if(i.canPlay(a))return!0}return!1},n.canEnablePIP=a=>{var i;if(a){for(const s of[...Ah,...e])if(s.canPlay(a)&&((i=s.canEnablePIP)!=null&&i.call(s)))return!0}return!1},n},hC=({children:e})=>e,WU=Xv[Xv.length-1];var VU=GU(Xv,WU);const YU=()=>{const e=_.useRef(null),{currentTrack:t,isPlaying:r,nextTrack:n,play:a,pause:i}=Dc(),{registerPlayer:s,unregisterPlayer:l,setIsLoading:d,setCurrentTime:h,setDuration:p}=k3(),{isCastingVideo:f}=D0();_.useEffect(()=>(e.current&&(console.log("[BackgroundPlayer] Registering player"),s(e.current)),()=>{console.log("[BackgroundPlayer] Unregistering player"),l()}),[s,l]),_.useEffect(()=>{console.log("[BackgroundPlayer] Track or playing state changed - isPlaying:",r,"currentTrack:",t?.title),t&&r?d(!0):r||d(!1)},[t,r,d]);const[m,b]=ir.useState(!1),x=ir.useRef(0),v=ir.useRef(!1);if(ir.useEffect(()=>{const A=()=>{const B=document.getElementById("dialog-player-container"),R=m,M=!!B;R!==M&&(console.log("[BackgroundPlayer] Dialog opening, last tracked position:",x.current,"isPlaying:",r),v.current=r),b(M)};A();const D=new MutationObserver(()=>{setTimeout(A,10)});return D.observe(document.body,{childList:!0,subtree:!0}),()=>D.disconnect()},[m,r]),!t)return null;const T=u.jsx(VU,{ref:A=>{e.current=A,A&&(console.log("[BackgroundPlayer] ReactPlayer ref set, registering player, dialogOpen:",m),s(A))},src:t.url,playing:r&&!f,controls:!0,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},className:"react-player-hide-controls",onReady:()=>{console.log("[BackgroundPlayer] ReactPlayer ready, URL:",t.url,"isPlaying:",r,"dialogOpen:",m,"savedPosition:",x.current);const A=e.current;A&&A.duration&&p(A.duration)},onTimeUpdate:A=>{const D=A.currentTarget.currentTime,B=A.currentTarget.duration;D>0&&(x.current=D,h(D),console.log("[BackgroundPlayer] Position:",D.toFixed(2))),B>0&&p(B)},onPlay:()=>{console.log("[BackgroundPlayer] Playback started - syncing play state"),r||a(),setTimeout(()=>d(!1),500)},onStart:()=>{if(console.log("[BackgroundPlayer] Media started, savedPosition:",x.current),x.current>1){const A=x.current;console.log("[BackgroundPlayer] Will seek to saved position:",A),setTimeout(()=>{const D=e.current;D&&typeof D.currentTime=="number"?(console.log("[BackgroundPlayer] Setting currentTime from",D.currentTime,"to",A),D.currentTime=A,x.current=0):console.log("[BackgroundPlayer]  Cannot seek - video element not ready")},300)}setTimeout(()=>d(!1),500)},onPause:()=>{console.log("[BackgroundPlayer]  PLAYBACK PAUSED - syncing pause state, isPlaying:",r),r&&i()},onEnded:n,onError:A=>{console.error("[BackgroundPlayer] Playback error:",A),d(!1)}},`player-${t.videoId}`);let k=document.getElementById("background-player-mount");k||(k=document.createElement("div"),k.id="background-player-mount",k.className="fixed bottom-0 left-0",k.style.cssText="width: 1px; height: 1px; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;",document.body.appendChild(k));const C=m?document.getElementById("dialog-player-container"):k;return C?nz.createPortal(u.jsx("div",{className:"w-full h-full relative bg-black",style:{aspectRatio:"16/9"},children:T}),C):null},Jv="llm_proxy_search_cache",QU=7;function KU(){try{const e=localStorage.getItem(Jv);if(!e)return{};const t=JSON.parse(e),r=Date.now(),n=QU*24*60*60*1e3,a={};for(const[i,s]of Object.entries(t)){const l=s;r-l.timestamp<n&&(a[i]=l)}return Object.keys(a).length!==Object.keys(t).length&&localStorage.setItem(Jv,JSON.stringify(a)),a}catch(e){return console.error("Error reading search cache:",e),{}}}function XU(e,t){try{const r=KU(),n=e.toLowerCase().trim();r[n]={query:e.trim(),results:t,timestamp:Date.now()},localStorage.setItem(Jv,JSON.stringify(r))}catch(r){console.error("Error saving search to cache:",r)}}function JU(e,t){if(e!=="search_web")return null;try{const r=JSON.parse(t);return r.query&&Array.isArray(r.results)?(XU(r.query,r.results),{query:r.query,results:r.results}):null}catch(r){return console.error("Error extracting search result from tool call:",r),null}}var Nf={exports:{}};/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var G3=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Rm=G3.join(","),W3=typeof Element>"u",wc=W3?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Im=!W3&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Np=function(t,r){var n;r===void 0&&(r=!0);var a=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),i=a===""||a==="true",s=i||r&&t&&Np(t.parentNode);return s},ZU=function(t){var r,n=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"contenteditable");return n===""||n==="true"},V3=function(t,r,n){if(Np(t))return[];var a=Array.prototype.slice.apply(t.querySelectorAll(Rm));return r&&wc.call(t,Rm)&&a.unshift(t),a=a.filter(n),a},Dm=function(t,r,n){for(var a=[],i=Array.from(t);i.length;){var s=i.shift();if(!Np(s,!1))if(s.tagName==="SLOT"){var l=s.assignedElements(),d=l.length?l:s.children,h=Dm(d,!0,n);n.flatten?a.push.apply(a,h):a.push({scopeParent:s,candidates:h})}else{var p=wc.call(s,Rm);p&&n.filter(s)&&(r||!t.includes(s))&&a.push(s);var f=s.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(s),m=!Np(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(s));if(f&&m){var b=Dm(f===!0?s.children:f.children,!0,n);n.flatten?a.push.apply(a,b):a.push({scopeParent:s,candidates:b})}else i.unshift.apply(i,s.children)}}return a},Y3=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},xl=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ZU(t))&&!Y3(t)?0:t.tabIndex},e$=function(t,r){var n=xl(t);return n<0&&r&&!Y3(t)?0:n},t$=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},Q3=function(t){return t.tagName==="INPUT"},r$=function(t){return Q3(t)&&t.type==="hidden"},n$=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},a$=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},i$=function(t){if(!t.name)return!0;var r=t.form||Im(t),n=function(l){return r.querySelectorAll('input[type="radio"][name="'+l+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=n(window.CSS.escape(t.name));else try{a=n(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=a$(a,t.form);return!i||i===t},s$=function(t){return Q3(t)&&t.type==="radio"},o$=function(t){return s$(t)&&!i$(t)},l$=function(t){var r,n=t&&Im(t),a=(r=n)===null||r===void 0?void 0:r.host,i=!1;if(n&&n!==t){var s,l,d;for(i=!!((s=a)!==null&&s!==void 0&&(l=s.ownerDocument)!==null&&l!==void 0&&l.contains(a)||t!=null&&(d=t.ownerDocument)!==null&&d!==void 0&&d.contains(t));!i&&a;){var h,p,f;n=Im(a),a=(h=n)===null||h===void 0?void 0:h.host,i=!!((p=a)!==null&&p!==void 0&&(f=p.ownerDocument)!==null&&f!==void 0&&f.contains(a))}}return i},pC=function(t){var r=t.getBoundingClientRect(),n=r.width,a=r.height;return n===0&&a===0},c$=function(t,r){var n=r.displayCheck,a=r.getShadowRoot;if(n==="full-native"&&"checkVisibility"in t){var i=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(t).visibility==="hidden")return!0;var s=wc.call(t,"details>summary:first-of-type"),l=s?t.parentElement:t;if(wc.call(l,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="full-native"||n==="legacy-full"){if(typeof a=="function"){for(var d=t;t;){var h=t.parentElement,p=Im(t);if(h&&!h.shadowRoot&&a(h)===!0)return pC(t);t.assignedSlot?t=t.assignedSlot:!h&&p!==t.ownerDocument?t=p.host:t=h}t=d}if(l$(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return pC(t);return!1},u$=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var a=r.children.item(n);if(a.tagName==="LEGEND")return wc.call(r,"fieldset[disabled] *")?!0:!a.contains(t)}return!0}r=r.parentElement}return!1},Mm=function(t,r){return!(r.disabled||Np(r)||r$(r)||c$(r,t)||n$(r)||u$(r))},Zv=function(t,r){return!(o$(r)||xl(r)<0||!Mm(t,r))},d$=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},K3=function(t){var r=[],n=[];return t.forEach(function(a,i){var s=!!a.scopeParent,l=s?a.scopeParent:a,d=e$(l,s),h=s?K3(a.candidates):l;d===0?s?r.push.apply(r,h):r.push(l):n.push({documentOrder:i,tabIndex:d,item:a,isScope:s,content:h})}),n.sort(t$).reduce(function(a,i){return i.isScope?a.push.apply(a,i.content):a.push(i.content),a},[]).concat(r)},X3=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Dm([t],r.includeContainer,{filter:Zv.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:d$}):n=V3(t,r.includeContainer,Zv.bind(null,r)),K3(n)},J3=function(t,r){r=r||{};var n;return r.getShadowRoot?n=Dm([t],r.includeContainer,{filter:Mm.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=V3(t,r.includeContainer,Mm.bind(null,r)),n},ac=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return wc.call(t,Rm)===!1?!1:Zv(r,t)},h$=G3.concat("iframe").join(","),om=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return wc.call(t,h$)===!1?!1:Mm(r,t)};const p$=Object.freeze(Object.defineProperty({__proto__:null,focusable:J3,getTabIndex:xl,isFocusable:om,isTabbable:ac,tabbable:X3},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.6.6
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function e1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g$(e){if(Array.isArray(e))return e1(e)}function f$(e,t,r){return(t=v$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){f$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b$(e){return g$(e)||m$(e)||w$(e)||y$()}function x$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v$(e){var t=x$(e,"string");return typeof t=="symbol"?t:t+""}function w$(e,t){if(e){if(typeof e=="string")return e1(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e1(e,t):void 0}}var mC={activateTrap:function(t,r){if(t.length>0){var n=t[t.length-1];n!==r&&n._setPausedState(!0)}var a=t.indexOf(r);a===-1||t.splice(a,1),t.push(r)},deactivateTrap:function(t,r){var n=t.indexOf(r);n!==-1&&t.splice(n,1),t.length>0&&!t[t.length-1]._isManuallyPaused()&&t[t.length-1]._setPausedState(!1)}},S$=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},T$=function(t){return t?.key==="Escape"||t?.key==="Esc"||t?.keyCode===27},up=function(t){return t?.key==="Tab"||t?.keyCode===9},k$=function(t){return up(t)&&!t.shiftKey},E$=function(t){return up(t)&&t.shiftKey},yC=function(t){return setTimeout(t,0)},Nh=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return typeof t=="function"?t.apply(void 0,n):t},Lf=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},C$=[],_$=function(t,r){var n=r?.document||document,a=r?.trapStack||C$,i=fC({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:k$,isKeyBackward:E$},r),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,d=function(q,N,U){return q&&q[N]!==void 0?q[N]:i[U||N]},h=function(q,N){var U=typeof N?.composedPath=="function"?N.composedPath():void 0;return s.containerGroups.findIndex(function(j){var K=j.container,Q=j.tabbableNodes;return K.contains(q)||U?.includes(K)||Q.find(function(ie){return ie===q})})},p=function(q){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=N.hasFallback,j=U===void 0?!1:U,K=N.params,Q=K===void 0?[]:K,ie=i[q];if(typeof ie=="function"&&(ie=ie.apply(void 0,b$(Q))),ie===!0&&(ie=void 0),!ie){if(ie===void 0||ie===!1)return ie;throw new Error("`".concat(q,"` was specified but was not a node, or did not return a node"))}var G=ie;if(typeof ie=="string"){try{G=n.querySelector(ie)}catch(F){throw new Error("`".concat(q,'` appears to be an invalid selector; error="').concat(F.message,'"'))}if(!G&&!j)throw new Error("`".concat(q,"` as selector refers to no known node"))}return G},f=function(){var q=p("initialFocus",{hasFallback:!0});if(q===!1)return!1;if(q===void 0||q&&!om(q,i.tabbableOptions))if(h(n.activeElement)>=0)q=n.activeElement;else{var N=s.tabbableGroups[0],U=N&&N.firstTabbableNode;q=U||p("fallbackFocus")}else q===null&&(q=p("fallbackFocus"));if(!q)throw new Error("Your focus-trap needs to have at least one focusable element");return q},m=function(){if(s.containerGroups=s.containers.map(function(q){var N=X3(q,i.tabbableOptions),U=J3(q,i.tabbableOptions),j=N.length>0?N[0]:void 0,K=N.length>0?N[N.length-1]:void 0,Q=U.find(function(F){return ac(F)}),ie=U.slice().reverse().find(function(F){return ac(F)}),G=!!N.find(function(F){return xl(F)>0});return{container:q,tabbableNodes:N,focusableNodes:U,posTabIndexesFound:G,firstTabbableNode:j,lastTabbableNode:K,firstDomTabbableNode:Q,lastDomTabbableNode:ie,nextTabbableNode:function(H){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ne=N.indexOf(H);return ne<0?I?U.slice(U.indexOf(H)+1).find(function(ue){return ac(ue)}):U.slice(0,U.indexOf(H)).reverse().find(function(ue){return ac(ue)}):N[ne+(I?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(q){return q.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(q){return q.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},b=function(q){var N=q.activeElement;if(N)return N.shadowRoot&&N.shadowRoot.activeElement!==null?b(N.shadowRoot):N},x=function(q){if(q!==!1&&q!==b(document)){if(!q||!q.focus){x(f());return}q.focus({preventScroll:!!i.preventScroll}),s.mostRecentlyFocusedNode=q,S$(q)&&q.select()}},v=function(q){var N=p("setReturnFocus",{params:[q]});return N||(N===!1?!1:q)},T=function(q){var N=q.target,U=q.event,j=q.isBackward,K=j===void 0?!1:j;N=N||Lf(U),m();var Q=null;if(s.tabbableGroups.length>0){var ie=h(N,U),G=ie>=0?s.containerGroups[ie]:void 0;if(ie<0)K?Q=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:Q=s.tabbableGroups[0].firstTabbableNode;else if(K){var F=s.tabbableGroups.findIndex(function(ke){var me=ke.firstTabbableNode;return N===me});if(F<0&&(G.container===N||om(N,i.tabbableOptions)&&!ac(N,i.tabbableOptions)&&!G.nextTabbableNode(N,!1))&&(F=ie),F>=0){var H=F===0?s.tabbableGroups.length-1:F-1,I=s.tabbableGroups[H];Q=xl(N)>=0?I.lastTabbableNode:I.lastDomTabbableNode}else up(U)||(Q=G.nextTabbableNode(N,!1))}else{var ne=s.tabbableGroups.findIndex(function(ke){var me=ke.lastTabbableNode;return N===me});if(ne<0&&(G.container===N||om(N,i.tabbableOptions)&&!ac(N,i.tabbableOptions)&&!G.nextTabbableNode(N))&&(ne=ie),ne>=0){var ue=ne===s.tabbableGroups.length-1?0:ne+1,xe=s.tabbableGroups[ue];Q=xl(N)>=0?xe.firstTabbableNode:xe.firstDomTabbableNode}else up(U)||(Q=G.nextTabbableNode(N))}}else Q=p("fallbackFocus");return Q},k=function(q){var N=Lf(q);if(!(h(N,q)>=0)){if(Nh(i.clickOutsideDeactivates,q)){l.deactivate({returnFocus:i.returnFocusOnDeactivate});return}Nh(i.allowOutsideClick,q)||q.preventDefault()}},C=function(q){var N=Lf(q),U=h(N,q)>=0;if(U||N instanceof Document)U&&(s.mostRecentlyFocusedNode=N);else{q.stopImmediatePropagation();var j,K=!0;if(s.mostRecentlyFocusedNode)if(xl(s.mostRecentlyFocusedNode)>0){var Q=h(s.mostRecentlyFocusedNode),ie=s.containerGroups[Q].tabbableNodes;if(ie.length>0){var G=ie.findIndex(function(F){return F===s.mostRecentlyFocusedNode});G>=0&&(i.isKeyForward(s.recentNavEvent)?G+1<ie.length&&(j=ie[G+1],K=!1):G-1>=0&&(j=ie[G-1],K=!1))}}else s.containerGroups.some(function(F){return F.tabbableNodes.some(function(H){return xl(H)>0})})||(K=!1);else K=!1;K&&(j=T({target:s.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(s.recentNavEvent)})),x(j||s.mostRecentlyFocusedNode||f())}s.recentNavEvent=void 0},A=function(q){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=q;var U=T({event:q,isBackward:N});U&&(up(q)&&q.preventDefault(),x(U))},D=function(q){(i.isKeyForward(q)||i.isKeyBackward(q))&&A(q,i.isKeyBackward(q))},B=function(q){T$(q)&&Nh(i.escapeDeactivates,q)!==!1&&(q.preventDefault(),l.deactivate())},R=function(q){var N=Lf(q);h(N,q)>=0||Nh(i.clickOutsideDeactivates,q)||Nh(i.allowOutsideClick,q)||(q.preventDefault(),q.stopImmediatePropagation())},M=function(){if(s.active)return mC.activateTrap(a,l),s.delayInitialFocusTimer=i.delayInitialFocus?yC(function(){x(f())}):x(f()),n.addEventListener("focusin",C,!0),n.addEventListener("mousedown",k,{capture:!0,passive:!1}),n.addEventListener("touchstart",k,{capture:!0,passive:!1}),n.addEventListener("click",R,{capture:!0,passive:!1}),n.addEventListener("keydown",D,{capture:!0,passive:!1}),n.addEventListener("keydown",B),l},$=function(){if(s.active)return n.removeEventListener("focusin",C,!0),n.removeEventListener("mousedown",k,!0),n.removeEventListener("touchstart",k,!0),n.removeEventListener("click",R,!0),n.removeEventListener("keydown",D,!0),n.removeEventListener("keydown",B),l},W=function(q){var N=q.some(function(U){var j=Array.from(U.removedNodes);return j.some(function(K){return K===s.mostRecentlyFocusedNode})});N&&x(f())},O=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(W):void 0,Y=function(){O&&(O.disconnect(),s.active&&!s.paused&&s.containers.map(function(q){O.observe(q,{subtree:!0,childList:!0})}))};return l={get active(){return s.active},get paused(){return s.paused},activate:function(q){if(s.active)return this;var N=d(q,"onActivate"),U=d(q,"onPostActivate"),j=d(q,"checkCanFocusTrap");j||m(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=b(n),N?.();var K=function(){j&&m(),M(),Y(),U?.()};return j?(j(s.containers.concat()).then(K,K),this):(K(),this)},deactivate:function(q){if(!s.active)return this;var N=fC({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},q);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,$(),s.active=!1,s.paused=!1,Y(),mC.deactivateTrap(a,l);var U=d(N,"onDeactivate"),j=d(N,"onPostDeactivate"),K=d(N,"checkCanReturnFocus"),Q=d(N,"returnFocus","returnFocusOnDeactivate");U?.();var ie=function(){yC(function(){Q&&x(v(s.nodeFocusedBeforeActivation)),j?.()})};return Q&&K?(K(v(s.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(q){return s.active?(s.manuallyPaused=!0,this._setPausedState(!0,q)):this},unpause:function(q){return s.active?(s.manuallyPaused=!1,a[a.length-1]!==this?this:this._setPausedState(!1,q)):this},updateContainerElements:function(q){var N=[].concat(q).filter(Boolean);return s.containers=N.map(function(U){return typeof U=="string"?n.querySelector(U):U}),s.active&&m(),Y(),this}},Object.defineProperties(l,{_isManuallyPaused:{value:function(){return s.manuallyPaused}},_setPausedState:{value:function(q,N){if(s.paused===q)return this;if(s.paused=q,q){var U=d(N,"onPause"),j=d(N,"onPostPause");U?.(),$(),Y(),j?.()}else{var K=d(N,"onUnpause"),Q=d(N,"onPostUnpause");K?.(),m(),M(),Y(),Q?.()}return this}}}),l.updateContainerElements(t),l};const A$=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:_$},Symbol.toStringTag,{value:"Module"})),N$=zN(A$),L$=zN(p$);var bC;function P$(){if(bC)return Nf.exports;bC=1;function e(M){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},e(M)}var t,r;function n(M,$){if(!(M instanceof $))throw new TypeError("Cannot call a class as a function")}function a(M,$){for(var W=0;W<$.length;W++){var O=$[W];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(M,x(O.key),O)}}function i(M,$,W){return $&&a(M.prototype,$),Object.defineProperty(M,"prototype",{writable:!1}),M}function s(M,$,W){return $=p($),l(M,h()?Reflect.construct($,W||[],p(M).constructor):$.apply(M,W))}function l(M,$){if($&&(e($)=="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(M)}function d(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function h(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h=function(){return!!M})()}function p(M){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($){return $.__proto__||Object.getPrototypeOf($)},p(M)}function f(M,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create($&&$.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),$&&m(M,$)}function m(M,$){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,O){return W.__proto__=O,W},m(M,$)}function b(M,$,W){return($=x($))in M?Object.defineProperty(M,$,{value:W,enumerable:!0,configurable:!0,writable:!0}):M[$]=W,M}function x(M){var $=v(M,"string");return e($)=="symbol"?$:$+""}function v(M,$){if(e(M)!="object"||!M)return M;var W=M[Symbol.toPrimitive];if(W!==void 0){var O=W.call(M,$);if(e(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(M)}var T=Yp(),k=N$,C=k.createFocusTrap,A=L$,D=A.isFocusable,B=parseInt((t=(r=/^(\d+)\./.exec(T.version))===null||r===void 0?void 0:r[1])!==null&&t!==void 0?t:0,10),R=(function(M){function $(W){var O;n(this,$),O=s(this,$,[W]),b(O,"getNodeForOption",function(q){var N,U=(N=this.internalOptions[q])!==null&&N!==void 0?N:this.originalOptions[q];if(typeof U=="function"){for(var j=arguments.length,K=new Array(j>1?j-1:0),Q=1;Q<j;Q++)K[Q-1]=arguments[Q];U=U.apply(void 0,K)}if(U===!0&&(U=void 0),!U){if(U===void 0||U===!1)return U;throw new Error("`".concat(q,"` was specified but was not a node, or did not return a node"))}var ie=U;if(typeof U=="string"){var G;if(ie=(G=this.getDocument())===null||G===void 0?void 0:G.querySelector(U),!ie)throw new Error("`".concat(q,"` as selector refers to no known node"))}return ie}),O.handleDeactivate=O.handleDeactivate.bind(O),O.handlePostDeactivate=O.handlePostDeactivate.bind(O),O.handleClickOutsideDeactivates=O.handleClickOutsideDeactivates.bind(O),O.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:O.handleDeactivate,onPostDeactivate:O.handlePostDeactivate,clickOutsideDeactivates:O.handleClickOutsideDeactivates},O.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Y=W.focusTrapOptions;for(var X in Y)if(Object.prototype.hasOwnProperty.call(Y,X)){if(X==="returnFocusOnDeactivate"||X==="onDeactivate"||X==="onPostDeactivate"||X==="checkCanReturnFocus"||X==="clickOutsideDeactivates"){O.originalOptions[X]=Y[X];continue}O.internalOptions[X]=Y[X]}return O.outsideClick=null,O.focusTrapElements=W.containerElements||[],O.updatePreviousElement(),O}return f($,M),i($,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var O=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return O||(O===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var O=this.getDocument();O&&(this.previouslyFocusedElement=O.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(O){var Y=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,O):this.originalOptions.clickOutsideDeactivates;return Y&&(this.outsideClick={target:O.target,allowDeactivation:Y}),Y}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var O=this,Y=function(){var q=O.getReturnFocusNode(),N=!!(O.originalOptions.returnFocusOnDeactivate&&q!==null&&q!==void 0&&q.focus&&(!O.outsideClick||O.outsideClick.allowDeactivation&&!D(O.outsideClick.target,O.internalOptions.tabbableOptions))),U=O.internalOptions.preventScroll,j=U===void 0?!1:U;N&&q.focus({preventScroll:j}),O.originalOptions.onPostDeactivate&&O.originalOptions.onPostDeactivate.call(null),O.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Y,Y):Y()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var O=this.focusTrapElements.some(Boolean);O&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(O){if(this.focusTrap){O.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Y=!O.active&&this.props.active,X=O.active&&!this.props.active,q=!O.paused&&this.props.paused,N=O.paused&&!this.props.paused;if(Y&&(this.updatePreviousElement(),this.focusTrap.activate()),X){this.deactivateTrap();return}q&&this.focusTrap.pause(),N&&this.focusTrap.unpause()}else O.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var O=this,Y=this.props.children?T.Children.only(this.props.children):void 0;if(Y){if(Y.type&&Y.type===T.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var X=function(U){var j=O.props.containerElements;Y&&(B>=19?typeof Y.props.ref=="function"?Y.props.ref(U):Y.props.ref&&(Y.props.ref.current=U):typeof Y.ref=="function"?Y.ref(U):Y.ref&&(Y.ref.current=U)),O.focusTrapElements=j||[U]},q=T.cloneElement(Y,{ref:X});return q}return null}}])})(T.Component);return R.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:C},Nf.exports=R,Nf.exports.FocusTrap=R,Nf.exports}var t1=P$();const R$="PlanningDB",I$=1,Vi="plans",Pf=50;class D${db=null;initPromise=null;async init(){return this.initPromise?this.initPromise:(this.initPromise=this._init(),this.initPromise)}async _init(){if(!this.db)try{this.db=await P0(R$,I$,{upgrade(t){const r=t.createObjectStore(Vi,{keyPath:"id"});r.createIndex("by-timestamp","timestamp"),r.createIndex("by-query","query"),console.log(" PlanningDB object store created")}}),console.log(" PlanningDB initialized"),await this.migrateFromLocalStorage()}catch(t){throw console.error(" Error initializing PlanningDB:",t),t}}async migrateFromLocalStorage(){if(localStorage.getItem("plans_migrated_to_idb")==="true"){console.log(" Plans already migrated to IndexedDB");return}try{const r=localStorage.getItem("llm_proxy_planning_cache");if(!r){console.log(" No plans in localStorage to migrate"),localStorage.setItem("plans_migrated_to_idb","true");return}const n=JSON.parse(r);if(!Array.isArray(n)||n.length===0){console.log(" No valid plans in localStorage to migrate"),localStorage.setItem("plans_migrated_to_idb","true");return}const a=this.db.transaction(Vi,"readwrite"),i=a.objectStore(Vi);let s=0;for(const l of n)try{await i.put(l),s++}catch(d){console.error(`Error migrating plan ${l.id}:`,d)}await a.done,console.log(` Migrated ${s} of ${n.length} plans from localStorage to IndexedDB`),localStorage.setItem("plans_migrated_to_idb","true")}catch(r){throw console.error(" Error during plan migration:",r),r}}async ensureInit(){this.db||await this.init()}async savePlan(t){await this.ensureInit();try{await this.db.put(Vi,t),console.log(` Plan saved to IndexedDB: ${t.query.substring(0,50)}...`),await this.pruneOldPlans()}catch(r){throw console.error(" Error saving plan to IndexedDB:",r),r}}async getAllPlans(){await this.ensureInit();try{return(await this.db.getAll(Vi)).sort((r,n)=>n.timestamp-r.timestamp)}catch(t){return console.error(" Error reading plans from IndexedDB:",t),[]}}async getPlan(t){await this.ensureInit();try{return await this.db.get(Vi,t)}catch(r){console.error(` Error reading plan ${t} from IndexedDB:`,r);return}}async deletePlan(t){await this.ensureInit();try{await this.db.delete(Vi,t),console.log(` Plan deleted from IndexedDB: ${t}`)}catch(r){throw console.error(` Error deleting plan ${t} from IndexedDB:`,r),r}}async clear(){await this.ensureInit();try{await this.db.clear(Vi),console.log(" All plans cleared from IndexedDB")}catch(t){throw console.error(" Error clearing plans from IndexedDB:",t),t}}async replacePlans(t){await this.ensureInit();try{const r=this.db.transaction(Vi,"readwrite"),n=r.objectStore(Vi);await n.clear();for(const a of t)await n.put(a);await r.done,console.log(` Replaced all plans with ${t.length} items from sync`)}catch(r){throw console.error(" Error replacing plans in IndexedDB:",r),r}}async getPlansModifiedSince(t){await this.ensureInit();try{return(await this.getAllPlans()).filter(n=>n.timestamp>t)}catch(r){return console.error(" Error getting modified plans:",r),[]}}async pruneOldPlans(){try{const t=await this.getAllPlans();if(t.length<=Pf)return;const n=t.sort((s,l)=>l.timestamp-s.timestamp).slice(Pf),a=this.db.transaction(Vi,"readwrite"),i=a.objectStore(Vi);for(const s of n)await i.delete(s.id);await a.done,console.log(` Pruned ${n.length} old plans (keeping ${Pf} most recent)`)}catch(t){console.error(" Error pruning old plans:",t)}}async getStorageEstimate(){if("storage"in navigator&&"estimate"in navigator.storage)try{const t=await navigator.storage.estimate(),r=t.usage||0,n=t.quota||0,a=n>0?r/n*100:0;return{usage:r,quota:n,percentage:a}}catch(t){return console.error("Error getting storage estimate:",t),null}return null}async requestPersistentStorage(){if("storage"in navigator&&"persist"in navigator.storage)try{if(!await navigator.storage.persisted()){const r=await navigator.storage.persist();return console.log("Persistent storage request:",r?"granted":"denied"),r}return console.log("Storage is already persistent"),!0}catch(t){return console.error("Error requesting persistent storage:",t),!1}return console.warn("Persistent storage API not available"),!1}mergePlans(t,r){const n=new Map;return t.forEach(a=>{const i=a.query.trim().toLowerCase();n.set(i,a)}),r.forEach(a=>{const i=a.query.trim().toLowerCase(),s=n.get(i);(!s||a.timestamp>s.timestamp)&&n.set(i,a)}),Array.from(n.values()).sort((a,i)=>i.timestamp-a.timestamp).slice(0,Pf)}}const Sl=new D$;function M$(){return`plan_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function O$(){return M$()}async function r1(){try{return await Sl.getAllPlans()}catch(e){return console.error("Error reading planning cache:",e),[]}}async function j$(e,t,r,n){try{const a=await r1(),i=e.trim().toLowerCase(),s=a.find(d=>d.query.trim().toLowerCase()===i),l={id:s?.id||O$(),query:e.trim(),plan:t,systemPrompt:r,userPrompt:n,timestamp:Date.now()};await Sl.savePlan(l),console.log(`Plan saved ${s?"(replaced duplicate)":"(new)"}:`,e.trim()),Yn.isEnabled()&&Yn.queueSync("plans","high")}catch(a){throw console.error("Error saving plan to cache:",a),a instanceof DOMException&&(a.name==="QuotaExceededError"||a.code===22)?(console.error("Storage quota exceeded. Consider:",`
1. Deleting old saved plans`,`
2. Clearing browser data`,`
3. Using persistent storage (navigator.storage.persist())`),new Error("Storage quota exceeded. Please delete some old plans to free up space, or clear your browser cache.")):a}}async function B$(e){try{await Sl.deletePlan(e),Yn.isEnabled()&&Yn.queueSync("plans","high")}catch(t){throw console.error("Error deleting cached plan:",t),t}}async function S0e(){try{await Sl.clear()}catch(e){throw console.error("Error clearing planning cache:",e),e}}async function F$(){return await Sl.getStorageEstimate()}const z$=({onClose:e})=>u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"LLM Transparency Info"}),u.jsx("button",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",onClick:e,children:""})]});function Pw(e,t=!0){if(e===null)return"N/A";const r=t?"$":"";return e<1e-4?`${r}${e.toFixed(6)}`:e<.01?`${r}${e.toFixed(4)}`:`${r}${e.toFixed(4)}`}const U$=({call:e})=>{function t(n){switch(n.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-400",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-100 dark:bg-pink-900/30",border:"border-pink-400",text:"text-pink-700 dark:text-pink-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-400",text:"text-blue-700 dark:text-blue-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-100 dark:bg-indigo-900/30",border:"border-indigo-400",text:"text-indigo-700 dark:text-indigo-300",icon:""};default:return{label:"Chat",color:"bg-gray-100 dark:bg-gray-900/30",border:"border-gray-400",text:"text-gray-700 dark:text-gray-300",icon:""}}}const r=t(e);return u.jsxs("div",{className:`border rounded-lg p-4 mb-2 ${r.color} ${r.border||""}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("span",{className:`font-semibold ${r.text}`,children:[r.icon," ",r.label]}),u.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.provider,"  ",e.model]})]}),u.jsx("div",{className:"mb-2",children:u.jsxs("span",{className:"font-mono text-sm",children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]})}),u.jsxs("div",{className:"mb-2",children:[e.cost!==void 0&&u.jsxs("span",{className:"font-semibold text-pink-700 dark:text-pink-300",children:[" ",Pw(e.cost)]}),e.durationMs&&u.jsxs("span",{className:"ml-2",children:[" ",(e.durationMs/1e3).toFixed(2),"s"]}),e.success!==void 0&&u.jsx("span",{className:e.success?"text-green-600 dark:text-green-400 ml-2":"text-red-600 dark:text-red-400 ml-2",children:e.success?" Success":" Failed"})]})]})},$$=({totalTokens:e,totalPromptTokens:t,totalCompletionTokens:r,totalActualCost:n,totalPaidEquivalent:a,hasPricing:i,hasFreeModels:s,onClose:l})=>u.jsxs("div",{className:"mt-6 border-t pt-4 text-sm text-gray-700 dark:text-gray-300",children:[u.jsxs("div",{className:"mb-2",children:["Total tokens: ",u.jsx("span",{className:"font-mono font-semibold",children:e})]}),u.jsxs("div",{className:"mb-2",children:["Prompt tokens: ",u.jsx("span",{className:"font-mono",children:t})," | Completion tokens: ",u.jsx("span",{className:"font-mono",children:r})]}),u.jsxs("div",{className:"mb-2",children:["Actual cost: ",u.jsx("span",{className:"font-mono font-semibold",children:n})]}),i&&u.jsxs("div",{className:"mb-2",children:["Paid equivalent: ",u.jsx("span",{className:"font-mono",children:a})]}),s&&u.jsx("div",{className:"mb-2 text-green-600 dark:text-green-400",children:"Some calls used free tier models."}),u.jsx("button",{className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors mt-4",onClick:l,children:"Close"})]}),q$=({apiCalls:e,onClose:t})=>u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 dark:bg-opacity-60",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg w-full max-w-3xl p-6 relative",children:[u.jsx(z$,{onClose:t}),u.jsx("div",{className:"space-y-4",children:e.length===0?u.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((h,p)=>u.jsx(U$,{call:h},p))}),u.jsx($$,{totalTokens:0,totalPromptTokens:0,totalCompletionTokens:0,totalActualCost:0,totalPaidEquivalent:0,hasPricing:!1,hasFreeModels:!1,onClose:t})]})}),H$={groq:/^gsk_[a-zA-Z0-9]{32,}$/,openai:/^sk-[a-zA-Z0-9_-]{20,}$/,gemini:/^AIza[a-zA-Z0-9_-]{35}$/,together:/^[a-zA-Z0-9_-]{32,}$/,atlascloud:/^apikey-[a-f0-9]{32}$/,"openai-compatible":/.+/,replicate:/^r8_[a-zA-Z0-9]{40}$/};function G$(e,t){return!e||e.trim()===""?{valid:!1,error:"API key is required"}:H$[t].test(e)?{valid:!0}:{valid:!1,error:{groq:'Groq API key must start with "gsk_" followed by at least 32 characters',openai:'OpenAI API key must start with "sk-" followed by at least 20 characters',gemini:'Gemini API key must start with "AIza" followed by 35 characters',together:"Together AI API key must be at least 32 characters",atlascloud:'Atlas Cloud API key must start with "apikey-" followed by 32 hex characters',"openai-compatible":"API key cannot be empty",replicate:'Replicate API key must start with "r8_" followed by 40 characters'}[t]}}function W$(e){if(!e||e.trim()==="")return{valid:!1,error:"Endpoint URL is required"};try{return new URL(e).protocol!=="https:"?{valid:!1,error:"Endpoint must use HTTPS protocol"}:{valid:!0}}catch{return{valid:!1,error:"Invalid URL format"}}}function V$(e){return!e||e.trim()===""?{valid:!1,error:"Model name is required for OpenAI-compatible providers"}:{valid:!0}}function Y$(e){return e!==void 0&&(isNaN(e)||e<0)?{valid:!1,error:"Rate limit must be a positive number or empty"}:{valid:!0}}function xC(e){const t={};if(e.type||(t.type="Provider type is required"),e.type){const r=G$(e.apiKey||"",e.type);r.valid||(t.apiKey=r.error)}if(e.type==="openai-compatible"){const r=W$(e.apiEndpoint||"");r.valid||(t.apiEndpoint=r.error);const n=V$(e.modelName);n.valid||(t.modelName=n.error);const a=Y$(e.rateLimitTPM);a.valid||(t.rateLimitTPM=a.error)}return{valid:Object.keys(t).length===0,errors:t}}function T0e(e){if(!e||e.length<12)return"";const t=e.slice(0,4),r=e.slice(-4),n=Math.max(8,e.length-8);return`${t}${"".repeat(n)}${r}`}function vC(e,t){return e.type===t.type&&e.apiKey===t.apiKey}function Q$(){const{settings:e,setSettings:t}=Al(),r=_.useCallback(s=>{const l=xC(s);if(!l.valid)return{success:!1,error:Object.values(l.errors)[0]};const d={...s,id:crypto.randomUUID(),enabled:!0};return e.providers.find(p=>vC(p,d))?{success:!1,error:"A provider with this type and API key already exists"}:(t({...e,providers:[...e.providers,d]}),{success:!0})},[e,t]),n=_.useCallback((s,l)=>{const d=e.providers.find(f=>f.id===s);if(!d)return{success:!1,error:"Provider not found"};const h={...d,...l};if(!("enabled"in l&&Object.keys(l).length===1)){const f=xC(h);if(!f.valid)return{success:!1,error:Object.values(f.errors)[0]};if(e.providers.find(b=>b.id!==s&&vC(b,h)))return{success:!1,error:"A provider with this type and API key already exists"}}const p=e.providers.map(f=>f.id===s?h:f);return t({...e,providers:p}),{success:!0}},[e,t]),a=_.useCallback(s=>{t({...e,providers:e.providers.filter(l=>l.id!==s)})},[e,t]),i=_.useCallback(s=>e.providers.find(l=>l.id===s),[e.providers]);return{providers:e.providers,addProvider:r,updateProvider:n,deleteProvider:a,getProvider:i}}const Z3=({isOpen:e,onClose:t,onTranscriptionComplete:r,accessToken:n,apiEndpoint:a})=>{const i=Jp(e,t,!1),{providers:s}=Q$(),[l,d]=_.useState(!1),[h,p]=_.useState(0),[f,m]=_.useState(""),[b,x]=_.useState(null),[v,T]=_.useState(!1),k=_.useRef(null),C=_.useRef(null),A=_.useRef(null),D=_.useRef([]),B=_.useRef(null),R=_.useRef(null),M=_.useRef(null),$=_.useCallback(()=>{B.current&&cancelAnimationFrame(B.current),R.current&&clearTimeout(R.current),k.current&&k.current.state!=="inactive"&&k.current.stop(),M.current&&M.current.getTracks().forEach(N=>N.stop()),C.current&&C.current.state!=="closed"&&C.current.close().catch(N=>{console.warn("Failed to close AudioContext:",N)}),d(!1),p(0)},[]),W=async()=>{try{x(null),D.current=[];const N=await navigator.mediaDevices.getUserMedia({audio:!0});M.current=N;const U=new(window.AudioContext||window.webkitAudioContext);C.current=U;const j=U.createMediaStreamSource(N),K=U.createAnalyser();K.fftSize=256,A.current=K,j.connect(K);const Q=new MediaRecorder(N);k.current=Q,Q.ondataavailable=ie=>{ie.data.size>0&&D.current.push(ie.data)},Q.onstop=async()=>{const ie=new Blob(D.current,{type:"audio/webm"});await q(ie)},Q.start(),d(!0),O(),Y()}catch(N){console.error("Error starting recording:",N),x("Failed to access microphone. Please check permissions.")}},O=()=>{if(!A.current||!l)return;const N=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(N);const U=N.reduce((K,Q)=>K+Q)/N.length,j=Math.min(U/128,1);p(j),B.current=requestAnimationFrame(O)},Y=()=>{if(!A.current)return;const N=new Uint8Array(A.current.frequencyBinCount);A.current.getByteFrequencyData(N);const U=N.reduce((Q,ie)=>Q+ie)/N.length,j=10,K=2e3;U<j?R.current||(R.current=setTimeout(()=>{console.log("Silence detected, stopping recording..."),X()},K)):R.current&&(clearTimeout(R.current),R.current=null),l&&setTimeout(Y,100)},X=()=>{$()},q=async N=>{if(!n){x("Not authenticated. Please sign in.");return}T(!0);const U=`web-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log(" Generated request ID for voice transcription:",U);const j=s.find(G=>G.type==="groq"),K=s.find(G=>G.type==="openai"),Q=j?.apiKey||K?.apiKey||null,ie=j?"groq":K?"openai":null;console.log(" Transcription provider:",ie,"hasKey:",!!Q);try{const G=new FormData;G.append("audio",N,"recording.webm"),Q&&ie&&(G.append("apiKey",Q),G.append("provider",ie));const H=`${a.replace("/openai/v1","")}/transcribe`;console.log("Transcribing audio:",{url:H,blobSize:N.size,blobType:N.type,hasToken:!!n,requestId:U,provider:ie,hasApiKey:!!Q});const I=await fetch(H,{method:"POST",headers:{Authorization:`Bearer ${n}`,"X-Request-Id":U},body:G}),ne=await I.json();if(!I.ok){let ke="Unknown error";throw ne.error?ke=typeof ne.error=="string"?ne.error:JSON.stringify(ne.error):I.statusText&&(ke=I.statusText),console.error("Transcription failed:",{status:I.status,data:ne}),new Error(`Transcription failed: ${ke}`)}const ue=ne.text||ne.transcription||"",xe=ne.llmApiCall||null;m(ue),setTimeout(()=>{r(ue,U,xe),t()},500)}catch(G){console.error("Transcription error:",G);let F="Transcription failed";G instanceof TypeError&&G.message.includes("Failed to fetch")?(F="Network error: Could not reach transcription service. Check your internet connection and API endpoint configuration.",console.error("Network error details:",{message:G.message,apiEndpoint:a,transcribeUrl:`${a.replace("/openai/v1","")}/transcribe`})):G instanceof Error&&(F=G.message),x(F)}finally{T(!1)}};return _.useEffect(()=>(e||$(),$),[e,$]),_.useEffect(()=>{e&&(m(""),x(null),!l&&!v&&W())},[e]),e?u.jsx("div",{ref:i,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md p-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:v?" Processing...":l?" Listening...":" Voice Input"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v?"Transcribing your audio...":l?"Speak now. Will auto-stop after 2 seconds of silence.":"Click start to begin recording"})]}),u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"relative h-32 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 flex items-end justify-center gap-1 p-4",children:[...Array(20)].map((N,U)=>{const j=Math.max(.1,h*(1-Math.abs(U-10)/10)*(.8+Math.random()*.4));return u.jsx("div",{className:`flex-1 rounded-t transition-all duration-100 ${l?h>.3?"bg-gradient-to-t from-green-500 to-green-300":"bg-gradient-to-t from-blue-500 to-blue-300":"bg-gray-400"}`,style:{height:`${j*100}%`,opacity:l?1:.3}},U)})}),l&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${h>.3?"bg-green-500/20 animate-pulse":"bg-blue-500/20"}`,children:u.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),u.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})})]})}),f&&u.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:u.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[u.jsx("strong",{children:"Transcription:"})," ",f]})}),b&&u.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:u.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[u.jsx("strong",{children:"Error:"})," ",b]})}),u.jsxs("div",{className:"flex gap-3",children:[l&&!v&&u.jsxs("button",{onClick:X,className:"flex-1 py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),"Stop"]}),u.jsx("button",{onClick:t,disabled:v,className:"flex-1 py-3 px-4 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-gray-100 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Processing...":"Cancel"})]}),u.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 dark:text-gray-400",children:["Press ",u.jsx("kbd",{className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to cancel"]})]})}):null},K$=({isOpen:e,onClose:t,onTransferToChat:r})=>{const{t:n}=yd(),a=Jp(e,t),{getToken:i,isAuthenticated:s,accessToken:l}=rs(),{settings:d}=Al(),{showError:h,showSuccess:p}=Mc(),[f,m]=Ai("planning_query",""),[b,x]=Ai("planning_result",null),[v,T]=_.useState(!1),[k,C]=_.useState(""),[A,D]=_.useState(!1),[B,R]=_.useState([]),[M,$]=_.useState(""),[W,O]=_.useState(null),[Y,X]=_.useState(null),[q,N]=_.useState(!1),[U,j]=_.useState(!1),[K,Q]=_.useState("query"),[ie,G]=_.useState(0),F=_.useRef(null),H=_.useRef(null),I=_.useRef(null),[ne,ue]=Ai("planning_dialog_generated_system_prompt",""),[xe,ke]=Ai("planning_dialog_generated_user_query",""),[me,Me]=_.useState(""),[ge,Be]=_.useState(""),[ct,yt]=_.useState(""),tr=ae=>{ae&&(ae.style.height="auto",ae.style.height=ae.scrollHeight+"px")};_.useEffect(()=>{tr(F.current)},[f]),_.useEffect(()=>{tr(H.current)},[ne]),_.useEffect(()=>{tr(I.current)},[xe]),_.useEffect(()=>{An().then(ae=>{$(ae),console.log(" API endpoint for planning voice input:",ae)})},[]),_.useEffect(()=>{A&&(r1().then(ae=>{R(ae)}),wr())},[A]);const wr=async()=>{const ae=await F$();O(ae)};_.useEffect(()=>{b&&b.queryType==="guidance"?(f&&Me(f),ne&&Be(ne),xe&&yt(xe),ue(""),ke("")):b&&b.queryType!=="guidance"&&me&&(ge&&ue(ge),ct&&ke(ct),Me(""),Be(""),yt(""))},[b]);const Et=async()=>{if(!s){console.error("User not authenticated"),h(n("planning.signInRequired")),x({error:n("planning.authRequired")});return}if(!f.trim()){h(n("planning.enterResearchQuestion"));return}if(!v){T(!0),x(null),C(n("planning.initializing"));try{const ae=await i();if(!ae){console.error("No valid token available"),h(n("planning.authExpired")),x({error:n("planning.authExpired")}),T(!1);return}console.log(" Planning with token:",{tokenLength:ae.length,tokenPrefix:ae.substring(0,20)+"...",isAuthenticated:s,hasProviders:d.providers.length});const Ce=d.providers.filter(rt=>rt.enabled===!0);console.log(` Enabled providers: ${Ce.length} (server may have additional credentials)`),await Vv(f,ae,Ce,void 0,(rt,Qe)=>{switch(console.log("Planning SSE event:",rt,Qe),rt){case"status":console.log("Status:",Qe.message),C(Qe.message||"Processing...");break;case"result":x(Qe),Qe.enhancedSystemPrompt&&ue(Qe.enhancedSystemPrompt),Qe.enhancedUserPrompt&&ke(Qe.enhancedUserPrompt);break;case"llm_response":X(Qe),console.log("Captured LLM transparency info:",Qe);break;case"error":const dt=Qe.error||"Unknown error",nr=Qe.provider&&Qe.model?` (Provider: ${Qe.provider}, Model: ${Qe.model})`:"",un=`${dt}${nr}`;let br="";dt.includes("Invalid API Key")||dt.includes("401")?br=`

 Tip: Check your API key in Settings. Make sure it's valid and hasn't expired.`:(Qe.isRateLimit||dt.includes("rate limit"))&&(br=`

 Tip: You've hit the rate limit. Try again in a few moments or use a different provider.`),x({error:un+br}),h(`Planning error: ${un}${br}`);break;case"llm_error":console.error("LLM Error:",Qe);const Sr=Qe.error||"LLM request failed",Mr=Qe.provider&&Qe.modelName?` (${Qe.provider}:${Qe.modelName})`:"";h(`LLM Error${Mr}: ${Sr}`);break}},()=>{console.log("Planning stream complete"),T(!1),C("")},rt=>{console.error("Planning stream error:",rt),x({error:rt.message}),h(`Planning failed: ${rt.message}`),T(!1),C("")},{language:d.language||"en"})}catch(ae){console.error("Planning error:",ae);const Ce=ae instanceof Error?ae.message:"Unknown error";x({error:Ce}),h(`Planning error: ${Ce}`),T(!1),C("")}}},Ar=()=>{if(!xe||!r)return;const ae={prompt:xe,persona:ne||"",planningQuery:f,generatedSystemPrompt:ne,generatedUserQuery:xe};console.log(" PlanningDialog - Creating transfer data:",ae);const Ce=JSON.stringify(ae);console.log(" PlanningDialog - JSON string length:",Ce.length),r(Ce),t()},$t=()=>{const ae={query:f,result:b,generatedSystemPrompt:ne,generatedUserPrompt:xe,llmInfo:Y,timestamp:new Date().toISOString()},Ce=`=== Planning Debug Info for Copilot ===
Generated at: ${ae.timestamp}

--- User Query ---
${ae.query||"(none)"}

--- Planning Result (Full Response) ---
${JSON.stringify(ae.result,null,2)}

--- Generated System Prompt ---
${ae.generatedSystemPrompt||"(none)"}

--- Generated User Query ---
${ae.generatedUserPrompt||"(none)"}

--- LLM Request/Response Details ---
${JSON.stringify(ae.llmInfo,null,2)}

=== End Debug Info ===`;navigator.clipboard.writeText(Ce).then(()=>{p(n("planning.debugCopied"))},()=>{h(n("planning.debugCopyFailed"))})},or=ae=>{m(ae.query),x(ae.plan),ae.plan&&!ae.plan.error&&(ae.plan.enhancedSystemPrompt&&ue(ae.plan.enhancedSystemPrompt),ae.plan.enhancedUserPrompt&&ke(ae.plan.enhancedUserPrompt)),ae.systemPrompt&&ue(ae.systemPrompt),ae.userPrompt&&ke(ae.userPrompt),D(!1)},bt=async ae=>{await B$(ae);const Ce=await r1();R(Ce)},It=async()=>{if(!b||b.error){h(n("planning.cannotSavePlan"));return}try{await j$(f,b,b.enhancedSystemPrompt||ne||"",b.enhancedUserPrompt||xe||""),p(n("planning.planSavedSuccess")),console.log("Plan manually saved to cache with system and user prompts")}catch(ae){h(ae instanceof Error?ae.message:n("planning.planSaveFailed"))}},mn=()=>{m(""),x(null),ue(""),ke(""),localStorage.removeItem("planning_dialog_generated_system_prompt"),localStorage.removeItem("planning_dialog_generated_user_query"),localStorage.removeItem("planning_query"),localStorage.removeItem("planning_result"),console.log("Planning dialog cleared completely")},Jt=ae=>{console.log(" Voice transcription received for planning:",ae);let Ce="",rt,Qe=null;switch(K){case"systemPrompt":Ce=ne,rt=ue,Qe=H.current;break;case"userQuery":Ce=xe,rt=ke,Qe=I.current;break;case"query":default:Ce=f,rt=m,Qe=F.current;break}const dt=Ce.substring(0,ie),nr=Ce.substring(ie),un=dt+ae+nr;rt(un),Qe&&setTimeout(()=>{const br=ie+ae.length;Qe.selectionStart=br,Qe.selectionEnd=br,Qe.focus(),G(br)},0)},Ut=ae=>{Q(ae)},yn=ae=>{ae&&G(ae.selectionStart)};return e?u.jsxs(u.Fragment,{children:[u.jsx(t1.FocusTrap,{active:e,children:u.jsx("div",{ref:a,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n("planning.title")}),u.jsx("div",{className:"ml-4",children:u.jsxs("button",{onClick:It,disabled:!b||b.error,className:"btn-primary text-sm flex items-center gap-1.5",title:n("planning.savePlanTooltip"),children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),n("planning.savePlan")]})}),u.jsxs("button",{onClick:()=>D(!0),className:"btn-secondary text-sm flex items-center gap-1.5",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),n("planning.loadSaved")]}),u.jsxs("button",{onClick:()=>j(!0),disabled:!s,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:s?"Voice input - transcribe speech into last selected field":n("auth.signInRequired"),children:[u.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),u.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]}),""]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:$t,disabled:!f&&!b,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:n("planning.debugTooltip"),children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),n("planning.debug")]}),r&&u.jsxs("button",{onClick:Ar,disabled:!xe||!xe.trim(),className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n("planning.transferToChat")]}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":n("common.close"),children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[v&&k&&u.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),u.jsx("div",{className:"ml-3",children:u.jsx("p",{className:"text-sm text-blue-700",children:k})})]})}),!(b&&b.queryType==="guidance")&&u.jsxs("div",{className:"card p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("planning.query")}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:Et,disabled:v||!f.trim(),title:s?f.trim()?n(v?"planning.planning":"planning.generatePlan"):n("planning.enterResearchQuestion"):n("planning.signInRequired"),className:`${s?"bg-green-600 hover:bg-green-700":"bg-yellow-500 hover:bg-yellow-600"} disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5`,children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),n(v?"planning.generating":s?"planning.generatePlan":"planning.signInToGenerate")]}),u.jsxs("button",{onClick:mn,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",title:n("planning.clearAllTooltip"),children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n("planning.clearAll")]})]})]}),s?u.jsx(u.Fragment,{children:u.jsx("textarea",{ref:F,value:f,onChange:ae=>m(ae.target.value),onFocus:()=>Ut("query"),onClick:()=>yn(F.current),onKeyUp:()=>yn(F.current),placeholder:n("planning.enterQuery"),className:"input-field resize-none overflow-hidden",style:{minHeight:"120px"}})}):u.jsx("div",{className:"text-center text-red-500 py-4",children:n("planning.signInToUsePlanning")})]}),ne&&!(b&&b.queryType==="guidance")&&u.jsxs("div",{className:"card p-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:n("planning.generatedPrompts")}),Y&&u.jsxs("button",{onClick:()=>N(!0),className:"btn-secondary text-xs px-3 py-1.5 flex items-center gap-1",title:n("planning.llmInfoTooltip"),children:[" $",(Y.cost||0).toFixed(4),"  ",Y.calls||1," ",Y.calls>1?n("planning.llmCallsPlural"):n("planning.llmCalls")," "]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:n("planning.systemPromptEditable")}),u.jsx("textarea",{ref:H,value:ne,onChange:ae=>ue(ae.target.value),onFocus:()=>Ut("systemPrompt"),onClick:()=>yn(H.current),onKeyUp:()=>yn(H.current),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.systemPromptHelp")})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100",children:n("planning.userQueryEditable")}),u.jsx("textarea",{ref:I,value:xe,onChange:ae=>ke(ae.target.value),onFocus:()=>Ut("userQuery"),onClick:()=>yn(I.current),onKeyUp:()=>yn(I.current),className:"input-field resize-none overflow-hidden w-full",style:{minHeight:"96px"}}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.userQueryHelp")})]})]})]}),b&&!b.error&&u.jsx("div",{className:"card p-4",children:u.jsxs("div",{className:"space-y-4",children:[b.queryType==="SIMPLE"&&u.jsxs("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20",children:[u.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:n("planning.simpleQueryDetected")}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.simpleInstruction}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:n("planning.simpleQueryHelp")})]}),b.queryType==="OVERVIEW"&&u.jsxs("div",{className:"card p-4 space-y-4",children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:n("planning.comprehensiveResearchPlan")}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-800 dark:text-gray-200",children:n("planning.analysisSummary")}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.queryType")}),u.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:b.queryType})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.complexity")}),u.jsx("span",{className:"ml-2 px-2 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded",children:b.complexityAssessment})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.researchApproach")}),u.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:b.researchApproach})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.estimatedSources")}),u.jsx("span",{className:"ml-2 px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded",children:b.estimatedSources||"N/A"})]})]}),b.reasoning&&u.jsxs("div",{className:"mt-2",children:[u.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:n("planning.reasoning")}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:b.reasoning})]})]}),b.persona&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:n("planning.expertPersona")}),u.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:b.persona})]}),b.searchStrategies?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.searchQueries")}),u.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:u.jsx("ul",{className:"space-y-1",children:b.searchStrategies.map((ae,Ce)=>u.jsxs("li",{className:"text-sm text-green-700 dark:text-green-300 flex items-start",children:[u.jsx("span",{className:"text-green-500 mr-2",children:""}),u.jsxs("span",{children:['"',ae,'"']})]},Ce))})})]}),b.researchQuestions?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.researchQuestions")}),u.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:u.jsx("ul",{className:"list-decimal list-inside space-y-1 text-sm",children:b.researchQuestions.map((ae,Ce)=>u.jsx("li",{className:"text-purple-700 dark:text-purple-300",children:ae},Ce))})})]}),b.suggestedSources?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.suggestedSources")}),u.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 p-3 rounded-lg",children:u.jsx("div",{className:"space-y-2",children:b.suggestedSources.map((ae,Ce)=>u.jsxs("div",{className:"text-sm",children:[u.jsxs("div",{className:"font-medium text-teal-800 dark:text-teal-200 capitalize",children:[ae.type," ",n("planning.sources")]}),u.jsx("div",{className:"text-teal-700 dark:text-teal-300 ml-2",children:ae.examples?ae.examples.join(", "):n("planning.variousRelevantSources")})]},Ce))})})]}),b.methodology&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.researchMethodology")}),u.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:u.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:b.methodology})})]}),b.enhancedSystemPrompt&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced System Prompt:"}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:u.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:b.enhancedSystemPrompt})})]}),b.enhancedUserPrompt&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:" Enhanced User Prompt:"}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg border",children:u.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-mono",children:b.enhancedUserPrompt})})]}),u.jsxs("details",{className:"bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",children:[u.jsx("summary",{className:"text-sm font-medium cursor-pointer text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:" Debug: Raw LLM Response Fields"}),u.jsx("div",{className:"mt-3 space-y-2 text-xs",children:Object.entries(b).map(([ae,Ce])=>ae.startsWith("_")||typeof Ce=="object"?null:u.jsxs("div",{className:"flex",children:[u.jsxs("span",{className:"font-mono text-gray-500 dark:text-gray-400 w-32 flex-shrink-0",children:[ae,":"]}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300 break-all",children:typeof Ce=="string"?Ce:JSON.stringify(Ce)})]},ae))})]})]}),b.queryType==="LONG_FORM"&&u.jsxs("div",{className:"card p-4 space-y-4",children:[u.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:n("planning.longFormDocumentPlan")}),u.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded text-sm",children:[u.jsx("strong",{children:"Note:"})," ",n("planning.longFormNote")]}),b.documentSections?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.documentStructure")}),b.documentSections.map((ae,Ce)=>u.jsxs("div",{className:"ml-4 mb-3 p-2 bg-gray-50 dark:bg-gray-900 rounded",children:[u.jsxs("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:[Ce+1,". ",ae.title]}),u.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[n("planning.keywords"),": ",ae.keywords.join(", ")]}),ae.questions?.length>0&&u.jsx("ul",{className:"text-xs mt-1 ml-4 list-disc list-inside",children:ae.questions.map((rt,Qe)=>u.jsx("li",{children:rt},Qe))})]},Ce))]}),b.snippetWorkflow&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.workflow")}),u.jsx("div",{className:"text-xs bg-gray-50 dark:bg-gray-900 p-2 rounded whitespace-pre-wrap",children:b.snippetWorkflow})]})]}),b.queryType==="NEEDS_CLARIFICATION"&&u.jsxs("div",{className:"card p-4 space-y-4 bg-orange-50 dark:bg-orange-900/20",children:[u.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100",children:n("planning.needMoreInfo")}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.reasoning}),b.clarificationQuestions?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.pleaseClarify")}),u.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-4",children:b.clarificationQuestions.map((ae,Ce)=>u.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:ae},Ce))})]}),u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:n("planning.updateQueryDetails")}),u.jsx("textarea",{value:f,onChange:ae=>m(ae.target.value),className:"input-field",rows:4,placeholder:n("planning.provideMoreDetails")}),u.jsx("button",{onClick:Et,className:"btn-primary mt-2 w-full",children:n("planning.regeneratePlanWithClarifications")})]})]}),b.queryType==="guidance"&&u.jsxs("div",{className:"card p-4 space-y-4 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[u.jsxs("h3",{className:"font-semibold text-purple-900 dark:text-purple-100 flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""})," ",n("planning.moreInfoRequired")]}),b.planType&&u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:n("planning.planType")}),u.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm font-medium",children:b.planType.replace(/-/g," ").toUpperCase()})]}),b.detectedPatterns?.length>0&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[u.jsx("h4",{className:"text-sm font-medium mb-2 text-purple-800 dark:text-purple-200",children:n("planning.detectedComplexityPatterns")}),u.jsx("div",{className:"flex flex-wrap gap-2",children:b.detectedPatterns.map((ae,Ce)=>u.jsx("span",{className:"px-2 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded text-xs",children:ae},Ce))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[b.estimatedIterations&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[u.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:n("planning.estimatedIterations")}),u.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:b.estimatedIterations})]}),b.toolsRequired?.length>0&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[u.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:n("planning.toolsRequired")}),u.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:b.toolsRequired.length})]})]}),b.suggestedWorkflow&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[u.jsx("h4",{className:"text-sm font-medium mb-2 text-blue-800 dark:text-blue-200",children:n("planning.suggestedWorkflow")}),u.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:b.suggestedWorkflow})]}),b.toolsRequired?.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium mb-2",children:n("planning.requiredTools")}),u.jsx("div",{className:"flex flex-wrap gap-2",children:b.toolsRequired.map((ae,Ce)=>u.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 text-blue-800 dark:text-blue-200 rounded-lg text-sm font-mono",children:ae},Ce))})]}),u.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700",children:[u.jsxs("h4",{className:"text-sm font-medium mb-3 text-yellow-900 dark:text-yellow-100 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""})," ",n("planning.guidanceQuestions")]}),b.guidanceQuestions?.length>0&&u.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm mb-4",children:b.guidanceQuestions.map((ae,Ce)=>u.jsx("li",{className:"text-yellow-800 dark:text-yellow-200 font-medium",children:ae},Ce))}),u.jsxs("div",{className:"mt-4 space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-yellow-900 dark:text-yellow-100",children:n("planning.updatePromptWithAnswers")}),u.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mb-2",children:n("planning.guidanceTip")}),u.jsx("textarea",{value:f,onChange:ae=>m(ae.target.value),className:"input-field",rows:6,placeholder:n("planning.guidanceExamplePlaceholder")}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsx("button",{onClick:Et,className:"btn-primary flex-1",children:n("planning.generateDetailedExecutionPlan")}),u.jsx("button",{onClick:async()=>{if(!s){h(n("planning.signInRequired"));return}if(!v){T(!0),C(n("planning.forcingPlan"));try{const ae=await i();if(!ae){h(n("planning.authExpired")),T(!1);return}const Ce=d.providers.filter(Qe=>Qe.enabled===!0),rt=b.guidanceQuestions?.map((Qe,dt)=>`Q${dt+1}: ${Qe}
A${dt+1}: ${n("planning.clarificationAnswer")}`).join(`

`)||"";await Vv(f,ae,Ce,void 0,(Qe,dt)=>{switch(console.log("Force Plan SSE event:",Qe,dt),Qe){case"status":C(dt.message||n("planning.processing"));break;case"result":x(dt),dt.enhancedSystemPrompt&&ue(dt.enhancedSystemPrompt),dt.enhancedUserPrompt&&ke(dt.enhancedUserPrompt);break;case"llm_response":X(dt);break;case"error":const nr=dt.error||"Unknown error";x({error:nr}),h(`${n("planning.forcePlanError")}: ${nr}`);break}},()=>{console.log("Force plan complete"),T(!1),C("")},Qe=>{console.error("Force plan error:",Qe),x({error:Qe.message}),h(`${n("planning.forcePlanFailed")}: ${Qe.message}`),T(!1),C("")},{clarificationAnswers:rt,previousContext:b,forcePlan:!0,language:d.language||"en"})}catch(ae){console.error("Force plan error:",ae);const Ce=ae instanceof Error?ae.message:"Unknown error";x({error:Ce}),h(`${n("planning.forcePlanError")}: ${Ce}`),T(!1),C("")}}},disabled:v,className:"btn-secondary flex-1",title:n("planning.forcePlanTooltip"),children:n("planning.forcePlan")}),u.jsx("button",{onClick:()=>{x(null),C(""),ge&&ue(ge),ct&&ke(ct),Me(""),Be(""),yt("")},className:"btn-secondary",title:n("planning.resetTooltip"),children:n("planning.reset")})]})]})]}),u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-300 dark:border-blue-700",children:u.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[u.jsx("strong",{children:n("planning.aboutGuidanceMode")})," ",n("planning.guidanceModeHelp")]})})]})]})})]})]})})}),A&&u.jsx(t1.FocusTrap,{active:A,children:u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsxs("div",{className:"card p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold",children:n("planning.loadSavedPlan")}),W&&u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("planning.storage"),": ",(W.usage/(1024*1024)).toFixed(2)," MB / ",(W.quota/(1024*1024)).toFixed(0)," MB (",W.percentage.toFixed(1),"%)"]})]}),W&&W.percentage>80&&u.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[u.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-semibold mb-2",children:[" ",n("planning.storageWarning",{percentage:W.percentage.toFixed(1)})]}),u.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:n("planning.storageWarningHelp")})]}),B.length===0?u.jsx("p",{className:"text-gray-500",children:n("planning.noSavedPlans")}):u.jsx("div",{className:"space-y-3",children:B.map(ae=>{const Ce=new Date(ae.timestamp).toLocaleString();return u.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-3",children:u.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 mb-1 truncate",title:ae.query,children:ae.query.length>100?ae.query.substring(0,100)+"...":ae.query}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("planning.saved"),": ",Ce]})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>or(ae),className:"btn-primary text-xs",children:n("planning.load")}),u.jsx("button",{onClick:()=>bt(ae.id),className:"btn-secondary text-red-500 text-xs",children:n("common.delete")})]})]})},ae.id)})}),u.jsx("button",{onClick:()=>D(!1),className:"btn-primary w-full mt-4",children:n("common.close")})]})})}),q&&Y&&u.jsx(q$,{apiCalls:[Y],onClose:()=>N(!1)}),u.jsx(Z3,{isOpen:U,onClose:()=>j(!1),onTranscriptionComplete:Jt,accessToken:l,apiEndpoint:M}),u.jsx("div",{className:"flex justify-end mt-6",children:u.jsx("button",{className:"btn-secondary text-xs",onClick:$t,title:"Copy conversation, LLM, and tool debug info for Copilot support",children:" Copy Debug Info"})})]}):null};function k0e(){}function E0e(){}function wC(e){const t=[],r=String(e||"");let n=r.indexOf(","),a=0,i=!1;for(;!i;){n===-1&&(n=r.length,i=!0);const s=r.slice(a,n).trim();(s||!i)&&t.push(s),a=n+1,n=r.indexOf(",",a)}return t}function eL(e,t){const r=t||{};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const X$=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,J$=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Z$={};function SC(e,t){return(Z$.jsx?J$:X$).test(e)}const eq=/[ \t\n\f\r]/g;function tq(e){return typeof e=="object"?e.type==="text"?TC(e.value):!1:TC(e)}function TC(e){return e.replace(eq,"")===""}let Zp=class{constructor(t,r,n){this.normal=r,this.property=t,n&&(this.space=n)}};Zp.prototype.normal={};Zp.prototype.property={};Zp.prototype.space=void 0;function tL(e,t){const r={},n={};for(const a of e)Object.assign(r,a.property),Object.assign(n,a.normal);return new Zp(r,n,t)}function Lp(e){return e.toLowerCase()}let ui=class{constructor(t,r){this.attribute=r,this.property=t}};ui.prototype.attribute="";ui.prototype.booleanish=!1;ui.prototype.boolean=!1;ui.prototype.commaOrSpaceSeparated=!1;ui.prototype.commaSeparated=!1;ui.prototype.defined=!1;ui.prototype.mustUseProperty=!1;ui.prototype.number=!1;ui.prototype.overloadedBoolean=!1;ui.prototype.property="";ui.prototype.spaceSeparated=!1;ui.prototype.space=void 0;let rq=0;const er=Oc(),Un=Oc(),n1=Oc(),Xe=Oc(),rn=Oc(),Wu=Oc(),Ci=Oc();function Oc(){return 2**++rq}const a1=Object.freeze(Object.defineProperty({__proto__:null,boolean:er,booleanish:Un,commaOrSpaceSeparated:Ci,commaSeparated:Wu,number:Xe,overloadedBoolean:n1,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),Mx=Object.keys(a1);let Rw=class extends ui{constructor(t,r,n,a){let i=-1;if(super(t,r),kC(this,"space",a),typeof n=="number")for(;++i<Mx.length;){const s=Mx[i];kC(this,Mx[i],(n&a1[s])===a1[s])}}};Rw.prototype.defined=!0;function kC(e,t,r){r&&(e[t]=r)}function wd(e){const t={},r={};for(const[n,a]of Object.entries(e.properties)){const i=new Rw(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[Lp(n)]=n,r[Lp(i.attribute)]=n}return new Zp(t,r,e.space)}const rL=wd({properties:{ariaActiveDescendant:null,ariaAtomic:Un,ariaAutoComplete:null,ariaBusy:Un,ariaChecked:Un,ariaColCount:Xe,ariaColIndex:Xe,ariaColSpan:Xe,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:Un,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:Un,ariaFlowTo:rn,ariaGrabbed:Un,ariaHasPopup:null,ariaHidden:Un,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:Xe,ariaLive:null,ariaModal:Un,ariaMultiLine:Un,ariaMultiSelectable:Un,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:Xe,ariaPressed:Un,ariaReadOnly:Un,ariaRelevant:null,ariaRequired:Un,ariaRoleDescription:rn,ariaRowCount:Xe,ariaRowIndex:Xe,ariaRowSpan:Xe,ariaSelected:Un,ariaSetSize:Xe,ariaSort:null,ariaValueMax:Xe,ariaValueMin:Xe,ariaValueNow:Xe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function nL(e,t){return t in e?e[t]:t}function aL(e,t){return nL(e,t.toLowerCase())}const nq=wd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wu,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:er,allowPaymentRequest:er,allowUserMedia:er,alt:null,as:null,async:er,autoCapitalize:null,autoComplete:rn,autoFocus:er,autoPlay:er,blocking:rn,capture:null,charSet:null,checked:er,cite:null,className:rn,cols:Xe,colSpan:null,content:null,contentEditable:Un,controls:er,controlsList:rn,coords:Xe|Wu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:er,defer:er,dir:null,dirName:null,disabled:er,download:n1,draggable:Un,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:er,formTarget:null,headers:rn,height:Xe,hidden:n1,high:Xe,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:er,inputMode:null,integrity:null,is:null,isMap:er,itemId:null,itemProp:rn,itemRef:rn,itemScope:er,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:er,low:Xe,manifest:null,max:null,maxLength:Xe,media:null,method:null,min:null,minLength:Xe,multiple:er,muted:er,name:null,nonce:null,noModule:er,noValidate:er,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:er,optimum:Xe,pattern:null,ping:rn,placeholder:null,playsInline:er,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:er,referrerPolicy:null,rel:rn,required:er,reversed:er,rows:Xe,rowSpan:Xe,sandbox:rn,scope:null,scoped:er,seamless:er,selected:er,shadowRootClonable:er,shadowRootDelegatesFocus:er,shadowRootMode:null,shape:null,size:Xe,sizes:null,slot:null,span:Xe,spellCheck:Un,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Xe,step:null,style:null,tabIndex:Xe,target:null,title:null,translate:null,type:null,typeMustMatch:er,useMap:null,value:Un,width:Xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:Xe,borderColor:null,bottomMargin:Xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:er,declare:er,event:null,face:null,frame:null,frameBorder:null,hSpace:Xe,leftMargin:Xe,link:null,longDesc:null,lowSrc:null,marginHeight:Xe,marginWidth:Xe,noResize:er,noHref:er,noShade:er,noWrap:er,object:null,profile:null,prompt:null,rev:null,rightMargin:Xe,rules:null,scheme:null,scrolling:Un,standby:null,summary:null,text:null,topMargin:Xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:er,disableRemotePlayback:er,prefix:null,property:null,results:Xe,security:null,unselectable:null},space:"html",transform:aL}),aq=wd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ci,accentHeight:Xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Xe,amplitude:Xe,arabicForm:null,ascent:Xe,attributeName:null,attributeType:null,azimuth:Xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Xe,by:null,calcMode:null,capHeight:Xe,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Xe,diffuseConstant:Xe,direction:null,display:null,dur:null,divisor:Xe,dominantBaseline:null,download:er,dx:null,dy:null,edgeMode:null,editable:null,elevation:Xe,enableBackground:null,end:null,event:null,exponent:Xe,externalResourcesRequired:null,fill:null,fillOpacity:Xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wu,g2:Wu,glyphName:Wu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Xe,horizOriginX:Xe,horizOriginY:Xe,id:null,ideographic:Xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Xe,k:Xe,k1:Xe,k2:Xe,k3:Xe,k4:Xe,kernelMatrix:Ci,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Xe,overlineThickness:Xe,paintOrder:null,panose1:null,path:null,pathLength:Xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Xe,pointsAtY:Xe,pointsAtZ:Xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ci,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ci,rev:Ci,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ci,requiredFeatures:Ci,requiredFonts:Ci,requiredFormats:Ci,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Xe,specularExponent:Xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Xe,strikethroughThickness:Xe,string:null,stroke:null,strokeDashArray:Ci,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Xe,strokeOpacity:Xe,strokeWidth:null,style:null,surfaceScale:Xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ci,tabIndex:Xe,tableValues:null,target:null,targetX:Xe,targetY:Xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ci,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Xe,underlineThickness:Xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Xe,values:null,vAlphabetic:Xe,vMathematical:Xe,vectorEffect:null,vHanging:Xe,vIdeographic:Xe,version:null,vertAdvY:Xe,vertOriginX:Xe,vertOriginY:Xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:nL}),iL=wd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),sL=wd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aL}),oL=wd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),iq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},sq=/[A-Z]/g,EC=/-[a-z]/g,oq=/^data[-\w.:]+$/i;function Iw(e,t){const r=Lp(t);let n=t,a=ui;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&oq.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(EC,cq);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!EC.test(i)){let s=i.replace(sq,lq);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}a=Rw}return new a(n,t)}function lq(e){return"-"+e.toLowerCase()}function cq(e){return e.charAt(1).toUpperCase()}const M0=tL([rL,nq,iL,sL,oL],"html"),Sd=tL([rL,aq,iL,sL,oL],"svg");function CC(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function lL(e){return e.join(" ").trim()}var Lu={},Ox,_C;function uq(){if(_C)return Ox;_C=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,d=`
`,h="/",p="*",f="",m="comment",b="declaration";Ox=function(v,T){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];T=T||{};var k=1,C=1;function A(q){var N=q.match(t);N&&(k+=N.length);var U=q.lastIndexOf(d);C=~U?q.length-U:C+q.length}function D(){var q={line:k,column:C};return function(N){return N.position=new B(q),$(),N}}function B(q){this.start=q,this.end={line:k,column:C},this.source=T.source}B.prototype.content=v;function R(q){var N=new Error(T.source+":"+k+":"+C+": "+q);if(N.reason=q,N.filename=T.source,N.line=k,N.column=C,N.source=v,!T.silent)throw N}function M(q){var N=q.exec(v);if(N){var U=N[0];return A(U),v=v.slice(U.length),N}}function $(){M(r)}function W(q){var N;for(q=q||[];N=O();)N!==!1&&q.push(N);return q}function O(){var q=D();if(!(h!=v.charAt(0)||p!=v.charAt(1))){for(var N=2;f!=v.charAt(N)&&(p!=v.charAt(N)||h!=v.charAt(N+1));)++N;if(N+=2,f===v.charAt(N-1))return R("End of comment missing");var U=v.slice(2,N-2);return C+=2,A(U),v=v.slice(N),C+=2,q({type:m,comment:U})}}function Y(){var q=D(),N=M(n);if(N){if(O(),!M(a))return R("property missing ':'");var U=M(i),j=q({type:b,property:x(N[0].replace(e,f)),value:U?x(U[0].replace(e,f)):f});return M(s),j}}function X(){var q=[];W(q);for(var N;N=Y();)N!==!1&&(q.push(N),W(q));return q}return $(),X()};function x(v){return v?v.replace(l,f):f}return Ox}var AC;function dq(){if(AC)return Lu;AC=1;var e=Lu&&Lu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.default=r;const t=e(uq());function r(n,a){let i=null;if(!n||typeof n!="string")return i;const s=(0,t.default)(n),l=typeof a=="function";return s.forEach(d=>{if(d.type!=="declaration")return;const{property:h,value:p}=d;l?a(h,p,d):p&&(i=i||{},i[h]=p)}),i}return Lu}var Lh={},NC;function hq(){if(NC)return Lh;NC=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(h){return!h||r.test(h)||e.test(h)},s=function(h,p){return p.toUpperCase()},l=function(h,p){return"".concat(p,"-")},d=function(h,p){return p===void 0&&(p={}),i(h)?h:(h=h.toLowerCase(),p.reactCompat?h=h.replace(a,l):h=h.replace(n,l),h.replace(t,s))};return Lh.camelCase=d,Lh}var Ph,LC;function pq(){if(LC)return Ph;LC=1;var e=Ph&&Ph.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(dq()),r=hq();function n(a,i){var s={};return!a||typeof a!="string"||(0,t.default)(a,function(l,d){l&&d&&(s[(0,r.camelCase)(l,i)]=d)}),s}return n.default=n,Ph=n,Ph}var gq=pq();const fq=Rc(gq),O0=cL("end"),Xs=cL("start");function cL(e){return t;function t(r){const n=r&&r.position&&r.position[e]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function uL(e){const t=Xs(e),r=O0(e);if(t&&r)return{start:t,end:r}}function dp(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?PC(e.position):"start"in e||"end"in e?PC(e):"line"in e||"column"in e?i1(e):""}function i1(e){return RC(e&&e.line)+":"+RC(e&&e.column)}function PC(e){return i1(e&&e.start)+"-"+i1(e&&e.end)}function RC(e){return e&&typeof e=="number"?e:1}class Ia extends Error{constructor(t,r,n){super(),typeof r=="string"&&(n=r,r=void 0);let a="",i={},s=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?a=t:!i.cause&&t&&(s=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof n=="string"){const d=n.indexOf(":");d===-1?i.ruleId=n:(i.source=n.slice(0,d),i.ruleId=n.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=dp(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ia.prototype.file="";Ia.prototype.name="";Ia.prototype.reason="";Ia.prototype.message="";Ia.prototype.stack="";Ia.prototype.column=void 0;Ia.prototype.line=void 0;Ia.prototype.ancestors=void 0;Ia.prototype.cause=void 0;Ia.prototype.fatal=void 0;Ia.prototype.place=void 0;Ia.prototype.ruleId=void 0;Ia.prototype.source=void 0;const Dw={}.hasOwnProperty,mq=new Map,yq=/[A-Z]/g,bq=new Set(["table","tbody","thead","tfoot","tr"]),xq=new Set(["td","th"]),dL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vq(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=Aq(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=_q(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sd:M0,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=hL(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function hL(e,t,r){if(t.type==="element")return wq(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Sq(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return kq(e,t,r);if(t.type==="mdxjsEsm")return Tq(e,t);if(t.type==="root")return Eq(e,t,r);if(t.type==="text")return Cq(e,t)}function wq(e,t,r){const n=e.schema;let a=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(a=Sd,e.schema=a),e.ancestors.push(t);const i=gL(e,t.tagName,!1),s=Nq(e,t);let l=Ow(e,t);return bq.has(t.tagName)&&(l=l.filter(function(d){return typeof d=="string"?!tq(d):!0})),pL(e,s,i,t),Mw(s,l),e.ancestors.pop(),e.schema=n,e.create(t,i,s,r)}function Sq(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Pp(e,t.position)}function Tq(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Pp(e,t.position)}function kq(e,t,r){const n=e.schema;let a=n;t.name==="svg"&&n.space==="html"&&(a=Sd,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:gL(e,t.name,!0),s=Lq(e,t),l=Ow(e,t);return pL(e,s,i,t),Mw(s,l),e.ancestors.pop(),e.schema=n,e.create(t,i,s,r)}function Eq(e,t,r){const n={};return Mw(n,Ow(e,t)),e.create(t,e.Fragment,n,r)}function Cq(e,t){return t.value}function pL(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function Mw(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function _q(e,t,r){return n;function n(a,i,s,l){const h=Array.isArray(s.children)?r:t;return l?h(i,s,l):h(i,s)}}function Aq(e,t){return r;function r(n,a,i,s){const l=Array.isArray(i.children),d=Xs(n);return t(a,i,s,l,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function Nq(e,t){const r={};let n,a;for(a in t.properties)if(a!=="children"&&Dw.call(t.properties,a)){const i=Pq(e,a,t.properties[a]);if(i){const[s,l]=i;e.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&xq.has(t.tagName)?n=l:r[s]=l}}if(n){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function Lq(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const i=n.data.estree.body[0];i.type;const s=i.expression;s.type;const l=s.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else Pp(e,t.position);else{const a=n.name;let i;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const l=n.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else Pp(e,t.position);else i=n.value===null?!0:n.value;r[a]=i}return r}function Ow(e,t){const r=[];let n=-1;const a=e.passKeys?new Map:mq;for(;++n<t.children.length;){const i=t.children[n];let s;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const h=a.get(d)||0;s=d+"-"+h,a.set(d,h+1)}}const l=hL(e,i,s);l!==void 0&&r.push(l)}return r}function Pq(e,t,r){const n=Iw(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?eL(r):lL(r)),n.property==="style"){let a=typeof r=="object"?r:Rq(e,String(r));return e.stylePropertyNameCase==="css"&&(a=Iq(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&n.space?iq[n.property]||n.property:n.attribute,r]}}function Rq(e,t){try{return fq(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,a=new Ia("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=dL+"#cannot-parse-style-attribute",a}}function gL(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,s;for(;++i<a.length;){const l=SC(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}n=s}else n=SC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const a=n.value;return Dw.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(n);Pp(e)}function Pp(e,t){const r=new Ia("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=dL+"#cannot-handle-mdx-estrees-without-createevaluater",r}function Iq(e){const t={};let r;for(r in e)Dw.call(e,r)&&(t[Dq(r)]=e[r]);return t}function Dq(e){let t=e.replace(yq,Mq);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Mq(e){return"-"+e.toLowerCase()}const jx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Oq={};function jw(e,t){const r=Oq,n=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return fL(e,n,a)}function fL(e,t,r){if(jq(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return IC(e.children,t,r)}return Array.isArray(e)?IC(e,t,r):""}function IC(e,t,r){const n=[];let a=-1;for(;++a<e.length;)n[a]=fL(e[a],t,r);return n.join("")}function jq(e){return!!(e&&typeof e=="object")}const DC=document.createElement("i");function Bw(e){const t="&"+e+";";DC.innerHTML=t;const r=DC.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Ni(e,t,r,n){const a=e.length;let i=0,s;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,n.length<1e4)s=Array.from(n),s.unshift(t,r),e.splice(...s);else for(r&&e.splice(t,r);i<n.length;)s=n.slice(i,i+1e4),s.unshift(t,0),e.splice(...s),i+=1e4,t+=1e4}function Xi(e,t){return e.length>0?(Ni(e,e.length,0,t),e):t}const MC={}.hasOwnProperty;function mL(e){const t={};let r=-1;for(;++r<e.length;)Bq(t,e[r]);return t}function Bq(e,t){let r;for(r in t){const a=(MC.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let s;if(i)for(s in i){MC.call(a,s)||(a[s]=[]);const l=i[s];Fq(a[s],Array.isArray(l)?l:l?[l]:[])}}}function Fq(e,t){let r=-1;const n=[];for(;++r<t.length;)(t[r].add==="after"?e:n).push(t[r]);Ni(e,0,0,n)}function yL(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function ws(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $a=Nl(/[A-Za-z]/),Aa=Nl(/[\dA-Za-z]/),zq=Nl(/[#-'*+\--9=?A-Z^-~]/);function Om(e){return e!==null&&(e<32||e===127)}const s1=Nl(/\d/),Uq=Nl(/[\dA-Fa-f]/),$q=Nl(/[!-/:-@[-`{-~]/);function Ot(e){return e!==null&&e<-2}function en(e){return e!==null&&(e<0||e===32)}function gr(e){return e===-2||e===-1||e===32}const j0=Nl(new RegExp("\\p{P}|\\p{S}","u")),Sc=Nl(/\s/);function Nl(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Td(e){const t=[];let r=-1,n=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let s="";if(i===37&&Aa(e.charCodeAt(r+1))&&Aa(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(s=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(s=String.fromCharCode(i,l),a=1):s=""}else s=String.fromCharCode(i);s&&(t.push(e.slice(n,r),encodeURIComponent(s)),n=r+a+1,s=""),a&&(r+=a,a=0)}return t.join("")+e.slice(n)}function _r(e,t,r,n){const a=n?n-1:Number.POSITIVE_INFINITY;let i=0;return s;function s(d){return gr(d)?(e.enter(r),l(d)):t(d)}function l(d){return gr(d)&&i++<a?(e.consume(d),l):(e.exit(r),t(d))}}const qq={tokenize:Hq};function Hq(e){const t=e.attempt(this.parser.constructs.contentInitial,n,a);let r;return t;function n(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),_r(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,s(l)}function s(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Ot(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),s)}}const Gq={tokenize:Wq},OC={tokenize:Vq};function Wq(e){const t=this,r=[];let n=0,a,i,s;return l;function l(A){if(n<r.length){const D=r[n];return t.containerState=D[1],e.attempt(D[0].continuation,d,h)(A)}return h(A)}function d(A){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&C();const D=t.events.length;let B=D,R;for(;B--;)if(t.events[B][0]==="exit"&&t.events[B][1].type==="chunkFlow"){R=t.events[B][1].end;break}k(n);let M=D;for(;M<t.events.length;)t.events[M][1].end={...R},M++;return Ni(t.events,B+1,0,t.events.slice(D)),t.events.length=M,h(A)}return l(A)}function h(A){if(n===r.length){if(!a)return m(A);if(a.currentConstruct&&a.currentConstruct.concrete)return x(A);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(OC,p,f)(A)}function p(A){return a&&C(),k(n),m(A)}function f(A){return t.parser.lazy[t.now().line]=n!==r.length,s=t.now().offset,x(A)}function m(A){return t.containerState={},e.attempt(OC,b,x)(A)}function b(A){return n++,r.push([t.currentConstruct,t.containerState]),m(A)}function x(A){if(A===null){a&&C(),k(0),e.consume(A);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),v(A)}function v(A){if(A===null){T(e.exit("chunkFlow"),!0),k(0),e.consume(A);return}return Ot(A)?(e.consume(A),T(e.exit("chunkFlow")),n=0,t.interrupt=void 0,l):(e.consume(A),v)}function T(A,D){const B=t.sliceStream(A);if(D&&B.push(null),A.previous=i,i&&(i.next=A),i=A,a.defineSkip(A.start),a.write(B),t.parser.lazy[A.start.line]){let R=a.events.length;for(;R--;)if(a.events[R][1].start.offset<s&&(!a.events[R][1].end||a.events[R][1].end.offset>s))return;const M=t.events.length;let $=M,W,O;for(;$--;)if(t.events[$][0]==="exit"&&t.events[$][1].type==="chunkFlow"){if(W){O=t.events[$][1].end;break}W=!0}for(k(n),R=M;R<t.events.length;)t.events[R][1].end={...O},R++;Ni(t.events,$+1,0,t.events.slice(M)),t.events.length=R}}function k(A){let D=r.length;for(;D-- >A;){const B=r[D];t.containerState=B[1],B[0].exit.call(t,e)}r.length=A}function C(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function Vq(e,t,r){return _r(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function id(e){if(e===null||en(e)||Sc(e))return 1;if(j0(e))return 2}function B0(e,t,r){const n=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!n.includes(i)&&(t=i(t,r),n.push(i))}return t}const o1={name:"attention",resolveAll:Yq,tokenize:Qq};function Yq(e,t){let r=-1,n,a,i,s,l,d,h,p;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(n=r;n--;)if(e[n][0]==="exit"&&e[n][1].type==="attentionSequence"&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[n][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[n][1].end.offset-e[n][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const f={...e[n][1].end},m={...e[r][1].start};jC(f,-d),jC(m,d),s={type:d>1?"strongSequence":"emphasisSequence",start:f,end:{...e[n][1].end}},l={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:m},i={type:d>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[r][1].start}},a={type:d>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},e[n][1].end={...s.start},e[r][1].start={...l.end},h=[],e[n][1].end.offset-e[n][1].start.offset&&(h=Xi(h,[["enter",e[n][1],t],["exit",e[n][1],t]])),h=Xi(h,[["enter",a,t],["enter",s,t],["exit",s,t],["enter",i,t]]),h=Xi(h,B0(t.parser.constructs.insideSpan.null,e.slice(n+1,r),t)),h=Xi(h,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(p=2,h=Xi(h,[["enter",e[r][1],t],["exit",e[r][1],t]])):p=0,Ni(e,n-1,r-n+3,h),r=n+h.length-p-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function Qq(e,t){const r=this.parser.constructs.attentionMarkers.null,n=this.previous,a=id(n);let i;return s;function s(d){return i=d,e.enter("attentionSequence"),l(d)}function l(d){if(d===i)return e.consume(d),l;const h=e.exit("attentionSequence"),p=id(d),f=!p||p===2&&a||r.includes(d),m=!a||a===2&&p||r.includes(n);return h._open=!!(i===42?f:f&&(a||!m)),h._close=!!(i===42?m:m&&(p||!f)),t(d)}}function jC(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Kq={name:"autolink",tokenize:Xq};function Xq(e,t,r){let n=0;return a;function a(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(b){return $a(b)?(e.consume(b),s):b===64?r(b):h(b)}function s(b){return b===43||b===45||b===46||Aa(b)?(n=1,l(b)):h(b)}function l(b){return b===58?(e.consume(b),n=0,d):(b===43||b===45||b===46||Aa(b))&&n++<32?(e.consume(b),l):(n=0,h(b))}function d(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||Om(b)?r(b):(e.consume(b),d)}function h(b){return b===64?(e.consume(b),p):zq(b)?(e.consume(b),h):r(b)}function p(b){return Aa(b)?f(b):r(b)}function f(b){return b===46?(e.consume(b),n=0,p):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):m(b)}function m(b){if((b===45||Aa(b))&&n++<63){const x=b===45?m:f;return e.consume(b),x}return r(b)}}const eg={partial:!0,tokenize:Jq};function Jq(e,t,r){return n;function n(i){return gr(i)?_r(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||Ot(i)?t(i):r(i)}}const bL={continuation:{tokenize:eH},exit:tH,name:"blockQuote",tokenize:Zq};function Zq(e,t,r){const n=this;return a;function a(s){if(s===62){const l=n.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),i}return r(s)}function i(s){return gr(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function eH(e,t,r){const n=this;return a;function a(s){return gr(s)?_r(e,i,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):i(s)}function i(s){return e.attempt(bL,t,r)(s)}}function tH(e){e.exit("blockQuote")}const xL={name:"characterEscape",tokenize:rH};function rH(e,t,r){return n;function n(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return $q(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const vL={name:"characterReference",tokenize:nH};function nH(e,t,r){const n=this;let a=0,i,s;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),d}function d(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,s=Aa,p(f))}function h(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,s=Uq,p):(e.enter("characterReferenceValue"),i=7,s=s1,p(f))}function p(f){if(f===59&&a){const m=e.exit("characterReferenceValue");return s===Aa&&!Bw(n.sliceSerialize(m))?r(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&a++<i?(e.consume(f),p):r(f)}}const BC={partial:!0,tokenize:iH},FC={concrete:!0,name:"codeFenced",tokenize:aH};function aH(e,t,r){const n=this,a={partial:!0,tokenize:B};let i=0,s=0,l;return d;function d(R){return h(R)}function h(R){const M=n.events[n.events.length-1];return i=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,l=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(R)}function p(R){return R===l?(s++,e.consume(R),p):s<3?r(R):(e.exit("codeFencedFenceSequence"),gr(R)?_r(e,f,"whitespace")(R):f(R))}function f(R){return R===null||Ot(R)?(e.exit("codeFencedFence"),n.interrupt?t(R):e.check(BC,v,D)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(R))}function m(R){return R===null||Ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(R)):gr(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),_r(e,b,"whitespace")(R)):R===96&&R===l?r(R):(e.consume(R),m)}function b(R){return R===null||Ot(R)?f(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(R))}function x(R){return R===null||Ot(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(R)):R===96&&R===l?r(R):(e.consume(R),x)}function v(R){return e.attempt(a,D,T)(R)}function T(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),k}function k(R){return i>0&&gr(R)?_r(e,C,"linePrefix",i+1)(R):C(R)}function C(R){return R===null||Ot(R)?e.check(BC,v,D)(R):(e.enter("codeFlowValue"),A(R))}function A(R){return R===null||Ot(R)?(e.exit("codeFlowValue"),C(R)):(e.consume(R),A)}function D(R){return e.exit("codeFenced"),t(R)}function B(R,M,$){let W=0;return O;function O(U){return R.enter("lineEnding"),R.consume(U),R.exit("lineEnding"),Y}function Y(U){return R.enter("codeFencedFence"),gr(U)?_r(R,X,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):X(U)}function X(U){return U===l?(R.enter("codeFencedFenceSequence"),q(U)):$(U)}function q(U){return U===l?(W++,R.consume(U),q):W>=s?(R.exit("codeFencedFenceSequence"),gr(U)?_r(R,N,"whitespace")(U):N(U)):$(U)}function N(U){return U===null||Ot(U)?(R.exit("codeFencedFence"),M(U)):$(U)}}}function iH(e,t,r){const n=this;return a;function a(s){return s===null?r(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i)}function i(s){return n.parser.lazy[n.now().line]?r(s):t(s)}}const Bx={name:"codeIndented",tokenize:oH},sH={partial:!0,tokenize:lH};function oH(e,t,r){const n=this;return a;function a(h){return e.enter("codeIndented"),_r(e,i,"linePrefix",5)(h)}function i(h){const p=n.events[n.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?s(h):r(h)}function s(h){return h===null?d(h):Ot(h)?e.attempt(sH,s,d)(h):(e.enter("codeFlowValue"),l(h))}function l(h){return h===null||Ot(h)?(e.exit("codeFlowValue"),s(h)):(e.consume(h),l)}function d(h){return e.exit("codeIndented"),t(h)}}function lH(e,t,r){const n=this;return a;function a(s){return n.parser.lazy[n.now().line]?r(s):Ot(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),a):_r(e,i,"linePrefix",5)(s)}function i(s){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):Ot(s)?a(s):r(s)}}const cH={name:"codeText",previous:dH,resolve:uH,tokenize:hH};function uH(e){let t=e.length-4,r=3,n,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(n=r;++n<t;)if(e[n][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(n=r-1,t++;++n<=t;)a===void 0?n!==t&&e[n][1].type!=="lineEnding"&&(a=n):(n===t||e[n][1].type==="lineEnding")&&(e[a][1].type="codeTextData",n!==a+2&&(e[a][1].end=e[n-1][1].end,e.splice(a+2,n-a-2),t-=n-a-2,n=a+2),a=void 0);return e}function dH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function hH(e,t,r){let n=0,a,i;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),n++,l):(e.exit("codeTextSequence"),d(f))}function d(f){return f===null?r(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),d):f===96?(i=e.enter("codeTextSequence"),a=0,p(f)):Ot(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||Ot(f)?(e.exit("codeTextData"),d(f)):(e.consume(f),h)}function p(f){return f===96?(e.consume(f),a++,p):a===n?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(i.type="codeTextData",h(f))}}class pH{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const n=r??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,r,n){const a=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return n&&Rh(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Rh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Rh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);Rh(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Rh(this.left,r.reverse())}}}function Rh(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function wL(e){const t={};let r=-1,n,a,i,s,l,d,h;const p=new pH(e);for(;++r<p.length;){for(;r in t;)r=t[r];if(n=p.get(r),r&&n[1].type==="chunkFlow"&&p.get(r-1)[1].type==="listItemPrefix"&&(d=n[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,gH(p,r)),r=t[r],h=!0);else if(n[1]._container){for(i=r,a=void 0;i--;)if(s=p.get(i),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(a&&(p.get(a)[1].type="lineEndingBlank"),s[1].type="lineEnding",a=i);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;a&&(n[1].end={...p.get(a)[1].start},l=p.slice(a,r),l.unshift(n),p.splice(a,r-a+1,l))}}return Ni(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function gH(e,t){const r=e.get(t)[1],n=e.get(t)[2];let a=t-1;const i=[];let s=r._tokenizer;s||(s=n.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,d=[],h={};let p,f,m=-1,b=r,x=0,v=0;const T=[v];for(;b;){for(;e.get(++a)[1]!==b;);i.push(a),b._tokenizer||(p=n.sliceStream(b),b.next||p.push(null),f&&s.defineSkip(b.start),b._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(p),b._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=b,b=b.next}for(b=r;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(v=m+1,T.push(v),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(s.events=[],b?(b._tokenizer=void 0,b.previous=void 0):T.pop(),m=T.length;m--;){const k=l.slice(T[m],T[m+1]),C=i.pop();d.push([C,C+k.length-1]),e.splice(C,2,k)}for(d.reverse(),m=-1;++m<d.length;)h[x+d[m][0]]=x+d[m][1],x+=d[m][1]-d[m][0]-1;return h}const fH={resolve:yH,tokenize:bH},mH={partial:!0,tokenize:xH};function yH(e){return wL(e),e}function bH(e,t){let r;return n;function n(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):Ot(l)?e.check(mH,s,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function s(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function xH(e,t,r){const n=this;return a;function a(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),_r(e,i,"linePrefix")}function i(s){if(s===null||Ot(s))return r(s);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(s):e.interrupt(n.parser.constructs.flow,r,t)(s)}}function SL(e,t,r,n,a,i,s,l,d){const h=d||Number.POSITIVE_INFINITY;let p=0;return f;function f(k){return k===60?(e.enter(n),e.enter(a),e.enter(i),e.consume(k),e.exit(i),m):k===null||k===32||k===41||Om(k)?r(k):(e.enter(n),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(k))}function m(k){return k===62?(e.enter(i),e.consume(k),e.exit(i),e.exit(a),e.exit(n),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),b(k))}function b(k){return k===62?(e.exit("chunkString"),e.exit(l),m(k)):k===null||k===60||Ot(k)?r(k):(e.consume(k),k===92?x:b)}function x(k){return k===60||k===62||k===92?(e.consume(k),b):b(k)}function v(k){return!p&&(k===null||k===41||en(k))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(n),t(k)):p<h&&k===40?(e.consume(k),p++,v):k===41?(e.consume(k),p--,v):k===null||k===32||k===40||Om(k)?r(k):(e.consume(k),k===92?T:v)}function T(k){return k===40||k===41||k===92?(e.consume(k),v):v(k)}}function TL(e,t,r,n,a,i){const s=this;let l=0,d;return h;function h(b){return e.enter(n),e.enter(a),e.consume(b),e.exit(a),e.enter(i),p}function p(b){return l>999||b===null||b===91||b===93&&!d||b===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?r(b):b===93?(e.exit(i),e.enter(a),e.consume(b),e.exit(a),e.exit(n),t):Ot(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===null||b===91||b===93||Ot(b)||l++>999?(e.exit("chunkString"),p(b)):(e.consume(b),d||(d=!gr(b)),b===92?m:f)}function m(b){return b===91||b===92||b===93?(e.consume(b),l++,f):f(b)}}function kL(e,t,r,n,a,i){let s;return l;function l(m){return m===34||m===39||m===40?(e.enter(n),e.enter(a),e.consume(m),e.exit(a),s=m===40?41:m,d):r(m)}function d(m){return m===s?(e.enter(a),e.consume(m),e.exit(a),e.exit(n),t):(e.enter(i),h(m))}function h(m){return m===s?(e.exit(i),d(s)):m===null?r(m):Ot(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),_r(e,h,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===s||m===null||Ot(m)?(e.exit("chunkString"),h(m)):(e.consume(m),m===92?f:p)}function f(m){return m===s||m===92?(e.consume(m),p):p(m)}}function hp(e,t){let r;return n;function n(a){return Ot(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,n):gr(a)?_r(e,n,r?"linePrefix":"lineSuffix")(a):t(a)}}const vH={name:"definition",tokenize:SH},wH={partial:!0,tokenize:TH};function SH(e,t,r){const n=this;let a;return i;function i(b){return e.enter("definition"),s(b)}function s(b){return TL.call(n,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function l(b){return a=ws(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),d):r(b)}function d(b){return en(b)?hp(e,h)(b):h(b)}function h(b){return SL(e,p,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function p(b){return e.attempt(wH,f,f)(b)}function f(b){return gr(b)?_r(e,m,"whitespace")(b):m(b)}function m(b){return b===null||Ot(b)?(e.exit("definition"),n.parser.defined.push(a),t(b)):r(b)}}function TH(e,t,r){return n;function n(l){return en(l)?hp(e,a)(l):r(l)}function a(l){return kL(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return gr(l)?_r(e,s,"whitespace")(l):s(l)}function s(l){return l===null||Ot(l)?t(l):r(l)}}const kH={name:"hardBreakEscape",tokenize:EH};function EH(e,t,r){return n;function n(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return Ot(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const CH={name:"headingAtx",resolve:_H,tokenize:AH};function _H(e,t){let r=e.length-2,n=3,a,i;return e[n][1].type==="whitespace"&&(n+=2),r-2>n&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(n===r-1||r-4>n&&e[r-2][1].type==="whitespace")&&(r-=n+1===r?2:4),r>n&&(a={type:"atxHeadingText",start:e[n][1].start,end:e[r][1].end},i={type:"chunkText",start:e[n][1].start,end:e[r][1].end,contentType:"text"},Ni(e,n,r-n+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function AH(e,t,r){let n=0;return a;function a(p){return e.enter("atxHeading"),i(p)}function i(p){return e.enter("atxHeadingSequence"),s(p)}function s(p){return p===35&&n++<6?(e.consume(p),s):p===null||en(p)?(e.exit("atxHeadingSequence"),l(p)):r(p)}function l(p){return p===35?(e.enter("atxHeadingSequence"),d(p)):p===null||Ot(p)?(e.exit("atxHeading"),t(p)):gr(p)?_r(e,l,"whitespace")(p):(e.enter("atxHeadingText"),h(p))}function d(p){return p===35?(e.consume(p),d):(e.exit("atxHeadingSequence"),l(p))}function h(p){return p===null||p===35||en(p)?(e.exit("atxHeadingText"),l(p)):(e.consume(p),h)}}const NH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zC=["pre","script","style","textarea"],LH={concrete:!0,name:"htmlFlow",resolveTo:IH,tokenize:DH},PH={partial:!0,tokenize:OH},RH={partial:!0,tokenize:MH};function IH(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DH(e,t,r){const n=this;let a,i,s,l,d;return h;function h(I){return p(I)}function p(I){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(I),f}function f(I){return I===33?(e.consume(I),m):I===47?(e.consume(I),i=!0,v):I===63?(e.consume(I),a=3,n.interrupt?t:G):$a(I)?(e.consume(I),s=String.fromCharCode(I),T):r(I)}function m(I){return I===45?(e.consume(I),a=2,b):I===91?(e.consume(I),a=5,l=0,x):$a(I)?(e.consume(I),a=4,n.interrupt?t:G):r(I)}function b(I){return I===45?(e.consume(I),n.interrupt?t:G):r(I)}function x(I){const ne="CDATA[";return I===ne.charCodeAt(l++)?(e.consume(I),l===ne.length?n.interrupt?t:X:x):r(I)}function v(I){return $a(I)?(e.consume(I),s=String.fromCharCode(I),T):r(I)}function T(I){if(I===null||I===47||I===62||en(I)){const ne=I===47,ue=s.toLowerCase();return!ne&&!i&&zC.includes(ue)?(a=1,n.interrupt?t(I):X(I)):NH.includes(s.toLowerCase())?(a=6,ne?(e.consume(I),k):n.interrupt?t(I):X(I)):(a=7,n.interrupt&&!n.parser.lazy[n.now().line]?r(I):i?C(I):A(I))}return I===45||Aa(I)?(e.consume(I),s+=String.fromCharCode(I),T):r(I)}function k(I){return I===62?(e.consume(I),n.interrupt?t:X):r(I)}function C(I){return gr(I)?(e.consume(I),C):O(I)}function A(I){return I===47?(e.consume(I),O):I===58||I===95||$a(I)?(e.consume(I),D):gr(I)?(e.consume(I),A):O(I)}function D(I){return I===45||I===46||I===58||I===95||Aa(I)?(e.consume(I),D):B(I)}function B(I){return I===61?(e.consume(I),R):gr(I)?(e.consume(I),B):A(I)}function R(I){return I===null||I===60||I===61||I===62||I===96?r(I):I===34||I===39?(e.consume(I),d=I,M):gr(I)?(e.consume(I),R):$(I)}function M(I){return I===d?(e.consume(I),d=null,W):I===null||Ot(I)?r(I):(e.consume(I),M)}function $(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||en(I)?B(I):(e.consume(I),$)}function W(I){return I===47||I===62||gr(I)?A(I):r(I)}function O(I){return I===62?(e.consume(I),Y):r(I)}function Y(I){return I===null||Ot(I)?X(I):gr(I)?(e.consume(I),Y):r(I)}function X(I){return I===45&&a===2?(e.consume(I),j):I===60&&a===1?(e.consume(I),K):I===62&&a===4?(e.consume(I),F):I===63&&a===3?(e.consume(I),G):I===93&&a===5?(e.consume(I),ie):Ot(I)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(PH,H,q)(I)):I===null||Ot(I)?(e.exit("htmlFlowData"),q(I)):(e.consume(I),X)}function q(I){return e.check(RH,N,H)(I)}function N(I){return e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),U}function U(I){return I===null||Ot(I)?q(I):(e.enter("htmlFlowData"),X(I))}function j(I){return I===45?(e.consume(I),G):X(I)}function K(I){return I===47?(e.consume(I),s="",Q):X(I)}function Q(I){if(I===62){const ne=s.toLowerCase();return zC.includes(ne)?(e.consume(I),F):X(I)}return $a(I)&&s.length<8?(e.consume(I),s+=String.fromCharCode(I),Q):X(I)}function ie(I){return I===93?(e.consume(I),G):X(I)}function G(I){return I===62?(e.consume(I),F):I===45&&a===2?(e.consume(I),G):X(I)}function F(I){return I===null||Ot(I)?(e.exit("htmlFlowData"),H(I)):(e.consume(I),F)}function H(I){return e.exit("htmlFlow"),t(I)}}function MH(e,t,r){const n=this;return a;function a(s){return Ot(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):r(s)}function i(s){return n.parser.lazy[n.now().line]?r(s):t(s)}}function OH(e,t,r){return n;function n(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(eg,t,r)}}const jH={name:"htmlText",tokenize:BH};function BH(e,t,r){const n=this;let a,i,s;return l;function l(G){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(G),d}function d(G){return G===33?(e.consume(G),h):G===47?(e.consume(G),B):G===63?(e.consume(G),A):$a(G)?(e.consume(G),$):r(G)}function h(G){return G===45?(e.consume(G),p):G===91?(e.consume(G),i=0,x):$a(G)?(e.consume(G),C):r(G)}function p(G){return G===45?(e.consume(G),b):r(G)}function f(G){return G===null?r(G):G===45?(e.consume(G),m):Ot(G)?(s=f,K(G)):(e.consume(G),f)}function m(G){return G===45?(e.consume(G),b):f(G)}function b(G){return G===62?j(G):G===45?m(G):f(G)}function x(G){const F="CDATA[";return G===F.charCodeAt(i++)?(e.consume(G),i===F.length?v:x):r(G)}function v(G){return G===null?r(G):G===93?(e.consume(G),T):Ot(G)?(s=v,K(G)):(e.consume(G),v)}function T(G){return G===93?(e.consume(G),k):v(G)}function k(G){return G===62?j(G):G===93?(e.consume(G),k):v(G)}function C(G){return G===null||G===62?j(G):Ot(G)?(s=C,K(G)):(e.consume(G),C)}function A(G){return G===null?r(G):G===63?(e.consume(G),D):Ot(G)?(s=A,K(G)):(e.consume(G),A)}function D(G){return G===62?j(G):A(G)}function B(G){return $a(G)?(e.consume(G),R):r(G)}function R(G){return G===45||Aa(G)?(e.consume(G),R):M(G)}function M(G){return Ot(G)?(s=M,K(G)):gr(G)?(e.consume(G),M):j(G)}function $(G){return G===45||Aa(G)?(e.consume(G),$):G===47||G===62||en(G)?W(G):r(G)}function W(G){return G===47?(e.consume(G),j):G===58||G===95||$a(G)?(e.consume(G),O):Ot(G)?(s=W,K(G)):gr(G)?(e.consume(G),W):j(G)}function O(G){return G===45||G===46||G===58||G===95||Aa(G)?(e.consume(G),O):Y(G)}function Y(G){return G===61?(e.consume(G),X):Ot(G)?(s=Y,K(G)):gr(G)?(e.consume(G),Y):W(G)}function X(G){return G===null||G===60||G===61||G===62||G===96?r(G):G===34||G===39?(e.consume(G),a=G,q):Ot(G)?(s=X,K(G)):gr(G)?(e.consume(G),X):(e.consume(G),N)}function q(G){return G===a?(e.consume(G),a=void 0,U):G===null?r(G):Ot(G)?(s=q,K(G)):(e.consume(G),q)}function N(G){return G===null||G===34||G===39||G===60||G===61||G===96?r(G):G===47||G===62||en(G)?W(G):(e.consume(G),N)}function U(G){return G===47||G===62||en(G)?W(G):r(G)}function j(G){return G===62?(e.consume(G),e.exit("htmlTextData"),e.exit("htmlText"),t):r(G)}function K(G){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(G),e.exit("lineEnding"),Q}function Q(G){return gr(G)?_r(e,ie,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):ie(G)}function ie(G){return e.enter("htmlTextData"),s(G)}}const Fw={name:"labelEnd",resolveAll:$H,resolveTo:qH,tokenize:HH},FH={tokenize:GH},zH={tokenize:WH},UH={tokenize:VH};function $H(e){let t=-1;const r=[];for(;++t<e.length;){const n=e[t][1];if(r.push(e[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const a=n.type==="labelImage"?4:2;n.type="data",t+=a}}return e.length!==r.length&&Ni(e,0,e.length,r),e}function qH(e,t){let r=e.length,n=0,a,i,s,l;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(s){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){n=2;break}}else a.type==="labelEnd"&&(s=r);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},h={type:"label",start:{...e[i][1].start},end:{...e[s][1].end}},p={type:"labelText",start:{...e[i+n+2][1].end},end:{...e[s-2][1].start}};return l=[["enter",d,t],["enter",h,t]],l=Xi(l,e.slice(i+1,i+n+3)),l=Xi(l,[["enter",p,t]]),l=Xi(l,B0(t.parser.constructs.insideSpan.null,e.slice(i+n+4,s-3),t)),l=Xi(l,[["exit",p,t],e[s-2],e[s-1],["exit",h,t]]),l=Xi(l,e.slice(s+1)),l=Xi(l,[["exit",d,t]]),Ni(e,i,e.length,l),e}function HH(e,t,r){const n=this;let a=n.events.length,i,s;for(;a--;)if((n.events[a][1].type==="labelImage"||n.events[a][1].type==="labelLink")&&!n.events[a][1]._balanced){i=n.events[a][1];break}return l;function l(m){return i?i._inactive?f(m):(s=n.parser.defined.includes(ws(n.sliceSerialize({start:i.end,end:n.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),d):r(m)}function d(m){return m===40?e.attempt(FH,p,s?p:f)(m):m===91?e.attempt(zH,p,s?h:f)(m):s?p(m):f(m)}function h(m){return e.attempt(UH,p,f)(m)}function p(m){return t(m)}function f(m){return i._balanced=!0,r(m)}}function GH(e,t,r){return n;function n(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),a}function a(f){return en(f)?hp(e,i)(f):i(f)}function i(f){return f===41?p(f):SL(e,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return en(f)?hp(e,d)(f):p(f)}function l(f){return r(f)}function d(f){return f===34||f===39||f===40?kL(e,h,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):p(f)}function h(f){return en(f)?hp(e,p)(f):p(f)}function p(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):r(f)}}function WH(e,t,r){const n=this;return a;function a(l){return TL.call(n,e,i,s,"reference","referenceMarker","referenceString")(l)}function i(l){return n.parser.defined.includes(ws(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function s(l){return r(l)}}function VH(e,t,r){return n;function n(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const YH={name:"labelStartImage",resolveAll:Fw.resolveAll,tokenize:QH};function QH(e,t,r){const n=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),s):r(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(l):t(l)}}const KH={name:"labelStartLink",resolveAll:Fw.resolveAll,tokenize:XH};function XH(e,t,r){const n=this;return a;function a(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),i}function i(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?r(s):t(s)}}const Fx={name:"lineEnding",tokenize:JH};function JH(e,t){return r;function r(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),_r(e,t,"linePrefix")}}const lm={name:"thematicBreak",tokenize:ZH};function ZH(e,t,r){let n=0,a;return i;function i(h){return e.enter("thematicBreak"),s(h)}function s(h){return a=h,l(h)}function l(h){return h===a?(e.enter("thematicBreakSequence"),d(h)):n>=3&&(h===null||Ot(h))?(e.exit("thematicBreak"),t(h)):r(h)}function d(h){return h===a?(e.consume(h),n++,d):(e.exit("thematicBreakSequence"),gr(h)?_r(e,l,"whitespace")(h):l(h))}}const si={continuation:{tokenize:nG},exit:iG,name:"list",tokenize:rG},eG={partial:!0,tokenize:sG},tG={partial:!0,tokenize:aG};function rG(e,t,r){const n=this,a=n.events[n.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,s=0;return l;function l(b){const x=n.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!n.containerState.marker||b===n.containerState.marker:s1(b)){if(n.containerState.type||(n.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(lm,r,h)(b):h(b);if(!n.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(b)}return r(b)}function d(b){return s1(b)&&++s<10?(e.consume(b),d):(!n.interrupt||s<2)&&(n.containerState.marker?b===n.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),h(b)):r(b)}function h(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||b,e.check(eg,n.interrupt?r:p,e.attempt(eG,m,f))}function p(b){return n.containerState.initialBlankLine=!0,i++,m(b)}function f(b){return gr(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),m):r(b)}function m(b){return n.containerState.size=i+n.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function nG(e,t,r){const n=this;return n.containerState._closeFlow=void 0,e.check(eg,a,i);function a(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,_r(e,t,"listItemIndent",n.containerState.size+1)(l)}function i(l){return n.containerState.furtherBlankLines||!gr(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,e.attempt(tG,t,s)(l))}function s(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,_r(e,e.attempt(si,t,r),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function aG(e,t,r){const n=this;return _r(e,a,"listItemIndent",n.containerState.size+1);function a(i){const s=n.events[n.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?t(i):r(i)}}function iG(e){e.exit(this.containerState.type)}function sG(e,t,r){const n=this;return _r(e,a,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const s=n.events[n.events.length-1];return!gr(i)&&s&&s[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const UC={name:"setextUnderline",resolveTo:oG,tokenize:lG};function oG(e,t){let r=e.length,n,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){n=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const s={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=s,e.push(["exit",s,t]),e}function lG(e,t,r){const n=this;let a;return i;function i(h){let p=n.events.length,f;for(;p--;)if(n.events[p][1].type!=="lineEnding"&&n.events[p][1].type!=="linePrefix"&&n.events[p][1].type!=="content"){f=n.events[p][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||f)?(e.enter("setextHeadingLine"),a=h,s(h)):r(h)}function s(h){return e.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===a?(e.consume(h),l):(e.exit("setextHeadingLineSequence"),gr(h)?_r(e,d,"lineSuffix")(h):d(h))}function d(h){return h===null||Ot(h)?(e.exit("setextHeadingLine"),t(h)):r(h)}}const cG={tokenize:uG};function uG(e){const t=this,r=e.attempt(eg,n,e.attempt(this.parser.constructs.flowInitial,a,_r(e,e.attempt(this.parser.constructs.flow,a,e.attempt(fH,a)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const dG={resolveAll:CL()},hG=EL("string"),pG=EL("text");function EL(e){return{resolveAll:CL(e==="text"?gG:void 0),tokenize:t};function t(r){const n=this,a=this.parser.constructs[e],i=r.attempt(a,s,l);return s;function s(p){return h(p)?i(p):l(p)}function l(p){if(p===null){r.consume(p);return}return r.enter("data"),r.consume(p),d}function d(p){return h(p)?(r.exit("data"),i(p)):(r.consume(p),d)}function h(p){if(p===null)return!0;const f=a[p];let m=-1;if(f)for(;++m<f.length;){const b=f[m];if(!b.previous||b.previous.call(n,n.previous))return!0}return!1}}}function CL(e){return t;function t(r,n){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,n):r}}function gG(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],a=t.sliceStream(n);let i=a.length,s=-1,l=0,d;for(;i--;){const h=a[i];if(typeof h=="string"){for(s=h.length;h.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(h===-2)d=!0,l++;else if(h!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const h={type:r===e.length||d||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?s:n.start._bufferIndex+s,_index:n.start._index+i,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...h.start},n.start.offset===n.end.offset?Object.assign(n,h):(e.splice(r,0,["enter",h,t],["exit",h,t]),r+=2)}r++}return e}const fG={42:si,43:si,45:si,48:si,49:si,50:si,51:si,52:si,53:si,54:si,55:si,56:si,57:si,62:bL},mG={91:vH},yG={[-2]:Bx,[-1]:Bx,32:Bx},bG={35:CH,42:lm,45:[UC,lm],60:LH,61:UC,95:lm,96:FC,126:FC},xG={38:vL,92:xL},vG={[-5]:Fx,[-4]:Fx,[-3]:Fx,33:YH,38:vL,42:o1,60:[Kq,jH],91:KH,92:[kH,xL],93:Fw,95:o1,96:cH},wG={null:[o1,dG]},SG={null:[42,95]},TG={null:[]},kG=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:SG,contentInitial:mG,disable:TG,document:fG,flow:bG,flowInitial:yG,insideSpan:wG,string:xG,text:vG},Symbol.toStringTag,{value:"Module"}));function EG(e,t,r){let n={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let s=[],l=[];const d={attempt:M(B),check:M(R),consume:C,enter:A,exit:D,interrupt:M(R,{interrupt:!0})},h={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:b,write:f};let p=t.tokenize.call(h,d);return t.resolveAll&&i.push(t),h;function f(Y){return s=Xi(s,Y),T(),s[s.length-1]!==null?[]:($(t,0),h.events=B0(i,h.events,h),h.events)}function m(Y,X){return _G(b(Y),X)}function b(Y){return CG(s,Y)}function x(){const{_bufferIndex:Y,_index:X,line:q,column:N,offset:U}=n;return{_bufferIndex:Y,_index:X,line:q,column:N,offset:U}}function v(Y){a[Y.line]=Y.column,O()}function T(){let Y;for(;n._index<s.length;){const X=s[n._index];if(typeof X=="string")for(Y=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===Y&&n._bufferIndex<X.length;)k(X.charCodeAt(n._bufferIndex));else k(X)}}function k(Y){p=p(Y)}function C(Y){Ot(Y)?(n.line++,n.column=1,n.offset+=Y===-3?2:1,O()):Y!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),h.previous=Y}function A(Y,X){const q=X||{};return q.type=Y,q.start=x(),h.events.push(["enter",q,h]),l.push(q),q}function D(Y){const X=l.pop();return X.end=x(),h.events.push(["exit",X,h]),X}function B(Y,X){$(Y,X.from)}function R(Y,X){X.restore()}function M(Y,X){return q;function q(N,U,j){let K,Q,ie,G;return Array.isArray(N)?H(N):"tokenize"in N?H([N]):F(N);function F(xe){return ke;function ke(me){const Me=me!==null&&xe[me],ge=me!==null&&xe.null,Be=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return H(Be)(me)}}function H(xe){return K=xe,Q=0,xe.length===0?j:I(xe[Q])}function I(xe){return ke;function ke(me){return G=W(),ie=xe,xe.partial||(h.currentConstruct=xe),xe.name&&h.parser.constructs.disable.null.includes(xe.name)?ue():xe.tokenize.call(X?Object.assign(Object.create(h),X):h,d,ne,ue)(me)}}function ne(xe){return Y(ie,G),U}function ue(xe){return G.restore(),++Q<K.length?I(K[Q]):j}}}function $(Y,X){Y.resolveAll&&!i.includes(Y)&&i.push(Y),Y.resolve&&Ni(h.events,X,h.events.length-X,Y.resolve(h.events.slice(X),h)),Y.resolveTo&&(h.events=Y.resolveTo(h.events,h))}function W(){const Y=x(),X=h.previous,q=h.currentConstruct,N=h.events.length,U=Array.from(l);return{from:N,restore:j};function j(){n=Y,h.previous=X,h.currentConstruct=q,h.events.length=N,l=U,O()}}function O(){n.line in a&&n.column<2&&(n.column=a[n.line],n.offset+=a[n.line]-1)}}function CG(e,t){const r=t.start._index,n=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let s;if(r===a)s=[e[r].slice(n,i)];else{if(s=e.slice(r,a),n>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(n):s.shift()}i>0&&s.push(e[a].slice(0,i))}return s}function _G(e,t){let r=-1;const n=[];let a;for(;++r<e.length;){const i=e[r];let s;if(typeof i=="string")s=i;else switch(i){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&a)continue;s=" ";break}default:s=String.fromCharCode(i)}a=i===-2,n.push(s)}return n.join("")}function AG(e){const n={constructs:mL([kG,...(e||{}).extensions||[]]),content:a(qq),defined:[],document:a(Gq),flow:a(cG),lazy:{},string:a(hG),text:a(pG)};return n;function a(i){return s;function s(l){return EG(n,i,l)}}}function NG(e){for(;!wL(e););return e}const $C=/[\0\t\n\r]/g;function LG(){let e=1,t="",r=!0,n;return a;function a(i,s,l){const d=[];let h,p,f,m,b;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(s||void 0).decode(i)),f=0,t="",r&&(i.charCodeAt(0)===65279&&f++,r=void 0);f<i.length;){if($C.lastIndex=f,h=$C.exec(i),m=h&&h.index!==void 0?h.index:i.length,b=i.charCodeAt(m),!h){t=i.slice(f);break}if(b===10&&f===m&&n)d.push(-3),n=void 0;else switch(n&&(d.push(-5),n=void 0),f<m&&(d.push(i.slice(f,m)),e+=m-f),b){case 0:{d.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,d.push(-2);e++<p;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:n=!0,e=1}f=m+1}return l&&(n&&d.push(-5),t&&d.push(t),d.push(null)),d}}const PG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function RG(e){return e.replace(PG,IG)}function IG(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return yL(r.slice(i?2:1),i?16:10)}return Bw(r)||e}const _L={}.hasOwnProperty;function DG(e,t,r){return typeof t!="string"&&(r=t,t=void 0),MG(r)(NG(AG(r).document().write(LG()(e,t,!0))))}function MG(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(or),autolinkProtocol:W,autolinkEmail:W,atxHeading:i(wr),blockQuote:i(ge),characterEscape:W,characterReference:W,codeFenced:i(Be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:i(Be,s),codeText:i(ct,s),codeTextData:W,data:W,codeFlowValue:W,definition:i(yt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:i(tr),hardBreakEscape:i(Et),hardBreakTrailing:i(Et),htmlFlow:i(Ar,s),htmlFlowData:W,htmlText:i(Ar,s),htmlTextData:W,image:i($t),label:s,link:i(or),listItem:i(It),listItemValue:m,listOrdered:i(bt,f),listUnordered:i(bt),paragraph:i(mn),reference:I,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:i(wr),strong:i(Jt),thematicBreak:i(yn)},exit:{atxHeading:d(),atxHeadingSequence:B,autolink:d(),autolinkEmail:Me,autolinkProtocol:me,blockQuote:d(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:xe,characterReference:ke,codeFenced:d(T),codeFencedFence:v,codeFencedFenceInfo:b,codeFencedFenceMeta:x,codeFlowValue:O,codeIndented:d(k),codeText:d(U),codeTextData:O,data:O,definition:d(),definitionDestinationString:D,definitionLabelString:C,definitionTitleString:A,emphasis:d(),hardBreakEscape:d(X),hardBreakTrailing:d(X),htmlFlow:d(q),htmlFlowData:O,htmlText:d(N),htmlTextData:O,image:d(K),label:ie,labelText:Q,lineEnding:Y,link:d(j),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ne,resourceDestinationString:G,resourceTitleString:F,resource:H,setextHeading:d($),setextHeadingLineSequence:M,setextHeadingText:R,strong:d(),thematicBreak:d()}};AL(t,(e||{}).mdastExtensions||[]);const r={};return n;function n(ae){let Ce={type:"root",children:[]};const rt={stack:[Ce],tokenStack:[],config:t,enter:l,exit:h,buffer:s,resume:p,data:r},Qe=[];let dt=-1;for(;++dt<ae.length;)if(ae[dt][1].type==="listOrdered"||ae[dt][1].type==="listUnordered")if(ae[dt][0]==="enter")Qe.push(dt);else{const nr=Qe.pop();dt=a(ae,nr,dt)}for(dt=-1;++dt<ae.length;){const nr=t[ae[dt][0]];_L.call(nr,ae[dt][1].type)&&nr[ae[dt][1].type].call(Object.assign({sliceSerialize:ae[dt][2].sliceSerialize},rt),ae[dt][1])}if(rt.tokenStack.length>0){const nr=rt.tokenStack[rt.tokenStack.length-1];(nr[1]||qC).call(rt,void 0,nr[0])}for(Ce.position={start:hl(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:hl(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},dt=-1;++dt<t.transforms.length;)Ce=t.transforms[dt](Ce)||Ce;return Ce}function a(ae,Ce,rt){let Qe=Ce-1,dt=-1,nr=!1,un,br,Sr,Mr;for(;++Qe<=rt;){const ar=ae[Qe];switch(ar[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ar[0]==="enter"?dt++:dt--,Mr=void 0;break}case"lineEndingBlank":{ar[0]==="enter"&&(un&&!Mr&&!dt&&!Sr&&(Sr=Qe),Mr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Mr=void 0}if(!dt&&ar[0]==="enter"&&ar[1].type==="listItemPrefix"||dt===-1&&ar[0]==="exit"&&(ar[1].type==="listUnordered"||ar[1].type==="listOrdered")){if(un){let Jn=Qe;for(br=void 0;Jn--;){const Kr=ae[Jn];if(Kr[1].type==="lineEnding"||Kr[1].type==="lineEndingBlank"){if(Kr[0]==="exit")continue;br&&(ae[br][1].type="lineEndingBlank",nr=!0),Kr[1].type="lineEnding",br=Jn}else if(!(Kr[1].type==="linePrefix"||Kr[1].type==="blockQuotePrefix"||Kr[1].type==="blockQuotePrefixWhitespace"||Kr[1].type==="blockQuoteMarker"||Kr[1].type==="listItemIndent"))break}Sr&&(!br||Sr<br)&&(un._spread=!0),un.end=Object.assign({},br?ae[br][1].start:ar[1].end),ae.splice(br||Qe,0,["exit",un,ar[2]]),Qe++,rt++}if(ar[1].type==="listItemPrefix"){const Jn={type:"listItem",_spread:!1,start:Object.assign({},ar[1].start),end:void 0};un=Jn,ae.splice(Qe,0,["enter",Jn,ar[2]]),Qe++,rt++,Sr=void 0,Mr=!0}}}return ae[Ce][1]._spread=nr,rt}function i(ae,Ce){return rt;function rt(Qe){l.call(this,ae(Qe),Qe),Ce&&Ce.call(this,Qe)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(ae,Ce,rt){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([Ce,rt||void 0]),ae.position={start:hl(Ce.start),end:void 0}}function d(ae){return Ce;function Ce(rt){ae&&ae.call(this,rt),h.call(this,rt)}}function h(ae,Ce){const rt=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==ae.type&&(Ce?Ce.call(this,ae,Qe[0]):(Qe[1]||qC).call(this,ae,Qe[0]));else throw new Error("Cannot close `"+ae.type+"` ("+dp({start:ae.start,end:ae.end})+"): its not open");rt.position.end=hl(ae.end)}function p(){return jw(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(ae){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function b(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=ae}function x(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=ae}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ae.replace(/(\r?\n|\r)$/g,"")}function C(ae){const Ce=this.resume(),rt=this.stack[this.stack.length-1];rt.label=Ce,rt.identifier=ws(this.sliceSerialize(ae)).toLowerCase()}function A(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ae}function D(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ae}function B(ae){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const rt=this.sliceSerialize(ae).length;Ce.depth=rt}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function M(ae){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function W(ae){const rt=this.stack[this.stack.length-1].children;let Qe=rt[rt.length-1];(!Qe||Qe.type!=="text")&&(Qe=Ut(),Qe.position={start:hl(ae.start),end:void 0},rt.push(Qe)),this.stack.push(Qe)}function O(ae){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(ae),Ce.position.end=hl(ae.end)}function Y(ae){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const rt=Ce.children[Ce.children.length-1];rt.position.end=hl(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(W.call(this,ae),O.call(this,ae))}function X(){this.data.atHardBreak=!0}function q(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ae}function N(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ae}function U(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ae}function j(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=Ce,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function K(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=Ce,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Q(ae){const Ce=this.sliceSerialize(ae),rt=this.stack[this.stack.length-2];rt.label=RG(Ce),rt.identifier=ws(Ce).toLowerCase()}function ie(){const ae=this.stack[this.stack.length-1],Ce=this.resume(),rt=this.stack[this.stack.length-1];if(this.data.inReference=!0,rt.type==="link"){const Qe=ae.children;rt.children=Qe}else rt.alt=Ce}function G(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ae}function F(){const ae=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ae}function H(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function ne(ae){const Ce=this.resume(),rt=this.stack[this.stack.length-1];rt.label=Ce,rt.identifier=ws(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function ue(ae){this.data.characterReferenceType=ae.type}function xe(ae){const Ce=this.sliceSerialize(ae),rt=this.data.characterReferenceType;let Qe;rt?(Qe=yL(Ce,rt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Qe=Bw(Ce);const dt=this.stack[this.stack.length-1];dt.value+=Qe}function ke(ae){const Ce=this.stack.pop();Ce.position.end=hl(ae.end)}function me(ae){O.call(this,ae);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(ae)}function Me(ae){O.call(this,ae);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(ae)}function ge(){return{type:"blockquote",children:[]}}function Be(){return{type:"code",lang:null,meta:null,value:""}}function ct(){return{type:"inlineCode",value:""}}function yt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tr(){return{type:"emphasis",children:[]}}function wr(){return{type:"heading",depth:0,children:[]}}function Et(){return{type:"break"}}function Ar(){return{type:"html",value:""}}function $t(){return{type:"image",title:null,url:"",alt:null}}function or(){return{type:"link",title:null,url:"",children:[]}}function bt(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function It(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function mn(){return{type:"paragraph",children:[]}}function Jt(){return{type:"strong",children:[]}}function Ut(){return{type:"text",value:""}}function yn(){return{type:"thematicBreak"}}}function hl(e){return{line:e.line,column:e.column,offset:e.offset}}function AL(e,t){let r=-1;for(;++r<t.length;){const n=t[r];Array.isArray(n)?AL(e,n):OG(e,n)}}function OG(e,t){let r;for(r in t)if(_L.call(t,r))switch(r){case"canContainEols":{const n=t[r];n&&e[r].push(...n);break}case"transforms":{const n=t[r];n&&e[r].push(...n);break}case"enter":case"exit":{const n=t[r];n&&Object.assign(e[r],n);break}}}function qC(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+dp({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+dp({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+dp({start:t.start,end:t.end})+") is still open")}function jG(e){const t=this;t.parser=r;function r(n){return DG(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function BG(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function FG(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function zG(e,t){const r=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function UG(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function $G(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qG(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),a=Td(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s,l=e.footnoteCounts.get(n);l===void 0?(l=0,e.footnoteOrder.push(n),s=e.footnoteOrder.length):s=i+1,l+=1,e.footnoteCounts.set(n,l);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,d);const h={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,h),e.applyData(t,h)}function HG(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function GG(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function NL(e,t){const r=t.referenceType;let n="]";if(r==="collapsed"?n+="[]":r==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const s=a[a.length-1];return s&&s.type==="text"?s.value+=n:a.push({type:"text",value:n}),a}function WG(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return NL(e,t);const a={src:Td(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(a.title=n.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function VG(e,t){const r={src:Td(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,n),e.applyData(t,n)}function YG(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const n={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,n),e.applyData(t,n)}function QG(e,t){const r=String(t.identifier).toUpperCase(),n=e.definitionById.get(r);if(!n)return NL(e,t);const a={href:Td(n.url||"")};n.title!==null&&n.title!==void 0&&(a.title=n.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function KG(e,t){const r={href:Td(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const n={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XG(e,t,r){const n=e.all(t),a=r?JG(r):LL(t),i={},s=[];if(typeof t.checked=="boolean"){const p=n[0];let f;p&&p.type==="element"&&p.tagName==="p"?f=p:(f={type:"element",tagName:"p",properties:{},children:[]},n.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const p=n[l];(a||l!==0||p.type!=="element"||p.tagName!=="p")&&s.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!a?s.push(...p.children):s.push(p)}const d=n[n.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&s.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:s};return e.patch(t,h),e.applyData(t,h)}function JG(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let n=-1;for(;!t&&++n<r.length;)t=LL(r[n])}return t}function LL(e){const t=e.spread;return t??e.children.length>1}function ZG(e,t){const r={},n=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<n.length;){const s=n[a];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(n,!0)};return e.patch(t,i),e.applyData(t,i)}function eW(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function tW(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function rW(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function nW(e,t){const r=e.all(t),n=r.shift(),a=[];if(n){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([n],!0)};e.patch(t.children[0],s),a.push(s)}if(r.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=Xs(t.children[1]),d=O0(t.children[t.children.length-1]);l&&d&&(s.position={start:l,end:d}),a.push(s)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function aW(e,t,r){const n=r?r.children:void 0,i=(n?n.indexOf(t):1)===0?"th":"td",s=r&&r.type==="table"?r.align:void 0,l=s?s.length:t.children.length;let d=-1;const h=[];for(;++d<l;){const f=t.children[d],m={},b=s?s[d]:void 0;b&&(m.align=b);let x={type:"element",tagName:i,properties:m,children:[]};f&&(x.children=e.all(f),e.patch(f,x),x=e.applyData(f,x)),h.push(x)}const p={type:"element",tagName:"tr",properties:{},children:e.wrap(h,!0)};return e.patch(t,p),e.applyData(t,p)}function iW(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const HC=9,GC=32;function sW(e){const t=String(e),r=/\r?\n|\r/g;let n=r.exec(t),a=0;const i=[];for(;n;)i.push(WC(t.slice(a,n.index),a>0,!0),n[0]),a=n.index+n[0].length,n=r.exec(t);return i.push(WC(t.slice(a),a>0,!1)),i.join("")}function WC(e,t,r){let n=0,a=e.length;if(t){let i=e.codePointAt(n);for(;i===HC||i===GC;)n++,i=e.codePointAt(n)}if(r){let i=e.codePointAt(a-1);for(;i===HC||i===GC;)a--,i=e.codePointAt(a-1)}return a>n?e.slice(n,a):""}function oW(e,t){const r={type:"text",value:sW(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function lW(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const cW={blockquote:BG,break:FG,code:zG,delete:UG,emphasis:$G,footnoteReference:qG,heading:HG,html:GG,imageReference:WG,image:VG,inlineCode:YG,linkReference:QG,link:KG,listItem:XG,list:ZG,paragraph:eW,root:tW,strong:rW,table:nW,tableCell:iW,tableRow:aW,text:oW,thematicBreak:lW,toml:Rf,yaml:Rf,definition:Rf,footnoteDefinition:Rf};function Rf(){}const PL=-1,F0=0,pp=1,jm=2,zw=3,Uw=4,$w=5,qw=6,RL=7,IL=8,VC=typeof self=="object"?self:globalThis,uW=(e,t)=>{const r=(a,i)=>(e.set(i,a),a),n=a=>{if(e.has(a))return e.get(a);const[i,s]=t[a];switch(i){case F0:case PL:return r(s,a);case pp:{const l=r([],a);for(const d of s)l.push(n(d));return l}case jm:{const l=r({},a);for(const[d,h]of s)l[n(d)]=n(h);return l}case zw:return r(new Date(s),a);case Uw:{const{source:l,flags:d}=s;return r(new RegExp(l,d),a)}case $w:{const l=r(new Map,a);for(const[d,h]of s)l.set(n(d),n(h));return l}case qw:{const l=r(new Set,a);for(const d of s)l.add(n(d));return l}case RL:{const{name:l,message:d}=s;return r(new VC[l](d),a)}case IL:return r(BigInt(s),a);case"BigInt":return r(Object(BigInt(s)),a);case"ArrayBuffer":return r(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return r(new DataView(l),s)}}return r(new VC[i](s),a)};return n},YC=e=>uW(new Map,e)(0),Pu="",{toString:dW}={},{keys:hW}=Object,Ih=e=>{const t=typeof e;if(t!=="object"||!e)return[F0,t];const r=dW.call(e).slice(8,-1);switch(r){case"Array":return[pp,Pu];case"Object":return[jm,Pu];case"Date":return[zw,Pu];case"RegExp":return[Uw,Pu];case"Map":return[$w,Pu];case"Set":return[qw,Pu];case"DataView":return[pp,r]}return r.includes("Array")?[pp,r]:r.includes("Error")?[RL,r]:[jm,r]},If=([e,t])=>e===F0&&(t==="function"||t==="symbol"),pW=(e,t,r,n)=>{const a=(s,l)=>{const d=n.push(s)-1;return r.set(l,d),d},i=s=>{if(r.has(s))return r.get(s);let[l,d]=Ih(s);switch(l){case F0:{let p=s;switch(d){case"bigint":l=IL,p=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return a([PL],s)}return a([l,p],s)}case pp:{if(d){let m=s;return d==="DataView"?m=new Uint8Array(s.buffer):d==="ArrayBuffer"&&(m=new Uint8Array(s)),a([d,[...m]],s)}const p=[],f=a([l,p],s);for(const m of s)p.push(i(m));return f}case jm:{if(d)switch(d){case"BigInt":return a([d,s.toString()],s);case"Boolean":case"Number":case"String":return a([d,s.valueOf()],s)}if(t&&"toJSON"in s)return i(s.toJSON());const p=[],f=a([l,p],s);for(const m of hW(s))(e||!If(Ih(s[m])))&&p.push([i(m),i(s[m])]);return f}case zw:return a([l,s.toISOString()],s);case Uw:{const{source:p,flags:f}=s;return a([l,{source:p,flags:f}],s)}case $w:{const p=[],f=a([l,p],s);for(const[m,b]of s)(e||!(If(Ih(m))||If(Ih(b))))&&p.push([i(m),i(b)]);return f}case qw:{const p=[],f=a([l,p],s);for(const m of s)(e||!If(Ih(m)))&&p.push(i(m));return f}}const{message:h}=s;return a([l,{name:d,message:h}],s)};return i},QC=(e,{json:t,lossy:r}={})=>{const n=[];return pW(!(t||r),!!t,new Map,n)(e),n},Tc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?YC(QC(e,t)):structuredClone(e):(e,t)=>YC(QC(e,t));function gW(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function fW(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function mW(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||gW,n=e.options.footnoteBackLabel||fW,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let d=-1;for(;++d<e.footnoteOrder.length;){const h=e.footnoteById.get(e.footnoteOrder[d]);if(!h)continue;const p=e.all(h),f=String(h.identifier).toUpperCase(),m=Td(f.toLowerCase());let b=0;const x=[],v=e.footnoteCounts.get(f);for(;v!==void 0&&++b<=v;){x.length>0&&x.push({type:"text",value:" "});let C=typeof r=="string"?r:r(d,b);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(d,b),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const T=p[p.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const C=T.children[T.children.length-1];C&&C.type==="text"?C.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...x)}else p.push(...x);const k={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(p,!0)};e.patch(h,k),l.push(k)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Tc(s),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const tg=(function(e){if(e==null)return vW;if(typeof e=="function")return z0(e);if(typeof e=="object")return Array.isArray(e)?yW(e):bW(e);if(typeof e=="string")return xW(e);throw new Error("Expected function, string, or object as test")});function yW(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=tg(e[r]);return z0(n);function n(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function bW(e){const t=e;return z0(r);function r(n){const a=n;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function xW(e){return z0(t);function t(r){return r&&r.type===e}}function z0(e){return t;function t(r,n,a){return!!(wW(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function vW(){return!0}function wW(e){return e!==null&&typeof e=="object"&&"type"in e}const DL=[],SW=!0,l1=!1,TW="skip";function ML(e,t,r,n){let a;typeof t=="function"&&typeof r!="function"?(n=r,r=t):a=t;const i=tg(a),s=n?-1:1;l(e,void 0,[])();function l(d,h,p){const f=d&&typeof d=="object"?d:{};if(typeof f.type=="string"){const b=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(d.type+(b?"<"+b+">":""))+")"})}return m;function m(){let b=DL,x,v,T;if((!t||i(d,h,p[p.length-1]||void 0))&&(b=kW(r(d,p)),b[0]===l1))return b;if("children"in d&&d.children){const k=d;if(k.children&&b[0]!==TW)for(v=(n?k.children.length:-1)+s,T=p.concat(k);v>-1&&v<k.children.length;){const C=k.children[v];if(x=l(C,v,T)(),x[0]===l1)return x;v=typeof x[1]=="number"?x[1]:v+s}}return b}}}function kW(e){return Array.isArray(e)?e:typeof e=="number"?[SW,e]:e==null?DL:[e]}function rg(e,t,r,n){let a,i,s;typeof t=="function"&&typeof r!="function"?(i=void 0,s=t,a=r):(i=t,s=r,a=n),ML(e,i,l,a);function l(d,h){const p=h[h.length-1],f=p?p.children.indexOf(d):void 0;return s(d,f,p)}}const c1={}.hasOwnProperty,EW={};function CW(e,t){const r=t||EW,n=new Map,a=new Map,i=new Map,s={...cW,...r.handlers},l={all:h,applyData:AW,definitionById:n,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:s,one:d,options:r,patch:_W,wrap:LW};return rg(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const f=p.type==="definition"?n:a,m=String(p.identifier).toUpperCase();f.has(m)||f.set(m,p)}}),l;function d(p,f){const m=p.type,b=l.handlers[m];if(c1.call(l.handlers,m)&&b)return b(l,p,f);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in p){const{children:v,...T}=p,k=Tc(T);return k.children=l.all(p),k}return Tc(p)}return(l.options.unknownHandler||NW)(l,p,f)}function h(p){const f=[];if("children"in p){const m=p.children;let b=-1;for(;++b<m.length;){const x=l.one(m[b],p);if(x){if(b&&m[b-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=KC(x.value)),!Array.isArray(x)&&x.type==="element")){const v=x.children[0];v&&v.type==="text"&&(v.value=KC(v.value))}Array.isArray(x)?f.push(...x):f.push(x)}}}return f}}function _W(e,t){e.position&&(t.position=uL(e))}function AW(e,t){let r=t;if(e&&e.data){const n=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof n=="string")if(r.type==="element")r.tagName=n;else{const s="children"in r?r.children:[r];r={type:"element",tagName:n,properties:{},children:s}}r.type==="element"&&i&&Object.assign(r.properties,Tc(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function NW(e,t){const r=t.data||{},n="value"in t&&!(c1.call(r,"hProperties")||c1.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LW(e,t){const r=[];let n=-1;for(t&&r.push({type:"text",value:`
`});++n<e.length;)n&&r.push({type:"text",value:`
`}),r.push(e[n]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function KC(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function XC(e,t){const r=CW(e,t),n=r.one(e,void 0),a=mW(r),i=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function PW(e,t){return e&&"run"in e?async function(r,n){const a=XC(r,{file:n,...t});await e.run(a,n)}:function(r,n){return XC(r,{file:n,...e||t})}}function JC(e){if(e)throw e}var zx,ZC;function RW(){if(ZC)return zx;ZC=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=function(h){return typeof Array.isArray=="function"?Array.isArray(h):t.call(h)==="[object Array]"},i=function(h){if(!h||t.call(h)!=="[object Object]")return!1;var p=e.call(h,"constructor"),f=h.constructor&&h.constructor.prototype&&e.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!f)return!1;var m;for(m in h);return typeof m>"u"||e.call(h,m)},s=function(h,p){r&&p.name==="__proto__"?r(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},l=function(h,p){if(p==="__proto__")if(e.call(h,p)){if(n)return n(h,p).value}else return;return h[p]};return zx=function d(){var h,p,f,m,b,x,v=arguments[0],T=1,k=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},T=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});T<k;++T)if(h=arguments[T],h!=null)for(p in h)f=l(v,p),m=l(h,p),v!==m&&(C&&m&&(i(m)||(b=a(m)))?(b?(b=!1,x=f&&a(f)?f:[]):x=f&&i(f)?f:{},s(v,{name:p,newValue:d(C,x,m)})):typeof m<"u"&&s(v,{name:p,newValue:m}));return v},zx}var IW=RW();const Ux=Rc(IW);function u1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function DW(){const e=[],t={run:r,use:n};return t;function r(...a){let i=-1;const s=a.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...a);function l(d,...h){const p=e[++i];let f=-1;if(d){s(d);return}for(;++f<a.length;)(h[f]===null||h[f]===void 0)&&(h[f]=a[f]);a=h,p?MW(p,l)(...h):s(null,...h)}}function n(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function MW(e,t){let r;return n;function n(...s){const l=e.length>s.length;let d;l&&s.push(a);try{d=e.apply(this,s)}catch(h){const p=h;if(l&&r)throw p;return a(p)}l||(d&&d.then&&typeof d.then=="function"?d.then(i,a):d instanceof Error?a(d):i(d))}function a(s,...l){r||(r=!0,t(s,...l))}function i(s){a(null,s)}}const Us={basename:OW,dirname:jW,extname:BW,join:FW,sep:"/"};function OW(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ng(e);let r=0,n=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else n<0&&(i=!0,n=a+1);return n<0?"":e.slice(r,n)}if(t===e)return"";let s=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(n=a):(l=-1,n=s));return r===n?n=s:n<0&&(n=e.length),e.slice(r,n)}function jW(e){if(ng(e),e.length===0)return".";let t=-1,r=e.length,n;for(;--r;)if(e.codePointAt(r)===47){if(n){t=r;break}}else n||(n=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function BW(e){ng(e);let t=e.length,r=-1,n=0,a=-1,i=0,s;for(;t--;){const l=e.codePointAt(t);if(l===47){if(s){n=t+1;break}continue}r<0&&(s=!0,r=t+1),l===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===n+1?"":e.slice(a,r)}function FW(...e){let t=-1,r;for(;++t<e.length;)ng(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":zW(r)}function zW(e){ng(e);const t=e.codePointAt(0)===47;let r=UW(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function UW(e,t){let r="",n=0,a=-1,i=0,s=-1,l,d;for(;++s<=e.length;){if(s<e.length)l=e.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(a===s-1||i===1))if(a!==s-1&&i===2){if(r.length<2||n!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),a=s,i=0;continue}}else if(r.length>0){r="",n=0,a=s,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(a+1,s):r=e.slice(a+1,s),n=s-a-1;a=s,i=0}else l===46&&i>-1?i++:i=-1}return r}function ng(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const $W={cwd:qW};function qW(){return"/"}function d1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function HW(e){if(typeof e=="string")e=new URL(e);else if(!d1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return GW(e)}function GW(e){if(e.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const n=t.codePointAt(r+2);if(n===70||n===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const $x=["history","path","basename","stem","extname","dirname"];class OL{constructor(t){let r;t?d1(t)?r={path:t}:typeof t=="string"||WW(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":$W.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<$x.length;){const i=$x[n];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)$x.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Us.basename(this.path):void 0}set basename(t){Hx(t,"basename"),qx(t,"basename"),this.path=Us.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Us.dirname(this.path):void 0}set dirname(t){e_(this.basename,"dirname"),this.path=Us.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Us.extname(this.path):void 0}set extname(t){if(qx(t,"extname"),e_(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Us.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){d1(t)&&(t=HW(t)),Hx(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Us.basename(this.path,this.extname):void 0}set stem(t){Hx(t,"stem"),qx(t,"stem"),this.path=Us.join(this.dirname||"",t+(this.extname||""))}fail(t,r,n){const a=this.message(t,r,n);throw a.fatal=!0,a}info(t,r,n){const a=this.message(t,r,n);return a.fatal=void 0,a}message(t,r,n){const a=new Ia(t,r,n);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function qx(e,t){if(e&&e.includes(Us.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Us.sep+"`")}function Hx(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function e_(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function WW(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const VW=(function(e){const n=this.constructor.prototype,a=n[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,n),i}),YW={}.hasOwnProperty;class Hw extends VW{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=DW()}copy(){const t=new Hw;let r=-1;for(;++r<this.attachers.length;){const n=this.attachers[r];t.use(...n)}return t.data(Ux(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(Vx("data",this.frozen),this.namespace[t]=r,this):YW.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Vx("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const a=r.call(t,...n);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=Df(t),n=this.parser||this.Parser;return Gx("parse",n),n(String(r),r)}process(t,r){const n=this;return this.freeze(),Gx("process",this.parser||this.Parser),Wx("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,s){const l=Df(t),d=n.parse(l);n.run(d,l,function(p,f,m){if(p||!f||!m)return h(p);const b=f,x=n.stringify(b,m);XW(x)?m.value=x:m.result=x,h(p,m)});function h(p,f){p||!f?s(p):i?i(f):r(void 0,f)}}}processSync(t){let r=!1,n;return this.freeze(),Gx("processSync",this.parser||this.Parser),Wx("processSync",this.compiler||this.Compiler),this.process(t,a),r_("processSync","process",r),n;function a(i,s){r=!0,JC(i),n=s}}run(t,r,n){t_(t),this.freeze();const a=this.transformers;return!n&&typeof r=="function"&&(n=r,r=void 0),n?i(void 0,n):new Promise(i);function i(s,l){const d=Df(r);a.run(t,d,h);function h(p,f,m){const b=f||t;p?l(p):s?s(b):n(void 0,b,m)}}}runSync(t,r){let n=!1,a;return this.run(t,r,i),r_("runSync","run",n),a;function i(s,l){JC(s),a=l,n=!0}}stringify(t,r){this.freeze();const n=Df(r),a=this.compiler||this.Compiler;return Wx("stringify",a),t_(t),a(t,n)}use(t,...r){const n=this.attachers,a=this.namespace;if(Vx("use",this.frozen),t!=null)if(typeof t=="function")d(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(h){if(typeof h=="function")d(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...f]=h;d(p,f)}else s(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function s(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(a.settings=Ux(!0,a.settings,h.settings))}function l(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const f=h[p];i(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function d(h,p){let f=-1,m=-1;for(;++f<n.length;)if(n[f][0]===h){m=f;break}if(m===-1)n.push([h,...p]);else if(p.length>0){let[b,...x]=p;const v=n[m][1];u1(v)&&u1(b)&&(b=Ux(!0,v,b)),n[m]=[h,b,...x]}}}}const QW=new Hw().freeze();function Gx(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Wx(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Vx(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function t_(e){if(!u1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function r_(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Df(e){return KW(e)?e:new OL(e)}function KW(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function XW(e){return typeof e=="string"||JW(e)}function JW(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ZW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",n_=[],a_={allowDangerousHtml:!0},eV=/^(https?|ircs?|mailto|xmpp)$/i,tV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function jL(e){const t=rV(e),r=nV(e);return aV(t.runSync(t.parse(r),r),e)}function rV(e){const t=e.rehypePlugins||n_,r=e.remarkPlugins||n_,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...a_}:a_;return QW().use(jG).use(r).use(PW,n).use(t)}function nV(e){const t=e.children||"",r=new OL;return typeof t=="string"&&(r.value=t),r}function aV(e,t){const r=t.allowedElements,n=t.allowElement,a=t.components,i=t.disallowedElements,s=t.skipHtml,l=t.unwrapDisallowed,d=t.urlTransform||iV;for(const p of tV)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+ZW+p.id,void 0);return rg(e,h),vq(e,{Fragment:u.Fragment,components:a,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function h(p,f,m){if(p.type==="raw"&&m&&typeof f=="number")return s?m.children.splice(f,1):m.children[f]={type:"text",value:p.value},f;if(p.type==="element"){let b;for(b in jx)if(Object.hasOwn(jx,b)&&Object.hasOwn(p.properties,b)){const x=p.properties[b],v=jx[b];(v===null||v.includes(p.tagName))&&(p.properties[b]=d(String(x||""),b,p))}}if(p.type==="element"){let b=r?!r.includes(p.tagName):i?i.includes(p.tagName):!1;if(!b&&n&&typeof f=="number"&&(b=!n(p,f,m)),b&&m&&typeof f=="number")return l&&p.children?m.children.splice(f,1,...p.children):m.children.splice(f,1),f}}}function iV(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||n!==-1&&t>n||eV.test(e.slice(0,t))?e:""}function i_(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let n=0,a=r.indexOf(t);for(;a!==-1;)n++,a=r.indexOf(t,a+t.length);return n}function sV(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function oV(e,t,r){const a=tg((r||{}).ignore||[]),i=lV(t);let s=-1;for(;++s<i.length;)ML(e,"text",l);function l(h,p){let f=-1,m;for(;++f<p.length;){const b=p[f],x=m?m.children:void 0;if(a(b,x?x.indexOf(b):void 0,m))return;m=b}if(m)return d(h,p)}function d(h,p){const f=p[p.length-1],m=i[s][0],b=i[s][1];let x=0;const T=f.children.indexOf(h);let k=!1,C=[];m.lastIndex=0;let A=m.exec(h.value);for(;A;){const D=A.index,B={index:A.index,input:A.input,stack:[...p,h]};let R=b(...A,B);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?m.lastIndex=D+1:(x!==D&&C.push({type:"text",value:h.value.slice(x,D)}),Array.isArray(R)?C.push(...R):R&&C.push(R),x=D+A[0].length,k=!0),!m.global)break;A=m.exec(h.value)}return k?(x<h.value.length&&C.push({type:"text",value:h.value.slice(x)}),f.children.splice(T,1,...C)):C=[h],T+C.length}}function lV(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const a=r[n];t.push([cV(a[0]),uV(a[1])])}return t}function cV(e){return typeof e=="string"?new RegExp(sV(e),"g"):e}function uV(e){return typeof e=="function"?e:function(){return e}}const Yx="phrasing",Qx=["autolink","link","image","label"];function dV(){return{transforms:[bV],enter:{literalAutolink:pV,literalAutolinkEmail:Kx,literalAutolinkHttp:Kx,literalAutolinkWww:Kx},exit:{literalAutolink:yV,literalAutolinkEmail:mV,literalAutolinkHttp:gV,literalAutolinkWww:fV}}}function hV(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Yx,notInConstruct:Qx},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Yx,notInConstruct:Qx},{character:":",before:"[ps]",after:"\\/",inConstruct:Yx,notInConstruct:Qx}]}}function pV(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Kx(e){this.config.enter.autolinkProtocol.call(this,e)}function gV(e){this.config.exit.autolinkProtocol.call(this,e)}function fV(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function mV(e){this.config.exit.autolinkEmail.call(this,e)}function yV(e){this.exit(e)}function bV(e){oV(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,xV],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),vV]],{ignore:["link","linkReference"]})}function xV(e,t,r,n,a){let i="";if(!BL(a)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!wV(r)))return!1;const s=SV(r+n);if(!s[0])return!1;const l={type:"link",title:null,url:i+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function vV(e,t,r,n){return!BL(n,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function wV(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function SV(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const a=i_(e,"(");let i=i_(e,")");for(;n!==-1&&a>i;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),i++;return[e,r]}function BL(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Sc(r)||j0(r))&&(!t||r!==47)}FL.peek=PV;function TV(){this.buffer()}function kV(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function EV(){this.buffer()}function CV(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function _V(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ws(this.sliceSerialize(e)).toLowerCase(),r.label=t}function AV(e){this.exit(e)}function NV(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=ws(this.sliceSerialize(e)).toLowerCase(),r.label=t}function LV(e){this.exit(e)}function PV(){return"["}function FL(e,t,r,n){const a=r.createTracker(n);let i=a.move("[^");const s=r.enter("footnoteReference"),l=r.enter("reference");return i+=a.move(r.safe(r.associationId(e),{after:"]",before:i})),l(),s(),i+=a.move("]"),i}function RV(){return{enter:{gfmFootnoteCallString:TV,gfmFootnoteCall:kV,gfmFootnoteDefinitionLabelString:EV,gfmFootnoteDefinition:CV},exit:{gfmFootnoteCallString:_V,gfmFootnoteCall:AV,gfmFootnoteDefinitionLabelString:NV,gfmFootnoteDefinition:LV}}}function IV(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:FL},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(n,a,i,s){const l=i.createTracker(s);let d=l.move("[^");const h=i.enter("footnoteDefinition"),p=i.enter("label");return d+=l.move(i.safe(i.associationId(n),{before:d,after:"]"})),p(),d+=l.move("]:"),n.children&&n.children.length>0&&(l.shift(4),d+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(n,l.current()),t?zL:DV))),h(),d}}function DV(e,t,r){return t===0?e:zL(e,t,r)}function zL(e,t,r){return(r?"":"    ")+e}const MV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];UL.peek=zV;function OV(){return{canContainEols:["delete"],enter:{strikethrough:BV},exit:{strikethrough:FV}}}function jV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:MV}],handlers:{delete:UL}}}function BV(e){this.enter({type:"delete",children:[]},e)}function FV(e){this.exit(e)}function UL(e,t,r,n){const a=r.createTracker(n),i=r.enter("strikethrough");let s=a.move("~~");return s+=r.containerPhrasing(e,{...a.current(),before:s,after:"~"}),s+=a.move("~~"),i(),s}function zV(){return"~"}function UV(e){return e.length}function $V(e,t){const r=t||{},n=(r.align||[]).concat(),a=r.stringLength||UV,i=[],s=[],l=[],d=[];let h=0,p=-1;for(;++p<e.length;){const v=[],T=[];let k=-1;for(e[p].length>h&&(h=e[p].length);++k<e[p].length;){const C=qV(e[p][k]);if(r.alignDelimiters!==!1){const A=a(C);T[k]=A,(d[k]===void 0||A>d[k])&&(d[k]=A)}v.push(C)}s[p]=v,l[p]=T}let f=-1;if(typeof n=="object"&&"length"in n)for(;++f<h;)i[f]=s_(n[f]);else{const v=s_(n);for(;++f<h;)i[f]=v}f=-1;const m=[],b=[];for(;++f<h;){const v=i[f];let T="",k="";v===99?(T=":",k=":"):v===108?T=":":v===114&&(k=":");let C=r.alignDelimiters===!1?1:Math.max(1,d[f]-T.length-k.length);const A=T+"-".repeat(C)+k;r.alignDelimiters!==!1&&(C=T.length+C+k.length,C>d[f]&&(d[f]=C),b[f]=C),m[f]=A}s.splice(1,0,m),l.splice(1,0,b),p=-1;const x=[];for(;++p<s.length;){const v=s[p],T=l[p];f=-1;const k=[];for(;++f<h;){const C=v[f]||"";let A="",D="";if(r.alignDelimiters!==!1){const B=d[f]-(T[f]||0),R=i[f];R===114?A=" ".repeat(B):R===99?B%2?(A=" ".repeat(B/2+.5),D=" ".repeat(B/2-.5)):(A=" ".repeat(B/2),D=A):D=" ".repeat(B)}r.delimiterStart!==!1&&!f&&k.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&C==="")&&(r.delimiterStart!==!1||f)&&k.push(" "),r.alignDelimiters!==!1&&k.push(A),k.push(C),r.alignDelimiters!==!1&&k.push(D),r.padding!==!1&&k.push(" "),(r.delimiterEnd!==!1||f!==h-1)&&k.push("|")}x.push(r.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return x.join(`
`)}function qV(e){return e==null?"":String(e)}function s_(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const o_={}.hasOwnProperty;function $L(e,t){const r=t||{};function n(a,...i){let s=n.invalid;const l=n.handlers;if(a&&o_.call(a,e)){const d=String(a[e]);s=o_.call(l,d)?l[d]:n.unknown}if(s)return s.call(this,a,...i)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}function HV(e,t,r,n){const a=r.enter("blockquote"),i=r.createTracker(n);i.move("> "),i.shift(2);const s=r.indentLines(r.containerFlow(e,i.current()),GV);return a(),s}function GV(e,t,r){return">"+(r?"":" ")+e}function WV(e,t){return l_(e,t.inConstruct,!0)&&!l_(e,t.notInConstruct,!1)}function l_(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function c_(e,t,r,n){let a=-1;for(;++a<r.unsafe.length;)if(r.unsafe[a].character===`
`&&WV(r.stack,r.unsafe[a]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function VV(e,t){const r=String(e);let n=r.indexOf(t),a=n,i=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===a?++i>s&&(s=i):i=1,a=n+t.length,n=r.indexOf(t,a);return s}function YV(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function QV(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function KV(e,t,r,n){const a=QV(r),i=e.value||"",s=a==="`"?"GraveAccent":"Tilde";if(YV(e,r)){const f=r.enter("codeIndented"),m=r.indentLines(i,XV);return f(),m}const l=r.createTracker(n),d=a.repeat(Math.max(VV(i,a)+1,3)),h=r.enter("codeFenced");let p=l.move(d);if(e.lang){const f=r.enter(`codeFencedLang${s}`);p+=l.move(r.safe(e.lang,{before:p,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=r.enter(`codeFencedMeta${s}`);p+=l.move(" "),p+=l.move(r.safe(e.meta,{before:p,after:`
`,encode:["`"],...l.current()})),f()}return p+=l.move(`
`),i&&(p+=l.move(i+`
`)),p+=l.move(d),h(),p}function XV(e,t,r){return(r?"":"    ")+e}function Gw(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function JV(e,t,r,n){const a=Gw(r),i=a==='"'?"Quote":"Apostrophe",s=r.enter("definition");let l=r.enter("label");const d=r.createTracker(n);let h=d.move("[");return h+=d.move(r.safe(r.associationId(e),{before:h,after:"]",...d.current()})),h+=d.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(l=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":`
`,...d.current()}))),l(),e.title&&(l=r.enter(`title${i}`),h+=d.move(" "+a),h+=d.move(r.safe(e.title,{before:h,after:a,...d.current()})),h+=d.move(a),l()),s(),h}function ZV(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Rp(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Bm(e,t,r){const n=id(e),a=id(t);return n===void 0?a===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}qL.peek=eY;function qL(e,t,r,n){const a=ZV(r),i=r.enter("emphasis"),s=r.createTracker(n),l=s.move(a);let d=s.move(r.containerPhrasing(e,{after:a,before:l,...s.current()}));const h=d.charCodeAt(0),p=Bm(n.before.charCodeAt(n.before.length-1),h,a);p.inside&&(d=Rp(h)+d.slice(1));const f=d.charCodeAt(d.length-1),m=Bm(n.after.charCodeAt(0),f,a);m.inside&&(d=d.slice(0,-1)+Rp(f));const b=s.move(a);return i(),r.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},l+d+b}function eY(e,t,r){return r.options.emphasis||"*"}function tY(e,t){let r=!1;return rg(e,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return r=!0,l1}),!!((!e.depth||e.depth<3)&&jw(e)&&(t.options.setext||r))}function rY(e,t,r,n){const a=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(n);if(tY(e,r)){const p=r.enter("headingSetext"),f=r.enter("phrasing"),m=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return f(),p(),m+`
`+(a===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const s="#".repeat(a),l=r.enter("headingAtx"),d=r.enter("phrasing");i.move(s+" ");let h=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(h)&&(h=Rp(h.charCodeAt(0))+h.slice(1)),h=h?s+" "+h:s,r.options.closeAtx&&(h+=" "+s),d(),l(),h}HL.peek=nY;function HL(e){return e.value||""}function nY(){return"<"}GL.peek=aY;function GL(e,t,r,n){const a=Gw(r),i=a==='"'?"Quote":"Apostrophe",s=r.enter("image");let l=r.enter("label");const d=r.createTracker(n);let h=d.move("![");return h+=d.move(r.safe(e.alt,{before:h,after:"]",...d.current()})),h+=d.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),h+=d.move("<"),h+=d.move(r.safe(e.url,{before:h,after:">",...d.current()})),h+=d.move(">")):(l=r.enter("destinationRaw"),h+=d.move(r.safe(e.url,{before:h,after:e.title?" ":")",...d.current()}))),l(),e.title&&(l=r.enter(`title${i}`),h+=d.move(" "+a),h+=d.move(r.safe(e.title,{before:h,after:a,...d.current()})),h+=d.move(a),l()),h+=d.move(")"),s(),h}function aY(){return"!"}WL.peek=iY;function WL(e,t,r,n){const a=e.referenceType,i=r.enter("imageReference");let s=r.enter("label");const l=r.createTracker(n);let d=l.move("![");const h=r.safe(e.alt,{before:d,after:"]",...l.current()});d+=l.move(h+"]["),s();const p=r.stack;r.stack=[],s=r.enter("reference");const f=r.safe(r.associationId(e),{before:d,after:"]",...l.current()});return s(),r.stack=p,i(),a==="full"||!h||h!==f?d+=l.move(f+"]"):a==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function iY(){return"!"}VL.peek=sY;function VL(e,t,r){let n=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(n);)a+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<r.unsafe.length;){const s=r.unsafe[i],l=r.compilePattern(s);let d;if(s.atBreak)for(;d=l.exec(n);){let h=d.index;n.charCodeAt(h)===10&&n.charCodeAt(h-1)===13&&h--,n=n.slice(0,h)+" "+n.slice(d.index+1)}}return a+n+a}function sY(){return"`"}function YL(e,t){const r=jw(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}QL.peek=oY;function QL(e,t,r,n){const a=Gw(r),i=a==='"'?"Quote":"Apostrophe",s=r.createTracker(n);let l,d;if(YL(e,r)){const p=r.stack;r.stack=[],l=r.enter("autolink");let f=s.move("<");return f+=s.move(r.containerPhrasing(e,{before:f,after:">",...s.current()})),f+=s.move(">"),l(),r.stack=p,f}l=r.enter("link"),d=r.enter("label");let h=s.move("[");return h+=s.move(r.containerPhrasing(e,{before:h,after:"](",...s.current()})),h+=s.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=r.enter("destinationLiteral"),h+=s.move("<"),h+=s.move(r.safe(e.url,{before:h,after:">",...s.current()})),h+=s.move(">")):(d=r.enter("destinationRaw"),h+=s.move(r.safe(e.url,{before:h,after:e.title?" ":")",...s.current()}))),d(),e.title&&(d=r.enter(`title${i}`),h+=s.move(" "+a),h+=s.move(r.safe(e.title,{before:h,after:a,...s.current()})),h+=s.move(a),d()),h+=s.move(")"),l(),h}function oY(e,t,r){return YL(e,r)?"<":"["}KL.peek=lY;function KL(e,t,r,n){const a=e.referenceType,i=r.enter("linkReference");let s=r.enter("label");const l=r.createTracker(n);let d=l.move("[");const h=r.containerPhrasing(e,{before:d,after:"]",...l.current()});d+=l.move(h+"]["),s();const p=r.stack;r.stack=[],s=r.enter("reference");const f=r.safe(r.associationId(e),{before:d,after:"]",...l.current()});return s(),r.stack=p,i(),a==="full"||!h||h!==f?d+=l.move(f+"]"):a==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function lY(){return"["}function Ww(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function cY(e){const t=Ww(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function uY(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function XL(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function dY(e,t,r,n){const a=r.enter("list"),i=r.bulletCurrent;let s=e.ordered?uY(r):Ww(r);const l=e.ordered?s==="."?")":".":cY(r);let d=t&&r.bulletLastUsed?s===r.bulletLastUsed:!1;if(!e.ordered){const p=e.children?e.children[0]:void 0;if((s==="*"||s==="-")&&p&&(!p.children||!p.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(d=!0),XL(r)===s&&p){let f=-1;for(;++f<e.children.length;){const m=e.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(s=l),r.bulletCurrent=s;const h=r.containerFlow(e,n);return r.bulletLastUsed=s,r.bulletCurrent=i,a(),h}function hY(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function pY(e,t,r,n){const a=hY(r);let i=r.bulletCurrent||Ww(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let s=i.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(s=Math.ceil(s/4)*4);const l=r.createTracker(n);l.move(i+" ".repeat(s-i.length)),l.shift(s);const d=r.enter("listItem"),h=r.indentLines(r.containerFlow(e,l.current()),p);return d(),h;function p(f,m,b){return m?(b?"":" ".repeat(s))+f:(b?i:i+" ".repeat(s-i.length))+f}}function gY(e,t,r,n){const a=r.enter("paragraph"),i=r.enter("phrasing"),s=r.containerPhrasing(e,n);return i(),a(),s}const fY=tg(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function mY(e,t,r,n){return(e.children.some(function(s){return fY(s)})?r.containerPhrasing:r.containerFlow).call(r,e,n)}function yY(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}JL.peek=bY;function JL(e,t,r,n){const a=yY(r),i=r.enter("strong"),s=r.createTracker(n),l=s.move(a+a);let d=s.move(r.containerPhrasing(e,{after:a,before:l,...s.current()}));const h=d.charCodeAt(0),p=Bm(n.before.charCodeAt(n.before.length-1),h,a);p.inside&&(d=Rp(h)+d.slice(1));const f=d.charCodeAt(d.length-1),m=Bm(n.after.charCodeAt(0),f,a);m.inside&&(d=d.slice(0,-1)+Rp(f));const b=s.move(a+a);return i(),r.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},l+d+b}function bY(e,t,r){return r.options.strong||"*"}function xY(e,t,r,n){return r.safe(e.value,n)}function vY(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function wY(e,t,r){const n=(XL(r)+(r.options.ruleSpaces?" ":"")).repeat(vY(r));return r.options.ruleSpaces?n.slice(0,-1):n}const ZL={blockquote:HV,break:c_,code:KV,definition:JV,emphasis:qL,hardBreak:c_,heading:rY,html:HL,image:GL,imageReference:WL,inlineCode:VL,link:QL,linkReference:KL,list:dY,listItem:pY,paragraph:gY,root:mY,strong:JL,text:xY,thematicBreak:wY};function SY(){return{enter:{table:TY,tableData:u_,tableHeader:u_,tableRow:EY},exit:{codeText:CY,table:kY,tableData:Xx,tableHeader:Xx,tableRow:Xx}}}function TY(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function kY(e){this.exit(e),this.data.inTable=void 0}function EY(e){this.enter({type:"tableRow",children:[]},e)}function Xx(e){this.exit(e)}function u_(e){this.enter({type:"tableCell",children:[]},e)}function CY(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,_Y));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function _Y(e,t){return t==="|"?t:e}function AY(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,a=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:s,tableCell:d,tableRow:l}};function s(b,x,v,T){return h(p(b,v,T),b.align)}function l(b,x,v,T){const k=f(b,v,T),C=h([k]);return C.slice(0,C.indexOf(`
`))}function d(b,x,v,T){const k=v.enter("tableCell"),C=v.enter("phrasing"),A=v.containerPhrasing(b,{...T,before:i,after:i});return C(),k(),A}function h(b,x){return $V(b,{align:x,alignDelimiters:n,padding:r,stringLength:a})}function p(b,x,v){const T=b.children;let k=-1;const C=[],A=x.enter("table");for(;++k<T.length;)C[k]=f(T[k],x,v);return A(),C}function f(b,x,v){const T=b.children;let k=-1;const C=[],A=x.enter("tableRow");for(;++k<T.length;)C[k]=d(T[k],b,x,v);return A(),C}function m(b,x,v){let T=ZL.inlineCode(b,x,v);return v.stack.includes("tableCell")&&(T=T.replace(/\|/g,"\\$&")),T}}function NY(){return{exit:{taskListCheckValueChecked:d_,taskListCheckValueUnchecked:d_,paragraph:PY}}}function LY(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:RY}}}function d_(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function PY(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const n=r.children[0];if(n&&n.type==="text"){const a=t.children;let i=-1,s;for(;++i<a.length;){const l=a[i];if(l.type==="paragraph"){s=l;break}}s===r&&(n.value=n.value.slice(1),n.value.length===0?r.children.shift():r.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,r.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function RY(e,t,r,n){const a=e.children[0],i=typeof e.checked=="boolean"&&a&&a.type==="paragraph",s="["+(e.checked?"x":" ")+"] ",l=r.createTracker(n);i&&l.move(s);let d=ZL.listItem(e,t,r,{...n,...l.current()});return i&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),d;function h(p){return p+s}}function IY(){return[dV(),RV(),OV(),SY(),NY()]}function DY(e){return{extensions:[hV(),IV(e),jV(),AY(e),LY()]}}const MY={tokenize:UY,partial:!0},eP={tokenize:$Y,partial:!0},tP={tokenize:qY,partial:!0},rP={tokenize:HY,partial:!0},OY={tokenize:GY,partial:!0},nP={name:"wwwAutolink",tokenize:FY,previous:iP},aP={name:"protocolAutolink",tokenize:zY,previous:sP},Mo={name:"emailAutolink",tokenize:BY,previous:oP},Js={};function jY(){return{text:Js}}let ec=48;for(;ec<123;)Js[ec]=Mo,ec++,ec===58?ec=65:ec===91&&(ec=97);Js[43]=Mo;Js[45]=Mo;Js[46]=Mo;Js[95]=Mo;Js[72]=[Mo,aP];Js[104]=[Mo,aP];Js[87]=[Mo,nP];Js[119]=[Mo,nP];function BY(e,t,r){const n=this;let a,i;return s;function s(f){return!h1(f)||!oP.call(n,n.previous)||Vw(n.events)?r(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return h1(f)?(e.consume(f),l):f===64?(e.consume(f),d):r(f)}function d(f){return f===46?e.check(OY,p,h)(f):f===45||f===95||Aa(f)?(i=!0,e.consume(f),d):p(f)}function h(f){return e.consume(f),a=!0,d}function p(f){return i&&a&&$a(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):r(f)}}function FY(e,t,r){const n=this;return a;function a(s){return s!==87&&s!==119||!iP.call(n,n.previous)||Vw(n.events)?r(s):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(MY,e.attempt(eP,e.attempt(tP,i),r),r)(s))}function i(s){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(s)}}function zY(e,t,r){const n=this;let a="",i=!1;return s;function s(f){return(f===72||f===104)&&sP.call(n,n.previous)&&!Vw(n.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(f),e.consume(f),l):r(f)}function l(f){if($a(f)&&a.length<5)return a+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const m=a.toLowerCase();if(m==="http"||m==="https")return e.consume(f),d}return r(f)}function d(f){return f===47?(e.consume(f),i?h:(i=!0,d)):r(f)}function h(f){return f===null||Om(f)||en(f)||Sc(f)||j0(f)?r(f):e.attempt(eP,e.attempt(tP,p),r)(f)}function p(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function UY(e,t,r){let n=0;return a;function a(s){return(s===87||s===119)&&n<3?(n++,e.consume(s),a):s===46&&n===3?(e.consume(s),i):r(s)}function i(s){return s===null?r(s):t(s)}}function $Y(e,t,r){let n,a,i;return s;function s(h){return h===46||h===95?e.check(rP,d,l)(h):h===null||en(h)||Sc(h)||h!==45&&j0(h)?d(h):(i=!0,e.consume(h),s)}function l(h){return h===95?n=!0:(a=n,n=void 0),e.consume(h),s}function d(h){return a||n||!i?r(h):t(h)}}function qY(e,t){let r=0,n=0;return a;function a(s){return s===40?(r++,e.consume(s),a):s===41&&n<r?i(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?e.check(rP,t,i)(s):s===null||en(s)||Sc(s)?t(s):(e.consume(s),a)}function i(s){return s===41&&n++,e.consume(s),a}}function HY(e,t,r){return n;function n(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),n):l===38?(e.consume(l),i):l===93?(e.consume(l),a):l===60||l===null||en(l)||Sc(l)?t(l):r(l)}function a(l){return l===null||l===40||l===91||en(l)||Sc(l)?t(l):n(l)}function i(l){return $a(l)?s(l):r(l)}function s(l){return l===59?(e.consume(l),n):$a(l)?(e.consume(l),s):r(l)}}function GY(e,t,r){return n;function n(i){return e.consume(i),a}function a(i){return Aa(i)?r(i):t(i)}}function iP(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||en(e)}function sP(e){return!$a(e)}function oP(e){return!(e===47||h1(e))}function h1(e){return e===43||e===45||e===46||e===95||Aa(e)}function Vw(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const WY={tokenize:eQ,partial:!0};function VY(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:XY,continuation:{tokenize:JY},exit:ZY}},text:{91:{name:"gfmFootnoteCall",tokenize:KY},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:YY,resolveTo:QY}}}}function YY(e,t,r){const n=this;let a=n.events.length;const i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;a--;){const d=n.events[a][1];if(d.type==="labelImage"){s=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return l;function l(d){if(!s||!s._balanced)return r(d);const h=ws(n.sliceSerialize({start:s.end,end:n.now()}));return h.codePointAt(0)!==94||!i.includes(h.slice(1))?r(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function QY(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...l),e}function KY(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i=0,s;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),d}function d(f){return f!==94?r(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",h)}function h(f){if(i>999||f===93&&!s||f===null||f===91||en(f))return r(f);if(f===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return a.includes(ws(n.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(f)}return en(f)||(s=!0),i++,e.consume(f),f===92?p:h}function p(f){return f===91||f===92||f===93?(e.consume(f),i++,h):h(f)}}function XY(e,t,r){const n=this,a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let i,s=0,l;return d;function d(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):r(x)}function p(x){if(s>999||x===93&&!l||x===null||x===91||en(x))return r(x);if(x===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return i=ws(n.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return en(x)||(l=!0),s++,e.consume(x),x===92?f:p}function f(x){return x===91||x===92||x===93?(e.consume(x),s++,p):p(x)}function m(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(i)||a.push(i),_r(e,b,"gfmFootnoteDefinitionWhitespace")):r(x)}function b(x){return t(x)}}function JY(e,t,r){return e.check(eg,t,e.attempt(WY,t,r))}function ZY(e){e.exit("gfmFootnoteDefinition")}function eQ(e,t,r){const n=this;return _r(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const s=n.events[n.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(i):r(i)}}function tQ(e){let r=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:i,resolveAll:a};return r==null&&(r=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function a(s,l){let d=-1;for(;++d<s.length;)if(s[d][0]==="enter"&&s[d][1].type==="strikethroughSequenceTemporary"&&s[d][1]._close){let h=d;for(;h--;)if(s[h][0]==="exit"&&s[h][1].type==="strikethroughSequenceTemporary"&&s[h][1]._open&&s[d][1].end.offset-s[d][1].start.offset===s[h][1].end.offset-s[h][1].start.offset){s[d][1].type="strikethroughSequence",s[h][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},s[h][1].start),end:Object.assign({},s[d][1].end)},f={type:"strikethroughText",start:Object.assign({},s[h][1].end),end:Object.assign({},s[d][1].start)},m=[["enter",p,l],["enter",s[h][1],l],["exit",s[h][1],l],["enter",f,l]],b=l.parser.constructs.insideSpan.null;b&&Ni(m,m.length,0,B0(b,s.slice(h+1,d),l)),Ni(m,m.length,0,[["exit",f,l],["enter",s[d][1],l],["exit",s[d][1],l],["exit",p,l]]),Ni(s,h-1,d-h+3,m),d=h+m.length-2;break}}for(d=-1;++d<s.length;)s[d][1].type==="strikethroughSequenceTemporary"&&(s[d][1].type="data");return s}function i(s,l,d){const h=this.previous,p=this.events;let f=0;return m;function m(x){return h===126&&p[p.length-1][1].type!=="characterEscape"?d(x):(s.enter("strikethroughSequenceTemporary"),b(x))}function b(x){const v=id(h);if(x===126)return f>1?d(x):(s.consume(x),f++,b);if(f<2&&!r)return d(x);const T=s.exit("strikethroughSequenceTemporary"),k=id(x);return T._open=!k||k===2&&!!v,T._close=!v||v===2&&!!k,l(x)}}}class rQ{constructor(){this.map=[]}add(t,r,n){nQ(this,t,r,n)}consume(t){if(this.map.sort(function(i,s){return i[0]-s[0]}),this.map.length===0)return;let r=this.map.length;const n=[];for(;r>0;)r-=1,n.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];n.push(t.slice()),t.length=0;let a=n.pop();for(;a;){for(const i of a)t.push(i);a=n.pop()}this.map.length=0}}function nQ(e,t,r,n){let a=0;if(!(r===0&&n.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=r,e.map[a][2].push(...n);return}a+=1}e.map.push([t,r,n])}}function aQ(e,t){let r=!1;const n=[];for(;t<e.length;){const a=e[t];if(r){if(a[0]==="enter")a[1].type==="tableContent"&&n.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=n.length-1;n[i]=n[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return n}function iQ(){return{flow:{null:{name:"table",tokenize:sQ,resolveAll:oQ}}}}function sQ(e,t,r){const n=this;let a=0,i=0,s;return l;function l(O){let Y=n.events.length-1;for(;Y>-1;){const N=n.events[Y][1].type;if(N==="lineEnding"||N==="linePrefix")Y--;else break}const X=Y>-1?n.events[Y][1].type:null,q=X==="tableHead"||X==="tableRow"?R:d;return q===R&&n.parser.lazy[n.now().line]?r(O):q(O)}function d(O){return e.enter("tableHead"),e.enter("tableRow"),h(O)}function h(O){return O===124||(s=!0,i+=1),p(O)}function p(O){return O===null?r(O):Ot(O)?i>1?(i=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),b):r(O):gr(O)?_r(e,p,"whitespace")(O):(i+=1,s&&(s=!1,a+=1),O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),s=!0,p):(e.enter("data"),f(O)))}function f(O){return O===null||O===124||en(O)?(e.exit("data"),p(O)):(e.consume(O),O===92?m:f)}function m(O){return O===92||O===124?(e.consume(O),f):f(O)}function b(O){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(O):(e.enter("tableDelimiterRow"),s=!1,gr(O)?_r(e,x,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):x(O))}function x(O){return O===45||O===58?T(O):O===124?(s=!0,e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),v):B(O)}function v(O){return gr(O)?_r(e,T,"whitespace")(O):T(O)}function T(O){return O===58?(i+=1,s=!0,e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),k):O===45?(i+=1,k(O)):O===null||Ot(O)?D(O):B(O)}function k(O){return O===45?(e.enter("tableDelimiterFiller"),C(O)):B(O)}function C(O){return O===45?(e.consume(O),C):O===58?(s=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(O),e.exit("tableDelimiterMarker"),A):(e.exit("tableDelimiterFiller"),A(O))}function A(O){return gr(O)?_r(e,D,"whitespace")(O):D(O)}function D(O){return O===124?x(O):O===null||Ot(O)?!s||a!==i?B(O):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(O)):B(O)}function B(O){return r(O)}function R(O){return e.enter("tableRow"),M(O)}function M(O){return O===124?(e.enter("tableCellDivider"),e.consume(O),e.exit("tableCellDivider"),M):O===null||Ot(O)?(e.exit("tableRow"),t(O)):gr(O)?_r(e,M,"whitespace")(O):(e.enter("data"),$(O))}function $(O){return O===null||O===124||en(O)?(e.exit("data"),M(O)):(e.consume(O),O===92?W:$)}function W(O){return O===92||O===124?(e.consume(O),$):$(O)}}function oQ(e,t){let r=-1,n=!0,a=0,i=[0,0,0,0],s=[0,0,0,0],l=!1,d=0,h,p,f;const m=new rQ;for(;++r<e.length;){const b=e[r],x=b[1];b[0]==="enter"?x.type==="tableHead"?(l=!1,d!==0&&(h_(m,t,d,h,p),p=void 0,d=0),h={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(r,0,[["enter",h,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(n=!0,f=void 0,i=[0,0,0,0],s=[0,r+1,0,0],l&&(l=!1,p={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(r,0,[["enter",p,t]])),a=x.type==="tableDelimiterRow"?2:p?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(n=!1,s[2]===0&&(i[1]!==0&&(s[0]=s[1],f=Mf(m,t,i,a,void 0,f),i=[0,0,0,0]),s[2]=r)):x.type==="tableCellDivider"&&(n?n=!1:(i[1]!==0&&(s[0]=s[1],f=Mf(m,t,i,a,void 0,f)),i=s,s=[i[1],r,0,0])):x.type==="tableHead"?(l=!0,d=r):x.type==="tableRow"||x.type==="tableDelimiterRow"?(d=r,i[1]!==0?(s[0]=s[1],f=Mf(m,t,i,a,r,f)):s[1]!==0&&(f=Mf(m,t,s,a,r,f)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(s[3]=r)}for(d!==0&&h_(m,t,d,h,p),m.consume(t.events),r=-1;++r<t.events.length;){const b=t.events[r];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=aQ(t.events,r))}return e}function Mf(e,t,r,n,a,i){const s=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",l="tableContent";r[0]!==0&&(i.end=Object.assign({},ju(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const d=ju(t.events,r[1]);if(i={type:s,start:Object.assign({},d),end:Object.assign({},d)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){const h=ju(t.events,r[2]),p=ju(t.events,r[3]),f={type:l,start:Object.assign({},h),end:Object.assign({},p)};if(e.add(r[2],0,[["enter",f,t]]),n!==2){const m=t.events[r[2]],b=t.events[r[3]];if(m[1].end=Object.assign({},b[1].end),m[1].type="chunkText",m[1].contentType="text",r[3]>r[2]+1){const x=r[2]+1,v=r[3]-r[2]-1;e.add(x,v,[])}}e.add(r[3]+1,0,[["exit",f,t]])}return a!==void 0&&(i.end=Object.assign({},ju(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function h_(e,t,r,n,a){const i=[],s=ju(t.events,r);a&&(a.end=Object.assign({},s),i.push(["exit",a,t])),n.end=Object.assign({},s),i.push(["exit",n,t]),e.add(r+1,0,i)}function ju(e,t){const r=e[t],n=r[0]==="enter"?"start":"end";return r[1][n]}const lQ={name:"tasklistCheck",tokenize:uQ};function cQ(){return{text:{91:lQ}}}function uQ(e,t,r){const n=this;return a;function a(d){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?r(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),i)}function i(d){return en(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),s):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),s):r(d)}function s(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):r(d)}function l(d){return Ot(d)?t(d):gr(d)?e.check({tokenize:dQ},t,r)(d):r(d)}}function dQ(e,t,r){return _r(e,n,"whitespace");function n(a){return a===null?r(a):t(a)}}function hQ(e){return mL([jY(),VY(),tQ(e),iQ(),cQ()])}const pQ={};function gQ(e){const t=this,r=e||pQ,n=t.data(),a=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);a.push(hQ(r)),i.push(IY()),s.push(DY(r))}const p_=/[#.]/g;function fQ(e,t){const r=e||"",n={};let a=0,i,s;for(;a<r.length;){p_.lastIndex=a;const l=p_.exec(r),d=r.slice(a,l?l.index:r.length);d&&(i?i==="#"?n.id=d:Array.isArray(n.className)?n.className.push(d):n.className=[d]:s=d,a+=d.length),l&&(i=l[0],a++)}return{type:"element",tagName:s||t||"div",properties:n,children:[]}}function lP(e,t,r){const n=r?xQ(r):void 0;function a(i,s,...l){let d;if(i==null){d={type:"root",children:[]};const h=s;l.unshift(h)}else{d=fQ(i,t);const h=d.tagName.toLowerCase(),p=n?n.get(h):void 0;if(d.tagName=p||h,mQ(s))l.unshift(s);else for(const[f,m]of Object.entries(s))yQ(e,d.properties,f,m)}for(const h of l)p1(d.children,h);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return a}function mQ(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const n of r){const a=t[n];if(a&&typeof a=="object"){if(!Array.isArray(a))return!0;const i=a;for(const s of i)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function yQ(e,t,r,n){const a=Iw(e,r);let i;if(n!=null){if(typeof n=="number"){if(Number.isNaN(n))return;i=n}else typeof n=="boolean"?i=n:typeof n=="string"?a.spaceSeparated?i=CC(n):a.commaSeparated?i=wC(n):a.commaOrSpaceSeparated?i=CC(wC(n).join(" ")):i=g_(a,a.property,n):Array.isArray(n)?i=[...n]:i=a.property==="style"?bQ(n):String(n);if(Array.isArray(i)){const s=[];for(const l of i)s.push(g_(a,a.property,l));i=s}a.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[a.property]=i}}function p1(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)p1(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?p1(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function g_(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||Lp(r)===Lp(t)))return!0}return r}function bQ(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}function xQ(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const vQ=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],wQ=lP(M0,"div"),SQ=lP(Sd,"g",vQ);function TQ(e){const t=String(e),r=[];return{toOffset:a,toPoint:n};function n(i){if(typeof i=="number"&&i>-1&&i<=t.length){let s=0;for(;;){let l=r[s];if(l===void 0){const d=f_(t,r[s-1]);l=d===-1?t.length+1:d+1,r[s]=l}if(l>i)return{line:s+1,column:i-(s>0?r[s-1]:0)+1,offset:i};s++}}}function a(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;r.length<i.line;){const l=r[r.length-1],d=f_(t,l),h=d===-1?t.length+1:d+1;if(l===h)break;r.push(h)}const s=(i.line>1?r[i.line-2]:0)+i.column-1;if(s<r[i.line-1])return s}}}function f_(e,t){const r=e.indexOf("\r",t),n=e.indexOf(`
`,t);return n===-1?r:r===-1||r+1===n?n:r<n?r:n}const cc={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},cP={}.hasOwnProperty,kQ=Object.prototype;function EQ(e,t){const r=t||{};return Yw({file:r.file||void 0,location:!1,schema:r.space==="svg"?Sd:M0,verbose:r.verbose||!1},e)}function Yw(e,t){let r;switch(t.nodeName){case"#comment":{const n=t;return r={type:"comment",value:n.data},cm(e,n,r),r}case"#document":case"#document-fragment":{const n=t,a="mode"in n?n.mode==="quirks"||n.mode==="limited-quirks":!1;if(r={type:"root",children:uP(e,t.childNodes),data:{quirksMode:a}},e.file&&e.location){const i=String(e.file),s=TQ(i),l=s.toPoint(0),d=s.toPoint(i.length);r.position={start:l,end:d}}return r}case"#documentType":{const n=t;return r={type:"doctype"},cm(e,n,r),r}case"#text":{const n=t;return r={type:"text",value:n.value},cm(e,n,r),r}default:return r=CQ(e,t),r}}function uP(e,t){let r=-1;const n=[];for(;++r<t.length;){const a=Yw(e,t[r]);n.push(a)}return n}function CQ(e,t){const r=e.schema;e.schema=t.namespaceURI===cc.svg?Sd:M0;let n=-1;const a={};for(;++n<t.attrs.length;){const l=t.attrs[n],d=(l.prefix?l.prefix+":":"")+l.name;cP.call(kQ,d)||(a[d]=l.value)}const s=(e.schema.space==="svg"?SQ:wQ)(t.tagName,a,uP(e,t.childNodes));if(cm(e,t,s),s.tagName==="template"){const l=t,d=l.sourceCodeLocation,h=d&&d.startTag&&$u(d.startTag),p=d&&d.endTag&&$u(d.endTag),f=Yw(e,l.content);h&&p&&e.file&&(f.position={start:h.end,end:p.start}),s.content=f}return e.schema=r,s}function cm(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=_Q(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function _Q(e,t,r){const n=$u(r);if(t.type==="element"){const a=t.children[t.children.length-1];if(n&&!r.endTag&&a&&a.position&&a.position.end&&(n.end=Object.assign({},a.position.end)),e.verbose){const i={};let s;if(r.attrs)for(s in r.attrs)cP.call(r.attrs,s)&&(i[Iw(e.schema,s).property]=$u(r.attrs[s]));r.startTag;const l=$u(r.startTag),d=r.endTag?$u(r.endTag):void 0,h={opening:l};d&&(h.closing=d),h.properties=i,t.data={position:h}}}return n}function $u(e){const t=m_({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=m_({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function m_(e){return e.line&&e.column?e:void 0}class ag{constructor(t,r,n){this.property=t,this.normal=r,n&&(this.space=n)}}ag.prototype.property={};ag.prototype.normal={};ag.prototype.space=null;function dP(e,t){const r={},n={};let a=-1;for(;++a<e.length;)Object.assign(r,e[a].property),Object.assign(n,e[a].normal);return new ag(r,n,t)}function g1(e){return e.toLowerCase()}class ns{constructor(t,r){this.property=t,this.attribute=r}}ns.prototype.space=null;ns.prototype.boolean=!1;ns.prototype.booleanish=!1;ns.prototype.overloadedBoolean=!1;ns.prototype.number=!1;ns.prototype.commaSeparated=!1;ns.prototype.spaceSeparated=!1;ns.prototype.commaOrSpaceSeparated=!1;ns.prototype.mustUseProperty=!1;ns.prototype.defined=!1;let AQ=0;const Xt=jc(),$n=jc(),hP=jc(),Je=jc(),nn=jc(),Vu=jc(),_i=jc();function jc(){return 2**++AQ}const f1=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xt,booleanish:$n,commaOrSpaceSeparated:_i,commaSeparated:Vu,number:Je,overloadedBoolean:hP,spaceSeparated:nn},Symbol.toStringTag,{value:"Module"})),Jx=Object.keys(f1);class Qw extends ns{constructor(t,r,n,a){let i=-1;if(super(t,r),y_(this,"space",a),typeof n=="number")for(;++i<Jx.length;){const s=Jx[i];y_(this,Jx[i],(n&f1[s])===f1[s])}}}Qw.prototype.defined=!0;function y_(e,t,r){r&&(e[t]=r)}const NQ={}.hasOwnProperty;function kd(e){const t={},r={};let n;for(n in e.properties)if(NQ.call(e.properties,n)){const a=e.properties[n],i=new Qw(n,e.transform(e.attributes||{},n),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),t[n]=i,r[g1(n)]=n,r[g1(i.attribute)]=n}return new ag(t,r,e.space)}const pP=kd({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),gP=kd({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function fP(e,t){return t in e?e[t]:t}function mP(e,t){return fP(e,t.toLowerCase())}const yP=kd({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:mP,properties:{xmlns:null,xmlnsXLink:null}}),bP=kd({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:$n,ariaAutoComplete:null,ariaBusy:$n,ariaChecked:$n,ariaColCount:Je,ariaColIndex:Je,ariaColSpan:Je,ariaControls:nn,ariaCurrent:null,ariaDescribedBy:nn,ariaDetails:null,ariaDisabled:$n,ariaDropEffect:nn,ariaErrorMessage:null,ariaExpanded:$n,ariaFlowTo:nn,ariaGrabbed:$n,ariaHasPopup:null,ariaHidden:$n,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nn,ariaLevel:Je,ariaLive:null,ariaModal:$n,ariaMultiLine:$n,ariaMultiSelectable:$n,ariaOrientation:null,ariaOwns:nn,ariaPlaceholder:null,ariaPosInSet:Je,ariaPressed:$n,ariaReadOnly:$n,ariaRelevant:null,ariaRequired:$n,ariaRoleDescription:nn,ariaRowCount:Je,ariaRowIndex:Je,ariaRowSpan:Je,ariaSelected:$n,ariaSetSize:Je,ariaSort:null,ariaValueMax:Je,ariaValueMin:Je,ariaValueNow:Je,ariaValueText:null,role:null}}),LQ=kd({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:mP,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Vu,acceptCharset:nn,accessKey:nn,action:null,allow:null,allowFullScreen:Xt,allowPaymentRequest:Xt,allowUserMedia:Xt,alt:null,as:null,async:Xt,autoCapitalize:null,autoComplete:nn,autoFocus:Xt,autoPlay:Xt,blocking:nn,capture:null,charSet:null,checked:Xt,cite:null,className:nn,cols:Je,colSpan:null,content:null,contentEditable:$n,controls:Xt,controlsList:nn,coords:Je|Vu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xt,defer:Xt,dir:null,dirName:null,disabled:Xt,download:hP,draggable:$n,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xt,formTarget:null,headers:nn,height:Je,hidden:Xt,high:Je,href:null,hrefLang:null,htmlFor:nn,httpEquiv:nn,id:null,imageSizes:null,imageSrcSet:null,inert:Xt,inputMode:null,integrity:null,is:null,isMap:Xt,itemId:null,itemProp:nn,itemRef:nn,itemScope:Xt,itemType:nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xt,low:Je,manifest:null,max:null,maxLength:Je,media:null,method:null,min:null,minLength:Je,multiple:Xt,muted:Xt,name:null,nonce:null,noModule:Xt,noValidate:Xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xt,optimum:Je,pattern:null,ping:nn,placeholder:null,playsInline:Xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xt,referrerPolicy:null,rel:nn,required:Xt,reversed:Xt,rows:Je,rowSpan:Je,sandbox:nn,scope:null,scoped:Xt,seamless:Xt,selected:Xt,shadowRootClonable:Xt,shadowRootDelegatesFocus:Xt,shadowRootMode:null,shape:null,size:Je,sizes:null,slot:null,span:Je,spellCheck:$n,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Je,step:null,style:null,tabIndex:Je,target:null,title:null,translate:null,type:null,typeMustMatch:Xt,useMap:null,value:$n,width:Je,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nn,axis:null,background:null,bgColor:null,border:Je,borderColor:null,bottomMargin:Je,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xt,declare:Xt,event:null,face:null,frame:null,frameBorder:null,hSpace:Je,leftMargin:Je,link:null,longDesc:null,lowSrc:null,marginHeight:Je,marginWidth:Je,noResize:Xt,noHref:Xt,noShade:Xt,noWrap:Xt,object:null,profile:null,prompt:null,rev:null,rightMargin:Je,rules:null,scheme:null,scrolling:$n,standby:null,summary:null,text:null,topMargin:Je,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Je,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xt,disableRemotePlayback:Xt,prefix:null,property:null,results:Je,security:null,unselectable:null}}),PQ=kd({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:fP,properties:{about:_i,accentHeight:Je,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Je,amplitude:Je,arabicForm:null,ascent:Je,attributeName:null,attributeType:null,azimuth:Je,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Je,by:null,calcMode:null,capHeight:Je,className:nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Je,diffuseConstant:Je,direction:null,display:null,dur:null,divisor:Je,dominantBaseline:null,download:Xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Je,enableBackground:null,end:null,event:null,exponent:Je,externalResourcesRequired:null,fill:null,fillOpacity:Je,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Vu,g2:Vu,glyphName:Vu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Je,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Je,horizOriginX:Je,horizOriginY:Je,id:null,ideographic:Je,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Je,k:Je,k1:Je,k2:Je,k3:Je,k4:Je,kernelMatrix:_i,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Je,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Je,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Je,overlineThickness:Je,paintOrder:null,panose1:null,path:null,pathLength:Je,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Je,pointsAtY:Je,pointsAtZ:Je,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_i,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_i,rev:_i,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_i,requiredFeatures:_i,requiredFonts:_i,requiredFormats:_i,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Je,specularExponent:Je,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Je,strikethroughThickness:Je,string:null,stroke:null,strokeDashArray:_i,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Je,strokeOpacity:Je,strokeWidth:null,style:null,surfaceScale:Je,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_i,tabIndex:Je,tableValues:null,target:null,targetX:Je,targetY:Je,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_i,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Je,underlineThickness:Je,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Je,values:null,vAlphabetic:Je,vMathematical:Je,vectorEffect:null,vHanging:Je,vIdeographic:Je,version:null,vertAdvY:Je,vertOriginX:Je,vertOriginY:Je,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Je,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),RQ=/^data[-\w.:]+$/i,b_=/-[a-z]/g,IQ=/[A-Z]/g;function DQ(e,t){const r=g1(t);let n=t,a=ns;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&RQ.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(b_,OQ);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!b_.test(i)){let s=i.replace(IQ,MQ);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}a=Qw}return new a(n,t)}function MQ(e){return"-"+e.toLowerCase()}function OQ(e){return e.charAt(1).toUpperCase()}const jQ=dP([gP,pP,yP,bP,LQ],"html"),xP=dP([gP,pP,yP,bP,PQ],"svg"),BQ={},FQ={}.hasOwnProperty,vP=$L("type",{handlers:{root:UQ,element:WQ,text:HQ,comment:GQ,doctype:qQ}});function zQ(e,t){const n=(t||BQ).space;return vP(e,n==="svg"?xP:jQ)}function UQ(e,t){const r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=Kw(e.children,r,t),Ed(e,r),r}function $Q(e,t){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=Kw(e.children,r,t),Ed(e,r),r}function qQ(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ed(e,t),t}function HQ(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ed(e,t),t}function GQ(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ed(e,t),t}function WQ(e,t){const r=t;let n=r;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(n=xP);const a=[];let i;if(e.properties){for(i in e.properties)if(i!=="children"&&FQ.call(e.properties,i)){const d=VQ(n,i,e.properties[i]);d&&a.push(d)}}const s=n.space,l={nodeName:e.tagName,tagName:e.tagName,attrs:a,namespaceURI:cc[s],childNodes:[],parentNode:null};return l.childNodes=Kw(e.children,l,n),Ed(e,l),e.tagName==="template"&&e.content&&(l.content=$Q(e.content,n)),l}function VQ(e,t,r){const n=DQ(e,t);if(r===!1||r===null||r===void 0||typeof r=="number"&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?eL(r):lL(r));const a={name:n.attribute,value:r===!0?"":String(r)};if(n.space&&n.space!=="html"&&n.space!=="svg"){const i=a.name.indexOf(":");i<0?a.prefix="":(a.name=a.name.slice(i+1),a.prefix=n.attribute.slice(0,i)),a.namespace=cc[n.space]}return a}function Kw(e,t,r){let n=-1;const a=[];if(e)for(;++n<e.length;){const i=vP(e[n],r);i.parentNode=t,a.push(i)}return a}function Ed(e,t){const r=e.position;r&&r.start&&r.end&&(r.start.offset,r.end.offset,t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const YQ=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],QQ=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gn="";var Z;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Z||(Z={}));const ni={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function wP(e){return e>=55296&&e<=57343}function KQ(e){return e>=56320&&e<=57343}function XQ(e,t){return(e-55296)*1024+9216+t}function SP(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function TP(e){return e>=64976&&e<=65007||QQ.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne||(Ne={}));const JQ=65536;class ZQ{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=JQ,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,r){const{line:n,col:a,offset:i}=this,s=a+r,l=i+r;return{code:t,startLine:n,endLine:n,startCol:s,endCol:s,startOffset:l,endOffset:l}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const r=this.html.charCodeAt(this.pos+1);if(KQ(r))return this.pos++,this._addGap(),XQ(t,r)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Z.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,r){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=r}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,r){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(r)return this.html.startsWith(t,this.pos);for(let n=0;n<t.length;n++)if((this.html.charCodeAt(this.pos+n)|32)!==t.charCodeAt(n))return!1;return!0}peek(t){const r=this.pos+t;if(r>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Z.EOF;const n=this.html.charCodeAt(r);return n===Z.CARRIAGE_RETURN?Z.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Z.EOF;let t=this.html.charCodeAt(this.pos);return t===Z.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Z.LINE_FEED):t===Z.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,wP(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Z.LINE_FEED||t===Z.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){SP(t)?this._err(Ne.controlCharacterInInputStream):TP(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var sr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(sr||(sr={}));function kP(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}const eK=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),tK=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function rK(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=tK.get(e))!==null&&t!==void 0?t:e}var aa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(aa||(aa={}));const nK=32;var vl;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(vl||(vl={}));function m1(e){return e>=aa.ZERO&&e<=aa.NINE}function aK(e){return e>=aa.UPPER_A&&e<=aa.UPPER_F||e>=aa.LOWER_A&&e<=aa.LOWER_F}function iK(e){return e>=aa.UPPER_A&&e<=aa.UPPER_Z||e>=aa.LOWER_A&&e<=aa.LOWER_Z||m1(e)}function sK(e){return e===aa.EQUALS||iK(e)}var na;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(na||(na={}));var Co;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Co||(Co={}));class oK{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=na.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Co.Strict}startEntity(t){this.decodeMode=t,this.state=na.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case na.EntityStart:return t.charCodeAt(r)===aa.NUM?(this.state=na.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=na.NamedEntity,this.stateNamedEntity(t,r));case na.NumericStart:return this.stateNumericStart(t,r);case na.NumericDecimal:return this.stateNumericDecimal(t,r);case na.NumericHex:return this.stateNumericHex(t,r);case na.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|nK)===aa.LOWER_X?(this.state=na.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=na.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,a){if(r!==n){const i=n-r;this.result=this.result*Math.pow(a,i)+Number.parseInt(t.substr(r,i),a),this.consumed+=i}}stateNumericHex(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(m1(a)||aK(a))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){const n=r;for(;r<t.length;){const a=t.charCodeAt(r);if(m1(a))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===aa.SEMI)this.consumed+=1;else if(this.decodeMode===Co.Strict)return 0;return this.emitCodePoint(rK(this.result),this.consumed),this.errors&&(t!==aa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:n}=this;let a=n[this.treeIndex],i=(a&vl.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const s=t.charCodeAt(r);if(this.treeIndex=lK(n,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Co.Attribute&&(i===0||sK(s))?0:this.emitNotTerminatedNamedEntity();if(a=n[this.treeIndex],i=(a&vl.VALUE_LENGTH)>>14,i!==0){if(s===aa.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Co.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:n}=this,a=(n[r]&vl.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){const{decodeTree:a}=this;return this.emitCodePoint(r===1?a[t]&~vl.VALUE_LENGTH:a[t+1],n),r===3&&this.emitCodePoint(a[t+2],n),n}end(){var t;switch(this.state){case na.NamedEntity:return this.result!==0&&(this.decodeMode!==Co.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case na.NumericDecimal:return this.emitNumericEntity(0,2);case na.NumericHex:return this.emitNumericEntity(0,3);case na.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case na.EntityStart:return 0}}}function lK(e,t,r,n){const a=(t&vl.BRANCH_LENGTH)>>7,i=t&vl.JUMP_TABLE;if(a===0)return i!==0&&n===i?r:-1;if(i){const d=n-i;return d<0||d>=a?-1:e[r+d]-1}let s=r,l=s+a-1;for(;s<=l;){const d=s+l>>>1,h=e[d];if(h<n)s=d+1;else if(h>n)l=d-1;else return e[d+a]}return-1}var Ge;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ge||(Ge={}));var mc;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(mc||(mc={}));var Ji;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ji||(Ji={}));var be;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(be||(be={}));var E;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(E||(E={}));const cK=new Map([[be.A,E.A],[be.ADDRESS,E.ADDRESS],[be.ANNOTATION_XML,E.ANNOTATION_XML],[be.APPLET,E.APPLET],[be.AREA,E.AREA],[be.ARTICLE,E.ARTICLE],[be.ASIDE,E.ASIDE],[be.B,E.B],[be.BASE,E.BASE],[be.BASEFONT,E.BASEFONT],[be.BGSOUND,E.BGSOUND],[be.BIG,E.BIG],[be.BLOCKQUOTE,E.BLOCKQUOTE],[be.BODY,E.BODY],[be.BR,E.BR],[be.BUTTON,E.BUTTON],[be.CAPTION,E.CAPTION],[be.CENTER,E.CENTER],[be.CODE,E.CODE],[be.COL,E.COL],[be.COLGROUP,E.COLGROUP],[be.DD,E.DD],[be.DESC,E.DESC],[be.DETAILS,E.DETAILS],[be.DIALOG,E.DIALOG],[be.DIR,E.DIR],[be.DIV,E.DIV],[be.DL,E.DL],[be.DT,E.DT],[be.EM,E.EM],[be.EMBED,E.EMBED],[be.FIELDSET,E.FIELDSET],[be.FIGCAPTION,E.FIGCAPTION],[be.FIGURE,E.FIGURE],[be.FONT,E.FONT],[be.FOOTER,E.FOOTER],[be.FOREIGN_OBJECT,E.FOREIGN_OBJECT],[be.FORM,E.FORM],[be.FRAME,E.FRAME],[be.FRAMESET,E.FRAMESET],[be.H1,E.H1],[be.H2,E.H2],[be.H3,E.H3],[be.H4,E.H4],[be.H5,E.H5],[be.H6,E.H6],[be.HEAD,E.HEAD],[be.HEADER,E.HEADER],[be.HGROUP,E.HGROUP],[be.HR,E.HR],[be.HTML,E.HTML],[be.I,E.I],[be.IMG,E.IMG],[be.IMAGE,E.IMAGE],[be.INPUT,E.INPUT],[be.IFRAME,E.IFRAME],[be.KEYGEN,E.KEYGEN],[be.LABEL,E.LABEL],[be.LI,E.LI],[be.LINK,E.LINK],[be.LISTING,E.LISTING],[be.MAIN,E.MAIN],[be.MALIGNMARK,E.MALIGNMARK],[be.MARQUEE,E.MARQUEE],[be.MATH,E.MATH],[be.MENU,E.MENU],[be.META,E.META],[be.MGLYPH,E.MGLYPH],[be.MI,E.MI],[be.MO,E.MO],[be.MN,E.MN],[be.MS,E.MS],[be.MTEXT,E.MTEXT],[be.NAV,E.NAV],[be.NOBR,E.NOBR],[be.NOFRAMES,E.NOFRAMES],[be.NOEMBED,E.NOEMBED],[be.NOSCRIPT,E.NOSCRIPT],[be.OBJECT,E.OBJECT],[be.OL,E.OL],[be.OPTGROUP,E.OPTGROUP],[be.OPTION,E.OPTION],[be.P,E.P],[be.PARAM,E.PARAM],[be.PLAINTEXT,E.PLAINTEXT],[be.PRE,E.PRE],[be.RB,E.RB],[be.RP,E.RP],[be.RT,E.RT],[be.RTC,E.RTC],[be.RUBY,E.RUBY],[be.S,E.S],[be.SCRIPT,E.SCRIPT],[be.SEARCH,E.SEARCH],[be.SECTION,E.SECTION],[be.SELECT,E.SELECT],[be.SOURCE,E.SOURCE],[be.SMALL,E.SMALL],[be.SPAN,E.SPAN],[be.STRIKE,E.STRIKE],[be.STRONG,E.STRONG],[be.STYLE,E.STYLE],[be.SUB,E.SUB],[be.SUMMARY,E.SUMMARY],[be.SUP,E.SUP],[be.TABLE,E.TABLE],[be.TBODY,E.TBODY],[be.TEMPLATE,E.TEMPLATE],[be.TEXTAREA,E.TEXTAREA],[be.TFOOT,E.TFOOT],[be.TD,E.TD],[be.TH,E.TH],[be.THEAD,E.THEAD],[be.TITLE,E.TITLE],[be.TR,E.TR],[be.TRACK,E.TRACK],[be.TT,E.TT],[be.U,E.U],[be.UL,E.UL],[be.SVG,E.SVG],[be.VAR,E.VAR],[be.WBR,E.WBR],[be.XMP,E.XMP]]);function Cd(e){var t;return(t=cK.get(e))!==null&&t!==void 0?t:E.UNKNOWN}const Ye=E,uK={[Ge.HTML]:new Set([Ye.ADDRESS,Ye.APPLET,Ye.AREA,Ye.ARTICLE,Ye.ASIDE,Ye.BASE,Ye.BASEFONT,Ye.BGSOUND,Ye.BLOCKQUOTE,Ye.BODY,Ye.BR,Ye.BUTTON,Ye.CAPTION,Ye.CENTER,Ye.COL,Ye.COLGROUP,Ye.DD,Ye.DETAILS,Ye.DIR,Ye.DIV,Ye.DL,Ye.DT,Ye.EMBED,Ye.FIELDSET,Ye.FIGCAPTION,Ye.FIGURE,Ye.FOOTER,Ye.FORM,Ye.FRAME,Ye.FRAMESET,Ye.H1,Ye.H2,Ye.H3,Ye.H4,Ye.H5,Ye.H6,Ye.HEAD,Ye.HEADER,Ye.HGROUP,Ye.HR,Ye.HTML,Ye.IFRAME,Ye.IMG,Ye.INPUT,Ye.LI,Ye.LINK,Ye.LISTING,Ye.MAIN,Ye.MARQUEE,Ye.MENU,Ye.META,Ye.NAV,Ye.NOEMBED,Ye.NOFRAMES,Ye.NOSCRIPT,Ye.OBJECT,Ye.OL,Ye.P,Ye.PARAM,Ye.PLAINTEXT,Ye.PRE,Ye.SCRIPT,Ye.SECTION,Ye.SELECT,Ye.SOURCE,Ye.STYLE,Ye.SUMMARY,Ye.TABLE,Ye.TBODY,Ye.TD,Ye.TEMPLATE,Ye.TEXTAREA,Ye.TFOOT,Ye.TH,Ye.THEAD,Ye.TITLE,Ye.TR,Ye.TRACK,Ye.UL,Ye.WBR,Ye.XMP]),[Ge.MATHML]:new Set([Ye.MI,Ye.MO,Ye.MN,Ye.MS,Ye.MTEXT,Ye.ANNOTATION_XML]),[Ge.SVG]:new Set([Ye.TITLE,Ye.FOREIGN_OBJECT,Ye.DESC]),[Ge.XLINK]:new Set,[Ge.XML]:new Set,[Ge.XMLNS]:new Set},y1=new Set([Ye.H1,Ye.H2,Ye.H3,Ye.H4,Ye.H5,Ye.H6]);be.STYLE,be.SCRIPT,be.XMP,be.IFRAME,be.NOEMBED,be.NOFRAMES,be.PLAINTEXT;var re;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(re||(re={}));const In={DATA:re.DATA,RCDATA:re.RCDATA,RAWTEXT:re.RAWTEXT,SCRIPT_DATA:re.SCRIPT_DATA,PLAINTEXT:re.PLAINTEXT,CDATA_SECTION:re.CDATA_SECTION};function dK(e){return e>=Z.DIGIT_0&&e<=Z.DIGIT_9}function Xh(e){return e>=Z.LATIN_CAPITAL_A&&e<=Z.LATIN_CAPITAL_Z}function hK(e){return e>=Z.LATIN_SMALL_A&&e<=Z.LATIN_SMALL_Z}function pl(e){return hK(e)||Xh(e)}function x_(e){return pl(e)||dK(e)}function Of(e){return e+32}function EP(e){return e===Z.SPACE||e===Z.LINE_FEED||e===Z.TABULATION||e===Z.FORM_FEED}function v_(e){return EP(e)||e===Z.SOLIDUS||e===Z.GREATER_THAN_SIGN}function pK(e){return e===Z.NULL?Ne.nullCharacterReference:e>1114111?Ne.characterReferenceOutsideUnicodeRange:wP(e)?Ne.surrogateCharacterReference:TP(e)?Ne.noncharacterCharacterReference:SP(e)||e===Z.CARRIAGE_RETURN?Ne.controlCharacterReference:null}class gK{constructor(t,r){this.options=t,this.handler=r,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=re.DATA,this.returnState=re.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new ZQ(r),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new oK(eK,(n,a)=>{this.preprocessor.pos=this.entityStartPos+a-1,this._flushCodePointConsumedAsCharacterReference(n)},r.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ne.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:n=>{this._err(Ne.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+n)},validateNumericCharacterReference:n=>{const a=pK(n);a&&this._err(a,1)}}:void 0)}_err(t,r=0){var n,a;(a=(n=this.handler).onParseError)===null||a===void 0||a.call(n,this.preprocessor.getError(t,r))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,r,n){this.active=!0,this.preprocessor.write(t,r),this._runParsingLoop(),this.paused||n?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let r=0;r<t;r++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,r){return this.preprocessor.startsWith(t,r)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:sr.START_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:sr.END_TAG,tagName:"",tagID:E.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:sr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:sr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,r){this.currentCharacterToken={type:t,chars:r,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,r;const n=this.currentToken;if(kP(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const a=(t=(r=n.location).attrs)!==null&&t!==void 0?t:r.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Cd(t.tagName),t.type===sr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case sr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case sr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case sr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:sr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,r){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=r;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,r)}_emitCodePoint(t){const r=EP(t)?sr.WHITESPACE_CHARACTER:t===Z.NULL?sr.NULL_CHARACTER:sr.CHARACTER;this._appendCharToCurrentCharacterToken(r,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(sr.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=re.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Co.Attribute:Co.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===re.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===re.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===re.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case re.DATA:{this._stateData(t);break}case re.RCDATA:{this._stateRcdata(t);break}case re.RAWTEXT:{this._stateRawtext(t);break}case re.SCRIPT_DATA:{this._stateScriptData(t);break}case re.PLAINTEXT:{this._statePlaintext(t);break}case re.TAG_OPEN:{this._stateTagOpen(t);break}case re.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case re.TAG_NAME:{this._stateTagName(t);break}case re.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case re.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case re.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case re.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case re.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case re.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case re.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case re.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case re.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case re.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case re.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case re.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case re.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case re.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case re.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case re.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case re.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case re.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case re.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case re.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case re.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case re.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case re.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case re.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case re.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case re.BOGUS_COMMENT:{this._stateBogusComment(t);break}case re.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case re.COMMENT_START:{this._stateCommentStart(t);break}case re.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case re.COMMENT:{this._stateComment(t);break}case re.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case re.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case re.COMMENT_END:{this._stateCommentEnd(t);break}case re.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case re.DOCTYPE:{this._stateDoctype(t);break}case re.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case re.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case re.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case re.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case re.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case re.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case re.CDATA_SECTION:{this._stateCdataSection(t);break}case re.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case re.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case re.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case re.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Z.LESS_THAN_SIGN:{this.state=re.TAG_OPEN;break}case Z.AMPERSAND:{this._startCharacterReference();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case Z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Z.AMPERSAND:{this._startCharacterReference();break}case Z.LESS_THAN_SIGN:{this.state=re.RCDATA_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Z.LESS_THAN_SIGN:{this.state=re.RAWTEXT_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(pl(t))this._createStartTagToken(),this.state=re.TAG_NAME,this._stateTagName(t);else switch(t){case Z.EXCLAMATION_MARK:{this.state=re.MARKUP_DECLARATION_OPEN;break}case Z.SOLIDUS:{this.state=re.END_TAG_OPEN;break}case Z.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t);break}case Z.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=re.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(pl(t))this._createEndTagToken(),this.state=re.TAG_NAME,this._stateTagName(t);else switch(t){case Z.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Z.SOLIDUS:{this.state=re.SELF_CLOSING_START_TAG;break}case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentTagToken();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.tagName+=gn;break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:r.tagName+=String.fromCodePoint(Xh(t)?Of(t):t)}}_stateRcdataLessThanSign(t){t===Z.SOLIDUS?this.state=re.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=re.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){pl(t)?(this.state=re.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=re.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const r=this.currentToken;switch(r.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=re.BEFORE_ATTRIBUTE_NAME,!1;case Z.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=re.SELF_CLOSING_START_TAG,!1;case Z.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=re.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Z.SOLIDUS?this.state=re.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){pl(t)?(this.state=re.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Z.SOLIDUS:{this.state=re.SCRIPT_DATA_END_TAG_OPEN;break}case Z.EXCLAMATION_MARK:{this.state=re.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=re.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){pl(t)?(this.state=re.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Z.HYPHEN_MINUS?(this.state=re.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Z.HYPHEN_MINUS?(this.state=re.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=re.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Z.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Z.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_ESCAPED,this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Z.HYPHEN_MINUS:{this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Z.GREATER_THAN_SIGN:{this.state=re.SCRIPT_DATA,this._emitChars(">");break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_ESCAPED,this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Z.SOLIDUS?this.state=re.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:pl(t)?(this._emitChars("<"),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){pl(t)?(this.state=re.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ni.SCRIPT,!1)&&v_(this.preprocessor.peek(ni.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<ni.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=re.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Z.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Z.HYPHEN_MINUS:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Z.HYPHEN_MINUS:{this._emitChars("-");break}case Z.LESS_THAN_SIGN:{this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Z.GREATER_THAN_SIGN:{this.state=re.SCRIPT_DATA,this._emitChars(">");break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gn);break}case Z.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Z.SOLIDUS?(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ni.SCRIPT,!1)&&v_(this.preprocessor.peek(ni.SCRIPT.length))){this._emitCodePoint(t);for(let r=0;r<ni.SCRIPT.length;r++)this._emitCodePoint(this._consume());this.state=re.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=re.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.SOLIDUS:case Z.GREATER_THAN_SIGN:case Z.EOF:{this.state=re.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Z.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=re.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=re.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:case Z.SOLIDUS:case Z.GREATER_THAN_SIGN:case Z.EOF:{this._leaveAttrName(),this.state=re.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Z.EQUALS_SIGN:{this._leaveAttrName(),this.state=re.BEFORE_ATTRIBUTE_VALUE;break}case Z.QUOTATION_MARK:case Z.APOSTROPHE:case Z.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=gn;break}default:this.currentAttr.name+=String.fromCodePoint(Xh(t)?Of(t):t)}}_stateAfterAttributeName(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.SOLIDUS:{this.state=re.SELF_CLOSING_START_TAG;break}case Z.EQUALS_SIGN:{this.state=re.BEFORE_ATTRIBUTE_VALUE;break}case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentTagToken();break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=re.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.QUOTATION_MARK:{this.state=re.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{this.state=re.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=re.DATA,this.emitCurrentTagToken();break}default:this.state=re.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Z.QUOTATION_MARK:{this.state=re.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Z.AMPERSAND:{this._startCharacterReference();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gn;break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Z.APOSTROPHE:{this.state=re.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Z.AMPERSAND:{this._startCharacterReference();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gn;break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this._leaveAttrValue(),this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Z.AMPERSAND:{this._startCharacterReference();break}case Z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=re.DATA,this.emitCurrentTagToken();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gn;break}case Z.QUOTATION_MARK:case Z.APOSTROPHE:case Z.LESS_THAN_SIGN:case Z.EQUALS_SIGN:case Z.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this._leaveAttrValue(),this.state=re.BEFORE_ATTRIBUTE_NAME;break}case Z.SOLIDUS:{this._leaveAttrValue(),this.state=re.SELF_CLOSING_START_TAG;break}case Z.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=re.DATA,this.emitCurrentTagToken();break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=re.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Z.GREATER_THAN_SIGN:{const r=this.currentToken;r.selfClosing=!0,this.state=re.DATA,this.emitCurrentTagToken();break}case Z.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=re.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const r=this.currentToken;switch(t){case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentComment(r);break}case Z.EOF:{this.emitCurrentComment(r),this._emitEOFToken();break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.data+=gn;break}default:r.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ni.DASH_DASH,!0)?(this._createCommentToken(ni.DASH_DASH.length+1),this.state=re.COMMENT_START):this._consumeSequenceIfMatch(ni.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ni.DOCTYPE.length+1),this.state=re.DOCTYPE):this._consumeSequenceIfMatch(ni.CDATA_START,!0)?this.inForeignNode?this.state=re.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(ni.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=re.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=re.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Z.HYPHEN_MINUS:{this.state=re.COMMENT_START_DASH;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=re.DATA;const r=this.currentToken;this.emitCurrentComment(r);break}default:this.state=re.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const r=this.currentToken;switch(t){case Z.HYPHEN_MINUS:{this.state=re.COMMENT_END;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=re.DATA,this.emitCurrentComment(r);break}case Z.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=re.COMMENT,this._stateComment(t)}}_stateComment(t){const r=this.currentToken;switch(t){case Z.HYPHEN_MINUS:{this.state=re.COMMENT_END_DASH;break}case Z.LESS_THAN_SIGN:{r.data+="<",this.state=re.COMMENT_LESS_THAN_SIGN;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.data+=gn;break}case Z.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const r=this.currentToken;switch(t){case Z.EXCLAMATION_MARK:{r.data+="!",this.state=re.COMMENT_LESS_THAN_SIGN_BANG;break}case Z.LESS_THAN_SIGN:{r.data+="<";break}default:this.state=re.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Z.HYPHEN_MINUS?this.state=re.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=re.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Z.HYPHEN_MINUS?this.state=re.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=re.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Z.GREATER_THAN_SIGN&&t!==Z.EOF&&this._err(Ne.nestedComment),this.state=re.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const r=this.currentToken;switch(t){case Z.HYPHEN_MINUS:{this.state=re.COMMENT_END;break}case Z.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="-",this.state=re.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const r=this.currentToken;switch(t){case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentComment(r);break}case Z.EXCLAMATION_MARK:{this.state=re.COMMENT_END_BANG;break}case Z.HYPHEN_MINUS:{r.data+="-";break}case Z.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--",this.state=re.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const r=this.currentToken;switch(t){case Z.HYPHEN_MINUS:{r.data+="--!",this.state=re.COMMENT_END_DASH;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=re.DATA,this.emitCurrentComment(r);break}case Z.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(r),this._emitEOFToken();break}default:r.data+="--!",this.state=re.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_NAME;break}case Z.GREATER_THAN_SIGN:{this.state=re.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Z.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=re.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(Xh(t))this._createDoctypeToken(String.fromCharCode(Of(t))),this.state=re.DOCTYPE_NAME;else switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(gn),this.state=re.DOCTYPE_NAME;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const r=this.currentToken;r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=re.DOCTYPE_NAME}}_stateDoctypeName(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.AFTER_DOCTYPE_NAME;break}case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.name+=gn;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.name+=String.fromCodePoint(Xh(t)?Of(t):t)}}_stateAfterDoctypeName(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ni.PUBLIC,!1)?this.state=re.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ni.SYSTEM,!1)?this.state=re.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Z.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.QUOTATION_MARK:{r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{r.publicId="",this.state=re.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Z.QUOTATION_MARK:{this.state=re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.publicId+=gn;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Z.APOSTROPHE:{this.state=re.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.publicId+=gn;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Z.GREATER_THAN_SIGN:{this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.QUOTATION_MARK:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:{this.state=re.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Z.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.QUOTATION_MARK:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Z.APOSTROPHE:{r.systemId="",this.state=re.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.DATA,this.emitCurrentDoctype(r);break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),r.forceQuirks=!0,this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const r=this.currentToken;switch(t){case Z.QUOTATION_MARK:{this.state=re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.systemId+=gn;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const r=this.currentToken;switch(t){case Z.APOSTROPHE:{this.state=re.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter),r.systemId+=gn;break}case Z.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),r.forceQuirks=!0,this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:r.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const r=this.currentToken;switch(t){case Z.SPACE:case Z.LINE_FEED:case Z.TABULATION:case Z.FORM_FEED:break;case Z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.EOF:{this._err(Ne.eofInDoctype),r.forceQuirks=!0,this.emitCurrentDoctype(r),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=re.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const r=this.currentToken;switch(t){case Z.GREATER_THAN_SIGN:{this.emitCurrentDoctype(r),this.state=re.DATA;break}case Z.NULL:{this._err(Ne.unexpectedNullCharacter);break}case Z.EOF:{this.emitCurrentDoctype(r),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Z.RIGHT_SQUARE_BRACKET:{this.state=re.CDATA_SECTION_BRACKET;break}case Z.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Z.RIGHT_SQUARE_BRACKET?this.state=re.CDATA_SECTION_END:(this._emitChars("]"),this.state=re.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Z.GREATER_THAN_SIGN:{this.state=re.DATA;break}case Z.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=re.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(Z.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&x_(this.preprocessor.peek(1))?re.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){x_(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Z.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const CP=new Set([E.DD,E.DT,E.LI,E.OPTGROUP,E.OPTION,E.P,E.RB,E.RP,E.RT,E.RTC]),w_=new Set([...CP,E.CAPTION,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]),Fm=new Set([E.APPLET,E.CAPTION,E.HTML,E.MARQUEE,E.OBJECT,E.TABLE,E.TD,E.TEMPLATE,E.TH]),fK=new Set([...Fm,E.OL,E.UL]),mK=new Set([...Fm,E.BUTTON]),S_=new Set([E.ANNOTATION_XML,E.MI,E.MN,E.MO,E.MS,E.MTEXT]),T_=new Set([E.DESC,E.FOREIGN_OBJECT,E.TITLE]),yK=new Set([E.TR,E.TEMPLATE,E.HTML]),bK=new Set([E.TBODY,E.TFOOT,E.THEAD,E.TEMPLATE,E.HTML]),xK=new Set([E.TABLE,E.TEMPLATE,E.HTML]),vK=new Set([E.TD,E.TH]);class wK{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,r,n){this.treeAdapter=r,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=E.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===E.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ge.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,r){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=r,this.currentTagId=r,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,r,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,r){const n=this._indexOf(t);this.items[n]=r,n===this.stackTop&&(this.current=r)}insertAfter(t,r,n){const a=this._indexOf(t)+1;this.items.splice(a,0,r),this.tagIDs.splice(a,0,n),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}popUntilTagNamePopped(t){let r=this.stackTop+1;do r=this.tagIDs.lastIndexOf(t,r-1);while(r>0&&this.treeAdapter.getNamespaceURI(this.items[r])!==Ge.HTML);this.shortenToLength(Math.max(r,0))}shortenToLength(t){for(;this.stackTop>=t;){const r=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(r,this.stackTop<t)}}popUntilElementPopped(t){const r=this._indexOf(t);this.shortenToLength(Math.max(r,0))}popUntilPopped(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(y1,Ge.HTML)}popUntilTableCellPopped(){this.popUntilPopped(vK,Ge.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,r){for(let n=this.stackTop;n>=0;n--)if(t.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===r)return n;return-1}clearBackTo(t,r){const n=this._indexOfTagNames(t,r);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(xK,Ge.HTML)}clearBackToTableBodyContext(){this.clearBackTo(bK,Ge.HTML)}clearBackToTableRowContext(){this.clearBackTo(yK,Ge.HTML)}remove(t){const r=this._indexOf(t);r>=0&&(r===this.stackTop?this.pop():(this.items.splice(r,1),this.tagIDs.splice(r,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===E.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const r=this._indexOf(t)-1;return r>=0?this.items[r]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===E.HTML}hasInDynamicScope(t,r){for(let n=this.stackTop;n>=0;n--){const a=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case Ge.HTML:{if(a===t)return!0;if(r.has(a))return!1;break}case Ge.SVG:{if(T_.has(a))return!1;break}case Ge.MATHML:{if(S_.has(a))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,Fm)}hasInListItemScope(t){return this.hasInDynamicScope(t,fK)}hasInButtonScope(t){return this.hasInDynamicScope(t,mK)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const r=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case Ge.HTML:{if(y1.has(r))return!0;if(Fm.has(r))return!1;break}case Ge.SVG:{if(T_.has(r))return!1;break}case Ge.MATHML:{if(S_.has(r))return!1;break}}}return!0}hasInTableScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ge.HTML)switch(this.tagIDs[r]){case t:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===Ge.HTML)switch(this.tagIDs[t]){case E.TBODY:case E.THEAD:case E.TFOOT:return!0;case E.TABLE:case E.HTML:return!1}return!0}hasInSelectScope(t){for(let r=this.stackTop;r>=0;r--)if(this.treeAdapter.getNamespaceURI(this.items[r])===Ge.HTML)switch(this.tagIDs[r]){case t:return!0;case E.OPTION:case E.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&CP.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&w_.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&w_.has(this.currentTagId);)this.pop()}}const Zx=3;var Hs;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Hs||(Hs={}));const k_={type:Hs.Marker};class SK{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,r){const n=[],a=r.length,i=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let l=0;l<this.entries.length;l++){const d=this.entries[l];if(d.type===Hs.Marker)break;const{element:h}=d;if(this.treeAdapter.getTagName(h)===i&&this.treeAdapter.getNamespaceURI(h)===s){const p=this.treeAdapter.getAttrList(h);p.length===a&&n.push({idx:l,attrs:p})}}return n}_ensureNoahArkCondition(t){if(this.entries.length<Zx)return;const r=this.treeAdapter.getAttrList(t),n=this._getNoahArkConditionCandidates(t,r);if(n.length<Zx)return;const a=new Map(r.map(s=>[s.name,s.value]));let i=0;for(let s=0;s<n.length;s++){const l=n[s];l.attrs.every(d=>a.get(d.name)===d.value)&&(i+=1,i>=Zx&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(k_)}pushElement(t,r){this._ensureNoahArkCondition(t),this.entries.unshift({type:Hs.Element,element:t,token:r})}insertElementAfterBookmark(t,r){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:Hs.Element,element:t,token:r})}removeEntry(t){const r=this.entries.indexOf(t);r!==-1&&this.entries.splice(r,1)}clearToLastMarker(){const t=this.entries.indexOf(k_);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const r=this.entries.find(n=>n.type===Hs.Marker||this.treeAdapter.getTagName(n.element)===t);return r&&r.type===Hs.Element?r:null}getElementEntry(t){return this.entries.find(r=>r.type===Hs.Element&&r.element===t)}}const gl={createDocument(){return{nodeName:"#document",mode:Ji.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,r){return{nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,r,n){const a=e.childNodes.find(i=>i.nodeName==="#documentType");if(a)a.name=t,a.publicId=r,a.systemId=n;else{const i={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};gl.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(gl.isTextNode(r)){r.value+=t;return}}gl.appendChild(e,gl.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&gl.isTextNode(n)?n.value+=t:gl.insertBefore(e,gl.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(n=>n.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},_P="html",TK="about:legacy-compat",kK="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",AP=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],EK=[...AP,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],CK=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),NP=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],_K=[...NP,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function E_(e,t){return t.some(r=>e.startsWith(r))}function AK(e){return e.name===_P&&e.publicId===null&&(e.systemId===null||e.systemId===TK)}function NK(e){if(e.name!==_P)return Ji.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===kK)return Ji.QUIRKS;let{publicId:r}=e;if(r!==null){if(r=r.toLowerCase(),CK.has(r))return Ji.QUIRKS;let n=t===null?EK:AP;if(E_(r,n))return Ji.QUIRKS;if(n=t===null?NP:_K,E_(r,n))return Ji.LIMITED_QUIRKS}return Ji.NO_QUIRKS}const C_={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},LK="definitionurl",PK="definitionURL",RK=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),IK=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ge.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ge.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ge.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ge.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ge.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ge.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ge.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ge.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ge.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ge.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ge.XMLNS}]]),DK=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),MK=new Set([E.B,E.BIG,E.BLOCKQUOTE,E.BODY,E.BR,E.CENTER,E.CODE,E.DD,E.DIV,E.DL,E.DT,E.EM,E.EMBED,E.H1,E.H2,E.H3,E.H4,E.H5,E.H6,E.HEAD,E.HR,E.I,E.IMG,E.LI,E.LISTING,E.MENU,E.META,E.NOBR,E.OL,E.P,E.PRE,E.RUBY,E.S,E.SMALL,E.SPAN,E.STRONG,E.STRIKE,E.SUB,E.SUP,E.TABLE,E.TT,E.U,E.UL,E.VAR]);function OK(e){const t=e.tagID;return t===E.FONT&&e.attrs.some(({name:n})=>n===mc.COLOR||n===mc.SIZE||n===mc.FACE)||MK.has(t)}function LP(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===LK){e.attrs[t].name=PK;break}}function PP(e){for(let t=0;t<e.attrs.length;t++){const r=RK.get(e.attrs[t].name);r!=null&&(e.attrs[t].name=r)}}function Xw(e){for(let t=0;t<e.attrs.length;t++){const r=IK.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function jK(e){const t=DK.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Cd(e.tagName))}function BK(e,t){return t===Ge.MATHML&&(e===E.MI||e===E.MO||e===E.MN||e===E.MS||e===E.MTEXT)}function FK(e,t,r){if(t===Ge.MATHML&&e===E.ANNOTATION_XML){for(let n=0;n<r.length;n++)if(r[n].name===mc.ENCODING){const a=r[n].value.toLowerCase();return a===C_.TEXT_HTML||a===C_.APPLICATION_XML}}return t===Ge.SVG&&(e===E.FOREIGN_OBJECT||e===E.DESC||e===E.TITLE)}function zK(e,t,r,n){return(!n||n===Ge.HTML)&&FK(e,t,r)||(!n||n===Ge.MATHML)&&BK(e,t)}const UK="hidden",$K=8,qK=3;var se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(se||(se={}));const HK={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},RP=new Set([E.TABLE,E.TBODY,E.TFOOT,E.THEAD,E.TR]),__={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:gl,onParseError:null};class A_{constructor(t,r,n=null,a=null){this.fragmentContext=n,this.scriptHandler=a,this.currentToken=null,this.stopped=!1,this.insertionMode=se.INITIAL,this.originalInsertionMode=se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...__,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=r??this.treeAdapter.createDocument(),this.tokenizer=new gK(this.options,this),this.activeFormattingElements=new SK(this.treeAdapter),this.fragmentContextID=n?Cd(this.treeAdapter.getTagName(n)):E.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new wK(this.document,this.treeAdapter,this)}static parse(t,r){const n=new this(r);return n.tokenizer.write(t,!0),n.document}static getFragmentParser(t,r){const n={...__,...r};t??(t=n.treeAdapter.createElement(be.TEMPLATE,Ge.HTML,[]));const a=n.treeAdapter.createElement("documentmock",Ge.HTML,[]),i=new this(n,a,t);return i.fragmentContextID===E.TEMPLATE&&i.tmplInsertionModeStack.unshift(se.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),r=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,r),r}_err(t,r,n){var a;if(!this.onParseError)return;const i=(a=t.location)!==null&&a!==void 0?a:HK,s={code:r,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(s)}onItemPush(t,r,n){var a,i;(i=(a=this.treeAdapter).onItemPush)===null||i===void 0||i.call(a,t),n&&this.openElements.stackTop>0&&this._setContextModes(t,r)}onItemPop(t,r){var n,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(a=(n=this.treeAdapter).onItemPop)===null||a===void 0||a.call(n,t,this.openElements.current),r){let i,s;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,s=this.fragmentContextID):{current:i,currentTagId:s}=this.openElements,this._setContextModes(i,s)}}_setContextModes(t,r){const n=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===Ge.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&t!==void 0&&r!==void 0&&!this._isIntegrationPoint(r,t)}_switchToTextParsing(t,r){this._insertElement(t,Ge.HTML),this.tokenizer.state=r,this.originalInsertionMode=this.insertionMode,this.insertionMode=se.TEXT}switchToPlaintextParsing(){this.insertionMode=se.TEXT,this.originalInsertionMode=se.IN_BODY,this.tokenizer.state=In.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===be.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ge.HTML))switch(this.fragmentContextID){case E.TITLE:case E.TEXTAREA:{this.tokenizer.state=In.RCDATA;break}case E.STYLE:case E.XMP:case E.IFRAME:case E.NOEMBED:case E.NOFRAMES:case E.NOSCRIPT:{this.tokenizer.state=In.RAWTEXT;break}case E.SCRIPT:{this.tokenizer.state=In.SCRIPT_DATA;break}case E.PLAINTEXT:{this.tokenizer.state=In.PLAINTEXT;break}}}_setDocumentType(t){const r=t.name||"",n=t.publicId||"",a=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,r,n,a),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,r){if(this.options.sourceCodeLocationInfo){const n=r&&{...r,startTag:r};this.treeAdapter.setNodeSourceCodeLocation(t,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n??this.document,t)}}_appendElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location)}_insertElement(t,r){const n=this.treeAdapter.createElement(t.tagName,r,t.attrs);this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID)}_insertFakeElement(t,r){const n=this.treeAdapter.createElement(t,Ge.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,r)}_insertTemplate(t){const r=this.treeAdapter.createElement(t.tagName,Ge.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(r,n),this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(be.HTML,Ge.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,E.HTML)}_appendCommentNode(t,r){const n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(r,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,t.location)}_insertCharacters(t){let r,n;if(this._shouldFosterParentOnInsertion()?({parent:r,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(r,t.chars,n):this.treeAdapter.insertText(r,t.chars)):(r=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(r,t.chars)),!t.location)return;const a=this.treeAdapter.getChildNodes(r),i=n?a.lastIndexOf(n):a.length,s=a[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:d,endCol:h,endOffset:p}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:d,endCol:h,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,r){for(let n=this.treeAdapter.getFirstChild(t);n;n=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(r,n)}_setEndLocation(t,r){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&r.location){const n=r.location,a=this.treeAdapter.getTagName(t),i=r.type===sr.END_TAG&&a===r.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,i)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let r,n;return this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,n=this.fragmentContextID):{current:r,currentTagId:n}=this.openElements,t.tagID===E.SVG&&this.treeAdapter.getTagName(r)===be.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(r)===Ge.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===E.MGLYPH||t.tagID===E.MALIGNMARK)&&n!==void 0&&!this._isIntegrationPoint(n,r,Ge.HTML)}_processToken(t){switch(t.type){case sr.CHARACTER:{this.onCharacter(t);break}case sr.NULL_CHARACTER:{this.onNullCharacter(t);break}case sr.COMMENT:{this.onComment(t);break}case sr.DOCTYPE:{this.onDoctype(t);break}case sr.START_TAG:{this._processStartTag(t);break}case sr.END_TAG:{this.onEndTag(t);break}case sr.EOF:{this.onEof(t);break}case sr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,r,n){const a=this.treeAdapter.getNamespaceURI(r),i=this.treeAdapter.getAttrList(r);return zK(t,a,i,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const r=this.activeFormattingElements.entries.findIndex(a=>a.type===Hs.Marker||this.openElements.contains(a.element)),n=r===-1?t-1:r-1;for(let a=n;a>=0;a--){const i=this.activeFormattingElements.entries[a];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(E.P),this.openElements.popUntilTagNamePopped(E.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case E.TR:{this.insertionMode=se.IN_ROW;return}case E.TBODY:case E.THEAD:case E.TFOOT:{this.insertionMode=se.IN_TABLE_BODY;return}case E.CAPTION:{this.insertionMode=se.IN_CAPTION;return}case E.COLGROUP:{this.insertionMode=se.IN_COLUMN_GROUP;return}case E.TABLE:{this.insertionMode=se.IN_TABLE;return}case E.BODY:{this.insertionMode=se.IN_BODY;return}case E.FRAMESET:{this.insertionMode=se.IN_FRAMESET;return}case E.SELECT:{this._resetInsertionModeForSelect(t);return}case E.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case E.HTML:{this.insertionMode=this.headElement?se.AFTER_HEAD:se.BEFORE_HEAD;return}case E.TD:case E.TH:{if(t>0){this.insertionMode=se.IN_CELL;return}break}case E.HEAD:{if(t>0){this.insertionMode=se.IN_HEAD;return}break}}this.insertionMode=se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let r=t-1;r>0;r--){const n=this.openElements.tagIDs[r];if(n===E.TEMPLATE)break;if(n===E.TABLE){this.insertionMode=se.IN_SELECT_IN_TABLE;return}}this.insertionMode=se.IN_SELECT}_isElementCausesFosterParenting(t){return RP.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case E.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(r)===Ge.HTML)return{parent:this.treeAdapter.getTemplateContent(r),beforeElement:null};break}case E.TABLE:{const n=this.treeAdapter.getParentNode(r);return n?{parent:n,beforeElement:r}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const r=this._findFosterParentingLocation();r.beforeElement?this.treeAdapter.insertBefore(r.parent,t,r.beforeElement):this.treeAdapter.appendChild(r.parent,t)}_isSpecialElement(t,r){const n=this.treeAdapter.getNamespaceURI(t);return uK[n].has(r)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){vJ(this,t);return}switch(this.insertionMode){case se.INITIAL:{Dh(this,t);break}case se.BEFORE_HTML:{gp(this,t);break}case se.BEFORE_HEAD:{fp(this,t);break}case se.IN_HEAD:{mp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{yp(this,t);break}case se.AFTER_HEAD:{bp(this,t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:{DP(this,t);break}case se.TEXT:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{ev(this,t);break}case se.IN_TABLE_TEXT:{zP(this,t);break}case se.IN_COLUMN_GROUP:{zm(this,t);break}case se.AFTER_BODY:{Um(this,t);break}case se.AFTER_AFTER_BODY:{um(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){xJ(this,t);return}switch(this.insertionMode){case se.INITIAL:{Dh(this,t);break}case se.BEFORE_HTML:{gp(this,t);break}case se.BEFORE_HEAD:{fp(this,t);break}case se.IN_HEAD:{mp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{yp(this,t);break}case se.AFTER_HEAD:{bp(this,t);break}case se.TEXT:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{ev(this,t);break}case se.IN_COLUMN_GROUP:{zm(this,t);break}case se.AFTER_BODY:{Um(this,t);break}case se.AFTER_AFTER_BODY:{um(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){b1(this,t);return}switch(this.insertionMode){case se.INITIAL:case se.BEFORE_HTML:case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_TEMPLATE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{b1(this,t);break}case se.IN_TABLE_TEXT:{Mh(this,t);break}case se.AFTER_BODY:{XK(this,t);break}case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{JK(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case se.INITIAL:{ZK(this,t);break}case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case se.IN_TABLE_TEXT:{Mh(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?wJ(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{Dh(this,t);break}case se.BEFORE_HTML:{eX(this,t);break}case se.BEFORE_HEAD:{rX(this,t);break}case se.IN_HEAD:{Es(this,t);break}case se.IN_HEAD_NO_SCRIPT:{iX(this,t);break}case se.AFTER_HEAD:{oX(this,t);break}case se.IN_BODY:{Da(this,t);break}case se.IN_TABLE:{sd(this,t);break}case se.IN_TABLE_TEXT:{Mh(this,t);break}case se.IN_CAPTION:{nJ(this,t);break}case se.IN_COLUMN_GROUP:{eS(this,t);break}case se.IN_TABLE_BODY:{q0(this,t);break}case se.IN_ROW:{H0(this,t);break}case se.IN_CELL:{sJ(this,t);break}case se.IN_SELECT:{qP(this,t);break}case se.IN_SELECT_IN_TABLE:{lJ(this,t);break}case se.IN_TEMPLATE:{uJ(this,t);break}case se.AFTER_BODY:{hJ(this,t);break}case se.IN_FRAMESET:{pJ(this,t);break}case se.AFTER_FRAMESET:{fJ(this,t);break}case se.AFTER_AFTER_BODY:{yJ(this,t);break}case se.AFTER_AFTER_FRAMESET:{bJ(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?SJ(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{Dh(this,t);break}case se.BEFORE_HTML:{tX(this,t);break}case se.BEFORE_HEAD:{nX(this,t);break}case se.IN_HEAD:{aX(this,t);break}case se.IN_HEAD_NO_SCRIPT:{sX(this,t);break}case se.AFTER_HEAD:{lX(this,t);break}case se.IN_BODY:{$0(this,t);break}case se.TEXT:{VX(this,t);break}case se.IN_TABLE:{Ip(this,t);break}case se.IN_TABLE_TEXT:{Mh(this,t);break}case se.IN_CAPTION:{aJ(this,t);break}case se.IN_COLUMN_GROUP:{iJ(this,t);break}case se.IN_TABLE_BODY:{x1(this,t);break}case se.IN_ROW:{$P(this,t);break}case se.IN_CELL:{oJ(this,t);break}case se.IN_SELECT:{HP(this,t);break}case se.IN_SELECT_IN_TABLE:{cJ(this,t);break}case se.IN_TEMPLATE:{dJ(this,t);break}case se.AFTER_BODY:{WP(this,t);break}case se.IN_FRAMESET:{gJ(this,t);break}case se.AFTER_FRAMESET:{mJ(this,t);break}case se.AFTER_AFTER_BODY:{um(this,t);break}}}onEof(t){switch(this.insertionMode){case se.INITIAL:{Dh(this,t);break}case se.BEFORE_HTML:{gp(this,t);break}case se.BEFORE_HEAD:{fp(this,t);break}case se.IN_HEAD:{mp(this,t);break}case se.IN_HEAD_NO_SCRIPT:{yp(this,t);break}case se.AFTER_HEAD:{bp(this,t);break}case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{BP(this,t);break}case se.TEXT:{YX(this,t);break}case se.IN_TABLE_TEXT:{Mh(this,t);break}case se.IN_TEMPLATE:{GP(this,t);break}case se.AFTER_BODY:case se.IN_FRAMESET:case se.AFTER_FRAMESET:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{Zw(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Z.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.TEXT:case se.IN_COLUMN_GROUP:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{this._insertCharacters(t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:case se.AFTER_BODY:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{IP(this,t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{ev(this,t);break}case se.IN_TABLE_TEXT:{FP(this,t);break}}}}function GK(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):jP(e,t),r}function WK(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const a=e.openElements.items[n];if(a===t.element)break;e._isSpecialElement(a,e.openElements.tagIDs[n])&&(r=a)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function VK(e,t,r){let n=t,a=e.openElements.getCommonAncestor(t);for(let i=0,s=a;s!==r;i++,s=a){a=e.openElements.getCommonAncestor(s);const l=e.activeFormattingElements.getElementEntry(s),d=l&&i>=qK;!l||d?(d&&e.activeFormattingElements.removeEntry(l),e.openElements.remove(s)):(s=YK(e,l),n===t&&(e.activeFormattingElements.bookmark=l),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(s,n),n=s)}return n}function YK(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function QK(e,t,r){const n=e.treeAdapter.getTagName(t),a=Cd(n);if(e._isElementCausesFosterParenting(a))e._fosterParentElement(r);else{const i=e.treeAdapter.getNamespaceURI(t);a===E.TEMPLATE&&i===Ge.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function KK(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:a}=r,i=e.treeAdapter.createElement(a.tagName,n,a.attrs);e._adoptNodes(t,i),e.treeAdapter.appendChild(t,i),e.activeFormattingElements.insertElementAfterBookmark(i,a),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,i,a.tagID)}function Jw(e,t){for(let r=0;r<$K;r++){const n=GK(e,t);if(!n)break;const a=WK(e,n);if(!a)break;e.activeFormattingElements.bookmark=n;const i=VK(e,a,n.element),s=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),s&&QK(e,s,i),KK(e,a,n)}}function b1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function XK(e,t){e._appendCommentNode(t,e.openElements.items[0])}function JK(e,t){e._appendCommentNode(t,e.document)}function Zw(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],a=e.treeAdapter.getNodeSourceCodeLocation(n);if(a&&!a.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const i=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(i);s&&!s.endTag&&e._setEndLocation(i,t)}}}}function ZK(e,t){e._setDocumentType(t);const r=t.forceQuirks?Ji.QUIRKS:NK(t);AK(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=se.BEFORE_HTML}function Dh(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ji.QUIRKS),e.insertionMode=se.BEFORE_HTML,e._processToken(t)}function eX(e,t){t.tagID===E.HTML?(e._insertElement(t,Ge.HTML),e.insertionMode=se.BEFORE_HEAD):gp(e,t)}function tX(e,t){const r=t.tagID;(r===E.HTML||r===E.HEAD||r===E.BODY||r===E.BR)&&gp(e,t)}function gp(e,t){e._insertFakeRootElement(),e.insertionMode=se.BEFORE_HEAD,e._processToken(t)}function rX(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.HEAD:{e._insertElement(t,Ge.HTML),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD;break}default:fp(e,t)}}function nX(e,t){const r=t.tagID;r===E.HEAD||r===E.BODY||r===E.HTML||r===E.BR?fp(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function fp(e,t){e._insertFakeElement(be.HEAD,E.HEAD),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD,e._processToken(t)}function Es(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:{e._appendElement(t,Ge.HTML),t.ackSelfClosing=!0;break}case E.TITLE:{e._switchToTextParsing(t,In.RCDATA);break}case E.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,In.RAWTEXT):(e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_HEAD_NO_SCRIPT);break}case E.NOFRAMES:case E.STYLE:{e._switchToTextParsing(t,In.RAWTEXT);break}case E.SCRIPT:{e._switchToTextParsing(t,In.SCRIPT_DATA);break}case E.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(se.IN_TEMPLATE);break}case E.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:mp(e,t)}}function aX(e,t){switch(t.tagID){case E.HEAD:{e.openElements.pop(),e.insertionMode=se.AFTER_HEAD;break}case E.BODY:case E.BR:case E.HTML:{mp(e,t);break}case E.TEMPLATE:{Bc(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Bc(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==E.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function mp(e,t){e.openElements.pop(),e.insertionMode=se.AFTER_HEAD,e._processToken(t)}function iX(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.BASEFONT:case E.BGSOUND:case E.HEAD:case E.LINK:case E.META:case E.NOFRAMES:case E.STYLE:{Es(e,t);break}case E.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:yp(e,t)}}function sX(e,t){switch(t.tagID){case E.NOSCRIPT:{e.openElements.pop(),e.insertionMode=se.IN_HEAD;break}case E.BR:{yp(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function yp(e,t){const r=t.type===sr.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=se.IN_HEAD,e._processToken(t)}function oX(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.BODY:{e._insertElement(t,Ge.HTML),e.framesetOk=!1,e.insertionMode=se.IN_BODY;break}case E.FRAMESET:{e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_FRAMESET;break}case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,E.HEAD),Es(e,t),e.openElements.remove(e.headElement);break}case E.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:bp(e,t)}}function lX(e,t){switch(t.tagID){case E.BODY:case E.HTML:case E.BR:{bp(e,t);break}case E.TEMPLATE:{Bc(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function bp(e,t){e._insertFakeElement(be.BODY,E.BODY),e.insertionMode=se.IN_BODY,U0(e,t)}function U0(e,t){switch(t.type){case sr.CHARACTER:{DP(e,t);break}case sr.WHITESPACE_CHARACTER:{IP(e,t);break}case sr.COMMENT:{b1(e,t);break}case sr.START_TAG:{Da(e,t);break}case sr.END_TAG:{$0(e,t);break}case sr.EOF:{BP(e,t);break}}}function IP(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function DP(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function cX(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function uX(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}function dX(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_FRAMESET)}function hX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML)}function pX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&y1.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ge.HTML)}function gX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function fX(e,t){const r=e.openElements.tmplCount>0;(!e.formElement||r)&&(e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML),r||(e.formElement=e.openElements.current))}function mX(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const a=e.openElements.tagIDs[n];if(r===E.LI&&a===E.LI||(r===E.DD||r===E.DT)&&(a===E.DD||a===E.DT)){e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a);break}if(a!==E.ADDRESS&&a!==E.DIV&&a!==E.P&&e._isSpecialElement(e.openElements.items[n],a))break}e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML)}function yX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML),e.tokenizer.state=In.PLAINTEXT}function bX(e,t){e.openElements.hasInScope(E.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML),e.framesetOk=!1}function xX(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(be.A);r&&(Jw(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vX(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function wX(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(E.NOBR)&&(Jw(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ge.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function SX(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function TX(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ji.QUIRKS&&e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._insertElement(t,Ge.HTML),e.framesetOk=!1,e.insertionMode=se.IN_TABLE}function MP(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ge.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function OP(e){const t=kP(e,mc.TYPE);return t!=null&&t.toLowerCase()===UK}function kX(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ge.HTML),OP(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function EX(e,t){e._appendElement(t,Ge.HTML),t.ackSelfClosing=!0}function CX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._appendElement(t,Ge.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function _X(e,t){t.tagName=be.IMG,t.tagID=E.IMG,MP(e,t)}function AX(e,t){e._insertElement(t,Ge.HTML),e.skipNextNewLine=!0,e.tokenizer.state=In.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=se.TEXT}function NX(e,t){e.openElements.hasInButtonScope(E.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,In.RAWTEXT)}function LX(e,t){e.framesetOk=!1,e._switchToTextParsing(t,In.RAWTEXT)}function N_(e,t){e._switchToTextParsing(t,In.RAWTEXT)}function PX(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===se.IN_TABLE||e.insertionMode===se.IN_CAPTION||e.insertionMode===se.IN_TABLE_BODY||e.insertionMode===se.IN_ROW||e.insertionMode===se.IN_CELL?se.IN_SELECT_IN_TABLE:se.IN_SELECT}function RX(e,t){e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML)}function IX(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ge.HTML)}function DX(e,t){e.openElements.hasInScope(E.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(E.RTC),e._insertElement(t,Ge.HTML)}function MX(e,t){e._reconstructActiveFormattingElements(),LP(t),Xw(t),t.selfClosing?e._appendElement(t,Ge.MATHML):e._insertElement(t,Ge.MATHML),t.ackSelfClosing=!0}function OX(e,t){e._reconstructActiveFormattingElements(),PP(t),Xw(t),t.selfClosing?e._appendElement(t,Ge.SVG):e._insertElement(t,Ge.SVG),t.ackSelfClosing=!0}function L_(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ge.HTML)}function Da(e,t){switch(t.tagID){case E.I:case E.S:case E.B:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.SMALL:case E.STRIKE:case E.STRONG:{vX(e,t);break}case E.A:{xX(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{pX(e,t);break}case E.P:case E.DL:case E.OL:case E.UL:case E.DIV:case E.DIR:case E.NAV:case E.MAIN:case E.MENU:case E.ASIDE:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.DETAILS:case E.ADDRESS:case E.ARTICLE:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{hX(e,t);break}case E.LI:case E.DD:case E.DT:{mX(e,t);break}case E.BR:case E.IMG:case E.WBR:case E.AREA:case E.EMBED:case E.KEYGEN:{MP(e,t);break}case E.HR:{CX(e,t);break}case E.RB:case E.RTC:{IX(e,t);break}case E.RT:case E.RP:{DX(e,t);break}case E.PRE:case E.LISTING:{gX(e,t);break}case E.XMP:{NX(e,t);break}case E.SVG:{OX(e,t);break}case E.HTML:{cX(e,t);break}case E.BASE:case E.LINK:case E.META:case E.STYLE:case E.TITLE:case E.SCRIPT:case E.BGSOUND:case E.BASEFONT:case E.TEMPLATE:{Es(e,t);break}case E.BODY:{uX(e,t);break}case E.FORM:{fX(e,t);break}case E.NOBR:{wX(e,t);break}case E.MATH:{MX(e,t);break}case E.TABLE:{TX(e,t);break}case E.INPUT:{kX(e,t);break}case E.PARAM:case E.TRACK:case E.SOURCE:{EX(e,t);break}case E.IMAGE:{_X(e,t);break}case E.BUTTON:{bX(e,t);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{SX(e,t);break}case E.IFRAME:{LX(e,t);break}case E.SELECT:{PX(e,t);break}case E.OPTION:case E.OPTGROUP:{RX(e,t);break}case E.NOEMBED:case E.NOFRAMES:{N_(e,t);break}case E.FRAMESET:{dX(e,t);break}case E.TEXTAREA:{AX(e,t);break}case E.NOSCRIPT:{e.options.scriptingEnabled?N_(e,t):L_(e,t);break}case E.PLAINTEXT:{yX(e,t);break}case E.COL:case E.TH:case E.TD:case E.TR:case E.HEAD:case E.FRAME:case E.TBODY:case E.TFOOT:case E.THEAD:case E.CAPTION:case E.COLGROUP:break;default:L_(e,t)}}function jX(e,t){if(e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}function BX(e,t){e.openElements.hasInScope(E.BODY)&&(e.insertionMode=se.AFTER_BODY,WP(e,t))}function FX(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}function zX(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(E.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(E.FORM):r&&e.openElements.remove(r))}function UX(e){e.openElements.hasInButtonScope(E.P)||e._insertFakeElement(be.P,E.P),e._closePElement()}function $X(e){e.openElements.hasInListItemScope(E.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(E.LI),e.openElements.popUntilTagNamePopped(E.LI))}function qX(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}function HX(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function GX(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}function WX(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(be.BR,E.BR),e.openElements.pop(),e.framesetOk=!1}function jP(e,t){const r=t.tagName,n=t.tagID;for(let a=e.openElements.stackTop;a>0;a--){const i=e.openElements.items[a],s=e.openElements.tagIDs[a];if(n===s&&(n!==E.UNKNOWN||e.treeAdapter.getTagName(i)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=a&&e.openElements.shortenToLength(a);break}if(e._isSpecialElement(i,s))break}}function $0(e,t){switch(t.tagID){case E.A:case E.B:case E.I:case E.S:case E.U:case E.EM:case E.TT:case E.BIG:case E.CODE:case E.FONT:case E.NOBR:case E.SMALL:case E.STRIKE:case E.STRONG:{Jw(e,t);break}case E.P:{UX(e);break}case E.DL:case E.UL:case E.OL:case E.DIR:case E.DIV:case E.NAV:case E.PRE:case E.MAIN:case E.MENU:case E.ASIDE:case E.BUTTON:case E.CENTER:case E.FIGURE:case E.FOOTER:case E.HEADER:case E.HGROUP:case E.DIALOG:case E.ADDRESS:case E.ARTICLE:case E.DETAILS:case E.SEARCH:case E.SECTION:case E.SUMMARY:case E.LISTING:case E.FIELDSET:case E.BLOCKQUOTE:case E.FIGCAPTION:{FX(e,t);break}case E.LI:{$X(e);break}case E.DD:case E.DT:{qX(e,t);break}case E.H1:case E.H2:case E.H3:case E.H4:case E.H5:case E.H6:{HX(e);break}case E.BR:{WX(e);break}case E.BODY:{jX(e,t);break}case E.HTML:{BX(e,t);break}case E.FORM:{zX(e);break}case E.APPLET:case E.OBJECT:case E.MARQUEE:{GX(e,t);break}case E.TEMPLATE:{Bc(e,t);break}default:jP(e,t)}}function BP(e,t){e.tmplInsertionModeStack.length>0?GP(e,t):Zw(e,t)}function VX(e,t){var r;t.tagID===E.SCRIPT&&((r=e.scriptHandler)===null||r===void 0||r.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function YX(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function ev(e,t){if(e.openElements.currentTagId!==void 0&&RP.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=se.IN_TABLE_TEXT,t.type){case sr.CHARACTER:{zP(e,t);break}case sr.WHITESPACE_CHARACTER:{FP(e,t);break}}else ig(e,t)}function QX(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_CAPTION}function KX(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_COLUMN_GROUP}function XX(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.COLGROUP,E.COLGROUP),e.insertionMode=se.IN_COLUMN_GROUP,eS(e,t)}function JX(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_TABLE_BODY}function ZX(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.TBODY,E.TBODY),e.insertionMode=se.IN_TABLE_BODY,q0(e,t)}function eJ(e,t){e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function tJ(e,t){OP(t)?e._appendElement(t,Ge.HTML):ig(e,t),t.ackSelfClosing=!0}function rJ(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ge.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function sd(e,t){switch(t.tagID){case E.TD:case E.TH:case E.TR:{ZX(e,t);break}case E.STYLE:case E.SCRIPT:case E.TEMPLATE:{Es(e,t);break}case E.COL:{XX(e,t);break}case E.FORM:{rJ(e,t);break}case E.TABLE:{eJ(e,t);break}case E.TBODY:case E.TFOOT:case E.THEAD:{JX(e,t);break}case E.INPUT:{tJ(e,t);break}case E.CAPTION:{QX(e,t);break}case E.COLGROUP:{KX(e,t);break}default:ig(e,t)}}function Ip(e,t){switch(t.tagID){case E.TABLE:{e.openElements.hasInTableScope(E.TABLE)&&(e.openElements.popUntilTagNamePopped(E.TABLE),e._resetInsertionMode());break}case E.TEMPLATE:{Bc(e,t);break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:ig(e,t)}}function ig(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,U0(e,t),e.fosterParentingEnabled=r}function FP(e,t){e.pendingCharacterTokens.push(t)}function zP(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Mh(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)ig(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const UP=new Set([E.CAPTION,E.COL,E.COLGROUP,E.TBODY,E.TD,E.TFOOT,E.TH,E.THEAD,E.TR]);function nJ(e,t){const r=t.tagID;UP.has(r)?e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,sd(e,t)):Da(e,t)}function aJ(e,t){const r=t.tagID;switch(r){case E.CAPTION:case E.TABLE:{e.openElements.hasInTableScope(E.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(E.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,r===E.TABLE&&Ip(e,t));break}case E.BODY:case E.COL:case E.COLGROUP:case E.HTML:case E.TBODY:case E.TD:case E.TFOOT:case E.TH:case E.THEAD:case E.TR:break;default:$0(e,t)}}function eS(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.COL:{e._appendElement(t,Ge.HTML),t.ackSelfClosing=!0;break}case E.TEMPLATE:{Es(e,t);break}default:zm(e,t)}}function iJ(e,t){switch(t.tagID){case E.COLGROUP:{e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TEMPLATE:{Bc(e,t);break}case E.COL:break;default:zm(e,t)}}function zm(e,t){e.openElements.currentTagId===E.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE,e._processToken(t))}function q0(e,t){switch(t.tagID){case E.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_ROW;break}case E.TH:case E.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(be.TR,E.TR),e.insertionMode=se.IN_ROW,H0(e,t);break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,sd(e,t));break}default:sd(e,t)}}function x1(e,t){const r=t.tagID;switch(t.tagID){case E.TBODY:case E.TFOOT:case E.THEAD:{e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case E.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,Ip(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:case E.TR:break;default:Ip(e,t)}}function H0(e,t){switch(t.tagID){case E.TH:case E.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ge.HTML),e.insertionMode=se.IN_CELL,e.activeFormattingElements.insertMarker();break}case E.CAPTION:case E.COL:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,q0(e,t));break}default:sd(e,t)}}function $P(e,t){switch(t.tagID){case E.TR:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY);break}case E.TABLE:{e.openElements.hasInTableScope(E.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,x1(e,t));break}case E.TBODY:case E.TFOOT:case E.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(E.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,x1(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:case E.TD:case E.TH:break;default:Ip(e,t)}}function sJ(e,t){const r=t.tagID;UP.has(r)?(e.openElements.hasInTableScope(E.TD)||e.openElements.hasInTableScope(E.TH))&&(e._closeTableCell(),H0(e,t)):Da(e,t)}function oJ(e,t){const r=t.tagID;switch(r){case E.TD:case E.TH:{e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_ROW);break}case E.TABLE:case E.TBODY:case E.TFOOT:case E.THEAD:case E.TR:{e.openElements.hasInTableScope(r)&&(e._closeTableCell(),$P(e,t));break}case E.BODY:case E.CAPTION:case E.COL:case E.COLGROUP:case E.HTML:break;default:$0(e,t)}}function qP(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e._insertElement(t,Ge.HTML);break}case E.OPTGROUP:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ge.HTML);break}case E.HR:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop(),e._appendElement(t,Ge.HTML),t.ackSelfClosing=!0;break}case E.INPUT:case E.KEYGEN:case E.TEXTAREA:case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),t.tagID!==E.SELECT&&e._processStartTag(t));break}case E.SCRIPT:case E.TEMPLATE:{Es(e,t);break}}}function HP(e,t){switch(t.tagID){case E.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===E.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===E.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===E.OPTGROUP&&e.openElements.pop();break}case E.OPTION:{e.openElements.currentTagId===E.OPTION&&e.openElements.pop();break}case E.SELECT:{e.openElements.hasInSelectScope(E.SELECT)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode());break}case E.TEMPLATE:{Bc(e,t);break}}}function lJ(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e._processStartTag(t)):qP(e,t)}function cJ(e,t){const r=t.tagID;r===E.CAPTION||r===E.TABLE||r===E.TBODY||r===E.TFOOT||r===E.THEAD||r===E.TR||r===E.TD||r===E.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(E.SELECT),e._resetInsertionMode(),e.onEndTag(t)):HP(e,t)}function uJ(e,t){switch(t.tagID){case E.BASE:case E.BASEFONT:case E.BGSOUND:case E.LINK:case E.META:case E.NOFRAMES:case E.SCRIPT:case E.STYLE:case E.TEMPLATE:case E.TITLE:{Es(e,t);break}case E.CAPTION:case E.COLGROUP:case E.TBODY:case E.TFOOT:case E.THEAD:{e.tmplInsertionModeStack[0]=se.IN_TABLE,e.insertionMode=se.IN_TABLE,sd(e,t);break}case E.COL:{e.tmplInsertionModeStack[0]=se.IN_COLUMN_GROUP,e.insertionMode=se.IN_COLUMN_GROUP,eS(e,t);break}case E.TR:{e.tmplInsertionModeStack[0]=se.IN_TABLE_BODY,e.insertionMode=se.IN_TABLE_BODY,q0(e,t);break}case E.TD:case E.TH:{e.tmplInsertionModeStack[0]=se.IN_ROW,e.insertionMode=se.IN_ROW,H0(e,t);break}default:e.tmplInsertionModeStack[0]=se.IN_BODY,e.insertionMode=se.IN_BODY,Da(e,t)}}function dJ(e,t){t.tagID===E.TEMPLATE&&Bc(e,t)}function GP(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(E.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Zw(e,t)}function hJ(e,t){t.tagID===E.HTML?Da(e,t):Um(e,t)}function WP(e,t){var r;if(t.tagID===E.HTML){if(e.fragmentContext||(e.insertionMode=se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===E.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(!((r=e.treeAdapter.getNodeSourceCodeLocation(n))===null||r===void 0)&&r.endTag)&&e._setEndLocation(n,t)}}else Um(e,t)}function Um(e,t){e.insertionMode=se.IN_BODY,U0(e,t)}function pJ(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.FRAMESET:{e._insertElement(t,Ge.HTML);break}case E.FRAME:{e._appendElement(t,Ge.HTML),t.ackSelfClosing=!0;break}case E.NOFRAMES:{Es(e,t);break}}}function gJ(e,t){t.tagID===E.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==E.FRAMESET&&(e.insertionMode=se.AFTER_FRAMESET))}function fJ(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.NOFRAMES:{Es(e,t);break}}}function mJ(e,t){t.tagID===E.HTML&&(e.insertionMode=se.AFTER_AFTER_FRAMESET)}function yJ(e,t){t.tagID===E.HTML?Da(e,t):um(e,t)}function um(e,t){e.insertionMode=se.IN_BODY,U0(e,t)}function bJ(e,t){switch(t.tagID){case E.HTML:{Da(e,t);break}case E.NOFRAMES:{Es(e,t);break}}}function xJ(e,t){t.chars=gn,e._insertCharacters(t)}function vJ(e,t){e._insertCharacters(t),e.framesetOk=!1}function VP(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ge.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function wJ(e,t){if(OK(t))VP(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===Ge.MATHML?LP(t):n===Ge.SVG&&(jK(t),PP(t)),Xw(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}function SJ(e,t){if(t.tagID===E.P||t.tagID===E.BR){VP(e),e._endTagOutsideForeignContent(t);return}for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===Ge.HTML){e._endTagOutsideForeignContent(t);break}const a=e.treeAdapter.getTagName(n);if(a.toLowerCase()===t.tagName){t.tagName=a,e.openElements.shortenToLength(r);break}}}be.AREA,be.BASE,be.BASEFONT,be.BGSOUND,be.BR,be.COL,be.EMBED,be.FRAME,be.HR,be.IMG,be.INPUT,be.KEYGEN,be.LINK,be.META,be.PARAM,be.SOURCE,be.TRACK,be.WBR;const TJ=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,kJ=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),P_={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function YP(e,t){const r=DJ(e),n=$L("type",{handlers:{root:EJ,element:CJ,text:_J,comment:KP,doctype:AJ,raw:LJ},unknown:PJ}),a={parser:r?new A_(P_):A_.getFragmentParser(void 0,P_),handle(l){n(l,a)},stitches:!1,options:t||{}};n(e,a),_d(a,Xs());const i=r?a.parser.document:a.parser.getFragment(),s=EQ(i,{file:a.options.file});return a.stitches&&rg(s,"comment",function(l,d,h){const p=l;if(p.value.stitch&&h&&d!==void 0){const f=h.children;return f[d]=p.value.stitch,d}}),s.type==="root"&&s.children.length===1&&s.children[0].type===e.type?s.children[0]:s}function QP(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function EJ(e,t){QP(e.children,t)}function CJ(e,t){RJ(e,t),QP(e.children,t),IJ(e,t)}function _J(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const r={type:sr.CHARACTER,chars:e.value,location:sg(e)};_d(t,Xs(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function AJ(e,t){const r={type:sr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:sg(e)};_d(t,Xs(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function NJ(e,t){t.stitches=!0;const r=MJ(e);if("children"in e&&"children"in r){const n=YP({type:"root",children:e.children},t.options);r.children=n.children}KP({type:"comment",value:{stitch:r}},t)}function KP(e,t){const r=e.value,n={type:sr.COMMENT,data:r,location:sg(e)};_d(t,Xs(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function LJ(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,XP(t,Xs(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(TJ,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const r=t.parser.tokenizer._consume();t.parser.tokenizer._callState(r)}}function PJ(e,t){const r=e;if(t.options.passThrough&&t.options.passThrough.includes(r.type))NJ(r,t);else{let n="";throw kJ.has(r.type)&&(n=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+n)}}function _d(e,t){XP(e,t);const r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=In.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function XP(e,t){if(t&&t.offset!==void 0){const r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function RJ(e,t){const r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===In.PLAINTEXT)return;_d(t,Xs(e));const n=t.parser.openElements.current;let a="namespaceURI"in n?n.namespaceURI:cc.html;a===cc.html&&r==="svg"&&(a=cc.svg);const i=zQ({...e,children:[]},{space:a===cc.svg?"svg":"html"}),s={type:sr.START_TAG,tagName:r,tagID:Cd(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:sg(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}function IJ(e,t){const r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&YQ.includes(r)||t.parser.tokenizer.state===In.PLAINTEXT)return;_d(t,O0(e));const n={type:sr.END_TAG,tagName:r,tagID:Cd(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:sg(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===In.RCDATA||t.parser.tokenizer.state===In.RAWTEXT||t.parser.tokenizer.state===In.SCRIPT_DATA)&&(t.parser.tokenizer.state=In.DATA)}function DJ(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function sg(e){const t=Xs(e)||{line:void 0,column:void 0,offset:void 0},r=O0(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}function MJ(e){return"children"in e?Tc({...e,children:[]}):Tc(e)}function OJ(e){return function(t,r){return YP(t,{...e,file:r})}}const tc=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],xp={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...tc,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...tc],h2:[["className","sr-only"]],img:[...tc,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...tc,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...tc],table:[...tc],ul:[...tc,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},ml={}.hasOwnProperty;function jJ(e,t){let r={type:"root",children:[]};const n={schema:t?{...xp,...t}:xp,stack:[]},a=JP(n,e);return a&&(Array.isArray(a)?a.length===1?r=a[0]:r.children=a:r=a),r}function JP(e,t){if(t&&typeof t=="object"){const r=t;switch(typeof r.type=="string"?r.type:""){case"comment":return BJ(e,r);case"doctype":return FJ(e,r);case"element":return zJ(e,r);case"root":return UJ(e,r);case"text":return $J(e,r)}}}function BJ(e,t){if(e.schema.allowComments){const r=typeof t.value=="string"?t.value:"",n=r.indexOf("-->"),i={type:"comment",value:n<0?r:r.slice(0,n)};return og(i,t),i}}function FJ(e,t){if(e.schema.allowDoctypes){const r={type:"doctype"};return og(r,t),r}}function zJ(e,t){const r=typeof t.tagName=="string"?t.tagName:"";e.stack.push(r);const n=ZP(e,t.children),a=qJ(e,t.properties);e.stack.pop();let i=!1;if(r&&r!=="*"&&(!e.schema.tagNames||e.schema.tagNames.includes(r))&&(i=!0,e.schema.ancestors&&ml.call(e.schema.ancestors,r))){const l=e.schema.ancestors[r];let d=-1;for(i=!1;++d<l.length;)e.stack.includes(l[d])&&(i=!0)}if(!i)return e.schema.strip&&!e.schema.strip.includes(r)?n:void 0;const s={type:"element",tagName:r,properties:a,children:n};return og(s,t),s}function UJ(e,t){const n={type:"root",children:ZP(e,t.children)};return og(n,t),n}function $J(e,t){const n={type:"text",value:typeof t.value=="string"?t.value:""};return og(n,t),n}function ZP(e,t){const r=[];if(Array.isArray(t)){const n=t;let a=-1;for(;++a<n.length;){const i=JP(e,n[a]);i&&(Array.isArray(i)?r.push(...i):r.push(i))}}return r}function qJ(e,t){const r=e.stack[e.stack.length-1],n=e.schema.attributes,a=e.schema.required,i=n&&ml.call(n,r)?n[r]:void 0,s=n&&ml.call(n,"*")?n["*"]:void 0,l=t&&typeof t=="object"?t:{},d={};let h;for(h in l)if(ml.call(l,h)){const p=l[h];let f=R_(e,I_(i,h),h,p);f==null&&(f=R_(e,I_(s,h),h,p)),f!=null&&(d[h]=f)}if(a&&ml.call(a,r)){const p=a[r];for(h in p)ml.call(p,h)&&!ml.call(d,h)&&(d[h]=p[h])}return d}function R_(e,t,r,n){return t?Array.isArray(n)?HJ(e,t,r,n):eR(e,t,r,n):void 0}function HJ(e,t,r,n){let a=-1;const i=[];for(;++a<n.length;){const s=eR(e,t,r,n[a]);(typeof s=="number"||typeof s=="string")&&i.push(s)}return i}function eR(e,t,r,n){if(!(typeof n!="boolean"&&typeof n!="number"&&typeof n!="string")&&GJ(e,r,n)){if(typeof t=="object"&&t.length>1){let a=!1,i=0;for(;++i<t.length;){const s=t[i];if(s&&typeof s=="object"&&"flags"in s){if(s.test(String(n))){a=!0;break}}else if(s===n){a=!0;break}}if(!a)return}return e.schema.clobber&&e.schema.clobberPrefix&&e.schema.clobber.includes(r)?e.schema.clobberPrefix+n:n}}function GJ(e,t,r){const n=e.schema.protocols&&ml.call(e.schema.protocols,t)?e.schema.protocols[t]:void 0;if(!n||n.length===0)return!0;const a=String(r),i=a.indexOf(":"),s=a.indexOf("?"),l=a.indexOf("#"),d=a.indexOf("/");if(i<0||d>-1&&i>d||s>-1&&i>s||l>-1&&i>l)return!0;let h=-1;for(;++h<n.length;){const p=n[h];if(i===p.length&&a.slice(0,p.length)===p)return!0}return!1}function og(e,t){const r=uL(t);t.data&&(e.data=Tc(t.data)),r&&(e.position=r)}function I_(e,t){let r,n=-1;if(e)for(;++n<e.length;){const a=e[n],i=typeof a=="string"?a:a[0];if(i===t)return a;i==="data*"&&(r=a)}if(t.length>4&&t.slice(0,4).toLowerCase()==="data")return r}function WJ(e){return function(t){return jJ(t,e)}}const D_=(function(e,t,r){const n=tg(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]}),Fc=(function(e){if(e==null)return QJ;if(typeof e=="string")return YJ(e);if(typeof e=="object")return VJ(e);if(typeof e=="function")return tS(e);throw new Error("Expected function, string, or array as `test`")});function VJ(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Fc(e[r]);return tS(n);function n(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function YJ(e){return tS(t);function t(r){return r.tagName===e}}function tS(e){return t;function t(r,n,a){return!!(KJ(r)&&e.call(this,r,typeof n=="number"?n:void 0,a||void 0))}}function QJ(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function KJ(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const M_=/\n/g,O_=/[\t ]+/g,v1=Fc("br"),j_=Fc(aZ),XJ=Fc("p"),B_=Fc("tr"),JJ=Fc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",nZ,iZ]),tR=Fc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function ZJ(e,t){const r=t||{},n="children"in e?e.children:[],a=tR(e),i=aR(e,{whitespace:r.whitespace||"normal"}),s=[];(e.type==="text"||e.type==="comment")&&s.push(...nR(e,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<n.length;)s.push(...rR(n[l],e,{whitespace:i,breakBefore:l?void 0:a,breakAfter:l<n.length-1?v1(n[l+1]):a}));const d=[];let h;for(l=-1;++l<s.length;){const p=s[l];typeof p=="number"?h!==void 0&&p>h&&(h=p):p&&(h!==void 0&&h>-1&&d.push(`
`.repeat(h)||" "),h=-1,d.push(p))}return d.join("")}function rR(e,t,r){return e.type==="element"?eZ(e,t,r):e.type==="text"?r.whitespace==="normal"?nR(e,r):tZ(e):[]}function eZ(e,t,r){const n=aR(e,r),a=e.children||[];let i=-1,s=[];if(JJ(e))return s;let l,d;for(v1(e)||B_(e)&&D_(t,e,B_)?d=`
`:XJ(e)?(l=2,d=2):tR(e)&&(l=1,d=1);++i<a.length;)s=s.concat(rR(a[i],e,{whitespace:n,breakBefore:i?void 0:l,breakAfter:i<a.length-1?v1(a[i+1]):d}));return j_(e)&&D_(t,e,j_)&&s.push("	"),l&&s.unshift(l),d&&s.push(d),s}function nR(e,t){const r=String(e.value),n=[],a=[];let i=0;for(;i<=r.length;){M_.lastIndex=i;const d=M_.exec(r),h=d&&"index"in d?d.index:r.length;n.push(rZ(r.slice(i,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,h===r.length?t.breakAfter:!0)),i=h+1}let s=-1,l;for(;++s<n.length;)n[s].charCodeAt(n[s].length-1)===8203||s<n.length-1&&n[s+1].charCodeAt(0)===8203?(a.push(n[s]),l=void 0):n[s]?(typeof l=="number"&&a.push(l),a.push(n[s]),l=0):(s===0||s===n.length-1)&&a.push(0);return a}function tZ(e){return[String(e.value)]}function rZ(e,t,r){const n=[];let a=0,i;for(;a<e.length;){O_.lastIndex=a;const s=O_.exec(e);i=s?s.index:e.length,!a&&!i&&s&&!t&&n.push(""),a!==i&&n.push(e.slice(a,i)),a=s?i+s[0].length:i}return a!==i&&!r&&n.push(""),n.join(" ")}function aR(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function nZ(e){return!!(e.properties||{}).hidden}function aZ(e){return e.tagName==="td"||e.tagName==="th"}function iZ(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function sZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],T=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],D={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:T},B={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},R=[B,f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:D,contains:R.concat([{begin:/\(/,end:/\)/,keywords:D,contains:R.concat(["self"]),relevance:0}]),relevance:0},$={className:"function",begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:D,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:D,relevance:0},{begin:b,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:D,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,$,B,R,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:D,contains:["self",l]},{begin:e.IDENT_RE+"::",keywords:D},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function oZ(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},r=sZ(e),n=r.keywords;return n.type=[...n.type,...t.type],n.literal=[...n.literal,...t.literal],n.built_in=[...n.built_in,...t.built_in],n._hints=t._hints,r.name="Arduino",r.aliases=["ino"],r.supersetOf="cpp",r}function lZ(e){const t=e.regex,r={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),s={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r,a]};a.contains.push(l);const d={match:/\\"/},h={className:"string",begin:/'/,end:/'/},p={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,r]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],b=e.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],T=["true","false"],k={match:/(\/[a-z._-]+)+/},C=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],A=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],D=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],B=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:T,built_in:[...C,...A,"set","shopt",...D,...B]},contains:[b,e.SHEBANG(),x,f,i,s,k,l,d,h,p,r]}}function cZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",T={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},k=[f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:T,contains:k.concat([{begin:/\(/,end:/\)/,keywords:T,contains:k.concat(["self"]),relevance:0}]),relevance:0},A={begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:T,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:T,relevance:0},{begin:b,returnBegin:!0,contains:[e.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:T,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:T,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:T,disableAutodetect:!0,illegal:"</",contains:[].concat(C,A,k,[f,{begin:e.IDENT_RE+"::",keywords:T},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:f,strings:h,keywords:T}}}function uZ(e){const t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",s="(?!struct)("+n+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},b=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],T=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],D={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:T},B={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},R=[B,f,l,r,e.C_BLOCK_COMMENT_MODE,p,h],M={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:D,contains:R.concat([{begin:/\(/,end:/\)/,keywords:D,contains:R.concat(["self"]),relevance:0}]),relevance:0},$={className:"function",begin:"("+s+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:D,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:D,relevance:0},{begin:b,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,h,p,l,{begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,h,p,l]}]},l,r,e.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:D,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(M,$,B,R,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:D,contains:["self",l]},{begin:e.IDENT_RE+"::",keywords:D},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function dZ(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],s={keyword:a.concat(i),built_in:t,literal:n},l=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},p={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=e.inherit(p,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:s},b=e.inherit(m,{illegal:/\n/}),x={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,b]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},T=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},b]});m.contains=[v,x,p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.C_BLOCK_COMMENT_MODE],b.contains=[T,x,f,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const k={variants:[h,v,x,p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},C={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},A=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",D={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:s,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},k,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+A+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:s,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,C],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,relevance:0,contains:[k,d,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},D]}}const hZ=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),pZ=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],gZ=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],fZ=[...pZ,...gZ],mZ=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),yZ=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),bZ=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),xZ=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function vZ(e){const t=e.regex,r=hZ(e),n={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",i=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,n,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+yZ.join("|")+")"},{begin:":(:)?("+bZ.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+xZ.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:mZ.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+fZ.join("|")+")\\b"}]}}function wZ(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function SZ(e){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function TZ(e){const t=e.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(r,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function kZ(e){const t=e.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},n=e.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[n,i,a,s,r,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,p=/'[^']*'/,f=t.either(d,h,p),m=t.concat(f,"(\\s*\\.\\s*",f,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[n,l,i,a,s,r]}}]}}var Bu="[0-9](_*[0-9])*",jf=`\\.(${Bu})`,Bf="[0-9a-fA-F](_*[0-9a-fA-F])*",F_={className:"number",variants:[{begin:`(\\b(${Bu})((${jf})|\\.)?|(${jf}))[eE][+-]?(${Bu})[fFdD]?\\b`},{begin:`\\b(${Bu})((${jf})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${jf})[fFdD]?\\b`},{begin:`\\b(${Bu})[fFdD]\\b`},{begin:`\\b0[xX]((${Bf})\\.?|(${Bf})?\\.(${Bf}))[pP][+-]?(${Bu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Bf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function iR(e,t,r){return r===-1?"":e.replace(t,n=>iR(e,t,r-1))}function EZ(e){const t=e.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",n=r+iR("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),d={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},p={className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:d,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[p,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:d,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,F_,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},F_,h]}}const z_="[A-Za-z$_][0-9A-Za-z$_]*",CZ=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],_Z=["true","false","null","undefined","NaN","Infinity"],sR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],oR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],lR=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],AZ=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],NZ=[].concat(lR,sR,oR);function LZ(e){const t=e.regex,r=(Q,{after:ie})=>{const G="</"+Q[0].slice(1);return Q.input.indexOf(G,ie)!==-1},n=z_,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Q,ie)=>{const G=Q[0].length+Q.index,F=Q.input[G];if(F==="<"||F===","){ie.ignoreMatch();return}F===">"&&(r(Q,{after:G})||ie.ignoreMatch());let H;const I=Q.input.substring(G);if(H=I.match(/^\s*=/)){ie.ignoreMatch();return}if((H=I.match(/^\s+extends\s+/))&&H.index===0){ie.ignoreMatch();return}}},l={$pattern:z_,keyword:CZ,literal:_Z,built_in:NZ,"variable.language":AZ},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},T={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,{match:/\$\d+/},f];m.contains=A.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(A)});const D=[].concat(C,m.contains),B=D.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(D)}]),R={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B},M={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},$={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...sR,...oR]}},W={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},O={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[R],illegal:/%/},Y={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(Q){return t.concat("(?!",Q.join("|"),")")}const q={match:t.concat(/\b/,X([...lR,"super","import"].map(Q=>`${Q}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},N={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},R]},j="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",K={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(j)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[R]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:$},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),W,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,C,{match:/\$\d+/},f,$,{scope:"attr",match:n+t.lookahead(":"),relevance:0},K,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:j,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},O,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[R,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},N,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[R]},q,Y,M,U,{match:/\$[(.]/}]}}function PZ(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],a={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[t,r,e.QUOTE_STRING_MODE,a,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Fu="[0-9](_*[0-9])*",Ff=`\\.(${Fu})`,zf="[0-9a-fA-F](_*[0-9a-fA-F])*",RZ={className:"number",variants:[{begin:`(\\b(${Fu})((${Ff})|\\.)?|(${Ff}))[eE][+-]?(${Fu})[fFdD]?\\b`},{begin:`\\b(${Fu})((${Ff})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Ff})[fFdD]?\\b`},{begin:`\\b(${Fu})[fFdD]\\b`},{begin:`\\b0[xX]((${zf})\\.?|(${zf})?\\.(${zf}))[pP][+-]?(${Fu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${zf})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function IZ(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},a={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,a]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,i,a]}]};a.contains.push(s);const l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},d={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(s,{className:"string"}),"self"]}]},h=RZ,p=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=f;return m.variants[1].contains=[f],f.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,p,r,n,l,d,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,p],relevance:0},e.C_LINE_COMMENT_MODE,p,l,d,s,e.C_NUMBER_MODE]},p]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,d]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const DZ=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),MZ=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],OZ=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],jZ=[...MZ,...OZ],BZ=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),cR=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),uR=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),FZ=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),zZ=cR.concat(uR).sort().reverse();function UZ(e){const t=DZ(e),r=zZ,n="and or not only",a="[\\w-]+",i="("+a+"|@\\{"+a+"\\})",s=[],l=[],d=function(A){return{className:"string",begin:"~?"+A+".*?"+A}},h=function(A,D,B){return{className:A,begin:D,relevance:B}},p={$pattern:/[a-z-]+/,keyword:n,attribute:BZ.join(" ")},f={begin:"\\(",end:"\\)",contains:l,keywords:p,relevance:0};l.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,d("'"),d('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,f,h("variable","@@?"+a,10),h("variable","@\\{"+a+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:a+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const m=l.concat({begin:/\{/,end:/\}/,contains:s}),b={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(l)},x={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+FZ.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:l}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:p,returnEnd:!0,contains:l,relevance:0}},T={className:"variable",variants:[{begin:"@"+a+"\\s*:",relevance:15},{begin:"@"+a}],starts:{end:"[;}]",returnEnd:!0,contains:m}},k={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,b,h("keyword","all\\b"),h("variable","@\\{"+a+"\\}"),{begin:"\\b("+jZ.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,h("selector-tag",i,0),h("selector-id","#"+i),h("selector-class","\\."+i,0),h("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+cR.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+uR.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},t.FUNCTION_DISPATCH]},C={begin:a+`:(:)?(${r.join("|")})`,returnBegin:!0,contains:[k]};return s.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,T,C,x,k,b,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:s}}function $Z(e){const t="\\[=*\\[",r="\\]=*\\]",n={begin:t,end:r,contains:["self"]},a=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,r,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:r,contains:[n],relevance:5}])}}function qZ(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,r]},a={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},s={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,r,n,a,i,s]}}function HZ(e){const t=e.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},p={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=e.inherit(h,{contains:[]}),m=e.inherit(p,{contains:[]});h.contains.push(m),p.contains.push(f);let b=[r,d];return[h,p,f,m].forEach(k=>{k.contains=k.contains.concat(b)}),b=b.concat(h,p),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:b},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:b}]}]},r,i,h,p,{className:"quote",begin:"^>\\s+",contains:b,end:"$"},a,n,d,s,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function GZ(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:r,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:r,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function WZ(e){const t=e.regex,r=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],n=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:r.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},s={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},p=[e.BACKSLASH_ESCAPE,i,d],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(v,T,k="\\1")=>{const C=k==="\\1"?k:t.concat(k,T);return t.concat(t.concat("(?:",v,")"),T,/(?:\\.|[^\\\/])*?/,C,/(?:\\.|[^\\\/])*?/,k,n)},b=(v,T,k)=>t.concat(t.concat("(?:",v,")"),T,/(?:\\.|[^\\\/])*?/,k,n),x=[d,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:p,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",t.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:b("(?:m|qr)?",/\//,/\//)},{begin:b("m|qr",t.either(...f,{capture:!0}),/\1/)},{begin:b("m|qr",/\(/,/\)/)},{begin:b("m|qr",/\[/,/\]/)},{begin:b("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,l,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=x,s.contains=x,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:x}}function VZ(e){const t=e.regex,r=/(?![A-Za-z0-9])(?![$])/,n=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),a=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),i=t.concat(/[A-Z]+/,r),s={scope:"variable",match:"\\$+"+n},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},d={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=e.inherit(e.APOS_STRING_MODE,{illegal:null}),p=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(d)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(d),"on:begin":(N,U)=>{U.data._beginMatch=N[1]||N[2]},"on:end":(N,U)=>{U.data._beginMatch!==N[1]&&U.ignoreMatch()}},m=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),b=`[ 	
]`,x={scope:"string",variants:[p,h,f,m]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},T=["false","null","true"],k=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],C=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],D={keyword:k,literal:(N=>{const U=[];return N.forEach(j=>{U.push(j),j.toLowerCase()===j?U.push(j.toUpperCase()):U.push(j.toLowerCase())}),U})(T),built_in:C},B=N=>N.map(U=>U.replace(/\|\d+$/,"")),R={variants:[{match:[/new/,t.concat(b,"+"),t.concat("(?!",B(C).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},M=t.concat(n,"\\b(?!\\()"),$={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),M],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,t.concat(/::/,t.lookahead(/(?!class\b)/)),M],scope:{1:"title.class",3:"variable.constant"}},{match:[a,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},W={scope:"attr",match:t.concat(n,t.lookahead(":"),t.lookahead(/(?!::)/))},O={relevance:0,begin:/\(/,end:/\)/,keywords:D,contains:[W,s,$,e.C_BLOCK_COMMENT_MODE,x,v,R]},Y={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",B(k).join("\\b|"),"|",B(C).join("\\b|"),"\\b)"),n,t.concat(b,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[O]};O.contains.push(Y);const X=[W,$,e.C_BLOCK_COMMENT_MODE,x,v,R],q={begin:t.concat(/#\[\s*\\?/,t.either(a,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:T,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:T,keyword:["new","array"]},contains:["self",...X]},...X,{scope:"meta",variants:[{match:a},{match:i}]}]};return{case_insensitive:!1,keywords:D,contains:[q,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},s,Y,$,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},R,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:D,contains:["self",q,s,$,e.C_BLOCK_COMMENT_MODE,x,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},x,v]}}function YZ(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function QZ(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function KZ(e){const t=e.regex,r=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},p={begin:/\{\{/,relevance:0},f={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,p,h]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",b=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,x=`\\b|${n.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${b}))[eE][+-]?(${m})[jJ]?(?=${x})`},{begin:`(${b})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${m})[jJ](?=${x})`}]},T={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},k={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",d,v,f,e.HASH_COMMENT_MODE]}]};return h.contains=[f,v,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[d,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,T,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[k]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,k,f]}]}}function XZ(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function JZ(e){const t=e.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[i,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function ZZ(e){const t=e.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=t.concat(n,/(::\w+)*/),s={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},h=[e.COMMENT("#","$",{contains:[l]}),e.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],p={className:"subst",begin:/#\{/,end:/\}/,keywords:s},f={className:"string",contains:[e.BACKSLASH_ESCAPE,p],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,p]})]}]},m="[1-9](_?[0-9])*|0",b="[0-9](_?[0-9])*",x={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${b}))?([eE][+-]?(${b})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:s}]},R=[f,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:s},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:s},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:r}],relevance:0},x,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:s},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,p],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,h),relevance:0}].concat(d,h);p.contains=R,v.contains=R;const O=[{begin:/^\s*=>/,starts:{end:"$",contains:R}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:s,contains:R}}];return h.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:s,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(O).concat(h).concat(R)}}function eee(e){const t=e.regex,r=/(r#)?/,n=t.concat(r,e.UNDERSCORE_IDENT_RE),a=t.concat(r,e.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,t.lookahead(/\s*\(/))},s="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],p=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:p,keyword:l,literal:d,built_in:h},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+s},{begin:"\\b0o([0-7_]+)"+s},{begin:"\\b0x([A-Fa-f0-9_]+)"+s},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+s}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:p}},{className:"punctuation",begin:"->"},i]}}const tee=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),ree=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],nee=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],aee=[...ree,...nee],iee=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),see=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),oee=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),lee=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function cee(e){const t=tee(e),r=oee,n=see,a="@[a-z-]+",i="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+aee.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+n.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+r.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+lee.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,l,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:a,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:iee.join(" ")},contains:[{begin:a,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function uee(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function dee(e){const t=e.regex,r=e.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},a={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],s=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],p=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],b=p,x=[...h,...d].filter(B=>!p.includes(B)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},T={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},k={match:t.concat(/\b/,t.either(...b),/\s*\(/),relevance:0,keywords:{built_in:b}};function C(B){return t.concat(/\b/,t.either(...B.map(R=>R.replace(/\s+/,"\\s+"))),/\b/)}const A={scope:"keyword",match:C(m),relevance:0};function D(B,{exceptions:R,when:M}={}){const $=M;return R=R||[],B.map(W=>W.match(/\|\d+$/)||R.includes(W)?W:$(W)?`${W}|0`:W)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:D(x,{when:B=>B.length<3}),literal:i,type:l,built_in:f},contains:[{scope:"type",match:C(s)},A,k,v,n,a,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,r,T]}}function dR(e){return e?typeof e=="string"?e:e.source:null}function Oh(e){return Qr("(?=",e,")")}function Qr(...e){return e.map(r=>dR(r)).join("")}function hee(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Ua(...e){return"("+(hee(e).capture?"":"?:")+e.map(n=>dR(n)).join("|")+")"}const rS=e=>Qr(/\b/,e,/\w$/.test(e)?/\b/:/\B/),pee=["Protocol","Type"].map(rS),U_=["init","self"].map(rS),gee=["Any","Self"],tv=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],$_=["false","nil","true"],fee=["assignment","associativity","higherThan","left","lowerThan","none","right"],mee=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],q_=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],hR=Ua(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),pR=Ua(hR,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),rv=Qr(hR,pR,"*"),gR=Ua(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),$m=Ua(gR,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),js=Qr(gR,$m,"*"),Uf=Qr(/[A-Z]/,$m,"*"),yee=["attached","autoclosure",Qr(/convention\(/,Ua("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Qr(/objc\(/,js,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],bee=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function xee(e){const t={match:/\s+/,relevance:0},r=e.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[e.C_LINE_COMMENT_MODE,r],a={match:[/\./,Ua(...pee,...U_)],className:{2:"keyword"}},i={match:Qr(/\./,Ua(...tv)),relevance:0},s=tv.filter(Et=>typeof Et=="string").concat(["_|0"]),l=tv.filter(Et=>typeof Et!="string").concat(gee).map(rS),d={variants:[{className:"keyword",match:Ua(...l,...U_)}]},h={$pattern:Ua(/\b\w+/,/#\w+/),keyword:s.concat(mee),literal:$_},p=[a,i,d],f={match:Qr(/\./,Ua(...q_)),relevance:0},m={className:"built_in",match:Qr(/\b/,Ua(...q_),/(?=\()/)},b=[f,m],x={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:rv},{match:`\\.(\\.|${pR})+`}]},T=[x,v],k="([0-9]_*)+",C="([0-9a-fA-F]_*)+",A={className:"number",relevance:0,variants:[{match:`\\b(${k})(\\.(${k}))?([eE][+-]?(${k}))?\\b`},{match:`\\b0x(${C})(\\.(${C}))?([pP][+-]?(${k}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},D=(Et="")=>({className:"subst",variants:[{match:Qr(/\\/,Et,/[0\\tnr"']/)},{match:Qr(/\\/,Et,/u\{[0-9a-fA-F]{1,8}\}/)}]}),B=(Et="")=>({className:"subst",match:Qr(/\\/,Et,/[\t ]*(?:[\r\n]|\r\n)/)}),R=(Et="")=>({className:"subst",label:"interpol",begin:Qr(/\\/,Et,/\(/),end:/\)/}),M=(Et="")=>({begin:Qr(Et,/"""/),end:Qr(/"""/,Et),contains:[D(Et),B(Et),R(Et)]}),$=(Et="")=>({begin:Qr(Et,/"/),end:Qr(/"/,Et),contains:[D(Et),R(Et)]}),W={className:"string",variants:[M(),M("#"),M("##"),M("###"),$(),$("#"),$("##"),$("###")]},O=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],Y={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:O},X=Et=>{const Ar=Qr(Et,/\//),$t=Qr(/\//,Et);return{begin:Ar,end:$t,contains:[...O,{scope:"comment",begin:`#(?!.*${$t})`,end:/$/}]}},q={scope:"regexp",variants:[X("###"),X("##"),X("#"),Y]},N={match:Qr(/`/,js,/`/)},U={className:"variable",match:/\$\d+/},j={className:"variable",match:`\\$${$m}+`},K=[N,U,j],Q={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:bee,contains:[...T,A,W]}]}},ie={scope:"keyword",match:Qr(/@/,Ua(...yee),Oh(Ua(/\(/,/\s+/)))},G={scope:"meta",match:Qr(/@/,js)},F=[Q,ie,G],H={match:Oh(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Qr(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,$m,"+")},{className:"type",match:Uf,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Qr(/\s+&\s+/,Oh(Uf)),relevance:0}]},I={begin:/</,end:/>/,keywords:h,contains:[...n,...p,...F,x,H]};H.contains.push(I);const ne={match:Qr(js,/\s*:/),keywords:"_|0",relevance:0},ue={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",ne,...n,q,...p,...b,...T,A,W,...K,...F,H]},xe={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,H]},ke={begin:Ua(Oh(Qr(js,/\s*:/)),Oh(Qr(js,/\s+/,js,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:js}]},me={begin:/\(/,end:/\)/,keywords:h,contains:[ke,...n,...p,...T,A,W,...F,H,ue],endsParent:!0,illegal:/["']/},Me={match:[/(func|macro)/,/\s+/,Ua(N.match,js,rv)],className:{1:"keyword",3:"title.function"},contains:[xe,me,t],illegal:[/\[/,/%/]},ge={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[xe,me,t],illegal:/\[|%/},Be={match:[/operator/,/\s+/,rv],className:{1:"keyword",3:"title"}},ct={begin:[/precedencegroup/,/\s+/,Uf],className:{1:"keyword",3:"title"},contains:[H],keywords:[...fee,...$_],end:/}/},yt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},tr={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},wr={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,js,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[xe,...p,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:Uf},...p],relevance:0}]};for(const Et of W.variants){const Ar=Et.contains.find(or=>or.label==="interpol");Ar.keywords=h;const $t=[...p,...b,...T,A,W,...K];Ar.contains=[...$t,{begin:/\(/,end:/\)/,contains:["self",...$t]}]}return{name:"Swift",keywords:h,contains:[...n,Me,ge,yt,tr,wr,Be,ct,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},q,...p,...b,...T,A,W,...K,...F,H,ue]}}const qm="[A-Za-z$_][0-9A-Za-z$_]*",fR=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],mR=["true","false","null","undefined","NaN","Infinity"],yR=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bR=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],xR=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],vR=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wR=[].concat(xR,yR,bR);function vee(e){const t=e.regex,r=(Q,{after:ie})=>{const G="</"+Q[0].slice(1);return Q.input.indexOf(G,ie)!==-1},n=qm,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Q,ie)=>{const G=Q[0].length+Q.index,F=Q.input[G];if(F==="<"||F===","){ie.ignoreMatch();return}F===">"&&(r(Q,{after:G})||ie.ignoreMatch());let H;const I=Q.input.substring(G);if(H=I.match(/^\s*=/)){ie.ignoreMatch();return}if((H=I.match(/^\s+extends\s+/))&&H.index===0){ie.ignoreMatch();return}}},l={$pattern:qm,keyword:fR,literal:mR,built_in:wR,"variable.language":vR},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},T={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,m]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},A=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,{match:/\$\d+/},f];m.contains=A.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(A)});const D=[].concat(C,m.contains),B=D.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(D)}]),R={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B},M={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},$={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...yR,...bR]}},W={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},O={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[R],illegal:/%/},Y={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(Q){return t.concat("(?!",Q.join("|"),")")}const q={match:t.concat(/\b/,X([...xR,"super","import"].map(Q=>`${Q}\\s*\\(`)),n,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},N={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},U={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},R]},j="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",K={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(j)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[R]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:B,CLASS_REFERENCE:$},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),W,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,T,C,{match:/\$\d+/},f,$,{scope:"attr",match:n+t.lookahead(":"),relevance:0},K,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:j,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:B}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},O,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[R,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},N,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[R]},q,Y,M,U,{match:/\$[(.]/}]}}function wee(e){const t=e.regex,r=vee(e),n=qm,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},s={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[r.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:qm,keyword:fR.concat(d),literal:mR,built_in:wR.concat(a),"variable.language":vR},p={className:"meta",begin:"@"+n},f=(v,T,k)=>{const C=v.contains.findIndex(A=>A.label===T);if(C===-1)throw new Error("can not find mode to replace");v.contains.splice(C,1,k)};Object.assign(r.keywords,h),r.exports.PARAMS_CONTAINS.push(p);const m=r.contains.find(v=>v.scope==="attr"),b=Object.assign({},m,{match:t.concat(n,t.lookahead(/\s*\?:/))});r.exports.PARAMS_CONTAINS.push([r.exports.CLASS_REFERENCE,m,b]),r.contains=r.contains.concat([p,i,s,b]),f(r,"shebang",e.SHEBANG()),f(r,"use_strict",l);const x=r.contains.find(v=>v.label==="func.def");return x.relevance=0,Object.assign(r,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),r}function See(e){const t=e.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,s=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,a),/ *#/)},{begin:t.concat(/# */,l,/ *#/)},{begin:t.concat(/# */,s,/ *#/)},{begin:t.concat(/# */,t.either(i,a),/ +/,t.either(s,l),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},p={className:"label",begin:/^\w+:/},f=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,n,d,h,p,f,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function Tee(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const r=e.COMMENT(/;;/,/$/),n=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},s={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:n},contains:[r,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,s,a,e.QUOTE_STRING_MODE,d,h,l]}}function kee(e){const t=e.regex,r=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=e.inherit(i,{begin:/\(/,end:/\)/}),l=e.inherit(e.APOS_STRING_MODE,{className:"string"}),d=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,d,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,s,d,l]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(r,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:h}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function Eee(e){const t="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},s={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,a]},l=e.inherit(s,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},b={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},x={begin:/\{/,end:/\}/,contains:[b],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[b],illegal:"\\n",relevance:0},T=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},m,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},x,v,i,s],k=[...T];return k.pop(),k.push(l),b.contains=k,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:T}}const Cee={arduino:oZ,bash:lZ,c:cZ,cpp:uZ,csharp:dZ,css:vZ,diff:wZ,go:SZ,graphql:TZ,ini:kZ,java:EZ,javascript:LZ,json:PZ,kotlin:IZ,less:UZ,lua:$Z,makefile:qZ,markdown:HZ,objectivec:GZ,perl:WZ,php:VZ,"php-template":YZ,plaintext:QZ,python:KZ,"python-repl":XZ,r:JZ,ruby:ZZ,rust:eee,scss:cee,shell:uee,sql:dee,swift:xee,typescript:wee,vbnet:See,wasm:Tee,xml:kee,yaml:Eee};var nv,H_;function _ee(){if(H_)return nv;H_=1;function e(le){return le instanceof Map?le.clear=le.delete=le.set=function(){throw new Error("map is read-only")}:le instanceof Set&&(le.add=le.clear=le.delete=function(){throw new Error("set is read-only")}),Object.freeze(le),Object.getOwnPropertyNames(le).forEach(Pe=>{const He=le[Pe],Ct=typeof He;(Ct==="object"||Ct==="function")&&!Object.isFrozen(He)&&e(He)}),le}class t{constructor(Pe){Pe.data===void 0&&(Pe.data={}),this.data=Pe.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(le){return le.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(le,...Pe){const He=Object.create(null);for(const Ct in le)He[Ct]=le[Ct];return Pe.forEach(function(Ct){for(const Tr in Ct)He[Tr]=Ct[Tr]}),He}const a="</span>",i=le=>!!le.scope,s=(le,{prefix:Pe})=>{if(le.startsWith("language:"))return le.replace("language:","language-");if(le.includes(".")){const He=le.split(".");return[`${Pe}${He.shift()}`,...He.map((Ct,Tr)=>`${Ct}${"_".repeat(Tr+1)}`)].join(" ")}return`${Pe}${le}`};class l{constructor(Pe,He){this.buffer="",this.classPrefix=He.classPrefix,Pe.walk(this)}addText(Pe){this.buffer+=r(Pe)}openNode(Pe){if(!i(Pe))return;const He=s(Pe.scope,{prefix:this.classPrefix});this.span(He)}closeNode(Pe){i(Pe)&&(this.buffer+=a)}value(){return this.buffer}span(Pe){this.buffer+=`<span class="${Pe}">`}}const d=(le={})=>{const Pe={children:[]};return Object.assign(Pe,le),Pe};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Pe){this.top.children.push(Pe)}openNode(Pe){const He=d({scope:Pe});this.add(He),this.stack.push(He)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Pe){return this.constructor._walk(Pe,this.rootNode)}static _walk(Pe,He){return typeof He=="string"?Pe.addText(He):He.children&&(Pe.openNode(He),He.children.forEach(Ct=>this._walk(Pe,Ct)),Pe.closeNode(He)),Pe}static _collapse(Pe){typeof Pe!="string"&&Pe.children&&(Pe.children.every(He=>typeof He=="string")?Pe.children=[Pe.children.join("")]:Pe.children.forEach(He=>{h._collapse(He)}))}}class p extends h{constructor(Pe){super(),this.options=Pe}addText(Pe){Pe!==""&&this.add(Pe)}startScope(Pe){this.openNode(Pe)}endScope(){this.closeNode()}__addSublanguage(Pe,He){const Ct=Pe.root;He&&(Ct.scope=`language:${He}`),this.add(Ct)}toHTML(){return new l(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(le){return le?typeof le=="string"?le:le.source:null}function m(le){return v("(?=",le,")")}function b(le){return v("(?:",le,")*")}function x(le){return v("(?:",le,")?")}function v(...le){return le.map(He=>f(He)).join("")}function T(le){const Pe=le[le.length-1];return typeof Pe=="object"&&Pe.constructor===Object?(le.splice(le.length-1,1),Pe):{}}function k(...le){return"("+(T(le).capture?"":"?:")+le.map(Ct=>f(Ct)).join("|")+")"}function C(le){return new RegExp(le.toString()+"|").exec("").length-1}function A(le,Pe){const He=le&&le.exec(Pe);return He&&He.index===0}const D=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function B(le,{joinWith:Pe}){let He=0;return le.map(Ct=>{He+=1;const Tr=He;let Lr=f(Ct),ot="";for(;Lr.length>0;){const st=D.exec(Lr);if(!st){ot+=Lr;break}ot+=Lr.substring(0,st.index),Lr=Lr.substring(st.index+st[0].length),st[0][0]==="\\"&&st[1]?ot+="\\"+String(Number(st[1])+Tr):(ot+=st[0],st[0]==="("&&He++)}return ot}).map(Ct=>`(${Ct})`).join(Pe)}const R=/\b\B/,M="[a-zA-Z]\\w*",$="[a-zA-Z_]\\w*",W="\\b\\d+(\\.\\d+)?",O="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Y="\\b(0b[01]+)",X="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",q=(le={})=>{const Pe=/^#![ ]*\//;return le.binary&&(le.begin=v(Pe,/.*\b/,le.binary,/\b.*/)),n({scope:"meta",begin:Pe,end:/$/,relevance:0,"on:begin":(He,Ct)=>{He.index!==0&&Ct.ignoreMatch()}},le)},N={begin:"\\\\[\\s\\S]",relevance:0},U={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[N]},j={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[N]},K={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Q=function(le,Pe,He={}){const Ct=n({scope:"comment",begin:le,end:Pe,contains:[]},He);Ct.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Tr=k("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ct.contains.push({begin:v(/[ ]+/,"(",Tr,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ct},ie=Q("//","$"),G=Q("/\\*","\\*/"),F=Q("#","$"),H={scope:"number",begin:W,relevance:0},I={scope:"number",begin:O,relevance:0},ne={scope:"number",begin:Y,relevance:0},ue={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[N,{begin:/\[/,end:/\]/,relevance:0,contains:[N]}]},xe={scope:"title",begin:M,relevance:0},ke={scope:"title",begin:$,relevance:0},me={begin:"\\.\\s*"+$,relevance:0};var ge=Object.freeze({__proto__:null,APOS_STRING_MODE:U,BACKSLASH_ESCAPE:N,BINARY_NUMBER_MODE:ne,BINARY_NUMBER_RE:Y,COMMENT:Q,C_BLOCK_COMMENT_MODE:G,C_LINE_COMMENT_MODE:ie,C_NUMBER_MODE:I,C_NUMBER_RE:O,END_SAME_AS_BEGIN:function(le){return Object.assign(le,{"on:begin":(Pe,He)=>{He.data._beginMatch=Pe[1]},"on:end":(Pe,He)=>{He.data._beginMatch!==Pe[1]&&He.ignoreMatch()}})},HASH_COMMENT_MODE:F,IDENT_RE:M,MATCH_NOTHING_RE:R,METHOD_GUARD:me,NUMBER_MODE:H,NUMBER_RE:W,PHRASAL_WORDS_MODE:K,QUOTE_STRING_MODE:j,REGEXP_MODE:ue,RE_STARTERS_RE:X,SHEBANG:q,TITLE_MODE:xe,UNDERSCORE_IDENT_RE:$,UNDERSCORE_TITLE_MODE:ke});function Be(le,Pe){le.input[le.index-1]==="."&&Pe.ignoreMatch()}function ct(le,Pe){le.className!==void 0&&(le.scope=le.className,delete le.className)}function yt(le,Pe){Pe&&le.beginKeywords&&(le.begin="\\b("+le.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",le.__beforeBegin=Be,le.keywords=le.keywords||le.beginKeywords,delete le.beginKeywords,le.relevance===void 0&&(le.relevance=0))}function tr(le,Pe){Array.isArray(le.illegal)&&(le.illegal=k(...le.illegal))}function wr(le,Pe){if(le.match){if(le.begin||le.end)throw new Error("begin & end are not supported with match");le.begin=le.match,delete le.match}}function Et(le,Pe){le.relevance===void 0&&(le.relevance=1)}const Ar=(le,Pe)=>{if(!le.beforeMatch)return;if(le.starts)throw new Error("beforeMatch cannot be used with starts");const He=Object.assign({},le);Object.keys(le).forEach(Ct=>{delete le[Ct]}),le.keywords=He.keywords,le.begin=v(He.beforeMatch,m(He.begin)),le.starts={relevance:0,contains:[Object.assign(He,{endsParent:!0})]},le.relevance=0,delete He.beforeMatch},$t=["of","and","for","in","not","or","if","then","parent","list","value"],or="keyword";function bt(le,Pe,He=or){const Ct=Object.create(null);return typeof le=="string"?Tr(He,le.split(" ")):Array.isArray(le)?Tr(He,le):Object.keys(le).forEach(function(Lr){Object.assign(Ct,bt(le[Lr],Pe,Lr))}),Ct;function Tr(Lr,ot){Pe&&(ot=ot.map(st=>st.toLowerCase())),ot.forEach(function(st){const Nt=st.split("|");Ct[Nt[0]]=[Lr,It(Nt[0],Nt[1])]})}}function It(le,Pe){return Pe?Number(Pe):mn(le)?0:1}function mn(le){return $t.includes(le.toLowerCase())}const Jt={},Ut=le=>{console.error(le)},yn=(le,...Pe)=>{console.log(`WARN: ${le}`,...Pe)},ae=(le,Pe)=>{Jt[`${le}/${Pe}`]||(console.log(`Deprecated as of ${le}. ${Pe}`),Jt[`${le}/${Pe}`]=!0)},Ce=new Error;function rt(le,Pe,{key:He}){let Ct=0;const Tr=le[He],Lr={},ot={};for(let st=1;st<=Pe.length;st++)ot[st+Ct]=Tr[st],Lr[st+Ct]=!0,Ct+=C(Pe[st-1]);le[He]=ot,le[He]._emit=Lr,le[He]._multi=!0}function Qe(le){if(Array.isArray(le.begin)){if(le.skip||le.excludeBegin||le.returnBegin)throw Ut("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ce;if(typeof le.beginScope!="object"||le.beginScope===null)throw Ut("beginScope must be object"),Ce;rt(le,le.begin,{key:"beginScope"}),le.begin=B(le.begin,{joinWith:""})}}function dt(le){if(Array.isArray(le.end)){if(le.skip||le.excludeEnd||le.returnEnd)throw Ut("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ce;if(typeof le.endScope!="object"||le.endScope===null)throw Ut("endScope must be object"),Ce;rt(le,le.end,{key:"endScope"}),le.end=B(le.end,{joinWith:""})}}function nr(le){le.scope&&typeof le.scope=="object"&&le.scope!==null&&(le.beginScope=le.scope,delete le.scope)}function un(le){nr(le),typeof le.beginScope=="string"&&(le.beginScope={_wrap:le.beginScope}),typeof le.endScope=="string"&&(le.endScope={_wrap:le.endScope}),Qe(le),dt(le)}function br(le){function Pe(ot,st){return new RegExp(f(ot),"m"+(le.case_insensitive?"i":"")+(le.unicodeRegex?"u":"")+(st?"g":""))}class He{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(st,Nt){Nt.position=this.position++,this.matchIndexes[this.matchAt]=Nt,this.regexes.push([Nt,st]),this.matchAt+=C(st)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const st=this.regexes.map(Nt=>Nt[1]);this.matcherRe=Pe(B(st,{joinWith:"|"}),!0),this.lastIndex=0}exec(st){this.matcherRe.lastIndex=this.lastIndex;const Nt=this.matcherRe.exec(st);if(!Nt)return null;const Hr=Nt.findIndex((Mn,hi)=>hi>0&&Mn!==void 0),rr=this.matchIndexes[Hr];return Nt.splice(0,Hr),Object.assign(Nt,rr)}}class Ct{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(st){if(this.multiRegexes[st])return this.multiRegexes[st];const Nt=new He;return this.rules.slice(st).forEach(([Hr,rr])=>Nt.addRule(Hr,rr)),Nt.compile(),this.multiRegexes[st]=Nt,Nt}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(st,Nt){this.rules.push([st,Nt]),Nt.type==="begin"&&this.count++}exec(st){const Nt=this.getMatcher(this.regexIndex);Nt.lastIndex=this.lastIndex;let Hr=Nt.exec(st);if(this.resumingScanAtSamePosition()&&!(Hr&&Hr.index===this.lastIndex)){const rr=this.getMatcher(0);rr.lastIndex=this.lastIndex+1,Hr=rr.exec(st)}return Hr&&(this.regexIndex+=Hr.position+1,this.regexIndex===this.count&&this.considerAll()),Hr}}function Tr(ot){const st=new Ct;return ot.contains.forEach(Nt=>st.addRule(Nt.begin,{rule:Nt,type:"begin"})),ot.terminatorEnd&&st.addRule(ot.terminatorEnd,{type:"end"}),ot.illegal&&st.addRule(ot.illegal,{type:"illegal"}),st}function Lr(ot,st){const Nt=ot;if(ot.isCompiled)return Nt;[ct,wr,un,Ar].forEach(rr=>rr(ot,st)),le.compilerExtensions.forEach(rr=>rr(ot,st)),ot.__beforeBegin=null,[yt,tr,Et].forEach(rr=>rr(ot,st)),ot.isCompiled=!0;let Hr=null;return typeof ot.keywords=="object"&&ot.keywords.$pattern&&(ot.keywords=Object.assign({},ot.keywords),Hr=ot.keywords.$pattern,delete ot.keywords.$pattern),Hr=Hr||/\w+/,ot.keywords&&(ot.keywords=bt(ot.keywords,le.case_insensitive)),Nt.keywordPatternRe=Pe(Hr,!0),st&&(ot.begin||(ot.begin=/\B|\b/),Nt.beginRe=Pe(Nt.begin),!ot.end&&!ot.endsWithParent&&(ot.end=/\B|\b/),ot.end&&(Nt.endRe=Pe(Nt.end)),Nt.terminatorEnd=f(Nt.end)||"",ot.endsWithParent&&st.terminatorEnd&&(Nt.terminatorEnd+=(ot.end?"|":"")+st.terminatorEnd)),ot.illegal&&(Nt.illegalRe=Pe(ot.illegal)),ot.contains||(ot.contains=[]),ot.contains=[].concat(...ot.contains.map(function(rr){return Mr(rr==="self"?ot:rr)})),ot.contains.forEach(function(rr){Lr(rr,Nt)}),ot.starts&&Lr(ot.starts,st),Nt.matcher=Tr(Nt),Nt}if(le.compilerExtensions||(le.compilerExtensions=[]),le.contains&&le.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return le.classNameAliases=n(le.classNameAliases||{}),Lr(le)}function Sr(le){return le?le.endsWithParent||Sr(le.starts):!1}function Mr(le){return le.variants&&!le.cachedVariants&&(le.cachedVariants=le.variants.map(function(Pe){return n(le,{variants:null},Pe)})),le.cachedVariants?le.cachedVariants:Sr(le)?n(le,{starts:le.starts?n(le.starts):null}):Object.isFrozen(le)?n(le):le}var ar="11.11.1";class Jn extends Error{constructor(Pe,He){super(Pe),this.name="HTMLInjectionError",this.html=He}}const Kr=r,Pi=n,ia=Symbol("nomatch"),Oa=7,di=function(le){const Pe=Object.create(null),He=Object.create(null),Ct=[];let Tr=!0;const Lr="Could not find the language '{}', did you forget to load/include a language module?",ot={disableAutodetect:!0,name:"Plain text",contains:[]};let st={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function Nt($e){return st.noHighlightRe.test($e)}function Hr($e){let nt=$e.className+" ";nt+=$e.parentNode?$e.parentNode.className:"";const Yt=st.languageDetectRe.exec(nt);if(Yt){const xr=ze(Yt[1]);return xr||(yn(Lr.replace("{}",Yt[1])),yn("Falling back to no-highlight mode for this block.",$e)),xr?Yt[1]:"no-highlight"}return nt.split(/\s+/).find(xr=>Nt(xr)||ze(xr))}function rr($e,nt,Yt){let xr="",dn="";typeof nt=="object"?(xr=$e,Yt=nt.ignoreIllegals,dn=nt.language):(ae("10.7.0","highlight(lang, code, ...args) has been deprecated."),ae("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),dn=$e,xr=nt),Yt===void 0&&(Yt=!0);const xn={code:xr,language:dn};Hn("before:highlight",xn);const oa=xn.result?xn.result:Mn(xn.language,xn.code,Yt);return oa.code=xn.code,Hn("after:highlight",oa),oa}function Mn($e,nt,Yt,xr){const dn=Object.create(null);function xn(tt,gt){return tt.keywords[gt]}function oa(){if(!Dt.keywords){Jr.addText(kr);return}let tt=0;Dt.keywordPatternRe.lastIndex=0;let gt=Dt.keywordPatternRe.exec(kr),Lt="";for(;gt;){Lt+=kr.substring(tt,gt.index);const Ht=vn.case_insensitive?gt[0].toLowerCase():gt[0],an=xn(Dt,Ht);if(an){const[Ya,Fo]=an;if(Jr.addText(Lt),Lt="",dn[Ht]=(dn[Ht]||0)+1,dn[Ht]<=Oa&&(os+=Fo),Ya.startsWith("_"))Lt+=gt[0];else{const Dl=vn.classNameAliases[Ya]||Ya;xa(gt[0],Dl)}}else Lt+=gt[0];tt=Dt.keywordPatternRe.lastIndex,gt=Dt.keywordPatternRe.exec(kr)}Lt+=kr.substring(tt),Jr.addText(Lt)}function ba(){if(kr==="")return;let tt=null;if(typeof Dt.subLanguage=="string"){if(!Pe[Dt.subLanguage]){Jr.addText(kr);return}tt=Mn(Dt.subLanguage,kr,!0,Wc[Dt.subLanguage]),Wc[Dt.subLanguage]=tt._top}else tt=pi(kr,Dt.subLanguage.length?Dt.subLanguage:null);Dt.relevance>0&&(os+=tt.relevance),Jr.__addSublanguage(tt._emitter,tt.language)}function jr(){Dt.subLanguage!=null?ba():oa(),kr=""}function xa(tt,gt){tt!==""&&(Jr.startScope(gt),Jr.addText(tt),Jr.endScope())}function jo(tt,gt){let Lt=1;const Ht=gt.length-1;for(;Lt<=Ht;){if(!tt._emit[Lt]){Lt++;continue}const an=vn.classNameAliases[tt[Lt]]||tt[Lt],Ya=gt[Lt];an?xa(Ya,an):(kr=Ya,oa(),kr=""),Lt++}}function Nn(tt,gt){return tt.scope&&typeof tt.scope=="string"&&Jr.openNode(vn.classNameAliases[tt.scope]||tt.scope),tt.beginScope&&(tt.beginScope._wrap?(xa(kr,vn.classNameAliases[tt.beginScope._wrap]||tt.beginScope._wrap),kr=""):tt.beginScope._multi&&(jo(tt.beginScope,gt),kr="")),Dt=Object.create(tt,{parent:{value:Dt}}),Dt}function _s(tt,gt,Lt){let Ht=A(tt.endRe,Lt);if(Ht){if(tt["on:end"]){const an=new t(tt);tt["on:end"](gt,an),an.isMatchIgnored&&(Ht=!1)}if(Ht){for(;tt.endsParent&&tt.parent;)tt=tt.parent;return tt}}if(tt.endsWithParent)return _s(tt.parent,gt,Lt)}function to(tt){return Dt.matcher.regexIndex===0?(kr+=tt[0],1):(gi=!0,0)}function ro(tt){const gt=tt[0],Lt=tt.rule,Ht=new t(Lt),an=[Lt.__beforeBegin,Lt["on:begin"]];for(const Ya of an)if(Ya&&(Ya(tt,Ht),Ht.isMatchIgnored))return to(gt);return Lt.skip?kr+=gt:(Lt.excludeBegin&&(kr+=gt),jr(),!Lt.returnBegin&&!Lt.excludeBegin&&(kr=gt)),Nn(Lt,tt),Lt.returnBegin?0:gt.length}function la(tt){const gt=tt[0],Lt=nt.substring(tt.index),Ht=_s(Dt,tt,Lt);if(!Ht)return ia;const an=Dt;Dt.endScope&&Dt.endScope._wrap?(jr(),xa(gt,Dt.endScope._wrap)):Dt.endScope&&Dt.endScope._multi?(jr(),jo(Dt.endScope,tt)):an.skip?kr+=gt:(an.returnEnd||an.excludeEnd||(kr+=gt),jr(),an.excludeEnd&&(kr=gt));do Dt.scope&&Jr.closeNode(),!Dt.skip&&!Dt.subLanguage&&(os+=Dt.relevance),Dt=Dt.parent;while(Dt!==Ht.parent);return Ht.starts&&Nn(Ht.starts,tt),an.returnEnd?0:gt.length}function As(){const tt=[];for(let gt=Dt;gt!==vn;gt=gt.parent)gt.scope&&tt.unshift(gt.scope);tt.forEach(gt=>Jr.openNode(gt))}let no={};function ss(tt,gt){const Lt=gt&&gt[0];if(kr+=tt,Lt==null)return jr(),0;if(no.type==="begin"&&gt.type==="end"&&no.index===gt.index&&Lt===""){if(kr+=nt.slice(gt.index,gt.index+1),!Tr){const Ht=new Error(`0 width match regex (${$e})`);throw Ht.languageName=$e,Ht.badRule=no.rule,Ht}return 1}if(no=gt,gt.type==="begin")return ro(gt);if(gt.type==="illegal"&&!Yt){const Ht=new Error('Illegal lexeme "'+Lt+'" for mode "'+(Dt.scope||"<unnamed>")+'"');throw Ht.mode=Dt,Ht}else if(gt.type==="end"){const Ht=la(gt);if(Ht!==ia)return Ht}if(gt.type==="illegal"&&Lt==="")return kr+=`
`,1;if(Bo>1e5&&Bo>gt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return kr+=Lt,Lt.length}const vn=ze($e);if(!vn)throw Ut(Lr.replace("{}",$e)),new Error('Unknown language: "'+$e+'"');const Gc=br(vn);let ao="",Dt=xr||Gc;const Wc={},Jr=new st.__emitter(st);As();let kr="",os=0,ls=0,Bo=0,gi=!1;try{if(vn.__emitTokens)vn.__emitTokens(nt,Jr);else{for(Dt.matcher.considerAll();;){Bo++,gi?gi=!1:Dt.matcher.considerAll(),Dt.matcher.lastIndex=ls;const tt=Dt.matcher.exec(nt);if(!tt)break;const gt=nt.substring(ls,tt.index),Lt=ss(gt,tt);ls=tt.index+Lt}ss(nt.substring(ls))}return Jr.finalize(),ao=Jr.toHTML(),{language:$e,value:ao,relevance:os,illegal:!1,_emitter:Jr,_top:Dt}}catch(tt){if(tt.message&&tt.message.includes("Illegal"))return{language:$e,value:Kr(nt),illegal:!0,relevance:0,_illegalBy:{message:tt.message,index:ls,context:nt.slice(ls-100,ls+100),mode:tt.mode,resultSoFar:ao},_emitter:Jr};if(Tr)return{language:$e,value:Kr(nt),illegal:!1,relevance:0,errorRaised:tt,_emitter:Jr,_top:Dt};throw tt}}function hi($e){const nt={value:Kr($e),illegal:!1,relevance:0,_top:ot,_emitter:new st.__emitter(st)};return nt._emitter.addText($e),nt}function pi($e,nt){nt=nt||st.languages||Object.keys(Pe);const Yt=hi($e),xr=nt.filter(ze).filter(lr).map(jr=>Mn(jr,$e,!1));xr.unshift(Yt);const dn=xr.sort((jr,xa)=>{if(jr.relevance!==xa.relevance)return xa.relevance-jr.relevance;if(jr.language&&xa.language){if(ze(jr.language).supersetOf===xa.language)return 1;if(ze(xa.language).supersetOf===jr.language)return-1}return 0}),[xn,oa]=dn,ba=xn;return ba.secondBest=oa,ba}function sa($e,nt,Yt){const xr=nt&&He[nt]||Yt;$e.classList.add("hljs"),$e.classList.add(`language-${xr}`)}function ut($e){let nt=null;const Yt=Hr($e);if(Nt(Yt))return;if(Hn("before:highlightElement",{el:$e,language:Yt}),$e.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",$e);return}if($e.children.length>0&&(st.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn($e)),st.throwUnescapedHTML))throw new Jn("One of your code blocks includes unescaped HTML.",$e.innerHTML);nt=$e;const xr=nt.textContent,dn=Yt?rr(xr,{language:Yt,ignoreIllegals:!0}):pi(xr);$e.innerHTML=dn.value,$e.dataset.highlighted="yes",sa($e,Yt,dn.language),$e.result={language:dn.language,re:dn.relevance,relevance:dn.relevance},dn.secondBest&&($e.secondBest={language:dn.secondBest.language,relevance:dn.secondBest.relevance}),Hn("after:highlightElement",{el:$e,result:dn,text:xr})}function Or($e){st=Pi(st,$e)}const Zn=()=>{ja(),ae("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ri(){ja(),ae("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let as=!1;function ja(){function $e(){ja()}if(document.readyState==="loading"){as||window.addEventListener("DOMContentLoaded",$e,!1),as=!0;return}document.querySelectorAll(st.cssSelector).forEach(ut)}function is($e,nt){let Yt=null;try{Yt=nt(le)}catch(xr){if(Ut("Language definition for '{}' could not be registered.".replace("{}",$e)),Tr)Ut(xr);else throw xr;Yt=ot}Yt.name||(Yt.name=$e),Pe[$e]=Yt,Yt.rawDefinition=nt.bind(null,le),Yt.aliases&&it(Yt.aliases,{languageName:$e})}function ht($e){delete Pe[$e];for(const nt of Object.keys(He))He[nt]===$e&&delete He[nt]}function ce(){return Object.keys(Pe)}function ze($e){return $e=($e||"").toLowerCase(),Pe[$e]||Pe[He[$e]]}function it($e,{languageName:nt}){typeof $e=="string"&&($e=[$e]),$e.forEach(Yt=>{He[Yt.toLowerCase()]=nt})}function lr($e){const nt=ze($e);return nt&&!nt.disableAutodetect}function Xr($e){$e["before:highlightBlock"]&&!$e["before:highlightElement"]&&($e["before:highlightElement"]=nt=>{$e["before:highlightBlock"](Object.assign({block:nt.el},nt))}),$e["after:highlightBlock"]&&!$e["after:highlightElement"]&&($e["after:highlightElement"]=nt=>{$e["after:highlightBlock"](Object.assign({block:nt.el},nt))})}function Vt($e){Xr($e),Ct.push($e)}function Tn($e){const nt=Ct.indexOf($e);nt!==-1&&Ct.splice(nt,1)}function Hn($e,nt){const Yt=$e;Ct.forEach(function(xr){xr[Yt]&&xr[Yt](nt)})}function ea($e){return ae("10.7.0","highlightBlock will be removed entirely in v12.0"),ae("10.7.0","Please use highlightElement now."),ut($e)}Object.assign(le,{highlight:rr,highlightAuto:pi,highlightAll:ja,highlightElement:ut,highlightBlock:ea,configure:Or,initHighlighting:Zn,initHighlightingOnLoad:Ri,registerLanguage:is,unregisterLanguage:ht,listLanguages:ce,getLanguage:ze,registerAliases:it,autoDetection:lr,inherit:Pi,addPlugin:Vt,removePlugin:Tn}),le.debugMode=function(){Tr=!1},le.safeMode=function(){Tr=!0},le.versionString=ar,le.regex={concat:v,lookahead:m,either:k,optional:x,anyNumberOfTimes:b};for(const $e in ge)typeof ge[$e]=="object"&&e(ge[$e]);return Object.assign(le,ge),le},bn=di({});return bn.newInstance=()=>di({}),nv=bn,bn.HighlightJS=bn,bn.default=bn,nv}var Aee=_ee();const Nee=Rc(Aee),G_={},Lee="hljs-";function Pee(e){const t=Nee.newInstance();return e&&i(e),{highlight:r,highlightAuto:n,listLanguages:a,register:i,registerAlias:s,registered:l};function r(d,h,p){const f=p||G_,m=typeof f.prefix=="string"?f.prefix:Lee;if(!t.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");t.configure({__emitter:Ree,classPrefix:m});const b=t.highlight(h,{ignoreIllegals:!0,language:d});if(b.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:b.errorRaised});const x=b._emitter.root,v=x.data;return v.language=b.language,v.relevance=b.relevance,x}function n(d,h){const f=(h||G_).subset||a();let m=-1,b=0,x;for(;++m<f.length;){const v=f[m];if(!t.getLanguage(v))continue;const T=r(v,d,h);T.data&&T.data.relevance!==void 0&&T.data.relevance>b&&(b=T.data.relevance,x=T)}return x||{type:"root",children:[],data:{language:void 0,relevance:b}}}function a(){return t.listLanguages()}function i(d,h){if(typeof d=="string")t.registerLanguage(d,h);else{let p;for(p in d)Object.hasOwn(d,p)&&t.registerLanguage(p,d[p])}}function s(d,h){if(typeof d=="string")t.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let p;for(p in d)if(Object.hasOwn(d,p)){const f=d[p];t.registerAliases(typeof f=="string"?f:[...f],{languageName:p})}}}function l(d){return!!t.getLanguage(d)}}class Ree{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const r=this.stack[this.stack.length-1],n=r.children[r.children.length-1];n&&n.type==="text"?n.value+=t:r.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,r){const n=this.stack[this.stack.length-1],a=t.root.children;r?n.children.push({type:"element",tagName:"span",properties:{className:[r]},children:a}):n.children.push(...a)}openNode(t){const r=this,n=t.split(".").map(function(s,l){return l?s+"_".repeat(l):r.options.classPrefix+s}),a=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:n},children:[]};a.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const Iee={};function Dee(e){const t=e||Iee,r=t.aliases,n=t.detect||!1,a=t.languages||Cee,i=t.plainText,s=t.prefix,l=t.subset;let d="hljs";const h=Pee(a);if(r&&h.registerAlias(r),s){const p=s.indexOf("-");d=p===-1?s:s.slice(0,p)}return function(p,f){rg(p,"element",function(m,b,x){if(m.tagName!=="code"||!x||x.type!=="element"||x.tagName!=="pre")return;const v=Mee(m);if(v===!1||!v&&!n||v&&i&&i.includes(v))return;Array.isArray(m.properties.className)||(m.properties.className=[]),m.properties.className.includes(d)||m.properties.className.unshift(d);const T=ZJ(m,{whitespace:"pre"});let k;try{k=v?h.highlight(v,T,{prefix:s}):h.highlightAuto(T,{prefix:s,subset:l})}catch(C){const A=C;if(v&&/Unknown language/.test(A.message)){f.message("Cannot highlight as `"+v+"`, its not registered",{ancestors:[x,m],cause:A,place:m.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw A}!v&&k.data&&k.data.language&&m.properties.className.push("language-"+k.data.language),k.children.length>0&&(m.children=k.children)})}}function Mee(e){const t=e.properties.className;let r=-1;if(!Array.isArray(t))return;let n;for(;++r<t.length;){const a=String(t[r]);if(a==="no-highlight"||a==="nohighlight")return!1;!n&&a.slice(0,5)==="lang-"&&(n=a.slice(5)),!n&&a.slice(0,9)==="language-"&&(n=a.slice(9))}return n}var W_={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},dm={exports:{}},Oee=dm.exports,V_;function jee(){return V_||(V_=1,(function(e,t){(function(r,n){e.exports=n()})(Oee,(function(){var r=1e3,n=6e4,a=36e5,i="millisecond",s="second",l="minute",d="hour",h="day",p="week",f="month",m="quarter",b="year",x="date",v="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var U=["th","st","nd","rd"],j=N%100;return"["+N+(U[(j-20)%10]||U[j]||U[0])+"]"}},A=function(N,U,j){var K=String(N);return!K||K.length>=U?N:""+Array(U+1-K.length).join(j)+N},D={s:A,z:function(N){var U=-N.utcOffset(),j=Math.abs(U),K=Math.floor(j/60),Q=j%60;return(U<=0?"+":"-")+A(K,2,"0")+":"+A(Q,2,"0")},m:function N(U,j){if(U.date()<j.date())return-N(j,U);var K=12*(j.year()-U.year())+(j.month()-U.month()),Q=U.clone().add(K,f),ie=j-Q<0,G=U.clone().add(K+(ie?-1:1),f);return+(-(K+(j-Q)/(ie?Q-G:G-Q))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:f,y:b,w:p,d:h,D:x,h:d,m:l,s,ms:i,Q:m}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},B="en",R={};R[B]=C;var M="$isDayjsObject",$=function(N){return N instanceof X||!(!N||!N[M])},W=function N(U,j,K){var Q;if(!U)return B;if(typeof U=="string"){var ie=U.toLowerCase();R[ie]&&(Q=ie),j&&(R[ie]=j,Q=ie);var G=U.split("-");if(!Q&&G.length>1)return N(G[0])}else{var F=U.name;R[F]=U,Q=F}return!K&&Q&&(B=Q),Q||!K&&B},O=function(N,U){if($(N))return N.clone();var j=typeof U=="object"?U:{};return j.date=N,j.args=arguments,new X(j)},Y=D;Y.l=W,Y.i=$,Y.w=function(N,U){return O(N,{locale:U.$L,utc:U.$u,x:U.$x,$offset:U.$offset})};var X=(function(){function N(j){this.$L=W(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[M]=!0}var U=N.prototype;return U.parse=function(j){this.$d=(function(K){var Q=K.date,ie=K.utc;if(Q===null)return new Date(NaN);if(Y.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var G=Q.match(T);if(G){var F=G[2]-1||0,H=(G[7]||"0").substring(0,3);return ie?new Date(Date.UTC(G[1],F,G[3]||1,G[4]||0,G[5]||0,G[6]||0,H)):new Date(G[1],F,G[3]||1,G[4]||0,G[5]||0,G[6]||0,H)}}return new Date(Q)})(j),this.init()},U.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},U.$utils=function(){return Y},U.isValid=function(){return this.$d.toString()!==v},U.isSame=function(j,K){var Q=O(j);return this.startOf(K)<=Q&&Q<=this.endOf(K)},U.isAfter=function(j,K){return O(j)<this.startOf(K)},U.isBefore=function(j,K){return this.endOf(K)<O(j)},U.$g=function(j,K,Q){return Y.u(j)?this[K]:this.set(Q,j)},U.unix=function(){return Math.floor(this.valueOf()/1e3)},U.valueOf=function(){return this.$d.getTime()},U.startOf=function(j,K){var Q=this,ie=!!Y.u(K)||K,G=Y.p(j),F=function(Me,ge){var Be=Y.w(Q.$u?Date.UTC(Q.$y,ge,Me):new Date(Q.$y,ge,Me),Q);return ie?Be:Be.endOf(h)},H=function(Me,ge){return Y.w(Q.toDate()[Me].apply(Q.toDate("s"),(ie?[0,0,0,0]:[23,59,59,999]).slice(ge)),Q)},I=this.$W,ne=this.$M,ue=this.$D,xe="set"+(this.$u?"UTC":"");switch(G){case b:return ie?F(1,0):F(31,11);case f:return ie?F(1,ne):F(0,ne+1);case p:var ke=this.$locale().weekStart||0,me=(I<ke?I+7:I)-ke;return F(ie?ue-me:ue+(6-me),ne);case h:case x:return H(xe+"Hours",0);case d:return H(xe+"Minutes",1);case l:return H(xe+"Seconds",2);case s:return H(xe+"Milliseconds",3);default:return this.clone()}},U.endOf=function(j){return this.startOf(j,!1)},U.$set=function(j,K){var Q,ie=Y.p(j),G="set"+(this.$u?"UTC":""),F=(Q={},Q[h]=G+"Date",Q[x]=G+"Date",Q[f]=G+"Month",Q[b]=G+"FullYear",Q[d]=G+"Hours",Q[l]=G+"Minutes",Q[s]=G+"Seconds",Q[i]=G+"Milliseconds",Q)[ie],H=ie===h?this.$D+(K-this.$W):K;if(ie===f||ie===b){var I=this.clone().set(x,1);I.$d[F](H),I.init(),this.$d=I.set(x,Math.min(this.$D,I.daysInMonth())).$d}else F&&this.$d[F](H);return this.init(),this},U.set=function(j,K){return this.clone().$set(j,K)},U.get=function(j){return this[Y.p(j)]()},U.add=function(j,K){var Q,ie=this;j=Number(j);var G=Y.p(K),F=function(ne){var ue=O(ie);return Y.w(ue.date(ue.date()+Math.round(ne*j)),ie)};if(G===f)return this.set(f,this.$M+j);if(G===b)return this.set(b,this.$y+j);if(G===h)return F(1);if(G===p)return F(7);var H=(Q={},Q[l]=n,Q[d]=a,Q[s]=r,Q)[G]||1,I=this.$d.getTime()+j*H;return Y.w(I,this)},U.subtract=function(j,K){return this.add(-1*j,K)},U.format=function(j){var K=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||v;var ie=j||"YYYY-MM-DDTHH:mm:ssZ",G=Y.z(this),F=this.$H,H=this.$m,I=this.$M,ne=Q.weekdays,ue=Q.months,xe=Q.meridiem,ke=function(ge,Be,ct,yt){return ge&&(ge[Be]||ge(K,ie))||ct[Be].slice(0,yt)},me=function(ge){return Y.s(F%12||12,ge,"0")},Me=xe||function(ge,Be,ct){var yt=ge<12?"AM":"PM";return ct?yt.toLowerCase():yt};return ie.replace(k,(function(ge,Be){return Be||(function(ct){switch(ct){case"YY":return String(K.$y).slice(-2);case"YYYY":return Y.s(K.$y,4,"0");case"M":return I+1;case"MM":return Y.s(I+1,2,"0");case"MMM":return ke(Q.monthsShort,I,ue,3);case"MMMM":return ke(ue,I);case"D":return K.$D;case"DD":return Y.s(K.$D,2,"0");case"d":return String(K.$W);case"dd":return ke(Q.weekdaysMin,K.$W,ne,2);case"ddd":return ke(Q.weekdaysShort,K.$W,ne,3);case"dddd":return ne[K.$W];case"H":return String(F);case"HH":return Y.s(F,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return Me(F,H,!0);case"A":return Me(F,H,!1);case"m":return String(H);case"mm":return Y.s(H,2,"0");case"s":return String(K.$s);case"ss":return Y.s(K.$s,2,"0");case"SSS":return Y.s(K.$ms,3,"0");case"Z":return G}return null})(ge)||G.replace(":","")}))},U.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},U.diff=function(j,K,Q){var ie,G=this,F=Y.p(K),H=O(j),I=(H.utcOffset()-this.utcOffset())*n,ne=this-H,ue=function(){return Y.m(G,H)};switch(F){case b:ie=ue()/12;break;case f:ie=ue();break;case m:ie=ue()/3;break;case p:ie=(ne-I)/6048e5;break;case h:ie=(ne-I)/864e5;break;case d:ie=ne/a;break;case l:ie=ne/n;break;case s:ie=ne/r;break;default:ie=ne}return Q?ie:Y.a(ie)},U.daysInMonth=function(){return this.endOf(f).$D},U.$locale=function(){return R[this.$L]},U.locale=function(j,K){if(!j)return this.$L;var Q=this.clone(),ie=W(j,K,!0);return ie&&(Q.$L=ie),Q},U.clone=function(){return Y.w(this.$d,this)},U.toDate=function(){return new Date(this.valueOf())},U.toJSON=function(){return this.isValid()?this.toISOString():null},U.toISOString=function(){return this.$d.toISOString()},U.toString=function(){return this.$d.toUTCString()},N})(),q=X.prototype;return O.prototype=q,[["$ms",i],["$s",s],["$m",l],["$H",d],["$W",h],["$M",f],["$y",b],["$D",x]].forEach((function(N){q[N[1]]=function(U){return this.$g(U,N[0],N[1])}})),O.extend=function(N,U){return N.$i||(N(U,X,O),N.$i=!0),O},O.locale=W,O.isDayjs=$,O.unix=function(N){return O(1e3*N)},O.en=R[B],O.Ls=R,O.p={},O}))})(dm)),dm.exports}var Bee=jee();const Fee=Rc(Bee);var SR=Object.defineProperty,L=(e,t)=>SR(e,"name",{value:t,configurable:!0}),zee=(e,t)=>{for(var r in t)SR(e,r,{get:t[r],enumerable:!0})},wo={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Fe={trace:L((...e)=>{},"trace"),debug:L((...e)=>{},"debug"),info:L((...e)=>{},"info"),warn:L((...e)=>{},"warn"),error:L((...e)=>{},"error"),fatal:L((...e)=>{},"fatal")},nS=L(function(e="fatal"){let t=wo.fatal;typeof e=="string"?e.toLowerCase()in wo&&(t=wo[e]):typeof e=="number"&&(t=e),Fe.trace=()=>{},Fe.debug=()=>{},Fe.info=()=>{},Fe.warn=()=>{},Fe.error=()=>{},Fe.fatal=()=>{},t<=wo.fatal&&(Fe.fatal=console.error?console.error.bind(console,Yi("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Yi("FATAL"))),t<=wo.error&&(Fe.error=console.error?console.error.bind(console,Yi("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Yi("ERROR"))),t<=wo.warn&&(Fe.warn=console.warn?console.warn.bind(console,Yi("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Yi("WARN"))),t<=wo.info&&(Fe.info=console.info?console.info.bind(console,Yi("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Yi("INFO"))),t<=wo.debug&&(Fe.debug=console.debug?console.debug.bind(console,Yi("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Yi("DEBUG"))),t<=wo.trace&&(Fe.trace=console.debug?console.debug.bind(console,Yi("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Yi("TRACE")))},"setLogLevel"),Yi=L(e=>`%c${Fee().format("ss.SSS")} : ${e} : `,"format");const hm={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,i=2*r-a;switch(n){case"r":return hm.hue2rgb(i,a,e+1/3)*255;case"g":return hm.hue2rgb(i,a,e)*255;case"b":return hm.hue2rgb(i,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),i=Math.min(e,t,r),s=(a+i)/2;if(n==="l")return s*100;if(a===i)return 0;const l=a-i,d=s>.5?l/(2-a-i):l/(a+i);if(n==="s")return d*100;switch(a){case e:return((t-r)/l+(t<r?6:0))*60;case t:return((r-e)/l+2)*60;case r:return((e-t)/l+4)*60;default:return-1}}},Uee={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},$ee={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},qt={channel:hm,lang:Uee,unit:$ee},fl={};for(let e=0;e<=255;e++)fl[e]=qt.unit.dec2hex(e);const Ea={ALL:0,RGB:1,HSL:2};class qee{constructor(){this.type=Ea.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Ea.ALL}is(t){return this.type===t}}class Hee{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new qee}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Ea.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:a}=t;r===void 0&&(t.h=qt.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=qt.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=qt.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:a}=t;r===void 0&&(t.r=qt.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=qt.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=qt.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Ea.HSL)&&r!==void 0?r:(this._ensureHSL(),qt.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Ea.HSL)&&r!==void 0?r:(this._ensureHSL(),qt.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Ea.HSL)&&r!==void 0?r:(this._ensureHSL(),qt.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Ea.RGB)&&r!==void 0?r:(this._ensureRGB(),qt.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Ea.RGB)&&r!==void 0?r:(this._ensureRGB(),qt.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Ea.RGB)&&r!==void 0?r:(this._ensureRGB(),qt.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Ea.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Ea.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Ea.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Ea.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Ea.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Ea.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const G0=new Hee({r:0,g:0,b:0,a:0},"transparent"),Yu={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Yu.re);if(!t)return;const r=t[1],n=parseInt(r,16),a=r.length,i=a%4===0,s=a>4,l=s?1:17,d=s?8:4,h=i?0:-1,p=s?255:15;return G0.set({r:(n>>d*(h+3)&p)*l,g:(n>>d*(h+2)&p)*l,b:(n>>d*(h+1)&p)*l,a:i?(n&p)*l/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`#${fl[Math.round(t)]}${fl[Math.round(r)]}${fl[Math.round(n)]}${fl[Math.round(a*255)]}`:`#${fl[Math.round(t)]}${fl[Math.round(r)]}${fl[Math.round(n)]}`}},uc={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(uc.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return qt.channel.clamp.h(parseFloat(r)*.9);case"rad":return qt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return qt.channel.clamp.h(parseFloat(r)*360)}}return qt.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(uc.re);if(!r)return;const[,n,a,i,s,l]=r;return G0.set({h:uc._hue2deg(n),s:qt.channel.clamp.s(parseFloat(a)),l:qt.channel.clamp.l(parseFloat(i)),a:s?qt.channel.clamp.a(l?parseFloat(s)/100:parseFloat(s)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a}=e;return a<1?`hsla(${qt.lang.round(t)}, ${qt.lang.round(r)}%, ${qt.lang.round(n)}%, ${a})`:`hsl(${qt.lang.round(t)}, ${qt.lang.round(r)}%, ${qt.lang.round(n)}%)`}},vp={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=vp.colors[e];if(t)return Yu.parse(t)},stringify:e=>{const t=Yu.stringify(e);for(const r in vp.colors)if(vp.colors[r]===t)return r}},Jh={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Jh.re);if(!r)return;const[,n,a,i,s,l,d,h,p]=r;return G0.set({r:qt.channel.clamp.r(a?parseFloat(n)*2.55:parseFloat(n)),g:qt.channel.clamp.g(s?parseFloat(i)*2.55:parseFloat(i)),b:qt.channel.clamp.b(d?parseFloat(l)*2.55:parseFloat(l)),a:h?qt.channel.clamp.a(p?parseFloat(h)/100:parseFloat(h)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`rgba(${qt.lang.round(t)}, ${qt.lang.round(r)}, ${qt.lang.round(n)}, ${qt.lang.round(a)})`:`rgb(${qt.lang.round(t)}, ${qt.lang.round(r)}, ${qt.lang.round(n)})`}},Vs={format:{keyword:vp,hex:Yu,rgb:Jh,rgba:Jh,hsl:uc,hsla:uc},parse:e=>{if(typeof e!="string")return e;const t=Yu.parse(e)||Jh.parse(e)||uc.parse(e)||vp.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Ea.HSL)||e.data.r===void 0?uc.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Jh.stringify(e):Yu.stringify(e)},TR=(e,t)=>{const r=Vs.parse(e);for(const n in t)r[n]=qt.channel.clamp[n](t[n]);return Vs.stringify(r)},wp=(e,t,r=0,n=1)=>{if(typeof e!="number")return TR(e,{a:t});const a=G0.set({r:qt.channel.clamp.r(e),g:qt.channel.clamp.g(t),b:qt.channel.clamp.b(r),a:qt.channel.clamp.a(n)});return Vs.stringify(a)},Gee=e=>{const{r:t,g:r,b:n}=Vs.parse(e),a=.2126*qt.channel.toLinear(t)+.7152*qt.channel.toLinear(r)+.0722*qt.channel.toLinear(n);return qt.lang.round(a)},Wee=e=>Gee(e)>=.5,lg=e=>!Wee(e),kR=(e,t,r)=>{const n=Vs.parse(e),a=n[t],i=qt.channel.clamp[t](a+r);return a!==i&&(n[t]=i),Vs.stringify(n)},ft=(e,t)=>kR(e,"l",t),Rt=(e,t)=>kR(e,"l",-t),ye=(e,t)=>{const r=Vs.parse(e),n={};for(const a in t)t[a]&&(n[a]=r[a]+t[a]);return TR(e,n)},Vee=(e,t,r=50)=>{const{r:n,g:a,b:i,a:s}=Vs.parse(e),{r:l,g:d,b:h,a:p}=Vs.parse(t),f=r/100,m=f*2-1,b=s-p,v=((m*b===-1?m:(m+b)/(1+m*b))+1)/2,T=1-v,k=n*v+l*T,C=a*v+d*T,A=i*v+h*T,D=s*f+p*(1-f);return wp(k,C,A,D)},at=(e,t=100)=>{const r=Vs.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Vee(r,e,t)};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:ER,setPrototypeOf:Y_,isFrozen:Yee,getPrototypeOf:Qee,getOwnPropertyDescriptor:Kee}=Object;let{freeze:Wa,seal:Zi,create:w1}=Object,{apply:S1,construct:T1}=typeof Reflect<"u"&&Reflect;Wa||(Wa=function(t){return t});Zi||(Zi=function(t){return t});S1||(S1=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return t.apply(r,a)});T1||(T1=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return new t(...n)});const $f=Va(Array.prototype.forEach),Xee=Va(Array.prototype.lastIndexOf),Q_=Va(Array.prototype.pop),jh=Va(Array.prototype.push),Jee=Va(Array.prototype.splice),pm=Va(String.prototype.toLowerCase),av=Va(String.prototype.toString),iv=Va(String.prototype.match),Bh=Va(String.prototype.replace),Zee=Va(String.prototype.indexOf),ete=Va(String.prototype.trim),fs=Va(Object.prototype.hasOwnProperty),za=Va(RegExp.prototype.test),Fh=tte(TypeError);function Va(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return S1(e,t,n)}}function tte(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T1(e,r)}}function hr(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pm;Y_&&Y_(e,null);let n=t.length;for(;n--;){let a=t[n];if(typeof a=="string"){const i=r(a);i!==a&&(Yee(t)||(t[n]=i),a=i)}e[a]=!0}return e}function rte(e){for(let t=0;t<e.length;t++)fs(e,t)||(e[t]=null);return e}function To(e){const t=w1(null);for(const[r,n]of ER(e))fs(e,r)&&(Array.isArray(n)?t[r]=rte(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=To(n):t[r]=n);return t}function zh(e,t){for(;e!==null;){const n=Kee(e,t);if(n){if(n.get)return Va(n.get);if(typeof n.value=="function")return Va(n.value)}e=Qee(e)}function r(){return null}return r}const K_=Wa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sv=Wa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ov=Wa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nte=Wa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lv=Wa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ate=Wa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X_=Wa(["#text"]),J_=Wa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cv=Wa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Z_=Wa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qf=Wa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ite=Zi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ste=Zi(/<%[\w\W]*|[\w\W]*%>/gm),ote=Zi(/\$\{[\w\W]*/gm),lte=Zi(/^data-[\-\w.\u00B7-\uFFFF]+$/),cte=Zi(/^aria-[\-\w]+$/),CR=Zi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ute=Zi(/^(?:\w+script|data):/i),dte=Zi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_R=Zi(/^html$/i),hte=Zi(/^[a-z][.\w]*(-[.\w]+)+$/i);var eA=Object.freeze({__proto__:null,ARIA_ATTR:cte,ATTR_WHITESPACE:dte,CUSTOM_ELEMENT:hte,DATA_ATTR:lte,DOCTYPE_NAME:_R,ERB_EXPR:ste,IS_ALLOWED_URI:CR,IS_SCRIPT_OR_DATA:ute,MUSTACHE_EXPR:ite,TMPLIT_EXPR:ote});const Uh={element:1,text:3,progressingInstruction:7,comment:8,document:9},pte=function(){return typeof window>"u"?null:window},gte=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(n=r.getAttribute(a));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},tA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function AR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pte();const t=ht=>AR(ht);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==Uh.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,a=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:l,Element:d,NodeFilter:h,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:m,trustedTypes:b}=e,x=d.prototype,v=zh(x,"cloneNode"),T=zh(x,"remove"),k=zh(x,"nextSibling"),C=zh(x,"childNodes"),A=zh(x,"parentNode");if(typeof s=="function"){const ht=r.createElement("template");ht.content&&ht.content.ownerDocument&&(r=ht.content.ownerDocument)}let D,B="";const{implementation:R,createNodeIterator:M,createDocumentFragment:$,getElementsByTagName:W}=r,{importNode:O}=n;let Y=tA();t.isSupported=typeof ER=="function"&&typeof A=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:q,TMPLIT_EXPR:N,DATA_ATTR:U,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:K,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:ie}=eA;let{IS_ALLOWED_URI:G}=eA,F=null;const H=hr({},[...K_,...sv,...ov,...lv,...X_]);let I=null;const ne=hr({},[...J_,...cv,...Z_,...qf]);let ue=Object.seal(w1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,ke=null;const me=Object.seal(w1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Me=!0,ge=!0,Be=!1,ct=!0,yt=!1,tr=!0,wr=!1,Et=!1,Ar=!1,$t=!1,or=!1,bt=!1,It=!0,mn=!1;const Jt="user-content-";let Ut=!0,yn=!1,ae={},Ce=null;const rt=hr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Qe=null;const dt=hr({},["audio","video","img","source","image","track"]);let nr=null;const un=hr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),br="http://www.w3.org/1998/Math/MathML",Sr="http://www.w3.org/2000/svg",Mr="http://www.w3.org/1999/xhtml";let ar=Mr,Jn=!1,Kr=null;const Pi=hr({},[br,Sr,Mr],av);let ia=hr({},["mi","mo","mn","ms","mtext"]),Oa=hr({},["annotation-xml"]);const di=hr({},["title","style","font","a","script"]);let bn=null;const le=["application/xhtml+xml","text/html"],Pe="text/html";let He=null,Ct=null;const Tr=r.createElement("form"),Lr=function(ce){return ce instanceof RegExp||ce instanceof Function},ot=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ct&&Ct===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=To(ce),bn=le.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Pe:ce.PARSER_MEDIA_TYPE,He=bn==="application/xhtml+xml"?av:pm,F=fs(ce,"ALLOWED_TAGS")?hr({},ce.ALLOWED_TAGS,He):H,I=fs(ce,"ALLOWED_ATTR")?hr({},ce.ALLOWED_ATTR,He):ne,Kr=fs(ce,"ALLOWED_NAMESPACES")?hr({},ce.ALLOWED_NAMESPACES,av):Pi,nr=fs(ce,"ADD_URI_SAFE_ATTR")?hr(To(un),ce.ADD_URI_SAFE_ATTR,He):un,Qe=fs(ce,"ADD_DATA_URI_TAGS")?hr(To(dt),ce.ADD_DATA_URI_TAGS,He):dt,Ce=fs(ce,"FORBID_CONTENTS")?hr({},ce.FORBID_CONTENTS,He):rt,xe=fs(ce,"FORBID_TAGS")?hr({},ce.FORBID_TAGS,He):To({}),ke=fs(ce,"FORBID_ATTR")?hr({},ce.FORBID_ATTR,He):To({}),ae=fs(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,Me=ce.ALLOW_ARIA_ATTR!==!1,ge=ce.ALLOW_DATA_ATTR!==!1,Be=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,ct=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yt=ce.SAFE_FOR_TEMPLATES||!1,tr=ce.SAFE_FOR_XML!==!1,wr=ce.WHOLE_DOCUMENT||!1,$t=ce.RETURN_DOM||!1,or=ce.RETURN_DOM_FRAGMENT||!1,bt=ce.RETURN_TRUSTED_TYPE||!1,Ar=ce.FORCE_BODY||!1,It=ce.SANITIZE_DOM!==!1,mn=ce.SANITIZE_NAMED_PROPS||!1,Ut=ce.KEEP_CONTENT!==!1,yn=ce.IN_PLACE||!1,G=ce.ALLOWED_URI_REGEXP||CR,ar=ce.NAMESPACE||Mr,ia=ce.MATHML_TEXT_INTEGRATION_POINTS||ia,Oa=ce.HTML_INTEGRATION_POINTS||Oa,ue=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&Lr(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ue.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&Lr(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ue.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ue.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yt&&(ge=!1),or&&($t=!0),ae&&(F=hr({},X_),I=[],ae.html===!0&&(hr(F,K_),hr(I,J_)),ae.svg===!0&&(hr(F,sv),hr(I,cv),hr(I,qf)),ae.svgFilters===!0&&(hr(F,ov),hr(I,cv),hr(I,qf)),ae.mathMl===!0&&(hr(F,lv),hr(I,Z_),hr(I,qf))),ce.ADD_TAGS&&(typeof ce.ADD_TAGS=="function"?me.tagCheck=ce.ADD_TAGS:(F===H&&(F=To(F)),hr(F,ce.ADD_TAGS,He))),ce.ADD_ATTR&&(typeof ce.ADD_ATTR=="function"?me.attributeCheck=ce.ADD_ATTR:(I===ne&&(I=To(I)),hr(I,ce.ADD_ATTR,He))),ce.ADD_URI_SAFE_ATTR&&hr(nr,ce.ADD_URI_SAFE_ATTR,He),ce.FORBID_CONTENTS&&(Ce===rt&&(Ce=To(Ce)),hr(Ce,ce.FORBID_CONTENTS,He)),Ut&&(F["#text"]=!0),wr&&hr(F,["html","head","body"]),F.table&&(hr(F,["tbody"]),delete xe.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw Fh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Fh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=ce.TRUSTED_TYPES_POLICY,B=D.createHTML("")}else D===void 0&&(D=gte(b,a)),D!==null&&typeof B=="string"&&(B=D.createHTML(""));Wa&&Wa(ce),Ct=ce}},st=hr({},[...sv,...ov,...nte]),Nt=hr({},[...lv,...ate]),Hr=function(ce){let ze=A(ce);(!ze||!ze.tagName)&&(ze={namespaceURI:ar,tagName:"template"});const it=pm(ce.tagName),lr=pm(ze.tagName);return Kr[ce.namespaceURI]?ce.namespaceURI===Sr?ze.namespaceURI===Mr?it==="svg":ze.namespaceURI===br?it==="svg"&&(lr==="annotation-xml"||ia[lr]):!!st[it]:ce.namespaceURI===br?ze.namespaceURI===Mr?it==="math":ze.namespaceURI===Sr?it==="math"&&Oa[lr]:!!Nt[it]:ce.namespaceURI===Mr?ze.namespaceURI===Sr&&!Oa[lr]||ze.namespaceURI===br&&!ia[lr]?!1:!Nt[it]&&(di[it]||!st[it]):!!(bn==="application/xhtml+xml"&&Kr[ce.namespaceURI]):!1},rr=function(ce){jh(t.removed,{element:ce});try{A(ce).removeChild(ce)}catch{T(ce)}},Mn=function(ce,ze){try{jh(t.removed,{attribute:ze.getAttributeNode(ce),from:ze})}catch{jh(t.removed,{attribute:null,from:ze})}if(ze.removeAttribute(ce),ce==="is")if($t||or)try{rr(ze)}catch{}else try{ze.setAttribute(ce,"")}catch{}},hi=function(ce){let ze=null,it=null;if(Ar)ce="<remove></remove>"+ce;else{const Vt=iv(ce,/^[\r\n\t ]+/);it=Vt&&Vt[0]}bn==="application/xhtml+xml"&&ar===Mr&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const lr=D?D.createHTML(ce):ce;if(ar===Mr)try{ze=new m().parseFromString(lr,bn)}catch{}if(!ze||!ze.documentElement){ze=R.createDocument(ar,"template",null);try{ze.documentElement.innerHTML=Jn?B:lr}catch{}}const Xr=ze.body||ze.documentElement;return ce&&it&&Xr.insertBefore(r.createTextNode(it),Xr.childNodes[0]||null),ar===Mr?W.call(ze,wr?"html":"body")[0]:wr?ze.documentElement:Xr},pi=function(ce){return M.call(ce.ownerDocument||ce,ce,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},sa=function(ce){return ce instanceof f&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof p)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},ut=function(ce){return typeof l=="function"&&ce instanceof l};function Or(ht,ce,ze){$f(ht,it=>{it.call(t,ce,ze,Ct)})}const Zn=function(ce){let ze=null;if(Or(Y.beforeSanitizeElements,ce,null),sa(ce))return rr(ce),!0;const it=He(ce.nodeName);if(Or(Y.uponSanitizeElement,ce,{tagName:it,allowedTags:F}),tr&&ce.hasChildNodes()&&!ut(ce.firstElementChild)&&za(/<[/\w!]/g,ce.innerHTML)&&za(/<[/\w!]/g,ce.textContent)||ce.nodeType===Uh.progressingInstruction||tr&&ce.nodeType===Uh.comment&&za(/<[/\w]/g,ce.data))return rr(ce),!0;if(!(me.tagCheck instanceof Function&&me.tagCheck(it))&&(!F[it]||xe[it])){if(!xe[it]&&as(it)&&(ue.tagNameCheck instanceof RegExp&&za(ue.tagNameCheck,it)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(it)))return!1;if(Ut&&!Ce[it]){const lr=A(ce)||ce.parentNode,Xr=C(ce)||ce.childNodes;if(Xr&&lr){const Vt=Xr.length;for(let Tn=Vt-1;Tn>=0;--Tn){const Hn=v(Xr[Tn],!0);Hn.__removalCount=(ce.__removalCount||0)+1,lr.insertBefore(Hn,k(ce))}}}return rr(ce),!0}return ce instanceof d&&!Hr(ce)||(it==="noscript"||it==="noembed"||it==="noframes")&&za(/<\/no(script|embed|frames)/i,ce.innerHTML)?(rr(ce),!0):(yt&&ce.nodeType===Uh.text&&(ze=ce.textContent,$f([X,q,N],lr=>{ze=Bh(ze,lr," ")}),ce.textContent!==ze&&(jh(t.removed,{element:ce.cloneNode()}),ce.textContent=ze)),Or(Y.afterSanitizeElements,ce,null),!1)},Ri=function(ce,ze,it){if(It&&(ze==="id"||ze==="name")&&(it in r||it in Tr))return!1;if(!(ge&&!ke[ze]&&za(U,ze))){if(!(Me&&za(j,ze))){if(!(me.attributeCheck instanceof Function&&me.attributeCheck(ze,ce))){if(!I[ze]||ke[ze]){if(!(as(ce)&&(ue.tagNameCheck instanceof RegExp&&za(ue.tagNameCheck,ce)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(ce))&&(ue.attributeNameCheck instanceof RegExp&&za(ue.attributeNameCheck,ze)||ue.attributeNameCheck instanceof Function&&ue.attributeNameCheck(ze,ce))||ze==="is"&&ue.allowCustomizedBuiltInElements&&(ue.tagNameCheck instanceof RegExp&&za(ue.tagNameCheck,it)||ue.tagNameCheck instanceof Function&&ue.tagNameCheck(it))))return!1}else if(!nr[ze]){if(!za(G,Bh(it,Q,""))){if(!((ze==="src"||ze==="xlink:href"||ze==="href")&&ce!=="script"&&Zee(it,"data:")===0&&Qe[ce])){if(!(Be&&!za(K,Bh(it,Q,"")))){if(it)return!1}}}}}}}return!0},as=function(ce){return ce!=="annotation-xml"&&iv(ce,ie)},ja=function(ce){Or(Y.beforeSanitizeAttributes,ce,null);const{attributes:ze}=ce;if(!ze||sa(ce))return;const it={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I,forceKeepAttr:void 0};let lr=ze.length;for(;lr--;){const Xr=ze[lr],{name:Vt,namespaceURI:Tn,value:Hn}=Xr,ea=He(Vt),$e=Hn;let nt=Vt==="value"?$e:ete($e);if(it.attrName=ea,it.attrValue=nt,it.keepAttr=!0,it.forceKeepAttr=void 0,Or(Y.uponSanitizeAttribute,ce,it),nt=it.attrValue,mn&&(ea==="id"||ea==="name")&&(Mn(Vt,ce),nt=Jt+nt),tr&&za(/((--!?|])>)|<\/(style|title|textarea)/i,nt)){Mn(Vt,ce);continue}if(ea==="attributename"&&iv(nt,"href")){Mn(Vt,ce);continue}if(it.forceKeepAttr)continue;if(!it.keepAttr){Mn(Vt,ce);continue}if(!ct&&za(/\/>/i,nt)){Mn(Vt,ce);continue}yt&&$f([X,q,N],xr=>{nt=Bh(nt,xr," ")});const Yt=He(ce.nodeName);if(!Ri(Yt,ea,nt)){Mn(Vt,ce);continue}if(D&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Tn)switch(b.getAttributeType(Yt,ea)){case"TrustedHTML":{nt=D.createHTML(nt);break}case"TrustedScriptURL":{nt=D.createScriptURL(nt);break}}if(nt!==$e)try{Tn?ce.setAttributeNS(Tn,Vt,nt):ce.setAttribute(Vt,nt),sa(ce)?rr(ce):Q_(t.removed)}catch{Mn(Vt,ce)}}Or(Y.afterSanitizeAttributes,ce,null)},is=function ht(ce){let ze=null;const it=pi(ce);for(Or(Y.beforeSanitizeShadowDOM,ce,null);ze=it.nextNode();)Or(Y.uponSanitizeShadowNode,ze,null),Zn(ze),ja(ze),ze.content instanceof i&&ht(ze.content);Or(Y.afterSanitizeShadowDOM,ce,null)};return t.sanitize=function(ht){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ze=null,it=null,lr=null,Xr=null;if(Jn=!ht,Jn&&(ht="<!-->"),typeof ht!="string"&&!ut(ht))if(typeof ht.toString=="function"){if(ht=ht.toString(),typeof ht!="string")throw Fh("dirty is not a string, aborting")}else throw Fh("toString is not a function");if(!t.isSupported)return ht;if(Et||ot(ce),t.removed=[],typeof ht=="string"&&(yn=!1),yn){if(ht.nodeName){const Hn=He(ht.nodeName);if(!F[Hn]||xe[Hn])throw Fh("root node is forbidden and cannot be sanitized in-place")}}else if(ht instanceof l)ze=hi("<!---->"),it=ze.ownerDocument.importNode(ht,!0),it.nodeType===Uh.element&&it.nodeName==="BODY"||it.nodeName==="HTML"?ze=it:ze.appendChild(it);else{if(!$t&&!yt&&!wr&&ht.indexOf("<")===-1)return D&&bt?D.createHTML(ht):ht;if(ze=hi(ht),!ze)return $t?null:bt?B:""}ze&&Ar&&rr(ze.firstChild);const Vt=pi(yn?ht:ze);for(;lr=Vt.nextNode();)Zn(lr),ja(lr),lr.content instanceof i&&is(lr.content);if(yn)return ht;if($t){if(or)for(Xr=$.call(ze.ownerDocument);ze.firstChild;)Xr.appendChild(ze.firstChild);else Xr=ze;return(I.shadowroot||I.shadowrootmode)&&(Xr=O.call(n,Xr,!0)),Xr}let Tn=wr?ze.outerHTML:ze.innerHTML;return wr&&F["!doctype"]&&ze.ownerDocument&&ze.ownerDocument.doctype&&ze.ownerDocument.doctype.name&&za(_R,ze.ownerDocument.doctype.name)&&(Tn="<!DOCTYPE "+ze.ownerDocument.doctype.name+`>
`+Tn),yt&&$f([X,q,N],Hn=>{Tn=Bh(Tn,Hn," ")}),D&&bt?D.createHTML(Tn):Tn},t.setConfig=function(){let ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(ht),Et=!0},t.clearConfig=function(){Ct=null,Et=!1},t.isValidAttribute=function(ht,ce,ze){Ct||ot({});const it=He(ht),lr=He(ce);return Ri(it,lr,ze)},t.addHook=function(ht,ce){typeof ce=="function"&&jh(Y[ht],ce)},t.removeHook=function(ht,ce){if(ce!==void 0){const ze=Xee(Y[ht],ce);return ze===-1?void 0:Jee(Y[ht],ze,1)[0]}return Q_(Y[ht])},t.removeHooks=function(ht){Y[ht]=[]},t.removeAllHooks=function(){Y=tA()},t}var od=AR(),NR=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Sp=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,fte=/\s*%%.*\n/gm,Xu,LR=(Xu=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},L(Xu,"UnknownDiagramError"),Xu),kc={},aS=L(function(e,t){e=e.replace(NR,"").replace(Sp,"").replace(fte,`
`);for(const[r,{detector:n}]of Object.entries(kc))if(n(e,t))return r;throw new LR(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),k1=L((...e)=>{for(const{id:t,detector:r,loader:n}of e)PR(t,r,n)},"registerLazyLoadedDiagrams"),PR=L((e,t,r)=>{kc[e]&&Fe.warn(`Detector with key ${e} already exists. Overwriting.`),kc[e]={detector:t,loader:r},Fe.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),mte=L(e=>kc[e].loader,"getDiagramLoader"),E1=L((e,t,{depth:r=2,clobber:n=!1}={})=>{const a={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>E1(e,i,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]=="object"&&(e[i]===void 0||typeof e[i]=="object")?(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=E1(e[i],t[i],{depth:r-1,clobber:n})):(n||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i])}),e)},"assignWithDepth"),Qn=E1,W0="#ffffff",V0="#f2f2f2",qa=L((e,t)=>t?ye(e,{s:-40,l:10}):ye(e,{s:-40,l:-10}),"mkBorder"),Ju,yte=(Ju=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ye(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ye(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||qa(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||qa(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||at(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||at(this.tertiaryColor),this.lineColor=this.lineColor||at(this.background),this.arrowheadColor=this.arrowheadColor||at(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Rt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||at(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ft(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Rt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Rt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Rt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Rt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||at(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||ft(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||Rt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||ye(this.mainBkg,{h:180,s:-15,l:t*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||ye(this.mainBkg,{h:180,s:-15,l:t*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ye(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ye(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ye(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ye(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ye(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lg(this.quadrant1Fill)?ft(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||at(this.git0),this.gitInv1=this.gitInv1||at(this.git1),this.gitInv2=this.gitInv2||at(this.git2),this.gitInv3=this.gitInv3||at(this.git3),this.gitInv4=this.gitInv4||at(this.git4),this.gitInv5=this.gitInv5||at(this.git5),this.gitInv6=this.gitInv6||at(this.git6),this.gitInv7=this.gitInv7||at(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||W0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||V0}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},L(Ju,"Theme"),Ju),bte=L(e=>{const t=new yte;return t.calculate(e),t},"getThemeVariables"),Zu,xte=(Zu=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ft(this.primaryColor,16),this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=at(this.background),this.secondaryBorderColor=qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=at(this.primaryColor),this.secondaryTextColor=at(this.secondaryColor),this.tertiaryTextColor=at(this.tertiaryColor),this.lineColor=at(this.background),this.textColor=at(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ft(at("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=wp(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Rt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Rt(this.sectionBkgColor,10),this.taskBorderColor=wp(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=wp(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ft(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Rt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=ft(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ft(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ft(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||at(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||ft(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(-10+t*4)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(-7+t*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lg(this.quadrant1Fill)?ft(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ft(this.secondaryColor,20),this.git1=ft(this.pie2||this.secondaryColor,20),this.git2=ft(this.pie3||this.tertiaryColor,20),this.git3=ft(this.pie4||ye(this.primaryColor,{h:-30}),20),this.git4=ft(this.pie5||ye(this.primaryColor,{h:-60}),20),this.git5=ft(this.pie6||ye(this.primaryColor,{h:-90}),10),this.git6=ft(this.pie7||ye(this.primaryColor,{h:60}),10),this.git7=ft(this.pie8||ye(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||at(this.git0),this.gitInv1=this.gitInv1||at(this.git1),this.gitInv2=this.gitInv2||at(this.git2),this.gitInv3=this.gitInv3||at(this.git3),this.gitInv4=this.gitInv4||at(this.git4),this.gitInv5=this.gitInv5||at(this.git5),this.gitInv6=this.gitInv6||at(this.git6),this.gitInv7=this.gitInv7||at(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||at(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||at(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ft(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ft(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},L(Zu,"Theme"),Zu),vte=L(e=>{const t=new xte;return t.calculate(e),t},"getThemeVariables"),ed,wte=(ed=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ye(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=at(this.primaryColor),this.secondaryTextColor=at(this.secondaryColor),this.tertiaryTextColor=at(this.tertiaryColor),this.lineColor=at(this.background),this.textColor=at(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=wp(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Rt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Rt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ye(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,l:-(7+t*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||at(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||at(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ft(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ft(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ye(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ye(this.primaryColor,{l:-10}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ye(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lg(this.quadrant1Fill)?ft(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||Rt(at(this.git0),25),this.gitInv1=this.gitInv1||at(this.git1),this.gitInv2=this.gitInv2||at(this.git2),this.gitInv3=this.gitInv3||at(this.git3),this.gitInv4=this.gitInv4||at(this.git4),this.gitInv5=this.gitInv5||at(this.git5),this.gitInv6=this.gitInv6||at(this.git6),this.gitInv7=this.gitInv7||at(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||at(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||at(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||W0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||V0}calculate(t){if(Object.keys(this).forEach(n=>{this[n]==="calculated"&&(this[n]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},L(ed,"Theme"),ed),Ste=L(e=>{const t=new wte;return t.calculate(e),t},"getThemeVariables"),td,Tte=(td=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ft("#cde498",10),this.primaryBorderColor=qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=at(this.primaryColor),this.secondaryTextColor=at(this.secondaryColor),this.tertiaryTextColor=at(this.primaryColor),this.lineColor=at(this.background),this.textColor=at(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Rt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ye(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ye(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ye(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ye(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ye(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ye(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ye(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ye(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ye(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Rt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Rt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||ye(this["cScale"+t],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{h:30,s:-30,l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ft(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ye(this.primaryColor,{l:-30}),this.pie5=this.pie5||ye(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ye(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ye(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ye(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ye(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ye(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ye(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ye(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lg(this.quadrant1Fill)?ft(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ye(this.primaryColor,{h:-30}),this.git4=this.git4||ye(this.primaryColor,{h:-60}),this.git5=this.git5||ye(this.primaryColor,{h:-90}),this.git6=this.git6||ye(this.primaryColor,{h:60}),this.git7=this.git7||ye(this.primaryColor,{h:120}),this.darkMode?(this.git0=ft(this.git0,25),this.git1=ft(this.git1,25),this.git2=ft(this.git2,25),this.git3=ft(this.git3,25),this.git4=ft(this.git4,25),this.git5=ft(this.git5,25),this.git6=ft(this.git6,25),this.git7=ft(this.git7,25)):(this.git0=Rt(this.git0,25),this.git1=Rt(this.git1,25),this.git2=Rt(this.git2,25),this.git3=Rt(this.git3,25),this.git4=Rt(this.git4,25),this.git5=Rt(this.git5,25),this.git6=Rt(this.git6,25),this.git7=Rt(this.git7,25)),this.gitInv0=this.gitInv0||at(this.git0),this.gitInv1=this.gitInv1||at(this.git1),this.gitInv2=this.gitInv2||at(this.git2),this.gitInv3=this.gitInv3||at(this.git3),this.gitInv4=this.gitInv4||at(this.git4),this.gitInv5=this.gitInv5||at(this.git5),this.gitInv6=this.gitInv6||at(this.git6),this.gitInv7=this.gitInv7||at(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||at(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||at(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||W0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||V0}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},L(td,"Theme"),td),kte=L(e=>{const t=new Tte;return t.calculate(e),t},"getThemeVariables"),rd,Ete=(rd=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ft(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ye(this.primaryColor,{h:-160}),this.primaryBorderColor=qa(this.primaryColor,this.darkMode),this.secondaryBorderColor=qa(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=qa(this.tertiaryColor,this.darkMode),this.primaryTextColor=at(this.primaryColor),this.secondaryTextColor=at(this.secondaryColor),this.tertiaryTextColor=at(this.tertiaryColor),this.lineColor=at(this.background),this.textColor=at(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ft(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=ft(this.contrast,55),this.border2=this.contrast,this.actorBorder=ft(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||at(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||ft(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Rt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||ye(this.mainBkg,{l:-(5+t*5)}),this["surfacePeer"+t]=this["surfacePeer"+t]||ye(this.mainBkg,{l:-(8+t*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=ft(this.contrast,30),this.sectionBkgColor2=ft(this.contrast,30),this.taskBorderColor=Rt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ft(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Rt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ye(this.primaryColor,{h:64}),this.fillType3=ye(this.secondaryColor,{h:64}),this.fillType4=ye(this.primaryColor,{h:-64}),this.fillType5=ye(this.secondaryColor,{h:-64}),this.fillType6=ye(this.primaryColor,{h:128}),this.fillType7=ye(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ye(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ye(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ye(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ye(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ye(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ye(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||lg(this.quadrant1Fill)?ft(this.quadrant1Fill):Rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Rt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ye(this.primaryColor,{h:-30}),this.git4=this.pie5||ye(this.primaryColor,{h:-60}),this.git5=this.pie6||ye(this.primaryColor,{h:-90}),this.git6=this.pie7||ye(this.primaryColor,{h:60}),this.git7=this.pie8||ye(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||at(this.git0),this.gitInv1=this.gitInv1||at(this.git1),this.gitInv2=this.gitInv2||at(this.git2),this.gitInv3=this.gitInv3||at(this.git3),this.gitInv4=this.gitInv4||at(this.git4),this.gitInv5=this.gitInv5||at(this.git5),this.gitInv6=this.gitInv6||at(this.git6),this.gitInv7=this.gitInv7||at(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||W0,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||V0}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}},L(rd,"Theme"),rd),Cte=L(e=>{const t=new Ete;return t.calculate(e),t},"getThemeVariables"),Ao={base:{getThemeVariables:bte},dark:{getThemeVariables:vte},default:{getThemeVariables:Ste},forest:{getThemeVariables:kte},neutral:{getThemeVariables:Cte}},Os={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},RR={...Os,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Ao.default.getThemeVariables(),sequence:{...Os.sequence,messageFont:L(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:L(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:L(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Os.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Os.c4,useWidth:void 0,personFont:L(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Os.flowchart,inheritDir:!1},external_personFont:L(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:L(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:L(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:L(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:L(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:L(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:L(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:L(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:L(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:L(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:L(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:L(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:L(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:L(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:L(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:L(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:L(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:L(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:L(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:L(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:L(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Os.pie,useWidth:984},xyChart:{...Os.xyChart,useWidth:void 0},requirement:{...Os.requirement,useWidth:void 0},packet:{...Os.packet},radar:{...Os.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},IR=L((e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...IR(e[n],"")]:[...r,t+n],[]),"keyify"),_te=new Set(IR(RR,"")),DR=RR,Hm=L(e=>{if(Fe.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Hm(t));return}for(const t of Object.keys(e)){if(Fe.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!_te.has(t)||e[t]==null){Fe.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){Fe.debug("sanitizing object",t),Hm(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(Fe.debug("sanitizing css option",t),e[t]=Ate(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}Fe.debug("After sanitization",e)}},"sanitizeDirective"),Ate=L(e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),ld=Object.freeze(DR),oi=Qn({},ld),Gm,Ec=[],Tp=Qn({},ld),Y0=L((e,t)=>{let r=Qn({},e),n={};for(const a of t)jR(a),n=Qn(n,a);if(r=Qn(r,n),n.theme&&n.theme in Ao){const a=Qn({},Gm),i=Qn(a.themeVariables||{},n.themeVariables);r.theme&&r.theme in Ao&&(r.themeVariables=Ao[r.theme].getThemeVariables(i))}return Tp=r,BR(Tp),Tp},"updateCurrentConfig"),Nte=L(e=>(oi=Qn({},ld),oi=Qn(oi,e),e.theme&&Ao[e.theme]&&(oi.themeVariables=Ao[e.theme].getThemeVariables(e.themeVariables)),Y0(oi,Ec),oi),"setSiteConfig"),Lte=L(e=>{Gm=Qn({},e)},"saveConfigFromInitialize"),Pte=L(e=>(oi=Qn(oi,e),Y0(oi,Ec),oi),"updateSiteConfig"),MR=L(()=>Qn({},oi),"getSiteConfig"),OR=L(e=>(BR(e),Qn(Tp,e),Na()),"setConfig"),Na=L(()=>Qn({},Tp),"getConfig"),jR=L(e=>{e&&(["secure",...oi.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(Fe.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&jR(e[t])}))},"sanitize"),Rte=L(e=>{Hm(e),e.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Ec.push(e),Y0(oi,Ec)},"addDirective"),Wm=L((e=oi)=>{Ec=[],Y0(e,Ec)},"reset"),Ite={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},rA={},Dte=L(e=>{rA[e]||(Fe.warn(Ite[e]),rA[e]=!0)},"issueWarning"),BR=L(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&Dte("LAZY_LOAD_DEPRECATED")},"checkConfig"),N0e=L(()=>{let e={};Gm&&(e=Qn(e,Gm));for(const t of Ec)e=Qn(e,t);return e},"getUserDefinedConfig"),cg=/<br\s*\/?>/gi,Mte=L(e=>e?UR(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Ote=(()=>{let e=!1;return()=>{e||(FR(),e=!0)}})();function FR(){const e="data-temp-href-target";od.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),od.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}L(FR,"setupDompurifyHooks");var zR=L(e=>(Ote(),od.sanitize(e)),"removeScript"),nA=L((e,t)=>{if(t.flowchart?.htmlLabels!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=zR(e):r!=="loose"&&(e=UR(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=zte(e))}return e},"sanitizeMore"),es=L((e,t)=>e&&(t.dompurifyConfig?e=od.sanitize(nA(e,t),t.dompurifyConfig).toString():e=od.sanitize(nA(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),jte=L((e,t)=>typeof e=="string"?es(e,t):e.flat().map(r=>es(r,t)),"sanitizeTextOrArray"),Bte=L(e=>cg.test(e),"hasBreaks"),Fte=L(e=>e.split(cg),"splitBreaks"),zte=L(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),UR=L(e=>e.replace(cg,"#br#"),"breakToPlaceholder"),Ute=L(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),Xn=L(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),$te=L(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),qte=L(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),aA=L(function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let a=t[n];if(a===","&&n>0&&n+1<t.length){const i=t[n-1],s=t[n+1];Hte(i,s)&&(a=i+","+s,n++,r.pop())}r.push(Gte(a))}return r.join("")},"parseGenericTypes"),C1=L((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),Hte=L((e,t)=>{const r=C1(e,"~"),n=C1(t,"~");return r===1&&n===1},"shouldCombineSets"),Gte=L(e=>{const t=C1(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let a=n.indexOf("~"),i=n.lastIndexOf("~");for(;a!==-1&&i!==-1&&a!==i;)n[a]="<",n[i]=">",a=n.indexOf("~"),i=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},"processSet"),iA=L(()=>window.MathMLElement!==void 0,"isMathMLSupported"),_1=/\$\$(.*)\$\$/g,cd=L(e=>(e.match(_1)?.length??0)>0,"hasKatex"),L0e=L(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await iS(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),Wte=L(async(e,t)=>{if(!cd(e))return e;if(!(iA()||t.legacyMathML||t.forceLegacyMathML))return e.replace(_1,"MathML is unsupported in this environment.");{const{default:r}=await _t(async()=>{const{default:a}=await import("./katex-qrhCpa0F.js");return{default:a}},[]),n=t.forceLegacyMathML||!iA()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(cg).map(a=>cd(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(_1,(a,i)=>r.renderToString(i,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),iS=L(async(e,t)=>es(await Wte(e,t),t),"renderKatexSanitized"),Ad={getRows:Mte,sanitizeText:es,sanitizeTextOrArray:jte,hasBreaks:Bte,splitBreaks:Fte,lineBreakRegex:cg,removeScript:zR,getUrl:Ute,evaluate:Xn,getMax:$te,getMin:qte},Vte=L(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),Yte=L(function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},"calculateSvgSizeAttrs"),$R=L(function(e,t,r,n){const a=Yte(t,r,n);Vte(e,a)},"configureSvgSize"),Qte=L(function(e,t,r,n){const a=t.node().getBBox(),i=a.width,s=a.height;Fe.info(`SVG bounds: ${i}x${s}`,a);let l=0,d=0;Fe.info(`Graph bounds: ${l}x${d}`,e),l=i+r*2,d=s+r*2,Fe.info(`Calculated bounds: ${l}x${d}`),$R(t,d,l,n);const h=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",h)},"setupGraphViewbox"),gm={},Kte=L((e,t,r)=>{let n="";return e in gm&&gm[e]?n=gm[e](r):Fe.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${t}
`},"getStyles"),Xte=L((e,t)=>{t!==void 0&&(gm[e]=t)},"addStylesForDiagram"),Jte=Kte,qR={};zee(qR,{clear:()=>Zte,getAccDescription:()=>nre,getAccTitle:()=>tre,getDiagramTitle:()=>ire,setAccDescription:()=>rre,setAccTitle:()=>ere,setDiagramTitle:()=>are});var sS="",oS="",lS="",cS=L(e=>es(e,Na()),"sanitizeText"),Zte=L(()=>{sS="",lS="",oS=""},"clear"),ere=L(e=>{sS=cS(e).replace(/^\s+/g,"")},"setAccTitle"),tre=L(()=>sS,"getAccTitle"),rre=L(e=>{lS=cS(e).replace(/\n\s+/g,`
`)},"setAccDescription"),nre=L(()=>lS,"getAccDescription"),are=L(e=>{oS=cS(e)},"setDiagramTitle"),ire=L(()=>oS,"getDiagramTitle"),sA=Fe,sre=nS,Br=Na,P0e=OR,R0e=ld,uS=L(e=>es(e,Br()),"sanitizeText"),ore=Qte,lre=L(()=>qR,"getCommonDb"),Vm={},Ym=L((e,t,r)=>{Vm[e]&&sA.warn(`Diagram with id ${e} already registered. Overwriting.`),Vm[e]=t,r&&PR(e,r),Xte(e,t.styles),t.injectUtils?.(sA,sre,Br,uS,ore,lre(),()=>{})},"registerDiagram"),A1=L(e=>{if(e in Vm)return Vm[e];throw new cre(e)},"getDiagram"),nd,cre=(nd=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},L(nd,"DiagramNotFoundError"),nd),ure={value:()=>{}};function HR(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new fm(r)}function fm(e){this._=e}function dre(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}fm.prototype=HR.prototype={constructor:fm,on:function(e,t){var r=this._,n=dre(e+"",r),a,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((a=(e=n[i]).type)&&(a=hre(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(a=(e=n[i]).type)r[a]=oA(r[a],e.name,t);else if(t==null)for(a in r)r[a]=oA(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new fm(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function hre(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function oA(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=ure,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var N1="http://www.w3.org/1999/xhtml";const lA={svg:"http://www.w3.org/2000/svg",xhtml:N1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Q0(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),lA.hasOwnProperty(t)?{space:lA[t],local:e}:e}function pre(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===N1&&t.documentElement.namespaceURI===N1?t.createElement(e):t.createElementNS(r,e)}}function gre(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function GR(e){var t=Q0(e);return(t.local?gre:pre)(t)}function fre(){}function dS(e){return e==null?fre:function(){return this.querySelector(e)}}function mre(e){typeof e!="function"&&(e=dS(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=new Array(s),d,h,p=0;p<s;++p)(d=i[p])&&(h=e.call(d,d.__data__,p,i))&&("__data__"in d&&(h.__data__=d.__data__),l[p]=h);return new Li(n,this._parents)}function yre(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function bre(){return[]}function WR(e){return e==null?bre:function(){return this.querySelectorAll(e)}}function xre(e){return function(){return yre(e.apply(this,arguments))}}function vre(e){typeof e=="function"?e=xre(e):e=WR(e);for(var t=this._groups,r=t.length,n=[],a=[],i=0;i<r;++i)for(var s=t[i],l=s.length,d,h=0;h<l;++h)(d=s[h])&&(n.push(e.call(d,d.__data__,h,s)),a.push(d));return new Li(n,a)}function VR(e){return function(){return this.matches(e)}}function YR(e){return function(t){return t.matches(e)}}var wre=Array.prototype.find;function Sre(e){return function(){return wre.call(this.children,e)}}function Tre(){return this.firstElementChild}function kre(e){return this.select(e==null?Tre:Sre(typeof e=="function"?e:YR(e)))}var Ere=Array.prototype.filter;function Cre(){return Array.from(this.children)}function _re(e){return function(){return Ere.call(this.children,e)}}function Are(e){return this.selectAll(e==null?Cre:_re(typeof e=="function"?e:YR(e)))}function Nre(e){typeof e!="function"&&(e=VR(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=[],d,h=0;h<s;++h)(d=i[h])&&e.call(d,d.__data__,h,i)&&l.push(d);return new Li(n,this._parents)}function QR(e){return new Array(e.length)}function Lre(){return new Li(this._enter||this._groups.map(QR),this._parents)}function Qm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qm.prototype={constructor:Qm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Pre(e){return function(){return e}}function Rre(e,t,r,n,a,i){for(var s=0,l,d=t.length,h=i.length;s<h;++s)(l=t[s])?(l.__data__=i[s],n[s]=l):r[s]=new Qm(e,i[s]);for(;s<d;++s)(l=t[s])&&(a[s]=l)}function Ire(e,t,r,n,a,i,s){var l,d,h=new Map,p=t.length,f=i.length,m=new Array(p),b;for(l=0;l<p;++l)(d=t[l])&&(m[l]=b=s.call(d,d.__data__,l,t)+"",h.has(b)?a[l]=d:h.set(b,d));for(l=0;l<f;++l)b=s.call(e,i[l],l,i)+"",(d=h.get(b))?(n[l]=d,d.__data__=i[l],h.delete(b)):r[l]=new Qm(e,i[l]);for(l=0;l<p;++l)(d=t[l])&&h.get(m[l])===d&&(a[l]=d)}function Dre(e){return e.__data__}function Mre(e,t){if(!arguments.length)return Array.from(this,Dre);var r=t?Ire:Rre,n=this._parents,a=this._groups;typeof e!="function"&&(e=Pre(e));for(var i=a.length,s=new Array(i),l=new Array(i),d=new Array(i),h=0;h<i;++h){var p=n[h],f=a[h],m=f.length,b=Ore(e.call(p,p&&p.__data__,h,n)),x=b.length,v=l[h]=new Array(x),T=s[h]=new Array(x),k=d[h]=new Array(m);r(p,f,v,T,k,b,t);for(var C=0,A=0,D,B;C<x;++C)if(D=v[C]){for(C>=A&&(A=C+1);!(B=T[A])&&++A<x;);D._next=B||null}}return s=new Li(s,n),s._enter=l,s._exit=d,s}function Ore(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jre(){return new Li(this._exit||this._groups.map(QR),this._parents)}function Bre(e,t,r){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function Fre(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,i=n.length,s=Math.min(a,i),l=new Array(a),d=0;d<s;++d)for(var h=r[d],p=n[d],f=h.length,m=l[d]=new Array(f),b,x=0;x<f;++x)(b=h[x]||p[x])&&(m[x]=b);for(;d<a;++d)l[d]=r[d];return new Li(l,this._parents)}function zre(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,i=n[a],s;--a>=0;)(s=n[a])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Ure(e){e||(e=$re);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var s=r[i],l=s.length,d=a[i]=new Array(l),h,p=0;p<l;++p)(h=s[p])&&(d[p]=h);d.sort(t)}return new Li(a,this._parents).order()}function $re(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qre(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Hre(){return Array.from(this)}function Gre(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var s=n[a];if(s)return s}return null}function Wre(){let e=0;for(const t of this)++e;return e}function Vre(){return!this.node()}function Yre(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,s=a.length,l;i<s;++i)(l=a[i])&&e.call(l,l.__data__,i,a);return this}function Qre(e){return function(){this.removeAttribute(e)}}function Kre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xre(e,t){return function(){this.setAttribute(e,t)}}function Jre(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Zre(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function ene(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function tne(e,t){var r=Q0(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Kre:Qre:typeof t=="function"?r.local?ene:Zre:r.local?Jre:Xre)(r,t))}function KR(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rne(e){return function(){this.style.removeProperty(e)}}function nne(e,t,r){return function(){this.style.setProperty(e,t,r)}}function ane(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function ine(e,t,r){return arguments.length>1?this.each((t==null?rne:typeof t=="function"?ane:nne)(e,t,r??"")):ud(this.node(),e)}function ud(e,t){return e.style.getPropertyValue(t)||KR(e).getComputedStyle(e,null).getPropertyValue(t)}function sne(e){return function(){delete this[e]}}function one(e,t){return function(){this[e]=t}}function lne(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function cne(e,t){return arguments.length>1?this.each((t==null?sne:typeof t=="function"?lne:one)(e,t)):this.node()[e]}function XR(e){return e.trim().split(/^|\s+/)}function hS(e){return e.classList||new JR(e)}function JR(e){this._node=e,this._names=XR(e.getAttribute("class")||"")}JR.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ZR(e,t){for(var r=hS(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function eI(e,t){for(var r=hS(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function une(e){return function(){ZR(this,e)}}function dne(e){return function(){eI(this,e)}}function hne(e,t){return function(){(t.apply(this,arguments)?ZR:eI)(this,e)}}function pne(e,t){var r=XR(e+"");if(arguments.length<2){for(var n=hS(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?hne:t?une:dne)(r,t))}function gne(){this.textContent=""}function fne(e){return function(){this.textContent=e}}function mne(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function yne(e){return arguments.length?this.each(e==null?gne:(typeof e=="function"?mne:fne)(e)):this.node().textContent}function bne(){this.innerHTML=""}function xne(e){return function(){this.innerHTML=e}}function vne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wne(e){return arguments.length?this.each(e==null?bne:(typeof e=="function"?vne:xne)(e)):this.node().innerHTML}function Sne(){this.nextSibling&&this.parentNode.appendChild(this)}function Tne(){return this.each(Sne)}function kne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ene(){return this.each(kne)}function Cne(e){var t=typeof e=="function"?e:GR(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _ne(){return null}function Ane(e,t){var r=typeof e=="function"?e:GR(e),n=t==null?_ne:typeof t=="function"?t:dS(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Nne(){var e=this.parentNode;e&&e.removeChild(this)}function Lne(){return this.each(Nne)}function Pne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ine(e){return this.select(e?Rne:Pne)}function Dne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Mne(e){return function(t){e.call(this,t,this.__data__)}}function One(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function jne(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,i;r<a;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function Bne(e,t,r){return function(){var n=this.__on,a,i=Mne(t);if(n){for(var s=0,l=n.length;s<l;++s)if((a=n[s]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=t;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(a):this.__on=[a]}}function Fne(e,t,r){var n=One(e+""),a,i=n.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,h=l.length,p;d<h;++d)for(a=0,p=l[d];a<i;++a)if((s=n[a]).type===p.type&&s.name===p.name)return p.value}return}for(l=t?Bne:jne,a=0;a<i;++a)this.each(l(n[a],t,r));return this}function tI(e,t,r){var n=KR(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function zne(e,t){return function(){return tI(this,e,t)}}function Une(e,t){return function(){return tI(this,e,t.apply(this,arguments))}}function $ne(e,t){return this.each((typeof t=="function"?Une:zne)(e,t))}function*qne(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length,s;a<i;++a)(s=n[a])&&(yield s)}var rI=[null];function Li(e,t){this._groups=e,this._parents=t}function ug(){return new Li([[document.documentElement]],rI)}function Hne(){return this}Li.prototype=ug.prototype={constructor:Li,select:mre,selectAll:vre,selectChild:kre,selectChildren:Are,filter:Nre,data:Mre,enter:Lre,exit:jre,join:Bre,merge:Fre,selection:Hne,order:zre,sort:Ure,call:qre,nodes:Hre,node:Gre,size:Wre,empty:Vre,each:Yre,attr:tne,style:ine,property:cne,classed:pne,text:yne,html:wne,raise:Tne,lower:Ene,append:Cne,insert:Ane,remove:Lne,clone:Ine,datum:Dne,on:Fne,dispatch:$ne,[Symbol.iterator]:qne};function Cr(e){return typeof e=="string"?new Li([[document.querySelector(e)]],[document.documentElement]):new Li([[e]],rI)}function pS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function nI(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function dg(){}var Dp=.7,Km=1/Dp,Qu="\\s*([+-]?\\d+)\\s*",Mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gne=/^#([0-9a-f]{3,8})$/,Wne=new RegExp(`^rgb\\(${Qu},${Qu},${Qu}\\)$`),Vne=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),Yne=new RegExp(`^rgba\\(${Qu},${Qu},${Qu},${Mp}\\)$`),Qne=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${Mp}\\)$`),Kne=new RegExp(`^hsl\\(${Mp},${Ws},${Ws}\\)$`),Xne=new RegExp(`^hsla\\(${Mp},${Ws},${Ws},${Mp}\\)$`),cA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pS(dg,Op,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uA,formatHex:uA,formatHex8:Jne,formatHsl:Zne,formatRgb:dA,toString:dA});function uA(){return this.rgb().formatHex()}function Jne(){return this.rgb().formatHex8()}function Zne(){return aI(this).formatHsl()}function dA(){return this.rgb().formatRgb()}function Op(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Gne.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?hA(t):r===3?new ci(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Wne.exec(e))?new ci(t[1],t[2],t[3],1):(t=Vne.exec(e))?new ci(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yne.exec(e))?Hf(t[1],t[2],t[3],t[4]):(t=Qne.exec(e))?Hf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kne.exec(e))?fA(t[1],t[2]/100,t[3]/100,1):(t=Xne.exec(e))?fA(t[1],t[2]/100,t[3]/100,t[4]):cA.hasOwnProperty(e)?hA(cA[e]):e==="transparent"?new ci(NaN,NaN,NaN,0):null}function hA(e){return new ci(e>>16&255,e>>8&255,e&255,1)}function Hf(e,t,r,n){return n<=0&&(e=t=r=NaN),new ci(e,t,r,n)}function eae(e){return e instanceof dg||(e=Op(e)),e?(e=e.rgb(),new ci(e.r,e.g,e.b,e.opacity)):new ci}function L1(e,t,r,n){return arguments.length===1?eae(e):new ci(e,t,r,n??1)}function ci(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pS(ci,L1,nI(dg,{brighter(e){return e=e==null?Km:Math.pow(Km,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dp:Math.pow(Dp,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ci(yc(this.r),yc(this.g),yc(this.b),Xm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pA,formatHex:pA,formatHex8:tae,formatRgb:gA,toString:gA}));function pA(){return`#${dc(this.r)}${dc(this.g)}${dc(this.b)}`}function tae(){return`#${dc(this.r)}${dc(this.g)}${dc(this.b)}${dc((isNaN(this.opacity)?1:this.opacity)*255)}`}function gA(){const e=Xm(this.opacity);return`${e===1?"rgb(":"rgba("}${yc(this.r)}, ${yc(this.g)}, ${yc(this.b)}${e===1?")":`, ${e})`}`}function Xm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dc(e){return e=yc(e),(e<16?"0":"")+e.toString(16)}function fA(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xs(e,t,r,n)}function aI(e){if(e instanceof xs)return new xs(e.h,e.s,e.l,e.opacity);if(e instanceof dg||(e=Op(e)),!e)return new xs;if(e instanceof xs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=NaN,l=i-a,d=(i+a)/2;return l?(t===i?s=(r-n)/l+(r<n)*6:r===i?s=(n-t)/l+2:s=(t-r)/l+4,l/=d<.5?i+a:2-i-a,s*=60):l=d>0&&d<1?0:s,new xs(s,l,d,e.opacity)}function rae(e,t,r,n){return arguments.length===1?aI(e):new xs(e,t,r,n??1)}function xs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pS(xs,rae,nI(dg,{brighter(e){return e=e==null?Km:Math.pow(Km,e),new xs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dp:Math.pow(Dp,e),new xs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ci(uv(e>=240?e-240:e+120,a,n),uv(e,a,n),uv(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new xs(mA(this.h),Gf(this.s),Gf(this.l),Xm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xm(this.opacity);return`${e===1?"hsl(":"hsla("}${mA(this.h)}, ${Gf(this.s)*100}%, ${Gf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mA(e){return e=(e||0)%360,e<0?e+360:e}function Gf(e){return Math.max(0,Math.min(1,e||0))}function uv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const gS=e=>()=>e;function iI(e,t){return function(r){return e+r*t}}function nae(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function I0e(e,t){var r=t-e;return r?iI(e,r>180||r<-180?r-360*Math.round(r/360):r):gS(isNaN(e)?t:e)}function aae(e){return(e=+e)==1?sI:function(t,r){return r-t?nae(t,r,e):gS(isNaN(t)?r:t)}}function sI(e,t){var r=t-e;return r?iI(e,r):gS(isNaN(e)?t:e)}const yA=(function e(t){var r=aae(t);function n(a,i){var s=r((a=L1(a)).r,(i=L1(i)).r),l=r(a.g,i.g),d=r(a.b,i.b),h=sI(a.opacity,i.opacity);return function(p){return a.r=s(p),a.g=l(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=e,n})(1);function yl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var P1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dv=new RegExp(P1.source,"g");function iae(e){return function(){return e}}function sae(e){return function(t){return e(t)+""}}function oae(e,t){var r=P1.lastIndex=dv.lastIndex=0,n,a,i,s=-1,l=[],d=[];for(e=e+"",t=t+"";(n=P1.exec(e))&&(a=dv.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[s]?l[s]+=i:l[++s]=i),(n=n[0])===(a=a[0])?l[s]?l[s]+=a:l[++s]=a:(l[++s]=null,d.push({i:s,x:yl(n,a)})),r=dv.lastIndex;return r<t.length&&(i=t.slice(r),l[s]?l[s]+=i:l[++s]=i),l.length<2?d[0]?sae(d[0].x):iae(t):(t=d.length,function(h){for(var p=0,f;p<t;++p)l[(f=d[p]).i]=f.x(h);return l.join("")})}var bA=180/Math.PI,R1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oI(e,t,r,n,a,i){var s,l,d;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,d/=l),e*n<t*r&&(e=-e,t=-t,d=-d,s=-s),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*bA,skewX:Math.atan(d)*bA,scaleX:s,scaleY:l}}var Wf;function lae(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?R1:oI(t.a,t.b,t.c,t.d,t.e,t.f)}function cae(e){return e==null||(Wf||(Wf=document.createElementNS("http://www.w3.org/2000/svg","g")),Wf.setAttribute("transform",e),!(e=Wf.transform.baseVal.consolidate()))?R1:(e=e.matrix,oI(e.a,e.b,e.c,e.d,e.e,e.f))}function lI(e,t,r,n){function a(h){return h.length?h.pop()+" ":""}function i(h,p,f,m,b,x){if(h!==f||p!==m){var v=b.push("translate(",null,t,null,r);x.push({i:v-4,x:yl(h,f)},{i:v-2,x:yl(p,m)})}else(f||m)&&b.push("translate("+f+t+m+r)}function s(h,p,f,m){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),m.push({i:f.push(a(f)+"rotate(",null,n)-2,x:yl(h,p)})):p&&f.push(a(f)+"rotate("+p+n)}function l(h,p,f,m){h!==p?m.push({i:f.push(a(f)+"skewX(",null,n)-2,x:yl(h,p)}):p&&f.push(a(f)+"skewX("+p+n)}function d(h,p,f,m,b,x){if(h!==f||p!==m){var v=b.push(a(b)+"scale(",null,",",null,")");x.push({i:v-4,x:yl(h,f)},{i:v-2,x:yl(p,m)})}else(f!==1||m!==1)&&b.push(a(b)+"scale("+f+","+m+")")}return function(h,p){var f=[],m=[];return h=e(h),p=e(p),i(h.translateX,h.translateY,p.translateX,p.translateY,f,m),s(h.rotate,p.rotate,f,m),l(h.skewX,p.skewX,f,m),d(h.scaleX,h.scaleY,p.scaleX,p.scaleY,f,m),h=p=null,function(b){for(var x=-1,v=m.length,T;++x<v;)f[(T=m[x]).i]=T.x(b);return f.join("")}}}var uae=lI(lae,"px, ","px)","deg)"),dae=lI(cae,", ",")",")"),dd=0,Zh=0,$h=0,cI=1e3,Jm,ep,Zm=0,Cc=0,K0=0,jp=typeof performance=="object"&&performance.now?performance:Date,uI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fS(){return Cc||(uI(hae),Cc=jp.now()+K0)}function hae(){Cc=0}function e0(){this._call=this._time=this._next=null}e0.prototype=dI.prototype={constructor:e0,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?fS():+r)+(t==null?0:+t),!this._next&&ep!==this&&(ep?ep._next=this:Jm=this,ep=this),this._call=e,this._time=r,I1()},stop:function(){this._call&&(this._call=null,this._time=1/0,I1())}};function dI(e,t,r){var n=new e0;return n.restart(e,t,r),n}function pae(){fS(),++dd;for(var e=Jm,t;e;)(t=Cc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--dd}function xA(){Cc=(Zm=jp.now())+K0,dd=Zh=0;try{pae()}finally{dd=0,fae(),Cc=0}}function gae(){var e=jp.now(),t=e-Zm;t>cI&&(K0-=t,Zm=e)}function fae(){for(var e,t=Jm,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Jm=r);ep=e,I1(n)}function I1(e){if(!dd){Zh&&(Zh=clearTimeout(Zh));var t=e-Cc;t>24?(e<1/0&&(Zh=setTimeout(xA,e-jp.now()-K0)),$h&&($h=clearInterval($h))):($h||(Zm=jp.now(),$h=setInterval(gae,cI)),dd=1,uI(xA))}}function vA(e,t,r){var n=new e0;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var mae=HR("start","end","cancel","interrupt"),yae=[],hI=0,wA=1,D1=2,mm=3,SA=4,M1=5,ym=6;function X0(e,t,r,n,a,i){var s=e.__transition;if(!s)e.__transition={};else if(r in s)return;bae(e,r,{name:t,index:n,group:a,on:mae,tween:yae,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:hI})}function mS(e,t){var r=Cs(e,t);if(r.state>hI)throw new Error("too late; already scheduled");return r}function Zs(e,t){var r=Cs(e,t);if(r.state>mm)throw new Error("too late; already running");return r}function Cs(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function bae(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=dI(i,0,r.time);function i(h){r.state=wA,r.timer.restart(s,r.delay,r.time),r.delay<=h&&s(h-r.delay)}function s(h){var p,f,m,b;if(r.state!==wA)return d();for(p in n)if(b=n[p],b.name===r.name){if(b.state===mm)return vA(s);b.state===SA?(b.state=ym,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete n[p]):+p<t&&(b.state=ym,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete n[p])}if(vA(function(){r.state===mm&&(r.state=SA,r.timer.restart(l,r.delay,r.time),l(h))}),r.state=D1,r.on.call("start",e,e.__data__,r.index,r.group),r.state===D1){for(r.state=mm,a=new Array(m=r.tween.length),p=0,f=-1;p<m;++p)(b=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=b);a.length=f+1}}function l(h){for(var p=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(d),r.state=M1,1),f=-1,m=a.length;++f<m;)a[f].call(e,p);r.state===M1&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=ym,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function xae(e,t){var r=e.__transition,n,a,i=!0,s;if(r){t=t==null?null:t+"";for(s in r){if((n=r[s]).name!==t){i=!1;continue}a=n.state>D1&&n.state<M1,n.state=ym,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[s]}i&&delete e.__transition}}function vae(e){return this.each(function(){xae(this,e)})}function wae(e,t){var r,n;return function(){var a=Zs(this,e),i=a.tween;if(i!==r){n=r=i;for(var s=0,l=n.length;s<l;++s)if(n[s].name===t){n=n.slice(),n.splice(s,1);break}}a.tween=n}}function Sae(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=Zs(this,e),s=i.tween;if(s!==n){a=(n=s).slice();for(var l={name:t,value:r},d=0,h=a.length;d<h;++d)if(a[d].name===t){a[d]=l;break}d===h&&a.push(l)}i.tween=a}}function Tae(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Cs(this.node(),r).tween,a=0,i=n.length,s;a<i;++a)if((s=n[a]).name===e)return s.value;return null}return this.each((t==null?wae:Sae)(r,e,t))}function yS(e,t,r){var n=e._id;return e.each(function(){var a=Zs(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Cs(a,n).value[t]}}function pI(e,t){var r;return(typeof t=="number"?yl:t instanceof Op?yA:(r=Op(t))?(t=r,yA):oae)(e,t)}function kae(e){return function(){this.removeAttribute(e)}}function Eae(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cae(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttribute(e);return s===a?null:s===n?i:i=t(n=s,r)}}function _ae(e,t,r){var n,a=r+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===n?i:i=t(n=s,r)}}function Aae(e,t,r){var n,a,i;return function(){var s,l=r(this),d;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),d=l+"",s===d?null:s===n&&d===a?i:(a=d,i=t(n=s,l)))}}function Nae(e,t,r){var n,a,i;return function(){var s,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),d=l+"",s===d?null:s===n&&d===a?i:(a=d,i=t(n=s,l)))}}function Lae(e,t){var r=Q0(e),n=r==="transform"?dae:pI;return this.attrTween(e,typeof t=="function"?(r.local?Nae:Aae)(r,n,yS(this,"attr."+e,t)):t==null?(r.local?Eae:kae)(r):(r.local?_ae:Cae)(r,n,t))}function Pae(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Rae(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Iae(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Rae(e,i)),r}return a._value=t,a}function Dae(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&Pae(e,i)),r}return a._value=t,a}function Mae(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Q0(e);return this.tween(r,(n.local?Iae:Dae)(n,t))}function Oae(e,t){return function(){mS(this,e).delay=+t.apply(this,arguments)}}function jae(e,t){return t=+t,function(){mS(this,e).delay=t}}function Bae(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Oae:jae)(t,e)):Cs(this.node(),t).delay}function Fae(e,t){return function(){Zs(this,e).duration=+t.apply(this,arguments)}}function zae(e,t){return t=+t,function(){Zs(this,e).duration=t}}function Uae(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fae:zae)(t,e)):Cs(this.node(),t).duration}function $ae(e,t){if(typeof t!="function")throw new Error;return function(){Zs(this,e).ease=t}}function qae(e){var t=this._id;return arguments.length?this.each($ae(t,e)):Cs(this.node(),t).ease}function Hae(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Zs(this,e).ease=r}}function Gae(e){if(typeof e!="function")throw new Error;return this.each(Hae(this._id,e))}function Wae(e){typeof e!="function"&&(e=VR(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],s=i.length,l=n[a]=[],d,h=0;h<s;++h)(d=i[h])&&e.call(d,d.__data__,h,i)&&l.push(d);return new Po(n,this._parents,this._name,this._id)}function Vae(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,i=Math.min(n,a),s=new Array(n),l=0;l<i;++l)for(var d=t[l],h=r[l],p=d.length,f=s[l]=new Array(p),m,b=0;b<p;++b)(m=d[b]||h[b])&&(f[b]=m);for(;l<n;++l)s[l]=t[l];return new Po(s,this._parents,this._name,this._id)}function Yae(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Qae(e,t,r){var n,a,i=Yae(t)?mS:Zs;return function(){var s=i(this,e),l=s.on;l!==n&&(a=(n=l).copy()).on(t,r),s.on=a}}function Kae(e,t){var r=this._id;return arguments.length<2?Cs(this.node(),r).on.on(e):this.each(Qae(r,e,t))}function Xae(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Jae(){return this.on("end.remove",Xae(this._id))}function Zae(e){var t=this._name,r=this._id;typeof e!="function"&&(e=dS(e));for(var n=this._groups,a=n.length,i=new Array(a),s=0;s<a;++s)for(var l=n[s],d=l.length,h=i[s]=new Array(d),p,f,m=0;m<d;++m)(p=l[m])&&(f=e.call(p,p.__data__,m,l))&&("__data__"in p&&(f.__data__=p.__data__),h[m]=f,X0(h[m],t,r,m,h,Cs(p,r)));return new Po(i,this._parents,t,r)}function eie(e){var t=this._name,r=this._id;typeof e!="function"&&(e=WR(e));for(var n=this._groups,a=n.length,i=[],s=[],l=0;l<a;++l)for(var d=n[l],h=d.length,p,f=0;f<h;++f)if(p=d[f]){for(var m=e.call(p,p.__data__,f,d),b,x=Cs(p,r),v=0,T=m.length;v<T;++v)(b=m[v])&&X0(b,t,r,v,m,x);i.push(m),s.push(p)}return new Po(i,s,t,r)}var tie=ug.prototype.constructor;function rie(){return new tie(this._groups,this._parents)}function nie(e,t){var r,n,a;return function(){var i=ud(this,e),s=(this.style.removeProperty(e),ud(this,e));return i===s?null:i===r&&s===n?a:a=t(r=i,n=s)}}function gI(e){return function(){this.style.removeProperty(e)}}function aie(e,t,r){var n,a=r+"",i;return function(){var s=ud(this,e);return s===a?null:s===n?i:i=t(n=s,r)}}function iie(e,t,r){var n,a,i;return function(){var s=ud(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),ud(this,e))),s===d?null:s===n&&d===a?i:(a=d,i=t(n=s,l))}}function sie(e,t){var r,n,a,i="style."+t,s="end."+i,l;return function(){var d=Zs(this,e),h=d.on,p=d.value[i]==null?l||(l=gI(t)):void 0;(h!==r||a!==p)&&(n=(r=h).copy()).on(s,a=p),d.on=n}}function oie(e,t,r){var n=(e+="")=="transform"?uae:pI;return t==null?this.styleTween(e,nie(e,n)).on("end.style."+e,gI(e)):typeof t=="function"?this.styleTween(e,iie(e,n,yS(this,"style."+e,t))).each(sie(this._id,e)):this.styleTween(e,aie(e,n,t),r).on("end.style."+e,null)}function lie(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function cie(e,t,r){var n,a;function i(){var s=t.apply(this,arguments);return s!==a&&(n=(a=s)&&lie(e,s,r)),n}return i._value=t,i}function uie(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,cie(e,t,r??""))}function die(e){return function(){this.textContent=e}}function hie(e){return function(){var t=e(this);this.textContent=t??""}}function pie(e){return this.tween("text",typeof e=="function"?hie(yS(this,"text",e)):die(e==null?"":e+""))}function gie(e){return function(t){this.textContent=e.call(this,t)}}function fie(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&gie(a)),t}return n._value=e,n}function mie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,fie(e))}function yie(){for(var e=this._name,t=this._id,r=fI(),n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],l=s.length,d,h=0;h<l;++h)if(d=s[h]){var p=Cs(d,t);X0(d,e,r,h,s,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Po(n,this._parents,e,r)}function bie(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(i,s){var l={value:s},d={value:function(){--a===0&&i()}};r.each(function(){var h=Zs(this,n),p=h.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),h.on=t}),a===0&&i()})}var xie=0;function Po(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function fI(){return++xie}var So=ug.prototype;Po.prototype={constructor:Po,select:Zae,selectAll:eie,selectChild:So.selectChild,selectChildren:So.selectChildren,filter:Wae,merge:Vae,selection:rie,transition:yie,call:So.call,nodes:So.nodes,node:So.node,size:So.size,empty:So.empty,each:So.each,on:Kae,attr:Lae,attrTween:Mae,style:oie,styleTween:uie,text:pie,textTween:mie,remove:Jae,tween:Tae,delay:Bae,duration:Uae,ease:qae,easeVarying:Gae,end:bie,[Symbol.iterator]:So[Symbol.iterator]};function vie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wie={time:null,delay:0,duration:250,ease:vie};function Sie(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Tie(e){var t,r;e instanceof Po?(t=e._id,e=e._name):(t=fI(),(r=wie).time=fS(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var s=n[i],l=s.length,d,h=0;h<l;++h)(d=s[h])&&X0(d,e,t,h,s,r||Sie(d,t));return new Po(n,this._parents,e,t)}ug.prototype.interrupt=vae;ug.prototype.transition=Tie;const O1=Math.PI,j1=2*O1,ic=1e-6,kie=j1-ic;function mI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Eie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mI;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Cie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mI:Eie(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,s){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,l=this._y1,d=n-t,h=a-r,p=s-t,f=l-r,m=p*p+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>ic)if(!(Math.abs(f*d-h*p)>ic)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-s,x=a-l,v=d*d+h*h,T=b*b+x*x,k=Math.sqrt(v),C=Math.sqrt(m),A=i*Math.tan((O1-Math.acos((v+m-T)/(2*k*C)))/2),D=A/C,B=A/k;Math.abs(D-1)>ic&&this._append`L${t+D*p},${r+D*f}`,this._append`A${i},${i},0,0,${+(f*b>p*x)},${this._x1=t+B*d},${this._y1=r+B*h}`}}arc(t,r,n,a,i,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),d=n*Math.sin(a),h=t+l,p=r+d,f=1^s,m=s?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ic||Math.abs(this._y1-p)>ic)&&this._append`L${h},${p}`,n&&(m<0&&(m=m%j1+j1),m>kie?this._append`A${n},${n},0,1,${f},${t-l},${r-d}A${n},${n},0,1,${f},${this._x1=h},${this._y1=p}`:m>ic&&this._append`A${n},${n},0,${+(m>=O1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Ru(e){return function(){return e}}const D0e=Math.abs,M0e=Math.atan2,O0e=Math.cos,j0e=Math.max,B0e=Math.min,F0e=Math.sin,z0e=Math.sqrt,TA=1e-12,bS=Math.PI,kA=bS/2,U0e=2*bS;function $0e(e){return e>1?0:e<-1?bS:Math.acos(e)}function q0e(e){return e>=1?kA:e<=-1?-kA:Math.asin(e)}function _ie(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Cie(t)}function Aie(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yI(e){this._context=e}yI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function t0(e){return new yI(e)}function Nie(e){return e[0]}function Lie(e){return e[1]}function Pie(e,t){var r=Ru(!0),n=null,a=t0,i=null,s=_ie(l);e=typeof e=="function"?e:e===void 0?Nie:Ru(e),t=typeof t=="function"?t:t===void 0?Lie:Ru(t);function l(d){var h,p=(d=Aie(d)).length,f,m=!1,b;for(n==null&&(i=a(b=s())),h=0;h<=p;++h)!(h<p&&r(f=d[h],h,d))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,h,d),+t(f,h,d));if(b)return i=null,b+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ru(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ru(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Ru(!!d),l):r},l.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),l):a},l.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),l):n},l}class bI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function xI(e){return new bI(e,!0)}function vI(e){return new bI(e,!1)}function kl(){}function r0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function J0(e){this._context=e}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bm(e){return new J0(e)}function wI(e){this._context=e}wI.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rie(e){return new wI(e)}function SI(e){this._context=e}SI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:r0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Iie(e){return new SI(e)}function TI(e,t){this._basis=new J0(e),this._beta=t}TI.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],a=t[0],i=e[r]-n,s=t[r]-a,l=-1,d;++l<=r;)d=l/r,this._basis.point(this._beta*e[l]+(1-this._beta)*(n+d*i),this._beta*t[l]+(1-this._beta)*(a+d*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Die=(function e(t){function r(n){return t===1?new J0(n):new TI(n,t)}return r.beta=function(n){return e(+n)},r})(.85);function n0(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function xS(e,t){this._context=e,this._k=(1-t)/6}xS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:n0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:n0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kI=(function e(t){function r(n){return new xS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function vS(e,t){this._context=e,this._k=(1-t)/6}vS.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:n0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Mie=(function e(t){function r(n){return new vS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function wS(e,t){this._context=e,this._k=(1-t)/6}wS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:n0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oie=(function e(t){function r(n){return new wS(n,t)}return r.tension=function(n){return e(+n)},r})(0);function SS(e,t,r){var n=e._x1,a=e._y1,i=e._x2,s=e._y2;if(e._l01_a>TA){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,a=(a*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>TA){var h=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*h+e._x1*e._l23_2a-t*e._l12_2a)/p,s=(s*h+e._y1*e._l23_2a-r*e._l12_2a)/p}e._context.bezierCurveTo(n,a,i,s,e._x2,e._y2)}function EI(e,t){this._context=e,this._alpha=t}EI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:SS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const CI=(function e(t){function r(n){return t?new EI(n,t):new xS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function _I(e,t){this._context=e,this._alpha=t}_I.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:SS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jie=(function e(t){function r(n){return t?new _I(n,t):new vS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function AI(e,t){this._context=e,this._alpha=t}AI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:SS(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bie=(function e(t){function r(n){return t?new AI(n,t):new wS(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function NI(e){this._context=e}NI.prototype={areaStart:kl,areaEnd:kl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Fie(e){return new NI(e)}function EA(e){return e<0?-1:1}function CA(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),s=(r-e._y1)/(a||n<0&&-0),l=(i*a+s*n)/(n+a);return(EA(i)+EA(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(l))||0}function _A(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function hv(e,t,r){var n=e._x0,a=e._y0,i=e._x1,s=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,s-l*r,i,s)}function a0(e){this._context=e}a0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hv(this,this._t0,_A(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hv(this,_A(this,r=CA(this,e,t)),r);break;default:hv(this,this._t0,r=CA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function LI(e){this._context=new PI(e)}(LI.prototype=Object.create(a0.prototype)).point=function(e,t){a0.prototype.point.call(this,t,e)};function PI(e){this._context=e}PI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function RI(e){return new a0(e)}function II(e){return new LI(e)}function DI(e){this._context=e}DI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=AA(e),a=AA(t),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function AA(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,s[t]-=n*s[t-1];for(a[r-1]=s[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(s[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function MI(e){return new DI(e)}function Z0(e,t){this._context=e,this._t=t}Z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function OI(e){return new Z0(e,.5)}function jI(e){return new Z0(e,0)}function BI(e){return new Z0(e,1)}function tp(e,t,r){this.k=e,this.x=t,this.y=r}tp.prototype={constructor:tp,scale:function(e){return e===1?this:new tp(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tp(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};tp.prototype;var zie=L(e=>{const{securityLevel:t}=Br();let r=Cr("body");if(t==="sandbox"){const i=Cr(`#i${e}`).node()?.contentDocument??document;r=Cr(i.body)}return r.select(`#${e}`)},"selectSvgElement");function TS(e){return typeof e>"u"||e===null}L(TS,"isNothing");function FI(e){return typeof e=="object"&&e!==null}L(FI,"isObject");function zI(e){return Array.isArray(e)?e:TS(e)?[]:[e]}L(zI,"toArray");function UI(e,t){var r,n,a,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)a=i[r],e[a]=t[a];return e}L(UI,"extend");function $I(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}L($I,"repeat");function qI(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}L(qI,"isNegativeZero");var Uie=TS,$ie=FI,qie=zI,Hie=$I,Gie=qI,Wie=UI,Kn={isNothing:Uie,isObject:$ie,toArray:qie,repeat:Hie,isNegativeZero:Gie,extend:Wie};function kS(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}L(kS,"formatError");function hd(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=kS(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}L(hd,"YAMLException$1");hd.prototype=Object.create(Error.prototype);hd.prototype.constructor=hd;hd.prototype.toString=L(function(t){return this.name+": "+kS(this,t)},"toString");var li=hd;function xm(e,t,r,n,a){var i="",s="",l=Math.floor(a/2)-1;return n-t>l&&(i=" ... ",t=n-l+i.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:i+e.slice(t,r).replace(/\t/g,"")+s,pos:n-t+i.length}}L(xm,"getLine");function vm(e,t){return Kn.repeat(" ",t-e.length)+e}L(vm,"padStart");function HI(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],a=[],i,s=-1;i=r.exec(e.buffer);)a.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",d,h,p=Math.min(e.line+t.linesAfter,a.length).toString().length,f=t.maxLength-(t.indent+p+3);for(d=1;d<=t.linesBefore&&!(s-d<0);d++)h=xm(e.buffer,n[s-d],a[s-d],e.position-(n[s]-n[s-d]),f),l=Kn.repeat(" ",t.indent)+vm((e.line-d+1).toString(),p)+" | "+h.str+`
`+l;for(h=xm(e.buffer,n[s],a[s],e.position,f),l+=Kn.repeat(" ",t.indent)+vm((e.line+1).toString(),p)+" | "+h.str+`
`,l+=Kn.repeat("-",t.indent+p+3+h.pos)+`^
`,d=1;d<=t.linesAfter&&!(s+d>=a.length);d++)h=xm(e.buffer,n[s+d],a[s+d],e.position-(n[s]-n[s+d]),f),l+=Kn.repeat(" ",t.indent)+vm((e.line+d+1).toString(),p)+" | "+h.str+`
`;return l.replace(/\n$/,"")}L(HI,"makeSnippet");var Vie=HI,Yie=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Qie=["scalar","sequence","mapping"];function GI(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}L(GI,"compileStyleAliases");function WI(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Yie.indexOf(r)===-1)throw new li('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=GI(t.styleAliases||null),Qie.indexOf(this.kind)===-1)throw new li('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}L(WI,"Type$1");var La=WI;function B1(e,t){var r=[];return e[t].forEach(function(n){var a=r.length;r.forEach(function(i,s){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(a=s)}),r[a]=n}),r}L(B1,"compileList");function VI(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(L(n,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}L(VI,"compileMap");function i0(e){return this.extend(e)}L(i0,"Schema$1");i0.prototype.extend=L(function(t){var r=[],n=[];if(t instanceof La)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new li("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof La))throw new li("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new li("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new li("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof La))throw new li("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(i0.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=B1(a,"implicit"),a.compiledExplicit=B1(a,"explicit"),a.compiledTypeMap=VI(a.compiledImplicit,a.compiledExplicit),a},"extend");var Kie=i0,Xie=new La("tag:yaml.org,2002:str",{kind:"scalar",construct:L(function(e){return e!==null?e:""},"construct")}),Jie=new La("tag:yaml.org,2002:seq",{kind:"sequence",construct:L(function(e){return e!==null?e:[]},"construct")}),Zie=new La("tag:yaml.org,2002:map",{kind:"mapping",construct:L(function(e){return e!==null?e:{}},"construct")}),ese=new Kie({explicit:[Xie,Jie,Zie]});function YI(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}L(YI,"resolveYamlNull");function QI(){return null}L(QI,"constructYamlNull");function KI(e){return e===null}L(KI,"isNull");var tse=new La("tag:yaml.org,2002:null",{kind:"scalar",resolve:YI,construct:QI,predicate:KI,represent:{canonical:L(function(){return"~"},"canonical"),lowercase:L(function(){return"null"},"lowercase"),uppercase:L(function(){return"NULL"},"uppercase"),camelcase:L(function(){return"Null"},"camelcase"),empty:L(function(){return""},"empty")},defaultStyle:"lowercase"});function XI(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}L(XI,"resolveYamlBoolean");function JI(e){return e==="true"||e==="True"||e==="TRUE"}L(JI,"constructYamlBoolean");function ZI(e){return Object.prototype.toString.call(e)==="[object Boolean]"}L(ZI,"isBoolean");var rse=new La("tag:yaml.org,2002:bool",{kind:"scalar",resolve:XI,construct:JI,predicate:ZI,represent:{lowercase:L(function(e){return e?"true":"false"},"lowercase"),uppercase:L(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:L(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function eD(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}L(eD,"isHexCode");function tD(e){return 48<=e&&e<=55}L(tD,"isOctCode");function rD(e){return 48<=e&&e<=57}L(rD,"isDecCode");function nD(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!eD(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!tD(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!rD(e.charCodeAt(r)))return!1;n=!0}return!(!n||a==="_")}L(nD,"resolveYamlInteger");function aD(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}L(aD,"constructYamlInteger");function iD(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Kn.isNegativeZero(e)}L(iD,"isInteger");var nse=new La("tag:yaml.org,2002:int",{kind:"scalar",resolve:nD,construct:aD,predicate:iD,represent:{binary:L(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:L(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:L(function(e){return e.toString(10)},"decimal"),hexadecimal:L(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ase=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sD(e){return!(e===null||!ase.test(e)||e[e.length-1]==="_")}L(sD,"resolveYamlFloat");function oD(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}L(oD,"constructYamlFloat");var ise=/^[-+]?[0-9]+e/;function lD(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Kn.isNegativeZero(e))return"-0.0";return r=e.toString(10),ise.test(r)?r.replace("e",".e"):r}L(lD,"representYamlFloat");function cD(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Kn.isNegativeZero(e))}L(cD,"isFloat");var sse=new La("tag:yaml.org,2002:float",{kind:"scalar",resolve:sD,construct:oD,predicate:cD,represent:lD,defaultStyle:"lowercase"}),uD=ese.extend({implicit:[tse,rse,nse,sse]}),ose=uD,dD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),hD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function pD(e){return e===null?!1:dD.exec(e)!==null||hD.exec(e)!==null}L(pD,"resolveYamlTimestamp");function gD(e){var t,r,n,a,i,s,l,d=0,h=null,p,f,m;if(t=dD.exec(e),t===null&&(t=hD.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(i=+t[4],s=+t[5],l=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(p=+t[10],f=+(t[11]||0),h=(p*60+f)*6e4,t[9]==="-"&&(h=-h)),m=new Date(Date.UTC(r,n,a,i,s,l,d)),h&&m.setTime(m.getTime()-h),m}L(gD,"constructYamlTimestamp");function fD(e){return e.toISOString()}L(fD,"representYamlTimestamp");var lse=new La("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:pD,construct:gD,instanceOf:Date,represent:fD});function mD(e){return e==="<<"||e===null}L(mD,"resolveYamlMerge");var cse=new La("tag:yaml.org,2002:merge",{kind:"scalar",resolve:mD}),ES=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function yD(e){if(e===null)return!1;var t,r,n=0,a=e.length,i=ES;for(r=0;r<a;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}L(yD,"resolveYamlBinary");function bD(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,i=ES,s=0,l=[];for(t=0;t<a;t++)t%4===0&&t&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|i.indexOf(n.charAt(t));return r=a%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}L(bD,"constructYamlBinary");function xD(e){var t="",r=0,n,a,i=e.length,s=ES;for(n=0;n<i;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return a=i%3,a===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):a===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):a===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}L(xD,"representYamlBinary");function vD(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}L(vD,"isBinary");var use=new La("tag:yaml.org,2002:binary",{kind:"scalar",resolve:yD,construct:bD,predicate:vD,represent:xD}),dse=Object.prototype.hasOwnProperty,hse=Object.prototype.toString;function wD(e){if(e===null)return!0;var t=[],r,n,a,i,s,l=e;for(r=0,n=l.length;r<n;r+=1){if(a=l[r],s=!1,hse.call(a)!=="[object Object]")return!1;for(i in a)if(dse.call(a,i))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}L(wD,"resolveYamlOmap");function SD(e){return e!==null?e:[]}L(SD,"constructYamlOmap");var pse=new La("tag:yaml.org,2002:omap",{kind:"sequence",resolve:wD,construct:SD}),gse=Object.prototype.toString;function TD(e){if(e===null)return!0;var t,r,n,a,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],gse.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;i[t]=[a[0],n[a[0]]]}return!0}L(TD,"resolveYamlPairs");function kD(e){if(e===null)return[];var t,r,n,a,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],a=Object.keys(n),i[t]=[a[0],n[a[0]]];return i}L(kD,"constructYamlPairs");var fse=new La("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:TD,construct:kD}),mse=Object.prototype.hasOwnProperty;function ED(e){if(e===null)return!0;var t,r=e;for(t in r)if(mse.call(r,t)&&r[t]!==null)return!1;return!0}L(ED,"resolveYamlSet");function CD(e){return e!==null?e:{}}L(CD,"constructYamlSet");var yse=new La("tag:yaml.org,2002:set",{kind:"mapping",resolve:ED,construct:CD}),_D=ose.extend({implicit:[lse,cse],explicit:[use,pse,fse,yse]}),El=Object.prototype.hasOwnProperty,s0=1,AD=2,ND=3,o0=4,pv=1,bse=2,NA=3,xse=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vse=/[\x85\u2028\u2029]/,wse=/[,\[\]\{\}]/,LD=/^(?:!|!!|![a-z\-]+!)$/i,PD=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function F1(e){return Object.prototype.toString.call(e)}L(F1,"_class");function Ss(e){return e===10||e===13}L(Ss,"is_EOL");function Tl(e){return e===9||e===32}L(Tl,"is_WHITE_SPACE");function Ha(e){return e===9||e===32||e===10||e===13}L(Ha,"is_WS_OR_EOL");function hc(e){return e===44||e===91||e===93||e===123||e===125}L(hc,"is_FLOW_INDICATOR");function RD(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}L(RD,"fromHexCode");function ID(e){return e===120?2:e===117?4:e===85?8:0}L(ID,"escapedHexLen");function DD(e){return 48<=e&&e<=57?e-48:-1}L(DD,"fromDecimalCode");function z1(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}L(z1,"simpleEscapeSequence");function MD(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}L(MD,"charFromCodepoint");var OD=new Array(256),jD=new Array(256);for(rc=0;rc<256;rc++)OD[rc]=z1(rc)?1:0,jD[rc]=z1(rc);var rc;function BD(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||_D,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}L(BD,"State$1");function CS(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Vie(r),new li(t,r)}L(CS,"generateError");function At(e,t){throw CS(e,t)}L(At,"throwError");function Bp(e,t){e.onWarning&&e.onWarning.call(null,CS(e,t))}L(Bp,"throwWarning");var LA={YAML:L(function(t,r,n){var a,i,s;t.version!==null&&At(t,"duplication of %YAML directive"),n.length!==1&&At(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&At(t,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),s=parseInt(a[2],10),i!==1&&At(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Bp(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:L(function(t,r,n){var a,i;n.length!==2&&At(t,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],LD.test(a)||At(t,"ill-formed tag handle (first argument) of the TAG directive"),El.call(t.tagMap,a)&&At(t,'there is a previously declared suffix for "'+a+'" tag handle'),PD.test(i)||At(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{At(t,"tag prefix is malformed: "+i)}t.tagMap[a]=i},"handleTagDirective")};function No(e,t,r,n){var a,i,s,l;if(t<r){if(l=e.input.slice(t,r),n)for(a=0,i=l.length;a<i;a+=1)s=l.charCodeAt(a),s===9||32<=s&&s<=1114111||At(e,"expected valid JSON character");else xse.test(l)&&At(e,"the stream contains non-printable characters");e.result+=l}}L(No,"captureSegment");function U1(e,t,r,n){var a,i,s,l;for(Kn.isObject(r)||At(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),s=0,l=a.length;s<l;s+=1)i=a[s],El.call(t,i)||(t[i]=r[i],n[i]=!0)}L(U1,"mergeMappings");function pc(e,t,r,n,a,i,s,l,d){var h,p;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),h=0,p=a.length;h<p;h+=1)Array.isArray(a[h])&&At(e,"nested arrays are not supported inside keys"),typeof a=="object"&&F1(a[h])==="[object Object]"&&(a[h]="[object Object]");if(typeof a=="object"&&F1(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(h=0,p=i.length;h<p;h+=1)U1(e,t,i[h],r);else U1(e,t,i,r);else!e.json&&!El.call(r,a)&&El.call(t,a)&&(e.line=s||e.line,e.lineStart=l||e.lineStart,e.position=d||e.position,At(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[a]=i,delete r[a];return t}L(pc,"storeMappingPair");function ey(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):At(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}L(ey,"readLineBreak");function Dn(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Tl(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Ss(a))for(ey(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Bp(e,"deficient indentation"),n}L(Dn,"skipSeparationSpace");function hg(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Ha(r)))}L(hg,"testDocumentSeparator");function ty(e,t){t===1?e.result+=" ":t>1&&(e.result+=Kn.repeat(`
`,t-1))}L(ty,"writeFoldedLines");function FD(e,t,r){var n,a,i,s,l,d,h,p,f=e.kind,m=e.result,b;if(b=e.input.charCodeAt(e.position),Ha(b)||hc(b)||b===35||b===38||b===42||b===33||b===124||b===62||b===39||b===34||b===37||b===64||b===96||(b===63||b===45)&&(a=e.input.charCodeAt(e.position+1),Ha(a)||r&&hc(a)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,l=!1;b!==0;){if(b===58){if(a=e.input.charCodeAt(e.position+1),Ha(a)||r&&hc(a))break}else if(b===35){if(n=e.input.charCodeAt(e.position-1),Ha(n))break}else{if(e.position===e.lineStart&&hg(e)||r&&hc(b))break;if(Ss(b))if(d=e.line,h=e.lineStart,p=e.lineIndent,Dn(e,!1,-1),e.lineIndent>=t){l=!0,b=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=d,e.lineStart=h,e.lineIndent=p;break}}l&&(No(e,i,s,!1),ty(e,e.line-d),i=s=e.position,l=!1),Tl(b)||(s=e.position+1),b=e.input.charCodeAt(++e.position)}return No(e,i,s,!1),e.result?!0:(e.kind=f,e.result=m,!1)}L(FD,"readPlainScalar");function zD(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(No(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else Ss(r)?(No(e,n,a,!0),ty(e,Dn(e,!1,t)),n=a=e.position):e.position===e.lineStart&&hg(e)?At(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);At(e,"unexpected end of the stream within a single quoted scalar")}L(zD,"readSingleQuotedScalar");function UD(e,t){var r,n,a,i,s,l;if(l=e.input.charCodeAt(e.position),l!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(l=e.input.charCodeAt(e.position))!==0;){if(l===34)return No(e,r,e.position,!0),e.position++,!0;if(l===92){if(No(e,r,e.position,!0),l=e.input.charCodeAt(++e.position),Ss(l))Dn(e,!1,t);else if(l<256&&OD[l])e.result+=jD[l],e.position++;else if((s=ID(l))>0){for(a=s,i=0;a>0;a--)l=e.input.charCodeAt(++e.position),(s=RD(l))>=0?i=(i<<4)+s:At(e,"expected hexadecimal character");e.result+=MD(i),e.position++}else At(e,"unknown escape sequence");r=n=e.position}else Ss(l)?(No(e,r,n,!0),ty(e,Dn(e,!1,t)),r=n=e.position):e.position===e.lineStart&&hg(e)?At(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}At(e,"unexpected end of the stream within a double quoted scalar")}L(UD,"readDoubleQuotedScalar");function $D(e,t){var r=!0,n,a,i,s=e.tag,l,d=e.anchor,h,p,f,m,b,x=Object.create(null),v,T,k,C;if(C=e.input.charCodeAt(e.position),C===91)p=93,b=!1,l=[];else if(C===123)p=125,b=!0,l={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),C=e.input.charCodeAt(++e.position);C!==0;){if(Dn(e,!0,t),C=e.input.charCodeAt(e.position),C===p)return e.position++,e.tag=s,e.anchor=d,e.kind=b?"mapping":"sequence",e.result=l,!0;r?C===44&&At(e,"expected the node content, but found ','"):At(e,"missed comma between flow collection entries"),T=v=k=null,f=m=!1,C===63&&(h=e.input.charCodeAt(e.position+1),Ha(h)&&(f=m=!0,e.position++,Dn(e,!0,t))),n=e.line,a=e.lineStart,i=e.position,_c(e,t,s0,!1,!0),T=e.tag,v=e.result,Dn(e,!0,t),C=e.input.charCodeAt(e.position),(m||e.line===n)&&C===58&&(f=!0,C=e.input.charCodeAt(++e.position),Dn(e,!0,t),_c(e,t,s0,!1,!0),k=e.result),b?pc(e,l,x,T,v,k,n,a,i):f?l.push(pc(e,null,x,T,v,k,n,a,i)):l.push(v),Dn(e,!0,t),C=e.input.charCodeAt(e.position),C===44?(r=!0,C=e.input.charCodeAt(++e.position)):r=!1}At(e,"unexpected end of the stream within a flow collection")}L($D,"readFlowCollection");function qD(e,t){var r,n,a=pv,i=!1,s=!1,l=t,d=0,h=!1,p,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)pv===a?a=f===43?NA:bse:At(e,"repeat of a chomping mode identifier");else if((p=DD(f))>=0)p===0?At(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?At(e,"repeat of an indentation width identifier"):(l=t+p-1,s=!0);else break;if(Tl(f)){do f=e.input.charCodeAt(++e.position);while(Tl(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ss(f)&&f!==0)}for(;f!==0;){for(ey(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!s||e.lineIndent<l)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>l&&(l=e.lineIndent),Ss(f)){d++;continue}if(e.lineIndent<l){a===NA?e.result+=Kn.repeat(`
`,i?1+d:d):a===pv&&i&&(e.result+=`
`);break}for(n?Tl(f)?(h=!0,e.result+=Kn.repeat(`
`,i?1+d:d)):h?(h=!1,e.result+=Kn.repeat(`
`,d+1)):d===0?i&&(e.result+=" "):e.result+=Kn.repeat(`
`,d):e.result+=Kn.repeat(`
`,i?1+d:d),i=!0,s=!0,d=0,r=e.position;!Ss(f)&&f!==0;)f=e.input.charCodeAt(++e.position);No(e,r,e.position,!1)}return!0}L(qD,"readBlockScalar");function $1(e,t){var r,n=e.tag,a=e.anchor,i=[],s,l=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),d=e.input.charCodeAt(e.position);d!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,At(e,"tab characters must not be used in indentation")),!(d!==45||(s=e.input.charCodeAt(e.position+1),!Ha(s))));){if(l=!0,e.position++,Dn(e,!0,-1)&&e.lineIndent<=t){i.push(null),d=e.input.charCodeAt(e.position);continue}if(r=e.line,_c(e,t,ND,!1,!0),i.push(e.result),Dn(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&d!==0)At(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return l?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=i,!0):!1}L($1,"readBlockSequence");function HD(e,t,r){var n,a,i,s,l,d,h=e.tag,p=e.anchor,f={},m=Object.create(null),b=null,x=null,v=null,T=!1,k=!1,C;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),C=e.input.charCodeAt(e.position);C!==0;){if(!T&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,At(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(C===63||C===58)&&Ha(n))C===63?(T&&(pc(e,f,m,b,x,null,s,l,d),b=x=v=null),k=!0,T=!0,a=!0):T?(T=!1,a=!0):At(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,C=n;else{if(s=e.line,l=e.lineStart,d=e.position,!_c(e,r,AD,!1,!0))break;if(e.line===i){for(C=e.input.charCodeAt(e.position);Tl(C);)C=e.input.charCodeAt(++e.position);if(C===58)C=e.input.charCodeAt(++e.position),Ha(C)||At(e,"a whitespace character is expected after the key-value separator within a block mapping"),T&&(pc(e,f,m,b,x,null,s,l,d),b=x=v=null),k=!0,T=!1,a=!1,b=e.tag,x=e.result;else if(k)At(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=h,e.anchor=p,!0}else if(k)At(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=h,e.anchor=p,!0}if((e.line===i||e.lineIndent>t)&&(T&&(s=e.line,l=e.lineStart,d=e.position),_c(e,t,o0,!0,a)&&(T?x=e.result:v=e.result),T||(pc(e,f,m,b,x,v,s,l,d),b=x=v=null),Dn(e,!0,-1),C=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&C!==0)At(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return T&&pc(e,f,m,b,x,null,s,l,d),k&&(e.tag=h,e.anchor=p,e.kind="mapping",e.result=f),k}L(HD,"readBlockMapping");function GD(e){var t,r=!1,n=!1,a,i,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&At(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,a="!!",s=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(i=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):At(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ha(s);)s===33&&(n?At(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),LD.test(a)||At(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),wse.test(i)&&At(e,"tag suffix cannot contain flow indicator characters")}i&&!PD.test(i)&&At(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{At(e,"tag name is malformed: "+i)}return r?e.tag=i:El.call(e.tagMap,a)?e.tag=e.tagMap[a]+i:a==="!"?e.tag="!"+i:a==="!!"?e.tag="tag:yaml.org,2002:"+i:At(e,'undeclared tag handle "'+a+'"'),!0}L(GD,"readTagProperty");function WD(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&At(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ha(r)&&!hc(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&At(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}L(WD,"readAnchorProperty");function VD(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ha(n)&&!hc(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&At(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),El.call(e.anchorMap,r)||At(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Dn(e,!0,-1),!0}L(VD,"readAlias");function _c(e,t,r,n,a){var i,s,l,d=1,h=!1,p=!1,f,m,b,x,v,T;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=s=l=o0===r||ND===r,n&&Dn(e,!0,-1)&&(h=!0,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)),d===1)for(;GD(e)||WD(e);)Dn(e,!0,-1)?(h=!0,l=i,e.lineIndent>t?d=1:e.lineIndent===t?d=0:e.lineIndent<t&&(d=-1)):l=!1;if(l&&(l=h||a),(d===1||o0===r)&&(s0===r||AD===r?v=t:v=t+1,T=e.position-e.lineStart,d===1?l&&($1(e,T)||HD(e,T,v))||$D(e,v)?p=!0:(s&&qD(e,v)||zD(e,v)||UD(e,v)?p=!0:VD(e)?(p=!0,(e.tag!==null||e.anchor!==null)&&At(e,"alias node should not have any properties")):FD(e,v,s0===r)&&(p=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):d===0&&(p=l&&$1(e,T))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&At(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,m=e.implicitTypes.length;f<m;f+=1)if(x=e.implicitTypes[f],x.resolve(e.result)){e.result=x.construct(e.result),e.tag=x.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(El.call(e.typeMap[e.kind||"fallback"],e.tag))x=e.typeMap[e.kind||"fallback"][e.tag];else for(x=null,b=e.typeMap.multi[e.kind||"fallback"],f=0,m=b.length;f<m;f+=1)if(e.tag.slice(0,b[f].tag.length)===b[f].tag){x=b[f];break}x||At(e,"unknown tag !<"+e.tag+">"),e.result!==null&&x.kind!==e.kind&&At(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+x.kind+'", not "'+e.kind+'"'),x.resolve(e.result,e.tag)?(e.result=x.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):At(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||p}L(_c,"composeNode");function YD(e){var t=e.position,r,n,a,i=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Dn(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(i=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Ha(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&At(e,"directive name must not be less than one character in length");s!==0;){for(;Tl(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ss(s));break}if(Ss(s))break;for(r=e.position;s!==0&&!Ha(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}s!==0&&ey(e),El.call(LA,n)?LA[n](e,n,a):Bp(e,'unknown document directive "'+n+'"')}if(Dn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Dn(e,!0,-1)):i&&At(e,"directives end mark is expected"),_c(e,e.lineIndent-1,o0,!1,!0),Dn(e,!0,-1),e.checkLineBreaks&&vse.test(e.input.slice(t,e.position))&&Bp(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&hg(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Dn(e,!0,-1));return}if(e.position<e.length-1)At(e,"end of the stream or a document separator is expected");else return}L(YD,"readDocument");function _S(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new BD(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,At(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)YD(r);return r.documents}L(_S,"loadDocuments");function Sse(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=_S(e,r);if(typeof t!="function")return n;for(var a=0,i=n.length;a<i;a+=1)t(n[a])}L(Sse,"loadAll$1");function QD(e,t){var r=_S(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new li("expected a single document in the stream, but found more")}}L(QD,"load$1");var Tse=QD,kse={load:Tse},KD=Object.prototype.toString,XD=Object.prototype.hasOwnProperty,AS=65279,Ese=9,Fp=10,Cse=13,_se=32,Ase=33,Nse=34,q1=35,Lse=37,Pse=38,Rse=39,Ise=42,JD=44,Dse=45,l0=58,Mse=61,Ose=62,jse=63,Bse=64,ZD=91,eM=93,Fse=96,tM=123,zse=124,rM=125,Ma={};Ma[0]="\\0";Ma[7]="\\a";Ma[8]="\\b";Ma[9]="\\t";Ma[10]="\\n";Ma[11]="\\v";Ma[12]="\\f";Ma[13]="\\r";Ma[27]="\\e";Ma[34]='\\"';Ma[92]="\\\\";Ma[133]="\\N";Ma[160]="\\_";Ma[8232]="\\L";Ma[8233]="\\P";var Use=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],$se=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nM(e,t){var r,n,a,i,s,l,d;if(t===null)return{};for(r={},n=Object.keys(t),a=0,i=n.length;a<i;a+=1)s=n[a],l=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),d=e.compiledTypeMap.fallback[s],d&&XD.call(d.styleAliases,l)&&(l=d.styleAliases[l]),r[s]=l;return r}L(nM,"compileStyleMap");function aM(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new li("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Kn.repeat("0",n-t.length)+t}L(aM,"encodeHex");var qse=1,zp=2;function iM(e){this.schema=e.schema||_D,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Kn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=nM(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?zp:qse,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}L(iM,"State");function H1(e,t){for(var r=Kn.repeat(" ",t),n=0,a=-1,i="",s,l=e.length;n<l;)a=e.indexOf(`
`,n),a===-1?(s=e.slice(n),n=l):(s=e.slice(n,a+1),n=a+1),s.length&&s!==`
`&&(i+=r),i+=s;return i}L(H1,"indentString");function c0(e,t){return`
`+Kn.repeat(" ",e.indent*t)}L(c0,"generateNextLine");function sM(e,t){var r,n,a;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}L(sM,"testImplicitResolving");function Up(e){return e===_se||e===Ese}L(Up,"isWhitespace");function pd(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==AS||65536<=e&&e<=1114111}L(pd,"isPrintable");function G1(e){return pd(e)&&e!==AS&&e!==Cse&&e!==Fp}L(G1,"isNsCharOrWhitespace");function W1(e,t,r){var n=G1(e),a=n&&!Up(e);return(r?n:n&&e!==JD&&e!==ZD&&e!==eM&&e!==tM&&e!==rM)&&e!==q1&&!(t===l0&&!a)||G1(t)&&!Up(t)&&e===q1||t===l0&&a}L(W1,"isPlainSafe");function oM(e){return pd(e)&&e!==AS&&!Up(e)&&e!==Dse&&e!==jse&&e!==l0&&e!==JD&&e!==ZD&&e!==eM&&e!==tM&&e!==rM&&e!==q1&&e!==Pse&&e!==Ise&&e!==Ase&&e!==zse&&e!==Mse&&e!==Ose&&e!==Rse&&e!==Nse&&e!==Lse&&e!==Bse&&e!==Fse}L(oM,"isPlainSafeFirst");function lM(e){return!Up(e)&&e!==l0}L(lM,"isPlainSafeLast");function qu(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}L(qu,"codePointAt");function NS(e){var t=/^\n* /;return t.test(e)}L(NS,"needIndentIndicator");var cM=1,V1=2,uM=3,dM=4,zu=5;function hM(e,t,r,n,a,i,s,l){var d,h=0,p=null,f=!1,m=!1,b=n!==-1,x=-1,v=oM(qu(e,0))&&lM(qu(e,e.length-1));if(t||s)for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=qu(e,d),!pd(h))return zu;v=v&&W1(h,p,l),p=h}else{for(d=0;d<e.length;h>=65536?d+=2:d++){if(h=qu(e,d),h===Fp)f=!0,b&&(m=m||d-x-1>n&&e[x+1]!==" ",x=d);else if(!pd(h))return zu;v=v&&W1(h,p,l),p=h}m=m||b&&d-x-1>n&&e[x+1]!==" "}return!f&&!m?v&&!s&&!a(e)?cM:i===zp?zu:V1:r>9&&NS(e)?zu:s?i===zp?zu:V1:m?dM:uM}L(hM,"chooseScalarStyle");function pM(e,t,r,n,a){e.dump=(function(){if(t.length===0)return e.quotingType===zp?'""':"''";if(!e.noCompatMode&&(Use.indexOf(t)!==-1||$se.test(t)))return e.quotingType===zp?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),l=n||e.flowLevel>-1&&r>=e.flowLevel;function d(h){return sM(e,h)}switch(L(d,"testAmbiguity"),hM(t,l,e.indent,s,d,e.quotingType,e.forceQuotes&&!n,a)){case cM:return t;case V1:return"'"+t.replace(/'/g,"''")+"'";case uM:return"|"+Y1(t,e.indent)+Q1(H1(t,i));case dM:return">"+Y1(t,e.indent)+Q1(H1(gM(t,s),i));case zu:return'"'+fM(t)+'"';default:throw new li("impossible error: invalid scalar style")}})()}L(pM,"writeScalar");function Y1(e,t){var r=NS(e)?String(t):"",n=e[e.length-1]===`
`,a=n&&(e[e.length-2]===`
`||e===`
`),i=a?"+":n?"":"-";return r+i+`
`}L(Y1,"blockHeader");function Q1(e){return e[e.length-1]===`
`?e.slice(0,-1):e}L(Q1,"dropEndingNewline");function gM(e,t){for(var r=/(\n+)([^\n]*)/g,n=(function(){var h=e.indexOf(`
`);return h=h!==-1?h:e.length,r.lastIndex=h,K1(e.slice(0,h),t)})(),a=e[0]===`
`||e[0]===" ",i,s;s=r.exec(e);){var l=s[1],d=s[2];i=d[0]===" ",n+=l+(!a&&!i&&d!==""?`
`:"")+K1(d,t),a=i}return n}L(gM,"foldString");function K1(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,a=0,i,s=0,l=0,d="";n=r.exec(e);)l=n.index,l-a>t&&(i=s>a?s:l,d+=`
`+e.slice(a,i),a=i+1),s=l;return d+=`
`,e.length-a>t&&s>a?d+=e.slice(a,s)+`
`+e.slice(s+1):d+=e.slice(a),d.slice(1)}L(K1,"foldLine");function fM(e){for(var t="",r=0,n,a=0;a<e.length;r>=65536?a+=2:a++)r=qu(e,a),n=Ma[r],!n&&pd(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=n||aM(r);return t}L(fM,"escapeString");function mM(e,t,r){var n="",a=e.tag,i,s,l;for(i=0,s=r.length;i<s;i+=1)l=r[i],e.replacer&&(l=e.replacer.call(r,String(i),l)),(Ys(e,t,l,!1,!1)||typeof l>"u"&&Ys(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=a,e.dump="["+n+"]"}L(mM,"writeFlowSequence");function X1(e,t,r,n){var a="",i=e.tag,s,l,d;for(s=0,l=r.length;s<l;s+=1)d=r[s],e.replacer&&(d=e.replacer.call(r,String(s),d)),(Ys(e,t+1,d,!0,!0,!1,!0)||typeof d>"u"&&Ys(e,t+1,null,!0,!0,!1,!0))&&((!n||a!=="")&&(a+=c0(e,t)),e.dump&&Fp===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=i,e.dump=a||"[]"}L(X1,"writeBlockSequence");function yM(e,t,r){var n="",a=e.tag,i=Object.keys(r),s,l,d,h,p;for(s=0,l=i.length;s<l;s+=1)p="",n!==""&&(p+=", "),e.condenseFlow&&(p+='"'),d=i[s],h=r[d],e.replacer&&(h=e.replacer.call(r,d,h)),Ys(e,t,d,!1,!1)&&(e.dump.length>1024&&(p+="? "),p+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ys(e,t,h,!1,!1)&&(p+=e.dump,n+=p));e.tag=a,e.dump="{"+n+"}"}L(yM,"writeFlowMapping");function bM(e,t,r,n){var a="",i=e.tag,s=Object.keys(r),l,d,h,p,f,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new li("sortKeys must be a boolean or a function");for(l=0,d=s.length;l<d;l+=1)m="",(!n||a!=="")&&(m+=c0(e,t)),h=s[l],p=r[h],e.replacer&&(p=e.replacer.call(r,h,p)),Ys(e,t+1,h,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Fp===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,f&&(m+=c0(e,t)),Ys(e,t+1,p,!0,f)&&(e.dump&&Fp===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,a+=m));e.tag=i,e.dump=a||"{}"}L(bM,"writeBlockMapping");function J1(e,t,r){var n,a,i,s,l,d;for(a=r?e.explicitTypes:e.implicitTypes,i=0,s=a.length;i<s;i+=1)if(l=a[i],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof t=="object"&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(r?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(d=e.styleMap[l.tag]||l.defaultStyle,KD.call(l.represent)==="[object Function]")n=l.represent(t,d);else if(XD.call(l.represent,d))n=l.represent[d](t,d);else throw new li("!<"+l.tag+'> tag resolver accepts not "'+d+'" style');e.dump=n}return!0}return!1}L(J1,"detectType");function Ys(e,t,r,n,a,i,s){e.tag=null,e.dump=r,J1(e,r,!1)||J1(e,r,!0);var l=KD.call(e.dump),d=n,h;n&&(n=e.flowLevel<0||e.flowLevel>t);var p=l==="[object Object]"||l==="[object Array]",f,m;if(p&&(f=e.duplicates.indexOf(r),m=f!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(a=!1),m&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(p&&m&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),l==="[object Object]")n&&Object.keys(e.dump).length!==0?(bM(e,t,e.dump,a),m&&(e.dump="&ref_"+f+e.dump)):(yM(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(l==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?X1(e,t-1,e.dump,a):X1(e,t,e.dump,a),m&&(e.dump="&ref_"+f+e.dump)):(mM(e,t,e.dump),m&&(e.dump="&ref_"+f+" "+e.dump));else if(l==="[object String]")e.tag!=="?"&&pM(e,e.dump,t,i,d);else{if(l==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new li("unacceptable kind of an object to dump "+l)}e.tag!==null&&e.tag!=="?"&&(h=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",e.dump=h+" "+e.dump)}return!0}L(Ys,"writeNode");function xM(e,t){var r=[],n=[],a,i;for(u0(e,r,n),a=0,i=n.length;a<i;a+=1)t.duplicates.push(r[n[a]]);t.usedDuplicates=new Array(i)}L(xM,"getDuplicateReferences");function u0(e,t,r){var n,a,i;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)u0(e[a],t,r);else for(n=Object.keys(e),a=0,i=n.length;a<i;a+=1)u0(e[n[a]],t,r)}L(u0,"inspectNode");function Hse(e,t){t=t||{};var r=new iM(t);r.noRefs||xM(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ys(r,0,n,!0,!0)?r.dump+`
`:""}L(Hse,"dump$1");function Gse(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}L(Gse,"renamed");var Wse=uD,Vse=kse.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Ca={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},PA={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function rp(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=fn(e),t=fn(t);const[r,n]=[e.x,e.y],[a,i]=[t.x,t.y],s=a-r,l=i-n;return{angle:Math.atan(l/s),deltaX:s,deltaY:l}}L(rp,"calculateDeltaAndAngle");var fn=L(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Yse=L(e=>({x:L(function(t,r,n){let a=0;const i=fn(n[0]).x<fn(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Ca,e.arrowTypeStart)){const{angle:b,deltaX:x}=rp(n[0],n[1]);a=Ca[e.arrowTypeStart]*Math.cos(b)*(x>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ca,e.arrowTypeEnd)){const{angle:b,deltaX:x}=rp(n[n.length-1],n[n.length-2]);a=Ca[e.arrowTypeEnd]*Math.cos(b)*(x>=0?1:-1)}const s=Math.abs(fn(t).x-fn(n[n.length-1]).x),l=Math.abs(fn(t).y-fn(n[n.length-1]).y),d=Math.abs(fn(t).x-fn(n[0]).x),h=Math.abs(fn(t).y-fn(n[0]).y),p=Ca[e.arrowTypeStart],f=Ca[e.arrowTypeEnd],m=1;if(s<f&&s>0&&l<f){let b=f+m-s;b*=i==="right"?-1:1,a-=b}if(d<p&&d>0&&h<p){let b=p+m-d;b*=i==="right"?-1:1,a+=b}return fn(t).x+a},"x"),y:L(function(t,r,n){let a=0;const i=fn(n[0]).y<fn(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Ca,e.arrowTypeStart)){const{angle:b,deltaY:x}=rp(n[0],n[1]);a=Ca[e.arrowTypeStart]*Math.abs(Math.sin(b))*(x>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ca,e.arrowTypeEnd)){const{angle:b,deltaY:x}=rp(n[n.length-1],n[n.length-2]);a=Ca[e.arrowTypeEnd]*Math.abs(Math.sin(b))*(x>=0?1:-1)}const s=Math.abs(fn(t).y-fn(n[n.length-1]).y),l=Math.abs(fn(t).x-fn(n[n.length-1]).x),d=Math.abs(fn(t).y-fn(n[0]).y),h=Math.abs(fn(t).x-fn(n[0]).x),p=Ca[e.arrowTypeStart],f=Ca[e.arrowTypeEnd],m=1;if(s<f&&s>0&&l<f){let b=f+m-s;b*=i==="up"?-1:1,a-=b}if(d<p&&d>0&&h<p){let b=p+m-d;b*=i==="up"?-1:1,a+=b}return fn(t).y+a},"y")}),"getLineFunctionsWithOffset"),LS=L(({flowchart:e})=>{const t=e?.subGraphTitleMargin?.top??0,r=e?.subGraphTitleMargin?.bottom??0,n=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:n}},"getSubGraphTitleMargins"),Qse=L(e=>{const{handDrawnSeed:t}=Br();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Nd=L(e=>{const t=Kse([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),Kse=L(e=>{const t=new Map;return e.forEach(r=>{const[n,a]=r.split(":");t.set(n.trim(),a?.trim())}),t},"styles2Map"),vM=L(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),vt=L(e=>{const{stylesArray:t}=Nd(e),r=[],n=[],a=[],i=[];return t.forEach(s=>{const l=s[0];vM(l)?r.push(s.join(":")+" !important"):(n.push(s.join(":")+" !important"),l.includes("stroke")&&a.push(s.join(":")+" !important"),l==="fill"&&i.push(s.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:i}},"styles2String"),xt=L((e,t)=>{const{themeVariables:r,handDrawnSeed:n}=Br(),{nodeBorder:a,mainBkg:i}=r,{stylesMap:s}=Nd(e);return Object.assign({roughness:.7,fill:s.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||a,seed:n,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:Xse(s.get("stroke-dasharray"))},t)},"userNodeOverrides"),Xse=L(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const a=isNaN(t[0])?0:t[0];return[a,a]}const r=isNaN(t[0])?0:t[0],n=isNaN(t[1])?0:t[1];return[r,n]},"getStrokeDashArray"),qh={},Vn={},RA;function Jse(){return RA||(RA=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.BLANK_URL=Vn.relativeFirstCharacters=Vn.whitespaceEscapeCharsRegex=Vn.urlSchemeRegex=Vn.ctrlCharactersRegex=Vn.htmlCtrlEntityRegex=Vn.htmlEntitiesRegex=Vn.invalidProtocolRegex=void 0,Vn.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Vn.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Vn.htmlCtrlEntityRegex=/&(newline|tab);/gi,Vn.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Vn.urlSchemeRegex=/^.+(:|&colon;)/gim,Vn.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Vn.relativeFirstCharacters=[".","/"],Vn.BLANK_URL="about:blank"),Vn}var IA;function Zse(){if(IA)return qh;IA=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.sanitizeUrl=void 0;var e=Jse();function t(s){return e.relativeFirstCharacters.indexOf(s[0])>-1}function r(s){var l=s.replace(e.ctrlCharactersRegex,"");return l.replace(e.htmlEntitiesRegex,function(d,h){return String.fromCharCode(h)})}function n(s){return URL.canParse(s)}function a(s){try{return decodeURIComponent(s)}catch{return s}}function i(s){if(!s)return e.BLANK_URL;var l,d=a(s.trim());do d=r(d).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),d=a(d),l=d.match(e.ctrlCharactersRegex)||d.match(e.htmlEntitiesRegex)||d.match(e.htmlCtrlEntityRegex)||d.match(e.whitespaceEscapeCharsRegex);while(l&&l.length>0);var h=d;if(!h)return e.BLANK_URL;if(t(h))return h;var p=h.trimStart(),f=p.match(e.urlSchemeRegex);if(!f)return h;var m=f[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(m))return e.BLANK_URL;var b=p.replace(/\\/g,"/");if(m==="mailto:"||m.includes("://"))return b;if(m==="http:"||m==="https:"){if(!n(b))return e.BLANK_URL;var x=new URL(b);return x.protocol=x.protocol.toLowerCase(),x.hostname=x.hostname.toLowerCase(),x.toString()}return b}return qh.sanitizeUrl=i,qh}var eoe=Zse(),wM=typeof global=="object"&&global&&global.Object===Object&&global,toe=typeof self=="object"&&self&&self.Object===Object&&self,eo=wM||toe||Function("return this")(),d0=eo.Symbol,SM=Object.prototype,roe=SM.hasOwnProperty,noe=SM.toString,Hh=d0?d0.toStringTag:void 0;function aoe(e){var t=roe.call(e,Hh),r=e[Hh];try{e[Hh]=void 0;var n=!0}catch{}var a=noe.call(e);return n&&(t?e[Hh]=r:delete e[Hh]),a}var ioe=Object.prototype,soe=ioe.toString;function ooe(e){return soe.call(e)}var loe="[object Null]",coe="[object Undefined]",DA=d0?d0.toStringTag:void 0;function Ld(e){return e==null?e===void 0?coe:loe:DA&&DA in Object(e)?aoe(e):ooe(e)}function zc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var uoe="[object AsyncFunction]",doe="[object Function]",hoe="[object GeneratorFunction]",poe="[object Proxy]";function PS(e){if(!zc(e))return!1;var t=Ld(e);return t==doe||t==hoe||t==uoe||t==poe}var gv=eo["__core-js_shared__"],MA=(function(){var e=/[^.]+$/.exec(gv&&gv.keys&&gv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function goe(e){return!!MA&&MA in e}var foe=Function.prototype,moe=foe.toString;function Uc(e){if(e!=null){try{return moe.call(e)}catch{}try{return e+""}catch{}}return""}var yoe=/[\\^$.*+?()[\]{}|]/g,boe=/^\[object .+?Constructor\]$/,xoe=Function.prototype,voe=Object.prototype,woe=xoe.toString,Soe=voe.hasOwnProperty,Toe=RegExp("^"+woe.call(Soe).replace(yoe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function koe(e){if(!zc(e)||goe(e))return!1;var t=PS(e)?Toe:boe;return t.test(Uc(e))}function Eoe(e,t){return e?.[t]}function $c(e,t){var r=Eoe(e,t);return koe(r)?r:void 0}var $p=$c(Object,"create");function Coe(){this.__data__=$p?$p(null):{},this.size=0}function _oe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Aoe="__lodash_hash_undefined__",Noe=Object.prototype,Loe=Noe.hasOwnProperty;function Poe(e){var t=this.__data__;if($p){var r=t[e];return r===Aoe?void 0:r}return Loe.call(t,e)?t[e]:void 0}var Roe=Object.prototype,Ioe=Roe.hasOwnProperty;function Doe(e){var t=this.__data__;return $p?t[e]!==void 0:Ioe.call(t,e)}var Moe="__lodash_hash_undefined__";function Ooe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$p&&t===void 0?Moe:t,this}function Ac(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ac.prototype.clear=Coe;Ac.prototype.delete=_oe;Ac.prototype.get=Poe;Ac.prototype.has=Doe;Ac.prototype.set=Ooe;function joe(){this.__data__=[],this.size=0}function ry(e,t){return e===t||e!==e&&t!==t}function ny(e,t){for(var r=e.length;r--;)if(ry(e[r][0],t))return r;return-1}var Boe=Array.prototype,Foe=Boe.splice;function zoe(e){var t=this.__data__,r=ny(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Foe.call(t,r,1),--this.size,!0}function Uoe(e){var t=this.__data__,r=ny(t,e);return r<0?void 0:t[r][1]}function $oe(e){return ny(this.__data__,e)>-1}function qoe(e,t){var r=this.__data__,n=ny(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Oo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oo.prototype.clear=joe;Oo.prototype.delete=zoe;Oo.prototype.get=Uoe;Oo.prototype.has=$oe;Oo.prototype.set=qoe;var qp=$c(eo,"Map");function Hoe(){this.size=0,this.__data__={hash:new Ac,map:new(qp||Oo),string:new Ac}}function Goe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ay(e,t){var r=e.__data__;return Goe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Woe(e){var t=ay(this,e).delete(e);return this.size-=t?1:0,t}function Voe(e){return ay(this,e).get(e)}function Yoe(e){return ay(this,e).has(e)}function Qoe(e,t){var r=ay(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Ll(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ll.prototype.clear=Hoe;Ll.prototype.delete=Woe;Ll.prototype.get=Voe;Ll.prototype.has=Yoe;Ll.prototype.set=Qoe;var Koe="Expected a function";function pg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Koe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var s=e.apply(this,n);return r.cache=i.set(a,s)||i,s};return r.cache=new(pg.Cache||Ll),r}pg.Cache=Ll;function Xoe(){this.__data__=new Oo,this.size=0}function Joe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Zoe(e){return this.__data__.get(e)}function ele(e){return this.__data__.has(e)}var tle=200;function rle(e,t){var r=this.__data__;if(r instanceof Oo){var n=r.__data__;if(!qp||n.length<tle-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ll(n)}return r.set(e,t),this.size=r.size,this}function Pd(e){var t=this.__data__=new Oo(e);this.size=t.size}Pd.prototype.clear=Xoe;Pd.prototype.delete=Joe;Pd.prototype.get=Zoe;Pd.prototype.has=ele;Pd.prototype.set=rle;var h0=(function(){try{var e=$c(Object,"defineProperty");return e({},"",{}),e}catch{}})();function RS(e,t,r){t=="__proto__"&&h0?h0(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Z1(e,t,r){(r!==void 0&&!ry(e[t],r)||r===void 0&&!(t in e))&&RS(e,t,r)}function nle(e){return function(t,r,n){for(var a=-1,i=Object(t),s=n(t),l=s.length;l--;){var d=s[++a];if(r(i[d],d,i)===!1)break}return t}}var ale=nle(),TM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OA=TM&&typeof module=="object"&&module&&!module.nodeType&&module,ile=OA&&OA.exports===TM,jA=ile?eo.Buffer:void 0,BA=jA?jA.allocUnsafe:void 0;function sle(e,t){if(t)return e.slice();var r=e.length,n=BA?BA(r):new e.constructor(r);return e.copy(n),n}var FA=eo.Uint8Array;function ole(e){var t=new e.constructor(e.byteLength);return new FA(t).set(new FA(e)),t}function lle(e,t){var r=t?ole(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function cle(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var zA=Object.create,ule=(function(){function e(){}return function(t){if(!zc(t))return{};if(zA)return zA(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function kM(e,t){return function(r){return e(t(r))}}var EM=kM(Object.getPrototypeOf,Object),dle=Object.prototype;function iy(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dle;return e===r}function hle(e){return typeof e.constructor=="function"&&!iy(e)?ule(EM(e)):{}}function gg(e){return e!=null&&typeof e=="object"}var ple="[object Arguments]";function UA(e){return gg(e)&&Ld(e)==ple}var CM=Object.prototype,gle=CM.hasOwnProperty,fle=CM.propertyIsEnumerable,p0=UA((function(){return arguments})())?UA:function(e){return gg(e)&&gle.call(e,"callee")&&!fle.call(e,"callee")},g0=Array.isArray,mle=9007199254740991;function _M(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mle}function sy(e){return e!=null&&_M(e.length)&&!PS(e)}function yle(e){return gg(e)&&sy(e)}function ble(){return!1}var AM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$A=AM&&typeof module=="object"&&module&&!module.nodeType&&module,xle=$A&&$A.exports===AM,qA=xle?eo.Buffer:void 0,vle=qA?qA.isBuffer:void 0,IS=vle||ble,wle="[object Object]",Sle=Function.prototype,Tle=Object.prototype,NM=Sle.toString,kle=Tle.hasOwnProperty,Ele=NM.call(Object);function Cle(e){if(!gg(e)||Ld(e)!=wle)return!1;var t=EM(e);if(t===null)return!0;var r=kle.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&NM.call(r)==Ele}var _le="[object Arguments]",Ale="[object Array]",Nle="[object Boolean]",Lle="[object Date]",Ple="[object Error]",Rle="[object Function]",Ile="[object Map]",Dle="[object Number]",Mle="[object Object]",Ole="[object RegExp]",jle="[object Set]",Ble="[object String]",Fle="[object WeakMap]",zle="[object ArrayBuffer]",Ule="[object DataView]",$le="[object Float32Array]",qle="[object Float64Array]",Hle="[object Int8Array]",Gle="[object Int16Array]",Wle="[object Int32Array]",Vle="[object Uint8Array]",Yle="[object Uint8ClampedArray]",Qle="[object Uint16Array]",Kle="[object Uint32Array]",cn={};cn[$le]=cn[qle]=cn[Hle]=cn[Gle]=cn[Wle]=cn[Vle]=cn[Yle]=cn[Qle]=cn[Kle]=!0;cn[_le]=cn[Ale]=cn[zle]=cn[Nle]=cn[Ule]=cn[Lle]=cn[Ple]=cn[Rle]=cn[Ile]=cn[Dle]=cn[Mle]=cn[Ole]=cn[jle]=cn[Ble]=cn[Fle]=!1;function Xle(e){return gg(e)&&_M(e.length)&&!!cn[Ld(e)]}function Jle(e){return function(t){return e(t)}}var LM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kp=LM&&typeof module=="object"&&module&&!module.nodeType&&module,Zle=kp&&kp.exports===LM,fv=Zle&&wM.process,HA=(function(){try{var e=kp&&kp.require&&kp.require("util").types;return e||fv&&fv.binding&&fv.binding("util")}catch{}})(),GA=HA&&HA.isTypedArray,DS=GA?Jle(GA):Xle;function ew(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ece=Object.prototype,tce=ece.hasOwnProperty;function rce(e,t,r){var n=e[t];(!(tce.call(e,t)&&ry(n,r))||r===void 0&&!(t in e))&&RS(e,t,r)}function nce(e,t,r,n){var a=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var l=t[i],d=void 0;d===void 0&&(d=e[l]),a?RS(r,l,d):rce(r,l,d)}return r}function ace(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var ice=9007199254740991,sce=/^(?:0|[1-9]\d*)$/;function PM(e,t){var r=typeof e;return t=t??ice,!!t&&(r=="number"||r!="symbol"&&sce.test(e))&&e>-1&&e%1==0&&e<t}var oce=Object.prototype,lce=oce.hasOwnProperty;function cce(e,t){var r=g0(e),n=!r&&p0(e),a=!r&&!n&&IS(e),i=!r&&!n&&!a&&DS(e),s=r||n||a||i,l=s?ace(e.length,String):[],d=l.length;for(var h in e)(t||lce.call(e,h))&&!(s&&(h=="length"||a&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||PM(h,d)))&&l.push(h);return l}function uce(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var dce=Object.prototype,hce=dce.hasOwnProperty;function pce(e){if(!zc(e))return uce(e);var t=iy(e),r=[];for(var n in e)n=="constructor"&&(t||!hce.call(e,n))||r.push(n);return r}function RM(e){return sy(e)?cce(e,!0):pce(e)}function gce(e){return nce(e,RM(e))}function fce(e,t,r,n,a,i,s){var l=ew(e,r),d=ew(t,r),h=s.get(d);if(h){Z1(e,r,h);return}var p=i?i(l,d,r+"",e,t,s):void 0,f=p===void 0;if(f){var m=g0(d),b=!m&&IS(d),x=!m&&!b&&DS(d);p=d,m||b||x?g0(l)?p=l:yle(l)?p=cle(l):b?(f=!1,p=sle(d,!0)):x?(f=!1,p=lle(d,!0)):p=[]:Cle(d)||p0(d)?(p=l,p0(l)?p=gce(l):(!zc(l)||PS(l))&&(p=hle(d))):f=!1}f&&(s.set(d,p),a(p,d,n,i,s),s.delete(d)),Z1(e,r,p)}function IM(e,t,r,n,a){e!==t&&ale(t,function(i,s){if(a||(a=new Pd),zc(i))fce(e,t,s,r,IM,n,a);else{var l=n?n(ew(e,s),i,s+"",e,t,a):void 0;l===void 0&&(l=i),Z1(e,s,l)}},RM)}function DM(e){return e}function mce(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var WA=Math.max;function yce(e,t,r){return t=WA(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=WA(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(s),mce(e,this,l)}}function bce(e){return function(){return e}}var xce=h0?function(e,t){return h0(e,"toString",{configurable:!0,enumerable:!1,value:bce(t),writable:!0})}:DM,vce=800,wce=16,Sce=Date.now;function Tce(e){var t=0,r=0;return function(){var n=Sce(),a=wce-(n-r);if(r=n,a>0){if(++t>=vce)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kce=Tce(xce);function Ece(e,t){return kce(yce(e,t,DM),e+"")}function Cce(e,t,r){if(!zc(r))return!1;var n=typeof t;return(n=="number"?sy(r)&&PM(t,r.length):n=="string"&&t in r)?ry(r[t],e):!1}function _ce(e){return Ece(function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,s&&Cce(r[0],r[1],s)&&(i=a<3?void 0:i,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,i)}return t})}var Ace=_ce(function(e,t,r){IM(e,t,r)}),Nce="",Lce={curveBasis:bm,curveBasisClosed:Rie,curveBasisOpen:Iie,curveBumpX:xI,curveBumpY:vI,curveBundle:Die,curveCardinalClosed:Mie,curveCardinalOpen:Oie,curveCardinal:kI,curveCatmullRomClosed:jie,curveCatmullRomOpen:Bie,curveCatmullRom:CI,curveLinear:t0,curveLinearClosed:Fie,curveMonotoneX:RI,curveMonotoneY:II,curveNatural:MI,curveStep:OI,curveStepAfter:BI,curveStepBefore:jI},Pce=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Rce=L(function(e,t){const r=MM(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const s=r.map(l=>l.args);Hm(s),n=Qn(n,[...s])}else n=r.args;if(!n)return;let a=aS(e,t);const i="config";return n[i]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),n[a]=n[i],delete n[i]),n},"detectInit"),MM=L(function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${Pce.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),Fe.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const a=[];for(;(n=Sp.exec(e))!==null;)if(n.index===Sp.lastIndex&&Sp.lastIndex++,n&&!t||t&&n[1]?.match(t)||t&&n[2]?.match(t)){const i=n[1]?n[1]:n[2],s=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;a.push({type:i,args:s})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(r){return Fe.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),Ice=L(function(e){return e.replace(Sp,"")},"removeDirectives"),Dce=L(function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1},"isSubstringInArray");function MS(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return Lce[r]??t}L(MS,"interpolateToCurve");function OM(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?eoe.sanitizeUrl(r):r}L(OM,"formatUrl");var Mce=L((e,...t)=>{const r=e.split("."),n=r.length-1,a=r[n];let i=window;for(let s=0;s<n;s++)if(i=i[r[s]],!i){Fe.error(`Function name: ${e} not found in window`);return}i[a](...t)},"runFunc");function OS(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}L(OS,"distance");function jM(e){let t,r=0;e.forEach(a=>{r+=OS(a,t),t=a});const n=r/2;return jS(e,n)}L(jM,"traverseEdge");function BM(e){return e.length===1?e[0]:jM(e)}L(BM,"calcLabelPosition");var VA=L((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),jS=L((e,t)=>{let r,n=t;for(const a of e){if(r){const i=OS(a,r);if(i===0)return r;if(i<n)n-=i;else{const s=n/i;if(s<=0)return r;if(s>=1)return{x:a.x,y:a.y};if(s>0&&s<1)return{x:VA((1-s)*r.x+s*a.x,5),y:VA((1-s)*r.y+s*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Oce=L((e,t,r)=>{Fe.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=jS(t,25),i=e?10:5,s=Math.atan2(t[0].y-a.y,t[0].x-a.x),l={x:0,y:0};return l.x=Math.sin(s)*i+(t[0].x+a.x)/2,l.y=-Math.cos(s)*i+(t[0].y+a.y)/2,l},"calcCardinalityPosition");function FM(e,t,r){const n=structuredClone(r);Fe.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const a=25+e,i=jS(n,a),s=10+e*.5,l=Math.atan2(n[0].y-i.y,n[0].x-i.x),d={x:0,y:0};return t==="start_left"?(d.x=Math.sin(l+Math.PI)*s+(n[0].x+i.x)/2,d.y=-Math.cos(l+Math.PI)*s+(n[0].y+i.y)/2):t==="end_right"?(d.x=Math.sin(l-Math.PI)*s+(n[0].x+i.x)/2-5,d.y=-Math.cos(l-Math.PI)*s+(n[0].y+i.y)/2-5):t==="end_left"?(d.x=Math.sin(l)*s+(n[0].x+i.x)/2-5,d.y=-Math.cos(l)*s+(n[0].y+i.y)/2-5):(d.x=Math.sin(l)*s+(n[0].x+i.x)/2,d.y=-Math.cos(l)*s+(n[0].y+i.y)/2),d}L(FM,"calcTerminalLabelPosition");function zM(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}L(zM,"getStylesFromArray");var YA=0,jce=L(()=>(YA++,"id-"+Math.random().toString(36).substr(2,12)+"-"+YA),"generateId");function UM(e){let t="";const r="0123456789abcdef",n=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}L(UM,"makeRandomHex");var Bce=L(e=>UM(e.length),"random"),Fce=L(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),zce=L(function(e,t){const r=t.text.replace(Ad.lineBreakRegex," "),[,n]=oy(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",n),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const i=a.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.attr("fill",t.fill),i.text(r),a},"drawSimpleText"),Uce=pg((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Ad.lineBreakRegex.test(e)))return e;const n=e.split(" ").filter(Boolean),a=[];let i="";return n.forEach((s,l)=>{const d=Ro(`${s} `,r),h=Ro(i,r);if(d>t){const{hyphenatedStrings:m,remainingWord:b}=$ce(s,t,"-",r);a.push(i,...m),i=b}else h+d>=t?(a.push(i),i=s):i=[i,s].filter(Boolean).join(" ");l+1===n.length&&a.push(i)}),a.filter(s=>s!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),$ce=pg((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const a=[...e],i=[];let s="";return a.forEach((l,d)=>{const h=`${s}${l}`;if(Ro(h,n)>=t){const f=d+1,m=a.length===f,b=`${h}${r}`;i.push(m?h:b),s=""}else s=h}),{hyphenatedStrings:i,remainingWord:s}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function $M(e,t){return BS(e,t).height}L($M,"calculateTextHeight");function Ro(e,t){return BS(e,t).width}L(Ro,"calculateTextWidth");var BS=pg((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,i]=oy(r),s=["sans-serif",n],l=e.split(Ad.lineBreakRegex),d=[],h=Cr("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const p=h.append("svg");for(const m of s){let b=0;const x={width:0,height:0,lineHeight:0};for(const v of l){const T=Fce();T.text=v||Nce;const k=zce(p,T).style("font-size",i).style("font-weight",a).style("font-family",m),C=(k._groups||k)[0][0].getBBox();if(C.width===0&&C.height===0)throw new Error("svg element not in render tree");x.width=Math.round(Math.max(x.width,C.width)),b=Math.round(C.height),x.height+=b,x.lineHeight=Math.round(Math.max(x.lineHeight,b))}d.push(x)}p.remove();const f=isNaN(d[1].height)||isNaN(d[1].width)||isNaN(d[1].lineHeight)||d[0].height>d[1].height&&d[0].width>d[1].width&&d[0].lineHeight>d[1].lineHeight?0:1;return d[f]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),ad,qce=(ad=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},L(ad,"InitIDGenerator"),ad),Vf,Hce=L(function(e){return Vf=Vf||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Vf.innerHTML=e,unescape(Vf.textContent)},"entityDecode");function FS(e){return"str"in e}L(FS,"isDetailedError");var Gce=L((e,t,r,n)=>{if(!n)return;const a=e.node()?.getBBox();a&&e.append("text").text(n).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),oy=L(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function zS(e,t){return Ace({},e,t)}L(zS,"cleanAndMerge");var vs={assignWithDepth:Qn,wrapLabel:Uce,calculateTextHeight:$M,calculateTextWidth:Ro,calculateTextDimensions:BS,cleanAndMerge:zS,detectInit:Rce,detectDirective:MM,isSubstringInArray:Dce,interpolateToCurve:MS,calcLabelPosition:BM,calcCardinalityPosition:Oce,calcTerminalLabelPosition:FM,formatUrl:OM,getStylesFromArray:zM,generateId:jce,random:Bce,runFunc:Mce,entityDecode:Hce,insertTitle:Gce,isLabelCoordinateInPath:qM,parseFontSize:oy,InitIDGenerator:qce},Wce=L(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""}),t},"encodeEntities"),qc=L(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),H0e=L((e,t,{counter:r=0,prefix:n,suffix:a},i)=>i||`${n?`${n}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function Pa(e){return e??null}L(Pa,"handleUndefinedAttr");function qM(e,t){const r=Math.round(e.x),n=Math.round(e.y),a=t.replace(/(\d+\.\d+)/g,i=>Math.round(parseFloat(i)).toString());return a.includes(r.toString())||a.includes(n.toString())}L(qM,"isLabelCoordinateInPath");const Vce=Object.freeze({left:0,top:0,width:16,height:16}),f0=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),HM=Object.freeze({...Vce,...f0}),Yce=Object.freeze({...HM,body:"",hidden:!1}),Qce=Object.freeze({width:null,height:null}),Kce=Object.freeze({...Qce,...f0}),Xce=(e,t,r,n="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;n=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const l=a.pop(),d=a.pop(),h={provider:a.length>0?a[0]:n,prefix:d,name:l};return mv(h)?h:null}const i=a[0],s=i.split("-");if(s.length>1){const l={provider:n,prefix:s.shift(),name:s.join("-")};return mv(l)?l:null}if(r&&n===""){const l={provider:n,prefix:"",name:i};return mv(l,r)?l:null}return null},mv=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Jce(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const n=((e.rotate||0)+(t.rotate||0))%4;return n&&(r.rotate=n),r}function QA(e,t){const r=Jce(e,t);for(const n in Yce)n in f0?n in e&&!(n in r)&&(r[n]=f0[n]):n in t?r[n]=t[n]:n in e&&(r[n]=e[n]);return r}function Zce(e,t){const r=e.icons,n=e.aliases||Object.create(null),a=Object.create(null);function i(s){if(r[s])return a[s]=[];if(!(s in a)){a[s]=null;const l=n[s]&&n[s].parent,d=l&&i(l);d&&(a[s]=[l].concat(d))}return a[s]}return(t||Object.keys(r).concat(Object.keys(n))).forEach(i),a}function KA(e,t,r){const n=e.icons,a=e.aliases||Object.create(null);let i={};function s(l){i=QA(n[l]||a[l],i)}return s(t),r.forEach(s),QA(e,i)}function eue(e,t){if(e.icons[t])return KA(e,t,[]);const r=Zce(e,[t])[t];return r?KA(e,t,r):null}const tue=/(-?[0-9.]*[0-9]+[0-9.]*)/g,rue=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function XA(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const n=e.split(tue);if(n===null||!n.length)return e;const a=[];let i=n.shift(),s=rue.test(i);for(;;){if(s){const l=parseFloat(i);isNaN(l)?a.push(i):a.push(Math.ceil(l*t*r)/r)}else a.push(i);if(i=n.shift(),i===void 0)return a.join("");s=!s}}function nue(e,t="defs"){let r="";const n=e.indexOf("<"+t);for(;n>=0;){const a=e.indexOf(">",n),i=e.indexOf("</"+t);if(a===-1||i===-1)break;const s=e.indexOf(">",i);if(s===-1)break;r+=e.slice(a+1,i).trim(),e=e.slice(0,n).trim()+e.slice(s+1)}return{defs:r,content:e}}function aue(e,t){return e?"<defs>"+e+"</defs>"+t:t}function iue(e,t,r){const n=nue(e);return aue(n.defs,t+n.content+r)}const sue=e=>e==="unset"||e==="undefined"||e==="none";function oue(e,t){const r={...HM,...e},n={...Kce,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let i=r.body;[r,n].forEach(v=>{const T=[],k=v.hFlip,C=v.vFlip;let A=v.rotate;k?C?A+=2:(T.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),T.push("scale(-1 1)"),a.top=a.left=0):C&&(T.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),T.push("scale(1 -1)"),a.top=a.left=0);let D;switch(A<0&&(A-=Math.floor(A/4)*4),A=A%4,A){case 1:D=a.height/2+a.top,T.unshift("rotate(90 "+D.toString()+" "+D.toString()+")");break;case 2:T.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:D=a.width/2+a.left,T.unshift("rotate(-90 "+D.toString()+" "+D.toString()+")");break}A%2===1&&(a.left!==a.top&&(D=a.left,a.left=a.top,a.top=D),a.width!==a.height&&(D=a.width,a.width=a.height,a.height=D)),T.length&&(i=iue(i,'<g transform="'+T.join(" ")+'">',"</g>"))});const s=n.width,l=n.height,d=a.width,h=a.height;let p,f;s===null?(f=l===null?"1em":l==="auto"?h:l,p=XA(f,d/h)):(p=s==="auto"?d:s,f=l===null?XA(p,h/d):l==="auto"?h:l);const m={},b=(v,T)=>{sue(T)||(m[v]=T.toString())};b("width",p),b("height",f);const x=[a.left,a.top,d,h];return m.viewBox=x.join(" "),{attributes:m,viewBox:x,body:i}}const lue=/\sid="(\S+)"/g,cue="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let uue=0;function due(e,t=cue){const r=[];let n;for(;n=lue.exec(e);)r.push(n[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(i=>{const s=typeof t=="function"?t(i):t+(uue++).toString(),l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+s+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function hue(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)r+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}function US(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Hc=US();function GM(e){Hc=e}var Ep={exec:()=>null};function Ir(e,t=""){let r=typeof e=="string"?e:e.source,n={replace:(a,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(Ga.caret,"$1"),r=r.replace(a,s),n},getRegex:()=>new RegExp(r,t)};return n}var Ga={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},pue=/^(?:[ \t]*(?:\n|$))+/,gue=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,fue=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fg=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,mue=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,$S=/(?:[*+-]|\d{1,9}[.)])/,WM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,VM=Ir(WM).replace(/bull/g,$S).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),yue=Ir(WM).replace(/bull/g,$S).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),qS=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bue=/^[^\n]+/,HS=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,xue=Ir(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",HS).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),vue=Ir(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,$S).getRegex(),ly="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",GS=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,wue=Ir("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",GS).replace("tag",ly).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YM=Ir(qS).replace("hr",fg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ly).getRegex(),Sue=Ir(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YM).getRegex(),WS={blockquote:Sue,code:gue,def:xue,fences:fue,heading:mue,hr:fg,html:wue,lheading:VM,list:vue,newline:pue,paragraph:YM,table:Ep,text:bue},JA=Ir("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ly).getRegex(),Tue={...WS,lheading:yue,table:JA,paragraph:Ir(qS).replace("hr",fg).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",JA).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ly).getRegex()},kue={...WS,html:Ir(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",GS).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ep,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ir(qS).replace("hr",fg).replace("heading",` *#{1,6} *[^
]`).replace("lheading",VM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Eue=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Cue=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,QM=/^( {2,}|\\)\n(?!\s*$)/,_ue=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,cy=/[\p{P}\p{S}]/u,VS=/[\s\p{P}\p{S}]/u,KM=/[^\s\p{P}\p{S}]/u,Aue=Ir(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,VS).getRegex(),XM=/(?!~)[\p{P}\p{S}]/u,Nue=/(?!~)[\s\p{P}\p{S}]/u,Lue=/(?:[^\s\p{P}\p{S}]|~)/u,Pue=Ir(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),JM=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Rue=Ir(JM,"u").replace(/punct/g,cy).getRegex(),Iue=Ir(JM,"u").replace(/punct/g,XM).getRegex(),ZM="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Due=Ir(ZM,"gu").replace(/notPunctSpace/g,KM).replace(/punctSpace/g,VS).replace(/punct/g,cy).getRegex(),Mue=Ir(ZM,"gu").replace(/notPunctSpace/g,Lue).replace(/punctSpace/g,Nue).replace(/punct/g,XM).getRegex(),Oue=Ir("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,KM).replace(/punctSpace/g,VS).replace(/punct/g,cy).getRegex(),jue=Ir(/\\(punct)/,"gu").replace(/punct/g,cy).getRegex(),Bue=Ir(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Fue=Ir(GS).replace("(?:-->|$)","-->").getRegex(),zue=Ir("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Fue).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),m0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Uue=Ir(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",m0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),eO=Ir(/^!?\[(label)\]\[(ref)\]/).replace("label",m0).replace("ref",HS).getRegex(),tO=Ir(/^!?\[(ref)\](?:\[\])?/).replace("ref",HS).getRegex(),$ue=Ir("reflink|nolink(?!\\()","g").replace("reflink",eO).replace("nolink",tO).getRegex(),ZA=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,YS={_backpedal:Ep,anyPunctuation:jue,autolink:Bue,blockSkip:Pue,br:QM,code:Cue,del:Ep,emStrongLDelim:Rue,emStrongRDelimAst:Due,emStrongRDelimUnd:Oue,escape:Eue,link:Uue,nolink:tO,punctuation:Aue,reflink:eO,reflinkSearch:$ue,tag:zue,text:_ue,url:Ep},que={...YS,link:Ir(/^!?\[(label)\]\((.*?)\)/).replace("label",m0).getRegex(),reflink:Ir(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",m0).getRegex()},tw={...YS,emStrongRDelimAst:Mue,emStrongLDelim:Iue,url:Ir(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ZA).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ir(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ZA).getRegex()},Hue={...tw,br:Ir(QM).replace("{2,}","*").getRegex(),text:Ir(tw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Yf={normal:WS,gfm:Tue,pedantic:kue},Gh={normal:YS,gfm:tw,breaks:Hue,pedantic:que},Gue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eN=e=>Gue[e];function Bs(e,t){if(t){if(Ga.escapeTest.test(e))return e.replace(Ga.escapeReplace,eN)}else if(Ga.escapeTestNoEncode.test(e))return e.replace(Ga.escapeReplaceNoEncode,eN);return e}function tN(e){try{e=encodeURI(e).replace(Ga.percentDecode,"%")}catch{return null}return e}function rN(e,t){let r=e.replace(Ga.findPipe,(i,s,l)=>{let d=!1,h=s;for(;--h>=0&&l[h]==="\\";)d=!d;return d?"|":" |"}),n=r.split(Ga.splitPipe),a=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(Ga.slashPipe,"|");return n}function Wh(e,t,r){let n=e.length;if(n===0)return"";let a=0;for(;a<n&&e.charAt(n-a-1)===t;)a++;return e.slice(0,n-a)}function Wue(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}function nN(e,t,r,n,a){let i=t.href,s=t.title||null,l=e[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;let d={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:i,title:s,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,d}function Vue(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(n===null)return t;let a=n[1];return t.split(`
`).map(i=>{let s=i.match(r.other.beginningSpace);if(s===null)return i;let[l]=s;return l.length>=a.length?i.slice(a.length):i}).join(`
`)}var y0=class{options;rules;lexer;constructor(t){this.options=t||Hc}space(t){let r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){let r=this.rules.block.code.exec(t);if(r){let n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Wh(n,`
`)}}}fences(t){let r=this.rules.block.fences.exec(t);if(r){let n=r[0],a=Vue(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:a}}}heading(t){let r=this.rules.block.heading.exec(t);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){let a=Wh(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:Wh(r[0],`
`)}}blockquote(t){let r=this.rules.block.blockquote.exec(t);if(r){let n=Wh(r[0],`
`).split(`
`),a="",i="",s=[];for(;n.length>0;){let l=!1,d=[],h;for(h=0;h<n.length;h++)if(this.rules.other.blockquoteStart.test(n[h]))d.push(n[h]),l=!0;else if(!l)d.push(n[h]);else break;n=n.slice(h);let p=d.join(`
`),f=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${p}`:p,i=i?`${i}
${f}`:f;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,s,!0),this.lexer.state.top=m,n.length===0)break;let b=s.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let x=b,v=x.raw+`
`+n.join(`
`),T=this.blockquote(v);s[s.length-1]=T,a=a.substring(0,a.length-x.raw.length)+T.raw,i=i.substring(0,i.length-x.text.length)+T.text;break}else if(b?.type==="list"){let x=b,v=x.raw+`
`+n.join(`
`),T=this.list(v);s[s.length-1]=T,a=a.substring(0,a.length-b.raw.length)+T.raw,i=i.substring(0,i.length-x.raw.length)+T.raw,n=v.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:s,text:i}}}list(t){let r=this.rules.block.list.exec(t);if(r){let n=r[1].trim(),a=n.length>1,i={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");let s=this.rules.other.listItemRegex(n),l=!1;for(;t;){let h=!1,p="",f="";if(!(r=s.exec(t))||this.rules.block.hr.test(t))break;p=r[0],t=t.substring(p.length);let m=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),b=t.split(`
`,1)[0],x=!m.trim(),v=0;if(this.options.pedantic?(v=2,f=m.trimStart()):x?v=r[1].length+1:(v=r[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,f=m.slice(v),v+=r[1].length),x&&this.rules.other.blankLine.test(b)&&(p+=b+`
`,t=t.substring(b.length+1),h=!0),!h){let C=this.rules.other.nextBulletRegex(v),A=this.rules.other.hrRegex(v),D=this.rules.other.fencesBeginRegex(v),B=this.rules.other.headingBeginRegex(v),R=this.rules.other.htmlBeginRegex(v);for(;t;){let M=t.split(`
`,1)[0],$;if(b=M,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),$=b):$=b.replace(this.rules.other.tabCharGlobal,"    "),D.test(b)||B.test(b)||R.test(b)||C.test(b)||A.test(b))break;if($.search(this.rules.other.nonSpaceChar)>=v||!b.trim())f+=`
`+$.slice(v);else{if(x||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||D.test(m)||B.test(m)||A.test(m))break;f+=`
`+b}!x&&!b.trim()&&(x=!0),p+=M+`
`,t=t.substring(M.length+1),m=$.slice(v)}}i.loose||(l?i.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(l=!0));let T=null,k;this.options.gfm&&(T=this.rules.other.listIsTask.exec(f),T&&(k=T[0]!=="[ ] ",f=f.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:p,task:!!T,checked:k,loose:!1,text:f,tokens:[]}),i.raw+=p}let d=i.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let h=0;h<i.items.length;h++)if(this.lexer.state.top=!1,i.items[h].tokens=this.lexer.blockTokens(i.items[h].text,[]),!i.loose){let p=i.items[h].tokens.filter(m=>m.type==="space"),f=p.length>0&&p.some(m=>this.rules.other.anyLine.test(m.raw));i.loose=f}if(i.loose)for(let h=0;h<i.items.length;h++)i.items[h].loose=!0;return i}}html(t){let r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){let r=this.rules.block.def.exec(t);if(r){let n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:a,title:i}}}table(t){let r=this.rules.block.table.exec(t);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let n=rN(r[1]),a=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===a.length){for(let l of a)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<n.length;l++)s.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:s.align[l]});for(let l of i)s.rows.push(rN(l,s.header.length).map((d,h)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:s.align[h]})));return s}}lheading(t){let r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){let r=this.rules.block.paragraph.exec(t);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){let r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(t){let r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){let r=this.rules.inline.link.exec(t);if(r){let n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Wh(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=Wue(r[2],"()");if(s===-2)return;if(s>-1){let l=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let a=r[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(a);s&&(a=s[1],i=s[3])}else i=r[3]?r[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),nN(r,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(t,r){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=r[a.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return nN(n,i,n[0],this.lexer,this.rules)}}emStrong(t,r,n=""){let a=this.rules.inline.emStrongLDelim.exec(t);if(!(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...a[0]].length-1,s,l,d=i,h=0,p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,r=r.slice(-1*t.length+i);(a=p.exec(r))!=null;){if(s=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!s)continue;if(l=[...s].length,a[3]||a[4]){d+=l;continue}else if((a[5]||a[6])&&i%3&&!((i+l)%3)){h+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+h);let f=[...a[0]][0].length,m=t.slice(0,i+a.index+f+l);if(Math.min(i,l)%2){let x=m.slice(1,-1);return{type:"em",raw:m,text:x,tokens:this.lexer.inlineTokens(x)}}let b=m.slice(2,-2);return{type:"strong",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){let r=this.rules.inline.code.exec(t);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(t){let r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){let r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){let r=this.rules.inline.autolink.exec(t);if(r){let n,a;return r[2]==="@"?(n=r[1],a="mailto:"+n):(n=r[1],a=n),{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let r;if(r=this.rules.inline.url.exec(t)){let n,a;if(r[2]==="@")n=r[0],a="mailto:"+n;else{let i;do i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(i!==r[0]);n=r[0],r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let r=this.rules.inline.text.exec(t);if(r){let n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},ms=class rw{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Hc,this.options.tokenizer=this.options.tokenizer||new y0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:Ga,block:Yf.normal,inline:Gh.normal};this.options.pedantic?(r.block=Yf.pedantic,r.inline=Gh.pedantic):this.options.gfm&&(r.block=Yf.gfm,this.options.breaks?r.inline=Gh.breaks:r.inline=Gh.gfm),this.tokenizer.rules=r}static get rules(){return{block:Yf,inline:Gh}}static lex(t,r){return new rw(r).lex(t)}static lexInline(t,r){return new rw(r).inlineTokens(t)}lex(t){t=t.replace(Ga.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],n=!1){for(this.options.pedantic&&(t=t.replace(Ga.tabCharGlobal,"    ").replace(Ga.spaceLine,""));t;){let a;if(this.options.extensions?.block?.some(s=>(a=s.call({lexer:this},t,r))?(t=t.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);let s=r.at(-1);a.raw.length===1&&s!==void 0?s.raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.at(-1).src=s.text):r.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title},r.push(a));continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),r.push(a);continue}let i=t;if(this.options.extensions?.startBlock){let s=1/0,l=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},l),typeof d=="number"&&d>=0&&(s=Math.min(s,d))}),s<1/0&&s>=0&&(i=t.substring(0,s+1))}if(this.state.top&&(a=this.tokenizer.paragraph(i))){let s=r.at(-1);n&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(a),n=i.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);let s=r.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+a.raw,s.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(a);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let n=t,a=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,s="";for(;t;){i||(s=""),i=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},t,r))?(t=t.substring(l.raw.length),r.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let h=r.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):r.push(l);continue}if(l=this.tokenizer.emStrong(t,n,s)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),r.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),r.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),r.push(l);continue}let d=t;if(this.options.extensions?.startInline){let h=1/0,p=t.slice(1),f;this.options.extensions.startInline.forEach(m=>{f=m.call({lexer:this},p),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(l=this.tokenizer.inlineText(d)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(s=l.raw.slice(-1)),i=!0;let h=r.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):r.push(l);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},b0=class{options;parser;constructor(t){this.options=t||Hc}space(t){return""}code({text:t,lang:r,escaped:n}){let a=(r||"").match(Ga.notSpaceStart)?.[0],i=t.replace(Ga.endingNewline,"")+`
`;return a?'<pre><code class="language-'+Bs(a)+'">'+(n?i:Bs(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Bs(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:r}){return`<h${r}>${this.parser.parseInline(t)}</h${r}>
`}hr(t){return`<hr>
`}list(t){let r=t.ordered,n=t.start,a="";for(let l=0;l<t.items.length;l++){let d=t.items[l];a+=this.listitem(d)}let i=r?"ol":"ul",s=r&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+a+"</"+i+`>
`}listitem(t){let r="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+Bs(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(t.tokens,!!t.loose),`<li>${r}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let r="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);r+=this.tablerow({text:n});let a="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let l=0;l<s.length;l++)n+=this.tablecell(s[l]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+a+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let r=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Bs(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:r,tokens:n}){let a=this.parser.parseInline(n),i=tN(t);if(i===null)return a;t=i;let s='<a href="'+t+'"';return r&&(s+=' title="'+Bs(r)+'"'),s+=">"+a+"</a>",s}image({href:t,title:r,text:n,tokens:a}){a&&(n=this.parser.parseInline(a,this.parser.textRenderer));let i=tN(t);if(i===null)return Bs(n);t=i;let s=`<img src="${t}" alt="${n}"`;return r&&(s+=` title="${Bs(r)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Bs(t.text)}},QS=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},ys=class nw{options;renderer;textRenderer;constructor(t){this.options=t||Hc,this.options.renderer=this.options.renderer||new b0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new QS}static parse(t,r){return new nw(r).parse(t)}static parseInline(t,r){return new nw(r).parseInline(t)}parse(t,r=!0){let n="";for(let a=0;a<t.length;a++){let i=t[a];if(this.options.extensions?.renderers?.[i.type]){let l=i,d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){n+=d||"";continue}}let s=i;switch(s.type){case"space":{n+=this.renderer.space(s);continue}case"hr":{n+=this.renderer.hr(s);continue}case"heading":{n+=this.renderer.heading(s);continue}case"code":{n+=this.renderer.code(s);continue}case"table":{n+=this.renderer.table(s);continue}case"blockquote":{n+=this.renderer.blockquote(s);continue}case"list":{n+=this.renderer.list(s);continue}case"html":{n+=this.renderer.html(s);continue}case"def":{n+=this.renderer.def(s);continue}case"paragraph":{n+=this.renderer.paragraph(s);continue}case"text":{let l=s,d=this.renderer.text(l);for(;a+1<t.length&&t[a+1].type==="text";)l=t[++a],d+=`
`+this.renderer.text(l);r?n+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):n+=d;continue}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(t,r=this.renderer){let n="";for(let a=0;a<t.length;a++){let i=t[a];if(this.options.extensions?.renderers?.[i.type]){let l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=l||"";continue}}let s=i;switch(s.type){case"escape":{n+=r.text(s);break}case"html":{n+=r.html(s);break}case"link":{n+=r.link(s);break}case"image":{n+=r.image(s);break}case"strong":{n+=r.strong(s);break}case"em":{n+=r.em(s);break}case"codespan":{n+=r.codespan(s);break}case"br":{n+=r.br(s);break}case"del":{n+=r.del(s);break}case"text":{n+=r.text(s);break}default:{let l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}},np=class{options;block;constructor(t){this.options=t||Hc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?ms.lex:ms.lexInline}provideParser(){return this.block?ys.parse:ys.parseInline}},Yue=class{defaults=US();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ys;Renderer=b0;TextRenderer=QS;Lexer=ms;Tokenizer=y0;Hooks=np;constructor(...t){this.use(...t)}walkTokens(t,r){let n=[];for(let a of t)switch(n=n.concat(r.call(this,a)),a.type){case"table":{let i=a;for(let s of i.header)n=n.concat(this.walkTokens(s.tokens,r));for(let s of i.rows)for(let l of s)n=n.concat(this.walkTokens(l.tokens,r));break}case"list":{let i=a;n=n.concat(this.walkTokens(i.items,r));break}default:{let i=a;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{let l=i[s].flat(1/0);n=n.concat(this.walkTokens(l,r))}):i.tokens&&(n=n.concat(this.walkTokens(i.tokens,r)))}}return n}use(...t){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=r.renderers[i.name];s?r.renderers[i.name]=function(...l){let d=i.renderer.apply(this,l);return d===!1&&(d=s.apply(this,l)),d}:r.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=r[i.level];s?s.unshift(i.tokenizer):r[i.level]=[i.tokenizer],i.start&&(i.level==="block"?r.startBlock?r.startBlock.push(i.start):r.startBlock=[i.start]:i.level==="inline"&&(r.startInline?r.startInline.push(i.start):r.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(r.childTokens[i.name]=i.childTokens)}),a.extensions=r),n.renderer){let i=this.defaults.renderer||new b0(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let l=s,d=n.renderer[l],h=i[l];i[l]=(...p)=>{let f=d.apply(i,p);return f===!1&&(f=h.apply(i,p)),f||""}}a.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new y0(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let l=s,d=n.tokenizer[l],h=i[l];i[l]=(...p)=>{let f=d.apply(i,p);return f===!1&&(f=h.apply(i,p)),f}}a.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new np;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let l=s,d=n.hooks[l],h=i[l];np.passThroughHooks.has(s)?i[l]=p=>{if(this.defaults.async&&np.passThroughHooksRespectAsync.has(s))return(async()=>{let m=await d.call(i,p);return h.call(i,m)})();let f=d.call(i,p);return h.call(i,f)}:i[l]=(...p)=>{if(this.defaults.async)return(async()=>{let m=await d.apply(i,p);return m===!1&&(m=await h.apply(i,p)),m})();let f=d.apply(i,p);return f===!1&&(f=h.apply(i,p)),f}}a.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;a.walkTokens=function(l){let d=[];return d.push(s.call(this,l)),i&&(d=d.concat(i.call(this,l))),d}}this.defaults={...this.defaults,...a}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return ms.lex(t,r??this.defaults)}parser(t,r){return ys.parse(t,r??this.defaults)}parseMarkdown(t){return(r,n)=>{let a={...n},i={...this.defaults,...a},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let l=i.hooks?await i.hooks.preprocess(r):r,d=await(i.hooks?await i.hooks.provideLexer():t?ms.lex:ms.lexInline)(l,i),h=i.hooks?await i.hooks.processAllTokens(d):d;i.walkTokens&&await Promise.all(this.walkTokens(h,i.walkTokens));let p=await(i.hooks?await i.hooks.provideParser():t?ys.parse:ys.parseInline)(h,i);return i.hooks?await i.hooks.postprocess(p):p})().catch(s);try{i.hooks&&(r=i.hooks.preprocess(r));let l=(i.hooks?i.hooks.provideLexer():t?ms.lex:ms.lexInline)(r,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let d=(i.hooks?i.hooks.provideParser():t?ys.parse:ys.parseInline)(l,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(l){return s(l)}}}onError(t,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let a="<p>An error occurred:</p><pre>"+Bs(n.message+"",!0)+"</pre>";return r?Promise.resolve(a):a}if(r)return Promise.reject(n);throw n}}},Nc=new Yue;function Fr(e,t){return Nc.parse(e,t)}Fr.options=Fr.setOptions=function(e){return Nc.setOptions(e),Fr.defaults=Nc.defaults,GM(Fr.defaults),Fr};Fr.getDefaults=US;Fr.defaults=Hc;Fr.use=function(...e){return Nc.use(...e),Fr.defaults=Nc.defaults,GM(Fr.defaults),Fr};Fr.walkTokens=function(e,t){return Nc.walkTokens(e,t)};Fr.parseInline=Nc.parseInline;Fr.Parser=ys;Fr.parser=ys.parse;Fr.Renderer=b0;Fr.TextRenderer=QS;Fr.Lexer=ms;Fr.lexer=ms.lex;Fr.Tokenizer=y0;Fr.Hooks=np;Fr.parse=Fr;Fr.options;Fr.setOptions;Fr.use;Fr.walkTokens;Fr.parseInline;ys.parse;ms.lex;function rO(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var a=n.reduce(function(l,d){var h=d.match(/\n([\t ]+|(?!\s).)/g);return h?l.concat(h.map(function(p){var f,m;return(m=(f=p.match(/[\t ]/g))===null||f===void 0?void 0:f.length)!==null&&m!==void 0?m:0})):l},[]);if(a.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");n=n.map(function(l){return l.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var s=n[0];return t.forEach(function(l,d){var h=s.match(/(?:^|\n)( *)$/),p=h?h[1]:"",f=l;typeof l=="string"&&l.includes(`
`)&&(f=String(l).split(`
`).map(function(m,b){return b===0?m:""+p+m}).join(`
`)),s+=f+n[d+1]}),s}var Que={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},aw=new Map,nO=new Map,Kue=L(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(Fe.debug("Registering icon pack:",t.name),"loader"in t)nO.set(t.name,t.loader);else if("icons"in t)aw.set(t.name,t.icons);else throw Fe.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),aO=L(async(e,t)=>{const r=Xce(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const n=r.prefix||t;if(!n)throw new Error(`Icon name must contain a prefix: ${e}`);let a=aw.get(n);if(!a){const s=nO.get(n);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await s(),prefix:n},aw.set(n,a)}catch(l){throw Fe.error(l),new Error(`Failed to load icon set: ${r.prefix}`)}}const i=eue(a,r.name);if(!i)throw new Error(`Icon not found: ${e}`);return i},"getRegisteredIconData"),Xue=L(async e=>{try{return await aO(e),!0}catch{return!1}},"isIconAvailable"),mg=L(async(e,t,r)=>{let n;try{n=await aO(e,t?.fallbackPrefix)}catch(s){Fe.error(s),n=Que}const a=oue(n,t),i=hue(due(a.body),{...a.attributes,...r});return es(i,Na())},"getIconSVG");function iO(e,{markdownAutoWrap:t}){const n=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=rO(n);return t===!1?a.replace(/ /g,"&nbsp;"):a}L(iO,"preprocessMarkdown");function sO(e,t={}){const r=iO(e,t),n=Fr.lexer(r),a=[[]];let i=0;function s(l,d="normal"){l.type==="text"?l.text.split(`
`).forEach((p,f)=>{f!==0&&(i++,a.push([])),p.split(" ").forEach(m=>{m=m.replace(/&#39;/g,"'"),m&&a[i].push({content:m,type:d})})}):l.type==="strong"||l.type==="em"?l.tokens.forEach(h=>{s(h,l.type)}):l.type==="html"&&a[i].push({content:l.text,type:"normal"})}return L(s,"processNode"),n.forEach(l=>{l.type==="paragraph"?l.tokens?.forEach(d=>{s(d)}):l.type==="html"?a[i].push({content:l.text,type:"normal"}):a[i].push({content:l.raw,type:"normal"})}),a}L(sO,"markdownToLines");function oO(e,{markdownAutoWrap:t}={}){const r=Fr.lexer(e);function n(a){return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${a.tokens?.map(n).join("")}</strong>`:a.type==="em"?`<em>${a.tokens?.map(n).join("")}</em>`:a.type==="paragraph"?`<p>${a.tokens?.map(n).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:(Fe.warn(`Unsupported markdown: ${a.type}`),a.raw)}return L(n,"output"),r.map(n).join("")}L(oO,"markdownToHTML");function lO(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}L(lO,"splitTextToChars");function cO(e,t){const r=lO(t.content);return KS(e,[],r,t.type)}L(cO,"splitWordToFitWidth");function KS(e,t,r,n){if(r.length===0)return[{content:t.join(""),type:n},{content:"",type:n}];const[a,...i]=r,s=[...t,a];return e([{content:s.join(""),type:n}])?KS(e,s,i,n):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:n},{content:r.join(""),type:n}])}L(KS,"splitWordToFitWidthRecursion");function uO(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return x0(e,t)}L(uO,"splitLineToFitWidth");function x0(e,t,r=[],n=[]){if(e.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const i=e.shift()??{content:" ",type:"normal"},s=[...n];if(a!==""&&s.push({content:a,type:"normal"}),s.push(i),t(s))return x0(e,t,r,s);if(n.length>0)r.push(n),e.unshift(i);else if(i.content){const[l,d]=cO(t,i);r.push([l]),d.content&&e.unshift(d)}return x0(e,t,r)}L(x0,"splitLineToFitWidthRecursion");function iw(e,t){t&&e.attr("style",t)}L(iw,"applyStyle");async function dO(e,t,r,n,a=!1,i=Na()){const s=e.append("foreignObject");s.attr("width",`${10*r}px`),s.attr("height",`${10*r}px`);const l=s.append("xhtml:div"),d=cd(t.label)?await iS(t.label.replace(Ad.lineBreakRegex,`
`),i):es(t.label,i),h=t.isNode?"nodeLabel":"edgeLabel",p=l.append("span");p.html(d),iw(p,t.labelStyle),p.attr("class",`${h} ${n}`),iw(l,t.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("line-height","1.5"),l.style("max-width",r+"px"),l.style("text-align","center"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&l.attr("class","labelBkg");let f=l.node().getBoundingClientRect();return f.width===r&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",r+"px"),f=l.node().getBoundingClientRect()),s.node()}L(dO,"addHtmlSpan");function uy(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}L(uy,"createTspan");function hO(e,t,r){const n=e.append("text"),a=uy(n,1,t);dy(a,r);const i=a.node().getComputedTextLength();return n.remove(),i}L(hO,"computeWidthOfText");function Jue(e,t,r){const n=e.append("text"),a=uy(n,1,t);dy(a,[{content:r,type:"normal"}]);const i=a.node()?.getBoundingClientRect();return i&&n.remove(),i}L(Jue,"computeDimensionOfText");function pO(e,t,r,n=!1){const i=t.append("g"),s=i.insert("rect").attr("class","background").attr("style","stroke: none"),l=i.append("text").attr("y","-10.1");let d=0;for(const h of r){const p=L(m=>hO(i,1.1,m)<=e,"checkWidth"),f=p(h)?[h]:uO(h,p);for(const m of f){const b=uy(l,d,1.1);dy(b,m),d++}}if(n){const h=l.node().getBBox(),p=2;return s.attr("x",h.x-p).attr("y",h.y-p).attr("width",h.width+2*p).attr("height",h.height+2*p),i.node()}else return l.node()}L(pO,"createFormattedText");function dy(e,t){e.text(""),t.forEach((r,n)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?a.text(r.content):a.text(" "+r.content)})}L(dy,"updateTextContentAndStyles");async function gO(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(a,i,s)=>(r.push((async()=>{const l=`${i}:${s}`;return await Xue(l)?await mg(l,void 0,{class:"label-icon"}):`<i class='${es(a,t).replace(":"," ")}'></i>`})()),a));const n=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>n.shift()??"")}L(gO,"replaceIconSubstring");var Pl=L(async(e,t="",{style:r="",isTitle:n=!1,classes:a="",useHtmlLabels:i=!0,isNode:s=!0,width:l=200,addSvgBackground:d=!1}={},h)=>{if(Fe.debug("XYZ createText",t,r,n,a,i,s,"addSvgBackground: ",d),i){const p=oO(t,h),f=await gO(qc(p),h),m=t.replace(/\\\\/g,"\\"),b={isNode:s,label:cd(t)?m:f,labelStyle:r.replace("fill:","color:")};return await dO(e,b,l,a,d,h)}else{const p=t.replace(/<br\s*\/?>/g,"<br/>"),f=sO(p.replace("<br>","<br/>"),h),m=pO(l,e,f,t?d:!1);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Cr(m).attr("style",b)}else{const b=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Cr(m).select("rect").attr("style",b.replace(/background:/g,"fill:"));const x=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Cr(m).select("text").attr("style",x)}return m}},"createText");function yv(e,t,r){if(e&&e.length){const[n,a]=t,i=Math.PI/180*r,s=Math.cos(i),l=Math.sin(i);for(const d of e){const[h,p]=d;d[0]=(h-n)*s-(p-a)*l+n,d[1]=(h-n)*l+(p-a)*s+a}}}function Zue(e,t){return e[0]===t[0]&&e[1]===t[1]}function ede(e,t,r,n=1){const a=r,i=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,l=[0,0];if(a)for(const h of s)yv(h,l,a);const d=(function(h,p,f){const m=[];for(const C of h){const A=[...C];Zue(A[0],A[A.length-1])||A.push([A[0][0],A[0][1]]),A.length>2&&m.push(A)}const b=[];p=Math.max(p,.1);const x=[];for(const C of m)for(let A=0;A<C.length-1;A++){const D=C[A],B=C[A+1];if(D[1]!==B[1]){const R=Math.min(D[1],B[1]);x.push({ymin:R,ymax:Math.max(D[1],B[1]),x:R===D[1]?D[0]:B[0],islope:(B[0]-D[0])/(B[1]-D[1])})}}if(x.sort(((C,A)=>C.ymin<A.ymin?-1:C.ymin>A.ymin?1:C.x<A.x?-1:C.x>A.x?1:C.ymax===A.ymax?0:(C.ymax-A.ymax)/Math.abs(C.ymax-A.ymax))),!x.length)return b;let v=[],T=x[0].ymin,k=0;for(;v.length||x.length;){if(x.length){let C=-1;for(let A=0;A<x.length&&!(x[A].ymin>T);A++)C=A;x.splice(0,C+1).forEach((A=>{v.push({s:T,edge:A})}))}if(v=v.filter((C=>!(C.edge.ymax<=T))),v.sort(((C,A)=>C.edge.x===A.edge.x?0:(C.edge.x-A.edge.x)/Math.abs(C.edge.x-A.edge.x))),(f!==1||k%p==0)&&v.length>1)for(let C=0;C<v.length;C+=2){const A=C+1;if(A>=v.length)break;const D=v[C].edge,B=v[A].edge;b.push([[Math.round(D.x),T],[Math.round(B.x),T]])}T+=f,v.forEach((C=>{C.edge.x=C.edge.x+f*C.edge.islope})),k++}return b})(s,i,n);if(a){for(const h of s)yv(h,l,-a);(function(h,p,f){const m=[];h.forEach((b=>m.push(...b))),yv(m,p,f)})(d,l,-a)}return d}function yg(e,t){var r;const n=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let i=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(i=a),ede(e,a,n,i||1)}class XS{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const n=yg(t,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(t,r){const n=[];for(const a of t)n.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return n}}function hy(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class tde extends XS{fillPolygons(t,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const a=yg(t,Object.assign({},r,{hachureGap:n})),i=Math.PI/180*r.hachureAngle,s=[],l=.5*n*Math.cos(i),d=.5*n*Math.sin(i);for(const[h,p]of a)hy([h,p])&&s.push([[h[0]-l,h[1]+d],[...p]],[[h[0]+l,h[1]-d],[...p]]);return{type:"fillSketch",ops:this.renderLines(s,r)}}}class rde extends XS{fillPolygons(t,r){const n=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),i=this._fillPolygons(t,a);return n.ops=n.ops.concat(i.ops),n}}class nde{constructor(t){this.helper=t}fillPolygons(t,r){const n=yg(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(t,r){const n=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=a/4;for(const l of t){const d=hy(l),h=d/a,p=Math.ceil(h)-1,f=d-p*a,m=(l[0][0]+l[1][0])/2-a/4,b=Math.min(l[0][1],l[1][1]);for(let x=0;x<p;x++){const v=b+f+x*a,T=m-s+2*Math.random()*s,k=v-s+2*Math.random()*s,C=this.helper.ellipse(T,k,i,i,r);n.push(...C.ops)}}return{type:"fillSketch",ops:n}}}class ade{constructor(t){this.helper=t}fillPolygons(t,r){const n=yg(t,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(t,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,i=[];return t.forEach((s=>{const l=hy(s),d=Math.floor(l/(n+a)),h=(l+a-d*(n+a))/2;let p=s[0],f=s[1];p[0]>f[0]&&(p=s[1],f=s[0]);const m=Math.atan((f[1]-p[1])/(f[0]-p[0]));for(let b=0;b<d;b++){const x=b*(n+a),v=x+n,T=[p[0]+x*Math.cos(m)+h*Math.cos(m),p[1]+x*Math.sin(m)+h*Math.sin(m)],k=[p[0]+v*Math.cos(m)+h*Math.cos(m),p[1]+v*Math.sin(m)+h*Math.sin(m)];i.push(...this.helper.doubleLineOps(T[0],T[1],k[0],k[1],r))}})),i}}class ide{constructor(t){this.helper=t}fillPolygons(t,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?n:r.zigzagOffset,i=yg(t,r=Object.assign({},r,{hachureGap:n+a}));return{type:"fillSketch",ops:this.zigzagLines(i,a,r)}}zigzagLines(t,r,n){const a=[];return t.forEach((i=>{const s=hy(i),l=Math.round(s/(2*r));let d=i[0],h=i[1];d[0]>h[0]&&(d=i[1],h=i[0]);const p=Math.atan((h[1]-d[1])/(h[0]-d[0]));for(let f=0;f<l;f++){const m=2*f*r,b=2*(f+1)*r,x=Math.sqrt(2*Math.pow(r,2)),v=[d[0]+m*Math.cos(p),d[1]+m*Math.sin(p)],T=[d[0]+b*Math.cos(p),d[1]+b*Math.sin(p)],k=[v[0]+x*Math.cos(p+Math.PI/4),v[1]+x*Math.sin(p+Math.PI/4)];a.push(...this.helper.doubleLineOps(v[0],v[1],k[0],k[1],n),...this.helper.doubleLineOps(k[0],k[1],T[0],T[1],n))}})),a}}const ai={};class sde{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ode=0,bv=1,aN=2,Qf={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function xv(e,t){return e.type===t}function JS(e){const t=[],r=(function(s){const l=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))l[l.length]={type:ode,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];l[l.length]={type:bv,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return l[l.length]={type:aN,text:""},l})(e);let n="BOD",a=0,i=r[a];for(;!xv(i,aN);){let s=0;const l=[];if(n==="BOD"){if(i.text!=="M"&&i.text!=="m")return JS("M0,0"+e);a++,s=Qf[i.text],n=i.text}else xv(i,bv)?s=Qf[n]:(a++,s=Qf[i.text],n=i.text);if(!(a+s<r.length))throw new Error("Path data ended short");for(let d=a;d<a+s;d++){const h=r[d];if(!xv(h,bv))throw new Error("Param not a number: "+n+","+h.text);l[l.length]=+h.text}if(typeof Qf[n]!="number")throw new Error("Bad segment: "+n);{const d={key:n,data:l};t.push(d),a+=s,i=r[a],n==="M"&&(n="L"),n==="m"&&(n="l")}}return t}function fO(e){let t=0,r=0,n=0,a=0;const i=[];for(const{key:s,data:l}of e)switch(s){case"M":i.push({key:"M",data:[...l]}),[t,r]=l,[n,a]=l;break;case"m":t+=l[0],r+=l[1],i.push({key:"M",data:[t,r]}),n=t,a=r;break;case"L":i.push({key:"L",data:[...l]}),[t,r]=l;break;case"l":t+=l[0],r+=l[1],i.push({key:"L",data:[t,r]});break;case"C":i.push({key:"C",data:[...l]}),t=l[4],r=l[5];break;case"c":{const d=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"C",data:d}),t=d[4],r=d[5];break}case"Q":i.push({key:"Q",data:[...l]}),t=l[2],r=l[3];break;case"q":{const d=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"Q",data:d}),t=d[2],r=d[3];break}case"A":i.push({key:"A",data:[...l]}),t=l[5],r=l[6];break;case"a":t+=l[5],r+=l[6],i.push({key:"A",data:[l[0],l[1],l[2],l[3],l[4],t,r]});break;case"H":i.push({key:"H",data:[...l]}),t=l[0];break;case"h":t+=l[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...l]}),r=l[0];break;case"v":r+=l[0],i.push({key:"V",data:[r]});break;case"S":i.push({key:"S",data:[...l]}),t=l[2],r=l[3];break;case"s":{const d=l.map(((h,p)=>p%2?h+r:h+t));i.push({key:"S",data:d}),t=d[2],r=d[3];break}case"T":i.push({key:"T",data:[...l]}),t=l[0],r=l[1];break;case"t":t+=l[0],r+=l[1],i.push({key:"T",data:[t,r]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=n,r=a}return i}function mO(e){const t=[];let r="",n=0,a=0,i=0,s=0,l=0,d=0;for(const{key:h,data:p}of e){switch(h){case"M":t.push({key:"M",data:[...p]}),[n,a]=p,[i,s]=p;break;case"C":t.push({key:"C",data:[...p]}),n=p[4],a=p[5],l=p[2],d=p[3];break;case"L":t.push({key:"L",data:[...p]}),[n,a]=p;break;case"H":n=p[0],t.push({key:"L",data:[n,a]});break;case"V":a=p[0],t.push({key:"L",data:[n,a]});break;case"S":{let f=0,m=0;r==="C"||r==="S"?(f=n+(n-l),m=a+(a-d)):(f=n,m=a),t.push({key:"C",data:[f,m,...p]}),l=p[0],d=p[1],n=p[2],a=p[3];break}case"T":{const[f,m]=p;let b=0,x=0;r==="Q"||r==="T"?(b=n+(n-l),x=a+(a-d)):(b=n,x=a);const v=n+2*(b-n)/3,T=a+2*(x-a)/3,k=f+2*(b-f)/3,C=m+2*(x-m)/3;t.push({key:"C",data:[v,T,k,C,f,m]}),l=b,d=x,n=f,a=m;break}case"Q":{const[f,m,b,x]=p,v=n+2*(f-n)/3,T=a+2*(m-a)/3,k=b+2*(f-b)/3,C=x+2*(m-x)/3;t.push({key:"C",data:[v,T,k,C,b,x]}),l=f,d=m,n=b,a=x;break}case"A":{const f=Math.abs(p[0]),m=Math.abs(p[1]),b=p[2],x=p[3],v=p[4],T=p[5],k=p[6];f===0||m===0?(t.push({key:"C",data:[n,a,T,k,T,k]}),n=T,a=k):(n!==T||a!==k)&&(yO(n,a,T,k,f,m,b,x,v).forEach((function(C){t.push({key:"C",data:C})})),n=T,a=k);break}case"Z":t.push({key:"Z",data:[]}),n=i,a=s}r=h}return t}function Vh(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function yO(e,t,r,n,a,i,s,l,d,h){const p=(f=s,Math.PI*f/180);var f;let m=[],b=0,x=0,v=0,T=0;if(h)[b,x,v,T]=h;else{[e,t]=Vh(e,t,-p),[r,n]=Vh(r,n,-p);const q=(e-r)/2,N=(t-n)/2;let U=q*q/(a*a)+N*N/(i*i);U>1&&(U=Math.sqrt(U),a*=U,i*=U);const j=a*a,K=i*i,Q=j*K-j*N*N-K*q*q,ie=j*N*N+K*q*q,G=(l===d?-1:1)*Math.sqrt(Math.abs(Q/ie));v=G*a*N/i+(e+r)/2,T=G*-i*q/a+(t+n)/2,b=Math.asin(parseFloat(((t-T)/i).toFixed(9))),x=Math.asin(parseFloat(((n-T)/i).toFixed(9))),e<v&&(b=Math.PI-b),r<v&&(x=Math.PI-x),b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),d&&b>x&&(b-=2*Math.PI),!d&&x>b&&(x-=2*Math.PI)}let k=x-b;if(Math.abs(k)>120*Math.PI/180){const q=x,N=r,U=n;x=d&&x>b?b+120*Math.PI/180*1:b+120*Math.PI/180*-1,m=yO(r=v+a*Math.cos(x),n=T+i*Math.sin(x),N,U,a,i,s,0,d,[x,q,v,T])}k=x-b;const C=Math.cos(b),A=Math.sin(b),D=Math.cos(x),B=Math.sin(x),R=Math.tan(k/4),M=4/3*a*R,$=4/3*i*R,W=[e,t],O=[e+M*A,t-$*C],Y=[r+M*B,n-$*D],X=[r,n];if(O[0]=2*W[0]-O[0],O[1]=2*W[1]-O[1],h)return[O,Y,X].concat(m);{m=[O,Y,X].concat(m);const q=[];for(let N=0;N<m.length;N+=3){const U=Vh(m[N][0],m[N][1],p),j=Vh(m[N+1][0],m[N+1][1],p),K=Vh(m[N+2][0],m[N+2][1],p);q.push([U[0],U[1],j[0],j[1],K[0],K[1]])}return q}}const lde={randOffset:function(e,t){return zt(e,t)},randOffsetWithRange:function(e,t,r){return v0(e,t,r)},ellipse:function(e,t,r,n,a){const i=xO(r,n,a);return sw(e,t,a,i).opset},doubleLineOps:function(e,t,r,n,a){return Cl(e,t,r,n,a,!0)}};function bO(e,t,r,n,a){return{type:"path",ops:Cl(e,t,r,n,a)}}function wm(e,t,r){const n=(e||[]).length;if(n>2){const a=[];for(let i=0;i<n-1;i++)a.push(...Cl(e[i][0],e[i][1],e[i+1][0],e[i+1][1],r));return t&&a.push(...Cl(e[n-1][0],e[n-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return n===2?bO(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function cde(e,t,r,n,a){return(function(i,s){return wm(i,!0,s)})([[e,t],[e+r,t],[e+r,t+n],[e,t+n]],a)}function iN(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,n=Kf(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:Kf(r[0],1.5*(1+.22*t.roughness),lN(t));for(let i=1;i<r.length;i++){const s=r[i];if(s.length){const l=Kf(s,1*(1+.2*t.roughness),t),d=t.disableMultiStroke?[]:Kf(s,1.5*(1+.22*t.roughness),lN(t));for(const h of l)h.op!=="move"&&n.push(h);for(const h of d)h.op!=="move"&&a.push(h)}}return{type:"path",ops:n.concat(a)}}return{type:"path",ops:[]}}function xO(e,t,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),i=2*Math.PI/a;let s=Math.abs(e/2),l=Math.abs(t/2);const d=1-r.curveFitting;return s+=zt(s*d,r),l+=zt(l*d,r),{increment:i,rx:s,ry:l}}function sw(e,t,r,n){const[a,i]=cN(n.increment,e,t,n.rx,n.ry,1,n.increment*v0(.1,v0(.4,1,r),r),r);let s=w0(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[l]=cN(n.increment,e,t,n.rx,n.ry,1.5,0,r),d=w0(l,null,r);s=s.concat(d)}return{estimatedPoints:i,opset:{type:"path",ops:s}}}function sN(e,t,r,n,a,i,s,l,d){const h=e,p=t;let f=Math.abs(r/2),m=Math.abs(n/2);f+=zt(.01*f,d),m+=zt(.01*m,d);let b=a,x=i;for(;b<0;)b+=2*Math.PI,x+=2*Math.PI;x-b>2*Math.PI&&(b=0,x=2*Math.PI);const v=2*Math.PI/d.curveStepCount,T=Math.min(v/2,(x-b)/2),k=uN(T,h,p,f,m,b,x,1,d);if(!d.disableMultiStroke){const C=uN(T,h,p,f,m,b,x,1.5,d);k.push(...C)}return s&&(l?k.push(...Cl(h,p,h+f*Math.cos(b),p+m*Math.sin(b),d),...Cl(h,p,h+f*Math.cos(x),p+m*Math.sin(x),d)):k.push({op:"lineTo",data:[h,p]},{op:"lineTo",data:[h+f*Math.cos(b),p+m*Math.sin(b)]})),{type:"path",ops:k}}function oN(e,t){const r=mO(fO(JS(e))),n=[];let a=[0,0],i=[0,0];for(const{key:s,data:l}of r)switch(s){case"M":i=[l[0],l[1]],a=[l[0],l[1]];break;case"L":n.push(...Cl(i[0],i[1],l[0],l[1],t)),i=[l[0],l[1]];break;case"C":{const[d,h,p,f,m,b]=l;n.push(...ude(d,h,p,f,m,b,i,t)),i=[m,b];break}case"Z":n.push(...Cl(i[0],i[1],a[0],a[1],t)),i=[a[0],a[1]]}return{type:"path",ops:n}}function vv(e,t){const r=[];for(const n of e)if(n.length){const a=t.maxRandomnessOffset||0,i=n.length;if(i>2){r.push({op:"move",data:[n[0][0]+zt(a,t),n[0][1]+zt(a,t)]});for(let s=1;s<i;s++)r.push({op:"lineTo",data:[n[s][0]+zt(a,t),n[s][1]+zt(a,t)]})}}return{type:"fillPath",ops:r}}function Iu(e,t){return(function(r,n){let a=r.fillStyle||"hachure";if(!ai[a])switch(a){case"zigzag":ai[a]||(ai[a]=new tde(n));break;case"cross-hatch":ai[a]||(ai[a]=new rde(n));break;case"dots":ai[a]||(ai[a]=new nde(n));break;case"dashed":ai[a]||(ai[a]=new ade(n));break;case"zigzag-line":ai[a]||(ai[a]=new ide(n));break;default:a="hachure",ai[a]||(ai[a]=new XS(n))}return ai[a]})(t,lde).fillPolygons(e,t)}function lN(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function vO(e){return e.randomizer||(e.randomizer=new sde(e.seed||0)),e.randomizer.next()}function v0(e,t,r,n=1){return r.roughness*n*(vO(r)*(t-e)+e)}function zt(e,t,r=1){return v0(-e,e,t,r)}function Cl(e,t,r,n,a,i=!1){const s=i?a.disableMultiStrokeFill:a.disableMultiStroke,l=ow(e,t,r,n,a,!0,!1);if(s)return l;const d=ow(e,t,r,n,a,!0,!0);return l.concat(d)}function ow(e,t,r,n,a,i,s){const l=Math.pow(e-r,2)+Math.pow(t-n,2),d=Math.sqrt(l);let h=1;h=d<200?1:d>500?.4:-.0016668*d+1.233334;let p=a.maxRandomnessOffset||0;p*p*100>l&&(p=d/10);const f=p/2,m=.2+.2*vO(a);let b=a.bowing*a.maxRandomnessOffset*(n-t)/200,x=a.bowing*a.maxRandomnessOffset*(e-r)/200;b=zt(b,a,h),x=zt(x,a,h);const v=[],T=()=>zt(f,a,h),k=()=>zt(p,a,h),C=a.preserveVertices;return s?v.push({op:"move",data:[e+(C?0:T()),t+(C?0:T())]}):v.push({op:"move",data:[e+(C?0:zt(p,a,h)),t+(C?0:zt(p,a,h))]}),s?v.push({op:"bcurveTo",data:[b+e+(r-e)*m+T(),x+t+(n-t)*m+T(),b+e+2*(r-e)*m+T(),x+t+2*(n-t)*m+T(),r+(C?0:T()),n+(C?0:T())]}):v.push({op:"bcurveTo",data:[b+e+(r-e)*m+k(),x+t+(n-t)*m+k(),b+e+2*(r-e)*m+k(),x+t+2*(n-t)*m+k(),r+(C?0:k()),n+(C?0:k())]}),v}function Kf(e,t,r){if(!e.length)return[];const n=[];n.push([e[0][0]+zt(t,r),e[0][1]+zt(t,r)]),n.push([e[0][0]+zt(t,r),e[0][1]+zt(t,r)]);for(let a=1;a<e.length;a++)n.push([e[a][0]+zt(t,r),e[a][1]+zt(t,r)]),a===e.length-1&&n.push([e[a][0]+zt(t,r),e[a][1]+zt(t,r)]);return w0(n,null,r)}function w0(e,t,r){const n=e.length,a=[];if(n>3){const i=[],s=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let l=1;l+2<n;l++){const d=e[l];i[0]=[d[0],d[1]],i[1]=[d[0]+(s*e[l+1][0]-s*e[l-1][0])/6,d[1]+(s*e[l+1][1]-s*e[l-1][1])/6],i[2]=[e[l+1][0]+(s*e[l][0]-s*e[l+2][0])/6,e[l+1][1]+(s*e[l][1]-s*e[l+2][1])/6],i[3]=[e[l+1][0],e[l+1][1]],a.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else n===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):n===2&&a.push(...ow(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function cN(e,t,r,n,a,i,s,l){const d=[],h=[];if(l.roughness===0){e/=4,h.push([t+n*Math.cos(-e),r+a*Math.sin(-e)]);for(let p=0;p<=2*Math.PI;p+=e){const f=[t+n*Math.cos(p),r+a*Math.sin(p)];d.push(f),h.push(f)}h.push([t+n*Math.cos(0),r+a*Math.sin(0)]),h.push([t+n*Math.cos(e),r+a*Math.sin(e)])}else{const p=zt(.5,l)-Math.PI/2;h.push([zt(i,l)+t+.9*n*Math.cos(p-e),zt(i,l)+r+.9*a*Math.sin(p-e)]);const f=2*Math.PI+p-.01;for(let m=p;m<f;m+=e){const b=[zt(i,l)+t+n*Math.cos(m),zt(i,l)+r+a*Math.sin(m)];d.push(b),h.push(b)}h.push([zt(i,l)+t+n*Math.cos(p+2*Math.PI+.5*s),zt(i,l)+r+a*Math.sin(p+2*Math.PI+.5*s)]),h.push([zt(i,l)+t+.98*n*Math.cos(p+s),zt(i,l)+r+.98*a*Math.sin(p+s)]),h.push([zt(i,l)+t+.9*n*Math.cos(p+.5*s),zt(i,l)+r+.9*a*Math.sin(p+.5*s)])}return[h,d]}function uN(e,t,r,n,a,i,s,l,d){const h=i+zt(.1,d),p=[];p.push([zt(l,d)+t+.9*n*Math.cos(h-e),zt(l,d)+r+.9*a*Math.sin(h-e)]);for(let f=h;f<=s;f+=e)p.push([zt(l,d)+t+n*Math.cos(f),zt(l,d)+r+a*Math.sin(f)]);return p.push([t+n*Math.cos(s),r+a*Math.sin(s)]),p.push([t+n*Math.cos(s),r+a*Math.sin(s)]),w0(p,null,d)}function ude(e,t,r,n,a,i,s,l){const d=[],h=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let p=[0,0];const f=l.disableMultiStroke?1:2,m=l.preserveVertices;for(let b=0;b<f;b++)b===0?d.push({op:"move",data:[s[0],s[1]]}):d.push({op:"move",data:[s[0]+(m?0:zt(h[0],l)),s[1]+(m?0:zt(h[0],l))]}),p=m?[a,i]:[a+zt(h[b],l),i+zt(h[b],l)],d.push({op:"bcurveTo",data:[e+zt(h[b],l),t+zt(h[b],l),r+zt(h[b],l),n+zt(h[b],l),p[0],p[1]]});return d}function Yh(e){return[...e]}function dN(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(Yh(e[0]),Yh(e[1]),Yh(e[2]),Yh(e[2]));else{const a=[];a.push(e[0],e[0]);for(let l=1;l<e.length;l++)a.push(e[l]),l===e.length-1&&a.push(e[l]);const i=[],s=1-t;n.push(Yh(a[0]));for(let l=1;l+2<a.length;l++){const d=a[l];i[0]=[d[0],d[1]],i[1]=[d[0]+(s*a[l+1][0]-s*a[l-1][0])/6,d[1]+(s*a[l+1][1]-s*a[l-1][1])/6],i[2]=[a[l+1][0]+(s*a[l][0]-s*a[l+2][0])/6,a[l+1][1]+(s*a[l][1]-s*a[l+2][1])/6],i[3]=[a[l+1][0],a[l+1][1]],n.push(i[1],i[2],i[3])}}return n}function Sm(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function dde(e,t,r){const n=Sm(t,r);if(n===0)return Sm(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return a=Math.max(0,Math.min(1,a)),Sm(e,sc(t,r,a))}function sc(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function lw(e,t,r,n){const a=n||[];if((function(l,d){const h=l[d+0],p=l[d+1],f=l[d+2],m=l[d+3];let b=3*p[0]-2*h[0]-m[0];b*=b;let x=3*p[1]-2*h[1]-m[1];x*=x;let v=3*f[0]-2*m[0]-h[0];v*=v;let T=3*f[1]-2*m[1]-h[1];return T*=T,b<v&&(b=v),x<T&&(x=T),b+x})(e,t)<r){const l=e[t+0];a.length?(i=a[a.length-1],s=l,Math.sqrt(Sm(i,s))>1&&a.push(l)):a.push(l),a.push(e[t+3])}else{const d=e[t+0],h=e[t+1],p=e[t+2],f=e[t+3],m=sc(d,h,.5),b=sc(h,p,.5),x=sc(p,f,.5),v=sc(m,b,.5),T=sc(b,x,.5),k=sc(v,T,.5);lw([d,m,v,k],0,r,a),lw([k,T,x,f],0,r,a)}var i,s;return a}function hde(e,t){return S0(e,0,e.length,t)}function S0(e,t,r,n,a){const i=a||[],s=e[t],l=e[r-1];let d=0,h=1;for(let p=t+1;p<r-1;++p){const f=dde(e[p],s,l);f>d&&(d=f,h=p)}return Math.sqrt(d)>n?(S0(e,t,h+1,n,i),S0(e,h,r,n,i)):(i.length||i.push(s),i.push(l)),i}function wv(e,t=.15,r){const n=[],a=(e.length-1)/3;for(let i=0;i<a;i++)lw(e,3*i,t,n);return r&&r>0?S0(n,0,n.length,r):n}const Ei="none";class T0{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,n){return{shape:t,sets:r||[],options:n||this.defaultOptions}}line(t,r,n,a,i){const s=this._o(i);return this._d("line",[bO(t,r,n,a,s)],s)}rectangle(t,r,n,a,i){const s=this._o(i),l=[],d=cde(t,r,n,a,s);if(s.fill){const h=[[t,r],[t+n,r],[t+n,r+a],[t,r+a]];s.fillStyle==="solid"?l.push(vv([h],s)):l.push(Iu([h],s))}return s.stroke!==Ei&&l.push(d),this._d("rectangle",l,s)}ellipse(t,r,n,a,i){const s=this._o(i),l=[],d=xO(n,a,s),h=sw(t,r,s,d);if(s.fill)if(s.fillStyle==="solid"){const p=sw(t,r,s,d).opset;p.type="fillPath",l.push(p)}else l.push(Iu([h.estimatedPoints],s));return s.stroke!==Ei&&l.push(h.opset),this._d("ellipse",l,s)}circle(t,r,n,a){const i=this.ellipse(t,r,n,n,a);return i.shape="circle",i}linearPath(t,r){const n=this._o(r);return this._d("linearPath",[wm(t,!1,n)],n)}arc(t,r,n,a,i,s,l=!1,d){const h=this._o(d),p=[],f=sN(t,r,n,a,i,s,l,!0,h);if(l&&h.fill)if(h.fillStyle==="solid"){const m=Object.assign({},h);m.disableMultiStroke=!0;const b=sN(t,r,n,a,i,s,!0,!1,m);b.type="fillPath",p.push(b)}else p.push((function(m,b,x,v,T,k,C){const A=m,D=b;let B=Math.abs(x/2),R=Math.abs(v/2);B+=zt(.01*B,C),R+=zt(.01*R,C);let M=T,$=k;for(;M<0;)M+=2*Math.PI,$+=2*Math.PI;$-M>2*Math.PI&&(M=0,$=2*Math.PI);const W=($-M)/C.curveStepCount,O=[];for(let Y=M;Y<=$;Y+=W)O.push([A+B*Math.cos(Y),D+R*Math.sin(Y)]);return O.push([A+B*Math.cos($),D+R*Math.sin($)]),O.push([A,D]),Iu([O],C)})(t,r,n,a,i,s,h));return h.stroke!==Ei&&p.push(f),this._d("arc",p,h)}curve(t,r){const n=this._o(r),a=[],i=iN(t,n);if(n.fill&&n.fill!==Ei)if(n.fillStyle==="solid"){const s=iN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],l=t;if(l.length){const d=typeof l[0][0]=="number"?[l]:l;for(const h of d)h.length<3?s.push(...h):h.length===3?s.push(...wv(dN([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):s.push(...wv(dN(h),10,(1+n.roughness)/2))}s.length&&a.push(Iu([s],n))}return n.stroke!==Ei&&a.push(i),this._d("curve",a,n)}polygon(t,r){const n=this._o(r),a=[],i=wm(t,!0,n);return n.fill&&(n.fillStyle==="solid"?a.push(vv([t],n)):a.push(Iu([t],n))),n.stroke!==Ei&&a.push(i),this._d("polygon",a,n)}path(t,r){const n=this._o(r),a=[];if(!t)return this._d("path",a,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&n.fill!=="transparent"&&n.fill!==Ei,s=n.stroke!==Ei,l=!!(n.simplification&&n.simplification<1),d=(function(p,f,m){const b=mO(fO(JS(p))),x=[];let v=[],T=[0,0],k=[];const C=()=>{k.length>=4&&v.push(...wv(k,f)),k=[]},A=()=>{C(),v.length&&(x.push(v),v=[])};for(const{key:B,data:R}of b)switch(B){case"M":A(),T=[R[0],R[1]],v.push(T);break;case"L":C(),v.push([R[0],R[1]]);break;case"C":if(!k.length){const M=v.length?v[v.length-1]:T;k.push([M[0],M[1]])}k.push([R[0],R[1]]),k.push([R[2],R[3]]),k.push([R[4],R[5]]);break;case"Z":C(),v.push([T[0],T[1]])}if(A(),!m)return x;const D=[];for(const B of x){const R=hde(B,m);R.length&&D.push(R)}return D})(t,1,l?4-4*(n.simplification||1):(1+n.roughness)/2),h=oN(t,n);if(i)if(n.fillStyle==="solid")if(d.length===1){const p=oN(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(p.ops)})}else a.push(vv(d,n));else a.push(Iu(d,n));return s&&(l?d.forEach((p=>{a.push(wm(p,!1,n))})):a.push(h)),this._d("path",a,n)}opsToPath(t,r){let n="";for(const a of t.ops){const i=typeof r=="number"&&r>=0?a.data.map((s=>+s.toFixed(r))):a.data;switch(a.op){case"move":n+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":n+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":n+=`L${i[0]} ${i[1]} `}}return n.trim()}toPaths(t){const r=t.sets||[],n=t.options||this.defaultOptions,a=[];for(const i of r){let s=null;switch(i.type){case"path":s={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Ei};break;case"fillPath":s={d:this.opsToPath(i),stroke:Ei,strokeWidth:0,fill:n.fill||Ei};break;case"fillSketch":s=this.fillSketch(i,n)}s&&a.push(s)}return a}fillSketch(t,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||Ei,strokeWidth:n,fill:Ei}}_mergedShape(t){return t.filter(((r,n)=>n===0||r.op!=="move"))}}class pde{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new T0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const s of r)switch(s.type){case"path":a.save(),a.strokeStyle=n.stroke==="none"?"transparent":n.stroke,a.lineWidth=n.strokeWidth,n.strokeLineDash&&a.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(a.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(a,s,i),a.restore();break;case"fillPath":{a.save(),a.fillStyle=n.fill||"";const l=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,s,i,l),a.restore();break}case"fillSketch":this.fillSketch(a,s,n)}}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=a,this._drawToContext(t,r,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,n,a="nonzero"){t.beginPath();for(const i of r.ops){const s=typeof n=="number"&&n>=0?i.data.map((l=>+l.toFixed(n))):i.data;switch(i.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,n,a,i){const s=this.gen.line(t,r,n,a,i);return this.draw(s),s}rectangle(t,r,n,a,i){const s=this.gen.rectangle(t,r,n,a,i);return this.draw(s),s}ellipse(t,r,n,a,i){const s=this.gen.ellipse(t,r,n,a,i);return this.draw(s),s}circle(t,r,n,a){const i=this.gen.circle(t,r,n,a);return this.draw(i),i}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n),n}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n),n}arc(t,r,n,a,i,s,l=!1,d){const h=this.gen.arc(t,r,n,a,i,s,l,d);return this.draw(h),h}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n),n}path(t,r){const n=this.gen.path(t,r);return this.draw(n),n}}const Xf="http://www.w3.org/2000/svg";class gde{constructor(t,r){this.svg=t,this.gen=new T0(r)}draw(t){const r=t.sets||[],n=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,i=a.createElementNS(Xf,"g"),s=t.options.fixedDecimalPlaceDigits;for(const l of r){let d=null;switch(l.type){case"path":d=a.createElementNS(Xf,"path"),d.setAttribute("d",this.opsToPath(l,s)),d.setAttribute("stroke",n.stroke),d.setAttribute("stroke-width",n.strokeWidth+""),d.setAttribute("fill","none"),n.strokeLineDash&&d.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&d.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":d=a.createElementNS(Xf,"path"),d.setAttribute("d",this.opsToPath(l,s)),d.setAttribute("stroke","none"),d.setAttribute("stroke-width","0"),d.setAttribute("fill",n.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||d.setAttribute("fill-rule","evenodd");break;case"fillSketch":d=this.fillSketch(a,l,n)}d&&i.appendChild(d)}return i}fillSketch(t,r,n){let a=n.fillWeight;a<0&&(a=n.strokeWidth/2);const i=t.createElementNS(Xf,"path");return i.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",a+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,n,a,i){const s=this.gen.line(t,r,n,a,i);return this.draw(s)}rectangle(t,r,n,a,i){const s=this.gen.rectangle(t,r,n,a,i);return this.draw(s)}ellipse(t,r,n,a,i){const s=this.gen.ellipse(t,r,n,a,i);return this.draw(s)}circle(t,r,n,a){const i=this.gen.circle(t,r,n,a);return this.draw(i)}linearPath(t,r){const n=this.gen.linearPath(t,r);return this.draw(n)}polygon(t,r){const n=this.gen.polygon(t,r);return this.draw(n)}arc(t,r,n,a,i,s,l=!1,d){const h=this.gen.arc(t,r,n,a,i,s,l,d);return this.draw(h)}curve(t,r){const n=this.gen.curve(t,r);return this.draw(n)}path(t,r){const n=this.gen.path(t,r);return this.draw(n)}}var mt={canvas:(e,t)=>new pde(e,t),svg:(e,t)=>new gde(e,t),generator:e=>new T0(e),newSeed:()=>T0.newSeed()},Bt=L(async(e,t,r)=>{let n;const a=t.useHtmlLabels||Xn(Br()?.htmlLabels);r?n=r:n="node default";const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),s=i.insert("g").attr("class","label").attr("style",Pa(t.labelStyle));let l;t.label===void 0?l="":l=typeof t.label=="string"?t.label:t.label[0];const d=await Pl(s,es(qc(l),Br()),{useHtmlLabels:a,width:t.width||Br().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let h=d.getBBox();const p=(t?.padding??0)/2;if(a){const f=d.children[0],m=Cr(d),b=f.getElementsByTagName("img");if(b){const x=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(v=>new Promise(T=>{function k(){if(v.style.display="flex",v.style.flexDirection="column",x){const C=Br().fontSize?Br().fontSize:window.getComputedStyle(document.body).fontSize,A=5,[D=DR.fontSize]=oy(C),B=D*A+"px";v.style.minWidth=B,v.style.maxWidth=B}else v.style.width="100%";T(v)}L(k,"setupImage"),setTimeout(()=>{v.complete&&k()}),v.addEventListener("error",k),v.addEventListener("load",k)})))}h=f.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}return a?s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):s.attr("transform","translate(0, "+-h.height/2+")"),t.centerLabel&&s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:i,bbox:h,halfPadding:p,label:s}},"labelHelper"),Sv=L(async(e,t,r)=>{const n=r.useHtmlLabels||Xn(Br()?.flowchart?.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),i=await Pl(a,es(qc(t),Br()),{useHtmlLabels:n,width:r.width||Br()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let s=i.getBBox();const l=r.padding/2;if(Xn(Br()?.flowchart?.htmlLabels)){const d=i.children[0],h=Cr(i);s=d.getBoundingClientRect(),h.attr("width",s.width),h.attr("height",s.height)}return n?a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):a.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:s,halfPadding:l,label:a}},"insertLabel"),wt=L((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Mt=L((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function fr(e){const t=e.map((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}L(fr,"createPathFromPoints");function _l(e,t,r,n,a,i){const s=[],d=r-e,h=n-t,p=d/i,f=2*Math.PI/p,m=t+h/2;for(let b=0;b<=50;b++){const x=b/50,v=e+x*d,T=m+a*Math.sin(f*(v-e));s.push({x:v,y:T})}return s}L(_l,"generateFullSineWavePoints");function Hp(e,t,r,n,a,i){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const m=l+f*p,b=e+r*Math.cos(m),x=t+r*Math.sin(m);s.push({x:-b,y:-x})}return s}L(Hp,"generateCirclePoints");var fde=L((e,t)=>{var r=e.x,n=e.y,a=t.x-r,i=t.y-n,s=e.width/2,l=e.height/2,d,h;return Math.abs(i)*s>Math.abs(a)*l?(i<0&&(l=-l),d=i===0?0:l*a/i,h=l):(a<0&&(s=-s),d=s,h=a===0?0:s*i/a),{x:r+d,y:n+h}},"intersectRect"),Rd=fde;function wO(e,t){t&&e.attr("style",t)}L(wO,"applyStyle");async function SO(e){const t=Cr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),n=Br();let a=e.label;e.label&&cd(e.label)&&(a=await iS(e.label.replace(Ad.lineBreakRegex,`
`),n));const s='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+a+"</span>";return r.html(es(s,n)),wO(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}L(SO,"addHtmlLabel");var mde=L(async(e,t,r,n)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),Xn(Br().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),Fe.info("vertexText"+a);const i={isNode:n,label:qc(a).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await SO(i)}else{const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",t.replace("color:","fill:"));let s=[];typeof a=="string"?s=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?s=a:s=[];for(const l of s){const d=document.createElementNS("http://www.w3.org/2000/svg","tspan");d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d.setAttribute("dy","1em"),d.setAttribute("x","0"),r?d.setAttribute("class","title-row"):d.setAttribute("class","row"),d.textContent=l.trim(),i.appendChild(d)}return i}},"createLabel"),gc=mde,Rl=L((e,t,r,n,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+n-a,"A",a,a,0,0,1,e+r-a,t+n,"H",e+a,"A",a,a,0,0,1,e,t+n-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),TO=L(async(e,t)=>{Fe.info("Creating subgraph rect for ",t.id,t);const r=Br(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:i,clusterBorder:s}=n,{labelStyles:l,nodeStyles:d,borderStyles:h,backgroundStyles:p}=vt(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),m=Xn(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),x=await Pl(b,t.label,{style:t.labelStyle,useHtmlLabels:m,isNode:!0});let v=x.getBBox();if(Xn(r.flowchart.htmlLabels)){const M=x.children[0],$=Cr(x);v=M.getBoundingClientRect(),$.attr("width",v.width),$.attr("height",v.height)}const T=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(T-t.width)/2-t.padding:t.diff=-t.padding;const k=t.height,C=t.x-T/2,A=t.y-k/2;Fe.trace("Data ",t,JSON.stringify(t));let D;if(t.look==="handDrawn"){const M=mt.svg(f),$=xt(t,{roughness:.7,fill:i,stroke:s,fillWeight:3,seed:a}),W=M.path(Rl(C,A,T,k,0),$);D=f.insert(()=>(Fe.debug("Rough node insert CXC",W),W),":first-child"),D.select("path:nth-child(2)").attr("style",h.join(";")),D.select("path").attr("style",p.join(";").replace("fill","stroke"))}else D=f.insert("rect",":first-child"),D.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",T).attr("height",k);const{subGraphTitleTopMargin:B}=LS(r);if(b.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+B})`),l){const M=b.select("span");M&&M.attr("style",l)}const R=D.node().getBBox();return t.offsetX=0,t.width=R.width,t.height=R.height,t.offsetY=v.height-t.padding/2,t.intersect=function(M){return Rd(t,M)},{cluster:f,labelBBox:v}},"rect"),yde=L((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),n=r.insert("rect",":first-child"),a=0*t.padding,i=a/2;n.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const s=n.node().getBBox();return t.width=s.width,t.height=s.height,t.intersect=function(l){return Rd(t,l)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),bde=L(async(e,t)=>{const r=Br(),{themeVariables:n,handDrawnSeed:a}=r,{altBackground:i,compositeBackground:s,compositeTitleBackground:l,nodeBorder:d}=n,h=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),p=h.insert("g",":first-child"),f=h.insert("g").attr("class","cluster-label");let m=h.append("rect");const b=f.node().appendChild(await gc(t.label,t.labelStyle,void 0,!0));let x=b.getBBox();if(Xn(r.flowchart.htmlLabels)){const W=b.children[0],O=Cr(b);x=W.getBoundingClientRect(),O.attr("width",x.width),O.attr("height",x.height)}const v=0*t.padding,T=v/2,k=(t.width<=x.width+t.padding?x.width+t.padding:t.width)+v;t.width<=x.width+t.padding?t.diff=(k-t.width)/2-t.padding:t.diff=-t.padding;const C=t.height+v,A=t.height+v-x.height-6,D=t.x-k/2,B=t.y-C/2;t.width=k;const R=t.y-t.height/2-T+x.height+2;let M;if(t.look==="handDrawn"){const W=t.cssClasses.includes("statediagram-cluster-alt"),O=mt.svg(h),Y=t.rx||t.ry?O.path(Rl(D,B,k,C,10),{roughness:.7,fill:l,fillStyle:"solid",stroke:d,seed:a}):O.rectangle(D,B,k,C,{seed:a});M=h.insert(()=>Y,":first-child");const X=O.rectangle(D,R,k,A,{fill:W?i:s,fillStyle:W?"hachure":"solid",stroke:d,seed:a});M=h.insert(()=>Y,":first-child"),m=h.insert(()=>X)}else M=p.insert("rect",":first-child"),M.attr("class","outer").attr("x",D).attr("y",B).attr("width",k).attr("height",C).attr("data-look",t.look),m.attr("class","inner").attr("x",D).attr("y",R).attr("width",k).attr("height",A);f.attr("transform",`translate(${t.x-x.width/2}, ${B+1-(Xn(r.flowchart.htmlLabels)?0:3)})`);const $=M.node().getBBox();return t.height=$.height,t.offsetX=0,t.offsetY=x.height-t.padding/2,t.labelBBox=x,t.intersect=function(W){return Rd(t,W)},{cluster:h,labelBBox:x}},"roundedWithTitle"),xde=L(async(e,t)=>{Fe.info("Creating subgraph rect for ",t.id,t);const r=Br(),{themeVariables:n,handDrawnSeed:a}=r,{clusterBkg:i,clusterBorder:s}=n,{labelStyles:l,nodeStyles:d,borderStyles:h,backgroundStyles:p}=vt(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),m=Xn(r.flowchart.htmlLabels),b=f.insert("g").attr("class","cluster-label "),x=await Pl(b,t.label,{style:t.labelStyle,useHtmlLabels:m,isNode:!0,width:t.width});let v=x.getBBox();if(Xn(r.flowchart.htmlLabels)){const M=x.children[0],$=Cr(x);v=M.getBoundingClientRect(),$.attr("width",v.width),$.attr("height",v.height)}const T=t.width<=v.width+t.padding?v.width+t.padding:t.width;t.width<=v.width+t.padding?t.diff=(T-t.width)/2-t.padding:t.diff=-t.padding;const k=t.height,C=t.x-T/2,A=t.y-k/2;Fe.trace("Data ",t,JSON.stringify(t));let D;if(t.look==="handDrawn"){const M=mt.svg(f),$=xt(t,{roughness:.7,fill:i,stroke:s,fillWeight:4,seed:a}),W=M.path(Rl(C,A,T,k,t.rx),$);D=f.insert(()=>(Fe.debug("Rough node insert CXC",W),W),":first-child"),D.select("path:nth-child(2)").attr("style",h.join(";")),D.select("path").attr("style",p.join(";").replace("fill","stroke"))}else D=f.insert("rect",":first-child"),D.attr("style",d).attr("rx",t.rx).attr("ry",t.ry).attr("x",C).attr("y",A).attr("width",T).attr("height",k);const{subGraphTitleTopMargin:B}=LS(r);if(b.attr("transform",`translate(${t.x-v.width/2}, ${t.y-t.height/2+B})`),l){const M=b.select("span");M&&M.attr("style",l)}const R=D.node().getBBox();return t.offsetX=0,t.width=R.width,t.height=R.height,t.offsetY=v.height-t.padding/2,t.intersect=function(M){return Rd(t,M)},{cluster:f,labelBBox:v}},"kanbanSection"),vde=L((e,t)=>{const r=Br(),{themeVariables:n,handDrawnSeed:a}=r,{nodeBorder:i}=n,s=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),l=s.insert("g",":first-child"),d=0*t.padding,h=t.width+d;t.diff=-t.padding;const p=t.height+d,f=t.x-h/2,m=t.y-p/2;t.width=h;let b;if(t.look==="handDrawn"){const T=mt.svg(s).rectangle(f,m,h,p,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:a});b=s.insert(()=>T,":first-child")}else b=l.insert("rect",":first-child"),b.attr("class","divider").attr("x",f).attr("y",m).attr("width",h).attr("height",p).attr("data-look",t.look);const x=b.node().getBBox();return t.height=x.height,t.offsetX=0,t.offsetY=0,t.intersect=function(v){return Rd(t,v)},{cluster:s,labelBBox:{}}},"divider"),wde=TO,Sde={rect:TO,squareRect:wde,roundedWithTitle:bde,noteGroup:yde,divider:vde,kanbanSection:xde},kO=new Map,Tde=L(async(e,t)=>{const r=t.shape||"rect",n=await Sde[r](e,t);return kO.set(t.id,n),n},"insertCluster"),K0e=L(()=>{kO=new Map},"clear");function EO(e,t){return e.intersect(t)}L(EO,"intersectNode");var kde=EO;function CO(e,t,r,n){var a=e.x,i=e.y,s=a-n.x,l=i-n.y,d=Math.sqrt(t*t*l*l+r*r*s*s),h=Math.abs(t*r*s/d);n.x<a&&(h=-h);var p=Math.abs(t*r*l/d);return n.y<i&&(p=-p),{x:a+h,y:i+p}}L(CO,"intersectEllipse");var _O=CO;function AO(e,t,r){return _O(e,t,t,r)}L(AO,"intersectCircle");var Ede=AO;function NO(e,t,r,n){{const a=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,l=a*r.x+i*r.y+s,d=a*n.x+i*n.y+s,h=1e-6;if(l!==0&&d!==0&&cw(l,d))return;const p=n.y-r.y,f=r.x-n.x,m=n.x*r.y-r.x*n.y,b=p*e.x+f*e.y+m,x=p*t.x+f*t.y+m;if(Math.abs(b)<h&&Math.abs(x)<h&&cw(b,x))return;const v=a*f-p*i;if(v===0)return;const T=Math.abs(v/2);let k=i*m-f*s;const C=k<0?(k-T)/v:(k+T)/v;k=p*s-a*m;const A=k<0?(k-T)/v:(k+T)/v;return{x:C,y:A}}}L(NO,"intersectLine");function cw(e,t){return e*t>0}L(cw,"sameSign");var Cde=NO;function LO(e,t,r){let n=e.x,a=e.y,i=[],s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(p){s=Math.min(s,p.x),l=Math.min(l,p.y)}):(s=Math.min(s,t.x),l=Math.min(l,t.y));let d=n-e.width/2-s,h=a-e.height/2-l;for(let p=0;p<t.length;p++){let f=t[p],m=t[p<t.length-1?p+1:0],b=Cde(e,r,{x:d+f.x,y:h+f.y},{x:d+m.x,y:h+m.y});b&&i.push(b)}return i.length?(i.length>1&&i.sort(function(p,f){let m=p.x-r.x,b=p.y-r.y,x=Math.sqrt(m*m+b*b),v=f.x-r.x,T=f.y-r.y,k=Math.sqrt(v*v+T*T);return x<k?-1:x===k?0:1}),i[0]):e}L(LO,"intersectPolygon");var _de=LO,lt={node:kde,circle:Ede,ellipse:_O,polygon:_de,rect:Rd};function PO(e,t){const{labelStyles:r}=vt(t);t.labelStyle=r;const n=Mt(t);let a=n;n||(a="anchor");const i=e.insert("g").attr("class",a).attr("id",t.domId||t.id),s=1,{cssStyles:l}=t,d=mt.svg(i),h=xt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const p=d.circle(0,0,s*2,h),f=i.insert(()=>p,":first-child");return f.attr("class","anchor").attr("style",Pa(l)),wt(t,f),t.intersect=function(m){return Fe.info("Circle intersect",t,s,m),lt.circle(t,s,m)},i}L(PO,"anchor");function uw(e,t,r,n,a,i,s){const d=(e+r)/2,h=(t+n)/2,p=Math.atan2(n-t,r-e),f=(r-e)/2,m=(n-t)/2,b=f/a,x=m/i,v=Math.sqrt(b**2+x**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-v**2),k=d+T*i*Math.sin(p)*(s?-1:1),C=h-T*a*Math.cos(p)*(s?-1:1),A=Math.atan2((t-C)/i,(e-k)/a);let B=Math.atan2((n-C)/i,(r-k)/a)-A;s&&B<0&&(B+=2*Math.PI),!s&&B>0&&(B-=2*Math.PI);const R=[];for(let M=0;M<20;M++){const $=M/19,W=A+$*B,O=k+a*Math.cos(W),Y=C+i*Math.sin(W);R.push({x:O,y:Y})}return R}L(uw,"generateArcPoints");async function RO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.width+t.padding+20,l=i.height+t.padding,d=l/2,h=d/(2.5+l/50),{cssStyles:p}=t,f=[{x:s/2,y:-l/2},{x:-s/2,y:-l/2},...uw(-s/2,-l/2,-s/2,l/2,h,d,!1),{x:s/2,y:l/2},...uw(s/2,l/2,s/2,-l/2,h,d,!0)],m=mt.svg(a),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=fr(f),v=m.path(x,b),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(${h/2}, 0)`),wt(t,T),t.intersect=function(k){return lt.polygon(t,f,k)},a}L(RO,"bowTieRect");function Il(e,t,r,n){return e.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}L(Il,"insertPolygonShape");async function IO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.height+t.padding,l=12,d=i.width+t.padding+l,h=0,p=d,f=-s,m=0,b=[{x:h+l,y:f},{x:p,y:f},{x:p,y:m},{x:h,y:m},{x:h,y:f+l},{x:h+l,y:f}];let x;const{cssStyles:v}=t;if(t.look==="handDrawn"){const T=mt.svg(a),k=xt(t,{}),C=fr(b),A=T.path(C,k);x=a.insert(()=>A,":first-child").attr("transform",`translate(${-d/2}, ${s/2})`),v&&x.attr("style",v)}else x=Il(a,d,s,b);return n&&x.attr("style",n),wt(t,x),t.intersect=function(T){return lt.polygon(t,b,T)},a}L(IO,"card");function DO(e,t){const{nodeStyles:r}=vt(t);t.label="";const n=e.insert("g").attr("class",Mt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,i=Math.max(28,t.width??0),s=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],l=mt.svg(n),d=xt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=fr(s),p=l.path(h,d),f=n.insert(()=>p,":first-child");return a&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(m){return lt.polygon(t,s,m)},n}L(DO,"choice");async function ZS(e,t,r){const{labelStyles:n,nodeStyles:a}=vt(t);t.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:l}=await Bt(e,t,Mt(t)),d=r?.padding??l,h=s.width/2+d;let p;const{cssStyles:f}=t;if(t.look==="handDrawn"){const m=mt.svg(i),b=xt(t,{}),x=m.circle(0,0,h*2,b);p=i.insert(()=>x,":first-child"),p.attr("class","basic label-container").attr("style",Pa(f))}else p=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",a).attr("r",h).attr("cx",0).attr("cy",0);return wt(t,p),t.calcIntersect=function(m,b){const x=m.width/2;return lt.circle(m,x,b)},t.intersect=function(m){return Fe.info("Circle intersect",t,h,m),lt.circle(t,h,m)},i}L(ZS,"circle");function MO(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=e*2,a={x:n/2*t,y:n/2*r},i={x:-(n/2)*t,y:n/2*r},s={x:-(n/2)*t,y:-(n/2)*r},l={x:n/2*t,y:-(n/2)*r};return`M ${i.x},${i.y} L ${l.x},${l.y}
                   M ${a.x},${a.y} L ${s.x},${s.y}`}L(MO,"createLine");function OO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",Mt(t)).attr("id",t.domId??t.id),i=Math.max(30,t?.width??0),{cssStyles:s}=t,l=mt.svg(a),d=xt(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const h=l.circle(0,0,i*2,d),p=MO(i),f=l.path(p,d),m=a.insert(()=>h,":first-child");return m.insert(()=>f),s&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),wt(t,m),t.intersect=function(b){return Fe.info("crossedCircle intersect",t,{radius:i,point:b}),lt.circle(t,i,b)},a}L(OO,"crossedCircle");function ko(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const m=l+f*p,b=e+r*Math.cos(m),x=t+r*Math.sin(m);s.push({x:-b,y:-x})}return s}L(ko,"generateCirclePoints");async function jO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:p}=t,f=[...ko(l/2,-d/2,h,30,-90,0),{x:-l/2-h,y:h},...ko(l/2+h*2,-h,h,20,-180,-270),...ko(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-d/2},...ko(l/2,d/2,h,20,0,90)],m=[{x:l/2,y:-d/2-h},{x:-l/2,y:-d/2-h},...ko(l/2,-d/2,h,20,-90,0),{x:-l/2-h,y:-h},...ko(l/2+l*.1,-h,h,20,-180,-270),...ko(l/2+l*.1,h,h,20,-90,-180),{x:-l/2-h,y:d/2},...ko(l/2,d/2,h,20,0,90),{x:-l/2,y:d/2+h},{x:l/2,y:d/2+h}],b=mt.svg(a),x=xt(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=fr(f).replace("Z",""),k=b.path(T,x),C=fr(m),A=b.path(C,{...x}),D=a.insert("g",":first-child");return D.insert(()=>A,":first-child").attr("stroke-opacity",0),D.insert(()=>k,":first-child"),D.attr("class","text"),p&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",n),D.attr("transform",`translate(${h}, 0)`),s.attr("transform",`translate(${-l/2+h-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),wt(t,D),t.intersect=function(B){return lt.polygon(t,m,B)},a}L(jO,"curlyBraceLeft");function Eo(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const m=l+f*p,b=e+r*Math.cos(m),x=t+r*Math.sin(m);s.push({x:b,y:x})}return s}L(Eo,"generateCirclePoints");async function BO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:p}=t,f=[...Eo(l/2,-d/2,h,20,-90,0),{x:l/2+h,y:-h},...Eo(l/2+h*2,-h,h,20,-180,-270),...Eo(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:d/2},...Eo(l/2,d/2,h,20,0,90)],m=[{x:-l/2,y:-d/2-h},{x:l/2,y:-d/2-h},...Eo(l/2,-d/2,h,20,-90,0),{x:l/2+h,y:-h},...Eo(l/2+h*2,-h,h,20,-180,-270),...Eo(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:d/2},...Eo(l/2,d/2,h,20,0,90),{x:l/2,y:d/2+h},{x:-l/2,y:d/2+h}],b=mt.svg(a),x=xt(t,{fill:"none"});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const T=fr(f).replace("Z",""),k=b.path(T,x),C=fr(m),A=b.path(C,{...x}),D=a.insert("g",":first-child");return D.insert(()=>A,":first-child").attr("stroke-opacity",0),D.insert(()=>k,":first-child"),D.attr("class","text"),p&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",n),D.attr("transform",`translate(${-h}, 0)`),s.attr("transform",`translate(${-l/2+(t.padding??0)/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),wt(t,D),t.intersect=function(B){return lt.polygon(t,m,B)},a}L(BO,"curlyBraceRight");function ma(e,t,r,n=100,a=0,i=180){const s=[],l=a*Math.PI/180,p=(i*Math.PI/180-l)/(n-1);for(let f=0;f<n;f++){const m=l+f*p,b=e+r*Math.cos(m),x=t+r*Math.sin(m);s.push({x:-b,y:-x})}return s}L(ma,"generateCirclePoints");async function FO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=i.width+(t.padding??0),d=i.height+(t.padding??0),h=Math.max(5,d*.1),{cssStyles:p}=t,f=[...ma(l/2,-d/2,h,30,-90,0),{x:-l/2-h,y:h},...ma(l/2+h*2,-h,h,20,-180,-270),...ma(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-d/2},...ma(l/2,d/2,h,20,0,90)],m=[...ma(-l/2+h+h/2,-d/2,h,20,-90,-180),{x:l/2-h/2,y:h},...ma(-l/2-h/2,-h,h,20,0,90),...ma(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...ma(-l/2+h+h/2,d/2,h,30,-180,-270)],b=[{x:l/2,y:-d/2-h},{x:-l/2,y:-d/2-h},...ma(l/2,-d/2,h,20,-90,0),{x:-l/2-h,y:-h},...ma(l/2+h*2,-h,h,20,-180,-270),...ma(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:d/2},...ma(l/2,d/2,h,20,0,90),{x:-l/2,y:d/2+h},{x:l/2-h-h/2,y:d/2+h},...ma(-l/2+h+h/2,-d/2,h,20,-90,-180),{x:l/2-h/2,y:h},...ma(-l/2-h/2,-h,h,20,0,90),...ma(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...ma(-l/2+h+h/2,d/2,h,30,-180,-270)],x=mt.svg(a),v=xt(t,{fill:"none"});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const k=fr(f).replace("Z",""),C=x.path(k,v),D=fr(m).replace("Z",""),B=x.path(D,v),R=fr(b),M=x.path(R,{...v}),$=a.insert("g",":first-child");return $.insert(()=>M,":first-child").attr("stroke-opacity",0),$.insert(()=>C,":first-child"),$.insert(()=>B,":first-child"),$.attr("class","text"),p&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",p),n&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",n),$.attr("transform",`translate(${h-h/4}, 0)`),s.attr("transform",`translate(${-l/2+(t.padding??0)/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)/2-(i.y-(i.top??0))})`),wt(t,$),t.intersect=function(W){return lt.polygon(t,b,W)},a}L(FO,"curlyBraces");async function zO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=80,l=20,d=Math.max(s,(i.width+(t.padding??0)*2)*1.25,t?.width??0),h=Math.max(l,i.height+(t.padding??0)*2,t?.height??0),p=h/2,{cssStyles:f}=t,m=mt.svg(a),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=d,v=h,T=x-p,k=v/4,C=[{x:T,y:0},{x:k,y:0},{x:0,y:v/2},{x:k,y:v},{x:T,y:v},...Hp(-T,-v/2,p,50,270,90)],A=fr(C),D=m.path(A,b),B=a.insert(()=>D,":first-child");return B.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&B.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&B.selectChildren("path").attr("style",n),B.attr("transform",`translate(${-d/2}, ${-h/2})`),wt(t,B),t.intersect=function(R){return lt.polygon(t,C,R)},a}L(zO,"curvedTrapezoid");var Ade=L((e,t,r,n,a,i)=>[`M${e},${t+i}`,`a${a},${i} 0,0,0 ${r},0`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createCylinderPathD"),Nde=L((e,t,r,n,a,i)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`].join(" "),"createOuterCylinderPathD"),Lde=L((e,t,r,n,a,i)=>[`M${e-r/2},${-n/2}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function UO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+t.padding,t.width??0),d=l/2,h=d/(2.5+l/50),p=Math.max(i.height+h+t.padding,t.height??0);let f;const{cssStyles:m}=t;if(t.look==="handDrawn"){const b=mt.svg(a),x=Nde(0,0,l,p,d,h),v=Lde(0,h,l,p,d,h),T=b.path(x,xt(t,{})),k=b.path(v,xt(t,{fill:"none"}));f=a.insert(()=>k,":first-child"),f=a.insert(()=>T,":first-child"),f.attr("class","basic label-container"),m&&f.attr("style",m)}else{const b=Ade(0,0,l,p,d,h);f=a.insert("path",":first-child").attr("d",b).attr("class","basic label-container").attr("style",Pa(m)).attr("style",n)}return f.attr("label-offset-y",h),f.attr("transform",`translate(${-l/2}, ${-(p/2+h)})`),wt(t,f),s.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(t.padding??0)/1.5-(i.y-(i.top??0))})`),t.intersect=function(b){const x=lt.rect(t,b),v=x.x-(t.x??0);if(d!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(x.y-(t.y??0))>(t.height??0)/2-h)){let T=h*h*(1-v*v/(d*d));T>0&&(T=Math.sqrt(T)),T=h-T,b.y-(t.y??0)>0&&(T=-T),x.y+=T}return x},a}L(UO,"cylinder");async function $O(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=i.width+t.padding,d=i.height+t.padding,h=d*.2,p=-l/2,f=-d/2-h/2,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:p,y:f+h},{x:-p,y:f+h},{x:-p,y:-f},{x:p,y:-f},{x:p,y:f},{x:-p,y:f},{x:-p,y:f+h}],T=b.polygon(v.map(C=>[C.x,C.y]),x),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",m),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),s.attr("transform",`translate(${p+(t.padding??0)/2-(i.x-(i.left??0))}, ${f+h+(t.padding??0)/2-(i.y-(i.top??0))})`),wt(t,k),t.intersect=function(C){return lt.rect(t,C)},a}L($O,"dividedRectangle");async function qO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s}=await Bt(e,t,Mt(t)),d=i.width/2+s+5,h=i.width/2+s;let p;const{cssStyles:f}=t;if(t.look==="handDrawn"){const m=mt.svg(a),b=xt(t,{roughness:.2,strokeWidth:2.5}),x=xt(t,{roughness:.2,strokeWidth:1.5}),v=m.circle(0,0,d*2,b),T=m.circle(0,0,h*2,x);p=a.insert("g",":first-child"),p.attr("class",Pa(t.cssClasses)).attr("style",Pa(f)),p.node()?.appendChild(v),p.node()?.appendChild(T)}else{p=a.insert("g",":first-child");const m=p.insert("circle",":first-child"),b=p.insert("circle");p.attr("class","basic label-container").attr("style",n),m.attr("class","outer-circle").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0),b.attr("class","inner-circle").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0)}return wt(t,p),t.intersect=function(m){return Fe.info("DoubleCircle intersect",t,d,m),lt.circle(t,d,m)},a}L(qO,"doublecircle");function HO(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=vt(t);t.label="",t.labelStyle=n;const i=e.insert("g").attr("class",Mt(t)).attr("id",t.domId??t.id),s=7,{cssStyles:l}=t,d=mt.svg(i),{nodeBorder:h}=r,p=xt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(p.roughness=0);const f=d.circle(0,0,s*2,p),m=i.insert(()=>f,":first-child");return m.selectAll("path").attr("style",`fill: ${h} !important;`),l&&l.length>0&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",l),a&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",a),wt(t,m),t.intersect=function(b){return Fe.info("filledCircle intersect",t,{radius:s,point:b}),lt.circle(t,s,b)},i}L(HO,"filledCircle");async function GO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=i.width+(t.padding??0),d=l+i.height,h=l+i.height,p=[{x:0,y:-d},{x:h,y:-d},{x:h/2,y:0}],{cssStyles:f}=t,m=mt.svg(a),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=fr(p),v=m.path(x,b),T=a.insert(()=>v,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return f&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),t.width=l,t.height=d,wt(t,T),s.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-d/2+(t.padding??0)/2+(i.y-(i.top??0))})`),t.intersect=function(k){return Fe.info("Triangle intersect",t,p,k),lt.polygon(t,p,k)},a}L(GO,"flippedTriangle");function WO(e,t,{dir:r,config:{state:n,themeVariables:a}}){const{nodeStyles:i}=vt(t);t.label="";const s=e.insert("g").attr("class",Mt(t)).attr("id",t.domId??t.id),{cssStyles:l}=t;let d=Math.max(70,t?.width??0),h=Math.max(10,t?.height??0);r==="LR"&&(d=Math.max(10,t?.width??0),h=Math.max(70,t?.height??0));const p=-1*d/2,f=-1*h/2,m=mt.svg(s),b=xt(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=m.rectangle(p,f,d,h,b),v=s.insert(()=>x,":first-child");l&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",l),i&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",i),wt(t,v);const T=n?.padding??0;return t.width&&t.height&&(t.width+=T/2||0,t.height+=T/2||0),t.intersect=function(k){return lt.rect(t,k)},s}L(WO,"forkJoin");async function VO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const a=80,i=50,{shapeSvg:s,bbox:l}=await Bt(e,t,Mt(t)),d=Math.max(a,l.width+(t.padding??0)*2,t?.width??0),h=Math.max(i,l.height+(t.padding??0)*2,t?.height??0),p=h/2,{cssStyles:f}=t,m=mt.svg(s),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-d/2,y:-h/2},{x:d/2-p,y:-h/2},...Hp(-d/2+p,0,p,50,90,270),{x:d/2-p,y:h/2},{x:-d/2,y:h/2}],v=fr(x),T=m.path(v,b),k=s.insert(()=>T,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),wt(t,k),t.intersect=function(C){return Fe.info("Pill intersect",t,{radius:p,point:C}),lt.polygon(t,x,C)},s}L(VO,"halfRoundedRectangle");async function YO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.height+(t.padding??0),l=i.width+(t.padding??0)*2.5,{cssStyles:d}=t,h=mt.svg(a),p=xt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");let f=l/2;const m=f/6;f=f+m;const b=s/2,x=b/2,v=f-x,T=[{x:-v,y:-b},{x:0,y:-b},{x:v,y:-b},{x:f,y:0},{x:v,y:b},{x:0,y:b},{x:-v,y:b},{x:-f,y:0}],k=fr(T),C=h.path(k,p),A=a.insert(()=>C,":first-child");return A.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",d),n&&t.look!=="handDrawn"&&A.selectChildren("path").attr("style",n),t.width=l,t.height=s,wt(t,A),t.intersect=function(D){return lt.polygon(t,T,D)},a}L(YO,"hexagon");async function QO(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await Bt(e,t,Mt(t)),i=Math.max(30,t?.width??0),s=Math.max(30,t?.height??0),{cssStyles:l}=t,d=mt.svg(a),h=xt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const p=[{x:0,y:0},{x:i,y:0},{x:0,y:s},{x:i,y:s}],f=fr(p),m=d.path(f,h),b=a.insert(()=>m,":first-child");return b.attr("class","basic label-container"),l&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",l),n&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",n),b.attr("transform",`translate(${-i/2}, ${-s/2})`),wt(t,b),t.intersect=function(x){return Fe.info("Pill intersect",t,{points:p}),lt.polygon(t,p,x)},a}L(QO,"hourglass");async function KO(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=vt(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),d=n?.wrappingWidth;t.width=Math.max(l,d??0);const{shapeSvg:h,bbox:p,label:f}=await Bt(e,t,"icon-shape default"),m=t.pos==="t",b=l,x=l,{nodeBorder:v}=r,{stylesMap:T}=Nd(t),k=-x/2,C=-b/2,A=t.label?8:0,D=mt.svg(h),B=xt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(B.roughness=0,B.fillStyle="solid");const R=D.rectangle(k,C,x,b,B),M=Math.max(x,p.width),$=b+p.height+A,W=D.rectangle(-M/2,-$/2,M,$,{...B,fill:"transparent",stroke:"none"}),O=h.insert(()=>R,":first-child"),Y=h.insert(()=>W);if(t.icon){const X=h.append("g");X.html(`<g>${await mg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const q=X.node().getBBox(),N=q.width,U=q.height,j=q.x,K=q.y;X.attr("transform",`translate(${-N/2-j},${m?p.height/2+A/2-U/2-K:-p.height/2-A/2-U/2-K})`),X.attr("style",`color: ${T.get("stroke")??v};`)}return f.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${m?-$/2:$/2-p.height})`),O.attr("transform",`translate(0,${m?p.height/2+A/2:-p.height/2-A/2})`),wt(t,Y),t.intersect=function(X){if(Fe.info("iconSquare intersect",t,X),!t.label)return lt.rect(t,X);const q=t.x??0,N=t.y??0,U=t.height??0;let j=[];return m?j=[{x:q-p.width/2,y:N-U/2},{x:q+p.width/2,y:N-U/2},{x:q+p.width/2,y:N-U/2+p.height+A},{x:q+x/2,y:N-U/2+p.height+A},{x:q+x/2,y:N+U/2},{x:q-x/2,y:N+U/2},{x:q-x/2,y:N-U/2+p.height+A},{x:q-p.width/2,y:N-U/2+p.height+A}]:j=[{x:q-x/2,y:N-U/2},{x:q+x/2,y:N-U/2},{x:q+x/2,y:N-U/2+b},{x:q+p.width/2,y:N-U/2+b},{x:q+p.width/2/2,y:N+U/2},{x:q-p.width/2,y:N+U/2},{x:q-p.width/2,y:N-U/2+b},{x:q-x/2,y:N-U/2+b}],lt.polygon(t,j,X)},h}L(KO,"icon");async function XO(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=vt(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),d=n?.wrappingWidth;t.width=Math.max(l,d??0);const{shapeSvg:h,bbox:p,label:f}=await Bt(e,t,"icon-shape default"),m=20,b=t.label?8:0,x=t.pos==="t",{nodeBorder:v,mainBkg:T}=r,{stylesMap:k}=Nd(t),C=mt.svg(h),A=xt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const D=k.get("fill");A.stroke=D??T;const B=h.append("g");t.icon&&B.html(`<g>${await mg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const R=B.node().getBBox(),M=R.width,$=R.height,W=R.x,O=R.y,Y=Math.max(M,$)*Math.SQRT2+m*2,X=C.circle(0,0,Y,A),q=Math.max(Y,p.width),N=Y+p.height+b,U=C.rectangle(-q/2,-N/2,q,N,{...A,fill:"transparent",stroke:"none"}),j=h.insert(()=>X,":first-child"),K=h.insert(()=>U);return B.attr("transform",`translate(${-M/2-W},${x?p.height/2+b/2-$/2-O:-p.height/2-b/2-$/2-O})`),B.attr("style",`color: ${k.get("stroke")??v};`),f.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${x?-N/2:N/2-p.height})`),j.attr("transform",`translate(0,${x?p.height/2+b/2:-p.height/2-b/2})`),wt(t,K),t.intersect=function(Q){return Fe.info("iconSquare intersect",t,Q),lt.rect(t,Q)},h}L(XO,"iconCircle");async function JO(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=vt(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),d=n?.wrappingWidth;t.width=Math.max(l,d??0);const{shapeSvg:h,bbox:p,halfPadding:f,label:m}=await Bt(e,t,"icon-shape default"),b=t.pos==="t",x=l+f*2,v=l+f*2,{nodeBorder:T,mainBkg:k}=r,{stylesMap:C}=Nd(t),A=-v/2,D=-x/2,B=t.label?8:0,R=mt.svg(h),M=xt(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const $=C.get("fill");M.stroke=$??k;const W=R.path(Rl(A,D,v,x,5),M),O=Math.max(v,p.width),Y=x+p.height+B,X=R.rectangle(-O/2,-Y/2,O,Y,{...M,fill:"transparent",stroke:"none"}),q=h.insert(()=>W,":first-child").attr("class","icon-shape2"),N=h.insert(()=>X);if(t.icon){const U=h.append("g");U.html(`<g>${await mg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const j=U.node().getBBox(),K=j.width,Q=j.height,ie=j.x,G=j.y;U.attr("transform",`translate(${-K/2-ie},${b?p.height/2+B/2-Q/2-G:-p.height/2-B/2-Q/2-G})`),U.attr("style",`color: ${C.get("stroke")??T};`)}return m.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${b?-Y/2:Y/2-p.height})`),q.attr("transform",`translate(0,${b?p.height/2+B/2:-p.height/2-B/2})`),wt(t,N),t.intersect=function(U){if(Fe.info("iconSquare intersect",t,U),!t.label)return lt.rect(t,U);const j=t.x??0,K=t.y??0,Q=t.height??0;let ie=[];return b?ie=[{x:j-p.width/2,y:K-Q/2},{x:j+p.width/2,y:K-Q/2},{x:j+p.width/2,y:K-Q/2+p.height+B},{x:j+v/2,y:K-Q/2+p.height+B},{x:j+v/2,y:K+Q/2},{x:j-v/2,y:K+Q/2},{x:j-v/2,y:K-Q/2+p.height+B},{x:j-p.width/2,y:K-Q/2+p.height+B}]:ie=[{x:j-v/2,y:K-Q/2},{x:j+v/2,y:K-Q/2},{x:j+v/2,y:K-Q/2+x},{x:j+p.width/2,y:K-Q/2+x},{x:j+p.width/2/2,y:K+Q/2},{x:j-p.width/2,y:K+Q/2},{x:j-p.width/2,y:K-Q/2+x},{x:j-v/2,y:K-Q/2+x}],lt.polygon(t,ie,U)},h}L(JO,"iconRounded");async function ZO(e,t,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:a}=vt(t);t.labelStyle=a;const i=t.assetHeight??48,s=t.assetWidth??48,l=Math.max(i,s),d=n?.wrappingWidth;t.width=Math.max(l,d??0);const{shapeSvg:h,bbox:p,halfPadding:f,label:m}=await Bt(e,t,"icon-shape default"),b=t.pos==="t",x=l+f*2,v=l+f*2,{nodeBorder:T,mainBkg:k}=r,{stylesMap:C}=Nd(t),A=-v/2,D=-x/2,B=t.label?8:0,R=mt.svg(h),M=xt(t,{});t.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const $=C.get("fill");M.stroke=$??k;const W=R.path(Rl(A,D,v,x,.1),M),O=Math.max(v,p.width),Y=x+p.height+B,X=R.rectangle(-O/2,-Y/2,O,Y,{...M,fill:"transparent",stroke:"none"}),q=h.insert(()=>W,":first-child"),N=h.insert(()=>X);if(t.icon){const U=h.append("g");U.html(`<g>${await mg(t.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const j=U.node().getBBox(),K=j.width,Q=j.height,ie=j.x,G=j.y;U.attr("transform",`translate(${-K/2-ie},${b?p.height/2+B/2-Q/2-G:-p.height/2-B/2-Q/2-G})`),U.attr("style",`color: ${C.get("stroke")??T};`)}return m.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${b?-Y/2:Y/2-p.height})`),q.attr("transform",`translate(0,${b?p.height/2+B/2:-p.height/2-B/2})`),wt(t,N),t.intersect=function(U){if(Fe.info("iconSquare intersect",t,U),!t.label)return lt.rect(t,U);const j=t.x??0,K=t.y??0,Q=t.height??0;let ie=[];return b?ie=[{x:j-p.width/2,y:K-Q/2},{x:j+p.width/2,y:K-Q/2},{x:j+p.width/2,y:K-Q/2+p.height+B},{x:j+v/2,y:K-Q/2+p.height+B},{x:j+v/2,y:K+Q/2},{x:j-v/2,y:K+Q/2},{x:j-v/2,y:K-Q/2+p.height+B},{x:j-p.width/2,y:K-Q/2+p.height+B}]:ie=[{x:j-v/2,y:K-Q/2},{x:j+v/2,y:K-Q/2},{x:j+v/2,y:K-Q/2+x},{x:j+p.width/2,y:K-Q/2+x},{x:j+p.width/2/2,y:K+Q/2},{x:j-p.width/2,y:K+Q/2},{x:j-p.width/2,y:K-Q/2+x},{x:j-v/2,y:K-Q/2+x}],lt.polygon(t,ie,U)},h}L(ZO,"iconSquare");async function e4(e,t,{config:{flowchart:r}}){const n=new Image;n.src=t?.img??"",await n.decode();const a=Number(n.naturalWidth.toString().replace("px","")),i=Number(n.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/i;const{labelStyles:s}=vt(t);t.labelStyle=s;const l=r?.wrappingWidth;t.defaultWidth=r?.wrappingWidth;const d=Math.max(t.label?l??0:0,t?.assetWidth??a),h=t.constraint==="on"&&t?.assetHeight?t.assetHeight*t.imageAspectRatio:d,p=t.constraint==="on"?h/t.imageAspectRatio:t?.assetHeight??i;t.width=Math.max(h,l??0);const{shapeSvg:f,bbox:m,label:b}=await Bt(e,t,"image-shape default"),x=t.pos==="t",v=-h/2,T=-p/2,k=t.label?8:0,C=mt.svg(f),A=xt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const D=C.rectangle(v,T,h,p,A),B=Math.max(h,m.width),R=p+m.height+k,M=C.rectangle(-B/2,-R/2,B,R,{...A,fill:"none",stroke:"none"}),$=f.insert(()=>D,":first-child"),W=f.insert(()=>M);if(t.img){const O=f.append("image");O.attr("href",t.img),O.attr("width",h),O.attr("height",p),O.attr("preserveAspectRatio","none"),O.attr("transform",`translate(${-h/2},${x?R/2-p:-R/2})`)}return b.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${x?-p/2-m.height/2-k/2:p/2-m.height/2+k/2})`),$.attr("transform",`translate(0,${x?m.height/2+k/2:-m.height/2-k/2})`),wt(t,W),t.intersect=function(O){if(Fe.info("iconSquare intersect",t,O),!t.label)return lt.rect(t,O);const Y=t.x??0,X=t.y??0,q=t.height??0;let N=[];return x?N=[{x:Y-m.width/2,y:X-q/2},{x:Y+m.width/2,y:X-q/2},{x:Y+m.width/2,y:X-q/2+m.height+k},{x:Y+h/2,y:X-q/2+m.height+k},{x:Y+h/2,y:X+q/2},{x:Y-h/2,y:X+q/2},{x:Y-h/2,y:X-q/2+m.height+k},{x:Y-m.width/2,y:X-q/2+m.height+k}]:N=[{x:Y-h/2,y:X-q/2},{x:Y+h/2,y:X-q/2},{x:Y+h/2,y:X-q/2+p},{x:Y+m.width/2,y:X-q/2+p},{x:Y+m.width/2/2,y:X+q/2},{x:Y-m.width/2,y:X+q/2},{x:Y-m.width/2,y:X-q/2+p},{x:Y-h/2,y:X-q/2+p}],lt.polygon(t,N,O)},f}L(e4,"imageSquare");async function t4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=Math.max(i.width+(t.padding??0)*2,t?.width??0),l=Math.max(i.height+(t.padding??0)*2,t?.height??0),d=[{x:0,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:-3*l/6,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=mt.svg(a),m=xt(t,{}),b=fr(d),x=f.path(b,m);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Il(a,s,l,d);return n&&h.attr("style",n),t.width=s,t.height=l,wt(t,h),t.intersect=function(f){return lt.polygon(t,d,f)},a}L(t4,"inv_trapezoid");async function py(e,t,r){const{labelStyles:n,nodeStyles:a}=vt(t);t.labelStyle=n;const{shapeSvg:i,bbox:s}=await Bt(e,t,Mt(t)),l=Math.max(s.width+r.labelPaddingX*2,t?.width||0),d=Math.max(s.height+r.labelPaddingY*2,t?.height||0),h=-l/2,p=-d/2;let f,{rx:m,ry:b}=t;const{cssStyles:x}=t;if(r?.rx&&r.ry&&(m=r.rx,b=r.ry),t.look==="handDrawn"){const v=mt.svg(i),T=xt(t,{}),k=m||b?v.path(Rl(h,p,l,d,m||0),T):v.rectangle(h,p,l,d,T);f=i.insert(()=>k,":first-child"),f.attr("class","basic label-container").attr("style",Pa(x))}else f=i.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",a).attr("rx",Pa(m)).attr("ry",Pa(b)).attr("x",h).attr("y",p).attr("width",l).attr("height",d);return wt(t,f),t.calcIntersect=function(v,T){return lt.rect(v,T)},t.intersect=function(v){return lt.rect(t,v)},i}L(py,"drawRect");async function r4(e,t){const{shapeSvg:r,bbox:n,label:a}=await Bt(e,t,"label"),i=r.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),wt(t,i),t.intersect=function(d){return lt.rect(t,d)},r}L(r4,"labelRect");async function n4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=Math.max(i.width+(t.padding??0),t?.width??0),l=Math.max(i.height+(t.padding??0),t?.height??0),d=[{x:0,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:-(3*l)/6,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=mt.svg(a),m=xt(t,{}),b=fr(d),x=f.path(b,m);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Il(a,s,l,d);return n&&h.attr("style",n),t.width=s,t.height=l,wt(t,h),t.intersect=function(f){return lt.polygon(t,d,f)},a}L(n4,"lean_left");async function a4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=Math.max(i.width+(t.padding??0),t?.width??0),l=Math.max(i.height+(t.padding??0),t?.height??0),d=[{x:-3*l/6,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:0,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=mt.svg(a),m=xt(t,{}),b=fr(d),x=f.path(b,m);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Il(a,s,l,d);return n&&h.attr("style",n),t.width=s,t.height=l,wt(t,h),t.intersect=function(f){return lt.polygon(t,d,f)},a}L(a4,"lean_right");function i4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",Mt(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,s=Math.max(35,t?.width??0),l=Math.max(35,t?.height??0),d=7,h=[{x:s,y:0},{x:0,y:l+d/2},{x:s-2*d,y:l+d/2},{x:0,y:2*l},{x:s,y:l-d/2},{x:2*d,y:l-d/2}],p=mt.svg(a),f=xt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=fr(h),b=p.path(m,f),x=a.insert(()=>b,":first-child");return i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),n&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",n),x.attr("transform",`translate(-${s/2},${-l})`),wt(t,x),t.intersect=function(v){return Fe.info("lightningBolt intersect",t,v),lt.polygon(t,h,v)},a}L(i4,"lightningBolt");var Pde=L((e,t,r,n,a,i,s)=>[`M${e},${t+i}`,`a${a},${i} 0,0,0 ${r},0`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+s}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),Rde=L((e,t,r,n,a,i,s)=>[`M${e},${t+i}`,`M${e+r},${t+i}`,`a${a},${i} 0,0,0 ${-r},0`,`l0,${n}`,`a${a},${i} 0,0,0 ${r},0`,`l0,${-n}`,`M${e},${t+i+s}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),Ide=L((e,t,r,n,a,i)=>[`M${e-r/2},${-n/2}`,`a${a},${i} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function s4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0),t.width??0),d=l/2,h=d/(2.5+l/50),p=Math.max(i.height+h+(t.padding??0),t.height??0),f=p*.1;let m;const{cssStyles:b}=t;if(t.look==="handDrawn"){const x=mt.svg(a),v=Rde(0,0,l,p,d,h,f),T=Ide(0,h,l,p,d,h),k=xt(t,{}),C=x.path(v,k),A=x.path(T,k);a.insert(()=>A,":first-child").attr("class","line"),m=a.insert(()=>C,":first-child"),m.attr("class","basic label-container"),b&&m.attr("style",b)}else{const x=Pde(0,0,l,p,d,h,f);m=a.insert("path",":first-child").attr("d",x).attr("class","basic label-container").attr("style",Pa(b)).attr("style",n)}return m.attr("label-offset-y",h),m.attr("transform",`translate(${-l/2}, ${-(p/2+h)})`),wt(t,m),s.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),t.intersect=function(x){const v=lt.rect(t,x),T=v.x-(t.x??0);if(d!=0&&(Math.abs(T)<(t.width??0)/2||Math.abs(T)==(t.width??0)/2&&Math.abs(v.y-(t.y??0))>(t.height??0)/2-h)){let k=h*h*(1-T*T/(d*d));k>0&&(k=Math.sqrt(k)),k=h-k,x.y-(t.y??0)>0&&(k=-k),v.y+=k}return v},a}L(s4,"linedCylinder");async function o4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,p=d+h,{cssStyles:f}=t,m=mt.svg(a),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-l/2-l/2*.1,y:-p/2},{x:-l/2-l/2*.1,y:p/2},..._l(-l/2-l/2*.1,p/2,l/2+l/2*.1,p/2,h,.8),{x:l/2+l/2*.1,y:-p/2},{x:-l/2-l/2*.1,y:-p/2},{x:-l/2,y:-p/2},{x:-l/2,y:p/2*1.1},{x:-l/2,y:-p/2}],v=m.polygon(x.map(k=>[k.x,k.y]),b),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",n),T.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)+l/2*.1/2-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),wt(t,T),t.intersect=function(k){return lt.polygon(t,x,k)},a}L(o4,"linedWaveEdgedRect");async function l4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,p=-l/2,f=-d/2,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{}),v=[{x:p-h,y:f+h},{x:p-h,y:f+d+h},{x:p+l-h,y:f+d+h},{x:p+l-h,y:f+d},{x:p+l,y:f+d},{x:p+l,y:f+d-h},{x:p+l+h,y:f+d-h},{x:p+l+h,y:f-h},{x:p+h,y:f-h},{x:p+h,y:f},{x:p,y:f},{x:p,y:f+h}],T=[{x:p,y:f+h},{x:p+l-h,y:f+h},{x:p+l-h,y:f+d},{x:p+l,y:f+d},{x:p+l,y:f},{x:p,y:f}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=fr(v),C=b.path(k,x),A=fr(T),D=b.path(A,{...x,fill:"none"}),B=a.insert(()=>D,":first-child");return B.insert(()=>C,":first-child"),B.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",m),n&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(i.width/2)-h-(i.x-(i.left??0))}, ${-(i.height/2)+h-(i.y-(i.top??0))})`),wt(t,B),t.intersect=function(R){return lt.polygon(t,v,R)},a}L(l4,"multiRect");async function c4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,p=d+h,f=-l/2,m=-p/2,b=5,{cssStyles:x}=t,v=_l(f-b,m+p+b,f+l-b,m+p+b,h,.8),T=v?.[v.length-1],k=[{x:f-b,y:m+b},{x:f-b,y:m+p+b},...v,{x:f+l-b,y:T.y-b},{x:f+l,y:T.y-b},{x:f+l,y:T.y-2*b},{x:f+l+b,y:T.y-2*b},{x:f+l+b,y:m-b},{x:f+b,y:m-b},{x:f+b,y:m},{x:f,y:m},{x:f,y:m+b}],C=[{x:f,y:m+b},{x:f+l-b,y:m+b},{x:f+l-b,y:T.y-b},{x:f+l,y:T.y-b},{x:f+l,y:m},{x:f,y:m}],A=mt.svg(a),D=xt(t,{});t.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const B=fr(k),R=A.path(B,D),M=fr(C),$=A.path(M,D),W=a.insert(()=>R,":first-child");return W.insert(()=>$),W.attr("class","basic label-container"),x&&t.look!=="handDrawn"&&W.selectAll("path").attr("style",x),n&&t.look!=="handDrawn"&&W.selectAll("path").attr("style",n),W.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-(i.width/2)-b-(i.x-(i.left??0))}, ${-(i.height/2)+b-h/2-(i.y-(i.top??0))})`),wt(t,W),t.intersect=function(O){return lt.polygon(t,k,O)},a}L(c4,"multiWaveEdgedRectangle");async function u4(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=vt(t);t.labelStyle=n,t.useHtmlLabels||Na().flowchart?.htmlLabels!==!1||(t.centerLabel=!0);const{shapeSvg:s,bbox:l,label:d}=await Bt(e,t,Mt(t)),h=Math.max(l.width+(t.padding??0)*2,t?.width??0),p=Math.max(l.height+(t.padding??0)*2,t?.height??0),f=-h/2,m=-p/2,{cssStyles:b}=t,x=mt.svg(s),v=xt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=x.rectangle(f,m,h,p,v),k=s.insert(()=>T,":first-child");return k.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",b),a&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",a),d.attr("transform",`translate(${-l.width/2-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),wt(t,k),t.intersect=function(C){return lt.rect(t,C)},s}L(u4,"note");var Dde=L((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function d4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.width+t.padding,l=i.height+t.padding,d=s+l,h=.5,p=[{x:d/2,y:0},{x:d,y:-d/2},{x:d/2,y:-d},{x:0,y:-d/2}];let f;const{cssStyles:m}=t;if(t.look==="handDrawn"){const b=mt.svg(a),x=xt(t,{}),v=Dde(0,0,d),T=b.path(v,x);f=a.insert(()=>T,":first-child").attr("transform",`translate(${-d/2+h}, ${d/2})`),m&&f.attr("style",m)}else f=Il(a,d,d,p),f.attr("transform",`translate(${-d/2+h}, ${d/2})`);return n&&f.attr("style",n),wt(t,f),t.calcIntersect=function(b,x){const v=b.width,T=[{x:v/2,y:0},{x:v,y:-v/2},{x:v/2,y:-v},{x:0,y:-v/2}],k=lt.polygon(b,T,x);return{x:k.x-.5,y:k.y-.5}},t.intersect=function(b){return this.calcIntersect(t,b)},a}L(d4,"question");async function h4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0),t?.width??0),d=Math.max(i.height+(t.padding??0),t?.height??0),h=-l/2,p=-d/2,f=p/2,m=[{x:h+f,y:p},{x:h,y:0},{x:h+f,y:-p},{x:-h,y:-p},{x:-h,y:p}],{cssStyles:b}=t,x=mt.svg(a),v=xt(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=fr(m),k=x.path(T,v),C=a.insert(()=>k,":first-child");return C.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",n),C.attr("transform",`translate(${-f/2},0)`),s.attr("transform",`translate(${-f/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),wt(t,C),t.intersect=function(A){return lt.polygon(t,m,A)},a}L(h4,"rect_left_inv_arrow");async function p4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const i=e.insert("g").attr("class",a).attr("id",t.domId||t.id),s=i.insert("g"),l=i.insert("g").attr("class","label").attr("style",n),d=t.description,h=t.label,p=l.node().appendChild(await gc(h,t.labelStyle,!0,!0));let f={width:0,height:0};if(Xn(Br()?.flowchart?.htmlLabels)){const $=p.children[0],W=Cr(p);f=$.getBoundingClientRect(),W.attr("width",f.width),W.attr("height",f.height)}Fe.info("Text 2",d);const m=d||[],b=p.getBBox(),x=l.node().appendChild(await gc(m.join?m.join("<br/>"):m,t.labelStyle,!0,!0)),v=x.children[0],T=Cr(x);f=v.getBoundingClientRect(),T.attr("width",f.width),T.attr("height",f.height);const k=(t.padding||0)/2;Cr(x).attr("transform","translate( "+(f.width>b.width?0:(b.width-f.width)/2)+", "+(b.height+k+5)+")"),Cr(p).attr("transform","translate( "+(f.width<b.width?0:-(b.width-f.width)/2)+", 0)"),f=l.node().getBBox(),l.attr("transform","translate("+-f.width/2+", "+(-f.height/2-k+3)+")");const C=f.width+(t.padding||0),A=f.height+(t.padding||0),D=-f.width/2-k,B=-f.height/2-k;let R,M;if(t.look==="handDrawn"){const $=mt.svg(i),W=xt(t,{}),O=$.path(Rl(D,B,C,A,t.rx||0),W),Y=$.line(-f.width/2-k,-f.height/2-k+b.height+k,f.width/2+k,-f.height/2-k+b.height+k,W);M=i.insert(()=>(Fe.debug("Rough node insert CXC",O),Y),":first-child"),R=i.insert(()=>(Fe.debug("Rough node insert CXC",O),O),":first-child")}else R=s.insert("rect",":first-child"),M=s.insert("line"),R.attr("class","outer title-state").attr("style",n).attr("x",-f.width/2-k).attr("y",-f.height/2-k).attr("width",f.width+(t.padding||0)).attr("height",f.height+(t.padding||0)),M.attr("class","divider").attr("x1",-f.width/2-k).attr("x2",f.width/2+k).attr("y1",-f.height/2-k+b.height+k).attr("y2",-f.height/2-k+b.height+k);return wt(t,R),t.intersect=function($){return lt.rect(t,$)},i}L(p4,"rectWithTitle");function ap(e,t,r,n,a,i,s){const d=(e+r)/2,h=(t+n)/2,p=Math.atan2(n-t,r-e),f=(r-e)/2,m=(n-t)/2,b=f/a,x=m/i,v=Math.sqrt(b**2+x**2);if(v>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-v**2),k=d+T*i*Math.sin(p)*(s?-1:1),C=h-T*a*Math.cos(p)*(s?-1:1),A=Math.atan2((t-C)/i,(e-k)/a);let B=Math.atan2((n-C)/i,(r-k)/a)-A;s&&B<0&&(B+=2*Math.PI),!s&&B>0&&(B-=2*Math.PI);const R=[];for(let M=0;M<20;M++){const $=M/19,W=A+$*B,O=k+a*Math.cos(W),Y=C+i*Math.sin(W);R.push({x:O,y:Y})}return R}L(ap,"generateArcPoints");async function g4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=t?.padding??0,l=t?.padding??0,d=(t?.width?t?.width:i.width)+s*2,h=(t?.height?t?.height:i.height)+l*2,p=t.radius||5,f=t.taper||5,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{});t.stroke&&(x.stroke=t.stroke),t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:-d/2+f,y:-h/2},{x:d/2-f,y:-h/2},...ap(d/2-f,-h/2,d/2,-h/2+f,p,p,!0),{x:d/2,y:-h/2+f},{x:d/2,y:h/2-f},...ap(d/2,h/2-f,d/2-f,h/2,p,p,!0),{x:d/2-f,y:h/2},{x:-d/2+f,y:h/2},...ap(-d/2+f,h/2,-d/2,h/2-f,p,p,!0),{x:-d/2,y:h/2-f},{x:-d/2,y:-h/2+f},...ap(-d/2,-h/2+f,-d/2+f,-h/2,p,p,!0)],T=fr(v),k=b.path(T,x),C=a.insert(()=>k,":first-child");return C.attr("class","basic label-container outer-path"),m&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",m),n&&t.look!=="handDrawn"&&C.selectChildren("path").attr("style",n),wt(t,C),t.intersect=function(A){return lt.polygon(t,v,A)},a}L(g4,"roundedRect");async function f4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=t?.padding??0,d=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),p=-i.width/2-l,f=-i.height/2-l,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:p,y:f},{x:p+d+8,y:f},{x:p+d+8,y:f+h},{x:p-8,y:f+h},{x:p-8,y:f},{x:p,y:f},{x:p,y:f+h}],T=b.polygon(v.map(C=>[C.x,C.y]),x),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container").attr("style",Pa(m)),n&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),m&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",n),s.attr("transform",`translate(${-d/2+4+(t.padding??0)-(i.x-(i.left??0))},${-h/2+(t.padding??0)-(i.y-(i.top??0))})`),wt(t,k),t.intersect=function(C){return lt.rect(t,C)},a}L(f4,"shadedProcess");async function m4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=-l/2,p=-d/2,{cssStyles:f}=t,m=mt.svg(a),b=xt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:h,y:p},{x:h,y:p+d},{x:h+l,y:p+d},{x:h+l,y:p-d/2}],v=fr(x),T=m.path(v,b),k=a.insert(()=>T,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),k.attr("transform",`translate(0, ${d/4})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))}, ${-d/4+(t.padding??0)-(i.y-(i.top??0))})`),wt(t,k),t.intersect=function(C){return lt.polygon(t,x,C)},a}L(m4,"slopedRect");async function y4(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??(t?.padding||0)*2,labelPaddingY:(t?.padding||0)*1};return py(e,t,r)}L(y4,"squareRect");async function b4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.height+t.padding,l=i.width+s/4+t.padding,d=s/2,{cssStyles:h}=t,p=mt.svg(a),f=xt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=[{x:-l/2+d,y:-s/2},{x:l/2-d,y:-s/2},...Hp(-l/2+d,0,d,50,90,270),{x:l/2-d,y:s/2},...Hp(l/2-d,0,d,50,270,450)],b=fr(m),x=p.path(b,f),v=a.insert(()=>x,":first-child");return v.attr("class","basic label-container outer-path"),h&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",h),n&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),wt(t,v),t.intersect=function(T){return lt.polygon(t,m,T)},a}L(b4,"stadium");async function x4(e,t){return py(e,t,{rx:5,ry:5})}L(x4,"state");function v4(e,t,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:a}=vt(t);t.labelStyle=n;const{cssStyles:i}=t,{lineColor:s,stateBorder:l,nodeBorder:d}=r,h=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),p=mt.svg(h),f=xt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const m=p.circle(0,0,14,{...f,stroke:s,strokeWidth:2}),b=l??d,x=p.circle(0,0,5,{...f,fill:b,stroke:b,strokeWidth:2,fillStyle:"solid"}),v=h.insert(()=>m,":first-child");return v.insert(()=>x),i&&v.selectAll("path").attr("style",i),a&&v.selectAll("path").attr("style",a),wt(t,v),t.intersect=function(T){return lt.circle(t,7,T)},h}L(v4,"stateEnd");function w4(e,t,{config:{themeVariables:r}}){const{lineColor:n}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i;if(t.look==="handDrawn"){const l=mt.svg(a).circle(0,0,14,Qse(n));i=a.insert(()=>l),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=a.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return wt(t,i),t.intersect=function(s){return lt.circle(t,7,s)},a}L(w4,"stateStart");async function S4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=(t?.padding||0)/2,l=i.width+t.padding,d=i.height+t.padding,h=-i.width/2-s,p=-i.height/2-s,f=[{x:0,y:0},{x:l,y:0},{x:l,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:l+8,y:0},{x:l+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if(t.look==="handDrawn"){const m=mt.svg(a),b=xt(t,{}),x=m.rectangle(h-8,p,l+16,d,b),v=m.line(h,p,h,p+d,b),T=m.line(h+l,p,h+l,p+d,b);a.insert(()=>v,":first-child"),a.insert(()=>T,":first-child");const k=a.insert(()=>x,":first-child"),{cssStyles:C}=t;k.attr("class","basic label-container").attr("style",Pa(C)),wt(t,k)}else{const m=Il(a,l,d,f);n&&m.attr("style",n),wt(t,m)}return t.intersect=function(m){return lt.polygon(t,f,m)},a}L(S4,"subroutine");async function T4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=Math.max(i.width+(t.padding??0)*2,t?.width??0),l=Math.max(i.height+(t.padding??0)*2,t?.height??0),d=-s/2,h=-l/2,p=.2*l,f=.2*l,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{}),v=[{x:d-p/2,y:h},{x:d+s+p/2,y:h},{x:d+s+p/2,y:h+l},{x:d-p/2,y:h+l}],T=[{x:d+s-p/2,y:h+l},{x:d+s+p/2,y:h+l},{x:d+s+p/2,y:h+l-f}];t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=fr(v),C=b.path(k,x),A=fr(T),D=b.path(A,{...x,fillStyle:"solid"}),B=a.insert(()=>D,":first-child");return B.insert(()=>C,":first-child"),B.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",m),n&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",n),wt(t,B),t.intersect=function(R){return lt.polygon(t,v,R)},a}L(T4,"taggedRect");async function k4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/4,p=.2*l,f=.2*d,m=d+h,{cssStyles:b}=t,x=mt.svg(a),v=xt(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=[{x:-l/2-l/2*.1,y:m/2},..._l(-l/2-l/2*.1,m/2,l/2+l/2*.1,m/2,h,.8),{x:l/2+l/2*.1,y:-m/2},{x:-l/2-l/2*.1,y:-m/2}],k=-l/2+l/2*.1,C=-m/2-f*.4,A=[{x:k+l-p,y:(C+d)*1.4},{x:k+l,y:C+d-f},{x:k+l,y:(C+d)*.9},..._l(k+l,(C+d)*1.3,k+l-p,(C+d)*1.5,-d*.03,.5)],D=fr(T),B=x.path(D,v),R=fr(A),M=x.path(R,{...v,fillStyle:"solid"}),$=a.insert(()=>M,":first-child");return $.insert(()=>B,":first-child"),$.attr("class","basic label-container"),b&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",b),n&&t.look!=="handDrawn"&&$.selectAll("path").attr("style",n),$.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h/2-(i.y-(i.top??0))})`),wt(t,$),t.intersect=function(W){return lt.polygon(t,T,W)},a}L(k4,"taggedWaveEdgedRectangle");async function E4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=Math.max(i.width+t.padding,t?.width||0),l=Math.max(i.height+t.padding,t?.height||0),d=-s/2,h=-l/2,p=a.insert("rect",":first-child");return p.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",d).attr("y",h).attr("width",s).attr("height",l),wt(t,p),t.intersect=function(f){return lt.rect(t,f)},a}L(E4,"text");var Mde=L((e,t,r,n,a,i)=>`M${e},${t}
    a${a},${i} 0,0,1 0,${-n}
    l${r},0
    a${a},${i} 0,0,1 0,${n}
    M${r},${-n}
    a${a},${i} 0,0,0 0,${n}
    l${-r},0`,"createCylinderPathD"),Ode=L((e,t,r,n,a,i)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${i} 0,0,0 0,${-n}`,`l${-r},0`,`a${a},${i} 0,0,0 0,${n}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),jde=L((e,t,r,n,a,i)=>[`M${e+r/2},${-n/2}`,`a${a},${i} 0,0,0 0,${n}`].join(" "),"createInnerCylinderPathD");async function C4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s,halfPadding:l}=await Bt(e,t,Mt(t)),d=t.look==="neo"?l*2:l,h=i.height+d,p=h/2,f=p/(2.5+h/50),m=i.width+f+d,{cssStyles:b}=t;let x;if(t.look==="handDrawn"){const v=mt.svg(a),T=Ode(0,0,m,h,f,p),k=jde(0,0,m,h,f,p),C=v.path(T,xt(t,{})),A=v.path(k,xt(t,{fill:"none"}));x=a.insert(()=>A,":first-child"),x=a.insert(()=>C,":first-child"),x.attr("class","basic label-container"),b&&x.attr("style",b)}else{const v=Mde(0,0,m,h,f,p);x=a.insert("path",":first-child").attr("d",v).attr("class","basic label-container").attr("style",Pa(b)).attr("style",n),x.attr("class","basic label-container"),b&&x.selectAll("path").attr("style",b),n&&x.selectAll("path").attr("style",n)}return x.attr("label-offset-x",f),x.attr("transform",`translate(${-m/2}, ${h/2} )`),s.attr("transform",`translate(${-(i.width/2)-f-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),wt(t,x),t.intersect=function(v){const T=lt.rect(t,v),k=T.y-(t.y??0);if(p!=0&&(Math.abs(k)<(t.height??0)/2||Math.abs(k)==(t.height??0)/2&&Math.abs(T.x-(t.x??0))>(t.width??0)/2-f)){let C=f*f*(1-k*k/(p*p));C!=0&&(C=Math.sqrt(Math.abs(C))),C=f-C,v.x-(t.x??0)>0&&(C=-C),T.x+=C}return T},a}L(C4,"tiltedCylinder");async function _4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=i.width+t.padding,l=i.height+t.padding,d=[{x:-3*l/6,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:0,y:-l}];let h;const{cssStyles:p}=t;if(t.look==="handDrawn"){const f=mt.svg(a),m=xt(t,{}),b=fr(d),x=f.path(b,m);h=a.insert(()=>x,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),p&&h.attr("style",p)}else h=Il(a,s,l,d);return n&&h.attr("style",n),t.width=s,t.height=l,wt(t,h),t.intersect=function(f){return lt.polygon(t,d,f)},a}L(_4,"trapezoid");async function A4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=60,l=20,d=Math.max(s,i.width+(t.padding??0)*2,t?.width??0),h=Math.max(l,i.height+(t.padding??0)*2,t?.height??0),{cssStyles:p}=t,f=mt.svg(a),m=xt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=[{x:-d/2*.8,y:-h/2},{x:d/2*.8,y:-h/2},{x:d/2,y:-h/2*.6},{x:d/2,y:h/2},{x:-d/2,y:h/2},{x:-d/2,y:-h/2*.6}],x=fr(b),v=f.path(x,m),T=a.insert(()=>v,":first-child");return T.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",p),n&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",n),wt(t,T),t.intersect=function(k){return lt.polygon(t,b,k)},a}L(A4,"trapezoidalPentagon");async function N4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Xn(Br().flowchart?.htmlLabels),d=i.width+(t.padding??0),h=d+i.height,p=d+i.height,f=[{x:0,y:0},{x:p,y:0},{x:p/2,y:-h}],{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=fr(f),T=b.path(v,x),k=a.insert(()=>T,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return m&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",m),n&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",n),t.width=d,t.height=h,wt(t,k),s.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${h/2-(i.height+(t.padding??0)/(l?2:1)-(i.y-(i.top??0)))})`),t.intersect=function(C){return Fe.info("Triangle intersect",t,f,C),lt.polygon(t,f,C)},a}L(N4,"triangle");async function L4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=d/8,p=d+h,{cssStyles:f}=t,b=70-l,x=b>0?b/2:0,v=mt.svg(a),T=xt(t,{});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const k=[{x:-l/2-x,y:p/2},..._l(-l/2-x,p/2,l/2+x,p/2,h,.8),{x:l/2+x,y:-p/2},{x:-l/2-x,y:-p/2}],C=fr(k),A=v.path(C,T),D=a.insert(()=>A,":first-child");return D.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",f),n&&t.look!=="handDrawn"&&D.selectAll("path").attr("style",n),D.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-l/2+(t.padding??0)-(i.x-(i.left??0))},${-d/2+(t.padding??0)-h-(i.y-(i.top??0))})`),wt(t,D),t.intersect=function(B){return lt.polygon(t,k,B)},a}L(L4,"waveEdgedRectangle");async function P4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i}=await Bt(e,t,Mt(t)),s=100,l=50,d=Math.max(i.width+(t.padding??0)*2,t?.width??0),h=Math.max(i.height+(t.padding??0)*2,t?.height??0),p=d/h;let f=d,m=h;f>m*p?m=f/p:f=m*p,f=Math.max(f,s),m=Math.max(m,l);const b=Math.min(m*.2,m/4),x=m+b*2,{cssStyles:v}=t,T=mt.svg(a),k=xt(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=[{x:-f/2,y:x/2},..._l(-f/2,x/2,f/2,x/2,b,1),{x:f/2,y:-x/2},..._l(f/2,-x/2,-f/2,-x/2,b,-1)],A=fr(C),D=T.path(A,k),B=a.insert(()=>D,":first-child");return B.attr("class","basic label-container"),v&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",v),n&&t.look!=="handDrawn"&&B.selectAll("path").attr("style",n),wt(t,B),t.intersect=function(R){return lt.polygon(t,C,R)},a}L(P4,"waveRectangle");async function R4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,label:s}=await Bt(e,t,Mt(t)),l=Math.max(i.width+(t.padding??0)*2,t?.width??0),d=Math.max(i.height+(t.padding??0)*2,t?.height??0),h=5,p=-l/2,f=-d/2,{cssStyles:m}=t,b=mt.svg(a),x=xt(t,{}),v=[{x:p-h,y:f-h},{x:p-h,y:f+d},{x:p+l,y:f+d},{x:p+l,y:f-h}],T=`M${p-h},${f-h} L${p+l},${f-h} L${p+l},${f+d} L${p-h},${f+d} L${p-h},${f-h}
                M${p-h},${f} L${p+l},${f}
                M${p},${f-h} L${p},${f+d}`;t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const k=b.path(T,x),C=a.insert(()=>k,":first-child");return C.attr("transform",`translate(${h/2}, ${h/2})`),C.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",m),n&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",n),s.attr("transform",`translate(${-(i.width/2)+h/2-(i.x-(i.left??0))}, ${-(i.height/2)+h/2-(i.y-(i.top??0))})`),wt(t,C),t.intersect=function(A){return lt.polygon(t,v,A)},a}L(R4,"windowPane");async function eT(e,t){const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:H}=Na(),{background:I}=H,ne={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${I}`]};await eT(e,ne)}const n=Na();t.useHtmlLabels=n.htmlLabels;let a=n.er?.diagramPadding??10,i=n.er?.entityPadding??6;const{cssStyles:s}=t,{labelStyles:l,nodeStyles:d}=vt(t);if(r.attributes.length===0&&t.label){const H={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};Ro(t.label,n)+H.labelPaddingX*2<n.er.minEntityWidth&&(t.width=n.er.minEntityWidth);const I=await py(e,t,H);if(!Xn(n.htmlLabels)){const ne=I.select("text"),ue=ne.node()?.getBBox();ne.attr("transform",`translate(${-ue.width/2}, 0)`)}return I}n.htmlLabels||(a*=1.25,i*=1.25);let h=Mt(t);h||(h="node default");const p=e.insert("g").attr("class",h).attr("id",t.domId||t.id),f=await Uu(p,t.label??"",n,0,0,["name"],l);f.height+=i;let m=0;const b=[],x=[];let v=0,T=0,k=0,C=0,A=!0,D=!0;for(const H of r.attributes){const I=await Uu(p,H.type,n,0,m,["attribute-type"],l);v=Math.max(v,I.width+a);const ne=await Uu(p,H.name,n,0,m,["attribute-name"],l);T=Math.max(T,ne.width+a);const ue=await Uu(p,H.keys.join(),n,0,m,["attribute-keys"],l);k=Math.max(k,ue.width+a);const xe=await Uu(p,H.comment,n,0,m,["attribute-comment"],l);C=Math.max(C,xe.width+a);const ke=Math.max(I.height,ne.height,ue.height,xe.height)+i;x.push({yOffset:m,rowHeight:ke}),m+=ke}let B=4;k<=a&&(A=!1,k=0,B--),C<=a&&(D=!1,C=0,B--);const R=p.node().getBBox();if(f.width+a*2-(v+T+k+C)>0){const H=f.width+a*2-(v+T+k+C);v+=H/B,T+=H/B,k>0&&(k+=H/B),C>0&&(C+=H/B)}const M=v+T+k+C,$=mt.svg(p),W=xt(t,{});t.look!=="handDrawn"&&(W.roughness=0,W.fillStyle="solid");let O=0;x.length>0&&(O=x.reduce((H,I)=>H+(I?.rowHeight??0),0));const Y=Math.max(R.width+a*2,t?.width||0,M),X=Math.max((O??0)+f.height,t?.height||0),q=-Y/2,N=-X/2;p.selectAll("g:not(:first-child)").each((H,I,ne)=>{const ue=Cr(ne[I]),xe=ue.attr("transform");let ke=0,me=0;if(xe){const ge=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(xe);ge&&(ke=parseFloat(ge[1]),me=parseFloat(ge[2]),ue.attr("class").includes("attribute-name")?ke+=v:ue.attr("class").includes("attribute-keys")?ke+=v+T:ue.attr("class").includes("attribute-comment")&&(ke+=v+T+k))}ue.attr("transform",`translate(${q+a/2+ke}, ${me+N+f.height+i/2})`)}),p.select(".name").attr("transform","translate("+-f.width/2+", "+(N+i/2)+")");const U=$.rectangle(q,N,Y,X,W),j=p.insert(()=>U,":first-child").attr("style",s.join("")),{themeVariables:K}=Na(),{rowEven:Q,rowOdd:ie,nodeBorder:G}=K;b.push(0);for(const[H,I]of x.entries()){const ue=(H+1)%2===0&&I.yOffset!==0,xe=$.rectangle(q,f.height+N+I?.yOffset,Y,I?.rowHeight,{...W,fill:ue?Q:ie,stroke:G});p.insert(()=>xe,"g.label").attr("style",s.join("")).attr("class",`row-rect-${ue?"even":"odd"}`)}let F=$.line(q,f.height+N,Y+q,f.height+N,W);p.insert(()=>F).attr("class","divider"),F=$.line(v+q,f.height+N,v+q,X+N,W),p.insert(()=>F).attr("class","divider"),A&&(F=$.line(v+T+q,f.height+N,v+T+q,X+N,W),p.insert(()=>F).attr("class","divider")),D&&(F=$.line(v+T+k+q,f.height+N,v+T+k+q,X+N,W),p.insert(()=>F).attr("class","divider"));for(const H of b)F=$.line(q,f.height+N+H,Y+q,f.height+N+H,W),p.insert(()=>F).attr("class","divider");if(wt(t,j),d&&t.look!=="handDrawn"){const I=d.split(";")?.filter(ne=>ne.includes("stroke"))?.map(ne=>`${ne}`).join("; ");p.selectAll("path").attr("style",I??""),p.selectAll(".row-rect-even path").attr("style",d)}return t.intersect=function(H){return lt.rect(t,H)},p}L(eT,"erBox");async function Uu(e,t,r,n=0,a=0,i=[],s=""){const l=e.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${n}, ${a})`).attr("style",s);t!==aA(t)&&(t=aA(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const d=l.node().appendChild(await Pl(l,t,{width:Ro(t,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let p=d.children[0];for(p.textContent=p.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");p.childNodes[0];)p=p.childNodes[0],p.textContent=p.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=d.getBBox();if(Xn(r.htmlLabels)){const p=d.children[0];p.style.textAlign="start";const f=Cr(d);h=p.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}return h}L(Uu,"addText");async function I4(e,t,r,n,a=r.class.padding??12){const i=n?0:3,s=e.insert("g").attr("class",Mt(t)).attr("id",t.domId||t.id);let l=null,d=null,h=null,p=null,f=0,m=0,b=0;if(l=s.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const C=t.annotations[0];await ip(l,{text:`${C}`},0),f=l.node().getBBox().height}d=s.insert("g").attr("class","label-group text"),await ip(d,t,0,["font-weight: bolder"]);const x=d.node().getBBox();m=x.height,h=s.insert("g").attr("class","members-group text");let v=0;for(const C of t.members){const A=await ip(h,C,v,[C.parseClassifier()]);v+=A+i}b=h.node().getBBox().height,b<=0&&(b=a/2),p=s.insert("g").attr("class","methods-group text");let T=0;for(const C of t.methods){const A=await ip(p,C,T,[C.parseClassifier()]);T+=A+i}let k=s.node().getBBox();if(l!==null){const C=l.node().getBBox();l.attr("transform",`translate(${-C.width/2})`)}return d.attr("transform",`translate(${-x.width/2}, ${f})`),k=s.node().getBBox(),h.attr("transform",`translate(0, ${f+m+a*2})`),k=s.node().getBBox(),p.attr("transform",`translate(0, ${f+m+(b?b+a*4:a*2)})`),k=s.node().getBBox(),{shapeSvg:s,bbox:k}}L(I4,"textHelper");async function ip(e,t,r,n=[]){const a=e.insert("g").attr("class","label").attr("style",n.join("; ")),i=Na();let s="useHtmlLabels"in t?t.useHtmlLabels:Xn(i.htmlLabels)??!0,l="";"text"in t?l=t.text:l=t.label,!s&&l.startsWith("\\")&&(l=l.substring(1)),cd(l)&&(s=!0);const d=await Pl(a,uS(qc(l)),{width:Ro(l,i)+50,classes:"markdown-node-label",useHtmlLabels:s},i);let h,p=1;if(s){const f=d.children[0],m=Cr(d);p=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(p+=f.innerHTML.split("<mrow>").length-1);const b=f.getElementsByTagName("img");if(b){const x=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(v=>new Promise(T=>{function k(){if(v.style.display="flex",v.style.flexDirection="column",x){const C=i.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,D=parseInt(C,10)*5+"px";v.style.minWidth=D,v.style.maxWidth=D}else v.style.width="100%";T(v)}L(k,"setupImage"),setTimeout(()=>{v.complete&&k()}),v.addEventListener("error",k),v.addEventListener("load",k)})))}h=f.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}else{n.includes("font-weight: bolder")&&Cr(d).selectAll("tspan").attr("font-weight",""),p=d.children.length;const f=d.children[0];(d.textContent===""||d.textContent.includes("&gt"))&&(f.textContent=l[0]+l.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),l[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),h=d.getBBox()}return a.attr("transform","translate(0,"+(-h.height/(2*p)+r)+")"),h.height}L(ip,"addText");async function D4(e,t){const r=Br(),n=r.class.padding??12,a=n,i=t.useHtmlLabels??Xn(r.htmlLabels)??!0,s=t;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:l,bbox:d}=await I4(e,t,r,i,a),{labelStyles:h,nodeStyles:p}=vt(t);t.labelStyle=h,t.cssStyles=s.styles||"";const f=s.styles?.join(";")||p||"";t.cssStyles||(t.cssStyles=f.replaceAll("!important","").split(";"));const m=s.members.length===0&&s.methods.length===0&&!r.class?.hideEmptyMembersBox,b=mt.svg(l),x=xt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=d.width;let T=d.height;s.members.length===0&&s.methods.length===0?T+=a:s.members.length>0&&s.methods.length===0&&(T+=a*2);const k=-v/2,C=-T/2,A=b.rectangle(k-n,C-n-(m?n:s.members.length===0&&s.methods.length===0?-n/2:0),v+2*n,T+2*n+(m?n*2:s.members.length===0&&s.methods.length===0?-n:0),x),D=l.insert(()=>A,":first-child");D.attr("class","basic label-container");const B=D.node().getBBox();l.selectAll(".text").each((W,O,Y)=>{const X=Cr(Y[O]),q=X.attr("transform");let N=0;if(q){const Q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(q);Q&&(N=parseFloat(Q[2]))}let U=N+C+n-(m?n:s.members.length===0&&s.methods.length===0?-n/2:0);i||(U-=4);let j=k;(X.attr("class").includes("label-group")||X.attr("class").includes("annotation-group"))&&(j=-X.node()?.getBBox().width/2||0,l.selectAll("text").each(function(K,Q,ie){window.getComputedStyle(ie[Q]).textAnchor==="middle"&&(j=0)})),X.attr("transform",`translate(${j}, ${U})`)});const R=l.select(".annotation-group").node().getBBox().height-(m?n/2:0)||0,M=l.select(".label-group").node().getBBox().height-(m?n/2:0)||0,$=l.select(".members-group").node().getBBox().height-(m?n/2:0)||0;if(s.members.length>0||s.methods.length>0||m){const W=b.line(B.x,R+M+C+n,B.x+B.width,R+M+C+n,x);l.insert(()=>W).attr("class","divider").attr("style",f)}if(m||s.members.length>0||s.methods.length>0){const W=b.line(B.x,R+M+$+C+a*2+n,B.x+B.width,R+M+$+C+n+a*2,x);l.insert(()=>W).attr("class","divider").attr("style",f)}if(s.look!=="handDrawn"&&l.selectAll("path").attr("style",f),D.select(":nth-child(2)").attr("style",f),l.selectAll(".divider").select("path").attr("style",f),t.labelStyle?l.selectAll("span").attr("style",t.labelStyle):l.selectAll("span").attr("style",f),!i){const W=RegExp(/color\s*:\s*([^;]*)/),O=W.exec(f);if(O){const Y=O[0].replace("color","fill");l.selectAll("tspan").attr("style",Y)}else if(h){const Y=W.exec(h);if(Y){const X=Y[0].replace("color","fill");l.selectAll("tspan").attr("style",X)}}}return wt(t,D),t.intersect=function(W){return lt.rect(t,W)},l}L(D4,"classBox");async function M4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const a=t,i=t,s=20,l=20,d="verifyMethod"in t,h=Mt(t),p=e.insert("g").attr("class",h).attr("id",t.domId??t.id);let f;d?f=await Fs(p,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):f=await Fs(p,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let m=f;const b=await Fs(p,a.name,m,t.labelStyle+"; font-weight: bold;");if(m+=b+l,d){const R=await Fs(p,`${a.requirementId?`ID: ${a.requirementId}`:""}`,m,t.labelStyle);m+=R;const M=await Fs(p,`${a.text?`Text: ${a.text}`:""}`,m,t.labelStyle);m+=M;const $=await Fs(p,`${a.risk?`Risk: ${a.risk}`:""}`,m,t.labelStyle);m+=$,await Fs(p,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,m,t.labelStyle)}else{const R=await Fs(p,`${i.type?`Type: ${i.type}`:""}`,m,t.labelStyle);m+=R,await Fs(p,`${i.docRef?`Doc Ref: ${i.docRef}`:""}`,m,t.labelStyle)}const x=(p.node()?.getBBox().width??200)+s,v=(p.node()?.getBBox().height??200)+s,T=-x/2,k=-v/2,C=mt.svg(p),A=xt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const D=C.rectangle(T,k,x,v,A),B=p.insert(()=>D,":first-child");if(B.attr("class","basic label-container").attr("style",n),p.selectAll(".label").each((R,M,$)=>{const W=Cr($[M]),O=W.attr("transform");let Y=0,X=0;if(O){const j=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(O);j&&(Y=parseFloat(j[1]),X=parseFloat(j[2]))}const q=X-v/2;let N=T+s/2;(M===0||M===1)&&(N=Y),W.attr("transform",`translate(${N}, ${q+s})`)}),m>f+b+l){const R=C.line(T,k+f+b+l,T+x,k+f+b+l,A);p.insert(()=>R).attr("style",n)}return wt(t,B),t.intersect=function(R){return lt.rect(t,R)},p}L(M4,"requirementBox");async function Fs(e,t,r,n=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",n),i=Br(),s=i.htmlLabels??!0,l=await Pl(a,uS(qc(t)),{width:Ro(t,i)+50,classes:"markdown-node-label",useHtmlLabels:s,style:n},i);let d;if(s){const h=l.children[0],p=Cr(l);d=h.getBoundingClientRect(),p.attr("width",d.width),p.attr("height",d.height)}else{const h=l.children[0];for(const p of h.children)p.textContent=p.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&p.setAttribute("style",n);d=l.getBBox(),d.height+=6}return a.attr("transform",`translate(${-d.width/2},${-d.height/2+r})`),d.height}L(Fs,"addText");var Bde=L(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function O4(e,t,{config:r}){const{labelStyles:n,nodeStyles:a}=vt(t);t.labelStyle=n||"";const i=10,s=t.width;t.width=(t.width??200)-10;const{shapeSvg:l,bbox:d,label:h}=await Bt(e,t,Mt(t)),p=t.padding||10;let f="",m;"ticket"in t&&t.ticket&&r?.kanban?.ticketBaseUrl&&(f=r?.kanban?.ticketBaseUrl.replace("#TICKET#",t.ticket),m=l.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const b={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let x,v;m?{label:x,bbox:v}=await Sv(m,"ticket"in t&&t.ticket||"",b):{label:x,bbox:v}=await Sv(l,"ticket"in t&&t.ticket||"",b);const{label:T,bbox:k}=await Sv(l,"assigned"in t&&t.assigned||"",b);t.width=s;const C=10,A=t?.width||0,D=Math.max(v.height,k.height)/2,B=Math.max(d.height+C*2,t?.height||0)+D,R=-A/2,M=-B/2;h.attr("transform","translate("+(p-A/2)+", "+(-D-d.height/2)+")"),x.attr("transform","translate("+(p-A/2)+", "+(-D+d.height/2)+")"),T.attr("transform","translate("+(p+A/2-k.width-2*i)+", "+(-D+d.height/2)+")");let $;const{rx:W,ry:O}=t,{cssStyles:Y}=t;if(t.look==="handDrawn"){const X=mt.svg(l),q=xt(t,{}),N=W||O?X.path(Rl(R,M,A,B,W||0),q):X.rectangle(R,M,A,B,q);$=l.insert(()=>N,":first-child"),$.attr("class","basic label-container").attr("style",Y||null)}else{$=l.insert("rect",":first-child"),$.attr("class","basic label-container __APA__").attr("style",a).attr("rx",W??5).attr("ry",O??5).attr("x",R).attr("y",M).attr("width",A).attr("height",B);const X="priority"in t&&t.priority;if(X){const q=l.append("line"),N=R+2,U=M+Math.floor((W??0)/2),j=M+B-Math.floor((W??0)/2);q.attr("x1",N).attr("y1",U).attr("x2",N).attr("y2",j).attr("stroke-width","4").attr("stroke",Bde(X))}}return wt(t,$),t.height=B,t.intersect=function(X){return lt.rect(t,X)},l}L(O4,"kanbanItem");async function j4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Bt(e,t,Mt(t)),d=i.width+10*s,h=i.height+8*s,p=.15*d,{cssStyles:f}=t,m=i.width+20,b=i.height+20,x=Math.max(d,m),v=Math.max(h,b);l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`);let T;const k=`M0 0 
    a${p},${p} 1 0,0 ${x*.25},${-1*v*.1}
    a${p},${p} 1 0,0 ${x*.25},0
    a${p},${p} 1 0,0 ${x*.25},0
    a${p},${p} 1 0,0 ${x*.25},${v*.1}

    a${p},${p} 1 0,0 ${x*.15},${v*.33}
    a${p*.8},${p*.8} 1 0,0 0,${v*.34}
    a${p},${p} 1 0,0 ${-1*x*.15},${v*.33}

    a${p},${p} 1 0,0 ${-1*x*.25},${v*.15}
    a${p},${p} 1 0,0 ${-1*x*.25},0
    a${p},${p} 1 0,0 ${-1*x*.25},0
    a${p},${p} 1 0,0 ${-1*x*.25},${-1*v*.15}

    a${p},${p} 1 0,0 ${-1*x*.1},${-1*v*.33}
    a${p*.8},${p*.8} 1 0,0 0,${-1*v*.34}
    a${p},${p} 1 0,0 ${x*.1},${-1*v*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const C=mt.svg(a),A=xt(t,{}),D=C.path(k,A);T=a.insert(()=>D,":first-child"),T.attr("class","basic label-container").attr("style",Pa(f))}else T=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",k);return T.attr("transform",`translate(${-x/2}, ${-v/2})`),wt(t,T),t.calcIntersect=function(C,A){return lt.rect(C,A)},t.intersect=function(C){return Fe.info("Bang intersect",t,C),lt.rect(t,C)},a}L(j4,"bang");async function B4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Bt(e,t,Mt(t)),d=i.width+2*s,h=i.height+2*s,p=.15*d,f=.25*d,m=.35*d,b=.2*d,{cssStyles:x}=t;let v;const T=`M0 0 
    a${p},${p} 0 0,1 ${d*.25},${-1*d*.1}
    a${m},${m} 1 0,1 ${d*.4},${-1*d*.1}
    a${f},${f} 1 0,1 ${d*.35},${d*.2}

    a${p},${p} 1 0,1 ${d*.15},${h*.35}
    a${b},${b} 1 0,1 ${-1*d*.15},${h*.65}

    a${f},${p} 1 0,1 ${-1*d*.25},${d*.15}
    a${m},${m} 1 0,1 ${-1*d*.5},0
    a${p},${p} 1 0,1 ${-1*d*.25},${-1*d*.15}

    a${p},${p} 1 0,1 ${-1*d*.1},${-1*h*.35}
    a${b},${b} 1 0,1 ${d*.1},${-1*h*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const k=mt.svg(a),C=xt(t,{}),A=k.path(T,C);v=a.insert(()=>A,":first-child"),v.attr("class","basic label-container").attr("style",Pa(x))}else v=a.insert("path",":first-child").attr("class","basic label-container").attr("style",n).attr("d",T);return l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),v.attr("transform",`translate(${-d/2}, ${-h/2})`),wt(t,v),t.calcIntersect=function(k,C){return lt.rect(k,C)},t.intersect=function(k){return Fe.info("Cloud intersect",t,k),lt.rect(t,k)},a}L(B4,"cloud");async function F4(e,t){const{labelStyles:r,nodeStyles:n}=vt(t);t.labelStyle=r;const{shapeSvg:a,bbox:i,halfPadding:s,label:l}=await Bt(e,t,Mt(t)),d=i.width+8*s,h=i.height+2*s,p=5,f=`
    M${-d/2} ${h/2-p}
    v${-h+2*p}
    q0,-${p} ${p},-${p}
    h${d-2*p}
    q${p},0 ${p},${p}
    v${h-2*p}
    q0,${p} -${p},${p}
    h${-d+2*p}
    q-${p},0 -${p},-${p}
    Z
  `,m=a.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",n).attr("d",f);return a.append("line").attr("class","node-line-").attr("x1",-d/2).attr("y1",h/2).attr("x2",d/2).attr("y2",h/2),l.attr("transform",`translate(${-i.width/2}, ${-i.height/2})`),a.append(()=>l.node()),wt(t,m),t.calcIntersect=function(b,x){return lt.rect(b,x)},t.intersect=function(b){return lt.rect(t,b)},a}L(F4,"defaultMindmapNode");async function z4(e,t){const r={padding:t.padding??0};return ZS(e,t,r)}L(z4,"mindmapCircle");var Fde=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:y4},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:g4},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:b4},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:S4},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:UO},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:ZS},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:j4},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:B4},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:d4},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:YO},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:a4},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:n4},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:_4},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:t4},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:qO},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:E4},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:IO},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:f4},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:w4},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:v4},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:WO},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:QO},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:jO},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:BO},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:FO},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:i4},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:L4},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:VO},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:C4},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:s4},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:zO},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:$O},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:N4},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:R4},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:HO},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:A4},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:GO},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:m4},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:c4},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:l4},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:RO},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:OO},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:k4},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:T4},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:P4},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:h4},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:o4}],zde=L(()=>{const t=[...Object.entries({state:x4,choice:DO,note:u4,rectWithTitle:p4,labelRect:r4,iconSquare:ZO,iconCircle:XO,icon:KO,iconRounded:JO,imageSquare:e4,anchor:PO,kanbanItem:O4,mindmapCircle:z4,defaultMindmapNode:F4,classBox:D4,erBox:eT,requirementBox:M4}),...Fde.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),U4=zde();function Ude(e){return e in U4}L(Ude,"isValidShape");var gy=new Map;async function $4(e,t,r){let n,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const i=t.shape?U4[t.shape]:void 0;if(!i)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let s;r.config.securityLevel==="sandbox"?s="_top":t.linkTarget&&(s=t.linkTarget||"_blank"),n=e.insert("svg:a").attr("xlink:href",t.link).attr("target",s??null),a=await i(n,t,r)}else a=await i(e,t,r),n=a;return t.tooltip&&a.attr("title",t.tooltip),gy.set(t.id,n),t.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}L($4,"insertNode");var X0e=L((e,t)=>{gy.set(t.id,e)},"setNodeElem"),J0e=L(()=>{gy.clear()},"clear"),Z0e=L(e=>{const t=gy.get(e.id);Fe.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,n=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+n-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),n},"positionNode"),$de=L((e,t,r,n,a,i)=>{t.arrowTypeStart&&hN(e,"start",t.arrowTypeStart,r,n,a,i),t.arrowTypeEnd&&hN(e,"end",t.arrowTypeEnd,r,n,a,i)},"addEdgeMarkers"),qde={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},hN=L((e,t,r,n,a,i,s)=>{const l=qde[r];if(!l){Fe.warn(`Unknown arrow type: ${r}`);return}const d=l.type,p=`${a}_${i}-${d}${t==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const f=s.replace(/[^\dA-Za-z]/g,"_"),m=`${p}_${f}`;if(!document.getElementById(m)){const b=document.getElementById(p);if(b){const x=b.cloneNode(!0);x.id=m,x.querySelectorAll("path, circle, line").forEach(T=>{T.setAttribute("stroke",s),l.fill&&T.setAttribute("fill",s)}),b.parentNode?.appendChild(x)}}e.attr(`marker-${t}`,`url(${n}#${m})`)}else e.attr(`marker-${t}`,`url(${n}#${p})`)},"addEdgeMarker"),k0=new Map,ya=new Map,eye=L(()=>{k0.clear(),ya.clear()},"clear"),Jf=L(e=>e?e.reduce((r,n)=>r+";"+n,""):"","getLabelStyles"),Hde=L(async(e,t)=>{let r=Xn(Br().flowchart.htmlLabels);const{labelStyles:n}=vt(t);t.labelStyle=n;const a=await Pl(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});Fe.info("abc82",t,t.labelType);const i=e.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label").attr("data-id",t.id);s.node().appendChild(a);let l=a.getBBox();if(r){const h=a.children[0],p=Cr(a);l=h.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),k0.set(t.id,i),t.width=l.width,t.height=l.height;let d;if(t.startLabelLeft){const h=await gc(t.startLabelLeft,Jf(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");d=f.node().appendChild(h);const m=h.getBBox();f.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),ya.get(t.id)||ya.set(t.id,{}),ya.get(t.id).startLeft=p,sp(d,t.startLabelLeft)}if(t.startLabelRight){const h=await gc(t.startLabelRight,Jf(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");d=p.node().appendChild(h),f.node().appendChild(h);const m=h.getBBox();f.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),ya.get(t.id)||ya.set(t.id,{}),ya.get(t.id).startRight=p,sp(d,t.startLabelRight)}if(t.endLabelLeft){const h=await gc(t.endLabelLeft,Jf(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");d=f.node().appendChild(h);const m=h.getBBox();f.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),p.node().appendChild(h),ya.get(t.id)||ya.set(t.id,{}),ya.get(t.id).endLeft=p,sp(d,t.endLabelLeft)}if(t.endLabelRight){const h=await gc(t.endLabelRight,Jf(t.labelStyle)),p=e.insert("g").attr("class","edgeTerminals"),f=p.insert("g").attr("class","inner");d=f.node().appendChild(h);const m=h.getBBox();f.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),p.node().appendChild(h),ya.get(t.id)||ya.set(t.id,{}),ya.get(t.id).endRight=p,sp(d,t.endLabelRight)}return a},"insertEdgeLabel");function sp(e,t){Br().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}L(sp,"setTerminalWidth");var Gde=L((e,t)=>{Fe.debug("Moving label abc88 ",e.id,e.label,k0.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const n=Br(),{subGraphTitleTotalMargin:a}=LS(n);if(e.label){const i=k0.get(e.id);let s=e.x,l=e.y;if(r){const d=vs.calcLabelPosition(r);Fe.debug("Moving label "+e.label+" from (",s,",",l,") to (",d.x,",",d.y,") abc88"),t.updatedPath&&(s=d.x,l=d.y)}i.attr("transform",`translate(${s}, ${l+a/2})`)}if(e.startLabelLeft){const i=ya.get(e.id).startLeft;let s=e.x,l=e.y;if(r){const d=vs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);s=d.x,l=d.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.startLabelRight){const i=ya.get(e.id).startRight;let s=e.x,l=e.y;if(r){const d=vs.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);s=d.x,l=d.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.endLabelLeft){const i=ya.get(e.id).endLeft;let s=e.x,l=e.y;if(r){const d=vs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);s=d.x,l=d.y}i.attr("transform",`translate(${s}, ${l})`)}if(e.endLabelRight){const i=ya.get(e.id).endRight;let s=e.x,l=e.y;if(r){const d=vs.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);s=d.x,l=d.y}i.attr("transform",`translate(${s}, ${l})`)}},"positionEdgeLabel"),Wde=L((e,t)=>{const r=e.x,n=e.y,a=Math.abs(t.x-r),i=Math.abs(t.y-n),s=e.width/2,l=e.height/2;return a>=s||i>=l},"outsideNode"),Vde=L((e,t,r)=>{Fe.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const n=e.x,a=e.y,i=Math.abs(n-r.x),s=e.width/2;let l=r.x<t.x?s-i:s+i;const d=e.height/2,h=Math.abs(t.y-r.y),p=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*s>Math.abs(n-t.x)*d){let f=r.y<t.y?t.y-d-a:a-d-t.y;l=p*f/h;const m={x:r.x<t.x?r.x+l:r.x-p+l,y:r.y<t.y?r.y+h-f:r.y-h+f};return l===0&&(m.x=t.x,m.y=t.y),p===0&&(m.x=t.x),h===0&&(m.y=t.y),Fe.debug(`abc89 top/bottom calc, Q ${h}, q ${f}, R ${p}, r ${l}`,m),m}else{r.x<t.x?l=t.x-s-n:l=n-s-t.x;let f=h*l/p,m=r.x<t.x?r.x+p-l:r.x-p+l,b=r.y<t.y?r.y+f:r.y-f;return Fe.debug(`sides calc abc89, Q ${h}, q ${f}, R ${p}, r ${l}`,{_x:m,_y:b}),l===0&&(m=t.x,b=t.y),p===0&&(m=t.x),h===0&&(b=t.y),{x:m,y:b}}},"intersection"),pN=L((e,t)=>{Fe.warn("abc88 cutPathAtIntersect",e,t);let r=[],n=e[0],a=!1;return e.forEach(i=>{if(Fe.info("abc88 checking point",i,t),!Wde(t,i)&&!a){const s=Vde(t,n,i);Fe.debug("abc88 inside",i,n,s),Fe.debug("abc88 intersection",s,t);let l=!1;r.forEach(d=>{l=l||d.x===s.x&&d.y===s.y}),r.some(d=>d.x===s.x&&d.y===s.y)?Fe.warn("abc88 no intersect",s,r):r.push(s),a=!0}else Fe.warn("abc88 outside",i,n),n=i,a||r.push(i)}),Fe.debug("returning points",r),r},"cutPathAtIntersect");function q4(e){const t=[],r=[];for(let n=1;n<e.length-1;n++){const a=e[n-1],i=e[n],s=e[n+1];(a.x===i.x&&i.y===s.y&&Math.abs(i.x-s.x)>5&&Math.abs(i.y-a.y)>5||a.y===i.y&&i.x===s.x&&Math.abs(i.x-a.x)>5&&Math.abs(i.y-s.y)>5)&&(t.push(i),r.push(n))}return{cornerPoints:t,cornerPointPositions:r}}L(q4,"extractCornerPoints");var gN=L(function(e,t,r){const n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a),s=r/i;return{x:t.x-s*n,y:t.y-s*a}},"findAdjacentPoint"),Yde=L(function(e){const{cornerPointPositions:t}=q4(e),r=[];for(let n=0;n<e.length;n++)if(t.includes(n)){const a=e[n-1],i=e[n+1],s=e[n],l=gN(a,s,5),d=gN(i,s,5),h=d.x-l.x,p=d.y-l.y;r.push(l);const f=Math.sqrt(2)*2;let m={x:s.x,y:s.y};if(Math.abs(i.x-a.x)>10&&Math.abs(i.y-a.y)>=10){Fe.debug("Corner point fixing",Math.abs(i.x-a.x),Math.abs(i.y-a.y));const b=5;s.x===l.x?m={x:h<0?l.x-b+f:l.x+b-f,y:p<0?l.y-f:l.y+f}:m={x:h<0?l.x-f:l.x+f,y:p<0?l.y-b+f:l.y+b-f}}else Fe.debug("Corner point skipping fixing",Math.abs(i.x-a.x),Math.abs(i.y-a.y));r.push(m,d)}else r.push(e[n]);return r},"fixCorners"),Qde=L((e,t,r)=>{const n=e-t-r,a=2,i=2,s=a+i,l=Math.floor(n/s),d=Array(l).fill(`${a} ${i}`).join(" ");return`0 ${t} ${d} ${r}`},"generateDashArray"),Kde=L(function(e,t,r,n,a,i,s,l=!1){const{handDrawnSeed:d}=Br();let h=t.points,p=!1;const f=a;var m=i;const b=[];for(const N in t.cssCompiledStyles)vM(N)||b.push(t.cssCompiledStyles[N]);Fe.debug("UIO intersect check",t.points,m.x,f.x),m.intersect&&f.intersect&&!l&&(h=h.slice(1,t.points.length-1),h.unshift(f.intersect(h[0])),Fe.debug("Last point UIO",t.start,"-->",t.end,h[h.length-1],m,m.intersect(h[h.length-1])),h.push(m.intersect(h[h.length-1])));const x=btoa(JSON.stringify(h));t.toCluster&&(Fe.info("to cluster abc88",r.get(t.toCluster)),h=pN(t.points,r.get(t.toCluster).node),p=!0),t.fromCluster&&(Fe.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(h,null,2)),h=pN(h.reverse(),r.get(t.fromCluster).node).reverse(),p=!0);let v=h.filter(N=>!Number.isNaN(N.y));v=Yde(v);let T=bm;switch(T=t0,t.curve){case"linear":T=t0;break;case"basis":T=bm;break;case"cardinal":T=kI;break;case"bumpX":T=xI;break;case"bumpY":T=vI;break;case"catmullRom":T=CI;break;case"monotoneX":T=RI;break;case"monotoneY":T=II;break;case"natural":T=MI;break;case"step":T=OI;break;case"stepAfter":T=BI;break;case"stepBefore":T=jI;break;default:T=bm}const{x:k,y:C}=Yse(t),A=Pie().x(k).y(C).curve(T);let D;switch(t.thickness){case"normal":D="edge-thickness-normal";break;case"thick":D="edge-thickness-thick";break;case"invisible":D="edge-thickness-invisible";break;default:D="edge-thickness-normal"}switch(t.pattern){case"solid":D+=" edge-pattern-solid";break;case"dotted":D+=" edge-pattern-dotted";break;case"dashed":D+=" edge-pattern-dashed";break;default:D+=" edge-pattern-solid"}let B,R=t.curve==="rounded"?H4(G4(v,t),5):A(v);const M=Array.isArray(t.style)?t.style:[t.style];let $=M.find(N=>N?.startsWith("stroke:")),W=!1;if(t.look==="handDrawn"){const N=mt.svg(e);Object.assign([],v);const U=N.path(R,{roughness:.3,seed:d});D+=" transition",B=Cr(U).select("path").attr("id",t.id).attr("class"," "+D+(t.classes?" "+t.classes:"")).attr("style",M?M.reduce((K,Q)=>K+";"+Q,""):"");let j=B.attr("d");B.attr("d",j),e.node().appendChild(B.node())}else{const N=b.join(";"),U=M?M.reduce((H,I)=>H+I+";",""):"";let j="";t.animate&&(j=" edge-animation-fast"),t.animation&&(j=" edge-animation-"+t.animation);const K=(N?N+";"+U+";":U)+";"+(M?M.reduce((H,I)=>H+";"+I,""):"");B=e.append("path").attr("d",R).attr("id",t.id).attr("class"," "+D+(t.classes?" "+t.classes:"")+(j??"")).attr("style",K),$=K.match(/stroke:([^;]+)/)?.[1],W=t.animate===!0||!!t.animation||N.includes("animation");const Q=B.node(),ie=typeof Q.getTotalLength=="function"?Q.getTotalLength():0,G=PA[t.arrowTypeStart]||0,F=PA[t.arrowTypeEnd]||0;if(t.look==="neo"&&!W){const I=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?Qde(ie,G,F):`0 ${G} ${ie-G-F} ${F}`}; stroke-dashoffset: 0;`;B.attr("style",I+B.attr("style"))}}B.attr("data-edge",!0),B.attr("data-et","edge"),B.attr("data-id",t.id),B.attr("data-points",x),t.showPoints&&v.forEach(N=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",N.x).attr("cy",N.y)});let O="";(Br().flowchart.arrowMarkerAbsolute||Br().state.arrowMarkerAbsolute)&&(O=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,O=O.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),Fe.info("arrowTypeStart",t.arrowTypeStart),Fe.info("arrowTypeEnd",t.arrowTypeEnd),$de(B,t,O,s,n,$);const Y=Math.floor(h.length/2),X=h[Y];vs.isLabelCoordinateInPath(X,B.attr("d"))||(p=!0);let q={};return p&&(q.updatedPath=h),q.originalPath=t.points,q},"insertEdge");function H4(e,t){if(e.length<2)return"";let r="";const n=e.length,a=1e-5;for(let i=0;i<n;i++){const s=e[i],l=e[i-1],d=e[i+1];if(i===0)r+=`M${s.x},${s.y}`;else if(i===n-1)r+=`L${s.x},${s.y}`;else{const h=s.x-l.x,p=s.y-l.y,f=d.x-s.x,m=d.y-s.y,b=Math.hypot(h,p),x=Math.hypot(f,m);if(b<a||x<a){r+=`L${s.x},${s.y}`;continue}const v=h/b,T=p/b,k=f/x,C=m/x,A=v*k+T*C,D=Math.max(-1,Math.min(1,A)),B=Math.acos(D);if(B<a||Math.abs(Math.PI-B)<a){r+=`L${s.x},${s.y}`;continue}const R=Math.min(t/Math.sin(B/2),b/2,x/2),M=s.x-v*R,$=s.y-T*R,W=s.x+k*R,O=s.y+C*R;r+=`L${M},${$}`,r+=`Q${s.x},${s.y} ${W},${O}`}}return r}L(H4,"generateRoundedPath");function dw(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,n=t.y-e.y;return{angle:Math.atan2(n,r),deltaX:r,deltaY:n}}L(dw,"calculateDeltaAndAngle");function G4(e,t){const r=e.map(a=>({...a}));if(e.length>=2&&Ca[t.arrowTypeStart]){const a=Ca[t.arrowTypeStart],i=e[0],s=e[1],{angle:l}=dw(i,s),d=a*Math.cos(l),h=a*Math.sin(l);r[0].x=i.x+d,r[0].y=i.y+h}const n=e.length;if(n>=2&&Ca[t.arrowTypeEnd]){const a=Ca[t.arrowTypeEnd],i=e[n-1],s=e[n-2],{angle:l}=dw(s,i),d=a*Math.cos(l),h=a*Math.sin(l);r[n-1].x=i.x-d,r[n-1].y=i.y-h}return r}L(G4,"applyMarkerOffsetsToPoints");var Xde=L((e,t,r,n)=>{t.forEach(a=>{phe[a](e,r,n)})},"insertMarkers"),Jde=L((e,t,r)=>{Fe.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),Zde=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),ehe=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),the=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),rhe=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),nhe=L((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),ahe=L((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ihe=L((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),she=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),ohe=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),lhe=L((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),che=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),uhe=L((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),dhe=L((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),hhe=L((e,t,r)=>{const n=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),phe={extension:Jde,composition:Zde,aggregation:ehe,dependency:the,lollipop:rhe,point:nhe,circle:ahe,cross:ihe,barb:she,only_one:ohe,zero_or_one:lhe,one_or_more:che,zero_or_more:uhe,requirement_arrow:dhe,requirement_contains:hhe},ghe=Xde,fhe={common:Ad,getConfig:Na,insertCluster:Tde,insertEdge:Kde,insertEdgeLabel:Hde,insertMarkers:ghe,insertNode:$4,interpolateToCurve:MS,labelHelper:Bt,log:Fe,positionEdgeLabel:Gde},Gp={},W4=L(e=>{for(const t of e)Gp[t.name]=t},"registerLayoutLoaders"),mhe=L(()=>{W4([{name:"dagre",loader:L(async()=>await _t(()=>import("./dagre-6UL2VRFP-CHjzgt-g.js"),__vite__mapDeps([5,6,7,8,9,10])),"loader")},{name:"cose-bilkent",loader:L(async()=>await _t(()=>import("./cose-bilkent-S5V4N54A-CskLClnS.js"),__vite__mapDeps([11,12])),"loader")}])},"registerDefaultLayoutLoaders");mhe();var tye=L(async(e,t)=>{if(!(e.layoutAlgorithm in Gp))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=Gp[e.layoutAlgorithm];return(await r.loader()).render(e,t,fhe,{algorithm:r.algorithm})},"render"),rye=L((e="",{fallback:t="dagre"}={})=>{if(e in Gp)return e;if(t in Gp)return Fe.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),V4="comm",Y4="rule",Q4="decl",yhe="@import",bhe="@namespace",xhe="@keyframes",vhe="@layer",K4=Math.abs,tT=String.fromCharCode;function X4(e){return e.trim()}function Tm(e,t,r){return e.replace(t,r)}function whe(e,t,r){return e.indexOf(t,r)}function Ku(e,t){return e.charCodeAt(t)|0}function gd(e,t,r){return e.slice(t,r)}function $s(e){return e.length}function She(e){return e.length}function Zf(e,t){return t.push(e),e}var fy=1,fd=1,J4=0,ts=0,qn=0,Id="";function rT(e,t,r,n,a,i,s,l){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:fy,column:fd,length:s,return:"",siblings:l}}function The(){return qn}function khe(){return qn=ts>0?Ku(Id,--ts):0,fd--,qn===10&&(fd=1,fy--),qn}function Ts(){return qn=ts<J4?Ku(Id,ts++):0,fd++,qn===10&&(fd=1,fy++),qn}function wl(){return Ku(Id,ts)}function km(){return ts}function my(e,t){return gd(Id,e,t)}function Wp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ehe(e){return fy=fd=1,J4=$s(Id=e),ts=0,[]}function Che(e){return Id="",e}function Tv(e){return X4(my(ts-1,hw(e===91?e+2:e===40?e+1:e)))}function _he(e){for(;(qn=wl())&&qn<33;)Ts();return Wp(e)>2||Wp(qn)>3?"":" "}function Ahe(e,t){for(;--t&&Ts()&&!(qn<48||qn>102||qn>57&&qn<65||qn>70&&qn<97););return my(e,km()+(t<6&&wl()==32&&Ts()==32))}function hw(e){for(;Ts();)switch(qn){case e:return ts;case 34:case 39:e!==34&&e!==39&&hw(qn);break;case 40:e===41&&hw(e);break;case 92:Ts();break}return ts}function Nhe(e,t){for(;Ts()&&e+qn!==57;)if(e+qn===84&&wl()===47)break;return"/*"+my(t,ts-1)+"*"+tT(e===47?e:Ts())}function Lhe(e){for(;!Wp(wl());)Ts();return my(e,ts)}function Phe(e){return Che(Em("",null,null,null,[""],e=Ehe(e),0,[0],e))}function Em(e,t,r,n,a,i,s,l,d){for(var h=0,p=0,f=s,m=0,b=0,x=0,v=1,T=1,k=1,C=0,A="",D=a,B=i,R=n,M=A;T;)switch(x=C,C=Ts()){case 40:if(x!=108&&Ku(M,f-1)==58){whe(M+=Tm(Tv(C),"&","&\f"),"&\f",K4(h?l[h-1]:0))!=-1&&(k=-1);break}case 34:case 39:case 91:M+=Tv(C);break;case 9:case 10:case 13:case 32:M+=_he(x);break;case 92:M+=Ahe(km()-1,7);continue;case 47:switch(wl()){case 42:case 47:Zf(Rhe(Nhe(Ts(),km()),t,r,d),d),(Wp(x||1)==5||Wp(wl()||1)==5)&&$s(M)&&gd(M,-1,void 0)!==" "&&(M+=" ");break;default:M+="/"}break;case 123*v:l[h++]=$s(M)*k;case 125*v:case 59:case 0:switch(C){case 0:case 125:T=0;case 59+p:k==-1&&(M=Tm(M,/\f/g,"")),b>0&&($s(M)-f||v===0&&x===47)&&Zf(b>32?mN(M+";",n,r,f-1,d):mN(Tm(M," ","")+";",n,r,f-2,d),d);break;case 59:M+=";";default:if(Zf(R=fN(M,t,r,h,p,a,l,A,D=[],B=[],f,i),i),C===123)if(p===0)Em(M,t,R,R,D,i,f,l,B);else{switch(m){case 99:if(Ku(M,3)===110)break;case 108:if(Ku(M,2)===97)break;default:p=0;case 100:case 109:case 115:}p?Em(e,R,R,n&&Zf(fN(e,R,R,0,0,a,l,A,a,D=[],f,B),B),a,B,f,l,n?D:B):Em(M,R,R,R,[""],B,0,l,B)}}h=p=b=0,v=k=1,A=M="",f=s;break;case 58:f=1+$s(M),b=x;default:if(v<1){if(C==123)--v;else if(C==125&&v++==0&&khe()==125)continue}switch(M+=tT(C),C*v){case 38:k=p>0?1:(M+="\f",-1);break;case 44:l[h++]=($s(M)-1)*k,k=1;break;case 64:wl()===45&&(M+=Tv(Ts())),m=wl(),p=f=$s(A=M+=Lhe(km())),C++;break;case 45:x===45&&$s(M)==2&&(v=0)}}return i}function fN(e,t,r,n,a,i,s,l,d,h,p,f){for(var m=a-1,b=a===0?i:[""],x=She(b),v=0,T=0,k=0;v<n;++v)for(var C=0,A=gd(e,m+1,m=K4(T=s[v])),D=e;C<x;++C)(D=X4(T>0?b[C]+" "+A:Tm(A,/&\f/g,b[C])))&&(d[k++]=D);return rT(e,t,r,a===0?Y4:l,d,h,p,f)}function Rhe(e,t,r,n){return rT(e,t,r,V4,tT(The()),gd(e,2,-2),0,n)}function mN(e,t,r,n,a){return rT(e,t,r,Q4,gd(e,0,n),gd(e,n+1,-1),n,a)}function pw(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function Ihe(e,t,r,n){switch(e.type){case vhe:if(e.children.length)break;case yhe:case bhe:case Q4:return e.return=e.return||e.value;case V4:return"";case xhe:return e.return=e.value+"{"+pw(e.children,n)+"}";case Y4:if(!$s(e.value=e.props.join(",")))return""}return $s(r=pw(e.children,n))?e.return=e.value+"{"+r+"}":""}var Dhe=kM(Object.keys,Object),Mhe=Object.prototype,Ohe=Mhe.hasOwnProperty;function jhe(e){if(!iy(e))return Dhe(e);var t=[];for(var r in Object(e))Ohe.call(e,r)&&r!="constructor"&&t.push(r);return t}var gw=$c(eo,"DataView"),fw=$c(eo,"Promise"),mw=$c(eo,"Set"),yw=$c(eo,"WeakMap"),yN="[object Map]",Bhe="[object Object]",bN="[object Promise]",xN="[object Set]",vN="[object WeakMap]",wN="[object DataView]",Fhe=Uc(gw),zhe=Uc(qp),Uhe=Uc(fw),$he=Uc(mw),qhe=Uc(yw),oc=Ld;(gw&&oc(new gw(new ArrayBuffer(1)))!=wN||qp&&oc(new qp)!=yN||fw&&oc(fw.resolve())!=bN||mw&&oc(new mw)!=xN||yw&&oc(new yw)!=vN)&&(oc=function(e){var t=Ld(e),r=t==Bhe?e.constructor:void 0,n=r?Uc(r):"";if(n)switch(n){case Fhe:return wN;case zhe:return yN;case Uhe:return bN;case $he:return xN;case qhe:return vN}return t});var Hhe="[object Map]",Ghe="[object Set]",Whe=Object.prototype,Vhe=Whe.hasOwnProperty;function SN(e){if(e==null)return!0;if(sy(e)&&(g0(e)||typeof e=="string"||typeof e.splice=="function"||IS(e)||DS(e)||p0(e)))return!e.length;var t=oc(e);if(t==Hhe||t==Ghe)return!e.size;if(iy(e))return!jhe(e).length;for(var r in e)if(Vhe.call(e,r))return!1;return!0}var Z4="c4",Yhe=L(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),Qhe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./c4Diagram-YG6GDRKO-BZnC34oO.js");return{diagram:t}},__vite__mapDeps([13,14]));return{id:Z4,diagram:e}},"loader"),Khe={id:Z4,detector:Yhe,loader:Qhe},Xhe=Khe,e6="flowchart",Jhe=L((e,t)=>t?.flowchart?.defaultRenderer==="dagre-wrapper"||t?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(e),"detector"),Zhe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-D6UHMCC7.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:e6,diagram:e}},"loader"),epe={id:e6,detector:Jhe,loader:Zhe},tpe=epe,t6="flowchart-v2",rpe=L((e,t)=>t?.flowchart?.defaultRenderer==="dagre-d3"?!1:(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)),"detector"),npe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-D6UHMCC7.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:t6,diagram:e}},"loader"),ape={id:t6,detector:rpe,loader:npe},ipe=ape,r6="er",spe=L(e=>/^\s*erDiagram/.test(e),"detector"),ope=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./erDiagram-Q2GNP2WA-Ch9iT-P1.js");return{diagram:t}},__vite__mapDeps([20,17,18,19]));return{id:r6,diagram:e}},"loader"),lpe={id:r6,detector:spe,loader:ope},cpe=lpe,n6="gitGraph",upe=L(e=>/^\s*gitGraph/.test(e),"detector"),dpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./gitGraphDiagram-NY62KEGX-kEt8eywY.js");return{diagram:t}},__vite__mapDeps([21,22,23,24,7,9,10]));return{id:n6,diagram:e}},"loader"),hpe={id:n6,detector:upe,loader:dpe},ppe=hpe,a6="gantt",gpe=L(e=>/^\s*gantt/.test(e),"detector"),fpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./ganttDiagram-LVOFAZNH-C4U_ZloZ.js");return{diagram:t}},__vite__mapDeps([25,26,27,28]));return{id:a6,diagram:e}},"loader"),mpe={id:a6,detector:gpe,loader:fpe},ype=mpe,i6="info",bpe=L(e=>/^\s*info/.test(e),"detector"),xpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./infoDiagram-F6ZHWCRC-DhK9c60k.js");return{diagram:t}},__vite__mapDeps([29,24,7,9,10]));return{id:i6,diagram:e}},"loader"),vpe={id:i6,detector:bpe,loader:xpe},s6="pie",wpe=L(e=>/^\s*pie/.test(e),"detector"),Spe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./pieDiagram-ADFJNKIX-DiHoJ-iu.js");return{diagram:t}},__vite__mapDeps([30,22,24,7,9,10,31,32,27]));return{id:s6,diagram:e}},"loader"),Tpe={id:s6,detector:wpe,loader:Spe},o6="quadrantChart",kpe=L(e=>/^\s*quadrantChart/.test(e),"detector"),Epe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./quadrantDiagram-AYHSOK5B-DDc8_8Vt.js");return{diagram:t}},__vite__mapDeps([33,26,27,28]));return{id:o6,diagram:e}},"loader"),Cpe={id:o6,detector:kpe,loader:Epe},_pe=Cpe,l6="xychart",Ape=L(e=>/^\s*xychart(-beta)?/.test(e),"detector"),Npe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./xychartDiagram-PRI3JC2R-CtJA_IZ1.js");return{diagram:t}},__vite__mapDeps([34,27,32,26,28]));return{id:l6,diagram:e}},"loader"),Lpe={id:l6,detector:Ape,loader:Npe},Ppe=Lpe,c6="requirement",Rpe=L(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Ipe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./requirementDiagram-UZGBJVZJ-ZsguhxTY.js");return{diagram:t}},__vite__mapDeps([35,17,18]));return{id:c6,diagram:e}},"loader"),Dpe={id:c6,detector:Rpe,loader:Ipe},Mpe=Dpe,u6="sequence",Ope=L(e=>/^\s*sequenceDiagram/.test(e),"detector"),jpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./sequenceDiagram-WL72ISMW-BvJDy1pU.js");return{diagram:t}},__vite__mapDeps([36,14,23]));return{id:u6,diagram:e}},"loader"),Bpe={id:u6,detector:Ope,loader:jpe},Fpe=Bpe,d6="class",zpe=L((e,t)=>t?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e),"detector"),Upe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./classDiagram-2ON5EDUG-D-txqs81.js");return{diagram:t}},__vite__mapDeps([37,38,16,17,18]));return{id:d6,diagram:e}},"loader"),$pe={id:d6,detector:zpe,loader:Upe},qpe=$pe,h6="classDiagram",Hpe=L((e,t)=>/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e),"detector"),Gpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./classDiagram-v2-WZHVMYZB-D-txqs81.js");return{diagram:t}},__vite__mapDeps([39,38,16,17,18]));return{id:h6,diagram:e}},"loader"),Wpe={id:h6,detector:Hpe,loader:Gpe},Vpe=Wpe,p6="state",Ype=L((e,t)=>t?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e),"detector"),Qpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./stateDiagram-FKZM4ZOC-ByouOaG_.js");return{diagram:t}},__vite__mapDeps([40,41,17,18,6,7,8,9]));return{id:p6,diagram:e}},"loader"),Kpe={id:p6,detector:Ype,loader:Qpe},Xpe=Kpe,g6="stateDiagram",Jpe=L((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),Zpe=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./stateDiagram-v2-4FDKWEC3-C0ace7Ln.js");return{diagram:t}},__vite__mapDeps([42,41,17,18]));return{id:g6,diagram:e}},"loader"),ege={id:g6,detector:Jpe,loader:Zpe},tge=ege,f6="journey",rge=L(e=>/^\s*journey/.test(e),"detector"),nge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./journeyDiagram-XKPGCS4Q-D1BseSOJ.js");return{diagram:t}},__vite__mapDeps([43,14,16,31]));return{id:f6,diagram:e}},"loader"),age={id:f6,detector:rge,loader:nge},ige=age,sge=L((e,t,r)=>{Fe.debug(`rendering svg for syntax error
`);const n=zie(t),a=n.append("g");n.attr("viewBox","0 0 2412 512"),$R(n,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),m6={draw:sge},oge=m6,lge={db:{},renderer:m6,parser:{parse:L(()=>{},"parse")}},cge=lge,y6="flowchart-elk",uge=L((e,t={})=>/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk"?(t.layout="elk",!0):!1,"detector"),dge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./flowDiagram-NV44I4VS-D6UHMCC7.js");return{diagram:t}},__vite__mapDeps([15,16,17,18,19]));return{id:y6,diagram:e}},"loader"),hge={id:y6,detector:uge,loader:dge},pge=hge,b6="timeline",gge=L(e=>/^\s*timeline/.test(e),"detector"),fge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./timeline-definition-IT6M3QCI-DWMPvof0.js");return{diagram:t}},__vite__mapDeps([44,31]));return{id:b6,diagram:e}},"loader"),mge={id:b6,detector:gge,loader:fge},yge=mge,x6="mindmap",bge=L(e=>/^\s*mindmap/.test(e),"detector"),xge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./mindmap-definition-VGOIOE7T-B0TrFK6C.js");return{diagram:t}},__vite__mapDeps([45,17,18]));return{id:x6,diagram:e}},"loader"),vge={id:x6,detector:bge,loader:xge},wge=vge,v6="kanban",Sge=L(e=>/^\s*kanban/.test(e),"detector"),Tge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./kanban-definition-3W4ZIXB7-ChJBv5cP.js");return{diagram:t}},__vite__mapDeps([46,16]));return{id:v6,diagram:e}},"loader"),kge={id:v6,detector:Sge,loader:Tge},Ege=kge,w6="sankey",Cge=L(e=>/^\s*sankey(-beta)?/.test(e),"detector"),_ge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./sankeyDiagram-TZEHDZUN-DWUiV8Sb.js");return{diagram:t}},__vite__mapDeps([47,32,27]));return{id:w6,diagram:e}},"loader"),Age={id:w6,detector:Cge,loader:_ge},Nge=Age,S6="packet",Lge=L(e=>/^\s*packet(-beta)?/.test(e),"detector"),Pge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./diagram-S2PKOQOG-BYLphdmt.js");return{diagram:t}},__vite__mapDeps([48,22,24,7,9,10]));return{id:S6,diagram:e}},"loader"),Rge={id:S6,detector:Lge,loader:Pge},T6="radar",Ige=L(e=>/^\s*radar-beta/.test(e),"detector"),Dge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./diagram-QEK2KX5R-Bm20IcNA.js");return{diagram:t}},__vite__mapDeps([49,22,24,7,9,10]));return{id:T6,diagram:e}},"loader"),Mge={id:T6,detector:Ige,loader:Dge},k6="block",Oge=L(e=>/^\s*block(-beta)?/.test(e),"detector"),jge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./blockDiagram-VD42YOAC-BAgkimde.js");return{diagram:t}},__vite__mapDeps([50,16,10,7,6,19]));return{id:k6,diagram:e}},"loader"),Bge={id:k6,detector:Oge,loader:jge},Fge=Bge,E6="architecture",zge=L(e=>/^\s*architecture/.test(e),"detector"),Uge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./architectureDiagram-VXUJARFQ-B9WRUDUE.js");return{diagram:t}},__vite__mapDeps([51,22,24,7,9,10,12]));return{id:E6,diagram:e}},"loader"),$ge={id:E6,detector:zge,loader:Uge},qge=$ge,C6="treemap",Hge=L(e=>/^\s*treemap/.test(e),"detector"),Gge=L(async()=>{const{diagram:e}=await _t(async()=>{const{diagram:t}=await import("./diagram-PSM6KHXK-BaPFCUIq.js");return{diagram:t}},__vite__mapDeps([52,18,22,24,7,9,10,28,32,27]));return{id:C6,diagram:e}},"loader"),Wge={id:C6,detector:Hge,loader:Gge},TN=!1,yy=L(()=>{TN||(TN=!0,Ym("error",cge,e=>e.toLowerCase().trim()==="error"),Ym("---",{db:{clear:L(()=>{},"clear")},styles:{},renderer:{draw:L(()=>{},"draw")},parser:{parse:L(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:L(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),k1(pge,wge,qge),k1(Xhe,Ege,Vpe,qpe,cpe,ype,vpe,Tpe,Mpe,Fpe,ipe,tpe,yge,ppe,tge,Xpe,ige,_pe,Nge,Rge,Ppe,Fge,Mge,Wge))},"addDiagrams"),Vge=L(async()=>{Fe.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(kc).map(async([r,{detector:n,loader:a}])=>{if(a)try{A1(r)}catch{try{const{diagram:i,id:s}=await a();Ym(s,i,n)}catch(i){throw Fe.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete kc[r],i}}}))).filter(r=>r.status==="rejected");if(t.length>0){Fe.error(`Failed to load ${t.length} external diagrams`);for(const r of t)Fe.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),Yge="graphics-document document";function _6(e,t){e.attr("role",Yge),t!==""&&e.attr("aria-roledescription",t)}L(_6,"setA11yDiagramInfo");function A6(e,t,r,n){if(e.insert!==void 0){if(r){const a=`chart-desc-${n}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${n}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}L(A6,"addSVGa11yTitleDescription");var bc,bw=(bc=class{constructor(t,r,n,a,i){this.type=t,this.text=r,this.db=n,this.parser=a,this.renderer=i}static async fromText(t,r={}){const n=Na(),a=aS(t,n);t=Wce(t)+`
`;try{A1(a)}catch{const h=mte(a);if(!h)throw new LR(`Diagram ${a} not found.`);const{id:p,diagram:f}=await h();Ym(p,f)}const{db:i,parser:s,renderer:l,init:d}=A1(a);return s.parser&&(s.parser.yy=i),i.clear?.(),d?.(n),r.title&&i.setDiagramTitle?.(r.title),await s.parse(t),new bc(a,t,i,s,l)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},L(bc,"Diagram"),bc),kN=[],Qge=L(()=>{kN.forEach(e=>{e()}),kN=[]},"attachFunctions"),Kge=L(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function N6(e){const t=e.match(NR);if(!t)return{text:e,metadata:{}};let r=Vse(t[1],{schema:Wse})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}L(N6,"extractFrontMatter");var Xge=L(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),Jge=L(e=>{const{text:t,metadata:r}=N6(e),{displayMode:n,title:a,config:i={}}=r;return n&&(i.gantt||(i.gantt={}),i.gantt.displayMode=n),{title:a,config:i,text:t}},"processFrontmatter"),Zge=L(e=>{const t=vs.detectInit(e)??{},r=vs.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>n==="wrap"):r?.type==="wrap"&&(t.wrap=!0),{text:Ice(e),directive:t}},"processDirectives");function nT(e){const t=Xge(e),r=Jge(t),n=Zge(r.text),a=zS(r.config,n.directive);return e=Kge(n.text),{code:e,title:r.title,config:a}}L(nT,"preprocessDiagram");function L6(e){const t=new TextEncoder().encode(e),r=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(r)}L(L6,"toBase64");var efe=5e4,tfe="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",rfe="sandbox",nfe="loose",afe="http://www.w3.org/2000/svg",ife="http://www.w3.org/1999/xlink",sfe="http://www.w3.org/1999/xhtml",ofe="100%",lfe="100%",cfe="border:0;margin:0;",ufe="margin:0",dfe="allow-top-navigation-by-user-activation allow-popups",hfe='The "iframe" tag is not supported by your browser.',pfe=["foreignobject"],gfe=["dominant-baseline"];function aT(e){const t=nT(e);return Wm(),Rte(t.config??{}),t}L(aT,"processAndSetConfigs");async function P6(e,t){yy();try{const{code:r,config:n}=aT(e);return{diagramType:(await I6(r)).type,config:n}}catch(r){if(t?.suppressErrors)return!1;throw r}}L(P6,"parse");var EN=L((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),ffe=L((e,t=new Map)=>{let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const s=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{SN(l.styles)||s.forEach(d=>{r+=EN(l.id,d,l.styles)}),SN(l.textStyles)||(r+=EN(l.id,"tspan",(l?.textStyles||[]).map(d=>d.replace("color","fill"))))})}return r},"createCssStyles"),mfe=L((e,t,r,n)=>{const a=ffe(e,r),i=Jte(t,a,e.themeVariables);return pw(Phe(`${n}{${i}}`),Ihe)},"createUserStyles"),yfe=L((e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=qc(n),n=n.replace(/<br>/g,"<br/>"),n},"cleanUpSvgCode"),bfe=L((e="",t)=>{const r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":lfe,n=L6(`<body style="${ufe}">${e}</body>`);return`<iframe style="width:${ofe};height:${r};${cfe}" src="data:text/html;charset=UTF-8;base64,${n}" sandbox="${dfe}">
  ${hfe}
</iframe>`},"putIntoIFrame"),CN=L((e,t,r,n,a)=>{const i=e.append("div");i.attr("id",r),n&&i.attr("style",n);const s=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",afe);return a&&s.attr("xmlns:xlink",a),s.append("g"),e},"appendDivSvgG");function xw(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}L(xw,"sandboxedIframe");var xfe=L((e,t,r,n)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(n)?.remove()},"removeExistingElements"),vfe=L(async function(e,t,r){yy();const n=aT(t);t=n.code;const a=Na();Fe.debug(a),t.length>(a?.maxTextSize??efe)&&(t=tfe);const i="#"+e,s="i"+e,l="#"+s,d="d"+e,h="#"+d,p=L(()=>{const q=Cr(m?l:h).node();q&&"remove"in q&&q.remove()},"removeTempElements");let f=Cr("body");const m=a.securityLevel===rfe,b=a.securityLevel===nfe,x=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),m){const X=xw(Cr(r),s);f=Cr(X.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Cr(r);CN(f,e,d,`font-family: ${x}`,ife)}else{if(xfe(document,e,d,s),m){const X=xw(Cr("body"),s);f=Cr(X.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=Cr("body");CN(f,e,d)}let v,T;try{v=await bw.fromText(t,{title:n.title})}catch(X){if(a.suppressErrorRendering)throw p(),X;v=await bw.fromText("error"),T=X}const k=f.select(h).node(),C=v.type,A=k.firstChild,D=A.firstChild,B=v.renderer.getClasses?.(t,v),R=mfe(a,C,B,i),M=document.createElement("style");M.innerHTML=R,A.insertBefore(M,D);try{await v.renderer.draw(t,e,W_.version,v)}catch(X){throw a.suppressErrorRendering?p():oge.draw(t,e,W_.version),X}const $=f.select(`${h} svg`),W=v.db.getAccTitle?.(),O=v.db.getAccDescription?.();D6(C,$,W,O),f.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",sfe);let Y=f.select(h).node().innerHTML;if(Fe.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),Y=yfe(Y,m,Xn(a.arrowMarkerAbsolute)),m){const X=f.select(h+" svg").node();Y=bfe(Y,X)}else b||(Y=od.sanitize(Y,{ADD_TAGS:pfe,ADD_ATTR:gfe,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(Qge(),T)throw T;return p(),{diagramType:C,svg:Y,bindFunctions:v.db.bindFunctions}},"render");function R6(e={}){const t=Qn({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),Lte(t),t?.theme&&t.theme in Ao?t.themeVariables=Ao[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Ao.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?Nte(t):MR();nS(r.logLevel),yy()}L(R6,"initialize");var I6=L((e,t={})=>{const{code:r}=nT(e);return bw.fromText(r,t)},"getDiagramFromText");function D6(e,t,r,n){_6(t,e),A6(t,r,n,t.attr("id"))}L(D6,"addA11yInfo");var Lc=Object.freeze({render:vfe,parse:P6,getDiagramFromText:I6,initialize:R6,getConfig:Na,setConfig:OR,getSiteConfig:MR,updateSiteConfig:Pte,reset:L(()=>{Wm()},"reset"),globalReset:L(()=>{Wm(ld)},"globalReset"),defaultConfig:ld});nS(Na().logLevel);Wm(Na());var wfe=L((e,t,r)=>{Fe.warn(e),FS(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),M6=L(async function(e={querySelector:".mermaid"}){try{await Sfe(e)}catch(t){if(FS(t)&&Fe.error(t.str),Io.parseError&&Io.parseError(t),!e.suppressErrors)throw Fe.error("Use the suppressErrors option to suppress these errors"),t}},"run"),Sfe=L(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=Lc.getConfig();Fe.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");Fe.debug(`Found ${a.length} diagrams`),n?.startOnLoad!==void 0&&(Fe.debug("Start On Load: "+n?.startOnLoad),Lc.updateSiteConfig({startOnLoad:n?.startOnLoad}));const i=new vs.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let s;const l=[];for(const d of Array.from(a)){if(Fe.info("Rendering diagram: "+d.id),d.getAttribute("data-processed"))continue;d.setAttribute("data-processed","true");const h=`mermaid-${i.next()}`;s=d.innerHTML,s=rO(vs.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const p=vs.detectInit(s);p&&Fe.debug("Detected early reinit: ",p);try{const{svg:f,bindFunctions:m}=await F6(h,s,d);d.innerHTML=f,e&&await e(h),m&&m(d)}catch(f){wfe(f,l,Io.parseError)}}if(l.length>0)throw l[0]},"runThrowsErrors"),O6=L(function(e){Lc.initialize(e)},"initialize"),Tfe=L(async function(e,t,r){Fe.warn("mermaid.init is deprecated. Please use run instead."),e&&O6(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await M6(n)},"init"),kfe=L(async(e,{lazyLoad:t=!0}={})=>{yy(),k1(...e),t===!1&&await Vge()},"registerExternalDiagrams"),j6=L(function(){if(Io.startOnLoad){const{startOnLoad:e}=Lc.getConfig();e&&Io.run().catch(t=>Fe.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",j6,!1);var Efe=L(function(e){Io.parseError=e},"setParseErrorHandler"),E0=[],kv=!1,B6=L(async()=>{if(!kv){for(kv=!0;E0.length>0;){const e=E0.shift();if(e)try{await e()}catch(t){Fe.error("Error executing queue",t)}}kv=!1}},"executeQueue"),Cfe=L(async(e,t)=>new Promise((r,n)=>{const a=L(()=>new Promise((i,s)=>{Lc.parse(e,t).then(l=>{i(l),r(l)},l=>{Fe.error("Error parsing",l),Io.parseError?.(l),s(l),n(l)})}),"performCall");E0.push(a),B6().catch(n)}),"parse"),F6=L((e,t,r)=>new Promise((n,a)=>{const i=L(()=>new Promise((s,l)=>{Lc.render(e,t,r).then(d=>{s(d),n(d)},d=>{Fe.error("Error parsing",d),Io.parseError?.(d),l(d),a(d)})}),"performCall");E0.push(i),B6().catch(a)}),"render"),_fe=L(()=>Object.keys(kc).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),Io={startOnLoad:!0,mermaidAPI:Lc,parse:Cfe,render:F6,init:Tfe,run:M6,registerExternalDiagrams:kfe,registerLayoutLoaders:W4,initialize:O6,parseError:void 0,contentLoaded:j6,setParseErrorHandler:Efe,detectType:aS,registerIconPacks:Kue,getRegisteredDiagramsMetadata:_fe},_N=Io;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const md=({data:e,name:t,level:r=0,defaultExpanded:n=!0})=>{const[a,i]=_.useState(n),s=r*16;if(e==null)return u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsx("span",{className:"text-gray-500 dark:text-gray-500 italic",children:"null"})]});const l=typeof e;if(l==="string"||l==="number"||l==="boolean")return u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsx("span",{className:l==="string"?"text-green-600 dark:text-green-400":l==="number"?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400",children:l==="string"?`"${e}"`:String(e)})]});if(Array.isArray(e))return e.length===0?u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"[]"})]}):u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[u.jsxs("button",{onClick:()=>i(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"":""}),t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["[",e.length," ",e.length===1?"item":"items","]"]})]}),a&&u.jsx("div",{className:"ml-2",children:e.map((d,h)=>u.jsx(md,{data:d,name:String(h),level:r+1,defaultExpanded:r<1},h))})]});if(l==="object"){const d=Object.keys(e);return d.length===0?u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:"{}"})]}):u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[u.jsxs("button",{onClick:()=>i(!a),className:"text-left hover:bg-gray-100 dark:hover:bg-gray-800 px-1 rounded transition-colors",children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-500 mr-1",children:a?"":""}),t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsxs("span",{className:"text-gray-500 dark:text-gray-500",children:["{",d.length," ",d.length===1?"key":"keys","}"]})]}),a&&u.jsx("div",{className:"ml-2",children:d.map(h=>u.jsx(md,{data:e[h],name:h,level:r+1,defaultExpanded:r<1},h))})]})}return u.jsxs("div",{style:{marginLeft:`${s}px`},className:"font-mono text-sm",children:[t&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t,": "]}),u.jsx("span",{className:"text-gray-500 dark:text-gray-500",children:String(e)})]})},Ev=({content:e})=>{try{const t=JSON.parse(e);return u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:u.jsx(md,{data:t,defaultExpanded:!0})})}catch{return u.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto text-sm",children:e})}},em=({data:e,title:t})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(!1),s=p=>{if(typeof p=="string")try{const f=JSON.parse(p);return s(f)}catch{return p}else{if(Array.isArray(p))return p.map(f=>s(f));if(p!==null&&typeof p=="object"){const f={};for(const m in p)f[m]=s(p[m]);return f}}return p},l=s(e),d=()=>{navigator.clipboard.writeText(JSON.stringify(l,null,2)),n(!0),setTimeout(()=>n(!1),2e3)},h=()=>{i(!0)};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mt-3",children:u.jsxs("button",{onClick:h,className:"flex items-center justify-between w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t}),u.jsx("span",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium",children:" Click to View"})]})}),a&&u.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-4",onClick:()=>i(!1),children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl w-full h-full max-w-7xl max-h-[90vh] flex flex-col shadow-2xl",onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:r?" Copied!":" Copy All"}),u.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:" Close"})]})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 bg-gray-50 dark:bg-gray-950",children:u.jsx(md,{data:l,defaultExpanded:!0})})]})})]})};function Afe(e){switch(e.type){case"guardrail_input":return{label:"Guardrail Input",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"guardrail_output":return{label:"Guardrail Output",color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-700 dark:text-yellow-300",icon:""};case"image_generation":return{label:"Image Generation",color:"bg-pink-50 dark:bg-pink-900/20",border:"border-pink-300 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",icon:""};case"transcription":return{label:"Whisper Transcription",color:"bg-purple-50 dark:bg-purple-900/20",border:"border-purple-300 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",icon:""};case"embedding":return{label:"Embedding",color:"bg-indigo-50 dark:bg-indigo-900/20",border:"border-indigo-300 dark:border-indigo-700",text:"text-indigo-700 dark:text-indigo-300",icon:""};case"planning":return{label:"Planning",color:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-300 dark:border-blue-700",text:"text-blue-700 dark:text-blue-300",icon:""};case"assessment":return{label:"Self-Assessment",color:"bg-teal-50 dark:bg-teal-900/20",border:"border-teal-300 dark:border-teal-700",text:"text-teal-700 dark:text-teal-300",icon:""};default:return{label:"Chat",color:"bg-gray-50 dark:bg-gray-900/20",border:"border-gray-300 dark:border-gray-700",text:"text-gray-700 dark:text-gray-300",icon:""}}}const Nfe=({call:e,index:t})=>{const r=Afe(e),n=e.response?.usage?.prompt_tokens||0,a=e.response?.usage?.completion_tokens||0,i=e.response?.usage?.total_tokens||n+a,s=e.cost??0;return u.jsxs("div",{className:`border-2 ${r.border} ${r.color} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:r.icon}),u.jsxs("div",{children:[u.jsx("h3",{className:`font-bold text-lg ${r.text}`,children:r.label}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.model]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:`text-2xl font-bold ${s>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Pw(s)}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",t+1]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prompt Tokens"}),u.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completion Tokens"}),u.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Tokens"}),u.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"}),u.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.durationMs?`${(e.durationMs/1e3).toFixed(2)}s`:"N/A"})]})]}),u.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[e.success!==void 0&&u.jsx("span",{className:`px-2 py-1 rounded-full ${e.success?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:e.success?" Success":" Failed"}),e.httpStatus&&u.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:["HTTP ",e.httpStatus]})]}),u.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),u.jsxs("div",{className:"space-y-2",children:[e.request&&u.jsx(em,{data:e.request,title:" Request Body"}),e.response&&u.jsx(em,{data:e.response,title:" Response Body"}),e.httpHeaders&&u.jsx(em,{data:e.httpHeaders,title:" HTTP Headers"}),e.metadata&&u.jsx(em,{data:e.metadata,title:" Metadata"})]})]})};function z6({apiCalls:e,onClose:t}){const r=Jp(!0,t),[n,a]=_.useState(!1),{showSuccess:i}=Mc(),s=e.reduce((m,b)=>m+(b.response?.usage?.prompt_tokens||0),0),l=e.reduce((m,b)=>m+(b.response?.usage?.completion_tokens||0),0),d=s+l,h=e.reduce((m,b)=>m+(b.cost||0),0),p=e.reduce((m,b)=>m+(b.durationMs||0),0),f=()=>{const m=e.map((b,x)=>({callNumber:x+1,type:b.type||"chat",provider:b.provider,model:b.model,timestamp:b.timestamp,request:b.request,response:b.response,httpHeaders:b.httpHeaders,httpStatus:b.httpStatus,cost:b.cost,durationMs:b.durationMs,metadata:b.metadata}));navigator.clipboard.writeText(JSON.stringify(m,null,2)),a(!0),setTimeout(()=>a(!1),2e3),i(` Copied ${e.length} LLM API call${e.length!==1?"s":""} to clipboard`)};return u.jsx("div",{ref:r,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" LLM API Transparency"}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[e.length," API call",e.length!==1?"s":""]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2 shadow-sm hover:shadow-md",children:n?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Copied All!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Copy All JSON"})]})}),u.jsx("button",{onClick:t,className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200","aria-label":"Close",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:e.length===0?u.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"No API calls found."}):e.map((m,b)=>u.jsx(Nfe,{call:m,index:b},b))}),u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Grand Totals"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Prompt Tokens"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Completion Tokens"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Tokens"}),u.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.toLocaleString()})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-gray-200 dark:border-gray-700",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Duration"}),u.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(p/1e3).toFixed(2),"s"]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border-2 border-green-200 dark:border-green-700 bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-gray-800",children:[u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Total Cost"}),u.jsx("div",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:Pw(h)})]})]})]})]})})}const Lfe=({chart:e,description:t,onLlmApiCall:r})=>{const n=_.useRef(null),[a,i]=_.useState(null),[s,l]=_.useState(!1),[d,h]=_.useState([]),[p,f]=_.useState(e),[m,b]=_.useState(!1),[x,v]=_.useState(!1),[T,k]=_.useState(!1),{accessToken:C}=rs(),{settings:A}=Al(),{addCost:D}=I0(),{addSnippet:B}=R0(),{showSuccess:R,showError:M}=Mc(),$=async()=>{if(n.current)try{const X=n.current.querySelector("svg");if(!X){M("Chart not found");return}const q=document.createElement("canvas"),N=new XMLSerializer().serializeToString(X),U=new Image,j=new Blob([N],{type:"image/svg+xml;charset=utf-8"}),K=URL.createObjectURL(j);U.onload=async()=>{q.width=X.clientWidth||800,q.height=X.clientHeight||600;const Q=q.getContext("2d");Q&&(Q.fillStyle="white",Q.fillRect(0,0,q.width,q.height),Q.drawImage(U,0,0),q.toBlob(async ie=>{if(ie)try{await navigator.clipboard.write([new ClipboardItem({"image/png":ie})]),k(!0),setTimeout(()=>k(!1),2e3),R("Chart image copied to clipboard!")}catch(G){console.error("Failed to copy to clipboard:",G),M("Failed to copy image to clipboard")}})),URL.revokeObjectURL(K)},U.onerror=()=>{M("Failed to process chart image"),URL.revokeObjectURL(K)},U.src=K}catch(X){console.error("Failed to copy image:",X),M("Failed to copy chart image")}},W=async()=>{if(n.current)try{const X=n.current.querySelector("svg");if(!X){M("Chart not found");return}const q=t||"Chart diagram",N=document.createElement("canvas"),U=new XMLSerializer().serializeToString(X),j=new Image,K=new Blob([U],{type:"image/svg+xml;charset=utf-8"}),Q=URL.createObjectURL(K);j.onload=async()=>{try{N.width=X.clientWidth||800,N.height=X.clientHeight||600;const ie=N.getContext("2d");if(ie){ie.fillStyle="white",ie.fillRect(0,0,N.width,N.height),ie.drawImage(j,0,0);const F=`<img src="${N.toDataURL("image/png")}" alt="${q}" class="max-w-full h-auto rounded-lg" />`;await B(F,"tool",`Chart: ${q}`),R("Chart saved to Swag!")}URL.revokeObjectURL(Q)}catch(ie){console.error("Failed to convert to PNG:",ie),M("Failed to save chart to Swag"),URL.revokeObjectURL(Q)}},j.onerror=()=>{M("Failed to process chart image"),URL.revokeObjectURL(Q)},j.src=Q}catch(X){console.error("Failed to grab image:",X),M("Failed to save chart to Swag")}};_.useEffect(()=>{_N.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit",logLevel:"error"})},[]),_.useEffect(()=>{(async()=>{if(n.current)try{i(null),n.current.innerHTML="";const q=`mermaid-${Math.random().toString(36).substr(2,9)}`,{svg:N}=await _N.render(q,p);if(!n.current){console.warn(" MermaidChart container ref is null - component may have unmounted");return}n.current.innerHTML=N,document.querySelectorAll('div[id^="d"]').forEach(j=>{const K=j.textContent||"";(K.includes("Syntax error in text")||K.includes("mermaid version"))&&j.remove()}),console.log(" Mermaid chart rendered successfully")}catch(q){console.error(" Mermaid rendering error:",q);const N=q.message||String(q);i(N),document.querySelectorAll('div[id^="d"]').forEach(j=>{const K=j.textContent||"";(K.includes("Syntax error in text")||K.includes("mermaid version"))&&j.remove()}),d.length<3&&await O(N)}})()},[p]);const O=async X=>{if(!C){console.warn("No access token available for chart fix");return}if(d.length>=3){console.log("Max fix attempts (3) reached");return}l(!0);const q=d.length+1;console.log(` Attempting to fix chart (attempt ${q}/3)`);try{const{getCachedApiBase:N,resetApiBase:U}=await _t(async()=>{const{getCachedApiBase:G,resetApiBase:F}=await Promise.resolve().then(()=>jz);return{getCachedApiBase:G,resetApiBase:F}},void 0);U();const j=await N(),K=await fetch(`${j}/fix-mermaid-chart`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({chart:p,error:X,providers:A.providers})});if(!K.ok)throw new Error(`Fix request failed: ${K.statusText}`);const Q=await K.json();if(Q.error)throw new Error(Q.error);const ie={attemptNumber:q,error:X,fixedChart:Q.fixedChart,usage:Q.usage,llmApiCall:Q.llmApiCall};h(G=>[...G,ie]),Q.usage&&D&&D(Q.usage.cost||0),r&&Q.usage&&r({model:Q.usage.model,provider:Q.usage.provider,prompt_tokens:Q.usage.prompt_tokens,completion_tokens:Q.usage.completion_tokens,total_tokens:Q.usage.total_tokens,cost:Q.usage.cost,duration_ms:Q.usage.duration_ms,purpose:`chart-fix-attempt-${q}`}),console.log(` Chart fix attempt ${q} successful`),console.log(` Cost: $${Q.usage?.cost?.toFixed(6)||"0.000000"}`),console.log(` Tokens: ${Q.usage?.total_tokens||0}`),f(Q.fixedChart),i(null)}catch(N){console.error(` Chart fix attempt ${q} failed:`,N);const U={attemptNumber:q,error:X};h(j=>[...j,U]),q>=3&&i(`Failed to fix chart after 3 attempts. Last error: ${X}`)}finally{l(!1)}},Y=()=>{d.length<3&&a&&O(a)};return u.jsxs("div",{className:"my-4 border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden group",children:[u.jsxs("div",{className:"relative bg-white dark:bg-gray-900",children:[u.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[d.some(X=>X.llmApiCall)&&u.jsxs("button",{onClick:()=>v(!0),className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-blue-600 dark:text-blue-400 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"View LLM transparency info for chart fixes",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-[10px]",children:"LLM"})]}),u.jsx("button",{onClick:$,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Copy chart image to clipboard",children:T?u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsx("span",{className:"text-[10px]",children:"Copied!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),u.jsx("span",{className:"text-[10px]",children:"Copy"})]})}),u.jsxs("button",{onClick:W,className:"p-1.5 bg-white/80 dark:bg-gray-800/80 hover:bg-white dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded backdrop-blur-sm transition-all duration-200 shadow-sm hover:shadow flex items-center gap-1",title:"Grab chart as base64 markdown",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),u.jsx("span",{className:"text-[10px]",children:"Grab"})]})]}),u.jsx("div",{ref:n,className:"p-4 flex items-center justify-center min-h-[200px]",style:{fontSize:"14px",overflow:"auto"}})]}),a&&!s&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-t border-red-300 dark:border-red-700 p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm font-medium text-red-800 dark:text-red-300 mb-1",children:"Chart Rendering Error"}),u.jsx("div",{className:"text-xs text-red-700 dark:text-red-400 font-mono break-all",children:a}),d.length<3&&u.jsxs("button",{onClick:Y,className:"mt-2 text-xs btn-secondary px-3 py-1",children:[" Try to Fix (",d.length,"/3 attempts)"]}),d.length>=3&&u.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:" Maximum fix attempts reached. The chart may have unsupported syntax."})]})]})}),s&&u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-t border-blue-300 dark:border-blue-700 p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("svg",{className:"w-5 h-5 text-blue-500 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",strokeWidth:"3"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Attempting to fix chart (attempt ",d.length+1,"/3)..."]})]})}),d.length>0&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700",children:[u.jsxs("button",{onClick:()=>b(!m),className:"w-full px-4 py-2 text-left text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-750 flex items-center justify-between",children:[u.jsxs("span",{children:[" Chart Auto-Fix Details (",d.length," attempt",d.length>1?"s":"",")"]}),u.jsx("svg",{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&u.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[d.map(X=>u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded p-3 text-xs",children:[u.jsxs("div",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Attempt ",X.attemptNumber]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Error:"}),u.jsx("div",{className:"text-red-600 dark:text-red-400 font-mono text-[10px] break-all mt-1",children:X.error})]}),X.usage&&u.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LLM Usage:"}),u.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Provider:"}),u.jsx("div",{className:"font-medium",children:X.usage.provider})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Model:"}),u.jsx("div",{className:"font-medium",children:X.usage.model})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Tokens:"}),u.jsx("div",{className:"font-medium",children:X.usage.total_tokens.toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Cost:"}),u.jsxs("div",{className:"font-medium text-green-600 dark:text-green-400",children:["$",X.usage.cost.toFixed(6)]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Duration:"}),u.jsxs("div",{className:"font-medium",children:[X.usage.duration_ms,"ms"]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-gray-500 dark:text-gray-500",children:"Result:"}),u.jsx("div",{className:"font-medium text-green-600 dark:text-green-400",children:X.fixedChart?" Fixed":" Failed"})]})]})]})]})]},X.attemptNumber)),d.some(X=>X.usage)&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-3 text-xs",children:[u.jsx("div",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:" Total Cost"}),u.jsxs("div",{className:"text-blue-800 dark:text-blue-300",children:["$",d.reduce((X,q)=>X+(q.usage?.cost||0),0).toFixed(6)," ","(",d.reduce((X,q)=>X+(q.usage?.total_tokens||0),0).toLocaleString()," tokens)"]})]})]})]}),x&&u.jsx(z6,{apiCalls:d.filter(X=>X.llmApiCall).map(X=>X.llmApiCall),onClose:()=>v(!1)})]})},Pfe={...xp,attributes:{...xp.attributes,"*":["className","style","id"],a:["href","title","target","rel"],img:["src","alt","title","width","height"],table:["className"],td:["align","colspan","rowspan"],th:["align","colspan","rowspan"]},tagNames:[...xp.tagNames||[],"table","thead","tbody","tr","th","td","tfoot","div","span","br","hr"]};function Rfe(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/shorts\/([^&\n?#]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null}function Ife({href:e,children:t}){const{addTracksToStart:r,playTrack:n}=Dc(),a=Rfe(e),i=s=>{if(s.preventDefault(),a){const l=typeof t=="string"?t:`YouTube Video ${a}`;r([{videoId:a,title:l,url:e}]),setTimeout(()=>{n(0)},0)}};return u.jsxs("span",{className:"inline-flex items-center gap-2",children:[u.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:t}),u.jsxs("button",{onClick:i,className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded transition-colors",title:"Play now",children:[u.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 5v14l11-7z"})}),"Play"]})]})}function Dfe({images:e}){const[t,r]=_.useState(null);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"image-gallery grid grid-cols-2 md:grid-cols-4 gap-4 my-6",children:e.map((n,a)=>u.jsxs("div",{className:"gallery-item cursor-pointer overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all hover:shadow-lg",onClick:()=>r(n.src),children:[u.jsx("img",{src:n.src,alt:n.alt,className:"w-full h-48 object-cover hover:scale-105 transition-transform",loading:"lazy"}),n.alt&&u.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 truncate",children:n.alt})]},a))}),t&&u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>r(null),children:[u.jsx("button",{className:"absolute top-4 right-4 text-white text-4xl font-bold hover:text-gray-300",onClick:()=>r(null),"aria-label":"Close",children:""}),u.jsx("img",{src:t,alt:"Expanded view",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})]})}function tm({content:e,className:t="",chartDescription:r,onLlmApiCall:n,snippetId:a,snippetTags:i=[],onImageEdit:s}){const[l,d]=_.useState(0);if(/^<img\s+[^>]*src="data:image\/[^"]+"/i.test(e.trim()))return u.jsx("div",{className:`markdown-content ${t}`,dangerouslySetInnerHTML:{__html:e}});let p=e.replace(/```html\n([\s\S]*?)\n```/g,(v,T)=>T.includes("<table")?`

${T.replace(/<table/g,'<table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700 border border-gray-300 dark:border-gray-700 my-4"').replace(/<th/g,'<th class="px-4 py-2 bg-gray-100 dark:bg-gray-800 font-semibold text-left border border-gray-300 dark:border-gray-700"').replace(/<td/g,'<td class="px-4 py-2 border border-gray-300 dark:border-gray-700"')}

`:v);const f=/<!-- GALLERY_START -->([\s\S]*?)<!-- GALLERY_END -->/g,m=f.exec(p);let b=p,x=[];if(m){const v=m[1],T=/!\[(.*?)\]\((.*?)\)/g;let k;for(;(k=T.exec(v))!==null;)x.push({alt:k[1],src:k[2]});b=e.replace(f,"").trim()}return u.jsxs("div",{className:`markdown-content ${t}`,children:[u.jsx(jL,{remarkPlugins:[gQ],rehypePlugins:[OJ,[WJ,Pfe],Dee],components:{h1:({children:v})=>u.jsx("h1",{className:"text-2xl font-bold mt-6 mb-4 text-gray-900 dark:text-gray-100",children:v}),h2:({children:v})=>u.jsx("h2",{className:"text-xl font-bold mt-5 mb-3 text-gray-900 dark:text-gray-100",children:v}),h3:({children:v})=>u.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-gray-100",children:v}),h4:({children:v})=>u.jsx("h4",{className:"text-base font-semibold mt-3 mb-2 text-gray-900 dark:text-gray-100",children:v}),p:({children:v})=>u.jsx("p",{className:"mb-4 leading-relaxed text-gray-800 dark:text-gray-200",children:v}),ul:({children:v})=>u.jsx("ul",{className:"list-disc list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:v}),ol:({children:v})=>u.jsx("ol",{className:"list-decimal list-inside mb-4 space-y-1 text-gray-800 dark:text-gray-200",children:v}),li:({children:v})=>u.jsx("li",{className:"ml-4",children:v}),code:({className:v,children:T,...k})=>{const C=!v,A=/language-(\w+)/.exec(v||"");if((A?A[1]:"")==="mermaid"&&!C){const B=String(T).replace(/\n$/,""),R=B.split(`
`)[0].trim(),M=r||`${R} diagram`;return u.jsx(Lfe,{chart:B,description:M,onLlmApiCall:n})}return C?u.jsx("code",{className:"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-800 text-pink-600 dark:text-pink-400 text-sm font-mono",...k,children:T}):u.jsx("code",{className:`${v} text-sm`,...k,children:T})},pre:({children:v})=>v?.props?.className?.includes("language-mermaid")?v:u.jsx("pre",{className:"mb-4 p-4 rounded-lg bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:v}),a:({href:v,children:T})=>v&&(v.includes("youtube.com/watch")||v.includes("youtu.be/")||v.includes("youtube.com/embed/")||v.includes("youtube.com/shorts/"))&&v?u.jsx(Ife,{href:v,children:T}):u.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:T}),blockquote:({children:v})=>u.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic my-4 text-gray-700 dark:text-gray-300",children:v}),table:({children:v})=>u.jsx("div",{className:"overflow-x-auto mb-4",children:u.jsx("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:v})}),thead:({children:v})=>u.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:v}),tbody:({children:v})=>u.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:v}),tr:({children:v})=>u.jsx("tr",{children:v}),th:({children:v})=>u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:v}),td:({children:v})=>u.jsx("td",{className:"px-4 py-2 text-sm text-gray-800 dark:text-gray-200",children:v}),hr:()=>u.jsx("hr",{className:"my-6 border-gray-300 dark:border-gray-700"}),strong:({children:v})=>u.jsx("strong",{className:"font-bold text-gray-900 dark:text-gray-100",children:v}),em:({children:v})=>u.jsx("em",{className:"italic text-gray-800 dark:text-gray-200",children:v}),img:({src:v,alt:T})=>{const k=typeof v=="string"&&v.trim()!==""?v:null;if(!k)return null;const C=l;d(R=>R+1);const A=a?`${a}-img-${C}`:`img-${C}`,D=R=>{if(R.startsWith("data:image/")){const $=R.match(/^data:image\/([^;,]+)/);return $?$[1].toUpperCase():"Unknown"}const M=R.split(".").pop()?.toLowerCase();return M==="jpg"||M==="jpeg"?"JPG":M==="png"?"PNG":M==="gif"?"GIF":M==="webp"?"WebP":M==="svg"?"SVG":"Unknown"},B=R=>{R.preventDefault(),R.stopPropagation(),s&&s({id:A,url:k,name:T||`Image ${C+1}`,tags:i,snippetId:a,format:D(k)})};return s?u.jsxs("div",{className:"relative inline-block group my-4",children:[u.jsx("img",{src:k,alt:T||"",className:"max-w-full h-auto rounded-lg border border-gray-200 dark:border-gray-700",loading:"lazy",onError:R=>{console.error("Image failed to load:",{src:k,alt:T}),R.target.style.display="none"}}),u.jsx("button",{onClick:B,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-orange-600 hover:bg-orange-700 text-white rounded-full p-2 shadow-lg",title:"Edit image","aria-label":"Edit image",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}):u.jsx("img",{src:k,alt:T||"",className:"max-w-full h-auto rounded-lg my-4 border border-gray-200 dark:border-gray-700",loading:"lazy",onError:R=>{console.error("Image failed to load:",{src:k,alt:T}),R.target.style.display="none"}})}},children:b}),x.length>0&&u.jsx(Dfe,{images:x})]})}const ii={YOUTUBE_DOWNLOAD_START:"youtube_download_start",YOUTUBE_DOWNLOAD_PROGRESS:"youtube_download_progress",YOUTUBE_DOWNLOAD_COMPLETE:"youtube_download_complete",DOWNLOAD_START:"download_start",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_COMPLETE:"download_complete",METADATA:"metadata",CHUNKING_START:"chunking_start",CHUNK_READY:"chunk_ready",TRANSCRIBE_START:"transcribe_start",TRANSCRIBE_CHUNK_COMPLETE:"transcribe_chunk_complete",TRANSCRIBE_COMPLETE:"transcribe_complete",TRANSCRIPTION_STOPPED:"transcription_stopped",ERROR:"error"},Yr={DOWNLOADING:"Downloading",CHUNKING:"Chunking",TRANSCRIBING:"Transcribing",COMPLETE:"Complete",STOPPED:"Stopped",ERROR:"Error"},Mfe=({toolCallId:e,url:t,events:r,onStop:n})=>{const[a,i]=_.useState(!1),[s,l]=_.useState(!1),d=_.useMemo(()=>{let x=Yr.DOWNLOADING,v=0,T=null,k="",C=0,A=1,D=null;r.length>0&&console.log(`[TranscriptionProgress] Processing ${r.length} events for ${e}:`,r.map(B=>({type:B.progress_type||B.data?.type,data:B.data})));for(const B of r)switch(B.progress_type||B.data?.type||""){case ii.YOUTUBE_DOWNLOAD_START:case ii.DOWNLOAD_START:x=Yr.DOWNLOADING,v=0;break;case ii.YOUTUBE_DOWNLOAD_PROGRESS:case ii.DOWNLOAD_PROGRESS:x=Yr.DOWNLOADING,v=B.data?.percent||0;break;case ii.YOUTUBE_DOWNLOAD_COMPLETE:case ii.DOWNLOAD_COMPLETE:x=Yr.DOWNLOADING,v=100;break;case ii.METADATA:T=B.data||null;break;case ii.CHUNKING_START:x=Yr.CHUNKING,A=B.data?.chunks||1,v=0;break;case ii.CHUNK_READY:x=Yr.CHUNKING,C=B.data?.chunkIndex||0,A=B.data?.totalChunks||1,v=C/A*100;break;case ii.TRANSCRIBE_START:x=Yr.TRANSCRIBING,C=B.data?.chunkIndex||0;break;case ii.TRANSCRIBE_CHUNK_COMPLETE:x=Yr.TRANSCRIBING,B.data?.text&&(k+=(k?`

`:"")+B.data.text),C=B.data?.chunkIndex||0,A=B.data?.totalChunks||1,v=C/A*100;break;case ii.TRANSCRIBE_COMPLETE:x=Yr.COMPLETE,v=100;break;case ii.TRANSCRIPTION_STOPPED:x=Yr.STOPPED,C=B.data?.completedChunks||0,A=B.data?.totalChunks||1,v=A>0?C/A*100:0;break;case ii.ERROR:x=Yr.ERROR,D=B.data?.error||"Unknown error";break}return{stage:x,progress:Math.min(100,Math.max(0,v)),metadata:T,partialText:k,currentChunk:C,totalChunks:A,error:D}},[r]),h=async()=>{l(!0);try{await n(e)}catch(x){console.error("Failed to stop transcription:",x)}finally{setTimeout(()=>l(!1),5e3)}},p=x=>{const v=Math.floor(x/3600),T=Math.floor(x%3600/60),k=x%60;return v>0?`${v}:${T.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`:`${T}:${k.toString().padStart(2,"0")}`},f=x=>{switch(x){case Yr.DOWNLOADING:return"text-blue-600 dark:text-blue-400";case Yr.CHUNKING:return"text-purple-600 dark:text-purple-400";case Yr.TRANSCRIBING:return"text-green-600 dark:text-green-400";case Yr.COMPLETE:return"text-green-700 dark:text-green-300";case Yr.STOPPED:return"text-yellow-600 dark:text-yellow-400";case Yr.ERROR:return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}},m=x=>{switch(x){case Yr.DOWNLOADING:return"bg-blue-500";case Yr.CHUNKING:return"bg-purple-500";case Yr.TRANSCRIBING:return"bg-green-500";case Yr.COMPLETE:return"bg-green-600";case Yr.STOPPED:return"bg-yellow-500";case Yr.ERROR:return"bg-red-500";default:return"bg-gray-500"}},b=d.stage===Yr.DOWNLOADING||d.stage===Yr.CHUNKING||d.stage===Yr.TRANSCRIBING;return u.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 mb-4 bg-white dark:bg-gray-800",children:[u.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[d.metadata?.thumbnail&&u.jsx("img",{src:d.metadata.thumbnail,alt:"Video thumbnail",className:"w-24 h-16 object-cover rounded flex-shrink-0"}),u.jsx("div",{className:"flex-1 min-w-0",children:d.metadata?.title?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:d.metadata.title}),d.metadata.author&&u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:d.metadata.author}),d.metadata.duration&&u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Duration: ",p(d.metadata.duration)]})]}):u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:t})}),b&&!s&&u.jsx("button",{onClick:h,className:"px-3 py-1 text-sm bg-red-500 hover:bg-red-600 text-white rounded transition-colors flex-shrink-0",title:"Stop transcription",children:"Stop"}),s&&u.jsx("div",{className:"px-3 py-1 text-sm bg-gray-400 text-white rounded flex-shrink-0",children:"Stopping..."})]}),u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:`text-sm font-medium ${f(d.stage)}`,children:d.stage}),d.totalChunks>1&&b&&u.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(Chunk ",d.currentChunk," of ",d.totalChunks,")"]}),b&&u.jsx("div",{className:"ml-auto",children:u.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-300 border-t-blue-500 rounded-full"})})]}),u.jsx("div",{className:"relative w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-3",children:u.jsx("div",{className:`absolute left-0 top-0 h-full ${m(d.stage)} transition-all duration-300 ease-out`,style:{width:`${d.progress}%`}})}),u.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:[d.progress.toFixed(0),"% complete"]}),d.error&&u.jsxs("div",{className:"mb-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-700 dark:text-red-300",children:["Error: ",d.error]}),d.partialText&&u.jsxs("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:[u.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors mb-2",children:[u.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),u.jsxs("span",{children:[a?"Hide":"Show"," Partial Transcript",d.totalChunks>1&&` (${d.currentChunk} of ${d.totalChunks} chunks)`]})]}),a&&u.jsx("div",{className:"max-h-60 overflow-y-auto bg-gray-50 dark:bg-gray-900 rounded p-3 text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.partialText})]}),d.stage===Yr.COMPLETE&&u.jsxs("div",{className:"mt-3 text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Transcription complete!"]}),d.stage===Yr.STOPPED&&u.jsxs("div",{className:"mt-3 text-sm text-yellow-600 dark:text-yellow-400 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})}),"Transcription stopped (",d.currentChunk," of ",d.totalChunks," chunks completed)"]})]})},Ofe=({toolCallId:e,url:t,events:r})=>{if(!r||r.length===0)return null;const n=r[r.length-1],a=n.progress_type||n.data?.type||"",i=a==="scrape_complete"||a==="scrape_error",s=a==="scrape_error",l=[{type:"scrape_launching",icon:"",label:"Launching browser"},{type:"scrape_launched",icon:"",label:"Browser ready"},{type:"scrape_navigating",icon:"",label:"Loading page"},{type:"scrape_page_loaded",icon:"",label:"Page loaded"},{type:"scrape_extracting",icon:"",label:"Extracting content"},{type:"scrape_extracted",icon:"",label:"Content extracted"},{type:"scrape_complete",icon:"",label:"Complete"}],d=l.findIndex(k=>k.type===a),h=l[d]||l[0],p=r.find(k=>(k.progress_type||k.data?.type)==="scrape_extracted"),f=r.find(k=>(k.progress_type||k.data?.type)==="scrape_complete"),m=r.find(k=>(k.progress_type||k.data?.type)==="scrape_error"),b=p?.data?.textLength||f?.data?.textLength||0,x=p?.data?.linkCount||f?.data?.linkCount||0,v=p?.data?.imageCount||f?.data?.imageCount||0,T=f?.data?.totalTime||0;return u.jsxs("div",{className:`p-4 rounded-lg border ${s?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-700":i?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:h.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100",children:s?" Scraping Failed":i?" Scraping Complete":h.label}),u.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 truncate max-w-md",children:t})]})]}),T>0&&u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(T/1e3).toFixed(1),"s"]})]}),s&&m?.data?.error&&u.jsxs("div",{className:"mb-3 p-2 bg-red-100 dark:bg-red-900/30 rounded text-sm text-red-800 dark:text-red-200",children:[u.jsx("div",{className:"font-semibold mb-1",children:"Error:"}),u.jsx("div",{className:"text-xs font-mono",children:m.data.error})]}),!s&&u.jsx("div",{className:"mb-3",children:u.jsx("div",{className:"flex items-center gap-1",children:l.slice(0,-1).map((k,C)=>{const A=C<=d,D=C===d;return u.jsx(ir.Fragment,{children:u.jsx("div",{className:`h-1 flex-1 rounded transition-all duration-300 ${A?D?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400":"bg-gray-300 dark:bg-gray-600"}`})},k.type)})})}),(b>0||x>0||v>0)&&u.jsxs("div",{className:"flex gap-4 text-xs text-gray-700 dark:text-gray-300",children:[b>0&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:[b," chars"]})]}),x>0&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:[x," links"]})]}),v>0&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{children:""}),u.jsxs("span",{children:[v," images"]})]})]}),!i&&r.length>1&&u.jsxs("details",{className:"mt-3",children:[u.jsxs("summary",{className:"text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",children:["Show timeline (",r.length," events)"]}),u.jsx("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:r.map((k,C)=>{const A=k.progress_type||k.data?.type||"",D=l.find(R=>R.type===A),B=k.timestamp?new Date(k.timestamp).toLocaleTimeString():"";return u.jsxs("div",{className:"text-xs flex items-center gap-2 text-gray-600 dark:text-gray-400",children:[u.jsx("span",{children:D?.icon||""}),u.jsx("span",{className:"flex-1",children:D?.label||A}),B&&u.jsx("span",{className:"text-[10px]",children:B})]},C)})})]})]})},jfe=({data:e})=>{switch(e.phase){case"searching":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Searching ",e.service==="tavily"?"Tavily":"DuckDuckGo","..."]})]});case"results_found":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Found results for: ",e.query]})]});case"loading_content":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Loading content from ",e.result_count," results..."]})]});case"fetching_result":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.url})]})]});case"result_loaded":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] ",e.title]}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Loaded ",Math.round((e.content_size||0)/1024),"KB in ",e.fetch_time_ms,"ms"]})]})]});case"result_failed":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsxs("div",{className:"font-medium",children:["[",e.result_index,"/",e.result_total,"] Failed: ",e.title]}),u.jsx("div",{className:"text-xs text-red-600 dark:text-red-400",children:e.error})]})]});default:return null}},Bfe=({data:e})=>{switch(e.phase){case"searching":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Searching YouTube for: ",u.jsx("span",{className:"font-medium",children:e.query})]})]});case"results_found":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Found ",u.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," for: ",e.query]})]});case"complete":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" YouTube search complete - ",u.jsxs("span",{className:"font-medium",children:[e.totalVideos," videos"]})," added to playlist"]})]});case"fetching_transcripts":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" ",e.message||`Found ${e.totalVideos} videos, fetching transcripts...`]})]});case"fetching_transcript":const t=e.totalVideos&&e.currentVideo?Math.round(e.currentVideo/e.totalVideos*100):0;return u.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsxs("div",{className:"font-medium",children:[" ",e.message||`Fetching transcript ${e.currentVideo}/${e.totalVideos}`]}),e.videoId&&u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:["Video ID: ",e.videoId]})]})]}),u.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:u.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:[t,"% complete"]})]});case"transcript_fetched":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsx("span",{className:"font-medium",children:e.message||"Transcript fetched"}),e.transcriptLength&&u.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",e.transcriptLength.toLocaleString()," characters)"]})]})]});case"transcript_failed":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),u.jsxs("div",{className:"flex-1 text-gray-700 dark:text-gray-300",children:[u.jsx("span",{className:"font-medium",children:e.message||"Transcript unavailable"}),e.error&&u.jsx("div",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:e.error})]})]});default:return null}},Ffe=({data:e})=>{switch(e.phase){case"starting":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Starting JavaScript execution (",e.code_length," characters, ",(e.timeout_ms||0)/1e3,"s timeout)..."]})]});case"executing":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-sm",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:" Executing JavaScript code..."})]});case"console_output":return u.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-900/50 rounded text-sm font-mono border-l-4 border-purple-500",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsxs("span",{children:["Console Output #",e.output_number,":"]})]}),u.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:e.output})]});case"completed":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[" Execution completed",e.output_lines!==void 0&&e.output_lines>0&&u.jsxs("span",{className:"ml-1",children:["(",e.output_lines," console output",e.output_lines!==1?"s":"",")"]}),e.has_result&&!e.output_lines&&u.jsx("span",{className:"ml-1",children:"(returned value)"})]})]});case"error":return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm",children:[u.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-red-700 dark:text-red-300",children:" Execution Error"}),u.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 font-mono mt-1",children:e.error})]})]});default:return null}},zfe=({data:e})=>{const r=(()=>{switch(e.phase){case"analyzing_prompt":return{icon:u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-pink-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),label:"Analyzing prompt",description:e.prompt?`"${e.prompt.substring(0,60)}${e.prompt.length>60?"...":""}"`:"",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"quality_selected":return{icon:u.jsx("span",{className:"text-purple-500",children:""}),label:`Quality tier: ${e.quality||"standard"}`,description:e.quality==="ultra"?"Highest quality, slower generation":e.quality==="high"?"High quality output":e.quality==="standard"?"Balanced quality and speed":"Fast generation",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};case"selecting_provider":return{icon:u.jsx("span",{className:"text-indigo-500",children:""}),label:`Selected: ${e.provider||"provider"} ${e.model||""}`,description:`Size: ${e.size||"1024x1024"}  ${e.estimated_cost?`~$${e.estimated_cost.toFixed(4)}`:"Calculating cost..."}`,bgColor:"bg-indigo-50 dark:bg-indigo-900/20",textColor:"text-indigo-700 dark:text-indigo-300"};case"generating":const n=e.remaining_seconds??e.estimated_seconds??15,a=e.estimated_seconds&&e.remaining_seconds!==void 0?Math.min(100,Math.max(0,(e.estimated_seconds-e.remaining_seconds)/e.estimated_seconds*100)):0;return{icon:u.jsx("div",{className:"w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"}),label:"Generating image...",description:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.jsx("span",{children:""}),u.jsx("span",{children:n>0?`~${n}s remaining`:"Finishing up..."})]}),e.estimated_seconds&&u.jsx("div",{className:"w-full bg-pink-200 dark:bg-pink-800 rounded-full h-1.5",children:u.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-1.5 rounded-full transition-all duration-1000 ease-linear",style:{width:`${a}%`}})}),u.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.provider,"  ",e.quality," quality  ",e.size]})]}),bgColor:"bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20",textColor:"text-pink-700 dark:text-pink-300"};case"completed":return{icon:u.jsx("span",{className:"text-green-500",children:""}),label:"Image generated successfully",description:`${e.provider}  ${e.quality} quality  ${e.size}${e.estimated_cost?`  $${e.estimated_cost.toFixed(4)}`:""}`,bgColor:"bg-green-50 dark:bg-green-900/20",textColor:"text-green-700 dark:text-green-300"};case"error":return{icon:u.jsx("span",{className:"text-red-500",children:""}),label:"Image generation failed",description:e.error||"Unknown error occurred",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-700 dark:text-red-300"};default:return{icon:u.jsx("div",{className:"w-4 h-4 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),label:"Processing...",description:"",bgColor:"bg-gray-50 dark:bg-gray-900/20",textColor:"text-gray-700 dark:text-gray-300"}}})();return u.jsx("div",{className:`rounded-lg ${r.bgColor} p-3 shadow-sm`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:`font-medium text-sm ${r.textColor}`,children:r.label}),r.description&&u.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:typeof r.description=="string"?u.jsx("span",{children:r.description}):r.description})]})]})})},Ufe=({data:e})=>e.phase==="preparing"?u.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 shadow-sm",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"font-medium text-sm text-blue-700 dark:text-blue-300",children:["Preparing ",e.chart_type||"chart"," diagram"]}),e.description&&u.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]})}):e.phase==="completed"?u.jsx("div",{className:"rounded-lg bg-green-50 dark:bg-green-900/20 p-3 shadow-sm",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-green-500",children:""}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"font-medium text-sm text-green-700 dark:text-green-300",children:[e.chart_type||"Chart"," diagram ready"]}),u.jsx("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:"Diagram will appear below"})]})]})}):null,$fe=({data:e})=>u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 text-sm space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Content Extracted"})]}),e.title&&u.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-medium truncate",children:e.title}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.format&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Format:"})," ",u.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.format==="markdown"?" Markdown":" Plain Text"})]}),e.compressionRatio!=null&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Compression:"})," ",u.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Number(e.compressionRatio).toFixed(1),"x"]})]}),e.originalLength!==void 0&&e.extractedLength!==void 0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Size:"})," ",u.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[(e.originalLength/1024).toFixed(1),"KB  ",(e.extractedLength/1024).toFixed(1),"KB"]})]}),e.wordCount!==void 0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Words:"})," ",u.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.wordCount.toLocaleString()})]}),e.language&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language:"})," ",u.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:e.language})]}),e.duration!==void 0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"})," ",u.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[Math.floor(e.duration/60),":",(e.duration%60).toString().padStart(2,"0")]})]})]}),(e.images||e.videos||e.youtube||e.links)&&u.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[(e.images??0)>0&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.images," ",e.images===1?"image":"images"]}),(e.videos??0)>0&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.videos," ",e.videos===1?"video":"videos"]}),(e.youtube??0)>0&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.youtube," YouTube ",e.youtube===1?"video":"videos"]}),(e.links??0)>0&&u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" ",e.links," ",e.links===1?"link":"links"]})]}),e.warning&&u.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-xs",children:[" ",e.warning]})]}),op=({data:e,level:t=0})=>{const[r,n]=ir.useState(t<2);if(e===null)return u.jsx("span",{className:"text-gray-500",children:"null"});if(e===void 0)return u.jsx("span",{className:"text-gray-500",children:"undefined"});if(typeof e!="object")return typeof e=="string"?u.jsxs("span",{className:"text-green-600 dark:text-green-400",children:['"',e,'"']}):typeof e=="number"?u.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:e}):typeof e=="boolean"?u.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:String(e)}):u.jsx("span",{children:String(e)});const a=Array.isArray(e),i=a?e.map((s,l)=>l):Object.keys(e);return i.length===0?u.jsx("span",{className:"text-gray-500",children:a?"[]":"{}"}):u.jsxs("div",{className:"ml-4",children:[u.jsxs("button",{onClick:()=>n(!r),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:[r?"":""," ",a?`Array[${i.length}]`:`Object{${i.length}}`]}),r&&u.jsx("div",{className:"ml-4 border-l border-gray-300 dark:border-gray-600 pl-2",children:i.map(s=>u.jsxs("div",{className:"my-1",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-mono",children:String(s)}),u.jsx("span",{className:"text-gray-500",children:": "}),u.jsx(op,{data:e[s],level:t+1})]},String(s)))})]})},qfe=({errorData:e,llmApiCalls:t,onClose:r})=>{const n=Jp(!0,r),{showSuccess:a,showError:i}=Mc();return u.jsx("div",{ref:n,className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[u.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Details"]}),u.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.jsxs("div",{className:"space-y-4",children:[e?.message&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-300 dark:border-red-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"Error Message"}),u.jsx("p",{className:"text-red-700 dark:text-red-300 font-mono text-sm whitespace-pre-wrap",children:e.message})]}),(e?.type||e?.code||e?.statusCode)&&u.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-300 dark:border-orange-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-200 mb-2",children:"Error Classification"}),u.jsxs("div",{className:"space-y-1 text-sm",children:[e.type&&u.jsxs("div",{children:[u.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Type:"})," ",u.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.type})]}),e.code&&u.jsxs("div",{children:[u.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Code:"})," ",u.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.code})]}),e.statusCode&&u.jsxs("div",{children:[u.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-semibold",children:"Status Code:"})," ",u.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-mono",children:e.statusCode})]})]})]}),e?.stack&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Stack Trace"}),u.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 font-mono whitespace-pre-wrap overflow-x-auto",children:e.stack})]}),(e?.errorType||e?.errorMessage)&&u.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-300 dark:border-purple-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:"Lambda Error"}),u.jsxs("div",{className:"space-y-1 text-sm",children:[e.errorType&&u.jsxs("div",{children:[u.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Type:"})," ",u.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorType})]}),e.errorMessage&&u.jsxs("div",{children:[u.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-semibold",children:"Error Message:"})," ",u.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-mono",children:e.errorMessage})]})]})]}),(e?.error?.message||e?.error?.type||e?.error?.code)&&u.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-300 dark:border-yellow-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Upstream LLM Provider Error"}),u.jsxs("div",{className:"space-y-1 text-sm",children:[e.error.message&&u.jsxs("div",{children:[u.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Message:"})," ",u.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.message})]}),e.error.type&&u.jsxs("div",{children:[u.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Type:"})," ",u.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.type})]}),e.error.code&&u.jsxs("div",{children:[u.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Code:"})," ",u.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-mono",children:e.error.code})]})]})]}),(e?.request||e?.requestId||e?.timestamp)&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Request Context"}),u.jsxs("div",{className:"space-y-1 text-sm",children:[e.requestId&&u.jsxs("div",{children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request ID:"})," ",u.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:e.requestId})]}),e.timestamp&&u.jsxs("div",{children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Timestamp:"})," ",u.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(e.timestamp).toLocaleString()})]}),e.request&&u.jsxs("div",{className:"mt-2",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Request Data:"}),u.jsx("div",{className:"mt-1 bg-white dark:bg-gray-800 rounded p-2 max-h-48 overflow-auto",children:u.jsx(op,{data:e.request})})]})]})]}),t&&t.length>0&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2",children:[u.jsx("span",{children:" LLM Request Details"}),u.jsxs("span",{className:"text-xs font-normal text-blue-600 dark:text-blue-400",children:["(",t.length," call",t.length!==1?"s":"",")"]})]}),u.jsx("div",{className:"space-y-3",children:t.map((s,l)=>{const d=s.response?.usage?.prompt_tokens||0,h=s.response?.usage?.completion_tokens||0,p=d+h;return u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-700",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsx("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300",children:"Model:"}),u.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded font-mono",children:s.model}),s.provider&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:s.provider})]}),s.phase&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-gray-400",children:""}),u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:s.phase})]})]}),p>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Tokens:"}),u.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:[p.toLocaleString()," total"]}),u.jsxs("span",{className:"text-gray-400",children:["(",d.toLocaleString()," in, ",h.toLocaleString()," out)"]})]}),s.cost!==void 0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Cost:"}),u.jsxs("span",{className:"text-green-600 dark:text-green-400 font-mono",children:["$",s.cost.toFixed(6)]})]}),s.timestamp&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"Time:"}),u.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono",children:new Date(s.timestamp).toLocaleTimeString()})]}),s.httpStatus&&u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx("span",{className:"text-blue-700 dark:text-blue-300 font-semibold",children:"HTTP Status:"}),u.jsx("span",{className:`font-mono ${s.httpStatus>=400?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:s.httpStatus})]}),s.request&&u.jsxs("details",{className:"mt-2",children:[u.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Request Details "}),u.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:u.jsx(op,{data:s.request})})]}),s.response&&u.jsxs("details",{className:"mt-2",children:[u.jsx("summary",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold cursor-pointer hover:text-blue-900 dark:hover:text-blue-100",children:"Response Details "}),u.jsx("div",{className:"mt-2 bg-gray-50 dark:bg-gray-900 rounded p-2 max-h-48 overflow-auto",children:u.jsx(op,{data:s.response})})]})]})},l)})})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-700 rounded-lg p-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200 mb-2 flex items-center justify-between",children:[u.jsx("span",{children:"Complete Error Object (Expandable Tree)"}),u.jsxs("button",{onClick:()=>{const s=JSON.stringify(e,null,2);navigator.clipboard.writeText(s).then(()=>a("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 flex items-center gap-1",title:"Copy full JSON to clipboard",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy JSON"]})]}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3 max-h-96 overflow-auto font-mono text-xs",children:u.jsx(op,{data:e})})]})]})}),u.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("button",{onClick:()=>{const s=JSON.stringify(e,null,2);navigator.clipboard.writeText(s).then(()=>a("Copied to clipboard!")).catch(()=>i("Failed to copy"))},className:"btn-secondary",children:"Copy Full JSON"}),u.jsx("button",{onClick:r,className:"btn-primary",children:"Close"})]})]})})};function Hfe({isOpen:e,onClose:t,messageData:r}){const[n,a]=_.useState(""),[i,s]=_.useState(!1),[l,d]=_.useState(null),{getToken:h,user:p}=rs(),f=2e3,m=f-n.length,b=async()=>{if(!n.trim()){d("Please provide an explanation");return}s(!0),d(null);try{const x=await h(),v=await An(),T=await fetch(`${v}/report-error`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({userEmail:p?.email||"unknown",explanation:n.trim(),messageData:{messageId:r.messageId,messageContent:r.messageContent,llmApiCalls:r.llmApiCalls,evaluations:r.evaluations||[],conversationThread:r.conversationThread},timestamp:new Date().toISOString()})});if(!T.ok){const k=await T.json().catch(()=>({error:"Unknown error"}));throw new Error(k.error||`HTTP ${T.status}`)}a(""),t(),console.log(" Response reported successfully")}catch(x){console.error("Failed to submit error report:",x),d(x instanceof Error?x.message:"Failed to submit report. Please try again.")}finally{s(!1)}};return e?u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Report Response Issue"})]}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl leading-none","aria-label":"Close",children:""})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800 text-sm",children:u.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" ",u.jsx("strong",{children:"Privacy Notice:"})," Your report will include this conversation's full context and will be reviewed by the development team to improve the system. Please do not include sensitive personal information in your explanation."]})}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Help us improve! Describe what went wrong with this response:"}),u.jsx("textarea",{value:n,onChange:x=>a(x.target.value.slice(0,f)),placeholder:`Examples:
 Response was factually incorrect about...
 Did not answer my actual question
 Hallucinated information
 Ignored previous context
 Missing important details`,className:"w-full h-48 px-4 py-3 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),u.jsx("div",{className:"flex justify-between items-center text-sm",children:u.jsxs("span",{className:`${m<100?"text-orange-600 dark:text-orange-400 font-medium":"text-gray-500 dark:text-gray-400"}`,children:[m," characters remaining"]})}),l&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg border border-red-200 dark:border-red-800",children:u.jsxs("p",{className:"text-red-900 dark:text-red-100 text-sm",children:[" ",l]})})]}),u.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[u.jsx("button",{onClick:t,disabled:i,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),u.jsx("button",{onClick:b,disabled:i||!n.trim(),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""}),u.jsx("span",{children:"Sending..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Send Report"})]})})]})]})}):null}class Gfe{recognition=null;isListening=!1;callback=null;currentHotword="hey google";async initialize(t="hey google",r=.5){const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n)throw new Error("Speech Recognition not supported in this browser. Please use Chrome, Edge, or Safari.");try{this.currentHotword=t.toLowerCase(),this.recognition=new n,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.maxAlternatives=1,console.log(` Browser Speech Recognition initialized with hotword: "${t}"`)}catch(a){throw console.error(" Failed to initialize Speech Recognition:",a),a}}async startListening(t){if(!this.recognition)throw new Error("Speech Recognition not initialized. Call initialize() first.");if(this.isListening){console.warn("Already listening for hotword");return}this.callback=t;try{this.recognition.onresult=r=>{const n=r.results,i=n[n.length-1][0].transcript.toLowerCase().trim();i.includes(this.currentHotword)&&(console.log(" Hotword detected:",i),this.callback?.())},this.recognition.onerror=r=>{console.error("Speech recognition error:",r.error),(r.error==="no-speech"||r.error==="aborted")&&(console.log("Restarting speech recognition..."),setTimeout(()=>{this.isListening&&this.recognition?.start()},1e3))},this.recognition.onend=()=>{this.isListening&&(console.log("Speech recognition ended, restarting..."),setTimeout(()=>{this.isListening&&this.recognition?.start()},100))},this.recognition.start(),this.isListening=!0,console.log(" Listening for hotword:",this.currentHotword)}catch(r){throw console.error("Failed to start hotword detection:",r),r}}async stopListening(){if(this.isListening)try{this.isListening=!1,this.callback=null,this.recognition&&this.recognition.stop(),console.log("Stopped listening for hotword")}catch(t){console.error("Failed to stop hotword detection:",t)}}async release(){await this.stopListening(),this.recognition&&(this.recognition=null,console.log("Speech Recognition released"))}isActive(){return this.isListening}}const rm=new Gfe;function Wfe({onVoiceRequest:e,onTranscriptionStart:t,accessToken:r,apiEndpoint:n,isProcessing:a=!1,isSpeaking:i=!1}){const[s,l]=_.useState(!1),[d,h]=_.useState("hotword"),[p,f]=_.useState(""),[m,b]=_.useState(0),[x,v]=_.useState(()=>localStorage.getItem("continuousVoice_hotword")||"hey google"),[T,k]=_.useState(()=>parseFloat(localStorage.getItem("continuousVoice_sensitivity")||"0.5")),[C,A]=_.useState(()=>parseInt(localStorage.getItem("continuousVoice_timeout")||"10000")),D=_.useRef(null),B=100,R=_.useRef(null),M=_.useRef(null),$=_.useRef(null),W=_.useRef([]),O=_.useRef(null),Y=_.useRef(null);_.useEffect(()=>{localStorage.setItem("continuousVoice_hotword",x),localStorage.setItem("continuousVoice_sensitivity",T.toString()),localStorage.setItem("continuousVoice_timeout",C.toString())},[x,T,C]),_.useEffect(()=>{a?h("thinking"):i&&h("speaking")},[a,i]),_.useEffect(()=>{if(d==="speaking"&&!i&&s){console.log(" TTS complete, auto-restarting listening...");const ne=m+1;if(b(ne),ne>=B){console.warn(" Max turns reached, stopping continuous mode"),l(!1);return}h("listening"),K(),U()}},[i,d,s,m]),_.useEffect(()=>(s?X():H(),()=>{H()}),[s]),_.useEffect(()=>{d==="hotword"&&s&&q()},[d,s]);async function X(){try{await rm.initialize(x,T),h("hotword"),b(0)}catch(ne){console.error(" Failed to initialize continuous mode:",ne),l(!1),alert(`Failed to initialize voice detection: ${ne instanceof Error?ne.message:"Unknown error"}`)}}async function q(){try{await rm.startListening(N),console.log(" Hotword mode active")}catch(ne){console.error(" Failed to start hotword listening:",ne)}}function N(){console.log(" Hotword detected, starting microphone..."),rm.stopListening(),h("listening"),t?.(),K(),U()}function U(){j(),!(C<=0)&&(D.current=window.setTimeout(()=>{console.log(" Timeout: No speech detected, returning to hotword mode"),R.current&&R.current.state!=="inactive"&&ie(),h("hotword")},C))}function j(){D.current&&(clearTimeout(D.current),D.current=null)}async function K(){try{W.current=[];const ne=await navigator.mediaDevices.getUserMedia({audio:!0});O.current=ne;const ue=new(window.AudioContext||window.webkitAudioContext);M.current=ue;const xe=ue.createMediaStreamSource(ne),ke=ue.createAnalyser();ke.fftSize=256,$.current=ke,xe.connect(ke);const me=new MediaRecorder(ne);R.current=me,me.ondataavailable=Me=>{Me.data.size>0&&W.current.push(Me.data)},me.onstop=async()=>{const Me=new Blob(W.current,{type:"audio/webm"});await G(Me)},me.start(),Q(),console.log(" Recording started")}catch(ne){console.error(" Error starting recording:",ne),h("hotword")}}function Q(){if(!$.current||!R.current||R.current.state!=="recording"&&R.current.state!=="paused")return;const ne=new Uint8Array($.current.frequencyBinCount);$.current.getByteFrequencyData(ne);const ue=ne.reduce((me,Me)=>me+Me)/ne.length,xe=10,ke=2e3;ue<xe?Y.current||(Y.current=window.setTimeout(()=>{console.log(" Silence detected, stopping recording..."),ie()},ke)):Y.current&&(clearTimeout(Y.current),Y.current=null),R.current&&(R.current.state==="recording"||R.current.state==="paused")&&setTimeout(Q,100)}function ie(){Y.current&&(clearTimeout(Y.current),Y.current=null),R.current&&(R.current.state==="recording"||R.current.state==="paused")&&R.current.stop(),O.current&&(O.current.getTracks().forEach(ne=>ne.stop()),O.current=null),M.current&&M.current.state!=="closed"&&(M.current.close().catch(ne=>{console.warn("Failed to close AudioContext:",ne)}),M.current=null)}async function G(ne){if(j(),ne.size===0){console.warn(" No audio data recorded"),h("hotword");return}h("thinking");try{const ue=await F(ne);if(f(ue),!ue.trim()){console.log(" Empty transcript, returning to hotword mode"),h("hotword");return}console.log(" Transcript:",ue),e?.(ue)}catch(ue){console.error(" Error processing speech:",ue),h("hotword")}}async function F(ne){if(!r)throw new Error("Not authenticated");const ue=new FormData;ue.append("audio",ne,"recording.webm");const ke=`${n.replace("/openai/v1","")}/transcribe`,me=await fetch(ke,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:ue}),Me=await me.json();if(!me.ok)throw new Error(Me.error||"Transcription failed");return Me.text||Me.transcription||""}async function H(){j(),Y.current&&(clearTimeout(Y.current),Y.current=null),R.current&&(R.current.state==="recording"||R.current.state==="paused")&&ie(),await rm.release()}function I(){l(!s)}return u.jsxs("div",{className:"continuous-voice-mode",children:[u.jsx("button",{onClick:I,className:`toggle-btn ${s?"active":""}`,title:s?"Stop Continuous Mode":"Start Continuous Mode",children:s?" Stop":" Continuous Mode"}),s&&u.jsxs("div",{className:`state-indicator state-${d}`,children:[u.jsxs("div",{className:"state-icon",children:[d==="hotword"&&"",d==="listening"&&"",d==="thinking"&&"",d==="speaking"&&""]}),u.jsxs("div",{className:"state-text",children:[d==="hotword"&&`Say "${x}" to start...`,d==="listening"&&"Listening...",d==="thinking"&&"Processing...",d==="speaking"&&"Speaking..."]}),u.jsxs("div",{className:"turn-count",children:["Turn ",m,"/",B]})]}),!s&&u.jsxs("details",{className:"settings-panel",children:[u.jsx("summary",{children:" Settings"}),u.jsxs("div",{className:"setting",children:[u.jsx("label",{children:"Hotword:"}),u.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),children:[u.jsx("option",{value:"hey google",children:"Hey Google"}),u.jsx("option",{value:"ok google",children:"OK Google"}),u.jsx("option",{value:"hey siri",children:"Hey Siri"}),u.jsx("option",{value:"alexa",children:"Alexa"}),u.jsx("option",{value:"jarvis",children:"Jarvis"}),u.jsx("option",{value:"computer",children:"Computer"}),u.jsx("option",{value:"porcupine",children:"Porcupine"})]}),u.jsx("small",{children:"Say this phrase to activate"})]}),u.jsxs("div",{className:"setting",children:[u.jsxs("label",{children:["Sensitivity: ",T.toFixed(1)]}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:T,onChange:ne=>k(parseFloat(ne.target.value))}),u.jsx("small",{children:"Low = fewer false triggers | High = more sensitive"})]}),u.jsxs("div",{className:"setting",children:[u.jsx("label",{children:"Silence Timeout:"}),u.jsxs("select",{value:C,onChange:ne=>A(parseInt(ne.target.value)),children:[u.jsx("option",{value:"5000",children:"5 seconds"}),u.jsx("option",{value:"10000",children:"10 seconds (default)"}),u.jsx("option",{value:"30000",children:"30 seconds"}),u.jsx("option",{value:"-1",children:"Never (manual only)"})]}),u.jsx("small",{children:"Return to hotword mode after silence"})]}),u.jsxs("div",{className:"info-box",children:[u.jsx("p",{children:u.jsx("strong",{children:"How it works:"})}),u.jsxs("ol",{children:[u.jsxs("li",{children:['Say "',x,'" to activate']}),u.jsx("li",{children:"Speak your question"}),u.jsx("li",{children:"Agent responds"}),u.jsx("li",{children:"Microphone auto-restarts for next turn"}),u.jsxs("li",{children:["After ",C>0?`${C/1e3}s`:""," silence, returns to hotword mode"]})]})]})]}),p&&s&&u.jsxs("div",{className:"transcript-display",children:[u.jsx("strong",{children:"You:"})," ",p]})]})}const AN=({data:e,title:t})=>{const[r,n]=_.useState(!1);return u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded",children:[u.jsxs("button",{onClick:()=>n(!r),className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[u.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:t}),u.jsx("svg",{className:`w-4 h-4 transform transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&u.jsx("pre",{className:"p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(e,null,2)})]})},Vfe=({data:e,accessToken:t,providerApiKeys:r,onCopy:n,onGrab:a,onLlmInfo:i,onStatusChange:s})=>{console.log(" GeneratedImageBlock render:",{status:e.status,hasImageUrl:!!e.imageUrl,hasBase64:!!e.base64,data:e});const[l,d]=_.useState(!1),[h,p]=_.useState(null),[f,m]=_.useState(!1),[b,x]=_.useState(!1),[v,T]=_.useState(!1),k=M=>{switch(M.toLowerCase()){case"openai":return"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300";case"together":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";case"replicate":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300";case"gemini":return"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}},C=M=>{switch(M.toLowerCase()){case"openai":return"OpenAI";case"together":return"Together AI";case"replicate":return"Replicate";case"gemini":return"Google Gemini";default:return M}},A=async()=>{if(!t){p("Authentication required");return}d(!0),p(null),s?.(e.id,"generating");try{const M=await N3(e.prompt,e.provider,e.model,e.modelKey||"",e.size||"",e.qualityTier||"",e.style||"",t,r);if(M.success&&M.imageUrl){let $=M.imageUrl;M.base64&&!M.base64.startsWith("data:")?$=`data:image/png;base64,${M.base64}`:M.base64&&($=M.base64),s?.(e.id,"complete",$,M.llmApiCall)}else{const $=M.error||"Image generation failed";p($),s?.(e.id,"error")}}catch(M){const $=M instanceof Error?M.message:"Image generation failed";p($),s?.(e.id,"error")}finally{d(!1)}},D=()=>{e.imageUrl&&n&&n(e.imageUrl)},B=()=>{if(e.imageUrl&&a){const M=`![${e.prompt.substring(0,100)}](${e.imageUrl})`;a(M)}},R=()=>{e.llmApiCall&&i&&i(e.llmApiCall)};return e.status==="pending"||!e.imageUrl&&!l&&!h?u.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-4",children:u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs("button",{onClick:A,disabled:l,className:"btn-primary flex items-center justify-center gap-2 py-3",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsxs("span",{children:["Generate Image for $",e.cost.toFixed(4)]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k(e.provider)}`,children:C(e.provider)}),u.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:e.model}),e.qualityTier&&u.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:e.qualityTier}),e.size&&u.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300",children:e.size})]}),e.constraints&&u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[u.jsxs("button",{onClick:()=>m(!f),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[u.jsx("svg",{className:`w-4 h-4 transform transition-transform ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),u.jsx("span",{children:"Model Constraints"})]}),f&&u.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1 pl-6",children:[e.constraints.maxSize&&u.jsxs("div",{children:[" Max size: ",e.constraints.maxSize]}),e.constraints.supportedSizes&&e.constraints.supportedSizes.length>0&&u.jsxs("div",{children:[" Supported sizes: ",e.constraints.supportedSizes.join(", ")]}),e.constraints.supportsStyle!==void 0&&u.jsxs("div",{children:[" Style support: ",e.constraints.supportsStyle?"Yes":"No"]})]})]}),e.availableAlternatives&&e.availableAlternatives.length>0&&u.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[u.jsxs("button",{onClick:()=>x(!b),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[u.jsx("svg",{className:`w-4 h-4 transform transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),u.jsxs("span",{children:["Available Alternatives (",e.availableAlternatives.length,")"]})]}),b&&u.jsx("div",{className:"mt-2 space-y-2 pl-6",children:e.availableAlternatives.map((M,$)=>u.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-700/50 rounded p-2 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${k(M.provider)}`,children:C(M.provider)}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:M.model})]}),u.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["$",M.cost.toFixed(4)]})]},$))})]})]})}):l||e.status==="generating"?u.jsx("div",{className:"bg-white dark:bg-gray-800 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Generating image with ",C(e.provider),"..."]}),u.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This may take a few seconds"})]})]})}):h||e.status==="error"?u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-red-900 dark:text-red-200",children:"Image Generation Failed"}),u.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:h||e.error||"An unknown error occurred"}),u.jsxs("button",{onClick:A,className:"mt-3 btn-secondary text-sm flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),u.jsx("span",{children:"Retry"})]})]})]})}):e.status==="complete"&&e.imageUrl?u.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden mb-4",children:[e.fallbackUsed&&u.jsxs("div",{className:"mx-4 mt-4 mb-2 flex items-center gap-2 text-sm bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded px-3 py-2",children:[u.jsx("svg",{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),u.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Primary provider unavailable, fallback provider used"})]}),v&&u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[u.jsx("h3",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 mb-3",children:" IMAGE GENERATION DETAILS"}),u.jsx("table",{className:"w-full text-sm mb-4",children:u.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Title"}),u.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:"Generated Image"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Final Prompt"}),u.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100 break-words",children:e.revisedPrompt||e.prompt})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Size"}),u.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.size||"1024x1024"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Model"}),u.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.model})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Provider"}),u.jsx("td",{className:"py-2",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k(e.provider)}`,children:C(e.provider)})})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Quality"}),u.jsx("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:e.qualityTier||"standard"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Cost"}),u.jsxs("td",{className:"py-2 text-gray-900 dark:text-gray-100",children:["$",e.cost.toFixed(4)]})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 pr-4 font-semibold text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"Status"}),u.jsx("td",{className:"py-2",children:u.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:" Success"})})]})]})}),e.llmApiCall&&u.jsxs("div",{className:"space-y-3",children:[e.llmApiCall.request&&u.jsx(AN,{data:e.llmApiCall.request,title:"Request Data"}),e.llmApiCall.response&&u.jsx(AN,{data:e.llmApiCall.response,title:"Response Data"})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:e.imageUrl,alt:e.prompt,className:"w-full"}),u.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n&&u.jsx("button",{onClick:D,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy image URL",children:u.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a&&u.jsx("button",{onClick:B,className:"p-1.5 bg-white/90 dark:bg-gray-800/90 hover:bg-white dark:hover:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm transition-colors",title:"Copy as markdown",children:u.jsx("svg",{className:"w-3.5 h-3.5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})})]})]}),u.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>T(!v),className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[u.jsx("svg",{className:`w-4 h-4 transform transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),u.jsxs("span",{className:"font-medium",children:[v?"Hide":"Show"," Details"]})]}),i&&e.llmApiCall&&u.jsxs("button",{onClick:R,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 border border-gray-300 dark:border-gray-600 rounded transition-colors",title:"View LLM call details",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{children:"LLM Info"})]})]})]}):null},Vp=({data:e,level:t=0,expanded:r=!1,expandPaths:n=[],currentPath:a="",expandAll:i=!1})=>{const s=i||r||n.some(x=>a===x||a.startsWith(x+".")),[l,d]=_.useState(s),p=(x=>x===null?"null":Array.isArray(x)?"array":typeof x)(e);if(p!=="object"&&p!=="array")return u.jsx("span",{className:`json-value json-${p}`,children:p==="string"?`"${e}"`:String(e)});const f=Array.isArray(e)?e.map((x,v)=>[v,x]):Object.entries(e),m=f.length===0,b=Array.isArray(e)?`Array(${e.length})`:`Object{${f.length}}`;return u.jsxs("div",{className:"json-tree",children:[u.jsxs("div",{className:"json-line",children:[!m&&u.jsx("button",{onClick:()=>d(!l),className:"json-toggle","aria-label":l?"Collapse":"Expand",children:l?"":""}),u.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"[":"{"}),!l&&!m&&u.jsxs("span",{className:"json-preview",children:[" ",b," "]}),!l&&u.jsx("span",{className:"json-bracket",children:Array.isArray(e)?"]":"}"})]}),l&&u.jsxs("div",{className:"json-content",style:{marginLeft:`${t*20+20}px`},children:[f.map(([x,v],T)=>{const k=a?`${a}.${x}`:String(x);return u.jsxs("div",{className:"json-item",children:[!Array.isArray(e)&&u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"json-key",children:['"',x,'"']}),u.jsx("span",{className:"json-colon",children:": "})]}),u.jsx(Vp,{data:v,level:t+1,expanded:!1,expandPaths:n,currentPath:k,expandAll:i}),T<f.length-1&&u.jsx("span",{className:"json-comma",children:","})]},x)}),u.jsx("div",{style:{marginLeft:"-20px"},className:"json-bracket",children:Array.isArray(e)?"]":"}"})]})]})},Yfe=e=>{if(typeof e!="string")return!1;const t=e.trim();if(!t||!(t.startsWith("{")||t.startsWith("[")))return!1;try{const r=JSON.parse(t);return typeof r=="object"&&r!==null}catch{return!1}},Qfe=e=>{try{return JSON.parse(e.trim())}catch{return null}},nye=({content:e,className:t=""})=>{if(Yfe(e)){const r=Qfe(e);if(r!==null)return u.jsx("div",{className:`json-container ${t}`,children:u.jsx(Vp,{data:r,expanded:!1})})}return u.jsx("div",{className:t,children:e})},Kfe=({images:e,maxDisplay:t=3,onImageClick:r,onGrabImage:n})=>{const[a,i]=_.useState(new Set),l=e.map(h=>typeof h=="string"?{src:h,alt:void 0}:h).slice(0,t);if(!e||e.length===0)return null;const d=(h,p,f)=>{h.stopPropagation(),n?.(p,f)};return u.jsx("div",{className:"my-4 flex gap-2 flex-wrap",children:l.map((h,p)=>a.has(p)?null:u.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-colors w-32 h-32",children:[u.jsx("img",{src:h.src,alt:h.alt||`Search result ${p+1}`,className:"w-full h-full object-cover cursor-pointer",loading:"lazy",onError:()=>i(f=>new Set(f).add(p)),onClick:()=>r?.(h.src)}),n&&u.jsx("button",{onClick:f=>d(f,h.src,h.alt||`Search result ${p+1}`),className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-600 hover:bg-blue-700 text-white text-xs px-2 py-1 rounded shadow-lg z-10",title:"Add to SWAG",children:" Grab"})]},`${h.src}-${p}`))})},Xfe=({selectedSnippetIds:e,onSelectionChange:t,userEmail:r})=>{const{getToken:n}=rs(),{snippets:a,getAllTags:i}=R0(),[s,l]=_.useState("text"),[d,h]=_.useState(""),[p,f]=_.useState(""),[m,b]=_.useState([]),[x,v]=_.useState(!1),[T,k]=_.useState(!1),[C,A]=_.useState([]),[D,B]=_.useState(.5);_.useEffect(()=>{const N=()=>{const j=localStorage.getItem("rag_config");if(j)try{const K=JSON.parse(j);K.similarityThreshold!==void 0&&B(K.similarityThreshold)}catch(K){console.error("Failed to parse RAG config:",K)}};N();const U=()=>N();return window.addEventListener("rag_config_updated",U),()=>{window.removeEventListener("rag_config_updated",U)}},[]);const R=async()=>{if(p.trim()){v(!0),k(!0);try{const N=await An(),U=await n(),j=await fetch(`${N}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...U?{Authorization:`Bearer ${U}`}:{}},body:JSON.stringify({query:p})});if(!j.ok)throw new Error("Failed to get query embedding");const{embedding:K}=await j.json(),Q=await bs.vectorSearch(K,20,D);console.log(` Vector search found ${Q.length} results with threshold ${D}`),b(Q)}catch(N){console.error("Vector search error:",N),alert("Vector search failed. Make sure snippets have embeddings generated.")}finally{v(!1)}}},M=()=>{let N=a;if(C.length>0&&(N=N.filter(U=>C.every(j=>U.tags?.includes(j)))),s==="text"&&d.trim()){const U=d.toLowerCase();N=N.filter(j=>j.title?.toLowerCase().includes(U)||j.content.toLowerCase().includes(U))}else if(s==="vector"&&T){const U=new Set(m.map(j=>String(j.snippet_id)));N=N.filter(j=>U.has(j.id))}return N},$=N=>{if(s!=="vector"||!T)return null;const U=m.find(j=>String(j.snippet_id)===N);return U?U.score:null},W=N=>{const U=new Set(e);U.has(N)?U.delete(N):U.add(N),t(U)},O=()=>{const N=M(),U=new Set;N.forEach(j=>U.add(j.id)),t(U)},Y=()=>{t(new Set)},X=M(),q=i();return u.jsxs("div",{className:"snippet-selector flex flex-col h-full bg-gray-50 dark:bg-gray-800",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:" Attach Context"}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.size>0&&`${e.size} selected`})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:O,disabled:X.length===0,className:"px-2 py-1 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Select All"}),u.jsx("button",{onClick:Y,disabled:e.size===0,className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),u.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800",children:u.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[" Select snippets to include as ",u.jsx("strong",{children:"full context"})," in your message. Unlike automatic RAG which finds relevant fragments, selected snippets are included in their entirety."]})}),u.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{l("text"),k(!1),b([])},className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${s==="text"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Text Search"}),u.jsx("button",{onClick:()=>l("vector"),className:`flex-1 px-3 py-2 text-sm font-medium rounded transition-colors ${s==="vector"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:" Semantic Search"})]})}),u.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-2",children:[s==="text"?u.jsx("input",{type:"text",placeholder:"Search by title or content...",value:d,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}):u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",placeholder:"Enter semantic search query...",value:p,onChange:N=>f(N.target.value),onKeyDown:N=>N.key==="Enter"&&R(),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("button",{onClick:R,disabled:x||!p.trim(),className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"":""})]}),s==="vector"&&T&&u.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Found ",m.length," results with similarity  ",D.toFixed(2)]})]}),q.length>0&&u.jsxs("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[u.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.map(N=>u.jsx("button",{onClick:()=>{A(U=>U.includes(N)?U.filter(j=>j!==N):[...U,N])},className:`px-2 py-1 text-xs rounded transition-colors ${C.includes(N)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:N},N))}),C.length>0&&u.jsx("button",{onClick:()=>A([]),className:"mt-2 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear tag filters"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:X.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:a.length===0?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm font-medium",children:"No snippets in knowledge base"}),u.jsx("p",{className:"text-xs mt-2",children:"Visit the Swag page to add snippets"})]}):s==="vector"&&!T?u.jsx("p",{className:"text-sm",children:"Enter a query and click Search to find semantically similar snippets"}):u.jsx("p",{className:"text-sm",children:"No snippets match your filters"})}):X.map(N=>{const U=e.has(N.id),j=$(N.id);return u.jsx("div",{onClick:()=>W(N.id),className:`border rounded p-3 cursor-pointer transition-all ${U?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-700 hover:shadow-md"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:U,onChange:()=>{},className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:N.title||"Untitled"}),j!==null&&u.jsxs("span",{className:"text-xs font-mono text-blue-600 dark:text-blue-400 whitespace-nowrap",children:[(j*100).toFixed(1),"%"]})]}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:N.content}),N.tags&&N.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:N.tags.map(K=>u.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:K},K))}),u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500 dark:text-gray-400",children:[u.jsx("span",{className:"capitalize",children:N.sourceType}),N.hasEmbedding&&u.jsx("span",{title:"Has embeddings",children:""})]})]})]})},N.id)})}),u.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900",children:u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:" Tip: Click a snippet to toggle selection. Selected snippets will be included as context when you send your message."})})]})},Jfe=({text:e,variant:t="icon",size:r="md",onStart:n,onEnd:a,shouldSummarize:i=!1,className:s=""})=>{const{state:l,speak:d,stop:h}=U3(),[p,f]=_.useState(!1),m=l.isPlaying||p;console.log("ReadButton render - isReading:",m,"state.isPlaying:",l.isPlaying,"localIsReading:",p),_.useEffect(()=>{f(l.isPlaying)},[l.isPlaying]),_.useEffect(()=>{p&&!l.isPlaying&&(console.log("ReadButton: Syncing local state with global state"),f(!1))},[p,l.isPlaying]);const b=_.useCallback(async()=>{if(m)console.log("ReadButton: Stop clicked"),f(!1),h(),a?.();else{console.log("ReadButton: Start clicked"),f(!0),n?.();try{await d(e,{shouldSummarize:i,onStart:()=>{console.log("TTS started"),f(!0)},onEnd:()=>{console.log("TTS ended"),f(!1),a?.()},onError:C=>{console.error("TTS error in callback:",C),f(!1)}})}catch(C){console.error("TTS error:",C),f(!1),a?.()}}},[m,e,i,d,h,n,a]);if(!l.isEnabled)return null;const x={sm:{icon:"w-4 h-4",button:"px-2 py-1 text-xs",fab:"w-10 h-10"},md:{icon:"w-5 h-5",button:"px-3 py-1.5 text-sm",fab:"w-12 h-12"},lg:{icon:"w-6 h-6",button:"px-4 py-2 text-base",fab:"w-16 h-16"}},v=x[r].icon,T=()=>u.jsx("svg",{className:v,fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"})}),k=()=>u.jsx("svg",{className:v,fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})});return t==="icon"?u.jsx("button",{onClick:b,className:`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${s}`,title:m?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:l.isPlaying&&!m,children:m?u.jsx(k,{}):u.jsx(T,{})}):t==="button"?u.jsx("button",{onClick:b,className:`${x[r].button} rounded-lg flex items-center gap-2 transition-colors ${m?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"} ${s}`,title:m?"Stop reading (If stuck, wait 30s or refresh page)":"Read aloud",disabled:l.isPlaying&&!m,children:m?u.jsxs(u.Fragment,{children:[u.jsx(k,{}),"Stop"]}):u.jsxs(u.Fragment,{children:[u.jsx(T,{}),"Read"]})}):t==="fab"?u.jsx("button",{onClick:b,className:`${x[r].fab} fixed bottom-20 right-6 rounded-full shadow-lg flex items-center justify-center z-40 transition-colors ${m?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"} text-white ${s}`,title:m?"Stop reading":"Read aloud",disabled:l.isPlaying&&!m,children:m?u.jsx(k,{}):u.jsx(T,{})}):null},Zfe=()=>{const{state:e,stop:t}=U3();return e.isPlaying?u.jsxs("button",{onClick:t,className:"fixed top-4 right-20 z-[60] px-4 py-2 bg-red-600 text-white rounded-lg shadow-lg hover:bg-red-700 transition-colors flex items-center gap-2 animate-pulse",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12"})}),"Stop Reading"]}):null},NN=({rawResponse:e,extractionMetadata:t})=>{const[r,n]=_.useState(null);let a=null,i=[];try{e&&(a=JSON.parse(e),a.results&&Array.isArray(a.results)&&(i=a.results))}catch(s){console.log("Failed to parse rawResponse:",s)}return console.log(" ToolTransparency received:",{hasRawResponse:!!e,rawResponseLength:e?.length,hasExtraction:!!t,parsedResults:i.length,rawResponsePreview:e?e.substring(0,100)+"...":"none"}),!e&&!t?(console.log(" ToolTransparency: No data, returning null"),null):(console.log(" ToolTransparency: Rendering with",i.length,"results"),u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mt-3 pt-3 border-t-4 border-purple-400 dark:border-purple-600 bg-purple-50 dark:bg-purple-950 p-3 rounded",children:[u.jsxs("div",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 mb-3 flex items-center gap-2",children:[" Search Results Transparency",u.jsxs("span",{className:"text-xs font-normal opacity-75",children:["(",i.length," results)"]})]}),u.jsxs("div",{className:"space-y-4",children:[i.map((s,l)=>{const d=s.rawHtml||s.rawContent||"",h=s.content||"";return u.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[u.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:["Result ",l+1,": ",s.title||s.url]}),d&&u.jsx("div",{className:"mb-3",children:u.jsxs("button",{onClick:()=>n({content:d,title:`Raw Content: ${s.title||s.url}`}),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded flex items-center gap-2",children:[" View Full Raw Scraped Content",u.jsxs("span",{className:"opacity-75",children:["(",d.length.toLocaleString()," chars)"]})]})}),h&&u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1 flex items-center gap-2",children:[" Content Sent to LLM",u.jsxs("span",{className:"opacity-75",children:["(",h.length.toLocaleString()," chars)"]})]}),u.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-300 dark:border-green-700 rounded p-3 max-h-96 overflow-y-auto",children:u.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:u.jsx(jL,{children:h})})})]}),u.jsxs("div",{className:"mb-2",children:[u.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-400 mb-1",children:" Parsed Page Structure & Metadata"}),u.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:u.jsx(md,{data:{url:s.url,title:s.title,snippet:s.snippet,images:s.page_content?.images||s.images||[],youtube:s.youtube||[],media:s.media||[],links:s.links||[],page_content:s.page_content,summary:s.page_content?.summary,structure:s.page_content?.structure,metadata:{contentLength:h.length,rawContentLength:d.length,hasImages:!!(s.page_content?.images?.length||s.images?.length),hasYouTube:!!s.youtube?.length,hasMedia:!!s.media?.length,hasLinks:!!s.links?.length}}})})]})]},l)}),t&&u.jsxs("div",{className:"border border-purple-300 dark:border-purple-700 rounded p-3 bg-white dark:bg-gray-900",children:[u.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-2",children:" Overall Extraction Metadata"}),u.jsx("div",{className:"bg-purple-50 dark:bg-purple-950 border border-purple-300 dark:border-purple-700 rounded p-2 max-h-96 overflow-y-auto",children:u.jsx(md,{data:t})})]})]})]}),r&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-300 dark:border-gray-700",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:r.title}),u.jsx("button",{onClick:()=>n(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm",children:" Close"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 font-mono",children:r.content})}),u.jsxs("div",{className:"p-4 border-t border-gray-300 dark:border-gray-700 flex gap-2",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.content),alert("Copied to clipboard!")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded text-sm",children:" Copy to Clipboard"}),u.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center",children:[r.content.length.toLocaleString()," characters"]})]})]})})]}))},LN=({content:e,chartCode:t})=>{const[r,n]=ir.useState(!1),[a,i]=ir.useState(!1);try{const s=typeof e=="string"?JSON.parse(e):e,d=t||(f=>{if(!f)return null;const m=f.match(/```mermaid\s*([\s\S]*?)```/);if(m&&m[1]){const b=m[1].trim();return b.includes("[Your Mermaid diagram code here]")||b.includes("Your Mermaid diagram code here")?null:b}return null})(s.instructions||""),h=()=>{s.instructions&&navigator.clipboard.writeText(s.instructions).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},p=()=>{d&&navigator.clipboard.writeText(d).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)})};return u.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-950/30 dark:to-indigo-950/30 rounded-lg border border-purple-200 dark:border-purple-700 overflow-hidden",children:u.jsx("table",{className:"w-full text-sm",children:u.jsxs("tbody",{children:[u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[u.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 w-32 bg-purple-100/50 dark:bg-purple-900/30",children:" Chart Type"}),u.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:u.jsx("span",{className:"inline-flex items-center px-2.5 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-200 rounded-full text-xs font-medium border border-purple-300 dark:border-purple-600",children:s.chart_type||"N/A"})})]}),u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[u.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30",children:" Description"}),u.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:s.description||"N/A"})]}),d&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-700",children:[u.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Chart Code"}),u.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[u.jsx("button",{onClick:p,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy Mermaid code to clipboard",children:a?u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})}),u.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-gray-900 dark:bg-gray-950 text-green-400 dark:text-green-300 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:d})]})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"font-semibold text-purple-700 dark:text-purple-300 p-3 bg-purple-100/50 dark:bg-purple-900/30 align-top",children:" Full Instructions"}),u.jsxs("td",{className:"p-3 text-gray-800 dark:text-gray-200 relative",children:[u.jsx("button",{onClick:h,className:"absolute top-2 right-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded-md transition-colors duration-200 shadow-sm hover:shadow flex items-center gap-1.5 z-10",title:"Copy full instructions to clipboard",children:r?u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy All"]})}),u.jsx("pre",{className:"whitespace-pre-wrap font-mono text-xs bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-96 overflow-y-auto pr-28",children:s.instructions||"No instructions available"})]})]})]})})})}catch(s){return console.error("Error parsing generate_chart result:",s),u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:typeof e=="string"?e:JSON.stringify(e,null,2)})}},eme=({videos:e,onOpenPlayer:t})=>{const{playTrack:r,addTracksToStart:n}=Dc(),a=i=>{n([{videoId:i.videoId,title:i.title,url:i.url,thumbnail:i.thumbnail,channel:i.channel,duration:i.duration}]),setTimeout(()=>{r(0),t&&t()},0)};return e.length===0?null:u.jsxs("div",{className:"youtube-video-results my-4 space-y-3",children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:[" YouTube Videos (",e.length,")"]}),e.map((i,s)=>u.jsxs("div",{onClick:()=>a(i),className:"flex gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors cursor-pointer",children:[i.thumbnail&&u.jsxs("div",{className:"flex-shrink-0 relative",children:[u.jsx("img",{src:i.thumbnail,alt:i.title,className:"w-32 h-20 object-cover rounded"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"bg-black bg-opacity-60 rounded-full p-2",children:u.jsx("span",{className:"text-white text-2xl",children:""})})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:i.title}),i.channel&&u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:i.channel}),i.description&&u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:i.description}),i.duration&&u.jsxs("span",{className:"inline-block text-xs text-gray-500 dark:text-gray-500 mt-1",children:[" ",i.duration]})]}),u.jsx("div",{className:"flex-shrink-0 flex items-center",children:u.jsxs("button",{onClick:l=>{l.stopPropagation(),a(i)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Play video",children:[u.jsx("span",{className:"text-lg",children:""}),u.jsx("span",{className:"text-sm font-medium",children:"Play"})]})})]},i.videoId||s)),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:" All videos have been added to your playlist"})]})},tme=({results:e})=>{const[t,r]=_.useState(new Set),[n,a]=_.useState(new Set),i=l=>{r(d=>{const h=new Set(d);return h.has(l)?h.delete(l):h.add(l),h})},s=l=>{a(d=>{const h=new Set(d);return h.has(l)?h.delete(l):h.add(l),h})};return!e||e.length===0?null:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200",children:[" Search Results (",e.length,")"]}),e.map((l,d)=>{const h=t.has(d),p=n.has(d),f={url:l.url,title:l.title,description:l.description,score:l.score,duckduckgoScore:l.duckduckgoScore,state:l.state,contentLength:l.contentLength,fetchTimeMs:l.fetchTimeMs,originalLength:l.originalLength,intelligentlyExtracted:l.intelligentlyExtracted,truncated:l.truncated,images_count:l.images?.length||0,youtube_count:l.youtube?.length||0,media_count:l.media?.length||0,links_count:l.links?.length||0,contentError:l.contentError};return u.jsxs("div",{className:"border border-purple-200 dark:border-purple-700 rounded-lg p-3 bg-purple-50/30 dark:bg-purple-900/10",children:[u.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[u.jsxs("span",{className:"flex-shrink-0 text-purple-600 dark:text-purple-400 font-bold text-sm",children:["#",d+1]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 text-sm mb-1",children:l.title||`Result ${d+1}`}),l.url&&u.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block",children:l.url})]})]}),(l.description||l.snippet)&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2 italic",children:l.description||l.snippet}),l.contentError&&u.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2 mb-2",children:u.jsxs("span",{className:"text-xs text-red-700 dark:text-red-300",children:[" ",l.contentError]})}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[l.contentLength!==void 0&&u.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded",children:[(l.contentLength/1024).toFixed(1)," KB"]}),l.fetchTimeMs!==void 0&&u.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded",children:[l.fetchTimeMs,"ms"]}),l.images&&l.images.length>0&&u.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded",children:[" ",l.images.length]}),l.links&&l.links.length>0&&u.jsxs("span",{className:"text-[10px] px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200 rounded",children:[" ",l.links.length]}),l.truncated&&u.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 rounded",children:" Truncated"})]}),u.jsxs("div",{className:"flex gap-2",children:[l.content&&u.jsxs("button",{onClick:()=>i(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors font-medium",children:[u.jsx("span",{children:h?"":""}),u.jsx("span",{children:"Content Sent to LLM"}),l.originalLength&&u.jsxs("span",{className:"opacity-75",children:["(",(l.originalLength/1024).toFixed(1)," KB)"]})]}),u.jsxs("button",{onClick:()=>s(d),className:"flex items-center gap-1 px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors font-medium",children:[u.jsx("span",{children:p?"":""}),u.jsx("span",{children:"Metadata JSON"})]})]}),h&&l.content&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-800 dark:text-purple-200 mb-2",children:[" Content Sent to LLM:",l.intelligentlyExtracted&&u.jsx("span",{className:"ml-2 text-green-600 dark:text-green-400",children:" Intelligently Extracted"})]}),u.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-700 p-3 max-h-96 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200 leading-relaxed font-mono",children:l.content})})]}),p&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-200 dark:border-purple-700",children:[u.jsx("div",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Scrape Metadata:"}),u.jsx("div",{className:"bg-white dark:bg-gray-900 rounded border border-blue-200 dark:border-blue-700 p-3 max-h-96 overflow-y-auto",children:u.jsx(Vp,{data:f})})]})]},d)})]})},rme=({isOpen:e,onClose:t,onExampleClick:r,location:n,locationLoading:a,requestLocation:i,clearLocation:s})=>{if(!e)return null;const l=d=>{r(d),t()};return ir.useEffect(()=>{const d=h=>{h.key==="Escape"&&t()};if(e)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:t,children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:" Example Prompts"}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"overflow-y-auto p-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Search & Research"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("What are the latest developments in artificial intelligence this week?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Latest AI developments"}),u.jsx("button",{onClick:()=>l("Find current news about climate change policy updates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Climate change policy news"}),u.jsx("button",{onClick:()=>l("What is the current stock price of Tesla and recent news about the company?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Stock price lookup with news"}),u.jsx("button",{onClick:()=>l("Search for recent scientific breakthroughs in quantum computing"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scientific research updates"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" YouTube Search & Transcripts"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Find YouTube videos about TypeScript best practices"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search YouTube videos"}),u.jsx("button",{onClick:()=>l("Get transcript with timestamps from https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Get YouTube transcript (with timestamps)"}),u.jsx("button",{onClick:()=>l("Find the top 5 Python tutorial videos and summarize their content"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search + batch summarize videos"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 3 YouTube tools available"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Audio/Video Transcription (Whisper AI)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Transcribe this: http://localhost:3000/samples/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:" Local Dev: AI & ML discussion (~4min)"}),u.jsx("button",{onClick:()=>l("Transcribe this: https://llmproxy-media-samples.s3.amazonaws.com/audio/long-form-ai-speech.mp3"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe: AI & ML discussion (~4min)"}),u.jsx("button",{onClick:()=>l("Transcribe this YouTube video: https://www.youtube.com/watch?v=dQw4w9WgXcQ"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe YouTube video"}),u.jsx("button",{onClick:()=>l("Transcribe this audio file: https://llmproxy-media-samples.s3.amazonaws.com/audio/hello-test.wav and summarize it"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Transcribe + auto-summarize"}),u.jsxs("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:[" OpenAI Whisper with progress tracking",u.jsx("br",{})," Local dev example only works with localhost backend"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Math & Calculations (JavaScript Sandbox)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Calculate compound interest on $10,000 at 7% annual rate for 15 years"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compound interest calculator"}),u.jsx("button",{onClick:()=>l("Generate a multiplication table for numbers 1-12"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Multiplication table"}),u.jsx("button",{onClick:()=>l("Calculate the Fibonacci sequence up to the 20th number"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Fibonacci sequence"}),u.jsx("button",{onClick:()=>l("Convert 100 USD to EUR, GBP, and JPY at current exchange rates"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Currency conversion"}),u.jsx("button",{onClick:()=>l("Calculate my BMI if I weigh 70kg and am 175cm tall"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"BMI calculator"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Secure sandbox execution"})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Charts & Diagrams (Mermaid.js)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Create a flowchart showing the software development lifecycle from planning to deployment"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Flowchart: Dev lifecycle"}),u.jsx("button",{onClick:()=>l("Show a sequence diagram for user authentication with OAuth 2.0"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Sequence: OAuth flow"}),u.jsx("button",{onClick:()=>l("Generate a Gantt chart for a 3-month web app project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Gantt: Project timeline"}),u.jsx("button",{onClick:()=>l("Create a class diagram for an e-commerce system with User, Order, and Product"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Class diagram: E-commerce"}),u.jsx("button",{onClick:()=>l("Show a state diagram for an order processing system"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"State diagram: Order processing"}),u.jsx("button",{onClick:()=>l("Create an ER diagram for a blog database with Users, Posts, Comments"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"ER diagram: Blog schema"}),u.jsx("button",{onClick:()=>l("Show a pie chart of renewable energy distribution: Solar 30%, Wind 35%, Hydro 25%, Geo 10%"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Pie chart: Energy sources"}),u.jsx("button",{onClick:()=>l("Create a mindmap for planning a mobile app development project"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Mindmap: App planning"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" 9 chart types with auto-fix"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Web Scraping & Content Extraction"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Scrape and summarize https://news.ycombinator.com"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: Hacker News"}),u.jsx("button",{onClick:()=>l("Extract key points from https://en.wikipedia.org/wiki/Artificial_intelligence"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Extract: Wikipedia article"}),u.jsx("button",{onClick:()=>l("Get the full documentation from https://react.dev/learn"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: React docs"}),u.jsx("button",{onClick:()=>l("Analyze this GitHub repo: https://github.com/microsoft/TypeScript"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Scrape: GitHub repository"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Universal scraper"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Browser Automation (Selenium)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Scrape https://www.linkedin.com/login and tell me what you see - this requires login"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: LinkedIn"}),u.jsx("button",{onClick:()=>l("Access https://twitter.com/home and get the latest tweets - requires authentication"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Twitter/X"}),u.jsx("button",{onClick:()=>l("Get content from https://www.instagram.com/instagram/ - login needed to view posts"),className:"w-full text-left px-3 py-2 text-sm rounded bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-800 dark:text-amber-300 transition-colors border border-amber-200 dark:border-amber-800",children:" Login Required: Instagram"}),u.jsx("button",{onClick:()=>l("Scrape https://www.google.com/recaptcha/api2/demo and complete the captcha challenge"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: Google reCAPTCHA v2"}),u.jsx("button",{onClick:()=>l("Access https://2captcha.com/demo/recaptcha-v2 and solve the captcha"),className:"w-full text-left px-3 py-2 text-sm rounded bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 text-red-800 dark:text-red-300 transition-colors border border-red-200 dark:border-red-800",children:" CAPTCHA: reCAPTCHA Demo Site"}),u.jsx("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-400 italic",children:" Opens browser for manual login/CAPTCHA solving"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Tier 3/4: Selenium with interactive mode (local only)"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400",children:" Location-Based Services"}),u.jsx("button",{onClick:async()=>{n?s():await i()},className:`px-2 py-1 text-xs rounded transition-colors ${n?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:n?"Location enabled - Click to disable":"Location disabled - Click to enable",children:a?"":n?" Enabled":" Disabled"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Find the top 5 restaurants near my current location"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearby restaurants"}),u.jsx("button",{onClick:()=>l("Search for coffee shops within 2 miles that are open now"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find open coffee shops"}),u.jsx("button",{onClick:()=>l("What is the weather forecast for my location for the next 3 days?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Local weather forecast"}),u.jsx("button",{onClick:()=>l("Find the nearest hospital or emergency room"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find nearest hospital"}),u.jsx("button",{onClick:()=>l("What tourist attractions are in my area?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Find local attractions"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Privacy-first location"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" AI Image Generation"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Generate an image of a serene mountain landscape at sunset with golden light"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Landscape: Mountain sunset"}),u.jsx("button",{onClick:()=>l("Create a photorealistic portrait of a professional business woman smiling"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Portrait: Business professional"}),u.jsx("button",{onClick:()=>l("Generate a cartoon-style illustration of a friendly robot helping humans"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Cartoon: Friendly robot"}),u.jsx("button",{onClick:()=>l("Create a fast sketch of a coffee cup on a desk"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Quick sketch: Coffee cup"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Smart model selection"})]})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Internal Knowledge Base (RAG)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("How do I configure OpenAI embeddings in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: OpenAI config"}),u.jsx("button",{onClick:()=>l("What is the RAG implementation in this codebase?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: RAG system"}),u.jsx("button",{onClick:()=>l("How do I deploy Lambda functions in this project?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Lambda deployment"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Semantic search with RAG"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Data Analysis & Comparison"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Compare population growth rates of the top 5 most populous countries"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Population growth"}),u.jsx("button",{onClick:()=>l("What are the key differences between Python and JavaScript?"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: Python vs JavaScript"}),u.jsx("button",{onClick:()=>l("Analyze pros and cons of renewable energy sources"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Analyze: Renewable energy"}),u.jsx("button",{onClick:()=>l("Compare the performance benchmarks of React, Vue, and Angular"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Compare: JS frameworks"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Multi-Step Workflows (Backend Todos)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Create a complete React blog application with authentication, post creation, and comments. Break this down into steps and implement each one."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Build: React blog app"}),u.jsx("button",{onClick:()=>l("Help me set up a full CI/CD pipeline for my Node.js app. Plan out all the steps needed and execute them in order."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Setup: CI/CD pipeline"}),u.jsx("button",{onClick:()=>l("Migrate my Express server from JavaScript to TypeScript. Create a step-by-step plan and execute each phase."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Migrate: JS to TypeScript"}),u.jsx("button",{onClick:()=>l("Set up a complete AWS deployment for my application including VPC, RDS database, Lambda functions, and API Gateway. Plan and implement this step by step."),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Deploy: AWS infrastructure"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Auto-progresses through steps (max 5 iterations)"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:" Knowledge Snippets (Google Sheets)"}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l('Save this code example to my snippets with tags "javascript" and "async": async function fetchData() { const response = await fetch(url); return response.json(); }'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Code snippet"}),u.jsx("button",{onClick:()=>l("Remember this information: TypeScript 5.0 introduced const type parameters for generic functions"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Save: Quick note"}),u.jsx("button",{onClick:()=>l('Search my snippets for "react hooks"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: Saved snippets"}),u.jsx("button",{onClick:()=>l('Find all my snippets tagged with "python"'),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors",children:"Search: By tag"}),u.jsx("p",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-500 italic",children:" Stored in your personal Google Sheet"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-amber-300 dark:border-amber-600",children:[u.jsx("h3",{className:"text-sm font-bold text-amber-600 dark:text-amber-400",children:" Recursive Agent (ask_llm)"}),u.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-amber-200 dark:bg-amber-900/50 text-amber-800 dark:text-amber-300 rounded font-semibold",children:" HIGH TOKENS"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Search for recent quantum computing research papers, scrape the top 3, analyze their methodologies, and create a comprehensive comparison table"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Multi-step research + analysis"}),u.jsx("button",{onClick:()=>l("Find Python async/await tutorials, analyze the best one, extract code examples, and generate a beginner-friendly explanation with working examples"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Tutorial extraction + synthesis"}),u.jsx("button",{onClick:()=>l("Search for the latest TypeScript features, create a detailed summary, generate code examples, and save the best practices to my snippets"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-amber-50 dark:hover:bg-amber-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-amber-300",children:"Research + documentation + save"}),u.jsxs("p",{className:"px-3 py-2 text-xs text-amber-600 dark:text-amber-500 italic bg-amber-50 dark:bg-amber-900/20 rounded border border-amber-200 dark:border-amber-800",children:[" Spawns sub-agent with full tool access",u.jsx("br",{})," Uses 5-10x more tokens",u.jsx("br",{})," Enable in Settings first"]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center mb-2 pb-2 border-b border-red-400 dark:border-red-600",children:[u.jsx("h3",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:" Advanced Reasoning (o1/DeepSeek-R1)"}),u.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-red-300 dark:bg-red-900/50 text-red-900 dark:text-red-300 rounded font-bold animate-pulse",children:" EXTREME"})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{onClick:()=>l("Prove that the square root of 2 is irrational using a step-by-step logical proof with explicit reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Mathematical proof (irrationality)"}),u.jsx("button",{onClick:()=>l("Analyze the time complexity of quicksort and prove why it is O(n log n) on average with detailed step-by-step reasoning"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Algorithm complexity proof"}),u.jsx("button",{onClick:()=>l("Design a normalized database schema for an e-commerce platform with explicit reasoning about normalization tradeoffs, performance implications, and scalability considerations"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Architecture design + reasoning"}),u.jsx("button",{onClick:()=>l("Debug this code and explain the logical steps to identify the bug: function fibonacci(n) { if (n <= 1) return n; return fibonacci(n-1) + fibonacci(n-3); }"),className:"w-full text-left px-3 py-2 text-sm rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-gray-700 dark:text-gray-300 transition-colors border border-transparent hover:border-red-300",children:"Logical debugging analysis"}),u.jsxs("p",{className:"px-3 py-2 text-xs text-red-700 dark:text-red-500 italic bg-red-50 dark:bg-red-900/20 rounded border border-red-300 dark:border-red-800 font-semibold",children:[" Uses OpenAI o1 or DeepSeek-R1",u.jsx("br",{})," Maximum reasoning depth",u.jsx("br",{})," Uses 10-50x MORE tokens",u.jsx("br",{})," Enable in Settings first"]})]})]})]})]})})]})})},nme=({systemPrompt:e,setSystemPrompt:t})=>{const[r,n]=_.useState(!1),[a,i]=_.useState(!1),[s,l]=_.useState("");return e?u.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:u.jsx("div",{className:"flex items-start gap-2 max-w-screen-2xl mx-auto",children:a?u.jsxs(u.Fragment,{children:[u.jsx("textarea",{value:s,onChange:d=>l(d.target.value),className:"flex-1 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded p-2 min-h-[80px] resize-y focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter system prompt..."}),u.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[u.jsx("button",{onClick:()=>{t(s),i(!1)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Save system prompt",children:"Save"}),u.jsx("button",{onClick:()=>{l(e),i(!1)},className:"px-3 py-1.5 bg-gray-400 hover:bg-gray-500 text-white text-xs rounded transition-colors",title:"Cancel editing",children:"Cancel"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-1 rounded transition-colors",onClick:()=>n(!r),title:r?"Click to collapse":"Click to expand",children:r?e:e.length>200?e.substring(0,200)+"...":e}),u.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[u.jsx("button",{onClick:()=>{l(e),i(!0),n(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors",title:"Edit system prompt",children:"Edit"}),u.jsx("button",{onClick:()=>{confirm("Clear the system prompt?")&&(t(""),i(!1))},className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors",title:"Clear system prompt",children:"Clear"})]})]})})}):null},ame=({systemPrompt:e,selectedSnippetIds:t,showSnippetsPanel:r,messageCount:n,onNewChat:a,onShowLoadDialog:i,onToggleSnippetsPanel:s,onShowExamplesModal:l,onShowShareDialog:d})=>{const{t:h}=yd(),p=Ic();return u.jsx("div",{className:"flex flex-wrap items-center gap-2 md:px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:u.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[u.jsxs("button",{onClick:a,className:"bg-green-600 hover:bg-green-700 text-white p-2 md:px-3 md:py-1.5 rounded font-medium text-sm transition-colors flex items-center gap-1.5",title:h("chat.newChat"),"aria-label":h("chat.newChat"),children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:h("chat.newChat")})]}),u.jsxs("button",{onClick:i,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:h("chat.chatHistory"),"aria-label":h("chat.chatHistory"),children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:h("chat.history")})]}),u.jsxs("button",{onClick:()=>p("/planning"),className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:e?"Edit system prompt and planning":"Create a plan","aria-label":h(e?"chat.editPlan":"chat.makeAPlan"),children:[u.jsx("span",{children:e?"":""}),u.jsx("span",{className:"hidden md:inline",children:h(e?"chat.editPlan":"chat.makeAPlan")})]}),u.jsxs("button",{onClick:l,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:h("chat.examples"),"aria-label":h("chat.examples"),children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:h("chat.examples")})]}),u.jsxs("button",{onClick:d,className:"btn-secondary text-sm p-2 md:px-3 md:py-1.5 flex items-center gap-1.5",title:"Share this conversation","aria-label":"Share conversation",disabled:n===0,children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:"Share"})]}),u.jsxs("button",{onClick:s,className:`text-sm p-2 md:px-3 md:py-1.5 rounded font-medium transition-colors flex items-center gap-1.5 ${r?"bg-blue-600 hover:bg-blue-700 text-white":"btn-secondary"}`,title:h("chat.attachContextTooltip"),"aria-label":h("chat.attachContext"),children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:h("chat.attachContext")}),t.size>0&&u.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-white text-blue-600 rounded-full font-bold",children:t.size})]})]})})},ime=({attachedFiles:e,onRemoveAttachment:t})=>e.length===0?null:u.jsx("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.map((r,n)=>u.jsxs("div",{className:"relative group bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 p-2 flex items-center gap-2",children:[r.preview?u.jsx("img",{src:r.preview,alt:r.name,className:"w-12 h-12 object-cover rounded"}):u.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded",children:u.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate max-w-[150px]",children:r.name}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(r.size/1024).toFixed(1)," KB"]})]}),u.jsx("button",{onClick:()=>t(n),className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",title:"Remove file",children:""})]},n))}),sme=({isDragging:e})=>e?u.jsx("div",{className:"absolute inset-0 z-50 bg-blue-500/20 dark:bg-blue-400/20 backdrop-blur-sm flex items-center justify-center border-4 border-dashed border-blue-500 dark:border-blue-400",children:u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-2xl",children:u.jsxs("div",{className:"text-center",children:[u.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-blue-500 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Drop files here"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Images (JPEG, PNG, GIF, WebP) and PDFs supported"}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Max: 5MB for images, 10MB for PDFs"})]})})}):null;var ome=Object.defineProperty,C0=Object.getOwnPropertySymbols,U6=Object.prototype.hasOwnProperty,$6=Object.prototype.propertyIsEnumerable,PN=(e,t,r)=>t in e?ome(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vw=(e,t)=>{for(var r in t||(t={}))U6.call(t,r)&&PN(e,r,t[r]);if(C0)for(var r of C0(t))$6.call(t,r)&&PN(e,r,t[r]);return e},ww=(e,t)=>{var r={};for(var n in e)U6.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&C0)for(var n of C0(e))t.indexOf(n)<0&&$6.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Pc;(e=>{const t=class pr{constructor(d,h,p,f){if(this.version=d,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],d<pr.MIN_VERSION||d>pr.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(p);if(this.drawCodewords(b),f==-1){let x=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const T=this.getPenaltyScore();T<x&&(f=v,x=T),this.applyMask(v)}}a(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(d,h){const p=e.QrSegment.makeSegments(d);return pr.encodeSegments(p,h)}static encodeBinary(d,h){const p=e.QrSegment.makeBytes(d);return pr.encodeSegments([p],h)}static encodeSegments(d,h,p=1,f=40,m=-1,b=!0){if(!(pr.MIN_VERSION<=p&&p<=f&&f<=pr.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,v;for(x=p;;x++){const A=pr.getNumDataCodewords(x,h)*8,D=s.getTotalBits(d,x);if(D<=A){v=D;break}if(x>=f)throw new RangeError("Data too long")}for(const A of[pr.Ecc.MEDIUM,pr.Ecc.QUARTILE,pr.Ecc.HIGH])b&&v<=pr.getNumDataCodewords(x,A)*8&&(h=A);let T=[];for(const A of d){r(A.mode.modeBits,4,T),r(A.numChars,A.mode.numCharCountBits(x),T);for(const D of A.getData())T.push(D)}a(T.length==v);const k=pr.getNumDataCodewords(x,h)*8;a(T.length<=k),r(0,Math.min(4,k-T.length),T),r(0,(8-T.length%8)%8,T),a(T.length%8==0);for(let A=236;T.length<k;A^=253)r(A,8,T);let C=[];for(;C.length*8<T.length;)C.push(0);return T.forEach((A,D)=>C[D>>>3]|=A<<7-(D&7)),new pr(x,h,C,m)}getModule(d,h){return 0<=d&&d<this.size&&0<=h&&h<this.size&&this.modules[h][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),h=d.length;for(let p=0;p<h;p++)for(let f=0;f<h;f++)p==0&&f==0||p==0&&f==h-1||p==h-1&&f==0||this.drawAlignmentPattern(d[p],d[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const h=this.errorCorrectionLevel.formatBits<<3|d;let p=h;for(let m=0;m<10;m++)p=p<<1^(p>>>9)*1335;const f=(h<<10|p)^21522;a(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let p=0;p<12;p++)d=d<<1^(d>>>11)*7973;const h=this.version<<12|d;a(h>>>18==0);for(let p=0;p<18;p++){const f=n(h,p),m=this.size-11+p%3,b=Math.floor(p/3);this.setFunctionModule(m,b,f),this.setFunctionModule(b,m,f)}}drawFinderPattern(d,h){for(let p=-4;p<=4;p++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(p)),b=d+f,x=h+p;0<=b&&b<this.size&&0<=x&&x<this.size&&this.setFunctionModule(b,x,m!=2&&m!=4)}}drawAlignmentPattern(d,h){for(let p=-2;p<=2;p++)for(let f=-2;f<=2;f++)this.setFunctionModule(d+f,h+p,Math.max(Math.abs(f),Math.abs(p))!=1)}setFunctionModule(d,h,p){this.modules[h][d]=p,this.isFunction[h][d]=!0}addEccAndInterleave(d){const h=this.version,p=this.errorCorrectionLevel;if(d.length!=pr.getNumDataCodewords(h,p))throw new RangeError("Invalid argument");const f=pr.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][h],m=pr.ECC_CODEWORDS_PER_BLOCK[p.ordinal][h],b=Math.floor(pr.getNumRawDataModules(h)/8),x=f-b%f,v=Math.floor(b/f);let T=[];const k=pr.reedSolomonComputeDivisor(m);for(let A=0,D=0;A<f;A++){let B=d.slice(D,D+v-m+(A<x?0:1));D+=B.length;const R=pr.reedSolomonComputeRemainder(B,k);A<x&&B.push(0),T.push(B.concat(R))}let C=[];for(let A=0;A<T[0].length;A++)T.forEach((D,B)=>{(A!=v-m||B>=x)&&C.push(D[A])});return a(C.length==b),C}drawCodewords(d){if(d.length!=Math.floor(pr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const b=p-m,v=(p+1&2)==0?this.size-1-f:f;!this.isFunction[v][b]&&h<d.length*8&&(this.modules[v][b]=n(d[h>>>3],7-(h&7)),h++)}}a(h==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let p=0;p<this.size;p++){let f;switch(d){case 0:f=(p+h)%2==0;break;case 1:f=h%2==0;break;case 2:f=p%3==0;break;case 3:f=(p+h)%3==0;break;case 4:f=(Math.floor(p/3)+Math.floor(h/2))%2==0;break;case 5:f=p*h%2+p*h%3==0;break;case 6:f=(p*h%2+p*h%3)%2==0;break;case 7:f=((p+h)%2+p*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][p]&&f&&(this.modules[h][p]=!this.modules[h][p])}}getPenaltyScore(){let d=0;for(let m=0;m<this.size;m++){let b=!1,x=0,v=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[m][T]==b?(x++,x==5?d+=pr.PENALTY_N1:x>5&&d++):(this.finderPenaltyAddHistory(x,v),b||(d+=this.finderPenaltyCountPatterns(v)*pr.PENALTY_N3),b=this.modules[m][T],x=1);d+=this.finderPenaltyTerminateAndCount(b,x,v)*pr.PENALTY_N3}for(let m=0;m<this.size;m++){let b=!1,x=0,v=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][m]==b?(x++,x==5?d+=pr.PENALTY_N1:x>5&&d++):(this.finderPenaltyAddHistory(x,v),b||(d+=this.finderPenaltyCountPatterns(v)*pr.PENALTY_N3),b=this.modules[T][m],x=1);d+=this.finderPenaltyTerminateAndCount(b,x,v)*pr.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let b=0;b<this.size-1;b++){const x=this.modules[m][b];x==this.modules[m][b+1]&&x==this.modules[m+1][b]&&x==this.modules[m+1][b+1]&&(d+=pr.PENALTY_N2)}let h=0;for(const m of this.modules)h=m.reduce((b,x)=>b+(x?1:0),h);const p=this.size*this.size,f=Math.ceil(Math.abs(h*20-p*10)/p)-1;return a(0<=f&&f<=9),d+=f*pr.PENALTY_N4,a(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let p=[6];for(let f=this.size-7;p.length<d;f-=h)p.splice(1,0,f);return p}}static getNumRawDataModules(d){if(d<pr.MIN_VERSION||d>pr.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*d+128)*d+64;if(d>=2){const p=Math.floor(d/7)+2;h-=(25*p-10)*p-55,d>=7&&(h-=36)}return a(208<=h&&h<=29648),h}static getNumDataCodewords(d,h){return Math.floor(pr.getNumRawDataModules(d)/8)-pr.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d]*pr.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let h=[];for(let f=0;f<d-1;f++)h.push(0);h.push(1);let p=1;for(let f=0;f<d;f++){for(let m=0;m<h.length;m++)h[m]=pr.reedSolomonMultiply(h[m],p),m+1<h.length&&(h[m]^=h[m+1]);p=pr.reedSolomonMultiply(p,2)}return h}static reedSolomonComputeRemainder(d,h){let p=h.map(f=>0);for(const f of d){const m=f^p.shift();p.push(0),h.forEach((b,x)=>p[x]^=pr.reedSolomonMultiply(b,m))}return p}static reedSolomonMultiply(d,h){if(d>>>8||h>>>8)throw new RangeError("Byte out of range");let p=0;for(let f=7;f>=0;f--)p=p<<1^(p>>>7)*285,p^=(h>>>f&1)*d;return a(p>>>8==0),p}finderPenaltyCountPatterns(d){const h=d[1];a(h<=this.size*3);const p=h>0&&d[2]==h&&d[3]==h*3&&d[4]==h&&d[5]==h;return(p&&d[0]>=h*4&&d[6]>=h?1:0)+(p&&d[6]>=h*4&&d[0]>=h?1:0)}finderPenaltyTerminateAndCount(d,h,p){return d&&(this.finderPenaltyAddHistory(h,p),h=0),h+=this.size,this.finderPenaltyAddHistory(h,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(d,h){h[0]==0&&(d+=this.size),h.pop(),h.unshift(d)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(l,d,h){if(d<0||d>31||l>>>d)throw new RangeError("Value out of range");for(let p=d-1;p>=0;p--)h.push(l>>>p&1)}function n(l,d){return(l>>>d&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class _n{constructor(d,h,p){if(this.mode=d,this.numChars=h,this.bitData=p,h<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(d){let h=[];for(const p of d)r(p,8,h);return new _n(_n.Mode.BYTE,d.length,h)}static makeNumeric(d){if(!_n.isNumeric(d))throw new RangeError("String contains non-numeric characters");let h=[];for(let p=0;p<d.length;){const f=Math.min(d.length-p,3);r(parseInt(d.substring(p,p+f),10),f*3+1,h),p+=f}return new _n(_n.Mode.NUMERIC,d.length,h)}static makeAlphanumeric(d){if(!_n.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],p;for(p=0;p+2<=d.length;p+=2){let f=_n.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p))*45;f+=_n.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p+1)),r(f,11,h)}return p<d.length&&r(_n.ALPHANUMERIC_CHARSET.indexOf(d.charAt(p)),6,h),new _n(_n.Mode.ALPHANUMERIC,d.length,h)}static makeSegments(d){return d==""?[]:_n.isNumeric(d)?[_n.makeNumeric(d)]:_n.isAlphanumeric(d)?[_n.makeAlphanumeric(d)]:[_n.makeBytes(_n.toUtf8ByteArray(d))]}static makeEci(d){let h=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)r(d,8,h);else if(d<16384)r(2,2,h),r(d,14,h);else if(d<1e6)r(6,3,h),r(d,21,h);else throw new RangeError("ECI assignment value out of range");return new _n(_n.Mode.ECI,0,h)}static isNumeric(d){return _n.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return _n.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,h){let p=0;for(const f of d){const m=f.mode.numCharCountBits(h);if(f.numChars>=1<<m)return 1/0;p+=4+m+f.bitData.length}return p}static toUtf8ByteArray(d){d=encodeURI(d);let h=[];for(let p=0;p<d.length;p++)d.charAt(p)!="%"?h.push(d.charCodeAt(p)):(h.push(parseInt(d.substring(p+1,p+3),16)),p+=2);return h}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=i;e.QrSegment=i})(Pc||(Pc={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Pc||(Pc={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Pc||(Pc={}));var Hu=Pc;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var lme={L:Hu.QrCode.Ecc.LOW,M:Hu.QrCode.Ecc.MEDIUM,Q:Hu.QrCode.Ecc.QUARTILE,H:Hu.QrCode.Ecc.HIGH},q6=128,H6="L",G6="#FFFFFF",W6="#000000",V6=!1,Y6=1,cme=4,ume=0,dme=.1;function Q6(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(s,l){if(!s&&i!==null){r.push(`M${i+t} ${a+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===n.length-1){if(!s)return;i===null?r.push(`M${l+t},${a+t} h1v1H${l+t}z`):r.push(`M${i+t},${a+t} h${l+1-i}v1H${i+t}z`);return}s&&i===null&&(i=l)})}),r.join("")}function K6(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function hme(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*dme),s=a/t,l=(n.width||i)*s,d=(n.height||i)*s,h=n.x==null?e.length/2-l/2:n.x*s,p=n.y==null?e.length/2-d/2:n.y*s,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(h),v=Math.floor(p),T=Math.ceil(l+h-x),k=Math.ceil(d+p-v);m={x,y:v,w:T,h:k}}const b=n.crossOrigin;return{x:h,y:p,h:d,w:l,excavation:m,opacity:f,crossOrigin:b}}function pme(e,t){return t!=null?Math.max(Math.floor(t),0):e?cme:ume}function X6({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:s,boostLevel:l}){let d=ir.useMemo(()=>{const x=(Array.isArray(e)?e:[e]).reduce((v,T)=>(v.push(...Hu.QrSegment.makeSegments(T)),v),[]);return Hu.QrCode.encodeSegments(x,lme[t],r,void 0,void 0,l)},[e,t,r,l]);const{cells:h,margin:p,numCells:f,calculatedImageSettings:m}=ir.useMemo(()=>{let b=d.getModules();const x=pme(n,a),v=b.length+x*2,T=hme(b,s,x,i);return{cells:b,margin:x,numCells:v,calculatedImageSettings:T}},[d,s,i,n,a]);return{qrcode:d,margin:p,cells:h,numCells:f,calculatedImageSettings:m}}var gme=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),fme=ir.forwardRef(function(t,r){const n=t,{value:a,size:i=q6,level:s=H6,bgColor:l=G6,fgColor:d=W6,includeMargin:h=V6,minVersion:p=Y6,boostLevel:f,marginSize:m,imageSettings:b}=n,v=ww(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:T}=v,k=ww(v,["style"]),C=b?.src,A=ir.useRef(null),D=ir.useRef(null),B=ir.useCallback(N=>{A.current=N,typeof r=="function"?r(N):r&&(r.current=N)},[r]),[R,M]=ir.useState(!1),{margin:$,cells:W,numCells:O,calculatedImageSettings:Y}=X6({value:a,level:s,minVersion:p,boostLevel:f,includeMargin:h,marginSize:m,imageSettings:b,size:i});ir.useEffect(()=>{if(A.current!=null){const N=A.current,U=N.getContext("2d");if(!U)return;let j=W;const K=D.current,Q=Y!=null&&K!==null&&K.complete&&K.naturalHeight!==0&&K.naturalWidth!==0;Q&&Y.excavation!=null&&(j=K6(W,Y.excavation));const ie=window.devicePixelRatio||1;N.height=N.width=i*ie;const G=i/O*ie;U.scale(G,G),U.fillStyle=l,U.fillRect(0,0,O,O),U.fillStyle=d,gme?U.fill(new Path2D(Q6(j,$))):W.forEach(function(F,H){F.forEach(function(I,ne){I&&U.fillRect(ne+$,H+$,1,1)})}),Y&&(U.globalAlpha=Y.opacity),Q&&U.drawImage(K,Y.x+$,Y.y+$,Y.w,Y.h)}}),ir.useEffect(()=>{M(!1)},[C]);const X=vw({height:i,width:i},T);let q=null;return C!=null&&(q=ir.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{M(!0)},ref:D,crossOrigin:Y?.crossOrigin})),ir.createElement(ir.Fragment,null,ir.createElement("canvas",vw({style:X,height:i,width:i,ref:B,role:"img"},k)),q)});fme.displayName="QRCodeCanvas";var J6=ir.forwardRef(function(t,r){const n=t,{value:a,size:i=q6,level:s=H6,bgColor:l=G6,fgColor:d=W6,includeMargin:h=V6,minVersion:p=Y6,boostLevel:f,title:m,marginSize:b,imageSettings:x}=n,v=ww(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:T,cells:k,numCells:C,calculatedImageSettings:A}=X6({value:a,level:s,minVersion:p,boostLevel:f,includeMargin:h,marginSize:b,imageSettings:x,size:i});let D=k,B=null;x!=null&&A!=null&&(A.excavation!=null&&(D=K6(k,A.excavation)),B=ir.createElement("image",{href:x.src,height:A.h,width:A.w,x:A.x+T,y:A.y+T,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const R=Q6(D,T);return ir.createElement("svg",vw({height:i,width:i,viewBox:`0 0 ${C} ${C}`,ref:r,role:"img"},v),!!m&&ir.createElement("title",null,m),ir.createElement("path",{fill:l,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),ir.createElement("path",{fill:d,d:R,shapeRendering:"crispEdges"}),B)});J6.displayName="QRCodeSVG";var Cv={exports:{}},RN;function mme(){return RN||(RN=1,(function(e){var t=(function(){var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(d,h){if(!i[d]){i[d]={};for(var p=0;p<d.length;p++)i[d][d.charAt(p)]=p}return i[d][h]}var l={compressToBase64:function(d){if(d==null)return"";var h=l._compress(d,6,function(p){return n.charAt(p)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(d){return d==null?"":d==""?null:l._decompress(d.length,32,function(h){return s(n,d.charAt(h))})},compressToUTF16:function(d){return d==null?"":l._compress(d,15,function(h){return r(h+32)})+" "},decompressFromUTF16:function(d){return d==null?"":d==""?null:l._decompress(d.length,16384,function(h){return d.charCodeAt(h)-32})},compressToUint8Array:function(d){for(var h=l.compress(d),p=new Uint8Array(h.length*2),f=0,m=h.length;f<m;f++){var b=h.charCodeAt(f);p[f*2]=b>>>8,p[f*2+1]=b%256}return p},decompressFromUint8Array:function(d){if(d==null)return l.decompress(d);for(var h=new Array(d.length/2),p=0,f=h.length;p<f;p++)h[p]=d[p*2]*256+d[p*2+1];var m=[];return h.forEach(function(b){m.push(r(b))}),l.decompress(m.join(""))},compressToEncodedURIComponent:function(d){return d==null?"":l._compress(d,6,function(h){return a.charAt(h)})},decompressFromEncodedURIComponent:function(d){return d==null?"":d==""?null:(d=d.replace(/ /g,"+"),l._decompress(d.length,32,function(h){return s(a,d.charAt(h))}))},compress:function(d){return l._compress(d,16,function(h){return r(h)})},_compress:function(d,h,p){if(d==null)return"";var f,m,b={},x={},v="",T="",k="",C=2,A=3,D=2,B=[],R=0,M=0,$;for($=0;$<d.length;$+=1)if(v=d.charAt($),Object.prototype.hasOwnProperty.call(b,v)||(b[v]=A++,x[v]=!0),T=k+v,Object.prototype.hasOwnProperty.call(b,T))k=T;else{if(Object.prototype.hasOwnProperty.call(x,k)){if(k.charCodeAt(0)<256){for(f=0;f<D;f++)R=R<<1,M==h-1?(M=0,B.push(p(R)),R=0):M++;for(m=k.charCodeAt(0),f=0;f<8;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1}else{for(m=1,f=0;f<D;f++)R=R<<1|m,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=0;for(m=k.charCodeAt(0),f=0;f<16;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1}C--,C==0&&(C=Math.pow(2,D),D++),delete x[k]}else for(m=b[k],f=0;f<D;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1;C--,C==0&&(C=Math.pow(2,D),D++),b[T]=A++,k=String(v)}if(k!==""){if(Object.prototype.hasOwnProperty.call(x,k)){if(k.charCodeAt(0)<256){for(f=0;f<D;f++)R=R<<1,M==h-1?(M=0,B.push(p(R)),R=0):M++;for(m=k.charCodeAt(0),f=0;f<8;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1}else{for(m=1,f=0;f<D;f++)R=R<<1|m,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=0;for(m=k.charCodeAt(0),f=0;f<16;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1}C--,C==0&&(C=Math.pow(2,D),D++),delete x[k]}else for(m=b[k],f=0;f<D;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1;C--,C==0&&(C=Math.pow(2,D),D++)}for(m=2,f=0;f<D;f++)R=R<<1|m&1,M==h-1?(M=0,B.push(p(R)),R=0):M++,m=m>>1;for(;;)if(R=R<<1,M==h-1){B.push(p(R));break}else M++;return B.join("")},decompress:function(d){return d==null?"":d==""?null:l._decompress(d.length,32768,function(h){return d.charCodeAt(h)})},_decompress:function(d,h,p){var f=[],m=4,b=4,x=3,v="",T=[],k,C,A,D,B,R,M,$={val:p(0),position:h,index:1};for(k=0;k<3;k+=1)f[k]=k;for(A=0,B=Math.pow(2,2),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;switch(A){case 0:for(A=0,B=Math.pow(2,8),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;M=r(A);break;case 1:for(A=0,B=Math.pow(2,16),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;M=r(A);break;case 2:return""}for(f[3]=M,C=M,T.push(M);;){if($.index>d)return"";for(A=0,B=Math.pow(2,x),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;switch(M=A){case 0:for(A=0,B=Math.pow(2,8),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;f[b++]=r(A),M=b-1,m--;break;case 1:for(A=0,B=Math.pow(2,16),R=1;R!=B;)D=$.val&$.position,$.position>>=1,$.position==0&&($.position=h,$.val=p($.index++)),A|=(D>0?1:0)*R,R<<=1;f[b++]=r(A),M=b-1,m--;break;case 2:return T.join("")}if(m==0&&(m=Math.pow(2,x),x++),f[M])v=f[M];else if(M===b)v=C+C.charAt(0);else return null;T.push(v),f[b++]=C+v.charAt(0),m--,C=v,m==0&&(m=Math.pow(2,x),x++)}}};return l})();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(Cv)),Cv.exports}var yme=mme();const Z6=Rc(yme),Sw=32e3,bme=1;function Cm(e){const t=JSON.stringify(e);return Z6.compressToEncodedURIComponent(t)}function e5(e){try{const t=Z6.decompressFromEncodedURIComponent(e);if(!t)return null;const r=JSON.parse(t);return!r.version||!r.messages||!Array.isArray(r.messages)?(console.error("Invalid share data structure"),null):r}catch(t){return console.error("Failed to decode share data:",t),null}}function xme(e){const t=e.messages;if(t.length<=2)return Cm(e);const r=t[0],n=t[t.length-1];let i={...e,messages:[r,n],metadata:{...e.metadata,truncated:!0,originalMessageCount:t.length,includedMessageCount:2,truncationNotice:"Conversation truncated to fit URL limits. Showing first and last messages."}},s=Cm(i);for(let l=t.length-2;l>0;l--){const d=[r,...t.slice(l,t.length-1),n],h={...e,messages:d,metadata:{...e.metadata,truncated:!0,originalMessageCount:t.length,includedMessageCount:d.length,truncationNotice:`Conversation truncated to fit URL limits. Showing ${d.length} of ${t.length} messages.`}},p=Cm(h);if(p.length>Sw)break;s=p,i=h}return s}function vme(e,t={}){const r={version:bme,timestamp:Date.now(),shareType:t.shareType||"conversation",metadata:{title:t.title,truncated:!1,originalMessageCount:e.length,includedMessageCount:e.length},messages:e,plan:t.plan},n=Cm(r);return n.length<=Sw?n:(console.warn(`Share data exceeds ${Sw} chars (${n.length}), applying smart truncation`),xme(r))}function wme(e){return`${window.location.origin+window.location.pathname}?share=${e}`}function Sme(){return new URLSearchParams(window.location.search).has("share")}function Tme(){const t=new URLSearchParams(window.location.search).get("share");return t?e5(t):null}function kme(){const e=new URL(window.location.href);e.searchParams.delete("share"),window.history.replaceState({},"",e.toString())}const Eme=({messages:e,onClose:t,title:r,plan:n})=>{const[a,i]=_.useState(""),[s,l]=_.useState(!1),[d,h]=_.useState(!1),[p,f]=_.useState({original:0,included:0}),[m,b]=_.useState(!0);_.useEffect(()=>{try{const C=vme(e,{title:r,plan:n}),A=wme(C);i(A);const D=e5(C);D?.metadata.truncated&&(h(!0),f({original:D.metadata.originalMessageCount,included:D.metadata.includedMessageCount}))}catch(C){console.error("Failed to generate share URL:",C)}finally{b(!1)}},[e,r,n]);const x=async()=>{try{await navigator.clipboard.writeText(a),l(!0),setTimeout(()=>l(!1),2e3)}catch(C){console.error("Failed to copy to clipboard:",C)}},v=()=>{const C=r?`Check out this conversation: ${r}`:"Check out this conversation",A=`https://twitter.com/intent/tweet?text=${encodeURIComponent(C)}&url=${encodeURIComponent(a)}`;window.open(A,"_blank","width=550,height=420")},T=()=>{const C=r||"Shared Conversation",A=`https://reddit.com/submit?url=${encodeURIComponent(a)}&title=${encodeURIComponent(C)}`;window.open(A,"_blank")},k=()=>{const C=r?`Shared Conversation: ${r}`:"Shared Conversation",A=`Check out this conversation:

${a}`;window.location.href=`mailto:?subject=${encodeURIComponent(C)}&body=${encodeURIComponent(A)}`};return m?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),u.jsx("span",{className:"ml-3",children:"Generating share link..."})]})})}):u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t,children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Share Conversation"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d&&u.jsx("div",{className:"m-6 p-4 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:u.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Conversation Truncated"}),u.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:u.jsxs("p",{children:["Due to URL length limits, this share link includes ",p.included," of ",p.original," messages. The first and last messages are always preserved."]})})]})]})}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Shareable URL"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:a,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",onClick:C=>C.target.select()}),u.jsx("button",{onClick:x,className:`px-4 py-2 rounded-md font-medium transition-colors ${s?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:s?u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):"Copy"})]}),u.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["URL length: ",a.length.toLocaleString()," characters"]})]}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Scan with Mobile Device"}),u.jsx("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:u.jsx(J6,{value:a,size:200,level:"M"})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Share On"}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("button",{onClick:v,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#1DA1F2] text-white rounded-md hover:bg-[#1a8cd8] transition-colors",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})}),"Twitter"]}),u.jsxs("button",{onClick:T,className:"flex items-center justify-center gap-2 px-4 py-3 bg-[#FF4500] text-white rounded-md hover:bg-[#e03d00] transition-colors",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})}),"Reddit"]}),u.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[u.jsx("p",{children:" Anyone with this URL can view the conversation"}),u.jsx("p",{children:" Share data is compressed and encoded in the URL itself (no server storage)"}),u.jsx("p",{children:" Links never expire and work offline once loaded"})]})]}),u.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:u.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})};function Cme(e){return typeof e=="string"?e:Array.isArray(e)?e.filter(t=>t.type==="text"&&t.text).map(t=>t.text).join(`
`):""}function IN(){return`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async function _v(){try{return(await vc.getAllChats()).sort((t,r)=>r.timestamp-t.timestamp).map(t=>({id:t.id,timestamp:t.timestamp,firstUserPrompt:t.title||"New chat",messages:t.messages}))}catch(e){return console.error("Error loading chat history from IndexedDB:",e),[]}}async function _me(e,t,r){try{const n=e.find(s=>s.role==="user"),a=n?Cme(n.content):"",i=a?a.substring(0,100):"New chat";return t||(t=IN()),await vc.saveChat(t,e,i,r),t}catch(n){return console.error("Error saving chat to history:",n),t||IN()}}async function DN(e){try{const t=await vc.getChatWithMetadata(e);return t?{messages:t.messages,systemPrompt:t.systemPrompt,planningQuery:t.planningQuery,generatedSystemPrompt:t.generatedSystemPrompt,generatedUserQuery:t.generatedUserQuery,selectedSnippetIds:t.selectedSnippetIds,todosState:t.todosState}:null}catch(t){return console.error("Error loading chat with metadata from IndexedDB:",t),null}}async function MN(e){try{await vc.deleteChat(e)}catch(t){console.error("Error deleting chat from IndexedDB:",t)}}async function Ame(){try{await vc.clearAllChats()}catch(e){console.error("Error clearing chat history from IndexedDB:",e)}}const Nme=({transferData:e,enabledTools:t,showMCPDialog:r,setShowMCPDialog:n,onLoadingChange:a})=>{const{t:i}=yd(),{accessToken:s,user:l,getToken:d}=rs(),{getAccessToken:h}=lU(),{addSearchResult:p,clearSearchResults:f}=cz(),{addTracksToStart:m}=Dc(),{addSnippet:b,snippets:x,syncSnippetFromGoogleSheets:v}=R0(),{showError:T,showWarning:k,showSuccess:C,clearAllToasts:A}=Mc(),{settings:D}=Al(),{addCost:B,usage:R}=I0(),{isConnected:M,sendMessages:$,sendScrollPosition:W}=D0(),{location:O,isLoading:Y,requestLocation:X,clearLocation:q}=dU(),[N,U]=_.useState([]),[j,K]=_.useState(!1),[Q,ie]=Ai("chat_input",""),[G,F]=Ai("chat_system_prompt",""),[H,I]=_.useState(!1),[ne,ue]=_.useState(!1),[xe,ke]=_.useState(!1),[me,Me]=_.useState(!1),[ge,Be]=_.useState(new Set),[ct,yt]=_.useState(""),[tr,wr]=_.useState(""),[Et,Ar]=_.useState(""),[$t,or]=Ai("chat_mcp_servers",[]),[bt,It]=_.useState({name:"",url:""}),[mn,Jt]=_.useState(!1),Ut=[{id:"joke-server",name:"Joke Server",url:"http://localhost:3100",description:"Get programming, dad, science, animal, and food jokes",category:"Sample",instructions:`1. Run: make mcp-install-jokes
2. Run: make mcp-sample-jokes
3. Server starts on port 3100`,tools:["get_random_joke","get_joke_by_id","search_jokes","get_categories"]},{id:"filesystem",name:"@modelcontextprotocol/server-filesystem",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem",description:"Secure file operations with configurable access controls",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-filesystem /path/to/allowed/files",tools:["read_file","write_file","list_directory","search_files"]},{id:"github",name:"@modelcontextprotocol/server-github",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/github",description:"Repository management, file operations, commits, issues, PRs",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-github
Requires: GITHUB_PERSONAL_ACCESS_TOKEN`,tools:["create_or_update_file","search_repositories","create_issue","create_pull_request"]},{id:"postgres",name:"@modelcontextprotocol/server-postgres",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/postgres",description:"Read-only database access for PostgreSQL",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-postgres postgresql://user:pass@localhost/db",tools:["query","list_tables","describe_table","append_insight"]},{id:"sqlite",name:"@modelcontextprotocol/server-sqlite",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/sqlite",description:"Database interaction, schema inspection, query execution",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-sqlite /path/to/database.db",tools:["query","list_tables","describe_table","append_insight"]},{id:"slack",name:"@modelcontextprotocol/server-slack",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/slack",description:"Channel management and messaging for Slack",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-slack
Requires: SLACK_BOT_TOKEN`,tools:["post_message","reply_to_thread","add_reaction","get_channel_history"]},{id:"brave-search",name:"@modelcontextprotocol/server-brave-search",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/brave-search",description:"Web and local search using Brave Search API",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-brave-search
Requires: BRAVE_API_KEY`,tools:["brave_web_search","brave_local_search"]},{id:"gdrive",name:"@modelcontextprotocol/server-gdrive",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive",description:"File access and search for Google Drive",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-gdrive
Requires: OAuth credentials`,tools:["search_files","read_file","list_files"]},{id:"git",name:"@modelcontextprotocol/server-git",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/git",description:"Read, search, and analyze Git repositories",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-git",tools:["git_status","git_diff","git_log","git_commit"]},{id:"memory",name:"@modelcontextprotocol/server-memory",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/memory",description:"Knowledge graph-based persistent memory system",category:"Official",instructions:"Install: npx -y @modelcontextprotocol/server-memory",tools:["create_entities","create_relations","search_nodes","open_nodes"]},{id:"fetch",name:"@modelcontextprotocol/server-fetch",url:"https://github.com/modelcontextprotocol/servers/tree/main/src/fetch",description:"Efficient web content fetching and conversion",category:"Official",instructions:`Install: npx -y @modelcontextprotocol/server-fetch
Optional: USER_AGENT, IGNORE_ROBOTS_TXT`,tools:["fetch"]}];_.useEffect(()=>{a?.(H)},[H,a]);const[yn,ae]=_.useState([]),[Ce,rt]=_.useState(""),[Qe,dt]=_.useState(new Set),[nr,un]=_.useState(null),[br,Sr]=_.useState(!1),[Mr,ar]=_.useState(!1),[Jn,Kr]=_.useState(null),[Pi,ia]=_.useState([]),[Oa,di]=_.useState(new Map),[bn,le]=_.useState(new Map),[Pe,He]=_.useState(new Map),[Ct,Tr]=_.useState(new Map),[Lr,ot]=_.useState(""),[st,Nt]=_.useState(new Map),[Hr,rr]=_.useState(new Map),[Mn,hi]=_.useState(new Map),[pi,sa]=_.useState(new Map),[ut,Or]=_.useState(null),[Zn,Ri]=_.useState(null),[as,ja]=_.useState(null),[is,ht]=_.useState(null),[ce,ze]=_.useState(null),[it,lr]=_.useState(null),[Xr,Vt]=_.useState(!1),[Tn,Hn]=_.useState(""),[ea,$e]=_.useState(!1),[nt,Yt]=_.useState(null),[xr,dn]=_.useState(0),[xn,oa]=_.useState([]),[ba,jr]=_.useState(!1),xa=_.useRef(null),jo=_.useRef(null),Nn=_.useRef(null),_s=_.useRef(!1),to=_.useRef(null),ro=_.useRef(null),la=_.useRef(null),[As,no]=Ai("chat_prompt_history",[]),[ss,vn]=_.useState(-1),[Gc]=Ai("chat_use_rag",!1),[,ao]=_.useState(!1),[Dt,Wc]=_.useState(.3),[Jr,kr]=_.useState(null),[os,ls]=_.useState(!1),[Bo,gi]=_.useState(null),[tt,gt]=_.useState(!1),[Lt,Ht]=_.useState(new Set);_.useEffect(()=>{const z=localStorage.getItem("rag_config");if(z)try{const te=JSON.parse(z);te.similarityThreshold!==void 0&&Wc(te.similarityThreshold)}catch(te){console.error("Failed to parse RAG config:",te)}},[]),_.useEffect(()=>{const z=Array.from(Hr.values()).find(_e=>_e.phase==="generating"&&_e.estimated_seconds);if(!z||z.remaining_seconds===0)return;const te=setInterval(()=>{rr(_e=>{const Ze=new Map(_e),Oe="img_generating",ee=Ze.get(Oe);if(ee&&ee.phase==="generating"){const qe=ee.remaining_seconds??ee.estimated_seconds??0;qe>0&&Ze.set(Oe,{...ee,remaining_seconds:qe-1})}return Ze})},1e3);return()=>clearInterval(te)},[Hr]);const an=ir.useMemo(()=>{const z={};return D.providers.forEach(te=>{if(te.enabled&&te.apiKey)switch(te.type){case"openai":z.openaiApiKey||(z.openaiApiKey=te.apiKey);break;case"together":z.togetherApiKey||(z.togetherApiKey=te.apiKey);break;case"gemini":z.geminiApiKey||(z.geminiApiKey=te.apiKey);break;case"replicate":z.replicateApiKey||(z.replicateApiKey=te.apiKey);break}}),z},[D.providers]),Ya=()=>{xa.current?.scrollIntoView({behavior:"smooth"})},Fo=(z,te)=>{let _e=z;const Ze=[],Oe=[],ee=[],qe=/!\[([^\]]*)\]\(([^\)]+)\)/g;let Se;for(;(Se=qe.exec(z))!==null;)Ze.includes(Se[2])||Ze.push(Se[2]);const Le=/\[([^\]]+)\]\(([^\)]+)\)/g;for(;(Se=Le.exec(z))!==null;){const Ue=Se[2];Ue.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?ee.includes(Ue)||ee.push(Ue):Oe.includes(Ue)||Oe.push(Ue)}const he=/<img[^>]+src=["']([^"']+)["'][^>]*>/g;for(;(Se=he.exec(z))!==null;)Ze.includes(Se[1])||Ze.push(Se[1]);const Ve=/<a[^>]+href=["']([^"']+)["'][^>]*>([^<]+)<\/a>/g;for(;(Se=Ve.exec(z))!==null;){const Ue=Se[1];Ue.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)/)?ee.includes(Ue)||ee.push(Ue):Oe.includes(Ue)||Oe.push(Ue)}return te?(_e+=`

---
`,te.images&&te.images.length>0&&(_e+=`

## Extracted Images

`,te.images.forEach(Ue=>{_e+=`![${Ue.alt||"Image"}](${Ue.src})
`,_e+=`<img src="${Ue.src}" alt="${Ue.alt||"Image"}" style="max-width:100%;height:auto;" />
`,Ue.source&&(_e+=`*Source: [${Ue.source}](${Ue.source})*

`)})),te.youtubeVideos&&te.youtubeVideos.length>0&&(_e+=`

## YouTube Videos

`,te.youtubeVideos.forEach(Ue=>{_e+=`### ${Ue.title||"YouTube Video"}

`,_e+=`[Watch on YouTube](${Ue.src})

`;const Ee=Ue.src.replace("watch?v=","embed/").replace("youtu.be/","youtube.com/embed/");_e+=`<iframe width="560" height="315" src="${Ee}" frameborder="0" allowfullscreen></iframe>

`,Ue.source&&(_e+=`*Source: [${Ue.source}](${Ue.source})*

`)})),te.otherVideos&&te.otherVideos.length>0&&(_e+=`

## Videos

`,te.otherVideos.forEach(Ue=>{_e+=`### ${Ue.title||"Video"}

`,_e+=`[Download Video](${Ue.src})

`,_e+=`<video controls style="max-width:100%;height:auto;">
`,_e+=`  <source src="${Ue.src}" type="video/mp4">
`,_e+=`  Your browser does not support the video tag.
`,_e+=`</video>

`,Ue.source&&(_e+=`*Source: [${Ue.source}](${Ue.source})*

`)})),te.media&&te.media.length>0&&(_e+=`

## Media

`,te.media.forEach(Ue=>{_e+=`### ${Ue.type}

`,_e+=`[Download Media](${Ue.src})

`,Ue.type.toLowerCase().includes("audio")?(_e+=`<audio controls style="width:100%;">
`,_e+=`  <source src="${Ue.src}">
`,_e+=`  Your browser does not support the audio tag.
`,_e+=`</audio>

`):Ue.type.toLowerCase().includes("video")&&(_e+=`<video controls style="max-width:100%;height:auto;">
`,_e+=`  <source src="${Ue.src}">
`,_e+=`  Your browser does not support the video tag.
`,_e+=`</video>

`),Ue.source&&(_e+=`*Source: [${Ue.source}](${Ue.source})*

`)})),te.sources&&te.sources.length>0&&(_e+=`

## Sources & References

`,te.sources.forEach((Ue,Ee)=>{_e+=`${Ee+1}. **[${Ue.title}](${Ue.url})**
`,Ue.snippet&&(_e+=`   > ${Ue.snippet}
`),_e+=`   - URL: [${Ue.url}](${Ue.url})

`})),_e):(Ze.length>0&&(_e+=`

---

## Inline Images

`,Ze.forEach(Ue=>{_e+=`![Image](${Ue})
`})),ee.length>0&&(_e+=`

## Inline YouTube Videos

`,ee.forEach(Ue=>{_e+=`- [YouTube Video](${Ue})
`,_e+=`  <iframe width="560" height="315" src="${Ue.replace("watch?v=","embed/")}" frameborder="0" allowfullscreen></iframe>

`})),Oe.length>0&&(_e+=`

## Inline Links

`,Oe.forEach(Ue=>{_e+=`- [${Ue}](${Ue})
`})),_e)},Dl=async(z,te)=>{try{const{imageUrlToBase64:_e}=await _t(async()=>{const{imageUrlToBase64:qe}=await import("./imageUtils-DosmAaVd.js");return{imageUrlToBase64:qe}},[]),Ze=await _e(z),Oe=te||"Image",ee=`<img src="${Ze}" alt="${Oe}" style="max-width: 100%; height: auto;" />`;await b(ee,"assistant",Oe),C(i("chat.imageAddedToSwag"))}catch(_e){console.error("Failed to grab image:",_e);const Ze=te||"Image",Oe=`<img src="${z}" alt="${Ze}" style="max-width: 100%; height: auto;" />`;await b(Oe,"assistant",Ze),C(i("chat.imageAddedWithoutConversion"))}},Ii=async(z,te,_e,Ze,Oe)=>{try{let ee=Ze;if(Oe&&Oe.length>0){const he=Yc({toolResults:Oe});(he.images.length>0||he.links.length>0||he.youtubeLinks.length>0||he.otherMedia.length>0)&&(ee={...Ze,images:[...Ze?.images||[],...he.images.map(Ve=>({src:Ve,alt:"",source:""}))],youtubeVideos:[...Ze?.youtubeVideos||[],...he.youtubeLinks.map(Ve=>({src:Ve.url,title:Ve.title||"",source:Ve.url}))],otherVideos:[...Ze?.otherVideos||[],...he.otherMedia.filter(Ve=>Ve.type.includes("video")).map(Ve=>({src:Ve.url,title:"",source:Ve.url}))],media:[...Ze?.media||[],...he.otherMedia.filter(Ve=>Ve.type.includes("audio")).map(Ve=>({src:Ve.url,type:Ve.type,source:Ve.url}))],sources:[...Ze?.sources||[],...he.links.map(Ve=>({url:Ve.url,title:Ve.title||Ve.url,snippet:""}))]})}const qe=Fo(z,ee),{convertHtmlImagesToBase64:Se}=await _t(async()=>{const{convertHtmlImagesToBase64:he}=await import("./imageUtils-DosmAaVd.js");return{convertHtmlImagesToBase64:he}},[]),Le=await Se(qe);await b(Le,te,_e),C(i("chat.contentCapturedToSwag"))}catch(ee){console.error("Failed to capture content with base64 conversion:",ee);const qe=Fo(z,Ze);await b(qe,te,_e),C(i("chat.contentCapturedWithoutConversion"))}},fi=_.useRef(null),zo=_.useRef(null),Ml=(z,te,_e)=>{console.log(" Voice transcription received:",{text:z,requestId:te,textLength:z.length,hasLlmApiCall:!!_e}),ie(z),fi.current=te,zo.current=_e||null,console.log(" Voice transcription complete, stored request ID:",te),setTimeout(()=>{console.log(" Auto-submitting with transcribed text:",z.substring(0,50)),Uo(z)},150)};_.useEffect(()=>{Ya()},[N]),_.useEffect(()=>{An().then(z=>{Hn(z),console.log(" API endpoint for voice input:",z)})},[]),_.useEffect(()=>{M&&N.length>0&&(console.log("Syncing messages to Chromecast:",N.length),$(N))},[N,M,$]),_.useEffect(()=>{if(!M||!jo.current)return;const z=jo.current;let te;const _e=()=>{clearTimeout(te),te=setTimeout(()=>{z&&W&&W(z.scrollTop)},100)};return z.addEventListener("scroll",_e),()=>{z.removeEventListener("scroll",_e),clearTimeout(te)}},[M,W]),_.useEffect(()=>{const z=te=>{to.current&&!to.current.contains(te.target)&&Sr(!1)};if(br)return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[br]),_.useEffect(()=>{_s.current&&Q.trim()&&!H&&s&&(_s.current=!1,Uo())},[Q]);const Ns=z=>{Nn.current&&(Nn.current.abort(),Nn.current=null),U([]),F(""),ie(z),Sr(!1),ae([]),rt(""),un(null),di(new Map),le(new Map),He(new Map),Tr(new Map),Or(null),Kr(null),localStorage.removeItem("last_active_chat_id"),A(),setTimeout(()=>{Uo(z)},0)},tn=z=>typeof z=="string"?z:Array.isArray(z)?z.filter(te=>te.type==="text"&&te.text).map(te=>te.text).join(`
`):"",Vc=async z=>{try{const te=N[z],_e=await d(),Ze=await An();if(!(await fetch(`${Ze}/report-error`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e}`},body:JSON.stringify({userEmail:l?.email,feedbackType:"positive",explanation:"",messageData:{messageContent:tn(te.content),llmApiCalls:te.llmApiCalls||[],evaluations:te.evaluations||[],conversationThread:N},timestamp:new Date().toISOString()})})).ok)throw new Error("Failed to submit feedback");C(" Thank you for the feedback!")}catch(te){console.error("Error submitting positive feedback:",te),T("Failed to submit feedback")}},bg=z=>{ze(z)},Ol=z=>{const te=tn(z);if(!te)return null;const _e=te.match(/```mermaid\s*([\s\S]*?)```/);return _e&&_e[1]?_e[1].trim():null},Yc=z=>{const te={images:[],links:[],youtubeLinks:[],otherMedia:[]};return z.toolResults&&z.toolResults.forEach(_e=>{try{const Ze=typeof _e.content=="string"?JSON.parse(_e.content):_e.content;Ze.results&&Array.isArray(Ze.results)&&Ze.results.forEach(Oe=>{Oe.images&&Array.isArray(Oe.images)&&Oe.images.forEach(ee=>{typeof ee=="string"?te.images.push(ee):ee&&ee.src?te.images.push(ee.src):ee&&ee.url&&te.images.push(ee.url)}),Oe.url&&te.links.push({url:Oe.url,title:Oe.title}),Oe.links&&Array.isArray(Oe.links)&&Oe.links.forEach(ee=>{typeof ee=="string"?te.links.push({url:ee}):ee&&ee.href?te.links.push({url:ee.href,title:ee.text}):ee&&ee.url&&te.links.push({url:ee.url,title:ee.text||ee.title})})}),Ze.videos&&Array.isArray(Ze.videos)&&Ze.videos.forEach(Oe=>{Oe.url&&te.youtubeLinks.push({url:Oe.url,title:Oe.title})}),Ze.images&&Array.isArray(Ze.images)&&Ze.images.forEach(Oe=>{typeof Oe=="string"?te.images.push(Oe):Oe&&Oe.src?te.images.push(Oe.src):Oe&&Oe.url&&te.images.push(Oe.url)}),Ze.page_content?.images&&Array.isArray(Ze.page_content.images)&&Ze.page_content.images.forEach(Oe=>{typeof Oe=="string"?te.images.push(Oe):Oe&&Oe.src?te.images.push(Oe.src):Oe&&Oe.url&&te.images.push(Oe.url)}),Ze.results&&Array.isArray(Ze.results)&&Ze.results.forEach(Oe=>{Oe.page_content?.images&&Array.isArray(Oe.page_content.images)&&Oe.page_content.images.forEach(ee=>{typeof ee=="string"?te.images.push(ee):ee&&ee.src?te.images.push(ee.src):ee&&ee.url&&te.images.push(ee.url)})})}catch{}}),te.images=[...new Set(te.images)].filter(Boolean),te.links=Array.from(new Map(te.links.filter(_e=>_e.url).map(_e=>[_e.url,_e])).values()),te.youtubeLinks=Array.from(new Map(te.youtubeLinks.filter(_e=>_e.url).map(_e=>[_e.url,_e])).values()),te},Dd=z=>z<1e-4?"<$0.0001":z<.01?`$${z.toFixed(4)}`:`$${z.toFixed(3)}`,va=z=>{if(!z||z.length===0)return 0;const te={"gemini-2.0-flash":{input:0,output:0},"gemini-2.5-flash":{input:0,output:0},"gemini-2.5-pro":{input:0,output:0},"gemini-1.5-flash":{input:0,output:0},"gemini-1.5-pro":{input:0,output:0},"gpt-4o":{input:2.5,output:10},"gpt-4o-mini":{input:.15,output:.6},"gpt-4-turbo":{input:10,output:30},"gpt-4":{input:30,output:60},"gpt-3.5-turbo":{input:.5,output:1.5},"o1-preview":{input:15,output:60},"o1-mini":{input:3,output:12},"llama-3.1-8b-instant":{input:0,output:0},"llama-3.3-70b-versatile":{input:0,output:0},"llama-3.1-70b-versatile":{input:0,output:0},"mixtral-8x7b-32768":{input:0,output:0}};let _e=0;for(const Ze of z){const Oe=Ze.model,ee=Ze.response?.usage;if(!Oe||!ee)continue;const qe=te[Oe]||{input:0,output:0},Se=ee.prompt_tokens||0,Le=ee.completion_tokens||0,he=Se/1e6*qe.input,Ve=Le/1e6*qe.output;_e+=he+Ve}return _e},Qa=z=>!z.llmApiCalls||z.llmApiCalls.length===0?0:va(z.llmApiCalls),cs=z=>z===0?"$0":z<1e-4?"<$0.0001":z<.01?`$${z.toFixed(4)}`:z<1?`$${z.toFixed(3)}`:`$${z.toFixed(2)}`,jl=z=>{z.preventDefault(),z.stopPropagation(),z.dataTransfer.types.includes("Files")&&jr(!0)},by=z=>{z.preventDefault(),z.stopPropagation(),z.currentTarget===z.target&&jr(!1)},Md=z=>{z.preventDefault(),z.stopPropagation()},Od=z=>{z.preventDefault(),z.stopPropagation(),jr(!1);const te=z.dataTransfer.files;xg(te)},Bl=z=>{if(z){z.style.height="auto";const _e=Math.min(z.scrollHeight,300);z.style.height=_e+"px"}};_.useEffect(()=>{Bl(ro.current)},[Q]),_.useEffect(()=>{e&&(ie(e.prompt),e.persona&&F(e.persona))},[e]),_.useEffect(()=>{const z=sessionStorage.getItem("planning_transfer_data");if(console.log(" useEffect checking sessionStorage - planningData:",z?.substring(0,100)),z){console.log(" Found planning transfer data in sessionStorage");try{const te=JSON.parse(z);if(console.log(" Planning transfer data received:",te),U([]),Kr(null),localStorage.removeItem("last_active_chat_id"),f(),dt(new Set),Ht(new Set),te.persona||te.generatedSystemPrompt){const _e=te.persona||te.generatedSystemPrompt;F(_e),console.log(" Set system prompt from planning:",_e.substring(0,50)+"...")}if(te.prompt||te.generatedUserQuery){const _e=te.prompt||te.generatedUserQuery;ie(_e),console.log(" Set user input from planning:",_e.substring(0,50)+"...")}te.planningQuery&&yt(te.planningQuery),te.generatedSystemPrompt&&wr(te.generatedSystemPrompt),te.generatedUserQuery&&Ar(te.generatedUserQuery),sessionStorage.removeItem("planning_transfer_data"),setTimeout(()=>{ro.current?.focus(),C(i("chat.planningTransferred"))},100)}catch(te){console.error("Failed to parse planning transfer data:",te),T(i("chat.failedToTransfer")),sessionStorage.removeItem("planning_transfer_data")}}},[]),_.useEffect(()=>{if(Sme()){const z=Tme();if(z){console.log(" Restoring shared conversation from URL"),U([]),Kr(null),localStorage.removeItem("last_active_chat_id"),f(),dt(new Set),Ht(new Set);const te=z.messages.map(_e=>({role:_e.role,content:_e.content,timestamp:_e.timestamp}));U(te),z.metadata.title&&F(z.metadata.title),z.metadata.truncated&&k(`This conversation was truncated to fit URL limits. Showing ${z.metadata.includedMessageCount} of ${z.metadata.originalMessageCount} messages.`),kme(),C("Shared conversation loaded!"),console.log(` Restored ${te.length} messages from share URL`)}}},[]),_.useEffect(()=>{j||(async()=>{try{const z=localStorage.getItem("last_active_chat_id");if(z){console.log(" Attempting to restore last chat:",z);const te=await DN(z);if(te&&te.messages&&te.messages.length>0){te.systemPrompt&&F(te.systemPrompt),te.planningQuery&&yt(te.planningQuery),te.generatedSystemPrompt&&wr(te.generatedSystemPrompt),te.generatedUserQuery&&Ar(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)&&(Ht(new Set(te.selectedSnippetIds)),console.log(` Restored ${te.selectedSnippetIds.length} attached snippets`));const Ze=te.messages.map(Oe=>(Oe._attachments&&Array.isArray(Oe._attachments)&&(Oe._attachments=Oe._attachments.map(ee=>({name:ee.name||"file",type:ee.type||"application/octet-stream",size:ee.size||0,preview:ee.preview}))),Oe)).filter(Oe=>Oe&&Oe.role);console.log(" Restored chat session with planning metadata:",z,"with",Ze.length,"messages"),U(Ze),Kr(z)}else console.log(" No previous chat to restore")}}catch(z){console.error(" Error loading last chat:",z),localStorage.removeItem("last_active_chat_id")}K(!0)})()},[j]),_.useEffect(()=>{N.length>0&&j&&(async()=>{try{const z=await _me(N,Jn||void 0,{systemPrompt:G||void 0,planningQuery:ct||void 0,generatedSystemPrompt:tr||void 0,generatedUserQuery:Et||void 0,selectedSnippetIds:Array.from(Lt)});Jn||Kr(z),localStorage.setItem("last_active_chat_id",z),console.log(" Chat auto-saved with planning metadata:",z)}catch(z){console.error(" Failed to auto-save chat:",z)}})()},[N,Jn,j,G,ct,tr,Et]),_.useEffect(()=>{ne&&(async()=>{const z=await _v();ia(z)})()},[ne]);const Di=_.useRef(new Set),jd=_.useRef(m);_.useEffect(()=>{jd.current=m},[m]),_.useEffect(()=>{const z=N.filter(Ze=>Ze.role==="assistant"&&!Ze.isStreaming&&Ze.toolResults);if(z.length===0)return;const te=[],_e=new Set;if(z.forEach(Ze=>{Ze.toolResults?.forEach(Oe=>{if(Oe.name!=="search_youtube"||!Oe.content)return;const ee=Oe.tool_call_id||`${Oe.name}-${JSON.stringify(Oe.content).substring(0,100)}`;if(!Di.current.has(ee))try{const qe=typeof Oe.content=="string"?JSON.parse(Oe.content):Oe.content;qe.videos&&Array.isArray(qe.videos)&&(qe.videos.forEach(Se=>{Se.videoId&&!_e.has(Se.videoId)&&(_e.add(Se.videoId),te.push(Se))}),Di.current.add(ee))}catch(qe){console.error("[ChatTab] Failed to parse YouTube results:",qe)}})}),te.length>0){const Ze=te.map(ee=>({videoId:ee.videoId,url:ee.url,title:ee.title||"Untitled Video",description:ee.description||"",duration:ee.duration||"",channel:ee.channel||"",thumbnail:ee.thumbnail||""}));console.log(`[ChatTab] Adding ${Ze.length} new YouTube videos to playlist (${Di.current.size} tool results processed total)`),jd.current(Ze);const Oe=N[N.length-1];Oe?.role==="assistant"&&!Oe.isStreaming&&Oe.toolResults?.some(qe=>qe.name==="search_youtube"&&!Di.current.has(qe.tool_call_id||""))&&C(i("chat.addedToPlaylist",{count:Ze.length,plural:Ze.length!==1?"s":""}))}if(Di.current.size>500){const Ze=Array.from(Di.current);Di.current=new Set(Ze.slice(-500))}},[N,C]);const xy=()=>{Nn.current&&(Nn.current.abort(),Nn.current=null,I(!1))},vy=()=>{const z=[];return t.web_search&&z.push({type:"function",function:{name:"search_web",description:"Search the web using DuckDuckGo to find current information, news, articles, and real-time data. USE THIS whenever users ask for current/latest information, news, or anything requiring up-to-date web content. Automatically fetches full page content including images and links from all search results. Returns comprehensive search results with titles, URLs, snippets, full content, images, and links. **CRITICAL: You MUST include relevant URLs from search results in your response using markdown links [Title](URL).**",parameters:{type:"object",properties:{query:{type:"string",description:"Search query - be specific and include relevant keywords"},limit:{type:"integer",minimum:1,maximum:50,default:5,description:"Number of results to return (default: 5)"},timeout:{type:"integer",minimum:1,maximum:60,default:15,description:"Timeout in seconds for fetching each page"},generate_summary:{type:"boolean",default:!0,description:"Generate an LLM summary of the search results (highly recommended)"}},required:["query"]}}}),t.execute_js&&z.push({type:"function",function:{name:"execute_javascript",description:" Execute JavaScript code in a sandbox for: 1) Complex mathematical calculations that require computation (factorial, compound interest, statistics, algorithms), 2) Generating formatted tables/grids (multiplication tables, calendars), 3) Data transformations or array processing, 4) ASCII art or text-based visualizations, 5) Custom algorithms. **DO NOT use for**: simple text output, explanations, or answers you already know. Only use when actual computation adds value.",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute. Include console.log() to display results."},timeout:{type:"integer",minimum:1,maximum:10,default:5,description:"Execution timeout in seconds (default: 5)"}},required:["code"]}}}),t.scrape_url&&z.push({type:"function",function:{name:"scrape_web_content",description:"Fetch and extract readable content from any URL. Excellent for getting detailed information from webpages.",parameters:{type:"object",properties:{url:{type:"string",description:"Fully qualified URL to fetch"},timeout:{type:"integer",minimum:1,maximum:60,default:15}},required:["url"]}}}),t.youtube&&z.push({type:"function",function:{name:"search_youtube",description:' SEARCH/FIND YouTube videos (NOT for transcription). Use when user wants to FIND or SEARCH for videos. **DO NOT USE if user wants to transcribe, get transcript, or extract text from a specific YouTube URL** - use transcribe_url instead. Use search_youtube for: "find YouTube videos about X", "search YouTube for X", "show me videos about X". Returns video titles, descriptions, links, and caption availability. Results are automatically added to a playlist. **CRITICAL: You MUST include ALL video URLs in your response as a formatted markdown list with [Title](URL) format.**',parameters:{type:"object",properties:{query:{type:"string",description:'Search query for YouTube videos (e.g., "javascript tutorial", "bach cello suites", "machine learning course")'},limit:{type:"integer",minimum:1,maximum:50,default:10,description:"Maximum number of video results to return (default 10, max 50)"},order:{type:"string",enum:["relevance","date","viewCount","rating"],default:"relevance",description:"Sort order for results: relevance (default), date (newest first), viewCount (most viewed), rating (highest rated)"}},required:["query"]}}}),t.transcribe&&z.push({type:"function",function:{name:"transcribe_url",description:' **PRIMARY TOOL FOR GETTING VIDEO/AUDIO TEXT CONTENT**: Transcribe audio or video content from URLs using OpenAI Whisper. **MANDATORY USE** when user says: "transcribe", "transcript", "get text from", "what does the video say", "extract dialogue", "convert to text", OR provides a specific YouTube/video URL and asks about its content. **YOUTUBE SUPPORT**: Can transcribe directly from YouTube URLs (youtube.com, youtu.be, youtube.com/shorts). Also supports direct media URLs (.mp3, .mp4, .wav, .m4a, etc.). **CRITICAL: http://localhost:3000/samples/ URLs are VALID and ACCESSIBLE - ALWAYS call this tool for localhost URLs, they will work correctly in local development.** Automatically handles large files by chunking. Shows real-time progress with stop capability. Returns full transcription text.',parameters:{type:"object",properties:{url:{type:"string",description:"URL to transcribe. Can be YouTube URL (youtube.com, youtu.be), direct media URL (.mp3, .mp4, .wav, .m4a, etc.), or localhost URL for local development (http://localhost:3000/samples/...)"},language:{type:"string",pattern:"^[a-z]{2}$",description:'Optional: 2-letter ISO language code (e.g., "en", "es", "fr"). Improves accuracy if known.'},prompt:{type:"string",description:'Optional: Context or expected words to improve accuracy (e.g., "Technical discussion about AI and machine learning")'}},required:["url"]}}}),t.generate_chart&&z.push({type:"function",function:{name:"generate_chart",description:" **PRIMARY TOOL FOR ALL DIAGRAMS, CHARTS, AND VISUALIZATIONS**: Generate professional Mermaid diagrams automatically rendered as interactive SVG in the UI. **MANDATORY USE** when user requests: flowcharts, sequence diagrams, class diagrams, state diagrams, ER diagrams, Gantt charts, pie charts, mindmaps, git graphs, or ANY visual diagram/chart/visualization. **DO NOT use execute_javascript to generate charts - ALWAYS use this tool instead**. Keywords: diagram, chart, flowchart, visualization, graph, workflow, UML, ERD, timeline, mindmap.",parameters:{type:"object",properties:{description:{type:"string",description:'Clear description of what the chart should visualize (e.g., "User login flow", "Database schema for blog platform", "Project timeline")'},chart_type:{type:"string",enum:["flowchart","sequence","class","state","er","gantt","pie","git","mindmap"],default:"flowchart",description:"Type of diagram to generate. Choose based on use case: flowchart (processes), sequence (interactions), class (UML), state (FSM), er (database), gantt (timeline), pie (data), git (commits), mindmap (concepts)"}},required:["description"]}}}),t.generate_image&&z.push({type:"function",function:{name:"generate_image",description:' **MANDATORY USE FOR IMAGE REQUESTS**: Generate high-quality AI images immediately using DALL-E 3, Stable Diffusion, or other providers. **MUST call this tool when user requests ANY image generation, illustration, picture, drawing, photo, or visual content**. Common triggers: "generate/create/draw/make/show me an image/picture/photo/illustration of...", "draw a...", "create a cartoon/photo/illustration of...", "visualize...", "show me what... looks like". Supports quality tiers: ultra (photorealistic, $0.08-0.12), high (detailed/artistic, $0.02-0.04), standard (normal illustrations, $0.001-0.002), fast (quick drafts/sketches, <$0.001 - DEFAULT). Images appear automatically in the conversation. DO NOT refuse image generation requests - ALWAYS call this tool.',parameters:{type:"object",properties:{prompt:{type:"string",description:'Detailed description of the image to generate (e.g., "a low resolution image of a cat sitting on a windowsill")'},quality:{type:"string",enum:["ultra","high","standard","fast"],default:"standard",description:'Quality tier: ultra (photorealistic), high (detailed), standard (illustrations), fast (drafts). Infer from prompt keywords like "low res"=fast, "photorealistic"=ultra, "simple"=standard'},size:{type:"string",enum:["256x256","512x512","1024x1024","1792x1024","1024x1792"],default:"1024x1024",description:'Image dimensions. Use smaller sizes (256x256, 512x512) for "low res" requests'},style:{type:"string",enum:["natural","vivid"],default:"natural",description:"Style: natural (realistic) or vivid (dramatic). DALL-E 3 only"}},required:["prompt"]}}}),t.search_knowledge_base&&z.push({type:"function",function:{name:"search_knowledge_base",description:" **SEARCH INTERNAL KNOWLEDGE BASE**: Perform vector similarity search against the ingested documentation and knowledge base. **USE THIS when user asks about**: project documentation, API references, implementation guides, architecture, deployment procedures, RAG system, embedding models, or any topics covered in the knowledge base. **EXCELLENT for**: finding specific code examples, configuration details, API endpoints, best practices, and technical documentation. Returns relevant text chunks with source file names and similarity scores. **Always use this BEFORE search_web when the question might be answered by internal documentation.**",parameters:{type:"object",properties:{query:{type:"string",description:'Natural language search query. Be specific and include key terms. Examples: "How do I configure OpenAI embeddings?", "What is the RAG implementation?", "How to deploy Lambda functions?"'},top_k:{type:"integer",minimum:1,maximum:20,default:5,description:"Number of most relevant results to return (default: 5, max: 20)"},threshold:{type:"number",minimum:0,maximum:1,default:.3,description:"Minimum similarity score threshold (0-1). Higher values = more strict matching. Default: 0.3 (relaxed for better recall)"},source_type:{type:"string",enum:["file","url","text"],description:"Optional: Filter results by source type (file, url, or text)"}},required:["query"]}}}),t.manage_todos&&z.push({type:"function",function:{name:"manage_todos",description:' **MANAGE BACKEND TODO QUEUE**: Add or delete actionable steps for multi-step tasks. The backend maintains a server-side todo queue that tracks progress through complex workflows. When todos exist, they auto-progress after each successful completion (assessor "OK"). **USE THIS when**: user requests a multi-step plan, breaking down complex tasks, tracking implementation progress, or managing sequential workflows. **DO NOT use for simple single-step tasks.** After adding todos, the system will automatically advance through them, appending each next step as it completes. **Keywords**: plan, steps, todo list, break down task, multi-step workflow, implementation phases.',parameters:{type:"object",properties:{add:{type:"array",items:{type:"string"},description:'Array of todo descriptions to add to the queue. Descriptions should be clear, actionable steps in order. Example: ["Install dependencies", "Configure environment", "Run tests", "Deploy application"]'},delete:{type:"array",items:{oneOf:[{type:"string",description:"Exact todo description to delete"},{type:"number",description:"Todo ID to delete"}]},description:"Array of todo IDs (numbers) or exact descriptions (strings) to remove from the queue"}},additionalProperties:!1}}}),t.manage_snippets&&z.push({type:"function",function:{name:"manage_snippets",description:' **MANAGE KNOWLEDGE SNIPPETS**: Insert, retrieve, search, or delete knowledge snippets stored in your personal Google Sheet ("Research Agent/Research Agent Swag"). Use this to save important information, code examples, procedures, references, or any content you want to preserve and search later. **USE THIS when**: user wants to save/capture content, create a knowledge base, store code snippets, bookmark important info, or search previous saved content. Each snippet can have a title, content, tags for organization, and source tracking (chat/url/file/manual). **Keywords**: save this, remember this, add to knowledge base, store snippet, save for later, search my snippets, find my notes.',parameters:{type:"object",required:["action"],properties:{action:{type:"string",enum:["insert","capture","get","search","delete"],description:'Operation to perform: "insert" (add new snippet), "capture" (save from chat/url/file), "get" (retrieve by ID/title), "search" (find by query/tags), "delete" (remove by ID/title)'},payload:{type:"object",description:"Action-specific parameters",properties:{title:{type:"string",description:"Snippet title (required for insert/capture)"},content:{type:"string",description:"Snippet content/body (required for insert)"},tags:{type:"array",items:{type:"string"},description:'Array of tags for categorization (optional, e.g., ["javascript", "async", "tutorial"])'},source:{type:"string",enum:["chat","url","file","manual"],description:"Source type (for capture action)"},url:{type:"string",description:'Source URL if source="url"'},id:{type:"number",description:"Snippet ID (for get/delete)"},query:{type:"string",description:"Text search query (searches title and content)"}}}},additionalProperties:!1}}}),$t.filter(te=>te.enabled).forEach(te=>{console.log("MCP Server enabled:",te.name,te.url)}),z},wy=async z=>{try{const _e=await fetch("https://nrw7pperjjdswbmqgmigbwsbyi0rwdqf.lambda-url.us-east-1.on.aws/stop-transcription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({tool_call_id:z})});if(!_e.ok){const Ze=await _e.json();throw new Error(Ze.error||"Failed to stop transcription")}C(i("chat.transcriptionStopped")),console.log("Transcription stopped:",z)}catch(te){console.error("Failed to stop transcription:",te),T(i("chat.failedToStopTranscription"))}},Bd=(z,te=2048)=>new Promise((_e,Ze)=>{const Oe=new FileReader;Oe.onload=ee=>{const qe=new Image;qe.onload=()=>{const Se=document.createElement("canvas");let Le=qe.width,he=qe.height;Le>he&&Le>te?(he=he/Le*te,Le=te):he>te&&(Le=Le/he*te,he=te),Se.width=Le,Se.height=he,Se.getContext("2d")?.drawImage(qe,0,0,Le,he);const Ue=Se.toDataURL(z.type||"image/jpeg",.85);_e(Ue.split(",")[1])},qe.onerror=Ze,qe.src=ee.target?.result},Oe.onerror=Ze,Oe.readAsDataURL(z)}),xg=async z=>{if(!z||z.length===0)return;const te=5*1024*1024,_e=10*1024*1024,Ze=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];for(let Oe=0;Oe<z.length;Oe++){const ee=z[Oe];if(!Ze.includes(ee.type)){k(i("chat.fileTypeNotSupported",{name:ee.name}));continue}const qe=ee.type==="application/pdf"?_e:te;if(ee.size>qe){k(i("chat.fileTooLarge",{name:ee.name,size:(ee.size/1024/1024).toFixed(2),maxSize:qe/1024/1024}));continue}try{let Se,Le;if(ee.type.startsWith("image/")){Se=await Bd(ee),Le=`data:${ee.type};base64,${Se}`;const he=Se.length/1e3;he>2e4&&k(i("chat.imageTokenWarning",{name:ee.name,tokens:Math.round(he/1e3)}))}else{const he=new FileReader;Se=await new Promise((Ve,Ue)=>{he.onload=Ee=>{const Ke=Ee.target?.result;Ve(Ke.split(",")[1])},he.onerror=Ue,he.readAsDataURL(ee)})}oa(he=>[...he,{name:ee.name,type:ee.type,size:ee.size,base64:Se,preview:Le}]),C(i("chat.fileAdded",{name:ee.name}))}catch(Se){console.error("Error processing file:",Se),T(i("chat.failedToProcess",{name:ee.name}))}}},Sy=z=>{oa(te=>te.filter((_e,Ze)=>Ze!==z))},Uo=async z=>{const te=z!==void 0?z:Q;if(!te.trim()&&xn.length===0||H)return;if(!s){T(i("chat.signInToSendMessages"));return}let _e;if(xn.length>0){const Le=[{type:"text",text:te||"Please analyze these files."}];for(const he of xn)he.type&&he.type.startsWith("image/")?Le.push({type:"image_url",image_url:{url:`data:${he.type};base64,${he.base64}`,detail:"auto"}}):he.type==="application/pdf"&&Le.push({type:"text",text:`[PDF attachment: ${he.name}]`});_e={role:"user",content:Le,_attachments:xn}}else _e={role:"user",content:te};zo.current&&(_e.llmApiCalls=[zo.current],console.log(" Added voice transcription llmApiCall to user message"),zo.current=null),console.log(" Adding user message:",typeof _e.content=="string"?_e.content.substring(0,50):`${xn.length} attachments`);let Ze=N.length;U(Le=>{console.log(" Current messages count before adding user:",Le.length),Ze=Le.length;const he=[...Le,_e];return console.log(" Messages after adding user:",he.length,"User message at index:",Ze),he});const Oe=te.trim();Oe&&no(Le=>{const he=Le.filter(Ue=>Ue!==Oe);return[Oe,...he].slice(0,50)}),ie(""),vn(-1),oa([]),Ht(new Set),I(!0),ae([]),rt(""),dn(0),dt(new Set),He(new Map),Tr(new Map),di(new Map),le(new Map),sa(new Map);let ee=null;if(Gc&&te.trim()){ao(!0);try{let Le;const he=await bs.getCachedQueryEmbedding(te.trim());if(he)console.log(" Using cached query embedding"),Le=he.embedding;else{console.log(" Fetching new query embedding from backend");const Ve=await An(),Ue=await d(),Ee=await fetch(`${Ve}/rag/embed-query`,{method:"POST",headers:{"Content-Type":"application/json",...Ue?{Authorization:`Bearer ${Ue}`}:{}},body:JSON.stringify({query:te})});if(!Ee.ok)throw new Error("Failed to get query embedding");const Ke=await Ee.json();Le=Ke.embedding;const Wt=Ke.model||"unknown";await bs.cacheQueryEmbedding(te.trim(),Le,Wt),console.log(" Cached query embedding for future use")}if(Le){console.log(` RAG search with threshold: ${Dt}`);const Ve=await bs.vectorSearch(Le,5,Dt);if(Ve.length>0){let Ue=`**KNOWLEDGE BASE CONTEXT:**

The following information from the user's knowledge base may be relevant to this query:

`;for(let Ee=0;Ee<Ve.length;Ee++){const Ke=Ve[Ee];Ue+=`**[Context ${Ee+1} - Similarity: ${Ke.score.toFixed(3)}]**
`,Ue+=`${Ke.chunk_text}

`;try{const Wt=await bs.getEmbeddingDetails(Ke.snippet_id);Wt.metadata&&(Ue+=`*Source: ${Wt.metadata.source_type||"Unknown"}`,Wt.metadata.title&&(Ue+=` - "${Wt.metadata.title}"`),Ue+=`*

`)}catch{}Ue+=`---

`}Ue+=`**USER QUESTION:** ${te}

`,Ue+="Please answer the user's question using the context provided above. If the context is relevant, reference it in your answer. If the context is not helpful, you may answer based on your general knowledge.",ee={role:"system",content:Ue},C(i("chat.foundRelevantChunks",{count:Ve.length}))}else k(i("chat.noRelevantContext"))}}catch(Le){console.error("RAG context error:",Le),k(i("chat.failedToRetrieveRag"))}finally{ao(!1)}}Nn.current=new AbortController;const qe=vy();let Se=null;qe.length>0&&(Se=setTimeout(()=>{Nn.current&&(console.warn("Request timeout - aborting after 4 minutes due to tool execution"),Nn.current.abort())},24e4));try{const Le=new Date,he=Le.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ve=Le.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}),Ue=Le.toISOString(),Ee=`${he}, ${Ve} (ISO: ${Ue})`;let Ke=G.trim()||"You are a helpful assistant";const Wt=tr&&tr.length>0;if(Ke=`**CURRENT DATE AND TIME:**
${Ee}

You have access to the current date and time above. Use this information when responding to temporal queries about "today", "current date", "what time is it", "this week", "this month", "this year", etc. You do not need to use tools to get the current date/time as it is provided in this system prompt.

${Ke}`,Wt||(Ke+=`

**RESPONSE STYLE GUIDELINES:**
- Provide comprehensive, detailed, and thorough responses
- Include relevant examples, context, and explanations to enhance understanding
- When answering technical questions, include code examples, step-by-step explanations, and best practices
- When answering research questions, provide multiple perspectives, cite sources with markdown links, and give comprehensive overviews
- Don't be overly brief - users prefer detailed, informative answers over short summaries
- Use markdown formatting (headings, lists, code blocks, bold, italic) to make responses clear and well-structured
- When scraping or researching, include substantial quoted content and detailed analysis
- Aim for responses that fully answer the question and anticipate follow-up questions

**IMAGE PLACEMENT GUIDELINES:**
- When including images in your response, distribute them naturally throughout the content next to relevant text sections
- Place images near the paragraphs or sections they illustrate or relate to
- AVOID placing all images at the top or bottom of your response in a single block
- Intersperse images with text to create a more engaging, magazine-style layout
- Use markdown image syntax: ![description](url) inline with your content where contextually appropriate`),qe.length>0&&!Wt){const Ft=qe.map(J=>J.function.name).join(", ");Ke+=`

You have access to these tools: ${Ft}.

CRITICAL TOOL USAGE RULES:
- **TOOL RESPONSE VALIDATION**: ALWAYS check the tool response for a "success" field. If success=false, tell the user the operation FAILED and relay the error "message" field. NEVER claim success when the tool returned success=false.
- **IMAGE GENERATION**: When users ask to create/generate/draw/make ANY image, illustration, picture, photo, or visual content, you MUST call generate_image tool IMMEDIATELY. NEVER refuse or say "I cannot generate images" - you CAN by calling the tool. Examples: "draw a cat", "generate an image of...", "create a cartoon...", "show me a picture of...", "make an illustration of...", "visualize..."  ALL require calling generate_image.
- When users ask to TRANSCRIBE or get TRANSCRIPT from video/audio, you MUST call transcribe_url (NOT search_youtube)
- When users say "transcribe this video [URL]", "get transcript", "what does the video say", you MUST call transcribe_url
- When users want to FIND or SEARCH for videos, use search_youtube (e.g., "find videos about X")
- When users ask to "scrape", "get content from", "read", "fetch", "extract", "analyze", or "summarize" a website/URL, you MUST call the scrape_web_content tool
- When users provide ANY URL (http/https) and ask questions about it, you MUST call scrape_web_content with that URL FIRST
- MANDATORY: If a message contains a URL and asks to extract/analyze/summarize/get key points, you MUST call scrape_web_content - DO NOT provide an answer without first fetching the content
- When users ask for current information, news, or web content, you MUST use search_web
- **execute_javascript USAGE RULES**:
  -  USE for: Complex calculations requiring computation (factorial, fibonacci, statistics, algorithms)
  -  USE for: Generating formatted tables/grids (multiplication tables, calendars, data matrices)
  -  USE for: Data transformations, array processing, sorting, filtering large datasets
  -  USE for: ASCII art, text-based visualizations, formatted output
  -  USE for: Custom algorithms or mathematical operations you cannot compute mentally
  -  DO NOT USE for: Simple answers you already know (like "Lambda deployment not supported")
  -  DO NOT USE for: Just printing text or explanations
  -  DO NOT USE for: Answers that don't require computation
  -  DO NOT USE for: Simple arithmetic you can answer directly (like 2+2=4)
  - Rule: Only use execute_javascript when the computation or formatting adds actual value
- DO NOT output tool parameters as JSON text in your response (e.g., don't write {"url": "...", "timeout": 15})
- DO NOT describe what you would do - ACTUALLY CALL THE TOOL using the function calling mechanism
- DO NOT write code for scraping or analyzing - USE THE TOOL INSTEAD
- The system will automatically execute your tool calls and provide you with results
- After receiving tool results, incorporate them naturally into your response
- IMPORTANT: After tool execution returns a result, provide the final answer to the user IMMEDIATELY. Do NOT make additional tool calls unless absolutely necessary or the user asks a follow-up question.

Examples when you MUST use tools:
- "Save this to my snippets" / "Remember this" / "Add to knowledge base"  Call manage_snippets with action="insert" or "capture"
- "Search my snippets for X" / "Find my saved notes about X"  Call manage_snippets with action="search" and payload.query="X"
- "transcribe this video https://youtube.com/watch?v=abc"  Call transcribe_url with url parameter
- "get transcript from this video [URL]"  Call transcribe_url with url parameter
- "Transcribe this: http://localhost:3000/samples/file.mp3"  Call transcribe_url (localhost URLs work in local dev!)
- "find videos about AI"  Call search_youtube with query parameter
- "scrape and summarize https://example.com"  Call scrape_web_content with url parameter
- "get content from https://github.com/user/repo"  Call scrape_web_content with url parameter
- "Extract and analyze the key points from https://example.com/article"  Call scrape_web_content with url parameter
- "What does this page say: https://example.com"  Call scrape_web_content with url parameter
- "Summarize this article https://example.com/news"  Call scrape_web_content with url parameter
- "Read and analyze https://en.wikipedia.org/wiki/Topic"  Call scrape_web_content with url parameter
- "Find current news about X"  Call search_web with query parameter
- "What's the latest on X"  Call search_web with query parameter
- "calculate 5 factorial"  Call execute_javascript (requires computation)
- "Generate a multiplication table for numbers 1-12"  Call execute_javascript (formatted table)
- "Calculate compound interest on $10k at 7% for 15 years"  Call execute_javascript (complex calculation)
- "Sort this array and find median: [45,23,67,12,89]"  Call execute_javascript (data processing)
- "What is 2+2?"  Answer directly with "4" (DON'T use execute_javascript for trivial math)
- "How do I deploy a Lambda?"  Answer directly (DON'T use execute_javascript to print explanations)

Remember: Use the function calling mechanism, not text output. The API will handle execution automatically.`}const wn=N.map(Ft=>{const{llmApiCalls:J,isStreaming:Sa,toolResults:kn,...zl}=Ft;return zl});let ta=0,mi=0,Gn=0;const Ka=wn.map(Ft=>{if(Ft.role==="tool")return ta++,null;if(Ft.role==="assistant"){const J=tn(Ft.content),Sa=Ft.content&&J.trim().length>0,kn=Ft.tool_calls&&Array.isArray(Ft.tool_calls)&&Ft.tool_calls.length>0;if(Sa){if(kn){mi++;const{tool_calls:zl,...Xc}=Ft;return Xc}return Ft}else return Gn++,null}return Ft}).filter(Ft=>Ft!==null);(ta>0||mi>0||Gn>0)&&(console.log(` UI filtered: ${ta} tool messages, ${mi} tool_calls stripped, ${Gn} empty assistants removed`),console.log(`   Sending ${Ka.length} clean messages + new user message to Lambda`));const wa=[];if(Lt.size>0){const Ft=Array.from(Lt).map(Sa=>x.find(kn=>kn.id===Sa)).filter(Sa=>Sa!==void 0),J=Sa=>{let kn=Sa;return kn=kn.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,"[Image: $1]"),kn=kn.replace(/<img[^>]*src="data:image\/[^"]*"[^>]*>/gi,"[Base64 Image]"),kn=kn.replace(/<img[^>]*>/gi,"[Image]"),kn=kn.replace(/data:image\/[^;]+;base64,[A-Za-z0-9+/=]+/g,"[Base64 Image Data]"),kn};for(const Sa of Ft){const kn=J(Sa.content);wa.push({role:"user",content:`**KNOWLEDGE BASE CONTEXT** (manually attached by user):

**Title:** ${Sa.title||"Untitled"}

${kn}

---
`})}console.log(` Attached ${wa.length} manual context snippets (full content, images stripped)`)}const Mi=[{role:"system",content:Ke},...ee?[ee]:[],...wa,...Ka,_e];ee&&console.log(" RAG context included in request (automatic fragments)");const ca=Mi.map(Ft=>{const{_attachments:J,llmApiCalls:Sa,isStreaming:kn,toolResults:zl,isRetryable:Xc,retryCount:Tg,originalUserPromptIndex:Ta,originalErrorMessage:qo,extractedContent:yi,rawResult:Ud,evaluations:We,errorData:fe,imageGenerations:Ie,...kt}=Ft;return kt}),Ba=D.providers.filter(Ft=>Ft.enabled===!0),Oi=localStorage.getItem("proxy_settings");let $o,Qc;if(Oi)try{const Ft=JSON.parse(Oi);Ft.enabled&&Ft.username&&Ft.password&&($o=Ft.username,Qc=Ft.password,console.log(" Proxy settings loaded from localStorage:",Ft.username))}catch(Ft){console.error("Failed to parse proxy settings:",Ft)}const ji={providers:Ba,messages:ca,temperature:.7,stream:!0,optimization:D.optimization||"cheap",language:D.language||"en"};console.log(` Model selection optimization: ${ji.optimization}`),console.log(` Response language: ${ji.language}`),O&&(ji.location={latitude:O.latitude,longitude:O.longitude,accuracy:O.accuracy,address:O.address,timestamp:O.timestamp},console.log(" Including location in request:",O.address?.city||`${O.latitude.toFixed(4)}, ${O.longitude.toFixed(4)}`)),$o&&Qc&&(ji.proxyUsername=$o,ji.proxyPassword=Qc,console.log(" Including proxy credentials in request")),D.tavilyApiKey&&D.tavilyApiKey.trim()&&(ji.tavilyApiKey=D.tavilyApiKey,console.log("Including Tavily API key in request")),qe.length>0&&(ji.tools=qe,console.log("Sending streaming request with tools:",qe.map(Ft=>Ft.function.name)));const Fl=$t.filter(Ft=>Ft.enabled);Fl.length>0&&(ji.mcp_servers=Fl.map(Ft=>({name:Ft.name,url:Ft.url})),console.log("[MCP] Sending MCP servers:",Fl.map(Ft=>Ft.name).join(", ")));const zd=await h(),Kc=fi.current;Kc&&(console.log(" Using request ID from voice transcription:",Kc),fi.current=null),await Yv(ji,s,(Ft,J)=>{switch(console.log("SSE Event:",Ft,J),Ft){case"status":break;case"delta":J.content&&(rt(We=>We+J.content),Ce||ot("Assistant is responding"),U(We=>{const fe=We.length-1,Ie=We[fe];console.log(" Delta received, lastMessage role:",Ie?.role,"isStreaming:",Ie?.isStreaming,"hasContent:",!!Ie?.content,"contentLength:",Ie?.content?.length||0);const kt=Ie?.role==="tool";if(Ie&&Ie.role==="assistant"&&!kt){const St=[...We];return St[fe]={...Ie,content:(Ie.content||"")+J.content,isStreaming:!0},console.log(" Updating assistant at index:",fe,"newContentLength:",St[fe].content.length),St}else{const St={role:"assistant",content:J.content,isStreaming:!0};return console.log(" Creating NEW streaming block, reason:",kt?"tool execution":"no assistant message"),[...We,St]}}),U(We=>{const fe=We.length-1,Ie=We[fe];return Ie&&Ie.role==="assistant"&&Ie.isStreaming&&(un(fe),console.log(" Set currentStreamingBlockIndex to:",fe)),We}));break;case"tool_call_start":console.log(" Tool call starting:",J.name,"currentStreamingBlockIndex:",nr);const Sa=J.name?.replace(/_/g," ")||"tool";ot(`Executing ${Sa}`),ae(We=>[...We,{id:J.id,name:J.name,status:"starting"}]),console.log(" Adding tool_call to assistant message:",{id:J.id,name:J.name,hasArguments:!!J.arguments,argumentsLength:J.arguments?.length}),U(We=>{const fe=[...We];for(let Ie=fe.length-1;Ie>=0;Ie--)if(fe[Ie].role==="assistant"){if(console.log(" Found assistant message at index",Ie,"current tool_calls:",fe[Ie].tool_calls),fe[Ie].tool_calls||(fe[Ie]={...fe[Ie],tool_calls:[]}),fe[Ie].tool_calls?.find(et=>et.id===J.id)){console.log(" Tool call already exists, skipping:",J.id);break}const St={id:J.id,type:"function",function:{name:J.name,arguments:J.arguments||"{}"}};fe[Ie].tool_calls=[...fe[Ie].tool_calls||[],St],console.log(" Added tool_call:",St),console.log(" Updated message tool_calls:",fe[Ie].tool_calls);break}return fe});break;case"tool_call_progress":ae(We=>We.map(fe=>fe.id===J.id?{...fe,status:"executing"}:fe));break;case"image_generation_progress":console.log(" Image generation progress event:",J),U(We=>{const fe=[...We];for(let Ie=fe.length-1;Ie>=0;Ie--)if(fe[Ie].role==="assistant"){fe[Ie].imageGenerations||(fe[Ie].imageGenerations=[]);const kt=fe[Ie].imageGenerations,St=kt.findIndex(et=>et.id===J.id||J.prompt&&et.prompt===J.prompt);if(St>=0){const et=kt[St];kt[St]={...et,phase:J.phase,provider:J.provider||et.provider,model:J.model||et.model,estimatedSeconds:J.estimated_seconds||et.estimatedSeconds,status:J.phase==="error"?"error":"generating"}}else kt.push({id:J.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,provider:J.provider||"unknown",model:J.model||"unknown",cost:J.estimated_cost||0,prompt:J.prompt||"",size:J.size||"1024x1024",qualityTier:J.quality||"standard",status:"generating",phase:J.phase,estimatedSeconds:J.estimated_seconds,ready:!1});break}return fe});break;case"image_complete":console.log(" Image complete event:",{hasUrl:!!J.url,url:J.url,provider:J.provider,model:J.model,quality:J.qualityTier}),U(We=>{const fe=[...We];for(let Ie=fe.length-1;Ie>=0;Ie--)if(fe[Ie].role==="assistant"){fe[Ie].imageGenerations||(fe[Ie].imageGenerations=[]);const kt=fe[Ie].imageGenerations,St=J.id||`img_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,et=kt.findIndex(Ln=>Ln.id===St),cr={id:St,provider:J.provider||"unknown",model:J.model||"unknown",modelKey:J.model,cost:J.cost||0,prompt:J.prompt||"",size:J.size||"1024x1024",style:J.style||"natural",qualityTier:J.qualityTier||"standard",status:"downloading",imageUrl:J.url,base64:void 0,ready:!1,llmApiCall:J.llmApiCall,revisedPrompt:J.revisedPrompt};et>=0?kt[et]=cr:kt.push(cr);break}return fe}),J.url&&J.id&&(async()=>{try{console.log(" Downloading image via Lambda proxy:",J.url);const We=await An(),fe=await fetch(`${We}/proxy-image`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({url:J.url,format:"base64"})});if(!fe.ok)throw new Error(`Proxy fetch failed: ${fe.status}`);const Ie=await fe.json();if(!Ie.success||!Ie.dataUri)throw new Error("Invalid proxy response");console.log(" Image downloaded via proxy, size:",Ie.size,"bytes"),console.log(" Proxy data keys:",Object.keys(Ie)),console.log(" Data URI prefix:",Ie.dataUri?.substring(0,50));const kt=Ie.dataUri;U(St=>{const et=[...St];console.log(" Updating messages, total:",et.length);for(let cr=et.length-1;cr>=0;cr--)if(et[cr].role==="assistant"&&et[cr].imageGenerations){const Ln=et[cr].imageGenerations;console.log(` Checking message ${cr}, imageGenerations:`,Ln.length);const hn=Ln.findIndex(Er=>Er.id===J.id);if(console.log(` Found image at index: ${hn}, searching for ID: ${J.id}`),hn>=0){const Er={...Ln[hn]};Ln[hn]={...Ln[hn],status:"complete",base64:kt,imageUrl:kt,ready:!0};const Nr=Ln[hn];console.log(" Updated image with base64 data"),console.log("   Before:",{status:Er.status,hasBase64:!!Er.base64,ready:Er.ready}),console.log("   After:",{status:Nr.status,hasBase64:!!Nr.base64,ready:Nr.ready});break}}return et})}catch(We){console.error(" Failed to download/convert image:",We),U(fe=>{const Ie=[...fe];for(let kt=Ie.length-1;kt>=0;kt--)if(Ie[kt].role==="assistant"&&Ie[kt].imageGenerations){const St=Ie[kt].imageGenerations,et=St.findIndex(cr=>cr.id===J.id);if(et>=0){St[et]={...St[et],status:"error",ready:!1};break}}return Ie})}})();break;case"tool_call_result":ae(We=>We.map(fe=>fe.id===J.id?{...fe,status:J.error?"error":"complete",result:J.content}:fe));const kn=J.name?.replace(/_/g," ")||"tool";if(J.error?ot(`${kn} failed`):ot(`${kn} complete`),J.name==="search_web"&&(console.log(" Clearing search progress after search_web completion"),He(new Map)),J.name==="search_youtube"&&(console.log(" Clearing YouTube search progress after search_youtube completion"),Tr(new Map)),J.name==="execute_javascript"&&(console.log(" Clearing JavaScript execution progress after execute_javascript completion"),Nt(new Map)),J.name==="generate_image"&&(console.log(" Clearing image generation progress after generate_image completion"),rr(new Map)),J.name==="generate_chart"&&(console.log(" Clearing chart generation progress after generate_chart completion"),hi(new Map)),U(We=>{console.log(" Embedding tool result in assistant message, tool:",J.name,"tool_call_id:",J.id),console.log(" Current messages array length:",We.length);const fe=[...We];let Ie=[];console.log(" Assistant messages in array:"),We.forEach((et,cr)=>{et.role==="assistant"&&console.log(`  [${cr}] has tool_calls:`,!!et.tool_calls,et.tool_calls?`(${et.tool_calls.length} calls: ${et.tool_calls.map(Ln=>Ln.id).join(", ")})`:"")});let kt=-1;for(let et=0;et<fe.length;et++)if(fe[et].role==="assistant"&&fe[et].tool_calls){if(fe[et].tool_calls?.some(Ln=>Ln.id===J.id)){kt=et,console.log("  Found FIRST assistant with matching tool call at index:",et,"of",fe.length);const Ln=fe[et].llmApiCalls?.filter(Er=>Er.phase&&Er.tool==="search_web"&&(Er.phase==="page_summary"||Er.phase==="synthesis_summary"||Er.phase==="description_summary"))||[];Ln.length>0&&(Ie=Ln);const hn={role:"tool",content:J.content,tool_call_id:J.id,name:J.name,...Ie.length>0&&{llmApiCalls:Ie}};if(fe[et].toolResults?fe[et]={...fe[et],toolResults:[...fe[et].toolResults||[],hn]}:fe[et]={...fe[et],toolResults:[hn]},console.log(" Embedded tool result in assistant message at index",et,", total toolResults:",fe[et].toolResults?.length),J.name==="execute_javascript"){const Er=(fe[et].toolResults?.length||1)-1,Nr=et*1e3+Er;console.log(" Auto-expanding execute_javascript result at key:",Nr),dt(bi=>{const zr=new Set(bi);return zr.add(Nr),zr})}kt=et;break}}else fe[et].role==="assistant"&&console.log(`  [${et}] is assistant but has no tool_calls`);return kt!==-1||(console.warn("  Could not find assistant message with matching tool_call_id:",J.id),console.warn(" Available tool_call_ids:",fe.filter(et=>et.role==="assistant"&&et.tool_calls).flatMap(et=>et.tool_calls?.map(cr=>cr.id)||[]))),fe}),J.name==="search_web"&&J.content){const We=JU(J.name,J.content);We&&(p(We),console.log("Search result added to SearchTab:",We))}break;case"tool_progress":console.log(" Tool progress event:",J),J.tool_call_id&&(J.tool_name==="scrape_web_content"?le(We=>{const fe=new Map(We),Ie=fe.get(J.tool_call_id)||[];return fe.set(J.tool_call_id,[...Ie,J]),fe}):di(We=>{const fe=new Map(We),Ie=fe.get(J.tool_call_id)||[];return fe.set(J.tool_call_id,[...Ie,J]),fe}));break;case"search_progress":if(console.log(" Search progress event:",J),console.log(" Current searchProgress size:",Pe.size),console.log(" isLoading:",H),J.tool==="search_web"){J.phase==="searching"&&He(new Map);let We;J.phase==="fetching_result"||J.phase==="result_loaded"||J.phase==="result_failed"?We=`search_web_result_${J.result_index||0}`:We=`search_web_${J.phase}`,He(fe=>{const Ie=new Map(fe);return Ie.set(We,J),console.log(" Updated searchProgress, new size:",Ie.size,"key:",We),Ie}),(J.phase==="searching"||J.phase==="results_found")&&U(fe=>{for(let Ie=fe.length-1;Ie>=0;Ie--){const kt=fe[Ie];if(kt.role==="assistant"&&kt.tool_calls&&kt.tool_calls.findIndex(et=>et.function.name==="search_web")!==-1){dt(et=>{const cr=new Set(et);return cr.add(Ie),cr});break}}return fe})}break;case"youtube_search_progress":console.log(" YouTube search progress event:",J),J.phase==="searching"&&Tr(new Map);const zl=`youtube_${J.phase}`;Tr(We=>{const fe=new Map(We);return fe.set(zl,J),fe}),J.phase==="complete"&&setTimeout(()=>{Tr(new Map)},1e3),J.phase==="searching"&&U(We=>{for(let fe=We.length-1;fe>=0;fe--){const Ie=We[fe];if(Ie.role==="assistant"&&Ie.tool_calls&&Ie.tool_calls.findIndex(St=>St.function.name==="search_youtube")!==-1){dt(St=>{const et=new Set(St);return et.add(fe),et});break}}return We});break;case"javascript_execution_progress":console.log(" JavaScript execution progress:",J);const Xc=J.phase==="console_output"?`js_output_${J.output_number||Date.now()}`:`js_${J.phase}`;Nt(We=>{const fe=new Map(We);return fe.set(Xc,J),fe}),(J.phase==="completed"||J.phase==="error")&&setTimeout(()=>{Nt(new Map)},2e3);break;case"image_generation_progress":console.log(" Image generation progress:",J);const Tg=`img_${J.phase}`;rr(We=>{const fe=new Map(We);return fe.set(Tg,J),fe}),(J.phase==="completed"||J.phase==="error")&&setTimeout(()=>{rr(new Map)},2e3);break;case"chart_generation_progress":console.log(" Chart generation progress:",J);const Ta=`chart_${J.phase}`;hi(We=>{const fe=new Map(We);return fe.set(Ta,J),fe}),J.phase==="completed"&&setTimeout(()=>{hi(new Map)},2e3);break;case"scrape_progress":case"transcript_extracted":if(Ft==="transcript_extracted"){console.log(" Skipping transcript_extracted event (hidden from UI):",J);break}console.log(" Content extraction event:",J),J.phase==="content_extracted"&&sa(We=>{const fe=new Map(We),Ie=J.url||`extraction_${Date.now()}`;return fe.set(Ie,J),fe});break;case"message_complete":J.tool_calls&&J.tool_calls.length>0&&console.log(" message_complete with tool_calls:",J.tool_calls.map(We=>({id:We.id,name:We.function.name}))),ot("Response complete"),console.log(" message_complete imageGenerations:",J.imageGenerations?.length||0,"imageGenerations:",J.imageGenerations),nr!==null?(U(We=>{const fe=[...We];if(fe[nr]){let Ie=fe[nr].imageGenerations||[];J.imageGenerations&&J.imageGenerations.length>0&&(Ie=[...Ie],J.imageGenerations.forEach(St=>{const et=Ie.findIndex(cr=>cr.id===St.id);et>=0?Ie[et]={...Ie[et],...St}:Ie.push(St)}));const kt={...fe[nr],content:J.content||fe[nr].content||"",tool_calls:J.tool_calls||fe[nr].tool_calls,extractedContent:J.extractedContent||fe[nr].extractedContent,imageGenerations:Ie,llmApiCalls:J.llmApiCalls||fe[nr].llmApiCalls,evaluations:J.evaluations||fe[nr].evaluations,isStreaming:!1};J.toolResults&&kt.toolResults&&(kt.toolResults=kt.toolResults.map(St=>{const et=J.toolResults.find(cr=>cr.tool_call_id===St.tool_call_id);return et?{...St,rawResponse:et.rawResponse,extractionMetadata:et.extractionMetadata}:St})),fe[nr]=kt}return fe}),un(null),rt("")):(J.content||J.tool_calls)&&(U(We=>{const fe=We[We.length-1],Ie=We.length-1,kt=(J.content||"").trim(),St=fe?.content?tn(fe.content).trim():"";let et=!1;for(let hn=We.length-1;hn>=0&&We[hn].role!=="assistant";hn--)if(We[hn].role==="tool"){et=!0;break}if(et){if(fe?.role==="assistant"&&fe.isStreaming){console.log(" Updating last assistant message with message_complete data");const Er=[...We];let Nr=fe.imageGenerations||[];J.imageGenerations&&J.imageGenerations.length>0&&(Nr=[...Nr],J.imageGenerations.forEach(zr=>{const sn=Nr.findIndex(us=>us.id===zr.id);sn>=0?Nr[sn]={...Nr[sn],...zr}:Nr.push(zr)}));const bi={...fe,content:J.content||fe.content||"",tool_calls:J.tool_calls||fe.tool_calls,extractedContent:J.extractedContent||fe.extractedContent,imageGenerations:Nr,llmApiCalls:J.llmApiCalls||fe.llmApiCalls,evaluations:J.evaluations||fe.evaluations,isStreaming:!1};return J.toolResults&&bi.toolResults&&(bi.toolResults=bi.toolResults.map(zr=>{const sn=J.toolResults.find(us=>us.tool_call_id===zr.tool_call_id);return sn?(console.log(" Updating embedded toolResult with rawResponse:",{tool_call_id:zr.tool_call_id,hasRawResponse:!!sn.rawResponse,rawResponseLength:sn.rawResponse?.length}),{...zr,rawResponse:sn.rawResponse,extractionMetadata:sn.extractionMetadata}):zr})),Er[Ie]=bi,Er}console.log(" Creating new assistant message for new iteration");const hn={role:"assistant",content:J.content||"",...J.tool_calls&&{tool_calls:J.tool_calls},...J.extractedContent&&{extractedContent:J.extractedContent},...J.imageGenerations&&{imageGenerations:J.imageGenerations},...J.llmApiCalls&&{llmApiCalls:J.llmApiCalls},...J.evaluations&&{evaluations:J.evaluations}};return[...We,hn]}if(fe?.role==="assistant"&&(fe.isStreaming||!St||St&&kt.startsWith(St))){console.log(" Updating last assistant message with message_complete data"),console.log(" lastMessage.imageGenerations:",fe.imageGenerations),console.log(" data.imageGenerations:",J.imageGenerations);const Er=[...We];let Nr=fe.imageGenerations||[];console.log(" mergedImageGenerations BEFORE merge:",Nr),J.imageGenerations&&J.imageGenerations.length>0&&(Nr=[...Nr],J.imageGenerations.forEach(zr=>{console.log(" Processing imageGeneration from message_complete:",{id:zr.id,hasBase64:!!zr.base64,base64Length:zr.base64?.length,hasImageUrl:!!zr.imageUrl});const sn=Nr.findIndex(us=>us.id===zr.id);if(sn>=0){const us=Nr[sn].base64;console.log(" Merging - existing has base64:",!!us,"new has base64:",!!zr.base64),Nr[sn]={...Nr[sn],...zr,base64:zr.base64||us},console.log(" After merge - has base64:",!!Nr[sn].base64)}else Nr.push(zr),console.log(" Added new image to merge")})),console.log(" mergedImageGenerations AFTER merge:",Nr);const bi={...fe,content:J.content||fe.content||"",tool_calls:J.tool_calls||fe.tool_calls,extractedContent:J.extractedContent||fe.extractedContent,imageGenerations:Nr,llmApiCalls:J.llmApiCalls||fe.llmApiCalls,evaluations:J.evaluations||fe.evaluations,isStreaming:!1};return console.log(" updatedMessage.imageGenerations:",bi.imageGenerations),Er[Ie]=bi,console.log(" newMessages[lastMessageIndex].imageGenerations:",Er[Ie].imageGenerations),console.log(" RETURNING newMessages array:",Er.map((zr,sn)=>({idx:sn,role:zr.role,hasImageGenerations:!!zr.imageGenerations,imageGenerationsLength:zr.imageGenerations?.length,actualImageGenerations:zr.imageGenerations}))),Er}if(fe?.role==="assistant"&&!fe.isStreaming&&St===kt)return console.log(" Skipping duplicate final message block (content matches non-streaming block)"),We;const cr={role:"assistant",content:J.content||"",...J.tool_calls&&{tool_calls:J.tool_calls},...J.extractedContent&&{extractedContent:J.extractedContent},...J.imageGenerations&&{imageGenerations:J.imageGenerations},...J.llmApiCalls&&{llmApiCalls:J.llmApiCalls},...J.evaluations&&{evaluations:J.evaluations}};if(J.content?.includes("Based on the search results above")||J.content?.includes("I apologize, but I was unable to generate a response")||J.content?.includes("I was unable to provide")||!J.content&&!J.tool_calls||J.content&&J.content.trim().length<10&&!J.tool_calls){let hn=-1;for(let Er=We.length-1;Er>=0;Er--)if(We[Er].role==="user"){hn=Er;break}cr.isRetryable=!0,cr.originalErrorMessage="Incomplete or fallback response",cr.originalUserPromptIndex=hn>=0?hn:void 0,cr.retryCount=0}return[...We,cr]}),rt(""));break;case"provider_fallback":console.log(" Provider fallback:",J);const qo=` ${J.originalModel} hit rate limit, switching to ${J.fallbackModel} (attempt ${J.attempt})`;U(We=>[...We,{role:"system",content:qo,timestamp:new Date().toISOString(),metadata:{type:"provider_fallback",originalModel:J.originalModel,fallbackModel:J.fallbackModel,fallbackProvider:J.fallbackProvider,reason:J.reason,attempt:J.attempt,phase:J.phase,iteration:J.iteration}}]);break;case"complete":console.log("Stream complete:",J),J.extractedContent&&(console.log(" Attaching extractedContent from complete event:",{hasAllImages:!!J.extractedContent.allImages,allImagesCount:J.extractedContent.allImages?.length||0,hasImages:!!J.extractedContent.images,imagesCount:J.extractedContent.images?.length||0}),U(We=>{const fe=[...We];for(let Ie=fe.length-1;Ie>=0;Ie--)if(fe[Ie].role==="assistant"){fe[Ie]={...fe[Ie],extractedContent:J.extractedContent},console.log(` Attached extractedContent to assistant message at index ${Ie}`);break}return fe})),J.cost&&typeof J.cost=="number"&&(B(J.cost),dn(J.cost),console.log(` Request cost: $${J.cost.toFixed(4)}`));break;case"error":const yi=J.error;if(J.type==="input_moderation_error"){console.warn(" Input moderation error:",J.reason);const fe={role:"assistant",content:` **Content Moderation Alert**

${yi}

**Reason**: ${J.reason}

**Violations**: ${J.violations?.join(", ")||"Unknown"}`,llmApiCalls:J.llmApiCalls||[]};if(U(Ie=>[...Ie,fe]),J.suggestedRevision){ie(J.suggestedRevision);const Ie={role:"assistant",content:` **Suggested Revision**

We've updated your message to comply with content policies. You can edit and send it again.`};U(kt=>[...kt,Ie])}else ie("");break}if(J.type==="output_moderation_error"){console.warn(" Output moderation error:",J.reason);const We=` **Content Moderation Alert**

The generated response was flagged by our content moderation system and cannot be displayed.

**Reason**: ${J.reason}

Please try rephrasing your question.`;U(fe=>{const Ie=[...fe];for(let kt=Ie.length-1;kt>=0;kt--)if(Ie[kt].role==="assistant"){Ie[kt]={...Ie[kt],content:We,guardrailFailed:!0,guardrailReason:J.reason,guardrailViolations:J.violations,llmApiCalls:J.llmApiCalls||Ie[kt].llmApiCalls||[],isStreaming:!1},console.log(` Replaced assistant message content at index ${kt} with guardrail error`);break}return Ie});break}if(J.type==="guardrail_configuration_error"||J.type==="guardrail_system_error"){console.error(" Guardrail system error:",J.error);const fe={role:"assistant",content:` **System Error**

${yi}

The content moderation system is experiencing issues. Please contact support if this persists.`};U(Ie=>[...Ie,fe]),T(yi);break}T(yi),(yi.includes("Authentication")||yi.includes("UNAUTHORIZED")||J.code==="UNAUTHORIZED")&&(console.warn(" Authentication error detected, logging out..."),k(i("chat.sessionExpired"))),J.code==="MAX_ITERATIONS"&&J.showContinueButton&&J.continueContext&&(console.log(" Continue button enabled for MAX_ITERATIONS error:",yi),$e(!0),Yt(J.continueContext));const Ud={role:"assistant",content:` Error: ${yi}`,errorData:J,isRetryable:!0,originalErrorMessage:yi,originalUserPromptIndex:Ze,retryCount:0};U(We=>[...We,Ud]);break;case"llm_request":console.log(" LLM API Request:",J),U(We=>{const fe=[...We],kt=fe[fe.length-1]?.role==="tool";let St=!1;if(!kt){for(let et=fe.length-1;et>=0;et--)if(fe[et].role==="assistant"){const cr=tn(fe[et].content);fe[et].isStreaming||!fe[et].content||cr.trim().length===0?(console.log(" Attaching llmApiCalls to active assistant at index:",et,"phase:",J.phase,"provider:",J.provider,"model:",J.model),fe[et]={...fe[et],llmApiCalls:[...fe[et].llmApiCalls||[],{phase:J.phase,provider:J.provider||"Unknown",model:J.model||"Unknown",request:J.request,timestamp:J.timestamp}]},St=!0):console.log(" Skipping completed assistant at index:",et,"(from previous query)");break}}return St||(console.log(" Creating new placeholder for llm_request, reason:",kt?"tools executed":"no active assistant","provider:",J.provider,"model:",J.model),fe.push({role:"assistant",content:"",isStreaming:!0,llmApiCalls:[{phase:J.phase,provider:J.provider||"Unknown",model:J.model||"Unknown",request:J.request,timestamp:J.timestamp}]})),fe});break;case"llm_response":console.log(" LLM API Response:",J),U(We=>{const fe=[...We];for(let Ie=fe.length-1;Ie>=0;Ie--)if(fe[Ie].role==="assistant"&&fe[Ie].llmApiCalls){const kt=fe[Ie].llmApiCalls,St=kt[kt.length-1];St&&St.phase===J.phase&&!St.response&&(St.response=J.response,St.httpHeaders=J.httpHeaders,St.httpStatus=J.httpStatus,J.provider&&(St.provider=J.provider),J.model&&(St.model=J.model),console.log(" Updated llmApiCall response for phase:",J.phase,"provider:",St.provider,"model:",St.model),fe[Ie]={...fe[Ie],llmApiCalls:[...kt]});break}return fe});break;case"todos_updated":console.log(" Todos updated:",J),kr({total:J.total??0,remaining:J.remaining??0,current:J.current??null,items:Array.isArray(J.items)?J.items:[]});break;case"todos_current":console.log(" Todos current update:",J),kr(We=>({total:J.total??We?.total??0,remaining:J.remaining??We?.remaining??0,current:J.current??We?.current??null,items:We?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",J),gi(J?.next||J?.state?.current?.description||null),setTimeout(()=>gi(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",J),k(J.message||"Todo auto-progression limit reached. Please continue manually.");break;case"snippet_inserted":console.log(" Snippet inserted:",J),window.dispatchEvent(new CustomEvent("snippet_inserted",{detail:J})),C(i("chat.snippetSaved",{title:J.title})),J.id&&(console.log(" Triggering snippet sync from Google Sheets for ID:",J.id),setTimeout(async()=>{try{await v(J.id)}catch(We){console.error(" Failed to sync snippet:",We)}},500));break;case"snippet_deleted":console.log(" Snippet deleted:",J),window.dispatchEvent(new CustomEvent("snippet_deleted",{detail:J})),C(i("chat.snippetDeleted",{title:J.title}));break;case"snippet_updated":console.log(" Snippet updated:",J),window.dispatchEvent(new CustomEvent("snippet_updated",{detail:J})),C(`Updated snippet: ${J.title}`);break;case"token_refreshed":console.log(" Google OAuth token refreshed"),J.accessToken&&(localStorage.setItem("google_access_token",J.accessToken),console.log(" Updated google_access_token in localStorage"));break}},()=>{Se&&clearTimeout(Se),I(!1),ae([]),rt(""),un(null),Nn.current=null},Ft=>{Se&&clearTimeout(Se),console.error("Streaming error:",Ft),T(`Streaming error: ${Ft.message}`),I(!1),ae([]),Nn.current=null},Nn.current.signal,zd,Kc)}catch(Le){if(console.error("Chat error:",Le),Se&&clearTimeout(Se),Le instanceof Error&&Le.name==="AbortError"){const he={role:"assistant",content:" Request timed out after 4 minutes. This may happen when tools take too long to execute. Try simplifying your request or disabling some tools.",isRetryable:!0,originalErrorMessage:"Request timed out",originalUserPromptIndex:Ze,retryCount:0};U(Ve=>[...Ve,he]),k("Request timed out after 4 minutes. Try disabling some tools or simplifying your request.")}else{const he=Le instanceof Error?Le.message:"Unknown error",Ve={role:"assistant",content:` Error: ${he}`,errorData:Le instanceof Error?{...Le,message:Le.message,name:Le.name,stack:Le.stack}:{message:String(Le)},isRetryable:!0,originalErrorMessage:he,originalUserPromptIndex:Ze,retryCount:0};U(Ue=>[...Ue,Ve]),T(`Chat error: ${he}`)}I(!1),ae([]),Nn.current=null}},Ty=async z=>{const te=N[z];if(!te||!te.isRetryable){T("This message cannot be retried");return}const _e=te.retryCount||0;if(_e>=3){T("Maximum retry attempts (3) reached");return}const Ze=te.originalUserPromptIndex;if(Ze===void 0||Ze<0){T("Cannot find original user prompt for retry");return}const Oe=N[Ze];if(!Oe||Oe.role!=="user"){T("Invalid user prompt for retry");return}const ee=N.slice(Ze+1,z),qe=ee.filter(he=>he.role==="tool"),Se=ee.filter(he=>he.role==="assistant"||he.role==="tool");console.log(" Retrying request:",{userPromptIndex:Ze,messageIndex:z,retryCount:_e+1,previousToolResults:qe.length,intermediateMessages:Se.length,failureReason:te.originalErrorMessage}),C(`Retrying request (attempt ${_e+2}) with full context...`),U(he=>he.slice(0,z));const Le=tn(Oe.content);ie(Le),_s.current=!0},ky=async z=>{const te=await DN(z.id);te&&te.messages?(U(te.messages),Kr(z.id),localStorage.setItem("last_active_chat_id",z.id),te.systemPrompt&&F(te.systemPrompt),te.planningQuery&&yt(te.planningQuery),te.generatedSystemPrompt&&wr(te.generatedSystemPrompt),te.generatedUserQuery&&Ar(te.generatedUserQuery),te.selectedSnippetIds&&Array.isArray(te.selectedSnippetIds)?(Ht(new Set(te.selectedSnippetIds)),console.log(` Restored ${te.selectedSnippetIds.length} attached snippets`)):Ht(new Set),ue(!1),C(i("chat.loadChatSuccess"))):T(i("chat.failedToLoadChat"))},vg=async z=>{await MN(z);const te=await _v();ia(te),C("Chat deleted")},Ey=async()=>{if(ge.size===0)return;const z=ge.size;for(const _e of ge)await MN(_e);const te=await _v();ia(te),Be(new Set),C(`${z} chat${z>1?"s":""} deleted`)},Cy=()=>{const z=new Set(Pi.map(te=>te.id));Be(z)},_y=()=>{Be(new Set)},Ay=z=>{const te=new Set(ge);te.has(z)?te.delete(z):te.add(z),Be(te)},Fd=async()=>{await Ame(),ia([]),Be(new Set),ke(!1),ue(!1),C(i("chat.allChatHistoryCleared"))},Ny=async()=>{if(!nt){T("No continuation context available");return}console.log(" Continuing from error/limit with context:",nt),$e(!1),A();const z=[];t.web_search&&z.push({type:"function",function:{name:"web_search",description:"Search the web for information",parameters:{type:"object",properties:{query:{type:"string",description:"Search query"}},required:["query"]}}}),t.execute_js&&z.push({type:"function",function:{name:"execute_js",description:"Execute JavaScript code",parameters:{type:"object",properties:{code:{type:"string",description:"JavaScript code to execute"}},required:["code"]}}}),t.scrape_url&&z.push({type:"function",function:{name:"scrape_web_content",description:"Scrape content from a URL",parameters:{type:"object",properties:{url:{type:"string",description:"URL to scrape"}},required:["url"]}}});const _e={providers:D.providers.filter(Oe=>Oe.enabled===!0),messages:nt.messages,temperature:.7,stream:!0,isContinuation:!0,optimization:D.optimization||"cheap",language:D.language||"en"};console.log(` Continuation request with optimization: ${_e.optimization}`),console.log(` Response language: ${_e.language}`),O&&(_e.location={latitude:O.latitude,longitude:O.longitude,accuracy:O.accuracy,address:O.address,timestamp:O.timestamp},console.log(" Including location in continuation request:",O.address?.city||`${O.latitude.toFixed(4)}, ${O.longitude.toFixed(4)}`)),z.length>0&&(_e.tools=z),nt.extractedContent&&(_e.extractedContent=nt.extractedContent);const Ze=$t.filter(Oe=>Oe.enabled);if(Ze.length>0&&(_e.mcp_servers=Ze.map(Oe=>({name:Oe.name,url:Oe.url}))),I(!0),!s){T("Please sign in to continue"),$e(!0),I(!1);return}try{await Yv(_e,s,(Oe,ee)=>{switch(console.log("SSE Event (continuation):",Oe,ee),Oe){case"delta":ee.content&&(rt(Le=>Le+ee.content),U(Le=>{const he=Le.length-1,Ve=Le[he],Ue=Ve?.role==="tool";if(Ve&&Ve.role==="assistant"&&!Ue){const Ee=[...Le];return Ee[he]={...Ve,content:(Ve.content||"")+ee.content,isStreaming:!0},Ee}else{const Ee={role:"assistant",content:ee.content,isStreaming:!0};return[...Le,Ee]}}));break;case"error":const qe=ee.error;T(qe),ot(`Error: ${qe.substring(0,100)}`),ee.showContinueButton&&ee.continueContext&&($e(!0),Yt(ee.continueContext));const Se={role:"assistant",content:` Error: ${qe}`,errorData:ee,isRetryable:!0,originalErrorMessage:qe,retryCount:0};U(Le=>[...Le,Se]);break;case"complete":console.log("Continuation complete:",ee),ee.cost&&typeof ee.cost=="number"&&B(ee.cost);break;case"todos_updated":console.log(" Todos updated:",ee),kr({total:ee.total??0,remaining:ee.remaining??0,current:ee.current??null,items:Array.isArray(ee.items)?ee.items:[]});break;case"todos_current":console.log(" Todos current update:",ee),kr(Le=>({total:ee.total??Le?.total??0,remaining:ee.remaining??Le?.remaining??0,current:ee.current??Le?.current??null,items:Le?.items??[]}));break;case"todos_resubmitting":console.log(" Todos resubmitting:",ee),gi(ee?.next||ee?.state?.current?.description||null),setTimeout(()=>gi(null),2e3);break;case"todos_limit_reached":console.log(" Todos limit reached:",ee),k(ee.message||"Todo auto-progression limit reached. Please continue manually.");break;default:console.log("Unhandled event in continuation:",Oe,ee)}},void 0,void 0,Nn.current?.signal)}catch(Oe){console.error("Error during continuation:",Oe),T(Oe instanceof Error?Oe.message:"Failed to continue"),$e(!0)}finally{I(!1)}},wg=()=>{U([]),ie(""),F(""),yt(""),wr(""),Ar(""),Ht(new Set),f(),dt(new Set),Kr(null),localStorage.removeItem("last_active_chat_id"),setTimeout(()=>{ro.current?.focus()},0),console.log("Started new chat - all prompts cleared")},Ly=()=>{!bt.name.trim()||!bt.url.trim()||(or([...$t,{id:`mcp_${Date.now()}`,name:bt.name,url:bt.url,enabled:!0}]),It({name:"",url:""}))},Sg=z=>{or($t.map(te=>te.id===z?{...te,enabled:!te.enabled}:te))},Py=z=>{or($t.filter(te=>te.id!==z))};return u.jsxs("div",{className:"flex flex-col h-full relative",onDragEnter:jl,onDragOver:Md,onDragLeave:by,onDrop:Od,children:[u.jsx(sme,{isDragging:ba}),u.jsx(nme,{systemPrompt:G,setSystemPrompt:F}),u.jsx(ame,{systemPrompt:G,selectedSnippetIds:Lt,showSnippetsPanel:tt,messageCount:N.length,onNewChat:wg,onShowLoadDialog:()=>ue(!0),onToggleSnippetsPanel:()=>gt(!tt),onShowExamplesModal:()=>Sr(!0),onShowShareDialog:()=>ar(!0)}),u.jsxs("div",{ref:jo,className:"flex-1 overflow-y-auto md:px-4 py-4 space-y-4","aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text",children:[u.jsx("div",{className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true",children:Lr}),N.length===0&&u.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:"No messages yet. Start a conversation!"}),(console.log(" RENDER: messages array:",N.map((z,te)=>({idx:te,role:z.role,hasImageGenerations:!!z.imageGenerations,imageGenerationsLength:z.imageGenerations?.length,actualImageGenerations:z.imageGenerations}))),null),N.map((z,te)=>{const _e=Qe.has(te),Ze=z.content?tn(z.content):"";console.log(`Rendering message ${te}:`,z.role,Ze.substring(0,50)),console.log(` Message ${te} imageGenerations:`,z.imageGenerations),z.role==="assistant"&&z.tool_calls&&console.log(`  Message ${te} has ${z.tool_calls.length} tool_calls:`,z.tool_calls.map(ee=>({id:ee.id,name:ee.function?.name})));const Oe=z.role==="assistant"&&z.tool_calls?.some(ee=>{if(ee.function.name!=="transcribe_url")return!1;const qe=Oa.get(ee.id);if(!qe||qe.length===0)return!1;const Se=qe[qe.length-1],Le=Se.progress_type||Se.data?.type||"";return!(Le==="transcribe_complete"||Le==="transcription_stopped"||Le==="error")});return z.role==="assistant"&&!z.content&&!Oe&&!z.tool_calls&&!z.isStreaming?null:u.jsx("div",{className:`flex gap-2 ${z.role==="user"?"flex-row-reverse":(z.role==="tool","")}`,children:u.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${z.role==="user"?"bg-blue-500 text-white":z.role==="tool"?"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700":z.content&&tn(z.content).startsWith(" Error:")?"bg-pink-100 dark:bg-pink-900/30 border-2 border-pink-400 dark:border-pink-600 text-gray-900 dark:text-gray-100":"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100"}`,children:[z.role==="tool"&&(()=>{let ee=null;console.log(" Searching for tool_call_id:",z.tool_call_id,"in",N.length,"messages");for(let he=te-1;he>=0;he--)if(N[he].tool_calls&&(console.log("  Found message at index",he,"with",N[he].tool_calls?.length,"tool_calls"),ee=N[he].tool_calls?.find(Ve=>Ve.id===z.tool_call_id),ee)){console.log(" Found tool call for",z.name,":",ee);break}ee||console.log(" No tool call found for",z.tool_call_id);let qe=null;if(z.name==="search_web"&&typeof z.content=="string")try{const he=JSON.parse(z.content);he.results&&Array.isArray(he.results)&&(qe=he.results)}catch{}let Se=null;if(z.name==="scrape_web_content"&&typeof z.content=="string")try{const he=JSON.parse(z.content);(he.url||he.content||he.error)&&(Se=he)}catch{}let Le=null;if(z.name==="execute_javascript"&&typeof z.content=="string")try{const he=JSON.parse(z.content);(he.result!==void 0||he.error)&&(Le=he)}catch{}return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[u.jsxs("span",{children:[" ",z.name||"Tool Result"]}),ee&&(z.name==="search_web"||z.name==="search_youtube")&&(()=>{try{const he=JSON.parse(ee.function.arguments);if(he.query)return u.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',he.query,'"']})}catch{}return null})()]}),u.jsx("button",{onClick:()=>{const he=new Set(Qe);_e?he.delete(te):he.add(te),dt(he)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:_e?"Collapse":"Expand",children:_e?"":""})]}),_e&&u.jsxs("div",{className:"text-xs space-y-2",children:[ee&&u.jsx("div",{className:"mb-3 bg-purple-50 dark:bg-purple-950/50 p-3 rounded border border-purple-200 dark:border-purple-800",children:ee.function.name==="search_web"?u.jsxs(u.Fragment,{children:[ee.function.arguments&&(()=>{try{const he=JSON.parse(ee.function.arguments);if(he.query)return u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:" Search Query:"}),u.jsxs("div",{className:"text-purple-900 dark:text-purple-100 italic",children:['"',he.query,'"']})]})}catch(he){console.error("Error parsing search arguments:",he)}return null})(),(()=>{try{if(!z.content)return null;const Ve=(typeof z.content=="string"?JSON.parse(z.content):z.content)?.searchService;if(Ve&&typeof Ve=="string"){const Ue=Ve==="tavily";return u.jsxs("div",{className:"mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.searchProvider")}),u.jsx("div",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium ${Ue?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 border border-blue-300 dark:border-blue-700":"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border border-green-300 dark:border-green-700"}`,children:Ue?" Tavily API":" DuckDuckGo"})]})}}catch(he){console.error("Error parsing search provider:",he)}return null})()]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:i("chat.functionCall")}),u.jsx("div",{className:"font-mono text-xs mb-2",children:u.jsx("span",{className:"text-purple-900 dark:text-purple-100",children:ee.function.name})}),ee.function.arguments&&(()=>{try{const he=JSON.parse(ee.function.arguments);return he.code?u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.code")}),u.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:he.code})})]}):u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-1",children:i("chat.arguments")}),u.jsx("div",{className:"bg-gray-900 dark:bg-gray-950 p-3 rounded font-mono text-xs overflow-x-auto max-h-96 overflow-y-auto",children:u.jsx(Vp,{data:he,expandAll:!0})})]})}catch(he){console.error("Error parsing tool arguments:",he)}return null})()]})}),z.tool_call_id&&z.name!=="search_web"&&u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:i("chat.callId")}),u.jsx("div",{className:"font-mono text-xs bg-purple-50 dark:bg-purple-950 p-1 rounded mt-1 break-all",children:z.tool_call_id})]}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:i("chat.result")}),u.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950 p-2 rounded mt-1 max-h-96 overflow-y-auto",children:[qe?u.jsx(tme,{results:qe}):Se?u.jsxs("div",{className:"space-y-2",children:[Se.url&&u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:i("chat.url")}),u.jsx("a",{href:Se.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-xs break-all block mt-1",children:Se.url})]}),Se.rawHtml&&u.jsx("button",{onClick:()=>Ri({url:Se.url,html:Se.rawHtml}),className:"flex-shrink-0 px-3 py-1.5 text-xs bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors font-medium",title:i("chat.viewRawHtml"),children:" Raw HTML"})]}),Se.error&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[u.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:i("chat.error")}),u.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1",children:Se.error})]}),Se.content&&u.jsxs("div",{children:[u.jsxs("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:[" Page Content (",Se.content.length.toLocaleString()," characters)",Se.format&&u.jsxs("span",{className:"ml-2 text-xs text-purple-600 dark:text-purple-400",children:["[",Se.format,"]"]})]}),u.jsx("div",{className:"mt-2 p-3 bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 max-h-80 overflow-y-auto",children:Se.format==="markdown"?u.jsx("div",{className:"text-xs",children:u.jsx(tm,{content:Se.content})}):u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:Se.content})})]}),(Se.images||Se.allImages||Se.youtube||Se.media||Se.links)&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-purple-200 dark:border-purple-700",children:[u.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200 mb-3",children:" Extracted Content"}),u.jsxs("div",{className:"space-y-3",children:[Se.images&&Se.images.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Prioritized Images (sent to LLM): ",Se.images.length]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Se.images.map((he,Ve)=>u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-2",children:[u.jsx("img",{src:he.src,alt:he.alt||`Image ${Ve+1}`,className:"w-full h-24 object-cover rounded mb-1",loading:"lazy"}),he.alt&&u.jsx("p",{className:"text-[10px] text-gray-600 dark:text-gray-400 truncate",children:he.alt})]},Ve))})]}),Se.allImages&&Se.allImages.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" All Images: ",Se.allImages.length]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:Se.allImages.slice(0,24).map((he,Ve)=>u.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded p-1",children:u.jsx("img",{src:he.src,alt:he.alt||`Image ${Ve+1}`,className:"w-full h-16 object-cover rounded",loading:"lazy"})},Ve))}),Se.allImages.length>24&&u.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Se.allImages.length-24," more"]})]}),Se.youtube&&Se.youtube.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" YouTube Videos: ",Se.youtube.length]}),u.jsx("div",{className:"space-y-1",children:Se.youtube.map((he,Ve)=>u.jsx("a",{href:he.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:he.text||he.url},Ve))})]}),Se.media&&Se.media.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Media (Audio/Video): ",Se.media.length]}),u.jsx("div",{className:"space-y-1",children:Se.media.map((he,Ve)=>u.jsx("a",{href:he.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:he.text||he.url},Ve))})]}),Se.links&&Se.links.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2",children:[" Links: ",Se.links.length]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:Se.links.slice(0,20).map((he,Ve)=>u.jsx("a",{href:he.url,target:"_blank",rel:"noopener noreferrer",className:"block text-xs text-blue-600 dark:text-blue-400 hover:underline truncate",children:he.text||he.url},Ve))}),Se.links.length>20&&u.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-1",children:["...and ",Se.links.length-20," more links"]})]})]})]})]}):Le?u.jsxs("div",{className:"space-y-3",children:[Le.error&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[u.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),u.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:Le.error})]}),Le.result!==void 0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[u.jsx("span",{className:"font-semibold text-purple-800 dark:text-purple-200",children:" Output:"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(Le.result)),C(i("chat.outputCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:i("chat.copyOutputToClipboard"),children:"Copy"}),u.jsx("button",{onClick:()=>{Ii(String(Le.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:i("chat.captureOutputToSwag"),children:"Grab"})]})]}),ee?.executedAt&&u.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mb-2",children:["(",ee.runtime||"N/A",")"]}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:u.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(Le.result)})})]})]}):z.name==="generate_chart"?(()=>{let he=null;for(let Ve=te-1;Ve>=0&&!(N[Ve].role==="assistant"&&N[Ve].content&&(he=Ol(N[Ve].content),he));Ve--);return u.jsx(LN,{content:z.content,chartCode:he||void 0})})():u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-800 dark:text-gray-200",children:tn(z.content)}),u.jsx(NN,{rawResponse:z.rawResponse,extractionMetadata:z.extractionMetadata}),z.content&&u.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-purple-200 dark:border-purple-700",children:[u.jsxs("button",{onClick:()=>Ii(tn(z.content),"tool",z.name),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),z.name==="search_web"&&u.jsx("button",{onClick:()=>z.llmApiCalls&&z.llmApiCalls.length>0?ja(te):null,className:`text-xs px-1.5 py-0.5 rounded flex items-center gap-1 transition-colors ${z.llmApiCalls&&z.llmApiCalls.length>0?"bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 cursor-pointer":"text-gray-500 dark:text-gray-500 cursor-default"}`,title:z.llmApiCalls&&z.llmApiCalls.length>0?`View LLM summarization info  ${cs(Qa(z))}`:"No LLM summarization used",children:z.llmApiCalls&&z.llmApiCalls.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",cs(Qa(z))]}),u.jsx("span",{className:"ml-0.5",children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-[10px]",children:i("chat.noSummarization")})]})}),z.name!=="search_web"&&z.llmApiCalls&&z.llmApiCalls.length>0&&u.jsxs("button",{onClick:()=>ja(te),className:"text-xs px-1.5 py-0.5 rounded bg-purple-50 dark:bg-purple-900/30 hover:bg-purple-100 dark:hover:bg-purple-900/50 flex items-center gap-1 transition-colors",title:`View LLM transparency info  ${cs(Qa(z))}`,children:[u.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",cs(Qa(z))]}),u.jsx("span",{className:"ml-0.5",children:""})]})]})]})]})]})]})})(),z.role!=="tool"&&u.jsxs(u.Fragment,{children:[z.role==="assistant"?u.jsxs("div",{children:[te===N.length-1&&Pe.size>0&&u.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Pe.values()).map((ee,qe)=>u.jsx(jfe,{data:ee},qe))}),te===N.length-1&&Ct.size>0&&u.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Ct.values()).map((ee,qe)=>u.jsx(Bfe,{data:ee},qe))}),te===N.length-1&&st.size>0&&u.jsx("div",{className:"mb-3 space-y-2",children:Array.from(st.values()).map((ee,qe)=>u.jsx(Ffe,{data:ee},qe))}),te===N.length-1&&Hr.size>0&&u.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Hr.values()).map((ee,qe)=>u.jsx(zfe,{data:ee},qe))}),te===N.length-1&&Mn.size>0&&u.jsx("div",{className:"mb-3 space-y-2",children:Array.from(Mn.values()).map((ee,qe)=>u.jsx(Ufe,{data:ee},qe))}),z.tool_calls&&z.tool_calls.map((ee,qe)=>{if(ee.function.name==="transcribe_url"&&Oa.has(ee.id)){console.log(`    Rendering TranscriptionProgress for tool_call ${qe}: ${ee.id}`);const Se=Oa.get(ee.id);if(!Se||Se.length===0)return console.log(`      No events for ${ee.id}, skipping`),null;const Le=Se[Se.length-1],he=Le.progress_type||Le.data?.type||"",Ve=he==="transcribe_complete"||he==="transcription_stopped"||he==="error";if(console.log(`      Last event type: ${he}, isComplete: ${Ve}`),Ve)return console.log("      Transcription complete, skipping progress render"),null;console.log(`       Rendering progress component for ${ee.id}`);const Ue=JSON.parse(ee.function.arguments||"{}");return u.jsx("div",{className:"mb-3",children:u.jsx(Mfe,{toolCallId:ee.id,url:Ue.url||"",events:Se||[],onStop:wy})},ee.id)}if(ee.function.name==="scrape_web_content"&&bn.has(ee.id)){console.log(`    Rendering ScrapingProgress for tool_call ${qe}: ${ee.id}`);const Se=bn.get(ee.id);if(!Se||Se.length===0)return console.log(`      No events for ${ee.id}, skipping`),null;const Le=Se[Se.length-1],he=Le.progress_type||Le.data?.type||"",Ve=he==="scrape_complete"||he==="scrape_error";if(console.log(`      Last event type: ${he}, isComplete: ${Ve}`),Ve)return console.log("      Scraping complete, skipping progress render"),null;console.log(`       Rendering scraping progress component for ${ee.id}`);const Ue=JSON.parse(ee.function.arguments||"{}");return u.jsx("div",{className:"mb-3",children:u.jsx(Ofe,{toolCallId:ee.id,url:Ue.url||"",events:Se||[]})},ee.id)}return null}),z.tool_calls&&z.tool_calls.length>0&&!z.toolResults&&u.jsx("div",{className:"mb-3 space-y-2",children:z.tool_calls.map((ee,qe)=>{let Se={},Le=null;try{Se=JSON.parse(ee.function.arguments||"{}")}catch(he){Le=`Invalid JSON: ${ee.function.arguments}`,console.error(`Failed to parse tool call arguments for ${ee.id}:`,he)}return u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-lg p-3",children:[u.jsxs("div",{className:"text-xs font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-2 mb-2",children:[u.jsxs("span",{children:[" ",ee.function.name]}),Le&&u.jsx("span",{className:"text-red-600 dark:text-red-400 font-normal",children:" Malformed arguments"})]}),u.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-1",children:Le?u.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded p-2 font-mono text-[10px]",children:Le}):Object.entries(Se).map(([he,Ve])=>u.jsxs("div",{children:[u.jsxs("span",{className:"font-semibold",children:[he,":"]})," ",u.jsx("span",{className:"font-mono",children:typeof Ve=="string"?Ve:JSON.stringify(Ve)})]},he))})]},qe)})}),z.tool_calls&&!z.toolResults&&!z.isStreaming&&u.jsxs("div",{className:"mb-3 flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"300ms"}})]}),u.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[" Executing ",z.tool_calls.length," tool",z.tool_calls.length>1?"s":"","..."]})]}),u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("div",{className:"flex-1",children:z.content&&(()=>{let ee;if(z.toolResults){const qe=z.toolResults.find(Se=>Se.name==="generate_chart");if(qe)try{const Se=typeof qe.content=="string"?JSON.parse(qe.content):qe.content;ee=Se.description||Se.chart_type}catch{}}return u.jsx(tm,{content:tn(z.content),chartDescription:ee})})()}),z.content&&!z.isStreaming&&u.jsx(Jfe,{text:tn(z.content),variant:"icon",shouldSummarize:tn(z.content).length>500})]}),z.isStreaming&&u.jsx("span",{className:"inline-block w-2 h-4 bg-gray-500 animate-pulse ml-1"}),(()=>{const ee=N[te+1];if(ee&&ee.role==="tool"){const qe=[];if(z.tool_calls&&z.tool_calls.forEach(Se=>{if(Se.function?.name==="search_youtube"){const Le=N.find((he,Ve)=>Ve>te&&he.role==="tool"&&he.tool_call_id===Se.id);if(Le&&Le.content)try{const he=typeof Le.content=="string"?JSON.parse(Le.content):Le.content;he.videos&&Array.isArray(he.videos)&&qe.push(...he.videos)}catch(he){console.error("Failed to parse YouTube results:",he)}}}),qe.length>0)return u.jsx(eme,{videos:qe})}return null})(),(()=>{if(!z.extractedContent)return null;const ee=z.extractedContent;return ee.prioritizedImages&&ee.prioritizedImages.length>0||ee.allLinks&&ee.allLinks.length>0||ee.allImages&&ee.allImages.length>0||ee.youtubeVideos&&ee.youtubeVideos.length>0||ee.otherVideos&&ee.otherVideos.length>0||ee.media&&ee.media.length>0?u.jsxs("div",{className:"mt-4 space-y-4",children:[ee.prioritizedImages&&ee.prioritizedImages.length>0&&u.jsx(Kfe,{images:ee.prioritizedImages.map(Se=>Se.src),maxDisplay:3,onImageClick:Se=>window.open(Se,"_blank"),onGrabImage:Dl}),ee.allLinks&&ee.allLinks.length>0&&u.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Links (",ee.allLinks.length,")"]}),u.jsx("div",{className:"p-4 space-y-2",children:ee.allLinks.map((Se,Le)=>u.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-2 last:border-b-0",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Le+1,"."]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("a",{href:Se.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium break-words",children:Se.title}),Se.snippet&&u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 italic",children:Se.snippet})]})]})},Le))})]}),ee.allImages&&ee.allImages.length>0&&u.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" All Images (",ee.allImages.length,")"]}),u.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ee.allImages.map((Se,Le)=>u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:Se.src,alt:Se.alt||`Image ${Le+1}`,className:"w-full h-32 object-cover rounded border border-gray-300 dark:border-gray-700 cursor-pointer hover:opacity-80",onClick:()=>window.open(Se.src,"_blank"),loading:"lazy"}),u.jsx("button",{onClick:()=>Dl(Se.src,Se.alt||`Image ${Le+1}`),className:"absolute top-2 right-2 p-1.5 bg-white dark:bg-gray-800 rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",title:i("chat.grabImage"),children:u.jsx("svg",{className:"w-4 h-4 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},Le))})]}),ee.youtubeVideos&&ee.youtubeVideos.length>0&&u.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" YouTube Videos (",ee.youtubeVideos.length,")"]}),u.jsx("div",{className:"p-4 space-y-2",children:ee.youtubeVideos.map((Se,Le)=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Le+1,"."]}),u.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.title})]},Le))})]}),ee.otherVideos&&ee.otherVideos.length>0&&u.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Other Videos (",ee.otherVideos.length,")"]}),u.jsx("div",{className:"p-4 space-y-2",children:ee.otherVideos.map((Se,Le)=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Le+1,"."]}),u.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.title})]},Le))})]}),ee.media&&ee.media.length>0&&u.jsxs("details",{className:"border border-gray-300 dark:border-gray-700 rounded-lg",children:[u.jsxs("summary",{className:"cursor-pointer font-semibold p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-750",children:[" Audio & Other Media (",ee.media.length,")"]}),u.jsx("div",{className:"p-4 space-y-2",children:ee.media.map((Se,Le)=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:[Le+1,"."]}),u.jsx("a",{href:Se.src,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Se.type||"Media"})]},Le))})]})]}):null})(),z.toolResults&&z.toolResults.length>0&&u.jsx("div",{className:"mt-4 space-y-3",children:z.toolResults.filter(ee=>{if(ee.name==="generate_image")try{if(JSON.parse(ee.content).error)return!1}catch{}return!0}).map((ee,qe)=>{const Se=Qe.has(te*1e3+qe);let Le=null;if(ee.name==="search_web"&&typeof ee.content=="string")try{const Ee=JSON.parse(ee.content);Ee.results&&Array.isArray(Ee.results)&&(Le=Ee.results)}catch{}let he=null;if(ee.name==="scrape_web_content"&&typeof ee.content=="string")try{const Ee=JSON.parse(ee.content);(Ee.content||Ee.url)&&(he=Ee)}catch{}let Ve=null,Ue="";if(ee.name==="execute_javascript"&&typeof ee.content=="string")try{const Ee=JSON.parse(ee.content);if(Ee.result!==void 0||Ee.error){Ve=Ee;const Ke=z.tool_calls?.find(Wt=>Wt.id===ee.tool_call_id);if(Ke)try{Ue=JSON.parse(Ke.function.arguments).code||""}catch{}}}catch{}return u.jsxs("div",{className:"bg-purple-100 dark:bg-purple-900/30 border border-purple-300 dark:border-purple-700 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 flex items-center gap-2",children:[u.jsxs("span",{children:[" ",ee.name||"Tool Result"]}),z.tool_calls&&(ee.name==="search_web"||ee.name==="search_youtube")&&(()=>{const Ee=z.tool_calls.find(Ke=>Ke.id===ee.tool_call_id);if(Ee)try{const Ke=JSON.parse(Ee.function.arguments);if(Ke.query)return u.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 italic",children:['- "',Ke.query,'"']})}catch{}return null})(),ee.name==="scrape_web_content"&&(()=>{try{const Ee=typeof ee.content=="string"?JSON.parse(ee.content):ee.content;if(Ee.url||Ee.scrapeService||Ee.proxyUsed!==void 0)return u.jsxs("span",{className:"font-normal text-purple-600 dark:text-purple-400 flex items-center gap-1",children:[Ee.url&&u.jsxs("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:["- ",new URL(Ee.url).hostname]}),Ee.scrapeService&&u.jsx("span",{className:"text-[10px] bg-purple-200 dark:bg-purple-800 px-1.5 py-0.5 rounded",children:Ee.scrapeService}),Ee.proxyUsed&&u.jsx("span",{className:"text-[10px] bg-green-200 dark:bg-green-800 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded",title:i("chat.usingProxy"),children:" proxy"})]})}catch{}return null})()]}),u.jsx("button",{onClick:()=>{const Ee=new Set(Qe),Ke=te*1e3+qe;Se?Ee.delete(Ke):Ee.add(Ke),dt(Ee)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200",title:Se?"Collapse":"Expand",children:Se?"":""})]}),Se&&u.jsxs("div",{className:"text-xs space-y-2",children:[pi.size>0&&Array.from(pi.values()).filter(()=>ee.name==="search_web"||ee.name==="scrape_web_content"||ee.name==="transcribe_url").map((Ee,Ke)=>u.jsx($fe,{data:Ee},Ke)),Le&&Le.length>0?u.jsx("div",{className:"space-y-3",children:Le.map((Ee,Ke)=>{const Wt=te*1e6+qe*1e3+Ke,wn=Qe.has(Wt),ta=Ee.content||Ee.page_content,mi=typeof Ee.content=="string"?Ee.content:typeof Ee.page_content=="string"?Ee.page_content:JSON.stringify(Ee.page_content||Ee.content,null,2);return u.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded border border-purple-200 dark:border-purple-800 overflow-hidden",children:[u.jsxs("div",{className:"p-3",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-purple-700 dark:text-purple-300 hover:underline block mb-1",children:Ee.title}),(Ee.snippet||Ee.description)&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-xs mb-2",children:Ee.snippet||Ee.description}),u.jsx("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-[10px] break-all block",children:Ee.url})]}),ta&&u.jsx("button",{onClick:()=>{const Gn=new Set(Qe);wn?Gn.delete(Wt):Gn.add(Wt),dt(Gn)},className:"flex-shrink-0 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 text-xs",title:wn?"Hide details":"Show details",children:wn?"":""})]}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[Ee.state&&u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${Ee.state==="success"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300"}`,children:Ee.state}),Ee.fetchTimeMs!==void 0&&u.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 px-1.5 py-0.5 rounded",children:[" ",Ee.fetchTimeMs,"ms"]}),Ee.contentFormat&&u.jsx("span",{className:"text-[10px] bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded",children:Ee.contentFormat}),Ee.intelligentlyExtracted&&u.jsx("span",{className:"text-[10px] bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 px-1.5 py-0.5 rounded",title:i("chat.contentExtracted"),children:" smart"}),Ee.truncated&&u.jsx("span",{className:"text-[10px] bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 px-1.5 py-0.5 rounded",title:i("chat.truncatedToFit"),children:" truncated"})]})]}),wn&&ta&&u.jsxs("div",{className:"border-t border-purple-200 dark:border-purple-800 bg-purple-50/50 dark:bg-purple-900/10",children:[u.jsxs("div",{className:"px-3 py-2 border-b border-purple-200 dark:border-purple-800",children:[u.jsx("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Scraping & Compression Details:"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-[10px]",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.scrapeMethod")})," ",u.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Ee.tier!==void 0?u.jsxs(u.Fragment,{children:[i("chat.tier")," ",Ee.tier," - ",Ee.scrapeMethod||Ee.scrapeService]}):"Direct HTTP Fetch"}),Ee.tier!==void 0&&u.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-[9px] block mt-0.5",children:[Ee.tier===0&&"(Simple HTTP GET - fast, no browser)",Ee.tier===1&&"(Puppeteer - browser automation with stealth)",Ee.tier===2&&"(Playwright - advanced browser automation)",Ee.tier===3&&"(Selenium - complex interactions)",Ee.tier===4&&"(Interactive - manual CAPTCHA/login)"]})]}),Ee.responseTime!==void 0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.scrapeTime")})," ",u.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ee.responseTime,"ms"]})]}),Ee.fetchTimeMs!==void 0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.totalTime")})," ",u.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[Ee.fetchTimeMs,"ms"]})]}),Ee.contentFormat&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.format")})," ",u.jsx("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:Ee.contentFormat})]}),(Ee.originalLength||Ee.originalContentLength)&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.originalSize")})," ",u.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[((Ee.originalLength||Ee.originalContentLength)/1024).toFixed(1),"KB"]})]}),mi&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compressedSize")})," ",u.jsxs("span",{className:"font-mono text-gray-700 dark:text-gray-300",children:[(mi.length/1024).toFixed(1),"KB"]})]}),Ee.compressionRatio&&u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compression")})," ",u.jsxs("span",{className:"font-mono text-green-600 dark:text-green-400",children:[Ee.compressionRatio.toFixed(2),"x"]})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:i("chat.compressionStrategy")})," ",u.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:Ee.intelligentlyExtracted?u.jsxs("span",{children:["Smart extraction",Ee.contentFormat==="markdown"?"  Markdown":"  Plain text",Ee.truncated&&"  Truncated to model limits"]}):u.jsx("span",{children:i("chat.basicExtraction")})})]}),u.jsx("div",{className:"col-span-2 mt-1 text-gray-500 dark:text-gray-400 italic",children:"Note: No LLM calls used for compression (rule-based extraction only)"})]})]}),u.jsxs("div",{className:"p-3 space-y-3",children:[Ee.rawHtml&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[u.jsx("span",{children:" Stage 1: Raw HTML from Scraper"}),u.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ee.rawHtml.length.toLocaleString()," chars"]})]}),u.jsx("button",{onClick:()=>{const Gn=document.createElement("div");Gn.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50";const Ka=document.createElement("div");Ka.className="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col";const wa=document.createElement("div");wa.className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700";const Mi=document.createElement("h3");Mi.className="text-lg font-semibold text-gray-900 dark:text-gray-100",Mi.textContent=i("chat.rawHtml",{count:Ee.rawHtml.length.toLocaleString()});const ca=document.createElement("button");ca.className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",ca.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>',ca.onclick=()=>Gn.remove();const Ba=document.createElement("div");Ba.className="flex-1 overflow-auto p-4";const Oi=document.createElement("pre");Oi.className="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap",Oi.textContent=Ee.rawHtml,Ba.appendChild(Oi),wa.appendChild(Mi),wa.appendChild(ca),Ka.appendChild(wa),Ka.appendChild(Ba),Gn.appendChild(Ka),document.body.appendChild(Gn)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full HTML"})]}),Ee.rawText&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-1 flex items-center justify-between",children:[u.jsx("span",{children:" Stage 2: Raw Text (innerText)"}),u.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ee.rawText.length.toLocaleString()," chars"]})]}),u.jsx("button",{onClick:()=>{const Gn=document.createElement("div");Gn.className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50";const Ka=document.createElement("div");Ka.className="bg-white dark:bg-gray-800 w-11/12 h-5/6 rounded-lg shadow-xl flex flex-col";const wa=document.createElement("div");wa.className="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700";const Mi=document.createElement("h3");Mi.className="text-lg font-semibold text-gray-900 dark:text-gray-100",Mi.textContent=i("chat.rawText",{count:Ee.rawText.length.toLocaleString()});const ca=document.createElement("button");ca.className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",ca.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>',ca.onclick=()=>Gn.remove();const Ba=document.createElement("div");Ba.className="flex-1 overflow-auto p-4";const Oi=document.createElement("pre");Oi.className="text-xs text-gray-900 dark:text-gray-100 font-mono whitespace-pre-wrap",Oi.textContent=Ee.rawText,Ba.appendChild(Oi),wa.appendChild(Mi),wa.appendChild(ca),Ka.appendChild(wa),Ka.appendChild(Ba),Gn.appendChild(Ka),document.body.appendChild(Gn)},className:"px-3 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",children:"Show Full Text"})]}),Ee.afterSmartExtraction&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[u.jsx("span",{children:" Stage 3: After Smart Extraction (Headers/Nav/Footers Removed)"}),u.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ee.afterSmartExtraction.length.toLocaleString()," chars"]})]}),u.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-700 max-h-48 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ee.afterSmartExtraction})})]}),Ee.afterSummarization&&Ee.beforeSummarization&&Ee.afterSummarization!==Ee.beforeSummarization&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-purple-700 dark:text-purple-300 mb-2 flex items-center justify-between",children:[u.jsx("span",{children:" Stage 4: After AI Summarization"}),u.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ee.afterSummarization.length.toLocaleString()," chars"]})]}),u.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-amber-200 dark:border-amber-700 max-h-48 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ee.afterSummarization})})]}),Ee.sentToLLM&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-green-700 dark:text-green-300 mb-2 flex items-center justify-between",children:[u.jsx("span",{children:" Stage 5: SENT TO LLM (Tool Result)"}),u.jsxs("span",{className:"text-[10px] font-normal text-gray-500 dark:text-gray-400",children:[Ee.sentToLLM.length.toLocaleString()," chars"]})]}),u.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded border-2 border-green-500 dark:border-green-600 max-h-64 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap text-[11px] text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:Ee.sentToLLM})})]}),u.jsx("div",{className:"pt-2 border-t border-purple-200 dark:border-purple-800",children:u.jsxs("div",{className:"text-[10px] text-gray-600 dark:text-gray-400 space-y-1",children:[u.jsx("div",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-1",children:i("chat.contentProcessingPipeline")}),Ee.rawHtml&&u.jsxs("div",{children:[" Raw HTML: ",Ee.rawHtml.length.toLocaleString()," chars"]}),Ee.rawText&&u.jsxs("div",{children:[" Raw Text: ",Ee.rawText.length.toLocaleString()," chars"]}),Ee.afterSmartExtraction&&u.jsxs("div",{children:[" Smart Extraction: ",Ee.afterSmartExtraction.length.toLocaleString()," chars"]}),Ee.afterSummarization&&Ee.beforeSummarization&&Ee.afterSummarization!==Ee.beforeSummarization&&u.jsxs("div",{children:[" After Summarization: ",Ee.afterSummarization.length.toLocaleString()," chars"]}),Ee.sentToLLM&&u.jsxs("div",{className:"font-semibold text-green-600 dark:text-green-400",children:[" Sent to LLM: ",Ee.sentToLLM.length.toLocaleString()," chars"]})]})})]})]})]},Ke)})}):he?u.jsxs("div",{className:"space-y-3",children:[he.error&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-3",children:[u.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Scraping Error:"}),u.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono whitespace-pre-wrap",children:he.error})]}),he.warning&&u.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-300 dark:border-yellow-700 rounded p-2",children:[u.jsx("span",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:" Warning:"}),u.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 text-xs mt-1",children:he.warning})]}),(he.format||he.compressionRatio||he.originalLength||he.extractedLength)&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Metadata:"}),(()=>{const Ke=Array.from(pi.values()).find(Wt=>Wt.url===he.url)?.rawHtml;return Ke?u.jsx("button",{onClick:()=>lr({html:Ke,url:he.url}),className:"text-xs px-2 py-1 bg-purple-200 dark:bg-purple-800 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-300 dark:hover:bg-purple-700",children:"View Raw HTML"}):null})()]}),u.jsx("table",{className:"w-full text-xs border-collapse",children:u.jsxs("tbody",{children:[he.format&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.format")}),u.jsx("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:he.format==="markdown"?" Markdown":" Plain Text"})]}),typeof he.originalLength=="number"&&typeof he.extractedLength=="number"&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.size")}),u.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[(he.originalLength/1024).toFixed(1),"KB  ",(he.extractedLength/1024).toFixed(1),"KB"]})]}),he.compressionRatio&&typeof he.compressionRatio=="number"&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-1 pr-3 text-gray-600 dark:text-gray-400",children:i("chat.compression")}),u.jsxs("td",{className:"py-1 font-medium text-gray-900 dark:text-gray-100",children:[he.compressionRatio.toFixed(1),"x"]})]})]})})]}),he.content&&u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-purple-700 dark:text-purple-300 mb-2",children:" Content:"}),u.jsx("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-purple-200 dark:border-purple-800 max-h-96 overflow-y-auto",children:he.format==="markdown"?u.jsx(tm,{content:he.content}):u.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 leading-relaxed",children:he.content})})]})]}):Ve?u.jsxs("div",{className:"space-y-3",children:[Ue&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Code:"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Ue),C(i("chat.codeCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:i("chat.copyCodeToClipboard"),children:"Copy"}),u.jsx("button",{onClick:()=>{Ii(Ue,"tool","JavaScript Code")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:i("chat.captureCodeToSwag"),children:"Grab"})]})]}),u.jsx("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto max-h-64 overflow-y-auto",children:u.jsx("pre",{className:"whitespace-pre-wrap leading-relaxed",children:Ue})})]}),Ve.error&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded p-2",children:[u.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:" Error:"}),u.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs mt-1 font-mono",children:Ve.error})]}),Ve.result!==void 0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[u.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:" Output:"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(String(Ve.result)),C(i("chat.outputCopied"))},className:"text-xs px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors",title:"Copy output to clipboard",children:"Copy"}),u.jsx("button",{onClick:()=>{Ii(String(Ve.result),"tool","JavaScript Output")},className:"text-xs px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded transition-colors",title:"Capture output to Swag",children:"Grab"})]})]}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 p-3 rounded border border-green-300 dark:border-green-700",children:u.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-900 dark:text-gray-100 font-mono leading-relaxed",children:String(Ve.result)})})]})]}):ee.name==="generate_chart"?u.jsx(LN,{content:ee.content,chartCode:Ol(z.content)||void 0}):ee.name==="generate_image"?(()=>{const Ee=ee.tool_call_id||ee.id,Ke=z.imageGenerations?.find(Wt=>Wt.id===Ee);if(Ke)return u.jsxs("div",{className:"space-y-3 mt-3",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsx("table",{className:"w-full text-sm border-collapse border border-purple-200 dark:border-purple-800 rounded",children:u.jsxs("tbody",{children:[Ke.prompt&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20 w-1/3",children:i("chat.titlePrompt")}),u.jsx("td",{className:"py-2 px-3",children:Ke.prompt})]}),Ke.revisedPrompt&&Ke.revisedPrompt!==Ke.prompt&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:i("chat.finalPrompt")}),u.jsx("td",{className:"py-2 px-3",children:Ke.revisedPrompt})]}),Ke.size&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Size"}),u.jsx("td",{className:"py-2 px-3",children:Ke.size})]}),Ke.model&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Model"}),u.jsxs("td",{className:"py-2 px-3",children:[Ke.provider,"/",Ke.model]})]}),Ke.qualityTier&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Quality"}),u.jsx("td",{className:"py-2 px-3 capitalize",children:Ke.qualityTier})]}),Ke.cost!==void 0&&u.jsxs("tr",{className:"border-b border-purple-200 dark:border-purple-800",children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Cost"}),u.jsxs("td",{className:"py-2 px-3",children:["$",Ke.cost.toFixed(4)]})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"py-2 px-3 font-semibold bg-purple-50 dark:bg-purple-900/20",children:"Status"}),u.jsx("td",{className:"py-2 px-3",children:Ke.status==="complete"?u.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:" Success"}):Ke.status==="error"?u.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:" Failed"}):u.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:Ke.status})})]})]})})}),Ke.llmApiCall?.request&&u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[u.jsxs("button",{onClick:()=>{const Wt=`img-req-${Ke.id}`,wn=document.getElementById(Wt);wn&&wn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[u.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Request Data"}),u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("pre",{id:`img-req-${Ke.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(Ke.llmApiCall.request,null,2)})]}),Ke.llmApiCall?.response&&u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[u.jsxs("button",{onClick:()=>{const Wt=`img-res-${Ke.id}`,wn=document.getElementById(Wt);wn&&wn.classList.toggle("hidden")},className:"w-full px-3 py-2 flex items-center justify-between bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[u.jsx("span",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:" Response Data"}),u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.jsx("pre",{id:`img-res-${Ke.id}`,className:"hidden p-3 text-xs overflow-auto max-h-96 bg-white dark:bg-gray-900 font-mono text-gray-800 dark:text-gray-200",children:JSON.stringify(Ke.llmApiCall.response,null,2)})]})]});try{return typeof ee.content=="string"?JSON.parse(ee.content):ee.content,u.jsx(Ev,{content:ee.content})}catch{return u.jsx(Ev,{content:ee.content})}})():u.jsx(Ev,{content:ee.content})]}),ee.name==="generate_image"&&(()=>{const Ee=ee.tool_call_id||ee.id,Ke=z.imageGenerations?.find(Wt=>Wt.id===Ee);if(Ke&&(Ke.status==="generating"||Ke.status==="downloading")){const Wt=Ke.phase||"generating",wn=Ke.estimatedSeconds||15;let ta=" Generating image...",mi="This may take 10-30 seconds for high-quality images";return Wt==="selecting_provider"?(ta=" Selecting image provider...",mi="Finding best available model"):Wt==="generating"?(ta=` Generating image... (~${wn}s)`,mi=`Using ${Ke.provider||"selected"} ${Ke.model||"model"}`):Ke.status==="downloading"&&(ta=" Downloading image...",mi="Converting to base64 for offline storage"),u.jsx("div",{className:"mt-3 relative",children:u.jsxs("div",{className:"w-full rounded border border-purple-300 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20 flex flex-col items-center justify-center p-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 dark:border-purple-400 mb-4"}),u.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400 font-semibold mb-2",children:ta}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center max-w-md",children:mi}),Ke.prompt&&u.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 text-center max-w-md mt-3 italic",children:['"',Ke.prompt.substring(0,100),Ke.prompt.length>100?"...":"",'"']})]})})}if(Ke&&(Ke.imageUrl||Ke.base64)){let Wt;Ke.base64?Wt=Ke.base64.startsWith("data:image/")?Ke.base64:`data:image/png;base64,${Ke.base64}`:Ke.imageUrl?.startsWith("data:image/")?Wt=Ke.imageUrl:Wt=Ke.imageUrl||"";const wn=`<img src="${Wt}" alt="${Ke.prompt||"Generated image"}" />`;return u.jsxs("div",{className:"mt-3 relative group",children:[u.jsx("img",{src:Wt,alt:Ke.prompt||"Generated image",className:"w-full rounded border border-purple-300 dark:border-purple-700",style:{maxHeight:"512px",objectFit:"contain"}}),u.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Wt||""),C(i("chat.copiedToClipboard"))},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Copy image data URL",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),u.jsx("button",{onClick:async()=>{await b(wn,"assistant",Ke.prompt||"Generated image"),C("Image grabbed to swag")},className:"p-1.5 bg-white/90 dark:bg-gray-800/90 border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Grab to swag",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})})})]})]})}return null})(),u.jsx(NN,{rawResponse:ee.rawResponse,extractionMetadata:ee.extractionMetadata})]},qe)})}),z.isStreaming&&z.toolResults&&z.toolResults.length>0&&u.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg",children:u.jsxs("div",{className:"flex items-center gap-3 text-blue-700 dark:text-blue-300",children:[u.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-base",children:"Generating LLM Response..."}),u.jsx("div",{className:"text-sm opacity-80",children:"The AI is analyzing the tool results and composing a response"})]})]})})]}):u.jsxs("div",{className:"whitespace-pre-wrap",children:[tn(z.content),z._attachments&&z._attachments.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:z._attachments.filter(ee=>ee&&ee.name).map((ee,qe)=>u.jsx("div",{className:"bg-white/20 dark:bg-gray-700/30 rounded-lg overflow-hidden border border-white/30 dark:border-gray-600",children:ee.preview?u.jsx("img",{src:ee.preview,alt:ee.name,className:"w-32 h-32 object-cover cursor-pointer hover:opacity-80 transition-opacity",title:`${ee.name} (${(ee.size/1024).toFixed(1)} KB)`,onClick:()=>window.open(ee.preview,"_blank")}):u.jsxs("div",{className:"w-32 h-32 flex flex-col items-center justify-center p-2 bg-red-50 dark:bg-red-900/20",children:[u.jsxs("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-2",fill:"currentColor",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z"}),u.jsx("text",{x:"8",y:"16",fontSize:"8",fill:"currentColor",fontWeight:"bold",children:"PDF"})]}),u.jsx("span",{className:"text-xs text-center text-gray-700 dark:text-gray-300 font-medium truncate max-w-full px-1",children:ee.name})]})},qe))}),(console.log(" Checking imageGenerations:",{hasImageGenerations:!!z.imageGenerations,length:z.imageGenerations?.length,imageGenerations:z.imageGenerations}),null),z.imageGenerations&&z.imageGenerations.length>0&&u.jsx("div",{className:"mt-3",children:(console.log(" About to render imageGenerations:",z.imageGenerations),z.imageGenerations.map(ee=>(console.log(" Mapping imageGen:",ee),u.jsx(Vfe,{data:ee,accessToken:s,providerApiKeys:an,onCopy:qe=>{navigator.clipboard.writeText(qe).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},onGrab:qe=>{navigator.clipboard.writeText(qe).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},onLlmInfo:()=>{ja(te)},onStatusChange:(qe,Se,Le,he)=>{U(Ve=>Ve.map((Ue,Ee)=>{if(Ue.imageGenerations){const Ke=Ue.imageGenerations.map(wn=>wn.id===qe?{...wn,status:Se,imageUrl:Le,llmApiCall:he}:wn),Wt={...Ue,imageGenerations:Ke};return he&&Ee===te&&(Wt.llmApiCalls=[...Ue.llmApiCalls||[],he]),Wt}return Ue}))}},ee.id))))})]}),z.role==="assistant"&&!H&&xr>0&&te===N.length-1&&u.jsx("div",{className:"mt-2 flex items-center justify-end",children:u.jsxs("div",{className:"inline-flex items-center gap-1 bg-green-50 dark:bg-green-900/20 border border-green-300 dark:border-green-700 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs",children:[u.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Request cost: ",Dd(xr),R&&u.jsxs("span",{className:"ml-1 opacity-75",children:["(Total: ",Dd(R.totalCost),")"]})]})}),z.role==="assistant"&&(z.content||z.llmApiCalls)&&u.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[u.jsxs("button",{onClick:()=>{const ee=tn(z.content);navigator.clipboard.writeText(ee).then(()=>{C(i("chat.copiedToClipboard"))}).catch(()=>{T("Failed to copy")})},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Copy to clipboard",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]}),u.jsxs("button",{onClick:()=>{const ee=tn(z.content),qe="Shared from LLM Proxy",Se=encodeURIComponent(ee);window.open(`https://mail.google.com/mail/?view=cm&fs=1&su=${encodeURIComponent(qe)}&body=${Se}`,"_blank")},className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1",title:"Share via Gmail",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Gmail"]}),u.jsxs("button",{onClick:()=>Ii(tn(z.content),"assistant",void 0,z.extractedContent,z.toolResults),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]}),z.llmApiCalls&&z.llmApiCalls.length>0&&(()=>{let ee=0,qe=0;z.llmApiCalls.forEach(Le=>{ee+=Le.response?.usage?.prompt_tokens||0,qe+=Le.response?.usage?.completion_tokens||0});const Se=ee+qe;return u.jsxs("button",{onClick:()=>ja(te),className:"text-xs px-2 py-1 rounded bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50 flex items-center gap-1.5 transition-colors",title:`View LLM transparency info  ${Se.toLocaleString()} tokens (${ee.toLocaleString()} in, ${qe.toLocaleString()} out)  ${z.llmApiCalls.length} call${z.llmApiCalls.length!==1?"s":""}  ${cs(Qa(z))}`,children:[u.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:[" ",cs(Qa(z))]}),u.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden sm:inline",children:[" ",Se.toLocaleString()," token",Se!==1?"s":""," (",ee.toLocaleString()," in, ",qe.toLocaleString()," out)"]}),u.jsxs("span",{className:"text-gray-600 dark:text-gray-400 hidden lg:inline",children:[" ",z.llmApiCalls.length," call",z.llmApiCalls.length!==1?"s":""]}),u.jsx("span",{className:"ml-0.5",children:""})]})})(),!z.isStreaming&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Vc(te),className:"text-xs px-2 py-1 rounded bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50 flex items-center gap-1 transition-colors",title:"Good response",children:""}),u.jsx("button",{onClick:()=>bg(te),className:"text-xs px-2 py-1 rounded bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50 flex items-center gap-1 transition-colors",title:"Bad response - report issue",children:""})]}),z.errorData&&tn(z.content).startsWith(" Error:")&&!z.guardrailFailed&&u.jsxs("button",{onClick:()=>ht(te),className:"text-xs text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-100 flex items-center gap-1",title:"View full error details",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Error Info"]}),z.isRetryable&&(!z.retryCount||z.retryCount<3)&&u.jsxs("button",{onClick:()=>Ty(te),disabled:H,className:"text-xs text-orange-600 dark:text-orange-400 hover:text-orange-900 dark:hover:text-orange-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",title:"Retry this request with full context",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again",(z.retryCount??0)>0&&u.jsxs("span",{className:"text-[10px] opacity-75",children:["(",(z.retryCount??0)+1,")"]})]})]}),z.role==="user"&&u.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[u.jsxs("button",{onClick:()=>{ie(tn(z.content)),U(N.slice(0,te)),ae([]),rt("")},disabled:H,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset chat to this message",children:[u.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l3-3m0 0l3 3m-3-3v12"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-3 3m0 0l-3-3",opacity:"0.3"})]}),"Reset"]}),u.jsxs("button",{onClick:()=>{_s.current=!0,U(N.slice(0,te)),ae([]),rt(""),ie(tn(z.content))},disabled:H,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Retry this message (clears subsequent messages and resubmits)",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9"})}),"Retry"]}),u.jsxs("button",{onClick:()=>Ii(tn(z.content),"user"),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-100 flex items-center gap-1",title:"Capture to Swag",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11"})}),"Grab"]})]})]})]})},te)}),H&&nr!==null&&u.jsx("div",{className:"flex justify-start",children:u.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[u.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse mr-1"}),"streaming..."]})}),H&&!Ce&&yn.length===0&&u.jsx("div",{className:"flex justify-start",children:u.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),u.jsx("div",{ref:xa})]}),u.jsx("div",{className:"md:px-4 py-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:u.jsxs(u.Fragment,{children:[u.jsx(ime,{attachedFiles:xn,onRemoveAttachment:Sy}),Jr&&Jr.total>0&&u.jsxs("div",{className:"mb-3 p-3 border border-yellow-200 dark:border-yellow-800 rounded bg-yellow-50 dark:bg-yellow-900/20",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 text-yellow-900 dark:text-yellow-200 font-semibold text-sm",children:[u.jsx("span",{children:" Todos"}),u.jsxs("span",{className:"text-xs font-normal text-yellow-700 dark:text-yellow-300",children:[Jr.total," total  ",Jr.remaining," remaining"]}),Bo&&u.jsxs("span",{className:"ml-2 text-xs italic text-yellow-800 dark:text-yellow-300 animate-pulse",children:[" Continuing: ",Bo]})]}),u.jsx("button",{className:"text-xs text-yellow-800 dark:text-yellow-300 hover:underline focus:outline-none",onClick:()=>ls(z=>!z),children:os?" Collapse":" Expand"})]}),u.jsxs("div",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:[u.jsx("span",{className:"font-medium",children:"Current:"})," ",Jr.current?.description||""]}),os&&u.jsx("ul",{className:"mt-2 max-h-48 overflow-y-auto text-sm divide-y divide-yellow-200 dark:divide-yellow-800 bg-white dark:bg-gray-800 rounded p-2",children:Jr.items.map((z,te)=>u.jsxs("li",{className:"py-1.5 flex items-start gap-2 text-gray-900 dark:text-gray-100",children:[u.jsx("span",{className:"mt-0.5 text-xs flex-shrink-0",children:z.status==="done"?"":z.status==="current"?"":""}),u.jsx("span",{className:`flex-1 ${z.status==="done"?"line-through opacity-60":""}`,children:z.description})]},String(z.id)||te))})]}),ea&&nt&&u.jsxs("div",{className:"flex flex-col items-center gap-3 py-3 px-4",children:[u.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-2 border-orange-400 dark:border-orange-600 rounded-lg p-4 max-w-2xl w-full",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("svg",{className:"w-6 h-6 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:" Maximum Iteration Limit Reached"}),u.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mb-2",children:["The conversation has reached the maximum number of tool execution iterations (",nt?.maxIterations||"?"," iterations). This limit prevents infinite loops and excessive API usage."]}),u.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"Would you like to continue processing from where it stopped?"})]})]})}),u.jsxs("button",{onClick:()=>{confirm(` Continue processing?

This will resume tool execution and may incur additional API costs. The iteration limit helps prevent runaway processes.

Click OK to continue or Cancel to stop here.`)&&Ny()},disabled:H,className:"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed text-white p-2 md:px-6 md:py-3 rounded-lg font-semibold text-base transition-all transform hover:scale-105 shadow-lg flex items-center gap-2",title:"Continue from where the iteration limit was reached","aria-label":i("chat.continueProcessing"),children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),u.jsx("span",{className:"hidden md:inline",children:i("chat.continueProcessing")})]})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[Lt.size>0&&u.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-2",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:i("chat.snippetsAttached",{count:Lt.size,plural:Lt.size===1?"":"s"})}),u.jsxs("div",{className:"flex flex-wrap gap-1 flex-1 min-w-0",children:[Array.from(Lt).slice(0,3).map(z=>{const te=x.find(_e=>_e.id===z);return te?u.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-200 px-2 py-0.5 rounded truncate max-w-[200px]",title:te.title||"Untitled",children:te.title||"Untitled"},z):null}),Lt.size>3&&u.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-300",children:["+",Lt.size-3," more"]})]})]}),u.jsx("button",{onClick:()=>Ht(new Set),className:"ml-2 p-1 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-800 rounded transition-colors",title:i("chat.clearAttachedSnippets"),"aria-label":i("chat.clearAttachedSnippets"),children:u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),u.jsx("textarea",{ref:ro,value:Q,onChange:z=>{ie(z.target.value),vn(-1)},onKeyDown:z=>{if(z.key==="Enter"&&!z.shiftKey)z.preventDefault(),Uo();else if(z.key==="ArrowUp"&&!z.shiftKey){if(z.preventDefault(),As.length>0){const te=Math.min(ss+1,As.length-1);vn(te),ie(As[te])}}else if(z.key==="ArrowDown"&&!z.shiftKey)if(z.preventDefault(),ss>0){const te=ss-1;vn(te),ie(As[te])}else ss===0&&(vn(-1),ie(""))},placeholder:i("chat.inputPlaceholder"),className:"input-field flex-1 resize-none overflow-y-auto",style:{minHeight:"2.5rem",maxHeight:"300px"},"aria-label":i("chat.chatMessageInput"),"aria-describedby":"chat-input-help"}),u.jsx("span",{id:"chat-input-help",className:"sr-only",children:"Type your message and press Enter to send. Use Shift+Enter for new line. Use up and down arrows to navigate message history."}),u.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{ref:la,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,application/pdf",multiple:!0,onChange:z=>xg(z.target.files),className:"hidden"}),u.jsx("button",{onClick:()=>la.current?.click(),disabled:H,className:"btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:"Attach images or PDFs","aria-label":"Attach images or PDFs",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),u.jsx("button",{onClick:()=>Vt(!0),disabled:H||!s,className:"btn-secondary px-3 h-10 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:s?"Voice input (speech-to-text)":"Please sign in to use voice input","aria-label":s?"Voice input (speech-to-text)":"Sign in to use voice input",children:u.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[u.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),u.jsx("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})]})})]}),u.jsx("button",{onClick:()=>{H?xy():Q.trim()?Uo():ro.current?.focus()},disabled:!H&&!s,className:"btn-primary p-2 md:px-4 md:py-2 h-10 flex-shrink-0 flex items-center gap-1.5",title:s?Q.trim()?i("chat.sendMessage"):i("chat.typeMessageFirst"):i("chat.signInToSend"),"aria-label":i(H?"chat.stopGenerating":"chat.sendMessage"),children:H?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:i("chat.stop")})]}):Q.trim()?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:i("chat.send")})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsx("span",{className:"hidden md:inline",children:i("chat.typeMessage")})]})})]})]})]})}),ne&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"card max-w-2xl w-full p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:i("chat.chatHistoryTitle")}),Pi.length>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Cy,className:"btn-secondary text-xs px-3 py-1",children:[" ",i("chat.selectAll")]}),u.jsxs("button",{onClick:_y,className:"btn-secondary text-xs px-3 py-1",children:[" ",i("chat.selectNone")]})]})]}),u.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-y-auto",children:[Pi.map(z=>{const te=new Date(z.timestamp).toLocaleString(),_e=ge.has(z.id);return u.jsx("div",{className:`border ${_e?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"} rounded-lg p-3`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:_e,onChange:()=>Ay(z.id),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-1 truncate",children:z.firstUserPrompt}),u.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:te})]}),u.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[u.jsx("button",{onClick:()=>ky(z),className:"btn-primary text-xs px-3 py-1",children:i("chat.load")}),u.jsx("button",{onClick:()=>vg(z.id),className:"btn-secondary text-red-500 text-xs px-3 py-1",children:i("chat.delete")})]})]})},z.id)}),Pi.length===0&&u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:i("chat.noChatHistory")})]}),u.jsxs("div",{className:"flex gap-2 mt-4",children:[ge.size>0&&u.jsxs("button",{onClick:Ey,className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[" ",i("chat.deleteSelected")," (",ge.size,")"]}),Pi.length>0&&u.jsxs("button",{onClick:()=>ke(!0),className:"btn-secondary text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[" ",i("chat.clearHistory")]}),u.jsx("button",{onClick:()=>ue(!1),className:"btn-primary flex-1",children:i("chat.close")})]})]})}),xe&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"card max-w-md w-full p-6",children:[u.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-gray-100",children:[i("chat.clearHistory"),"?"]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:i("chat.confirmClearHistory")}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>ke(!1),className:"btn-secondary flex-1",children:i("chat.cancel")}),u.jsx("button",{onClick:Fd,className:"btn-primary flex-1 bg-red-600 hover:bg-red-700",children:i("chat.clearHistory")})]})]})}),r&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:i("chat.mcpServerConfiguration")}),u.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),u.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i("chat.addMCPServer")}),u.jsx("button",{onClick:()=>Jt(!mn),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:mn?" Hide Examples":" Show Examples"})]}),mn&&u.jsxs("div",{className:"mb-4 p-3 bg-white dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-600",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quick Start Examples:"}),u.jsxs("select",{onChange:z=>{const te=Ut.find(_e=>_e.id===z.target.value);te&&It({name:te.name,url:te.url})},className:"input-field w-full mb-2",defaultValue:"",children:[u.jsx("option",{value:"",disabled:!0,children:"Select an example server..."}),u.jsx("optgroup",{label:" Sample Servers",children:Ut.filter(z=>z.category==="Sample").map(z=>u.jsxs("option",{value:z.id,children:[z.name," - ",z.description]},z.id))}),u.jsx("optgroup",{label:" Official @modelcontextprotocol Servers",children:Ut.filter(z=>z.category==="Official").map(z=>u.jsxs("option",{value:z.id,children:[z.name.replace("@modelcontextprotocol/server-","")," - ",z.description]},z.id))})]}),bt.name&&Ut.find(z=>z.name===bt.name)&&u.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:Ut.find(z=>z.name===bt.name)?.name}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:Ut.find(z=>z.name===bt.name)?.description}),u.jsxs("div",{className:"mb-2",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Tools:"})," ",u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Ut.find(z=>z.name===bt.name)?.tools.join(", ")})]}),u.jsx("div",{className:"bg-gray-800 dark:bg-gray-950 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:Ut.find(z=>z.name===bt.name)?.instructions})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:bt.name,onChange:z=>It({...bt,name:z.target.value}),placeholder:i("chat.mcpServerNamePlaceholder"),className:"input-field w-full"}),u.jsx("input",{type:"text",value:bt.url,onChange:z=>It({...bt,url:z.target.value}),placeholder:i("chat.mcpServerUrlPlaceholder"),className:"input-field w-full"}),u.jsxs("button",{onClick:Ly,disabled:!bt.name.trim()||!bt.url.trim(),className:"btn-primary w-full",children:[" ",i("chat.addServer")]})]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-gray-100",children:[i("chat.mcpServers")," (",$t.length,")"]}),u.jsxs("div",{className:"space-y-2",children:[$t.map(z=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("input",{type:"checkbox",checked:z.enabled,onChange:()=>Sg(z.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:z.name}),u.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.url})]}),u.jsx("button",{onClick:()=>Py(z.id),className:"text-red-500 hover:text-red-700 px-3 py-1",title:i("chat.remove"),children:""})]},z.id)),$t.length===0&&u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:i("chat.noMcpServers")})]})]}),u.jsx("div",{className:"mt-6 flex gap-2",children:u.jsx("button",{onClick:()=>n(!1),className:"btn-primary flex-1",children:i("common.done")})})]})}),u.jsx(K$,{isOpen:me,onClose:()=>Me(!1),onTransferToChat:z=>{wg();try{const te=JSON.parse(z);ie(te.prompt),te.persona&&F(te.persona),te.planningQuery&&yt(te.planningQuery),te.generatedSystemPrompt&&wr(te.generatedSystemPrompt),te.generatedUserQuery&&Ar(te.generatedUserQuery),console.log(" Transferred planning context to chat")}catch{ie(z)}Me(!1)}}),ut&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 pr-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:ut.result.title}),u.jsx("a",{href:ut.result.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:ut.result.url}),u.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[u.jsxs("span",{children:[" ",(ut.result.content?.length/1024).toFixed(1)," KB"]}),ut.result.contentFormat&&u.jsxs("span",{children:[" ",ut.result.contentFormat]}),ut.result.images?.length>0&&u.jsxs("span",{children:[" ",ut.result.images.length," images"]}),ut.result.links?.length>0&&u.jsxs("span",{children:[" ",ut.result.links.length," links"]})]})]}),u.jsx("button",{onClick:()=>Or(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":i("chat.close"),children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Page Content"}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:ut.result.contentFormat==="markdown"?u.jsx(tm,{content:ut.result.content}):u.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300",children:ut.result.content})})]}),ut.result.images&&ut.result.images.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Images (",ut.result.images.length,")"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:ut.result.images.map((z,te)=>u.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded overflow-hidden",children:[u.jsx("img",{src:z.src,alt:z.alt||`Image ${te+1}`,className:"w-full h-32 object-cover",loading:"lazy"}),z.alt&&u.jsx("div",{className:"p-2 text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:z.alt})]},te))})]}),ut.result.links&&ut.result.links.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["Links (",ut.result.links.length,")"]}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:u.jsxs("ul",{className:"space-y-2",children:[ut.result.links.slice(0,50).map((z,te)=>u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:""}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("a",{href:z.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:z.text||z.href}),z.context&&u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:z.context})]})]},te)),ut.result.links.length>50&&u.jsxs("li",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:["... and ",ut.result.links.length-50," more links"]})]})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:" Full Scraped Data (JSON)"}),u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:u.jsx(Vp,{data:{url:ut.result.url,title:ut.result.title,description:ut.result.description,snippet:ut.result.snippet,fullScrapedContent:ut.result.content,contentFormat:ut.result.contentFormat,summarizedContent:ut.result.summary||ut.result.description,links:ut.result.links||[],images:ut.result.images||[],youtubeLinks:ut.result.youtube||ut.result.videos||[],otherMedia:ut.result.media||ut.result.audio||[],metadata:{contentLength:ut.result.content?.length||0,linkCount:ut.result.links?.length||0,imageCount:ut.result.images?.length||0,youtubeCount:(ut.result.youtube||ut.result.videos||[]).length,mediaCount:(ut.result.media||ut.result.audio||[]).length}},expanded:!1})})]})]})}),u.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:u.jsx("button",{onClick:()=>Or(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})})]})}),Zn&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full h-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 pr-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Raw HTML Content"}),u.jsx("a",{href:Zn.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:Zn.url}),u.jsxs("div",{className:"mt-2 flex gap-3 text-xs text-gray-500 dark:text-gray-400",children:[u.jsxs("span",{children:[" ",(Zn.html.length/1024).toFixed(1)," KB uncompressed"]}),u.jsx("span",{children:" Raw HTML"})]})]}),u.jsx("button",{onClick:()=>Ri(null),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-3xl leading-none","aria-label":i("chat.close"),children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:u.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:u.jsx("pre",{className:"whitespace-pre-wrap text-xs text-gray-700 dark:text-gray-300 font-mono",children:Zn.html})})}),u.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Zn.html)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:" Copy to Clipboard"}),u.jsx("button",{onClick:()=>Ri(null),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close"})]})]})}),as!==null&&N[as]?.llmApiCalls&&u.jsx(z6,{apiCalls:N[as].llmApiCalls,onClose:()=>ja(null)}),is!==null&&N[is]?.errorData&&u.jsx(qfe,{errorData:N[is].errorData,llmApiCalls:N[is].llmApiCalls,onClose:()=>ht(null)}),ce!==null&&u.jsx(Hfe,{isOpen:!0,onClose:()=>ze(null),messageData:{messageId:`message-${ce}`,messageContent:tn(N[ce].content),llmApiCalls:N[ce].llmApiCalls||[],evaluations:N[ce].evaluations||[],conversationThread:N}}),u.jsx(Z3,{isOpen:Xr,onClose:()=>Vt(!1),onTranscriptionComplete:Ml,accessToken:s,apiEndpoint:Tn}),s&&u.jsx("div",{className:"fixed bottom-20 right-4 z-30 max-w-sm",children:u.jsx(Wfe,{onVoiceRequest:z=>{ie(z),setTimeout(()=>{Uo()},100)},onTranscriptionStart:()=>{console.log(" Continuous mode: transcription started")},accessToken:s,apiEndpoint:Tn,isProcessing:H,isSpeaking:!1})}),u.jsx(rme,{isOpen:br,onClose:()=>Sr(!1),onExampleClick:Ns,location:O,locationLoading:Y,requestLocation:X,clearLocation:q}),Mr&&u.jsx(Eme,{messages:N.map(z=>({role:z.role,content:typeof z.content=="string"?z.content:JSON.stringify(z.content),timestamp:Date.now()})),onClose:()=>ar(!1),title:G||void 0}),tt&&u.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-2/3 z-40 bg-white dark:bg-gray-800 shadow-2xl border-t border-gray-300 dark:border-gray-600 overflow-hidden",children:u.jsxs("div",{className:"h-full flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:i("chat.attachContextTitle")}),u.jsx("button",{onClick:()=>gt(!1),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"Close Snippet Selector",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Xfe,{selectedSnippetIds:Lt,onSelectionChange:Ht,userEmail:l?.email})})]})}),it&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",children:"Raw HTML"}),it.url&&u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate mt-1",children:it.url})]}),u.jsx("button",{onClick:()=>lr(null),className:"ml-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close raw HTML dialog",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(it.html)},className:"absolute top-2 right-2 px-3 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded",children:"Copy"}),u.jsx("pre",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded border border-gray-200 dark:border-gray-700 overflow-x-auto",children:u.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 font-mono whitespace-pre",children:it.html})})]})}),u.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:u.jsx("button",{onClick:()=>lr(null),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Close"})})]})})]})},Lme=({isBlocked:e,onUnblock:t})=>{const{settings:r}=Al(),{isAuthenticated:n}=rs(),a=Ic();return _.useEffect(()=>{if(e&&r.providers&&r.providers.length>0){console.log("User has UI providers configured, unblocking UI"),t();return}},[e,r.providers,t]),_.useEffect(()=>{const i=s=>{console.log("Provider added:",s.detail),setTimeout(()=>{r.providers&&r.providers.length>0&&t()},100)};return window.addEventListener("provider-added",i),()=>{window.removeEventListener("provider-added",i)}},[r.providers,t]),e&&n?u.jsxs("div",{className:"provider-setup-gate",children:[u.jsx("div",{className:"gate-overlay",children:u.jsxs("div",{className:"gate-content",children:[u.jsxs("div",{className:"gate-header",children:[u.jsx("h1",{children:" Credits Required"}),u.jsx("p",{className:"gate-subtitle",children:"To use this service, you need to purchase credits."})]}),u.jsxs("div",{className:"gate-info",children:[u.jsxs("div",{className:"info-box",children:[u.jsx("h3",{children:"How does it work?"}),u.jsx("p",{children:"This is a pay-as-you-go service. Purchase credits to access our LLM providers without needing your own API keys. Your credits are tracked automatically, and you will be charged based on actual usage."})]}),u.jsxs("div",{className:"info-box",children:[u.jsx("h3",{children:"Pricing"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Small models:"})," approximately $0.0001 per request"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Large models:"})," approximately $0.001 per request"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Minimum purchase:"})," $5.00 (5,000-50,000 requests)"]})]}),u.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#888"},children:"Actual costs vary based on model and tokens used."})]}),u.jsxs("div",{className:"info-box",children:[u.jsx("h3",{children:"Secure Payment"}),u.jsx("p",{children:"Payments are processed securely through PayPal. Your credit balance is updated instantly after purchase."})]})]}),u.jsx("div",{className:"gate-action",children:u.jsx("button",{className:"btn-primary btn-large",onClick:()=>{console.log("Navigating to billing page"),t(),a("/settings?tab=billing")},children:"Buy Credits Now"})}),u.jsx("div",{className:"gate-footer",children:u.jsx("p",{className:"text-muted",children:"Your balance will be displayed in the top left corner after purchase. New users receive trial credits that expire after 24 hours."})})]})}),u.jsx("style",{children:".provider-setup-gate{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10000;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px)}.gate-overlay{width:100%;height:100%;overflow-y:auto;display:flex;align-items:center;justify-content:center;padding:2rem}.gate-content{max-width:800px;width:100%;background:#1a1a1a;border-radius:12px;padding:3rem;box-shadow:0 20px 60px rgba(0,0,0,0.5);border:1px solid #333}.gate-header{text-align:center;margin-bottom:2rem}.gate-header h1{font-size:2rem;margin:0 0 1rem 0;color:#fff}.gate-subtitle{font-size:1.1rem;color:#bbb;margin:0}.gate-info{margin-bottom:2rem}.info-box{background:#252525;border-radius:8px;padding:1.5rem;margin-bottom:1rem;border:1px solid #333}.info-box h3{margin:0 0 0.75rem 0;color:#fff;font-size:1.1rem}.info-box p{margin:0;color:#bbb;line-height:1.6}.info-box ul{margin:0.5rem 0 0 0;padding-left:1.5rem;color:#bbb}.info-box li{margin-bottom:0.75rem;line-height:1.6}.gate-action{text-align:center;margin-bottom:2rem}.btn-primary{background:#4a9eff;color:white;border:none;padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease}.btn-primary:hover{background:#357ac9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(74,158,255,0.3)}.btn-large{padding:1.25rem 2.5rem;font-size:1.2rem}.gate-footer{text-align:center;border-top:1px solid #333;padding-top:1.5rem}.text-muted{color:#888;font-size:0.95rem;margin:0}@media (max-width:768px){.gate-content{padding:2rem 1.5rem}.gate-header h1{font-size:1.5rem}.gate-subtitle{font-size:1rem}}"})]}):null},nm=[{id:"welcome",type:"modal",title:" Welcome to Research Agent!",content:`Your AI-powered research assistant with:
  Real-time web search & scraping
  Advanced planning tools
  Knowledge management (SWAG)
  Personalized content feed
  Interactive quizzes
  AI image generation & editing
  Voice & transcription
  Cost tracking & billing

Ready to explore? Let's take a quick tour! (3 minutes)`},{id:"chat",type:"spotlight",title:" Start Here: Chat Interface",content:`This is your main workspace. Ask questions, request research, or use tools like web search, transcription, and more.

Try: "Search for the latest AI news and summarize it"`,targetSelector:'textarea[placeholder*="message"]',tooltipPosition:"top"},{id:"swag",type:"spotlight",title:" SWAG: Your Knowledge Base",content:`Save and organize important information:
 Capture chat responses as snippets
 Upload documents for quick reference
 Tag and search your content
 Generate embeddings for semantic search

All stored locally in your browser for privacy!`,targetSelector:'button[title*="Swag" i]',tooltipPosition:"bottom"},{id:"settings",type:"spotlight",title:" Settings & AI Providers",content:`Customize your experience:
 Add your own API keys for $0 cost
 Enable/disable tools (search, transcription, etc.)
 Configure RAG (semantic search) settings
 Manage display preferences

Start with free providers, add your keys later!`,targetSelector:'button[aria-label*="Settings" i]',tooltipPosition:"bottom"},{id:"billing",type:"spotlight",title:" Billing & Usage Tracking",content:`Transparent cost management:
 $0.50 welcome bonus for new users
 Real-time usage tracking per request
 Detailed cost breakdown by provider
 No hidden fees - pay only for what you use

View your balance anytime in the Billing page.`,targetSelector:'button[title*="Billing" i]',tooltipPosition:"bottom"},{id:"planning",type:"spotlight",title:" Planning & Todos",content:`Break complex tasks into structured plans:
 Multi-step research workflows
 Auto-generated action items
 Persistent todo tracking
 Transfer between planning and chat

Perfect for research projects and learning paths!`,targetSelector:'button[title*="Planning" i]',tooltipPosition:"bottom"},{id:"feed",type:"spotlight",title:" Personalized Feed",content:`Discover curated content tailored to you:
 AI-generated "Did You Know" facts
 Interactive Q&A items
 Based on your saved content and interests
 Swipe to stash or trash
 Generate quizzes from any item

Perfect for learning and staying informed!`,targetSelector:'button[title*="Feed" i]',tooltipPosition:"bottom"},{id:"quiz",type:"spotlight",title:" Interactive Quizzes",content:`Test your knowledge:
 Generate quizzes from saved snippets
 10-question multiple choice format
 Immediate feedback and explanations
 Track your quiz performance

Great for studying and retention!`,targetSelector:'button[title*="Quiz" i]',tooltipPosition:"bottom"},{id:"image-editor",type:"spotlight",title:" Image Tools",content:`Create and edit images:
 AI image generation (DALL-E, Replicate)
 In-browser image editor
 Filters, crops, annotations
 Save and revisit generations

Bring your ideas to life visually!`,targetSelector:'button[title*="Image" i]',tooltipPosition:"bottom"},{id:"rest-api",type:"modal",title:" Developer Integration: REST API",content:`Use this AI system in your own applications!

 OpenAI-Compatible REST API:
 /v1/chat/completions - Streaming & non-streaming chat
 /v1/models - List available models
 Bearer token authentication with usage tracking

 Create API Keys:
\`\`\`bash
node scripts/create-api-key.js your@email.com
\`\`\`

 Works with OpenAI SDK:
\`\`\`python
import openai
client = openai.OpenAI(
    base_url="https://your-lambda-url/v1",
    api_key="sk-your-key-here"
)
\`\`\`

Perfect for integrating AI into your apps, bots, and workflows!`},{id:"complete",type:"modal",title:" You're All Set!",content:`You now know the essentials. Here are some quick tips:

 Quick Actions:
 Press "/" to see example prompts
 Use voice input for hands-free interaction
 Save important responses to SWAG
 Enable Planning for complex research
 Try the Feed for curated content
 Generate quizzes to test yourself

Need help? Visit the Help page anytime!`}],Pme=({isOpen:e,onClose:t})=>{const[r,n]=_.useState(0),[a,i]=_.useState(null),s=_.useRef(null),l=nm[r],d=r===0,h=r===nm.length-1;_.useEffect(()=>{if(!e||l.type!=="spotlight"||!l.targetSelector){i(null);return}const x=()=>{const T=document.querySelector(l.targetSelector);if(T){const k=T.getBoundingClientRect();i(k)}else console.warn(`Spotlight target not found: ${l.targetSelector}`),i(null)},v=setTimeout(x,100);return window.addEventListener("resize",x),()=>{clearTimeout(v),window.removeEventListener("resize",x)}},[e,l,r]),_.useEffect(()=>{if(!e)return;const x=v=>{v.key==="Escape"?m():v.key==="ArrowRight"&&!h?p():v.key==="ArrowLeft"&&!d&&f()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,r]);const p=()=>{h?b():n(x=>x+1)},f=()=>{d||n(x=>x-1)},m=()=>{Uv(),t()},b=()=>{Uv(),t()};return e?u.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[u.jsx("div",{className:"absolute inset-0 bg-black transition-opacity duration-300",style:{opacity:l.type==="modal"?.75:.6},onClick:m,children:l.type==="spotlight"&&a&&u.jsx("div",{className:"absolute pointer-events-none transition-all duration-500 ease-out",style:{top:a.top-8,left:a.left-8,width:a.width+16,height:a.height+16,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6)",borderRadius:"12px",animation:"pulse-spotlight 2s ease-in-out infinite"}})}),l.type==="modal"&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",onClick:x=>x.stopPropagation(),children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full p-8 transform transition-all duration-300 scale-100",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:l.title}),u.jsx("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line mb-8 text-lg leading-relaxed",children:l.content}),u.jsx("div",{className:"flex justify-center gap-2 mb-6",children:nm.map((x,v)=>u.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v===r?"w-8 bg-blue-600 dark:bg-blue-400":v<r?"w-2 bg-green-500 dark:bg-green-400":"w-2 bg-gray-300 dark:bg-gray-600"}`},v))}),u.jsxs("div",{className:"flex justify-between items-center gap-4",children:[u.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors text-sm font-medium",children:"Skip Tour"}),u.jsxs("div",{className:"flex gap-3",children:[!d&&u.jsx("button",{onClick:f,className:"px-5 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Back"}),u.jsx("button",{onClick:p,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-lg shadow-blue-500/30",children:d?"Start Tour":h?"Start Using Research Agent":"Next"})]})]})]})}),l.type==="spotlight"&&a&&u.jsxs("div",{ref:s,className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md transform transition-all duration-300",style:{...Rme(a,l.tooltipPosition||"top"),zIndex:1e4},onClick:x=>x.stopPropagation(),children:[u.jsx("div",{className:"absolute w-4 h-4 bg-white dark:bg-gray-800 transform rotate-45",style:Ime(l.tooltipPosition||"top")}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:l.title}),u.jsx("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line mb-6 leading-relaxed",children:l.content}),u.jsx("div",{className:"flex justify-center gap-2 mb-4",children:nm.map((x,v)=>u.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${v===r?"w-6 bg-blue-600 dark:bg-blue-400":v<r?"w-1.5 bg-green-500 dark:bg-green-400":"w-1.5 bg-gray-300 dark:bg-gray-600"}`},v))}),u.jsxs("div",{className:"flex justify-between items-center gap-4",children:[u.jsx("button",{onClick:m,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors font-medium",children:"Skip"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium text-sm",disabled:d,children:"Back"}),u.jsx("button",{onClick:p,className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium text-sm shadow-lg shadow-blue-500/30",children:h?"Complete":"Next"})]})]})]})]}),l.type==="spotlight"&&!a&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",onClick:x=>x.stopPropagation(),children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-6 max-w-md",children:[u.jsx("div",{className:"text-center mb-4",children:u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Target element not found. It may not be visible yet."})}),u.jsxs("div",{className:"flex justify-center gap-3",children:[u.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium text-sm",children:"Back"}),u.jsx("button",{onClick:p,className:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium text-sm",children:"Skip & Continue"})]})]})}),u.jsx("style",{children:`
        @keyframes pulse-spotlight {
          0%, 100% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6);
          }
          50% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.7);
          }
        }
      `})]}):null};function Rme(e,t){switch(t){case"top":return{left:e.left+e.width/2,top:e.top-20,transform:"translate(-50%, -100%)"};case"bottom":return{left:e.left+e.width/2,top:e.bottom+20,transform:"translate(-50%, 0)"};case"left":return{left:e.left-20,top:e.top+e.height/2,transform:"translate(-100%, -50%)"};case"right":return{left:e.right+20,top:e.top+e.height/2,transform:"translate(0, -50%)"};default:return{}}}function Ime(e){switch(e){case"top":return{bottom:"-8px",left:"50%",transform:"translateX(-50%) rotate(45deg)"};case"bottom":return{top:"-8px",left:"50%",transform:"translateX(-50%) rotate(45deg)"};case"left":return{right:"-8px",top:"50%",transform:"translateY(-50%) rotate(45deg)"};case"right":return{left:"-8px",top:"50%",transform:"translateY(-50%) rotate(45deg)"};default:return{}}}const Dme=({isOpen:e,onClose:t})=>{const{t:r}=yd();if(!e)return null;const n=[{title:r("keyboardShortcuts.general",{defaultValue:"General"}),shortcuts:[{keys:["Ctrl","K"],description:r("keyboardShortcuts.openHelp",{defaultValue:"Open keyboard shortcuts help"})},{keys:["?"],description:r("keyboardShortcuts.openHelpAlt",{defaultValue:"Show this help dialog"})},{keys:["Esc"],description:r("keyboardShortcuts.closeModal",{defaultValue:"Close modal / Clear input"})},{keys:["Tab"],description:r("keyboardShortcuts.navigateForward",{defaultValue:"Navigate forward"})},{keys:["Shift","Tab"],description:r("keyboardShortcuts.navigateBackward",{defaultValue:"Navigate backward"})}]},{title:r("keyboardShortcuts.chat",{defaultValue:"Chat"}),shortcuts:[{keys:["Ctrl","Enter"],description:r("keyboardShortcuts.sendMessage",{defaultValue:"Send message"})},{keys:["Shift","Enter"],description:r("keyboardShortcuts.newLine",{defaultValue:"New line in message"})},{keys:[""],description:r("keyboardShortcuts.previousPrompt",{defaultValue:"Previous prompt in history"})},{keys:[""],description:r("keyboardShortcuts.nextPrompt",{defaultValue:"Next prompt in history"})}]},{title:r("keyboardShortcuts.modals",{defaultValue:"Modals & Dialogs"}),shortcuts:[{keys:["Esc"],description:r("keyboardShortcuts.closeDialog",{defaultValue:"Close current dialog"})},{keys:["Tab"],description:r("keyboardShortcuts.cycleFocus",{defaultValue:"Cycle through controls (focus trap active)"})},{keys:["Enter"],description:r("keyboardShortcuts.confirmAction",{defaultValue:"Confirm action / Submit form"})}]}];return u.jsx(t1.FocusTrap,{active:e,children:u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:u.jsxs("div",{className:"card max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[" ",r("keyboardShortcuts.title",{defaultValue:"Keyboard Shortcuts"})]}),u.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close keyboard shortcuts help",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"space-y-6",children:n.map((a,i)=>u.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-b-0",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3",children:a.title}),u.jsx("div",{className:"space-y-2",children:a.shortcuts.map((s,l)=>u.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[u.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.description}),u.jsx("div",{className:"flex items-center gap-1",children:s.keys.map((d,h)=>u.jsxs(ir.Fragment,{children:[u.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-sm",children:d}),h<s.keys.length-1&&u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+"})]},h))})]},l))})]},i))}),u.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[u.jsxs("strong",{children:[r("keyboardShortcuts.tip",{defaultValue:"Tip"}),":"]})," ",r("keyboardShortcuts.macNote",{defaultValue:"On Mac, use  (Cmd) instead of Ctrl for most shortcuts."})]})}),u.jsx("div",{className:"flex justify-end gap-3 mt-6",children:u.jsx("button",{onClick:t,className:"btn-primary",children:r("common.close",{defaultValue:"Close"})})})]})})})},ON="LLM Proxy App Data",Av="saved_plans.json";let Du=null;class Mme{name="plans";enabled=!0;async getAppFolder(){if(Du)return Du;const t=await _a(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${ON}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to search for app folder: ${r.statusText}`);const n=await r.json();if(n.files&&n.files.length>0)return Du=n.files[0].id,Du;const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:ON,mimeType:"application/vnd.google-apps.folder"})});if(!a.ok)throw new Error(`Failed to create app folder: ${a.statusText}`);return Du=(await a.json()).id,Du}async getFileId(t){const r=await _a(),n=await this.getAppFolder(),a=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`Failed to search for file: ${a.statusText}`);const i=await a.json();return i.files&&i.files.length>0?i.files[0].id:null}async pull(){try{const t=await this.getFileId(Av);if(!t)return null;const r=await _a(),n=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error(`Failed to download plans: ${n.statusText}`);const a=await n.text();return JSON.parse(a)}catch(t){throw console.error("Error pulling plans from Google Drive:",t),t}}async push(t){try{const r=await _a(),n=await this.getAppFolder(),a=await this.getFileId(Av),i=JSON.stringify(t,null,2),s=new Blob([i],{type:"application/json"});if(a){const l=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${a}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:s});if(!l.ok)throw new Error(`Failed to update plans file: ${l.statusText}`)}else{const l={name:Av,parents:[n],mimeType:"application/json"},d=new FormData;d.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),d.append("file",s);const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:d});if(!h.ok)throw new Error(`Failed to create plans file: ${h.statusText}`)}console.log(` Pushed ${t.length} plans to Google Drive`)}catch(r){throw console.error("Error pushing plans to Google Drive:",r),r}}async getLocalData(){return await Sl.getAllPlans()}async setLocalData(t){await Sl.replacePlans(t)}async getLastModified(){const t=await this.getLocalData();return t.length===0?0:Math.max(...t.map(r=>r.timestamp))}async shouldSync(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking if plans should sync:",t),!1}}mergeData(t,r){return Sl.mergePlans(t,r)}}const Ome=new Mme,jN="LLM Proxy App Data",Nv="saved_playlists.json";let Mu=null;class jme{name="playlists";enabled=!0;async getAppFolder(){if(Mu)return Mu;const t=await _a(),r=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${jN}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Failed to search for app folder: ${r.statusText}`);const n=await r.json();if(n.files&&n.files.length>0)return Mu=n.files[0].id,Mu;const a=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:jN,mimeType:"application/vnd.google-apps.folder"})});if(!a.ok)throw new Error(`Failed to create app folder: ${a.statusText}`);return Mu=(await a.json()).id,Mu}async getFileId(t){const r=await _a(),n=await this.getAppFolder(),a=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${t}' and '${n}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${r}`}});if(!a.ok)throw new Error(`Failed to search for file: ${a.statusText}`);const i=await a.json();return i.files&&i.files.length>0?i.files[0].id:null}async pull(){try{const t=await this.getFileId(Nv);if(!t)return null;const r=await _a(),n=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok)throw new Error(`Failed to download playlists: ${n.statusText}`);const a=await n.text();return JSON.parse(a)}catch(t){throw console.error("Error pulling playlists from Google Drive:",t),t}}async push(t){try{const r=await _a(),n=await this.getAppFolder(),a=await this.getFileId(Nv),i=JSON.stringify(t,null,2),s=new Blob([i],{type:"application/json"});if(a){const l=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${a}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:s});if(!l.ok)throw new Error(`Failed to update playlists file: ${l.statusText}`)}else{const l={name:Nv,parents:[n],mimeType:"application/json"},d=new FormData;d.append("metadata",new Blob([JSON.stringify(l)],{type:"application/json"})),d.append("file",s);const h=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:d});if(!h.ok)throw new Error(`Failed to create playlists file: ${h.statusText}`)}console.log(` Pushed ${t.length} playlists to Google Drive`)}catch(r){throw console.error("Error pushing playlists to Google Drive:",r),r}}async getLocalData(){return await qs.init(),await qs.exportAllPlaylists()}async setLocalData(t){await qs.init(),await qs.importAndMergePlaylists(t)}async getLastModified(){const t=await this.getLocalData();return t.length===0?0:Math.max(...t.map(r=>r.updatedAt||r.createdAt||0))}async shouldSync(){try{const t=localStorage.getItem("google_access_token");return t?(await fetch("https://www.googleapis.com/drive/v3/about?fields=user",{headers:{Authorization:`Bearer ${t}`}})).ok:!1}catch(t){return console.error("Error checking if playlists should sync:",t),!1}}mergeData(t,r){const n=new Map;return t.forEach(a=>{const i=a.name.trim().toLowerCase();n.set(i,a)}),r.forEach(a=>{const i=a.name.trim().toLowerCase(),s=n.get(i),l=a.updatedAt||a.createdAt||0,d=s&&(s.updatedAt||s.createdAt)||0;(!s||l>d)&&n.set(i,a)}),Array.from(n.values())}}const Bme=new jme,t5=_.createContext(void 0);function Fme({children:e}){const[t,r]=_.useState(Yn.getStatus());_.useEffect(()=>{const s=Yn.onStatusChange(l=>{r(l)});return()=>{s()}},[]);const n=async()=>{await Yn.syncAll()},a=s=>{Yn.setAdapterEnabled(s,!0)},i=s=>{Yn.setAdapterEnabled(s,!1)};return u.jsx(t5.Provider,{value:{syncStatus:t,manualSync:n,enableAdapter:a,disableAdapter:i},children:e})}function zme(){const e=_.useContext(t5);if(!e)throw new Error("useSyncStatus must be used within SyncStatusProvider");return e}function Ume(){const{syncStatus:e,manualSync:t}=zme(),[r,n]=_.useState(!1);if(Object.keys(e.adapterStatuses).length===0)return null;const a=d=>{if(!d)return"Never";const h=Math.floor((Date.now()-d)/1e3);return h<60?"Just now":h<3600?`${Math.floor(h/60)}m ago`:h<86400?`${Math.floor(h/3600)}h ago`:`${Math.floor(h/86400)}d ago`},i=Object.values(e.adapterStatuses).some(d=>d.status==="error"),s=e.syncing||Object.values(e.adapterStatuses).some(d=>d.status==="syncing"),l=Object.values(e.adapterStatuses).every(d=>d.status==="idle"||d.status==="success");return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>n(!r),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${i?"bg-red-500/10 text-red-400 hover:bg-red-500/20":s?"bg-blue-500/10 text-blue-400 hover:bg-blue-500/20":l?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-gray-500/10 text-gray-400 hover:bg-gray-500/20"}`,title:"Click for sync details",children:[s?u.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):i?u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.jsx("span",{className:"hidden sm:inline",children:s?"Syncing...":i?"Sync Error":"Synced"}),e.lastSyncTime&&!s&&u.jsx("span",{className:"text-xs opacity-75 hidden md:inline",children:a(e.lastSyncTime)})]}),r&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[u.jsx("h3",{className:"font-semibold text-white",children:"Sync Status"}),u.jsx("button",{onClick:d=>{d.stopPropagation(),t()},className:"px-3 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",disabled:s,children:s?"Syncing...":"Sync Now"})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:Object.values(e.adapterStatuses).map(d=>u.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 hover:bg-gray-700/30",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-medium text-white capitalize",children:d.name}),u.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${d.status==="error"?"bg-red-500/20 text-red-400":d.status==="syncing"?"bg-blue-500/20 text-blue-400":d.status==="success"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:d.status})]}),u.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[d.lastSync&&u.jsxs("div",{children:["Last sync: ",a(d.lastSync)]}),d.itemCount>0&&u.jsxs("div",{children:[d.itemCount," items"]}),d.error&&u.jsx("div",{className:"text-red-400 mt-1",children:d.error})]})]},d.name))}),u.jsx("div",{className:"px-4 py-2 bg-gray-900/50 text-xs text-gray-400",children:"Auto-sync every 5 minutes"})]})]})]})}const r5={maxConcurrentAgents:3,maxQueuedAgents:10,maxIterationsPerAgent:10,maxMemoryPerAgent:200,maxTotalMemory:600},n5=150,a5=.7;function $me(e,t,r,n){const a=t.length>0?typeof t[0].content=="string"?t[0].content:JSON.stringify(t[0].content):r;return{id:crypto.randomUUID(),chatId:e,status:"idle",phase:"waiting",messages:t,currentInput:r,iterationCount:0,maxIterations:10,startTime:Date.now(),lastUpdateTime:Date.now(),estimatedMemoryUsage:0,tokenCount:0,toolCallsCount:0,retryCount:0,title:n||a.slice(0,50),createdAt:Date.now()}}function i5(e){let t=50;return t+=e.messages.length*5/1024,e.phase==="streaming"&&(t+=20),t+=e.toolCallsCount*10,Math.round(t)}function s5(e){const t=Math.floor(e/1e3),r=Math.floor(t/60),n=Math.floor(r/60);return n>0?`${n}h ${r%60}m`:r>0?`${r}m ${t%60}s`:`${t}s`}const qme=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_AGENT_LIMITS:r5,MEMORY_PER_AGENT:n5,SAFETY_MARGIN:a5,createAgentState:$me,estimateAgentMemory:i5,formatDuration:s5},Symbol.toStringTag,{value:"Module"})),Hme="AgentManagerDB",Qi="agents",Gme=1;class Wme{dbPromise=null;async getDB(){return this.dbPromise||(this.dbPromise=P0(Hme,Gme,{upgrade(t){if(!t.objectStoreNames.contains(Qi)){const r=t.createObjectStore(Qi,{keyPath:"id"});r.createIndex("status","status"),r.createIndex("chatId","chatId"),r.createIndex("createdAt","createdAt"),r.createIndex("completedAt","completedAt")}}})),this.dbPromise}async saveAgent(t){try{await(await this.getDB()).put(Qi,t),this.backupToLocalStorage(t)}catch(r){throw console.error("Failed to save agent to IndexedDB:",r),r}}async getAgent(t){try{return await(await this.getDB()).get(Qi,t)||null}catch(r){return console.error("Failed to get agent from IndexedDB:",r),null}}async getAllAgents(){try{return(await(await this.getDB()).getAll(Qi)).sort((n,a)=>a.createdAt-n.createdAt)}catch(t){return console.error("Failed to get all agents from IndexedDB:",t),[]}}async getRunningAgents(){try{return await(await this.getDB()).transaction(Qi).store.index("status").getAll("running")}catch(t){return console.error("Failed to get running agents from IndexedDB:",t),[]}}async getQueuedAgents(){try{return await(await this.getDB()).transaction(Qi).store.index("status").getAll("queued")}catch(t){return console.error("Failed to get queued agents from IndexedDB:",t),[]}}async getCompletedAgents(){try{return(await(await this.getDB()).transaction(Qi).store.index("status").getAll("completed")).sort((a,i)=>(i.completedAt||0)-(a.completedAt||0))}catch(t){return console.error("Failed to get completed agents from IndexedDB:",t),[]}}async getFailedAgents(){try{return(await(await this.getDB()).getAll(Qi)).filter(n=>n.status==="error"||n.status==="aborted").sort((n,a)=>a.lastUpdateTime-n.lastUpdateTime)}catch(t){return console.error("Failed to get failed agents from IndexedDB:",t),[]}}async deleteAgent(t){try{await(await this.getDB()).delete(Qi,t),localStorage.removeItem(`agent_backup_${t}`)}catch(r){throw console.error("Failed to delete agent from IndexedDB:",r),r}}async updateAgentStatus(t,r){try{const n=await this.getAgent(t);n&&(n.status=r,n.lastUpdateTime=Date.now(),r==="completed"&&(n.completedAt=Date.now()),await this.saveAgent(n))}catch(n){throw console.error("Failed to update agent status:",n),n}}async clearCompletedAgents(){try{const t=await this.getCompletedAgents(),n=(await this.getDB()).transaction(Qi,"readwrite");await Promise.all([...t.map(a=>n.store.delete(a.id)),n.done]),t.forEach(a=>{localStorage.removeItem(`agent_backup_${a.id}`)})}catch(t){throw console.error("Failed to clear completed agents:",t),t}}async clearAllAgents(){try{await(await this.getDB()).clear(Qi),Object.keys(localStorage).forEach(n=>{n.startsWith("agent_backup_")&&localStorage.removeItem(n)})}catch(t){throw console.error("Failed to clear all agents:",t),t}}backupToLocalStorage(t){try{const r={id:t.id,chatId:t.chatId,status:t.status,lastUpdateTime:t.lastUpdateTime,title:t.title};localStorage.setItem(`agent_backup_${t.id}`,JSON.stringify(r))}catch(r){console.warn("Failed to backup agent to localStorage:",r)}}}const qr=new Wme;async function Vme(){const e=await qr.getAllAgents(),t=Date.now(),r=3e4;return e.filter(n=>n.status==="running"&&t-n.lastUpdateTime>r)}function o5(){if("memory"in performance&&performance.memory){const e=performance.memory,t=e.jsHeapSizeLimit/(1024*1024),r=e.usedJSHeapSize/(1024*1024),n=t-r;return{totalMemory:t,usedMemory:r,availableMemory:n,jsHeapLimit:t,isLowMemory:n/t<.2}}return{totalMemory:2048,usedMemory:512,availableMemory:1536,jsHeapLimit:2048,isLowMemory:!1}}function l5(e){const t=Math.floor(e.availableMemory*a5/n5);return Math.max(1,Math.min(5,t))}function Yme(e,t,r,n){return e.iterationCount>=t.maxIterationsPerAgent?(e.status="error",e.lastError=`Exceeded max iterations (${t.maxIterationsPerAgent})`,{canProceed:!1,reason:e.lastError}):e.estimatedMemoryUsage>t.maxMemoryPerAgent?(e.status="error",e.lastError=`Exceeded memory limit (${t.maxMemoryPerAgent}MB)`,{canProceed:!1,reason:e.lastError}):r>=t.maxConcurrentAgents?{canProceed:!1,reason:"Max concurrent agents reached - queueing"}:n>=t.maxQueuedAgents?(e.status="error",e.lastError=`Queue full (${t.maxQueuedAgents} agents)`,{canProceed:!1,reason:e.lastError}):{canProceed:!0}}function Qme(){const e=o5(),t=l5(e);return{...r5,maxConcurrentAgents:t}}function sye(e){return e.availableMemory<200?{level:"critical",message:`Critical: Only ${Math.round(e.availableMemory)}MB available. Consider closing tabs or reloading.`}:e.isLowMemory?{level:"warning",message:`Warning: Low memory detected (${Math.round(e.availableMemory)}MB available). New agents may be paused.`}:{level:"ok"}}class Kme{runningAgents=new Map;queuedAgents=[];limits;listeners=new Map;executionCallback=null;constructor(t){this.limits=t||Qme()}setExecutionCallback(t){this.executionCallback=t}on(t,r){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(r)}off(t,r){const n=this.listeners.get(t);n&&n.delete(r)}emit(t,r){const n=this.listeners.get(t);n&&n.forEach(a=>a(r))}async enqueue(t){t.estimatedMemoryUsage=i5(t);const r=Yme(t,this.limits,this.runningAgents.size,this.queuedAgents.length);if(!r.canProceed){if(t.status==="error")throw await qr.saveAgent(t),this.emit("agent-error",t),new Error(r.reason);t.status="queued",this.queuedAgents.push(t),await qr.saveAgent(t),this.emit("agent-queued",t),this.emit("queue-updated",t);return}await this.startAgent(t)}async startAgent(t){if(t.status="running",t.startTime=Date.now(),t.lastUpdateTime=Date.now(),this.runningAgents.set(t.id,t),await qr.saveAgent(t),this.emit("agent-started",t),this.emit("queue-updated",t),this.executionCallback)try{await this.executionCallback(t)}catch(r){console.error("Agent execution error:",r),t.status="error",t.lastError=r.message,await qr.saveAgent(t),this.emit("agent-error",t),this.runningAgents.delete(t.id),await this.dequeue()}}async completeAgent(t){const r=this.runningAgents.get(t);r&&(r.status="completed",r.completedAt=Date.now(),await qr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-completed",r),this.emit("queue-updated",r),await this.dequeue())}async pauseAgent(t){const r=this.runningAgents.get(t);if(!r){const n=this.queuedAgents.findIndex(a=>a.id===t);if(n!==-1){const a=this.queuedAgents[n];a.status="paused",await qr.saveAgent(a),this.queuedAgents.splice(n,1),this.emit("agent-paused",a),this.emit("queue-updated",a)}return}r.status="paused",await qr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-paused",r),this.emit("queue-updated",r),await this.dequeue()}async abortAgent(t){const r=this.runningAgents.get(t);if(!r){const n=this.queuedAgents.findIndex(a=>a.id===t);if(n!==-1){const a=this.queuedAgents[n];a.status="aborted",await qr.saveAgent(a),this.queuedAgents.splice(n,1),this.emit("agent-aborted",a),this.emit("queue-updated",a)}return}r.status="aborted",await qr.saveAgent(r),this.runningAgents.delete(t),this.emit("agent-aborted",r),this.emit("queue-updated",r),await this.dequeue()}async resumeAgent(t){const r=await qr.getAgent(t);!r||r.status!=="paused"||(r.status="idle",await this.enqueue(r))}async dequeue(){if(this.queuedAgents.length>0&&this.runningAgents.size<this.limits.maxConcurrentAgents){const t=this.queuedAgents.shift();await this.startAgent(t)}}updateMaxConcurrent(t){this.limits.maxConcurrentAgents=Math.max(1,Math.min(5,t)),this.dequeue()}async pauseQueue(){const t=[...this.queuedAgents];this.queuedAgents=[];for(const r of t)r.status="paused",await qr.saveAgent(r),this.emit("agent-paused",r);this.emit("queue-updated",t[0]||{})}getStatus(){return{running:this.runningAgents.size,queued:this.queuedAgents.length,maxConcurrent:this.limits.maxConcurrentAgents,runningAgents:Array.from(this.runningAgents.values()),queuedAgents:[...this.queuedAgents]}}clear(){this.runningAgents.clear(),this.queuedAgents=[]}}const zs=new Kme,Xme=new URL("/assets/agent-worker-a1XFDa3h.ts",import.meta.url);function Jme(){const e=_.useRef(new Map),t=5,[,r]=_.useState({}),n=_.useCallback(l=>{if(e.current.size>=t)throw new Error("Max concurrent workers reached. Please queue agent.");const d=new Worker(Xme,{type:"module"});d.addEventListener("message",async p=>{const{type:f,payload:m}=p.data;try{switch(f){case"AGENT_UPDATE":m?.agent&&(await qr.saveAgent(m.agent),window.dispatchEvent(new CustomEvent("agent-update",{detail:m.agent})));break;case"AGENT_COMPLETED":m?.agent&&(await qr.saveAgent(m.agent),e.current.delete(m.agent.id),d.terminate(),await zs.completeAgent(m.agent.id),window.dispatchEvent(new CustomEvent("agent-completed",{detail:m.agent})),r({}));break;case"AGENT_ERROR":m?.agent&&(await qr.saveAgent(m.agent),e.current.delete(m.agent.id),d.terminate(),window.dispatchEvent(new CustomEvent("agent-error",{detail:m.agent})),r({}));break;case"AGENT_ABORTED":m?.agent&&(await qr.saveAgent(m.agent),e.current.delete(m.agent.id),d.terminate(),window.dispatchEvent(new CustomEvent("agent-aborted",{detail:m.agent})),r({}));break;case"AGENT_PAUSED":m?.agent&&(await qr.saveAgent(m.agent),e.current.delete(m.agent.id),d.terminate(),window.dispatchEvent(new CustomEvent("agent-paused",{detail:m.agent})),r({}));break}}catch(b){console.error("Error handling worker message:",b)}}),d.addEventListener("error",p=>{console.error("Worker error:",p),e.current.delete(l.id),d.terminate(),l.status="error",l.lastError="Worker crashed: "+p.message,qr.saveAgent(l),window.dispatchEvent(new CustomEvent("agent-error",{detail:l})),r({})});const h={type:"START_AGENT",payload:{agent:l}};d.postMessage(h),e.current.set(l.id,d),r({})},[t]),a=_.useCallback(l=>{const d=e.current.get(l);if(d){const h={type:"PAUSE_AGENT",payload:{agentId:l}};d.postMessage(h)}},[]),i=_.useCallback(l=>{const d=e.current.get(l);if(d){const h={type:"ABORT_AGENT",payload:{agentId:l}};d.postMessage(h)}},[]),s=_.useCallback(()=>{e.current.forEach(l=>{try{l.terminate()}catch(d){console.warn("Error terminating worker:",d)}}),e.current.clear(),r({})},[]);return _.useEffect(()=>s,[s]),{workers:e.current,maxWorkers:t,startAgent:n,pauseAgent:a,abortAgent:i,cleanup:s}}async function Zme(e={}){const t=await Vme();return t.length===0?!1:(console.log(` Found ${t.length} interrupted agent(s)`,t),e.autoRecover?(await c5(t.map(r=>r.id)),!0):e.autoDiscard?(await u5(t.map(r=>r.id)),!0):(e.onInterruptedAgentsFound&&e.onInterruptedAgentsFound(t),!0))}async function c5(e){const t=e.length;for(const r of e){const n=await qr.getAgent(r);n&&(n.status="queued",n.retryCount+=1,n.lastUpdateTime=Date.now(),n.lastError=void 0,await qr.saveAgent(n),window.dispatchEvent(new CustomEvent("agent-recovered",{detail:n})))}console.log(` Recovered ${t} agent(s)`)}async function u5(e){const t=e.length;for(const r of e){const n=await qr.getAgent(r);n&&(n.status="aborted",n.lastError="Discarded by user after interruption",n.lastUpdateTime=Date.now(),await qr.saveAgent(n))}console.log(` Discarded ${t} agent(s)`)}const e0e=({agents:e,onRecover:t,onDiscard:r,onClose:n})=>{const[a,i]=_.useState(new Set(e.map(m=>m.id))),s=m=>{const b=new Set(a);b.has(m)?b.delete(m):b.add(m),i(b)},l=()=>{i(new Set(e.map(m=>m.id)))},d=()=>{i(new Set)},h=()=>{t(Array.from(a)),n()},p=()=>{r(Array.from(a)),n()},f=()=>{r(e.map(m=>m.id)),n()};return u.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[u.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("span",{className:"text-3xl",children:""}),u.jsx("h2",{className:"text-2xl font-bold dark:text-gray-100",children:"Recover Interrupted Agents"})]}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"The following agents were interrupted when you closed the browser. Would you like to recover them?"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",children:e.map(m=>{const b=Date.now()-m.lastUpdateTime;return u.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a.has(m.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onClick:()=>s(m.id),children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("input",{type:"checkbox",checked:a.has(m.id),onChange:x=>{x.stopPropagation(),s(m.id)},className:"mt-1"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 truncate mb-1",children:m.title}),u.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400",children:[u.jsxs("div",{children:[" Iteration ",m.iterationCount,"/",m.maxIterations]}),u.jsxs("div",{children:[" ",m.messages.length," messages"]}),u.jsxs("div",{children:[" Interrupted ",s5(b)," ago"]})]}),m.lastError&&u.jsxs("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:[" Last error: ",m.lastError]})]})]})},m.id)})}),u.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:l,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Select All"}),u.jsx("span",{className:"text-gray-400",children:""}),u.jsx("button",{onClick:d,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Select None"})]}),u.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.size," of ",e.length," selected"]})]}),u.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[u.jsxs("button",{onClick:h,disabled:a.size===0,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors",children:[" Recover Selected (",a.size,")"]}),u.jsx("button",{onClick:p,disabled:a.size===0,className:"flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors",children:" Discard Selected"}),u.jsx("button",{onClick:f,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors",children:"Discard All"})]})]})})},d5=_.createContext(void 0),t0e=({children:e})=>{const[t,r]=_.useState([]),[n,a]=_.useState([]),[i,s]=_.useState([]),[l,d]=_.useState(!1),[h,p]=_.useState(!1),[f,m]=_.useState([]),b=Jme();_.useEffect(()=>{zs.setExecutionCallback(async $=>{try{b.startAgent($)}catch(W){console.error("Failed to start agent in worker:",W),$.status="error",$.lastError=W instanceof Error?W.message:"Failed to start worker",await qr.saveAgent($)}})},[b]),_.useEffect(()=>{x()},[]),_.useEffect(()=>{const $=()=>{x()};return window.addEventListener("agent-update",$),window.addEventListener("agent-completed",$),window.addEventListener("agent-error",$),window.addEventListener("agent-paused",$),window.addEventListener("agent-aborted",$),window.addEventListener("agent-recovered",$),()=>{window.removeEventListener("agent-update",$),window.removeEventListener("agent-completed",$),window.removeEventListener("agent-error",$),window.removeEventListener("agent-paused",$),window.removeEventListener("agent-aborted",$),window.removeEventListener("agent-recovered",$)}},[]),_.useEffect(()=>{Zme({onInterruptedAgentsFound:$=>{m($),p(!0)}})},[]),_.useEffect(()=>{const $=setInterval(()=>{const W=o5(),O=l5(W);zs.updateMaxConcurrent(O),W.isLowMemory&&(console.warn(" Low memory detected - pausing queue"),zs.pauseQueue())},1e4);return()=>clearInterval($)},[]);const x=async()=>{const $=await qr.getAllAgents(),W=await qr.getRunningAgents(),O=await qr.getQueuedAgents();s($),r(W),a(O)},v=_.useCallback(async($,W,O,Y)=>{const{createAgentState:X}=await _t(async()=>{const{createAgentState:N}=await Promise.resolve().then(()=>qme);return{createAgentState:N}},void 0),q=X($,W,O,Y);return await qr.saveAgent(q),q},[]),T=_.useCallback(async $=>{await zs.enqueue($),await x()},[]),k=_.useCallback(async $=>{await zs.pauseAgent($),b.pauseAgent($),await x()},[b]),C=_.useCallback(async $=>{await zs.resumeAgent($),await x()},[]),A=_.useCallback(async $=>{await zs.abortAgent($),b.abortAgent($),await x()},[b]),D=_.useCallback(async $=>{const W=await qr.getAgent($);W&&(W.status="idle",W.retryCount+=1,W.lastError=void 0,await zs.enqueue(W),await x())},[]),B=_.useCallback(async $=>{await c5($),p(!1);for(const W of $){const O=await qr.getAgent(W);O&&O.status==="queued"&&await zs.enqueue(O)}await x()},[]),R=_.useCallback(async $=>{await u5($),p(!1),await x()},[]),M={createAgent:v,startAgent:T,pauseAgent:k,resumeAgent:C,abortAgent:A,retryAgent:D,runningAgents:t,queuedAgents:n,allAgents:i,showAgentManager:l,setShowAgentManager:d};return u.jsxs(d5.Provider,{value:M,children:[e,h&&f.length>0&&u.jsx(e0e,{agents:f,onRecover:B,onDiscard:R,onClose:()=>p(!1)})]})},h5=()=>{const e=_.useContext(d5);if(!e)throw new Error("useAgents must be used within an AgentProvider");return e},r0e=()=>{const{runningAgents:e,queuedAgents:t,setShowAgentManager:r}=h5();return e.length+t.length===0?null:u.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors shadow-md",title:"View agent manager",children:[u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"text-lg",children:""}),e.length>0&&u.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),u.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),u.jsx("div",{className:"flex flex-col items-start text-xs",children:u.jsxs("span",{className:"font-medium",children:[e.length>0&&u.jsxs("span",{className:"text-green-200",children:[e.length," running"]}),e.length>0&&t.length>0&&u.jsx("span",{className:"mx-1",children:""}),t.length>0&&u.jsxs("span",{className:"text-yellow-200",children:[t.length," queued"]})]})})]})},n0e=_.lazy(()=>_t(()=>import("./SettingsModal-DJzfM3lA.js"),__vite__mapDeps([53,54])).then(e=>({default:e.SettingsModal}))),a0e=_.lazy(()=>_t(()=>import("./PlanningPage-DMhGgDOz.js"),[]).then(e=>({default:e.PlanningPage}))),i0e=_.lazy(()=>_t(()=>import("./SwagPage-Bn8BY8cE.js"),__vite__mapDeps([55,56,57,58,59,60])).then(e=>({default:e.SwagPage}))),s0e=_.lazy(()=>_t(()=>import("./QuizPage-CjajuR85.js"),__vite__mapDeps([61,59,58,62])).then(e=>({default:e.QuizPage}))),o0e=_.lazy(()=>_t(()=>import("./FeedPage-DEh9FXRT.js"),__vite__mapDeps([63,58,62,57]))),l0e=_.lazy(()=>_t(()=>import("./BillingPage-D78XVOsD.js"),__vite__mapDeps([64,65]))),c0e=_.lazy(()=>_t(()=>import("./HelpPage-BrHUw35e.js"),[]).then(e=>({default:e.HelpPage}))),u0e=_.lazy(()=>_t(()=>import("./PrivacyPolicy-Boon0v3h.js"),[]).then(e=>({default:e.PrivacyPolicy}))),BN=_.lazy(()=>_t(()=>import("./SharedSnippetViewer-CwLMqp1n.js"),__vite__mapDeps([66,56])).then(e=>({default:e.SharedSnippetViewer}))),d0e=_.lazy(()=>_t(()=>import("./ImageEditorPage-BAA07PDQ.js"),[]).then(e=>({default:e.ImageEditorPage}))),h0e=_.lazy(()=>_t(()=>import("./AgentManager-DXrfVsjf.js"),[]).then(e=>({default:e.AgentManager}))),FN=()=>u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400"}),u.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading..."})]})});function p0e(){const{isAuthenticated:e,getToken:t}=rs(),{settings:r}=Al(),{usage:n,loading:a}=I0(),{showAgentManager:i,setShowAgentManager:s}=h5(),{i18n:l}=yd(),d=Ic(),h=Ks(),[p,f]=_.useState(!1),[m,b]=_.useState(!1),[x,v]=_.useState(!1),[T,k]=_.useState(!1),[C,A]=_.useState(!1),[D,B]=_.useState(!1),[R,M]=_.useState(null),[$,W]=_.useState(!1),[O,Y]=_.useState(!1),[X,q]=_.useState(!1);_.useEffect(()=>(Yn.registerAdapter(Ome),Yn.registerAdapter(Bme),localStorage.getItem("auto_sync_enabled")!=="false"?(Yn.start(300*1e3),console.log(" Unified sync started")):console.log(" Auto-sync disabled by user"),()=>{Yn.stop()}),[]),_.useEffect(()=>{r.language&&l.language!==r.language&&l.changeLanguage(r.language);const H=["ar","he","fa"].includes(l.language)?"rtl":"ltr";document.documentElement.dir=H,document.documentElement.lang=l.language},[r.language,l]),_.useEffect(()=>{const H=I=>{(I.ctrlKey&&I.key==="k"||I.key==="?")&&(I.preventDefault(),q(!0))};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[]),_.useEffect(()=>{W(!1)},[h.pathname]);const N=H=>{C&&h.pathname==="/"?(M(H),B(!0)):d(H)},U=()=>{B(!1),R==="settings"?f(!0):R&&d(R),M(null)},j=()=>{B(!1),M(null)};_.useEffect(()=>{!C&&D&&(B(!1),M(null))},[C,D]);const K=()=>{C&&h.pathname==="/"?(M("settings"),B(!0)):f(!0)},[Q,ie]=Ai("chat_enabled_tools",{web_search:!0,execute_js:!0,scrape_url:!0,youtube:!0,transcribe:!0,generate_chart:!0,generate_image:!0,search_knowledge_base:!1,manage_todos:!0,manage_snippets:!0,ask_llm:!1,generate_reasoning_chain:!1});if(_.useEffect(()=>{const H=I=>{if(C&&h.pathname==="/")return I.preventDefault(),I.returnValue="",""};return window.addEventListener("beforeunload",H),()=>window.removeEventListener("beforeunload",H)},[C,h.pathname]),_.useEffect(()=>{(async()=>{try{console.log("Starting migration from localStorage to IndexedDB...");const I=await vc.migrateFromLocalStorage();console.log(`Migration complete: ${I} chats migrated`),await vc.cleanupOldChats(100),console.log("Cleanup complete: kept 100 most recent chats")}catch(I){console.error("Error during migration:",I)}})()},[]),_.useEffect(()=>{const H="548179877633-cfvhlc5roj9prus33jlarcm540i495qi.apps.googleusercontent.com";if(window.google)tC(H);else{const I=setInterval(()=>{window.google&&(tC(H),clearInterval(I))},100);setTimeout(()=>clearInterval(I),5e3)}},[]),_.useEffect(()=>{e&&!T&&(async()=>{if(!e){k(!0);return}try{const I=await t();if(!I){k(!0);return}const ne=await An(),ue=await fetch(`${ne}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`},body:JSON.stringify({messages:[{role:"user",content:"test"}],providers:r.providers||[]})});ue.status===403&&(await ue.json()).requiresProviderSetup&&(console.log(" User needs to configure providers"),v(!0))}catch{console.log("Unable to verify provider setup status (this is not critical)")}finally{k(!0)}})()},[e,t,r.providers,T]),_.useEffect(()=>{if(T&&e&&y3(e)){const H=setTimeout(()=>Y(!0),500);return()=>clearTimeout(H)}},[T,e]),h.pathname.startsWith("/snippet/shared")||h.hash.includes("/snippet/shared"))return u.jsx(_.Suspense,{fallback:u.jsx(FN,{}),children:u.jsx(BN,{})});if(!e)return u.jsx(EU,{});if(!T)return u.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:u.jsx("div",{className:"text-white text-xl",children:"Loading..."})});const F=n?.exceeded||!1;return x||F?u.jsx(Lme,{isBlocked:x||F,onUnblock:()=>v(!1)}):u.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[u.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 focus:p-4 focus:bg-blue-600 focus:text-white focus:rounded-br-lg focus:shadow-lg",children:"Skip to main content"}),u.jsxs("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex justify-between items-center px-1 md:px-4 py-3 max-w-screen-2xl md:mx-auto",children:[u.jsx("img",{src:"/agent.png",alt:"Research Agent",className:"h-10 sm:h-12 w-auto object-contain"}),u.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[u.jsx(LU,{}),h.pathname!=="/billing"&&u.jsxs("button",{onClick:()=>N("/billing"),className:"flex items-center gap-2 px-3 py-2 rounded-lg transition-colors shadow-sm font-medium bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 min-h-11 touch-target",title:n?`You have $${n.creditBalance.toFixed(2)} remaining of $${n.totalCredits.toFixed(2)} total credits`:"View billing and usage details","aria-label":"Billing and credits",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),n&&!a&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&u.jsxs("span",{className:`text-xs font-medium ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]}),h.pathname==="/billing"||h.pathname==="/planning"?u.jsxs("button",{onClick:()=>d("/"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium min-h-11 touch-target",title:"Back to Chat","aria-label":"Back to Chat",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),u.jsx("span",{className:"text-sm hidden md:inline",children:"Back to Chat"})]}):h.pathname==="/help"||h.pathname==="/privacy"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>d("/"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors shadow-sm font-medium min-h-11 touch-target",title:"Back to Chat","aria-label":"Back to Chat",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),u.jsx("span",{className:"text-sm hidden md:inline",children:"Back to Chat"})]}),u.jsxs("button",{onClick:()=>N("/swag"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 rounded-lg transition-colors shadow-sm font-medium bg-blue-600 hover:bg-blue-700 text-white min-h-11 touch-target",title:"Swag - Save and manage snippets","aria-label":"Swag",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),u.jsx("span",{className:"text-sm hidden md:inline",children:"Swag"})]})]}):u.jsx(u.Fragment,{children:u.jsxs("button",{onClick:()=>N("/swag"),className:"flex items-center gap-2 p-2 md:px-3 md:py-2 rounded-lg transition-colors shadow-sm font-medium bg-blue-600 hover:bg-blue-700 text-white min-h-11 touch-target",title:"Swag - Save and manage snippets","aria-label":"Swag",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),u.jsx("span",{className:"text-sm hidden md:inline",children:"Swag"})]})}),u.jsx(Ume,{}),u.jsx(r0e,{}),u.jsx(lC,{})]}),u.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[h.pathname!=="/billing"&&n&&!a&&typeof n.creditBalance=="number"&&u.jsxs("div",{className:`text-xs font-medium px-2 py-1 rounded ${n.exceeded?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20"}`,children:["$",n.creditBalance.toFixed(2)]}),h.pathname==="/swag"||h.pathname==="/billing"||h.pathname==="/planning"?u.jsxs("button",{onClick:()=>N("/"),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2",title:"Back to Chat","aria-label":"Back to Chat",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),u.jsx("span",{className:"hidden md:inline text-sm font-medium text-gray-700 dark:text-gray-300",children:"Back to Chat"})]}):u.jsx(u.Fragment,{children:u.jsx("button",{onClick:()=>N("/swag"),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Swag","aria-label":"Swag",children:u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})})})}),u.jsx("button",{onClick:()=>W(!$),className:"icon-button","aria-label":$?"Close menu":"Open menu","aria-expanded":$,children:$?u.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):u.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),$&&u.jsx("nav",{className:"md:hidden border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",role:"navigation","aria-label":"Mobile navigation",children:u.jsxs("div",{className:"px-4 py-2 space-y-1",children:[h.pathname!=="/"&&u.jsxs("button",{onClick:()=>{d("/"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Chat"})]}),h.pathname!=="/billing"&&u.jsxs("button",{onClick:()=>{N("/billing"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Billing"}),n&&!a&&typeof n.creditBalance=="number"&&typeof n.totalCredits=="number"&&u.jsxs("div",{className:`text-xs ${n.exceeded?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:["$",n.creditBalance.toFixed(2)," / $",n.totalCredits.toFixed(2)]})]})]}),h.pathname!=="/swag"&&u.jsxs("button",{onClick:()=>{N("/swag"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M8 2C8 1.45 8.45 1 9 1h6c.55 0 1 .45 1 1v2h-8V2zm-1 4h10l1.5 13c.08.72-.48 1.32-1.2 1.32H6.7c-.72 0-1.28-.6-1.2-1.32L7 6zm5 2c-2.21 0-4 1.79-4 4v6h8v-6c0-2.21-1.79-4-4-4z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Swag"})]}),u.jsxs("button",{onClick:()=>{N("/image-editor"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Image Editor"})]}),u.jsxs("button",{onClick:()=>{K(),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Settings"})]}),u.jsxs("button",{onClick:()=>{N("/help"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Help"})]}),u.jsxs("button",{onClick:()=>{N("/privacy"),W(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Privacy Policy"})]}),u.jsxs("a",{href:"https://github.com/syntithenai/lambdallmproxy",target:"_blank",rel:"noopener noreferrer",onClick:()=>W(!1),className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg transition-colors text-left touch-target hover:bg-gray-100 dark:hover:bg-gray-700",children:[u.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),u.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"GitHub"})]}),u.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:u.jsx(lC,{})})]})})]}),u.jsx(Zfe,{}),u.jsx(YU,{}),u.jsx("main",{id:"main-content",className:"flex-1 overflow-hidden",children:u.jsx("div",{className:"h-full max-w-screen-2xl md:mx-auto",children:u.jsx(_.Suspense,{fallback:u.jsx(FN,{}),children:u.jsxs(S7,{children:[u.jsx(gs,{path:"/",element:u.jsx(Nme,{enabledTools:Q,setEnabledTools:ie,showMCPDialog:m,setShowMCPDialog:b,onLoadingChange:A})}),u.jsx(gs,{path:"/planning",element:u.jsx(a0e,{})}),u.jsx(gs,{path:"/swag",element:u.jsx(i0e,{})}),u.jsx(gs,{path:"/quiz",element:u.jsx(s0e,{})}),u.jsx(gs,{path:"/feed",element:u.jsx(o0e,{})}),u.jsx(gs,{path:"/image-editor",element:u.jsx(d0e,{})}),u.jsx(gs,{path:"/snippet/shared",element:u.jsx(BN,{})}),u.jsx(gs,{path:"/billing",element:u.jsx(l0e,{})}),u.jsx(gs,{path:"/help",element:u.jsx(c0e,{})}),u.jsx(gs,{path:"/privacy",element:u.jsx(u0e,{})})]})})})}),p&&u.jsx(_.Suspense,{fallback:null,children:u.jsx(n0e,{isOpen:p,onClose:()=>f(!1),enabledTools:Q,setEnabledTools:ie,onOpenMCPDialog:()=>b(!0)})}),i&&u.jsx(_.Suspense,{fallback:null,children:u.jsx(h0e,{onSwitchToAgent:(H,I)=>{N("/"),s(!1)},onCreateNewAgent:()=>{N("/"),s(!1)},onClose:()=>s(!1)})}),X&&u.jsx(Dme,{isOpen:X,onClose:()=>q(!1)}),D&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:u.jsxs("div",{className:"card max-w-md w-full p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:" Active Request in Progress"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:"You have an active chat request running. Navigating away will stop the current request and you may lose the response."}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 font-semibold",children:"Are you sure you want to continue?"}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{onClick:j,className:"btn-secondary px-4 py-2",children:"Stay Here"}),u.jsx("button",{onClick:U,className:"btn-primary px-4 py-2 bg-orange-600 hover:bg-orange-700",children:"Navigate Away"})]})]})}),u.jsx($3,{onOpenSettings:K}),u.jsx(Pme,{isOpen:O,onClose:()=>Y(!1)})]})}function g0e(){return u.jsx(W7,{basename:"/",children:u.jsx(Nz,{children:u.jsx(oz,{children:u.jsx(cU,{children:u.jsx(Qz,{children:u.jsx(hU,{children:u.jsx(Fme,{children:u.jsx(t0e,{children:u.jsx(vU,{children:u.jsx(uU,{children:u.jsx(oU,{children:u.jsx(kz,{children:u.jsx(Ez,{children:u.jsx(lz,{children:u.jsx(rU,{children:u.jsx(sU,{children:u.jsx(p0e,{})})})})})})})})})})})})})})})})})}typeof window<"u"&&(window.ragDB=bs,console.log(" ragDB exposed to window.ragDB for debugging"));const f0e=()=>{const e="AU9cY15vsAcz4tWwm5U0O-nMBqYTP3cT0dOHTpHqPCCD1n9fwdcD-xNcuzMv_eP-UtaB3PFHTuHoXeCW",t=document.createElement("script");t.src=`https://www.paypal.com/sdk/js?client-id=${e}&currency=USD`,t.async=!0,t.onload=()=>console.log(" PayPal SDK loaded successfully"),t.onerror=()=>console.error(" Failed to load PayPal SDK"),document.head.appendChild(t)};f0e();"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log(" Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},3600*1e3),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{if(t.state==="installed"&&navigator.serviceWorker.controller){console.log(" New version available! Please refresh the page.");const r=new CustomEvent("sw-update-available");window.dispatchEvent(r)}})})}).catch(e=>{console.error(" Service Worker registration failed:",e)})}):console.warn(" Service Workers not supported in this browser");const Lv=new URLSearchParams(window.location.search);if(Lv.get("reset")==="true"){console.log(" Reset parameter detected - clearing remote Lambda preference"),A3(),Lv.delete("reset");const e=Lv.toString(),t=window.location.pathname+(e?"?"+e:"")+window.location.hash;window.history.replaceState({},"",t)}Uj.createRoot(document.getElementById("root")).render(u.jsx(g0e,{}));export{U0e as $,ire as A,Vse as B,Ude as C,H0e as D,Zte as E,R0e as F,wp as G,zee as H,ore as I,Wse as J,zS as K,Z6 as L,tm as M,Na as N,DR as O,K$ as P,Bce as Q,ir as R,cg as S,Vs as T,qt as U,zie as V,W_ as W,_ie as X,kA as Y,TA as Z,L as _,iz as a,Aie as a$,O0e as a0,F0e as a1,B0e as a2,D0e as a3,Ru as a4,bS as a5,z0e as a6,M0e as a7,q0e as a8,$0e as a9,zM as aA,yd as aB,I0 as aC,Mz as aD,Dz as aE,s5 as aF,zs as aG,qr as aH,o5 as aI,sye as aJ,_t as aK,Ece as aL,yle as aM,bce as aN,PS as aO,SN as aP,ghe as aQ,J0e as aR,eye as aS,K0e as aT,wt as aU,X0e as aV,Kde as aW,Gde as aX,Hde as aY,Jue as aZ,Mc as a_,j0e as aa,Ste as ab,cd as ac,L0e as ad,oy as ae,Nce as af,Ute as ag,iS as ah,aA as ai,Pie as aj,bm as ak,jce as al,Qte as am,lg as an,ft as ao,Rt as ap,qR as aq,Tde as ar,$4 as as,Z0e as at,Yse as au,Xn as av,Pl as aw,LS as ax,gO as ay,qc as az,m0e as b,p0 as b$,Rc as b0,N0e as b1,An as b2,Ks as b3,R0 as b4,Hz as b5,y0e as b6,xC as b7,Q$ as b8,Al as b9,gS as bA,yl as bB,yA as bC,oae as bD,Op as bE,vt as bF,vM as bG,ci as bH,eae as bI,pS as bJ,nI as bK,dg as bL,sI as bM,I0e as bN,Fee as bO,kce as bP,yce as bQ,ale as bR,RS as bS,Jle as bT,Ace as bU,gg as bV,Ld as bW,d0 as bX,cce as bY,jhe as bZ,pg as b_,rC as ba,T0e as bb,U3 as bc,_a as bd,r1 as be,S0e as bf,j$ as bg,qs as bh,Jp as bi,lU as bj,dU as bk,t1 as bl,mg as bm,Kue as bn,Que as bo,w0e as bp,fa as bq,zc as br,Cce as bs,RM as bt,ry as bu,sy as bv,g0 as bw,DM as bx,PM as by,rce as bz,rs as c,iy as c$,nce as c0,EM as c1,ole as c2,lle as c3,oc as c4,HA as c5,cle as c6,IS as c7,sle as c8,hle as c9,vq as cA,jx as cB,gQ as cC,OJ as cD,Fc as cE,Tc as cF,oK as cG,eK as cH,Co as cI,EQ as cJ,Ia as cK,i_ as cL,YQ as cM,WJ as cN,J6 as cO,D0 as cP,Gz as cQ,b0e as cR,bs as cS,Jfe as cT,Yfe as cU,nye as cV,v0e as cW,Qfe as cX,x0e as cY,Oz as cZ,_ce as c_,Pd as ca,Ll as cb,FA as cc,DS as cd,_M as ce,mw as cf,tg as cg,CC as ch,wC as ci,Bw as cj,rg as ck,Sd as cl,l1 as cm,TW as cn,Iw as co,k0e as cp,eL as cq,lL as cr,$L as cs,tq as ct,M0 as cu,QW as cv,jG as cw,PW as cx,OL as cy,E0e as cz,tre as d,ere as e,Br as f,nre as g,Cr as h,$R as i,u as j,Qn as k,Fe as l,Ro as m,es as n,eoe as o,Ad as p,$M as q,_ as r,rre as s,P0e as t,Ic as u,rye as v,Uce as w,tye as x,vs as y,are as z};
