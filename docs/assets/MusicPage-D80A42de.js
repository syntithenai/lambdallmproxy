import{c as m,bj as H,bk as K,bl as O,b8 as U,r as i,j as e,bm as J,be as F,bn as W}from"./index-85uSmEIK.js";import{L as k}from"./loader-circle-CGe_WT8U.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],D=m("music",G);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],X=m("pause",Q);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ee=m("play",Z);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],te=m("skip-back",ae);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],le=m("skip-forward",se);async function re(t,s=10,r="relevance"){const n=await H(),o=await fetch(`${n}/youtube-search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,limit:Math.min(Math.max(s,1),50),order:r})});if(!o.ok){const j=await o.text();throw new Error(`YouTube search failed: ${j}`)}return o.json()}function ie(t){return t.map(s=>({id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,videoId:s.videoId,url:s.url,title:s.title||"Untitled",description:s.description||"",channel:s.channel||"Unknown",thumbnail:s.thumbnail||"",addedAt:Date.now()}))}function _(t){if(!t||!isFinite(t))return"0:00";const s=Math.floor(t/60),r=Math.floor(t%60);return`${s}:${r.toString().padStart(2,"0")}`}function ce(){const{playlist:t,savedPlaylists:s,currentTrack:r,isPlaying:n,togglePlayPause:o,nextTrack:j,previousTrack:z,loadPlaylist:E,deletePlaylist:A,refreshSavedPlaylists:u,savePlaylistAs:I,clearPlaylist:B}=K(),{currentTime:P,duration:v,isLoading:L}=O(),{showSuccess:c,showError:y,showWarning:d}=U(),[N,C]=i.useState(""),[x,w]=i.useState(!1),[S,h]=i.useState(""),[q,p]=i.useState(!1),[b,f]=i.useState("");i.useEffect(()=>{u()},[u]);const $=async()=>{const a=N.trim();if(!a){d("Please enter a playlist description");return}w(!0),h("Searching YouTube...");try{console.log("ðŸŽµ Creating playlist from query:",a);const l=await re(a,10,"relevance");if(!l.videos||l.videos.length===0){d("No videos found for that search. Try a different query."),w(!1),h("");return}console.log(`âœ… Found ${l.videos.length} videos`);const g=ie(l.videos);h(`Saving ${g.length} videos...`);const T=a.length>50?a.substring(0,50)+"...":a;await W.savePlaylist(T,g),c(`Created playlist "${T}" with ${g.length} videos!`),C(""),h(""),await u()}catch(l){console.error("Failed to create playlist:",l),y("Failed to create playlist: "+l.message)}finally{w(!1),h("")}},V=async a=>{try{await E(a),c("Playlist loaded")}catch(l){console.error("Failed to load playlist:",l),y("Failed to load playlist")}},R=async(a,l)=>{if(window.confirm(`Delete playlist "${l}"?`))try{await A(a),c("Playlist deleted")}catch(g){console.error("Failed to delete playlist:",g),y("Failed to delete playlist")}},M=async()=>{if(!b.trim()){d("Please enter a playlist name");return}if(t.length===0){d("Playlist is empty");return}try{await I(b.trim()),c(`Playlist "${b}" saved!`),p(!1),f(""),await u()}catch(a){console.error("Failed to save playlist:",a),y("Failed to save playlist")}},Y=()=>{if(t.length===0){d("Playlist is already empty");return}window.confirm(`Clear all ${t.length} tracks from current playlist?`)&&(B(),c("Playlist cleared"))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex h-full flex-col md:flex-row gap-4 p-4 bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"w-full md:w-1/3 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 overflow-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{className:"w-6 h-6 text-purple-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Playlists"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Create New Playlist"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:N,onChange:a=>C(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!x&&$()},placeholder:"e.g., 80s rock classics, relaxing jazz...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",disabled:x}),e.jsxs("button",{onClick:$,disabled:!N.trim()||x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[x?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(J,{className:"w-4 h-4"}),"Create"]})]}),x&&S&&e.jsxs("div",{className:"mt-2 text-sm text-purple-600 dark:text-purple-400 flex items-center gap-2",children:[e.jsx(k,{className:"w-3 h-3 animate-spin"}),S]})]}),e.jsx("div",{className:"space-y-2",children:s.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-8",children:"No saved playlists yet. Create one above!"}):s.slice().sort((a,l)=>a.name.localeCompare(l.name)).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsxs("button",{onClick:()=>V(a.id),className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.trackCount," tracks"]})]}),e.jsx("button",{onClick:()=>R(a.id,a.name),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete playlist",children:e.jsx(F,{className:"w-4 h-4"})})]},a.id))})]}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Current Playlist"}),t.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>p(!0),className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-1.5 transition-colors text-sm font-medium",title:"Save current playlist",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),e.jsxs("button",{onClick:Y,className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center gap-1.5 transition-colors text-sm font-medium",title:"Clear all tracks",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]})]}),t.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg text-white",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:r?.title||"No track selected"}),r?.channel&&e.jsx("p",{className:"text-sm text-purple-100 truncate",children:r.channel})]}),v>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"w-full bg-purple-700 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all",style:{width:`${P/v*100}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-purple-100 mt-1",children:[e.jsx("span",{children:_(P)}),e.jsx("span",{children:_(v)})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:z,className:"p-2 hover:bg-purple-600 rounded-full transition-colors",title:"Previous",children:e.jsx(te,{className:"w-6 h-6"})}),e.jsx("button",{onClick:o,className:"p-3 bg-white text-purple-600 hover:bg-purple-50 rounded-full transition-colors",title:n?"Pause":"Play",children:L?e.jsx(k,{className:"w-8 h-8 animate-spin"}):n?e.jsx(X,{className:"w-8 h-8"}):e.jsx(ee,{className:"w-8 h-8"})}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-purple-600 rounded-full transition-colors",title:"Next",children:e.jsx(le,{className:"w-6 h-6"})})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(D,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tracks in playlist. Create or load a playlist to get started!"})]}):e.jsx("div",{className:"space-y-2",children:t.map(a=>e.jsx("div",{className:`p-3 rounded-lg transition-colors ${r?.id===a.id?"bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500":"bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[a.thumbnail&&e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-20 h-14 object-cover rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:a.title}),a.channel&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:a.channel}),a.duration&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:a.duration})]}),r?.id===a.id&&n&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1 h-3 bg-purple-500 animate-pulse"}),e.jsx("div",{className:"w-1 h-4 bg-purple-500 animate-pulse",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-1 h-3 bg-purple-500 animate-pulse",style:{animationDelay:"0.4s"}})]})]})},a.id))})]})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Save Playlist"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["Enter a name for your playlist with ",t.length," tracks:"]}),e.jsx("input",{type:"text",value:b,onChange:a=>f(a.target.value),onKeyDown:a=>{a.key==="Enter"&&M(),a.key==="Escape"&&(p(!1),f(""))},placeholder:"My Awesome Playlist",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-gray-100 mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>{p(!1),f("")},className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:"Save Playlist"})]})]})})]})}export{ce as default};
