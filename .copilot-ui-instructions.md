# 🤖 COPILOT UI AUTOMATION INSTRUCTIONS

## 🎯 CRITICAL WORKFLOW FOR ALL UI CHANGES

### STEP 1: IDENTIFY UI CHANGE TYPE
When user requests UI changes, determine:
- HTML structure changes → Edit `ui/index_template_modular.html`
- JavaScript functionality → Edit appropriate file in `ui/js/`
- CSS styling → Edit `ui/css/styles.css`

### STEP 2: APPLY CHANGES TO SOURCE FILES
**NEVER EDIT GENERATED FILES!** Always edit source files in `ui/` folder:

```
ui/
├── index_template_modular.html    # ← HTML changes here
├── css/styles.css                # ← CSS changes here  
└── js/
    ├── utils.js                  # ← Real-time monitoring, utilities
    ├── settings.js               # ← Settings dialog, API keys (MUST load before auth.js)
    ├── auth.js                   # ← Authentication, Google OAuth
    ├── samples.js                # ← Sample queries, query persistence
    ├── events.js                 # ← Event processing, streaming
    ├── streaming.js              # ← Streaming response handling
    └── main.js                   # ← Main app logic, form handling
```

**⚠️ CRITICAL: JavaScript Loading Order**
The script loading order in `index_template_modular.html` is:
1. `utils.js` - Core utilities
2. `settings.js` - **MUST be before auth.js** (contains `updateSubmitButton`)
3. `auth.js` - Calls functions from settings.js
4. Other modules

Never change this order without understanding dependencies!

### STEP 3: REBUILD AUTOMATICALLY
After making ANY UI changes, ALWAYS run:
```bash
cd /home/stever/projects/lambdallmproxy
bash scripts/build-docs.sh
```

### STEP 4: TEST IN BUILT VERSION
Test changes at: `http://localhost:8081/docs/index.html`

---

## 🚫 FORBIDDEN ACTIONS
- ❌ Never edit `docs/index.html` directly
- ❌ Never edit `test.html` for production changes  
- ❌ Never make UI changes without rebuilding
- ❌ Never assume changes work without testing built version

## ✅ REQUIRED ACTIONS  
- ✅ Always edit `ui/` source files
- ✅ Always run `bash scripts/build-docs.sh` after changes
- ✅ Always test in `docs/index.html` (built version)
- ✅ Always preserve existing functionality when adding features

---

## 🔄 AUTOMATION COMMANDS

### Quick UI Development
```bash
# Build only
./scripts/ui-dev.sh build

# Build and test locally  
./scripts/ui-dev.sh test

# Watch for changes (if inotify available)
./scripts/ui-dev.sh watch

# Build and deploy to production
./scripts/ui-dev.sh deploy
```



## 🆘 EMERGENCY RECOVERY
If UI breaks after changes:
1. Check browser console for JavaScript errors
2. Verify all files exist in `ui/` folder
3. Rebuild: `bash scripts/build-docs.sh`
4. If still broken, revert changes and rebuild
5. Check syntax in template files

---

**🎯 REMEMBER: Source files in `ui/` → Build → Test in `docs/`**